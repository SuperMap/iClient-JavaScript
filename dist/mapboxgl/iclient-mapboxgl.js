/*!
 * 
 *          iclient-mapboxgl.(https://iclient.supermap.io)
 *          CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd
 *          license: Apache-2.0
 *          version: v10.1.1
 *
 */
/******/ (function() { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ 937:
/***/ (function(module) {

(function (self) {
  'use strict'; // if __disableNativeFetch is set to true, the it will always polyfill fetch
  // with Ajax.

  if (!self.__disableNativeFetch && self.fetch) {
    return;
  }

  function normalizeName(name) {
    if (typeof name !== 'string') {
      name = String(name);
    }

    if (/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(name)) {
      throw new TypeError('Invalid character in header field name');
    }

    return name.toLowerCase();
  }

  function normalizeValue(value) {
    if (typeof value !== 'string') {
      value = String(value);
    }

    return value;
  }

  function Headers(headers) {
    this.map = {};

    if (headers instanceof Headers) {
      headers.forEach(function (value, name) {
        this.append(name, value);
      }, this);
    } else if (headers) {
      Object.getOwnPropertyNames(headers).forEach(function (name) {
        this.append(name, headers[name]);
      }, this);
    }
  }

  Headers.prototype.append = function (name, value) {
    name = normalizeName(name);
    value = normalizeValue(value);
    var list = this.map[name];

    if (!list) {
      list = [];
      this.map[name] = list;
    }

    list.push(value);
  };

  Headers.prototype['delete'] = function (name) {
    delete this.map[normalizeName(name)];
  };

  Headers.prototype.get = function (name) {
    var values = this.map[normalizeName(name)];
    return values ? values[0] : null;
  };

  Headers.prototype.getAll = function (name) {
    return this.map[normalizeName(name)] || [];
  };

  Headers.prototype.has = function (name) {
    return this.map.hasOwnProperty(normalizeName(name));
  };

  Headers.prototype.set = function (name, value) {
    this.map[normalizeName(name)] = [normalizeValue(value)];
  };

  Headers.prototype.forEach = function (callback, thisArg) {
    Object.getOwnPropertyNames(this.map).forEach(function (name) {
      this.map[name].forEach(function (value) {
        callback.call(thisArg, value, name, this);
      }, this);
    }, this);
  };

  function consumed(body) {
    if (body.bodyUsed) {
      return Promise.reject(new TypeError('Already read'));
    }

    body.bodyUsed = true;
  }

  function fileReaderReady(reader) {
    return new Promise(function (resolve, reject) {
      reader.onload = function () {
        resolve(reader.result);
      };

      reader.onerror = function () {
        reject(reader.error);
      };
    });
  }

  function readBlobAsArrayBuffer(blob) {
    var reader = new FileReader();
    reader.readAsArrayBuffer(blob);
    return fileReaderReady(reader);
  }

  function readBlobAsText(blob, options) {
    var reader = new FileReader();
    var contentType = options.headers.map['content-type'] ? options.headers.map['content-type'].toString() : '';
    var regex = /charset\=[0-9a-zA-Z\-\_]*;?/;

    var _charset = blob.type.match(regex) || contentType.match(regex);

    var args = [blob];

    if (_charset) {
      args.push(_charset[0].replace(/^charset\=/, '').replace(/;$/, ''));
    }

    reader.readAsText.apply(reader, args);
    return fileReaderReady(reader);
  }

  var support = {
    blob: 'FileReader' in self && 'Blob' in self && function () {
      try {
        new Blob();
        return true;
      } catch (e) {
        return false;
      }
    }(),
    formData: 'FormData' in self,
    arrayBuffer: 'ArrayBuffer' in self
  };

  function Body() {
    this.bodyUsed = false;

    this._initBody = function (body, options) {
      this._bodyInit = body;

      if (typeof body === 'string') {
        this._bodyText = body;
      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {
        this._bodyBlob = body;
        this._options = options;
      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {
        this._bodyFormData = body;
      } else if (!body) {
        this._bodyText = '';
      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {// Only support ArrayBuffers for POST method.
        // Receiving ArrayBuffers happens via Blobs, instead.
      } else {
        throw new Error('unsupported BodyInit type');
      }
    };

    if (support.blob) {
      this.blob = function () {
        var rejected = consumed(this);

        if (rejected) {
          return rejected;
        }

        if (this._bodyBlob) {
          return Promise.resolve(this._bodyBlob);
        } else if (this._bodyFormData) {
          throw new Error('could not read FormData body as blob');
        } else {
          return Promise.resolve(new Blob([this._bodyText]));
        }
      };

      this.arrayBuffer = function () {
        return this.blob().then(readBlobAsArrayBuffer);
      };

      this.text = function () {
        var rejected = consumed(this);

        if (rejected) {
          return rejected;
        }

        if (this._bodyBlob) {
          return readBlobAsText(this._bodyBlob, this._options);
        } else if (this._bodyFormData) {
          throw new Error('could not read FormData body as text');
        } else {
          return Promise.resolve(this._bodyText);
        }
      };
    } else {
      this.text = function () {
        var rejected = consumed(this);
        return rejected ? rejected : Promise.resolve(this._bodyText);
      };
    }

    if (support.formData) {
      this.formData = function () {
        return this.text().then(decode);
      };
    }

    this.json = function () {
      return this.text().then(JSON.parse);
    };

    return this;
  } // HTTP methods whose capitalization should be normalized


  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];

  function normalizeMethod(method) {
    var upcased = method.toUpperCase();
    return methods.indexOf(upcased) > -1 ? upcased : method;
  }

  function Request(input, options) {
    options = options || {};
    var body = options.body;

    if (Request.prototype.isPrototypeOf(input)) {
      if (input.bodyUsed) {
        throw new TypeError('Already read');
      }

      this.url = input.url;
      this.credentials = input.credentials;

      if (!options.headers) {
        this.headers = new Headers(input.headers);
      }

      this.method = input.method;
      this.mode = input.mode;

      if (!body) {
        body = input._bodyInit;
        input.bodyUsed = true;
      }
    } else {
      this.url = input;
    }

    this.credentials = options.credentials || this.credentials || 'omit';

    if (options.headers || !this.headers) {
      this.headers = new Headers(options.headers);
    }

    this.method = normalizeMethod(options.method || this.method || 'GET');
    this.mode = options.mode || this.mode || null;
    this.referrer = null;

    if ((this.method === 'GET' || this.method === 'HEAD') && body) {
      throw new TypeError('Body not allowed for GET or HEAD requests');
    }

    this._initBody(body, options);
  }

  Request.prototype.clone = function () {
    return new Request(this);
  };

  function decode(body) {
    var form = new FormData();
    body.trim().split('&').forEach(function (bytes) {
      if (bytes) {
        var split = bytes.split('=');
        var name = split.shift().replace(/\+/g, ' ');
        var value = split.join('=').replace(/\+/g, ' ');
        form.append(decodeURIComponent(name), decodeURIComponent(value));
      }
    });
    return form;
  }

  function headers(xhr) {
    var head = new Headers();
    var pairs = xhr.getAllResponseHeaders().trim().split('\n');
    pairs.forEach(function (header) {
      var split = header.trim().split(':');
      var key = split.shift().trim();
      var value = split.join(':').trim();
      head.append(key, value);
    });
    return head;
  }

  Body.call(Request.prototype);

  function Response(bodyInit, options) {
    if (!options) {
      options = {};
    }

    this._initBody(bodyInit, options);

    this.type = 'default';
    this.status = options.status;
    this.ok = this.status >= 200 && this.status < 300;
    this.statusText = options.statusText;
    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers);
    this.url = options.url || '';
  }

  Body.call(Response.prototype);

  Response.prototype.clone = function () {
    return new Response(this._bodyInit, {
      status: this.status,
      statusText: this.statusText,
      headers: new Headers(this.headers),
      url: this.url
    });
  };

  Response.error = function () {
    var response = new Response(null, {
      status: 0,
      statusText: ''
    });
    response.type = 'error';
    return response;
  };

  var redirectStatuses = [301, 302, 303, 307, 308];

  Response.redirect = function (url, status) {
    if (redirectStatuses.indexOf(status) === -1) {
      throw new RangeError('Invalid status code');
    }

    return new Response(null, {
      status: status,
      headers: {
        location: url
      }
    });
  };

  self.Headers = Headers;
  self.Request = Request;
  self.Response = Response;

  self.fetch = function (input, init) {
    return new Promise(function (resolve, reject) {
      var request;

      if (Request.prototype.isPrototypeOf(input) && !init) {
        request = input;
      } else {
        request = new Request(input, init);
      }

      var xhr = new XMLHttpRequest();

      function responseURL() {
        if ('responseURL' in xhr) {
          return xhr.responseURL;
        } // Avoid security warnings on getResponseHeader when not allowed by CORS


        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {
          return xhr.getResponseHeader('X-Request-URL');
        }

        return;
      }

      var __onLoadHandled = false;

      function onload() {
        if (xhr.readyState !== 4) {
          return;
        }

        var status = xhr.status === 1223 ? 204 : xhr.status;

        if (status < 100 || status > 599) {
          if (__onLoadHandled) {
            return;
          } else {
            __onLoadHandled = true;
          }

          reject(new TypeError('Network request failed'));
          return;
        }

        var options = {
          status: status,
          statusText: xhr.statusText,
          headers: headers(xhr),
          url: responseURL()
        };
        var body = 'response' in xhr ? xhr.response : xhr.responseText;

        if (__onLoadHandled) {
          return;
        } else {
          __onLoadHandled = true;
        }

        resolve(new Response(body, options));
      }

      xhr.onreadystatechange = onload;
      xhr.onload = onload;

      xhr.onerror = function () {
        if (__onLoadHandled) {
          return;
        } else {
          __onLoadHandled = true;
        }

        reject(new TypeError('Network request failed'));
      };

      xhr.open(request.method, request.url, true); // `withCredentials` should be setted after calling `.open` in IE10
      // http://stackoverflow.com/a/19667959/1219343

      try {
        if (request.credentials === 'include') {
          if ('withCredentials' in xhr) {
            xhr.withCredentials = true;
          } else {
            console && console.warn && console.warn('withCredentials is not supported, you can ignore this warning');
          }
        }
      } catch (e) {
        console && console.warn && console.warn('set withCredentials error:' + e);
      }

      if ('responseType' in xhr && support.blob) {
        xhr.responseType = 'blob';
      }

      request.headers.forEach(function (value, name) {
        xhr.setRequestHeader(name, value);
      });
      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);
    });
  };

  self.fetch.polyfill = true; // Support CommonJS

  if ( true && module.exports) {
    module.exports = self.fetch;
  }
})(typeof self !== 'undefined' ? self : this);

/***/ }),

/***/ 238:
/***/ (function(module, exports) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (global, factory) {
  if (true) {
    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports, module], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
		__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
		(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
		__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  } else { var mod; }
})(this, function (exports, module) {
  'use strict';

  var defaultOptions = {
    timeout: 5000,
    jsonpCallback: 'callback',
    jsonpCallbackFunction: null
  };

  function generateCallbackFunction() {
    return 'jsonp_' + Date.now() + '_' + Math.ceil(Math.random() * 100000);
  }

  function clearFunction(functionName) {
    // IE8 throws an exception when you try to delete a property on window
    // http://stackoverflow.com/a/1824228/751089
    try {
      delete window[functionName];
    } catch (e) {
      window[functionName] = undefined;
    }
  }

  function removeScript(scriptId) {
    var script = document.getElementById(scriptId);

    if (script) {
      document.getElementsByTagName('head')[0].removeChild(script);
    }
  }

  function fetchJsonp(_url) {
    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1]; // to avoid param reassign

    var url = _url;
    var timeout = options.timeout || defaultOptions.timeout;
    var jsonpCallback = options.jsonpCallback || defaultOptions.jsonpCallback;
    var timeoutId = undefined;
    return new Promise(function (resolve, reject) {
      var callbackFunction = options.jsonpCallbackFunction || generateCallbackFunction();
      var scriptId = jsonpCallback + '_' + callbackFunction;

      window[callbackFunction] = function (response) {
        resolve({
          ok: true,
          // keep consistent with fetch API
          json: function json() {
            return Promise.resolve(response);
          }
        });
        if (timeoutId) clearTimeout(timeoutId);
        removeScript(scriptId);
        clearFunction(callbackFunction);
      }; // Check if the user set their own params, and if not add a ? to start a list of params


      url += url.indexOf('?') === -1 ? '?' : '&';
      var jsonpScript = document.createElement('script');
      jsonpScript.setAttribute('src', '' + url + jsonpCallback + '=' + callbackFunction);

      if (options.charset) {
        jsonpScript.setAttribute('charset', options.charset);
      }

      jsonpScript.id = scriptId;
      document.getElementsByTagName('head')[0].appendChild(jsonpScript);
      timeoutId = setTimeout(function () {
        reject(new Error('JSONP request to ' + _url + ' timed out'));
        clearFunction(callbackFunction);
        removeScript(scriptId);

        window[callbackFunction] = function () {
          clearFunction(callbackFunction);
        };
      }, timeout); // Caught if got 404/500

      jsonpScript.onerror = function () {
        reject(new Error('JSONP request to ' + _url + ' failed'));
        clearFunction(callbackFunction);
        removeScript(scriptId);
        if (timeoutId) clearTimeout(timeoutId);
      };
    });
  } // export as global function

  /*
  let local;
  if (typeof global !== 'undefined') {
    local = global;
  } else if (typeof self !== 'undefined') {
    local = self;
  } else {
    try {
      local = Function('return this')();
    } catch (e) {
      throw new Error('polyfill failed because global object is unavailable in this environment');
    }
  }
  local.fetchJsonp = fetchJsonp;
  */


  module.exports = fetchJsonp;
});

/***/ }),

/***/ 820:
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */

/** Used as references for various `Number` constants. */
var MAX_SAFE_INTEGER = 9007199254740991;
/** `Object#toString` result references. */

var argsTag = '[object Arguments]',
    funcTag = '[object Function]',
    genTag = '[object GeneratorFunction]',
    mapTag = '[object Map]',
    objectTag = '[object Object]',
    promiseTag = '[object Promise]',
    setTag = '[object Set]',
    weakMapTag = '[object WeakMap]';
var dataViewTag = '[object DataView]';
/**
 * Used to match `RegExp`
 * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).
 */

var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;
/** Used to detect host constructors (Safari). */

var reIsHostCtor = /^\[object .+?Constructor\]$/;
/** Used to detect unsigned integer values. */

var reIsUint = /^(?:0|[1-9]\d*)$/;
/** Detect free variable `global` from Node.js. */

var freeGlobal = (typeof __webpack_require__.g === "undefined" ? "undefined" : _typeof(__webpack_require__.g)) == 'object' && __webpack_require__.g && __webpack_require__.g.Object === Object && __webpack_require__.g;
/** Detect free variable `self`. */

var freeSelf = (typeof self === "undefined" ? "undefined" : _typeof(self)) == 'object' && self && self.Object === Object && self;
/** Used as a reference to the global object. */

var root = freeGlobal || freeSelf || Function('return this')();
/**
 * A specialized version of `_.map` for arrays without support for iteratee
 * shorthands.
 *
 * @private
 * @param {Array} [array] The array to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array} Returns the new mapped array.
 */

function arrayMap(array, iteratee) {
  var index = -1,
      length = array ? array.length : 0,
      result = Array(length);

  while (++index < length) {
    result[index] = iteratee(array[index], index, array);
  }

  return result;
}
/**
 * The base implementation of `_.times` without support for iteratee shorthands
 * or max array length checks.
 *
 * @private
 * @param {number} n The number of times to invoke `iteratee`.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array} Returns the array of results.
 */


function baseTimes(n, iteratee) {
  var index = -1,
      result = Array(n);

  while (++index < n) {
    result[index] = iteratee(index);
  }

  return result;
}
/**
 * The base implementation of `_.toPairs` and `_.toPairsIn` which creates an array
 * of key-value pairs for `object` corresponding to the property names of `props`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {Array} props The property names to get values for.
 * @returns {Object} Returns the key-value pairs.
 */


function baseToPairs(object, props) {
  return arrayMap(props, function (key) {
    return [key, object[key]];
  });
}
/**
 * Gets the value at `key` of `object`.
 *
 * @private
 * @param {Object} [object] The object to query.
 * @param {string} key The key of the property to get.
 * @returns {*} Returns the property value.
 */


function getValue(object, key) {
  return object == null ? undefined : object[key];
}
/**
 * Checks if `value` is a host object in IE < 9.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a host object, else `false`.
 */


function isHostObject(value) {
  // Many host objects are `Object` objects that can coerce to strings
  // despite having improperly defined `toString` methods.
  var result = false;

  if (value != null && typeof value.toString != 'function') {
    try {
      result = !!(value + '');
    } catch (e) {}
  }

  return result;
}
/**
 * Converts `map` to its key-value pairs.
 *
 * @private
 * @param {Object} map The map to convert.
 * @returns {Array} Returns the key-value pairs.
 */


function mapToArray(map) {
  var index = -1,
      result = Array(map.size);
  map.forEach(function (value, key) {
    result[++index] = [key, value];
  });
  return result;
}
/**
 * Creates a unary function that invokes `func` with its argument transformed.
 *
 * @private
 * @param {Function} func The function to wrap.
 * @param {Function} transform The argument transform.
 * @returns {Function} Returns the new function.
 */


function overArg(func, transform) {
  return function (arg) {
    return func(transform(arg));
  };
}
/**
 * Converts `set` to its value-value pairs.
 *
 * @private
 * @param {Object} set The set to convert.
 * @returns {Array} Returns the value-value pairs.
 */


function setToPairs(set) {
  var index = -1,
      result = Array(set.size);
  set.forEach(function (value) {
    result[++index] = [value, value];
  });
  return result;
}
/** Used for built-in method references. */


var funcProto = Function.prototype,
    objectProto = Object.prototype;
/** Used to detect overreaching core-js shims. */

var coreJsData = root['__core-js_shared__'];
/** Used to detect methods masquerading as native. */

var maskSrcKey = function () {
  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');
  return uid ? 'Symbol(src)_1.' + uid : '';
}();
/** Used to resolve the decompiled source of functions. */


var funcToString = funcProto.toString;
/** Used to check objects for own properties. */

var hasOwnProperty = objectProto.hasOwnProperty;
/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */

var objectToString = objectProto.toString;
/** Used to detect if a method is native. */

var reIsNative = RegExp('^' + funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$');
/** Built-in value references. */

var propertyIsEnumerable = objectProto.propertyIsEnumerable;
/* Built-in method references for those with the same name as other `lodash` methods. */

var nativeKeys = overArg(Object.keys, Object);
/* Built-in method references that are verified to be native. */

var DataView = getNative(root, 'DataView'),
    Map = getNative(root, 'Map'),
    Promise = getNative(root, 'Promise'),
    Set = getNative(root, 'Set'),
    WeakMap = getNative(root, 'WeakMap');
/** Used to detect maps, sets, and weakmaps. */

var dataViewCtorString = toSource(DataView),
    mapCtorString = toSource(Map),
    promiseCtorString = toSource(Promise),
    setCtorString = toSource(Set),
    weakMapCtorString = toSource(WeakMap);
/**
 * Creates an array of the enumerable property names of the array-like `value`.
 *
 * @private
 * @param {*} value The value to query.
 * @param {boolean} inherited Specify returning inherited property names.
 * @returns {Array} Returns the array of property names.
 */

function arrayLikeKeys(value, inherited) {
  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.
  // Safari 9 makes `arguments.length` enumerable in strict mode.
  var result = isArray(value) || isArguments(value) ? baseTimes(value.length, String) : [];
  var length = result.length,
      skipIndexes = !!length;

  for (var key in value) {
    if ((inherited || hasOwnProperty.call(value, key)) && !(skipIndexes && (key == 'length' || isIndex(key, length)))) {
      result.push(key);
    }
  }

  return result;
}
/**
 * The base implementation of `getTag`.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the `toStringTag`.
 */


function baseGetTag(value) {
  return objectToString.call(value);
}
/**
 * The base implementation of `_.isNative` without bad shim checks.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a native function,
 *  else `false`.
 */


function baseIsNative(value) {
  if (!isObject(value) || isMasked(value)) {
    return false;
  }

  var pattern = isFunction(value) || isHostObject(value) ? reIsNative : reIsHostCtor;
  return pattern.test(toSource(value));
}
/**
 * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 */


function baseKeys(object) {
  if (!isPrototype(object)) {
    return nativeKeys(object);
  }

  var result = [];

  for (var key in Object(object)) {
    if (hasOwnProperty.call(object, key) && key != 'constructor') {
      result.push(key);
    }
  }

  return result;
}
/**
 * Creates a `_.toPairs` or `_.toPairsIn` function.
 *
 * @private
 * @param {Function} keysFunc The function to get the keys of a given object.
 * @returns {Function} Returns the new pairs function.
 */


function createToPairs(keysFunc) {
  return function (object) {
    var tag = getTag(object);

    if (tag == mapTag) {
      return mapToArray(object);
    }

    if (tag == setTag) {
      return setToPairs(object);
    }

    return baseToPairs(object, keysFunc(object));
  };
}
/**
 * Gets the native function at `key` of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {string} key The key of the method to get.
 * @returns {*} Returns the function if it's native, else `undefined`.
 */


function getNative(object, key) {
  var value = getValue(object, key);
  return baseIsNative(value) ? value : undefined;
}
/**
 * Gets the `toStringTag` of `value`.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the `toStringTag`.
 */


var getTag = baseGetTag; // Fallback for data views, maps, sets, and weak maps in IE 11,
// for data views in Edge < 14, and promises in Node.js.

if (DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag || Map && getTag(new Map()) != mapTag || Promise && getTag(Promise.resolve()) != promiseTag || Set && getTag(new Set()) != setTag || WeakMap && getTag(new WeakMap()) != weakMapTag) {
  getTag = function getTag(value) {
    var result = objectToString.call(value),
        Ctor = result == objectTag ? value.constructor : undefined,
        ctorString = Ctor ? toSource(Ctor) : undefined;

    if (ctorString) {
      switch (ctorString) {
        case dataViewCtorString:
          return dataViewTag;

        case mapCtorString:
          return mapTag;

        case promiseCtorString:
          return promiseTag;

        case setCtorString:
          return setTag;

        case weakMapCtorString:
          return weakMapTag;
      }
    }

    return result;
  };
}
/**
 * Checks if `value` is a valid array-like index.
 *
 * @private
 * @param {*} value The value to check.
 * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.
 * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.
 */


function isIndex(value, length) {
  length = length == null ? MAX_SAFE_INTEGER : length;
  return !!length && (typeof value == 'number' || reIsUint.test(value)) && value > -1 && value % 1 == 0 && value < length;
}
/**
 * Checks if `func` has its source masked.
 *
 * @private
 * @param {Function} func The function to check.
 * @returns {boolean} Returns `true` if `func` is masked, else `false`.
 */


function isMasked(func) {
  return !!maskSrcKey && maskSrcKey in func;
}
/**
 * Checks if `value` is likely a prototype object.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.
 */


function isPrototype(value) {
  var Ctor = value && value.constructor,
      proto = typeof Ctor == 'function' && Ctor.prototype || objectProto;
  return value === proto;
}
/**
 * Converts `func` to its source code.
 *
 * @private
 * @param {Function} func The function to process.
 * @returns {string} Returns the source code.
 */


function toSource(func) {
  if (func != null) {
    try {
      return funcToString.call(func);
    } catch (e) {}

    try {
      return func + '';
    } catch (e) {}
  }

  return '';
}
/**
 * Checks if `value` is likely an `arguments` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an `arguments` object,
 *  else `false`.
 * @example
 *
 * _.isArguments(function() { return arguments; }());
 * // => true
 *
 * _.isArguments([1, 2, 3]);
 * // => false
 */


function isArguments(value) {
  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.
  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') && (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);
}
/**
 * Checks if `value` is classified as an `Array` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an array, else `false`.
 * @example
 *
 * _.isArray([1, 2, 3]);
 * // => true
 *
 * _.isArray(document.body.children);
 * // => false
 *
 * _.isArray('abc');
 * // => false
 *
 * _.isArray(_.noop);
 * // => false
 */


var isArray = Array.isArray;
/**
 * Checks if `value` is array-like. A value is considered array-like if it's
 * not a function and has a `value.length` that's an integer greater than or
 * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is array-like, else `false`.
 * @example
 *
 * _.isArrayLike([1, 2, 3]);
 * // => true
 *
 * _.isArrayLike(document.body.children);
 * // => true
 *
 * _.isArrayLike('abc');
 * // => true
 *
 * _.isArrayLike(_.noop);
 * // => false
 */

function isArrayLike(value) {
  return value != null && isLength(value.length) && !isFunction(value);
}
/**
 * This method is like `_.isArrayLike` except that it also checks if `value`
 * is an object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an array-like object,
 *  else `false`.
 * @example
 *
 * _.isArrayLikeObject([1, 2, 3]);
 * // => true
 *
 * _.isArrayLikeObject(document.body.children);
 * // => true
 *
 * _.isArrayLikeObject('abc');
 * // => false
 *
 * _.isArrayLikeObject(_.noop);
 * // => false
 */


function isArrayLikeObject(value) {
  return isObjectLike(value) && isArrayLike(value);
}
/**
 * Checks if `value` is classified as a `Function` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a function, else `false`.
 * @example
 *
 * _.isFunction(_);
 * // => true
 *
 * _.isFunction(/abc/);
 * // => false
 */


function isFunction(value) {
  // The use of `Object#toString` avoids issues with the `typeof` operator
  // in Safari 8-9 which returns 'object' for typed array and other constructors.
  var tag = isObject(value) ? objectToString.call(value) : '';
  return tag == funcTag || tag == genTag;
}
/**
 * Checks if `value` is a valid array-like length.
 *
 * **Note:** This method is loosely based on
 * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.
 * @example
 *
 * _.isLength(3);
 * // => true
 *
 * _.isLength(Number.MIN_VALUE);
 * // => false
 *
 * _.isLength(Infinity);
 * // => false
 *
 * _.isLength('3');
 * // => false
 */


function isLength(value) {
  return typeof value == 'number' && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
}
/**
 * Checks if `value` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */


function isObject(value) {
  var type = _typeof(value);

  return !!value && (type == 'object' || type == 'function');
}
/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */


function isObjectLike(value) {
  return !!value && _typeof(value) == 'object';
}
/**
 * Creates an array of the own enumerable property names of `object`.
 *
 * **Note:** Non-object values are coerced to objects. See the
 * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)
 * for more details.
 *
 * @static
 * @since 0.1.0
 * @memberOf _
 * @category Object
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 *   this.b = 2;
 * }
 *
 * Foo.prototype.c = 3;
 *
 * _.keys(new Foo);
 * // => ['a', 'b'] (iteration order is not guaranteed)
 *
 * _.keys('hi');
 * // => ['0', '1']
 */


function keys(object) {
  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);
}
/**
 * Creates an array of own enumerable string keyed-value pairs for `object`
 * which can be consumed by `_.fromPairs`. If `object` is a map or set, its
 * entries are returned.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @alias entries
 * @category Object
 * @param {Object} object The object to query.
 * @returns {Array} Returns the key-value pairs.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 *   this.b = 2;
 * }
 *
 * Foo.prototype.c = 3;
 *
 * _.toPairs(new Foo);
 * // => [['a', 1], ['b', 2]] (iteration order is not guaranteed)
 */


var toPairs = createToPairs(keys);
module.exports = toPairs;

/***/ }),

/***/ 957:
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

(function (global, factory) {
  ( false ? 0 : _typeof(exports)) === 'object' && "object" !== 'undefined' ? factory() :  true ? !(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
		__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
		(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :
		__WEBPACK_AMD_DEFINE_FACTORY__),
		__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)) : 0;
})(this, function () {
  'use strict';
  /**
   * @this {Promise}
   */

  function finallyConstructor(callback) {
    var constructor = this.constructor;
    return this.then(function (value) {
      // @ts-ignore
      return constructor.resolve(callback()).then(function () {
        return value;
      });
    }, function (reason) {
      // @ts-ignore
      return constructor.resolve(callback()).then(function () {
        // @ts-ignore
        return constructor.reject(reason);
      });
    });
  } // Store setTimeout reference so promise-polyfill will be unaffected by
  // other code modifying setTimeout (like sinon.useFakeTimers())


  var setTimeoutFunc = setTimeout;

  function isArray(x) {
    return Boolean(x && typeof x.length !== 'undefined');
  }

  function noop() {} // Polyfill for Function.prototype.bind


  function bind(fn, thisArg) {
    return function () {
      fn.apply(thisArg, arguments);
    };
  }
  /**
   * @constructor
   * @param {Function} fn
   */


  function Promise(fn) {
    if (!(this instanceof Promise)) throw new TypeError('Promises must be constructed via new');
    if (typeof fn !== 'function') throw new TypeError('not a function');
    /** @type {!number} */

    this._state = 0;
    /** @type {!boolean} */

    this._handled = false;
    /** @type {Promise|undefined} */

    this._value = undefined;
    /** @type {!Array<!Function>} */

    this._deferreds = [];
    doResolve(fn, this);
  }

  function handle(self, deferred) {
    while (self._state === 3) {
      self = self._value;
    }

    if (self._state === 0) {
      self._deferreds.push(deferred);

      return;
    }

    self._handled = true;

    Promise._immediateFn(function () {
      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;

      if (cb === null) {
        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);
        return;
      }

      var ret;

      try {
        ret = cb(self._value);
      } catch (e) {
        reject(deferred.promise, e);
        return;
      }

      resolve(deferred.promise, ret);
    });
  }

  function resolve(self, newValue) {
    try {
      // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure
      if (newValue === self) throw new TypeError('A promise cannot be resolved with itself.');

      if (newValue && (_typeof(newValue) === 'object' || typeof newValue === 'function')) {
        var then = newValue.then;

        if (newValue instanceof Promise) {
          self._state = 3;
          self._value = newValue;
          finale(self);
          return;
        } else if (typeof then === 'function') {
          doResolve(bind(then, newValue), self);
          return;
        }
      }

      self._state = 1;
      self._value = newValue;
      finale(self);
    } catch (e) {
      reject(self, e);
    }
  }

  function reject(self, newValue) {
    self._state = 2;
    self._value = newValue;
    finale(self);
  }

  function finale(self) {
    if (self._state === 2 && self._deferreds.length === 0) {
      Promise._immediateFn(function () {
        if (!self._handled) {
          Promise._unhandledRejectionFn(self._value);
        }
      });
    }

    for (var i = 0, len = self._deferreds.length; i < len; i++) {
      handle(self, self._deferreds[i]);
    }

    self._deferreds = null;
  }
  /**
   * @constructor
   */


  function Handler(onFulfilled, onRejected, promise) {
    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;
    this.onRejected = typeof onRejected === 'function' ? onRejected : null;
    this.promise = promise;
  }
  /**
   * Take a potentially misbehaving resolver function and make sure
   * onFulfilled and onRejected are only called once.
   *
   * Makes no guarantees about asynchrony.
   */


  function doResolve(fn, self) {
    var done = false;

    try {
      fn(function (value) {
        if (done) return;
        done = true;
        resolve(self, value);
      }, function (reason) {
        if (done) return;
        done = true;
        reject(self, reason);
      });
    } catch (ex) {
      if (done) return;
      done = true;
      reject(self, ex);
    }
  }

  Promise.prototype['catch'] = function (onRejected) {
    return this.then(null, onRejected);
  };

  Promise.prototype.then = function (onFulfilled, onRejected) {
    // @ts-ignore
    var prom = new this.constructor(noop);
    handle(this, new Handler(onFulfilled, onRejected, prom));
    return prom;
  };

  Promise.prototype['finally'] = finallyConstructor;

  Promise.all = function (arr) {
    return new Promise(function (resolve, reject) {
      if (!isArray(arr)) {
        return reject(new TypeError('Promise.all accepts an array'));
      }

      var args = Array.prototype.slice.call(arr);
      if (args.length === 0) return resolve([]);
      var remaining = args.length;

      function res(i, val) {
        try {
          if (val && (_typeof(val) === 'object' || typeof val === 'function')) {
            var then = val.then;

            if (typeof then === 'function') {
              then.call(val, function (val) {
                res(i, val);
              }, reject);
              return;
            }
          }

          args[i] = val;

          if (--remaining === 0) {
            resolve(args);
          }
        } catch (ex) {
          reject(ex);
        }
      }

      for (var i = 0; i < args.length; i++) {
        res(i, args[i]);
      }
    });
  };

  Promise.resolve = function (value) {
    if (value && _typeof(value) === 'object' && value.constructor === Promise) {
      return value;
    }

    return new Promise(function (resolve) {
      resolve(value);
    });
  };

  Promise.reject = function (value) {
    return new Promise(function (resolve, reject) {
      reject(value);
    });
  };

  Promise.race = function (arr) {
    return new Promise(function (resolve, reject) {
      if (!isArray(arr)) {
        return reject(new TypeError('Promise.race accepts an array'));
      }

      for (var i = 0, len = arr.length; i < len; i++) {
        Promise.resolve(arr[i]).then(resolve, reject);
      }
    });
  }; // Use polyfill for setImmediate for performance gains


  Promise._immediateFn = // @ts-ignore
  typeof setImmediate === 'function' && function (fn) {
    // @ts-ignore
    setImmediate(fn);
  } || function (fn) {
    setTimeoutFunc(fn, 0);
  };

  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {
    if (typeof console !== 'undefined' && console) {
      console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console
    }
  };
  /** @suppress {undefinedVars} */


  var globalNS = function () {
    // the only reliable means to get the global object is
    // `Function('return this')()`
    // However, this causes CSP violations in Chrome apps.
    if (typeof self !== 'undefined') {
      return self;
    }

    if (typeof window !== 'undefined') {
      return window;
    }

    if (typeof __webpack_require__.g !== 'undefined') {
      return __webpack_require__.g;
    }

    throw new Error('unable to locate global object');
  }();

  if (!('Promise' in globalNS)) {
    globalNS['Promise'] = Promise;
  } else if (!globalNS.Promise.prototype['finally']) {
    globalNS.Promise.prototype['finally'] = finallyConstructor;
  }
});

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	!function() {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = function(module) {
/******/ 			var getter = module && module.__esModule ?
/******/ 				function() { return module['default']; } :
/******/ 				function() { return module; };
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	!function() {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = function(exports, definition) {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	!function() {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	}();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	!function() {
/******/ 		__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }
/******/ 	}();
/******/ 	
/************************************************************************/
!function() {
"use strict";

// UNUSED EXPORTS: AddressMatchService, AggQueryBuilderParameter, AggregationParameter, AggregationQueryBuilderType, AggregationType, AlongLineDirection, AnalystAreaUnit, AnalystSizeUnit, AreaSolarRadiationParameters, ArrayStatistic, AttributesPopContainer, BufferAnalystParameters, BufferDistance, BufferEndType, BufferRadiusUnit, BufferSetting, BuffersAnalystJobsParameter, BurstPipelineAnalystParameters, ChartQueryFilterParameter, ChartQueryParameters, ChartService, ChartType, ChartView, ChartViewModel, CityTabsPage, ClientType, ClipAnalystMode, ClipParameter, ColorDictionary, ColorGradientType, ColorSpaceType, ColorsPickerUtil, CommonContainer, ComponentsUtil, ComputeWeightMatrixParameters, DataFlowService, DataFormat, DataItemOrderBy, DataItemType, DataReturnMode, DataReturnOption, DatasetBufferAnalystParameters, DatasetInfo, DatasetOverlayAnalystParameters, DatasetSurfaceAnalystParameters, DatasetThiessenAnalystParameters, DatasourceConnectionInfo, DeckglLayer, DensityKernelAnalystParameters, DirectionType, DropDownBox, EditFeaturesParameters, EditType, ElasticSearch, EngineType, Exponent, FacilityAnalyst3DParameters, FacilityAnalystSinks3DParameters, FacilityAnalystSources3DParameters, FacilityAnalystStreamParameters, FacilityAnalystTracedown3DParameters, FacilityAnalystTraceup3DParameters, FacilityAnalystUpstream3DParameters, FeatureService, FetchRequest, FieldParameters, FieldService, FieldStatisticsParameters, FileConfig, FileModel, FileReaderUtil, FileTypes, FillGradientMode, FilterAggParameter, FilterField, FilterParameter, FindClosestFacilitiesParameters, FindLocationParameters, FindMTSPPathsParameters, FindPathParameters, FindServiceAreasParameters, FindTSPPathsParameters, GenerateSpatialDataParameters, GeoBoundingBoxQueryBuilderParameter, GeoCodingParameter, GeoDecodingParameter, GeoFeature, GeoHashGridAggParameter, GeoRelationAnalystParameters, GeometryBufferAnalystParameters, GeometryOverlayAnalystParameters, GeometrySurfaceAnalystParameters, GeometryThiessenAnalystParameters, GeometryType, GeoprocessingService, GetFeatureMode, GetFeaturesByBoundsParameters, GetFeaturesByBufferParameters, GetFeaturesByGeometryParameters, GetFeaturesByIDsParameters, GetFeaturesBySQLParameters, GetGridCellInfosParameters, GraduatedMode, Graph, GraphAxesTextDisplayMode, Graphic, GraphicLayer, GraticuleLayer, Grid, GridCellInfosService, GridType, HeatMapLayer, IManager, IManagerCreateNodeParam, IManagerServiceBase, IPortal, IPortalAddDataParam, IPortalAddResourceParam, IPortalDataConnectionInfoParam, IPortalDataMetaInfoParam, IPortalDataStoreInfoParam, IPortalQueryParam, IPortalQueryResult, IPortalRegisterServiceParam, IPortalResource, IPortalServiceBase, IPortalShareEntity, IPortalShareParam, IPortalUser, Image, IndexTabsPageContainer, InterpolationAlgorithmType, InterpolationAnalystParameters, InterpolationIDWAnalystParameters, InterpolationKrigingAnalystParameters, InterpolationRBFAnalystParameters, JoinItem, JoinType, KernelDensityJobParameter, KeyServiceParameter, Label, LabelBackShape, LabelImageCell, LabelMatrixCell, LabelMixedTextStyle, LabelOverLengthMode, LabelSymbolCell, LabelThemeCell, LayerInfoService, LayerStatus, LayerType, LinkItem, Logo, MapExtend, MapService, MappingParameters, MapvDataSet, MapvLayer, MapvRenderer, MathExpressionAnalysisParameters, MeasureMode, MeasureParameters, MeasureService, MessageBox, NavTabsPage, NetworkAnalyst3DService, NetworkAnalystService, Online, OnlineData, OnlineQueryDatasParameter, OnlineServiceBase, OutputSetting, OutputType, OverlapDisplayedOptions, OverlayAnalystParameters, OverlayGeoJobParameter, OverlayOperationType, PaginationContainer, PixelFormat, PointWithMeasure, PopContainer, ProcessingService, QueryByBoundsParameters, QueryByDistanceParameters, QueryByGeometryParameters, QueryBySQLParameters, QueryOption, QueryParameters, QueryService, Range, RangeMode, RangeTheme3DLayer, RankSymbol, Route, RouteCalculateMeasureParameters, RouteLocatorParameters, SearchMode, SecurityManager, Select, ServerColor, ServerFeature, ServerGeometry, ServerInfo, ServerStyle, ServerTextStyle, ServerTheme, ServerType, ServiceBase, ServiceStatus, SetLayerInfoParameters, SetLayerStatusParameters, SetLayersInfoParameters, SideType, SingleObjectQueryJobsParameter, SmoothMethod, SpatialAnalystService, SpatialQueryMode, SpatialRelationType, StatisticAnalystMode, StatisticMode, StopQueryParameters, SummaryAttributesJobsParameter, SummaryMeshJobParameter, SummaryRegionJobParameter, SummaryType, SuperMap, SupplyCenter, SupplyCenterType, SurfaceAnalystMethod, SurfaceAnalystParameters, SurfaceAnalystParametersSetting, TerrainCurvatureCalculationParameters, TextAlignment, Theme, Theme3DLayer, ThemeDotDensity, ThemeFeature, ThemeFlow, ThemeGraduatedSymbol, ThemeGraduatedSymbolStyle, ThemeGraph, ThemeGraphAxes, ThemeGraphItem, ThemeGraphSize, ThemeGraphText, ThemeGraphTextFormat, ThemeGraphType, ThemeGridRange, ThemeGridRangeItem, ThemeGridUnique, ThemeGridUniqueItem, ThemeLabel, ThemeLabelAlongLine, ThemeLabelBackground, ThemeLabelItem, ThemeLabelText, ThemeLabelUniqueItem, ThemeLayer, ThemeMemoryData, ThemeOffset, ThemeParameters, ThemeRange, ThemeRangeItem, ThemeService, ThemeType, ThemeUnique, ThemeUniqueItem, ThiessenAnalystParameters, ThreeLayer, ThreeLayerRenderer, TimeFlowControl, TokenServiceParameter, TopologyValidatorJobsParameter, TopologyValidatorRule, TrafficTransferAnalystService, TransferLine, TransferPathParameters, TransferPreference, TransferSolutionParameters, TransferTactic, Transform, TransportationAnalystParameter, TransportationAnalystResultSetting, TurnType, UGCLayer, UGCLayerType, UGCMapLayer, UGCSubLayer, Unique, UniqueTheme3DLayer, Unit, UpdateEdgeWeightParameters, UpdateTurnNodeWeightParameters, Util, VariogramMode, Vector, VectorClipJobsParameter, WebMap, WebPrintingJobContent, WebPrintingJobCustomItems, WebPrintingJobExportOptions, WebPrintingJobImage, WebPrintingJobLayers, WebPrintingJobLayoutOptions, WebPrintingJobLegendOptions, WebPrintingJobLittleMapOptions, WebPrintingJobNorthArrowOptions, WebPrintingJobParameters, WebPrintingJobScaleBarOptions, WebPrintingJobService, WebPrintingService, getDefaultVectorTileStyle, setBackground, setPaintProperty

// CONCATENATED MODULE: ./src/common/SuperMap.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var SuperMap = window.SuperMap = window.SuperMap || {};
SuperMap.Components = window.SuperMap.Components || {};
// CONCATENATED MODULE: ./src/common/REST.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @enum DataFormat
 * @memberOf SuperMap
 * @description æå¡è¯·æ±è¿åç»ææ°æ®ç±»å
 * @type {string}
 */

var DataFormat = SuperMap.DataFormat = {
  /** GEOJSON */
  GEOJSON: "GEOJSON",

  /** ISERVER */
  ISERVER: "ISERVER"
};

/**
 * @enum ServerType
 * @memberOf SuperMap
 * @description æå¡å¨ç±»å
 * @type {string}
 */

var ServerType = SuperMap.ServerType = {
  /** ISERVER */
  ISERVER: "ISERVER",

  /** IPORTAL */
  IPORTAL: "IPORTAL",

  /** ONLINE */
  ONLINE: "ONLINE"
};

/**
 * @enum GeometryType
 * @memberOf SuperMap
 * @description å ä½å¯¹è±¡æä¸¾,å®ä¹äºä¸ç³»åå ä½å¯¹è±¡ç±»åã
 * @type {string}
 */

var GeometryType = SuperMap.GeometryType = {
  /** LINE */
  LINE: "LINE",

  /** LINEM */
  LINEM: "LINEM",

  /** POINT */
  POINT: "POINT",

  /** REGION */
  REGION: "REGION",

  /** POINTEPS */
  POINTEPS: "POINTEPS",

  /** LINEEPS */
  LINEEPS: "LINEEPS",

  /** REGIONEPS */
  REGIONEPS: "REGIONEPS",

  /** ELLIPSE */
  ELLIPSE: "ELLIPSE",

  /** CIRCLE */
  CIRCLE: "CIRCLE",

  /** TEXT */
  TEXT: "TEXT",

  /** RECTANGLE */
  RECTANGLE: "RECTANGLE",

  /** UNKNOWN */
  UNKNOWN: "UNKNOWN",

  /** GEOCOMPOUND */
  GEOCOMPOUND: "GEOCOMPOUND"
};

/**
 * @enum QueryOption
 * @memberOf SuperMap
 * @description æ¥è¯¢ç»æç±»åæä¸¾,æè¿°æ¥è¯¢ç»æè¿åç±»åï¼åæ¬åªè¿åå±æ§ãåªè¿åå ä½å®ä½ä»¥åè¿åå±æ§åå ä½å®ä½ã
 * @type {string}
 */

var QueryOption = SuperMap.QueryOption = {
  /** å±æ§ */
  ATTRIBUTE: "ATTRIBUTE",

  /** å±æ§åå ä½å¯¹è±¡ */
  ATTRIBUTEANDGEOMETRY: "ATTRIBUTEANDGEOMETRY",

  /** å ä½å¯¹è±¡ */
  GEOMETRY: "GEOMETRY"
};

/**
 * @enum JoinType
 * @memberOf SuperMap
 * @description å³èæ¥è¯¢æ¶çå³èç±»åå¸¸éã
 * è¯¥ç±»å®ä¹äºä¸¤ä¸ªè¡¨ä¹é´çè¿æ¥ç±»åå¸¸éï¼å³å®äºå¯¹ä¸¤ä¸ªè¡¨ä¹é´è¿è¡è¿æ¥æ¥è¯¢æ¶ï¼æ¥è¯¢ç»æä¸­å¾å°çè®°å½çæåµã
 * @type {string}
 */

var JoinType = SuperMap.JoinType = {
  /** INNERJOIN */
  INNERJOIN: "INNERJOIN",

  /** LEFTJOIN */
  LEFTJOIN: "LEFTJOIN"
};

/**
 * @enum SpatialQueryMode
 * @memberOf SuperMap
 * @description  ç©ºé´æ¥è¯¢æ¨¡å¼æä¸¾ãè¯¥ç±»å®ä¹äºç©ºé´æ¥è¯¢æä½æ¨¡å¼å¸¸éã
 * @type {string}
 */

var SpatialQueryMode = SuperMap.SpatialQueryMode = {
  /** åå«ç©ºé´æ¥è¯¢æ¨¡å¼ */
  CONTAIN: "CONTAIN",

  /** äº¤åç©ºé´æ¥è¯¢æ¨¡å¼ */
  CROSS: "CROSS",

  /** åç¦»ç©ºé´æ¥è¯¢æ¨¡å¼ */
  DISJOINT: "DISJOINT",

  /** éåç©ºé´æ¥è¯¢æ¨¡å¼ */
  IDENTITY: "IDENTITY",

  /** ç¸äº¤ç©ºé´æ¥è¯¢æ¨¡å¼ */
  INTERSECT: "INTERSECT",

  /** æ ç©ºé´æ¥è¯¢ */
  NONE: "NONE",

  /** å å ç©ºé´æ¥è¯¢æ¨¡å¼ */
  OVERLAP: "OVERLAP",

  /** é»æ¥ç©ºé´æ¥è¯¢æ¨¡å¼ */
  TOUCH: "TOUCH",

  /** è¢«åå«ç©ºé´æ¥è¯¢æ¨¡å¼ */
  WITHIN: "WITHIN"
};

/**
 * @enum SpatialRelationType
 * @memberOf SuperMap
 * @description  æ°æ®éå¯¹è±¡é´çç©ºé´å³ç³»æä¸¾ã
 * è¯¥ç±»å®ä¹äºæ°æ®éå¯¹è±¡é´çç©ºé´å³ç³»ç±»åå¸¸éã
 * @type {string}
 */

var SpatialRelationType = SuperMap.SpatialRelationType = {
  /** åå«å³ç³» */
  CONTAIN: "CONTAIN",

  /** ç¸äº¤å³ç³» */
  INTERSECT: "INTERSECT",

  /** è¢«åå«å³ç³» */
  WITHIN: "WITHIN"
};

/**
 * @enum MeasureMode
 * @memberOf SuperMap
 * @type {string}
 * @description  éç®æ¨¡å¼æä¸¾ã
 * è¯¥ç±»å®ä¹äºä¸¤ç§æµéæ¨¡å¼ï¼è·ç¦»æµéåé¢ç§¯æµéã
 */

var MeasureMode = SuperMap.MeasureMode = {
  /** è·ç¦»æµé */
  DISTANCE: "DISTANCE",

  /** é¢ç§¯æµé */
  AREA: "AREA"
};

/**
 * @enum Unit
 * @memberOf SuperMap
 * @description  è·ç¦»åä½æä¸¾ã
 * è¯¥ç±»å®ä¹äºä¸ç³»åè·ç¦»åä½ç±»åã
 * @type {string}
 */

var Unit = SuperMap.Unit = {
  /**  ç±³ */
  METER: "METER",

  /**  åç±³ */
  KILOMETER: "KILOMETER",

  /**  è±é */
  MILE: "MILE",

  /**  ç  */
  YARD: "YARD",

  /**  åº¦ */
  DEGREE: "DEGREE",

  /**  æ¯«ç±³ */
  MILLIMETER: "MILLIMETER",

  /**  åç±³ */
  CENTIMETER: "CENTIMETER",

  /**  è±å¯¸ */
  INCH: "INCH",

  /**  åç±³ */
  DECIMETER: "DECIMETER",

  /**  è±å°º */
  FOOT: "FOOT",

  /**  ç§ */
  SECOND: "SECOND",

  /**  å */
  MINUTE: "MINUTE",

  /**  å¼§åº¦ */
  RADIAN: "RADIAN"
};

/**
 * @enum BufferRadiusUnit
 * @memberOf SuperMap
 * @description  ç¼å²åºè·ç¦»åä½æä¸¾ã
 * è¯¥ç±»å®ä¹äºä¸ç³»åç¼å²è·ç¦»åä½ç±»åã
 * @type {string}
 */

var BufferRadiusUnit = SuperMap.BufferRadiusUnit = {
  /**  åç±³ */
  CENTIMETER: "CENTIMETER",

  /**  åç±³ */
  DECIMETER: "DECIMETER",

  /**  è±å°º */
  FOOT: "FOOT",

  /**  è±å¯¸ */
  INCH: "INCH",

  /**  åç±³ */
  KILOMETER: "KILOMETER",

  /**  ç±³ */
  METER: "METER",

  /**  è±é */
  MILE: "MILE",

  /**  æ¯«ç±³ */
  MILLIMETER: "MILLIMETER",

  /**  ç  */
  YARD: "YARD"
};

/**
 * @enum EngineType
 * @memberOf SuperMap
 * @description  æ°æ®æºå¼æç±»åæä¸¾ã
 * @type {string}
 */

var EngineType = SuperMap.EngineType = {
  /** å½±ååªè¯»å¼æç±»åï¼æä»¶å¼æï¼éå¯¹éç¨å½±åæ ¼å¼å¦ BMPï¼JPGï¼TIFF ä»¥åè¶å¾èªå®ä¹å½±åæ ¼å¼ SIT ç­ã */
  IMAGEPLUGINS: "IMAGEPLUGINS",

  /**  OGC å¼æç±»åï¼éå¯¹äº Web æ°æ®æºï¼Web å¼æï¼ç®åæ¯æçç±»åæ WMSï¼WFSï¼WCSã */
  OGC: "OGC",

  /**  Oracle å¼æç±»åï¼éå¯¹ Oracle æ°æ®æºï¼æ°æ®åºå¼æã */
  ORACLEPLUS: "ORACLEPLUS",

  /**  SDB å¼æç±»åï¼æä»¶å¼æï¼å³ SDB æ°æ®æºã */
  SDBPLUS: "SDBPLUS",

  /**  SQL Server å¼æç±»åï¼éå¯¹ SQL Server æ°æ®æºï¼æ°æ®åºå¼æ */
  SQLPLUS: "SQLPLUS",

  /**  UDB å¼æç±»åï¼æä»¶å¼æã */
  UDB: "UDB"
};

/**
 * @enum ThemeGraphTextFormat
 * @memberOf SuperMap
 * @description  ç»è®¡ä¸é¢å¾ææ¬æ¾ç¤ºæ ¼å¼æä¸¾ã
 * @type {string}
 */

var ThemeGraphTextFormat = SuperMap.ThemeGraphTextFormat = {
  /**  æ é¢ãä»¥åå­é¡¹çæ é¢æ¥è¿è¡æ æ³¨ã */
  CAPTION: "CAPTION",

  /**  æ é¢ + ç¾åæ°ãä»¥åå­é¡¹çæ é¢åæå çç¾åæ¯æ¥è¿è¡æ æ³¨ã */
  CAPTION_PERCENT: "CAPTION_PERCENT",

  /**  æ é¢ + å®éæ°å¼ãä»¥åå­é¡¹çæ é¢åçå®æ°å¼æ¥è¿è¡æ æ³¨ã */
  CAPTION_VALUE: "CAPTION_VALUE",

  /**  ç¾åæ°ãä»¥åå­é¡¹æå çç¾åæ¯æ¥è¿è¡æ æ³¨ã */
  PERCENT: "PERCENT",

  /**  å®éæ°å¼ãä»¥åå­é¡¹ççå®æ°å¼æ¥è¿è¡æ æ³¨ã */
  VALUE: "VALUE"
};

/**
 * @enum ThemeGraphType
 * @memberOf SuperMap
 * @description  ç»è®¡ä¸é¢å¾ç±»åæä¸¾ã
 * @type {string}
 */

var ThemeGraphType = SuperMap.ThemeGraphType = {
  /**  é¢ç§¯å¾ã */
  AREA: "AREA",

  /**  æ±ç¶å¾ã */
  BAR: "BAR",

  /**  ä¸ç»´æ±ç¶å¾ã */
  BAR3D: "BAR3D",

  /**  æçº¿å¾ã */
  LINE: "LINE",

  /**  é¥¼å¾ã */
  PIE: "PIE",

  /**  ä¸ç»´é¥¼å¾ã */
  PIE3D: "PIE3D",

  /**  ç¹ç¶å¾ã */
  POINT: "POINT",

  /**  ç¯ç¶å¾ã */
  RING: "RING",

  /**  ç«ç°å¾ã */
  ROSE: "ROSE",

  /**  ä¸ç»´ç«ç°å¾ã */
  ROSE3D: "ROSE3D",

  /**  å å æ±ç¶å¾ã */
  STACK_BAR: "STACK_BAR",

  /**  ä¸ç»´å å æ±ç¶å¾ã */
  STACK_BAR3D: "STACK_BAR3D",

  /**  é¶æ¢¯å¾ã */
  STEP: "STEP"
};

/**
 * @enum GraphAxesTextDisplayMode
 * @memberOf SuperMap
 * @description  ç»è®¡ä¸é¢å¾åæ è½´ææ¬æ¾ç¤ºæ¨¡å¼ã
 * @type {string}
 */

var GraphAxesTextDisplayMode = SuperMap.GraphAxesTextDisplayMode = {
  /**  æ¾ç¤ºå¨é¨ææ¬ã */
  ALL: "ALL",

  /**  ä¸æ¾ç¤ºã */
  NONE: "NONE",

  /**  æ¾ç¤ºYè½´çææ¬ã */
  YAXES: "YAXES"
};

/**
 * @enum GraduatedMode
 * @memberOf SuperMap
 * @description  ä¸é¢å¾åçº§æ¨¡å¼æä¸¾ã
 *
 * @type {string}
 */

var GraduatedMode = SuperMap.GraduatedMode = {
  /**  å¸¸éåçº§æ¨¡å¼ã */
  CONSTANT: "CONSTANT",

  /** å¯¹æ°åçº§æ¨¡å¼ã */
  LOGARITHM: "LOGARITHM",

  /**  å¹³æ¹æ ¹åçº§æ¨¡å¼ã */
  SQUAREROOT: "SQUAREROOT"
};

/**
 * @enum RangeMode
 * @memberOf SuperMap
 * @description  èå´åæ®µä¸é¢å¾åæ®µæ¹å¼æä¸¾ã
 * @type {string}
 */

var RangeMode = SuperMap.RangeMode = {
  /**  èªå®ä¹åæ®µæ³ã */
  CUSTOMINTERVAL: "CUSTOMINTERVAL",

  /**  ç­è·ç¦»åæ®µæ³ã */
  EQUALINTERVAL: "EQUALINTERVAL",

  /**  å¯¹æ°åæ®µæ³ã */
  LOGARITHM: "LOGARITHM",

  /**  ç­è®¡æ°åæ®µæ³ã */
  QUANTILE: "QUANTILE",

  /**  å¹³æ¹æ ¹åæ®µæ³ã */
  SQUAREROOT: "SQUAREROOT",

  /**  æ åå·®åæ®µæ³ã */
  STDDEVIATION: "STDDEVIATION"
};

/**
 * @enum ThemeType
 * @memberOf SuperMap
 * @description  ä¸é¢å¾ç±»åæä¸¾ã
 * @type {string}
 */

var ThemeType = SuperMap.ThemeType = {
  /** ç¹å¯åº¦ä¸é¢å¾ã */
  DOTDENSITY: "DOTDENSITY",

  /** ç­çº§ç¬¦å·ä¸é¢å¾ã */
  GRADUATEDSYMBOL: "GRADUATEDSYMBOL",

  /** ç»è®¡ä¸é¢å¾ã */
  GRAPH: "GRAPH",

  /** æ ç­¾ä¸é¢å¾ã */
  LABEL: "LABEL",

  /** åæ®µä¸é¢å¾ã */
  RANGE: "RANGE",

  /** åå¼ä¸é¢å¾ã */
  UNIQUE: "UNIQUE"
};

/**
 * @enum ColorGradientType
 * @memberOf SuperMap
 * @description  æ¸åé¢è²æä¸¾ã
 * @type {string}
 */

var ColorGradientType = SuperMap.ColorGradientType = {
  /** é»ç½æ¸åè²ã */
  BLACK_WHITE: "BLACKWHITE",

  /** èé»æ¸åè²ã */
  BLUE_BLACK: "BLUEBLACK",

  /** èçº¢æ¸åè²ã */
  BLUE_RED: "BLUERED",

  /** èç½æ¸åè²ã */
  BLUE_WHITE: "BLUEWHITE",

  /** éé»æ¸åè²ã */
  CYAN_BLACK: "CYANBLACK",

  /** éèæ¸åè²ã */
  CYAN_BLUE: "CYANBLUE",

  /** éç»¿æ¸åè²ã */
  CYAN_GREEN: "CYANGREEN",

  /** éç½æ¸åè²ã */
  CYAN_WHITE: "CYANWHITE",

  /** ç»¿é»æ¸åè²ã */
  GREEN_BLACK: "GREENBLACK",

  /** ç»¿èæ¸åè²ã */
  GREEN_BLUE: "GREENBLUE",

  /** ç»¿æ©ç´«æ¸åè²ã */
  GREEN_ORANGE_VIOLET: "GREENORANGEVIOLET",

  /** ç»¿çº¢æ¸åè²ã */
  GREEN_RED: "GREENRED",

  /** èçº¢æ¸åè²ã */
  GREEN_WHITE: "GREENWHITE",

  /** ç²é»æ¸åè²ã */
  PINK_BLACK: "PINKBLACK",

  /** ç²èæ¸åè²ã */
  PINK_BLUE: "PINKBLUE",

  /** ç²çº¢æ¸åè²ã */
  PINK_RED: "PINKRED",

  /** ç²ç½æ¸åè²ã */
  PINK_WHITE: "PINKWHITE",

  /** å½©è¹è²ã */
  RAIN_BOW: "RAINBOW",

  /** çº¢é»æ¸åè²ã */
  RED_BLACK: "REDBLACK",

  /** çº¢ç½æ¸åè²ã */
  RED_WHITE: "REDWHITE",

  /** åè°±æ¸åã */
  SPECTRUM: "SPECTRUM",

  /** å°å½¢æ¸å,ç¨äºä¸ç»´æ¾ç¤ºææè¾å¥½ã */
  TERRAIN: "TERRAIN",

  /** é»é»æ¸åè²ã */
  YELLOW_BLACK: "YELLOWBLACK",

  /** é»èæ¸åè²ã */
  YELLOW_BLUE: "YELLOWBLUE",

  /** é»ç»¿æ¸åè²ã */
  YELLOW_GREEN: "YELLOWGREEN",

  /** é»çº¢æ¸åè²ã */
  YELLOW_RED: "YELLOWRED",

  /** é»ç½æ¸åè²ã */
  YELLOW_WHITE: "YELLOWWHITE"
};

/**
 * @enum TextAlignment
 * @memberOf SuperMap
 * @description  ææ¬å¯¹é½æä¸¾ã
 * @type {string}
 */

var TextAlignment = SuperMap.TextAlignment = {
  /** å·¦ä¸è§å¯¹é½ã */
  TOPLEFT: "TOPLEFT",

  /** é¡¶é¨å±ä¸­å¯¹é½ã */
  TOPCENTER: "TOPCENTER",

  /** å³ä¸è§å¯¹é½ã */
  TOPRIGHT: "TOPRIGHT",

  /** åºåçº¿å·¦å¯¹é½ã */
  BASELINELEFT: "BASELINELEFT",

  /** åºåçº¿å±ä¸­å¯¹é½ã */
  BASELINECENTER: "BASELINECENTER",

  /** åºåçº¿å³å¯¹é½ã */
  BASELINERIGHT: "BASELINERIGHT",

  /** å·¦ä¸è§å¯¹é½ã */
  BOTTOMLEFT: "BOTTOMLEFT",

  /** åºé¨å±ä¸­å¯¹é½ã */
  BOTTOMCENTER: "BOTTOMCENTER",

  /** å³ä¸è§å¯¹é½ã */
  BOTTOMRIGHT: "BOTTOMRIGHT",

  /** å·¦ä¸­å¯¹é½ã */
  MIDDLELEFT: "MIDDLELEFT",

  /** ä¸­å¿å¯¹é½ã */
  MIDDLECENTER: "MIDDLECENTER",

  /** å³ä¸­å¯¹é½ã */
  MIDDLERIGHT: "MIDDLERIGHT"
};

/**
 * @enum FillGradientMode
 * @memberOf SuperMap
 * @description  æ¸åå¡«åé£æ ¼çæ¸åç±»åæä¸¾ã
 * @type {string}
 */

var FillGradientMode = SuperMap.FillGradientMode = {
  /** æ æ¸åã */
  NONE: "NONE",

  /** çº¿æ§æ¸åå¡«åã */
  LINEAR: "LINEAR",

  /** è¾å°æ¸åå¡«åã */
  RADIAL: "RADIAL",

  /** åé¥æ¸åå¡«åã */
  CONICAL: "CONICAL",

  /** åè§æ¸åå¡«åã */
  SQUARE: "SQUARE"
};

/**
 * @enum AlongLineDirection
 * @memberOf SuperMap
 * @description  æ ç­¾æ²¿çº¿æ æ³¨æ¹åæä¸¾ã
 * @type {string}
 */

var AlongLineDirection = SuperMap.AlongLineDirection = {
  /** æ²¿çº¿çæ³çº¿æ¹åæ¾ç½®æ ç­¾ã */
  NORMAL: "ALONG_LINE_NORMAL",

  /** ä»ä¸å°ä¸ï¼ä»å·¦å°å³æ¾ç½®ã */
  LB_TO_RT: "LEFT_BOTTOM_TO_RIGHT_TOP",

  /** ä»ä¸å°ä¸ï¼ä»å·¦å°å³æ¾ç½®ã */
  LT_TO_RB: "LEFT_TOP_TO_RIGHT_BOTTOM",

  /** ä»ä¸å°ä¸ï¼ä»å³å°å·¦æ¾ç½®ã */
  RB_TO_LT: "RIGHT_BOTTOM_TO_LEFT_TOP",

  /** ä»ä¸å°ä¸ï¼ä»å³å°å·¦æ¾ç½®ã */
  RT_TO_LB: "RIGHT_TOP_TO_LEFT_BOTTOM"
};

/**
 * @enum LabelBackShape
 * @memberOf SuperMap
 * @description  æ ç­¾ä¸é¢å¾ä¸­æ ç­¾èæ¯çå½¢ç¶æä¸¾ã
 * @type {string}
 */

var LabelBackShape = SuperMap.LabelBackShape = {
  /** è±å½¢èæ¯ï¼å³æ ç­¾èæ¯çå½¢ç¶ä¸ºè±å½¢ã */
  DIAMOND: "DIAMOND",

  /** æ¤­åå½¢èæ¯ï¼å³æ ç­¾èæ¯çè¡ç¶ä¸ºæ¤­åå½¢ã */
  ELLIPSE: "ELLIPSE",

  /** ç¬¦å·èæ¯ï¼å³æ ç­¾èæ¯çå½¢ç¶ä¸ºè®¾å®çç¬¦å·ã */
  MARKER: "MARKER",

  /** ç©ºèæ¯ï¼å³ä¸ä½¿ç¨ä»»ä½å½¢ç¶ä½ä¸ºæ ç­¾çèæ¯ã */
  NONE: "NONE",

  /** ç©å½¢èæ¯ï¼å³æ ç­¾èæ¯çå½¢ç¶ä¸ºç©å½¢ã */
  RECT: "RECT",

  /** åè§ç©å½¢èæ¯ï¼å³æ ç­¾èæ¯çå½¢ç¶ä¸ºåè§ç©å½¢ã */
  ROUNDRECT: "ROUNDRECT",

  /** ä¸è§å½¢èæ¯ï¼å³æ ç­¾èæ¯çå½¢ç¶ä¸ºä¸è§å½¢ã */
  TRIANGLE: "TRIANGLE"
};

/**
 * @enum LabelOverLengthMode
 * @memberOf SuperMap
 * @description  æ ç­¾ä¸é¢å¾ä¸­è¶é¿æ ç­¾çå¤çæ¨¡å¼æä¸¾ã
 * @type {string}
 */

var LabelOverLengthMode = SuperMap.LabelOverLengthMode = {
  /** æ¢è¡æ¾ç¤ºã */
  NEWLINE: "NEWLINE",

  /** å¯¹è¶é¿æ ç­¾ä¸è¿è¡å¤çã */
  NONE: "NONE",

  /** çç¥è¶åºé¨åã */
  OMIT: "OMIT"
};

/**
 * @enum DirectionType
 * @memberOf SuperMap
 * @description  ç½ç»åæä¸­æ¹åæä¸¾ã
 * å¨è¡é©¶å¼å¯¼å­é¡¹ä¸­ä½¿ç¨ã
 * @type {string}
 */

var DirectionType = SuperMap.DirectionType = {
  /** ä¸ã */
  EAST: "EAST",

  /** æ æ¹åã */
  NONE: "NONE",

  /** åã */
  NORTH: "NORTH",

  /** åã */
  SOURTH: "SOURTH",

  /** è¥¿ã */
  WEST: "WEST"
};

/**
 * @enum SideType
 * @memberOf SuperMap
 * @description  è¡é©¶ä½ç½®æä¸¾ã
 * è¡¨ç¤ºå¨è¡é©¶å¨è·¯çå·¦è¾¹ãå³è¾¹æèè·¯ä¸çæä¸¾,è¯¥ç±»ç¨å¨è¡é©¶å¯¼å¼å­é¡¹ç±»ä¸­ã
 * @type {string}
 */

var SideType = SuperMap.SideType = {
  /** è·¯çå·¦ä¾§ã */
  LEFT: "LEFT",

  /** å¨è·¯ä¸ï¼å³è·¯çä¸­é´ï¼ã */
  MIDDLE: "MIDDLE",

  /** æ æå¼ã */
  NONE: "NONE",

  /** è·¯çå³ä¾§ã */
  RIGHT: "RIGHT"
};

/**
 * @enum SupplyCenterType
 * @memberOf SuperMap
 * @description  èµæºä¾ç»ä¸­å¿ç±»åæä¸¾ã
 * è¯¥æä¸¾å®ä¹äºç½ç»åæä¸­èµæºä¸­å¿ç¹çç±»åï¼ä¸»è¦ç¨äºèµæºåéåéåååºã
 * èµæºä¾ç»ä¸­å¿ç¹çç±»ååæ¬éä¸­å¿ï¼åºå®ä¸­å¿åå¯éä¸­å¿ãåºå®ä¸­å¿ç¨äºèµæºåéåæï¼ åºå®ä¸­å¿åå¯éä¸­å¿ç¨äºéååæï¼éä¸­å¿å¨ä¸¤ç§ç½ç»åææ¶é½ä¸äºèèã
 * @type {string}
 */

var SupplyCenterType = SuperMap.SupplyCenterType = {
  /** åºå®ä¸­å¿ç¹ã */
  FIXEDCENTER: "FIXEDCENTER",

  /** éä¸­å¿ç¹ã */
  NULL: "NULL",

  /** å¯éä¸­å¿ç¹ã */
  OPTIONALCENTER: "OPTIONALCENTER"
};

/**
 * @enum TurnType
 * @memberOf SuperMap
 * @description  è½¬å¼¯æ¹åæä¸¾ã
 * ç¨å¨è¡é©¶å¼å¯¼å­é¡¹ç±»ä¸­ï¼è¡¨ç¤ºè½¬å¼¯çæ¹åã
 * @type {string}
 */

var TurnType = SuperMap.TurnType = {
  /** ååç´è¡ã */
  AHEAD: "AHEAD",

  /** æå¤´ã */
  BACK: "BACK",

  /** ç»ç¹ï¼ä¸æå¼¯ã */
  END: "END",

  /** å·¦è½¬å¼¯ã */
  LEFT: "LEFT",

  /** æ æå¼ã */
  NONE: "NONE",

  /** å³è½¬å¼¯ã */
  RIGHT: "RIGHT"
};

/**
 * @enum BufferEndType
 * @memberOf SuperMap
 * @description  ç¼å²åºåæBufferEndç±»åã
 * @type {string}
 */

var BufferEndType = SuperMap.BufferEndType = {
  /** FLAT */
  FLAT: "FLAT",

  /** ROUND */
  ROUND: "ROUND"
};

/**
 * @enum OverlayOperationType
 * @memberOf SuperMap
 * @description  å å åæç±»åæä¸¾ã
 * @type {string}
 */

var OverlayOperationType = SuperMap.OverlayOperationType = {
  /** æä½æ°æ®éï¼å ä½å¯¹è±¡ï¼è£åªè¢«æä½æ°æ®éï¼å ä½å¯¹è±¡ï¼ã */
  CLIP: "CLIP",

  /** å¨è¢«æä½æ°æ®éï¼å ä½å¯¹è±¡ï¼ä¸æ¦é¤æä¸æä½æ°æ®éï¼å ä½å¯¹è±¡ï¼ç¸éåçé¨åã */
  ERASE: "ERASE",

  /**å¯¹è¢«æä½æ°æ®éï¼å ä½å¯¹è±¡ï¼è¿è¡åä¸æä½ï¼å³æä½æ§è¡åï¼è¢«æä½æ°æ®éï¼å ä½å¯¹è±¡ï¼åå«æ¥èªæä½æ°æ®éï¼å ä½å¯¹è±¡ï¼çå ä½å½¢ç¶ã */
  IDENTITY: "IDENTITY",

  /** å¯¹ä¸¤ä¸ªæ°æ®éï¼å ä½å¯¹è±¡ï¼æ±äº¤ï¼è¿åä¸¤ä¸ªæ°æ®éï¼å ä½å¯¹è±¡ï¼çäº¤éã */
  INTERSECT: "INTERSECT",

  /** å¯¹ä¸¤ä¸ªé¢æ°æ®éï¼å ä½å¯¹è±¡ï¼è¿è¡åå¹¶æä½ã */
  UNION: "UNION",

  /** å¯¹ä¸¤ä¸ªé¢æ°æ®éï¼å ä½å¯¹è±¡ï¼è¿è¡æ´æ°æä½ã */
  UPDATE: "UPDATE",

  /** å¯¹ä¸¤ä¸ªé¢æ°æ®éï¼å ä½å¯¹è±¡ï¼è¿è¡å¯¹ç§°å·®æä½ã */
  XOR: "XOR"
};

/**
 * @enum OutputType
 * @memberOf SuperMap
 * @description  åå¸å¼åæè¾åºç±»åæä¸¾ã
 * @type {string}
 */

var OutputType = SuperMap.OutputType = {
  /** INDEXEDHDFS */
  INDEXEDHDFS: "INDEXEDHDFS",

  /** UDB */
  UDB: "UDB",

  /** MONGODB */
  MONGODB: "MONGODB",

  /** PG */
  PG: "PG"
};

/**
 * @enum SmoothMethod
 * @memberOf SuperMap
 * @description  åæ»æ¹æ³æä¸¾ã
 * ç¨äºä»Grid æDEMæ°æ®çæç­å¼çº¿æç­å¼é¢æ¶å¯¹ç­å¼çº¿æèç­å¼é¢çè¾¹ççº¿è¿è¡å¹³æ»å¤ççæ¹æ³ã
 * @type {string}
 */

var SmoothMethod = SuperMap.SmoothMethod = {
  /** B æ ·æ¡æ³ã */
  BSPLINE: "BSPLINE",

  /** ç£¨è§æ³ã */
  POLISH: "POLISH"
};

/**
 * @enum SurfaceAnalystMethod
 * @memberOf SuperMap
 * @description  è¡¨é¢åææ¹æ³æä¸¾ã
 * éè¿å¯¹æ°æ®è¿è¡è¡¨é¢åæï¼è½å¤ææåå§æ°æ®æåå«çä¿¡æ¯ï¼ä½¿æäºç»èææ¾åï¼æäºåæã
 * @type {string}
 */

var SurfaceAnalystMethod = SuperMap.SurfaceAnalystMethod = {
  /** ç­å¼çº¿æåã */
  ISOLINE: "ISOLINE",

  /** ç­å¼é¢æåã */
  ISOREGION: "ISOREGION"
};

/**
 * @enum DataReturnMode
 * @memberOf SuperMap
 * @description  æ°æ®è¿åæ¨¡å¼æä¸¾ã
 * è¯¥æä¸¾ç¨äºæå®ç©ºé´åæè¿åç»ææ¨¡å¼,åå«è¿åæ°æ®éæ è¯åè®°å½éãåªè¿åæ°æ®éæ è¯(æ°æ®éåç§°@æ°æ®æºåç§°)ååªè¿åè®°å½éä¸ç§æ¨¡å¼ã
 * @type {string}
 */

var DataReturnMode = SuperMap.DataReturnMode = {
  /** è¿åç»ææ°æ®éæ è¯(æ°æ®éåç§°@æ°æ®æºåç§°)åè®°å½éï¼RecordSetï¼ã */
  DATASET_AND_RECORDSET: "DATASET_AND_RECORDSET",

  /** åªè¿åæ°æ®éæ è¯ï¼æ°æ®éåç§°@æ°æ®æºåç§°ï¼ã */
  DATASET_ONLY: "DATASET_ONLY",

  /** åªè¿åè®°å½éï¼RecordSetï¼ã */
  RECORDSET_ONLY: "RECORDSET_ONLY"
};

/**
 * @enum EditType
 * @memberOf SuperMap
 * @description  è¦ç´ éæ´æ°æ¨¡å¼æä¸¾ã
 * è¯¥æä¸¾ç¨äºæå®æ°æ®æå¡ä¸­è¦ç´ éæ´æ°æ¨¡å¼,åå«æ·»å è¦ç´ éãæ´æ°è¦ç´ éåå é¤è¦ç´ éã
 * @type {string}
 */

var EditType = SuperMap.EditType = {
  /** å¢å æä½ã */
  ADD: "add",

  /** ä¿®æ¹æä½ã */
  UPDATE: "update",

  /** å é¤æä½ã */
  DELETE: "delete"
};

/**
 * @enum TransferTactic
 * @memberOf SuperMap
 * @description  å¬äº¤æ¢ä¹ç­ç¥æä¸¾ã
 * è¯¥æä¸¾ç¨äºæå®å¬äº¤æå¡ä¸­è¦ç´ éæ´æ°æ¨¡å¼,åå«æ·»å è¦ç´ éãæ´æ°è¦ç´ éåå é¤è¦ç´ éã
 * @type {string}
 */

var TransferTactic = SuperMap.TransferTactic = {
  /** æ¶é´ç­ã */
  LESS_TIME: "LESS_TIME",

  /** å°æ¢ä¹ã */
  LESS_TRANSFER: "LESS_TRANSFER",

  /** å°æ­¥è¡ã */
  LESS_WALK: "LESS_WALK",

  /** è·ç¦»æç­ã */
  MIN_DISTANCE: "MIN_DISTANCE"
};

/**
 * @enum TransferPreference
 * @memberOf SuperMap
 * @description  å¬äº¤æ¢ä¹ç­ç¥æä¸¾ã
 * è¯¥æä¸¾ç¨äºæå®äº¤éæ¢ä¹æå¡ä¸­è®¾ç½®å°éä¼åãå¬äº¤ä¼åãä¸ä¹å°éãæ åå¥½ç­åå¥½è®¾ç½®ã
 * @type {string}
 */

var TransferPreference = SuperMap.TransferPreference = {
  /** å¬äº¤æ±½è½¦ä¼åã */
  BUS: "BUS",

  /** å°éä¼åã */
  SUBWAY: "SUBWAY",

  /** ä¸ä¹åå°éã */
  NO_SUBWAY: "NO_SUBWAY",

  /** æ ä¹è½¦åå¥½ã */
  NONE: "NONE"
};

/**
 * @enum GridType
 * @memberOf SuperMap
 * @description  å°å¾èæ¯æ ¼ç½ç±»åæä¸¾ã
 * @type {string}
 */

var GridType = SuperMap.GridType = {
  /** åå­åä¸ã */
  CROSS: "CROSS",

  /** ç½æ ¼çº¿ã */
  GRID: "GRID",

  /** ç¹ã */
  POINT: "POINT"
};

/**
 * @enum ColorSpaceType
 * @memberOf SuperMap
 * @description  è²å½©ç©ºé´æä¸¾ã
 * ç±äºæè²åççä¸åï¼å³å®äºæ¾ç¤ºå¨ãæå½±ä»ªè¿ç±»é è²åç´æ¥åæé¢è²çé¢è²è®¾å¤åæå°æºã
 * å°å·æºè¿ç±»é ä½¿ç¨é¢æçå°å·è®¾å¤å¨çæé¢è²æ¹å¼ä¸çåºå«ã
 * éå¯¹ä¸è¿°ä¸åæè²æ¹å¼ï¼SuperMap æä¾ä¸¤ç§è²å½©ç©ºé´ï¼
 * åå«ä¸º RGB å CMYKãRGB ä¸»è¦ç¨äºæ¾ç¤ºç³»ç»ä¸­ï¼CMYK ä¸»è¦ç¨äºå°å·ç³»ç»ä¸­ã
 * @type {string}
 */

var ColorSpaceType = SuperMap.ColorSpaceType = {
  /** è¯¥ç±»åä¸»è¦å¨å°å·ç³»ç»ä½¿ç¨ã */
  CMYK: "CMYK",

  /** è¯¥ç±»åä¸»è¦å¨æ¾ç¤ºç³»ç»ä¸­ä½¿ç¨ã */
  RGB: "RGB"
};

/**
 * @enum LayerType
 * @memberOf SuperMap
 * @description  å¾å±ç±»åã
 * @type {string}
 */

var LayerType = SuperMap.LayerType = {
  /** SuperMap UGC ç±»åå¾å±ãå¦ç¢éå¾å±ãæ æ ¼(Grid)å¾å±ãå½±åå¾å±ã */
  UGC: "UGC",

  /** WMS å¾å±ã */
  WMS: "WMS",

  /** WFS å¾å±ã */
  WFS: "WFS",

  /** èªå®ä¹å¾å±ã */
  CUSTOM: "CUSTOM"
};

/**
 * @enum UGCLayerType
 * @memberOf SuperMap
 * @description  UGCå¾å±ç±»åã
 * @type {string}
 */

var UGCLayerType = SuperMap.UGCLayerType = {
  /** ä¸é¢å¾å±ã */
  THEME: "THEME",

  /** ç¢éå¾å±ã */
  VECTOR: "VECTOR",

  /** æ æ ¼å¾å±ãã */
  GRID: "GRID",

  /** å½±åå¾å±ã */
  IMAGE: "IMAGE"
};

/**
 * @enum StatisticMode
 * @memberOf SuperMap
 * @description  å­æ®µç»è®¡æ¹æ³ç±»åã
 * @type {string}
 */

var StatisticMode = SuperMap.StatisticMode = {
  /** ç»è®¡æéå­æ®µçå¹³åå¼ã */
  AVERAGE: "AVERAGE",

  /** ç»è®¡æéå­æ®µçæå¤§å¼ã */
  MAX: "MAX",

  /** ç»è®¡æéå­æ®µçæå°å¼ã */
  MIN: "MIN",

  /** ç»è®¡æéå­æ®µçæ åå·® */
  STDDEVIATION: "STDDEVIATION",

  /** ç»è®¡æéå­æ®µçæ»åã */
  SUM: "SUM",

  /** ç»è®¡æéå­æ®µçæ¹å·®ã */
  VARIANCE: "VARIANCE"
};

/**
 * @enum PixelFormat
 * @memberOf SuperMap
 * @description  æ æ ¼ä¸å½±åæ°æ®å­å¨çåç´ æ ¼å¼æä¸¾ã
 * @type {string}
 */

var PixelFormat = SuperMap.PixelFormat = {
  /** æ¯ä¸ªååç¨16ä¸ªæ¯ç¹(å³2ä¸ªå­è)è¡¨ç¤ºã */
  BIT16: "BIT16",

  /** æ¯ä¸ªååç¨32ä¸ªæ¯ç¹(å³4ä¸ªå­è)è¡¨ç¤ºã */
  BIT32: "BIT32",

  /** æ¯ä¸ªååç¨64ä¸ªæ¯ç¹(å³8ä¸ªå­è)è¡¨ç¤ºï¼åªæä¾ç»æ æ ¼æ°æ®éä½¿ç¨ã */
  BIT64: "BIT64",

  /** æ¯ä¸ªååç¨4ä¸ªå­èæ¥è¡¨ç¤ºï¼åªæä¾ç»æ æ ¼æ°æ®éä½¿ç¨ã */
  SINGLE: "SINGLE",

  /** æ¯ä¸ªååç¨8ä¸ªå­èæ¥è¡¨ç¤ºï¼åªæä¾ç»æ æ ¼æ°æ®éä½¿ç¨ã */
  DOUBLE: "DOUBLE",

  /** æ¯ä¸ªååç¨1ä¸ªæ¯ç¹è¡¨ç¤ºã */
  UBIT1: "UBIT1",

  /** æ¯ä¸ªååç¨4ä¸ªæ¯ç¹æ¥è¡¨ç¤ºã */
  UBIT4: "UBIT4",

  /** æ¯ä¸ªååç¨8ä¸ªæ¯ç¹(å³1ä¸ªå­è)æ¥è¡¨ç¤ºã */
  UBIT8: "UBIT8",

  /** æ¯ä¸ªååç¨24ä¸ªæ¯ç¹(å³3ä¸ªå­è)æ¥è¡¨ç¤ºã */
  UBIT24: "UBIT24",

  /** æ¯ä¸ªååç¨32ä¸ªæ¯ç¹(å³4ä¸ªå­è)æ¥è¡¨ç¤ºã */
  UBIT32: "UBIT32"
};

/**
 * @enum SearchMode
 * @memberOf SuperMap
 * @description  åææ¶ä½¿ç¨çæ ·æ¬ç¹çæ¥æ¾æ¹å¼æä¸¾
 * @type {string}
 */

var SearchMode = SuperMap.SearchMode = {
  /** ä½¿ç¨ KDTREE çåºå®ç¹æ°æ¹å¼æ¥æ¾åä¸åæåæçç¹ã */
  KDTREE_FIXED_COUNT: "KDTREE_FIXED_COUNT",

  /** ä½¿ç¨ KDTREE çå®é¿æ¹å¼æ¥æ¾åä¸åæåæçç¹ã */
  KDTREE_FIXED_RADIUS: "KDTREE_FIXED_RADIUS",

  /** ä¸è¿è¡æ¥æ¾ï¼ä½¿ç¨ææçè¾å¥ç¹è¿è¡åæåæã */
  NONE: "NONE",

  /** ä½¿ç¨ QUADTREE æ¹å¼æ¥æ¾åä¸åæåæçç¹ï¼ä»å¯¹æ ·æ¡ï¼RBFï¼æå¼åæ®éååéï¼Krigingï¼æç¨ã */
  QUADTREE: "QUADTREE"
};

/**
 * @enum InterpolationAlgorithmType
 * @memberOf SuperMap
 * @description  æå¼åæçç®æ³çç±»å
 * @type {string}
 */

var InterpolationAlgorithmType = SuperMap.InterpolationAlgorithmType = {
  /** æ®éååéæå¼æ³ã */
  KRIGING: "KRIGING",

  /** ç®åååéæå¼æ³ã */
  SimpleKriging: "SimpleKriging",

  /** æ³ååéæå¼æ³ã */
  UniversalKriging: "UniversalKriging"
};

/**
 * @enum VariogramMode
 * @memberOf SuperMap
 * @description  ååéï¼Krigingï¼æå¼æ¶çååå½æ°ç±»åæä¸¾
 * @type {string}
 */

var VariogramMode = SuperMap.VariogramMode = {
  /** ææ°å½æ°ã */
  EXPONENTIAL: "EXPONENTIAL",

  /** é«æ¯å½æ°ã */
  GAUSSIAN: "GAUSSIAN",

  /** çåå½æ°ã */
  SPHERICAL: "SPHERICAL"
};

/**
 * @enum Exponent
 * @memberOf SuperMap
 * @description  å®ä¹äºæ³ååéï¼UniversalKrigingï¼æå¼æ¶æ ·ç¹æ°æ®ä¸­è¶å¿é¢æ¹ç¨çé¶æ°
 * @type {string}
 */

var Exponent = SuperMap.Exponent = {
  /** é¶æ°ä¸º1ã */
  EXP1: "EXP1",

  /** é¶æ°ä¸º2ã */
  EXP2: "EXP2"
};

/**
 * @enum ClientType
 * @memberOf SuperMap
 * @description tokenç³è¯·çå®¢æ·ç«¯æ è¯ç±»å
 * @type {string}
 */

var ClientType = SuperMap.ClientType = {
  /** æå®ç IP å°åã */
  IP: "IP",

  /** æå®ç URLã */
  REFERER: "Referer",

  /** åéç³è¯·ä»¤çè¯·æ±çå®¢æ·ç«¯ IPã */
  REQUESTIP: "RequestIP",

  /** ä¸åä»»ä½éªè¯ã */
  NONE: "NONE",

  /** SERVERã */
  SERVER: "SERVER",

  /** WEBã */
  WEB: "WEB"
};

/**
 * @enum ChartType
 * @memberOf SuperMap
 * @description å®¢æ·ç«¯ä¸é¢å¾å¾è¡¨ç±»å
 * @type {string}
 */

var ChartType = SuperMap.ChartType = {
  /** æ±ç¶å¾ã */
  BAR: "Bar",

  /** ä¸ç»´æ±ç¶å¾ã */
  BAR3D: "Bar3D",

  /** åå½¢å¾ã */
  CIRCLE: "Circle",

  /** é¥¼å¾ã */
  PIE: "Pie",

  /** æ£ç¹å¾ã */
  POINT: "Point",

  /** æçº¿å¾ã */
  LINE: "Line",

  /** ç¯ç¶å¾ã */
  RING: "Ring"
};

/**
 * @enum ClipAnalystMode
 * @memberOf SuperMap
 * @description  è£åªåææ¨¡å¼
 * @type {string}
 */

var ClipAnalystMode = SuperMap.ClipAnalystMode = {
  /** CLIPã */
  CLIP: "clip",

  /** INTERSECTã */
  INTERSECT: "intersect"
};

/**
 * @enum AnalystAreaUnit
 * @memberOf SuperMap
 * @description åå¸å¼åæé¢ç§¯åä½
 * @type {string}
 */

var AnalystAreaUnit = SuperMap.AnalystAreaUnit = {
  /** å¹³æ¹ç±³ã */
  "SQUAREMETER": "SquareMeter",

  /** å¹³æ¹åç±³ã */
  "SQUAREKILOMETER": "SquareKiloMeter",

  /** å¬é¡·ã */
  "HECTARE": "Hectare",

  /** å¬äº©ã */
  "ARE": "Are",

  /** è±äº©ã */
  "ACRE": "Acre",

  /** å¹³æ¹è±å°ºã */
  "SQUAREFOOT": "SquareFoot",

  /** å¹³æ¹ç ã */
  "SQUAREYARD": "SquareYard",

  /** å¹³æ¹è±éã */
  "SQUAREMILE": "SquareMile"
};

/**
 * @enum AnalystSizeUnit
 * @memberOf SuperMap
 * @description åå¸å¼åæåä½
 * @type {string}
 */

var AnalystSizeUnit = SuperMap.AnalystSizeUnit = {
  /** ç±³ã */
  "METER": "Meter",

  /** åç±³ã */
  "KILOMETER": "Kilometer",

  /** ç ã */
  "YARD": "Yard",

  /** è±å°ºã */
  "FOOT": "Foot",

  /** è±éã */
  "MILE": "Mile"
};

/**
 * @enum StatisticAnalystMode
 * @memberOf SuperMap
 * @description åå¸å¼åæç»è®¡æ¨¡å¼
 * @type {string}
 */

var StatisticAnalystMode = SuperMap.StatisticAnalystMode = {
  /** ç»è®¡æéå­æ®µçæå¤§å¼ã */
  "MAX": "max",

  /** ç»è®¡æéå­æ®µçæå°å¼ã */
  "MIN": "min",

  /** ç»è®¡æéå­æ®µçå¹³åå¼ã */
  "AVERAGE": "average",

  /** ç»è®¡æéå­æ®µçæ»åã */
  "SUM": "sum",

  /** ç»è®¡æéå­æ®µçæ¹å·®ã */
  "VARIANCE": "variance",

  /** ç»è®¡æéå­æ®µçæ åå·® */
  "STDDEVIATION": "stdDeviation"
};

/**
 * @enum SummaryType
 * @memberOf SuperMap
 * @description åå¸å¼åæèåç±»å
 * @type {string}
 */

var SummaryType = SuperMap.SummaryType = {
  /** æ ¼ç½èåã */
  "SUMMARYMESH": "SUMMARYMESH",

  /** å¤è¾¹å½¢èåã */
  "SUMMARYREGION": "SUMMARYREGION"
};

/**
 * @enum TopologyValidatorRule
 * @memberOf SuperMap
 * @description  æææ£æ¥æ¨¡å¼æä¸¾ãè¯¥ç±»å®ä¹äºæææ£æ¥æä½æ¨¡å¼å¸¸éã
 * @type {string}
 */

var TopologyValidatorRule = SuperMap.TopologyValidatorRule = {
  /** é¢åæ éå ï¼ç¨äºå¯¹é¢æ°æ®è¿è¡æææ£æ¥ã */
  REGIONNOOVERLAP: "REGIONNOOVERLAP",

  /** é¢ä¸é¢æ éå ï¼ç¨äºå¯¹é¢æ°æ®è¿è¡æææ£æ¥ã */
  REGIONNOOVERLAPWITH: "REGIONNOOVERLAPWITH",

  /** é¢è¢«é¢åå«ï¼ç¨äºå¯¹é¢æ°æ®è¿è¡æææ£æ¥ã */
  REGIONCONTAINEDBYREGION: "REGIONCONTAINEDBYREGION",

  /** é¢è¢«é¢è¦çï¼ç¨äºå¯¹é¢æ°æ®è¿è¡æææ£æ¥ã */
  REGIONCOVEREDBYREGION: "REGIONCOVEREDBYREGION",

  /** çº¿ä¸çº¿æ éå ï¼ç¨äºå¯¹çº¿æ°æ®è¿è¡æææ£æ¥ã */
  LINENOOVERLAP: "LINENOOVERLAP",

  /** çº¿åæ éå ï¼ç¨äºå¯¹çº¿æ°æ®è¿è¡æææ£æ¥ã */
  LINENOOVERLAPWITH: "LINENOOVERLAPWITH",

  /** ç¹ä¸ç¸åï¼ç¨äºå¯¹ç¹æ°æ®è¿è¡æææ£æ¥ã */
  POINTNOIDENTICAL: "POINTNOIDENTICAL"
};

/**
 * @enum AggregationType
 * @memberOf SuperMap
 * @description  èåæ¥è¯¢æä¸¾ç±»ï¼è¯¥ç±»å®ä¹äºEsæ°æ®æå¡ä¸­èåæ¥è¯¢æ¨¡å¼å¸¸é
 * @type {string}
 */

var AggregationType = SuperMap.AggregationType = {
  /** æ ¼ç½èåç±»åã */
  GEOHASH_GRID: "geohash_grid",

  /** è¿æ»¤èåç±»åã */
  FILTER: "filter"
};

/**
 * @enum AggregationType
 * @memberOf SuperMap
 * @description  èåæ¥è¯¢ä¸­filteræ¥è¯¢æä¸¾ç±»
 * @type {string}
 */

var AggregationQueryBuilderType = SuperMap.AggregationQueryBuilderType = {
  /** èå´æ¥è¯¢ã */
  GEO_BOUNDING_BOX: "geo_bounding_box"
};

/**
 * @enum GetFeatureMode
 * @memberOf SuperMap
 * @description feature æ¥è¯¢æ¹å¼ã
 * @type {string}
 */

var GetFeatureMode = SuperMap.GetFeatureMode = {
  /** éè¿èå´æ¥è¯¢æ¥è·åè¦ç´ ã */
  BOUNDS: "BOUNDS",

  /** éè¿å ä½å¯¹è±¡çç¼å²åºæ¥è·åè¦ç´ ã */
  BUFFER: "BUFFER",

  /** éè¿ ID æ¥è·åè¦ç´ ã */
  ID: "ID",

  /** éè¿ç©ºé´æ¥è¯¢æ¨¡å¼æ¥è·åè¦ç´ ã */
  SPATIAL: "SPATIAL",

  /** éè¿ SQL æ¥è¯¢æ¥è·åè¦ç´ ã */
  SQL: 'SQL'
};

/**
 * @enum RasterFunctionType
 * @memberOf SuperMap
 * @description æ æ ¼åææ¹æ³ã
 * @type {string}
 */

var RasterFunctionType = SuperMap.RasterFunctionType = {
  /** å½ä¸åæ¤è¢«ææ°ã */
  NDVI: "NDVI",

  /** é´å½±é¢åæã */
  HILLSHADE: "HILLSHADE"
};

/**
 * @enum ResourceType
 * @memberOf SuperMap
 * @description iportalèµæºç±»åã
 * @version 10.0.1
 * @type {string}
 */

var ResourceType = SuperMap.ResourceType = {
  /** å°å¾ã */
  MAP: "MAP",

  /** æå¡ã */
  SERVICE: "SERVICE",

  /** åºæ¯ã */
  SCENE: "SCENE",

  /** æ°æ®ã */
  DATA: "DATA",

  /** æ´å¯ã */
  INSIGHTS_WORKSPACE: "INSIGHTS_WORKSPACE",

  /** å¤§å±ã */
  MAP_DASHBOARD: "MAP_DASHBOARD"
};

/**
 * @enum OrderBy
 * @memberOf SuperMap
 * @description iportalèµæºæåºå­æ®µã
 * @version 10.0.1
 * @type {string}
 */

var OrderBy = SuperMap.OrderBy = {
  /** ææ´æ°æ¶é´æåº */
  UPDATETIME: "UPDATETIME",

  /** æç­åº¦(å¯è½æ¯è®¿é®éãä¸è½½é)æåº */
  HEATLEVEL: "HEATLEVEL",

  /** æç¸å³æ§æåº */
  RELEVANCE: "RELEVANCE"
};

/**
 * @enum OrderType
 * @memberOf SuperMap
 * @description iportalèµæºååºè¿æ¯éåºè¿æ»¤
 * @version 10.0.1
 * @type {string}
 */

var OrderType = SuperMap.OrderType = {
  /** ååº */
  ASC: "ASC",

  /** éåº */
  DESC: "DESC"
};

/**
 * @enum SearchType
 * @memberOf SuperMap
 * @description iportalèµæºæ¥è¯¢çèå´è¿è¡è¿æ»¤
 * @version 10.0.1
 * @type {string}
 */

var SearchType = SuperMap.SearchType = {
  /** å¬å¼èµæºã */
  PUBLIC: "PUBLIC",

  /** æçèµæºã */
  MY_RES: "MY_RES",

  /** æçç¾¤ç»èµæºã */
  MYGROUP_RES: "MYGROUP_RES",

  /** æçé¨é¨èµæºã */
  MYDEPARTMENT_RES: "MYDEPARTMENT_RES",

  /** åäº«ç»æçèµæºã */
  SHARETOME_RES: "SHARETOME_RES"
};

/**
 * @enum AggregationTypes
 * @memberOf SuperMap
 * @description iportalèµæºèåæ¥è¯¢çç±»å
 * @version 10.0.1
 * @type {string}
 */

var AggregationTypes = SuperMap.AggregationTypes = {
  /** æ ç­¾ */
  TAG: "TAG",

  /** èµæºç±»å */
  TYPE: "TYPE"
};

/**
 * @enum PermissionType
 * @memberOf SuperMap
 * @description iportalèµæºæéç±»åã
 * @version 10.0.1
 * @type {string}
 */

var PermissionType = SuperMap.PermissionType = {
  /** å¯æ£ç´¢ */
  SEARCH: "SEARCH",

  /** å¯æ¥ç */
  READ: "READ",

  /** å¯ç¼è¾ */
  READWRITE: "READWRITE",

  /** å¯å é¤ */
  DELETE: "DELETE",

  /** å¯ä¸è½½ï¼åæ¬å¯è¯»ãå¯æ£ç´¢ */
  DOWNLOAD: "DOWNLOAD"
};

/**
 * @enum EntityType
 * @memberOf SuperMap
 * @description iportalèµæºå®ä½ç±»åã
 * @version 10.0.1
 * @type {string}
 */

var EntityType = SuperMap.EntityType = {
  /** é¨é¨ */
  DEPARTMENT: "DEPARTMENT",

  /** ç¨æ·ç» */
  GROUP: "GROUP",

  /** ç¾¤ç» */
  IPORTALGROUP: "IPORTALGROUP",

  /** è§è² */
  ROLE: "ROLE",

  /** ç¨æ· */
  USER: "USER"
};

/**
 * @enum DataItemType
 * @memberOf SuperMap
 * @description iportalæ°æ®ç±»åã
 * @version 10.0.1
 * @type {string}
 */

var DataItemType = SuperMap.DataItemType = {
  /** å·¥ä½ç©ºé´ sxwu, smwu, sxw, smw */
  WORKSPACE: "WORKSPACE",

  /** udb æ°æ®æº */
  UDB: "UDB",

  /** shpç©ºé´æ°æ® */
  SHP: "SHP",

  /** excelæ°æ® */
  EXCEL: "EXCEL",

  /** csvæ°æ® */
  CSV: "CSV",

  /** geojsonæ°æ®ã */
  GEOJSON: "GEOJSON",

  /** smtiles */
  SMTILES: "SMTILES",

  /** svtiles */
  SVTILES: "SVTILES",

  /** mbtiles */
  MBTILES: "MBTILES",

  /** tpk */
  TPK: "TPK",

  /** ugc v5 */
  UGCV5: "UGCV5",

  /** UGCV5_MVT  */
  UGCV5_MVT: "UGCV5_MVT",

  /** jsonæ°æ®  */
  JSON: "JSON"
};

/**
 * @enum WebExportFormatType
 * @memberOf SuperMap
 * @description Web æå°è¾åºçæ ¼å¼ã
 * @version 10.0.1
 * @type {string}
 */

var WebExportFormatType = SuperMap.WebExportFormatType = {
  /** png */
  PNG: "PNG",

  /** pdf */
  PDF: "PDF"
};

/**
 * @enum WebScaleOrientationType
 * @memberOf SuperMap
 * @description Web æ¯ä¾å°ºçæ¹ä½æ ·å¼ã
 * @version 10.0.1
 * @type {string}
 */

var WebScaleOrientationType = SuperMap.WebScaleOrientationType = {
  /** horizontal labels below */
  HORIZONTALLABELSBELOW: "HORIZONTALLABELSBELOW",

  /** horizontal labels above */
  HORIZONTALLABELSABOVE: "HORIZONTALLABELSABOVE",

  /** vertical labels left */
  VERTICALLABELSLEFT: "VERTICALLABELSLEFT",

  /** vertical labels right */
  VERTICALLABELSRIGHT: "VERTICALLABELSRIGHT"
};

/**
 * @enum WebScaleType
 * @memberOf SuperMap
 * @description Web æ¯ä¾å°ºçæ ·å¼ã
 * @version 10.0.1
 * @type {string}
 */

var WebScaleType = SuperMap.WebScaleType = {
  /** line */
  LINE: "LINE",

  /** bar */
  BAR: "BAR",

  /** bar sub */
  BAR_SUB: "BAR_SUB"
};

/**
 * @enum WebScaleUnit
 * @memberOf SuperMap
 * @description Web æ¯ä¾å°ºçåä½å¶ã
 * @version 10.0.1
 * @type {string}
 */

var WebScaleUnit = SuperMap.WebScaleUnit = {
  /** meter */
  METER: "METER",

  /** foot */
  FOOT: "FOOT",

  /** degrees */
  DEGREES: "DEGREES"
};

// CONCATENATED MODULE: ./src/common/commontypes/Size.js
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @class  SuperMap.Size
 * @category BaseTypes Style
 * @classdesc æ­¤ç±»æç»ä¸å¯¹é«å®½å¼çå®ä¾ã
 * @param {number} [w=0.0] - å®½åº¦ã
 * @param {number} [h=0.0] - é«åº¦ã
 *
 * @example
 * var size = new SuperMap.Size(31,46);
 */

var Size = /*#__PURE__*/function () {
  function Size(w, h) {
    _classCallCheck(this, Size);

    /**
     * @member {number} [SuperMap.Size.prototype.w=0.0]
     * @description å®½åº¦ã
     */
    this.w = w ? parseFloat(w) : 0.0;
    /**
     * @member {number} [SuperMap.Size.prototype.h=0.0]
     * @description é«åº¦ã
     */

    this.h = w ? parseFloat(h) : 0.0;
    this.CLASS_NAME = "SuperMap.Size";
  }
  /**
   * @function SuperMap.Size.prototype.toString
   * @description è¿åæ­¤å¯¹è±¡çå­ç¬¦ä¸²å½¢å¼ã
   * @example
   * var size = new SuperMap.Size(10,5);
   * var str = size.toString();
   * @returns {string} ä¾å¦ï¼"w=10,h=5"ã
   */


  _createClass(Size, [{
    key: "toString",
    value: function toString() {
      return "w=" + this.w + ",h=" + this.h;
    }
    /**
     * @function SuperMap.Size.prototype.clone
     * @description åéå½åsizeå¯¹è±¡ã
     * @example
     * var size = new SuperMap.Size(31,46);
     * var size2 = size.clone();
     * @returns {SuperMap.Size}  è¿åä¸ä¸ªæ°çä¸å½å size å¯¹è±¡æç¸åå®½ãé«ç Size å¯¹è±¡ã
     */

  }, {
    key: "clone",
    value: function clone() {
      return new Size(this.w, this.h);
    }
    /**
     *
     * @function SuperMap.Size.prototype.equals
     * @description æ¯è¾ä¸¤ä¸ª size å¯¹è±¡æ¯å¦ç¸ç­ã
     * @example
     * var size = new SuperMap.Size(31,46);
     * var size2 = new SuperMap.Size(31,46);
     * var isEquals = size.equals(size2);
     *
     * @param {SuperMap.Size} sz - ç¨äºæ¯è¾ç¸ç­ç Size å¯¹è±¡ã
     * @returns {boolean} ä¼ å¥ç size åå½å size é«å®½ç¸ç­ï¼æ³¨æï¼å¦æä¼ å¥ç size ä¸ºç©ºåè¿å falseã
     *
     */

  }, {
    key: "equals",
    value: function equals(sz) {
      var equals = false;

      if (sz != null) {
        equals = this.w === sz.w && this.h === sz.h || isNaN(this.w) && isNaN(this.h) && isNaN(sz.w) && isNaN(sz.h);
      }

      return equals;
    }
    /**
     *
     * @function SuperMap.Size.prototype.destroy
     * @description éæ¯æ­¤å¯¹è±¡ãéæ¯åæ­¤å¯¹è±¡çææå±æ§ä¸º nullï¼èä¸æ¯åå§å¼ã
     * @example
     * var size = new SuperMap.Size(31,46);
     * size.destroy();
     */

  }, {
    key: "destroy",
    value: function destroy() {
      this.w = null;
      this.h = null;
    }
  }]);

  return Size;
}();
SuperMap.Size = Size;
// CONCATENATED MODULE: ./src/common/commontypes/Pixel.js
function Pixel_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Pixel_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Pixel_createClass(Constructor, protoProps, staticProps) { if (protoProps) Pixel_defineProperties(Constructor.prototype, protoProps); if (staticProps) Pixel_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @class SuperMap.Pixel
 * @category BaseTypes Geometry
 * @classdesc æ­¤ç±»ç¨ x,y åæ æç»å±å¹åæ ï¼åç´ ç¹ï¼ã
 * @param {number} [x=0.0] - x åæ ã
 * @param {number} [y=0.0] - y åæ ã
 * @param {SuperMap.Pixel.Mode} [mode=SuperMap.Pixel.Mode.LeftTop] - åæ æ¨¡å¼ã
 *
 * @example
 * //åç¬åå»ºä¸ä¸ªå¯¹è±¡
 * var pixcel = new SuperMap.Pixel(100,50);
 *
 * //ä¾æ® size åå»º
 *  var size = new SuperMap.Size(21,25);
 *  var offset = new SuperMap.Pixel(-(size.w/2), -size.h);
 */

var Pixel = /*#__PURE__*/function () {
  function Pixel(x, y, mode) {
    Pixel_classCallCheck(this, Pixel);

    /**
     * @member {number} [SuperMap.Pixel.prototype.x=0.0]
     * @description x åæ ã
     */
    this.x = x ? parseFloat(x) : 0.0;
    /**
     * @member {number} [SuperMap.Pixel.prototype.y=0.0]
     * @description y åæ ã
     */

    this.y = y ? parseFloat(y) : 0.0;
    /**
     * @member {SuperMap.Pixel.Mode} [SuperMap.Pixel.prototype.mode=SuperMap.Pixel.Mode.LeftTop]
     * @description åæ æ¨¡å¼ï¼æå·¦ä¸ãå³ä¸ãå³ä¸ãå·¦ä¸è¿å ç§æ¨¡å¼ï¼åå«è¡¨ç¤ºç¸å¯¹äºå·¦ä¸è§ãå³ä¸è§ãå³ä¸è§ãå·¦ä¸è§çåæ ã 
     */

    this.mode = mode;
    this.CLASS_NAME = "SuperMap.Pixel";
    /**
     * @enum SuperMap.Pixel.Mode
     * @readonly
     * @description æ¨¡å¼ã
     * @type {string}
     */

    SuperMap.Pixel.Mode = {
      /** å·¦ä¸æ¨¡å¼ã*/
      LeftTop: "lefttop",

      /** å³ä¸æ¨¡å¼ã */
      RightTop: "righttop",

      /** å³ä¸æ¨¡å¼ã */
      RightBottom: "rightbottom",

      /** å·¦ä¸æ¨¡å¼ã */
      LeftBottom: "leftbottom"
    };
  }
  /**
   * @function SuperMap.Pixel.prototype.toString
   * @description è¿åæ­¤å¯¹è±¡çå­ç¬¦ä¸²å½¢å¼ã
   * @example
   *
   * var pixcel = new SuperMap.Pixel(100,50);
   * var str = pixcel.toString();
   *
   * @returns {string} ä¾å¦: "x=200.4,y=242.2"
   */


  Pixel_createClass(Pixel, [{
    key: "toString",
    value: function toString() {
      return "x=" + this.x + ",y=" + this.y;
    }
    /**
     * @function SuperMap.Pixel.prototype.clone
     * @description åéå½åç pixel å¯¹è±¡ã
     * @example
     * var pixcel = new SuperMap.Pixel(100,50);
     * var pixcel2 = pixcel.clone();
     * @returns {SuperMap.Pixel} è¿åä¸ä¸ªæ°çä¸å½å pixel å¯¹è±¡æç¸å xãy åæ ç pixel å¯¹è±¡ã
     */

  }, {
    key: "clone",
    value: function clone() {
      return new Pixel(this.x, this.y, this.mode);
    }
    /**
     * @function SuperMap.Pixel.prototype.equals
     * @description æ¯è¾ä¸¤ pixel æ¯å¦ç¸ç­ã
     * @example
     * var pixcel = new SuperMap.Pixel(100,50);
     * var pixcel2 = new SuperMap.Pixel(100,50);
     * var isEquals = pixcel.equals(pixcel2);
     *
     * @param {SuperMap.Pixel} px - ç¨äºæ¯è¾ç¸ç­ç pixel å¯¹è±¡ã
     * @returns {boolean} å¦æä¼ å¥çåç´ ç¹åå½ååç´ ç¹ç¸åè¿å trueï¼å¦æä¸åæä¼ å¥åæ°ä¸º NULL åè¿å falseã
     */

  }, {
    key: "equals",
    value: function equals(px) {
      var equals = false;

      if (px != null) {
        equals = this.x == px.x && this.y == px.y || isNaN(this.x) && isNaN(this.y) && isNaN(px.x) && isNaN(px.y);
      }

      return equals;
    }
    /**
     * @function SuperMap.Pixel.prototype.distanceTo
     * @description è¿åä¸¤ä¸ª pixel çè·ç¦»ã
     * @example
     * var pixcel = new SuperMap.Pixel(100,50);
     * var pixcel2 = new SuperMap.Pixel(110,30);
     * var distance = pixcel.distanceTo(pixcel2);
     *
     * @param {SuperMap.Pixel} px - ç¨äºè®¡ç®çä¸ä¸ª pixelã
     * @returns {float} ä½ä¸ºåæ°ä¼ å¥çåç´ ä¸å½ååç´ ç¹çè·ç¦»ã
     */

  }, {
    key: "distanceTo",
    value: function distanceTo(px) {
      return Math.sqrt(Math.pow(this.x - px.x, 2) + Math.pow(this.y - px.y, 2));
    }
    /**
     * @function SuperMap.Pixel.prototype.add
     * @description å¨åæ¥åç´ åæ åºç¡ä¸ï¼x å¼å ä¸ä¼ å¥ç x åæ°ï¼y å¼å ä¸ä¼ å¥ç y åæ°ã
     * @example
     * var pixcel = new SuperMap.Pixel(100,50);
     * //pixcel2æ¯æ°çå¯¹è±¡
     * var pixcel2 = pixcel.add(20,30);
     *
     * @param {number} x - ä¼ å¥ç x å¼ã
     * @param {number} y - ä¼ å¥ç y å¼ã
     * @returns {SuperMap.Pixel} è¿åä¸ä¸ªæ°ç pixel å¯¹è±¡ï¼è¯¥ pixel æ¯ç±å½åç pixel ä¸ä¼ å¥ç xï¼y ç¸å å¾å°ã
     */

  }, {
    key: "add",
    value: function add(x, y) {
      if (x == null || y == null) {
        throw new TypeError('Pixel.add cannot receive null values');
      }

      return new Pixel(this.x + x, this.y + y);
    }
    /**
     * @function SuperMap.Pixel.prototype.offset
     * @description éè¿ä¼ å¥ç {@link SuperMap.Pixel} åæ°å¯¹åå±å¹åæ è¿è¡åç§»ã
     * @example
     * var pixcel = new SuperMap.Pixel(100,50);
     * var pixcel2 = new SuperMap.Pixel(130,20);
     * //pixcel3 æ¯æ°çå¯¹è±¡
     * var pixcel3 = pixcel.offset(pixcel2);
     *
     * @param {SuperMap.Pixel} px - ä¼ å¥ç <SuperMap.Pixel> å¯¹è±¡ã
     * @returns {SuperMap.Pixel} è¿åä¸ä¸ªæ°ç pixelï¼è¯¥ pixel æ¯ç±å½åç pixel å¯¹è±¡ç xï¼y å¼ä¸ä¼ å¥ç Pixel å¯¹è±¡ç xï¼y å¼ç¸å å¾å°ã
     */

  }, {
    key: "offset",
    value: function offset(px) {
      var newPx = this.clone();

      if (px) {
        newPx = this.add(px.x, px.y);
      }

      return newPx;
    }
    /**
     *
     * @function SuperMap.Pixel.prototype.destroy
     * @description éæ¯æ­¤å¯¹è±¡ãéæ¯åæ­¤å¯¹è±¡çææå±æ§ä¸º nullï¼èä¸æ¯åå§å¼ã
     * @example
     * var pixcel = new SuperMap.Pixel(100,50);
     * pixcel.destroy();
     */

  }, {
    key: "destroy",
    value: function destroy() {
      this.x = null;
      this.y = null;
      this.mode = null;
    }
  }]);

  return Pixel;
}();
SuperMap.Pixel = Pixel;
// CONCATENATED MODULE: ./src/common/commontypes/BaseTypes.js
function BaseTypes_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 *@namespace SuperMap
 *@category BaseTypes Namespace
 */

/**
 * @function SuperMap.inherit
 * @description é¤äº C å P ä¸¤ä¸ªå¿è¦åæ°å¤ï¼å¯ä»¥ä¼ éä»»ææ°éçå¯¹è±¡ï¼è¿äºå¯¹è±¡é½å°ç»§æ¿Cã
 * @memberOf SuperMap
 * @param {Object} C - ç»§æ¿çç±»ã
 * @param {Object} P - è¢«ç»§æ¿çç¶ç±»ã
 */

SuperMap.inherit = function (C, P) {
  var F = function F() {};

  F.prototype = P.prototype;
  C.prototype = new F();
  var i, l, o;

  for (i = 2, l = arguments.length; i < l; i++) {
    o = arguments[i];

    if (typeof o === "function") {
      o = o.prototype;
    }

    SuperMap.Util.extend(C.prototype, o);
  }
};
/**
 * @function SuperMap.mixin 
 * @description å®ç°å¤éç»§æ¿ã
 * @memberOf SuperMap
 * @param {Class|Object} ...mixins - ç»§æ¿çç±»ã
 */


SuperMap.mixin = function () {
  for (var _len = arguments.length, mixins = new Array(_len), _key = 0; _key < _len; _key++) {
    mixins[_key] = arguments[_key];
  }

  var Mix = function Mix(options) {
    BaseTypes_classCallCheck(this, Mix);

    for (var index = 0; index < mixins.length; index++) {
      copyProperties(this, new mixins[index](options));
    }
  };

  for (var index = 0; index < mixins.length; index++) {
    var mixin = mixins[index];
    copyProperties(Mix, mixin);
    copyProperties(Mix.prototype, mixin.prototype);
    copyProperties(Mix.prototype, new mixin());
  }

  return Mix;

  function copyProperties(target, source) {
    var ownKeys = Object.getOwnPropertyNames(source);

    if (Object.getOwnPropertySymbols) {
      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source));
    }

    for (var index = 0; index < ownKeys.length; index++) {
      var key = ownKeys[index];

      if (key !== "constructor" && key !== "prototype" && key !== "name" && key !== "length") {
        var desc = Object.getOwnPropertyDescriptor(source, key);

        if (window["ActiveXObject"]) {
          Object.defineProperty(target, key, desc || {});
        } else {
          Object.defineProperty(target, key, desc);
        }
      }
    }
  }
};
/**
 * @name String
 * @namespace
 * @memberOf SuperMap
 * @category BaseTypes Util
 * @description å­ç¬¦ä¸²æä½çä¸ç³»åå¸¸ç¨æ©å±å½æ°ã
 */


var StringExt = SuperMap.String = {
  /**
   * @function SuperMap.String.startsWith
   * @description å¤æ­ç®æ å­ç¬¦ä¸²æ¯å¦ä»¥æå®çå­å­ç¬¦ä¸²å¼å¤´ã
   * @param {string} str - ç®æ å­ç¬¦ä¸²ã
   * @param {string} sub - æ¥æ¾çå­å­ç¬¦ä¸²ã
   * @returns {boolean} ç®æ å­ç¬¦ä¸²ä»¥æå®çå­å­ç¬¦ä¸²å¼å¤´ï¼åè¿å trueï¼å¦åè¿å falseã
   */
  startsWith: function startsWith(str, sub) {
    return str.indexOf(sub) == 0;
  },

  /**
   * @function SuperMap.String.contains
   * @description å¤æ­ç®æ å­ç¬¦ä¸²æ¯å¦åå«æå®çå­å­ç¬¦ä¸²ã
   * @param {string} str - ç®æ å­ç¬¦ä¸²ã
   * @param {string} sub - æ¥æ¾çå­å­ç¬¦ä¸²ã
   * @returns {boolean} ç®æ å­ç¬¦ä¸²ä¸­åå«æå®çå­å­ç¬¦ä¸²ï¼åè¿å trueï¼å¦åè¿å falseã
   */
  contains: function contains(str, sub) {
    return str.indexOf(sub) != -1;
  },

  /**
   * @function SuperMap.String.trim
   * @description å é¤ä¸ä¸ªå­ç¬¦ä¸²çå¼å¤´åç»å°¾å¤çææç©ºç½å­ç¬¦ã
   * @param {string} str - ï¼å¯è½ï¼å­å¨ç©ºç½å­ç¬¦å¡«å¡çå­ç¬¦ä¸²ã
   * @returns {string} å é¤å¼å¤´åç»å°¾å¤ç©ºç½å­ç¬¦åçå­ç¬¦ä¸²ã
   */
  trim: function trim(str) {
    return str.replace(/^\s\s*/, '').replace(/\s\s*$/, '');
  },

  /**
   * @function SuperMap.String.camelize
   * @description éªé©¼å¼("-")è¿å­ç¬¦çå­ç¬¦ä¸²å¤çã
   * ä¾å¦ï¼"chicken-head" becomes "chickenHead",
   *       "-chicken-head" becomes "ChickenHead"ã
   * @param {string} str - è¦å¤ççå­ç¬¦ä¸²ï¼åå§åå®¹ä¸åºè¢«ä¿®æ¹ã
   * @returns {string}
   */
  camelize: function camelize(str) {
    var oStringList = str.split('-');
    var camelizedString = oStringList[0];

    for (var i = 1, len = oStringList.length; i < len; i++) {
      var s = oStringList[i];
      camelizedString += s.charAt(0).toUpperCase() + s.substring(1);
    }

    return camelizedString;
  },

  /**
   * @function SuperMap.String.format
   * @description æä¾å¸¦ ${token} æ è®°çå­ç¬¦ä¸², è¿å context å¯¹è±¡å±æ§ä¸­æå®æ è®°çå±æ§å¼ã
   * @example
   * ç¤ºä¾ï¼
   * (code)
   * 1ãtemplate = "${value,getValue}";
   *         context = {value: {getValue:function(){return Math.max.apply(null,argument);}}};
   *         args = [2,23,12,36,21];
   *       è¿åå¼:36
   * (end)
   * ç¤ºä¾:
   * (code)
   * 2ãtemplate = "$${{value,getValue}}";
   *         context = {value: {getValue:function(){return Math.max.apply(null,argument);}}};
   *         args = [2,23,12,36,21];
   *       è¿åå¼:"${36}"
   * (end)
   * ç¤ºä¾:
   * (code)
   * 3ãtemplate = "${a,b}";
   *         context = {a: {b:"format"}};
   *         args = null;
   *       è¿åå¼:"format"
   * (end)
   * ç¤ºä¾:
   * (code)
   * 3ãtemplate = "${a,b}";
   *         context = null;
   *         args = null;
   *       è¿åå¼:"${a.b}"
   * (end)
   * @param {string} template - å¸¦æ è®°çå­ç¬¦ä¸²å°è¦è¢«æ¿æ¢ãåæ° template æ ¼å¼ä¸º"${token}"ï¼æ­¤å¤ç token æ è®°ä¼æ¿æ¢ä¸º context["token"] å±æ§çå¼ã
   * @param {Object} [context=window] - å¸¦æå±æ§çå¯éå¯¹è±¡çå±æ§ç¨äºå¹éæ ¼å¼åå­ç¬¦ä¸²ä¸­çæ è®°ãå¦æè¯¥åæ°ä¸ºç©ºï¼å°ä½¿ç¨ window å¯¹è±¡ã
   * @param {Array} [args] - å¯éåæ°ä¼ éç»å¨ context å¯¹è±¡ä¸æ¾å°çå½æ°ã
   * @returns {string} ä» context å¯¹è±¡å±æ§ä¸­æ¿æ¢å­ç¬¦ä¸²æ è®°ä½çå­ç¬¦ä¸²ã 
   */
  format: function format(template, context, args) {
    if (!context) {
      context = window;
    } // Example matching:
    // str   = ${foo.bar}
    // match = foo.bar


    var replacer = function replacer(str, match) {
      var replacement; // Loop through all subs. Example: ${a.b.c}
      // 0 -> replacement = context[a];
      // 1 -> replacement = context[a][b];
      // 2 -> replacement = context[a][b][c];

      var subs = match.split(/\.+/);

      for (var i = 0; i < subs.length; i++) {
        if (i == 0) {
          replacement = context;
        }

        replacement = replacement[subs[i]];
      }

      if (typeof replacement === "function") {
        replacement = args ? replacement.apply(null, args) : replacement();
      } // If replacement is undefined, return the string 'undefined'.
      // This is a workaround for a bugs in browsers not properly
      // dealing with non-participating groups in regular expressions:
      // http://blog.stevenlevithan.com/archives/npcg-javascript


      if (typeof replacement == 'undefined') {
        return 'undefined';
      } else {
        return replacement;
      }
    };

    return template.replace(SuperMap.String.tokenRegEx, replacer);
  },

  /**
   * @member {RegExp} [SuperMap.String.tokenRegEx]
   * @description å¯»æ¾å¸¦ token çå­ç¬¦ä¸²ï¼é»è®¤ä¸º tokenRegEx=/\$\{([\w.]+?)\}/gã
   * @example
   * Examples: ${a}, ${a.b.c}, ${a-b}, ${5}
   */
  tokenRegEx: /\$\{([\w.]+?)\}/g,

  /**
   * @member {RegExp} [SuperMap.String.numberRegEx]
   * @description å¤æ­ä¸ä¸ªå­ç¬¦ä¸²æ¯å¦åªåå«ä¸ä¸ªæ°å¼ï¼é»è®¤ä¸º numberRegEx=/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/ã
   */
  numberRegEx: /^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,

  /**
   * @function SuperMap.String.isNumeric
   * @description å¤æ­ä¸ä¸ªå­ç¬¦ä¸²æ¯å¦åªåå«ä¸ä¸ªæ°å¼ã
   * @example
   * (code)
   * SuperMap.String.isNumeric("6.02e23") // true
   * SuperMap.String.isNumeric("12 dozen") // false
   * SuperMap.String.isNumeric("4") // true
   * SuperMap.String.isNumeric(" 4 ") // false
   * (end)
   * @returns {boolean} å­ç¬¦ä¸²åå«å¯ä¸çæ°å¼ï¼è¿å trueï¼å¦åè¿å falseã
   */
  isNumeric: function isNumeric(value) {
    return SuperMap.String.numberRegEx.test(value);
  },

  /**
   * @function SuperMap.String.numericIf
   * @description æä¸ä¸ªçä¼¼æ°å¼åçå­ç¬¦ä¸²è½¬åä¸ºä¸ä¸ªæ°å¼ã
   * @returns {(number|string)} å¦æè½è½¬æ¢ä¸ºæ°å¼åè¿åæ°å¼ï¼å¦åè¿åå­ç¬¦ä¸²æ¬èº«ã
   */
  numericIf: function numericIf(value) {
    return SuperMap.String.isNumeric(value) ? parseFloat(value) : value;
  }
};
/**
 * @name Number
 * @memberOf SuperMap
 * @namespace
 * @category BaseTypes Util
 * @description æ°å¼æä½çä¸ç³»åå¸¸ç¨æ©å±å½æ°ã
 */

var NumberExt = SuperMap.Number = {
  /**
   * @member {string} [SuperMap.Number.decimalSeparator='.']
   * @description æ ¼å¼åæ°å­æ¶é»è®¤çå°æ°ç¹åéç¬¦ã
   * @constant
   */
  decimalSeparator: ".",

  /**
   * @member {string} [SuperMap.Number.thousandsSeparator=',']
   * @description æ ¼å¼åæ°å­æ¶é»è®¤çåä½åéç¬¦ã
   * @constant
   */
  thousandsSeparator: ",",

  /**
   * @function SuperMap.Number.limitSigDigs
   * @description éå¶æµ®ç¹æ°çæææ°å­ä½æ°ã
   * @param {number} num - æµ®ç¹æ°ã
   * @param {integer} sig - ææä½æ°ã
   * @returns {number} å°æ°å­åèäºå¥å°æå®æ°éçææä½æ°ã
   */
  limitSigDigs: function limitSigDigs(num, sig) {
    var fig = 0;

    if (sig > 0) {
      fig = parseFloat(num.toPrecision(sig));
    }

    return fig;
  },

  /**
   * @function SuperMap.Number.format
   * @description æ°å­æ ¼å¼åè¾åºã
   * @param {number} num - æ°å­ã
   * @param {integer} [dec=0]  - æ°å­çå°æ°é¨ååèäºå¥å°æå®çä½æ°ãè®¾ç½®ä¸º null å¼æ¶å°æ°é¨åä¸åã
   * @param {string} [tsep=','] - åä½åéç¬¦ã
   * @param {string} [dsep='.'] - å°æ°ç¹åéç¬¦ã
   * @returns {string} æ°å­æ ¼å¼ååçå­ç¬¦ä¸²ã
   */
  format: function format(num, dec, tsep, dsep) {
    dec = typeof dec != "undefined" ? dec : 0;
    tsep = typeof tsep != "undefined" ? tsep : SuperMap.Number.thousandsSeparator;
    dsep = typeof dsep != "undefined" ? dsep : SuperMap.Number.decimalSeparator;

    if (dec != null) {
      num = parseFloat(num.toFixed(dec));
    }

    var parts = num.toString().split(".");

    if (parts.length === 1 && dec == null) {
      // integer where we do not want to touch the decimals
      dec = 0;
    }

    var integer = parts[0];

    if (tsep) {
      var thousands = /(-?[0-9]+)([0-9]{3})/;

      while (thousands.test(integer)) {
        integer = integer.replace(thousands, "$1" + tsep + "$2");
      }
    }

    var str;

    if (dec == 0) {
      str = integer;
    } else {
      var rem = parts.length > 1 ? parts[1] : "0";

      if (dec != null) {
        rem = rem + new Array(dec - rem.length + 1).join("0");
      }

      str = integer + dsep + rem;
    }

    return str;
  }
};

if (!Number.prototype.limitSigDigs) {
  /**
   * APIMethod: Number.limitSigDigs
   * éå¶æµ®ç¹æ°çæææ°å­ä½æ°.
   * @param {integer} sig -ææä½æ°ã
   * @returns {integer} å°æ°å­åèäºå¥å°æå®æ°éçææä½æ°ã
   *           å¦æä¼ å¥å¼ ä¸º nullã0ãæèæ¯è´æ°, è¿åå¼ 0ã
   */
  Number.prototype.limitSigDigs = function (sig) {
    return NumberExt.limitSigDigs(this, sig);
  };
}
/**
 * @name Function
 * @memberOf SuperMap
 * @namespace
 * @category BaseTypes Util
 * @description å½æ°æä½çä¸ç³»åå¸¸ç¨æ©å±å½æ°ã
 */


var FunctionExt = SuperMap.Function = {
  /**
   * @function SuperMap.Function.bind
   * @description ç»å®å½æ°å°å¯¹è±¡ãæ¹ä¾¿åå»º this çä½ç¨åã
   * @param {function} func - è¾å¥å½æ°ã
   * @param {Object} object - å¯¹è±¡ç»å®å°è¾å¥å½æ°ï¼ä½ä¸ºè¾å¥å½æ°ç this å¯¹è±¡ï¼ã
   * @returns {function} object åæ°ä½ä¸º func å½æ°ç this å¯¹è±¡ã
   */
  bind: function bind(func, object) {
    // create a reference to all arguments past the second one
    var args = Array.prototype.slice.apply(arguments, [2]);
    return function () {
      // Push on any additional arguments from the actual function call.
      // These will come after those sent to the bind call.
      var newArgs = args.concat(Array.prototype.slice.apply(arguments, [0]));
      return func.apply(object, newArgs);
    };
  },

  /**
   * @function SuperMap.Function.bindAsEventListener
   * @description ç»å®å½æ°å°å¯¹è±¡ï¼å¨è°ç¨è¯¥å½æ°æ¶éç½®å¹¶ä½¿ç¨äºä»¶å¯¹è±¡ä½ä¸ºç¬¬ä¸ä¸ªåæ°ã
   * @param {function} func - ç¨äºçå¬äºä»¶çå½æ°ã
   * @param {Object} object - this å¯¹è±¡çå¼ç¨ã
   * @returns {function}
   */
  bindAsEventListener: function bindAsEventListener(func, object) {
    return function (event) {
      return func.call(object, event || window.event);
    };
  },

  /**
   * @function SuperMap.Function.False
   * @description è¯¥å½æ°ä»ä»è¿å falseãè¯¥å½æ°ä¸»è¦æ¯é¿åå¨ IE8 ä»¥ä¸æµè§ä¸­ DOM äºä»¶å¥æçå¿åå½æ°é®é¢ã
   * @example
   * document.onclick = SuperMap.Function.False;
   * @returns {boolean}
   */
  False: function False() {
    return false;
  },

  /**
   * @function SuperMap.Function.True
   * @description è¯¥å½æ°ä»ä»è¿å trueãè¯¥å½æ°ä¸»è¦æ¯é¿åå¨ IE8 ä»¥ä¸æµè§ä¸­ DOM äºä»¶å¥æçå¿åå½æ°é®é¢ã
   * @example
   * document.onclick = SuperMap.Function.True;
   * @returns {boolean}
   */
  True: function True() {
    return true;
  },

  /**
   * @function SuperMap.Function.Void
   * @description å¯éç¨å½æ°ï¼ä»ä»è¿å "undefined"ã
   * @returns {undefined}
   */
  Void: function Void() {}
};
/**
 * @name Array
 * @memberOf SuperMap
 * @namespace
 * @category BaseTypes Util
 * @description æ°ç»æä½çä¸ç³»åå¸¸ç¨æ©å±å½æ°ã
 */

var ArrayExt = SuperMap.Array = {
  /**
   * @function SuperMap.Array.filter
   * @description è¿æ»¤æ°ç»ï¼æä¾äº ECMA-262 æ åä¸­ Array.prototype.filter å½æ°çæ©å±ãè¯¦è§ï¼{@link http://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Array/filter}
   * @param {Array} array - è¦è¿æ»¤çæ°ç»ã
   * @param {function} callback - æ°ç»ä¸­çæ¯ä¸ä¸ªåç´ è°ç¨è¯¥å½æ°ã</br>
   *     å¦æå½æ°çè¿åå¼ä¸º trueï¼è¯¥åç´ å°åå«å¨è¿åçæ°ç»ä¸­ãè¯¥å½æ°æä¸ä¸ªåæ°: æ°ç»ä¸­çåç´ ï¼åç´ çç´¢å¼ï¼æ°ç»èªèº«ã</br>
   *     å¦æè®¾ç½®äºå¯éåæ° callerï¼å¨è°ç¨ callback æ¶ï¼ä½¿ç¨å¯éåæ° caller è®¾ç½®ä¸º callback çåæ°ã</br>
   * @param {Object} [caller] - å¨è°ç¨ callback æ¶ï¼ä½¿ç¨åæ° caller è®¾ç½®ä¸º callback çåæ°ã
   * @returns {Array} callback å½æ°è¿å true æ¶çåç´ å°ä½ä¸ºè¿åæ°ç»ä¸­çåç´ ã
   */
  filter: function filter(array, callback, caller) {
    var selected = [];

    if (Array.prototype.filter) {
      selected = array.filter(callback, caller);
    } else {
      var len = array.length;

      if (typeof callback != "function") {
        throw new TypeError();
      }

      for (var i = 0; i < len; i++) {
        if (i in array) {
          var val = array[i];

          if (callback.call(caller, val, i, array)) {
            selected.push(val);
          }
        }
      }
    }

    return selected;
  }
};
// CONCATENATED MODULE: ./src/common/commontypes/Util.js
function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


var Util = SuperMap.Util = SuperMap.Util || {};
/**
 * @name Util
 * @memberOf SuperMap
 * @namespace
 * @category BaseTypes Util
 * @description common å·¥å·ç±»ã
 */

/**
 * @description å¤å¶æºå¯¹è±¡çææå±æ§å°ç®æ å¯¹è±¡ä¸ï¼æºå¯¹è±¡ä¸çæ²¡æå®ä¹çå±æ§å¨ç®æ å¯¹è±¡ä¸ä¹ä¸ä¼è¢«è®¾ç½®ã
 * @example
 * è¦å¤å¶ SuperMap.Size å¯¹è±¡çææå±æ§å°èªå®ä¹å¯¹è±¡ä¸ï¼ä½¿ç¨æ¹æ³å¦ä¸:
 *     var size = new SuperMap.Size(100, 100);
 *     var obj = {}ï¼
 *     SuperMap.Util.extend(obj, size);
 * @param {Object} [destination] - ç®æ å¯¹è±¡ã
 * @param {Object} source - æºå¯¹è±¡ï¼å¶å±æ§å°è¢«è®¾ç½®å°ç®æ å¯¹è±¡ä¸ã
 * @returns {Object} ç®æ å¯¹è±¡ã
 */

SuperMap.Util.extend = function (destination, source) {
  destination = destination || {};

  if (source) {
    for (var property in source) {
      var value = source[property];

      if (value !== undefined) {
        destination[property] = value;
      }
    }
    /**
     * IE doesn't include the toString property when iterating over an object's
     * properties with the for(property in object) syntax.  Explicitly check if
     * the source has its own toString property.
     */

    /*
     * FF/Windows < 2.0.0.13 reports "Illegal operation on WrappedNative
     * prototype object" when calling hawOwnProperty if the source object
     * is an instance of window.Event.
     */


    var sourceIsEvt = typeof window.Event === "function" && source instanceof window.Event;

    if (!sourceIsEvt && source.hasOwnProperty && source.hasOwnProperty("toString")) {
      destination.toString = source.toString;
    }
  }

  return destination;
};
/**
 * @description å¯¹è±¡æ·è´ã
 * @param {Object} [des] - ç®æ å¯¹è±¡ã
 * @param {Object} soc - æºå¯¹è±¡ã
 */


SuperMap.Util.copy = function (des, soc) {
  des = des || {};
  var v;

  if (soc) {
    for (var p in des) {
      v = soc[p];

      if (typeof v !== 'undefined') {
        des[p] = v;
      }
    }
  }
};
/**
 * @description éæ¯å¯¹è±¡ï¼å°å¶å±æ§ç½®ç©ºã
 * @param {Object} [obj] - ç®æ å¯¹è±¡ã
 */


SuperMap.Util.reset = function (obj) {
  obj = obj || {};

  for (var p in obj) {
    if (obj.hasOwnProperty(p)) {
      if (_typeof(obj[p]) === "object" && obj[p] instanceof Array) {
        for (var i in obj[p]) {
          if (obj[p][i].destroy) {
            obj[p][i].destroy();
          }
        }

        obj[p].length = 0;
      } else if (_typeof(obj[p]) === "object" && obj[p] instanceof Object) {
        if (obj[p].destroy) {
          obj[p].destroy();
        }
      }

      obj[p] = null;
    }
  }
};
/**
 * @description è·å HTML åç´ æ°ç»ã
 * @returns {Array.<HTMLElement>} HTML åç´ æ°ç»ã
 */


SuperMap.Util.getElement = function () {
  var elements = [];

  for (var i = 0, len = arguments.length; i < len; i++) {
    var element = arguments[i];

    if (typeof element === 'string') {
      element = document.getElementById(element);
    }

    if (arguments.length === 1) {
      return element;
    }

    elements.push(element);
  }

  return elements;
};
/**
 * @description instance of çè·¨æµè§å¨å®ç°ã
 * @param {Object} o - å¯¹è±¡ã
 * @returns {boolean} æ¯å¦æ¯é¡µé¢åç´ ã
 */


SuperMap.Util.isElement = function (o) {
  return !!(o && o.nodeType === 1);
};
/**
 * @description å¤æ­ä¸ä¸ªå¯¹è±¡æ¯å¦æ¯æ°ç»ã
 * @param {Object} a - å¯¹è±¡ã
 * @returns {boolean} æ¯å¦æ¯æ°ç»ã
 */


SuperMap.Util.isArray = function (a) {
  return Object.prototype.toString.call(a) === '[object Array]';
};
/**
 * @description ä»æ°ç»ä¸­å é¤æä¸é¡¹ã
 * @param {Array} array - æ°ç»ã
 * @param {Object} item - æ°ç»ä¸­è¦å é¤çä¸é¡¹ã
 * @returns {Array} æ§è¡å é¤æä½åçæ°ç»ã
 */


SuperMap.Util.removeItem = function (array, item) {
  for (var i = array.length - 1; i >= 0; i--) {
    if (array[i] === item) {
      array.splice(i, 1); //break;more than once??
    }
  }

  return array;
};
/**
 * @description è·åæå¯¹è±¡åæ°ç»ä¸­çç´¢å¼å¼ã
 * @param {Array} array - æ°ç»ã
 * @param {Object} obj - å¯¹è±¡ã
 * @returns {number} æå¯¹è±¡åæ°ç»ä¸­çç´¢å¼å¼ã
 */


SuperMap.Util.indexOf = function (array, obj) {
  if (array == null) {
    return -1;
  } else {
    // use the build-in function if available.
    if (typeof array.indexOf === "function") {
      return array.indexOf(obj);
    } else {
      for (var i = 0, len = array.length; i < len; i++) {
        if (array[i] === obj) {
          return i;
        }
      }

      return -1;
    }
  }
};
/**
 * @description ä¿®æ¹æ DOM åç´ çè®¸å¤å±æ§ã
 * @param {HTMLElement} element - å¾ä¿®æ¹ç DOM åç´ ã
 * @param {string} [id] - DOM åç´ ç IDã
 * @param {SuperMap.Pixel} [px] - åå« DOM åç´ ç style å±æ§ç left å top å±æ§ã
 * @param {SuperMap.Size} [sz] - åå« DOM åç´ ç width å height å±æ§ã
 * @param {string} [position] - DOM åç´ ç position å±æ§ã
 * @param {string} [border] - DOM åç´ ç style å±æ§ç border å±æ§ã
 * @param {string} [overflow] - DOM åç´ ç style å±æ§ç overflow å±æ§ã
 * @param {number} [opacity] - ä¸éæåº¦å¼ãåå¼èå´ä¸º(0.0 - 1.0)ã
 */


SuperMap.Util.modifyDOMElement = function (element, id, px, sz, position, border, overflow, opacity) {
  if (id) {
    element.id = id;
  }

  if (px) {
    element.style.left = px.x + "px";
    element.style.top = px.y + "px";
  }

  if (sz) {
    element.style.width = sz.w + "px";
    element.style.height = sz.h + "px";
  }

  if (position) {
    element.style.position = position;
  }

  if (border) {
    element.style.border = border;
  }

  if (overflow) {
    element.style.overflow = overflow;
  }

  if (parseFloat(opacity) >= 0.0 && parseFloat(opacity) < 1.0) {
    element.style.filter = 'alpha(opacity=' + opacity * 100 + ')';
    element.style.opacity = opacity;
  } else if (parseFloat(opacity) === 1.0) {
    element.style.filter = '';
    element.style.opacity = '';
  }
};
/**
 * @description Takes an object and copies any properties that don't exist from
 *     another properties, by analogy with SuperMap.Util.extend() from
 *     Prototype.js.
 *
 * @param {Object} [to] - ç®æ å¯¹è±¡ã
 * @param {Object} from - æºå¯¹è±¡ãAny properties of this object that
 *     are undefined in the to object will be set on the to object.
 *
 * @returns {Object} A reference to the to object.  Note that the to argument is modified
 *     in place and returned by this function.
 */


SuperMap.Util.applyDefaults = function (to, from) {
  to = to || {};
  /*
   * FF/Windows < 2.0.0.13 reports "Illegal operation on WrappedNative
   * prototype object" when calling hawOwnProperty if the source object is an
   * instance of window.Event.
   */

  var fromIsEvt = typeof window.Event === "function" && from instanceof window.Event;

  for (var key in from) {
    if (to[key] === undefined || !fromIsEvt && from.hasOwnProperty && from.hasOwnProperty(key) && !to.hasOwnProperty(key)) {
      to[key] = from[key];
    }
  }
  /**
   * IE doesn't include the toString property when iterating over an object's
   * properties with the for(property in object) syntax.  Explicitly check if
   * the source has its own toString property.
   */


  if (!fromIsEvt && from && from.hasOwnProperty && from.hasOwnProperty('toString') && !to.hasOwnProperty('toString')) {
    to.toString = from.toString;
  }

  return to;
};
/**
 * @description å°åæ°å¯¹è±¡è½¬æ¢ä¸º HTTP ç GET è¯·æ±ä¸­çåæ°å­ç¬¦ä¸²ãä¾å¦ï¼"key1=value1&key2=value2&key3=value3"ã
 * @param {Object} params - åæ°å¯¹è±¡ã
 * @returns {string} HTTP ç GET è¯·æ±ä¸­çåæ°å­ç¬¦ä¸²ã
 */


SuperMap.Util.getParameterString = function (params) {
  var paramsArray = [];

  for (var key in params) {
    var value = params[key];

    if (value != null && typeof value !== 'function') {
      var encodedValue;

      if (Array.isArray(value) || value.toString() === '[object Object]') {
        encodedValue = encodeURIComponent(JSON.stringify(value));
      } else {
        /* value is a string; simply encode */
        encodedValue = encodeURIComponent(value);
      }

      paramsArray.push(encodeURIComponent(key) + "=" + encodedValue);
    }
  }

  return paramsArray.join("&");
};
/**
 * @description ç» URL è¿½å æ¥è¯¢åæ°ã
 * @param {string} url - å¾è¿½å åæ°ç URL å­ç¬¦ä¸²ã
 * @param {string} paramStr - å¾è¿½å çæ¥è¯¢åæ°ã
 * @returns {string} æ°ç URLã
 */


SuperMap.Util.urlAppend = function (url, paramStr) {
  var newUrl = url;

  if (paramStr) {
    if (paramStr.indexOf('?') === 0) {
      paramStr = paramStr.substring(1);
    }

    var parts = (url + " ").split(/[?&]/);
    newUrl += parts.pop() === " " ? paramStr : parts.length ? "&" + paramStr : "?" + paramStr;
  }

  return newUrl;
};
/**
 * @description ç» URL è¿½å  path åæ°ã
 * @param {string} url - å¾è¿½å åæ°ç URL å­ç¬¦ä¸²ã
 * @param {string} paramStr - å¾è¿½å çpathåæ°ã
 * @returns {string} æ°ç URLã
 */


SuperMap.Util.urlPathAppend = function (url, pathStr) {
  var newUrl = url;

  if (!pathStr) {
    return newUrl;
  }

  if (pathStr.indexOf('/') === 0) {
    pathStr = pathStr.substring(1);
  }

  var parts = url.split('?');

  if (parts[0].indexOf('/', parts[0].length - 1) < 0) {
    parts[0] += '/';
  }

  newUrl = "".concat(parts[0]).concat(pathStr).concat(parts.length > 1 ? "?".concat(parts[1]) : '');
  return newUrl;
};
/**
 * @description ä¸ºäºé¿åæµ®ç¹ç²¾åº¦éè¯¯èä¿ççææä½æ°ã
 * @type {number}
 * @default 14
 */


SuperMap.Util.DEFAULT_PRECISION = 14;
/**
 * @description å°å­ç¬¦ä¸²ä»¥æ¥è¿çç²¾åº¦è½¬æ¢ä¸ºæ°å­ã
 * @param {string} number - å­ç¬¦ä¸²ã
 * @param {number} [precision=14] - ç²¾åº¦ã
 * @returns {number} æ°å­ã
 */

SuperMap.Util.toFloat = function (number, precision) {
  if (precision == null) {
    precision = SuperMap.Util.DEFAULT_PRECISION;
  }

  if (typeof number !== "number") {
    number = parseFloat(number);
  }

  return precision === 0 ? number : parseFloat(number.toPrecision(precision));
};
/**
 * @description è§åº¦è½¬å¼§åº¦ã
 * @param {number} x - è§åº¦ã
 * @returns {number} å¼§åº¦ã
 */


SuperMap.Util.rad = function (x) {
  return x * Math.PI / 180;
};
/**
 * @description ä» URL å­ç¬¦ä¸²ä¸­è§£æåºåæ°å¯¹è±¡ã
 * @param {string} url - URLã
 * @returns {Object} è§£æåºçåæ°å¯¹è±¡ã
 */


SuperMap.Util.getParameters = function (url) {
  // if no url specified, take it from the location bar
  url = url === null || url === undefined ? window.location.href : url; //parse out parameters portion of url string

  var paramsString = "";

  if (SuperMap.String.contains(url, '?')) {
    var start = url.indexOf('?') + 1;
    var end = SuperMap.String.contains(url, "#") ? url.indexOf('#') : url.length;
    paramsString = url.substring(start, end);
  }

  var parameters = {};
  var pairs = paramsString.split(/[&;]/);

  for (var i = 0, len = pairs.length; i < len; ++i) {
    var keyValue = pairs[i].split('=');

    if (keyValue[0]) {
      var key = keyValue[0];

      try {
        key = decodeURIComponent(key);
      } catch (err) {
        key = unescape(key);
      } // being liberal by replacing "+" with " "


      var value = (keyValue[1] || '').replace(/\+/g, " ");

      try {
        value = decodeURIComponent(value);
      } catch (err) {
        value = unescape(value);
      } // follow OGC convention of comma delimited values


      value = value.split(","); //if there's only one value, do not return as array                    

      if (value.length == 1) {
        value = value[0];
      }

      parameters[key] = value;
    }
  }

  return parameters;
};
/**
 * @description ä¸æ­éå¢è®¡æ°åéï¼ç¨äºçæå¯ä¸ IDã
 * @type {number}
 * @default 0
 */


SuperMap.Util.lastSeqID = 0;
/**
 * @description åå»ºå¯ä¸ ID å¼ã
 * @param {string} [prefix] - åç¼ã
 * @returns {string} å¯ä¸ç ID å¼ã
 */

SuperMap.Util.createUniqueID = function (prefix) {
  if (prefix == null) {
    prefix = "id_";
  }

  SuperMap.Util.lastSeqID += 1;
  return prefix + SuperMap.Util.lastSeqID;
};
/**
 * @memberOf SuperMap
 * @description æ¯åä½çè±å°ºæ°ã
 * @type {Object}
 * @constant
 */


SuperMap.INCHES_PER_UNIT = {
  'inches': 1.0,
  'ft': 12.0,
  'mi': 63360.0,
  'm': 39.3701,
  'km': 39370.1,
  'dd': 4374754,
  'yd': 36
};
SuperMap.INCHES_PER_UNIT.in = SuperMap.INCHES_PER_UNIT.inches;
SuperMap.INCHES_PER_UNIT.degrees = SuperMap.INCHES_PER_UNIT.dd;
SuperMap.INCHES_PER_UNIT.nmi = 1852 * SuperMap.INCHES_PER_UNIT.m; // Units from CS-Map

SuperMap.METERS_PER_INCH = 0.02540005080010160020;
SuperMap.Util.extend(SuperMap.INCHES_PER_UNIT, {
  "Inch": SuperMap.INCHES_PER_UNIT.inches,
  "Meter": 1.0 / SuperMap.METERS_PER_INCH,
  //EPSG:9001
  "Foot": 0.30480060960121920243 / SuperMap.METERS_PER_INCH,
  //EPSG:9003
  "IFoot": 0.30480000000000000000 / SuperMap.METERS_PER_INCH,
  //EPSG:9002
  "ClarkeFoot": 0.3047972651151 / SuperMap.METERS_PER_INCH,
  //EPSG:9005
  "SearsFoot": 0.30479947153867624624 / SuperMap.METERS_PER_INCH,
  //EPSG:9041
  "GoldCoastFoot": 0.30479971018150881758 / SuperMap.METERS_PER_INCH,
  //EPSG:9094
  "IInch": 0.02540000000000000000 / SuperMap.METERS_PER_INCH,
  "MicroInch": 0.00002540000000000000 / SuperMap.METERS_PER_INCH,
  "Mil": 0.00000002540000000000 / SuperMap.METERS_PER_INCH,
  "Centimeter": 0.01000000000000000000 / SuperMap.METERS_PER_INCH,
  "Kilometer": 1000.00000000000000000000 / SuperMap.METERS_PER_INCH,
  //EPSG:9036
  "Yard": 0.91440182880365760731 / SuperMap.METERS_PER_INCH,
  "SearsYard": 0.914398414616029 / SuperMap.METERS_PER_INCH,
  //EPSG:9040
  "IndianYard": 0.91439853074444079983 / SuperMap.METERS_PER_INCH,
  //EPSG:9084
  "IndianYd37": 0.91439523 / SuperMap.METERS_PER_INCH,
  //EPSG:9085
  "IndianYd62": 0.9143988 / SuperMap.METERS_PER_INCH,
  //EPSG:9086
  "IndianYd75": 0.9143985 / SuperMap.METERS_PER_INCH,
  //EPSG:9087
  "IndianFoot": 0.30479951 / SuperMap.METERS_PER_INCH,
  //EPSG:9080
  "IndianFt37": 0.30479841 / SuperMap.METERS_PER_INCH,
  //EPSG:9081
  "IndianFt62": 0.3047996 / SuperMap.METERS_PER_INCH,
  //EPSG:9082
  "IndianFt75": 0.3047995 / SuperMap.METERS_PER_INCH,
  //EPSG:9083
  "Mile": 1609.34721869443738887477 / SuperMap.METERS_PER_INCH,
  "IYard": 0.91440000000000000000 / SuperMap.METERS_PER_INCH,
  //EPSG:9096
  "IMile": 1609.34400000000000000000 / SuperMap.METERS_PER_INCH,
  //EPSG:9093
  "NautM": 1852.00000000000000000000 / SuperMap.METERS_PER_INCH,
  //EPSG:9030
  "Lat-66": 110943.316488932731 / SuperMap.METERS_PER_INCH,
  "Lat-83": 110946.25736872234125 / SuperMap.METERS_PER_INCH,
  "Decimeter": 0.10000000000000000000 / SuperMap.METERS_PER_INCH,
  "Millimeter": 0.00100000000000000000 / SuperMap.METERS_PER_INCH,
  "Dekameter": 10.00000000000000000000 / SuperMap.METERS_PER_INCH,
  "Decameter": 10.00000000000000000000 / SuperMap.METERS_PER_INCH,
  "Hectometer": 100.00000000000000000000 / SuperMap.METERS_PER_INCH,
  "GermanMeter": 1.0000135965 / SuperMap.METERS_PER_INCH,
  //EPSG:9031
  "CaGrid": 0.999738 / SuperMap.METERS_PER_INCH,
  "ClarkeChain": 20.1166194976 / SuperMap.METERS_PER_INCH,
  //EPSG:9038
  "GunterChain": 20.11684023368047 / SuperMap.METERS_PER_INCH,
  //EPSG:9033
  "BenoitChain": 20.116782494375872 / SuperMap.METERS_PER_INCH,
  //EPSG:9062
  "SearsChain": 20.11676512155 / SuperMap.METERS_PER_INCH,
  //EPSG:9042
  "ClarkeLink": 0.201166194976 / SuperMap.METERS_PER_INCH,
  //EPSG:9039
  "GunterLink": 0.2011684023368047 / SuperMap.METERS_PER_INCH,
  //EPSG:9034
  "BenoitLink": 0.20116782494375872 / SuperMap.METERS_PER_INCH,
  //EPSG:9063
  "SearsLink": 0.2011676512155 / SuperMap.METERS_PER_INCH,
  //EPSG:9043
  "Rod": 5.02921005842012 / SuperMap.METERS_PER_INCH,
  "IntnlChain": 20.1168 / SuperMap.METERS_PER_INCH,
  //EPSG:9097
  "IntnlLink": 0.201168 / SuperMap.METERS_PER_INCH,
  //EPSG:9098
  "Perch": 5.02921005842012 / SuperMap.METERS_PER_INCH,
  "Pole": 5.02921005842012 / SuperMap.METERS_PER_INCH,
  "Furlong": 201.1684023368046 / SuperMap.METERS_PER_INCH,
  "Rood": 3.778266898 / SuperMap.METERS_PER_INCH,
  "CapeFoot": 0.3047972615 / SuperMap.METERS_PER_INCH,
  "Brealey": 375.00000000000000000000 / SuperMap.METERS_PER_INCH,
  "ModAmFt": 0.304812252984505969011938 / SuperMap.METERS_PER_INCH,
  "Fathom": 1.8288 / SuperMap.METERS_PER_INCH,
  "NautM-UK": 1853.184 / SuperMap.METERS_PER_INCH,
  "50kilometers": 50000.0 / SuperMap.METERS_PER_INCH,
  "150kilometers": 150000.0 / SuperMap.METERS_PER_INCH
}); //unit abbreviations supported by PROJ.4

SuperMap.Util.extend(SuperMap.INCHES_PER_UNIT, {
  "mm": SuperMap.INCHES_PER_UNIT.Meter / 1000.0,
  "cm": SuperMap.INCHES_PER_UNIT.Meter / 100.0,
  "dm": SuperMap.INCHES_PER_UNIT.Meter * 100.0,
  "km": SuperMap.INCHES_PER_UNIT.Meter * 1000.0,
  "kmi": SuperMap.INCHES_PER_UNIT.nmi,
  //International Nautical Mile
  "fath": SuperMap.INCHES_PER_UNIT.Fathom,
  //International Fathom
  "ch": SuperMap.INCHES_PER_UNIT.IntnlChain,
  //International Chain
  "link": SuperMap.INCHES_PER_UNIT.IntnlLink,
  //International Link
  "us-in": SuperMap.INCHES_PER_UNIT.inches,
  //U.S. Surveyor's Inch
  "us-ft": SuperMap.INCHES_PER_UNIT.Foot,
  //U.S. Surveyor's Foot
  "us-yd": SuperMap.INCHES_PER_UNIT.Yard,
  //U.S. Surveyor's Yard
  "us-ch": SuperMap.INCHES_PER_UNIT.GunterChain,
  //U.S. Surveyor's Chain
  "us-mi": SuperMap.INCHES_PER_UNIT.Mile,
  //U.S. Surveyor's Statute Mile
  "ind-yd": SuperMap.INCHES_PER_UNIT.IndianYd37,
  //Indian Yard
  "ind-ft": SuperMap.INCHES_PER_UNIT.IndianFt37,
  //Indian Foot
  "ind-ch": 20.11669506 / SuperMap.METERS_PER_INCH //Indian Chain

});
/**
 * @memberOf SuperMap
 * @member [SuperMap.DOTS_PER_INCH=96]
 * @description åè¾¨çä¸æ¯ä¾å°ºä¹é´è½¬æ¢çå¸¸éã
 * @type {Object}
 */

SuperMap.DOTS_PER_INCH = 96;
/**
 * @param {number} scale - æ¯ä¾å°ºã
 * @returns {number} è¿åæ­£å¸¸ç scale å¼ã
 */

SuperMap.Util.normalizeScale = function (scale) {
  var normScale = scale > 1.0 ? 1.0 / scale : scale;
  return normScale;
};
/**
 * @description æ¯ä¾å°ºè½¬åè¾¨çã
 * @param {number} scale - æ¯ä¾å°ºã
 * @param {string} [units='degrees'] - æ¯ä¾å°ºåä½ã
 * @returns {number} åè¾¨çã
 */


SuperMap.Util.getResolutionFromScale = function (scale, units) {
  var resolution;

  if (scale) {
    if (units == null) {
      units = "degrees";
    }

    var normScale = SuperMap.Util.normalizeScale(scale);
    resolution = 1 / (normScale * SuperMap.INCHES_PER_UNIT[units] * SuperMap.DOTS_PER_INCH);
  }

  return resolution;
};
/**
 * @description åè¾¨çè½¬æ¯ä¾å°ºã
 * @param {number} resolution - åè¾¨çã
 * @param {string} [units='degrees'] - åè¾¨çåä½ã
 * @returns {number} æ¯ä¾å°ºã
 */


SuperMap.Util.getScaleFromResolution = function (resolution, units) {
  if (units == null) {
    units = "degrees";
  }

  var scale = resolution * SuperMap.INCHES_PER_UNIT[units] * SuperMap.DOTS_PER_INCH;
  return scale;
};
/**
 * @memberOf SuperMap
 * @description å¦æ userAgent æè·å°æµè§å¨ä½¿ç¨çæ¯ Gecko å¼æåè¿å trueã
 * @constant
 */


SuperMap.IS_GECKO = function () {
  var ua = navigator.userAgent.toLowerCase();
  return ua.indexOf("webkit") === -1 && ua.indexOf("gecko") !== -1;
}();
/**
 * @memberOf SuperMap
 * @description æµè§å¨åç§°ï¼ä¾èµäº userAgent å±æ§ï¼BROWSER_NAME å¯ä»¥æ¯ç©ºï¼æèä»¥ä¸æµè§å¨ï¼
 *     * "opera" -- Opera
 *     * "msie"  -- Internet Explorer
 *     * "safari" -- Safari
 *     * "firefox" -- Firefox
 *     * "mozilla" -- Mozilla
 * @constant
 */


SuperMap.Browser = function () {
  var name = '',
      version = '',
      device = 'pc',
      uaMatch; //ä»¥ä¸è¿è¡æµè¯

  var ua = navigator.userAgent.toLowerCase();

  if (ua.indexOf("msie") > -1 || ua.indexOf("trident") > -1 && ua.indexOf("rv") > -1) {
    name = 'msie';
    uaMatch = ua.match(/msie ([\d.]+)/) || ua.match(/rv:([\d.]+)/);
  } else if (ua.indexOf("chrome") > -1) {
    name = 'chrome';
    uaMatch = ua.match(/chrome\/([\d.]+)/);
  } else if (ua.indexOf("firefox") > -1) {
    name = 'firefox';
    uaMatch = ua.match(/firefox\/([\d.]+)/);
  } else if (ua.indexOf("opera") > -1) {
    name = 'opera';
    uaMatch = ua.match(/version\/([\d.]+)/);
  } else if (ua.indexOf("safari") > -1) {
    name = 'safari';
    uaMatch = ua.match(/version\/([\d.]+)/);
  }

  version = uaMatch ? uaMatch[1] : '';

  if (ua.indexOf("ipad") > -1 || ua.indexOf("ipod") > -1 || ua.indexOf("iphone") > -1) {
    device = 'apple';
  } else if (ua.indexOf("android") > -1) {
    uaMatch = ua.match(/version\/([\d.]+)/);
    version = uaMatch ? uaMatch[1] : '';
    device = 'android';
  }

  return {
    name: name,
    version: version,
    device: device
  };
}();
/**
 * @description è·åæµè§å¨ç¸å³ä¿¡æ¯ãæ¯æçæµè§å¨åæ¬ï¼Operaï¼Internet Explorerï¼Safariï¼Firefoxã
 * @returns {Object} è·åæµè§å¨åç§°ãçæ¬ãè®¾å¤åç§°ãå¯¹åºçå±æ§åå«ä¸º name, version, deviceã
 */


SuperMap.Util.getBrowser = function () {
  return SuperMap.Browser;
};
/**
 * @description æµè§å¨æ¯å¦æ¯æ Canvasã
 * @returns {boolean} è·åå½åæµè§å¨æ¯å¦æ¯æ HTML5 Canvasã
 */


SuperMap.Util.isSupportCanvas = function () {
  var checkRes = true,
      broz = SuperMap.Util.getBrowser();

  if (document.createElement("canvas").getContext) {
    if (broz.name === 'firefox' && parseFloat(broz.version) < 5) {
      checkRes = false;
    }

    if (broz.name === 'safari' && parseFloat(broz.version) < 4) {
      checkRes = false;
    }

    if (broz.name === 'opera' && parseFloat(broz.version) < 10) {
      checkRes = false;
    }

    if (broz.name === 'msie' && parseFloat(broz.version) < 9) {
      checkRes = false;
    }
  } else {
    checkRes = false;
  }

  return checkRes;
}();
/**
 * @description å¤æ­ï¼æµè§å¨æ¯å¦æ¯æ Canvasã
 * @returns {boolean} è·åå½åæµè§å¨æ¯å¦æ¯æ HTML5 Canvas ã
 */


SuperMap.Util.supportCanvas = function () {
  return SuperMap.Util.isSupportCanvas;
}; //å°æå¡ç«¯çå°å¾åä½è½¬æSuperMapçå°å¾åä½


SuperMap.INCHES_PER_UNIT.degree = SuperMap.INCHES_PER_UNIT.dd;
SuperMap.INCHES_PER_UNIT.meter = SuperMap.INCHES_PER_UNIT.m;
SuperMap.INCHES_PER_UNIT.foot = SuperMap.INCHES_PER_UNIT.ft;
SuperMap.INCHES_PER_UNIT.inch = SuperMap.INCHES_PER_UNIT.inches;
SuperMap.INCHES_PER_UNIT.mile = SuperMap.INCHES_PER_UNIT.mi;
SuperMap.INCHES_PER_UNIT.kilometer = SuperMap.INCHES_PER_UNIT.km;
SuperMap.INCHES_PER_UNIT.yard = SuperMap.INCHES_PER_UNIT.yd;
/**
 * @description å¤æ­ä¸ä¸ª URL è¯·æ±æ¯å¦å¨å½ååä¸­ã
 * @param {string} url - URL è¯·æ±å­ç¬¦ä¸²ã
 * @returns {boolean} URL è¯·æ±æ¯å¦å¨å½ååä¸­ã
 */

SuperMap.Util.isInTheSameDomain = function (url) {
  if (!url) {
    return true;
  }

  var index = url.indexOf("//");
  var documentUrl = document.location.toString();
  var documentIndex = documentUrl.indexOf("//");

  if (index === -1) {
    return true;
  } else {
    var protocol;
    var substring = protocol = url.substring(0, index);
    var documentSubString = documentUrl.substring(documentIndex + 2);
    documentIndex = documentSubString.indexOf("/");
    var documentPortIndex = documentSubString.indexOf(":");
    var documentDomainWithPort = documentSubString.substring(0, documentIndex); //var documentPort;

    var documentprotocol = document.location.protocol;

    if (documentPortIndex !== -1) {// documentPort = +documentSubString.substring(documentPortIndex, documentIndex);
    } else {
      documentDomainWithPort += ':' + (documentprotocol.toLowerCase() === 'http:' ? 80 : 443);
    }

    if (documentprotocol.toLowerCase() !== substring.toLowerCase()) {
      return false;
    }

    substring = url.substring(index + 2);
    var portIndex = substring.indexOf(":");
    index = substring.indexOf("/");
    var domainWithPort = substring.substring(0, index);
    var domain;

    if (portIndex !== -1) {
      domain = substring.substring(0, portIndex);
    } else {
      domain = substring.substring(0, index);
      domainWithPort += ':' + (protocol.toLowerCase() === 'http:' ? 80 : 443);
    }

    var documentDomain = document.domain;

    if (domain === documentDomain && domainWithPort === documentDomainWithPort) {
      return true;
    }
  }

  return false;
};
/**
 * @description è®¡ç® iServer æå¡ç REST å¾å±çæ¾ç¤ºåè¾¨çï¼éè¦ä» iServer ç REST å¾å±è¡¨è¿°ä¸­è·å viewBoundsãviewerãscaleãcoordUnitãdatumAxis äºä¸ªåæ°ï¼æ¥è¿è¡è®¡ç®ã
 * @param {SuperMap.Bounds} viewBounds - å°å¾çåç§å¯è§èå´ï¼å³å°å¾åå§åæ¶é»è®¤çå°å¾æ¾ç¤ºèå´ã
 * @param {SuperMap.Size} viewer - å°å¾åå§åæ¶é»è®¤çå°å¾å¾ççå°ºå¯¸ã
 * @param {number} scale - å°å¾åå§åæ¶é»è®¤çæ¾ç¤ºæ¯ä¾å°ºã
 * @param {string} [coordUnit='degrees'] - æå½±åæ ç³»ç»çå°å¾åä½ã
 * @param {number} [datumAxis=6378137] - å°çåæ ç³»ç»æ¤­çä½é¿åè½´ãç¨æ·èªå®ä¹å°å¾ç Options æ¶ï¼è¥æªæå®è¯¥åæ°çå¼ï¼åç³»ç»é»è®¤ä¸º WGS84 åèç³»çæ¤­çä½é¿åè½´ 6378137ã
 * @returns {number} è¿åå¾å±æ¾ç¤ºåè¾¨çã
 */


SuperMap.Util.calculateDpi = function (viewBounds, viewer, scale, coordUnit, datumAxis) {
  //10000 æ¯ 0.1æ¯«ç±³ä¸ç±³çè½¬æ¢ãDPIçè®¡ç®å¬å¼ï¼Viewer / DPI *  0.0254 * 10000 = ViewBounds * scale ï¼å¬å¼ä¸­ç10000æ¯ä¸ºäºæé«è®¡ç®ç»æçç²¾åº¦ï¼ä»¥ä¸åºç°çratioçä¸ºå¦æ­¤ã
  if (!viewBounds || !viewer || !scale) {
    return;
  }

  var ratio = 10000,
      rvbWidth = viewBounds.getWidth(),
      rvbHeight = viewBounds.getHeight(),
      rvWidth = viewer.w,
      rvHeight = viewer.h; //ç¨æ·èªå®ä¹å°å¾çOptionsæ¶ï¼è¥æªæå®è¯¥åæ°çå¼ï¼åç³»ç»é»è®¤ä¸º6378137ç±³ï¼å³WGS84åèç³»çæ¤­çä½é¿åè½´ã

  datumAxis = datumAxis || 6378137;
  coordUnit = coordUnit || "degrees";
  var dpi;

  if (coordUnit.toLowerCase() === "degree" || coordUnit.toLowerCase() === "degrees" || coordUnit.toLowerCase() === "dd") {
    var num1 = rvbWidth / rvWidth,
        num2 = rvbHeight / rvHeight,
        resolution = num1 > num2 ? num1 : num2;
    dpi = 0.0254 * ratio / resolution / scale / (Math.PI * 2 * datumAxis / 360) / ratio;
  } else {
    var _resolution = rvbWidth / rvWidth;

    dpi = 0.0254 * ratio / _resolution / scale / ratio;
  }

  return dpi;
};
/**
 * @description å°å¯¹è±¡è½¬æ¢æ JSON å­ç¬¦ä¸²ã
 * @param {Object} obj - è¦è½¬æ¢æ JSON ç Object å¯¹è±¡ã
 * @returns {string} è¿åè½¬æ¢åç JSON å¯¹è±¡ã
 */


SuperMap.Util.toJSON = function (obj) {
  var objInn = obj;

  if (objInn == null) {
    return null;
  }

  switch (objInn.constructor) {
    case String:
      //s = "'" + str.replace(/(["\\])/g, "\\$1") + "'";   stringå«æåå¼å·åºé
      objInn = '"' + objInn.replace(/(["\\])/g, '\\$1') + '"';
      objInn = objInn.replace(/\n/g, "\\n");
      objInn = objInn.replace(/\r/g, "\\r");
      objInn = objInn.replace("<", "&lt;");
      objInn = objInn.replace(">", "&gt;");
      objInn = objInn.replace(/%/g, "%25");
      objInn = objInn.replace(/&/g, "%26");
      return objInn;

    case Array:
      var arr = [];

      for (var i = 0, len = objInn.length; i < len; i++) {
        arr.push(SuperMap.Util.toJSON(objInn[i]));
      }

      return "[" + arr.join(",") + "]";

    case Number:
      return isFinite(objInn) ? String(objInn) : null;

    case Boolean:
      return String(objInn);

    case Date:
      var dateStr = "{" + "'__type':\"System.DateTime\"," + "'Year':" + objInn.getFullYear() + "," + "'Month':" + (objInn.getMonth() + 1) + "," + "'Day':" + objInn.getDate() + "," + "'Hour':" + objInn.getHours() + "," + "'Minute':" + objInn.getMinutes() + "," + "'Second':" + objInn.getSeconds() + "," + "'Millisecond':" + objInn.getMilliseconds() + "," + "'TimezoneOffset':" + objInn.getTimezoneOffset() + "}";
      return dateStr;

    default:
      if (objInn["toJSON"] != null && typeof objInn["toJSON"] === "function") {
        return objInn.toJSON();
      }

      if (_typeof(objInn) === "object") {
        if (objInn.length) {
          var _arr2 = [];

          for (var _i = 0, _len = objInn.length; _i < _len; _i++) {
            _arr2.push(SuperMap.Util.toJSON(objInn[_i]));
          }

          return "[" + _arr2.join(",") + "]";
        }

        var _arr = [];

        for (var attr in objInn) {
          //ä¸ºè§£å³SuperMap.Geometryç±»åå¤´jsonæ¶å æ æº¢åºçé®é¢ï¼attr == "parent"æ¶ä¸è¿è¡jsonè½¬æ¢
          if (typeof objInn[attr] !== "function" && attr !== "CLASS_NAME" && attr !== "parent") {
            _arr.push("'" + attr + "':" + SuperMap.Util.toJSON(objInn[attr]));
          }
        }

        if (_arr.length > 0) {
          return "{" + _arr.join(",") + "}";
        } else {
          return "{}";
        }
      }

      return objInn.toString();
  }
};
/**
 * @description æ ¹æ®æ¯ä¾å°ºå dpi è®¡ç®å±å¹åè¾¨çã
 * @param {number} scale - æ¯ä¾å°ºã
 * @param {number} dpi - å¾ååè¾¨çï¼è¡¨ç¤ºæ¯è±å¯¸åçåç´ ä¸ªæ°ã
 * @param {string} [coordUnit] - æå½±åæ ç³»ç»çå°å¾åä½ã
 * @param {number} [datumAxis=6378137] - å°çåæ ç³»ç»æ¤­çä½é¿åè½´ãç¨æ·èªå®ä¹å°å¾ç Options æ¶ï¼è¥æªæå®è¯¥åæ°çå¼ï¼å DPI é»è®¤æç§ WGS84 åèç³»çæ¤­çä½é¿åè½´ 6378137 æ¥è®¡ç®ã
 * @returns {number} è¿åå½åæ¯ä¾å°ºä¸çå±å¹åè¾¨çã
 */


SuperMap.Util.getResolutionFromScaleDpi = function (scale, dpi, coordUnit, datumAxis) {
  var resolution = null,
      ratio = 10000; //ç¨æ·èªå®ä¹å°å¾çOptionsæ¶ï¼è¥æªæå®è¯¥åæ°çå¼ï¼åç³»ç»é»è®¤ä¸º6378137ç±³ï¼å³WGS84åèç³»çæ¤­çä½é¿åè½´ã

  datumAxis = datumAxis || 6378137;
  coordUnit = coordUnit || "";

  if (scale > 0 && dpi > 0) {
    scale = SuperMap.Util.normalizeScale(scale);

    if (coordUnit.toLowerCase() === "degree" || coordUnit.toLowerCase() === "degrees" || coordUnit.toLowerCase() === "dd") {
      //scale = SuperMap.Util.normalizeScale(scale);
      resolution = 0.0254 * ratio / dpi / scale / (Math.PI * 2 * datumAxis / 360) / ratio;
      return resolution;
    } else {
      resolution = 0.0254 * ratio / dpi / scale / ratio;
      return resolution;
    }
  }

  return -1;
};
/**
 * @description æ ¹æ® resolutionãdpiãcoordUnit å datumAxis è®¡ç®æ¯ä¾å°ºã
 * @param {number} resolution - ç¨äºè®¡ç®æ¯ä¾å°ºçå°å¾åè¾¨çã
 * @param {number} dpi - å¾ååè¾¨çï¼è¡¨ç¤ºæ¯è±å¯¸åçåç´ ä¸ªæ°ã
 * @param {string} [coordUnit] - æå½±åæ ç³»ç»çå°å¾åä½ã
 * @param {number} [datumAxis=6378137] - å°çåæ ç³»ç»æ¤­çä½é¿åè½´ãç¨æ·èªå®ä¹å°å¾ç Options æ¶ï¼è¥æªæå®è¯¥åæ°çå¼ï¼å DPI é»è®¤æç§ WGS84 åèç³»çæ¤­çä½é¿åè½´ 6378137 æ¥è®¡ç®ã
 * @returns {number} è¿åå½åå±å¹åè¾¨çä¸çæ¯ä¾å°ºã
 */


SuperMap.Util.getScaleFromResolutionDpi = function (resolution, dpi, coordUnit, datumAxis) {
  var scale = null,
      ratio = 10000; //ç¨æ·èªå®ä¹å°å¾çOptionsæ¶ï¼è¥æªæå®è¯¥åæ°çå¼ï¼åç³»ç»é»è®¤ä¸º6378137ç±³ï¼å³WGS84åèç³»çæ¤­çä½é¿åè½´ã

  datumAxis = datumAxis || 6378137;
  coordUnit = coordUnit || "";

  if (resolution > 0 && dpi > 0) {
    if (coordUnit.toLowerCase() === "degree" || coordUnit.toLowerCase() === "degrees" || coordUnit.toLowerCase() === "dd") {
      scale = 0.0254 * ratio / dpi / resolution / (Math.PI * 2 * datumAxis / 360) / ratio;
      return scale;
    } else {
      scale = 0.0254 * ratio / dpi / resolution / ratio;
      return scale;
    }
  }

  return -1;
};
/**
 * @description è½¬æ¢æ¥è¯¢ç»æã
 * @param {Object} result - æ¥è¯¢ç»æã
 * @returns {Object} è½¬æ¢åçæ¥è¯¢ç»æã
 */


SuperMap.Util.transformResult = function (result) {
  if (result.responseText && typeof result.responseText === "string") {
    result = JSON.parse(result.responseText);
  }

  return result;
};
/**
 * @description å±æ§æ·è´ï¼ä¸æ·è´æ¹æ³ç±»å(CLASS_NAME)ç­ã
 * @param {Object} [destination] - æ·è´ç®æ ã
 * @param {Object} source - æºå¯¹è±¡ã
 *
 */


SuperMap.Util.copyAttributes = function (destination, source) {
  destination = destination || {};

  if (source) {
    for (var property in source) {
      var value = source[property];

      if (value !== undefined && property !== "CLASS_NAME" && typeof value !== "function") {
        destination[property] = value;
      }
    }
  }

  return destination;
};
/**
 * @description å°æºå¯¹è±¡ä¸çå±æ§æ·è´å°ç®æ å¯¹è±¡ä¸ãï¼ä¸æ·è´ CLASS_NAME åæ¹æ³ï¼
 * @param {Object} [destination] - ç®æ å¯¹è±¡ã
 * @param {Object} source - æºå¯¹è±¡ã
 * @param {Array.<string>} clip - æºå¯¹è±¡ä¸­ç¦æ­¢æ·è´å°ç®æ å¯¹è±¡çå±æ§ï¼ç®çæ¯é²æ­¢ç®æ å¯¹è±¡ä¸ä¸å¯ä¿®æ¹çå±æ§è¢«ç¯¡æ¹ã
 *
 */


SuperMap.Util.copyAttributesWithClip = function (destination, source, clip) {
  destination = destination || {};

  if (source) {
    for (var property in source) {
      //å»æç¦æ­¢æ·è´çå±æ§
      var isInClip = false;

      if (clip && clip.length) {
        for (var i = 0, len = clip.length; i < len; i++) {
          if (property === clip[i]) {
            isInClip = true;
            break;
          }
        }
      }

      if (isInClip === true) {
        continue;
      }

      var value = source[property];

      if (value !== undefined && property !== "CLASS_NAME" && typeof value !== "function") {
        destination[property] = value;
      }
    }
  }

  return destination;
};
/**
 * @description åéä¸ä¸ª Object å¯¹è±¡
 * @param {Object} obj - éè¦åéçå¯¹è±¡ã
 * @returns {Object} è¿åå¯¹è±¡çæ·è´å¯¹è±¡ï¼æ³¨ææ¯æ°çå¯¹è±¡ï¼ä¸æ¯æåã
 */


SuperMap.Util.cloneObject = function (obj) {
  // Handle the 3 simple types, and null or undefined
  if (null === obj || "object" !== _typeof(obj)) {
    return obj;
  } // Handle Date


  if (obj instanceof Date) {
    var copy = new Date();
    copy.setTime(obj.getTime());
    return copy;
  } // Handle Array


  if (obj instanceof Array) {
    var _copy = obj.slice(0);

    return _copy;
  } // Handle Object


  if (obj instanceof Object) {
    var _copy2 = {};

    for (var attr in obj) {
      if (obj.hasOwnProperty(attr)) {
        _copy2[attr] = SuperMap.Util.cloneObject(obj[attr]);
      }
    }

    return _copy2;
  }

  throw new Error("Unable to copy obj! Its type isn't supported.");
};
/**
 * @description å¤æ­ä¸¤æ¡çº¿æ®µæ¯ä¸æ¯æäº¤ç¹ã
 * @param {SuperMap.Geometry.Point} a1 - ç¬¬ä¸æ¡çº¿æ®µçèµ·å§èç¹ã
 * @param {SuperMap.Geometry.Point} a2 - ç¬¬ä¸æ¡çº¿æ®µçç»æèç¹ã
 * @param {SuperMap.Geometry.Point} b1 - ç¬¬äºæ¡çº¿æ®µçèµ·å§èç¹ã
 * @param {SuperMap.Geometry.Point} b2 - ç¬¬äºæ¡çº¿æ®µçç»æèç¹ã
 * @returns {Object} å¦æç¸äº¤è¿åäº¤ç¹ï¼å¦æä¸ç¸äº¤è¿åä¸¤æ¡çº¿æ®µçä½ç½®å³ç³»ã
 */


SuperMap.Util.lineIntersection = function (a1, a2, b1, b2) {
  var intersectValue = null;
  var k1;
  var k2;
  var b = (b2.x - b1.x) * (a1.y - b1.y) - (b2.y - b1.y) * (a1.x - b1.x);
  var a = (a2.x - a1.x) * (a1.y - b1.y) - (a2.y - a1.y) * (a1.x - b1.x);
  var ab = (b2.y - b1.y) * (a2.x - a1.x) - (b2.x - b1.x) * (a2.y - a1.y); //ab==0ä»£è¡¨ä¸¤æ¡çº¿æ­çæçä¸æ ·

  if (ab != 0) {
    k1 = b / ab;
    k2 = a / ab;

    if (k1 >= 0 && k2 <= 1 && k1 <= 1 && k2 >= 0) {
      intersectValue = new SuperMap.Geometry.Point(a1.x + k1 * (a2.x - a1.x), a1.y + k1 * (a2.y - a1.y));
    } else {
      intersectValue = "No Intersection";
    }
  } else {
    if (b == 0 && a == 0) {
      var maxy = Math.max(a1.y, a2.y);
      var miny = Math.min(a1.y, a2.y);
      var maxx = Math.max(a1.x, a2.x);
      var minx = Math.min(a1.x, a2.x);

      if ((b1.y >= miny && b1.y <= maxy || b2.y >= miny && b2.y <= maxy) && b1.x >= minx && b1.x <= maxx || b2.x >= minx && b2.x <= maxx) {
        intersectValue = "Coincident"; //éå
      } else {
        intersectValue = "Parallel"; //å¹³è¡
      }
    } else {
      intersectValue = "Parallel"; //å¹³è¡
    }
  }

  return intersectValue;
};
/**
 * @description è·åææ¬å¤æ¥ç©å½¢å®½åº¦ä¸é«åº¦ã
 * @param {SuperMap.ThemeStyle} style - ææ¬æ ·å¼ã
 * @param {string} text - ææ¬åå®¹ã
 * @param {Object} element - DOM åç´ ã
 * @returns {Object} è¿åè£åªåçå®½åº¦ï¼é«åº¦ä¿¡æ¯ã
 */


SuperMap.Util.getTextBounds = function (style, text, element) {
  document.body.appendChild(element);
  element.style.width = 'auto';
  element.style.height = 'auto';

  if (style.fontSize) {
    element.style.fontSize = style.fontSize;
  }

  if (style.fontFamily) {
    element.style.fontFamily = style.fontFamily;
  }

  if (style.fontWeight) {
    element.style.fontWeight = style.fontWeight;
  }

  element.style.position = 'relative';
  element.style.visibility = 'hidden'; //fix å¨æäºæåµä¸ï¼elementåçææ¬åæç«èµ·æåï¼å¯¼è´å®½åº¦è®¡ç®ä¸æ­£ç¡®çbug

  element.style.display = 'inline-block';
  element.innerHTML = text;
  var textWidth = element.clientWidth;
  var textHeight = element.clientHeight;
  document.body.removeChild(element);
  return {
    textWidth: textWidth,
    textHeight: textHeight
  };
};
// CONCATENATED MODULE: ./src/common/commontypes/LonLat.js
function LonLat_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function LonLat_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function LonLat_createClass(Constructor, protoProps, staticProps) { if (protoProps) LonLat_defineProperties(Constructor.prototype, protoProps); if (staticProps) LonLat_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @class SuperMap.LonLat
 * @category BaseTypes Geometry
 * @classdesc  è¿ä¸ªç±»ç¨æ¥è¡¨ç¤ºç»åº¦åçº¬åº¦å¯¹ã
 * @param {number} [lon=0.0] - å°å¾åä½ä¸ç X è½´åæ ï¼å¦æå°å¾æ¯å°çæå½±ï¼åæ­¤å¼æ¯ç»åº¦ï¼å¦åï¼æ­¤å¼æ¯å°å¾å°çä½ç½®ç x åæ ã
 * @param {number} [lat=0.0] - å°å¾åä½ä¸ç Y è½´åæ ï¼å¦æå°å¾æ¯å°çæå½±ï¼åæ­¤å¼æ¯çº¬åº¦ï¼å¦åï¼æ­¤å¼æ¯å°å¾å°çä½ç½®ç y åæ ã
 * @param {Array.<float>} [location] - å¦æè¦åæ¶è®¾ç½®ï¼åä½¿ç¨ä¼ å¥æ¨ªçºµåæ ç»æçæ°ç»ã
 * @example
 * var lonLat = new SuperMap.LonLat(30,45);
 */

var LonLat = /*#__PURE__*/function () {
  function LonLat(lon, lat) {
    LonLat_classCallCheck(this, LonLat);

    if (Util.isArray(lon)) {
      lat = lon[1];
      lon = lon[0];
    }
    /**
     * @member {float} [SuperMap.LonLat.prototype.lon=0.0]
     * @description å°å¾çåä½ç X è½´ï¼æ¨ªè½´ï¼åæ ã
     */


    this.lon = lon ? Util.toFloat(lon) : 0.0;
    /**
     * @member {float} [SuperMap.LonLat.prototype.lat=0.0]
     * @description å°å¾çåä½ç Y è½´ï¼çºµè½´ï¼åæ ã
     */

    this.lat = lat ? Util.toFloat(lat) : 0.0;
    this.CLASS_NAME = "SuperMap.LonLat";
  }
  /**
   * @function SuperMap.LonLat.prototype.toString
   * @description è¿åæ­¤å¯¹è±¡çå­ç¬¦ä¸²å½¢å¼
   * @example
   * var lonLat = new SuperMap.LonLat(100,50);
   * var str = lonLat.toString();
   * @returns {string} ä¾å¦: "lon=100,lat=50"
   */


  LonLat_createClass(LonLat, [{
    key: "toString",
    value: function toString() {
      return "lon=" + this.lon + ",lat=" + this.lat;
    }
    /**
     * @function SuperMap.LonLat.prototype.toShortString
     * @description å°ç»åº¦çº¬åº¦è½¬æ¢æç®åå­ç¬¦ä¸²ã
     * @example
     * var lonLat = new SuperMap.LonLat(100,50);
     * var str = lonLat.toShortString();
     * @returns {string} è¿åå¤çåçç»çº¬åº¦å­ç¬¦ä¸²ãä¾å¦ï¼"100,50"
     */

  }, {
    key: "toShortString",
    value: function toShortString() {
      return this.lon + "," + this.lat;
    }
    /**
     * @function SuperMap.LonLat.prototype.clone
     * @description å¤å¶åæ å¯¹è±¡ï¼å¹¶è¿åå¤å¶åçæ°å¯¹è±¡ã
     * @example
     * var lonLat1 = new SuperMap.LonLat(100,50);
     * var lonLat2 = lonLat1.clone();
     * @returns {SuperMap.LonLat}  è¿åç¸ååæ å¼çæ°çåæ å¯¹è±¡ã
     */

  }, {
    key: "clone",
    value: function clone() {
      return new LonLat(this.lon, this.lat);
    }
    /**
     * @function SuperMap.LonLat.prototype.add
     * @description å¨å·²æåæ å¯¹è±¡çç»çº¬åº¦åºç¡ä¸å ä¸æ°çåæ ç»çº¬åº¦ï¼å¹¶è¿åæ°çåæ å¯¹è±¡ã
     * @example
     * var lonLat1 = new SuperMap.LonLat(100,50);
     * //lonLat2 æ¯æ°çå¯¹è±¡
     * var lonLat2 = lonLat1.add(100,50);
     * @param {float} lon - ä¼ å¥çç»åº¦åæ°ã
     * @param {float} lat - ä¼ å¥ççº¬åº¦åæ°ã
     * @returns {SuperMap.LonLat} è¿åä¸ä¸ªæ°ç LonLat å¯¹è±¡ï¼æ­¤å¯¹è±¡çç»çº¬åº¦æ¯ç±ä¼ å¥çç»çº¬åº¦ä¸å½åçç»çº¬åº¦ç¸å æå¾ã
     */

  }, {
    key: "add",
    value: function add(lon, lat) {
      if (lon == null || lat == null) {
        throw new TypeError('LonLat.add cannot receive null values');
      }

      return new LonLat(this.lon + Util.toFloat(lon), this.lat + Util.toFloat(lat));
    }
    /**
     * @function SuperMap.LonLat.prototype.equals
     * @description å¤æ­ä¸¤ä¸ªåæ å¯¹è±¡æ¯å¦ç¸ç­ã
     * @example
     * var lonLat1 = new SuperMap.LonLat(100,50);
     * var lonLat2 = new SuperMap.LonLat(100,50);
     * var isEquals = lonLat1.equals(lonLat2);
     * @param {SuperMap.LonLat} ll - éè¦è¿è¡æ¯è¾çåæ å¯¹è±¡ã
     * @returns {boolean} å¦æLonLatå¯¹è±¡çç»çº¬åº¦åä¼ å¥çç»çº¬åº¦ä¸è´åè¿åtrue,ä¸ä¸
     *      è´æä¼ å¥çllåæ°ä¸ºNULLåè¿åfalseã
     */

  }, {
    key: "equals",
    value: function equals(ll) {
      var equals = false;

      if (ll != null) {
        equals = this.lon === ll.lon && this.lat === ll.lat || isNaN(this.lon) && isNaN(this.lat) && isNaN(ll.lon) && isNaN(ll.lat);
      }

      return equals;
    }
    /**
     * @function SuperMap.LonLat.prototype.wrapDateLine
     * @description éè¿ä¼ å¥çèå´å¯¹è±¡å¯¹åæ å¯¹è±¡è½¬æ¢å°è¯¥èå´åã
     * å¦æç»åº¦å°äºç»å®èå´æå°ç²¾åº¦ï¼åå¨åç»åº¦åºç¡ä¸å ä¸èå´å®½åº¦ï¼ç´å°ç²¾åº¦å¨èå´åä¸ºæ­¢ï¼å¦æç»åº¦å¤§äºç»å®èå´åå¨åç»åº¦åºç¡ä¸åå»èå´å®½åº¦ã
     * å³æå°ä¸å¨ç»åº¦èå´åçåæ è½¬æ¢å°èå´ä»¥åï¼åªä¼è½¬æ¢ lonï¼ä¸ä¼è½¬æ¢ latï¼ä¸»è¦ç¨äºè½¬ç§»å°æ¥ççº¿ä»¥åï¼ã
     * @example
     * var lonLat1 = new SuperMap.LonLat(420,50);
     * var lonLat2 = lonLat1.wrapDateLine(
     *      new SuperMap.Bounds(-180,-90,180,90)
     *  );
     * @param {SuperMap.Bounds} maxExtent - æå¤§è¾¹ççèå´ã
     * @returns {SuperMap.LonLat} å°åæ è½¬æ¢å°èå´å¯¹è±¡ä»¥åï¼å¹¶è¿åæ°çåæ ã
     */

  }, {
    key: "wrapDateLine",
    value: function wrapDateLine(maxExtent) {
      var newLonLat = this.clone();

      if (maxExtent) {
        //shift right?
        while (newLonLat.lon < maxExtent.left) {
          newLonLat.lon += maxExtent.getWidth();
        } //shift left?


        while (newLonLat.lon > maxExtent.right) {
          newLonLat.lon -= maxExtent.getWidth();
        }
      }

      return newLonLat;
    }
    /**
     *
     * @function SuperMap.LonLat.prototype.destroy
     * @description éæ¯æ­¤å¯¹è±¡ã
     * éæ¯åæ­¤å¯¹è±¡çææå±æ§ä¸º nullï¼èä¸æ¯åå§å¼ã
     * @example
     * var lonLat = new SuperMap.LonLat(100,50);
     * lonLat.destroy();
     */

  }, {
    key: "destroy",
    value: function destroy() {
      this.lon = null;
      this.lat = null;
    }
    /**
     * @function SuperMap.LonLat.fromString
     * @description éè¿å­ç¬¦ä¸²çæä¸ä¸ª {@link SuperMap.LonLat} å¯¹è±¡ã
     * @example
     * var str = "100,50";
     * var lonLat = SuperMap.LonLat.fromString(str);
     * @param {string} str - å­ç¬¦ä¸²çæ ¼å¼ï¼Lon+","+Latãå¦ï¼"100,50"ã
     * @returns {SuperMap.LonLat} è¿åä¸ä¸ª {@link SuperMap.LonLat} å¯¹è±¡ã
     */

  }], [{
    key: "fromString",
    value: function fromString(str) {
      var pair = str.split(",");
      return new LonLat(pair[0], pair[1]);
    }
    /**
     * @function SuperMap.LonLat.fromArray
     * @description éè¿æ°ç»çæä¸ä¸ª <SuperMap.LonLat> å¯¹è±¡ã
     * @param {Array.<float>} arr - æ°ç»çæ ¼å¼ï¼é¿åº¦åªè½ä¸º2,ï¼[Lon,Lat]ãå¦ï¼[5,-42]ã
     * @returns {SuperMap.LonLat} è¿åä¸ä¸ª <SuperMap.LonLat> å¯¹è±¡ã
     */

  }, {
    key: "fromArray",
    value: function fromArray(arr) {
      var gotArr = Util.isArray(arr),
          lon = gotArr && arr[0],
          lat = gotArr && arr[1];
      return new LonLat(lon, lat);
    }
  }]);

  return LonLat;
}();
// CONCATENATED MODULE: ./src/common/commontypes/Bounds.js
function Bounds_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Bounds_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Bounds_createClass(Constructor, protoProps, staticProps) { if (protoProps) Bounds_defineProperties(Constructor.prototype, protoProps); if (staticProps) Bounds_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.Bounds
 * @category BaseTypes Geometry
 * @classdesc è¡¨ç¤ºè¾¹çç±»å®ä¾ãä½¿ç¨ bounds ä¹åéè¦è®¾ç½® leftï¼bottomï¼rightï¼top åä¸ªå±æ§ï¼è¿äºå±æ§çåå§å¼ä¸º nullã
 * @param {number} [left] - å·¦è¾¹çï¼æ³¨æèèå®½åº¦ï¼çè®ºä¸å°äº right å¼ã
 * @param {number} [bottom] - ä¸è¾¹çãèèé«åº¦ï¼çè®ºä¸å°äº top å¼ã
 * @param {number} [right] - å³è¾¹çã
 * @param {number} [top] - ä¸è¾¹çã
 * @param {Array.<number>} [array] - [left, bottom, right, top]ï¼å¦æåæ¶ä¼ å¤ä¸ªåæ°ï¼åä½¿ç¨å·¦ä¸å³ä¸ç»æçæ°ç»ã
 * @example
 * var bounds = new SuperMap.Bounds();
 * bounds.extend(new SuperMap.LonLat(4,5));
 * bounds.extend(new SuperMap.LonLat(5,6));
 * bounds.toBBOX(); // returns 4,5,5,6
 */

var Bounds = /*#__PURE__*/function () {
  function Bounds(left, bottom, right, top) {
    Bounds_classCallCheck(this, Bounds);

    if (Util.isArray(left)) {
      top = left[3];
      right = left[2];
      bottom = left[1];
      left = left[0];
    }
    /**
     * @member {number} SuperMap.Bounds.prototype.left
     * @description æå°çæ°´å¹³åæ ç³»ã
     */


    this.left = left != null ? Util.toFloat(left) : this.left;
    /**
     * @member {number} SuperMap.Bounds.prototype.bottom
     * @description æå°çåç´åæ ç³»ã
     */

    this.bottom = bottom != null ? Util.toFloat(bottom) : this.bottom;
    /**
     * @member {number} SuperMap.Bounds.prototype.right
     * @description æå¤§çæ°´å¹³åæ ç³»ã
     */

    this.right = right != null ? Util.toFloat(right) : this.right;
    /**
     * @member {number} SuperMap.Bounds.prototype.top
     * @description æå¤§çåç´åæ ç³»ã
     */

    this.top = top != null ? Util.toFloat(top) : this.top;
    /**
     * @member {SuperMap.LonLat} SuperMap.Bounds.prototype.centerLonLat
     * @description bounds çå°å¾ç©ºé´çä¸­å¿ç¹ãç¨ getCenterLonLat() è·å¾ã
     */

    this.centerLonLat = null;
    this.CLASS_NAME = "SuperMap.Bounds";
  }
  /**
   * @function SuperMap.Bounds.prototype.clone
   * @description å¤å¶å½å bounds å¯¹è±¡ã
   * @example
   * var bounds1 = new SuperMap.Bounds(-180,-90,180,90);
   * var bounds2 = bounds1.clone();
   * @returns {SuperMap.Bounds} è¿åä¸ä¸ªåéç boundsã
   */


  Bounds_createClass(Bounds, [{
    key: "clone",
    value: function clone() {
      return new Bounds(this.left, this.bottom, this.right, this.top);
    }
    /**
     * @function SuperMap.Bounds.prototype.equals
     * @description å¤æ­ä¸¤ä¸ª bounds å¯¹è±¡æ¯å¦ç¸ç­ã
     * @example
     * var bounds1 = new SuperMap.Bounds(-180,-90,180,90);
     * var bounds2 = new SuperMap.Bounds(-180,-90,180,90);
     * var isEquals = bounds1.equals(bounds2);
     * @param {SuperMap.Bounds} bounds - éè¦è¿è¡è®¡è¾ç boundsã
     * @returns {boolean} å¦æ bounds å¯¹è±¡çè¾¹åä¼ å¥ç bounds ä¸è´åè¿å trueï¼ä¸ä¸è´æä¼ å¥ç bounds åæ°ä¸º NULL åè¿å falseã
     */

  }, {
    key: "equals",
    value: function equals(bounds) {
      var equals = false;

      if (bounds != null) {
        equals = this.left === bounds.left && this.right === bounds.right && this.top === bounds.top && this.bottom === bounds.bottom;
      }

      return equals;
    }
    /**
     * @function SuperMap.Bounds.prototype.toString
     * @description è¿åæ­¤å¯¹è±¡çå­ç¬¦ä¸²å½¢å¼ã
     * @example
     * var bounds = new SuperMap.Bounds(-180,-90,180,90);
     * var str = bounds.toString();
     * @returns {string} è¾¹çå¯¹è±¡çå­ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ï¼left,bottom,right,topï¼ï¼ä¾å¦: "-180,-90,180,90"ã
     */

  }, {
    key: "toString",
    value: function toString() {
      return [this.left, this.bottom, this.right, this.top].join(",");
    }
    /**
     * @function SuperMap.Bounds.prototype.toArray
     * @description è¾¹çå¯¹è±¡çæ°ç»è¡¨ç¤ºå½¢å¼ã
     * @example
     * var bounds = new SuperMap.Bounds(-180,-90,100,80);
     * //array1 = [-180,-90,100,80];
     * var array1 = bounds.toArray();
     * //array1 = [-90,-180,80,100];
     * var array2 = bounds.toArray(true);
     * @param {boolean} [reverseAxisOrder=false] - æ¯å¦åè½¬è½´é¡ºåºã
     * å¦æè®¾ä¸º trueï¼ååè½¬é¡ºåºï¼bottom,left,top,rightï¼ï¼å¦åææ­£å¸¸è½´é¡ºåºï¼left,bottom,right,topï¼ã
     * @returns {Array.<number>} left, bottom, right, top æ°ç»ã
     */

  }, {
    key: "toArray",
    value: function toArray(reverseAxisOrder) {
      if (reverseAxisOrder === true) {
        return [this.bottom, this.left, this.top, this.right];
      } else {
        return [this.left, this.bottom, this.right, this.top];
      }
    }
    /**
     * @function SuperMap.Bounds.prototype.toBBOX
     * @description åå°æ°ç¹å decimal ä½æ°å­è¿è¡åèäºå¥åè½¬æ¢ä¸º BBOX å­ç¬¦ä¸²ã
     * @example
     * var bounds = new SuperMap.Bounds(-1.1234567,-1.7654321,1.4444444,1.5555555);
     * //str1 = "-1.123457,-1.765432,1.444444,1.555556";
     * var str1 = bounds.toBBOX();
     * //str2 = "-1.1,-1.8,1.4,1.6";
     * var str2 = bounds.toBBOX(1);
     * //str2 = "-1.8,-1.1,1.6,1.4";
     * var str2 = bounds.toBBOX(1,true);
     * @param {integer} [decimal=6] - è¾¹çæ¹ä½åæ çæææ°å­ä¸ªæ°ã
     * @param {boolean} [reverseAxisOrder=false] - æ¯å¦æ¯åè½¬è½´é¡ºåºã
     * å¦æè®¾ä¸ºtrueï¼ååè½¬é¡ºåºï¼bottom,left,top,rightï¼,å¦åææ­£å¸¸è½´é¡ºåºï¼left,bottom,right,topï¼ã
     * @returns {string} è¾¹çå¯¹è±¡çå­ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ï¼å¦ï¼"5,42,10,45"ã
     */

  }, {
    key: "toBBOX",
    value: function toBBOX(decimal, reverseAxisOrder) {
      if (decimal == null) {
        decimal = 6;
      }

      var mult = Math.pow(10, decimal);
      var xmin = Math.round(this.left * mult) / mult;
      var ymin = Math.round(this.bottom * mult) / mult;
      var xmax = Math.round(this.right * mult) / mult;
      var ymax = Math.round(this.top * mult) / mult;

      if (reverseAxisOrder === true) {
        return ymin + "," + xmin + "," + ymax + "," + xmax;
      } else {
        return xmin + "," + ymin + "," + xmax + "," + ymax;
      }
    }
    /**
     * @function SuperMap.Bounds.prototype.toGeometry
     * @description åºäºå½åè¾¹çèå´åå»ºä¸ä¸ªæ°çå¤è¾¹å½¢å¯¹è±¡ã
     * @example
     * var bounds = new SuperMap.Bounds(-180,-90,100,80);
     * //SuperMap.Geometry.Polygonå¯¹è±¡
     * var geo = bounds.toGeometry();
     * @returns {SuperMap.Geometry.Polygon} åºäºå½å bounds åæ åå»ºçæ°çå¤è¾¹å½¢ã
     */
    // toGeometry() {
    //     return new Polygon([
    //         new LinearRing([
    //             new Point(this.left, this.bottom),
    //             new Point(this.right, this.bottom),
    //             new Point(this.right, this.top),
    //             new Point(this.left, this.top)
    //         ])
    //     ]);
    // }

    /**
     * @function SuperMap.Bounds.prototype.getWidth
     * @description è·å bounds çå®½åº¦ã
     * @example
     * var bounds = new SuperMap.Bounds(-180,-90,100,80);
     * //width = 280;
     * var width = bounds.getWidth();
     * @returns {float} è·åå½å bounds çå®½åº¦ï¼right åå» leftï¼ã
     */

  }, {
    key: "getWidth",
    value: function getWidth() {
      return this.right - this.left;
    }
    /**
     * @function SuperMap.Bounds.prototype.getHeight
     * @description è·å bounds çé«åº¦ã
     * @example
     * var bounds = new SuperMap.Bounds(-180,-90,100,80);
     * //height = 170;
     * var height = bounds.getHeight();
     * @returns {float} è¿åè¾¹çé«åº¦ï¼top åå» bottomï¼ã
     */

  }, {
    key: "getHeight",
    value: function getHeight() {
      return this.top - this.bottom;
    }
    /**
     * @function SuperMap.Bounds.prototype.getSize
     * @description è·åè¾¹æ¡å¤§å°ã
     * @example
     * var bounds = new SuperMap.Bounds(-180,-90,100,80);
     * var size = bounds.getSize();
     * @returns {SuperMap.Size} è¿åè¾¹æ¡å¤§å°ã
     */

  }, {
    key: "getSize",
    value: function getSize() {
      return new Size(this.getWidth(), this.getHeight());
    }
    /**
     * @function SuperMap.Bounds.prototype.getCenterPixel
     * @description è·ååç´ æ ¼å¼çèå´ä¸­å¿ç¹ã
     * @example
     * var bounds = new SuperMap.Bounds(-180,-90,100,80);
     * var pixel = bounds.getCenterPixel();
     * @returns {SuperMap.Pixel} è¿ååç´ æ ¼å¼çå½åèå´çä¸­å¿ç¹ã
     */

  }, {
    key: "getCenterPixel",
    value: function getCenterPixel() {
      return new Pixel((this.left + this.right) / 2, (this.bottom + this.top) / 2);
    }
    /**
     * @function SuperMap.Bounds.prototype.getCenterLonLat
     * @description è·åå°çæ ¼å¼çèå´ä¸­å¿ç¹ã
     * @example
     * var bounds = new SuperMap.Bounds(-180,-90,100,80);
     * var lonlat = bounds.getCenterLonLat();
     * @returns {SuperMap.LonLat} è¿åå½åå°çèå´çä¸­å¿ç¹ã
     */

  }, {
    key: "getCenterLonLat",
    value: function getCenterLonLat() {
      if (!this.centerLonLat) {
        this.centerLonLat = new LonLat((this.left + this.right) / 2, (this.bottom + this.top) / 2);
      }

      return this.centerLonLat;
    }
    /**
     * @function SuperMap.Bounds.prototype.scale
     * @description æç§æ¯ä¾æ©å¤§/ç¼©å°åºä¸ä¸ªæ°ç boundsã
     * @example
     * var bounds = new SuperMap.Bounds(-50,-50,40,40);
     * var bounds2 = bounds.scale(2);
     * @param {float} [ratio=1] - éè¦æ©å¤§çæ¯ä¾ã
     * @param {(SuperMap.Pixel|SuperMap.LonLat)} [origin] - æ©å¤§æ¶çåºåç¹ï¼é»è®¤ä¸ºå½å bounds çä¸­å¿ç¹ã
     * @returns {SuperMap.Bounds} è¿åéè¿ ratioãorigin è®¡ç®å¾å°çæ°çè¾¹çèå´ã
     */

  }, {
    key: "scale",
    value: function scale(ratio, origin) {
      ratio = ratio ? ratio : 1;

      if (origin == null) {
        origin = this.getCenterLonLat();
      }

      var origx, origy; // get origin coordinates

      if (origin.CLASS_NAME === "SuperMap.LonLat") {
        origx = origin.lon;
        origy = origin.lat;
      } else {
        origx = origin.x;
        origy = origin.y;
      }

      var left = (this.left - origx) * ratio + origx;
      var bottom = (this.bottom - origy) * ratio + origy;
      var right = (this.right - origx) * ratio + origx;
      var top = (this.top - origy) * ratio + origy;
      return new Bounds(left, bottom, right, top);
    }
    /**
     * @function SuperMap.Bounds.prototype.add
     * @description å¨å½åç Bounds ä¸æç§ä¼ å¥çåæ ç¹è¿è¡å¹³ç§»ï¼è¿åæ°çèå´ã
     * @example
     * var bounds1 = new SuperMap.Bounds(-50,-50,40,40);
     * //bounds2 æ¯æ°ç bounds
     * var bounds2 = bounds.add(20,10);
     * @param {float} x - ä¼ å¥åæ ç¹ç x åæ ã
     * @param {float} y - ä¼ å¥åæ ç¹ç y åæ ã
     * @returns {SuperMap.Bounds} è¿åä¸ä¸ªæ°ç boundsï¼æ­¤ bounds çåæ æ¯ç±ä¼ å¥ç xï¼y åæ°ä¸å½å bounds åæ è®¡ç®æå¾ã
     */

  }, {
    key: "add",
    value: function add(x, y) {
      if (x == null || y == null) {
        throw new TypeError('Bounds.add cannot receive null values');
      }

      return new Bounds(this.left + x, this.bottom + y, this.right + x, this.top + y);
    }
    /**
     * @function SuperMap.Bounds.prototype.extend
     * @description å¨å½å bounds ä¸æ©å± boundsï¼æ¯æ pointï¼lanlat å boundsãæ©å±åç bounds çèå´æ¯ä¸¤èçç»åã
     * @example
     * var bounds1 = new SuperMap.Bounds(-50,-50,40,40);
     * //bounds æ¹å
     * bounds.extend(new SuperMap.LonLat(50,60));
     * @param {(SuperMap.Geometry.Point|SuperMap.LonLat|SuperMap.Bounds)} object - å¯ä»¥æ¯ pointãlonlat å boundsã
     */

  }, {
    key: "extend",
    value: function extend(object) {
      var bounds = null;

      if (object) {
        // clear cached center location
        switch (object.CLASS_NAME) {
          case "SuperMap.LonLat":
            bounds = new Bounds(object.lon, object.lat, object.lon, object.lat);
            break;

          case "SuperMap.Geometry.Point":
            bounds = new Bounds(object.x, object.y, object.x, object.y);
            break;

          case "SuperMap.Bounds":
            bounds = object;
            break;
        }

        if (bounds) {
          this.centerLonLat = null;

          if (this.left == null || bounds.left < this.left) {
            this.left = bounds.left;
          }

          if (this.bottom == null || bounds.bottom < this.bottom) {
            this.bottom = bounds.bottom;
          }

          if (this.right == null || bounds.right > this.right) {
            this.right = bounds.right;
          }

          if (this.top == null || bounds.top > this.top) {
            this.top = bounds.top;
          }
        }
      }
    }
    /**
     * @function SuperMap.Bounds.prototype.containsLonLat
     * @description å¤æ­ä¼ å¥çåæ æ¯å¦å¨èå´åã
     * @example
     * var bounds1 = new SuperMap.Bounds(-50,-50,40,40);
     * //isContains1 = true
     * //è¿éçç¬¬äºä¸ªåæ°å¯ä»¥ç´æ¥ä¸º boolean ç±»åï¼ä¹å°±æ¯inclusive
     * var isContains1 = bounds.containsLonLat(new SuperMap.LonLat(40,40),true);
     *
     * //(40,40)å¨èå´åï¼åæ ·(40+360,40)ä¹å¨èå´å
     * var bounds2 = new SuperMap.Bounds(-50,-50,40,40);
     * //isContains2 = true;
     * var isContains2 = bounds2.containsLonLat(
     *      new SuperMap.LonLat(400,40),
     *      {
     *           inclusive:true,
     *           //å¨ççèå´
     *           worldBounds: new SuperMap.Bounds(-180,-90,180,90)
     *      }
     * );
     * @param {(SuperMap.LonLat|Object)} ll - <SuperMap.LonLat> å¯¹è±¡æèæ¯ä¸ä¸ªåå« 'lon' ä¸ 'lat' å±æ§çå¯¹è±¡ã
     * @param {Object} options - å¯éåæ°ã
     * @param {boolean} [options.inclusive=true] - æ¯å¦åå«è¾¹çã
     * @param {SuperMap.Bounds} [options.worldBounds] - å¦ææä¾ worldBounds åæ°, å¦æ ll åæ°æä¾çåæ è¶åºäºä¸çè¾¹çï¼worldBoundsï¼ï¼
     *        ä½æ¯éè¿æ¥ççº¿çè½¬åå¯ä»¥è¢«åå«, å®å°è¢«è®¤ä¸ºæ¯åå«å¨è¯¥èå´åçã
     * @returns {boolean} ä¼ å¥åæ æ¯å¦åå«å¨èå´åã
     */

  }, {
    key: "containsLonLat",
    value: function containsLonLat(ll, options) {
      if (typeof options === "boolean") {
        options = {
          inclusive: options
        };
      }

      options = options || {};
      var contains = this.contains(ll.lon, ll.lat, options.inclusive),
          worldBounds = options.worldBounds; //æ¥ççº¿ä»¥å¤çä¹æå¯è½ç®åå«ï¼

      if (worldBounds && !contains) {
        var worldWidth = worldBounds.getWidth();
        var worldCenterX = (worldBounds.left + worldBounds.right) / 2; //è¿ä¸æ­¥å¾å³é®

        var worldsAway = Math.round((ll.lon - worldCenterX) / worldWidth);
        contains = this.containsLonLat({
          lon: ll.lon - worldsAway * worldWidth,
          lat: ll.lat
        }, {
          inclusive: options.inclusive
        });
      }

      return contains;
    }
    /**
     * @function SuperMap.Bounds.prototype.containsPixel
     * @description å¤æ­ä¼ å¥çåç´ æ¯å¦å¨èå´åãç´æ¥å¹éå¤§å°ï¼ä¸æ¶ååç´ åå°çè½¬æ¢ã
     * @example
     * var bounds = new SuperMap.Bounds(-50,-50,40,40);
     * //isContains = true
     * var isContains = bounds.containsPixel(new SuperMap.Pixel(40,40),true);
     * @param {SuperMap.Pixel} px - æä¾çåç´ åæ°ã
     * @param {boolean} [inclusive=true] - æ¯å¦åå«è¾¹çã
     * @returns {boolean} ä¼ å¥ç pixel å¨å½åè¾¹çèå´ä¹åã
     */

  }, {
    key: "containsPixel",
    value: function containsPixel(px, inclusive) {
      return this.contains(px.x, px.y, inclusive);
    }
    /**
     * @function SuperMap.Bounds.prototype.contains
     * @description å¤æ­ä¼ å¥ç xï¼y åæ å¼æ¯å¦å¨èå´åã
     * @example
     * var bounds = new SuperMap.Bounds(-50,-50,40,40);
     * //isContains = true
     * var isContains = bounds.contains(40,40,true);
     * @param {float} x - ä¼ å¥ç x åæ å¼ã
     * @param {float} y - ä¼ å¥ç y åæ å¼ã
     * @param {boolean} [inclusive=true] - æ¯å¦åå«è¾¹çã
     * @returns {boolean} ä¼ å¥ç xï¼y åæ æ¯å¦å¨å½åèå´åã
     */

  }, {
    key: "contains",
    value: function contains(x, y, inclusive) {
      //set default
      if (inclusive == null) {
        inclusive = true;
      }

      if (x == null || y == null) {
        return false;
      } //x = Util.toFloat(x);
      //y = Util.toFloat(y);


      var contains = false;

      if (inclusive) {
        contains = x >= this.left && x <= this.right && y >= this.bottom && y <= this.top;
      } else {
        contains = x > this.left && x < this.right && y > this.bottom && y < this.top;
      }

      return contains;
    }
    /**
     * @function SuperMap.Bounds.prototype.intersectsBounds
     * @description å¤æ­ç®æ è¾¹çèå´æ¯å¦ä¸å½åè¾¹çèå´ç¸äº¤ãå¦æä¸¤ä¸ªè¾¹çèå´ä¸­çä»»æ
     *              è¾¹ç¼ç¸äº¤æèä¸ä¸ªè¾¹çåå«äºå¦å¤ä¸ä¸ªå°±è®¤ä¸ºè¿ä¸¤ä¸ªè¾¹çç¸äº¤ã
     * @example
     * var bounds = new SuperMap.Bounds(-180,-90,100,80);
     * var isIntersects = bounds.intersectsBounds(
     *      new SuperMap.Bounds(-170,-90,120,80)
     *  );
     * @param {SuperMap.Bounds} bounds - ç®æ è¾¹çã
     * @param {Object} options - åæ°ã
     * @param {boolean} [options.inclusive=true] - è¾¹ç¼éåä¹çæç¸äº¤ãå¦ææ¯falseï¼
     *                               ä¸¤ä¸ªè¾¹çèå´æ²¡æéå é¨åä»ä»æ¯å¨è¾¹ç¼ç¸æ¥ï¼éåï¼ï¼
     *                               è¿ç§æåµè¢«è®¤ä¸ºæ²¡æç¸äº¤ã
     * @param {SuperMap.Bounds} [options.worldBounds] - æä¾äº worldBounds åæ°, å¦æä»ä»¬ç¸äº¤æ¶
     *                               æ¯å¨å¨çèå´å, ä¸¤ä¸ªè¾¹çå°è¢«è§ä¸ºç¸äº¤ãè¿ä»éç¨äºäº¤åæå®å¨ä¸å¨ä¸çèå´çè¾¹çã
     * @returns {boolean} ä¼ å¥ç bounds å¯¹è±¡ä¸å½å bounds ç¸äº¤ã
     */

  }, {
    key: "intersectsBounds",
    value: function intersectsBounds(bounds, options) {
      if (typeof options === "boolean") {
        options = {
          inclusive: options
        };
      }

      options = options || {};

      if (options.worldBounds) {
        var self = this.wrapDateLine(options.worldBounds);
        bounds = bounds.wrapDateLine(options.worldBounds);
      } else {
        self = this;
      }

      if (options.inclusive == null) {
        options.inclusive = true;
      }

      var intersects = false;
      var mightTouch = self.left === bounds.right || self.right === bounds.left || self.top === bounds.bottom || self.bottom === bounds.top; // if the two bounds only touch at an edge, and inclusive is false,
      // then the bounds don't *really* intersect.

      if (options.inclusive || !mightTouch) {
        // otherwise, if one of the boundaries even partially contains another,
        // inclusive of the edges, then they do intersect.
        var inBottom = bounds.bottom >= self.bottom && bounds.bottom <= self.top || self.bottom >= bounds.bottom && self.bottom <= bounds.top;
        var inTop = bounds.top >= self.bottom && bounds.top <= self.top || self.top > bounds.bottom && self.top < bounds.top;
        var inLeft = bounds.left >= self.left && bounds.left <= self.right || self.left >= bounds.left && self.left <= bounds.right;
        var inRight = bounds.right >= self.left && bounds.right <= self.right || self.right >= bounds.left && self.right <= bounds.right;
        intersects = (inBottom || inTop) && (inLeft || inRight);
      } // document me


      if (options.worldBounds && !intersects) {
        var world = options.worldBounds;
        var width = world.getWidth();
        var selfCrosses = !world.containsBounds(self);
        var boundsCrosses = !world.containsBounds(bounds);

        if (selfCrosses && !boundsCrosses) {
          bounds = bounds.add(-width, 0);
          intersects = self.intersectsBounds(bounds, {
            inclusive: options.inclusive
          });
        } else if (boundsCrosses && !selfCrosses) {
          self = self.add(-width, 0);
          intersects = bounds.intersectsBounds(self, {
            inclusive: options.inclusive
          });
        }
      }

      return intersects;
    }
    /**
     * @function SuperMap.Bounds.prototype.containsBounds
     * @description å¤æ­ç®æ è¾¹çæ¯å¦è¢«å½åè¾¹çåå«å¨åã
     * @example
     * var bounds = new SuperMap.Bounds(-180,-90,100,80);
     * var isContains = bounds.containsBounds(
     *      new SuperMap.Bounds(-170,-90,100,80),true,true
     *  );
     * @param {SuperMap.Bounds} bounds - ç®æ è¾¹çã
     * @param {boolean} [partial=false] - ç®æ è¾¹ççä»»æé¨åé½åå«å¨å½åè¾¹çä¸­åè¢«è®¤ä¸ºæ¯åå«å³ç³»ã
     * å¦æè®¾ä¸º falseï¼æ´ä¸ªç®æ è¾¹çå¨é¨è¢«åå«å¨å½åè¾¹çèå´åã
     * @param {boolean} [inclusive=true] - è¾¹ç¼å±äº«è¢«è§ä¸ºåå«ã
     * @returns {boolean} ä¼ å¥çè¾¹çè¢«å½åè¾¹çåå«ã
     */

  }, {
    key: "containsBounds",
    value: function containsBounds(bounds, partial, inclusive) {
      if (partial == null) {
        partial = false;
      }

      if (inclusive == null) {
        inclusive = true;
      }

      var bottomLeft = this.contains(bounds.left, bounds.bottom, inclusive);
      var bottomRight = this.contains(bounds.right, bounds.bottom, inclusive);
      var topLeft = this.contains(bounds.left, bounds.top, inclusive);
      var topRight = this.contains(bounds.right, bounds.top, inclusive);
      return partial ? bottomLeft || bottomRight || topLeft || topRight : bottomLeft && bottomRight && topLeft && topRight;
    }
    /**
     * @function SuperMap.Bounds.prototype.determineQuadrant
     * @description å¤æ­ä¼ å¥åæ æ¯å¦å¨ bounds èå´åçè±¡éãä»¥ bounds ä¸­å¿ç¹ä¸ºåæ åç¹ã
     * @example
     * var bounds = new SuperMap.Bounds(-180,-90,100,80);
     * //str = "tr";
     * var str = bounds.determineQuadrant(
     *      new SuperMap.LonLat(20,20)
     *  );
     * @param {SuperMap.LonLat} lonlat - ä¼ å¥çåæ å¯¹è±¡ã
     * @returns {string} ä¼ å¥åæ æå¨çè±¡éï¼"br" "tr" "tl" "bl" åå«å¯¹åº"å³ä¸"ï¼"å³ä¸"ï¼"å·¦ä¸" "å·¦ä¸"ï¼ã
     */

  }, {
    key: "determineQuadrant",
    value: function determineQuadrant(lonlat) {
      var quadrant = "";
      var center = this.getCenterLonLat();
      quadrant += lonlat.lat < center.lat ? "b" : "t";
      quadrant += lonlat.lon < center.lon ? "l" : "r";
      return quadrant;
    }
    /**
     * @function SuperMap.Bounds.prototype.wrapDateLine
     * @description å°å½å bounds ç§»å¨å°æå¤§è¾¹çèå´åé¨ï¼æè°çåé¨æ¯ç¸äº¤æèåé¨ï¼ã
     * @example
     * var bounds = new SuperMap.Bounds(380,-40,400,-20);
     * var maxExtent = new SuperMap.Bounds(-180,-90,100,80);
     * //æ°çbounds
     * var newBounds = bounds.wrapDateLine(maxExtent);
     * @param {SuperMap.Bounds} maxExtent - æå¤§çè¾¹çèå´ï¼ä¸è¬æ¯å¨çèå´ï¼ã
     * @param {Object} options - å¯ééé¡¹åæ°ã 
     * @param {float} [options.leftTolerance=0] - left åè®¸çè¯¯å·®ã 
     * @param {float} [options.rightTolerance=0] - right åè®¸çè¯¯å·®ã
     * @returns {SuperMap.Bounds} åéå½åè¾¹çãå¦æå½åè¾¹çå®å¨å¨æå¤§èå´ä¹å¤æ­¤å½æ°åè¿åä¸ä¸ªä¸åå¼çè¾¹çï¼
     *                            è¥è½å¨æå¤§è¾¹ççå·¦è¾¹ï¼åç»å½åçboundså¼å ä¸æå¤§èå´çå®½åº¦ï¼å³åå³ç§»å¨ï¼
     *                            è¥è½å¨å³è¾¹ï¼ååå·¦ç§»å¨ï¼å³ç»å½åçboundså¼å ä¸è´çæå¤§èå´çå®½åº¦ã
     */

  }, {
    key: "wrapDateLine",
    value: function wrapDateLine(maxExtent, options) {
      options = options || {};
      var leftTolerance = options.leftTolerance || 0;
      var rightTolerance = options.rightTolerance || 0;
      var newBounds = this.clone();

      if (maxExtent) {
        var width = maxExtent.getWidth(); //å¦æ newBounds å¨ maxExtent çå·¦è¾¹ï¼é£ä¹ä¸ç´åå³ç§»å¨ï¼ç´å°ç¸äº¤æèåå«ä¸ºæ­¢ï¼æ¯æ¬¡ç§»å¨width
        //shift right?

        while (newBounds.left < maxExtent.left && newBounds.right - rightTolerance <= maxExtent.left) {
          newBounds = newBounds.add(width, 0);
        } //å¦æ newBounds å¨ maxExtent çå³è¾¹ï¼é£ä¹ä¸ç´åå·¦ç§»å¨ï¼ç´å°ç¸äº¤æèåå«ä¸ºæ­¢ï¼æ¯æ¬¡ç§»å¨width
        //shift left?


        while (newBounds.left + leftTolerance >= maxExtent.right && newBounds.right > maxExtent.right) {
          newBounds = newBounds.add(-width, 0);
        } //å¦æåå³è¾¹ç¸äº¤ï¼å·¦è¾¹åå¨åé¨ï¼é£ä¹åæ¬¡åå·¦è¾¹ç§»å¨ä¸æ¬¡
        // crosses right only? force left


        var newLeft = newBounds.left + leftTolerance;

        if (newLeft < maxExtent.right && newLeft > maxExtent.left && newBounds.right - rightTolerance > maxExtent.right) {
          newBounds = newBounds.add(-width, 0);
        }
      }

      return newBounds;
    }
    /**
     * @function SuperMap.Bounds.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     * @example
     * var bounds = new SuperMap.Bounds(-180,-90,100,80);
     * var obj = bounds.toServerJSONObject();
     * @returns {Object} è¿å JSON æ ¼å¼ç Object å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      var jsonObject = {
        rightTop: {
          x: this.right,
          y: this.top
        },
        leftBottom: {
          x: this.left,
          y: this.bottom
        },
        left: this.left,
        right: this.right,
        top: this.top,
        bottom: this.bottom
      };
      return jsonObject;
    }
    /**
     *
     * @function SuperMap.Bounds.prototype.destroy
     * @description éæ¯æ­¤å¯¹è±¡ã
     * éæ¯åæ­¤å¯¹è±¡çææå±æ§ä¸º nullï¼èä¸æ¯åå§å¼ã
     * @example
     * var bounds = new SuperMap.Bounds(-180,-90,100,80);
     * bounds.destroy();
     */

  }, {
    key: "destroy",
    value: function destroy() {
      this.left = null;
      this.right = null;
      this.top = null;
      this.bottom = null;
      this.centerLonLat = null;
    }
    /**
     * @function SuperMap.Bounds.fromString
     * @description éè¿å­ç¬¦ä¸²åæ°åå»ºæ°ç bounds çæé å½æ°ã
     * @example
     * var bounds = SuperMap.Bounds.fromString("-180,-90,100,80");
     * @param {string} str - è¾¹çå­ç¬¦ä¸²ï¼ç¨éå·éå¼ï¼e.g. <i>"5,42,10,45"</i>ï¼ã
     * @param {boolean} [reverseAxisOrder=false] - æ¯å¦åè½¬è½´é¡ºåºã
     * å¦æè®¾ä¸ºtrueï¼ååè½¬é¡ºåºï¼bottom,left,top,rightï¼ï¼å¦åææ­£å¸¸è½´é¡ºåºï¼left,bottom,right,topï¼ã
     * @returns {SuperMap.Bounds} è¿åç»å®çå­ç¬¦ä¸²åå»ºçæ°çè¾¹çå¯¹è±¡ã
     */

  }], [{
    key: "fromString",
    value: function fromString(str, reverseAxisOrder) {
      var bounds = str.split(",");
      return Bounds.fromArray(bounds, reverseAxisOrder);
    }
    /**
     * @function SuperMap.Bounds.fromArray
     * @description éè¿è¾¹çæ¡æ°ç»åå»º Boundsã
     * @example
     * var bounds = SuperMap.Bounds.fromArray([-180,-90,100,80]);
     * @param {Array.<float>} bbox - è¾¹çå¼æ°ç»ãï¼e.g. <i>[5,42,10,45]</i>ï¼ã
     * @param {boolean} [reverseAxisOrder=false] - æ¯å¦æ¯åè½¬è½´é¡ºåºãå¦æè®¾ä¸ºtrueï¼ååè½¬é¡ºåºï¼bottom,left,top,rightï¼ï¼å¦åææ­£å¸¸è½´é¡ºåºï¼left,bottom,right,topï¼ã
     * @returns {SuperMap.Bounds} è¿åæ ¹æ®ä¼ å¥çæ°ç»åå»ºçæ°çè¾¹çå¯¹è±¡ã
     */

  }, {
    key: "fromArray",
    value: function fromArray(bbox, reverseAxisOrder) {
      return reverseAxisOrder === true ? new Bounds(bbox[1], bbox[0], bbox[3], bbox[2]) : new Bounds(bbox[0], bbox[1], bbox[2], bbox[3]);
    }
    /**
     * @function SuperMap.Bounds.fromSize
     * @description éè¿ä¼ å¥çè¾¹çå¤§å°æ¥åå»ºæ°çè¾¹çã
     * @example
     * var bounds = SuperMap.Bounds.fromSize(new SuperMap.Size(20,10));
     * @param {SuperMap.Size} size - ä¼ å¥çè¾¹çå¤§å°ã
     * @returns {SuperMap.Bounds} è¿åæ ¹æ®ä¼ å¥çè¾¹çå¤§å°çåå»ºæ°çè¾¹çã
     */

  }, {
    key: "fromSize",
    value: function fromSize(size) {
      return new Bounds(0, size.h, size.w, 0);
    }
    /**
     * @function SuperMap.Bounds.oppositeQuadrant
     * @description åè½¬è±¡éã"t"å"b" äº¤æ¢ï¼"r"å"l"äº¤æ¢, å¦ï¼"tl"åä¸º"br"ã
     * @param {string} quadrant - ä»£è¡¨è±¡éçå­ç¬¦ä¸²ï¼å¦ï¼"tl"ã
     * @returns {string} åè½¬åçè±¡éã
     */

  }, {
    key: "oppositeQuadrant",
    value: function oppositeQuadrant(quadrant) {
      var opp = "";
      opp += quadrant.charAt(0) === 't' ? 'b' : 't';
      opp += quadrant.charAt(1) === 'l' ? 'r' : 'l';
      return opp;
    }
  }]);

  return Bounds;
}();
SuperMap.Bounds = Bounds;
// CONCATENATED MODULE: ./src/common/commontypes/Geometry.js
function Geometry_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Geometry_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Geometry_createClass(Constructor, protoProps, staticProps) { if (protoProps) Geometry_defineProperties(Constructor.prototype, protoProps); if (staticProps) Geometry_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
 // import {WKT} from '../format/WKT';
// import {Vector} from './Vector';


/**
 * @class SuperMap.Geometry
 * @category BaseTypes Geometry
 * @classdesc å ä½å¯¹è±¡ç±»ï¼æè¿°å°çå¯¹è±¡çå ä½å¾å½¢ã
 */

var Geometry = /*#__PURE__*/function () {
  function Geometry() {
    Geometry_classCallCheck(this, Geometry);

    this.CLASS_NAME = "SuperMap.Geometry";
    /**
     * @member {string} SuperMap.Geometry.prototype.id
     * @description  æ­¤å ä½å¯¹è±¡çå¯ä¸æ ç¤ºç¬¦ã
     *
     */

    this.id = Util.createUniqueID(this.CLASS_NAME + "_");
    /**
     * @member {SuperMap.Geometry} SuperMap.Geometry.prototype.parent
     * @description This is set when a Geometry is added as component
     * of another geometry
     */

    this.parent = null;
    /**
     * @member {SuperMap.Bounds} SuperMap.Geometry.prototype.bounds
     * @description å ä½å¯¹è±¡çèå´ã
     *
     */

    this.bounds = null;
    /**
     * @member {interger} SuperMap.Geometry.prototype.SRID
     * @description æå½±åæ åæ°ãéè¿è¯¥åæ°ï¼æå¡å¨å¤æ­ Geometry å¯¹è±¡çåæ åèç³»æ¯å¦ä¸æ°æ®éç¸åï¼å¦æä¸åï¼åå¨æ°æ®å¥åºåè¿è¡æå½±åæ¢ã
     * @example
     *   var geometry= new SuperMap.Geometry();
     *   geometry. SRID=4326;
     *
     */

    this.SRID = null;
  }
  /**
   * @function SuperMap.Geometry.prototype.destroy
   * @description è§£æ Geometry ç±»ï¼éæ¾èµæºã
   */


  Geometry_createClass(Geometry, [{
    key: "destroy",
    value: function destroy() {
      this.id = null;
      this.bounds = null;
      this.SRID = null;
    }
    /**
     * @function SuperMap.Geometry.prototype.clone
     * @description åå»ºåéçå ä½å¾å½¢ãåéçå ä½å¾å½¢ä¸è®¾ç½®éæ åçå±æ§ã
     * @returns {SuperMap.Geometry} åéçå ä½å¾å½¢ã
     */

  }, {
    key: "clone",
    value: function clone() {
      return new Geometry();
    }
    /**
     * @function SuperMap.Geometry.prototype.setBounds
     * @description è®¾ç½®æ­¤å ä½å¯¹è±¡ç boundsã
     * @param {SuperMap.Bounds} bounds - èå´ã
     */

  }, {
    key: "setBounds",
    value: function setBounds(bounds) {
      if (bounds) {
        this.bounds = bounds.clone();
      }
    }
    /**
     * @function SuperMap.Geometry.prototype.clearBounds
     * @description æ¸é¤å ä½å¯¹è±¡ç boundsã
     * å¦æè¯¥å¯¹è±¡æç¶ç±»ï¼ä¹ä¼æ¸é¤ç¶ç±»å ä½å¯¹è±¡ç boundsã
     */

  }, {
    key: "clearBounds",
    value: function clearBounds() {
      this.bounds = null;

      if (this.parent) {
        this.parent.clearBounds();
      }
    }
    /**
     * @function SuperMap.Geometry.prototype.extendBounds
     * @description Extend the existing bounds to include the new bounds.
     * If geometry's bounds is not yet set, then set a new Bounds.
     *
     * @param {SuperMap.Bounds} newBounds - èå´ã
     */

  }, {
    key: "extendBounds",
    value: function extendBounds(newBounds) {
      var bounds = this.getBounds();

      if (!bounds) {
        this.setBounds(newBounds);
      } else {
        this.bounds.extend(newBounds);
      }
    }
    /**
     * @function SuperMap.Geometry.prototype.getBounds
     * @description è·å¾å ä½å¾å½¢çè¾¹çãå¦ææ²¡æè®¾ç½®è¾¹çï¼å¯éè¿è®¡ç®è·å¾ã
     * @returns {SuperMap.Bounds} è¿åçå ä½å¯¹è±¡çè¾¹çã
     */

  }, {
    key: "getBounds",
    value: function getBounds() {
      if (this.bounds == null) {
        this.calculateBounds();
      }

      return this.bounds;
    }
    /**
     * @function SuperMap.Geometry.prototype.calculateBounds
     * @description éæ°è®¡ç®å ä½å¾å½¢çè¾¹çï¼éè¦å¨å­ç±»ä¸­å®ç°æ­¤æ¹æ³ï¼ã
     */

  }, {
    key: "calculateBounds",
    value: function calculateBounds() {//
      // This should be overridden by subclasses.
      //
    }
    /**
     * @function SuperMap.Geometry.prototype.getVertices
     * @description è¿åå ä½å¾å½¢çææé¡¶ç¹çåè¡¨ï¼éè¦å¨å­ç±»ä¸­å®ç°æ­¤æ¹æ³ï¼ã
     * @param {boolean} [nodes] - å¦ææ¯ trueï¼çº¿ååªè¿åçº¿çæ«ç«¯ç¹ï¼å¦æ falseï¼ä»ä»è¿åé¡¶ç¹ï¼å¦ææ²¡æè®¾ç½®ï¼åè¿åé¡¶ç¹ã
     * @returns {Array} å ä½å¾å½¢çé¡¶ç¹åè¡¨ã
     */

  }, {
    key: "getVertices",
    value: function getVertices(nodes) {// eslint-disable-line no-unused-vars
    }
    /**
     * @function SuperMap.Geometry.prototype.getArea
     * @description è®¡ç®å ä½å¯¹è±¡çé¢ç§¯ ï¼æ­¤æ¹æ³éè¦å¨å­ç±»ä¸­å®ä¹ã
     * @returns {float} The area of the collection by summing its parts
     */

  }, {
    key: "getArea",
    value: function getArea() {
      //to be overridden by geometries that actually have an area
      //
      return 0.0;
    } // /**
    //  * @function SuperMap.Geometry.prototype.toString
    //  * @description è¿ågeometryå¯¹è±¡çå­ç¬¦ä¸²è¡¨è¿°ï¼éè¦å¼å¥{@link SuperMap.Format.WKT}ãæ­¤æ¹æ³åªè½å¨å­ç±»å®ç°ï¼å¨ç¶ç±»ä½¿ç¨ä¼æ¥éã
    //  * @returns {string} geometryå¯¹è±¡çå­ç¬¦ä¸²è¡¨è¿°(Well-Known Text)
    //  */
    // toString() {
    // var string;
    // if (WKT) {
    //     var wkt = new WKT();
    //     string = wkt.write(new Vector(this));
    // } else {
    //     string = Object.prototype.toString.call(this);
    // }
    // return string;
    // }

  }]);

  return Geometry;
}();
SuperMap.Geometry = Geometry;
// CONCATENATED MODULE: ./src/common/commontypes/geometry/Collection.js
function Collection_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Collection_typeof = function _typeof(obj) { return typeof obj; }; } else { Collection_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Collection_typeof(obj); }

function Collection_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Collection_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Collection_createClass(Constructor, protoProps, staticProps) { if (protoProps) Collection_defineProperties(Constructor.prototype, protoProps); if (staticProps) Collection_defineProperties(Constructor, staticProps); return Constructor; }

function _get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (Collection_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.Geometry.Collection
 * @classdesc å ä½å¯¹è±¡éåç±»ï¼å­å¨å¨æ¬å°ç components å±æ§ä¸­ï¼å¯ä½ä¸ºåæ°ä¼ éç»æé å½æ°ï¼ã<br>
 *            éçæ°çå ä½å¾å½¢æ·»å å°éåä¸­ï¼å°ä¸è½è¢«åéï¼å½ç§»å¨å ä½å¾å½¢æ¶ï¼éè¦æå®åç§ç©ã<br>
 *            getArea å getLength å½æ°åªè½éè¿éåå­å¨å ä½å¯¹è±¡ç components æ°ç»ï¼æ»è®¡ææå ä½å¾å½¢çé¢ç§¯åé¿åº¦ã
 * @category BaseTypes Geometry
 * @extends {SuperMap.Geometry}
 * @param {Array.<SuperMap.Geometry>} components - å ä½å¯¹è±¡æ°ç»ã
 * @example
 * var point1 = new SuperMap.Geometry.Point(10,20);
 * var point2 = new SuperMap.Geometry.Point(30,40);
 * var col = new SuperMap.Geometry.Collection([point1,point2]);
 */

var Collection = /*#__PURE__*/function (_Geometry) {
  _inherits(Collection, _Geometry);

  var _super = _createSuper(Collection);

  function Collection(components) {
    var _this;

    Collection_classCallCheck(this, Collection);

    _this = _super.call(this);
    /**
     * @description å­å¨å ä½å¯¹è±¡çæ°ç»ã
     * @member {Array.<SuperMap.Geometry>} SuperMap.Geometry.Collection.prototype.components
     */

    _this.components = [];
    /**
     * @member {Array.<string>} SuperMap.Geometry.Collection.prototype.componentTypes
     * @description components å­å¨ççå ä½å¯¹è±¡ææ¯æçå ä½ç±»åæ°ç»ï¼ä¸ºç©ºè¡¨ç¤ºç±»åä¸åéå¶ã
     */

    _this.componentTypes = null;

    if (components != null) {
      _this.addComponents(components);
    }

    _this.CLASS_NAME = "SuperMap.Geometry.Collection";
    _this.geometryType = "Collection";
    return _this;
  }
  /**
   * @function SuperMap.Geometry.Collection.prototype.destroy
   * @description éæ¯å ä½å¾å½¢ã
   */


  Collection_createClass(Collection, [{
    key: "destroy",
    value: function destroy() {
      this.components.length = 0;
      this.components = null;

      _get(_getPrototypeOf(Collection.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.Geometry.Collection.prototype.clone
     * @description åéå½åå ä½å¯¹è±¡ã
     * @returns {SuperMap.Geometry.Collection} åéçå ä½å¯¹è±¡éåã
     */

  }, {
    key: "clone",
    value: function clone() {
      var geometry = new Collection();

      for (var i = 0, len = this.components.length; i < len; i++) {
        geometry.addComponent(this.components[i].clone());
      } // catch any randomly tagged-on properties


      Util.applyDefaults(geometry, this);
      return geometry;
    }
    /**
     * @function SuperMap.Geometry.Collection.prototype.getComponentsString
     * @description è·å components å­ç¬¦ä¸²ã
     * @returns {string} components å­ç¬¦ä¸²ã
     */

  }, {
    key: "getComponentsString",
    value: function getComponentsString() {
      var strings = [];

      for (var i = 0, len = this.components.length; i < len; i++) {
        strings.push(this.components[i].toShortString());
      }

      return strings.join(",");
    }
    /**
     * @function SuperMap.Geometry.Collection.prototype.calculateBounds
     * @description éè¿éåæ°ç»éæ°è®¡ç®è¾¹çï¼å¨éåæ¯ä¸å­é¡¹ä¸­æ¶è°ç¨ extend æ¹æ³ã
     */

  }, {
    key: "calculateBounds",
    value: function calculateBounds() {
      this.bounds = null;
      var bounds = new Bounds();
      var components = this.components;

      if (components) {
        for (var i = 0, len = components.length; i < len; i++) {
          bounds.extend(components[i].getBounds());
        }
      } // to preserve old behavior, we only set bounds if non-null
      // in the future, we could add bounds.isEmpty()


      if (bounds.left != null && bounds.bottom != null && bounds.right != null && bounds.top != null) {
        this.setBounds(bounds);
      }
    }
    /**
     * @function SuperMap.Geometry.Collection.prototype.addComponents
     * @description ç»å ä½å¾å½¢å¯¹è±¡æ·»å åç´ ã
     * @param {Array.<SuperMap.Geometry>} components - å ä½å¯¹è±¡ç»ä»¶ã
     * @example
     * var collection = new SuperMap.Geometry.Collection();
     * collection.addComponents(new SuerpMap.Geometry.Point(10,10));
     */

  }, {
    key: "addComponents",
    value: function addComponents(components) {
      if (!Util.isArray(components)) {
        components = [components];
      }

      for (var i = 0, len = components.length; i < len; i++) {
        this.addComponent(components[i]);
      }
    }
    /**
     * @function SuperMap.Geometry.Collection.prototype.addComponent
     * @description æ·»å ä¸ä¸ªå ä½å¯¹è±¡å°éåä¸­ãå¦æè®¾ç½®äº componentTypes ç±»åï¼åæ·»å çå ä½å¯¹è±¡å¿é¡»æ¯ componentTypes ä¸­çç±»åã
     * @param {SuperMap.Geometry} component - å¾æ·»å çå ä½å¯¹è±¡ã
     * @param {int} [index] - å ä½å¯¹è±¡æå¥çä½ç½®ã
     * @returns {boolean} æ¯å¦æ·»å æåã
     */

  }, {
    key: "addComponent",
    value: function addComponent(component, index) {
      var added = false;

      if (component) {
        if (this.componentTypes == null || Util.indexOf(this.componentTypes, component.CLASS_NAME) > -1) {
          if (index != null && index < this.components.length) {
            var components1 = this.components.slice(0, index);
            var components2 = this.components.slice(index, this.components.length);
            components1.push(component);
            this.components = components1.concat(components2);
          } else {
            this.components.push(component);
          }

          component.parent = this;
          this.clearBounds();
          added = true;
        }
      }

      return added;
    }
    /**
     * @function SuperMap.Geometry.Collection.prototype.removeComponents
     * @description æ¸é¤å ä½å¯¹è±¡ã
     * @param {Array.<SuperMap.Geometry>} components - éè¦æ¸é¤çå ä½å¯¹è±¡ã
     * @returns {boolean} åç´ æ¯å¦è¢«å é¤ã
     */

  }, {
    key: "removeComponents",
    value: function removeComponents(components) {
      var removed = false;

      if (!Util.isArray(components)) {
        components = [components];
      }

      for (var i = components.length - 1; i >= 0; --i) {
        removed = this.removeComponent(components[i]) || removed;
      }

      return removed;
    }
    /**
     * @function SuperMap.Geometry.Collection.prototype.removeComponent
     * @description ä»éåä¸­ç§»é¤ä¸ä¸ªå ä½å¯¹è±¡ã
     * @param {SuperMap.Geometry} component - è¦ç§»é¤çå ä½å¯¹è±¡ã
     * @returns {boolean} å ä½å¯¹è±¡æ¯å¦ç§»é¤æåã
     */

  }, {
    key: "removeComponent",
    value: function removeComponent(component) {
      Util.removeItem(this.components, component); // clearBounds() so that it gets recalculated on the next call
      // to this.getBounds();

      this.clearBounds();
      return true;
    }
    /**
     * @function SuperMap.Geometry.Collection.prototype.getArea
     * @description è®¡ç®å ä½å¯¹è±¡çé¢ç§¯ãæ³¨æï¼è¿ä¸ªæ¹æ³å¨ {@link SuperMap.Geometry.Polygon} ç±»ä¸­éè¦éåã
     * @returns {number} å ä½å¾å½¢çé¢ç§¯ï¼æ¯å ä½å¯¹è±¡ä¸­ææç»æé¨åçé¢ç§¯ä¹åã
     */

  }, {
    key: "getArea",
    value: function getArea() {
      var area = 0.0;

      for (var i = 0, len = this.components.length; i < len; i++) {
        area += this.components[i].getArea();
      }

      return area;
    }
    /**
     * @function SuperMap.Geometry.Collection.prototype.equals
     * @description å¤æ­ä¸¤ä¸ªå ä½å¾å½¢æ¯å¦ç¸ç­ãå¦æææç components å·æç¸åçåæ ï¼åè®¤ä¸ºæ¯ç¸ç­çã
     * @param {SuperMap.Geometry} geometry - éè¦å¤æ­çå ä½å¾å½¢ã
     * @returns {boolean} è¾å¥çå ä½å¾å½¢ä¸å½åå ä½å¾å½¢æ¯å¦ç¸ç­ã
     */

  }, {
    key: "equals",
    value: function equals(geometry) {
      var equivalent = true;

      if (!geometry || !geometry.CLASS_NAME || this.CLASS_NAME !== geometry.CLASS_NAME) {
        equivalent = false;
      } else if (!Util.isArray(geometry.components) || geometry.components.length !== this.components.length) {
        equivalent = false;
      } else {
        for (var i = 0, len = this.components.length; i < len; ++i) {
          if (!this.components[i].equals(geometry.components[i])) {
            equivalent = false;
            break;
          }
        }
      }

      return equivalent;
    }
    /**
     * @function SuperMap.Geometry.Collection.prototype.getVertices
     * @description è¿åå ä½å¯¹è±¡çææç»ç¹çåè¡¨ã
     * @param {boolean} [nodes] - å¯¹äºçº¿æ¥è¯´ï¼ä»ä»è¿åä½ä¸ºç«¯ç¹çé¡¶ç¹ï¼å¦æè®¾ä¸º falseï¼åè¿åéç«¯ç¹çé¡¶ç¹å¦ææ²¡æè®¾ç½®æ­¤åæ°ï¼åè¿åææé¡¶ç¹ã
     * @returns {Array} å ä½å¯¹è±¡çé¡¶ç¹åè¡¨ã
     */

  }, {
    key: "getVertices",
    value: function getVertices(nodes) {
      var vertices = [];

      for (var i = 0, len = this.components.length; i < len; ++i) {
        Array.prototype.push.apply(vertices, this.components[i].getVertices(nodes));
      }

      return vertices;
    }
  }]);

  return Collection;
}(Geometry);
SuperMap.Geometry.Collection = Collection;
// CONCATENATED MODULE: ./src/common/commontypes/geometry/MultiPoint.js
function MultiPoint_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { MultiPoint_typeof = function _typeof(obj) { return typeof obj; }; } else { MultiPoint_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return MultiPoint_typeof(obj); }

function MultiPoint_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function MultiPoint_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function MultiPoint_createClass(Constructor, protoProps, staticProps) { if (protoProps) MultiPoint_defineProperties(Constructor.prototype, protoProps); if (staticProps) MultiPoint_defineProperties(Constructor, staticProps); return Constructor; }

function MultiPoint_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) MultiPoint_setPrototypeOf(subClass, superClass); }

function MultiPoint_setPrototypeOf(o, p) { MultiPoint_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return MultiPoint_setPrototypeOf(o, p); }

function MultiPoint_createSuper(Derived) { var hasNativeReflectConstruct = MultiPoint_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = MultiPoint_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = MultiPoint_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return MultiPoint_possibleConstructorReturn(this, result); }; }

function MultiPoint_possibleConstructorReturn(self, call) { if (call && (MultiPoint_typeof(call) === "object" || typeof call === "function")) { return call; } return MultiPoint_assertThisInitialized(self); }

function MultiPoint_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function MultiPoint_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function MultiPoint_getPrototypeOf(o) { MultiPoint_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return MultiPoint_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.Geometry.MultiPoint
 * @classdesc å ä½å¯¹è±¡å¤ç¹ç±»ã
 * @category BaseTypes Geometry
 * @extends {SuperMap.Geometry.Collection}
 * @param {Array.<SuperMap.Geometry.Point>} components - ç¹å¯¹è±¡æ°ç»ã
 * @example
 * var point1 = new SuperMap.Geometry.Point(5,6);
 * var poine2 = new SuperMap.Geometry.Point(7,8);
 * var multiPoint = new SuperMap.Geometry.MultiPoint([point1,point2]);
 */

var MultiPoint = /*#__PURE__*/function (_Collection) {
  MultiPoint_inherits(MultiPoint, _Collection);

  var _super = MultiPoint_createSuper(MultiPoint);

  function MultiPoint(components) {
    var _this;

    MultiPoint_classCallCheck(this, MultiPoint);

    _this = _super.call(this, components);
    /**
     * @member {Array.<string>} [SuperMap.Geometry.MultiPoint.prototype.componentTypes=["SuperMap.Geometry.Point"]]
     * @description components å­å¨ççå ä½å¯¹è±¡ææ¯æçå ä½ç±»åæ°ç»ã
     * @readonly
     */

    _this.componentTypes = ["SuperMap.Geometry.Point"];
    _this.CLASS_NAME = "SuperMap.Geometry.MultiPoint";
    _this.geometryType = "MultiPoint";
    return _this;
  }
  /**
   * @function SuperMap.Geometry.MultiPoint.prototype.addPoint
   * @description æ·»å ç¹ï¼å°è£äº {@link SuperMap.Geometry.Collection|SuperMap.Geometry.Collection.addComponent} æ¹æ³ã
   * @param {SuperMap.Geometry.Point} point - æ·»å çç¹ã
   * @param {integer} [index] - ä¸æ ã
   */


  MultiPoint_createClass(MultiPoint, [{
    key: "addPoint",
    value: function addPoint(point, index) {
      this.addComponent(point, index);
    }
    /**
     * @function SuperMap.Geometry.MultiPoint.prototype.removePoint
     * @description ç§»é¤ç¹ï¼å°è£äº {@link SuperMap.Geometry.Collection|SuperMap.Geometry.Collection.removeComponent} æ¹æ³ã
     * @param {SuperMap.Geometry.Point} point - ç§»é¤çç¹å¯¹è±¡ã
     */

  }, {
    key: "removePoint",
    value: function removePoint(point) {
      this.removeComponent(point);
    }
  }]);

  return MultiPoint;
}(Collection);
SuperMap.Geometry.MultiPoint = MultiPoint;
// CONCATENATED MODULE: ./src/common/commontypes/geometry/Curve.js
function Curve_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Curve_typeof = function _typeof(obj) { return typeof obj; }; } else { Curve_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Curve_typeof(obj); }

function Curve_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Curve_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Curve_setPrototypeOf(subClass, superClass); }

function Curve_setPrototypeOf(o, p) { Curve_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Curve_setPrototypeOf(o, p); }

function Curve_createSuper(Derived) { var hasNativeReflectConstruct = Curve_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Curve_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Curve_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Curve_possibleConstructorReturn(this, result); }; }

function Curve_possibleConstructorReturn(self, call) { if (call && (Curve_typeof(call) === "object" || typeof call === "function")) { return call; } return Curve_assertThisInitialized(self); }

function Curve_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Curve_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Curve_getPrototypeOf(o) { Curve_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Curve_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.Geometry.Curve
 * @classdesc å ä½å¯¹è±¡æ²çº¿ç±»ã
 * @category BaseTypes Geometry
 * @extends {SuperMap.Geometry.MultiPoint}
 * @param {Array.<SuperMap.Geometry.Point>} components - å ä½å¯¹è±¡æ°ç»ã
 * @example
 * var point1 = new SuperMap.Geometry.Point(10,20);
 * var point2 = new SuperMap.Geometry.Point(30,40);
 * var curve = new SuperMap.Geometry.Curve([point1,point2]);
 */

var Curve = /*#__PURE__*/function (_MultiPoint) {
  Curve_inherits(Curve, _MultiPoint);

  var _super = Curve_createSuper(Curve);

  function Curve(components) {
    var _this;

    Curve_classCallCheck(this, Curve);

    _this = _super.call(this, components);
    /**
     * @member {Array.<string>} [SuperMap.Geometry.Curve.prototype.componentType=["SuperMap.Geometry.Point", "SuperMap.PointWithMeasure"]]
     * @description components å­å¨ççå ä½å¯¹è±¡ææ¯æçå ä½ç±»åæ°ç»ã
     * @readonly
     */

    _this.componentTypes = ["SuperMap.Geometry.Point", "SuperMap.PointWithMeasure"];
    _this.CLASS_NAME = "SuperMap.Geometry.Curve";
    _this.geometryType = "Curve";
    return _this;
  }

  return Curve;
}(MultiPoint);
SuperMap.Geometry.Curve = Curve;
// CONCATENATED MODULE: ./src/common/commontypes/geometry/Point.js
function Point_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Point_typeof = function _typeof(obj) { return typeof obj; }; } else { Point_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Point_typeof(obj); }

function Point_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Point_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Point_createClass(Constructor, protoProps, staticProps) { if (protoProps) Point_defineProperties(Constructor.prototype, protoProps); if (staticProps) Point_defineProperties(Constructor, staticProps); return Constructor; }

function Point_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { Point_get = Reflect.get; } else { Point_get = function _get(target, property, receiver) { var base = Point_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return Point_get(target, property, receiver || target); }

function Point_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = Point_getPrototypeOf(object); if (object === null) break; } return object; }

function Point_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Point_setPrototypeOf(subClass, superClass); }

function Point_setPrototypeOf(o, p) { Point_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Point_setPrototypeOf(o, p); }

function Point_createSuper(Derived) { var hasNativeReflectConstruct = Point_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Point_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Point_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Point_possibleConstructorReturn(this, result); }; }

function Point_possibleConstructorReturn(self, call) { if (call && (Point_typeof(call) === "object" || typeof call === "function")) { return call; } return Point_assertThisInitialized(self); }

function Point_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Point_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Point_getPrototypeOf(o) { Point_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Point_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.Geometry.Point
 * @classdesc ç¹å ä½å¯¹è±¡ç±»ã
 * @category BaseTypes Geometry
 * @extends {SuperMap.Geometry}
 * @param {float} x - x åæ ã
 * @param {float} y - y åæ ã
 * @param {string} [type = 'Point'] - ç¨æ¥å­å¨ç¹çç±»åã
 * @param {float} [tag] - ç¨æ¥å­å¨é¢å¤çå±æ§ï¼æ¯å¦å·®å¼åæä¸­ç Z å¼ã
 * @example
 * var point = new SuperMap.Geometry.Point(-111.04, 45.68);
 */

var Point = /*#__PURE__*/function (_Geometry) {
  Point_inherits(Point, _Geometry);

  var _super = Point_createSuper(Point);

  function Point(x, y, type, tag) {
    var _this;

    Point_classCallCheck(this, Point);

    _this = _super.call(this, x, y, type, tag);
    /**
     * @member {float} SuperMap.Geometry.Point.prototype.x
     * @description æ¨ªåæ ã
     */

    _this.x = parseFloat(x);
    /**
     * @member {float} SuperMap.Geometry.Point.prototype.y
     * @description çºµåæ ã
     */

    _this.y = parseFloat(y);
    /**
     * @member {string} SuperMap.Geometry.Point.prototype.tag
     * @description  ç¨æ¥å­å¨é¢å¤çå±æ§ï¼æ¯å¦å·®å¼åæä¸­ç Z å¼ã
     */

    _this.tag = tag || tag == 0 ? parseFloat(tag) : null;
    /**
     * @member {string} SuperMap.Geometry.Point.prototype.tag
     * @description  ç¨æ¥å­å¨ç¹çç±»å
     */

    _this.type = type || "Point";
    _this.CLASS_NAME = "SuperMap.Geometry.Point";
    _this.geometryType = "Point";
    return _this;
  }
  /**
   * @function SuperMap.Geometry.Point.prototype.clone
   * @description åéç¹å¯¹è±¡ã
   * @returns {SuperMap.Geometry.Point} åéåçç¹å¯¹è±¡ã
   */


  Point_createClass(Point, [{
    key: "clone",
    value: function clone(obj) {
      if (obj == null) {
        obj = new Point(this.x, this.y);
      } // catch any randomly tagged-on properties


      Util.applyDefaults(obj, this);
      return obj;
    }
    /**
     * @function SuperMap.Geometry.Point.prototype.calculateBounds
     * @description è®¡ç®ç¹å¯¹è±¡çèå´ã
     */

  }, {
    key: "calculateBounds",
    value: function calculateBounds() {
      this.bounds = new Bounds(this.x, this.y, this.x, this.y);
    }
    /**
     * @function SuperMap.Geometry.Point.prototype.equals
     * @description å¤æ­ä¸¤ä¸ªç¹å¯¹è±¡æ¯å¦ç¸ç­ãå¦æä¸¤ä¸ªç¹å¯¹è±¡å·æç¸åçåæ ï¼åè®¤ä¸ºæ¯ç¸ç­çã
     * @example
     * var point= new SuperMap.Geometry.Point(0,0);
     * var point1={x:0,y:0};
     * var result= point.equals(point1);
     * @param {SuperMap.Geometry.Point} geom - éè¦å¤æ­çç¹å¯¹è±¡ã
     * @returns {boolean} ä¸¤ä¸ªç¹å¯¹è±¡æ¯å¦ç¸ç­ï¼true ä¸ºç¸ç­ï¼false ä¸ºä¸ç­ï¼ã
     */

  }, {
    key: "equals",
    value: function equals(geom) {
      var equals = false;

      if (geom != null) {
        equals = this.x === geom.x && this.y === geom.y || isNaN(this.x) && isNaN(this.y) && isNaN(geom.x) && isNaN(geom.y);
      }

      return equals;
    }
    /**
     * @function SuperMap.Geometry.Point.prototype.move
     * @description æ²¿ç xãy è½´çæ­£æ¹åä¸æç§ç»å®çä½ç§»ç§»å¨ç¹å¯¹è±¡ï¼move ä¸ä»æ¹åäºå ä½å¯¹è±¡çä½ç½®å¹¶ä¸æ¸çäºè¾¹çç¼å­ã
     * @param {float} x - x è½´æ­£æ¹åä¸çåç§»éã
     * @param {float} y - y è½´æ­£æ¹åä¸åç§»éã
     */

  }, {
    key: "move",
    value: function move(x, y) {
      this.x = this.x + x;
      this.y = this.y + y;
      this.clearBounds();
    }
    /**
     * @function SuperMap.Geometry.Point.prototype.toShortString
     * @returns {string} å­ç¬¦ä¸²ä»£è¡¨ç¹å¯¹è±¡ã(ex. <i>"5, 42"</i>)
     */

  }, {
    key: "toShortString",
    value: function toShortString() {
      return this.x + ", " + this.y;
    }
    /**
     * @function SuperMap.Geometry.Point.prototype.destroy
     * @description éæ¾ç¹å¯¹è±¡çèµæºã
     */

  }, {
    key: "destroy",
    value: function destroy() {
      this.x = null;
      this.y = null;
      this.tag = null;

      Point_get(Point_getPrototypeOf(Point.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.Geometry.Point.prototype.getVertices
     * @description è¿åç¹å¯¹è±¡çææé¡¶ç¹çåè¡¨ã
     * @param {boolean} [nodes] - å¯¹äºç¹å¯¹è±¡æ­¤åæ°ä¸èµ·ä½ç¨ï¼ç´æ¥è¿åç¹ã
     * @returns {Array} å ä½å¾å½¢çé¡¶ç¹åè¡¨ã
     */

  }, {
    key: "getVertices",
    value: function getVertices(nodes) {
      // eslint-disable-line no-unused-vars
      return [this];
    }
  }]);

  return Point;
}(Geometry);
SuperMap.Geometry.Point = Point;
// CONCATENATED MODULE: ./src/common/commontypes/geometry/LineString.js
function LineString_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { LineString_typeof = function _typeof(obj) { return typeof obj; }; } else { LineString_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return LineString_typeof(obj); }

function LineString_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function LineString_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function LineString_createClass(Constructor, protoProps, staticProps) { if (protoProps) LineString_defineProperties(Constructor.prototype, protoProps); if (staticProps) LineString_defineProperties(Constructor, staticProps); return Constructor; }

function LineString_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { LineString_get = Reflect.get; } else { LineString_get = function _get(target, property, receiver) { var base = LineString_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return LineString_get(target, property, receiver || target); }

function LineString_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = LineString_getPrototypeOf(object); if (object === null) break; } return object; }

function LineString_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) LineString_setPrototypeOf(subClass, superClass); }

function LineString_setPrototypeOf(o, p) { LineString_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return LineString_setPrototypeOf(o, p); }

function LineString_createSuper(Derived) { var hasNativeReflectConstruct = LineString_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = LineString_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = LineString_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return LineString_possibleConstructorReturn(this, result); }; }

function LineString_possibleConstructorReturn(self, call) { if (call && (LineString_typeof(call) === "object" || typeof call === "function")) { return call; } return LineString_assertThisInitialized(self); }

function LineString_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function LineString_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function LineString_getPrototypeOf(o) { LineString_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return LineString_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.Geometry.LineString
 * @classdesc å ä½å¯¹è±¡çº¿ä¸²ç±»ã
 * @category BaseTypes Geometry
 * @param {Array.<SuperMap.Geometry.Point>} points - ç¨æ¥çæçº¿ä¸²çç¹æ°ç»ã
 * @extends {SuperMap.Geometry.Curve}
 * @example
 * var points = [new SuperMap.Geometry.Point(4933.319287022352, -3337.3849141502124),
 *     new SuperMap.Geometry.Point(4960.9674060199022, -3349.3316322355736),
 *     new SuperMap.Geometry.Point(5006.0235999418364, -3358.8890067038628),
 *     new SuperMap.Geometry.Point(5075.3145648369318, -3378.0037556404409),
 *     new SuperMap.Geometry.Point(5305.19551436013, -3376.9669111768926)],
 * var roadLine = new SuperMap.Geometry.LineString(points)ï¼
 */

var LineString = /*#__PURE__*/function (_Curve) {
  LineString_inherits(LineString, _Curve);

  var _super = LineString_createSuper(LineString);

  function LineString(points) {
    var _this;

    LineString_classCallCheck(this, LineString);

    _this = _super.call(this, points);
    _this.CLASS_NAME = "SuperMap.Geometry.LineString";
    _this.geometryType = "LineString";
    return _this;
  }
  /**
   * @function SuperMap.Geometry.LineString.prototype.removeComponent
   * @description åªæå¨çº¿ä¸²ä¸æä¸ä¸ªææ´å¤çç¹çæ¶åï¼æä¼åè®¸ç§»é¤ç¹ï¼å¦åç»æå°ä¼æ¯åä¸çç¹ï¼ã
   * @param {SuperMap.Geometry.Point} point - å°è¢«å é¤çç¹ã
   * @returns {boolean} å é¤çç¹ã
   */


  LineString_createClass(LineString, [{
    key: "removeComponent",
    value: function removeComponent(point) {
      // eslint-disable-line no-unused-vars
      var removed = this.components && this.components.length > 2;

      if (removed) {
        LineString_get(LineString_getPrototypeOf(LineString.prototype), "removeComponent", this).apply(this, arguments);
      }

      return removed;
    }
    /**
     * @function SuperMap.Geometry.LineString.prototype.getSortedSegments
     * @returns {Array} An array of segment objects.  Segment objects have properties
     *     x1, y1, x2, and y2.  The start point is represented by x1 and y1.
     *     The end point is represented by x2 and y2.  Start and end are
     *     ordered so that x1 < x2.
     */

  }, {
    key: "getSortedSegments",
    value: function getSortedSegments() {
      var numSeg = this.components.length - 1;
      var segments = new Array(numSeg),
          point1,
          point2;

      for (var i = 0; i < numSeg; ++i) {
        point1 = this.components[i];
        point2 = this.components[i + 1];

        if (point1.x < point2.x) {
          segments[i] = {
            x1: point1.x,
            y1: point1.y,
            x2: point2.x,
            y2: point2.y
          };
        } else {
          segments[i] = {
            x1: point2.x,
            y1: point2.y,
            x2: point1.x,
            y2: point1.y
          };
        }
      } // more efficient to define this somewhere static


      function byX1(seg1, seg2) {
        return seg1.x1 - seg2.x1;
      }

      return segments.sort(byX1);
    }
    /**
     * @function SuperMap.Geometry.LineString.prototype.getVertices
     * @description è¿åå ä½å¾å½¢çææé¡¶ç¹çåè¡¨ã
     * @param {boolean} [nodes] - å¯¹äºçº¿æ¥è¯´ï¼ä»ä»è¿åä½ä¸ºç«¯ç¹çé¡¶ç¹ï¼å¦æè®¾ä¸º falseï¼åè¿åéç«¯ç¹çé¡¶ç¹ãå¦ææ²¡æè®¾ç½®æ­¤åæ°ï¼åè¿åææé¡¶ç¹ã
     * @returns {Array} å ä½å¾å½¢çé¡¶ç¹åè¡¨ã
     */

  }, {
    key: "getVertices",
    value: function getVertices(nodes) {
      var vertices;

      if (nodes === true) {
        vertices = [this.components[0], this.components[this.components.length - 1]];
      } else if (nodes === false) {
        vertices = this.components.slice(1, this.components.length - 1);
      } else {
        vertices = this.components.slice();
      }

      return vertices;
    }
    /**
     * @function SuperMap.Geometry.LineString.calculateCircle
     * @description ä¸ç¹ç»åå¼§ã
     * @param {Array.<SuperMap.Geometry.Point>} points - ä¼ å¥çå¾è®¡ç®çåå§ç¹ä¸²ã
     * @returns {Array.<SuperMap.Geometry.Point>} è®¡ç®åºç¸åºçåå¼§æ§å¶ç¹ã
     * @example
     * var points = [];
     * points.push(new SuperMap.Geometry.Point(-50,30));
     * points.push(new SuperMap.Geometry.Point(-30,50));
     * points.push(new SuperMap.Geometry.Point(2,60));
     * var circle = SuperMap.Geometry.LineString.calculateCircle(points);
     */

  }], [{
    key: "calculateCircle",
    value: function calculateCircle(points) {
      if (points.length < 3) {
        return points;
      }

      var centerPoint = {},
          p1 = points[0],
          p2 = points[1],
          p3 = points[2];
      var R = 0,
          dStep = 0,
          direc = true,
          dRotation = 0,
          dRotationBegin = 0,
          dRotationAngle = 0,
          nSegmentCount = 72,
          circlePoints = [];
      var KTan13 = (p3.y - p1.y) / (p3.x - p1.x);
      var B13 = p3.y - KTan13 * p3.x;

      if (p3.x != p1.x && p3.y != p1.y && p2.y == KTan13 * p2.x + B13 || p3.x == p1.x && p2.x == p1.x || p3.y == p1.y && p2.y == p1.y || p3.x == p1.x && p3.y == p1.y || p3.x == p2.x && p3.y == p2.y || p1.x == p2.x && p1.y == p2.y) {
        circlePoints.push(p1);
        circlePoints.push(p2);
        circlePoints.push(p3);
      } else {
        var D = (p2.x * p2.x + p2.y * p2.y - (p1.x * p1.x + p1.y * p1.y)) * (2 * (p3.y - p1.y)) - (p3.x * p3.x + p3.y * p3.y - (p1.x * p1.x + p1.y * p1.y)) * (2 * (p2.y - p1.y));
        var E = 2 * (p2.x - p1.x) * (p3.x * p3.x + p3.y * p3.y - (p1.x * p1.x + p1.y * p1.y)) - 2 * (p3.x - p1.x) * (p2.x * p2.x + p2.y * p2.y - (p1.x * p1.x + p1.y * p1.y));
        var F = 4 * ((p2.x - p1.x) * (p3.y - p1.y) - (p3.x - p1.x) * (p2.y - p1.y));
        centerPoint.x = D / F;
        centerPoint.y = E / F;
        R = Math.sqrt((p1.x - centerPoint.x) * (p1.x - centerPoint.x) + (p1.y - centerPoint.y) * (p1.y - centerPoint.y));
        var dis = (p1.x - p3.x) * (p1.x - p3.x) + (p1.y - p3.y) * (p1.y - p3.y);
        var cons = (2 * R * R - dis) / (2 * R * R);
        cons = cons >= 1 ? 1 : cons;
        cons = cons <= -1 ? -1 : cons;
        dRotationAngle = Math.acos(cons) * 180 / Math.PI;

        if (p3.x == p1.x) {
          dRotationAngle = centerPoint.x > p1.x && p2.x > p1.x || centerPoint.x < p1.x && p2.x < p1.x ? 360 - dRotationAngle : dRotationAngle;
        } else {
          dRotationAngle = centerPoint.y > KTan13 * centerPoint.x + B13 && p2.y > KTan13 * p2.x + B13 || centerPoint.y < KTan13 * centerPoint.x + B13 && p2.y < KTan13 * p2.x + B13 ? 360 - dRotationAngle : dRotationAngle;
        }

        dStep = dRotationAngle / 72;

        if (p3.y != p1.y) {
          if (p3.x == p1.x) {
            if (p3.y > p1.y) {
              if (p2.x < p1.x) {
                direc = false;
              }
            } else {
              if (p2.x > p1.x) {
                direc = false;
              }
            }
          } else if (p3.x < p1.x) {
            if (p2.y < KTan13 * p2.x + B13) {
              direc = false;
            }
          } else {
            if (p2.y > KTan13 * p2.x + B13) {
              direc = false;
            }
          }
        } else {
          if (p3.x > p1.x) {
            if (p2.y > p1.y) {
              direc = false;
            }
          } else {
            if (p2.y < p1.y) {
              direc = false;
            }
          }
        }

        var K10 = (p1.y - centerPoint.y) / (p1.x - centerPoint.x);
        var atan10 = K10 >= 0 ? Math.atan(K10) * 180 / Math.PI : Math.abs(Math.atan(K10) * 180 / Math.PI) + 90;
        var CY = Math.abs(centerPoint.y);

        if (p1.y == CY && CY == p3.y) {
          if (p1.x < p3.x) {
            atan10 = atan10 + 180;
          }
        }

        var newPY = p1.y - centerPoint.y;
        circlePoints.push(p1);

        for (var i = 1; i < nSegmentCount; i++) {
          dRotation = dStep * i;
          dRotationBegin = atan10;

          if (direc) {
            if (newPY >= 0) {
              if (K10 >= 0) {
                dRotationBegin = dRotationBegin + dRotation;
              } else {
                dRotationBegin = 180 - (dRotationBegin - 90) + dRotation;
              }
            } else {
              if (K10 > 0) {
                dRotationBegin = dRotationBegin - 180 + dRotation;
              } else {
                dRotationBegin = 90 - dRotationBegin + dRotation;
              }
            }
          } else {
            if (newPY >= 0) {
              if (K10 >= 0) {
                dRotationBegin = dRotationBegin - dRotation;
              } else {
                dRotationBegin = 180 - (dRotationBegin - 90) - dRotation;
              }
            } else {
              if (K10 >= 0) {
                dRotationBegin = dRotationBegin - 180 - dRotation;
              } else {
                dRotationBegin = 90 - dRotationBegin - dRotation;
              }
            }
          }

          dRotationBegin = dRotationBegin * Math.PI / 180;
          var x = centerPoint.x + R * Math.cos(dRotationBegin);
          var y = centerPoint.y + R * Math.sin(dRotationBegin);
          circlePoints.push(new Point(x, y));
        }

        circlePoints.push(p3);
      }

      return circlePoints;
    }
    /**
     * @function SuperMap.Geometry.LineString.createLineEPS
     * @description æ ¹æ®ç¹çç±»åç»åºä¸åç±»åçæ²çº¿ã
     * ç¹çç±»åæä¸ç§ï¼LTypeArcï¼LTypeCurveï¼NONEã
     * @param {Array.<SuperMap.Geometry.Point>} points - ä¼ å¥çå¾è®¡ç®çåå§ç¹ä¸²ã
     * @returns {Array.<SuperMap.Geometry.Point>} è®¡ç®åºç¸åºç lineEPS æ§å¶ç¹ã
     * @example
     * var points = [];
     * points.push(new SuperMap.Geometry.Point(-50,30));
     * points.push(new SuperMap.Geometry.Point(-30,50,"LTypeArc"));
     * points.push(new SuperMap.Geometry.Point(2,60));
     * points.push(new SuperMap.Geometry.Point(8,20));
     * var lineEPS = SuperMap.Geometry.LineString.createLineEPS(points);
     */

  }, {
    key: "createLineEPS",
    value: function createLineEPS(points) {
      var list = [],
          len = points.length;

      if (len < 2) {
        return points;
      }

      for (var i = 0; i < len;) {
        var type = points[i].type;

        if (type == 'LTypeArc') {
          var listObj = LineString.createLineArc(list, i, len, points);
          list = listObj[0];
          i = listObj[1];
        } else {
          list.push(points[i]);
          i++;
        }
      }

      return list;
    }
  }, {
    key: "createLineArc",
    value: function createLineArc(list, i, len, points) {
      if (i == 0) {
        var bezierPtsObj = LineString.addPointEPS(points, i, len, 'LTypeArc');
        Array.prototype.push.apply(list, bezierPtsObj[0]);
        i = bezierPtsObj[1] + 1;
      } else if (i == len - 1) {
        var bezierP = [points[i - 1], points[i]],
            bezierPts = LineString.calculateCircle(bezierP);
        Array.prototype.push.apply(list, bezierPts);
        i++;
      } else {
        var _bezierPtsObj = LineString.addPointEPS(points, i, len, 'LTypeArc');

        list.pop();
        Array.prototype.push.apply(list, _bezierPtsObj[0]);
        i = _bezierPtsObj[1] + 1;
      }

      return [list, i];
    }
  }, {
    key: "addPointEPS",
    value: function addPointEPS(points, i, len, type) {
      var bezierP = [],
          j = i + 1;

      if (i == 0) {
        Array.prototype.push.apply(bezierP, [points[i], points[i + 1]]);
      } else if (i == len - 1) {
        Array.prototype.push.apply(bezierP, [points[i - 1], points[i]]);
      } else {
        Array.prototype.push.apply(bezierP, [points[i - 1], points[i], points[i + 1]]);
      }

      var bezierPts;

      if (type == 'LTypeCurve') {
        bezierPts = LineString.calculatePointsFBZN(bezierP);
      } else if (type == 'LTypeArc') {
        bezierPts = LineString.calculateCircle(bezierP);
      }

      return [bezierPts, j];
    }
  }]);

  return LineString;
}(Curve);
SuperMap.Geometry.LineString = LineString;
// CONCATENATED MODULE: ./src/common/commontypes/geometry/GeoText.js
function GeoText_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GeoText_typeof = function _typeof(obj) { return typeof obj; }; } else { GeoText_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GeoText_typeof(obj); }

function GeoText_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GeoText_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GeoText_createClass(Constructor, protoProps, staticProps) { if (protoProps) GeoText_defineProperties(Constructor.prototype, protoProps); if (staticProps) GeoText_defineProperties(Constructor, staticProps); return Constructor; }

function GeoText_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GeoText_get = Reflect.get; } else { GeoText_get = function _get(target, property, receiver) { var base = GeoText_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GeoText_get(target, property, receiver || target); }

function GeoText_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GeoText_getPrototypeOf(object); if (object === null) break; } return object; }

function GeoText_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GeoText_setPrototypeOf(subClass, superClass); }

function GeoText_setPrototypeOf(o, p) { GeoText_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GeoText_setPrototypeOf(o, p); }

function GeoText_createSuper(Derived) { var hasNativeReflectConstruct = GeoText_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GeoText_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GeoText_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GeoText_possibleConstructorReturn(this, result); }; }

function GeoText_possibleConstructorReturn(self, call) { if (call && (GeoText_typeof(call) === "object" || typeof call === "function")) { return call; } return GeoText_assertThisInitialized(self); }

function GeoText_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GeoText_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GeoText_getPrototypeOf(o) { GeoText_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GeoText_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/








/**
 * @class SuperMap.Geometry.GeoText
 * @classdesc ææ¬æ ç­¾ç±»ã
 * @category BaseTypes Geometry
 * @extends {SuperMap.Geometry}
 * @param {float} x - x åæ ã
 * @param {float} y - y åæ ã
 * @param {string} text - æ ç­¾ä¸­çææ¬åå®¹ã
 */

var GeoText = /*#__PURE__*/function (_Geometry) {
  GeoText_inherits(GeoText, _Geometry);

  var _super = GeoText_createSuper(GeoText);

  function GeoText(x, y, text) {
    var _this;

    GeoText_classCallCheck(this, GeoText);

    _this = _super.call(this, x, y, text);
    /**
     * @member {float} SuperMap.Geometry.GeoText.prototype.x
     * @description æ¨ªåæ ã
     */

    _this.x = parseFloat(x);
    /**
     * @member {float} SuperMap.Geometry.GeoText.prototype.y
     * @description çºµåæ ã
     */

    _this.y = parseFloat(y);
    /**
     * @member {string} SuperMap.Geometry.GeoText.prototype.text
     * @description æ ç­¾ä¸­çææ¬åå®¹ã
     */

    _this.text = text.toString();
    /**
     * @member {Object} SuperMap.Geometry.GeoText.prototype.bsInfo
     * @description æ ç­¾èå´çåºç¡ä¿¡æ¯ã
     * @property {number} w - bounds çå®½ã
     * @property {number} h - bounds çé«åº¦ã
     */

    _this.bsInfo = {
      "h": null,
      "w": null
    };
    _this.element = document.createElement('span');
    _this.CLASS_NAME = "SuperMap.Geometry.GeoText";
    _this.geometryType = "GeoText";
    return _this;
  }
  /**
   * @function SuperMap.Geometry.GeoText.prototype.destroy
   * @description éæ¯ææ¬æ ç­¾ç±»ã
   */


  GeoText_createClass(GeoText, [{
    key: "destroy",
    value: function destroy() {
      GeoText_get(GeoText_getPrototypeOf(GeoText.prototype), "destroy", this).call(this);

      this.x = null;
      this.y = null;
      this.text = null;
    }
    /**
     * @function SuperMap.Geometry.GeoText.prototype.getCentroid
     * @description è·åæ ç­¾å¯¹è±¡çè´¨å¿ã
     * @returns {SuperMap.Geometry.Point} æ ç­¾å¯¹è±¡çè´¨å¿ã
     */

  }, {
    key: "getCentroid",
    value: function getCentroid() {
      return new Point(this.x, this.y);
    }
    /**
     * @function SuperMap.Geometry.GeoText.prototype.clone
     * @description åéæ ç­¾å¯¹è±¡ã
     * @returns {SuperMap.Geometry.GeoText} åéåçæ ç­¾å¯¹è±¡ã
     */

  }, {
    key: "clone",
    value: function clone(obj) {
      if (obj == null) {
        obj = new GeoText(this.x, this.y, this.text);
      }

      Util.applyDefaults(obj, this);
      return obj;
    }
    /**
     * @function SuperMap.Geometry.GeoText.prototype.calculateBounds
     * @description è®¡ç®æ ç­¾å¯¹è±¡çèå´ã
     */

  }, {
    key: "calculateBounds",
    value: function calculateBounds() {
      this.bounds = new Bounds(this.x, this.y, this.x, this.y);
    }
    /**
     * @function SuperMap.Geometry.GeoText.prototype.getLabelPxBoundsByLabel
     * @description æ ¹æ®ç»å¶å¥½çæ ç­¾è·åæå­æ ç­¾çåç´ èå´ï¼åæ°çåä½æ¯åç´ ï¼æ­¤æ¹æ³ç¸å¯¹äº getLabelPxBoundsByText æçè¾ä½ï¼ä½æ¯ææææ ¼å¼çææ¬ã
     * @param {Object} locationPixel - æ ç­¾çä½ç½®ç¹ï¼è¯¥å¯¹è±¡å«æå±æ§ xï¼æ¨ªåæ ï¼ï¼å±æ§ yï¼çºµåæ ï¼ã
     * @param {string} labelWidth - æ ç­¾çå®½åº¦ï¼å¦ï¼â90pxâã
     * @param {string} labelHeight - æ ç­¾çé«åº¦ã
     * @param {Object} style - æ ç­¾ç styleã
     * @returns {SuperMap.Bounds} æ ç­¾çåç´ èå´ã
     */

  }, {
    key: "getLabelPxBoundsByLabel",
    value: function getLabelPxBoundsByLabel(locationPixel, labelWidth, labelHeight, style) {
      var labelPxBounds, left, bottom, top, right;
      var locationPx = Util.cloneObject(locationPixel); //è®¡ç®ææ¬è¡æ°

      var theText = style.label || this.text;
      var textRows = theText.split('\n');
      var laberRows = textRows.length; //å¤çæå­å¯¹é½

      labelWidth = parseFloat(labelWidth);
      labelHeight = parseFloat(labelHeight);

      if (laberRows > 1) {
        labelHeight = parseFloat(labelHeight) * laberRows;
      }

      if (style.labelAlign && style.labelAlign !== "cm") {
        switch (style.labelAlign) {
          case "lt":
            locationPx.x += labelWidth / 2;
            locationPx.y += labelHeight / 2;
            break;

          case "lm":
            locationPx.x += labelWidth / 2;
            break;

          case "lb":
            locationPx.x += labelWidth / 2;
            locationPx.y -= labelHeight / 2;
            break;

          case "ct":
            locationPx.y += labelHeight / 2;
            break;

          case "cb":
            locationPx.y -= labelHeight / 2;
            break;

          case "rt":
            locationPx.x -= labelWidth / 2;
            locationPx.y += labelHeight / 2;
            break;

          case "rm":
            locationPx.x -= labelWidth / 2;
            break;

          case "rb":
            locationPx.x -= labelWidth / 2;
            locationPx.y -= labelHeight / 2;
            break;

          default:
            break;
        }
      }

      this.bsInfo.h = labelHeight;
      this.bsInfo.w = labelWidth; //boundsçåè¾¹

      left = locationPx.x - parseFloat(labelWidth) / 2;
      bottom = locationPx.y + parseFloat(labelHeight) / 2;
      right = locationPx.x + parseFloat(labelWidth) / 2;
      top = locationPx.y - parseFloat(labelHeight) / 2;
      labelPxBounds = new Bounds(left, bottom, right, top);
      return labelPxBounds;
    }
    /**
     * @function SuperMap.Geometry.GeoText.prototype.getLabelPxBoundsByText
     * @description æ ¹æ®ææ¬åå®¹è·åæå­æ ç­¾çåç´ èå´ã
     * @param {Object} locationPixel - æ ç­¾çä½ç½®ç¹ï¼è¯¥å¯¹è±¡å«æå±æ§ xï¼æ¨ªåæ ï¼ï¼å±æ§ yï¼çºµåæ ï¼ã
     * @param {Object} style - æ ç­¾çæ ·å¼ã
     * @returns {SuperMap.Bounds} æ ç­¾çåç´ èå´ã
     */

  }, {
    key: "getLabelPxBoundsByText",
    value: function getLabelPxBoundsByText(locationPixel, style) {
      var labelPxBounds, left, bottom, top, right;
      var labelSize = this.getLabelPxSize(style);
      var locationPx = Util.cloneObject(locationPixel); //å¤çæå­å¯¹é½

      if (style.labelAlign && style.labelAlign !== "cm") {
        switch (style.labelAlign) {
          case "lt":
            locationPx.x += labelSize.w / 2;
            locationPx.y += labelSize.h / 2;
            break;

          case "lm":
            locationPx.x += labelSize.w / 2;
            break;

          case "lb":
            locationPx.x += labelSize.w / 2;
            locationPx.y -= labelSize.h / 2;
            break;

          case "ct":
            locationPx.y += labelSize.h / 2;
            break;

          case "cb":
            locationPx.y -= labelSize.h / 2;
            break;

          case "rt":
            locationPx.x -= labelSize.w / 2;
            locationPx.y += labelSize.h / 2;
            break;

          case "rm":
            locationPx.x -= labelSize.w / 2;
            break;

          case "rb":
            locationPx.x -= labelSize.w / 2;
            locationPx.y -= labelSize.h / 2;
            break;

          default:
            break;
        }
      }

      this.bsInfo.h = labelSize.h;
      this.bsInfo.w = labelSize.w;
      left = locationPx.x - labelSize.w / 2;
      bottom = locationPx.y + labelSize.h / 2; //å¤çæä½å­

      if (style.fontStyle && style.fontStyle === "italic") {
        right = locationPx.x + labelSize.w / 2 + parseInt(parseFloat(style.fontSize) / 2);
      } else {
        right = locationPx.x + labelSize.w / 2;
      }

      top = locationPx.y - labelSize.h / 2;
      labelPxBounds = new Bounds(left, bottom, right, top);
      return labelPxBounds;
    }
    /**
     * @function SuperMap.Geometry.GeoText.prototype.getLabelPxSize
     * @description è·å label çåç´ å¤§å°ã
     * @param {Object} style - æ ç­¾æ ·å¼ã
     * @returns {Object} æ ç­¾å¤§å°å¯¹è±¡ï¼å±æ§ w è¡¨ç¤ºæ ç­¾çå®½åº¦ï¼å±æ§ h è¡¨ç¤ºæ ç­¾çé«åº¦ã
     */

  }, {
    key: "getLabelPxSize",
    value: function getLabelPxSize(style) {
      var text,
          //ææ¬åå®¹
      fontSize,
          //å­ä½å¤§å°
      spacing = 1,
          //ä¸¤ä¸ªå­ç¬¦é´çé´è·ï¼åä½ï¼pxï¼
      lineSpacing = 0.2,
          bgstrokeWidth = parseFloat(style.strokeWidth); //æ ç­¾èæ¯æ¡è¾¹æ¡çå®½åº¦

      text = style.label || this.text;

      if (style.fontSize) {
        fontSize = parseFloat(style.fontSize);
      } else {
        fontSize = parseFloat("12px");
      } //æ ç­¾å®½é«


      var labelW, labelH;
      var textRows = text.split('\n');
      var numRows = textRows.length;

      if (numRows > 1) {
        labelH = fontSize * numRows + numRows + bgstrokeWidth + lineSpacing * fontSize;
      } else {
        labelH = fontSize + bgstrokeWidth + lineSpacing * fontSize + 1;
      } //åæå¤§å®½åº¦


      labelW = 0;

      if (this.labelWTmp && labelW < this.labelWTmp) {
        labelW = this.labelWTmp;
      }

      for (var i = 0; i < numRows; i++) {
        var textCharC = this.getTextCount(textRows[i]);
        var labelWTmp = this.labelWTmp = Util.getTextBounds(style, textRows[i], this.element).textWidth + textCharC.textC * spacing + bgstrokeWidth;

        if (labelW < labelWTmp) {
          labelW = labelWTmp;
        }
      }

      var labelSize = new Object(); //æ ç­¾å¤§å°

      labelSize.h = labelH;
      labelSize.w = labelW;
      return labelSize;
    }
    /**
     * @function SuperMap.Geometry.GeoText.prototype.getTextCount
     * @description è·å text ä¸­çå­ç¬¦ä¸ªæ°ã
     * @param {string} text - å­ç¬¦ä¸²ã
     * @returns {Object} å­ç¬¦ä¸ªæ°ç»è®¡ç»æï¼å±æ§ cnC è¡¨ç¤ºä¸­æå­ç¬¦ä¸ªæ°ï¼å±æ§ enC è¡¨ç¤ºè±æå­ç¬¦ä¸ªæ°ï¼å±æ§ textC è¡¨ç¤ºå­ç¬¦æ»ä¸ªæ°ã
     */

  }, {
    key: "getTextCount",
    value: function getTextCount(text) {
      var textCharCount = {};
      var cnCount = 0;
      var enCount = 0;

      for (var i = 0; i < text.length; i++) {
        if (text.charCodeAt(i) > 255) {
          //éåå¤æ­å­ç¬¦ä¸²ä¸­æ¯ä¸ªå­ç¬¦çUnicodeç ,å¤§äº255åä¸ºä¸­æ
          cnCount++;
        } else {
          enCount++;
        }
      } //ä¸­åå­ç¬¦ä¸ªæ°


      textCharCount.cnC = cnCount; //è±æå­ç¬¦ä¸ªæ°

      textCharCount.enC = enCount; //å­ç¬¦æ»ä¸ªæ°

      textCharCount.textC = text.length;
      return textCharCount;
    }
  }]);

  return GeoText;
}(Geometry);
SuperMap.Geometry.GeoText = GeoText;
// CONCATENATED MODULE: ./src/common/commontypes/geometry/LinearRing.js
function LinearRing_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { LinearRing_typeof = function _typeof(obj) { return typeof obj; }; } else { LinearRing_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return LinearRing_typeof(obj); }

function LinearRing_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function LinearRing_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function LinearRing_createClass(Constructor, protoProps, staticProps) { if (protoProps) LinearRing_defineProperties(Constructor.prototype, protoProps); if (staticProps) LinearRing_defineProperties(Constructor, staticProps); return Constructor; }

function LinearRing_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { LinearRing_get = Reflect.get; } else { LinearRing_get = function _get(target, property, receiver) { var base = LinearRing_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return LinearRing_get(target, property, receiver || target); }

function LinearRing_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = LinearRing_getPrototypeOf(object); if (object === null) break; } return object; }

function LinearRing_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) LinearRing_setPrototypeOf(subClass, superClass); }

function LinearRing_setPrototypeOf(o, p) { LinearRing_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return LinearRing_setPrototypeOf(o, p); }

function LinearRing_createSuper(Derived) { var hasNativeReflectConstruct = LinearRing_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = LinearRing_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = LinearRing_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return LinearRing_possibleConstructorReturn(this, result); }; }

function LinearRing_possibleConstructorReturn(self, call) { if (call && (LinearRing_typeof(call) === "object" || typeof call === "function")) { return call; } return LinearRing_assertThisInitialized(self); }

function LinearRing_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function LinearRing_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function LinearRing_getPrototypeOf(o) { LinearRing_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return LinearRing_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class  SuperMap.Geometry.LinearRing
 * @classdesc å ä½å¯¹è±¡çº¿ç¯ç±»ï¼æ¯ä¸ä¸ªç¹æ®çå°é­ççº¿ä¸²ï¼å¨æ¯æ¬¡ addPoint/removePoint ä¹åä¼éè¿æ·»å ä¸ä¸ªç¹ï¼æ­¤ç¹æ¯å¤å¶çç¬¬ä¸ä¸ªç¹å¾å°çï¼
 * ä½ä¸ºæåçä¸ä¸ªç¹æ¥èªå¨å³é­çº¿ç¯ã
 * @category BaseTypes Geometry
 * @extends {SuperMap.Geometry.LineString}
 * @param {Array.<SuperMap.Geometry.Point>} points - ç»æçº¿æ§ç¯çç¹ã
 * @example
 * var points = [new SuperMap.Geometry.Point(4933.319287022352, -3337.3849141502124),
 *      new SuperMap.Geometry.Point(4960.9674060199022, -3349.3316322355736),
 *      new SuperMap.Geometry.Point(5006.0235999418364, -3358.8890067038628),
 *      new SuperMap.Geometry.Point(5075.3145648369318, -3378.0037556404409),
 *      new SuperMap.Geometry.Point(5305.19551436013, -3376.9669111768926)],
 * var linearRing = new SuperMap.Geometry.LinearRing(points);
 */

var LinearRing = /*#__PURE__*/function (_LineString) {
  LinearRing_inherits(LinearRing, _LineString);

  var _super = LinearRing_createSuper(LinearRing);

  function LinearRing(points) {
    var _this;

    LinearRing_classCallCheck(this, LinearRing);

    _this = _super.call(this, points);
    /**
     * @member {Array.<string>} [SuperMap.Geometry.LinearRing.prototype.componentTypes=["SuperMap.Geometry.Point"]]
     * @description components å­å¨ççå ä½å¯¹è±¡ææ¯æçå ä½ç±»åæ°ç»,ä¸ºç©ºè¡¨ç¤ºç±»åä¸åéå¶ã
     * @readonly
     */

    _this.componentTypes = ["SuperMap.Geometry.Point"];
    _this.CLASS_NAME = "SuperMap.Geometry.LinearRing";
    _this.geometryType = "LinearRing";
    return _this;
  }
  /**
   * @function SuperMap.Geometry.LinearRing.prototype.addComponent
   * @description æ·»å ä¸ä¸ªç¹å°å ä½å¾å½¢æ°ç»ä¸­ï¼å¦æè¿ä¸ªç¹å°è¦è¢«æ·»å å°ç»ä»¶æ°ç»çæ«ç«¯ï¼å¹¶ä¸ä¸æ°ç»ä¸­å·²ç»å­å¨çæåä¸ä¸ªç¹ç¸åï¼
   * éå¤çç¹æ¯ä¸è½è¢«æ·»å çãè¿å°å½±åæªå³é­ç¯çå³é­ã
   * è¿ä¸ªæ¹æ³å¯ä»¥éè¿å°éç©ºç´¢å¼ï¼ç»ä»¶æ°ç»çä¸æ ï¼ä½ä¸ºç¬¬äºä¸ªåæ°éåã
   * @param {SuperMap.Geometry.Point} point - ç¹å¯¹è±¡ã
   * @param {integer} [index] - æå¥ç»ä»¶æ°ç»çä¸æ ã
   * @returns {boolean} ç¹å¯¹è±¡æ¯å¦æ·»å æåã
   */


  LinearRing_createClass(LinearRing, [{
    key: "addComponent",
    value: function addComponent(point, index) {
      var added = false; //remove last point

      var lastPoint = this.components.pop(); // given an index, add the point
      // without an index only add non-duplicate points

      if (index != null || !point.equals(lastPoint)) {
        added = LinearRing_get(LinearRing_getPrototypeOf(LinearRing.prototype), "addComponent", this).apply(this, arguments);
      } //append copy of first point


      var firstPoint = this.components[0];

      LinearRing_get(LinearRing_getPrototypeOf(LinearRing.prototype), "addComponent", this).apply(this, [firstPoint]);

      return added;
    }
    /**
     * @function SuperMap.Geometry.LinearRing.prototype.removeComponent
     * @description ä»å ä½ç»ä»¶ä¸­å é¤ä¸ä¸ªç¹ã
     * @param {SuperMap.Geometry.Point} point - ç¹å¯¹è±¡ã
     * @returns {boolean} ç¹å¯¹è±¡æ¯å¦å é¤ã
     */

  }, {
    key: "removeComponent",
    value: function removeComponent(point) {
      // eslint-disable-line no-unused-vars
      var removed = this.components && this.components.length > 3;

      if (removed) {
        //remove last point
        this.components.pop(); //remove our point

        LinearRing_get(LinearRing_getPrototypeOf(LinearRing.prototype), "removeComponent", this).apply(this, arguments); //append copy of first point


        var firstPoint = this.components[0];

        LinearRing_get(LinearRing_getPrototypeOf(LinearRing.prototype), "addComponent", this).apply(this, [firstPoint]);
      }

      return removed;
    }
    /**
     * @function SuperMap.Geometry.LinearRing.prototype.getArea
     * @description è·å¾å½åå ä½å¯¹è±¡åºåå¤§å°ï¼å¦ææ¯æ²¿é¡ºæ¶éæ¹åçç¯åæ¯æ­£å¼ï¼å¦åä¸ºè´å¼ã
     * @returns {float} ç¯çé¢ç§¯ã
     */

  }, {
    key: "getArea",
    value: function getArea() {
      var area = 0.0;

      if (this.components && this.components.length > 2) {
        var sum = 0.0;

        for (var i = 0, len = this.components.length; i < len - 1; i++) {
          var b = this.components[i];
          var c = this.components[i + 1];
          sum += (b.x + c.x) * (c.y - b.y);
        }

        area = -sum / 2.0;
      }

      return area;
    }
    /**
     * @function SuperMap.Geometry.LinearRing.prototype.getVertices
     * @description è¿åå ä½å¾å½¢çææç¹çåè¡¨ã
     * @param {boolean} [nodes] - å¯¹äºçº¿æ¥è¯´ï¼ä»ä»è¿åä½ä¸ºç«¯ç¹çé¡¶ç¹ï¼å¦æè®¾ä¸º false ï¼åè¿åéç«¯ç¹çé¡¶ç¹ï¼å¦ææ²¡æè®¾ç½®æ­¤åæ°ï¼åè¿åææé¡¶ç¹ã
     * @returns {Array} å ä½å¯¹è±¡ææç¹çåè¡¨ã
     */

  }, {
    key: "getVertices",
    value: function getVertices(nodes) {
      return nodes === true ? [] : this.components.slice(0, this.components.length - 1);
    }
  }]);

  return LinearRing;
}(LineString);
SuperMap.Geometry.LinearRing = LinearRing;
// CONCATENATED MODULE: ./src/common/commontypes/geometry/MultiLineString.js
function MultiLineString_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { MultiLineString_typeof = function _typeof(obj) { return typeof obj; }; } else { MultiLineString_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return MultiLineString_typeof(obj); }

function MultiLineString_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function MultiLineString_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) MultiLineString_setPrototypeOf(subClass, superClass); }

function MultiLineString_setPrototypeOf(o, p) { MultiLineString_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return MultiLineString_setPrototypeOf(o, p); }

function MultiLineString_createSuper(Derived) { var hasNativeReflectConstruct = MultiLineString_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = MultiLineString_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = MultiLineString_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return MultiLineString_possibleConstructorReturn(this, result); }; }

function MultiLineString_possibleConstructorReturn(self, call) { if (call && (MultiLineString_typeof(call) === "object" || typeof call === "function")) { return call; } return MultiLineString_assertThisInitialized(self); }

function MultiLineString_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function MultiLineString_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function MultiLineString_getPrototypeOf(o) { MultiLineString_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return MultiLineString_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.Geometry.MultiLineString
 * @classdesc å ä½å¯¹è±¡å¤çº¿ç±»ã
 * @category BaseTypes Geometry
 * @extends {SuperMap.Geometry.Collection}
 * @param {Array.<SuperMap.Geometry.LineString>} components - LineString æ°ç»ã
 * @example
 * var multi = new SuperMap.Geometry.MultiLineString([
 *      new SuperMap.Geometry.LineString([
 *          new SuperMap.Geometry.Point(1, 0),
 *          new SuperMap.Geometry.Point(0, 1)
 *      ])
 *  ]);
 */

var MultiLineString = /*#__PURE__*/function (_Collection) {
  MultiLineString_inherits(MultiLineString, _Collection);

  var _super = MultiLineString_createSuper(MultiLineString);

  function MultiLineString(components) {
    var _this;

    MultiLineString_classCallCheck(this, MultiLineString);

    _this = _super.call(this, components);
    /**
     * @member {Array.<string>} [SuperMap.Geometry.MultiLineString.prototype.componentTypes=["SuperMap.Geometry.LineString"]]
     * @description components å­å¨ççå ä½å¯¹è±¡ææ¯æçå ä½ç±»åæ°ç»ã
     * @readonly
     */

    _this.componentTypes = ["SuperMap.Geometry.LineString"];
    _this.CLASS_NAME = "SuperMap.Geometry.MultiLineString";
    _this.geometryType = "MultiLineString";
    return _this;
  }

  return MultiLineString;
}(Collection);
SuperMap.Geometry.MultiLineString = MultiLineString;
// CONCATENATED MODULE: ./src/common/commontypes/geometry/MultiPolygon.js
function MultiPolygon_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { MultiPolygon_typeof = function _typeof(obj) { return typeof obj; }; } else { MultiPolygon_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return MultiPolygon_typeof(obj); }

function MultiPolygon_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function MultiPolygon_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) MultiPolygon_setPrototypeOf(subClass, superClass); }

function MultiPolygon_setPrototypeOf(o, p) { MultiPolygon_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return MultiPolygon_setPrototypeOf(o, p); }

function MultiPolygon_createSuper(Derived) { var hasNativeReflectConstruct = MultiPolygon_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = MultiPolygon_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = MultiPolygon_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return MultiPolygon_possibleConstructorReturn(this, result); }; }

function MultiPolygon_possibleConstructorReturn(self, call) { if (call && (MultiPolygon_typeof(call) === "object" || typeof call === "function")) { return call; } return MultiPolygon_assertThisInitialized(self); }

function MultiPolygon_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function MultiPolygon_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function MultiPolygon_getPrototypeOf(o) { MultiPolygon_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return MultiPolygon_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.Geometry.MultiPolygon
 * @classdesc å ä½å¯¹è±¡å¤å¤è¾¹å½¢ç±»ã
 * @category BaseTypes Geometry
 * @extends {SuperMap.Geometry.Collection}
 * @param  {Array.<SuperMap.Geometry.Polygon>} components - å½¢æ MultiPolygon çå¤è¾¹å½¢æ°ç»ã
 * @example
 * var points1 = [new SuperMap.Geometry.Point(10,10),new SuperMap.Geometry.Point(0,0)];
 * var points2 = [new SuperMap.Geometry.Point(10,10),new SuperMap.Geometry.Point(0,0),new SuperMap.Geometry.Point(3,3),new SuperMap.Geometry.Point(10,10)];
 *
 * var linearRing1 = new SuperMap.Geometry.LinearRing(points1);
 * var linearRing2 = new SuperMap.Geometry.LinearRing(points2);
 *
 * var polygon1 = new SuperMap.Geometry.Polygon([linearRing1]);
 * var polygon2 = new SuperMap.Geometry.Polygon([linearRing2]);
 *
 * var multiPolygon1 = new SuperMap.Geometry.MultiPolygon([polygon1,polygon2]);
 */

var MultiPolygon = /*#__PURE__*/function (_Collection) {
  MultiPolygon_inherits(MultiPolygon, _Collection);

  var _super = MultiPolygon_createSuper(MultiPolygon);

  function MultiPolygon(components) {
    var _this;

    MultiPolygon_classCallCheck(this, MultiPolygon);

    _this = _super.call(this, components);
    /**
     * @member {Array.<string>} [SuperMap.Geometry.MultiPolygon.prototype.componentTypes=["SuperMap.Geometry.Polygon"]]
     * @description components å­å¨ççå ä½å¯¹è±¡ææ¯æçå ä½ç±»åæ°ç»ã
     * @readonly
     */

    _this.componentTypes = ["SuperMap.Geometry.Polygon"];
    _this.CLASS_NAME = "SuperMap.Geometry.MultiPolygon";
    _this.geometryType = "MultiPolygon";
    return _this;
  }

  return MultiPolygon;
}(Collection);
SuperMap.Geometry.MultiPolygon = MultiPolygon;
// CONCATENATED MODULE: ./src/common/commontypes/geometry/Polygon.js
function Polygon_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Polygon_typeof = function _typeof(obj) { return typeof obj; }; } else { Polygon_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Polygon_typeof(obj); }

function Polygon_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Polygon_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Polygon_createClass(Constructor, protoProps, staticProps) { if (protoProps) Polygon_defineProperties(Constructor.prototype, protoProps); if (staticProps) Polygon_defineProperties(Constructor, staticProps); return Constructor; }

function Polygon_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Polygon_setPrototypeOf(subClass, superClass); }

function Polygon_setPrototypeOf(o, p) { Polygon_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Polygon_setPrototypeOf(o, p); }

function Polygon_createSuper(Derived) { var hasNativeReflectConstruct = Polygon_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Polygon_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Polygon_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Polygon_possibleConstructorReturn(this, result); }; }

function Polygon_possibleConstructorReturn(self, call) { if (call && (Polygon_typeof(call) === "object" || typeof call === "function")) { return call; } return Polygon_assertThisInitialized(self); }

function Polygon_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Polygon_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Polygon_getPrototypeOf(o) { Polygon_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Polygon_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.Geometry.Polygon
 * @classdesc  å¤è¾¹å½¢å ä½å¯¹è±¡ç±»ã
 * @category BaseTypes Geometry
 * @extends {SuperMap.Geometry.Collection}
 * @param {Array.<SuperMap.Geometry.LinearRing>} components - ç¨æ¥çæå¤è¾¹å½¢ççº¿ç¯æ°ç»ã
 * @example
 * var points =[new SuperMap.Geometry.Point(0,4010338),
 *      new SuperMap.Geometry.Point(1063524,4010338),
 *      new SuperMap.Geometry.Point(1063524,3150322),
 *      new SuperMap.Geometry.Point(0,3150322)
 *  ],
 *  var linearRings = new SuperMap.Geometry.LinearRing(points),
 *  var  region = new SuperMap.Geometry.Polygon([linearRings]);
 */

var Polygon = /*#__PURE__*/function (_Collection) {
  Polygon_inherits(Polygon, _Collection);

  var _super = Polygon_createSuper(Polygon);

  function Polygon(components) {
    var _this;

    Polygon_classCallCheck(this, Polygon);

    _this = _super.call(this, components);
    /**
     * @member {Array.<string>} [SuperMap.Geometry.Polygon.prototype.componentTypes=["SuperMap.Geometry.LinearRing"]]
     * @description components å­å¨ççå ä½å¯¹è±¡ææ¯æçå ä½ç±»åæ°ç»ã
     * @readonly
     */

    _this.componentTypes = ["SuperMap.Geometry.LinearRing"];
    _this.CLASS_NAME = "SuperMap.Geometry.Polygon";
    _this.geometryType = "Polygon";
    return _this;
  }
  /**
   * @function SuperMap.Geometry.Polygon.prototype.getArea
   * @description è·å¾åºåé¢ç§¯ï¼ä»åºåçå¤é¨å£å¾åå»è®¡æ­¤åºååé¨å£å¾ç®æå¾çé¢ç§¯ã
   * @returns {float} å ä½å¯¹è±¡çé¢ç§¯ã
   */


  Polygon_createClass(Polygon, [{
    key: "getArea",
    value: function getArea() {
      var area = 0.0;

      if (this.components && this.components.length > 0) {
        area += Math.abs(this.components[0].getArea());

        for (var i = 1, len = this.components.length; i < len; i++) {
          area -= Math.abs(this.components[i].getArea());
        }
      }

      return area;
    }
  }]);

  return Polygon;
}(Collection);
SuperMap.Geometry.Polygon = Polygon;
// CONCATENATED MODULE: ./src/common/commontypes/geometry/Rectangle.js
function Rectangle_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Rectangle_typeof = function _typeof(obj) { return typeof obj; }; } else { Rectangle_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Rectangle_typeof(obj); }

function Rectangle_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Rectangle_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Rectangle_createClass(Constructor, protoProps, staticProps) { if (protoProps) Rectangle_defineProperties(Constructor.prototype, protoProps); if (staticProps) Rectangle_defineProperties(Constructor, staticProps); return Constructor; }

function Rectangle_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Rectangle_setPrototypeOf(subClass, superClass); }

function Rectangle_setPrototypeOf(o, p) { Rectangle_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Rectangle_setPrototypeOf(o, p); }

function Rectangle_createSuper(Derived) { var hasNativeReflectConstruct = Rectangle_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Rectangle_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Rectangle_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Rectangle_possibleConstructorReturn(this, result); }; }

function Rectangle_possibleConstructorReturn(self, call) { if (call && (Rectangle_typeof(call) === "object" || typeof call === "function")) { return call; } return Rectangle_assertThisInitialized(self); }

function Rectangle_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Rectangle_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Rectangle_getPrototypeOf(o) { Rectangle_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Rectangle_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class  SuperMap.Geometry.Rectangle
 * @classdesc ç©å½¢å ä½å¯¹è±¡ç±»ã
 * @category BaseTypes Geometry
 * @param {float} x - ç©å½¢å·¦ä¸è§ç¹çæ¨ªåæ ã
 * @param {float} y - ç©å½¢å·¦ä¸è§ç¹ççºµåæ ã
 * @param {float} width - ç©å½¢çå®½åº¦ã
 * @param {float} height -  ç©å½¢çé«åº¦ã
 * @extends {SuperMap.Geometry}
 * @example
 *  //x ä¸ºç©å½¢å·¦ä¸è§ç¹çæ¨ªåæ ï¼y ä¸ºç©å½¢å·¦ä¸è§ç¹ççºµåæ ï¼w ä¸ºç©å½¢çå®½åº¦ï¼h ä¸ºç©å½¢çé«åº¦
 *  var x = 1;
 *  var y = 2;
 *  var w = 10;
 *  var h = 20;
 *  var recttangle = new SuperMap.Geometry.Rectangle(x, y, w, h);
 */

var Rectangle = /*#__PURE__*/function (_Geometry) {
  Rectangle_inherits(Rectangle, _Geometry);

  var _super = Rectangle_createSuper(Rectangle);

  function Rectangle(x, y, width, height) {
    var _this;

    Rectangle_classCallCheck(this, Rectangle);

    _this = _super.call(this, x, y, width, height);
    /**
     * @member {float} SuperMap.Geometry.Rectangle.prototype.x
     * @description ç©å½¢å·¦ä¸è§ç¹çæ¨ªåæ ã
     */

    _this.x = x;
    /**
     * @member {float} SuperMap.Geometry.Rectangle.prototype.y
     * @description ç©å½¢å·¦ä¸è§ç¹ççºµåæ ã
     */

    _this.y = y;
    /**
     * @member {float} SuperMap.Geometry.Rectangle.prototype.width
     * @description ç©å½¢çå®½åº¦ã
     */

    _this.width = width;
    /**
     * @member {float} SuperMap.Geometry.Rectangle.prototype.height
     * @description ç©å½¢çé«åº¦ã
     */

    _this.height = height;
    _this.CLASS_NAME = "SuperMap.Geometry.Rectangle";
    _this.geometryType = "Rectangle";
    return _this;
  }
  /**
   * @function SuperMap.Geometry.Rectangle.prototype.calculateBounds
   * @description è®¡ç®åºæ­¤ç©å½¢å¯¹è±¡ç boundsã
   */


  Rectangle_createClass(Rectangle, [{
    key: "calculateBounds",
    value: function calculateBounds() {
      this.bounds = new Bounds(this.x, this.y, this.x + this.width, this.y + this.height);
    }
    /**
     * @function SuperMap.Geometry.Rectangle.prototype.getArea
     * @description è·åç©å½¢å¯¹è±¡çé¢ç§¯ã
     * @returns {float} ç©å½¢å¯¹è±¡é¢ç§¯ã
     */

  }, {
    key: "getArea",
    value: function getArea() {
      var area = this.width * this.height;
      return area;
    }
  }]);

  return Rectangle;
}(Geometry);
SuperMap.Geometry.Rectangle = Rectangle;
// CONCATENATED MODULE: ./src/common/commontypes/geometry/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/






















// CONCATENATED MODULE: ./src/common/commontypes/Credential.js
function Credential_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Credential_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Credential_createClass(Constructor, protoProps, staticProps) { if (protoProps) Credential_defineProperties(Constructor.prototype, protoProps); if (staticProps) Credential_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @class SuperMap.Credential
 * @category Security
 * @classdesc SuperMap çå®å¨è¯ä¹¦ç±»ï¼å¶ä¸­åæ¬ token ç­å®å¨éªè¯ä¿¡æ¯ã</br>
 * éè¦ä½¿ç¨ç¨æ·ååå¯ç å¨ï¼"http://localhost:8090/iserver/services/security/tokens" ä¸ç³è¯· valueã</br>
 * è·å¾å½¢å¦ï¼"2OMwGmcNlrP2ixqv1Mk4BuQMybOGfLOrljruX6VcYMDQKc58Sl9nMHsqQaqeBx44jRvKSjkmpZKK1L596y7skQ.." ç valueã</br>
 * ç®åæ¯æçåè½åæ¬ï¼å°å¾æå¡ãä¸é¢å¾ãéç®ãæ¥è¯¢ãå¬äº¤æ¢ä¹ãç©ºé´åæãç½ç»åæï¼ä¸æ¯æè½®è¯¢åè½ã</br>
 * @param {string} value - è®¿é®åå®å¨éå¶çæå¡æ¶ç¨äºéè¿å®å¨è®¤è¯çéªè¯ä¿¡æ¯ã
 * @param {string} [name='token'] - éªè¯ä¿¡æ¯åç¼ï¼name=value é¨åç name é¨åã
 * @example
 * var pixcel = new SuperMap.Credential("valueString","token");
 * pixcel.destroy();
 */

var Credential = /*#__PURE__*/function () {
  function Credential(value, name) {
    Credential_classCallCheck(this, Credential);

    /**
     * @member {string} SuperMap.Bounds.prototype.value
     * @description è®¿é®åå®å¨éå¶çæå¡æ¶ç¨äºéè¿å®å¨è®¤è¯çéªè¯ä¿¡æ¯ã
     */
    this.value = value ? value : "";
    /**
     * @member {string} [SuperMap.Bounds.prototype.name='token']
     * @description éªè¯ä¿¡æ¯åç¼ï¼name=value é¨åç name é¨åã
     */

    this.name = name ? name : "token";
    this.CLASS_NAME = "SuperMap.Credential";
  }
  /**
   * @function SuperMap.Credential.prototype.getUrlParameters
   * @example
   * var credential = new SuperMap.Credential("valueString","token");
   * //è¿é str = "token=valueString";
   * var str = credential.getUrlParameters();
   * @returns {string} è¿åå®å¨ä¿¡æ¯ç»æç url çæ®µã
   */


  Credential_createClass(Credential, [{
    key: "getUrlParameters",
    value: function getUrlParameters() {
      //å½éè¦å¶ä»å®å¨ä¿¡æ¯çæ¶åï¼åéè¦return this.name + "=" + this.value + "&" + "...";çå½¢å¼æ·»å ã
      return this.name + "=" + this.value;
    }
    /**
     * @function SuperMap.Bounds.prototype.getValue
     * @description è·å valueã
     * @example
     * var credential = new SuperMap.Credential("2OMwGmcNlrP2ixqv1Mk4BuQMybOGfLOrljruX6VcYMDQKc58Sl9nMHsqQaqeBx44jRvKSjkmpZKK1L596y7skQ..","token");
     * //è¿é str = "2OMwGmcNlrP2ixqv1Mk4BuQMybOGfLOrljruX6VcYMDQKc58Sl9nMHsqQaqeBx44jRvKSjkmpZKK1L596y7skQ..";
     * var str = credential.getValue();
     * @returns {string} è¿å value å­ç¬¦ä¸²ï¼å¨ iServer æå¡ä¸è¯¥ value å¼å³ä¸º token å¼ã
     */

  }, {
    key: "getValue",
    value: function getValue() {
      return this.value;
    }
    /**
     *
     * @function SuperMap.Credential.prototype.destroy
     * @description éæ¯æ­¤å¯¹è±¡ãéæ¯åæ­¤å¯¹è±¡çææå±æ§ä¸º nullï¼èä¸æ¯åå§å¼ã
     * @example
     * var credential = new SuperMap.Credential("valueString","token");
     * credential.destroy();
     */

  }, {
    key: "destroy",
    value: function destroy() {
      this.value = null;
      this.name = null;
    }
  }]);

  return Credential;
}();
/**
 * @member {SuperMap.Credential} SuperMap.Credential.CREDENTIAL
 * @description è¿ä¸ªå¯¹è±¡ä¿å­ä¸ä¸ªå®å¨ç±»çå®ä¾ï¼å¨æå¡ç«¯éè¦å®å¨éªè¯çæ¶åå¿é¡»è¿è¡è®¾ç½®ã
 * @constant
 * @example
 * ä»£ç å®ä¾:
 *  // å½iServerå¯ç¨æå¡å®å¨çæ¶åï¼ä¸è¾¹çä»£ç æ¯å¿é¡»çãå®å¨è¯ä¹¦ç±»è½å¤æ¥æ¶ä¸ä¸ªvalueåä¸ä¸ªnameåæ°ã
 *  var value = "(ä»¥iServerä¸ºä¾ï¼è¿éæ¯ç³è¯·çtokenå¼)";
 *  var name = "token";
 *  // é»è®¤nameåæ°ä¸ºtokenï¼æä»¥å½ä½¿ç¨iServeræå¡çæ¶åå¯ä»¥ä¸è¿è¡è®¾ç½®ã
 *  SuperMap.Credential.CREDENTIAL = new SuperMap.Credential(value, name);
 *
 */

Credential.CREDENTIAL = null;
SuperMap.Credential = Credential;
// CONCATENATED MODULE: ./src/common/commontypes/Date.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @name Date
 * @memberOf SuperMap
 * @namespace
 * @category BaseTypes Util
 * @description åå« parseãtoISOString æ¹æ³çå®ç°ï¼ä¸¤ä¸ªæ¹æ³ç¨æ¥è§£æ RFC 3339 æ¥æï¼éµå¾ª ECMAScript 5 è§èã
 */

var DateExt = SuperMap.Date = {
  /**
   * @description çæä»£è¡¨ä¸ä¸ªå·ä½çæ¥æå­ç¬¦ä¸²ï¼è¯¥æ¥æéµå¾ª ISO 8601 æ åï¼è¯¦ææ¥ç{@link http://tools.ietf.org/html/rfc3339}ï¼ã
   * @example
   *  var dateString = SuperMap.Date.toISOString(new Date());
   * @param {Date} date - æ¥æå¯¹è±¡ã
   * @returns {string} ä¸ä¸ªä»£è¡¨æ¥æçå­ç¬¦ä¸²ãï¼ä¾å¦ "2010-08-07T16:58:23.123Z"ï¼ã
   */
  toISOString: function () {
    //æ åçDateä¼å­å¨toISOStringæ¹æ³ï¼å¯ä»¥ç´æ¥è°ç¨
    if ("toISOString" in Date.prototype) {
      return function (date) {
        return date.toISOString();
      };
    } else {
      // é¨åæµè§å¨æ²¡æï¼å°±å¾èªå·±ç»åï¼ç»ååçå­ç¬¦ä¸²è§åä¸å
      var pad = function pad(num, len) {
        var str = num + "";

        while (str.length < len) {
          str = "0" + str;
        }

        return str;
      };

      return function (date) {
        var str;

        if (isNaN(date.getTime())) {
          // ECMA-262 says throw RangeError, Firefox returns
          // "Invalid Date"
          str = "Invalid Date";
        } else {
          str = date.getUTCFullYear() + "-" + pad(date.getUTCMonth() + 1, 2) + "-" + pad(date.getUTCDate(), 2) + "T" + pad(date.getUTCHours(), 2) + ":" + pad(date.getUTCMinutes(), 2) + ":" + pad(date.getUTCSeconds(), 2) + "." + pad(date.getUTCMilliseconds(), 3) + "Z";
        }

        return str;
      };
    }
  }(),

  /**
   * @description ä»ä¸ä¸ªå­ç¬¦ä¸²çæä¸ä¸ªæ¥æå¯¹è±¡ã
   * @example
   *  var date = SuperMap.Date.parse("2010-08-07");
   * @param {string} str - ä»£è¡¨æ¥æçå­ç¬¦ä¸²ãï¼ä¾å¦ï¼ "2010", "2010-08", "2010-08-07", "2010-08-07T16:58:23.123Z","2010-08-07T11:58:23.123-06"ï¼ã
   * @returns {Date} æ¥æå¯¹è±¡ï¼å¦æå­ç¬¦ä¸²æ æ³è¢«è§£æï¼åè¿åä¸ä¸ªæ æçæ¥æã(ä¾å¦ isNaN(date.getTime()))ã
   */
  parse: function parse(str) {
    var date;
    var match = str.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/);

    if (match && (match[1] || match[7])) {
      // must have at least year or time
      var year = parseInt(match[1], 10) || 0;
      var month = parseInt(match[2], 10) - 1 || 0;
      var day = parseInt(match[3], 10) || 1;
      date = new Date(Date.UTC(year, month, day)); // optional time

      var type = match[7];

      if (type) {
        var hours = parseInt(match[4], 10);
        var minutes = parseInt(match[5], 10);
        var secFrac = parseFloat(match[6]);
        var seconds = secFrac | 0;
        var milliseconds = Math.round(1000 * (secFrac - seconds));
        date.setUTCHours(hours, minutes, seconds, milliseconds); // check offset

        if (type !== "Z") {
          var hoursOffset = parseInt(type, 10);
          var minutesOffset = parseInt(match[8], 10) || 0;
          var offset = -1000 * (60 * (hoursOffset * 60) + minutesOffset * 60);
          date = new Date(date.getTime() + offset);
        }
      }
    } else {
      date = new Date("invalid");
    }

    return date;
  }
};
// CONCATENATED MODULE: ./src/common/commontypes/Event.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @name Event
 * @memberOf SuperMap
 * @namespace
 * @description äºä»¶å¤çå½æ°.
 */

var Event = SuperMap.Event = {
  /**
   * @description  A hash table cache of the event observers. Keyed by element._eventCacheID
   * @type {boolean}
   * @default false
   */
  observers: false,

  /**
   * @description KEY_SPACE
   * @type {number}
   * @default 32
   */
  KEY_SPACE: 32,

  /**
   * @description KEY_BACKSPACE
   * @type {number}
   * @default 8
   */
  KEY_BACKSPACE: 8,

  /**
   * @description KEY_TAB
   * @type {number}
   * @default 9
   */
  KEY_TAB: 9,

  /**
   * @description KEY_RETURN
   * @type {number}
   * @default 13
   */
  KEY_RETURN: 13,

  /**
   * @description KEY_ESC
   * @type {number}
   * @default 27
   */
  KEY_ESC: 27,

  /**
   * @description KEY_LEFT
   * @type {number}
   * @default 37
   */
  KEY_LEFT: 37,

  /**
   * @description KEY_UP
   * @type {number}
   * @default 38
   */
  KEY_UP: 38,

  /**
   * @description KEY_RIGHT
   * @type {number}
   * @default 39
   */
  KEY_RIGHT: 39,

  /**
   * @description KEY_DOWN
   * @type {number}
   * @default 40
   */
  KEY_DOWN: 40,

  /**
   * @description KEY_DELETE
   * @type {number}
   * @default 46
   */
  KEY_DELETE: 46,

  /**
   * @description Cross browser event element detection.
   * @param {Event} event - The event
   * @returns {HTMLElement} The element that caused the event
   */
  element: function element(event) {
    return event.target || event.srcElement;
  },

  /**
   * @description Determine whether event was caused by a single touch
   * @param {Event} event - The event
   * @returns {boolean}
   */
  isSingleTouch: function isSingleTouch(event) {
    return event.touches && event.touches.length === 1;
  },

  /**
   * @description Determine whether event was caused by a multi touch
   * @param {Event} event - The event
   * @returns {boolean}
   */
  isMultiTouch: function isMultiTouch(event) {
    return event.touches && event.touches.length > 1;
  },

  /**
   * @description Determine whether event was caused by a left click.
   * @param {Event} event - The event
   * @returns {boolean}
   */
  isLeftClick: function isLeftClick(event) {
    return event.which && event.which === 1 || event.button && event.button === 1;
  },

  /**
   * @description Determine whether event was caused by a right mouse click.
   * @param {Event} event - The event
   * @returns {boolean}
   */
  isRightClick: function isRightClick(event) {
    return event.which && event.which === 3 || event.button && event.button === 2;
  },

  /**
   * @description Stops an event from propagating.
   * @param {Event} event - The event
   * @param {boolean} allowDefault - If true, we stop the event chain but still allow the default browser  behaviour (text selection, radio-button clicking, etc) Default false
   */
  stop: function stop(event, allowDefault) {
    if (!allowDefault) {
      if (event.preventDefault) {
        event.preventDefault();
      } else {
        event.returnValue = false;
      }
    }

    if (event.stopPropagation) {
      event.stopPropagation();
    } else {
      event.cancelBubble = true;
    }
  },

  /**
   * @param {Event} event - The eventã
   * @param {string} tagName - html æ ç­¾åã
   * @returns {HTMLElement} The first node with the given tagName, starting from the node the event was triggered on and traversing the DOM upwards
   */
  findElement: function findElement(event, tagName) {
    var element = SuperMap.Event.element(event);

    while (element.parentNode && (!element.tagName || element.tagName.toUpperCase() != tagName.toUpperCase())) {
      element = element.parentNode;
    }

    return element;
  },

  /**
   * @description çå¬äºä»¶ï¼æ³¨åäºä»¶å¤çæ¹æ³ã
   * @param {(HTMLElement|string)} elementParam - å¾çå¬ç DOM å¯¹è±¡æèå¶ ID æ è¯ã
   * @param {string} name - çå¬äºä»¶çç±»å«åç§°ã
   * @param {function} observer - æ³¨åçäºä»¶å¤çæ¹æ³ã
   * @param {boolean} [useCapture=false] - æ¯å¦æè·ã
   */
  observe: function observe(elementParam, name, observer, useCapture) {
    var element = Util.getElement(elementParam);
    useCapture = useCapture || false;

    if (name === 'keypress' && (navigator.appVersion.match(/Konqueror|Safari|KHTML/) || element.attachEvent)) {
      name = 'keydown';
    } //if observers cache has not yet been created, create it


    if (!this.observers) {
      this.observers = {};
    } //if not already assigned, make a new unique cache ID


    if (!element._eventCacheID) {
      var idPrefix = "eventCacheID_";

      if (element.id) {
        idPrefix = element.id + "_" + idPrefix;
      }

      element._eventCacheID = Util.createUniqueID(idPrefix);
    }

    var cacheID = element._eventCacheID; //if there is not yet a hash entry for this element, add one

    if (!this.observers[cacheID]) {
      this.observers[cacheID] = [];
    } //add a new observer to this element's list


    this.observers[cacheID].push({
      'element': element,
      'name': name,
      'observer': observer,
      'useCapture': useCapture
    }); //add the actual browser event listener

    if (element.addEventListener) {
      if (name === 'mousewheel') {
        // https://www.chromestatus.com/features/6662647093133312
        element.addEventListener(name, observer, {
          useCapture: useCapture,
          passive: false
        });
      } else {
        element.addEventListener(name, observer, useCapture);
      }
    } else if (element.attachEvent) {
      element.attachEvent('on' + name, observer);
    }
  },

  /**
   * @description Given the id of an element to stop observing, cycle through the
   *   element's cached observers, calling stopObserving on each one,
   *   skipping those entries which can no longer be removed.
   *
   * @param {(HTMLElement|string)} elementParam - 
   */
  stopObservingElement: function stopObservingElement(elementParam) {
    var element = Util.getElement(elementParam);
    var cacheID = element._eventCacheID;

    this._removeElementObservers(SuperMap.Event.observers[cacheID]);
  },

  /**
   * @param {Array.<Object>} elementObservers - Array of (element, name,
   *                                         observer, usecapture) objects,
   *                                         taken directly from hashtable
   */
  _removeElementObservers: function _removeElementObservers(elementObservers) {
    if (elementObservers) {
      for (var i = elementObservers.length - 1; i >= 0; i--) {
        var entry = elementObservers[i];
        var args = new Array(entry.element, entry.name, entry.observer, entry.useCapture);
        SuperMap.Event.stopObserving.apply(this, args);
      }
    }
  },

  /**
   * @description ç§»é¤äºä»¶çå¬åæ³¨åçäºä»¶å¤çæ¹æ³ãæ³¨æï¼äºä»¶çç§»é¤åçå¬ç¸å¯¹åºï¼ç§»é¤æ¶çåå±æ§ä¿¡æ¯å¿é¡»çå¬æ¶
   * ä¿æä¸è´æè½ç¡®ä¿äºä»¶ç§»é¤æåã
   * @param {(HTMLElement|string)} elementParam - è¢«çå¬ç DOM åç´ æèå¶ IDã
   * @param {string} name - éè¦ç§»é¤çè¢«çå¬äºä»¶åç§°ã
   * @param {function} observer - éè¦ç§»é¤çäºä»¶å¤çæ¹æ³ã
   * @param {boolean} [useCapture=false] - æ¯å¦æè·ã
   * @returns {boolean} Whether or not the event observer was removed
   */
  stopObserving: function stopObserving(elementParam, name, observer, useCapture) {
    useCapture = useCapture || false;
    var element = Util.getElement(elementParam);
    var cacheID = element._eventCacheID;

    if (name === 'keypress') {
      if (navigator.appVersion.match(/Konqueror|Safari|KHTML/) || element.detachEvent) {
        name = 'keydown';
      }
    } // find element's entry in this.observers cache and remove it


    var foundEntry = false;
    var elementObservers = SuperMap.Event.observers[cacheID];

    if (elementObservers) {
      // find the specific event type in the element's list
      var i = 0;

      while (!foundEntry && i < elementObservers.length) {
        var cacheEntry = elementObservers[i];

        if (cacheEntry.name === name && cacheEntry.observer === observer && cacheEntry.useCapture === useCapture) {
          elementObservers.splice(i, 1);

          if (elementObservers.length == 0) {
            delete SuperMap.Event.observers[cacheID];
          }

          foundEntry = true;
          break;
        }

        i++;
      }
    } //actually remove the event listener from browser


    if (foundEntry) {
      if (element.removeEventListener) {
        element.removeEventListener(name, observer, useCapture);
      } else if (element && element.detachEvent) {
        element.detachEvent('on' + name, observer);
      }
    }

    return foundEntry;
  },

  /**
   * @description Cycle through all the element entries in the events cache and call
   *   stopObservingElement on each.
   */
  unloadCache: function unloadCache() {
    // check for SuperMap.Event before checking for observers, because
    // SuperMap.Event may be undefined in IE if no map instance was
    // created
    if (SuperMap.Event && SuperMap.Event.observers) {
      for (var cacheID in SuperMap.Event.observers) {
        var elementObservers = SuperMap.Event.observers[cacheID];

        SuperMap.Event._removeElementObservers.apply(this, [elementObservers]);
      }

      SuperMap.Event.observers = false;
    }
  },
  CLASS_NAME: "SuperMap.Event"
};
SuperMap.Event = Event;
/* prevent memory leaks in IE */

SuperMap.Event.observe(window, 'unload', SuperMap.Event.unloadCache, false);
// CONCATENATED MODULE: ./src/common/commontypes/Events.js
function Events_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Events_typeof = function _typeof(obj) { return typeof obj; }; } else { Events_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Events_typeof(obj); }

function Events_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Events_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Events_createClass(Constructor, protoProps, staticProps) { if (protoProps) Events_defineProperties(Constructor.prototype, protoProps); if (staticProps) Events_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.Events
 * @classdesc äºä»¶ç±»ã
 * @param {Object} object - å½åäºä»¶å¯¹è±¡è¢«æ·»å å°ç JS å¯¹è±¡ã
 * @param {HTMLElement} element - ååºæµè§å¨äºä»¶ç DOM åç´ ã
 * @param {Array.<string>} eventTypes - èªå®ä¹åºç¨äºä»¶çæ°ç»ã
 * @param {boolean} [fallThrough=false] - æ¯å¦åè®¸äºä»¶å¤çä¹ååä¸ä¼ éï¼åæ³¡ï¼ï¼ä¸º false çæ¶åé»æ­¢äºä»¶åæ³¡ã
 * @param {Object} options - äºä»¶å¯¹è±¡éé¡¹ã
 */

var Events = /*#__PURE__*/function () {
  function Events(object, element, eventTypes, fallThrough, options) {
    Events_classCallCheck(this, Events);

    /**
     * @member {Array.<string>} SuperMap.Events.prototype.BROWSER_EVENTS
     * @description æ¯æçäºä»¶ã
     * @constant
     * @default [
     "mouseover", "mouseout","mousedown", "mouseup", "mousemove",
     "click", "dblclick", "rightclick", "dblrightclick","resize",
     "focus", "blur","touchstart", "touchmove", "touchend","keydown",
     "MSPointerDown", "MSPointerUp", "pointerdown", "pointerup",
     "MSGestureStart", "MSGestureChange", "MSGestureEnd","contextmenu"
     ]
     */
    this.BROWSER_EVENTS = ["mouseover", "mouseout", "mousedown", "mouseup", "mousemove", "click", "dblclick", "rightclick", "dblrightclick", "resize", "focus", "blur", "touchstart", "touchmove", "touchend", "keydown", "MSPointerDown", "MSPointerUp", "pointerdown", "pointerup", "MSGestureStart", "MSGestureChange", "MSGestureEnd", "contextmenu"];
    /**
     * @member {Object} SuperMap.Events.prototype.listeners
     * @description Hashtable of Array(function): events listener functions
     */

    this.listeners = {};
    /**
     * @member {Object} SuperMap.Events.prototype.object
     * @description  åå¸åºç¨ç¨åºäºä»¶çå¯¹è±¡ã
     */

    this.object = object;
    /**
     * @member {HTMLElement} SuperMap.Events.prototype.element
     * @description æ¥åæµè§å¨äºä»¶ç DOM èç¹ã
     */

    this.element = null;
    /**
     * @member {Array.<string>} SuperMap.Events.prototype.eventTypes
     * @description æ¯æçäºä»¶ç±»ååè¡¨ã
     */

    this.eventTypes = [];
    /**
     * @member {function} SuperMap.Events.prototype.eventHandler
     * @description ç»å®å¨åç´ ä¸çäºä»¶å¤çå¨å¯¹è±¡ã
     */

    this.eventHandler = null;
    /**
     * @member {boolean} [SuperMap.Events.prototype.fallThrough=false]
     * @description æ¯å¦åè®¸äºä»¶å¤çä¹ååä¸ä¼ éï¼åæ³¡ï¼ï¼ä¸º false çæ¶åé»æ­¢äºä»¶åæ³¡ã
     */

    this.fallThrough = fallThrough;
    /**
     * @member {boolean} [SuperMap.Events.prototype.includeXY=false]
     * @description å¤æ­æ¯å¦è®© xy å±æ§èªå¨åå»ºå°æµè§å¨ä¸çé¼ æ äºä»¶ï¼ä¸è¬è®¾ç½®ä¸º falseï¼å¦æè®¾ç½®ä¸º trueï¼é¼ æ äºä»¶å°ä¼å¨äºä»¶ä¼ éè¿ç¨ä¸­èªå¨äº§ç xy å±æ§ã
     *              å¯æ ¹æ®äºä»¶å¯¹è±¡ç 'evt.object' å±æ§å¨ç¸å³çäºä»¶å¥æä¸è°ç¨ getMousePosition å½æ°ãè¿ä¸ªéé¡¹ä¹ æ¯é»è®¤ä¸º false çåå å¨äºï¼å½åå»ºä¸ä¸ª
     *              äºä»¶å¯¹è±¡ï¼å¶ä¸»è¦ç®çæ¯ç®¡çãå¨ä¸ä¸ª div çç¸å¯¹å®ä½çé¼ æ äºä»¶ï¼å°å¶è®¾ä¸º true ä¹æ¯ææä¹çãè¿ä¸ªéé¡¹ä¹å¯ä»¥ç¨æ¥æ§å¶æ¯å¦æµæ¶ç¼å­ãå¦æ
     *              è®¾ä¸º false ä¸æµæ¶ï¼å¦æè®¾ä¸º trueï¼ç¨ this.clearMouseCache() æ¸é¤ç¼å­åç§»ï¼è¾¹çåç´ åç§»ï¼åç´ å¨é¡µé¢çä½ç½®åç§»ï¼ã
     * @example
     *  function named(evt) {
     *        this.xy = this.object.events.getMousePosition(evt);
     *  }
     */

    this.includeXY = false;
    /**
     * @member {Object} SuperMap.Events.prototype.extensions
     * @description äºä»¶æ©å±ãKeys ä»£è¡¨äºä»¶ç±»åï¼values ä»£è¡¨äºä»¶å¯¹è±¡ã
     * @example
     * ä»¥æ©å± "foostart" å "fooend" äºä»¶ä¸ºä¾ãå±ç¤ºæ¿æ¢ css å±æ§ä¸º foo çåç´ ç click äºä»¶ã
     *
     *   SuperMap.Events.foostart = SuperMap.Class({
    *       initialize: function(target) {
    *           this.target = target;
    *           this.target.register("click", this, this.doStuff, {extension: true});
    *           // only required if extension provides more than one event type
    *           this.target.extensions["foostart"] = true;
    *           this.target.extensions["fooend"] = true;
    *       },
    *       destroy: function() {
    *           var target = this.target;
    *           target.unregister("click", this, this.doStuff);
    *           delete this.target;
    *           // only required if extension provides more than one event type
    *           delete target.extensions["foostart"];
    *           delete target.extensions["fooend"];
    *       },
    *       doStuff: function(evt) {
    *           var propagate = true;
    *           if (SuperMap.Event.element(evt).className === "foo") {
    *               propagate = false;
    *               var target = this.target;
    *               target.triggerEvent("foostart");
    *               window.setTimeout(function() {
    *                   target.triggerEvent("fooend");
    *               }, 1000);
    *           }
    *           return propagate;
    *       }
    *   });
     *   // only required if extension provides more than one event type
     *   SuperMap.Events.fooend = SuperMap.Events.foostart;
     */

    this.extensions = {};
    /**
     * @member {Object} SuperMap.Events.prototype.extensionCount
     */

    this.extensionCount = {};
    /**
     * @member {Object} SuperMap.Events.prototype.clearMouseListener
     */

    this.clearMouseListener = null;
    Util.extend(this, options);

    if (eventTypes != null) {
      for (var i = 0, len = eventTypes.length; i < len; i++) {
        this.addEventType(eventTypes[i]);
      }
    }

    if (element != null) {
      this.attachToElement(element);
    }

    this.CLASS_NAME = "SuperMap.Events";
  }
  /**
   * @function SuperMap.Events.prototype.destroy
   * @description ç§»é¤å½åè¦ç´  element ä¸çææäºä»¶çå¬åå¤çã
   */


  Events_createClass(Events, [{
    key: "destroy",
    value: function destroy() {
      for (var e in this.extensions) {
        if (typeof this.extensions[e] !== "boolean") {
          this.extensions[e].destroy();
        }
      }

      this.extensions = null;

      if (this.element) {
        Event.stopObservingElement(this.element);

        if (this.element.hasScrollEvent) {
          Event.stopObserving(window, "scroll", this.clearMouseListener);
        }
      }

      this.element = null;
      this.listeners = null;
      this.object = null;
      this.eventTypes = null;
      this.fallThrough = null;
      this.eventHandler = null;
    }
    /**
     * @function SuperMap.Events.prototype.addEventType
     * @description å¨æ­¤äºä»¶å¯¹è±¡ä¸­æ·»å æ°çäºä»¶ç±»åï¼å¦æè¿ä¸ªäºä»¶ç±»åå·²ç»æ·»å è¿äºï¼åä¸åä»»ä½äºæã
     * @param {string} eventName - äºä»¶åã
     */

  }, {
    key: "addEventType",
    value: function addEventType(eventName) {
      if (!this.listeners[eventName]) {
        this.eventTypes.push(eventName);
        this.listeners[eventName] = [];
      }
    }
    /**
     * @function SuperMap.Events.prototype.attachToElement
     * @description ç» DOM åç´ ç»å®æµè§å¨äºä»¶ã
     * @param {HTMLDOMElement} element - ç»å®æµè§å¨äºä»¶ç DOM åç´ ã
     */

  }, {
    key: "attachToElement",
    value: function attachToElement(element) {
      if (this.element) {
        Event.stopObservingElement(this.element);
      } else {
        // keep a bound copy of handleBrowserEvent() so that we can
        // pass the same function to both Event.observe() and .stopObserving()
        this.eventHandler = FunctionExt.bindAsEventListener(this.handleBrowserEvent, this); // to be used with observe and stopObserving

        this.clearMouseListener = FunctionExt.bind(this.clearMouseCache, this);
      }

      this.element = element;

      for (var i = 0, len = this.BROWSER_EVENTS.length; i < len; i++) {
        var eventType = this.BROWSER_EVENTS[i]; // every browser event has a corresponding application event
        // (whether it's listened for or not).

        this.addEventType(eventType); // use Prototype to register the event cross-browser

        Event.observe(element, eventType, this.eventHandler);
      } // disable dragstart in IE so that mousedown/move/up works normally


      Event.observe(element, "dragstart", Event.stop);
    }
    /**
     * @function SuperMap.Events.prototype.on
     * @description å¨ä¸ä¸ªç¸åçèå´åæ³¨åçå¬å¨çæ¹æ³ï¼æ­¤æ¹æ³è°ç¨ register å½æ°ã
     * @example
     * // æ³¨åä¸ä¸ª "loadstart" çå¬äºä»¶
     * events.on({"loadstart": loadStartListener});
     *
     * // åæ ·æ³¨åä¸ä¸ª "loadstart" çå¬äºä»¶
     * events.register("loadstart", undefined, loadStartListener);
     *
     * // åæ¶ä¸ºå¯¹è±¡æ³¨åå¤ä¸ªçå¬äºä»¶
     * events.on({
     *     "loadstart": loadStartListener,
     *     "loadend": loadEndListener,
     *     scope: object
     * });
     *
     * // åæ¶ä¸ºå¯¹è±¡æ³¨åå¤ä¸ªçå¬äºä»¶ï¼å¤æ¬¡è°ç¨ register æ¹æ³
     * events.register("loadstart", object, loadStartListener);
     * events.register("loadend", object, loadEndListener);
     *
     *
     * @param {Object} object - æ·»å çå¬çå¯¹è±¡ã
     */

  }, {
    key: "on",
    value: function on(object) {
      for (var type in object) {
        if (type !== "scope" && object.hasOwnProperty(type)) {
          this.register(type, object.scope, object[type]);
        }
      }
    }
    /**
     * @function SuperMap.Events.prototype.register
     * @description å¨äºä»¶å¯¹è±¡ä¸æ³¨åä¸ä¸ªäºä»¶ãå½äºä»¶è¢«è§¦åæ¶ï¼'func' å½æ°è¢«è°ç¨ï¼åè®¾æä»¬è§¦åä¸ä¸ªäºä»¶ï¼
     *              æå® SuperMap.Bounds ä½ä¸º "obj"ï¼å½äºä»¶è¢«è§¦åæ¶ï¼åè°å½æ°çä¸ä¸æä½ä¸º Bounds å¯¹è±¡ã
     * @param {string} type - äºä»¶æ³¨åèçåå­ã
     * @param {Object} [obj=this.object] - å¯¹è±¡ç»å®çåè°ã
     * @param {function} [func] - åè°å½æ°ï¼å¦ææ²¡æç¹å®çåè°ï¼åè¿ä¸ªå½æ°ä¸åä»»ä½äºæã
     * @param {(boolean|Object)} [priority] - å½ä¸º true æ¶å°æ°ççå¬å å¨äºä»¶éåçåé¢ã
     */

  }, {
    key: "register",
    value: function register(type, obj, func, priority) {
      if (type in Events && !this.extensions[type]) {
        this.extensions[type] = new Events[type](this);
      }

      if (func != null && Util.indexOf(this.eventTypes, type) !== -1) {
        if (obj == null) {
          obj = this.object;
        }

        var listeners = this.listeners[type];

        if (!listeners) {
          listeners = [];
          this.listeners[type] = listeners;
          this.extensionCount[type] = 0;
        }

        var listener = {
          obj: obj,
          func: func
        };

        if (priority) {
          listeners.splice(this.extensionCount[type], 0, listener);

          if (Events_typeof(priority) === "object" && priority.extension) {
            this.extensionCount[type]++;
          }
        } else {
          listeners.push(listener);
        }
      }
    }
    /**
     * @function SuperMap.Events.prototype.registerPriority
     * @description ç¸åçæ³¨åæ¹æ³ï¼ä½æ¯å¨åé¢å¢å æ°ççå¬èäºä»¶æ¥è¯¢èä»£æ¿å°æ¹æ³çç»æã
     * @param {string} type - äºä»¶æ³¨åèçåå­ã
     * @param {Object} [obj=this.object] - å¯¹è±¡ç»å®æ¹é¢çåè°ã
     * @param {function} [func] - åè°å½æ°ï¼å¦ææ²¡æç¹å®çåè°ï¼åè¿ä¸ªå½æ°ä¸åä»»ä½äºæã
     */

  }, {
    key: "registerPriority",
    value: function registerPriority(type, obj, func) {
      this.register(type, obj, func, true);
    }
    /**
     * @function SuperMap.Events.prototype.un
     * @description å¨ä¸ä¸ªç¸åçèå´ååæ¶æ³¨åçå¬å¨çæ¹æ³ï¼æ­¤æ¹æ³è°ç¨ unregister å½æ°ã
     * @example
     * // ç§»é¤ "loadstart" äºä»¶çå¬
     * events.un({"loadstart": loadStartListener});
     *
     * // ä½¿ç¨ "unregister" æ¹æ³ç§»é¤ "loadstart" äºä»¶çå¬
     * events.unregister("loadstart", undefined, loadStartListener);
     *
     * // åæ¶å¯¹è±¡å¤ä¸ªäºä»¶çå¬
     * events.un({
     *     "loadstart": loadStartListener,
     *     "loadend": loadEndListener,
     *     scope: object
     * });
     *
     * // åæ¶å¯¹è±¡å¤ä¸ªäºä»¶çå¬ï¼å¤æ¬¡è°ç¨unregisteræ¹æ³ã
     * events.unregister("loadstart", object, loadStartListener);
     * events.unregister("loadend", object, loadEndListener);
     *
     * @param {Object} object - ç§»é¤çå¬çå¯¹è±¡ã
     */

  }, {
    key: "un",
    value: function un(object) {
      for (var type in object) {
        if (type !== "scope" && object.hasOwnProperty(type)) {
          this.unregister(type, object.scope, object[type]);
        }
      }
    }
    /**
     * @function SuperMap.Events.prototype.unregister
     * @description åæ¶æ³¨åã
     * @param {string} type - äºä»¶ç±»åã
     * @param {Object} [obj=this.object] - å¯¹è±¡ç»å®æ¹é¢çåè°ã
     * @param {function} [func] - åè°å½æ°ï¼å¦ææ²¡æç¹å®çåè°ï¼åè¿ä¸ªå½æ°ä¸åä»»ä½äºæã
     */

  }, {
    key: "unregister",
    value: function unregister(type, obj, func) {
      if (obj == null) {
        obj = this.object;
      }

      var listeners = this.listeners[type];

      if (listeners != null) {
        for (var i = 0, len = listeners.length; i < len; i++) {
          if (listeners[i].obj === obj && listeners[i].func === func) {
            listeners.splice(i, 1);
            break;
          }
        }
      }
    }
    /**
     * @function SuperMap.Events.prototype.remove
     * @description å é¤æä¸ªäºä»¶ç±»åçææçå¬ï¼å¦æè¯¥äºä»¶ç±»åæ²¡ææ³¨åï¼åä¸åä»»ä½æä½ã
     * @param {string} type - äºä»¶ç±»åã
     */

  }, {
    key: "remove",
    value: function remove(type) {
      if (this.listeners[type] != null) {
        this.listeners[type] = [];
      }
    }
    /**
     * @function SuperMap.Events.prototype.triggerEvent
     * @description è§¦åä¸ä¸ªç¹å®çæ³¨åäºä»¶ã
     * @param {string} type - è§¦åäºä»¶ç±»åã
     * @param {Event} evt - äºä»¶å¯¹è±¡ã
     * @returns {boolean} è¿åçå¬å¯¹è±¡ï¼å¦æè¿åæ¯ falseï¼ååæ­¢çå¬ã
     */

  }, {
    key: "triggerEvent",
    value: function triggerEvent(type, evt) {
      var listeners = this.listeners[type]; // fast path

      if (!listeners || listeners.length == 0) {
        return undefined;
      } // prep evt object with object & div references


      if (evt == null) {
        evt = {};
      }

      evt.object = this.object;
      evt.element = this.element;

      if (!evt.type) {
        evt.type = type;
      } // execute all callbacks registered for specified type
      // get a clone of the listeners array to
      // allow for splicing during callbacks


      listeners = listeners.slice();
      var continueChain;

      for (var i = 0, len = listeners.length; i < len; i++) {
        var callback = listeners[i]; // bind the context to callback.obj

        continueChain = callback.func.apply(callback.obj, [evt]);

        if (continueChain != undefined && continueChain === false) {
          // if callback returns false, execute no more callbacks.
          break;
        }
      } // don't fall through to other DOM elements


      if (!this.fallThrough) {
        Event.stop(evt, true);
      }

      return continueChain;
    }
    /**
     * @function SuperMap.Events.prototype.handleBrowserEvent
     * @description å¯¹ triggerEvent å½æ°çåè£ï¼ç»äºä»¶å¯¹è±¡è®¾ç½®äº xy å±æ§ï¼å³å½åé¼ æ ç¹ç xy åæ ï¼ã
     * @param {Event} evt - äºä»¶å¯¹è±¡ã
     */

  }, {
    key: "handleBrowserEvent",
    value: function handleBrowserEvent(evt) {
      var type = evt.type,
          listeners = this.listeners[type];

      if (!listeners || listeners.length == 0) {
        // noone's listening, bail out
        return;
      } // add clientX & clientY to all events - corresponds to average x, y


      var touches = evt.touches;

      if (touches && touches[0]) {
        var x = 0;
        var y = 0;
        var num = touches.length;
        var touch;

        for (var i = 0; i < num; ++i) {
          touch = touches[i];
          x += touch.clientX;
          y += touch.clientY;
        }

        evt.clientX = x / num;
        evt.clientY = y / num;
      }

      if (this.includeXY) {
        evt.xy = this.getMousePosition(evt);
      }

      this.triggerEvent(type, evt);
    }
    /**
     * @function SuperMap.Events.prototype.clearMouseCache
     * @description æ¸é¤é¼ æ ç¼å­ã
     */

  }, {
    key: "clearMouseCache",
    value: function clearMouseCache() {
      this.element.scrolls = null;
      this.element.lefttop = null;
      var body = document.body;

      if (body && !((body.scrollTop != 0 || body.scrollLeft != 0) && navigator.userAgent.match(/iPhone/i))) {
        this.element.offsets = null;
      }
    }
    /**
     * @function SuperMap.Events.prototype.getMousePosition
     * @param {Event} evt - äºä»¶å¯¹è±¡ã
     * @returns {SuperMap.Pixel} å½åçé¼ æ ç xy åæ ç¹ã
     */

  }, {
    key: "getMousePosition",
    value: function getMousePosition(evt) {
      if (!this.includeXY) {
        this.clearMouseCache();
      } else if (!this.element.hasScrollEvent) {
        Event.observe(window, "scroll", this.clearMouseListener);
        this.element.hasScrollEvent = true;
      }

      if (!this.element.scrolls) {
        var viewportElement = Util.getViewportElement();
        this.element.scrolls = [viewportElement.scrollLeft, viewportElement.scrollTop];
      }

      if (!this.element.lefttop) {
        this.element.lefttop = [document.documentElement.clientLeft || 0, document.documentElement.clientTop || 0];
      }

      if (!this.element.offsets) {
        this.element.offsets = Util.pagePosition(this.element);
      }

      return new Pixel(evt.clientX + this.element.scrolls[0] - this.element.offsets[0] - this.element.lefttop[0], evt.clientY + this.element.scrolls[1] - this.element.offsets[1] - this.element.lefttop[1]);
    }
  }]);

  return Events;
}();
SuperMap.Events = Events;
SuperMap.Events.prototype.BROWSER_EVENTS = ["mouseover", "mouseout", "mousedown", "mouseup", "mousemove", "click", "dblclick", "rightclick", "dblrightclick", "resize", "focus", "blur", "touchstart", "touchmove", "touchend", "keydown", "MSPointerDown", "MSPointerUp", "pointerdown", "pointerup", "MSGestureStart", "MSGestureChange", "MSGestureEnd", "contextmenu"];
// CONCATENATED MODULE: ./src/common/commontypes/Feature.js
function Feature_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Feature_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Feature_createClass(Constructor, protoProps, staticProps) { if (protoProps) Feature_defineProperties(Constructor.prototype, protoProps); if (staticProps) Feature_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.Feature
 * @category BaseTypes Geometry
 * @classdesc è¦ç´ ç±»ç»åäºå°çåå±æ§ï¼Feature ç±»åæ¶å·æ marker å lonlat å±æ§ã
 * @param {SuperMap.Layer} layer - å¾å±ã
 * @param {SuperMap.LonLat} lonlat - ç»çº¬åº¦ã
 * @param {Object} data - æ°æ®å¯¹è±¡ã
 */

var Feature = /*#__PURE__*/function () {
  function Feature(layer, lonlat, data) {
    Feature_classCallCheck(this, Feature);

    this.CLASS_NAME = "SuperMap.Feature";
    /**
     * @deprecated
     * @member {SuperMap.Layer} SuperMap.Feature.prototype.layer
     * @description å¾å±ã
     */

    this.layer = layer;
    /**
     * @member {string} SuperMap.Feature.prototype.id
     * @description è¦ç´  IDã
     */

    this.id = Util.createUniqueID(this.CLASS_NAME + "_");
    /**
     * @member {SuperMap.LonLat} SuperMap.Feature.prototype.lonlat
     * @description ç»çº¬åº¦ã
     *
     */

    this.lonlat = lonlat;
    /**
     * @member {Object} SuperMap.Feature.prototype.data
     * @description æ°æ®å¯¹è±¡ã
     */

    this.data = data != null ? data : {};
  }
  /**
   * @function SuperMap.Feature.prototype.destroy
   * @description éæ¾ç¸å³èµæºã
   */


  Feature_createClass(Feature, [{
    key: "destroy",
    value: function destroy() {
      this.id = null;
      this.lonlat = null;
      this.data = null;
    }
  }]);

  return Feature;
}();
SuperMap.Feature = Feature;
// CONCATENATED MODULE: ./src/common/commontypes/Vector.js
function Vector_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Vector_typeof = function _typeof(obj) { return typeof obj; }; } else { Vector_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Vector_typeof(obj); }

function Vector_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Vector_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Vector_createClass(Constructor, protoProps, staticProps) { if (protoProps) Vector_defineProperties(Constructor.prototype, protoProps); if (staticProps) Vector_defineProperties(Constructor, staticProps); return Constructor; }

function Vector_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { Vector_get = Reflect.get; } else { Vector_get = function _get(target, property, receiver) { var base = Vector_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return Vector_get(target, property, receiver || target); }

function Vector_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = Vector_getPrototypeOf(object); if (object === null) break; } return object; }

function Vector_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Vector_setPrototypeOf(subClass, superClass); }

function Vector_setPrototypeOf(o, p) { Vector_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Vector_setPrototypeOf(o, p); }

function Vector_createSuper(Derived) { var hasNativeReflectConstruct = Vector_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Vector_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Vector_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Vector_possibleConstructorReturn(this, result); }; }

function Vector_possibleConstructorReturn(self, call) { if (call && (Vector_typeof(call) === "object" || typeof call === "function")) { return call; } return Vector_assertThisInitialized(self); }

function Vector_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Vector_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Vector_getPrototypeOf(o) { Vector_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Vector_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.Feature.Vector
 * @category BaseTypes Geometry
 * @classdesc ç¢éè¦ç´ ç±»ãè¯¥ç±»å·æ Geometry å±æ§å­æ¾å ä½ä¿¡æ¯ï¼
 * attributes å±æ§å­æ¾éå ä½ä¿¡æ¯ï¼å¦å¤è¿åå«äº style å±æ§ï¼ç¨æ¥å®ä¹ç¢éè¦ç´ çæ ·å¼ï¼
 * å¶ä¸­ï¼é»è®¤çæ ·å¼å¨ {@link SuperMap.Feature.Vector.style} ç±»ä¸­å®ä¹ï¼å¦ææ²¡æç¹å«çæå®å°ä½¿ç¨é»è®¤çæ ·å¼ã
 * @extends {SuperMap.Feature}
 * @param {SuperMap.Geometry} geometry - ä»£è¡¨è¦ç´ çå ä½å½¢ç¶ã
 * @param {Object} [attributes] - æè¿°è¦ç´ çä»»æçå¯åºååå±æ§ï¼å°è¦æ å°å° attributes å±æ§ä¸­çå¯¹è±¡ã
 * @param {Object} [style] - æ ·å¼å¯¹è±¡ã
 * @example
 * var geometry = new SuperMap.Geometry.Point(-115,10);
 *  var style = {
     *      strokeColor:"#339933",
     *      strokeOpacity:1,
     *      strokeWidth:3,
     *      pointRadius:6
     *  }
 *  var pointFeature = new SuperMap.Feature.Vector(geometry,null,style);
 *  vectorLayer.addFeatures(pointFeature);
 */

var Vector = /*#__PURE__*/function (_Feature) {
  Vector_inherits(Vector, _Feature);

  var _super = Vector_createSuper(Vector);

  function Vector(geometry, attributes, style) {
    var _this;

    Vector_classCallCheck(this, Vector);

    _this = _super.call(this, null, null, attributes);
    /**
     * @member {string} SuperMap.Feature.Vector.prototype.fid
     * @description fid
     */

    _this.fid = null;
    /**
     * @member {SuperMap.Geometry} SuperMap.Feature.Vector.prototype.geometry
     * @description è¯¥å±æ§ç¨äºå­æ¾å ä½ä¿¡æ¯ã
     */

    _this.geometry = geometry ? geometry : null;
    /**
     * @member {Object} SuperMap.Feature.Vector.prototype.attributes
     * @description æè¿°è¦ç´ çä»»æçå¯åºååå±æ§ã
     */

    _this.attributes = {};

    if (attributes) {
      _this.attributes = Util.extend(_this.attributes, attributes);
    }
    /**
     * @member {SuperMap.Bounds} SuperMap.Feature.Vector.prototype.bounds
     * @description The box bounding that feature's geometry, that
     *     property can be set by an <SuperMap.Format> object when
     *     deserializing the feature, so in most cases it represents an
     *     information set by the server.
     */


    _this.bounds = null;
    /**
     * @member {string} SuperMap.Feature.Vector.prototype.state
     * @description state
     */

    _this.state = null;
    /**
     * @member {Object} SuperMap.Feature.Vector.prototype.style
     * @description è¦ç´ çæ ·å¼å±æ§ï¼å°å¾æ¥è¯¢è¿åç feature ç styleï¼8C åä¸ºnullã
     */

    _this.style = style ? style : null;
    /**
     * @member {string} SuperMap.Feature.Vector.prototype.url 
     * @description å¦æè®¾ç½®äºè¿ä¸ªå±æ§ï¼å¨æ´æ°æèå é¤è¦ç´ æ¶éè¦èè {@link SuperMap.HTTP} ã
     */

    _this.url = null;
    _this.lonlat = null;
    _this.CLASS_NAME = "SuperMap.Feature.Vector"; // TRASH THIS

    SuperMap.State = {
      /** states */
      UNKNOWN: 'Unknown',
      INSERT: 'Insert',
      UPDATE: 'Update',
      DELETE: 'Delete'
    };
    Vector.style = {
      'default': {
        fillColor: "#ee9900",
        fillOpacity: 0.4,
        hoverFillColor: "white",
        hoverFillOpacity: 0.8,
        strokeColor: "#ee9900",
        strokeOpacity: 1,
        strokeWidth: 1,
        strokeLinecap: "round",
        strokeDashstyle: "solid",
        hoverStrokeColor: "red",
        hoverStrokeOpacity: 1,
        hoverStrokeWidth: 0.2,
        pointRadius: 6,
        hoverPointRadius: 1,
        hoverPointUnit: "%",
        pointerEvents: "visiblePainted",
        cursor: "inherit",
        fontColor: "#000000",
        labelAlign: "cm",
        labelOutlineColor: "white",
        labelOutlineWidth: 3
      },
      'select': {
        fillColor: "blue",
        fillOpacity: 0.4,
        hoverFillColor: "white",
        hoverFillOpacity: 0.8,
        strokeColor: "blue",
        strokeOpacity: 1,
        strokeWidth: 2,
        strokeLinecap: "round",
        strokeDashstyle: "solid",
        hoverStrokeColor: "red",
        hoverStrokeOpacity: 1,
        hoverStrokeWidth: 0.2,
        pointRadius: 6,
        hoverPointRadius: 1,
        hoverPointUnit: "%",
        pointerEvents: "visiblePainted",
        cursor: "pointer",
        fontColor: "#000000",
        labelAlign: "cm",
        labelOutlineColor: "white",
        labelOutlineWidth: 3
      },
      'temporary': {
        fillColor: "#66cccc",
        fillOpacity: 0.2,
        hoverFillColor: "white",
        hoverFillOpacity: 0.8,
        strokeColor: "#66cccc",
        strokeOpacity: 1,
        strokeLinecap: "round",
        strokeWidth: 2,
        strokeDashstyle: "solid",
        hoverStrokeColor: "red",
        hoverStrokeOpacity: 1,
        hoverStrokeWidth: 0.2,
        pointRadius: 6,
        hoverPointRadius: 1,
        hoverPointUnit: "%",
        pointerEvents: "visiblePainted",
        //cursor:"inherit",
        cursor: "default",
        fontColor: "#000000",
        labelAlign: "cm",
        labelOutlineColor: "white",
        labelOutlineWidth: 3
      },
      'delete': {
        display: "none"
      }
    };
    return _this;
  }
  /**
   * @function SuperMap.Feature.Vector.prototype.destroy
   * @description nullify references to prevent circular references and memory leaks
   */


  Vector_createClass(Vector, [{
    key: "destroy",
    value: function destroy() {
      if (this.layer) {
        this.layer.removeFeatures(this);
        this.layer = null;
      }

      this.geometry = null;

      Vector_get(Vector_getPrototypeOf(Vector.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.Feature.Vector.prototype.clone
     * @description Create a clone of this vector feature.  Does not set any non-standard
     *     properties.
     * @returns {SuperMap.Feature.Vector} An exact clone of this vector feature.
     */

  }, {
    key: "clone",
    value: function clone() {
      return new Vector(this.geometry ? this.geometry.clone() : null, this.attributes, this.style);
    }
    /**
     * @function SuperMap.Feature.Vector.prototype.toState
     * @description è®¾ç½®æ°ç¶æã
     * @param {string} state - ç¶æã
     */

  }, {
    key: "toState",
    value: function toState(state) {
      if (state === SuperMap.State.UPDATE) {
        switch (this.state) {
          case SuperMap.State.UNKNOWN:
          case SuperMap.State.DELETE:
            this.state = state;
            break;

          case SuperMap.State.UPDATE:
          case SuperMap.State.INSERT:
            break;
        }
      } else if (state === SuperMap.State.INSERT) {
        switch (this.state) {
          case SuperMap.State.UNKNOWN:
            break;

          default:
            this.state = state;
            break;
        }
      } else if (state === SuperMap.State.DELETE) {
        switch (this.state) {
          case SuperMap.State.INSERT:
            // the feature should be destroyed
            break;

          case SuperMap.State.DELETE:
            break;

          case SuperMap.State.UNKNOWN:
          case SuperMap.State.UPDATE:
            this.state = state;
            break;
        }
      } else if (state === SuperMap.State.UNKNOWN) {
        this.state = state;
      }
    }
  }]);

  return Vector;
}(Feature);
/**
 *
 * @typedef {Object} SuperMap.Feature.Vector.style
 * @description SuperMap.features æå¤§éçæ ·å¼å±æ§ï¼å¦ææ²¡æç¹å«çæå®å°ä½¿ç¨é»è®¤çæ ·å¼ï¼
 * å¤§é¨åæ ·å¼éè¿ SVG æ åå®ä¹å±æ§ã
 * - fill properties èµæä»ç»ï¼{@link http://www.w3.org/TR/SVG/painting.html#FillProperties}
 * - stroke properties èµæä»ç»ï¼{@link http://www.w3.org/TR/SVG/painting.html#StrokeProperties}
 * @property {boolean} [fill] - ä¸éè¦å¡«ååè®¾ç½®ä¸º falseã
 * @property {string} [fillColor='#ee9900'] - åå­è¿å¶å¡«åé¢è²ã
 * @property {number} [fillOpacity=0.4] - å¡«åä¸éæåº¦ã
 * @property {boolean} [stroke] - ä¸éè¦æè¾¹åè®¾ä¸º falseã
 * @property {string} [strokeColor='#ee9900'] - åå­è¿å¶æè¾¹é¢è²ã
 * @property {number} [strokeOpacity=0.4] - æè¾¹çä¸éæåº¦(0-1)ã
 * @property {number} [strokeWidth=1] - åç´ æè¾¹å®½åº¦ã
 * @property {string} [strokeLinecap='round'] - strokeLinecap æä¸ç§ç±»å buttï¼roundï¼squareã
 * @property {string} [strokeDashstyle='solid'] - æ dotï¼dashï¼dashdotï¼longdashï¼longdashdotï¼solid å ç§æ ·å¼ã
 * @property {boolean} [graphic] - ä¸éè¦åè®¾ç½®ä¸º falseã
 * @property {number} [pointRadius=6] - åç´ ç¹åå¾ã
 * @property {string} [pointerEvents='visiblePainted'] - pointerEventsã
 * @property {string} [cursor] - cursorã
 * @property {boolean} [allowRotate='false'] - æ¯å¦åè®¸å¾æ éçè¿è¡æ¹åæè½¬ãç¨äºæ¶ç©ºæ°æ®å¾å±ã
 * @property {string} [externalGraphic] - è¿æ¥å°ç¨æ¥æ¸²æç¹çå¤é¨çå¾å½¢ã
 * @property {number} [graphicWidth] - å¤é¨å¾è¡¨çåç´ å®½åº¦ã
 * @property {number} [graphicHeight] - å¤é¨å¾è¡¨çé«å®½åº¦ã
 * @property {number} [graphicOpacity] - å¤é¨å¾è¡¨çä¸éæåº¦(0-1)ã
 * @property {number} [graphicXOffset] - å¤é¨å¾è¡¨æ²¿çxæ¹åçåç§»éã
 * @property {number} [graphicYOffset] - å¤é¨å¾è¡¨æ²¿çyæ¹åçåç§»é Pixelã
 * @property {number} [rotation] - ä¸ä¸ªå¾è¡¨æ²¿çå¶ä¸­å¿ç¹ï¼æèåç§»ä¸­å¿æå®ç¹ï¼å¨é¡ºæ¶éæ¹åæè½¬ã
 * @property {number} [graphicZIndex] - æ¸²ææ¶ä½¿ç¨çç´¢å¼å¼ã
 * @property {string} [graphicName='circle'] - æ¸²æç¹æ¶å¾æ ä½¿ç¨çåå­ãæ¯æ"circle" , "square", "star", "x", "cross", "triangle"ã
 * @property {string} [graphicTitle] - å¤é¨å¾è¡¨çæç¤ºæ¡ã
 * @property {string} [backgroundGraphic] - å¤é¨å¾è¡¨çèæ¯ã
 * @property {number} [backgroundGraphicZIndex] - èæ¯å¾æ¸²ææ¶ä½¿ç¨çç´¢å¼å¼ã
 * @property {number} [backgroundXOffset] - èæ¯å¾å¨ x è½´çåç§»éã
 * @property {number} [backgroundYOffset] - èæ¯å¾å¨ y è½´çåç§»éã
 * @property {number} [backgroundHeight] - èæ¯å¾çé«åº¦ãå¦ææ²¡æè®¾ç½®ï¼å°ç¨ graphicHeightã
 * @property {number} [backgroundWidth] - èæ¯å¾çå®½åº¦ãå¦ææ²¡æè®¾ç½®ï¼å°ç¨ graphicWidthã
 * @property {boolean} [isUnicode=false] - è¿ä¸ªå±æ§è¦éå label å±æ§æ¥ç¨ï¼å½ä¸º trueæ¶ï¼label å°±å¯ä»¥ä½¿ç¨ unicode ç¼ç ï¼
 * æ¯å¦ "a" ç unicode åå­è¿å¶ç¼ç ä¸º 61ï¼å label å±æ§å¯ä»¥ä¸º "&#x61;",å¶ä¸­ "&#" ä¸ºåç¼ï¼æ å¿è¿ä¸ªä¸º unicode ç¼ç ï¼
 * "x" æ¯æ 16 è¿å¶,è¿æ¶é¡µé¢æ¾ç¤ºçæ¯ "a"ï¼å½æ­¤å¼ä¸º false çæ¶åï¼label çåå®¹ä¼è¢«ç´æ¥è¾åºï¼
 * æ¯å¦ï¼label ä¸º "&#x61;"ï¼è¿æ¶é¡µé¢æ¾ç¤ºçä¹æ¯ "&#x61;"ã
 * @property {string} [label] - å¯éçæ ç­¾ææ¬ã
 * @property {string} [labelAlign='cm'] - æ ç­¾å¯¹é½ï¼æ¯ç±ä¸¤ä¸ªå­ç¬¦ç»æçå­ç¬¦ä¸²ï¼å¦ï¼"lt", "cm", "rb"ï¼
 * å¶ä¸­ç¬¬ä¸ä¸ªå­ç¬¦ä»£è¡¨æ°´å¹³æ¹åä¸çå¯¹é½ï¼"l"=left, "c"=center, "r"=rightï¼
 * ç¬¬äºä¸ªå­ç¬¦ä»£è¡¨åç´æ¹åä¸çå¯¹é½ï¼"t"=top, "m"=middle, "b"=bottomã
 * @property {number} [labelXOffset] - æ ç­¾å¨ x è½´æ¹åçåç§»éã
 * @property {number} [labelYOffset] - æ ç­¾å¨ y è½´æ¹åçåç§»éã
 * @property {boolean} [labelSelect=false] - å¦æè®¾ä¸º trueï¼æ ç­¾å¯ä»¥éç¨ SelectFeature æè similar æ§ä»¶ã
 * @property {string} [fontColor='#000000'] - æ ç­¾å­ä½é¢è²ã
 * @property {number} [fontOpacity] - æ ç­¾éæåº¦ (0-1)ã
 * @property {string} [fontFamily] - æ ç­¾çå­ä½ç±»åã
 * @property {string} [fontSize] - æ ç­¾çå­ä½å¤§å°ã
 * @property {string} [fontStyle] - æ ç­¾çå­ä½æ ·å¼ã
 * @property {string} [fontWeight] - æ ç­¾çå­ä½ç²ç»ã
 * @property {string} [display] - å¦æ display å±æ§è®¾ç½®ä¸º ânoneâï¼ç¬¦å·å°æ²¡æä»»ä½ææã
 * @example
 *  // labelçç¨æ³å¦ä¸ï¼
 *  function addGeoTest(){
 *  var geometry = new SuperMap.Geometry.Point(105, 35);
 *  var pointFeature = new SuperMap.Feature.Vector(geometry);
 *  var styleTest = {
 *        label:"supermap",
 *        fontColor:"#0000ff",
 *        fontOpacity:"0.5",
 *        fontFamily:"é¶ä¹¦",
 *        fontSize:"8em",
 *        fontWeight:"bold",
 *        fontStyle:"italic",
 *        labelSelect:"true",
 *     }
 *           pointFeature.style = styleTest;
 *          vectorLayer.addFeatures([pointFeature]);
 * }
     */

SuperMap.Feature.Vector = Vector;
// CONCATENATED MODULE: ./src/common/commontypes/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




























// CONCATENATED MODULE: ./src/common/format/Format.js
function Format_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Format_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Format_createClass(Constructor, protoProps, staticProps) { if (protoProps) Format_defineProperties(Constructor.prototype, protoProps); if (staticProps) Format_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.Format
 * @classdesc è¯»ååç§æ ¼å¼çæ ¼å¼ç±»åºç±»ãå¶å­ç±»åºè¯¥åå«å¹¶å®ç° read å write æ¹æ³ã
 * @category BaseTypes Format
 * @param {Object} options - å¯éåæ°ã
 * @param {boolean} [options.keepData=false] - å¦æè®¾ç½®ä¸º trueï¼ data å±æ§ä¼æåè¢«è§£æçå¯¹è±¡ï¼ä¾å¦ JSON æ xml æ°æ®å¯¹è±¡ï¼ã
 * @param {Object} [options.data] - å½ keepData å±æ§è®¾ç½®ä¸º trueï¼è¿æ¯ä¼ éç» read æä½çè¦è¢«è§£æçå­ç¬¦ä¸²ã
 */

var Format = /*#__PURE__*/function () {
  function Format(options) {
    Format_classCallCheck(this, Format);

    /**
     * @member {Object} SuperMap.Format.prototype.data 
     * @description å½ keepData å±æ§è®¾ç½®ä¸º trueï¼è¿æ¯ä¼ éç» read æä½çè¦è¢«è§£æçå­ç¬¦ä¸²ã
     */
    this.data = null;
    /**
     * APIProperty: keepData
     * @member {Object} [SuperMap.Format.prototype.keepData=false]
     * @description ä¿ææè¿è¯»å°çæ°æ®çå¼ç¨ï¼éè¿ <data> å±æ§ï¼ã
     */

    this.keepData = false;
    Util.extend(this, options);
    this.options = options;
    this.CLASS_NAME = "SuperMap.Format";
  }
  /**
   * @function SuperMap.Format.prototype.destroy
   * @description éæ¯è¯¥æ ¼å¼ç±»ï¼éæ¾ç¸å³èµæºã
   */


  Format_createClass(Format, [{
    key: "destroy",
    value: function destroy() {//ç¨æ¥éæ¯è¯¥æ ¼å¼ç±»ï¼éæ¾ç¸å³èµæº
    }
    /**
     * @function SuperMap.Format.prototype.read
     * @description æ¥ä»å­ç¬¦ä¸²ä¸­è¯»åæ°æ®ã
     * @param {string} data - è¯»åçæ°æ®ã
     */

  }, {
    key: "read",
    value: function read(data) {// eslint-disable-line no-unused-vars
      //ç¨æ¥ä»å­ç¬¦ä¸²ä¸­è¯»åæ°æ®
    }
    /**
     * @function SuperMap.Format.prototype.write
     * @description å°å¯¹è±¡åæå­ç¬¦ä¸²ã
     * @param {Object} object - å¯åºååçå¯¹è±¡ã
     * @returns {string} å¯¹è±¡è¢«åæå­ç¬¦ä¸²ã
     */

  }, {
    key: "write",
    value: function write(object) {// eslint-disable-line no-unused-vars
      //ç¨æ¥åå­ç¬¦ä¸²
    }
  }]);

  return Format;
}();
SuperMap.Format = SuperMap.Format || Format;
// CONCATENATED MODULE: ./src/common/format/JSON.js
function JSON_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { JSON_typeof = function _typeof(obj) { return typeof obj; }; } else { JSON_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return JSON_typeof(obj); }

function JSON_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function JSON_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function JSON_createClass(Constructor, protoProps, staticProps) { if (protoProps) JSON_defineProperties(Constructor.prototype, protoProps); if (staticProps) JSON_defineProperties(Constructor, staticProps); return Constructor; }

function JSON_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) JSON_setPrototypeOf(subClass, superClass); }

function JSON_setPrototypeOf(o, p) { JSON_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return JSON_setPrototypeOf(o, p); }

function JSON_createSuper(Derived) { var hasNativeReflectConstruct = JSON_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = JSON_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = JSON_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return JSON_possibleConstructorReturn(this, result); }; }

function JSON_possibleConstructorReturn(self, call) { if (call && (JSON_typeof(call) === "object" || typeof call === "function")) { return call; } return JSON_assertThisInitialized(self); }

function JSON_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function JSON_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function JSON_getPrototypeOf(o) { JSON_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return JSON_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.Format.JSON
 * @classdesc å®å¨çè¯»å JSON çè§£æç±»ãä½¿ç¨ {@link SuperMap.Format.JSON} æé å½æ°åå»ºæ°å®ä¾ã
 * @category BaseTypes Format
 * @param {Object} [options] - åæ°ã
 * @param {string} [options.indent="    "] - ç¨äºæ ¼å¼åè¾åºï¼indent å­ç¬¦ä¸²ä¼å¨æ¯æ¬¡ç¼©è¿çæ¶åä½¿ç¨ä¸æ¬¡ã
 * @param {string} [options.space=" "] - ç¨äºæ ¼å¼åè¾åºï¼space å­ç¬¦ä¸²ä¼å¨åå¼å¯¹ç ":" åè¾¹æ·»å ã
 * @param {string} [options.newline="\n"] - ç¨äºæ ¼å¼åè¾åº, newline å­ç¬¦ä¸²ä¼ç¨å¨æ¯ä¸ä¸ªåå¼å¯¹ææ°ç»é¡¹æ«å°¾ã
 * @param {number} [options.level=0] - ç¨äºæ ¼å¼åè¾åº, è¡¨ç¤ºçæ¯ç¼©è¿çº§å«ã
 * @param {boolean} [options.pretty=false] - æ¯å¦å¨åºååçæ¶åä½¿ç¨é¢å¤çç©ºæ ¼æ§å¶ç»æãå¨ write æ¹æ³ä¸­ä½¿ç¨ã
 * @param {boolean} [options.nativeJSON] - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @extends {SuperMap.Format}
 */

var JSONFormat = /*#__PURE__*/function (_Format) {
  JSON_inherits(JSONFormat, _Format);

  var _super = JSON_createSuper(JSONFormat);

  function JSONFormat(options) {
    var _this;

    JSON_classCallCheck(this, JSONFormat);

    _this = _super.call(this, options);
    /**
     * @member {string} [SuperMap.Format.JSON.prototype.indent="    "]
     * @description ç¨äºæ ¼å¼åè¾åºï¼indent å­ç¬¦ä¸²ä¼å¨æ¯æ¬¡ç¼©è¿çæ¶åä½¿ç¨ä¸æ¬¡ã
     */

    _this.indent = "    ";
    /**
     * @member {string} [SuperMap.Format.JSON.prototype.space=" "]
     * @description ç¨äºæ ¼å¼åè¾åºï¼space å­ç¬¦ä¸²ä¼å¨åå¼å¯¹ç ":" åè¾¹æ·»å ã
     */

    _this.space = " ";
    /**
     * @member {string} [SuperMap.Format.JSON.prototype.newline="\n"]
     * @description ç¨äºæ ¼å¼åè¾åº, newline å­ç¬¦ä¸²ä¼ç¨å¨æ¯ä¸ä¸ªåå¼å¯¹ææ°ç»é¡¹æ«å°¾ã
     */

    _this.newline = "\n";
    /**
     * @member {integer} [SuperMap.Format.JSON.prototype.level=0] 
     * @description ç¨äºæ ¼å¼åè¾åº, è¡¨ç¤ºçæ¯ç¼©è¿çº§å«ã
     */

    _this.level = 0;
    /**
     * @member {boolean} [SuperMap.Format.JSON.prototype.pretty=false]
     * @description æ¯å¦å¨åºååçæ¶åä½¿ç¨é¢å¤çç©ºæ ¼æ§å¶ç»æãå¨ write æ¹æ³ä¸­ä½¿ç¨ã
     */

    _this.pretty = false;
    /**
     * @member {boolean} SuperMap.Format.JSON.prototype.nativeJSON 
     * @description å¤æ­æµè§å¨æ¯å¦åçæ¯æ JSON æ ¼å¼æ°æ®ã
     */

    _this.nativeJSON = function () {
      return !!(window.JSON && typeof JSON.parse === "function" && typeof JSON.stringify === "function");
    }();

    _this.CLASS_NAME = "SuperMap.Format.JSON";
    /**
     * @member SuperMap.Format.JSON.prototype.serialize
     * @description æä¾ä¸äºç±»åå¯¹è±¡è½¬ JSON å­ç¬¦ä¸²çæ¹æ³ã
     */

    _this.serialize = {
      /**
       * @function SuperMap.Format.JSON.serialize.object
       * @description æå¯¹è±¡è½¬æ¢ä¸º JSON å­ç¬¦ä¸²ã
       * @param {Object} object - å¯åºååçå¯¹è±¡ã
       * @returns {string} JSON å­ç¬¦ä¸²ã
       */
      'object': function object(_object) {
        // three special objects that we want to treat differently
        if (_object == null) {
          return "null";
        }

        if (_object.constructor === Date) {
          return this.serialize.date.apply(this, [_object]);
        }

        if (_object.constructor === Array) {
          return this.serialize.array.apply(this, [_object]);
        }

        var pieces = ['{'];
        this.level += 1;
        var key, keyJSON, valueJSON;
        var addComma = false;

        for (key in _object) {
          if (_object.hasOwnProperty(key)) {
            // recursive calls need to allow for sub-classing
            keyJSON = this.write.apply(this, [key, this.pretty]);
            valueJSON = this.write.apply(this, [_object[key], this.pretty]);

            if (keyJSON != null && valueJSON != null) {
              if (addComma) {
                pieces.push(',');
              }

              pieces.push(this.writeNewline(), this.writeIndent(), keyJSON, ':', this.writeSpace(), valueJSON);
              addComma = true;
            }
          }
        }

        this.level -= 1;
        pieces.push(this.writeNewline(), this.writeIndent(), '}');
        return pieces.join('');
      },

      /**
       * @function SuperMap.Format.JSON.serialize.array
       * @description ææ°ç»è½¬æ¢æ JSON å­ç¬¦ä¸²ã
       * @param {Array} array - å¯åºååçæ°ç»ã
       * @returns {string} JSON å­ç¬¦ä¸²ã
       */
      'array': function array(_array) {
        var json;
        var pieces = ['['];
        this.level += 1;

        for (var i = 0, len = _array.length; i < len; ++i) {
          // recursive calls need to allow for sub-classing
          json = this.write.apply(this, [_array[i], this.pretty]);

          if (json != null) {
            if (i > 0) {
              pieces.push(',');
            }

            pieces.push(this.writeNewline(), this.writeIndent(), json);
          }
        }

        this.level -= 1;
        pieces.push(this.writeNewline(), this.writeIndent(), ']');
        return pieces.join('');
      },

      /**
       * @function SuperMap.Format.JSON.serialize.string
       * @description æå­ç¬¦ä¸²è½¬æ¢æ JSON å­ç¬¦ä¸²ã
       * @param {string} string - å¯åºååçå­ç¬¦ä¸²ã
       * @returns {string} JSON å­ç¬¦ä¸²ã
       */
      'string': function string(_string) {
        // If the string contains no control characters, no quote characters, and no
        // backslash characters, then we can simply slap some quotes around it.
        // Otherwise we must also replace the offending characters with safe
        // sequences.
        var m = {
          '\b': '\\b',
          '\t': '\\t',
          '\n': '\\n',
          '\f': '\\f',
          '\r': '\\r',
          '"': '\\"',
          '\\': '\\\\'
        };
        /*eslint-disable no-control-regex*/

        if (/["\\\x00-\x1f]/.test(_string)) {
          return '"' + _string.replace(/([\x00-\x1f\\"])/g, function (a, b) {
            var c = m[b];

            if (c) {
              return c;
            }

            c = b.charCodeAt();
            return "\\u00" + Math.floor(c / 16).toString(16) + (c % 16).toString(16);
          }) + '"';
        }

        return '"' + _string + '"';
      },

      /**
       * @function SuperMap.Format.JSON.serialize.number
       * @description ææ°å­è½¬æ¢æ JSON å­ç¬¦ä¸²ã
       * @param {number} number - å¯åºååçæ°å­ã
       * @returns {string} JSON å­ç¬¦ä¸²ã
       */
      'number': function number(_number) {
        return isFinite(_number) ? String(_number) : "null";
      },

      /**
       * @function SuperMap.Format.JSON.serialize.boolean
       * @description Transform a boolean into a JSON string.
       * @param {boolean} bool - The boolean to be serialized.
       * @returns {string} A JSON string representing the boolean.
       */
      'boolean': function boolean(bool) {
        return String(bool);
      },

      /**
       * @function SuperMap.Format.JSON.serialize.object
       * @description å°æ¥æå¯¹è±¡è½¬æ¢æ JSON å­ç¬¦ä¸²ã
       * @param {Date} date - å¯åºååçæ¥æå¯¹è±¡ã
       * @returns {string} JSON å­ç¬¦ä¸²ã
       */
      'date': function date(_date) {
        function format(number) {
          // Format integers to have at least two digits.
          return number < 10 ? '0' + number : number;
        }

        return '"' + _date.getFullYear() + '-' + format(_date.getMonth() + 1) + '-' + format(_date.getDate()) + 'T' + format(_date.getHours()) + ':' + format(_date.getMinutes()) + ':' + format(_date.getSeconds()) + '"';
      }
    };
    return _this;
  }
  /**
   * @function SuperMap.Format.JSON.prototype.read
   * @description å°ä¸ä¸ªç¬¦å JSON ç»æçå­ç¬¦ä¸²è¿è¡è§£æã
   * @param {string} json - ç¬¦å JSON ç»æçå­ç¬¦ä¸²ã
   * @param {function} filter - è¿æ»¤æ¹æ³ï¼æç»ç»æçæ¯ä¸ä¸ªé®å¼å¯¹é½ä¼è°ç¨è¯¥è¿æ»¤æ¹æ³ï¼å¹¶å¨å¯¹åºçå¼çä½ç½®æ¿æ¢æè¯¥æ¹æ³è¿åçå¼ã
   * @returns {Object} å¯¹è±¡ï¼æ°ç»ï¼å­ç¬¦ä¸²ææ°å­ã
   */


  JSON_createClass(JSONFormat, [{
    key: "read",
    value: function read(json, filter) {
      var object;

      if (this.nativeJSON) {
        try {
          object = JSON.parse(json, filter);
        } catch (e) {// Fall through if the regexp test fails.
        }
      }

      if (this.keepData) {
        this.data = object;
      }

      return object;
    }
    /**
     * @function SuperMap.Format.JSON.prototype.write
     * @description åºååä¸ä¸ªå¯¹è±¡å°ä¸ä¸ªç¬¦å JSON æ ¼å¼çå­ç¬¦ä¸²ã
     * @param {(object|string|Array|number|boolean)} value - éè¦è¢«åºååçå¯¹è±¡ï¼æ°ç»ï¼å­ç¬¦ä¸²ï¼æ°å­ï¼å¸å°å¼ã
     * @param {boolean} [pretty=false] - æ¯å¦å¨åºååçæ¶åä½¿ç¨é¢å¤çç©ºæ ¼æ§å¶ç»æãå¨ write æ¹æ³ä¸­ä½¿ç¨ã
     * @returns {string} ç¬¦å JSON æ ¼å¼çå­ç¬¦ä¸²ã
     *
     */

  }, {
    key: "write",
    value: function write(value, pretty) {
      this.pretty = !!pretty;
      var json = null;

      var type = JSON_typeof(value);

      if (this.serialize[type]) {
        try {
          json = !this.pretty && this.nativeJSON ? JSON.stringify(value) : this.serialize[type].apply(this, [value]);
        } catch (err) {//SuperMap.Console.error("Trouble serializing: " + err);
        }
      }

      return json;
    }
    /**
     * @function SuperMap.Format.JSON.prototype.writeIndent
     * @description æ ¹æ®ç¼©è¿çº§å«è¾åºä¸ä¸ªç¼©è¿å­ç¬¦ä¸²ã
     * @private
     * @returns {string} ä¸ä¸ªéå½çç¼©è¿å­ç¬¦ä¸²ã
     */

  }, {
    key: "writeIndent",
    value: function writeIndent() {
      var pieces = [];

      if (this.pretty) {
        for (var i = 0; i < this.level; ++i) {
          pieces.push(this.indent);
        }
      }

      return pieces.join('');
    }
    /**
     * @function SuperMap.Format.JSON.prototype.writeNewline
     * @description å¨æ ¼å¼åè¾åºæ¨¡å¼æåµä¸è¾åºä»£è¡¨æ°ä¸è¡çå­ç¬¦ä¸²ã
     * @private
     * @returns {string} ä»£è¡¨æ°çä¸è¡çå­ç¬¦ä¸²ã
     */

  }, {
    key: "writeNewline",
    value: function writeNewline() {
      return this.pretty ? this.newline : '';
    }
    /**
     * @function SuperMap.Format.JSON.prototype.writeSpace
     * @private
     * @description å¨æ ¼å¼åè¾åºæ¨¡å¼æåµä¸è¾åºä¸ä¸ªä»£è¡¨ç©ºæ ¼çå­ç¬¦ä¸²ã
     * @returns {string} ä¸ä¸ªç©ºæ ¼ã
     */

  }, {
    key: "writeSpace",
    value: function writeSpace() {
      return this.pretty ? this.space : '';
    }
  }]);

  return JSONFormat;
}(Format);
SuperMap.Format.JSON = JSONFormat;
// CONCATENATED MODULE: ./src/common/iServer/ServerColor.js
function ServerColor_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ServerColor_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ServerColor_createClass(Constructor, protoProps, staticProps) { if (protoProps) ServerColor_defineProperties(Constructor.prototype, protoProps); if (staticProps) ServerColor_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @class SuperMap.ServerColor
 * @category iServer Map Theme
 * @classdesc é¢è²ç±»ãè¯¥ç±»ä½¿ç¨ä¸åè²ï¼ RGB ï¼æ¥è¡¨è¾¾é¢è²ã
 * @param {Object} options - åæ°ã
 * @param {number} [options.red=255] - è·åæè®¾ç½®çº¢è²å¼ã
 * @param {number} [options.green=0] - è·åæè®¾ç½®ç»¿è²å¼ã
 * @param {number} [options.blue=0] - è·åæè®¾ç½®èè²å¼ã
 */

var ServerColor = /*#__PURE__*/function () {
  function ServerColor(red, green, blue) {
    ServerColor_classCallCheck(this, ServerColor);

    /**
     * @member {number} [SuperMap.ServerColor.prototype.red=255]
     * @description è·åæè®¾ç½®çº¢è²å¼ã
     */
    this.red = !red && red != 0 ? 255 : red;
    /**
     * @member {number} [SuperMap.ServerColor.prototype.green=0]
     * @description è·åæè®¾ç½®ç»¿è²å¼ã
     */

    this.green = green || 0;
    /**
     * @member {number} [SuperMap.ServerColor.prototype.blue=0]
     * @description è·åæè®¾ç½®èè²å¼ã
     */

    this.blue = blue || 0;
    this.CLASS_NAME = "SuperMap.ServerColor";
  }
  /**
   * @function SuperMap.ServerColor.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ServerColor_createClass(ServerColor, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.red = null;
      me.green = null;
      me.blue = null;
    }
    /**
     * @function SuperMap.ServerColor.formJson
     * @description å° JSON å¯¹è±¡è½¬åä¸º ServerColor å¯¹è±¡ã
     * @param {Object} jsonObject - è¦è½¬æ¢ç JSON å¯¹è±¡ã
     * @returns {SuperMap.ServerColor} è½¬ååç ServerColor å¯¹è±¡ã
     */

  }], [{
    key: "fromJson",
    value: function fromJson(jsonObject) {
      if (!jsonObject) {
        return;
      }

      var color = new ServerColor();
      var red = 255;

      if (jsonObject.red !== null) {
        red = Number(jsonObject.red);
      }

      color.red = red;
      var green = 0;

      if (jsonObject.green !== null) {
        green = Number(jsonObject.green);
      }

      color.green = green;
      var blue = 0;

      if (jsonObject.blue !== null) {
        blue = Number(jsonObject.blue);
      }

      color.blue = blue;
      return color;
    }
  }]);

  return ServerColor;
}();
SuperMap.ServerColor = ServerColor;
// CONCATENATED MODULE: ./src/common/iServer/ServerStyle.js
function ServerStyle_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ServerStyle_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ServerStyle_createClass(Constructor, protoProps, staticProps) { if (protoProps) ServerStyle_defineProperties(Constructor.prototype, protoProps); if (staticProps) ServerStyle_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.ServerStyle
 * @category  iServer Map Theme
 * @classdesc æå¡ç«¯ç¢éè¦ç´ é£æ ¼ç±»ã
 * @description è¯¥ç±»ç¨äºå®ä¹ç¹ç¶ç¬¦å·ãçº¿ç¶ç¬¦å·ãå¡«åç¬¦å·é£æ ¼åå¶ç¸å³å±æ§ã
 * @param {Object} options - åæ°ã
 * @param {SuperMap.FillGradientMode} options.fillGradientMode - æ¸åå¡«åé£æ ¼çæ¸åç±»åã
 * @param {SuperMap.ServerColor} [options.fillBackColor=[255,255,255]] - å¡«åèæ¯é¢è²ã
 * @param {boolean} [options.fillBackOpaque=false] - èæ¯æ¯å¦ä¸éæã
 * @param {SuperMap.ServerColor} [options.fillForeColor=[255,0,0]] - å¡«åé¢è²ã
 * @param {number} [options.fillGradientAngle=0] - æ¸åå¡«åçæè½¬è§åº¦ã
 * @param {number} [options.fillGradientOffsetRatioX=0] - æ¸åå¡«åä¸­å¿ç¹ç¸å¯¹äºå¡«ååºåèå´ä¸­å¿ç¹çæ°´å¹³åç§»ç¾åæ¯ã
 * @param {number} [options.fillGradientOffsetRatioY=0] - å¡«åä¸­å¿ç¹ç¸å¯¹äºå¡«ååºåèå´ä¸­å¿ç¹çåç´åç§»ç¾åæ¯ã
 * @param {number} [options.fillOpaqueRate=100] - å¡«åä¸éæåº¦ã
 * @param {number} [options.fillSymbolID=0] - å¡«åç¬¦å·çç¼ç ã
 * @param {SuperMap.ServerColor} [options.lineColor] - ç¢éè¦ç´ çè¾¹çº¿é¢è²ãé»è®¤ lineColor = new ServerColor(0, 0, 0)ã
 * @param {number} [options.lineSymbolID=0] - çº¿ç¶ç¬¦å·çç¼ç ã
 * @param {number} [options.lineWidth=1] - è¾¹çº¿çå®½åº¦ã
 * @param {number} [options.markerAngle=0] - ç¹ç¶ç¬¦å·çæè½¬è§åº¦ã
 * @param {number} [options.markerSize=1] - ç¹ç¶ç¬¦å·çå¤§å°ã
 * @param {number} [options.markerSymbolID=-1] - ç¹ç¶ç¬¦å·çç¼ç ã
 */

var ServerStyle = /*#__PURE__*/function () {
  function ServerStyle(options) {
    ServerStyle_classCallCheck(this, ServerStyle);

    /**
     * @member {SuperMap.ServerColor} SuperMap.ServerStyle.prototype.fillBackColor
     * @description å¡«åèæ¯é¢è²ãå½å¡«åæ¨¡å¼ä¸ºæ¸åå¡«åæ¶ï¼è¯¥é¢è²ä¸ºå¡«åç»æ­¢è²ã
     */
    this.fillBackColor = new ServerColor(255, 255, 255);
    /**
     * @member {boolean} [SuperMap.ServerStyle.prototype.fillBackOpaque=false]
     * @description èæ¯æ¯å¦ä¸éæãfalse è¡¨ç¤ºéæã
     */

    this.fillBackOpaque = false;
    /**
     * @member {SuperMap.ServerColor} SuperMap.ServerStyle.prototype.fillForeColor
     * @description å¡«åé¢è²ãå½å¡«åæ¨¡å¼ä¸ºæ¸åå¡«åæ¶ï¼è¯¥é¢è²ä¸ºå¡«åèµ·å§é¢è²ã
     */

    this.fillForeColor = new ServerColor(255, 0, 0);
    /**
     * @member {SuperMap.FillGradientMode} SuperMap.ServerStyle.prototype.fillGradientMode
     * @description æ¸åå¡«åé£æ ¼çæ¸åç±»åã
     */

    this.fillGradientMode = null;
    /**
     * @member {number} SuperMap.ServerStyle.prototype.fillGradientAngle -
     * @description æ¸åå¡«åçæè½¬è§åº¦ãåä½ä¸ºåº¦ï¼ç²¾ç¡®å° 0.1 åº¦ï¼éæ¶éæ¹åä¸ºæ­£æ¹åã
     */

    this.fillGradientAngle = 0;
    /**
     * @member {number} SuperMap.ServerStyle.prototype.fillGradientOffsetRatioX
     * @description æ¸åå¡«åä¸­å¿ç¹ç¸å¯¹äºå¡«ååºåèå´ä¸­å¿ç¹çæ°´å¹³åç§»ç¾åæ¯ãå®ä»¬çå³ç³»å¦ä¸ï¼è®¾å¡«ååºåèå´ä¸­å¿ç¹çåæ ä¸ºï¼x0, y0ï¼ï¼
     *              å¡«åä¸­å¿ç¹çåæ ä¸ºï¼x, yï¼ï¼å¡«ååºåèå´çå®½åº¦ä¸º aï¼æ°´å¹³åç§»ç¾åæ¯ä¸º dxï¼å x=x0 + a*dx/100ã
     */

    this.fillGradientOffsetRatioX = 0;
    /**
     * @member {number} SuperMap.ServerStyle.prototype.fillGradientOffsetRatioY
     * @description å¡«åä¸­å¿ç¹ç¸å¯¹äºå¡«ååºåèå´ä¸­å¿ç¹çåç´åç§»ç¾åæ¯ãå®ä»¬çå³ç³»å¦ä¸ï¼<br>
     *              è®¾å¡«ååºåèå´ä¸­å¿ç¹çåæ ä¸ºï¼x0, y0ï¼ï¼å¡«åä¸­å¿ç¹çåæ ä¸ºï¼x, yï¼ï¼å¡«ååºåèå´çé«åº¦ä¸º bï¼åç´åç§»ç¾åæ¯ä¸º dyï¼å y=y0 + b*dx/100ã
     */

    this.fillGradientOffsetRatioY = 0;
    /**
     * @member {number} [SuperMap.ServerStyle.prototype.fillOpaqueRate=100]
     * @description å¡«åä¸éæåº¦ãåæ³å¼ä¸º 0 - 100 çæ°å¼ãå¶ä¸­ä¸º 0 è¡¨ç¤ºå®å¨éæï¼
     *              100 è¡¨ç¤ºå®å¨ä¸éæãèµå¼å°äº 0 æ¶æç§ 0 å¤çï¼å¤§äº 100 æ¶æç§ 100 å¤çã
     */

    this.fillOpaqueRate = 100;
    /**
     * @member {number} SuperMap.ServerStyle.prototype.fillSymbolID
     * @description å¡«åç¬¦å·çç¼ç ãæ­¤ç¼ç ç¨äºå¯ä¸æ è¯åæ®éå¡«åé£æ ¼çå¡«åç¬¦å·ã
     *              å³äºå¡«åç¬¦å·çæ ·å¼ä¸å¯¹åºç ID å·è¯·å¨ SuperMap æ¡é¢è½¯ä»¶ä¸­æ¥æ¾ã
     */

    this.fillSymbolID = 0;
    /**
     * @member {SuperMap.ServerColor} SuperMap.ServerStyle.prototype.lineColor
     * @description ç¢éè¦ç´ çè¾¹çº¿é¢è²ãå¦æç­çº§ç¬¦å·æ¯ç¹ç¬¦å·ï¼ç¹ç¬¦å·çé¢è²ç± lineColor æ§å¶ã
     */

    this.lineColor = new ServerColor(0, 0, 0);
    /**
     * @member {number} [SuperMap.ServerStyle.prototype.lineSymbolID=0]
     * @description çº¿ç¶ç¬¦å·çç¼ç ãæ­¤ç¼ç ç¨äºå¯ä¸æ è¯åæ®éå¡«åé£æ ¼çå¡«åç¬¦å·ã
     *              å³äºçº¿ç¶ç¬¦å·çæ ·å¼ä¸å¯¹åºç ID å·è¯·å¨ SuperMap æ¡é¢è½¯ä»¶ä¸­æ¥æ¾ã
     */

    this.lineSymbolID = 0;
    /**
     * @member {number} [SuperMap.ServerStyle.prototype.lineWidth=1.0]
     * @description è¾¹çº¿çå®½åº¦ãåä½ä¸ºæ¯«ç±³ï¼ç²¾åº¦å° 0.1ã
     */

    this.lineWidth = 1;
    /**
     * @member {number} [SuperMap.ServerStyle.prototype.markerAngle=0]
     * @description ç¹ç¶ç¬¦å·çæè½¬è§åº¦ãä»¥åº¦ä¸ºåä½ï¼ç²¾ç¡®å° 0.1 åº¦ï¼éæ¶éæ¹åä¸ºæ­£æ¹åã
     */

    this.markerAngle = 0;
    /**
     * @member {number} [SuperMap.ServerStyle.prototype.markerSize=1.0]
     * @description ç¹ç¶ç¬¦å·çå¤§å°ãåä½ä¸ºæ¯«ç±³ï¼ç²¾åº¦ä¸º 0.1ãå½è¯¥å±æ§è®¾ç½®ä¸º0æ¶ï¼éç¨ç¬¦å·é»è®¤å¤§å° 1.0 æ¾ç¤ºã
     *              å½è¯¥å±æ§è®¾ç½®ä¸ºéæ³å¼æ¶ï¼äº¤ç±æå¡å¨é»è®¤å¤çã
     */

    this.markerSize = 1;
    /**
     * @member {number} [SuperMap.ServerStyle.prototype.markerSymbolID=-1]
     * @description ç¹ç¶ç¬¦å·çç¼ç ãæ­¤ç¼ç ç¨äºå¯ä¸æ è¯åç¹ç¶ç¬¦å·ã
     *              å³äºçº¿ç¶ç¬¦å·çæ ·å¼ä¸å¯¹åºç ID å·è¯·å¨ SuperMap æ¡é¢è½¯ä»¶ä¸­æ¥æ¾ã
     */

    this.markerSymbolID = -1;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ServerStyle";
  }
  /**
   * @function SuperMap.ServerStyle.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ServerStyle_createClass(ServerStyle, [{
    key: "destroy",
    value: function destroy() {
      var me = this;

      if (me.fillBackColor) {
        me.fillBackColor.destroy();
        me.fillBackColor = null;
      }

      me.fillBackOpaque = null;

      if (me.fillForeColor) {
        me.fillForeColor.destroy();
        me.fillForeColor = null;
      }

      me.fillGradientMode = null;
      me.fillGradientAngle = null;
      me.fillGradientOffsetRatioX = null;
      me.fillGradientOffsetRatioY = null;
      me.fillOpaqueRate = null;
      me.fillSymbolID = null;

      if (me.lineColor) {
        me.lineColor.destroy();
        me.lineColor = null;
      }

      me.lineSymbolID = null;
      me.lineWidth = null;
      me.markerAngle = null;
      me.markerSize = null;
      me.markerSymbolID = null;
    }
    /**
     * @function SuperMap.ServerStyle.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     * @returns {Object} å¯¹åºç JSON æ ¼å¼å¯¹è±¡.
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      var styleObj = {};
      styleObj = Util.copyAttributes(styleObj, this); //ææ¶åå¿½ç¥serverColorå¾Jsonçè½¬æ¢

      return styleObj;
    }
    /**
     * @function SuperMap.ServerStyle.fromJson
     * @description å°JSONå¯¹è±¡è½¬æ¢ä¸º SuperMap.ServerStyle å¯¹è±¡ã
     * @param jsonObject - {Object} è¦è½¬æ¢ç JSON å¯¹è±¡ã
     * @returns {SuperMap.ServerStyle} è½¬ååç SuperMap.ServerStyle å¯¹è±¡ã
     */

  }], [{
    key: "fromJson",
    value: function fromJson(jsonObject) {
      if (!jsonObject) {
        return;
      }

      return new ServerStyle({
        fillBackColor: ServerColor.fromJson(jsonObject.fillBackColor),
        fillBackOpaque: jsonObject.fillBackOpaque,
        fillForeColor: ServerColor.fromJson(jsonObject.fillForeColor),
        fillGradientMode: jsonObject.fillGradientMode,
        fillGradientAngle: jsonObject.fillGradientAngle,
        fillGradientOffsetRatioX: jsonObject.fillGradientOffsetRatioX,
        fillGradientOffsetRatioY: jsonObject.fillGradientOffsetRatioY,
        fillOpaqueRate: jsonObject.fillOpaqueRate,
        fillSymbolID: jsonObject.fillSymbolID,
        lineColor: ServerColor.fromJson(jsonObject.lineColor),
        lineSymbolID: jsonObject.lineSymbolID,
        lineWidth: jsonObject.lineWidth,
        markerAngle: jsonObject.markerAngle,
        markerSize: jsonObject.markerSize,
        markerSymbolID: jsonObject.markerSymbolID
      });
    }
  }]);

  return ServerStyle;
}();
SuperMap.ServerStyle = ServerStyle;
// CONCATENATED MODULE: ./src/common/iServer/PointWithMeasure.js
function PointWithMeasure_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { PointWithMeasure_typeof = function _typeof(obj) { return typeof obj; }; } else { PointWithMeasure_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return PointWithMeasure_typeof(obj); }

function PointWithMeasure_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function PointWithMeasure_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function PointWithMeasure_createClass(Constructor, protoProps, staticProps) { if (protoProps) PointWithMeasure_defineProperties(Constructor.prototype, protoProps); if (staticProps) PointWithMeasure_defineProperties(Constructor, staticProps); return Constructor; }

function PointWithMeasure_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) PointWithMeasure_setPrototypeOf(subClass, superClass); }

function PointWithMeasure_setPrototypeOf(o, p) { PointWithMeasure_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return PointWithMeasure_setPrototypeOf(o, p); }

function PointWithMeasure_createSuper(Derived) { var hasNativeReflectConstruct = PointWithMeasure_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = PointWithMeasure_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = PointWithMeasure_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return PointWithMeasure_possibleConstructorReturn(this, result); }; }

function PointWithMeasure_possibleConstructorReturn(self, call) { if (call && (PointWithMeasure_typeof(call) === "object" || typeof call === "function")) { return call; } return PointWithMeasure_assertThisInitialized(self); }

function PointWithMeasure_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function PointWithMeasure_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function PointWithMeasure_getPrototypeOf(o) { PointWithMeasure_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return PointWithMeasure_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.PointWithMeasure
 * @category  iServer SpatialAnalyst
 * @classdesc è·¯ç±ç¹ç±»ãè·¯ç±ç¹æ¯æå·æçº¿æ§åº¦éå¼ (Measure) çäºç»´å°çåæ ç¹ã
 * @param {Object} options - åæ°ã
 * @param {number} options.measure - åº¦éå¼ï¼å³è·¯ç±å¯¹è±¡å±æ§å¼ Mã
 * @param {number} options.x - è·åå½åç¹å¯¹è±¡å¨å°çåæ ç³»ä¸ç X åæ å¼ã
 * @param {number} options.y - è·åå½åç¹å¯¹è±¡å¨å°çåæ ç³»ä¸ç Y åæ å¼ã
 * @extends {SuperMap.Geometry.Point}
 */

var PointWithMeasure = /*#__PURE__*/function (_Point) {
  PointWithMeasure_inherits(PointWithMeasure, _Point);

  var _super = PointWithMeasure_createSuper(PointWithMeasure);

  function PointWithMeasure(options) {
    var _this;

    PointWithMeasure_classCallCheck(this, PointWithMeasure);

    _this = _super.call(this, options);
    /**
     * @member {number} SuperMap.PointWithMeasure.prototype.measure
     * @description åº¦éå¼ï¼å³è·¯ç±å¯¹è±¡å±æ§å¼ Mã
     */

    _this.measure = null;

    if (options) {
      Util.extend(PointWithMeasure_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.PointWithMeasure";
    return _this;
  }
  /**
   * @function SuperMap.PointWithMeasure.prototype.equals
   * @description å¤æ­ä¸¤ä¸ªè·¯ç±ç¹å¯¹è±¡æ¯å¦ç¸ç­ãå¦æä¸¤ä¸ªè·¯ç±ç¹å¯¹è±¡å·æç¸åçåæ ä»¥ååº¦éå¼ï¼åè®¤ä¸ºæ¯ç¸ç­çã
   * @param {SuperMap.PointWithMeasure} geom - éè¦å¤æ­çè·¯ç±ç¹å¯¹è±¡ã
   * @returns {boolean} ä¸¤ä¸ªè·¯ç±ç¹å¯¹è±¡æ¯å¦ç¸ç­ï¼true ä¸ºç¸ç­ï¼false ä¸ºä¸ç­ï¼ã
   */


  PointWithMeasure_createClass(PointWithMeasure, [{
    key: "equals",
    value: function equals(geom) {
      var equals = false;

      if (geom != null) {
        var isValueEquals = this.x === geom.x && this.y === geom.y && this.measure === geom.measure;
        var isNaNValue = isNaN(this.x) && isNaN(this.y) && isNaN(this.measure);
        var isNaNGeometry = isNaN(geom.x) && isNaN(geom.y) && isNaN(geom.measure);
        equals = isValueEquals || isNaNValue && isNaNGeometry;
      }

      return equals;
    }
    /**
     * @function SuperMap.PointWithMeasure.prototype.toJson
     * @description è½¬æ¢ä¸º JSON å¯¹è±¡ã
     * */

  }, {
    key: "toJson",
    value: function toJson() {
      var result = "{";

      if (this.measure != null && this.measure != undefined) {
        result += "\"measure\":" + this.measure + ",";
      }

      result += "\"x\":" + this.x + ",";
      result += "\"y\":" + this.y;
      result += "}";
      return result;
    }
    /**
    * @function SuperMap.PointWithMeasure.prototype.destroy
    * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
    */

  }, {
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.measure = null;
      me.x = null;
      me.y = null;
    }
    /**
     * @function SuperMap.PointWithMeasure.fromJson
     * @description å° JSON å¯¹è±¡è½¬æ¢ä¸º{@link SuperMap.PointWithMeasure} å¯¹è±¡ã
     * @param {Object} jsonObject - JSON å¯¹è±¡è¡¨ç¤ºçè·¯ç±ç¹ã
     * @returns {SuperMap.PointWithMeasure} è½¬ååç PointWithMeasure å¯¹è±¡ã
     */

  }], [{
    key: "fromJson",
    value: function fromJson(jsonObject) {
      if (!jsonObject) {
        return;
      }

      return new PointWithMeasure({
        x: jsonObject.x,
        y: jsonObject.y,
        measure: jsonObject.measure
      });
    }
  }]);

  return PointWithMeasure;
}(Point);
SuperMap.PointWithMeasure = PointWithMeasure;
// CONCATENATED MODULE: ./src/common/iServer/Route.js
function Route_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Route_typeof = function _typeof(obj) { return typeof obj; }; } else { Route_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Route_typeof(obj); }

function Route_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Route_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Route_createClass(Constructor, protoProps, staticProps) { if (protoProps) Route_defineProperties(Constructor.prototype, protoProps); if (staticProps) Route_defineProperties(Constructor, staticProps); return Constructor; }

function Route_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Route_setPrototypeOf(subClass, superClass); }

function Route_setPrototypeOf(o, p) { Route_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Route_setPrototypeOf(o, p); }

function Route_createSuper(Derived) { var hasNativeReflectConstruct = Route_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Route_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Route_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Route_possibleConstructorReturn(this, result); }; }

function Route_possibleConstructorReturn(self, call) { if (call && (Route_typeof(call) === "object" || typeof call === "function")) { return call; } return Route_assertThisInitialized(self); }

function Route_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Route_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Route_getPrototypeOf(o) { Route_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Route_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/






/**
 * @class SuperMap.Route
 * @category  iServer SpatialAnalyst
 * @classdesc è·¯ç±å¯¹è±¡ç±»ãè·¯ç±å¯¹è±¡ä¸ºä¸ç³»åæåºçå¸¦æå±æ§å¼ M ç xï¼y åæ å¯¹ï¼å¶ä¸­ M å¼ä¸ºè¯¥ç»ç¹çè·ç¦»å±æ§ï¼å°å·²ç¥ç¹çè·ç¦»ï¼ã
 * @param {Array.<SuperMap.Geometry>} points - å½¢æè·¯ç±å¯¹è±¡ççº¿æ°ç»ã
 * @param {Object} options - åæ°ã
 * @param {number} options.id - è·¯ç±å¯¹è±¡å¨æ°æ®åºä¸­ç idã
 * @param {number} options.length - è·¯ç±å¯¹è±¡çé¿åº¦ãåä½ä¸æ°æ®éçåä½ç¸åã
 * @param {number} [options.maxM] - æå¤§çº¿æ§åº¦éå¼ï¼å³ææç»ç¹å°èµ·å§ç¹çéç®è·ç¦»ä¸­æå¤§å¼ã
 * @param {number} [options.minM] - æå°çº¿æ§åº¦éå¼ï¼å³ææç»ç¹å°èµ·å§ç¹çéç®è·ç¦»ä¸­æå°å¼ã
 * @param {string} [options.type] - æ°æ®ç±»åï¼å¦ï¼"LINEM"ã
 * @extends {SuperMap.Geometry.Collection}
 */

var Route = /*#__PURE__*/function (_Collection) {
  Route_inherits(Route, _Collection);

  var _super = Route_createSuper(Route);

  function Route(points, options) {
    var _this;

    Route_classCallCheck(this, Route);

    _this = _super.call(this, points, options);
    /**
     * @member {number} SuperMap.Route.prototype.id
     * @description è·¯ç±å¯¹è±¡å¨æ°æ®åºä¸­ç IDã
     */

    _this.id = null;
    /**
     * @member {number} SuperMap.Route.prototype.center
     * @description è·¯ç±å¯¹è±¡çä¸­å¿ç¹ã
     */

    _this.center = null;
    /**
     * @member {string} SuperMap.Route.prototype.style
     * @description è·¯ç±å¯¹è±¡çæ ·å¼ã
     */

    _this.style = null;
    /**
     * @member {number} SuperMap.Route.prototype.length
     * @description è·¯ç±å¯¹è±¡çé¿åº¦ãåä½ä¸æ°æ®éçåä½ç¸åã
     */

    _this.length = null;
    /**
     *  @member {number} SuperMap.Route.prototype.maxM
     *  @description æå¤§çº¿æ§åº¦éå¼ï¼å³ææç»ç¹å°èµ·å§ç¹çéç®è·ç¦»ä¸­æå¤§å¼ã
     */

    _this.maxM = null;
    /**
     * @member {number} SuperMap.Route.prototype.minM
     * @description æå°çº¿æ§åº¦éå¼ï¼å³ææç»ç¹å°èµ·å§ç¹çéç®è·ç¦»ä¸­æå°å¼ã
     */

    _this.minM = null;
    /**
     * @member {Array.<number>} SuperMap.Route.prototype.parts
     * @description æå¡ç«¯å ä½å¯¹è±¡ä¸­åä¸ªå­å¯¹è±¡æåå«çèç¹ä¸ªæ°ã
     */

    _this.parts = null;
    /**
     * @member {Array.<Object>} SuperMap.Route.prototype.points
     * @description è·¯ç±å¯¹è±¡çææè·¯ç±ç¹ã
     * @example
     * (start code)
     * [
     *  {
     *      "measure": 0,
     *      "y": -4377.027184298267,
     *      "x": 4020.0045221720466
     *  },
     *  {
     *      "measure": 37.33288381391519,
     *      "y": -4381.569363260499,
     *      "x": 4057.0600591960642
     *  }
     * ]
     * (end)
     */

    _this.points = null;
    /**
     * @member {string} SuperMap.Route.prototype.type
     * @description æå¡ç«¯å ä½å¯¹è±¡ç±»åã
     */

    _this.type = null;
    /**
     * @member {Array.<string>} [SuperMap.Route.prototype.componentTypes=SuperMap.Geometry.LineString]
     * @description components å­å¨ççå ä½å¯¹è±¡ææ¯æçå ä½ç±»åæ°ç»ã
     */

    _this.componentTypes = ["SuperMap.Geometry.LinearRing", "SuperMap.Geometry.LineString"];

    if (options) {
      Util.extend(Route_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.Route";
    _this.geometryType = "LINEM";
    return _this;
  }
  /**
   *
   * @function SuperMap.Route.prototype.toJson
   * @description è½¬æ¢ä¸º JSON å¯¹è±¡ã
   * @returns {Object} JSON å¯¹è±¡ã
   */


  Route_createClass(Route, [{
    key: "toJson",
    value: function toJson() {
      var result = "{";

      if (this.id != null && this.id != undefined) {
        result += "\"id\":" + this.id + ",";
      }

      if (this.center != null && this.center != undefined) {
        result += "\"center\":" + this.center + ",";
      }

      if (this.style != null && this.style != undefined) {
        result += "\"style\":" + this.style + ",";
      }

      if (this.length != null && this.length != undefined) {
        result += "\"length\":" + this.length + ",";
      }

      if (this.maxM != null && this.maxM != undefined) {
        result += "\"maxM\":" + this.maxM + ",";
      }

      if (this.minM != null && this.minM != undefined) {
        result += "\"minM\":" + this.minM + ",";
      }

      if (this.type != null && this.type != undefined) {
        result += "\"type\":\"" + this.type + "\",";
      }

      if (this.parts != null && this.parts != undefined) {
        result += "\"parts\":[" + this.parts[0];

        for (var i = 1; i < this.parts.length; i++) {
          result += "," + this.parts[i];
        }

        result += "],";
      }

      if (this.components != null && this.components.length > 0) {
        result += "\"points\":[";

        for (var j = 0, len = this.components.length; j < len; j++) {
          for (var k = 0, len2 = this.components[j].components.length; k < len2; k++) {
            result += this.components[j].components[k].toJson() + ",";
          }
        }

        result = result.replace(/,$/g, '');
        result += "]";
      }

      result = result.replace(/,$/g, '');
      result += "}";
      return result;
    }
    /**
     * @function SuperMap.Route.prototype.destroy
     * @override
     */

  }, {
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.id = null;
      me.center = null;
      me.style = null;
      me.length = null;
      me.maxM = null;
      me.minM = null;
      me.type = null;
      me.parts = null;
      me.components.length = 0;
      me.components = null;
      me.componentTypes = null;
    }
    /**
     * @function SuperMap.Route.fromJson
     * @description å° JSON å¯¹è±¡è½¬æ¢ä¸º SuperMap.Route å¯¹è±¡ã
     * @param {Object} [jsonObject] - JSON å¯¹è±¡è¡¨ç¤ºçè·¯ç±å¯¹è±¡ã
     * @returns {SuperMap.Route} è½¬ååç Route å¯¹è±¡ã
     */

  }], [{
    key: "fromJson",
    value: function fromJson(jsonObject) {
      if (!jsonObject) {
        return;
      }

      var geoParts = jsonObject.parts || [],
          geoPoints = jsonObject.points || [],
          len = geoParts.length,
          lineList = [];

      if (len > 0) {
        for (var i = 0, pointIndex = 0, pointList = []; i < len; i++) {
          for (var j = 0; j < geoParts[i]; j++) {
            pointList.push(PointWithMeasure.fromJson(geoPoints[pointIndex + j]));
          }

          pointIndex += geoParts[i]; //å¤æ­çº¿æ¯å¦é­åï¼å¦æé­åï¼åè¿åLinearRingï¼å¦åè¿åLineString

          if (pointList[0].equals(pointList[geoParts[i] - 1])) {
            lineList.push(new LinearRing(pointList));
          } else {
            lineList.push(new LineString(pointList));
          }

          pointList = [];
        }
      } else {
        return null;
      }

      return new Route(lineList, {
        id: jsonObject.id,
        center: jsonObject.center,
        style: jsonObject.style,
        length: jsonObject.length,
        maxM: jsonObject.maxM,
        minM: jsonObject.minM,
        type: jsonObject.type,
        parts: jsonObject.parts
      });
    }
  }]);

  return Route;
}(Collection);
SuperMap.Route = Route;
// CONCATENATED MODULE: ./src/common/iServer/ServerGeometry.js
function ServerGeometry_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ServerGeometry_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ServerGeometry_createClass(Constructor, protoProps, staticProps) { if (protoProps) ServerGeometry_defineProperties(Constructor.prototype, protoProps); if (staticProps) ServerGeometry_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/













/**
 * @class SuperMap.ServerGeometry
 * @category  iServer
 * @classdesc æå¡ç«¯å ä½å¯¹è±¡ç±»ãè¯¥ç±»æè¿°å ä½å¯¹è±¡ï¼ç¢éï¼çç¹å¾æ°æ®ï¼åæ ç¹å¯¹ãå ä½å¯¹è±¡çç±»åç­ï¼ãåºäºæå¡ç«¯çç©ºé´åæãç©ºé´å³ç³»è¿ç®ãæ¥è¯¢ç­ GIS æå¡åè½ä½¿ç¨æå¡ç«¯å ä½å¯¹è±¡ã
 * @param {Object} options - åæ°ã
 * @param {string} options.id - æå¡ç«¯å ä½å¯¹è±¡å¯ä¸æ è¯ç¬¦ã
 * @param {Array.<number>} options.parts - æå¡ç«¯å ä½å¯¹è±¡ä¸­åä¸ªå­å¯¹è±¡æåå«çèç¹ä¸ªæ°ã
 * @param {Array.<SuperMap.Geometry.Point>} options.points - ç»æå ä½å¯¹è±¡çèç¹çåæ å¯¹æ°ç»ã
 * @param {SuperMap.GeometryType} options.type - å ä½å¯¹è±¡çç±»åã
 * @param {SuperMap.ServerStyle} [options.style] - æå¡ç«¯å ä½å¯¹è±¡çé£æ ¼ã
 */

var ServerGeometry = /*#__PURE__*/function () {
  function ServerGeometry(options) {
    ServerGeometry_classCallCheck(this, ServerGeometry);

    /**
     * @member {string} SuperMap.ServerGeometry.prototype.id
     * @description æå¡ç«¯å ä½å¯¹è±¡å¯ä¸æ è¯ç¬¦ã
     */
    this.id = 0;
    /**
     * @member {SuperMap.ServerStyle} [SuperMap.ServerGeometry.prototype.style]
     * @description æå¡ç«¯å ä½å¯¹è±¡çé£æ ¼ï¼ServerStyleï¼ã
     */

    this.style = null;
    /**
     * @member {Array.<number>} SuperMap.ServerGeometry.prototype.parts
     * @description æå¡ç«¯å ä½å¯¹è±¡ä¸­åä¸ªå­å¯¹è±¡æåå«çèç¹ä¸ªæ°ã<br>
     * 1.å ä½å¯¹è±¡ä»ç»æä¸å¯ä»¥åä¸ºç®åå ä½å¯¹è±¡åå¤æå ä½å¯¹è±¡ã
     * ç®åå ä½å¯¹è±¡ä¸å¤æå ä½å¯¹è±¡çåºå«ï¼ç®åçå ä½å¯¹è±¡ä¸è¬ä¸ºåä¸å¯¹è±¡ï¼
     * èå¤æçå ä½å¯¹è±¡ç±å¤ä¸ªç®åå¯¹è±¡ç»ææç»è¿ä¸å®çç©ºé´è¿ç®ä¹åäº§çï¼
     * å¦ï¼ç©å½¢ä¸ºç®åçåºåå¯¹è±¡ï¼èä¸­ç©ºçç©å½¢ä¸ºå¤æçåºåå¯¹è±¡ã<br>
     * 2.éå¸¸æåµï¼ä¸ä¸ªç®åå ä½å¯¹è±¡çå­å¯¹è±¡å°±æ¯å®æ¬èº«ï¼
     * å æ­¤å¯¹äºç®åå¯¹è±¡æ¥è¯´çè¯¥å­æ®µä¸ºé¿åº¦ä¸º1çæ´åæ°ç»ï¼
     * è¯¥å­æ®µçå¼å°±æ¯è¿ä¸ªç®åå¯¹è±¡èç¹çä¸ªæ°ã
     * å¦æä¸ä¸ªå ä½å¯¹è±¡æ¯ç±å ä¸ªç®åå¯¹è±¡ç»åèæçï¼
     * ä¾å¦ï¼ä¸ä¸ªå²ç¶å ä½å¯¹è±¡ç± 3 ä¸ªç®åçå¤è¾¹å½¢ç»æèæï¼
     * é£ä¹è¿ä¸ªå²ç¶çå ä½å¯¹è±¡ç Parts å­æ®µå¼å°±æ¯ä¸ä¸ªé¿åº¦ä¸º 3 çæ´åæ°ç»ï¼
     * æ°ç»ä¸­æ¯ä¸ªæåçå¼åå«ä»£è¡¨è¿ä¸ä¸ªå¤è¾¹å½¢æåå«çèç¹ä¸ªæ°ã
     */

    this.parts = null;
    /**
     * @member {Array.<SuperMap.Geometry.Point>} SuperMap.ServerGeometry.prototype.points
     * @description ç»æå ä½å¯¹è±¡çèç¹çåæ å¯¹æ°ç»ã<br>
     * 1.ææå ä½å¯¹è±¡ï¼ç¹ãçº¿ãé¢ï¼é½æ¯ç±ä¸äºç®åçç¹åæ ç»æçï¼
     * è¯¥å­æ®µå­æ¾äºç»æå ä½å¯¹è±¡çç¹åæ çæ°ç»ã
     * å¯¹äºç®åçé¢å¯¹è±¡ï¼ä»çèµ·ç¹åç»ç¹çåæ ç¹ç¸åã<br>
     * 2.å¯¹äºå¤æçå ä½å¯¹è±¡ï¼æ ¹æ® Parts å±æ§æ¥ç¡®å®æ¯ä¸ä¸ªç»æå¤æå ä½å¯¹è±¡çç®åå¯¹è±¡æå¯¹åºçèç¹çä¸ªæ°ï¼
     * ä»èç¡®å® Points å­æ®µä¸­åæ å¯¹çåéå½å±é®é¢ã
     */

    this.points = null;
    /**
     * @member {SuperMap.GeometryType} SuperMap.ServerGeometry.prototype.type
     * @description å ä½å¯¹è±¡çç±»åï¼GeometryTypeï¼ã
     */

    this.type = null;
    /**
     * @member {Object} SuperMap.ServerGeometry.prototype.prjCoordSys
     * @description æå½±åæ åæ°ï¼ç°ä»å¨ç¼å²åºåæä¸­ææã
     */

    this.prjCoordSys = null;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = 'SuperMap.ServerGeometry';
  }
  /**
   * @function SuperMap.ServerGeometry.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ServerGeometry_createClass(ServerGeometry, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.id = null;
      me.style = null;
      me.parts = null;
      me.partTopo = null;
      me.points = null;
      me.type = null;
      me.prjCoordSys = null;
    }
    /**
     * @function SuperMap.ServerGeometry.prototype.toGeometry
     * @description å°æå¡ç«¯å ä½å¯¹è±¡ ServerGeometry è½¬æ¢ä¸ºå®¢æ·ç«¯å ä½å¯¹è±¡ Geometryã
     * @returns {SuperMap.Geometry} è½¬æ¢åçå®¢æ·ç«¯å ä½å¯¹è±¡ã
     */

  }, {
    key: "toGeometry",
    value: function toGeometry() {
      var me = this,
          geoType = me.type;

      switch (geoType.toUpperCase()) {
        case GeometryType.POINT:
          return me.toGeoPoint();

        case GeometryType.LINE:
          return me.toGeoLine();

        case GeometryType.LINEM:
          return me.toGeoLinem();

        case GeometryType.REGION:
          return me.toGeoRegion();

        case GeometryType.POINTEPS:
          return me.toGeoPoint();

        case GeometryType.LINEEPS:
          return me.toGeoLineEPS();

        case GeometryType.REGIONEPS:
          return me.toGeoRegionEPS();

        case GeometryType.GEOCOMPOUND:
          return me.transformGeoCompound();
      }
    }
    /**
     * @function SuperMap.ServerGeometry.prototype.toGeoPoint
     * @description å°æå¡ç«¯çç¹å ä½å¯¹è±¡è½¬æ¢ä¸ºå®¢æ·ç«¯å ä½å¯¹è±¡ãåæ¬ PointãMultiPointã
     * @returns {SuperMap.Geometry} è½¬æ¢åçå®¢æ·ç«¯å ä½å¯¹è±¡ã
     */

  }, {
    key: "toGeoPoint",
    value: function toGeoPoint() {
      var me = this,
          geoParts = me.parts || [],
          geoPoints = me.points || [],
          len = geoParts.length;

      if (len > 0) {
        if (len === 1) {
          return new Point(geoPoints[0].x, geoPoints[0].y);
        } else {
          var pointList = [];

          for (var i = 0; i < len; i++) {
            pointList.push(new Point(geoPoints[i].x, geoPoints[i].y));
          }

          return new MultiPoint(pointList);
        }
      } else {
        return null;
      }
    }
    /**
     * @function SuperMap.ServerGeometry.prototype.toGeoLine
     * @description å°æå¡ç«¯ççº¿å ä½å¯¹è±¡è½¬æ¢ä¸ºå®¢æ·ç«¯å ä½å¯¹è±¡ãåæ¬ LinearRingãLineStringãMultiLineStringã
     * @returns {SuperMap.Geometry} è½¬æ¢åçå®¢æ·ç«¯å ä½å¯¹è±¡ã
     */

  }, {
    key: "toGeoLine",
    value: function toGeoLine() {
      var me = this,
          geoParts = me.parts || [],
          geoPoints = me.points || [],
          len = geoParts.length;

      if (len > 0) {
        if (len === 1) {
          var pointList = [];

          for (var i = 0; i < geoParts[0]; i++) {
            pointList.push(new Point(geoPoints[i].x, geoPoints[i].y));
          } //å¤æ­çº¿æ¯å¦é­åï¼å¦æé­åï¼åè¿åLinearRingï¼å¦åè¿åLineString


          if (pointList[0].equals(pointList[geoParts[0] - 1])) {
            return new LinearRing(pointList);
          } else {
            return new LineString(pointList);
          }
        } else {
          var lineList = [];

          for (var _i = 0; _i < len; _i++) {
            var _pointList = [];

            for (var j = 0; j < geoParts[_i]; j++) {
              _pointList.push(new Point(geoPoints[j].x, geoPoints[j].y));
            }

            lineList.push(new LineString(_pointList));
            geoPoints.splice(0, geoParts[_i]);
          }

          return new MultiLineString(lineList);
        }
      } else {
        return null;
      }
    }
    /**
     * @function SuperMap.ServerGeometry.prototype.toGeoLineEPS
     * @description å°æå¡ç«¯ççº¿å ä½å¯¹è±¡è½¬æ¢ä¸ºå®¢æ·ç«¯å ä½å¯¹è±¡ãåæ¬ LinearRingãLineStringãMultiLineStringã
     * @returns {SuperMap.Geometry} è½¬æ¢åçå®¢æ·ç«¯å ä½å¯¹è±¡ã
     */

  }, {
    key: "toGeoLineEPS",
    value: function toGeoLineEPS() {
      var me = this,
          geoParts = me.parts || [],
          geoPoints = me.points || [],
          i,
          j,
          pointList,
          lineList,
          lineEPS,
          len = geoParts.length;

      if (len > 0) {
        if (len === 1) {
          for (i = 0, pointList = []; i < geoParts[0]; i++) {
            pointList.push(new Point(geoPoints[i].x, geoPoints[i].y, geoPoints[i].type));
          } //å¤æ­çº¿æ¯å¦é­åï¼å¦æé­åï¼åè¿åLinearRingï¼å¦åè¿åLineString


          if (pointList[0].equals(pointList[geoParts[0] - 1])) {
            lineEPS = LineString.createLineEPS(pointList);
            return new LinearRing(lineEPS);
          } else {
            lineEPS = LineString.createLineEPS(pointList);
            return new LineString(lineEPS);
          }
        } else {
          for (i = 0, lineList = []; i < len; i++) {
            for (j = 0, pointList = []; j < geoParts[i]; j++) {
              pointList.push(new Point(geoPoints[j].x, geoPoints[j].y));
            }

            lineEPS = LineString.createLineEPS(pointList);
            lineList.push(new LineString(lineEPS));
            geoPoints.splice(0, geoParts[i]);
          }

          return new MultiLineString(lineList);
        }
      } else {
        return null;
      }
    }
    /**
     * @function SuperMap.ServerGeometry.prototype.toGeoLine
     * @description å°æå¡ç«¯çè·¯ç±çº¿å ä½å¯¹è±¡è½¬æ¢ä¸ºå®¢æ·ç«¯å ä½å¯¹è±¡ãåæ¬ LinearRingãLineStringãMultiLineStringã
     * @returns {SuperMap.Geometry} è½¬æ¢åçå®¢æ·ç«¯å ä½å¯¹è±¡ã
     */

  }, {
    key: "toGeoLinem",
    value: function toGeoLinem() {
      var me = this;
      return Route.fromJson(me);
    }
    /**
     * @function SuperMap.ServerGeometry.prototype.toGeoRegion
     * @description å°æå¡ç«¯çé¢å ä½å¯¹è±¡è½¬æ¢ä¸ºå®¢æ·ç«¯å ä½å¯¹è±¡ãç±»åä¸º Polygonã
     * @returns {SuperMap.Geometry} è½¬æ¢åçå®¢æ·ç«¯å ä½å¯¹è±¡ã
     */

  }, {
    key: "toGeoRegion",
    value: function toGeoRegion() {
      var me = this,
          geoParts = me.parts || [],
          geoTopo = me.partTopo || [],
          geoPoints = me.points || [],
          len = geoParts.length;

      if (len <= 0) {
        return null;
      }

      var polygonArray = [];
      var pointList = [];

      if (len == 1) {
        for (var i = 0; i < geoPoints.length; i++) {
          pointList.push(new Point(geoPoints[i].x, geoPoints[i].y));
        }

        polygonArray.push(new Polygon([new LinearRing(pointList)]));
        return new MultiPolygon(polygonArray);
      } //å¤çå¤æé¢


      var CCWArray = [];
      var areaArray = [];
      var polygonArrayTemp = [];
      var polygonBounds = []; //polyonå²æ´æ è¯æ°ç»ï¼åå§é½æ¯å²ã

      var CCWIdent = [];

      for (var _i2 = 0, pointIndex = 0; _i2 < len; _i2++) {
        for (var j = 0; j < geoParts[_i2]; j++) {
          pointList.push(new Point(geoPoints[pointIndex + j].x, geoPoints[pointIndex + j].y));
        }

        pointIndex += geoParts[_i2];
        var polygon = new Polygon([new LinearRing(pointList)]);
        pointList = [];
        polygonArrayTemp.push(polygon);

        if (geoTopo.length === 0) {
          polygonBounds.push(polygon.getBounds());
        }

        CCWIdent.push(1);
        areaArray.push(polygon.getArea());
      } //æ ¹æ®é¢ç§¯æåº


      ServerGeometry.bubbleSort(areaArray, polygonArrayTemp, geoTopo, polygonBounds); //iServer 9Dæ°å¢å­æ®µ

      if (geoTopo.length === 0) {
        //å²æ´åºå±å¤æ­ååï¼å°ææçå­å¯¹è±¡æç§é¢ç§¯æåºï¼é¢ç§¯æå¤§çç´æ¥å¤å®ä¸ºå²ï¼1ï¼ï¼ä»é¢ç§¯æ¬¡å¤§çå¼å§å¤çï¼
        // å¦æåç°è¯¥å¯¹è±¡å¨æä¸ªé¢ç§¯å¤§äºå®çå¯¹è±¡ä¹ä¸­ï¼å³è¢«åå«ï¼ï¼åæ ¹æ®åå«å®çå¯¹è±¡çæ è¯ï¼1 or -1ï¼ï¼æå®å¶æ è¯ï¼-1 or 1ï¼ï¼
        // ä¾æ¬¡å¤çå®ææå¯¹è±¡ï¼å°±å¾å°äºä¸ä¸ªæ è¯æ°ç»ï¼1è¡¨ç¤ºå²ï¼-1è¡¨ç¤ºæ´
        //ç®æ polygonç´¢å¼åè¡¨ -1æ ç¤ºæ²¡æè¢«ä»»ä½polygonåå«ï¼
        var targetArray = [];

        for (var _i3 = 1; _i3 < polygonArrayTemp.length; _i3++) {
          for (var _j = _i3 - 1; _j >= 0; _j--) {
            targetArray[_i3] = -1;

            if (polygonBounds[_j].containsBounds(polygonBounds[_i3])) {
              CCWIdent[_i3] = CCWIdent[_j] * -1;

              if (CCWIdent[_i3] < 0) {
                targetArray[_i3] = _j;
              }

              break;
            }
          }
        }

        for (var _i4 = 0; _i4 < polygonArrayTemp.length; _i4++) {
          if (CCWIdent[_i4] > 0) {
            polygonArray.push(polygonArrayTemp[_i4]);
          } else {
            polygonArray[targetArray[_i4]].components = polygonArray[targetArray[_i4]].components.concat(polygonArrayTemp[_i4].components); //å ä½

            polygonArray.push('');
          }
        }
      } else {
        //æ ¹æ®é¢ç§¯æåº
        //ServerGeometry.bubbleSort(areaArray, polygonArrayTemp,geoTopo);
        polygonArray = new Array();

        for (var _i5 = 0; _i5 < polygonArrayTemp.length; _i5++) {
          if (geoTopo[_i5] && geoTopo[_i5] == -1) {
            CCWArray = CCWArray.concat(polygonArrayTemp[_i5].components);
          } else {
            if (CCWArray.length > 0 && polygonArray.length > 0) {
              polygonArray[polygonArray.length - 1].components = polygonArray[polygonArray.length - 1].components.concat(CCWArray);
              CCWArray = [];
            }

            polygonArray.push(polygonArrayTemp[_i5]);
          }

          if (_i5 == len - 1) {
            var polyLength = polygonArray.length;

            if (polyLength) {
              polygonArray[polyLength - 1].components = polygonArray[polyLength - 1].components.concat(CCWArray);
            } else {
              for (var k = 0, length = CCWArray.length; k < length; k++) {
                polygonArray.push(new Polygon(CCWArray));
              }
            }
          }
        }
      }

      return new MultiPolygon(polygonArray);
    }
    /**
     * @function SuperMap.ServerGeometry.prototype.toGeoRegionEPS
     * @description å°æå¡ç«¯çé¢å ä½å¯¹è±¡è½¬æ¢ä¸ºå®¢æ·ç«¯å ä½å¯¹è±¡ãç±»åä¸º Polygonã
     * @returns {SuperMap.Geometry} è½¬æ¢åçå®¢æ·ç«¯å ä½å¯¹è±¡ã
     */

  }, {
    key: "toGeoRegionEPS",
    value: function toGeoRegionEPS() {
      var me = this,
          geoParts = me.parts || [],
          geoTopo = me.partTopo || [],
          geoPoints = me.points || [],
          len = geoParts.length;

      if (len <= 0) {
        return null;
      }

      var polygonArray = [];
      var pointList = [];
      var lineEPS;

      if (len == 1) {
        for (var i = 0; i < geoPoints.length; i++) {
          pointList.push(new Point(geoPoints[i].x, geoPoints[i].y));
        }

        lineEPS = LineString.createLineEPS(pointList);
        polygonArray.push(new Polygon([new LinearRing(lineEPS)]));
        return new MultiPolygon(polygonArray);
      } //å¤çå¤æé¢


      var CCWArray = [];
      var areaArray = [];
      var polygonArrayTemp = [];
      var polygonBounds = []; //polyonå²æ´æ è¯æ°ç»ï¼åå§é½æ¯å²ã

      var CCWIdent = [];

      for (var _i6 = 0, pointIndex = 0; _i6 < len; _i6++) {
        for (var j = 0; j < geoParts[_i6]; j++) {
          pointList.push(new Point(geoPoints[pointIndex + j].x, geoPoints[pointIndex + j].y));
        }

        pointIndex += geoParts[_i6];
        lineEPS = LineString.createLineEPS(pointList);
        var polygon = new Polygon([new LinearRing(lineEPS)]);
        pointList = [];
        polygonArrayTemp.push(polygon);

        if (geoTopo.length === 0) {
          polygonBounds.push(polygon.getBounds());
        }

        CCWIdent.push(1);
        areaArray.push(polygon.getArea());
      } //æ ¹æ®é¢ç§¯æåº


      ServerGeometry.bubbleSort(areaArray, polygonArrayTemp, geoTopo, polygonBounds); //iServer 9Dæ°å¢å­æ®µ

      if (geoTopo.length === 0) {
        //å²æ´åºå±å¤æ­ååï¼å°ææçå­å¯¹è±¡æç§é¢ç§¯æåºï¼é¢ç§¯æå¤§çç´æ¥å¤å®ä¸ºå²ï¼1ï¼ï¼ä»é¢ç§¯æ¬¡å¤§çå¼å§å¤çï¼
        // å¦æåç°è¯¥å¯¹è±¡å¨æä¸ªé¢ç§¯å¤§äºå®çå¯¹è±¡ä¹ä¸­ï¼å³è¢«åå«ï¼ï¼åæ ¹æ®åå«å®çå¯¹è±¡çæ è¯ï¼1 or -1ï¼ï¼æå®å¶æ è¯ï¼-1 or 1ï¼ï¼
        // ä¾æ¬¡å¤çå®ææå¯¹è±¡ï¼å°±å¾å°äºä¸ä¸ªæ è¯æ°ç»ï¼1è¡¨ç¤ºå²ï¼-1è¡¨ç¤ºæ´
        //ç®æ polygonç´¢å¼åè¡¨ -1æ ç¤ºæ²¡æè¢«ä»»ä½polygonåå«ï¼
        var targetArray = [];

        for (var _i7 = 1; _i7 < polygonArrayTemp.length; _i7++) {
          for (var _j2 = _i7 - 1; _j2 >= 0; _j2--) {
            targetArray[_i7] = -1;

            if (polygonBounds[_j2].containsBounds(polygonBounds[_i7])) {
              CCWIdent[_i7] = CCWIdent[_j2] * -1;

              if (CCWIdent[_i7] < 0) {
                targetArray[_i7] = _j2;
              }

              break;
            }
          }
        }

        for (var _i8 = 0; _i8 < polygonArrayTemp.length; _i8++) {
          if (CCWIdent[_i8] > 0) {
            polygonArray.push(polygonArrayTemp[_i8]);
          } else {
            polygonArray[targetArray[_i8]].components = polygonArray[targetArray[_i8]].components.concat(polygonArrayTemp[_i8].components); //å ä½

            polygonArray.push('');
          }
        }
      } else {
        //æ ¹æ®é¢ç§¯æåº
        polygonArray = new Array();

        for (var _i9 = 0; _i9 < polygonArrayTemp.length; _i9++) {
          if (geoTopo[_i9] && geoTopo[_i9] == -1) {
            CCWArray = CCWArray.concat(polygonArrayTemp[_i9].components);
          } else {
            if (CCWArray.length > 0 && polygonArray.length > 0) {
              polygonArray[polygonArray.length - 1].components = polygonArray[polygonArray.length - 1].components.concat(CCWArray);
              CCWArray = [];
            }

            polygonArray.push(polygonArrayTemp[_i9]);
          }

          if (_i9 == len - 1) {
            var polyLength = polygonArray.length;

            if (polyLength) {
              polygonArray[polyLength - 1].components = polygonArray[polyLength - 1].components.concat(CCWArray);
            } else {
              for (var k = 0, length = CCWArray.length; k < length; k++) {
                polygonArray.push(new Polygon(CCWArray));
              }
            }
          }
        }
      }

      return new MultiPolygon(polygonArray);
    }
  }, {
    key: "transformGeoCompound",
    value: function transformGeoCompound() {
      var me = this,
          geoParts = me.geoParts || [],
          len = geoParts.length;

      if (len <= 0) {
        return null;
      }

      var geometryList = [];

      for (var index = 0; index < len; index++) {
        var geometry = geoParts[index];
        geometryList.push(new ServerGeometry(geometry).toGeometry());
      }

      return new Collection(geometryList);
    }
    /**
     * @function SuperMap.ServerGeometry.prototype.fromJson
     * @description å° JSON å¯¹è±¡è¡¨ç¤ºæå¡ç«¯å ä½å¯¹è±¡è½¬æ¢ä¸º ServerGeometryã
     * @param {Object} jsonObject - è¦è½¬æ¢ç JSON å¯¹è±¡ã
     * @returns {SuperMap.ServerGeometry} è½¬æ¢åç ServerGeometry å¯¹è±¡ã
     */

  }], [{
    key: "fromJson",
    value: function fromJson(jsonObject) {
      if (!jsonObject) {
        return;
      }

      return new ServerGeometry({
        id: jsonObject.id,
        style: ServerStyle.fromJson(jsonObject.style),
        parts: jsonObject.parts,
        partTopo: jsonObject.partTopo,
        points: jsonObject.points,
        center: jsonObject.center,
        length: jsonObject.length,
        maxM: jsonObject.maxM,
        minM: jsonObject.minM,
        type: jsonObject.type
      });
    }
    /**
     * @function SuperMap.ServerGeometry.prototype.fromGeometry
     * @description å°å®¢æ·ç«¯ Geometry è½¬æ¢ææå¡ç«¯ ServerGeometryã
     * @param {SuperMap.Geometry} geometry - è¦è½¬æ¢çå®¢æ·ç«¯ Geometry å¯¹è±¡ã
     * @returns {SuperMap.ServerGeometry} è½¬æ¢åç ServerGeometry å¯¹è±¡ã
     */

  }, {
    key: "fromGeometry",
    value: function fromGeometry(geometry) {
      if (!geometry) {
        return;
      }

      var id = 0,
          parts = [],
          points = [],
          type = null,
          icomponents = geometry.components,
          className = geometry.CLASS_NAME,
          prjCoordSys = {
        epsgCode: geometry.SRID
      };

      if (!isNaN(geometry.id)) {
        id = geometry.id;
      } //åç¹çæ¹æ³ï¼æ²¡æ³ï¼ä¸ºäºæ¯ææå¿æ ç»ï¼ææ¶é´å°±å¾å¨æ¹


      if (className != 'SuperMap.Geometry.LinearRing' && className != 'SuperMap.Geometry.LineString' && (geometry instanceof MultiPoint || geometry instanceof MultiLineString)) {
        var ilen = icomponents.length;

        for (var i = 0; i < ilen; i++) {
          var partPointsCount = icomponents[i].getVertices().length;
          parts.push(partPointsCount);

          for (var j = 0; j < partPointsCount; j++) {
            points.push(new Point(icomponents[i].getVertices()[j].x, icomponents[i].getVertices()[j].y));
          }
        } //è¿éclassNameä¸æ¯å¤ç¹å°±å¨é¨æ¯ç®çº¿


        type = className == 'SuperMap.Geometry.MultiPoint' ? GeometryType.POINT : GeometryType.LINE;
      } else if (geometry instanceof MultiPolygon) {
        var _ilen = icomponents.length;

        for (var _i10 = 0; _i10 < _ilen; _i10++) {
          var polygon = icomponents[_i10],
              linearRingOfPolygon = polygon.components,
              linearRingOfPolygonLen = linearRingOfPolygon.length;

          for (var _j3 = 0; _j3 < linearRingOfPolygonLen; _j3++) {
            var _partPointsCount = linearRingOfPolygon[_j3].getVertices().length + 1;

            parts.push(_partPointsCount);

            for (var k = 0; k < _partPointsCount - 1; k++) {
              points.push(new Point(linearRingOfPolygon[_j3].getVertices()[k].x, linearRingOfPolygon[_j3].getVertices()[k].y));
            }

            points.push(new Point(linearRingOfPolygon[_j3].getVertices()[0].x, linearRingOfPolygon[_j3].getVertices()[0].y));
          }
        }

        type = GeometryType.REGION;
      } else if (geometry instanceof Polygon) {
        var _ilen2 = icomponents.length;

        for (var _i11 = 0; _i11 < _ilen2; _i11++) {
          var _partPointsCount2 = icomponents[_i11].getVertices().length + 1;

          parts.push(_partPointsCount2);

          for (var _j4 = 0; _j4 < _partPointsCount2 - 1; _j4++) {
            points.push(new Point(icomponents[_i11].getVertices()[_j4].x, icomponents[_i11].getVertices()[_j4].y));
          }

          points.push(new Point(icomponents[_i11].getVertices()[0].x, icomponents[_i11].getVertices()[0].y));
        }

        type = GeometryType.REGION;
      } else {
        var geometryVerticesCount = geometry.getVertices().length;

        for (var _j5 = 0; _j5 < geometryVerticesCount; _j5++) {
          points.push(new Point(geometry.getVertices()[_j5].x, geometry.getVertices()[_j5].y));
        }

        if (geometry instanceof LinearRing) {
          points.push(new Point(geometry.getVertices()[0].x, geometry.getVertices()[0].y));
          geometryVerticesCount++;
        }

        parts.push(geometryVerticesCount);
        type = geometry instanceof Point ? GeometryType.POINT : GeometryType.LINE;
      }

      return new ServerGeometry({
        id: id,
        style: null,
        parts: parts,
        points: points,
        type: type,
        prjCoordSys: prjCoordSys
      });
    }
    /**
     * @function SuperMap.ServerGeometry.prototype.IsClockWise
     * @description å¤æ­ linearRing ä¸­çç¹çé¡ºåºãè¿åå¼å¤§äº 0ï¼éæ¶éï¼å°äº 0ï¼é¡ºæ¶éã
     * @param {SuperMap.Geometry} geometry - è¦è½¬æ¢çå®¢æ·ç«¯ Geometry å¯¹è±¡ã
     * @returns {number} è¿åå¼å¤§äº 0ï¼éæ¶éï¼å°äº 0ï¼é¡ºæ¶éã
     */

  }, {
    key: "IsClockWise",
    value: function IsClockWise(points) {
      var length = points.length;

      if (length < 3) {
        return 0.0;
      }

      var s = points[0].y * (points[length - 1].x - points[1].x);
      points.push(points[0]);

      for (var i = 1; i < length; i++) {
        s += points[i].y * (points[i - 1].x - points[i + 1].x);
      }

      return s * 0.5;
    }
  }, {
    key: "bubbleSort",
    value: function bubbleSort(areaArray, pointList, geoTopo, polygonBounds) {
      for (var i = 0; i < areaArray.length; i++) {
        for (var j = 0; j < areaArray.length; j++) {
          if (areaArray[i] > areaArray[j]) {
            var d = areaArray[j];
            areaArray[j] = areaArray[i];
            areaArray[i] = d;
            var b = pointList[j];
            pointList[j] = pointList[i];
            pointList[i] = b;

            if (geoTopo && geoTopo.length > 0) {
              var c = geoTopo[j];
              geoTopo[j] = geoTopo[i];
              geoTopo[i] = c;
            }

            if (polygonBounds && polygonBounds.length > 0) {
              var f = polygonBounds[j];
              polygonBounds[j] = polygonBounds[i];
              polygonBounds[i] = f;
            }
          }
        }
      }
    }
  }]);

  return ServerGeometry;
}();
SuperMap.ServerGeometry = ServerGeometry;
// CONCATENATED MODULE: ./src/common/format/GeoJSON.js
function GeoJSON_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GeoJSON_typeof = function _typeof(obj) { return typeof obj; }; } else { GeoJSON_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GeoJSON_typeof(obj); }

function GeoJSON_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GeoJSON_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GeoJSON_createClass(Constructor, protoProps, staticProps) { if (protoProps) GeoJSON_defineProperties(Constructor.prototype, protoProps); if (staticProps) GeoJSON_defineProperties(Constructor, staticProps); return Constructor; }

function GeoJSON_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GeoJSON_get = Reflect.get; } else { GeoJSON_get = function _get(target, property, receiver) { var base = GeoJSON_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GeoJSON_get(target, property, receiver || target); }

function GeoJSON_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GeoJSON_getPrototypeOf(object); if (object === null) break; } return object; }

function GeoJSON_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GeoJSON_setPrototypeOf(subClass, superClass); }

function GeoJSON_setPrototypeOf(o, p) { GeoJSON_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GeoJSON_setPrototypeOf(o, p); }

function GeoJSON_createSuper(Derived) { var hasNativeReflectConstruct = GeoJSON_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GeoJSON_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GeoJSON_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GeoJSON_possibleConstructorReturn(this, result); }; }

function GeoJSON_possibleConstructorReturn(self, call) { if (call && (GeoJSON_typeof(call) === "object" || typeof call === "function")) { return call; } return GeoJSON_assertThisInitialized(self); }

function GeoJSON_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GeoJSON_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GeoJSON_getPrototypeOf(o) { GeoJSON_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GeoJSON_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/














/**
 * @class SuperMap.Format.GeoJSON
 * @classdesc  GeoJSON çè¯»ååãä½¿ç¨ {@link SuperMap.Format.GeoJSON} æé å¨åå»ºä¸ä¸ª GeoJSON è§£æå¨ã
 * @category BaseTypes Format
 * @param {Object} [options] - åæ°ã
 * @param {string} [options.indent="    "] - ç¨äºæ ¼å¼åè¾åºï¼indent å­ç¬¦ä¸²ä¼å¨æ¯æ¬¡ç¼©è¿çæ¶åä½¿ç¨ä¸æ¬¡ã
 * @param {string} [options.space=" "] - ç¨äºæ ¼å¼åè¾åºï¼space å­ç¬¦ä¸²ä¼å¨åå¼å¯¹ç ":" åè¾¹æ·»å ã
 * @param {string} [options.newline="\n"] - ç¨äºæ ¼å¼åè¾åº, newline å­ç¬¦ä¸²ä¼ç¨å¨æ¯ä¸ä¸ªåå¼å¯¹ææ°ç»é¡¹æ«å°¾ã
 * @param {number} [options.level=0] - ç¨äºæ ¼å¼åè¾åº, è¡¨ç¤ºçæ¯ç¼©è¿çº§å«ã
 * @param {boolean} [options.pretty=false] - æ¯å¦å¨åºååçæ¶åä½¿ç¨é¢å¤çç©ºæ ¼æ§å¶ç»æãå¨ write æ¹æ³ä¸­ä½¿ç¨ã
 * @param {boolean} [options.nativeJSON] - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.ignoreExtraDims=true] - å¿½ç¥ç»´åº¦è¶è¿ 2 çå ä½è¦ç´ ã
 * @extends {SuperMap.Format.JSON}
 */

var GeoJSON = /*#__PURE__*/function (_JSONFormat) {
  GeoJSON_inherits(GeoJSON, _JSONFormat);

  var _super = GeoJSON_createSuper(GeoJSON);

  function GeoJSON(options) {
    var _this;

    GeoJSON_classCallCheck(this, GeoJSON);

    _this = _super.call(this, options);
    /**
     * @member {boolean} [SuperMap.Format.GeoJSON.prototype.ignoreExtraDims=true]
     * @description å¿½ç¥ç»´åº¦è¶è¿ 2 çå ä½è¦ç´ ã
     */

    _this.ignoreExtraDims = true;
    _this.CLASS_NAME = "SuperMap.Format.GeoJSON";
    /**
     * @member {Object} SuperMap.Format.GeoJSON.prototype.parseCoords 
     * @private
     * @description ä¸ä¸ªå±æ§åå¯¹åºç GeoJSON å¯¹è±¡çå ä½ç±»åçå¯¹è±¡ãæ¯ä¸ªå±æ§å¶å®é½æ¯ä¸ä¸ªå®éä¸åè§£æç¨çæ¹æ³ã
     */

    _this.parseCoords = {
      /**
       * @function SuperMap.Format.GeoJSON.parseCoords.point
       * @description å°ä¸ç»åæ è½¬æä¸ä¸ª {@link SuperMap.Geometry} å¯¹è±¡ã
       * @param {Object} array - GeoJSON çæ®µä¸­çä¸ç»åæ ã
       * @returns {SuperMap.Geometry} ä¸ä¸ªå ä½å¯¹è±¡ã
       */
      "point": function point(array) {
        if (this.ignoreExtraDims === false && array.length != 2) {
          throw "Only 2D points are supported: " + array;
        }

        return new Point(array[0], array[1]);
      },

      /**
       * @function SuperMap.Format.GeoJSON.parseCoords.multipoint
       * @description å°åæ ç»æ°ç»è½¬åæä¸ºä¸ä¸ª {@link SuperMap.Geometry} å¯¹è±¡ã
       * @param {Object} array - GeoJSON çæ®µä¸­çåæ ç»æ°ç»ã
       * @returns {SuperMap.Geometry} ä¸ä¸ªå ä½å¯¹è±¡ã
       */
      "multipoint": function multipoint(array) {
        var points = [];
        var p = null;

        for (var i = 0, len = array.length; i < len; ++i) {
          try {
            p = this.parseCoords["point"].apply(this, [array[i]]);
          } catch (err) {
            throw err;
          }

          points.push(p);
        }

        return new MultiPoint(points);
      },

      /**
       * @function SuperMap.Format.GeoJSON.parseCoords.linestring
       * @description å°åæ ç»æ°ç»è½¬åæä¸ºä¸ä¸ª {@link SuperMap.Geometry} å¯¹è±¡ã
       * @param {Object} array - GeoJSON çæ®µä¸­çåæ ç»æ°ç»ã
       * @returns {SuperMap.Geometry} ä¸ä¸ªå ä½å¯¹è±¡ã
       */
      "linestring": function linestring(array) {
        var points = [];
        var p = null;

        for (var i = 0, len = array.length; i < len; ++i) {
          try {
            p = this.parseCoords["point"].apply(this, [array[i]]);
          } catch (err) {
            throw err;
          }

          points.push(p);
        }

        return new LineString(points);
      },

      /**
       * @function SuperMap.Format.GeoJSON.parseCoords.multilinestring
       * @description å°åæ ç»æ°ç»è½¬åæä¸ºä¸ä¸ª {@link SuperMap.Geometry} å¯¹è±¡ã
       * @param {Object} array - GeoJSON çæ®µä¸­çåæ ç»æ°ç»ã
       * @returns {SuperMap.Geometry} ä¸ä¸ªå ä½å¯¹è±¡ã
       */
      "multilinestring": function multilinestring(array) {
        var lines = [];
        var l = null;

        for (var i = 0, len = array.length; i < len; ++i) {
          try {
            l = this.parseCoords["linestring"].apply(this, [array[i]]);
          } catch (err) {
            throw err;
          }

          lines.push(l);
        }

        return new MultiLineString(lines);
      },

      /**
       * @function SuperMap.Format.GeoJSON.parseCoords.polygon
       * @description å°åæ ç»æ°ç»è½¬åæä¸ºä¸ä¸ª {@link SuperMap.Geometry} å¯¹è±¡ã
       * @returns {SuperMap.Geometry} ä¸ä¸ªå ä½å¯¹è±¡ã
       */
      "polygon": function polygon(array) {
        var rings = [];
        var r, l;

        for (var i = 0, len = array.length; i < len; ++i) {
          try {
            l = this.parseCoords["linestring"].apply(this, [array[i]]);
          } catch (err) {
            throw err;
          }

          r = new LinearRing(l.components);
          rings.push(r);
        }

        return new Polygon(rings);
      },

      /**
       * @function SuperMap.Format.GeoJSON.parseCoords.multipolygon
       * @description å°åæ ç»æ°ç»è½¬åæä¸ºä¸ä¸ª {@link SuperMap.Geometry} å¯¹è±¡ã
       * @param {Object} array - GeoJSON çæ®µä¸­çåæ ç»æ°ç»ã
       * @returns {SuperMap.Geometry} ä¸ä¸ªå ä½å¯¹è±¡ã
       */
      "multipolygon": function multipolygon(array) {
        var polys = [];
        var p = null;

        for (var i = 0, len = array.length; i < len; ++i) {
          try {
            p = this.parseCoords["polygon"].apply(this, [array[i]]);
          } catch (err) {
            throw err;
          }

          polys.push(p);
        }

        return new MultiPolygon(polys);
      },

      /**
       * @function SuperMap.Format.GeoJSON.parseCoords.box
       * @description å°åæ ç»æ°ç»è½¬åæä¸ºä¸ä¸ª {@link SuperMap.Geometry} å¯¹è±¡ã
       * @param {Object} array - GeoJSON çæ®µä¸­çåæ ç»æ°ç»ã
       * @returns {SuperMap.Geometry} ä¸ä¸ªå ä½å¯¹è±¡ã
       */
      "box": function box(array) {
        if (array.length != 2) {
          throw "GeoJSON box coordinates must have 2 elements";
        }

        return new Polygon([new LinearRing([new Point(array[0][0], array[0][1]), new Point(array[1][0], array[0][1]), new Point(array[1][0], array[1][1]), new Point(array[0][0], array[1][1]), new Point(array[0][0], array[0][1])])]);
      }
    };
    /**
     * @member {Object} SuperMap.Format.GeoJSON.prototype.extract
     * @private
     * @description ä¸ä¸ªå±æ§åå¯¹åºçGeoJSONç±»åçå¯¹è±¡ãå¶å¼ä¸ºç¸åºçå®éçè§£ææ¹æ³ã
     */

    _this.extract = {
      /**
       * @function SuperMap.Format.GeoJSON.extract.feature
       * @description è¿åä¸ä¸ªè¡¨ç¤ºåä¸ªè¦ç´ å¯¹è±¡ç GeoJSON çä¸é¨åã
       * @param {SuperMap.ServerFeature} feature - iServer è¦ç´ å¯¹è±¡ã
       * @returns {Object} ä¸ä¸ªè¡¨ç¤ºç¹çå¯¹è±¡ã
       */
      'feature': function feature(_feature) {
        var geom = this.extract.geometry.apply(this, [_feature.geometry]);
        var json = {
          "type": "Feature",
          "properties": this.createAttributes(_feature),
          "geometry": geom
        };

        if (_feature.geometry && _feature.geometry.type === 'TEXT') {
          json.properties.texts = _feature.geometry.texts;
          json.properties.textStyle = _feature.geometry.textStyle;
        }

        if (_feature.fid) {
          json.id = _feature.fid;
        }

        if (_feature.ID) {
          json.id = _feature.ID;
        }

        return json;
      },

      /**
       * @function SuperMap.Format.GeoJSON.extract.geometry
       * @description è¿åä¸ä¸ªè¡¨ç¤ºåä¸ªå ä½å¯¹è±¡ç GeoJSON çä¸é¨åã
       * @param {Object} geometry - iServer å ä½å¯¹è±¡ã
       * @returns {Object} ä¸ä¸ªè¡¨ç¤ºå ä½ä½çå¯¹è±¡ã
       */
      'geometry': function geometry(_geometry) {
        if (_geometry == null) {
          return null;
        }

        if (!_geometry.parts && _geometry.points) {
          _geometry.parts = [_geometry.points.length];
        }

        var geo = _geometry.hasOwnProperty('geometryType') ? _geometry : new ServerGeometry(_geometry).toGeometry() || _geometry;
        var geometryType = geo.geometryType || geo.type;
        var data;

        if (geometryType === "LinearRing") {
          geometryType = "LineString";
        }

        if (geometryType === "LINEM") {
          geometryType = "MultiLineString";
        }

        data = this.extract[geometryType.toLowerCase()].apply(this, [geo]);
        geometryType = geometryType === 'TEXT' ? 'Point' : geometryType;
        var json;

        if (geometryType === "Collection") {
          json = {
            "type": "GeometryCollection",
            "geometries": data
          };
        } else {
          json = {
            "type": geometryType,
            "coordinates": data
          };
        }

        return json;
      },

      /**
       * @function SuperMap.Format.GeoJSON.extract.point
       * @description ä»ä¸ä¸ªç¹å¯¹è±¡ä¸­è¿åä¸ä¸ªåæ ç»ã
       * @param {SuperMap.Geometry.Point} point - ä¸ä¸ªç¹å¯¹è±¡ã
       * @returns {Array} ä¸ä¸ªè¡¨ç¤ºä¸ä¸ªç¹çåæ ç»ã
       */
      'point': function point(_point) {
        var p = [_point.x, _point.y];

        for (var name in _point) {
          if (name !== "x" && name !== "y" && _point[name] !== null && !isNaN(_point[name])) {
            p.push(_point[name]);
          }
        }

        return p;
      },

      /**
       * @function SuperMap.Format.GeoJSON.extract.point
       * @description ä»ä¸ä¸ªææ¬å¯¹è±¡ä¸­è¿åä¸ä¸ªåæ ç»ã
       * @param {Object} geo - ä¸ä¸ªææ¬å¯¹è±¡ã
       * @returns {Array} ä¸ä¸ªè¡¨ç¤ºä¸ä¸ªç¹çåæ ç»ã
       */
      'text': function text(geo) {
        return [geo.points[0].x, geo.points[0].y];
      },

      /**
       * @function SuperMap.Format.GeoJSON.extract.multipoint
       * @description ä»ä¸ä¸ªå¤ç¹å¯¹è±¡ä¸­è¿ä¸ä¸ªåæ ç»æ°ç»ã
       * @param {SuperMap.Geometry.MultiPoint} multipoint - å¤ç¹å¯¹è±¡ã
       * @returns {Array} ä¸ä¸ªè¡¨ç¤ºå¤ç¹çåæ ç»æ°ç»ã
       */
      'multipoint': function multipoint(_multipoint) {
        var array = [];

        for (var i = 0, len = _multipoint.components.length; i < len; ++i) {
          array.push(this.extract.point.apply(this, [_multipoint.components[i]]));
        }

        return array;
      },

      /**
       * @function SuperMap.Format.GeoJSON.extract.linestring
       * @description ä»ä¸ä¸ªçº¿å¯¹è±¡ä¸­è¿åä¸ä¸ªåæ ç»æ°ç»ã
       * @param {SuperMap.Geometry.Linestring} linestring - çº¿å¯¹è±¡ã
       * @returns {Array} ä¸ä¸ªè¡¨ç¤ºçº¿å¯¹è±¡çåæ ç»æ°ç»ã
       */
      'linestring': function linestring(_linestring) {
        var array = [];

        for (var i = 0, len = _linestring.components.length; i < len; ++i) {
          array.push(this.extract.point.apply(this, [_linestring.components[i]]));
        }

        return array;
      },

      /**
       * @function SuperMap.Format.GeoJSON.extract.multilinestring
       * @description ä»ä¸ä¸ªå¤çº¿å¯¹è±¡ä¸­è¿åä¸ä¸ªçº¿æ°ç»ã
       * @param {SuperMap.Geometry.MultiLinestring} multilinestring - å¤çº¿å¯¹è±¡ã
       *
       * @returns {Array} ä¸ä¸ªè¡¨ç¤ºå¤çº¿ççº¿æ°ç»ã
       */
      'multilinestring': function multilinestring(_multilinestring) {
        var array = [];

        for (var i = 0, len = _multilinestring.components.length; i < len; ++i) {
          array.push(this.extract.linestring.apply(this, [_multilinestring.components[i]]));
        }

        return array;
      },

      /**
       * @function SuperMap.Format.GeoJSON.extract.polygon
       * @description ä»ä¸ä¸ªé¢å¯¹è±¡ä¸­è¿åä¸ç»çº¿ç¯ã
       * @param {SuperMap.Geometry.Polygon} polygon - é¢å¯¹è±¡ã
       * @returns {Array} ä¸ç»è¡¨ç¤ºé¢ççº¿ç¯ã
       */
      'polygon': function polygon(_polygon) {
        var array = [];

        for (var i = 0, len = _polygon.components.length; i < len; ++i) {
          array.push(this.extract.linestring.apply(this, [_polygon.components[i]]));
        }

        return array;
      },

      /**
       * @function SuperMap.Format.GeoJSON.extract.multipolygon
       * @description ä»ä¸ä¸ªå¤é¢å¯¹è±¡ä¸­è¿åä¸ç»é¢ã
       * @param {SuperMap.Geometry.MultiPolygon} multipolygon - å¤é¢å¯¹è±¡ã
       * @returns {Array} ä¸ç»è¡¨ç¤ºå¤é¢çé¢ã
       */
      'multipolygon': function multipolygon(_multipolygon) {
        var array = [];

        for (var i = 0, len = _multipolygon.components.length; i < len; ++i) {
          array.push(this.extract.polygon.apply(this, [_multipolygon.components[i]]));
        }

        return array;
      },

      /**
       * @function SuperMap.Format.GeoJSON.extract.collection
       * @description ä»ä¸ä¸ªå ä½è¦ç´ éåä¸­ä¸ç»å ä½è¦ç´ æ°ç»ã
       * @param {SuperMap.Geometry.Collection} collection - å ä½è¦ç´ éåã
       * @returns {Array} ä¸ç»è¡¨ç¤ºå ä½è¦ç´ éåçå ä½è¦ç´ æ°ç»ã
       */
      'collection': function collection(_collection) {
        var len = _collection.components.length;
        var array = new Array(len);

        for (var i = 0; i < len; ++i) {
          array[i] = this.extract.geometry.apply(this, [_collection.components[i]]);
        }

        return array;
      }
    };
    return _this;
  }
  /**
   * @function SuperMap.Format.GeoJSON.prototype.read
   * @description å° GeoJSON å¯¹è±¡æèGeoJSON å¯¹è±¡å­ç¬¦ä¸²è½¬æ¢ä¸º SuperMap Feature å¯¹è±¡ã
   * @param {GeoJSONObject} json - GeoJSON å¯¹è±¡ã
   * @param {string} [type='FeaureCollection'] - å¯éçå­ç¬¦ä¸²ï¼å®å³å®äºè¾åºçæ ¼å¼ãæ¯æçå¼æï¼"Geometry","Feature"ï¼å "FeatureCollection"ï¼å¦ææ­¤å¼ä¸ºnullã
   * @param {Function} filter - å¯¹è±¡ä¸­æ¯ä¸ªå±æ¬¡æ¯ä¸ªé®å¼å¯¹é½ä¼è°ç¨æ­¤å½æ°å¾åºä¸ä¸ªç»æãæ¯ä¸ªå¼é½ä¼è¢« filter å½æ°çç»æææ¿æ¢æãè¿ä¸ªå½æ°å¯è¢«ç¨æ¥å°æäºå¯¹è±¡è½¬åææä¸ªç±»ç¸åºçå¯¹è±¡ï¼æèå°æ¥æå­ç¬¦ä¸²è½¬åæDateå¯¹è±¡ã
   * @returns {Object}  è¿åå¼ä¾èµäº type åæ°çå¼ã
   *     -å¦æ type ç­äº "FeatureCollection"ï¼è¿åå¼å°ä¼æ¯ {@link SuperMap.Feature.Vector} æ°ç»ã
   *     -å¦æ type ä¸º "Geometry",è¾å¥ç JSON å¯¹è±¡å¿é¡»è¡¨ç¤ºä¸ä¸ªå¯ä¸çå ä½ä½ï¼ç¶åè¿åå¼å°±ä¼æ¯ {@link SuperMap.Feature.Geometry}ã
   *     -å¦æ type ä¸º "Feature"ï¼è¾å¥ç JSON å¯¹è±¡ä¹å¿é¡»è¡¨ç¤ºçä¸ä¸ªè¦ç´ ï¼è¿æ ·è¿åå¼æä¼æ¯ {@link SuperMap.Feature.Vector}ã
   */


  GeoJSON_createClass(GeoJSON, [{
    key: "read",
    value: function read(json, type, filter) {
      type = type ? type : "FeatureCollection";
      var results = null;
      var obj = null;

      if (typeof json == "string") {
        obj = GeoJSON_get(GeoJSON_getPrototypeOf(GeoJSON.prototype), "read", this).call(this, json, filter);
      } else {
        obj = json;
      }

      if (!obj) {//SuperMap.Console.error("Bad JSON: " + json);
      } else if (typeof obj.type != "string") {//SuperMap.Console.error("Bad GeoJSON - no type: " + json);
      } else if (this.isValidType(obj, type)) {
        switch (type) {
          case "Geometry":
            try {
              results = this.parseGeometry(obj);
            } catch (err) {//SuperMap.Console.error(err);
            }

            break;

          case "Feature":
            try {
              results = this.parseFeature(obj);
              results.type = "Feature";
            } catch (err) {//SuperMap.Console.error(err);
            }

            break;

          case "FeatureCollection":
            // for type FeatureCollection, we allow input to be any type
            results = [];

            switch (obj.type) {
              case "Feature":
                try {
                  results.push(this.parseFeature(obj));
                } catch (err) {
                  results = null; //SuperMap.Console.error(err);
                }

                break;

              case "FeatureCollection":
                for (var i = 0, len = obj.features.length; i < len; ++i) {
                  try {
                    results.push(this.parseFeature(obj.features[i]));
                  } catch (err) {
                    results = null; // SuperMap.Console.error(err);
                  }
                }

                break;

              default:
                try {
                  var geom = this.parseGeometry(obj);
                  results.push(new Vector(geom));
                } catch (err) {
                  results = null; //SuperMap.Console.error(err);
                }

            }

            break;

          default:
            break;
        }
      }

      return results;
    }
    /**
     * @function SuperMap.Format.GeoJSON.prototype.write
     * @description iServer Geometry JSON å¯¹è±¡ è½¬ GeoJSONå¯¹è±¡å­ç¬¦ä¸²ã
     * @param {Object} obj - iServer Geometry JSON å¯¹è±¡ã
     * @param {boolean} [pretty=false] - æ¯å¦ä½¿ç¨æ¢è¡åç¼©è¿æ¥æ§å¶è¾åºã
     * @returns {GeoJSONObject} ä¸ä¸ª GeoJSON å­ç¬¦ä¸²ï¼å®è¡¨ç¤ºäºè¾å¥çå ä½å¯¹è±¡ï¼è¦ç´ å¯¹è±¡ï¼æèè¦ç´ å¯¹è±¡æ°ç»ã
     */

  }, {
    key: "write",
    value: function write(obj, pretty) {
      return GeoJSON_get(GeoJSON_getPrototypeOf(GeoJSON.prototype), "write", this).call(this, this.toGeoJSON(obj), pretty);
    }
    /**
     * @function SuperMap.Format.GeoJSON.prototype.fromGeoJSON
     * @version 9.1.1
     * @description å° GeoJSON å¯¹è±¡æèGeoJSON å¯¹è±¡å­ç¬¦ä¸²è½¬æ¢ä¸ºiServer Feature JSONã
     * @param {GeoJSONObject} json - GeoJSON å¯¹è±¡ã
     * @param {string} [type='FeaureCollection'] - å¯éçå­ç¬¦ä¸²ï¼å®å³å®äºè¾åºçæ ¼å¼ãæ¯æçå¼æï¼"Geometry","Feature"ï¼å "FeatureCollection"ï¼å¦ææ­¤å¼ä¸ºnullã
     * @param {Function} filter - å¯¹è±¡ä¸­æ¯ä¸ªå±æ¬¡æ¯ä¸ªé®å¼å¯¹é½ä¼è°ç¨æ­¤å½æ°å¾åºä¸ä¸ªç»æãæ¯ä¸ªå¼é½ä¼è¢« filter å½æ°çç»æææ¿æ¢æãè¿ä¸ªå½æ°å¯è¢«ç¨æ¥å°æäºå¯¹è±¡è½¬åææä¸ªç±»ç¸åºçå¯¹è±¡ï¼æèå°æ¥æå­ç¬¦ä¸²è½¬åæDateå¯¹è±¡ã
     * @returns {Object}  iServer Feature JSONã
     */

  }, {
    key: "fromGeoJSON",
    value: function fromGeoJSON(json, type, filter) {
      var _this2 = this;

      var feature = this.read(json, type, filter);

      if (!Util.isArray(feature)) {
        return this._toiSevrerFeature(feature);
      }

      return feature.map(function (element) {
        return _this2._toiSevrerFeature(element);
      });
    }
    /**
     * @function SuperMap.Format.GeoJSON.prototype.toGeoJSON
     * @version 9.1.1
     * @description å° iServer Feature JSON å¯¹è±¡è½¬æ¢ä¸º GeoJSON å¯¹è±¡ã
     * @param {Object} obj - iServer Feature JSONã
     * @returns {GeoJSONObject}  GeoJSON å¯¹è±¡ã
     */

  }, {
    key: "toGeoJSON",
    value: function toGeoJSON(obj) {
      var geojson = {
        "type": null
      };

      if (Util.isArray(obj)) {
        geojson.type = "FeatureCollection";
        var numFeatures = obj.length;
        geojson.features = new Array(numFeatures);

        for (var i = 0; i < numFeatures; ++i) {
          var element = obj[i];

          if (isGeometry(element)) {
            var feature = {};
            feature.geometry = element;
            geojson.features[i] = this.extract.feature.apply(this, [feature]);
          } else {
            geojson.features[i] = this.extract.feature.apply(this, [element]);
          }
        }
      } else if (isGeometry(obj)) {
        var _feature2 = {};
        _feature2.geometry = obj;
        geojson = this.extract.feature.apply(this, [_feature2]);
      } else {
        geojson = this.extract.feature.apply(this, [obj]);
      }

      function isGeometry(input) {
        return input.hasOwnProperty("parts") && input.hasOwnProperty("points") || input.hasOwnProperty("geoParts");
      }

      return geojson;
    }
    /**
     *  @function SuperMap.Format.GeoJSON.prototype.isValidType
     *  @description æ£æ¥ä¸ä¸ª GeoJSON å¯¹è±¡æ¯å¦åç»å®çç±»åç¸ç¬¦çåæ³çå¯¹è±¡ã
     *  @returns {boolean} GeoJSON æ¯å¦æ¯ç»å®ç±»åçåæ³å¯¹è±¡ã
     *  @private
     */

  }, {
    key: "isValidType",
    value: function isValidType(obj, type) {
      var valid = false;

      switch (type) {
        case "Geometry":
          if (Util.indexOf(["Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon", "Box", "GeometryCollection"], obj.type) == -1) {// unsupported geometry type
            //SuperMap.Console.error("Unsupported geometry type: " +
            // obj.type);
          } else {
            valid = true;
          }

          break;

        case "FeatureCollection":
          // allow for any type to be converted to a feature collection
          valid = true;
          break;

        default:
          // for Feature types must match
          if (obj.type == type) {
            valid = true;
          } else {//SuperMap.Console.error("Cannot convert types from " +
            //obj.type + " to " + type);
          }

      }

      return valid;
    }
    /**
     * @function SuperMap.Format.GeoJSON.prototype.parseFeature
     * @description å°ä¸ä¸ª GeoJSON ä¸­ç feature è½¬åæ {@link SuperMap.Feature.Vector}> å¯¹è±¡ã
     * @private
     * @param {GeoJSONObject} obj - ä» GeoJSON å¯¹è±¡ä¸­åå»ºä¸ä¸ªå¯¹è±¡ã
     * @returns {SuperMap.Feature.Vector} ä¸ä¸ªè¦ç´ ã
     */

  }, {
    key: "parseFeature",
    value: function parseFeature(obj) {
      var feature, geometry, attributes, bbox;
      attributes = obj.properties ? obj.properties : {};
      bbox = obj.geometry && obj.geometry.bbox || obj.bbox;

      try {
        geometry = this.parseGeometry(obj.geometry);
      } catch (err) {
        // deal with bad geometries
        throw err;
      }

      feature = new Vector(geometry, attributes);

      if (bbox) {
        feature.bounds = Bounds.fromArray(bbox);
      }

      if (obj.id) {
        feature.fid = obj.id;
      }

      return feature;
    }
    /**
     * @function SuperMap.Format.GeoJSON.prototype.parseGeometry
     * @description å°ä¸ä¸ª GeoJSON ä¸­çå ä½è¦ç´ è½¬åæ {@link SuperMap.Geometry} å¯¹è±¡ã
     * @param {GeoJSONObject} obj - ä» GeoJSON å¯¹è±¡ä¸­åå»ºä¸ä¸ªå¯¹è±¡ã
     * @returns {SuperMap.Geometry} ä¸ä¸ªå ä½è¦ç´ ã
     * @private
     */

  }, {
    key: "parseGeometry",
    value: function parseGeometry(obj) {
      if (obj == null) {
        return null;
      }

      var geometry;

      if (obj.type == "GeometryCollection") {
        if (!Util.isArray(obj.geometries)) {
          throw "GeometryCollection must have geometries array: " + obj;
        }

        var numGeom = obj.geometries.length;
        var components = new Array(numGeom);

        for (var i = 0; i < numGeom; ++i) {
          components[i] = this.parseGeometry.apply(this, [obj.geometries[i]]);
        }

        geometry = new Collection(components);
      } else {
        if (!Util.isArray(obj.coordinates)) {
          throw "Geometry must have coordinates array: " + obj;
        }

        if (!this.parseCoords[obj.type.toLowerCase()]) {
          throw "Unsupported geometry type: " + obj.type;
        }

        try {
          geometry = this.parseCoords[obj.type.toLowerCase()].apply(this, [obj.coordinates]);
        } catch (err) {
          // deal with bad coordinates
          throw err;
        }
      }

      return geometry;
    }
    /**
     * @function SuperMap.Format.GeoJSON.prototype.createCRSObject
     * @description ä»ä¸ä¸ªè¦ç´ å¯¹è±¡ä¸­åå»ºä¸ä¸ªåæ åèç³»å¯¹è±¡ã
     * @param {SuperMap.Feature.Vector} object - è¦ç´ å¯¹è±¡ã
     * @private
     * @returns {GeoJSONObject} ä¸ä¸ªå¯ä½ä¸º GeoJSON å¯¹è±¡ç CRS å±æ§ä½¿ç¨çå¯¹è±¡ã
     */

  }, {
    key: "createCRSObject",
    value: function createCRSObject(object) {
      var proj = object.layer.projection.toString();
      var crs = {};

      if (proj.match(/epsg:/i)) {
        var code = parseInt(proj.substring(proj.indexOf(":") + 1));

        if (code == 4326) {
          crs = {
            "type": "name",
            "properties": {
              "name": "urn:ogc:def:crs:OGC:1.3:CRS84"
            }
          };
        } else {
          crs = {
            "type": "name",
            "properties": {
              "name": "EPSG:" + code
            }
          };
        }
      }

      return crs;
    }
  }, {
    key: "_toiSevrerFeature",
    value: function _toiSevrerFeature(feature) {
      var attributes = feature.attributes;
      var attrNames = [];
      var attrValues = [];

      for (var attr in attributes) {
        attrNames.push(attr);
        attrValues.push(attributes[attr]);
      }

      var newFeature = {
        fieldNames: attrNames,
        fieldValues: attrValues,
        geometry: ServerGeometry.fromGeometry(feature.geometry)
      };
      newFeature.geometry.id = feature.fid;
      return newFeature;
    }
  }, {
    key: "createAttributes",
    value: function createAttributes(feature) {
      if (!feature) {
        return null;
      }

      var attr = {};
      processFieldsAttributes(feature, attr);
      var exceptKeys = ["fieldNames", "fieldValues", "geometry", "stringID", "ID"];

      for (var key in feature) {
        if (exceptKeys.indexOf(key) > -1) {
          continue;
        }

        attr[key] = feature[key];
      }

      function processFieldsAttributes(feature, attributes) {
        if (!(feature.hasOwnProperty("fieldNames") && feature.hasOwnProperty("fieldValues"))) {
          return;
        }

        var names = feature.fieldNames,
            values = feature.fieldValues;

        for (var i in names) {
          attributes[names[i]] = values[i];
        }
      }

      return attr;
    }
  }]);

  return GeoJSON;
}(JSONFormat);
SuperMap.Format.GeoJSON = GeoJSON;
// CONCATENATED MODULE: ./src/common/format/WKT.js
function WKT_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { WKT_typeof = function _typeof(obj) { return typeof obj; }; } else { WKT_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return WKT_typeof(obj); }

function WKT_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function WKT_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function WKT_createClass(Constructor, protoProps, staticProps) { if (protoProps) WKT_defineProperties(Constructor.prototype, protoProps); if (staticProps) WKT_defineProperties(Constructor, staticProps); return Constructor; }

function WKT_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) WKT_setPrototypeOf(subClass, superClass); }

function WKT_setPrototypeOf(o, p) { WKT_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return WKT_setPrototypeOf(o, p); }

function WKT_createSuper(Derived) { var hasNativeReflectConstruct = WKT_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = WKT_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = WKT_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return WKT_possibleConstructorReturn(this, result); }; }

function WKT_possibleConstructorReturn(self, call) { if (call && (WKT_typeof(call) === "object" || typeof call === "function")) { return call; } return WKT_assertThisInitialized(self); }

function WKT_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function WKT_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function WKT_getPrototypeOf(o) { WKT_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return WKT_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/











/**
 * @class SuperMap.Format.WKT
 * @classdesc ç¨äºè¯»åå¸¸è§ææ¬çç±»ãéè¿ {@link SuperMap.Format.WKT} æé å¨æ¥åå»ºä¸ä¸ªæ°çå®ä¾ã
 * @category BaseTypes Format
 * @extends {SuperMap.Format}
 * @param {Object} options - å¯éçéé¡¹å¯¹è±¡ï¼å¶å±æ§å°è¢«è®¾ç½®å°å®ä¾ãoption å·ä½éç½®é¡¹ç»§æ¿èª {@link SuperMap.Format}ã
 */

var WKT = /*#__PURE__*/function (_Format) {
  WKT_inherits(WKT, _Format);

  var _super = WKT_createSuper(WKT);

  function WKT(options) {
    var _this;

    WKT_classCallCheck(this, WKT);

    _this = _super.call(this, options);
    _this.regExes = {
      'typeStr': /^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,
      'spaces': /\s+/,
      'parenComma': /\)\s*,\s*\(/,
      'doubleParenComma': /\)\s*\)\s*,\s*\(\s*\(/,
      // can't use {2} here
      'trimParens': /^\s*\(?(.*?)\)?\s*$/
    };
    _this.CLASS_NAME = "SuperMap.Format.WKT";
    /**
    * @private
    * @description Object with properties corresponding to the geometry types.
    * Property values are functions that do the actual data extraction.
    */

    _this.extract = {
      /**
       * @description Return a space delimited string of point coordinates.
       * @param {SuperMap.Geometry.Point} point
       * @returns  {string} A string of coordinates representing the point
       */
      'point': function point(_point) {
        return _point.x + ' ' + _point.y;
      },

      /**
       * @description  Return a comma delimited string of point coordinates from a multipoint.
       * @param {SuperMap.Geometry.MultiPoint} multipoint
       * @returns  {string} A string of point coordinate strings representing
       *                  the multipoint
       */
      'multipoint': function multipoint(_multipoint) {
        var array = [];

        for (var i = 0, len = _multipoint.components.length; i < len; ++i) {
          array.push('(' + this.extract.point.apply(this, [_multipoint.components[i]]) + ')');
        }

        return array.join(',');
      },

      /**
       * @description  Return a comma delimited string of point coordinates from a line.
       * @param {SuperMap.Geometry.LineString} linestring
       * @returns  {string} A string of point coordinate strings representing
       *                  the linestring
       */
      'linestring': function linestring(_linestring) {
        var array = [];

        for (var i = 0, len = _linestring.components.length; i < len; ++i) {
          array.push(this.extract.point.apply(this, [_linestring.components[i]]));
        }

        return array.join(',');
      },

      /**
       * @description  Return a comma delimited string of linestring strings from a multilinestring.
       * @param {SuperMap.Geometry.MultiLineString} multilinestring
       * @returns  {string} A string of of linestring strings representing
       *                  the multilinestring
       */
      'multilinestring': function multilinestring(_multilinestring) {
        var array = [];

        for (var i = 0, len = _multilinestring.components.length; i < len; ++i) {
          array.push('(' + this.extract.linestring.apply(this, [_multilinestring.components[i]]) + ')');
        }

        return array.join(',');
      },

      /**
       * @description  Return a comma delimited string of linear ring arrays from a polygon.
       * @param {SuperMap.Geometry.Polygon} polygon
       * @returns  {string} An array of linear ring arrays representing the polygon
       */
      'polygon': function polygon(_polygon) {
        var array = [];

        for (var i = 0, len = _polygon.components.length; i < len; ++i) {
          array.push('(' + this.extract.linestring.apply(this, [_polygon.components[i]]) + ')');
        }

        return array.join(',');
      },

      /**
       * @description  Return an array of polygon arrays from a multipolygon.
       * @param {SuperMap.Geometry.MultiPolygon} multipolygon
       * @returns  {string} An array of polygon arrays representing
       *                  the multipolygon
       */
      'multipolygon': function multipolygon(_multipolygon) {
        var array = [];

        for (var i = 0, len = _multipolygon.components.length; i < len; ++i) {
          array.push('(' + this.extract.polygon.apply(this, [_multipolygon.components[i]]) + ')');
        }

        return array.join(',');
      },

      /**
       * @description  Return the WKT portion between 'GEOMETRYCOLLECTION(' and ')' for an <SuperMap.Geometry.Collection>
       * @param {SuperMap.Geometry.Collection} collection
       * @returns  {string} internal WKT representation of the collection
       */
      'collection': function collection(_collection) {
        var array = [];

        for (var i = 0, len = _collection.components.length; i < len; ++i) {
          array.push(this.extractGeometry.apply(this, [_collection.components[i]]));
        }

        return array.join(',');
      }
    };
    /**
     * @private
     * @description Object with properties corresponding to the geometry types.
     * Property values are functions that do the actual parsing.
     */

    _this.parse = {
      /**
       * @private
       * @description  Return point feature given a point WKT fragment.
       * @param {string} str A WKT fragment representing the point
       * @returns  {SuperMap.Feature.Vector} A point feature
       *
       */
      'point': function point(str) {
        var coords = StringExt.trim(str).split(this.regExes.spaces);
        return new Vector(new Point(coords[0], coords[1]));
      },

      /**
       * @description  Return a multipoint feature given a multipoint WKT fragment.
       * @param {string} A WKT fragment representing the multipoint
       * @returns  {SuperMap.Feature.Vector} A multipoint feature
       * @private
       */
      'multipoint': function multipoint(str) {
        var point;
        var points = StringExt.trim(str).split(',');
        var components = [];

        for (var i = 0, len = points.length; i < len; ++i) {
          point = points[i].replace(this.regExes.trimParens, '$1');
          components.push(this.parse.point.apply(this, [point]).geometry);
        }

        return new Vector(new MultiPoint(components));
      },

      /**
       * @description  Return a linestring feature given a linestring WKT fragment.
       * @param {string} A WKT fragment representing the linestring
       * @returns  {SuperMap.Feature.Vector} A linestring feature
       * @private
       */
      'linestring': function linestring(str) {
        var points = StringExt.trim(str).split(',');
        var components = [];

        for (var i = 0, len = points.length; i < len; ++i) {
          components.push(this.parse.point.apply(this, [points[i]]).geometry);
        }

        return new Vector(new LineString(components));
      },

      /**
       * @description  Return a multilinestring feature given a multilinestring WKT fragment.
       * @param {string} A WKT fragment representing the multilinestring
       * @returns  {SuperMap.Feature.Vector} A multilinestring feature
       * @private
       */
      'multilinestring': function multilinestring(str) {
        var line;
        var lines = StringExt.trim(str).split(this.regExes.parenComma);
        var components = [];

        for (var i = 0, len = lines.length; i < len; ++i) {
          line = lines[i].replace(this.regExes.trimParens, '$1');
          components.push(this.parse.linestring.apply(this, [line]).geometry);
        }

        return new Vector(new MultiLineString(components));
      },

      /**
       * @description  Return a polygon feature given a polygon WKT fragment.
       * @param {string} A WKT fragment representing the polygon
       * @returns  {SuperMap.Feature.Vector} A polygon feature
       * @private
       */
      'polygon': function polygon(str) {
        var ring, linestring, linearring;
        var rings = StringExt.trim(str).split(this.regExes.parenComma);
        var components = [];

        for (var i = 0, len = rings.length; i < len; ++i) {
          ring = rings[i].replace(this.regExes.trimParens, '$1');
          linestring = this.parse.linestring.apply(this, [ring]).geometry;
          linearring = new LinearRing(linestring.components);
          components.push(linearring);
        }

        return new Vector(new Polygon(components));
      },

      /**
       * @private
       * @description  Return a multipolygon feature given a multipolygon WKT fragment.
       * @param {string} A WKT fragment representing the multipolygon
       * @returns  {SuperMap.Feature.Vector} A multipolygon feature
       *
       */
      'multipolygon': function multipolygon(str) {
        var polygon;
        var polygons = StringExt.trim(str).split(this.regExes.doubleParenComma);
        var components = [];

        for (var i = 0, len = polygons.length; i < len; ++i) {
          polygon = polygons[i].replace(this.regExes.trimParens, '$1');
          components.push(this.parse.polygon.apply(this, [polygon]).geometry);
        }

        return new Vector(new MultiPolygon(components));
      },

      /**
       * @description  Return an array of features given a geometrycollection WKT fragment.
       * @param {string} A WKT fragment representing the geometrycollection
       * @returns  {Array} An array of SuperMap.Feature.Vector
       * @private
       */
      'geometrycollection': function geometrycollection(str) {
        // separate components of the collection with |
        str = str.replace(/,\s*([A-Za-z])/g, '|$1');
        var wktArray = StringExt.trim(str).split('|');
        var components = [];

        for (var i = 0, len = wktArray.length; i < len; ++i) {
          components.push(this.read(wktArray[i]));
        }

        return components;
      }
    };
    return _this;
  }
  /**
   * @function SuperMap.Format.WKT.prototype.read
   * @description Deserialize a WKT string and return a vector feature or an
   * array of vector features.  Supports WKT for POINT, MULTIPOINT,
   * LINESTRING, MULTILINESTRING, POLYGON, MULTIPOLYGON, and
   * GEOMETRYCOLLECTION.
   * @param {string} wkt - A WKT string
   * @returns {SuperMap.Feature.Vector|Array} A feature or array of features for
   * GEOMETRYCOLLECTION WKT.
   */


  WKT_createClass(WKT, [{
    key: "read",
    value: function read(wkt) {
      var features, type, str;
      wkt = wkt.replace(/[\n\r]/g, " ");
      var matches = this.regExes.typeStr.exec(wkt);

      if (matches) {
        type = matches[1].toLowerCase();
        str = matches[2];

        if (this.parse[type]) {
          features = this.parse[type].apply(this, [str]);
        }
      }

      return features;
    }
    /**
     * @function SuperMap.Format.WKT.prototype.write
     * @description Serialize a feature or array of features into a WKT string.
     * @param {(SuperMap.Feature.Vector|Array)} features - A feature or array of features
     * @returns {string} The WKT string representation of the input geometries
     */

  }, {
    key: "write",
    value: function write(features) {
      var collection, geometry, isCollection;

      if (features.constructor === Array) {
        collection = features;
        isCollection = true;
      } else {
        collection = [features];
        isCollection = false;
      }

      var pieces = [];

      if (isCollection) {
        pieces.push('GEOMETRYCOLLECTION(');
      }

      for (var i = 0, len = collection.length; i < len; ++i) {
        if (isCollection && i > 0) {
          pieces.push(',');
        }

        geometry = collection[i].geometry;
        pieces.push(this.extractGeometry(geometry));
      }

      if (isCollection) {
        pieces.push(')');
      }

      return pieces.join('');
    }
    /**
     * @function SuperMap.Format.WKT.prototype.extractGeometry
     * @description Entry point to construct the WKT for a single Geometry object.
     * @param {SuperMap.Geometry} geometry 
     * @returns {string} A WKT string of representing the geometry
     */

  }, {
    key: "extractGeometry",
    value: function extractGeometry(geometry) {
      var type = geometry.CLASS_NAME.split('.')[2].toLowerCase();

      if (!this.extract[type]) {
        return null;
      }

      var wktType = type === 'collection' ? 'GEOMETRYCOLLECTION' : type.toUpperCase();
      var data = wktType + '(' + this.extract[type].apply(this, [geometry]) + ')';
      return data;
    }
  }]);

  return WKT;
}(Format);
SuperMap.Format.WKT = WKT;
// CONCATENATED MODULE: ./src/common/format/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/








// CONCATENATED MODULE: ./src/common/control/TimeControlBase.js
function TimeControlBase_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function TimeControlBase_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function TimeControlBase_createClass(Constructor, protoProps, staticProps) { if (protoProps) TimeControlBase_defineProperties(Constructor.prototype, protoProps); if (staticProps) TimeControlBase_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.TimeControlBase
 * @classdesc æ¶é´æ§å¶åºç±»ç±»ã
 * @category  Control
 * @param {Object} options - è¯¥ç±»å¼æ¾çå¯éå±æ§ã
 * @param {number} [options.speed=1] - éåº¦ãä¸è½å°äº 0ï¼ï¼æ¯å¸§æ¸²æçæ°æ®ä¹é´çé´éä¸º1ï¼ï¼è®¾ç½®è¶å¤§éåº¦è¶å¿«ã
 * @param {number} [options.frequency=1000] - å·æ°é¢çï¼åä½ msï¼ï¼æå¡å¨å·æ°çæ¶é´é´éã
 * @param {number} [options.startTime=0] - èµ·å§æ¶é´ï¼å¿é¡»ä¸ºæ°å­ï¼ä¸å°äºç­äº endTimeãå¦æä¸è®¾ç½®ï¼åå§åæ¶ä¸º 0ï¼å»ºè®®è®¾ç½®ã
 * @param {number} [options.endTime] - ç»ææ¶é´ï¼å¿é¡»ä¸ºæ°å­ï¼ä¸å¤§äºç­äº startTimeãå¦æä¸è®¾ç½®ï¼åå§åæ¶ä»¥å½åæ¶é´è¿è¡è®¾ç½®ï¼å»ºè®®è®¾ç½®ã
 * @param {boolean} [options.repeat=true] - æ¯å¦éå¤å¾ªç¯ã
 * @param {boolean} [options.reverse=false] - æ¯å¦ååã
 */

var TimeControlBase = /*#__PURE__*/function () {
  function TimeControlBase(options) {
    TimeControlBase_classCallCheck(this, TimeControlBase);

    //è®¾ç½®æ­¥é¿ï¼å·æ°é¢çãå¼å§ç»ææ¶é´ãæ¯å¦å¾ªç¯ãæ¯å¦åå
    var me = this;
    options = options || {};
    /**
     * @member {number} [SuperMap.TimeControlBase.prototype.speed=1]
     * @description æ­¥é¿ï¼å¿é¡»ä¸ºéè´æ°ï¼é»è®¤ä¸º1ï¼è¡¨ç¤ºååä¸¤æ¬¡æ¸²æçæ°æ®ä¹é´çé´éä¸º1ï¼
     */

    this.speed = options.speed && options.speed >= 0 ? options.speed : 1;
    /**
     * @member {number} [SuperMap.TimeControlBase.prototype.frequency=1000]
     * @description å·æ°é¢ç(åä½ms)ï¼æå¡å¨å·æ°çæ¶é´é´éã
     */

    this.frequency = options.speed && options.frequency >= 0 ? options.frequency : 1000;
    /**
     * @member {number} [SuperMap.TimeControlBase.prototype.startTime=0]
     * @description è®°å½çèµ·å§æ¶é´ï¼å¿é¡»ä¸ºæ°å­ï¼
     *              å¦æä¸è®¾ç½®ï¼åå§åæ¶ä¸º0ï¼å»ºè®®è®¾ç½®
     */

    this.startTime = options.startTime && options.startTime != null ? options.startTime : 0;
    /**
     * @member {number} SuperMap.TimeControlBase.prototype.endTime
     * @description è®°å½çç»ææ¶é´ï¼å¿é¡»ä¸ºæ°å­ï¼
     *              å¦æä¸è®¾ç½®ï¼åå§åæ¶ä»¥å½åæ¶é´è¿è¡è®¾ç½®ï¼å»ºè®®è®¾ç½®
     */

    this.endTime = options.endTime && options.endTime != null && options.endTime >= me.startTime ? options.endTime : +new Date();
    /**
     * @member {boolean} [SuperMap.TimeControlBase.prototype.repeat=true]
     * @description æ¯å¦éå¤å¾ªç¯ã
     */

    this.repeat = options.repeat !== undefined ? options.repeat : true;
    /**
     * @member {boolean} [SuperMap.TimeControlBase.prototype.reverse=false]
     * @description æ¯å¦ååã
     */

    this.reverse = options.reverse !== undefined ? options.reverse : false;
    /**
     * @member {number} SuperMap.TimeControlBase.prototype.currentTime
     * @description è®°å½è¿æçæ¶é´ï¼ä¹å°±æ¯å½åå¸§è¿è¡å°çæ¶é´ã
     */

    this.currentTime = null;
    /**
     * @member {number} SuperMap.TimeControlBase.prototype.oldTime
     * @description è®°å½ä¸ä¸å¸§çæ¶é´ï¼ä¹å°±æ¯ä¹åè¿è¡å°çæ¶é´ã
     */

    this.oldTime = null;
    /**
     * @member {boolean} [SuperMap.TimeControlBase.prototype.running=false]
     * @description è®°å½å½åæ¯å¦å¤äºè¿è¡ä¸­ã
     */

    this.running = false;
    /**
     * @private
     * @member {Array.<string>} SuperMap.TimeControlBase.prototype.EVENT_TYPES
     * @description æ­¤ç±»æ¯æçäºä»¶ç±»åã
     *
     */

    this.EVENT_TYPES = ["start", "pause", "stop"];
    /**
     * @private
     * @member {SuperMap.Events} SuperMap.TimeControlBase.prototype.events
     * @description äºä»¶
     */

    me.events = new Events(this, null, this.EVENT_TYPES);
    me.speed = Number(me.speed);
    me.frequency = Number(me.frequency);
    me.startTime = Number(me.startTime);
    me.endTime = Number(me.endTime);
    me.startTime = Date.parse(new Date(me.startTime));
    me.endTime = Date.parse(new Date(me.endTime)); //åå§åå½åæ¶é´

    me.currentTime = me.startTime;
    this.CLASS_NAME = "SuperMap.TimeControlBase";
  }
  /**
   * @function SuperMap.TimeControlBase.prototype.updateOptions
   * @param {Object} options - è®¾ç½®åæ°å¾å¯éåæ°ãè®¾ç½®æ­¥é¿ï¼å·æ°é¢çãå¼å§ç»ææ¶é´ãæ¯å¦å¾ªç¯ãæ¯å¦ååã
   */


  TimeControlBase_createClass(TimeControlBase, [{
    key: "updateOptions",
    value: function updateOptions(options) {
      //è®¾ç½®æ­¥é¿ï¼å·æ°é¢çãå¼å§ç»ææ¶é´ãæ¯å¦å¾ªç¯ãæ¯å¦åå
      var me = this;
      options = options || {};

      if (options.speed && options.speed >= 0) {
        me.speed = options.speed;
        me.speed = Number(me.speed);
      }

      if (options.speed && options.frequency >= 0) {
        me.frequency = options.frequency;
        me.frequency = Number(me.frequency);
      }

      if (options.startTime && options.startTime != null) {
        me.startTime = options.startTime;
        me.startTime = Date.parse(new Date(me.startTime));
      }

      if (options.endTime && options.endTime != null && options.endTime >= me.startTime) {
        me.endTime = options.endTime;
        me.endTime = Date.parse(new Date(me.endTime));
      }

      if (options.repeat != null) {
        me.repeat = options.repeat;
      }

      if (options.reverse != null) {
        me.reverse = options.reverse;
      }
    }
    /**
     * @function SuperMap.TimeControlBase.prototype.start
     * @description å¼å§ã
     */

  }, {
    key: "start",
    value: function start() {
      var me = this;

      if (!me.running) {
        me.running = true;
        me.tick();
        me.events.triggerEvent('start', me.currentTime);
      }
    }
    /**
     * @function SuperMap.TimeControlBase.prototype.pause
     * @description æåã
     */

  }, {
    key: "pause",
    value: function pause() {
      var me = this;
      me.running = false;
      me.events.triggerEvent('pause', me.currentTime);
    }
    /**
     * @function SuperMap.TimeControlBase.prototype.stop
     * @description åæ­¢ï¼åæ­¢åè¿åèµ·å§ç¶æã
     */

  }, {
    key: "stop",
    value: function stop() {
      var me = this; //åæ­¢æ¶ æ¶é´è®¾ç½®ä¸ºå¼å§æ¶é´

      me.currentTime = me.startTime; //å¦ææ­£å¨è¿è¡ï¼ä¿®æ¹ä¸ºåå§æ¶é´å³å¯ç»å¶ä¸å¸§

      if (me.running) {
        me.running = false;
      }

      me.events.triggerEvent('stop', me.currentTime);
    }
    /**
     * @function SuperMap.TimeControlBase.prototype.toggle
     * @description å¼å³åæ¢ï¼åæ¢çæ¯å¼å§åæåã
     */

  }, {
    key: "toggle",
    value: function toggle() {
      var me = this;

      if (me.running) {
        me.pause();
      } else {
        me.start();
      }
    }
    /**
     * @function SuperMap.TimeControlBase.prototype.setSpeed
     * @description è®¾ç½®æ­¥é¿ã
     * @param {number} [speed=1] - æ­¥é¿ï¼å¿é¡»ä¸ºéè´æ°ã
     * @returns {boolean} true ä»£è¡¨è®¾ç½®æåï¼false è®¾ç½®å¤±è´¥ï¼speed å°äº 0 æ¶å¤±è´¥ï¼ã
     */

  }, {
    key: "setSpeed",
    value: function setSpeed(speed) {
      var me = this;

      if (speed >= 0) {
        me.speed = speed;
        return true;
      }

      return false;
    }
    /**
     * @function SuperMap.TimeControlBase.prototype.getSpeed
     * @description è·åæ­¥é¿ã
     * @returns {number} è¿åå½åçæ­¥é¿
     */

  }, {
    key: "getSpeed",
    value: function getSpeed() {
      return this.speed;
    }
    /**
     * @function SuperMap.TimeControlBase.prototype.setFrequency
     * @description è®¾ç½®å·æ°é¢çã
     * @param {number} [frequency=1000] - å·æ°é¢çï¼åä½ä¸º msã
     * @returns {boolean} true ä»£è¡¨è®¾ç½®æåï¼false è®¾ç½®å¤±è´¥ï¼frequency å°äº 0 æ¶å¤±è´¥ï¼ã
     */

  }, {
    key: "setFrequency",
    value: function setFrequency(frequency) {
      var me = this;

      if (frequency >= 0) {
        me.frequency = frequency;
        return true;
      }

      return false;
    }
    /**
     * @function SuperMap.TimeControlBase.prototype.getFrequency
     * @description è·åå·æ°é¢çã
     * @returns {number} è¿åå½åçå·æ°é¢çã
     */

  }, {
    key: "getFrequency",
    value: function getFrequency() {
      return this.frequency;
    }
    /**
     * @function SuperMap.TimeControlBase.prototype.setStartTime
     * @description è®¾ç½®èµ·å§æ¶é´ï¼è®¾ç½®å®æåå¦æå½åæ¶é´å°äºèµ·å§æ¶é´ï¼åä»èµ·å§æ¶é´å¼å§ã
     * @param {number} startTime - éè¦è®¾ç½®çèµ·å§æ¶é´ã
     * @returns {boolean} true ä»£è¡¨è®¾ç½®æåï¼false è®¾ç½®å¤±è´¥ï¼startTime å¤§äºç»ææ¶é´æ¶å¤±è´¥ï¼ã
     */

  }, {
    key: "setStartTime",
    value: function setStartTime(startTime) {
      var me = this;
      startTime = Date.parse(new Date(startTime)); //èµ·å§æ¶é´ä¸å¾å¤§äºç»ææ¶é´

      if (startTime > me.endTime) {
        return false;
      }

      me.startTime = startTime; //å¦æå½åæ¶é´å°äºäºèµ·å§æ¶é´ï¼åä»å½åèµ·å§æ¶é´å¼å§

      if (me.currentTime < me.startTime) {
        me.currentTime = me.startTime;
        me.tick();
      }

      return true;
    }
    /**
     * @function SuperMap.TimeControlBase.prototype.getStartTime
     * @description è·åèµ·å§æ¶é´ã
     * @returns {number} è¿åå½åçèµ·å§æ¶é´ã
     */

  }, {
    key: "getStartTime",
    value: function getStartTime() {
      return this.startTime;
    }
    /**
     * @function SuperMap.TimeControlBase.prototype.setEndTime
     * @description è®¾ç½®ç»ææ¶é´ï¼è®¾ç½®å®æåå¦æå½åæ¶é´å¤§äºç»æï¼åä»èµ·å§æ¶é´å¼å§ã
     * @param {number} endTime - éè¦è®¾ç½®çç»ææ¶é´ã
     * @returns {boolean} true ä»£è¡¨è®¾ç½®æåï¼false è®¾ç½®å¤±è´¥ï¼endTime å°äºå¼å§æ¶é´æ¶å¤±è´¥ï¼ã
     */

  }, {
    key: "setEndTime",
    value: function setEndTime(endTime) {
      var me = this;
      me.endTime = Date.parse(new Date(me.endTime)); //ç»ææ¶é´ä¸å¾å°äºå¼å§æ¶é´

      if (endTime < me.startTime) {
        return false;
      }

      me.endTime = endTime; //å¦æå½åæ¶é´å¤§äºäºç»ææ¶é´ï¼åä»èµ·å§æ¶é´å¼å§

      if (me.currentTime >= me.endTime) {
        me.currentTime = me.startTime;
        me.tick();
      }

      return true;
    }
    /**
     * @function SuperMap.TimeControlBase.prototype.getEndTime
     * @description è·åç»ææ¶é´ã
     * @returns {number} è¿åå½åçç»ææ¶é´ã
     */

  }, {
    key: "getEndTime",
    value: function getEndTime() {
      return this.endTime;
    }
    /**
     * @function SuperMap.TimeControlBase.prototype.setCurrentTime
     * @description è®¾ç½®å½åæ¶é´ã
     * @param {number} currentTime - éè¦è®¾ç½®çå½åæ¶é´ã
     * @returns {boolean} true ä»£è¡¨è®¾ç½®æåï¼false è®¾ç½®å¤±è´¥ã
     */

  }, {
    key: "setCurrentTime",
    value: function setCurrentTime(currentTime) {
      var me = this;
      me.currentTime = Date.parse(new Date(me.currentTime)); //ç»ææ¶é´ä¸å¾å°äºå¼å§æ¶é´

      if (currentTime >= me.startTime && currentTime <= me.endTime) {
        me.currentTime = currentTime;
        me.startTime = me.currentTime;
        me.tick();
        return true;
      }

      return false;
    }
    /**
     * @function SuperMap.TimeControlBase.prototype.getCurrentTime
     * @description è·åå½åæ¶é´ã
     * @returns {number} è¿åå½åæ¶é´ã
     */

  }, {
    key: "getCurrentTime",
    value: function getCurrentTime() {
      return this.currentTime;
    }
    /**
     * @function SuperMap.TimeControlBase.prototype.setRepeat
     * @description è®¾ç½®æ¯å¦éå¤å¾ªç¯ã
     * @param {boolean} [repeat=true] - æ¯å¦éå¤å¾ªç¯ã
     */

  }, {
    key: "setRepeat",
    value: function setRepeat(repeat) {
      this.repeat = repeat;
    }
    /**
     * @function SuperMap.TimeControlBase.prototype.getRepeat
     * @description è·åæ¯å¦éå¤å¾ªç¯ï¼é»è®¤æ¯ trueã
     * @returns {boolean} è¿åæ¯å¦éå¤å¾ªç¯ã
     */

  }, {
    key: "getRepeat",
    value: function getRepeat() {
      return this.repeat;
    }
    /**
     * @function SuperMap.TimeControlBase.prototype.setReverse
     * @description è®¾ç½®æ¯å¦ååã
     * @param {boolean} [reverse=false] - æ¯å¦ååã
     */

  }, {
    key: "setReverse",
    value: function setReverse(reverse) {
      this.reverse = reverse;
    }
    /**
     * @function SuperMap.TimeControlBase.prototype.getReverse
     * @description è·åæ¯å¦ååï¼é»è®¤æ¯falseã
     * @returns {boolean} è¿åæ¯å¦ååã
     */

  }, {
    key: "getReverse",
    value: function getReverse() {
      return this.reverse;
    }
    /**
     * @function SuperMap.TimeControlBase.prototype.getRunning
     * @description è·åè¿è¡ç¶æã
     * @returns {boolean} true ä»£è¡¨æ­£å¨è¿è¡ï¼false åè¡¨æ²¡æè¿è¡ã
     */

  }, {
    key: "getRunning",
    value: function getRunning() {
      return this.running;
    }
    /**
     * @function SuperMap.TimeControlBase.prototype.destroy
     * @description éæ¯ Animator å¯¹è±¡ï¼éæ¾èµæºã
     */

  }, {
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.speed = null;
      me.frequency = null;
      me.startTime = null;
      me.endTime = null;
      me.currentTime = null;
      me.repeat = null;
      me.running = false;
      me.reverse = null;
    }
  }, {
    key: "tick",
    value: function tick() {//TODO æ¯æ¬¡å·æ°æ§è¡çæä½ãå­ç±»å®ç°
    }
  }]);

  return TimeControlBase;
}();
SuperMap.TimeControlBase = TimeControlBase;
// CONCATENATED MODULE: ./src/common/control/TimeFlowControl.js
function TimeFlowControl_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { TimeFlowControl_typeof = function _typeof(obj) { return typeof obj; }; } else { TimeFlowControl_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return TimeFlowControl_typeof(obj); }

function TimeFlowControl_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function TimeFlowControl_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function TimeFlowControl_createClass(Constructor, protoProps, staticProps) { if (protoProps) TimeFlowControl_defineProperties(Constructor.prototype, protoProps); if (staticProps) TimeFlowControl_defineProperties(Constructor, staticProps); return Constructor; }

function TimeFlowControl_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { TimeFlowControl_get = Reflect.get; } else { TimeFlowControl_get = function _get(target, property, receiver) { var base = TimeFlowControl_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return TimeFlowControl_get(target, property, receiver || target); }

function TimeFlowControl_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = TimeFlowControl_getPrototypeOf(object); if (object === null) break; } return object; }

function TimeFlowControl_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) TimeFlowControl_setPrototypeOf(subClass, superClass); }

function TimeFlowControl_setPrototypeOf(o, p) { TimeFlowControl_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return TimeFlowControl_setPrototypeOf(o, p); }

function TimeFlowControl_createSuper(Derived) { var hasNativeReflectConstruct = TimeFlowControl_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = TimeFlowControl_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = TimeFlowControl_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return TimeFlowControl_possibleConstructorReturn(this, result); }; }

function TimeFlowControl_possibleConstructorReturn(self, call) { if (call && (TimeFlowControl_typeof(call) === "object" || typeof call === "function")) { return call; } return TimeFlowControl_assertThisInitialized(self); }

function TimeFlowControl_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function TimeFlowControl_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function TimeFlowControl_getPrototypeOf(o) { TimeFlowControl_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return TimeFlowControl_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.TimeFlowControl
 * @classdesc æ¶é´ç®¡çç±»ã
 * @category  Control
 * @description æ­¤ç±»åªè´è´£æ¶é´ä¸çæ§å¶ï¼å·ä½æ§è¡çæä½éè¦ç¨æ·å¨åå§åæ¶çåè°å½æ°åé¨è¿è¡å®ç°ã
 * å¦è®¾ç½®èµ·å§æ¶é´ä¸º 1000ï¼ç»ææ¶é´æ¯ 2000ï¼æ­¥é¿è®¾ç½®ä¸º 1ï¼
 * é£ä¹è¡¨ç¤ºæç§æ¯æ¬¡1å¹´ï¼å¯ä»¥éè¿ setSpeed è¿è¡ä¿®æ¹ï¼çååä»å¬å 1000 å¹´å¼å§å°å¬å 2000 å¹´ä¸ºæ­¢ï¼é»è®¤æ¯ 1 ç§ä¼ 1 æ¬¡ï¼éè¿ setFrequency ä¿®æ¹ï¼
 * @extends {SuperMap.TimeControlBase}
 * @param {function} callback - æ¯æ¬¡å·æ°åè°å½æ°ãå·ä½çææéè¦ç¨æ·å¨æ­¤åè°å½æ°éé¢å®ç°ã
 * @param {Object} options - è¯¥ç±»å¼æ¾çå¯éå±æ§ã
 * @param {number} [options.speed=1] - æ­¥é¿ï¼åä½ msï¼ãä¸è½å°äº 0ï¼ï¼æ¯æ¬¡å·æ°çæ°æ®ä¹é´çé´éä¸º 1msï¼ã
 * @param {number} [options.frequency=1000] - å·æ°é¢çï¼åä½ msï¼ã
 * @param {number} [options.startTime=0] - èµ·å§æ¶é´ï¼å¿é¡»ä¸ºæ°å­ï¼ä¸å°äºç­äº endTimeãå¦æä¸è®¾ç½®ï¼åå§åæ¶ä¸º 0ï¼å»ºè®®è®¾ç½®ã
 * @param {number} [options.endTime] - ç»ææ¶é´ï¼å¿é¡»ä¸ºæ°å­ï¼ä¸å¤§äºç­äº startTimeãå¦æä¸è®¾ç½®ï¼åå§åæ¶ä½¿ç¨ new Date() ä»¥å½åæ¶é´è¿è¡è®¾ç½®ï¼å»ºè®®è®¾ç½®ã
 * @param {boolean} [options.repeat=true] - æ¯å¦éå¤å¾ªç¯ã
 * @param {boolean} [options.reverse=false] - æ¯å¦ååã
 */

var TimeFlowControl = /*#__PURE__*/function (_TimeControlBase) {
  TimeFlowControl_inherits(TimeFlowControl, _TimeControlBase);

  var _super = TimeFlowControl_createSuper(TimeFlowControl);

  function TimeFlowControl(callback, options) {
    var _this;

    TimeFlowControl_classCallCheck(this, TimeFlowControl);

    _this = _super.call(this, options);

    var me = TimeFlowControl_assertThisInitialized(_this);
    /**
     * @member SuperMap.TimeFlowControl.prototype.callback -{function}
     * @description æ¯æ¬¡å·æ°æ§è¡çåè°å½æ°ã
     */


    me.callback = callback; //åè®©IEä¸æ¯æbindæ¹æ³

    if (!Function.prototype.bind) {
      Function.prototype.bind = function (oThis) {
        if (typeof this !== "function") {
          throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");
        }

        var aArgs = Array.prototype.slice.call(arguments, 1),
            fToBind = this,
            fNOP = function fNOP() {//empty Function
        },
            fBound = function fBound() {
          return fToBind.apply(this instanceof fNOP && oThis ? this : oThis, aArgs.concat(Array.prototype.slice.call(arguments)));
        };

        fNOP.prototype = this.prototype;
        fBound.prototype = new fNOP();
        return fBound;
      };
    } //ä¿è¯ this.tick çä¸ä¸æè¿æ¯ TimeControl è¿ä¸ªå¯¹è±¡


    me.update = me.update.bind(me);
    me.oldTime = me.currentTime;
    me.CLASS_NAME = "SuperMap.TimeFlowControl";
    return _this;
  }
  /**
   * @function SuperMap.TimeFlowControl.prototype.updateOptions
   * @override
   */


  TimeFlowControl_createClass(TimeFlowControl, [{
    key: "updateOptions",
    value: function updateOptions(options) {
      options = options || {};

      TimeFlowControl_get(TimeFlowControl_getPrototypeOf(TimeFlowControl.prototype), "updateOptions", this).call(this, options);
    }
    /**
     * @function SuperMap.TimeFlowControl.prototype.start
     * @override
     */

  }, {
    key: "start",
    value: function start() {
      var me = this;

      if (me.running) {
        return;
      }

      me.running = true;

      if (me.reverse) {
        if (me.currentTime === me.startTime) {
          me.oldTime = me.endTime;
          me.currentTime = me.oldTime;
        }
      } else {
        if (me.oldTime === me.endTime) {
          me.currentTime = me.startTime;
          me.oldTime = me.currentTime;
        }
      }

      me.tick();
    }
    /**
     * @function SuperMap.TimeFlowControl.prototype.stop
     * @override
     */

  }, {
    key: "stop",
    value: function stop() {
      TimeFlowControl_get(TimeFlowControl_getPrototypeOf(TimeFlowControl.prototype), "stop", this).call(this);

      var me = this;
      me.oldTime = me.currentTime;

      if (me.running) {
        me.running = false;
      } //æ¸é¤å®æ¶tick


      me.intervalId && window.clearTimeout(me.intervalId);
    }
    /**
     * @function SuperMap.TimeFlowControl.prototype.destroy
     * @override
     */

  }, {
    key: "destroy",
    value: function destroy() {
      TimeFlowControl_get(TimeFlowControl_getPrototypeOf(TimeFlowControl.prototype), "destroy", this).call(this);

      var me = this;
      me.oldTime = null;
      me.callback = null;
    }
    /**
     * @function SuperMap.TimeFlowControl.prototype.tick
     * @description å®æ¶å·æ°ã
     */

  }, {
    key: "tick",
    value: function tick() {
      var me = this;
      me.intervalId && window.clearInterval(me.intervalId);
      me.intervalId = null;
      me.update();
      me.intervalId = window.setInterval(me.update, me.frequency);
    }
    /**
     * @function SuperMap.TimeFlowControl.prototype.update
     * @override
     */

  }, {
    key: "update",
    value: function update() {
      var me = this; //å¤å®æ¯å¦è¿éè¦ç»§ç»­

      if (!me.running) {
        return;
      } //è°ç¨åè°å½æ°


      me.callback && me.callback(me.currentTime); //destroyä¹åcallbackå°±ä¸ºç©ºï¼æä»¥éè¦å¤å®ä¸ä¸

      if (!me.reverse) {
        //å¦æç¸ç­ï¼åä»£è¡¨ä¸ä¸å¸§å·²ç»è¿è¡å°äºæåï¼ä¸ä¸å¸§è¿è¡åå§åçç¶æ
        if (me.currentTime === me.endTime) {
          //ä¸å¾ªç¯æ¶
          if (!me.repeat) {
            me.running = false;
            me.stop();
            return null;
          }

          me.stop();
          me.currentTime = me.startTime;
          me.oldTime = me.currentTime;
          me.start();
        } else {
          //å¦åæ¶é´éå¢
          me.oldTime = me.currentTime;
          me.currentTime += me.speed;
        }

        if (me.currentTime >= me.endTime) {
          me.currentTime = me.endTime;
        }
      } else {
        //å¦æç¸ç­ï¼åä»£è¡¨ä¸ä¸å¸§å·²ç»è¿è¡å°äºæåï¼ä¸ä¸å¸§è¿è¡ç»æçç¶æ
        if (me.currentTime === me.startTime) {
          //ä¸å¾ªç¯æ¶
          if (!me.repeat) {
            me.running = false;
            return null;
          }

          me.oldTime = me.endTime;
          me.currentTime = me.oldTime;
        } else {
          //å¦åæ¶é´éå
          me.currentTime = me.oldTime;
          me.oldTime -= me.speed;
        }

        if (me.oldTime <= me.startTime) {
          me.oldTime = me.startTime;
        }
      }
    }
  }]);

  return TimeFlowControl;
}(TimeControlBase);
SuperMap.TimeFlowControl = TimeFlowControl;
// CONCATENATED MODULE: ./src/common/control/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/






// EXTERNAL MODULE: ./node_modules/promise-polyfill/dist/polyfill.js
var polyfill = __webpack_require__(957);
// EXTERNAL MODULE: ./node_modules/fetch-ie8/fetch.js
var fetch = __webpack_require__(937);
// EXTERNAL MODULE: ./node_modules/fetch-jsonp/build/fetch-jsonp.js
var fetch_jsonp = __webpack_require__(238);
var fetch_jsonp_default = /*#__PURE__*/__webpack_require__.n(fetch_jsonp);

// CONCATENATED MODULE: ./src/common/util/FetchRequest.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





var FetchRequest_fetch = window.fetch;
var setFetch = function setFetch(newFetch) {
  FetchRequest_fetch = newFetch;
};
/**
 * @function SuperMap.setCORS
 * @description è®¾ç½®æ¯å¦åè®¸è·¨åè¯·æ±ï¼å¨å±éç½®ï¼ä¼åçº§ä½äº service ä¸ç crossOring åæ°ã
 * @param {boolean} cors - æ¯å¦åè®¸è·¨åè¯·æ±ã
 */

var setCORS = SuperMap.setCORS = function (cors) {
  SuperMap.CORS = cors;
};
/**
 * @function SuperMap.isCORS
 * @description æ¯æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @returns {boolean} æ¯å¦åè®¸è·¨åè¯·æ±ã
 */

var isCORS = SuperMap.isCORS = function () {
  if (SuperMap.CORS != undefined) {
    return SuperMap.CORS;
  }

  return window.XMLHttpRequest && 'withCredentials' in new window.XMLHttpRequest();
};
/**
 * @function SuperMap.setRequestTimeout
 * @description è®¾ç½®è¯·æ±è¶æ¶æ¶é´ã
 * @param {number} [timeout=45] - è¯·æ±è¶æ¶æ¶é´ï¼åä½ç§ã
 */

var setRequestTimeout = SuperMap.setRequestTimeout = function (timeout) {
  return SuperMap.RequestTimeout = timeout;
};
/**
 * @function SuperMap.getRequestTimeout
 * @description è·åè¯·æ±è¶æ¶æ¶é´ã
 * @returns {number} è¯·æ±è¶æ¶æ¶é´ã
 */

var getRequestTimeout = SuperMap.getRequestTimeout = function () {
  return SuperMap.RequestTimeout || 45000;
};
var FetchRequest = SuperMap.FetchRequest = {
  commit: function commit(method, url, params, options) {
    method = method ? method.toUpperCase() : method;

    switch (method) {
      case 'GET':
        return this.get(url, params, options);

      case 'POST':
        return this.post(url, params, options);

      case 'PUT':
        return this.put(url, params, options);

      case 'DELETE':
        return this["delete"](url, params, options);

      default:
        return this.get(url, params, options);
    }
  },
  supportDirectRequest: function supportDirectRequest(url, options) {
    if (Util.isInTheSameDomain(url)) {
      return true;
    }

    if (options.crossOrigin != undefined) {
      return options.crossOrigin;
    } else {
      return isCORS() || options.proxy;
    }
  },
  get: function get(url, params, options) {
    options = options || {};
    var type = 'GET';
    url = Util.urlAppend(url, this._getParameterString(params || {}));
    url = this._processUrl(url, options);

    if (!this.supportDirectRequest(url, options)) {
      url = url.replace('.json', '.jsonp');
      var config = {
        url: url,
        data: params
      };
      return SuperMap.Util.RequestJSONPPromise.GET(config);
    }

    if (!this.urlIsLong(url)) {
      return this._fetch(url, params, options, type);
    } else {
      return this._postSimulatie(type, url.substring(0, url.indexOf('?') - 1), params, options);
    }
  },
  "delete": function _delete(url, params, options) {
    options = options || {};
    var type = 'DELETE';
    url = Util.urlAppend(url, this._getParameterString(params || {}));
    url = this._processUrl(url, options);

    if (!this.supportDirectRequest(url, options)) {
      url = url.replace('.json', '.jsonp');
      var config = {
        url: url += "&_method=DELETE",
        data: params
      };
      return SuperMap.Util.RequestJSONPPromise.DELETE(config);
    }

    if (this.urlIsLong(url)) {
      return this._postSimulatie(type, url.substring(0, url.indexOf('?') - 1), params, options);
    }

    return this._fetch(url, params, options, type);
  },
  post: function post(url, params, options) {
    options = options || {};

    if (!this.supportDirectRequest(url, options)) {
      url = url.replace('.json', '.jsonp');
      var config = {
        url: url += "&_method=POST",
        data: params
      };
      return SuperMap.Util.RequestJSONPPromise.POST(config);
    }

    return this._fetch(this._processUrl(url, options), params, options, 'POST');
  },
  put: function put(url, params, options) {
    options = options || {};
    url = this._processUrl(url, options);

    if (!this.supportDirectRequest(url, options)) {
      url = url.replace('.json', '.jsonp');
      var config = {
        url: url += "&_method=PUT",
        data: params
      };
      return SuperMap.Util.RequestJSONPPromise.PUT(config);
    }

    return this._fetch(url, params, options, 'PUT');
  },
  urlIsLong: function urlIsLong(url) {
    //å½åurlçå­èé¿åº¦ã
    var totalLength = 0,
        charCode = null;

    for (var i = 0, len = url.length; i < len; i++) {
      //è½¬åä¸ºUnicodeç¼ç 
      charCode = url.charCodeAt(i);

      if (charCode < 0x007f) {
        totalLength++;
      } else if (0x0080 <= charCode && charCode <= 0x07ff) {
        totalLength += 2;
      } else if (0x0800 <= charCode && charCode <= 0xffff) {
        totalLength += 3;
      }
    }

    return totalLength < 2000 ? false : true;
  },
  _postSimulatie: function _postSimulatie(type, url, params, options) {
    var separator = url.indexOf('?') > -1 ? '&' : '?';
    url += separator + '_method=' + type;

    if (typeof params !== 'string') {
      params = JSON.stringify(params);
    }

    return this.post(url, params, options);
  },
  _processUrl: function _processUrl(url, options) {
    if (this._isMVTRequest(url)) {
      return url;
    }

    if (url.indexOf('.json') === -1 && !options.withoutFormatSuffix) {
      if (url.indexOf('?') < 0) {
        url += '.json';
      } else {
        var urlArrays = url.split('?');

        if (urlArrays.length === 2) {
          url = urlArrays[0] + '.json?' + urlArrays[1];
        }
      }
    }

    if (options && options.proxy) {
      if (typeof options.proxy === 'function') {
        url = options.proxy(url);
      } else {
        url = decodeURIComponent(url);
        url = options.proxy + encodeURIComponent(url);
      }
    }

    return url;
  },
  _fetch: function _fetch(url, params, options, type) {
    options = options || {};
    options.headers = options.headers || {};

    if (!options.headers['Content-Type']) {
      options.headers['Content-Type'] = 'application/x-www-form-urlencoded;charset=UTF-8';
    }

    if (options.timeout) {
      return this._timeout(options.timeout, FetchRequest_fetch(url, {
        method: type,
        headers: options.headers,
        body: type === 'PUT' || type === 'POST' ? params : undefined,
        credentials: this._getWithCredentials(options),
        mode: 'cors',
        timeout: getRequestTimeout()
      }).then(function (response) {
        return response;
      }));
    }

    return FetchRequest_fetch(url, {
      method: type,
      body: type === 'PUT' || type === 'POST' ? params : undefined,
      headers: options.headers,
      credentials: this._getWithCredentials(options),
      mode: 'cors',
      timeout: getRequestTimeout()
    }).then(function (response) {
      return response;
    });
  },
  _getWithCredentials: function _getWithCredentials(options) {
    if (options.withCredentials === true) {
      return 'include';
    }

    if (options.withCredentials === false) {
      return 'omit';
    }

    return 'same-origin';
  },
  _fetchJsonp: function _fetchJsonp(url, options) {
    options = options || {};
    return fetch_jsonp_default()(url, {
      method: 'GET',
      timeout: options.timeout
    }).then(function (response) {
      return response;
    });
  },
  _timeout: function _timeout(seconds, promise) {
    return new Promise(function (resolve, reject) {
      setTimeout(function () {
        reject(new Error('timeout'));
      }, seconds);
      promise.then(resolve, reject);
    });
  },
  _getParameterString: function _getParameterString(params) {
    var paramsArray = [];

    for (var key in params) {
      var value = params[key];

      if (value != null && typeof value !== 'function') {
        var encodedValue;

        if (Array.isArray(value) || value.toString() === '[object Object]') {
          encodedValue = encodeURIComponent(JSON.stringify(value));
        } else {
          encodedValue = encodeURIComponent(value);
        }

        paramsArray.push(encodeURIComponent(key) + '=' + encodedValue);
      }
    }

    return paramsArray.join('&');
  },
  _isMVTRequest: function _isMVTRequest(url) {
    return url.indexOf('.mvt') > -1 || url.indexOf('.pbf') > -1;
  }
};
SuperMap.Util.RequestJSONPPromise = {
  limitLength: 1500,
  queryKeys: [],
  queryValues: [],
  supermap_callbacks: {},
  addQueryStrings: function addQueryStrings(values) {
    var me = this;

    for (var key in values) {
      me.queryKeys.push(key);

      if (typeof values[key] !== 'string') {
        values[key] = SuperMap.Util.toJSON(values[key]);
      }

      var tempValue = encodeURIComponent(values[key]);
      me.queryValues.push(tempValue);
    }
  },
  issue: function issue(config) {
    var me = this,
        uid = me.getUid(),
        url = config.url,
        splitQuestUrl = [];
    var p = new Promise(function (resolve) {
      me.supermap_callbacks[uid] = function (response) {
        delete me.supermap_callbacks[uid];
        resolve(response);
      };
    }); // me.addQueryStrings({
    //     callback: "SuperMap.Util.RequestJSONPPromise.supermap_callbacks[" + uid + "]"
    // });

    var sectionURL = url,
        keysCount = 0; //æ­¤æ¬¡sectionURLä¸­æå¤å°ä¸ªkey

    var length = me.queryKeys ? me.queryKeys.length : 0;

    for (var i = 0; i < length; i++) {
      if (sectionURL.length + me.queryKeys[i].length + 2 >= me.limitLength) {
        //+2 for ("&"or"?")and"="
        if (keysCount == 0) {
          return false;
        }

        splitQuestUrl.push(sectionURL);
        sectionURL = url;
        keysCount = 0;
        i--;
      } else {
        if (sectionURL.length + me.queryKeys[i].length + 2 + me.queryValues[i].length > me.limitLength) {
          var leftValue = me.queryValues[i];

          while (leftValue.length > 0) {
            var leftLength = me.limitLength - sectionURL.length - me.queryKeys[i].length - 2; //+2 for ("&"or"?")and"="

            if (sectionURL.indexOf('?') > -1) {
              sectionURL += '&';
            } else {
              sectionURL += '?';
            }

            var tempLeftValue = leftValue.substring(0, leftLength); //é¿å æªæ­sectionURLæ¶ï¼å°ç±»ä¼¼äº%22è¿æ ·çç¬¦å·æªæä¸¤åï¼ä»èå¯¼è´æå¡ç«¯ç»è£sectionURLæ¶åçéè¯¯

            if (tempLeftValue.substring(leftLength - 1, leftLength) === '%') {
              leftLength -= 1;
              tempLeftValue = leftValue.substring(0, leftLength);
            } else if (tempLeftValue.substring(leftLength - 2, leftLength - 1) === '%') {
              leftLength -= 2;
              tempLeftValue = leftValue.substring(0, leftLength);
            }

            sectionURL += me.queryKeys[i] + '=' + tempLeftValue;
            leftValue = leftValue.substring(leftLength);

            if (tempLeftValue.length > 0) {
              splitQuestUrl.push(sectionURL);
              sectionURL = url;
              keysCount = 0;
            }
          }
        } else {
          keysCount++;

          if (sectionURL.indexOf('?') > -1) {
            sectionURL += '&';
          } else {
            sectionURL += '?';
          }

          sectionURL += me.queryKeys[i] + '=' + me.queryValues[i];
        }
      }
    }

    splitQuestUrl.push(sectionURL);
    me.send(splitQuestUrl, 'SuperMap.Util.RequestJSONPPromise.supermap_callbacks[' + uid + ']', config && config.proxy);
    return p;
  },
  getUid: function getUid() {
    var uid = new Date().getTime(),
        random = Math.floor(Math.random() * 1e17);
    return uid * 1000 + random;
  },
  send: function send(splitQuestUrl, callback, proxy) {
    var len = splitQuestUrl.length;

    if (len > 0) {
      var jsonpUserID = new Date().getTime();

      for (var i = 0; i < len; i++) {
        var url = splitQuestUrl[i];

        if (url.indexOf('?') > -1) {
          url += '&';
        } else {
          url += '?';
        }

        url += 'sectionCount=' + len;
        url += '&sectionIndex=' + i;
        url += '&jsonpUserID=' + jsonpUserID;

        if (proxy) {
          url = decodeURIComponent(url);
          url = proxy + encodeURIComponent(url);
        }

        fetch_jsonp_default()(url, {
          jsonpCallbackFunction: callback,
          timeout: 30000
        });
      }
    }
  },
  GET: function GET(config) {
    var me = this;
    me.queryKeys.length = 0;
    me.queryValues.length = 0;
    me.addQueryStrings(config.params);
    return me.issue(config);
  },
  POST: function POST(config) {
    var me = this;
    me.queryKeys.length = 0;
    me.queryValues.length = 0;
    me.addQueryStrings({
      requestEntity: config.data
    });
    return me.issue(config);
  },
  PUT: function PUT(config) {
    var me = this;
    me.queryKeys.length = 0;
    me.queryValues.length = 0;
    me.addQueryStrings({
      requestEntity: config.data
    });
    return me.issue(config);
  },
  DELETE: function DELETE(config) {
    var me = this;
    me.queryKeys.length = 0;
    me.queryValues.length = 0;
    me.addQueryStrings({
      requestEntity: config.data
    });
    return me.issue(config);
  }
};
// CONCATENATED MODULE: ./src/common/security/SecurityManager.js
function SecurityManager_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SecurityManager_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SecurityManager_createClass(Constructor, protoProps, staticProps) { if (protoProps) SecurityManager_defineProperties(Constructor.prototype, protoProps); if (staticProps) SecurityManager_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @name SecurityManager
 * @memberOf SuperMap
 * @namespace
 * @category Security
 * @description å®å¨ç®¡çä¸­å¿ï¼æä¾ iServer,iPortal,Online ç»ä¸æéè®¤è¯ç®¡çã
 *  > ä½¿ç¨è¯´æï¼
 *  > åå»ºä»»ä½ä¸ä¸ªæå¡ä¹åè°ç¨ {@link SuperMap.SecurityManager.registerToken}æ
 *  > {@link SuperMap.SecurityManager.registerKey}æ³¨åå­æ®ã
 *  > åéè¯·æ±æ¶æ ¹æ® url æèæå¡ id è·åç¸åºç key æè token å¹¶èªå¨æ·»å å°æå¡å°åä¸­ã
 */

var SecurityManager = /*#__PURE__*/function () {
  function SecurityManager() {
    SecurityManager_classCallCheck(this, SecurityManager);
  }

  SecurityManager_createClass(SecurityManager, null, [{
    key: "generateToken",

    /**
     * @description ä»æå¡å¨è·åä¸ä¸ªtoken,å¨æ­¤ä¹åè¦æ³¨åæå¡å¨ä¿¡æ¯ã
     * @function SuperMap.SecurityManager.generateToken
     * @param {string} url - æå¡å¨åå+ç«¯å£ï¼å¦ï¼http://localhost:8092ã
     * @param {SuperMap.TokenServiceParameter} tokenParam - token ç³è¯·åæ°ã
     * @returns {Promise} è¿ååå« token ä¿¡æ¯ç Promise å¯¹è±¡ã
     */
    value: function generateToken(url, tokenParam) {
      var serverInfo = this.servers[url];

      if (!serverInfo) {
        return;
      }

      return FetchRequest.post(serverInfo.tokenServiceUrl, JSON.stringify(tokenParam.toJSON())).then(function (response) {
        return response.text();
      });
    }
    /**
     * @description æ³¨åå®å¨æå¡å¨ç¸å³ä¿¡æ¯ã
     * @function SuperMap.SecurityManager.registerServers
     * @param {SuperMap.ServerInfo} serverInfos - æå¡å¨ä¿¡æ¯ã
     */

  }, {
    key: "registerServers",
    value: function registerServers(serverInfos) {
      this.servers = this.servers || {};

      if (!Util.isArray(serverInfos)) {
        serverInfos = [serverInfos];
      }

      for (var i = 0; i < serverInfos.length; i++) {
        var serverInfo = serverInfos[i];
        this.servers[serverInfo.server] = serverInfo;
      }
    }
    /**
     * @description æå¡è¯·æ±é½ä¼èªå¨å¸¦ä¸è¿ä¸ª tokenã
     * @function SuperMap.SecurityManager.registerToken
     * @param {string} url -æå¡å¨åå+ç«¯å£ï¼å¦http://localhost:8090ã
     * @param {string} token - token
     */

  }, {
    key: "registerToken",
    value: function registerToken(url, token) {
      this.tokens = this.tokens || {};

      if (!url || !token) {
        return;
      }

      var domain = this._getTokenStorageKey(url);

      this.tokens[domain] = token;
    }
    /**
     * @description æ³¨å key,ids ä¸ºæ°ç»(å­å¨ä¸ä¸ª key å¯¹åºå¤ä¸ªæå¡)ã
     * @function SuperMap.SecurityManager.registerKey
     * @param {Array} ids - å¯ä»¥æ¯æå¡ id æ°ç»æè url å°åæ°ç»æè webAPI ç±»åæ°ç»ã
     * @param {string} key - key
     */

  }, {
    key: "registerKey",
    value: function registerKey(ids, key) {
      this.keys = this.keys || {};

      if (!ids || ids.length < 1 || !key) {
        return;
      }

      ids = Util.isArray(ids) ? ids : [ids];

      for (var i = 0; i < ids.length; i++) {
        var id = this._getUrlRestString(ids[0]) || ids[0];
        this.keys[id] = key;
      }
    }
    /**
     * @description è·åæå¡å¨ä¿¡æ¯ã
     * @function SuperMap.SecurityManager.getServerInfo
     * @param {string} url - æå¡å¨åå+ç«¯å£ï¼å¦ï¼http://localhost:8092ã
     * @returns {SuperMap.ServerInfo} æå¡å¨ä¿¡æ¯ã
     */

  }, {
    key: "getServerInfo",
    value: function getServerInfo(url) {
      this.servers = this.servers || {};
      return this.servers[url];
    }
    /**
     * @description æ ¹æ® Url è·åtokenã
     * @function SuperMap.SecurityManager.getToken
     * @param {string} url - æå¡å¨åå+ç«¯å£ï¼å¦ï¼http://localhost:8092ã
     * @returns {string} token
     */

  }, {
    key: "getToken",
    value: function getToken(url) {
      if (!url) {
        return;
      }

      this.tokens = this.tokens || {};

      var domain = this._getTokenStorageKey(url);

      return this.tokens[domain];
    }
    /**
     * @description æ ¹æ® Url è·å keyã
     * @function SuperMap.SecurityManager.getKey
     * @param {string} id - id
     * @returns {string} key
     */

  }, {
    key: "getKey",
    value: function getKey(id) {
      this.keys = this.keys || {};
      var key = this._getUrlRestString(id) || id;
      return this.keys[key];
    }
    /**
     * @description iServer ç»å½éªè¯ã
     * @function SuperMap.SecurityManager.loginiServer
     * @param {string} url - iServer é¦é¡µå°åï¼å¦ï¼http://localhost:8090/iserverã
     * @param {string} username - ç¨æ·åã
     * @param {string} password - å¯ç ã
     * @param {boolean} [rememberme=false] - æ¯å¦è®°ä½ã
     * @returns {Promise} è¿ååå« iServer ç»å½è¯·æ±ç»æç Promise å¯¹è±¡ã
     */

  }, {
    key: "loginiServer",
    value: function loginiServer(url, username, password, rememberme) {
      url = Util.urlPathAppend(url, 'services/security/login');
      var loginInfo = {
        username: username && username.toString(),
        password: password && password.toString(),
        rememberme: rememberme
      };
      loginInfo = JSON.stringify(loginInfo);
      var requestOptions = {
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
        }
      };
      return FetchRequest.post(url, loginInfo, requestOptions).then(function (response) {
        return response.json();
      });
    }
    /**
     * @description iServerç»åºã
     * @function SuperMap.SecurityManager.logoutiServer
     * @param {string} url - iServer é¦é¡µå°å,å¦ï¼http://localhost:8090/iserverã
     * @returns {Promise} æ¯å¦ç»åºæåã
     */

  }, {
    key: "logoutiServer",
    value: function logoutiServer(url) {
      url = Util.urlPathAppend(url, 'services/security/logout');
      var requestOptions = {
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
        },
        withoutFormatSuffix: true
      };
      return FetchRequest.get(url, "", requestOptions).then(function () {
        return true;
      })["catch"](function () {
        return false;
      });
    }
    /**
     * @description Online ç»å½éªè¯ã
     * @function SuperMap.SecurityManager.loginOnline
     * @param {string} callbackLocation - è·³è½¬ä½ç½®ã
     * @param {boolean} [newTab=true] - æ¯å¦æ°çªå£æå¼ã
     */

  }, {
    key: "loginOnline",
    value: function loginOnline(callbackLocation, newTab) {
      var loginUrl = SecurityManager.SSO + "/login?service=" + callbackLocation;

      this._open(loginUrl, newTab);
    }
    /**
     * @description iPortalç»å½éªè¯ã
     * @function SuperMap.SecurityManager.loginiPortal
     * @param {string} url - iportal é¦é¡µå°å,å¦ï¼http://localhost:8092/iportal.
     * @param {string} username - ç¨æ·åã
     * @param {string} password - å¯ç ã
     * @returns {Promise} è¿ååå« iPortal ç»å½è¯·æ±ç»æç Promise å¯¹è±¡ã
     */

  }, {
    key: "loginiPortal",
    value: function loginiPortal(url, username, password) {
      url = Util.urlPathAppend(url, 'web/login');
      var loginInfo = {
        username: username && username.toString(),
        password: password && password.toString()
      };
      loginInfo = JSON.stringify(loginInfo);
      var requestOptions = {
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
        },
        withCredentials: true
      };
      return FetchRequest.post(url, loginInfo, requestOptions).then(function (response) {
        return response.json();
      });
    }
    /**
     * @description iPortal ç»åºã
     * @function SuperMap.SecurityManager.logoutiPortal
     * @param {string} url - iportal é¦é¡µå°å,å¦ï¼http://localhost:8092/iportal.
     * @returns {Promise} å¦æç»åºæåï¼è¿å true;å¦åè¿å falseã
     */

  }, {
    key: "logoutiPortal",
    value: function logoutiPortal(url) {
      url = Util.urlPathAppend(url, 'services/security/logout');
      var requestOptions = {
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
        },
        withCredentials: true,
        withoutFormatSuffix: true
      };
      return FetchRequest.get(url, "", requestOptions).then(function () {
        return true;
      })["catch"](function () {
        return false;
      });
    }
    /**
     * @description iManager ç»å½éªè¯ã
     * @function SuperMap.SecurityManager.loginManager
     * @param {string} url - iManager å°åãå°ååæ°ä¸º iManager é¦é¡µå°åï¼å¦ï¼ http://localhost:8390/imanagerã
     * @param {Object} [loginInfoParams] - iManager ç»å½åæ°ã
     * @param {string} loginInfoParams.userName - ç¨æ·åã
     * @param {string} loginInfoParams.password - å¯ç ã
     * @param {Object} options
     * @param {boolean} [options.isNewTab=true] - ä¸ååæ¶æ¯å¦å¨æ°çªå£æå¼ç»å½é¡µé¢ã
     * @returns {Promise} è¿ååå« iManager ç»å½è¯·æ±ç»æç Promise å¯¹è±¡ã
     */

  }, {
    key: "loginManager",
    value: function loginManager(url, loginInfoParams, options) {
      if (!Util.isInTheSameDomain(url)) {
        var isNewTab = options ? options.isNewTab : true;

        this._open(url, isNewTab);

        return;
      }

      var requestUrl = Util.urlPathAppend(url, 'icloud/security/tokens');
      var params = loginInfoParams || {};
      var loginInfo = {
        username: params.userName && params.userName.toString(),
        password: params.password && params.password.toString()
      };
      loginInfo = JSON.stringify(loginInfo);
      var requestOptions = {
        headers: {
          'Accept': '*/*',
          'Content-Type': 'application/json'
        }
      };
      var me = this;
      return FetchRequest.post(requestUrl, loginInfo, requestOptions).then(function (response) {
        response.text().then(function (result) {
          me.imanagerToken = result;
          return result;
        });
      });
    }
    /**
     * @description æ¸ç©ºå¨é¨éªè¯ä¿¡æ¯ã
     * @function SuperMap.SecurityManager.destroyAllCredentials
     */

  }, {
    key: "destroyAllCredentials",
    value: function destroyAllCredentials() {
      this.keys = null;
      this.tokens = null;
      this.servers = null;
    }
    /**
     * @description æ¸ç©ºä»¤çä¿¡æ¯ã
     * @function SuperMap.SecurityManager.destroyToken
     * @param {string} url - iportal é¦é¡µå°å,å¦ï¼http://localhost:8092/iportal.
     */

  }, {
    key: "destroyToken",
    value: function destroyToken(url) {
      if (!url) {
        return;
      }

      var domain = this._getTokenStorageKey(url);

      this.tokens = this.tokens || {};

      if (this.tokens[domain]) {
        delete this.tokens[domain];
      }
    }
    /**
     * @description æ¸ç©ºæå¡ææç ã
     * @function SuperMap.SecurityManager.destroyKey
     * @param {string} url - iServer é¦é¡µå°å,å¦ï¼http://localhost:8090/iserverã
     */

  }, {
    key: "destroyKey",
    value: function destroyKey(url) {
      if (!url) {
        return;
      }

      this.keys = this.keys || {};
      var key = this._getUrlRestString(url) || url;

      if (this.keys[key]) {
        delete this.keys[key];
      }
    }
  }, {
    key: "_open",
    value: function _open(url, newTab) {
      newTab = newTab != null ? newTab : true;
      var offsetX = window.screen.availWidth / 2 - this.INNER_WINDOW_WIDTH / 2;
      var offsetY = window.screen.availHeight / 2 - this.INNER_WINDOW_HEIGHT / 2;
      var options = "height=" + this.INNER_WINDOW_HEIGHT + ", width=" + this.INNER_WINDOW_WIDTH + ",top=" + offsetY + ", left=" + offsetX + ",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";

      if (newTab) {
        window.open(url, 'login');
      } else {
        window.open(url, 'login', options);
      }
    }
  }, {
    key: "_getTokenStorageKey",
    value: function _getTokenStorageKey(url) {
      var patten = /(.*?):\/\/([^\/]+)/i;
      var result = url.match(patten);

      if (!result) {
        return url;
      }

      return result[0];
    }
  }, {
    key: "_getUrlRestString",
    value: function _getUrlRestString(url) {
      if (!url) {
        return url;
      } // var patten = /http:\/\/(.*\/rest)/i;


      var patten = /(http|https):\/\/(.*\/rest)/i;
      var result = url.match(patten);

      if (!result) {
        return url;
      }

      return result[0];
    }
  }]);

  return SecurityManager;
}();
SecurityManager.INNER_WINDOW_WIDTH = 600;
SecurityManager.INNER_WINDOW_HEIGHT = 600;
SecurityManager.SSO = "https://sso.supermap.com";
SecurityManager.ONLINE = "https://www.supermapol.com";
SuperMap.SecurityManager = SecurityManager;
// CONCATENATED MODULE: ./src/common/iManager/iManagerServiceBase.js
function iManagerServiceBase_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function iManagerServiceBase_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function iManagerServiceBase_createClass(Constructor, protoProps, staticProps) { if (protoProps) iManagerServiceBase_defineProperties(Constructor.prototype, protoProps); if (staticProps) iManagerServiceBase_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.iManagerServiceBase
 * @classdesc iManager æå¡åºç±»ï¼ææééå¶çç±»éè¦å®ç°æ­¤ç±»ï¼ã
 * @category iManager
 * @param {string} url - iManager é¦é¡µå°åï¼å¦ï¼http://localhost:8390/imanagerã
 * @param {Object} options - æå¡åæ°ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var IManagerServiceBase = /*#__PURE__*/function () {
  function IManagerServiceBase(url, options) {
    iManagerServiceBase_classCallCheck(this, IManagerServiceBase);

    if (url) {
      var end = url.substr(url.length - 1, 1);
      this.serviceUrl = end === "/" ? url.substr(0, url.length - 2) : url;
    }

    this.options = options || {};
    this.CLASS_NAME = "SuperMap.iManagerServiceBase";
  }
  /**
   * @function SuperMap.iManagerServiceBase.prototype.request
   * @description å­ç±»ç»ä¸éè¿è¯¥æ¹æ³åéè¯·æ±ã
   * @param {string} url - è¯·æ± URLã
   * @param {string} [method='GET'] - è¯·æ±ç±»åã
   * @param {Object} [requestOptions] - è¯·æ±éé¡¹ã
   * @param {Object} param - è¯·æ±åæ°ã
   * @description åéè¯·æ±ã
   * @returns {Promise} Promise å¯¹è±¡ã
   */


  iManagerServiceBase_createClass(IManagerServiceBase, [{
    key: "request",
    value: function request(method, url, param, requestOptions) {
      requestOptions = requestOptions || {
        headers: {
          'Accept': '*/*',
          'Content-Type': 'application/json'
        }
      };

      if (!requestOptions.hasOwnProperty("withCredentials")) {
        requestOptions['withCredentials'] = true;
      }

      requestOptions['crossOrigin'] = this.options.crossOrigin;
      requestOptions['headers'] = this.options.headers;
      var token = SecurityManager.imanagerToken;

      if (token) {
        if (!requestOptions.headers) {
          requestOptions.headers = [];
        }

        requestOptions.headers['X-Auth-Token'] = token;
      }

      if (param) {
        param = JSON.stringify(param);
      }

      return FetchRequest.commit(method, url, param, requestOptions).then(function (response) {
        return response.json();
      });
    }
  }]);

  return IManagerServiceBase;
}();
SuperMap.iManagerServiceBase = IManagerServiceBase;
// CONCATENATED MODULE: ./src/common/iManager/iManagerCreateNodeParam.js
function iManagerCreateNodeParam_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.iManagerCreateNodeParam
 * @classdesc iManager åå»ºèç¹åæ°ã
 * @category iManager
 * @param {Object} [params] - iManager åå»ºèç¹åæ°ã
 *
 */

var IManagerCreateNodeParam = function IManagerCreateNodeParam(params) {
  iManagerCreateNodeParam_classCallCheck(this, IManagerCreateNodeParam);

  params = params || {};
  this.nodeSpec = 'SMALL'; //åå¼èå´: ['SMALL','MEDIUM','LARGE'] ä»¥åèªå®ä¹çç¯å¢è§æ ¼åç§°

  this.nodeCount = 1; //è¦åå»ºvmçä¸ªæ°

  this.nodeName = ''; //vmåç§°

  this.password = ''; //vmçå¯ç ,ç©ºè¡¨ç¤ºéæºåé

  this.description = ''; //æè¿°ä¿¡æ¯

  this.physicalMachineName = ''; //vmæå±çç©çæºåç§°.

  this.ips = []; //vmçip,ç©ºæ°ç»è¡¨ç¤ºéæºåé

  this.userName = ''; //vmæå±ç¨æ·

  Util.extend(this, params);
};
SuperMap.iManagerCreateNodeParam = IManagerCreateNodeParam;
// CONCATENATED MODULE: ./src/common/iManager/iManager.js
function iManager_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { iManager_typeof = function _typeof(obj) { return typeof obj; }; } else { iManager_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return iManager_typeof(obj); }

function iManager_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function iManager_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function iManager_createClass(Constructor, protoProps, staticProps) { if (protoProps) iManager_defineProperties(Constructor.prototype, protoProps); if (staticProps) iManager_defineProperties(Constructor, staticProps); return Constructor; }

function iManager_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) iManager_setPrototypeOf(subClass, superClass); }

function iManager_setPrototypeOf(o, p) { iManager_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return iManager_setPrototypeOf(o, p); }

function iManager_createSuper(Derived) { var hasNativeReflectConstruct = iManager_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = iManager_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = iManager_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return iManager_possibleConstructorReturn(this, result); }; }

function iManager_possibleConstructorReturn(self, call) { if (call && (iManager_typeof(call) === "object" || typeof call === "function")) { return call; } return iManager_assertThisInitialized(self); }

function iManager_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function iManager_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function iManager_getPrototypeOf(o) { iManager_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return iManager_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.iManager
 * @classdesc iManager æå¡ç±»ã
 * @category iManager
 * @param {string} serviceUrl - iManager é¦é¡µå°åã
 *
 */

var IManager = /*#__PURE__*/function (_IManagerServiceBase) {
  iManager_inherits(IManager, _IManagerServiceBase);

  var _super = iManager_createSuper(IManager);

  function IManager(iManagerUrl) {
    iManager_classCallCheck(this, IManager);

    return _super.call(this, iManagerUrl);
  }
  /**
   * @function SuperMap.iManager.prototype.load
   * @description è·åæææå¡æ¥å£ï¼éªè¯æ¯å¦å·²ç»å½ææã
   * @returns {Promise} Promise å¯¹è±¡ã
   */


  iManager_createClass(IManager, [{
    key: "load",
    value: function load() {
      return this.request("GET", this.serviceUrl + '/web/api/service.json');
    }
    /**
     * @function SuperMap.iManager.prototype.createIServer
     * @param {SuperMap.iManagerCreateNodeParam} createParam - åå»ºåæ°ã
     * @description åå»º iServerã
     * @returns {Promise} Promise å¯¹è±¡ã
     */

  }, {
    key: "createIServer",
    value: function createIServer(createParam) {
      return this.request("POST", this.serviceUrl + '/icloud/web/nodes/server.json', new IManagerCreateNodeParam(createParam));
    }
    /**
     * @function SuperMap.iManager.prototype.createIPortal
     * @param {SuperMap.iManagerCreateNodeParam} createParam - åå»ºåæ°ã
     * @description åå»º iPortalã
     * @returns {Promise} Promise å¯¹è±¡ã
     */

  }, {
    key: "createIPortal",
    value: function createIPortal(createParam) {
      return this.request("POST", this.serviceUrl + '/icloud/web/nodes/portal.json', new IManagerCreateNodeParam(createParam));
    }
    /**
     * @function SuperMap.iManager.prototype.iServerList
     * @description è·åææåå»ºç iServerã
     * @returns {Promise} Promise å¯¹è±¡ã
     */

  }, {
    key: "iServerList",
    value: function iServerList() {
      return this.request("GET", this.serviceUrl + '/icloud/web/nodes/server.json');
    }
    /**
     * @function SuperMap.iManager.prototype.iPortalList
     * @description è·åææåå»ºç iPortalã
     * @returns {Promise} Promise å¯¹è±¡ã
     */

  }, {
    key: "iPortalList",
    value: function iPortalList() {
      return this.request("GET", this.serviceUrl + '/icloud/web/nodes/portal.json');
    }
    /**
     * @function SuperMap.iManager.prototype.startNodes
     * @param {Array} ids - éè¦å¯å¨èç¹ç ID æ°ç»ãe.g:['1']ã
     * @description å¯å¨èç¹ã
     * @returns {Promise} Promise å¯¹è±¡ã
     */

  }, {
    key: "startNodes",
    value: function startNodes(ids) {
      return this.request("POST", this.serviceUrl + '/icloud/web/nodes/started.json', ids);
    }
    /**
     * @function SuperMap.iManager.prototype.stopNodes
     * @param {Array} ids - éè¦åæ­¢èç¹ç ID æ°ç»ãe.g:['1']ã
     * @description åæ­¢èç¹ã
     * @returns {Promise} Promise å¯¹è±¡ã
     */

  }, {
    key: "stopNodes",
    value: function stopNodes(ids) {
      return this.request("POST", this.serviceUrl + '/icloud/web/nodes/stopped.json', ids);
    }
  }]);

  return IManager;
}(IManagerServiceBase);
SuperMap.iManager = IManager;
// CONCATENATED MODULE: ./src/common/iManager/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/






// CONCATENATED MODULE: ./src/common/iPortal/iPortalServiceBase.js
function iPortalServiceBase_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function iPortalServiceBase_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function iPortalServiceBase_createClass(Constructor, protoProps, staticProps) { if (protoProps) iPortalServiceBase_defineProperties(Constructor.prototype, protoProps); if (staticProps) iPortalServiceBase_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.iPortalServiceBase
 * @classdesc iPortal æå¡åºç±»ï¼ææééå¶çç±»éè¦å®ç°æ­¤ç±»ï¼ã
 * @category iPortal/Online
 * @param {string} url - iPortal æå¡å°åã
 * @param {Object} options - å¯éåæ°ã
 * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦ cookieã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var IPortalServiceBase = /*#__PURE__*/function () {
  function IPortalServiceBase(url, options) {
    iPortalServiceBase_classCallCheck(this, IPortalServiceBase);

    options = options || {};
    this.serviceUrl = url;
    this.serverType = ServerType.iPortal;
    this.CLASS_NAME = "SuperMap.iPortalServiceBase";
    this.withCredentials = options.withCredentials || false;
    this.crossOrigin = options.crossOrigin;
    this.headers = options.headers;
  }
  /**
   * @function SuperMap.iPortalServiceBase.prototype.request
   * @description å­ç±»ç»ä¸éè¿è¯¥æ¹æ³åéè¯·æ±ã
   * @param {string} [method='GET'] - è¯·æ±ç±»åã
   * @param {string} url - æå¡å°åã
   * @param {Object} param - è¯·æ±åæ°ã
   * @param {Object} [requestOptions] - fetch è¯·æ±éç½®é¡¹ã
   * @returns {Promise} è¿ååå«è¯·æ±ç»æç Promise å¯¹è±¡ã
   */


  iPortalServiceBase_createClass(IPortalServiceBase, [{
    key: "request",
    value: function request(method, url, param) {
      var requestOptions = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {
        headers: this.headers,
        crossOrigin: this.crossOrigin,
        withCredentials: this.withCredentials
      };
      url = this.createCredentialUrl(url);
      return FetchRequest.commit(method, url, param, requestOptions).then(function (response) {
        return response.json();
      });
    }
    /**
     * @function SuperMap.iPortalServiceBase.prototype.createCredentialUrl
     * @description è¿½å ææä¿¡æ¯ã
     * @param {string} url - åå»ºè¯ä¹¦ URL å°åã
     * @returns {string} æºå¸¦ token æ key çæ°å°åã
     */

  }, {
    key: "createCredentialUrl",
    value: function createCredentialUrl(url) {
      var newUrl = url,
          credential = this.getCredential();

      if (credential) {
        var endStr = newUrl.substring(newUrl.length - 1, newUrl.length);

        if (newUrl.indexOf("?") > -1 && endStr === "?") {
          newUrl += credential.getUrlParameters();
        } else if (newUrl.indexOf("?") > -1 && endStr !== "?") {
          newUrl += "&" + credential.getUrlParameters();
        } else {
          newUrl += "?" + credential.getUrlParameters();
        }
      }

      return newUrl;
    }
    /**
     * @function SuperMap.iPortalServiceBase.prototype.getCredential
     * @description è·å tokenã
     * @returns {string} è¿åè·åç tokenã
     *
     */

  }, {
    key: "getCredential",
    value: function getCredential() {
      var credential,
          value = SecurityManager.getToken(this.serviceUrl);
      credential = value ? new Credential(value, "token") : null;

      if (!credential) {
        value = this.getKey();
        credential = value ? new Credential(value, "key") : null;
      }

      return credential;
    }
    /**
     * @function SuperMap.iPortalServiceBase.prototype.getKey
     * @description å¶å­ç±»éè¦éåè¯¥æ¹æ³ï¼ä¿®æ¹å¶ä¸­è·å key çå­æ®µï¼å­å¨ key å¯è½æ¯æå¡ ID å­æ®µï¼å¯è½æ¯ URLã
     */

  }, {
    key: "getKey",
    value: function getKey() {//return SuperMap.SecurityManager.getKey(this.id);
      //æ
      //return SuperMap.SecurityManager.getKey(this.serviceUrl);
    }
  }]);

  return IPortalServiceBase;
}();
SuperMap.iPortalServiceBase = IPortalServiceBase;
// CONCATENATED MODULE: ./src/common/iPortal/iPortalQueryParam.js
function iPortalQueryParam_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.iPortalQueryParam
 * @classdesc iPortal èµæºæ¥è¯¢åæ°ã
 * @version 10.0.1
 * @category iPortal/Online
 * @param {Object} params - iPortal èµæºæ¥è¯¢å·ä½åæ°ã
 * @param {SuperMap.ResourceType} [params.resourceType] - èµæºç±»å
 * @param {number} [params.pageSize] - åé¡µä¸­æ¯é¡µå¤§å°ã
 * @param {number} [params.currentPage] - åé¡µé¡µç ã
 * @param {SuperMap.OrderBy} [params.orderBy] - æåºå­æ®µã
 * @param {SuperMap.OrderType} [params.orderType] - æ ¹æ®ååºè¿æ¯éåºè¿æ»¤ã
 * @param {SuperMap.SearchType} [params.searchType] - æ ¹æ®æ¥è¯¢çèå´è¿è¡è¿æ»¤ã
 * @param {Array} [params.tags] - æ ç­¾ã
 * @param {Array} [params.dirIds] - ç®å½ id
 * @param {Array} [params.resourceSubTypes] - æ ¹æ®èµæºçå­ç±»åè¿è¡è¿æ»¤ã
 * @param {SuperMap.AggregationTypes} [params.aggregationTypes] - èåæ¥è¯¢çç±»åã
 * @param {string} [params.text] - 	æç´¢çå³é®è¯ã
 * @param {Array} [params.groupIds] - 	æ ¹æ®ç¾¤ç»è¿è¡è¿æ»¤ã
 * @param {Array} [params.departmentIds] - æ ¹æ®é¨é¨è¿è¡è¿æ»¤ã
 */

var IPortalQueryParam = function IPortalQueryParam(params) {
  iPortalQueryParam_classCallCheck(this, IPortalQueryParam);

  params = params || {};
  this.resourceType = ""; // ç©ºä¸ºå¨é¨ MAP SERVICE SCENE DATA INSIGHTS_WORKSPACE MAP_DASHBOARD

  this.pageSize = 12; // æ¯é¡µå¤å°æ¡

  this.currentPage = 1; // ç¬¬å é¡µ

  this.orderBy = "UPDATETIME"; // UPDATETIME HEATLEVEL

  this.orderType = "DESC"; // DESC ASC

  this.searchType = "PUBLIC"; // PUBLIC SHARETOME_RES MYDEPARTMENT_RES MYGROUP_RES MY_RES

  this.tags = []; // æ ç­¾

  this.dirIds = []; // ç±»å«

  this.resourceSubTypes = []; // ç±»å

  this.aggregationTypes = []; // TAG TYPE SUBTYPE

  this.text = ""; // æç´¢å­æ®µ

  this.groupIds = []; // ç¾¤ç»Idè¿æ»¤

  this.departmentIds = []; // é¨é¨Idè¿æ»¤

  Util.extend(this, params);
};
SuperMap.iPortalQueryParam = IPortalQueryParam;
// CONCATENATED MODULE: ./src/common/iPortal/iPortalQueryResult.js
function iPortalQueryResult_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.iPortalQueryResult
 * @classdesc iPortal èµæºç»æéå°è£ç±»ã
 * @version 10.0.1
 * @category iPortal/Online
 * @param {Object} queryResult - èµæºåæ°ã
 * @param {Array} [queryResult.content] - é¡µé¢åå®¹ã
 * @param {number} [queryResult.total] - æ»è®°å½æ°ã
 * @param {number} [queryResult.currentPage] - å½åç¬¬å é¡µã
 * @param {number} [queryResult.pageSize] - æ¯é¡µå¤§å°ã
 * @param {Object} [queryResult.aggregations] - èåæ¥è¯¢çç»æã
 */

var IPortalQueryResult = function IPortalQueryResult(queryResult) {
  iPortalQueryResult_classCallCheck(this, IPortalQueryResult);

  queryResult = queryResult || {};
  this.content = [];
  this.total = 0;
  this.currentPage = 1;
  this.pageSize = 12;
  this.aggregations = null;
  Util.extend(this, queryResult);
};
SuperMap.iPortalQueryResult = IPortalQueryResult;
// CONCATENATED MODULE: ./src/common/iPortal/iPortalResource.js
function iPortalResource_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { iPortalResource_typeof = function _typeof(obj) { return typeof obj; }; } else { iPortalResource_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return iPortalResource_typeof(obj); }

function iPortalResource_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function iPortalResource_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function iPortalResource_createClass(Constructor, protoProps, staticProps) { if (protoProps) iPortalResource_defineProperties(Constructor.prototype, protoProps); if (staticProps) iPortalResource_defineProperties(Constructor, staticProps); return Constructor; }

function iPortalResource_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) iPortalResource_setPrototypeOf(subClass, superClass); }

function iPortalResource_setPrototypeOf(o, p) { iPortalResource_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return iPortalResource_setPrototypeOf(o, p); }

function iPortalResource_createSuper(Derived) { var hasNativeReflectConstruct = iPortalResource_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = iPortalResource_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = iPortalResource_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return iPortalResource_possibleConstructorReturn(this, result); }; }

function iPortalResource_possibleConstructorReturn(self, call) { if (call && (iPortalResource_typeof(call) === "object" || typeof call === "function")) { return call; } return iPortalResource_assertThisInitialized(self); }

function iPortalResource_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function iPortalResource_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function iPortalResource_getPrototypeOf(o) { iPortalResource_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return iPortalResource_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.iPortalResource
 * @classdesc iPortal èµæºè¯¦æç±»ã
 * @version 10.0.1
 * @category iPortal/Online
 * @param {string} portalUrl - èµæºå°åã
 * @param {Object} resourceInfo - èµæºè¯¦æåæ°ã
 * @param {Array} [resourceInfo.authorizeSetting] - èµæºçææä¿¡æ¯
 * @param {string} [resourceInfo.bounds] - èµæºçåæ èå´
 * @param {string} [resourceInfo.bounds4326] - èµæºçåæ èå´ï¼è½¬æ¢ä¸ºEPSG 4326åæ ç³»ç»åçå°çèå´ã
 * @param {string} [resourceInfo.checkStatus] - èµæºçå®¡æ ¸ç¶æï¼å¯ä»¥æ¯ï¼ç©º,SUCCESSFUL,UNCHECKED,FAILED
 * @param {Date} [resourceInfo.createTime] - èµæºçåå»ºæ¶é´
 * @param {string} [resourceInfo.description] - èµæºæè¿°
 * @param {number} [resourceInfo.dirId] - èµæºæå¨çé¨æ·ç®å½çid
 * @param {number} [resourceInfo.epsgCode] - é¨æ·èµæºåºäºçåæ ç³»çEPSGå¼ã
 * @param {number} [resourceInfo.heatLevel] - è®°å½èµæºçè®¿é®éæä¸è½½éã
 * @param {string} [resourceInfo.id] - èµæºå­å¨å°ElasticSearchä¸­çææ¡£id
 * @param {string} [resourceInfo.name] - èµæºåç§°
 * @param {number} [resourceInfo.personalDirId] - èµæºæå¨çä¸ªäººç®å½çid
 * @param {number} [resourceInfo.resourceId] - èµæºè¡¨(maps,servicesç­)éçid
 * @param {string} [resourceInfo.resourceSubType] - æç±»èµæºçå·ä½å­ç±»åã
 * @param {SuperMap.ResourceType} [resourceInfo.resourceType] - èµæºç±»å
 * @param {number} [resourceInfo.serviceRootUrlId] - æ¹éæ³¨åæå¡æ¶ï¼æå¡æ ¹å°åçID
 * @param {Array} [resourceInfo.tags] - èµæºçæ ç­¾
 * @param {string} [resourceInfo.thumbnail] - èµæºçç¼©ç¥å¾
 * @param {Date} [resourceInfo.updateTime] - èµæºçæ´æ°æ¶é´
 * @param {string} [resourceInfo.userName] - æç´¢çå³é®è¯
 * @param {Object} [resourceInfo.sourceJSON] - æä¾äºé¨æ·é¡¹ç®è¿åçææä¿¡æ¯ã
 * @extends {SuperMap.iPortalServiceBase}
 */

var IPortalResource = /*#__PURE__*/function (_IPortalServiceBase) {
  iPortalResource_inherits(IPortalResource, _IPortalServiceBase);

  var _super = iPortalResource_createSuper(IPortalResource);

  function IPortalResource(portalUrl, resourceInfo) {
    var _this;

    iPortalResource_classCallCheck(this, IPortalResource);

    _this = _super.call(this, portalUrl);
    resourceInfo = resourceInfo || {};
    _this.authorizeSetting = [];
    _this.bounds = "";
    _this.bounds4326 = "";
    _this.checkStatus = "";
    _this.createTime = 0;
    _this.description = null;
    _this.dirId = null;
    _this.epsgCode = 0;
    _this.heatLevel = 0;
    _this.id = 0;
    _this.name = "";
    _this.personalDirId = null;
    _this.resourceId = 0;
    _this.resourceSubType = null;
    _this.resourceType = null;
    _this.serviceRootUrlId = null;
    _this.tags = null;
    _this.thumbnail = null;
    _this.updateTime = 0;
    _this.userName = "";
    _this.sourceJSON = {}; //è¿åé¨æ·èµæºè¯¦ç»ä¿¡æ¯

    Util.extend(iPortalResource_assertThisInitialized(_this), resourceInfo); // INSIGHTS_WORKSPACE MAP_DASHBOARD

    _this.resourceUrl = portalUrl + "/web/" + _this.resourceType.replace("_", "").toLowerCase() + "s/" + _this.resourceId;

    if (_this.withCredentials) {
      _this.resourceUrl = portalUrl + "/web/mycontent/" + _this.resourceType.replace("_", "").toLowerCase() + "s/" + _this.resourceId;
    } // if (this.id) {
    //     this.mapUrl = mapUrl + "/" + this.id;
    // }


    return _this;
  }
  /**
   * @function SuperMap.iPortalResource.prototype.load
   * @description å è½½èµæºä¿¡æ¯ã
   * @returns {Promise} è¿å Promise å¯¹è±¡ãå¦ææåï¼Promise æ²¡æè¿åå¼ï¼è¯·æ±è¿åç»æèªå¨å¡«åå°è¯¥ç±»çå±æ§ä¸­ï¼å¦æå¤±è´¥ï¼Promise è¿åå¼åå«éè¯¯ä¿¡æ¯ã
   */


  iPortalResource_createClass(IPortalResource, [{
    key: "load",
    value: function load() {
      var me = this;
      return me.request("GET", me.resourceUrl + ".json").then(function (resourceInfo) {
        if (resourceInfo.error) {
          return resourceInfo;
        }

        me.sourceJSON = resourceInfo;
      });
    }
    /**
     * @function SuperMap.iPortalResource.prototype.update
     * @description æ´æ°èµæºå±æ§ä¿¡æ¯ã
     * @returns {Promise} è¿ååå«æ´æ°æä½ç¶æç Promise å¯¹è±¡ã
     */

  }, {
    key: "update",
    value: function update() {
      var resourceName = this.resourceType.replace("_", "").toLowerCase();
      var options = {
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded'
        }
      };

      if (resourceName === 'data') {
        this.resourceUrl = this.resourceUrl + "/attributes.json";
      }

      var entity = JSON.stringify(this.sourceJSON); //å¯¹æå¡èµæºè¿è¡ç¼è¾æ¶ï¼è¯·æ±ä½åå®¹åªçå³é®å­å­æ®µï¼ç®åå¦ææ¯å¨é¨å­æ®µ æ´æ°è¿åæå ä½å¶å®æ²¡æçæ­£çæ´æ°ï¼

      if (resourceName === 'service') {
        var serviceInfo = {
          authorizeSetting: this.sourceJSON.authorizeSetting,
          metadata: this.sourceJSON.metadata,
          tags: this.sourceJSON.tags,
          thumbnail: this.sourceJSON.thumbnail,
          tokenRefreshUrl: this.sourceJSON.tokenRefreshUrl
        };
        entity = JSON.stringify(serviceInfo);
      }

      return this.request("PUT", this.resourceUrl, entity, options);
    }
  }]);

  return IPortalResource;
}(IPortalServiceBase);
SuperMap.iPortalResource = IPortalResource;
// CONCATENATED MODULE: ./src/common/iPortal/iPortalShareParam.js
function iPortalShareParam_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.iPortalShareParam
 * @classdesc iPortal èµæºå±äº«åæ°ã
 * @version 10.0.1
 * @category iPortal/Online
 * @param {Object} params - iPortal èµæºå±äº«å·ä½åæ°ã
 * @param {SuperMap.ResourceType} [params.resourceType] - èµæºç±»åã
 * @param {Array} [params.ids] - èµæºçidæ°ç»ã
 * @param {SuperMap.iPortalShareEntity} [params.entities] - èµæºçå®ä½å±äº«åæ°
 */

var IPortalShareParam = function IPortalShareParam(params) {
  iPortalShareParam_classCallCheck(this, IPortalShareParam);

  params = params || {};
  this.ids = [];
  this.entities = [];
  this.resourceType = ""; // MAP SERVICE SCENE DATA INSIGHTS_WORKSPACE MAP_DASHBOARD

  Util.extend(this, params);
};
SuperMap.iPortalShareParam = IPortalShareParam;
// CONCATENATED MODULE: ./src/common/iPortal/iPortal.js
function iPortal_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { iPortal_typeof = function _typeof(obj) { return typeof obj; }; } else { iPortal_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return iPortal_typeof(obj); }

function iPortal_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function iPortal_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function iPortal_createClass(Constructor, protoProps, staticProps) { if (protoProps) iPortal_defineProperties(Constructor.prototype, protoProps); if (staticProps) iPortal_defineProperties(Constructor, staticProps); return Constructor; }

function iPortal_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) iPortal_setPrototypeOf(subClass, superClass); }

function iPortal_setPrototypeOf(o, p) { iPortal_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return iPortal_setPrototypeOf(o, p); }

function iPortal_createSuper(Derived) { var hasNativeReflectConstruct = iPortal_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = iPortal_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = iPortal_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return iPortal_possibleConstructorReturn(this, result); }; }

function iPortal_possibleConstructorReturn(self, call) { if (call && (iPortal_typeof(call) === "object" || typeof call === "function")) { return call; } return iPortal_assertThisInitialized(self); }

function iPortal_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function iPortal_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function iPortal_getPrototypeOf(o) { iPortal_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return iPortal_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/







/**
 * @class SuperMap.iPortal
 * @classdesc å¯¹æ¥ SuperMap iPortal åºç¡æå¡ã
 * @category iPortal/Online
 * @extends {SuperMap.iPortalServiceBase}
 * @param {string} iportalUrl - å°åã
 * @param {Object} options - åæ°ã
 * @param {boolean} [options.withCredentials] - è¯·æ±æ¯å¦æºå¸¦ cookieã
 */

var IPortal = /*#__PURE__*/function (_IPortalServiceBase) {
  iPortal_inherits(IPortal, _IPortalServiceBase);

  var _super = iPortal_createSuper(IPortal);

  function IPortal(iportalUrl, options) {
    var _this;

    iPortal_classCallCheck(this, IPortal);

    _this = _super.call(this, iportalUrl, options);
    _this.iportalUrl = iportalUrl;
    options = options || {};
    _this.withCredentials = options.withCredentials || false;
    return _this;
  }
  /**
   * @function SuperMap.iPortal.prototype.load
   * @description å è½½é¡µé¢ã
   * @returns {Promise} è¿ååå« iportal web èµæºä¿¡æ¯ç Promise å¯¹è±¡ã
   */


  iPortal_createClass(IPortal, [{
    key: "load",
    value: function load() {
      return FetchRequest.get(this.iportalUrl + "/web");
    }
    /**
     * @function SuperMap.iPortal.prototype.queryResources
     * @description æ¥è¯¢èµæºã
     * @version 10.0.1
     * @param {SuperMap.iPortalQueryParam} queryParams - æ¥è¯¢åæ°ã
     * @returns {Promise} è¿ååå«ææèµæºç»æç Promise å¯¹è±¡ã
     */

  }, {
    key: "queryResources",
    value: function queryResources(queryParams) {
      if (!(queryParams instanceof IPortalQueryParam)) {
        return new Promise(function (resolve) {
          resolve("queryParams is not instanceof iPortalQueryParam !");
        });
      }

      var me = this;
      var resourceUrl = this.iportalUrl + "/gateway/catalog/resource/search.json";
      queryParams.t = new Date().getTime();
      return this.request("GET", resourceUrl, queryParams).then(function (result) {
        var content = [];
        result.content.forEach(function (item) {
          content.push(new IPortalResource(me.iportalUrl, item));
        });
        var queryResult = new IPortalQueryResult();
        queryResult.content = content;
        queryResult.total = result.total;
        queryResult.currentPage = result.currentPage;
        queryResult.pageSize = result.pageSize;
        queryResult.aggregations = result.aggregations;
        return queryResult;
      });
    }
    /**
     * @function SuperMap.iPortal.prototype.updateResourcesShareSetting
     * @description æ´æ°å±äº«è®¾ç½®ã
     * @version 10.0.1
     * @param {SuperMap.iPortalShareParam} shareParams - å±äº«çåæ°ã
     * @returns {Promise} è¿ååå«å±äº«èµæºç»æç Promise å¯¹è±¡ã
     */

  }, {
    key: "updateResourcesShareSetting",
    value: function updateResourcesShareSetting(shareParams) {
      if (!(shareParams instanceof IPortalShareParam)) {
        return new Promise(function (resolve) {
          resolve("shareParams is not instanceof iPortalShareParam !");
        });
      }

      var resourceUrlName = shareParams.resourceType.replace("_", "").toLowerCase() + "s";

      if (resourceUrlName === "datas") {
        resourceUrlName = "mycontent/" + resourceUrlName;
      }

      var cloneShareParams = {
        ids: shareParams.ids,
        entities: shareParams.entities
      };
      var shareUrl = this.iportalUrl + "/web/" + resourceUrlName + "/sharesetting.json";
      return this.request("PUT", shareUrl, JSON.stringify(cloneShareParams)).then(function (result) {
        return result;
      });
    }
  }]);

  return IPortal;
}(IPortalServiceBase);
SuperMap.iPortal = IPortal;
// CONCATENATED MODULE: ./src/common/iPortal/iPortalShareEntity.js
function iPortalShareEntity_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.iPortalShareEntity
 * @classdesc iPortal èµæºå±äº«å®ä½åæ°ã
 * @version 10.0.1
 * @category iPortal/Online
 * @param {Object} shareEntity - iPortal èµæºå±äº«å®ä½å·ä½åæ°ã
 * @param {SuperMap.PermissionType} [shareEntity.permissionType] - æéç±»åã
 * @param {SuperMap.EntityType} [shareEntity.entityType] - å®ä½ç±»å
 * @param {string} [shareEntity.entityName] - å®ä½ Nameãå¯¹åºç USERï¼ç¨æ·ï¼ã ROLEï¼è§è²ï¼ãGROUPï¼ç¨æ·ç»ï¼ãIPORTALGROUPï¼ç¾¤ç»ï¼çåç§°ã
 * @param {number} [shareEntity.entityId] - å®ä½ç idãç¨äºç¾¤ç»çææã
 */

var IPortalShareEntity = function IPortalShareEntity(shareEntity) {
  iPortalShareEntity_classCallCheck(this, IPortalShareEntity);

  shareEntity = shareEntity || {};
  this.permissionType = ""; // SEARCH READ READWRITE DOWNLOAD

  this.entityType = ""; // USER DEPARTMENT IPORTALGROUP

  this.entityName = "GUEST"; // GUEST or å·ä½ç¨æ· name

  this.entityId = null;
  Util.extend(this, shareEntity);
};
SuperMap.iPortalShareEntity = IPortalShareEntity;
// CONCATENATED MODULE: ./src/common/iPortal/iPortalAddResourceParam.js
function iPortalAddResourceParam_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.iPortalAddResourceParam
 * @classdesc iPortal æ·»å èµæºåæ°ã
 * @version 10.0.1
 * @category iPortal/Online
 * @param {Object} params - iPortal æ·»å èµæºå·ä½åæ°ã
 * @param {String} [params.rootUrl] - æå¡å°åã
 * @param {Array} [params.tags] - æ ç­¾ã
 * @param {SuperMap.iPortalShareEntity} [params.entities] - èµæºçå®ä½å±äº«åæ°
 */

var IPortalAddResourceParam = function IPortalAddResourceParam(params) {
  iPortalAddResourceParam_classCallCheck(this, IPortalAddResourceParam);

  params = params || {};
  this.rootUrl = "";
  this.tags = [];
  this.entities = [];
  Util.extend(this, params);
};
SuperMap.iPortalAddResourceParam = IPortalAddResourceParam;
// CONCATENATED MODULE: ./src/common/iPortal/iPortalRegisterServiceParam.js
function iPortalRegisterServiceParam_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.iPortalRegisterServiceParam
 * @classdesc iPortal æ³¨åæå¡åæ°ã
 * @version 10.0.1
 * @category iPortal/Online
 * @param {Object} params - iPortal æ³¨åæå¡å·ä½åæ°ã
 * @param {String} [params.type] - æå¡ç±»åã
 * @param {Array} [params.tags] - æå¡æ ç­¾ã
 * @param {SuperMap.iPortalShareEntity} [params.entities] - èµæºçå®ä½å±äº«åæ°
 * @param {Object} [params.metadata] - æå¡åä¿¡æ¯ã
 * @param {Array} [params.addedMapNames] - å°å¾æå¡åè¡¨ã
 * @param {Array} [params.addedSceneNames] - åºæ¯æå¡åè¡¨ã
 */

var IPortalRegisterServiceParam = function IPortalRegisterServiceParam(params) {
  iPortalRegisterServiceParam_classCallCheck(this, IPortalRegisterServiceParam);

  params = params || {};
  this.type = ""; // SUPERMAP_REST ARCGIS_REST WMS WFS WCS WPS WMTS OTHERS

  this.tags = [];
  this.entities = [];
  this.metadata = {};
  this.addedMapNames = [];
  this.addedSceneNames = [];
  Util.extend(this, params);
};
SuperMap.iPortalRegisterServiceParam = IPortalRegisterServiceParam;
// CONCATENATED MODULE: ./src/common/iPortal/iPortalAddDataParam.js
function iPortalAddDataParam_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.iPortalAddDataParam
 * @classdesc iPortal ä¸ä¼ /æ³¨åæ°æ®æéçåæ°ã
 * @version 10.0.1
 * @category iPortal/Online
 * @param {Object} params - iPortal ä¸ä¼ /æ³¨åæ°æ®æéçå·ä½åæ°ã
 * @param {string} params.fileName - æä»¶åç§°
 * @param {SuperMap.DataItemType} params.type - æ°æ®ç±»åã
 * @param {Array} [params.tags] - æ°æ®çæ ç­¾
 * @param {SuperMap.iPortalDataMetaInfoParam} [params.dataMetaInfo] - æ°æ®åä¿¡æ¯
 */

var IPortalAddDataParam = function IPortalAddDataParam(params) {
  iPortalAddDataParam_classCallCheck(this, IPortalAddDataParam);

  params = params || {};
  this.fileName = "";
  this.type = "";
  this.tags = [];
  this.dataMetaInfo = {};
  Util.extend(this, params);
};
SuperMap.iPortalAddDataParam = IPortalAddDataParam;
// CONCATENATED MODULE: ./src/common/iPortal/iPortalDataMetaInfoParam.js
function iPortalDataMetaInfoParam_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.iPortalDataMetaInfoParam
 * @classdesc iPortal ä¸ä¼ æ°æ®/æ³¨åæ°æ®åä¿¡æ¯æéçåæ°ã
 * @version 10.0.1
 * @category iPortal/Online
 * @param {Object} params - iPortal è·åæ°æ®é¡¹id excel csvç±»åçæ°æ®æéæ°æ®åä¿¡æ¯å·ä½åæ°ã
 * @param {string} params.xField - X åæ å­æ®µ
 * @param {string} params.yField - Y åæ å­æ®µ
 * @param {number} params.xIndex - xæå¨åï¼å³ç³»åå­å¨ä¸CSVæEXCELæ°æ®æ¶å¿å¡«ï¼
 * @param {number} params.yIndex - yæå¨åï¼å³ç³»åå­å¨ä¸CSVæEXCELæ°æ®æ¶å¿å¡«ï¼
 * @param {array} [params.fieldTypes] - è®¾ç½®å­æ®µç±»åï¼å³ç³»åå­å¨ä¸CSVæEXCELæ°æ®æ¶å¯éå¡«ï¼ãé»è®¤ç±»åä¸ºï¼WTEXTãè¯¥åæ°æç§CSVæä»¶å­æ®µé¡ºåºä»å·¦å°å³ä¾æ¬¡è®¾ç½®ï¼å¶ä¸­é»è®¤å­æ®µç±»åå¯çç¥ä¸è®¾ç½®ãä¾å¦ï¼CSVæä»¶ä¸­æ10ä¸ªå­æ®µï¼å¦æåªéè®¾å®ç¬¬1ï¼2ï¼4ä¸ªå­æ®µï¼å¯è®¾ç½®ä¸º[a,b,,c]ã
 * @param {string} params.separator - åéç¬¦ï¼å³ç³»åå­å¨ä¸CSVæ°æ®æ¶å¿å¡«ï¼
 * @param {boolean} params.firstRowIsHead - æ¯å¦å¸¦è¡¨å¤´ï¼å³ç³»åå­å¨ä¸CSVæ°æ®æ¶å¿å¡«ï¼
 * @param {boolean} params.url - HDFSæ³¨åç®å½å°å
 * @param {SuperMap.iPortalDataStoreInfoParam} params.dataStoreInfo - æ³¨åæ°æ®æ¶çæ°æ®å­å¨ä¿¡æ¯
 */

var IPortalDataMetaInfoParam = function IPortalDataMetaInfoParam(params) {
  iPortalDataMetaInfoParam_classCallCheck(this, IPortalDataMetaInfoParam);

  params = params || {};
  this.xField = "";
  this.yField = "";
  this.fileEncoding = "UTF-8";
  this.xIndex = 1;
  this.yIndex = 1;
  this.fieldTypes = [];
  this.separator = "";
  this.firstRowIsHead = true;
  this.url = "";
  this.dataStoreInfo = {};
  Util.extend(this, params);
};
SuperMap.iPortalDataMetaInfoParam = IPortalDataMetaInfoParam;
// CONCATENATED MODULE: ./src/common/iPortal/iPortalDataStoreInfoParam.js
function iPortalDataStoreInfoParam_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.iPortalDataStoreInfoParam
 * @classdesc iPortal æ³¨åä¸ä¸ªHBASE HDFSæ°æ®å­å¨ç±»ã
 * @version 10.0.1
 * @category iPortal/Online
 * @param {Object} params - iPortal æ³¨åä¸ä¸ªHBASE HDFSæ°æ®å­å¨ç±»å·ä½åæ°ã
 * @param {string} params.type - å¤§æ°æ®æä»¶å±äº«ç±»ååç©ºé´æ°æ®åºç±»åï¼åæ¬å¤§æ°æ®æä»¶å±äº«HDFS ç®å½(HDFS)åç©ºé´æ°æ®åºHBASE
 * @param {string} params.url - HDFSæ°æ®å­å¨ç®å½å°å
 * @param {SuperMap.iPortalDataConnectionInfoParam} [params.connectionInfo] - HBASEç©ºé´æ°æ®åºæå¡çè¿æ¥ä¿¡æ¯
 */

var IPortalDataStoreInfoParam = function IPortalDataStoreInfoParam(params) {
  iPortalDataStoreInfoParam_classCallCheck(this, IPortalDataStoreInfoParam);

  params = params || {};
  this.type = "";
  this.url = "";
  this.connectionInfo = {};
  Util.extend(this, params);
};
SuperMap.iPortalDataStoreInfoParam = IPortalDataStoreInfoParam;
// CONCATENATED MODULE: ./src/common/iPortal/iPortalDataConnectionInfoParam.js
function iPortalDataConnectionInfoParam_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.iPortalDataConnectionInfoParam
 * @classdesc iPortal HBASEæ°æ®æºè¿æ¥ä¿¡æ¯ç±»ã
 * @version 10.0.1
 * @category iPortal/Online
 * @param {Object} params - iPortal HBASEæ°æ®æºè¿æ¥ä¿¡æ¯ç±»å·ä½åæ°ã
 * @param {string} params.dataBase - æ°æ®æºè¿æ¥çæ°æ®åºåã
 * @param {string} params.server - æå¡å°åã
 */

var IPortalDataConnectionInfoParam = function IPortalDataConnectionInfoParam(params) {
  iPortalDataConnectionInfoParam_classCallCheck(this, IPortalDataConnectionInfoParam);

  params = params || {};
  this.dataBase = "";
  this.server = "";
  Util.extend(this, params);
};
SuperMap.iPortalDataConnectionInfoParam = IPortalDataConnectionInfoParam;
// CONCATENATED MODULE: ./src/common/iPortal/iPortalUser.js
function iPortalUser_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { iPortalUser_typeof = function _typeof(obj) { return typeof obj; }; } else { iPortalUser_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return iPortalUser_typeof(obj); }

function iPortalUser_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function iPortalUser_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function iPortalUser_createClass(Constructor, protoProps, staticProps) { if (protoProps) iPortalUser_defineProperties(Constructor.prototype, protoProps); if (staticProps) iPortalUser_defineProperties(Constructor, staticProps); return Constructor; }

function iPortalUser_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) iPortalUser_setPrototypeOf(subClass, superClass); }

function iPortalUser_setPrototypeOf(o, p) { iPortalUser_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return iPortalUser_setPrototypeOf(o, p); }

function iPortalUser_createSuper(Derived) { var hasNativeReflectConstruct = iPortalUser_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = iPortalUser_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = iPortalUser_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return iPortalUser_possibleConstructorReturn(this, result); }; }

function iPortalUser_possibleConstructorReturn(self, call) { if (call && (iPortalUser_typeof(call) === "object" || typeof call === "function")) { return call; } return iPortalUser_assertThisInitialized(self); }

function iPortalUser_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function iPortalUser_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function iPortalUser_getPrototypeOf(o) { iPortalUser_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return iPortalUser_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/








/**
 * @class SuperMap.iPortalUser
 * @classdesc iPortal é¨æ·ä¸­ç¨æ·ä¿¡æ¯çå°è£ç±»ãç¨äºç®¡çç¨æ·èµæºï¼åæ¬å¯å é¤ï¼æ·»å èµæºã
 * @version 10.0.1
 * @category iPortal/Online
 * @param {string} iportalUrl - iportalæ ¹å°åã
 * @extends {SuperMap.iPortalServiceBase}
 *
 */

var IPortalUser = /*#__PURE__*/function (_IPortalServiceBase) {
  iPortalUser_inherits(IPortalUser, _IPortalServiceBase);

  var _super = iPortalUser_createSuper(IPortalUser);

  function IPortalUser(iportalUrl) {
    var _this;

    iPortalUser_classCallCheck(this, IPortalUser);

    _this = _super.call(this, iportalUrl);
    _this.iportalUrl = iportalUrl;
    return _this;
  }
  /**
   * @function SuperMap.iPortalUser.prototype.deleteResources
   * @description å é¤èµæºã
   * @param {Object} params - å é¤èµæºæéçåæ°å¯¹è±¡ï¼{ids,resourceType}ã
   * @returns {Promise} è¿ååå«å é¤æä½ç¶æç Promise å¯¹è±¡ã
   */


  iPortalUser_createClass(IPortalUser, [{
    key: "deleteResources",
    value: function deleteResources(params) {
      var resourceName = params.resourceType.replace("_", "").toLowerCase();
      var deleteResourceUrl = this.iportalUrl + "/web/" + resourceName + "s.json?ids=" + encodeURI(JSON.stringify(params.ids));

      if (resourceName === 'data') {
        deleteResourceUrl = this.iportalUrl + "/web/mycontent/datas/delete.json";
        return this.request("POST", deleteResourceUrl, JSON.stringify(params.ids));
      }

      return this.request("DELETE", deleteResourceUrl);
    }
    /**
     * @function SuperMap.iPortalUser.prototype.addMap
     * @description æ·»å å°å¾ã
     * @version 10.1.0
     * @param {SuperMap.iPortalAddResourceParam} addMapParams - æ·»å å°å¾çåæ°ã
     * @returns {Promise} è¿ååå«æ·»å å°å¾ç»æç Promise å¯¹è±¡ã
     */

  }, {
    key: "addMap",
    value: function addMap(addMapParams) {
      if (!(addMapParams instanceof IPortalAddResourceParam)) {
        return this.getErrMsgPromise("addMapParams is not instanceof IPortalAddResourceParam !");
      }

      var cloneAddMapParams = {
        rootUrl: addMapParams.rootUrl,
        tags: addMapParams.tags,
        authorizeSetting: addMapParams.entities
      };
      var addMapUrl = this.iportalUrl + "/web/maps/batchaddmaps.json";
      return this.request("POST", addMapUrl, JSON.stringify(cloneAddMapParams)).then(function (result) {
        return result;
      });
    }
    /**
     * @function SuperMap.iPortalUser.prototype.addScene
     * @description æ·»å åºæ¯ã
     * @version 10.1.0
     * @param {SuperMap.iPortalAddResourceParam} addSceneParams - æ·»å åºæ¯çåæ°ã
     * @returns {Promise} è¿ååå«æ·»å åºæ¯ç»æç Promise å¯¹è±¡ã
     */

  }, {
    key: "addScene",
    value: function addScene(addSceneParams) {
      if (!(addSceneParams instanceof IPortalAddResourceParam)) {
        return this.getErrMsgPromise("addSceneParams is not instanceof IPortalAddResourceParam !");
      }

      var cloneAddSceneParams = {
        rootUrl: addSceneParams.rootUrl,
        tags: addSceneParams.tags,
        authorizeSetting: addSceneParams.entities
      };
      var addSceneUrl = this.iportalUrl + "/web/scenes/batchaddscenes.json";
      return this.request("POST", addSceneUrl, JSON.stringify(cloneAddSceneParams)).then(function (result) {
        return result;
      });
    }
    /**
     * @function SuperMap.iPortalUser.prototype.registerService
     * @description æ³¨åæå¡ã
     * @version 10.1.0
     * @param {SuperMap.iPortalRegisterServiceParam} registerParams - æ³¨åæå¡çåæ°ã
     * @returns {Promise} è¿ååå«æ³¨åæå¡ç»æç Promise å¯¹è±¡ã
     */

  }, {
    key: "registerService",
    value: function registerService(registerParams) {
      if (!(registerParams instanceof IPortalRegisterServiceParam)) {
        return this.getErrMsgPromise("registerParams is not instanceof IPortalRegisterServiceParam !");
      }

      var cloneRegisterParams = {
        type: registerParams.type,
        tags: registerParams.tags,
        authorizeSetting: registerParams.entities,
        metadata: registerParams.metadata,
        addedMapNames: registerParams.addedMapNames,
        addedSceneNames: registerParams.addedSceneNames
      };
      var registerUrl = this.iportalUrl + "/web/services.json";
      return this.request("POST", registerUrl, JSON.stringify(cloneRegisterParams)).then(function (result) {
        return result;
      });
    }
    /**
     * @function SuperMap.iPortalUser.prototype.getErrMsgPromise
     * @description è·ååå«éè¯¯ä¿¡æ¯çPromiseå¯¹è±¡ã
     * @version 10.1.0
     * @param {String} errMsg - ä¼ å¥çéè¯¯ä¿¡æ¯ã
     * @returns {Promise} è¿ååå«éè¯¯ä¿¡æ¯ç Promise å¯¹è±¡ã
     */

  }, {
    key: "getErrMsgPromise",
    value: function getErrMsgPromise(errMsg) {
      return new Promise(function (resolve) {
        resolve(errMsg);
      });
    }
    /**
     * @function SuperMap.iPortalUser.prototype.uploadDataRequest
     * @description ä¸ä¼ æ°æ®ã
     * @version 10.1.0
     * @param {number} id - ä¸ä¼ æ°æ®çèµæºidã
     * @param {Object} formData - è¯·æ±ä½ä¸ºææ¬æ°æ®æµã
     * @returns {Promise} è¿ååå«ä¸ä¼ æ°æ®æä½ç Promise å¯¹è±¡ã
     */

  }, {
    key: "uploadDataRequest",
    value: function uploadDataRequest(id, formData) {
      var uploadDataUrl = this.iportalUrl + "/web/mycontent/datas/" + id + "/upload.json";
      return this.request("POST", uploadDataUrl, formData);
    }
    /**
     * @function SuperMap.iPortalUser.prototype.addData
     * @description ä¸ä¼ /æ³¨åæ°æ®ã
     * @version 10.1.0
     * @param {SuperMap.iPortalAddDataParam} params - ä¸ä¼ /æ³¨åæ°æ®æéçåæ°ã
     * @param {Object} [formData] - è¯·æ±ä½ä¸ºææ¬æ°æ®æµ(ä¸ä¼ æ°æ®æ¶ä¼ å¥)ã
     * @returns {Promise} è¿åä¸ä¼ /æ³¨åæ°æ®ç Promise å¯¹è±¡ã
     */

  }, {
    key: "addData",
    value: function addData(params, formData) {
      var _this2 = this;

      if (!(params instanceof IPortalAddDataParam)) {
        return this.getErrMsgPromise("params is not instanceof iPortalAddDataParam !");
      }

      var datasUrl = this.iportalUrl + "/web/mycontent/datas.json";
      var entity = {
        fileName: params.fileName,
        tags: params.tags,
        type: params.type
      };
      var type = params.type.toLowerCase();
      var dataMetaInfo;

      if (type === "excel" || type === "csv") {
        if (!(params.dataMetaInfo instanceof IPortalDataMetaInfoParam)) {
          return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");
        }

        dataMetaInfo = {
          xField: params.dataMetaInfo.xField,
          yField: params.dataMetaInfo.yField
        };

        if (type === 'csv') {
          dataMetaInfo.fileEncoding = params.dataMetaInfo.fileEncoding;
        }

        entity.coordType = "WGS84";
        entity.dataMetaInfo = dataMetaInfo;
      } else if (type === "hdfs" || type === "hbase") {
        if (!(params.dataMetaInfo instanceof IPortalDataMetaInfoParam)) {
          return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");
        }

        if (!(params.dataMetaInfo.dataStoreInfo instanceof IPortalDataStoreInfoParam)) {
          return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo is not instanceof iPortalDataStoreInfoParam !");
        }

        var dataStoreInfo = {
          type: params.dataMetaInfo.dataStoreInfo.type
        };

        switch (type) {
          case "hdfs":
            dataStoreInfo.url = params.dataMetaInfo.dataStoreInfo.url;
            dataMetaInfo = {
              url: params.dataMetaInfo.url,
              dataStoreInfo: dataStoreInfo
            };
            break;

          case "hbase":
            if (!(params.dataMetaInfo.dataStoreInfo.connectionInfo instanceof IPortalDataConnectionInfoParam)) {
              return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo.connectionInfo is not instanceof iPortalDataConnectionInfoParam !");
            }

            dataStoreInfo.connectionInfo = {
              dataBase: params.dataMetaInfo.dataStoreInfo.connectionInfo.dataBase,
              server: params.dataMetaInfo.dataStoreInfo.connectionInfo.server,
              engineType: 'HBASE'
            };
            dataStoreInfo.datastoreType = "SPATIAL"; //è¯¥å­æ®µSPATIALè¡¨ç¤ºHBASEæ³¨å

            dataMetaInfo = {
              dataStoreInfo: dataStoreInfo
            };
            break;
        }

        entity.dataMetaInfo = dataMetaInfo;
      }

      return this.request("POST", datasUrl, JSON.stringify(entity)).then(function (res) {
        if (type === "hdfs" || type === "hbase") {
          return res;
        } else {
          if (res.childID) {
            return _this2.uploadDataRequest(res.childID, formData);
          } else {
            return res.customResult;
          }
        }
      });
    }
    /**
     * @function SuperMap.iPortalUser.prototype.publishOrUnpublish
     * @description åå¸/åæ¶åå¸ã
     * @version 10.1.0
     * @param {object} options - åå¸/åæ¶åå¸æ°æ®æå¡æéçåæ°ã
     * @param {object} options.dataId - æ°æ®é¡¹idã
     * @param {object} options.serviceType - åå¸çæå¡ç±»åï¼ç®åæ¯æåå¸çæå¡ç±»ååæ¬ï¼RESTDATA, RESTMAP, RESTREALSPACE, RESTSPATIALANALYSTã
     * @param {object} [options.dataServiceId] - åå¸çæå¡ idã
     * @param {boolean} forPublish - æ¯å¦åæ¶åå¸ã
     * @returns {Promise} è¿ååå¸/åæ¶åå¸æ°æ®æå¡ç Promise å¯¹è±¡ã
     */

  }, {
    key: "publishOrUnpublish",
    value: function publishOrUnpublish(option, forPublish) {
      if (!option.dataId || !option.serviceType) {
        return this.getErrMsgPromise("option.dataID and option.serviceType are Required!");
      }

      var dataId = option.dataId;
      var dataServiceId = option.dataServiceId;
      var serviceType = option.serviceType;
      var publishUrl = this.iportalUrl + "/web/mycontent/datas/" + dataId + "/publishstatus.json?serviceType=" + serviceType;

      if (dataServiceId) {
        publishUrl += "&dataServiceId=" + dataServiceId;
      }

      return this.request("PUT", publishUrl, JSON.stringify(forPublish)).then(function (res) {
        // åèµ·æå¡ç¶ææ¥è¯¢
        if (forPublish) {
          // åå¸æå¡çç»æå¼æ­¥å¤ç
          //  var publishStateUrl = this.iportalUrl + "web/mycontent/datas/" + dataId + "/publishstatus.rjson";
          if (!dataServiceId) {
            // åå¸æå¡æ¶ä¼åä¼ serviceIDsï¼åå¸æå¡ä¹åserviceIDsä¸ºç©º
            dataServiceId = res.customResult;
          }

          return dataServiceId;
        } else {
          // åæ¶åå¸çç»æåæ­¥å¤ç
          return res;
        }
      });
    }
    /**
     * @function SuperMap.iPortalUser.prototype.getDataPublishedStatus
     * @description æ¥è¯¢æå¡ç¶æï¼åèµ·æå¡ç¶ææ¥è¯¢ã
     * @version 10.1.0
     * @param {number} dataId - æ¥è¯¢æå¡ç¶æçæ°æ®é¡¹idã
     * @param {string} dataServiceId - åå¸çæå¡idã
     * @returns {Promise} è¿åæ¥è¯¢æå¡ç¶æç Promise å¯¹è±¡ã
     */

  }, {
    key: "getDataPublishedStatus",
    value: function getDataPublishedStatus(dataId, dataServiceId) {
      var publishStateUrl = this.iportalUrl + "/web/mycontent/datas/" + dataId + "/publishstatus.json?dataServiceId=" + dataServiceId + "&forPublish=true";
      return this.request("GET", publishStateUrl);
    }
    /**
     * @function SuperMap.iPortalUser.prototype.unPublishedDataService
     * @description åæ¶åå¸ã
     * @version 10.1.0
     * @param {object} options - åæ¶åå¸æå¡å·ä½åæ°ã
     * @param {object} options.dataId - æ°æ®é¡¹idã
     * @param {object} options.serviceType - åå¸çæå¡ç±»åï¼ç®åæ¯æåå¸çæå¡ç±»ååæ¬ï¼RESTDATA, RESTMAP, RESTREALSPACE, RESTSPATIALANALYSTã
     * @param {object} [options.dataServiceId] - åå¸çæå¡ idã
     * @returns {Promise} è¿ååæ¶åå¸æ°æ®æå¡ç Promise å¯¹è±¡ã
     */

  }, {
    key: "unPublishDataService",
    value: function unPublishDataService(option) {
      return this.publishOrUnpublish(option, false);
    }
    /**
     * @function SuperMap.iPortalUser.prototype.publishedDataService
     * @description åå¸æ°æ®æå¡ã
     * @version 10.1.0
     * @param {object} options - åå¸æ°æ®æå¡å·ä½åæ°ã
     * @param {object} options.dataId - æ°æ®é¡¹idã
     * @param {object} options.serviceType - åå¸çæå¡ç±»åï¼ç®åæ¯æåå¸çæå¡ç±»ååæ¬ï¼RESTDATA, RESTMAP, RESTREALSPACE, RESTSPATIALANALYSTã
     * @param {object} [options.dataServiceId] - åå¸çæå¡ idã
     * @returns {Promise} è¿ååå¸æ°æ®æå¡ç Promise å¯¹è±¡ã
     */

  }, {
    key: "publishDataService",
    value: function publishDataService(option) {
      return this.publishOrUnpublish(option, true);
    }
  }]);

  return IPortalUser;
}(IPortalServiceBase);
SuperMap.iPortalUser = IPortalUser;
// CONCATENATED MODULE: ./src/common/iPortal/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




























// CONCATENATED MODULE: ./src/common/iServer/CommonServiceBase.js
function CommonServiceBase_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function CommonServiceBase_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function CommonServiceBase_createClass(Constructor, protoProps, staticProps) { if (protoProps) CommonServiceBase_defineProperties(Constructor.prototype, protoProps); if (staticProps) CommonServiceBase_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/









/**
 * @class SuperMap.CommonServiceBase
 * @category  iServer
 * @classdesc å¯¹æ¥ iServer åç§æå¡ç Service çåºç±»ã
 * @param {string} url - æå¡å°åã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæ processCompleted å±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailed å±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {string} [options.proxy] - æå¡ä»£çå°åã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã
 * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦ cookieã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var CommonServiceBase = /*#__PURE__*/function () {
  function CommonServiceBase(url, options) {
    CommonServiceBase_classCallCheck(this, CommonServiceBase);

    var me = this;
    this.EVENT_TYPES = ["processCompleted", "processFailed"];
    this.events = null;
    this.eventListeners = null;
    this.url = null;
    this.urls = null;
    this.proxy = null;
    this.serverType = null;
    this.index = null;
    this.length = null;
    this.options = null;
    this.totalTimes = null;
    this.POLLING_TIMES = 3;
    this._processSuccess = null;
    this._processFailed = null;
    this.isInTheSameDomain = null;
    this.withCredentials = false;

    if (Util.isArray(url)) {
      me.urls = url;
      me.length = url.length;
      me.totalTimes = me.length;

      if (me.length === 1) {
        me.url = url[0];
      } else {
        me.index = parseInt(Math.random() * me.length);
        me.url = url[me.index];
      }
    } else {
      me.totalTimes = 1;
      me.url = url;
    }

    if (Util.isArray(url) && !me.isServiceSupportPolling()) {
      me.url = url[0];
      me.totalTimes = 1;
    }

    me.serverType = me.serverType || ServerType.ISERVER;
    options = options || {};
    this.crossOrigin = options.crossOrigin;
    this.headers = options.headers;
    Util.extend(this, options);
    me.isInTheSameDomain = Util.isInTheSameDomain(me.url);
    me.events = new Events(me, null, me.EVENT_TYPES, true);

    if (me.eventListeners instanceof Object) {
      me.events.on(me.eventListeners);
    }

    this.CLASS_NAME = "SuperMap.CommonServiceBase";
  }
  /**
   * @function SuperMap.CommonServiceBase.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨çèµæºå±æ§ç½®ç©ºã
   */


  CommonServiceBase_createClass(CommonServiceBase, [{
    key: "destroy",
    value: function destroy() {
      var me = this;

      if (Util.isArray(me.urls)) {
        me.urls = null;
        me.index = null;
        me.length = null;
        me.totalTimes = null;
      }

      me.url = null;
      me.options = null;
      me._processSuccess = null;
      me._processFailed = null;
      me.isInTheSameDomain = null;
      me.EVENT_TYPES = null;

      if (me.events) {
        me.events.destroy();
        me.events = null;
      }

      if (me.eventListeners) {
        me.eventListeners = null;
      }
    }
    /**
     * @function  SuperMap.CommonServiceBase.prototype.request
     * @description: è¯¥æ¹æ³ç¨äºåæå¡åéè¯·æ±ã
     * @param {Object} options - åæ°ã
     * @param {string} [options.method='GET'] - è¯·æ±æ¹å¼ï¼åæ¬ "GET"ï¼"POST"ï¼"PUT"ï¼"DELETE"ã
     * @param {string} [options.url] - åéè¯·æ±çå°åã
     * @param {Object} [options.params] - ä½ä¸ºæ¥è¯¢å­ç¬¦ä¸²æ·»å å° URL ä¸­çä¸ç»é®å¼å¯¹ï¼æ­¤åæ°åªéç¨äº GET æ¹å¼åéçè¯·æ±ã
     * @param {string} [options.data] - åéå°æå¡å¨çæ°æ®ã
     * @param {function} options.success - è¯·æ±æååçåè°å½æ°ã
     * @param {function} options.failure - è¯·æ±å¤±è´¥åçåè°å½æ°ã
     * @param {Object} [options.scope] - å¦æåè°å½æ°æ¯å¯¹è±¡çä¸ä¸ªå¬å±æ¹æ³ï¼è®¾å®è¯¥å¯¹è±¡çèå´ã
     * @param {boolean} [options.isInTheSameDomain] - è¯·æ±æ¯å¦å¨å½ååä¸­ã
     * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦ cookieã
     * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
     * @param {Object} [options.headers] - è¯·æ±å¤´ã
     */

  }, {
    key: "request",
    value: function request(options) {
      var me = this;
      options.url = options.url || me.url;
      options.proxy = options.proxy || me.proxy;
      options.withCredentials = options.withCredentials != undefined ? options.withCredentials : me.withCredentials;
      options.crossOrigin = options.crossOrigin != undefined ? options.crossOrigin : me.crossOrigin;
      options.headers = options.headers || me.headers;
      options.isInTheSameDomain = me.isInTheSameDomain; //ä¸ºurlæ·»å å®å¨è®¤è¯ä¿¡æ¯çæ®µ

      var credential = this.getCredential(options.url);

      if (credential) {
        options.url = Util.urlAppend(options.url, credential.getUrlParameters());
      }

      me.calculatePollingTimes();
      me._processSuccess = options.success;
      me._processFailed = options.failure;
      options.scope = me;
      options.success = me.getUrlCompleted;
      options.failure = me.getUrlFailed;
      me.options = options;

      me._commit(me.options);
    }
    /**
     * @function SuperMap.CommonServiceBase.prototype.getCredential
     * @description  è·åå­æ®ä¿¡æ¯
     * @param {string} url - æå¡å°åã
     * @returns {SuperMap.Credential} å­æ®ä¿¡æ¯å¯¹è±¡ã
     */

  }, {
    key: "getCredential",
    value: function getCredential(url) {
      var keyUrl = url,
          credential,
          value;

      switch (this.serverType) {
        case ServerType.IPORTAL:
          value = SecurityManager.getToken(keyUrl);
          credential = value ? new Credential(value, "token") : null;

          if (!credential) {
            value = SecurityManager.getKey(keyUrl);
            credential = value ? new Credential(value, "key") : null;
          }

          break;

        case ServerType.ONLINE:
          value = SecurityManager.getKey(keyUrl);
          credential = value ? new Credential(value, "key") : null;
          break;

        default:
          //iServer or others
          value = SecurityManager.getToken(keyUrl);
          credential = value ? new Credential(value, "token") : null;
          break;
      }

      return credential;
    }
    /**
     * @function SuperMap.CommonServiceBase.prototype.getUrlCompleted
     * @description è¯·æ±æååæ§è¡æ­¤æ¹æ³ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     */

  }, {
    key: "getUrlCompleted",
    value: function getUrlCompleted(result) {
      var me = this;

      me._processSuccess(result);
    }
    /**
     * @function SuperMap.CommonServiceBase.prototype.getUrlFailed
     * @description è¯·æ±å¤±è´¥åæ§è¡æ­¤æ¹æ³ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     */

  }, {
    key: "getUrlFailed",
    value: function getUrlFailed(result) {
      var me = this;

      if (me.totalTimes > 0) {
        me.totalTimes--;
        me.ajaxPolling();
      } else {
        me._processFailed(result);
      }
    }
    /**
     *
     * @function SuperMap.CommonServiceBase.prototype.ajaxPolling
     * @description è¯·æ±å¤±è´¥åï¼å¦æå©ä½è¯·æ±å¤±è´¥æ¬¡æ°ä¸ä¸º 0ï¼éæ°è·å URL åéè¯·æ±
     */

  }, {
    key: "ajaxPolling",
    value: function ajaxPolling() {
      var me = this,
          url = me.options.url,
          re = /^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;
      me.index = parseInt(Math.random() * me.length);
      me.url = me.urls[me.index];
      url = url.replace(re, re.exec(me.url)[0]);
      me.options.url = url;
      me.options.isInTheSameDomain = Util.isInTheSameDomain(url);

      me._commit(me.options);
    }
    /**
     * @function SuperMap.CommonServiceBase.prototype.calculatePollingTimes
     * @description è®¡ç®å©ä½è¯·æ±å¤±è´¥æ§è¡æ¬¡æ°ã
     */

  }, {
    key: "calculatePollingTimes",
    value: function calculatePollingTimes() {
      var me = this;

      if (me.times) {
        if (me.totalTimes > me.POLLING_TIMES) {
          if (me.times > me.POLLING_TIMES) {
            me.totalTimes = me.POLLING_TIMES;
          } else {
            me.totalTimes = me.times;
          }
        } else {
          if (me.times < me.totalTimes) {
            me.totalTimes = me.times;
          }
        }
      } else {
        if (me.totalTimes > me.POLLING_TIMES) {
          me.totalTimes = me.POLLING_TIMES;
        }
      }

      me.totalTimes--;
    }
    /**
     * @function SuperMap.CommonServiceBase.prototype.isServiceSupportPolling
     * @description å¤æ­æå¡æ¯å¦æ¯æè½®è¯¢ã
     */

  }, {
    key: "isServiceSupportPolling",
    value: function isServiceSupportPolling() {
      var me = this;
      return !(me.CLASS_NAME === "SuperMap.REST.ThemeService" || me.CLASS_NAME === "SuperMap.REST.EditFeaturesService");
    }
    /**
     * @function SuperMap.CommonServiceBase.prototype.serviceProcessCompleted
     * @description ç¶æå®æï¼æ§è¡æ­¤æ¹æ³ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     */

  }, {
    key: "serviceProcessCompleted",
    value: function serviceProcessCompleted(result) {
      result = Util.transformResult(result);
      this.events.triggerEvent("processCompleted", {
        result: result
      });
    }
    /**
     * @function SuperMap.CommonServiceBase.prototype.serviceProcessFailed
     * @description ç¶æå¤±è´¥ï¼æ§è¡æ­¤æ¹æ³ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     */

  }, {
    key: "serviceProcessFailed",
    value: function serviceProcessFailed(result) {
      result = Util.transformResult(result);
      var error = result.error || result;
      this.events.triggerEvent("processFailed", {
        error: error
      });
    }
  }, {
    key: "_commit",
    value: function _commit(options) {
      if (options.method === "POST" || options.method === "PUT") {
        if (options.params) {
          options.url = Util.urlAppend(options.url, Util.getParameterString(options.params || {}));
        }

        options.params = options.data;
      }

      FetchRequest.commit(options.method, options.url, options.params, {
        headers: options.headers,
        withCredentials: options.withCredentials,
        crossOrigin: options.crossOrigin,
        timeout: options.async ? 0 : null,
        proxy: options.proxy
      }).then(function (response) {
        if (response.text) {
          return response.text();
        }

        if (response.json) {
          return response.json();
        }

        return response;
      }).then(function (text) {
        var result = text;

        if (typeof text === "string") {
          result = new JSONFormat().read(text);
        }

        if (!result || result.error || result.code >= 300 && result.code !== 304) {
          if (result && result.error) {
            result = {
              error: result.error
            };
          } else {
            result = {
              error: result
            };
          }
        }

        if (result.error) {
          var failure = options.scope ? FunctionExt.bind(options.failure, options.scope) : options.failure;
          failure(result);
        } else {
          result.succeed = result.succeed == undefined ? true : result.succeed;
          var success = options.scope ? FunctionExt.bind(options.success, options.scope) : options.success;
          success(result);
        }
      })["catch"](function (e) {
        var failure = options.scope ? FunctionExt.bind(options.failure, options.scope) : options.failure;
        failure(e);
      });
    }
  }]);

  return CommonServiceBase;
}();
SuperMap.CommonServiceBase = CommonServiceBase;
/**
 * æå¡å¨è¯·æ±åè°å½æ°
 * @callback RequestCallback
 * @example
 * var requestCallback = function (serviceResult){
 *      console.log(serviceResult.result);
 * }
 * new QueryService(url).queryByBounds(param, requestCallback);
 * @param {Object} serviceResult
 * @param {Object} serviceResult.result æå¡å¨è¿åç»æã
 * @param {Object} serviceResult.object åå¸åºç¨ç¨åºäºä»¶çå¯¹è±¡ã
 * @param {Object} serviceResult.type äºä»¶ç±»åã
 * @param {Object} serviceResult.element æ¥åæµè§å¨äºä»¶ç DOM èç¹ã
 */
// CONCATENATED MODULE: ./src/common/iServer/GeoCodingParameter.js
function GeoCodingParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GeoCodingParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GeoCodingParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) GeoCodingParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) GeoCodingParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.GeoCodingParameter
 * @category  iServer AddressMatch
 * @classdesc å°çæ­£åå¹éåæ°ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {string} options.address - å°ç¹å³é®è¯ã 
 * @param {number} [options.fromIndex] - è®¾ç½®è¿åå¯¹è±¡çèµ·å§ç´¢å¼å¼ã 
 * @param {number} [options.toIndex] - è®¾ç½®è¿åå¯¹è±¡çç»æç´¢å¼å¼ã 
 * @param {Array.<string>} [options.filters] - è¿æ»¤å­æ®µï¼éå®æ¥è¯¢åºåã 
 * @param {string} [options.prjCoordSys] - æ¥è¯¢ç»æçåæ ç³»ã 
 * @param {number} [options.maxReturn] - æå¤§è¿åç»ææ°ã
 */

var GeoCodingParameter = /*#__PURE__*/function () {
  function GeoCodingParameter(options) {
    GeoCodingParameter_classCallCheck(this, GeoCodingParameter);

    if (options.filters && typeof options.filters === 'string') {
      options.filters = options.filters.split(',');
    }
    /**
     * @member {string} SuperMap.GeoCodingParameter.prototype.address
     * @description å°ç¹å³é®è¯ã
     */


    this.address = null;
    /**
     * @member {number} [SuperMap.GeoCodingParameter.prototype.fromIndex]
     * @description è®¾ç½®è¿åå¯¹è±¡çèµ·å§ç´¢å¼å¼ã
     */

    this.fromIndex = null;
    /**
     * @member {number} [SuperMap.GeoCodingParameter.prototype.toIndex]
     * @description è®¾ç½®è¿åå¯¹è±¡çç»æç´¢å¼å¼ã
     */

    this.toIndex = null;
    /**
     * @member {Array.<string>} [SuperMap.GeoCodingParameter.prototype.filters]
     * @description è¿æ»¤å­æ®µï¼éå®æ¥è¯¢åºåã
     */

    this.filters = null;
    /**
     * @member {string} [SuperMap.GeoCodingParameter.prototype.prjCoordSys]
     * @description  æ¥è¯¢ç»æçåæ ç³»ã
     */

    this.prjCoordSys = null;
    /**
     * @member {number} [SuperMap.GeoCodingParameter.prototype.maxReturn]
     * @description æå¤§è¿åç»ææ°ã
     */

    this.maxReturn = null;
    Util.extend(this, options);
  }
  /**
   * @function SuperMap.GeoCodingParameter.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  GeoCodingParameter_createClass(GeoCodingParameter, [{
    key: "destroy",
    value: function destroy() {
      this.address = null;
      this.fromIndex = null;
      this.toIndex = null;
      this.filters = null;
      this.prjCoordSys = null;
      this.maxReturn = null;
    }
  }]);

  return GeoCodingParameter;
}();
SuperMap.GeoCodingParameter = GeoCodingParameter;
// CONCATENATED MODULE: ./src/common/iServer/GeoDecodingParameter.js
function GeoDecodingParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GeoDecodingParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GeoDecodingParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) GeoDecodingParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) GeoDecodingParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.GeoDecodingParameter
 * @category iServer AddressMatch
 * @classdesc å°çååå¹éåæ°ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {number} options.x - æ¥è¯¢ä½ç½®çæ¨ªåæ ã 
 * @param {number} options.y - æ¥è¯¢ä½ç½®ççºµåæ ã 
 * @param {number} [options.fromIndex] - è®¾ç½®è¿åå¯¹è±¡çèµ·å§ç´¢å¼å¼ã 
 * @param {Array.<string>} [options.filters] - è¿æ»¤å­æ®µï¼éå®æ¥è¯¢åºåã 
 * @param {string} [options.prjCoordSys] - æ¥è¯¢ç»æçåæ ç³»ã 
 * @param {number} [options.maxReturn] - æå¤§è¿åç»ææ°ã 
 * @param {number} [options.geoDecodingRadius] - æ¥è¯¢åå¾ã
 */

var GeoDecodingParameter = /*#__PURE__*/function () {
  function GeoDecodingParameter(options) {
    GeoDecodingParameter_classCallCheck(this, GeoDecodingParameter);

    if (options.filters) {
      options.filters = options.filters.split(',');
    }
    /**
     * @member {number} SuperMap.GeoDecodingParameter.prototype.x
     * @description æ¥è¯¢ä½ç½®çæ¨ªåæ ã
     */


    this.x = null;
    /**
     * @member {number} SuperMap.GeoDecodingParameter.prototype.y
     * @description æ¥è¯¢ä½ç½®ççºµåæ ã
     */

    this.y = null;
    /**
     * @member {number} [SuperMap.GeoDecodingParameter.prototype.fromIndex]
     * @description  è®¾ç½®è¿åå¯¹è±¡çèµ·å§ç´¢å¼å¼ã
     */

    this.fromIndex = null;
    /**
     * @member {number} [SuperMap.GeoDecodingParameter.prototype.toIndex]
     * @description è®¾ç½®è¿åå¯¹è±¡çç»æç´¢å¼å¼ã
     */

    this.toIndex = null;
    /**
     * @member {Array.<string>} [SuperMap.GeoDecodingParameter.prototype.filters]
     * @description è¿æ»¤å­æ®µï¼éå®æ¥è¯¢åºåã
     */

    this.filters = null;
    /**
     * @member {string} [SuperMap.GeoDecodingParameter.prototype.prjCoordSys]
     * @description æ¥è¯¢ç»æçåæ ç³»ã
     */

    this.prjCoordSys = null;
    /**
     *  @member {number} [SuperMap.GeoDecodingParameter.prototype.maxReturn]
     *  @description æå¤§è¿åç»ææ°ã
     */

    this.maxReturn = null;
    /**
     * @member {number} SuperMap.GeoDecodingParameter.prototype.geoDecodingRadius
     * @description æ¥è¯¢åå¾ã
     */

    this.geoDecodingRadius = null;
    Util.extend(this, options);
  }
  /**
   * @function SuperMap.GeoDecodingParameter.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  GeoDecodingParameter_createClass(GeoDecodingParameter, [{
    key: "destroy",
    value: function destroy() {
      this.x = null;
      this.y = null;
      this.fromIndex = null;
      this.toIndex = null;
      this.filters = null;
      this.prjCoordSys = null;
      this.maxReturn = null;
      this.geoDecodingRadius = null;
    }
  }]);

  return GeoDecodingParameter;
}();
SuperMap.GeoDecodingParameter = GeoDecodingParameter;
// CONCATENATED MODULE: ./src/common/iServer/AddressMatchService.js
function AddressMatchService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { AddressMatchService_typeof = function _typeof(obj) { return typeof obj; }; } else { AddressMatchService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return AddressMatchService_typeof(obj); }

function AddressMatchService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function AddressMatchService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function AddressMatchService_createClass(Constructor, protoProps, staticProps) { if (protoProps) AddressMatchService_defineProperties(Constructor.prototype, protoProps); if (staticProps) AddressMatchService_defineProperties(Constructor, staticProps); return Constructor; }

function AddressMatchService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { AddressMatchService_get = Reflect.get; } else { AddressMatchService_get = function _get(target, property, receiver) { var base = AddressMatchService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return AddressMatchService_get(target, property, receiver || target); }

function AddressMatchService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = AddressMatchService_getPrototypeOf(object); if (object === null) break; } return object; }

function AddressMatchService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) AddressMatchService_setPrototypeOf(subClass, superClass); }

function AddressMatchService_setPrototypeOf(o, p) { AddressMatchService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return AddressMatchService_setPrototypeOf(o, p); }

function AddressMatchService_createSuper(Derived) { var hasNativeReflectConstruct = AddressMatchService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = AddressMatchService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = AddressMatchService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return AddressMatchService_possibleConstructorReturn(this, result); }; }

function AddressMatchService_possibleConstructorReturn(self, call) { if (call && (AddressMatchService_typeof(call) === "object" || typeof call === "function")) { return call; } return AddressMatchService_assertThisInitialized(self); }

function AddressMatchService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function AddressMatchService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function AddressMatchService_getPrototypeOf(o) { AddressMatchService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return AddressMatchService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.AddressMatchService
 * @category iServer AddressMatch
 * @classdesc å°åå¹éæå¡ï¼åæ¬æ­£åå¹éåååå¹éã
 * @param {string} url - å°åå¹éæå¡å°åã
 * @param {Object} options - åæ°ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var AddressMatchService_AddressMatchService = /*#__PURE__*/function (_CommonServiceBase) {
  AddressMatchService_inherits(AddressMatchService, _CommonServiceBase);

  var _super = AddressMatchService_createSuper(AddressMatchService);

  function AddressMatchService(url, options) {
    var _this;

    AddressMatchService_classCallCheck(this, AddressMatchService);

    _this = _super.call(this, url, options);
    _this.options = options || {};
    _this.CLASS_NAME = 'SuperMap.AddressMatchService';
    return _this;
  }
  /**
   * @function SuperMap.AddressMatchService.prototype.destroy
   * @override
   */


  AddressMatchService_createClass(AddressMatchService, [{
    key: "destroy",
    value: function destroy() {
      AddressMatchService_get(AddressMatchService_getPrototypeOf(AddressMatchService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.AddressMatchService.prototype.code
     * @param {string} url - æ­£åå°åå¹éæå¡å°åã
     * @param {SuperMap.GeoCodingParameter} params - æ­£åå°åå¹éæå¡åæ°ã
     */

  }, {
    key: "code",
    value: function code(url, params) {
      if (!(params instanceof GeoCodingParameter)) {
        return;
      }

      this.processAsync(url, params);
    }
    /**
     * @function SuperMap.AddressMatchService.prototype.decode
     * @param {string} url - ååå°åå¹éæå¡å°åã
     * @param {SuperMap.GeoDecodingParameter} params - ååå°åå¹éæå¡åæ°ã
     */

  }, {
    key: "decode",
    value: function decode(url, params) {
      if (!(params instanceof GeoDecodingParameter)) {
        return;
      }

      this.processAsync(url, params);
    }
    /**
     * @function SuperMap.AddressMatchService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çå¨æåæ®µæå¡åæ°ä¼ éå°æå¡ç«¯ã
     * @param {string} url - æå¡å°åã
     * @param {Object} params - åæ°ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(url, params) {
      this.request({
        method: 'GET',
        url: url,
        params: params,
        scope: this,
        success: this.serviceProcessCompleted,
        failure: this.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.AddressMatchService.prototype.serviceProcessCompleted
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     * @description æå¡æµç¨æ¯å¦å®æ
     */

  }, {
    key: "serviceProcessCompleted",
    value: function serviceProcessCompleted(result) {
      if (result.succeed) {
        delete result.succeed;
      }

      AddressMatchService_get(AddressMatchService_getPrototypeOf(AddressMatchService.prototype), "serviceProcessCompleted", this).call(this, result);
    }
    /**
     * @function SuperMap.AddressMatchService.prototype.serviceProcessCompleted
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     * @description æå¡æµç¨æ¯å¦å¤±è´¥
     */

  }, {
    key: "serviceProcessFailed",
    value: function serviceProcessFailed(result) {
      AddressMatchService_get(AddressMatchService_getPrototypeOf(AddressMatchService.prototype), "serviceProcessFailed", this).call(this, result);
    }
  }]);

  return AddressMatchService;
}(CommonServiceBase);
SuperMap.AddressMatchService = AddressMatchService_AddressMatchService;
// CONCATENATED MODULE: ./src/common/iServer/AggQueryBuilderParameter.js
function AggQueryBuilderParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function AggQueryBuilderParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function AggQueryBuilderParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) AggQueryBuilderParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) AggQueryBuilderParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.AggQueryBuilderParameter
 * @classdesc èåæ¥è¯¢ QueryBuilder åæ°åºç±»ï¼è¯¥åæ°ä»æ¯ææ°æ®æ¥æº Elasticsearch æå¡çæ°æ®æå¡ã
 * @category iServer Data FeatureResults
 * @param {Object} option - åå§ååæ°ã
 * @param {string} option.name - æ¥è¯¢ç»æåç§°ã
 * @param {SuperMap.AggregationQueryBuilderType} option.queryType - æ¥è¯¢ç±»åã
 */

var AggQueryBuilderParameter = /*#__PURE__*/function () {
  function AggQueryBuilderParameter(option) {
    AggQueryBuilderParameter_classCallCheck(this, AggQueryBuilderParameter);

    /**
     * @member {string} SuperMap.AggQueryBuilderParameter.prototype.name
     * @description æ¥è¯¢ç»æåç§°ã
     */
    this.name = null;
    /**
     * @member {SuperMap.AggregationQueryBuilderType} SuperMap.AggQueryBuilderParameter.prototype.queryType
     * @description æ¥è¯¢ç±»åã
     */

    this.queryType = null;
    this.CLASS_NAME = "SuperMap.AggQueryBuilderParameter";
    Util.extend(this, option);
  }

  AggQueryBuilderParameter_createClass(AggQueryBuilderParameter, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.name = null;
      me.queryType = null;
    }
  }]);

  return AggQueryBuilderParameter;
}();
SuperMap.AggQueryBuilderParameter = AggQueryBuilderParameter;
// CONCATENATED MODULE: ./src/common/iServer/AggregationParameter.js
function AggregationParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function AggregationParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function AggregationParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) AggregationParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) AggregationParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.AggregationParameter
 * @classdesc èåæ¥è¯¢åæ°è®¾ç½®ï¼è¯¥åæ°ä»æ¯ææ°æ®æ¥æº Elasticsearch æå¡çæ°æ®æå¡ã
 * @category iServer Data FeatureResults
 * @param {Object} options - åå§ååæ°ã
 * @param {string} options.aggName - èååç§°ã
 * @param {SuperMap.AggregationType} options.aggType - èåç±»åè®¾ç½®ã
 * @param {string} options.aggFieldName - èåå­æ®µã
 * @param {SuperMap.AggregationParameter} options.subAgg - å­èåç±»ã
 *
 */

var AggregationParameter = /*#__PURE__*/function () {
  function AggregationParameter(options) {
    AggregationParameter_classCallCheck(this, AggregationParameter);

    /**
     * @member {string} SuperMap.AggregationParameter.prototype.aggName
     * @description èååç§°ã
     */
    this.aggName = null;
    /**
     * @member {SuperMap.AggregationType} SuperMap.AggregationParameter.prototype.aggType
     * @description èåç±»åè®¾ç½®ç±»ã
     */

    this.aggType = null;
    /**
     * @member {string} SuperMap.AggregationParameter.prototype.aggFieldName
     * @description èåå­æ®µã
     */

    this.aggFieldName = null;
    /**
     * @member {SuperMap.AggregationParameter} SuperMap.AggregationParameter.prototype.subAgg
     * @description å­èåã
     */

    this.subAgg = null;
    this.CLASS_NAME = "SuperMap.AggregationParameter";
    Util.extend(this, options);
  }

  AggregationParameter_createClass(AggregationParameter, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.aggName = null;
      me.aggFieldName = null;
      me.aggType = null;

      if (me.subAgg) {
        me.subAgg = null;
      }
    }
  }]);

  return AggregationParameter;
}();
SuperMap.AggregationParameter = AggregationParameter;
// CONCATENATED MODULE: ./src/common/iServer/AreaSolarRadiationParameters.js
function AreaSolarRadiationParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function AreaSolarRadiationParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function AreaSolarRadiationParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) AreaSolarRadiationParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) AreaSolarRadiationParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.AreaSolarRadiationParameters
 * @category iServer SpatialAnalyst SolarRadiationAnalyst
 * @classdesc å°åºå¤ªé³è¾å°åæ°ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {string} options.dataset - è¦ç¨æ¥åå°åºå¤ªé³è¾å°æ°æ®æºä¸­æ°æ®éçåç§°ãè¯¥åç§°ç¨å½¢å¦"æ°æ®éåç§°@æ°æ®æºå«å"çå½¢å¼æ¥è¡¨ç¤ºï¼ä¾å¦ï¼JingjinTerrain@Jingjinã 
 * @param {string} options.targetDatasourceName - æå®çå­å¨ç»ææ°æ®éçæ°æ®æºåç§°, ä¾å¦ï¼"Jingjin"ã 
 * @param {string} options.totalGridName - æå®å°åºå¤ªé³è¾å°æ»è¾å°éæ°æ®éçåç§°ã 
 * @param {string} options.diffuseDatasetGridName - æå®å°åºå¤ªé³è¾å°æ£å°è¾å°éæ°æ®éçåç§°ã 
 * @param {string} options.durationDatasetGridName - æå®å°åºå¤ªé³è¾å°å¤ªé³ç´å°æç»­æ¶é´æ°æ®éçåç§°ã 
 * @param {string} options.directDatasetGridName - æå®å°åºå¤ªé³è¾å°ç´å°è¾å°éæ°æ®éçåç§°ã
 * @param {number} options.latitude - å¾è®¡ç®åºåççº¬åº¦å¼ã 
 * @param {string} [options.timeMode = 'MULTIDAYS'] - æ¶é´æ¨¡å¼ãå¯éå¼"WITHINDAY"ï¼åæ¥ï¼æ"MULTIDAYS"ï¼å¤æ¥ï¼ã
 * @param {number} options.dayStart - èµ·å§æ¥æï¼å¹´åçç¬¬å å¤©ï¼ã 
 * @param {number} options.dayEnd - ç»ææ¥æï¼å¹´åçç¬¬å å¤©ï¼ã 
 * @param {number} [options.hourStart] - èµ·å§æ¶é´ï¼ä¸å¤©ä¸­çç¬¬å ä¸ªå°æ¶ï¼ã 
 * @param {number} [options.hourEnd] - ç»ææ¶é´ï¼ä¸å¤©ä¸­çç¬¬å ä¸ªå°æ¶ï¼ã 
 * @param {number} [options.transmittance] - å¤ªé³è¾å°ç©¿è¿å¤§æ°çéå°çã 
 * @param {number} [options.hourInterval=0.5] - è®¡ç®æ¶çå°æ¶é´éï¼è®¾ç½®çè¶å°è®¡ç®éè¶å¤§å¹¶ä¸è®¡ç®ç»ææ´ç²¾ç¡®ï¼å¦æä¿®æ¹æ­¤åæ°ï¼å¿é¡»ä½¿ç¨æ´æ°ï¼ã 
 * @param {number} [options.dayInterval=5] - è®¡ç®æ¶çå¤©æ°é´éï¼è®¾ç½®çè¶å°è®¡ç®éè¶å¤§å¹¶ä¸è®¡ç®ç»ææ´ç²¾ç¡®ï¼å¿é¡»ä½¿ç¨æ´æ°ï¼ã 
 * @param {boolean} [options.deleteExistResultDataset=false] - å¦æç¨æ·å½åçç»ææ°æ®éåç§°ä¸å·²æçæ°æ®ééåï¼æ¯å¦å é¤å·²æçæ°æ®éã
 */

var AreaSolarRadiationParameters = /*#__PURE__*/function () {
  function AreaSolarRadiationParameters(options) {
    AreaSolarRadiationParameters_classCallCheck(this, AreaSolarRadiationParameters);

    /**
     *  @member {string} SuperMap.AreaSolarRadiationParameters.prototype.dataset
     *  @description è¦ç¨æ¥åå°åºå¤ªé³è¾å°æ°æ®æºä¸­æ°æ®éçåç§°ãè¯¥åç§°ç¨å½¢å¦âæ°æ®éåç§°@æ°æ®æºå«åâå½¢å¼æ¥è¡¨ç¤ºï¼ä¾å¦ï¼JingjinTerrain@Jingjinãæ³¨ï¼å°åºå¤ªé³è¾å°æ°æ®å¿é¡»ä¸ºæ æ ¼æ°æ®éã
     */
    this.dataset = null;
    /**
     * @member {string} SuperMap.AreaSolarRadiationParameters.prototype.targetDatasourceName
     * @description æå®çå­å¨ç»ææ°æ®éçæ°æ®æºåç§°ï¼ä¾å¦ï¼"Jingjin"ã
     */

    this.targetDatasourceName = null;
    /**
     * @member {string} SuperMap.AreaSolarRadiationParameters.prototype.totalGridName
     * @description æå®å°åºå¤ªé³è¾å°æ»è¾å°éæ°æ®éçåç§°ã
     */

    this.totalGridName = null;
    /**
     * @member {string} SuperMap.AreaSolarRadiationParameters.prototype.diffuseDatasetGridName
     * @description æå®å°åºå¤ªé³è¾å°æ£å°è¾å°éæ°æ®éçåç§°ã
     */

    this.diffuseDatasetGridName = null;
    /**
     * @member {string} SuperMap.AreaSolarRadiationParameters.prototype.durationDatasetGridName
     * @description  æå®å°åºå¤ªé³è¾å°å¤ªé³ç´å°æç»­æ¶é´æ°æ®éçåç§°ã
     */

    this.durationDatasetGridName = null;
    /**
     * @member {string} SuperMap.AreaSolarRadiationParameters.prototype.durationDatasetGridName
     * @description æå®å°åºå¤ªé³è¾å°ç´å°è¾å°éæ°æ®éçåç§°ã
     */

    this.directDatasetGridName = null;
    /**
     * @member {number} SuperMap.AreaSolarRadiationParameters.prototype.latitude
     * @description å¾è®¡ç®åºåççº¬åº¦å¼ã
     */

    this.latitude = null;
    /**
     *  @member {string} [SuperMap.AreaSolarRadiationParameters.prototype.timeMode='MULTIDAYS']
     *  @description æ¶é´æ¨¡å¼ãå¯éå¼"WITHINDAY"ï¼åæ¥ï¼æ"MULTIDAYS"ï¼å¤æ¥ï¼ã
     */

    this.timeMode = "MULTIDAYS";
    /**
     *  @member {number} SuperMap.AreaSolarRadiationParameters.prototype.dayStart
     *  @description èµ·å§æ¥æï¼å¹´åçç¬¬å å¤©ï¼ã
     */

    this.dayStart = null;
    /**
     *  @member {number} SuperMap.AreaSolarRadiationParameters.prototype.dayEnd
     * @description ç»ææ¥æï¼å¹´åçç¬¬å å¤©ï¼ã
     */

    this.dayEnd = null;
    /**
     * @member {number} [SuperMap.AreaSolarRadiationParameters.prototype.hourStart]
     * @description èµ·å§æ¶é´ï¼ä¸å¤©ä¸­çç¬¬å ä¸ªå°æ¶ï¼ã
     */

    this.hourStart = null;
    /**
     * @member {number} [SuperMap.AreaSolarRadiationParameters.prototype.hourEnd]
     * @description ç»ææ¶é´ï¼ä¸å¤©ä¸­çç¬¬å ä¸ªå°æ¶ï¼ã
     */

    this.hourEnd = null;
    /**
     * @member {number} [SuperMap.AreaSolarRadiationParameters.prototype.transmittance]
     * @description å¤ªé³è¾å°ç©¿è¿å¤§æ°çéå°çã
     */

    this.transmittance = null;
    /**
     *  @member {number} [SuperMap.AreaSolarRadiationParameters.prototype.hourInterval=0.5]
     *  @description è®¡ç®æ¶çå°æ¶é´éï¼è®¾ç½®çè¶å°è®¡ç®éè¶å¤§å¹¶ä¸è®¡ç®ç»ææ´ç²¾ç¡®, å¦æä¿®æ¹æ­¤åæ°ï¼å¿é¡»ä½¿ç¨æ´æ°ï¼
     */

    this.hourInterval = null;
    /**
     * @member {number} [SuperMap.AreaSolarRadiationParameters.prototype.dayInterval=5]
     * @description è®¡ç®æ¶çå¤©æ°é´éï¼è®¾ç½®çè¶å°è®¡ç®éè¶å¤§å¹¶ä¸è®¡ç®ç»ææ´ç²¾ç¡®, å¿é¡»ä½¿ç¨æ´æ°ï¼
     */

    this.dayInterval = null;
    /**
     * @member {boolean} [SuperMap.AreaSolarRadiationParameters.prototype.deleteExistResultDataset=false]
     * @description å¦æç¨æ·å½åçç»ææ°æ®éåç§°ä¸å·²æçæ°æ®ééåï¼æ¯å¦å é¤å·²æçæ°æ®éã
     */

    this.deleteExistResultDataset = false;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.AreaSolarRadiationParameters";
  }
  /**
   * @function SuperMap.AreaSolarRadiationParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  AreaSolarRadiationParameters_createClass(AreaSolarRadiationParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.dataset = null;
      me.zFactor = 1.0;
      me.averageCurvatureName = null;
      me.profileCurvatureName = null;
      me.planCurvatureName = null;
      me.deleteExistResultDataset = true;
    }
    /**
     * @function SuperMap.AreaSolarRadiationParameters.toObject
     * @param {SuperMap.AreaSolarRadiationParameters} param - å°åºå¤ªé³è¾å°åæ°ç±»ã
     * @param {SuperMap.AreaSolarRadiationParameters} tempObj - å°åºå¤ªé³è¾å°åæ°å¯¹è±¡ã
     * @returns {Object} JSONå¯¹è±¡ã
     * @description å°SuperMap.AreaSolarRadiationParameterså¯¹è±¡è½¬æ¢æJSONå¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(param, tempObj) {
      var parameter = {};

      for (var name in param) {
        if (name !== "dataset") {
          var name1 = name === "latitude" || name === "timeMode" || name === "dayStart";
          var name2 = name === "dayEnd" || name === "hourStart" || name === "hourEnd";
          var name3 = name === "transmittance" || name === "hourInterval" || name === "dayInterval";

          if (name1 || name2 || name3) {
            parameter[name] = param[name];
          } else {
            tempObj[name] = param[name];
          }
        }
      }

      tempObj["parameter"] = parameter;
    }
  }]);

  return AreaSolarRadiationParameters;
}();
SuperMap.AreaSolarRadiationParameters = AreaSolarRadiationParameters;
// CONCATENATED MODULE: ./src/common/iServer/SpatialAnalystBase.js
function SpatialAnalystBase_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SpatialAnalystBase_typeof = function _typeof(obj) { return typeof obj; }; } else { SpatialAnalystBase_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SpatialAnalystBase_typeof(obj); }

function SpatialAnalystBase_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SpatialAnalystBase_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SpatialAnalystBase_createClass(Constructor, protoProps, staticProps) { if (protoProps) SpatialAnalystBase_defineProperties(Constructor.prototype, protoProps); if (staticProps) SpatialAnalystBase_defineProperties(Constructor, staticProps); return Constructor; }

function SpatialAnalystBase_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SpatialAnalystBase_get = Reflect.get; } else { SpatialAnalystBase_get = function _get(target, property, receiver) { var base = SpatialAnalystBase_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SpatialAnalystBase_get(target, property, receiver || target); }

function SpatialAnalystBase_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SpatialAnalystBase_getPrototypeOf(object); if (object === null) break; } return object; }

function SpatialAnalystBase_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SpatialAnalystBase_setPrototypeOf(subClass, superClass); }

function SpatialAnalystBase_setPrototypeOf(o, p) { SpatialAnalystBase_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SpatialAnalystBase_setPrototypeOf(o, p); }

function SpatialAnalystBase_createSuper(Derived) { var hasNativeReflectConstruct = SpatialAnalystBase_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SpatialAnalystBase_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SpatialAnalystBase_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SpatialAnalystBase_possibleConstructorReturn(this, result); }; }

function SpatialAnalystBase_possibleConstructorReturn(self, call) { if (call && (SpatialAnalystBase_typeof(call) === "object" || typeof call === "function")) { return call; } return SpatialAnalystBase_assertThisInitialized(self); }

function SpatialAnalystBase_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SpatialAnalystBase_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SpatialAnalystBase_getPrototypeOf(o) { SpatialAnalystBase_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SpatialAnalystBase_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.SpatialAnalystBase
 * @category  iServer SpatialAnalyst
 * @classdesc ç©ºé´åææå¡åºç±»ã
 * @param {string} url - å°åã
 * @param {Object} options - åæ°ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @extends {SuperMap.CommonServiceBase}
 */

var SpatialAnalystBase = /*#__PURE__*/function (_CommonServiceBase) {
  SpatialAnalystBase_inherits(SpatialAnalystBase, _CommonServiceBase);

  var _super = SpatialAnalystBase_createSuper(SpatialAnalystBase);

  function SpatialAnalystBase(url, options) {
    var _this;

    SpatialAnalystBase_classCallCheck(this, SpatialAnalystBase);

    _this = _super.call(this, url, options);
    /**
     * @member {SuperMap.DataFormat} [SuperMap.SpatialAnalystBase.prototype.format=SuperMap.DataFormat.GEOJSON]
     * @description æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ï¼åæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
     */

    _this.format = DataFormat.GEOJSON;
    _this.CLASS_NAME = "SuperMap.SpatialAnalystBase";
    return _this;
  }
  /**
   * @function SuperMap.SpatialAnalystBase.prototype.destroy
   * @override
   */


  SpatialAnalystBase_createClass(SpatialAnalystBase, [{
    key: "destroy",
    value: function destroy() {
      SpatialAnalystBase_get(SpatialAnalystBase_getPrototypeOf(SpatialAnalystBase.prototype), "destroy", this).call(this);

      this.format = null;
    }
    /**
     * @function SuperMap.SpatialAnalystBase.prototype.serviceProcessCompleted
     * @description åæå®æï¼æ§è¡æ­¤æ¹æ³ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     */

  }, {
    key: "serviceProcessCompleted",
    value: function serviceProcessCompleted(result) {
      var me = this,
          analystResult;
      result = Util.transformResult(result);

      if (result && me.format === DataFormat.GEOJSON && typeof me.toGeoJSONResult === 'function') {
        //æ¹éåææ¶ä¼è¿åå¤ä¸ªç»æ
        if (Util.isArray(result)) {
          for (var i = 0; i < result.length; i++) {
            result[i] = me.toGeoJSONResult(result[i]);
          }

          analystResult = result;
        } else {
          analystResult = me.toGeoJSONResult(result);
        }
      }

      if (!analystResult) {
        analystResult = result;
      }

      me.events.triggerEvent("processCompleted", {
        result: analystResult
      });
    }
    /**
     * @function SuperMap.SpatialAnalystBase.prototype.toGeoJSONResult
     * @description å°å«æ geometry çæ°æ®è½¬æ¢ä¸º GeoJSON æ ¼å¼ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     *
     */

  }, {
    key: "toGeoJSONResult",
    value: function toGeoJSONResult(result) {
      if (!result) {
        return null;
      } //æ¹éå å åææ¶ç»æè¿æ ·å¤ç


      if (result.result && result.result.resultGeometry) {
        result = result.result;
      }

      var geoJSONFormat = new GeoJSON();

      if (result.recordsets) {
        for (var i = 0, recordsets = result.recordsets, len = recordsets.length; i < len; i++) {
          if (recordsets[i].features) {
            recordsets[i].features = geoJSONFormat.toGeoJSON(recordsets[i].features);
          }
        }
      } else if (result.recordset && result.recordset.features) {
        result.recordset.features = geoJSONFormat.toGeoJSON(result.recordset.features);
      }

      if (result.resultGeometry) {
        result.resultGeometry = geoJSONFormat.toGeoJSON(result.resultGeometry);
      }

      if (result.regions) {
        result.regions = geoJSONFormat.toGeoJSON(result.regions);
      }

      return result;
    }
  }]);

  return SpatialAnalystBase;
}(CommonServiceBase);
SuperMap.SpatialAnalystBase = SpatialAnalystBase;
// CONCATENATED MODULE: ./src/common/iServer/AreaSolarRadiationService.js
function AreaSolarRadiationService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { AreaSolarRadiationService_typeof = function _typeof(obj) { return typeof obj; }; } else { AreaSolarRadiationService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return AreaSolarRadiationService_typeof(obj); }

function AreaSolarRadiationService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function AreaSolarRadiationService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function AreaSolarRadiationService_createClass(Constructor, protoProps, staticProps) { if (protoProps) AreaSolarRadiationService_defineProperties(Constructor.prototype, protoProps); if (staticProps) AreaSolarRadiationService_defineProperties(Constructor, staticProps); return Constructor; }

function AreaSolarRadiationService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { AreaSolarRadiationService_get = Reflect.get; } else { AreaSolarRadiationService_get = function _get(target, property, receiver) { var base = AreaSolarRadiationService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return AreaSolarRadiationService_get(target, property, receiver || target); }

function AreaSolarRadiationService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = AreaSolarRadiationService_getPrototypeOf(object); if (object === null) break; } return object; }

function AreaSolarRadiationService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) AreaSolarRadiationService_setPrototypeOf(subClass, superClass); }

function AreaSolarRadiationService_setPrototypeOf(o, p) { AreaSolarRadiationService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return AreaSolarRadiationService_setPrototypeOf(o, p); }

function AreaSolarRadiationService_createSuper(Derived) { var hasNativeReflectConstruct = AreaSolarRadiationService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = AreaSolarRadiationService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = AreaSolarRadiationService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return AreaSolarRadiationService_possibleConstructorReturn(this, result); }; }

function AreaSolarRadiationService_possibleConstructorReturn(self, call) { if (call && (AreaSolarRadiationService_typeof(call) === "object" || typeof call === "function")) { return call; } return AreaSolarRadiationService_assertThisInitialized(self); }

function AreaSolarRadiationService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function AreaSolarRadiationService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function AreaSolarRadiationService_getPrototypeOf(o) { AreaSolarRadiationService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return AreaSolarRadiationService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.AreaSolarRadiationService
 * @category iServer SpatialAnalyst SolarRadiationAnalyst
 * @classdesc å°åºå¤ªé³è¾å°æå¡ç±»ã
 * @param {string} url - æå¡çè®¿é®å°åãå¦ï¼</br>http://localhost:8090/iserver/services/spatialanalyst-sample/restjsr/spatialanalystã</br>
 * @param {Object} options - åæ°ã</br>
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @extends {SuperMap.SpatialAnalystBase}
 * @example ä¾å¦ï¼
 * (start code)
 * var myAreaSolarRadiationService = new SuperMap.AreaSolarRadiationService(url);
 * myAreaSolarRadiationService.on({
     *     "processCompleted": processCompleted,
     *     "processFailed": processFailed
     *     }
 * );
 * (end)
 *
 */

var AreaSolarRadiationService = /*#__PURE__*/function (_SpatialAnalystBase) {
  AreaSolarRadiationService_inherits(AreaSolarRadiationService, _SpatialAnalystBase);

  var _super = AreaSolarRadiationService_createSuper(AreaSolarRadiationService);

  function AreaSolarRadiationService(url, options) {
    var _this;

    AreaSolarRadiationService_classCallCheck(this, AreaSolarRadiationService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.AreaSolarRadiationService";
    return _this;
  }
  /**
   * @function SuperMap.AreaSolarRadiationService.prototype.destroy
   * @override
   */


  AreaSolarRadiationService_createClass(AreaSolarRadiationService, [{
    key: "destroy",
    value: function destroy() {
      AreaSolarRadiationService_get(AreaSolarRadiationService_getPrototypeOf(AreaSolarRadiationService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.AreaSolarRadiationService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.AreaSolarRadiationParameters} parameter - å°åºå¤ªé³è¾å°åæ°ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(parameter) {
      if (!(parameter instanceof AreaSolarRadiationParameters)) {
        return;
      }

      var me = this;
      var parameterObject = {};

      if (parameter instanceof AreaSolarRadiationParameters) {
        me.url = Util.urlPathAppend(me.url, "datasets/".concat(parameter.dataset, "/solarradiation"));
      }

      me.url = Util.urlAppend(me.url, 'returnContent=true');
      AreaSolarRadiationParameters.toObject(parameter, parameterObject);
      var jsonParameters = Util.toJSON(parameterObject);
      me.request({
        method: 'POST',
        data: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return AreaSolarRadiationService;
}(SpatialAnalystBase);
SuperMap.AreaSolarRadiationService = AreaSolarRadiationService;
// CONCATENATED MODULE: ./src/common/iServer/BufferDistance.js
function BufferDistance_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function BufferDistance_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function BufferDistance_createClass(Constructor, protoProps, staticProps) { if (protoProps) BufferDistance_defineProperties(Constructor.prototype, protoProps); if (staticProps) BufferDistance_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.BufferDistance
 * @category iServer SpatialAnalyst BufferAnalyst
 * @classdesc ç¼å²åºåæçç¼å²è·ç¦»ç±»ãéè¿è¯¥ç±»å¯ä»¥è®¾ç½®ç¼å²åºåæçç¼å²è·ç¦»ï¼è·ç¦»å¯ä»¥æ¯æ°å¼ä¹å¯ä»¥æ¯æ°å¼åçå­æ®µè¡¨è¾¾å¼ã
 * @param {Object} options - åæ°ã 
 * @param {string} [options.exp] - ä»¥æ°å¼åçå­æ®µè¡¨è¾¾å¼ä½ä¸ºç¼å²åºåæçè·ç¦»å¼ã 
 * @param {number} [options.value=100] - ä»¥æ°å¼ä½ä¸ºç¼å²åºåæçè·ç¦»å¼ãåä½ï¼ç±³ã
 */

var BufferDistance = /*#__PURE__*/function () {
  function BufferDistance(options) {
    BufferDistance_classCallCheck(this, BufferDistance);

    /**
     * @member {string} [SuperMap.BufferDistance.prototype.exp]
     * @description ä»¥æ°å¼åçå­æ®µè¡¨è¾¾å¼ä½ä¸ºç¼å²åºåæçè·ç¦»å¼ã
     */
    this.exp = null;
    /**
     * @member {number} [SuperMap.BufferDistance.prototype.value=100]
     * @description ä»¥æ°å¼ä½ä¸ºç¼å²åºåæçè·ç¦»å¼ãåä½ï¼ç±³ã
     */

    this.value = 100;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.BufferDistance";
  }
  /**
   * @function SuperMap.BufferDistance.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  BufferDistance_createClass(BufferDistance, [{
    key: "destroy",
    value: function destroy() {
      this.exp = null;
      this.value = null;
    }
  }]);

  return BufferDistance;
}();
SuperMap.BufferDistance = BufferDistance;
// CONCATENATED MODULE: ./src/common/iServer/BufferSetting.js
function BufferSetting_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function BufferSetting_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function BufferSetting_createClass(Constructor, protoProps, staticProps) { if (protoProps) BufferSetting_defineProperties(Constructor.prototype, protoProps); if (staticProps) BufferSetting_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.BufferSetting
 * @category iServer SpatialAnalyst BufferAnalyst
 * @classdesc ç¼å²åºåæéç¨è®¾ç½®ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {SuperMap.BufferEndType} [options.endType=SuperMap.BufferEndType.FLAT] - ç¼å²åºç«¯ç¹æä¸¾å¼ã 
 * @param {SuperMap.BufferDistance} [options.leftDistance=100] - å·¦ä¾§ç¼å²è·ç¦»ã 
 * @param {SuperMap.BufferDistance} [options.rightDistance=100] - å³ä¾§ç¼å²è·ç¦»ã 
 * @param {number} [options.semicircleLineSegment=4] - åå¤´ç¼å²åå¼§å¤çº¿æ®µçä¸ªæ°ã 
 * @param {SuperMap.BufferRadiusUnit} [options.radiusUnit=SuperMap.BufferRadiusUnit.METER] - ç¼å²åå¾åä½ã
 */

var BufferSetting = /*#__PURE__*/function () {
  function BufferSetting(options) {
    BufferSetting_classCallCheck(this, BufferSetting);

    /**
     * @member {SuperMap.BufferEndType} [SuperMap.BufferSetting.prototype.endType = SuperMap.BufferEndType.FLAT]
     * @description ç¼å²åºç«¯ç¹æä¸¾å¼ãåä¸ºå¹³å¤´ååå¤´ä¸¤ç§ã
     */
    this.endType = BufferEndType.FLAT;
    /**
     * @member {SuperMap.BufferDistance} [SuperMap.BufferSetting.prototype.leftDistance=100]
     * @description å·¦ä¾§ç¼å²è·ç¦»ã
     * å½ä¸º GeometryBufferAnalyst æ¶ï¼åä½ä¸ºé»è®¤å°å¾çæå½±ç³»çåä½ï¼å¦3857ä¸ºç±³ï¼4326ä¸ºåº¦ï¼ï¼
     * å½ä¸º DatasetBufferAnalyst æ¶ï¼åä½éè¿{@link BufferSetting.radiusUnit}è®¾ç½®ï¼é»è®¤å¨é¨ä¸ºç±³ï¼ã
     */

    this.leftDistance = new BufferDistance();
    /**
     * @member {SuperMap.BufferDistance} [SuperMap.BufferSetting.prototype.rightDistance=100]
     * @description å³ä¾§ç¼å²è·ç¦»ã
     * å½ä¸º GeometryBufferAnalyst æ¶ï¼åä½ä¸ºé»è®¤å°å¾çæå½±ç³»çåä½ï¼å¦3857ä¸ºç±³ï¼4326ä¸ºåº¦ï¼ï¼
     * å½ä¸º DatasetBufferAnalyst æ¶ï¼åä½éè¿{@link BufferSetting.radiusUnit}è®¾ç½®ï¼é»è®¤å¨é¨ä¸ºç±³ï¼ã
     */

    this.rightDistance = new BufferDistance();
    /**
     * @member {number} [SuperMap.BufferSetting.prototype.semicircleLineSegment=4]
     * @description åå¤´ç¼å²åå¼§å¤çº¿æ®µçä¸ªæ°ãå³ç¨å¤å°ä¸ªçº¿æ®µæ¥æ¨¡æä¸ä¸ªååã
     */

    this.semicircleLineSegment = 4;
    /**
     * @member {SuperMap.BufferRadiusUnit} [SuperMap.BufferSetting.prototype.radiusUnit = SuperMap.BufferRadiusUnit.METER]
     * @description ç¼å²åå¾åä½ï¼å¯ä»¥æ¯{@link SuperMap.BufferRadiusUnit.METER}ã{@link SuperMap.BufferRadiusUnit.MILIMETER}ã
     * {@link SuperMap.BufferRadiusUnit.CENTIMETER}ã{@link SuperMap.BufferRadiusUnit.DECIMETER}ã{@link SuperMap.BufferRadiusUnit.KILOMETER}ã
     * {@link SuperMap.BufferRadiusUnit.FOOT}ã{@link SuperMap.BufferRadiusUnit.INCH}ã{@link SuperMap.BufferRadiusUnit.MILE}ã{@link SuperMap.BufferRadiusUnit.YARD}ã
     * ä»å¯¹BufferAnalystææã
     */

    this.radiusUnit = BufferRadiusUnit.METER;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.BufferSetting";
  }
  /**
   * @function SuperMap.BufferSetting.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  BufferSetting_createClass(BufferSetting, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.endType = null;

      if (me.leftDistance) {
        me.leftDistance.destroy();
        me.leftDistance = null;
      }

      if (me.rightDistance) {
        me.rightDistance.destroy();
        me.rightDistance = null;
      }

      me.semicircleLineSegment = null;
      me.radiusUnit = null;
    }
  }]);

  return BufferSetting;
}();
SuperMap.BufferSetting = BufferSetting;
// CONCATENATED MODULE: ./src/common/iServer/BufferAnalystParameters.js
function BufferAnalystParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function BufferAnalystParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function BufferAnalystParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) BufferAnalystParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) BufferAnalystParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.BufferAnalystParameters
 * @category iServer SpatialAnalyst BufferAnalyst
 * @classdesc ç¼å²åºåæåæ°åºç±»ã
 * @param {Object} options - åæ°ã 
 * @param {SuperMap.BufferSetting} [options.bufferSetting] - è®¾ç½®ç¼å²åºéç¨åæ°ãä¸ºç¼å²åºåææä¾å¿è¦çåæ°ä¿¡æ¯ï¼åæ¬å·¦ç¼å²è·ç¦»ãå³ç¼å²è·ç¦»ãç«¯ç¹ç±»åãåå¤´ç¼å²åå¼§å¤çº¿æ®µçä¸ªæ°ä¿¡æ¯ã
 */

var BufferAnalystParameters = /*#__PURE__*/function () {
  function BufferAnalystParameters(options) {
    BufferAnalystParameters_classCallCheck(this, BufferAnalystParameters);

    var me = this;
    /**
     * @member {SuperMap.BufferSetting} [SuperMap.BufferAnalystParameters.prototype.bufferSetting]
     * @description è®¾ç½®ç¼å²åºéç¨åæ°ãä¸ºç¼å²åºåææä¾å¿è¦çåæ°ä¿¡æ¯ï¼åæ¬å·¦ç¼å²è·ç¦»ãå³ç¼å²è·ç¦»ãç«¯ç¹ç±»åãåå¤´ç¼å²åå¼§å¤çº¿æ®µçä¸ªæ°ä¿¡æ¯ã
     */

    me.bufferSetting = new BufferSetting();
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.BufferAnalystParameters";
  }
  /**
   * @function SuperMap.BufferAnalystParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  BufferAnalystParameters_createClass(BufferAnalystParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;

      if (me.bufferSetting) {
        me.bufferSetting.destroy();
        me.bufferSetting = null;
      }
    }
  }]);

  return BufferAnalystParameters;
}();
SuperMap.BufferAnalystParameters = BufferAnalystParameters;
// CONCATENATED MODULE: ./src/common/iServer/DataReturnOption.js
function DataReturnOption_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function DataReturnOption_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function DataReturnOption_createClass(Constructor, protoProps, staticProps) { if (protoProps) DataReturnOption_defineProperties(Constructor.prototype, protoProps); if (staticProps) DataReturnOption_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.DataReturnOption
 * @category iServer SpatialAnalyst
 * @classdesc æ°æ®è¿åè®¾ç½®ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {number} [options.expectCount=1000] - è®¾ç½®è¿åçæå¤§è®°å½æ°ï¼å°äºæèç­äº 0 æ¶è¡¨ç¤ºè¿åææè®°å½æ°ã 
 * @param {string} [options.dataset] - è®¾ç½®ç»ææ°æ®éæ è¯ï¼å½ dataReturnMode ä¸º {@link SuperMap.DataReturnMode.DATASET_ONLY}æ{@link SuperMap.DataReturnMode.DATASET_AND_RECORDSET}æ¶ææï¼
 *                                   ä½ä¸ºè¿åæ°æ®éçåç§°ãè¯¥åç§°ç¨å½¢å¦âæ°æ®éåç§°@æ°æ®æºå«åâå½¢å¼æ¥è¡¨ç¤ºã 
 * @param {SuperMap.DataReturnMode} [options.dataReturnMode=SuperMap.DataReturnMode.RECORDSET_ONLY] - æ°æ®è¿åæ¨¡å¼ã 
 * @param {boolean} [options.deleteExistResultDataset=true] - å¦æç¨æ·å½åçç»ææ°æ®éåç§°ä¸å·²æçæ°æ®ééåï¼æ¯å¦å é¤å·²æçæ°æ®éã
 */

var DataReturnOption = /*#__PURE__*/function () {
  function DataReturnOption(options) {
    DataReturnOption_classCallCheck(this, DataReturnOption);

    /**
     * @member {number} [SuperMap.DataReturnOption.prototype.expectCount=1000]
     * @description è®¾ç½®è¿åçæå¤§è®°å½æ°ï¼å°äºæèç­äº0æ¶è¡¨ç¤ºè¿åææè®°å½æ°ã
     */
    this.expectCount = 1000;
    /**
     * @member {string} [SuperMap.DataReturnOption.prototype.dataset]
     * @description è®¾ç½®ç»ææ°æ®éæ è¯ï¼å½dataReturnModeä¸º {@link SuperMap.DataReturnMode.DATASET_ONLY}
     * æ{@link SuperMap.DataReturnMode.DATASET_AND_RECORDSET}æ¶ææï¼
     * ä½ä¸ºè¿åæ°æ®éçåç§°ãè¯¥åç§°ç¨å½¢å¦"æ°æ®éåç§°@æ°æ®æºå«å"å½¢å¼æ¥è¡¨ç¤ºã
     */

    this.dataset = null;
    /**
     * @member {SuperMap.DataReturnMode} [SuperMap.DataReturnOption.prototype.dataReturnMode=SuperMap.DataReturnMode.RECORDSET_ONLY]
     * @description æ°æ®è¿åæ¨¡å¼ã
     */

    this.dataReturnMode = DataReturnMode.RECORDSET_ONLY;
    /**
     * @member {boolean} [SuperMap.DataReturnOption.prototype.deleteExistResultDataset=true]
     * @description å¦æç¨æ·å½åçç»ææ°æ®éåç§°ä¸å·²æçæ°æ®ééåï¼æ¯å¦å é¤å·²æçæ°æ®éã
     */

    this.deleteExistResultDataset = true;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.DataReturnOption";
  }
  /**
   * @function SuperMap.DataReturnOption.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  DataReturnOption_createClass(DataReturnOption, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.expectCount = null;
      me.dataset = null;
      me.dataReturnMode = null;
      me.deleteExistResultDataset = null;
    }
  }]);

  return DataReturnOption;
}();
SuperMap.DataReturnOption = DataReturnOption;
// CONCATENATED MODULE: ./src/common/iServer/JoinItem.js
function JoinItem_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function JoinItem_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function JoinItem_createClass(Constructor, protoProps, staticProps) { if (protoProps) JoinItem_defineProperties(Constructor.prototype, protoProps); if (staticProps) JoinItem_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.JoinItem
 * @category iServer
 * @classdesc è¿æ¥ä¿¡æ¯ç±»ã
 * è¯¥ç±»ç¨äºç¢éæ°æ®éä¸å¤é¨è¡¨çè¿æ¥ãå¤é¨è¡¨å¯ä»¥ä¸ºå¦ä¸ä¸ªç¢éæ°æ®éï¼å¶ä¸­çº¯å±æ§æ°æ®éä¸­æ²¡æç©ºé´å ä½ä¿¡æ¯ï¼æå¯¹åºç DBMS è¡¨ï¼ä¹å¯ä»¥æ¯ç¨æ·èªå»ºçä¸å¡è¡¨ã
 * éè¦æ³¨æçæ¯ï¼ç¢éæ°æ®éä¸å¤é¨è¡¨å¿é¡»å±äºåä¸æ°æ®æºãè¡¨ä¹é´çèç³»çå»ºç«æä¸¤ç§æ¹å¼ï¼ä¸ç§æ¯è¿æ¥ï¼joinï¼ï¼ä¸ç§æ¯å³èï¼linkï¼ã
 * è¿æ¥ï¼å®éä¸æ¯ä¾æ®ç¸åçå­æ®µå°ä¸ä¸ªå¤é¨è¡¨è¿½å å°æå®çè¡¨ï¼èå³èæ¯åºäºä¸ä¸ªç¸åçå­æ®µå®ä¹äºä¸¤ä¸ªè¡¨æ ¼ä¹é´çèç³»ï¼ä½ä¸æ¯å®éçè¿½å ã
 * ç¨äºè¿æ¥ä¸¤ä¸ªè¡¨çå­æ®µçåç§°ä¸ä¸å®ç¸åï¼ä½ç±»åå¿é¡»ä¸è´ãå½ä¸¤ä¸ªè¡¨æ ¼ä¹é´å»ºç«äºè¿æ¥ï¼éè¿å¯¹ä¸»è¡¨è¿è¡æä½ï¼å¯ä»¥å¯¹å¤é¨è¡¨è¿è¡æ¥è¯¢ï¼å¶ä½ä¸é¢å¾ä»¥ååæç­ã
 * å½ä¸¤ä¸ªè¡¨æ ¼ä¹é´æ¯ä¸å¯¹ä¸æå¤å¯¹ä¸çå³ç³»æ¶ï¼å¯ä»¥ä½¿ç¨ join è¿æ¥ãå½ä¸ºå¤å¯¹ä¸çå³ç³»æ¶ï¼åè®¸æå®å¤ä¸ªå­æ®µä¹é´çå³èã
 *ï¼æ³¨æï¼SuperMap.JoinItem ç®åæ¯æå·¦è¿æ¥ååè¿æ¥ï¼ä¸æ¯æå¨è¿æ¥åå³è¿æ¥ï¼UDB å¼æä¸æ¯æåè¿æ¥ãå¹¶ä¸ç¨äºå»ºç«è¿æ¥çä¸¤ä¸ªè¡¨å¿é¡»å¨åä¸ä¸ªæ°æ®æºä¸ã)
 * @param {Object} options - åæ°ã 
 * @param {string} options.foreignTableName - å¤é¨è¡¨çåç§°ã 
 * @param {string} options.joinFilter - ç¢éæ°æ®éä¸å¤é¨è¡¨ä¹é´çè¿æ¥è¡¨è¾¾å¼ï¼å³è®¾å®ä¸¤ä¸ªè¡¨ä¹é´å³èçå­æ®µã 
 * @param {SuperMap.JoinType} options.joinType - ä¸¤ä¸ªè¡¨ä¹é´è¿æ¥ç±»åã 
 * @example ä¸é¢ä»¥ SQL æ¥è¯¢è¯´æ joinItem çä½¿ç¨æ¹æ³ï¼
 *(start code)
 *   function queryBySQL() {
     *       // è®¾ç½®ä¸å¤é¨è¡¨çè¿æ¥ä¿¡æ¯
     *       var joinItem = new SuperMap.JoinItem({
     *           foreignTableName: "foreignTable",
     *           joinFilter: "foreignTable.CONTINENT = Countries.CONTINENT",
     *           joinType: "LEFTJOIN"
     *       })
     *       var queryParam, queryBySQLParams, queryBySQLService;
     *       // è®¾ç½®æ¥è¯¢åæ°ï¼å¨æ¥è¯¢åæ°ä¸­æ·»å joinItemå³èæ¡ä»¶ä¿¡æ¯
     *       queryParam = new SuperMap.FilterParameter({
     *            name: "Countries@World",
     *            joinItems: [joinItem]
     *         }),
     *       queryBySQLParams = new SuperMap.QueryBySQLParameters({
     *             queryParams: [queryParam]
     *         }),
     *       queryBySQLService = new SuperMap.QueryBySQLService(url, {
     *             eventListeners: { "processCompleted": processCompleted, "processFailed": processFailed}
     *         });
     *       queryBySQLService.processAsync(queryBySQLParams);
     *  }
 *  function processCompleted(queryEventArgs) {//todo}
 *  function processFailed(e) {//todo}
 * (end)
 */

var JoinItem = /*#__PURE__*/function () {
  function JoinItem(options) {
    JoinItem_classCallCheck(this, JoinItem);

    /**
     * @member {string} SuperMap.JoinItem.prototype.foreignTableName
     * @description å¤é¨è¡¨çåç§°ã
     * å¦æå¤é¨è¡¨çåç§°æ¯ä»¥ âè¡¨å@æ°æ®æºåâ å½åæ¹å¼ï¼åè¯¥å±æ§åªéèµå¼è¡¨åã
     * ä¾å¦ï¼å¤é¨è¡¨ Name@changchunï¼Name ä¸ºè¡¨åï¼changchun ä¸ºæ°æ®æºåç§°ï¼åè¯¥å±æ§çèµå¼åºä¸ºï¼Nameã
     */
    this.foreignTableName = null;
    /**
     * @member {string} SuperMap.JoinItem.prototype.joinFilter
     * @description ç¢éæ°æ®éä¸å¤é¨è¡¨ä¹é´çè¿æ¥è¡¨è¾¾å¼ï¼å³è®¾å®ä¸¤ä¸ªè¡¨ä¹é´å³èçå­æ®µã
     * ä¾å¦ï¼å°æ¿å±é¢æ°æ®éï¼Buildingï¼ç district å­æ®µä¸æ¿å±æ¥æèççº¯å±æ§æ°æ®éï¼Ownerï¼ç region å­æ®µç¸è¿æ¥ï¼
     * ä¸¤ä¸ªæ°æ®éå¯¹åºçè¡¨åç§°åå«ä¸º Table_Building å Table_Ownerï¼
     * åè¿æ¥è¡¨è¾¾å¼ä¸º Table_Building.district = Table_Owner.regionã
     * å½æå¤ä¸ªå­æ®µç¸è¿æ¥æ¶ï¼ç¨ AND å°å¤ä¸ªè¡¨è¾¾å¼ç¸è¿ã
     */

    this.joinFilter = null;
    /**
     * @member {SuperMap.JoinType} SuperMap.JoinItem.prototype.joinType
     * @description ä¸¤ä¸ªè¡¨ä¹é´è¿æ¥ç±»åã
     * è¿æ¥ç±»åå³å®äºå¯¹ä¸¤ä¸ªè¡¨è¿è¡è¿æ¥æ¥è¯¢åè¿åçè®°å½çæåµã
     */

    this.joinType = null;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.JoinItem";
  }
  /**
   * @function SuperMap.JoinItem.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  JoinItem_createClass(JoinItem, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.foreignTableName = null;
      me.joinFilter = null;
      me.joinType = null;
    }
    /**
     * @function SuperMap.JoinItem.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      var dataObj = {};
      dataObj = Util.copyAttributes(dataObj, this); //joinFilteråºæ¬æ¯ä¸ªçº¯å±æ§å¯¹è±¡ï¼è¿éä¸ååè½¬æ¢

      return dataObj;
    }
  }]);

  return JoinItem;
}();
SuperMap.JoinItem = JoinItem;
// CONCATENATED MODULE: ./src/common/iServer/DatasourceConnectionInfo.js
function DatasourceConnectionInfo_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function DatasourceConnectionInfo_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function DatasourceConnectionInfo_createClass(Constructor, protoProps, staticProps) { if (protoProps) DatasourceConnectionInfo_defineProperties(Constructor.prototype, protoProps); if (staticProps) DatasourceConnectionInfo_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


 // eslint-disable-line no-unused-vars

/**
 * @class SuperMap.DatasourceConnectionInfo
 * @category  iServer Data
 * @classdesc æ°æ®æºè¿æ¥ä¿¡æ¯ç±»ãè¯¥ç±»åæ¬äºè¿è¡æ°æ®æºè¿æ¥çææä¿¡æ¯ï¼å¦æè¦è¿æ¥çæå¡å¨åç§°ãæ°æ®åºåç§°ãç¨æ·åä»¥åå¯ç ç­ã
 *            å½ä¿å­ä¸ºå·¥ä½ç©ºé´æ¶ï¼ å·¥ä½ç©ºé´ä¸­çæ°æ®æºçè¿æ¥ä¿¡æ¯é½å°å­å¨å°å·¥ä½ç©ºé´æä»¶ä¸­ãå¯¹äºä¸åç±»åçæ°æ®æºï¼å¶è¿æ¥ä¿¡æ¯ææåºå«ã
 *            æä»¥å¨ä½¿ ç¨è¯¥ç±»æåå«çæåæ¶ï¼è¯·æ³¨æè¯¥æåæéç¨çæ°æ®æºç±»åãå¯¹äºä»æ°æ®æºå¯¹è±¡ä¸­è¿åçæ°æ®è¿æ¥ä¿¡æ¯å¯¹è±¡ï¼åªæ connect æ¹æ³å¯ä»¥è¢«ä¿®æ¹ï¼
 *            å¶ä»åå®¹æ¯ä¸å¯ä»¥è¢«ä¿®æ¹çãå¯¹äºç¨æ·åå»ºçæ°æ®æºè¿æ¥ä¿¡æ¯å¯¹è±¡ï¼å¶åå®¹é½å¯ä»¥ä¿®æ¹ã
 * @category iServer Data
 * @param {Object} options - åæ°ã 
 * @param {string} options.alias - æ°æ®æºå«åã 
 * @param {string} options.dataBase - æ°æ®æºè¿æ¥çæ°æ®åºåã 
 * @param {boolean} [options.connect] - æ°æ®æºæ¯å¦èªå¨è¿æ¥æ°æ®ã 
 * @param {string} [options.driver] - ä½¿ç¨ ODBC(Open Database Connectivityï¼å¼æ¾æ°æ®åºäºè¿)çæ°æ®åºçé©±å¨ç¨åºåã 
 * @param {SuperMap.EngineType} [options.engineType] - æ°æ®æºè¿æ¥çå¼æç±»åã 
 * @param {boolean} [options.exclusive] - æ¯å¦ä»¥ç¬å æ¹å¼æå¼æ°æ®æºã 
 * @param {boolean} [options.OpenLinkTable] - æ¯å¦ææ°æ®åºä¸­çå¶ä»é SuperMap æ°æ®è¡¨ä½ä¸º LinkTable æå¼ã 
 * @param {string} [options.password] - ç»å½æ°æ®æºè¿æ¥çæ°æ®åºææä»¶çå¯ç ã 
 * @param {boolean} [options.readOnly] - æ¯å¦ä»¥åªè¯»æ¹å¼æå¼æ°æ®æºã 
 * @param {string} [options.server] - æ°æ®åºæå¡å¨åæ SDB æä»¶åã 
 * @param {string} [options.user] - ç»å½æ°æ®åºçç¨æ·åã 
 */

var DatasourceConnectionInfo = /*#__PURE__*/function () {
  function DatasourceConnectionInfo(options) {
    DatasourceConnectionInfo_classCallCheck(this, DatasourceConnectionInfo);

    /**
     * @member {string} SuperMap.DatasourceConnectionInfo.prototype.alias
     * @description æ°æ®æºå«åã
     */
    this.alias = null;
    /**
     * @member {boolean} [SuperMap.DatasourceConnectionInfo.prototype.connect]
     * @description æ°æ®æºæ¯å¦èªå¨è¿æ¥æ°æ®ã
     */

    this.connect = null;
    /**
     * @member {string} SuperMap.DatasourceConnectionInfo.prototype.dataBase
     * @description æ°æ®æºè¿æ¥çæ°æ®åºåã
     */

    this.dataBase = null;
    /**
     * @member {string} [SuperMap.DatasourceConnectionInfo.prototype.driver]
     * @description ä½¿ç¨ ODBC(Open Database Connectivityï¼å¼æ¾æ°æ®åºäºè¿) çæ°æ®åºçé©±å¨ç¨åºåã
     * å¶ä¸­ï¼å¯¹äº SQL Server æ°æ®åºä¸ iServer åå¸ç WMTS æå¡ï¼æ­¤ä¸ºå¿è®¾åæ°ã
     * å¯¹äº SQL Server æ°æ®åºï¼å®ä½¿ç¨ ODBC è¿æ¥ï¼æè®¾ç½®çé©±å¨ç¨åºåä¸º "SQL Server" æ "SQL Native Client"ï¼
     * å¯¹äº iServer åå¸ç WMTS æå¡ï¼è®¾ç½®çé©±å¨åç§°ä¸º "WMTS"ã
     */

    this.driver = null;
    /**
     * @member {SuperMap.EngineType} [SuperMap.DatasourceConnectionInfo.prototype.engineType]
     * @description æ°æ®æºè¿æ¥çå¼æç±»åã
     */

    this.engineType = null;
    /**
     * @member {boolean} [SuperMap.DatasourceConnectionInfo.prototype.exclusive]
     * @description æ¯å¦ä»¥ç¬å æ¹å¼æå¼æ°æ®æºã
     */

    this.exclusive = null;
    /**
     * @member {boolean} [SuperMap.DatasourceConnectionInfo.prototype.OpenLinkTable]
     * @description æ¯å¦ææ°æ®åºä¸­çå¶ä»é SuperMap æ°æ®è¡¨ä½ä¸º LinkTable æå¼ã
     */

    this.OpenLinkTable = null;
    /**
     * @member {string} [SuperMap.DatasourceConnectionInfo.prototype.password]
     * @description ç»å½æ°æ®æºè¿æ¥çæ°æ®åºææä»¶çå¯ç ã
     */

    this.password = null;
    /**
     * @member {boolean} [SuperMap.DatasourceConnectionInfo.prototype.readOnly]
     * @description æ¯å¦ä»¥åªè¯»æ¹å¼æå¼æ°æ®æºã
     */

    this.readOnly = null;
    /**
     * @member {string} [SuperMap.DatasourceConnectionInfo.prototype.server]
     * @description æ°æ®åºæå¡å¨åãæä»¶åææå¡å°åã
     * 1.å¯¹äº SDB å UDB æä»¶ï¼ä¸ºå¶æä»¶çç»å¯¹è·¯å¾ãæ³¨æï¼å½ç»å¯¹è·¯å¾çé¿åº¦è¶è¿ UTF-8 ç¼ç æ ¼å¼ç 260 å­èé¿åº¦ï¼è¯¥æ°æ®æºæ æ³æå¼ã
     * 2.å¯¹äº Oracle æ°æ®åºï¼å¶æå¡å¨åä¸ºå¶ TNS æå¡åç§°ã
     * 3.å¯¹äº SQL Server æ°æ®åºï¼å¶æå¡å¨åä¸ºå¶ç³»ç»ç DSN(Database Source Name) åç§°ã
     * 4.å¯¹äº PostgreSQL æ°æ®åºï¼å¶æå¡å¨åä¸º âIP:ç«¯å£å·âï¼é»è®¤çç«¯å£å·æ¯ 5432ã
     * 5.å¯¹äº DB2 æ°æ®åºï¼å·²ç»è¿è¡äºç¼ç®ï¼æä»¥ä¸éè¦è¿è¡æå¡å¨çè®¾ç½®ã
     * 6.å¯¹äº Kingbase æ°æ®åºï¼å¶æå¡å¨åä¸ºå¶ IP å°åã
     * 7.å¯¹äº GoogleMaps æ°æ®æºï¼å¶æå¡å¨å°åï¼é»è®¤è®¾ç½®ä¸º â{@link http://maps.google.com}âï¼ä¸ä¸å¯æ´æ¹ã
     * 8.å¯¹äº SuperMapCould æ°æ®æºï¼ä¸ºå¶æå¡å°åã
     * 9.å¯¹äº MAPWORLD æ°æ®æºï¼ä¸ºå¶æå¡å°åï¼é»è®¤è®¾ç½®ä¸º â{@link http://www.tianditu.cn}âï¼ä¸ä¸å¯æ´æ¹ã
     * 10.å¯¹äº OGC å REST æ°æ®æºï¼ä¸ºå¶æå¡å°åã
     */

    this.server = null;
    /**
     * @member {string} SuperMap.DatasourceConnectionInfo.prototype.user
     * @description ç»å½æ°æ®åºçç¨æ·åã
     */

    this.user = null;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.DatasourceConnectionInfo";
  }
  /**
   * @function SuperMap.DatasourceConnectionInfo.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  DatasourceConnectionInfo_createClass(DatasourceConnectionInfo, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.alias = null;
      me.connect = null;
      me.dataBase = null;
      me.driver = null;
      me.engineType = null;
      me.exclusive = null;
      me.OpenLinkTable = null;
      me.password = null;
      me.readOnly = null;
      me.server = null;
      me.user = null;
    }
  }]);

  return DatasourceConnectionInfo;
}();
SuperMap.DatasourceConnectionInfo = DatasourceConnectionInfo;
// CONCATENATED MODULE: ./src/common/iServer/LinkItem.js
function LinkItem_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function LinkItem_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function LinkItem_createClass(Constructor, protoProps, staticProps) { if (protoProps) LinkItem_defineProperties(Constructor.prototype, protoProps); if (staticProps) LinkItem_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.LinkItem
 * @constructs SuperMap.LinkItem
 * @category iServer
 * @classdesc å³èä¿¡æ¯ç±»ã
 * @description è¯¥ç±»ç¨äºç¢éæ°æ®éä¸å¤é¨è¡¨çå³èã å¤é¨è¡¨æ¯å¦ä¸ä¸ªæ°æ®éï¼å¶ä¸­çº¯å±æ§æ°æ®éä¸­æ²¡æç©ºé´å ä½ä¿¡æ¯ï¼ä¸­ç DBMS è¡¨,
 *              ç¢éæ°æ®éä¸å¤é¨è¡¨å¯ä»¥å±äºä¸åçæ°æ®æºï¼ä½æ°æ®æºç±»åç®ååªæ¯æ SQL Server å Oracle ç±»åãä½¿ç¨ LinkItem æ¶ï¼
 *              ç©ºé´æ°æ®åå±æ§æ°æ®å¿é¡»æ»¡è¶³å³èæ¡ä»¶ï¼å³ä¸»ç©ºé´æ°æ®éä¸å¤é¨å±æ§è¡¨ä¹é´å­å¨å³èå­æ®µã{@link SuperMap.LinkItem}
 *              åªæ¯æå·¦è¿æ¥ï¼UDBãPostgreSQL å DB2 æ°æ®æºä¸æ¯æ {@link SuperMap.LinkItem}ï¼å¦å¤ï¼ç¨äºå»ºç«å³èå³ç³»çä¸¤ä¸ªè¡¨å¯ä»¥ä¸å¨åä¸ä¸ªæ°æ®æºä¸ãæ³¨æï¼<br>
 * 1. ä½¿ç¨ {@link SuperMap.LinkItem} ççº¦ææ¡ä»¶ä¸ºï¼ç©ºé´æ°æ®åå±æ§æ°æ®å¿é¡»æå³èæ¡ä»¶ï¼å³ä¸»ç©ºé´æ°æ®éä¸å¤é¨å±æ§è¡¨ä¹é´å­å¨å³èå­æ®µï¼<br>
 * 2. ä½¿ç¨å¤å³èè¡¨å¶ä½ä¸é¢å¾æ¶ï¼æå³èçå­æ®µå¿é¡»è®¾ç½®è¡¨åï¼ä¾å¦ï¼å¦ææå³èçå­æ®µä¸º BaseMap_R æ°æ®éç SmIDï¼å°±è¦åæ BaseMap_R.SMIDã
 * @param {Object} options - åæ°ã
 * @param {SuperMap.DatasourceConnectionInfo} options.datasourceConnectionInfo - å³èçå¤é¨æ°æ®æºä¿¡æ¯ã
 * @param {Array.<string>} options.foreignKeys - ä¸»ç©ºé´æ°æ®éçå¤é®ã
 * @param {string} options.foreignTable - å³èçå¤é¨å±æ§è¡¨çåç§°ã
 * @param {Array.<string>} options.linkFields - æ¬²ä¿ççå¤é¨å±æ§è¡¨çå­æ®µã
 * @param {string} options.linkFilter - ä¸å¤é¨å±æ§è¡¨çè¿æ¥æ¡ä»¶ã
 * @param {string} options.name - æ­¤å³èä¿¡æ¯å¯¹è±¡çåç§°ã
 * @param {Array.<string>} options.primaryKeys - éè¦å³èçå¤é¨å±æ§è¡¨çä¸»é®ã
 * @example ä¸é¢ä»¥ SQL æ¥è¯¢è¯´æ linkitem çä½¿ç¨æ¹æ³ï¼
 *  function queryBySQL() {
 *      // è®¾ç½®å³èçå¤é¨æ°æ®åºä¿¡æ¯,aliasè¡¨ç¤ºæ°æ®åºå«å
 *      var dc = new SuperMap.DatasourceConnectionInfo({
 *          dataBase: "RelQuery",
 *          server: "{ip}:{port}",
 *          user: "sa",
 *          password: "map",
 *          driver: "SQL Server",
 *          connect: true,
 *          OpenLinkTable: false,
 *          alias: "RelQuery",
 *          engineType: EngineType.SQLPLUS,
 *          readOnly: false,
 *          exclusive: false
 *      });
 *     // è®¾ç½®å³èä¿¡æ¯
 *      var linkItem = new SuperMap.LinkItem({
 *          datasourceConnectionInfo: dc,
 *          foreignKeys: ["name"],
 *          foreignTable: "Pop_2011",
 *          linkFields: ["SmID as Pid","pop"],
 *          name: "link",
 *          primatryKeys: ["name"],
 *      });
 *      // è®¾ç½®æ¥è¯¢åæ°ï¼å¨æ¥è¯¢åæ°ä¸­æ·»å linkItemå³èæ¡ä»¶ä¿¡æ¯
 *      var queryParam, queryBySQLParams, queryBySQLService;
 *      queryParam = new SuperMap.FilterParameter({
 *          name: "Province@RelQuery",
 *          fields: ["SmID","name"],
 *          attributeFilter: "SmID<7",
 *          linkItems: [linkItem]
 *       }),
 *      queryBySQLParams = new SuperMap.QueryBySQLParameters({
 *           queryParams: [queryParam]
 *              }),
 *      queryBySQLService = new SuperMap.QueryBySQLService(url, {
     *          eventListeners: {
     *              "processCompleted": processCompleted,
     *              "processFailed": processFailed
     *              }
     *      });
     *      queryBySQLService.processAsync(queryBySQLParams);
     *  }
 *  function processCompleted(queryEventArgs) {//todo}
 *  function processFailed(e) {//todo}
 *
 */

var LinkItem = /*#__PURE__*/function () {
  function LinkItem(options) {
    LinkItem_classCallCheck(this, LinkItem);

    /**
     * @member {SuperMap.DatasourceConnectionInfo} SuperMap.LinkItem.prototype.datasourceConnectionInfo
     * @description å³èçå¤é¨æ°æ®æºä¿¡æ¯ã
     */
    this.datasourceConnectionInfo = null;
    /**
     * @member {Array.<string>} SuperMap.LinkItem.prototype.foreignKeys
     * @description ä¸»ç©ºé´æ°æ®éçå¤é®ã
     */

    this.foreignKeys = null;
    /**
     * @member {string} SuperMap.LinkItem.prototype.foreignTable
     * @description å³èçå¤é¨å±æ§è¡¨çåç§°ï¼ç®åä»æ¯æ Supermap ç®¡ççè¡¨ï¼å³å¦ä¸ä¸ªç¢éæ°æ®éæå¯¹åºç DBMS è¡¨ã
     */

    this.foreignTable = null;
    /**
     * @member {Array.<string>} SuperMap.LinkItem.prototype.linkFields
     * @description æ¬²ä¿ççå¤é¨å±æ§è¡¨çå­æ®µãå¦æä¸è®¾ç½®å­æ®µæèè®¾ç½®çå­æ®µå¨å¤é¨å±æ§è¡¨ä¸­ä¸å­å¨çè¯åä¸è¿
     * åä»»ä½å¤é¨å±æ§è¡¨çå±æ§ä¿¡æ¯ãå¦ææ¬²ä¿ççå¤é¨è¡¨å­æ®µä¸ä¸»è¡¨å­æ®µå­å¨ååï¼åè¿éè¦æå®ä¸ä¸ªä¸å­å¨å­æ®µåä½ä¸ºå¤é¨è¡¨çå­æ®µå«åã
     */

    this.linkFields = null;
    /**
     * @member {string} SuperMap.LinkItem.prototype.linkFilter
     * @description ä¸å¤é¨å±æ§è¡¨çè¿æ¥æ¡ä»¶ã
     */

    this.linkFilter = null;
    /**
     * @member {string} SuperMap.LinkItem.prototype.name
     * @description æ­¤å³èä¿¡æ¯å¯¹è±¡çåç§°ã
     */

    this.name = null;
    /**
     * @member {Array.<string>} SuperMap.LinkItem.prototype.primaryKeys
     * @description éè¦å³èçå¤é¨å±æ§è¡¨çä¸»é®ã
     */

    this.primaryKeys = null;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.LinkItem";
  }
  /**
   * @function SuperMap.LinkItem.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  LinkItem_createClass(LinkItem, [{
    key: "destroy",
    value: function destroy() {
      var me = this;

      if (me.datasourceConnectionInfo instanceof DatasourceConnectionInfo) {
        me.datasourceConnectionInfo.destroy();
        me.datasourceConnectionInfo = null;
      }

      me.foreignKeys = null;
      me.foreignTable = null;
      me.linkFields = null;
      me.linkFilter = null;
      me.name = null;
      me.primaryKeys = null;
    }
  }]);

  return LinkItem;
}();
SuperMap.LinkItem = LinkItem;
// CONCATENATED MODULE: ./src/common/iServer/FilterParameter.js
function FilterParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FilterParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FilterParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) FilterParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) FilterParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.FilterParameter
 * @category iServer
 * @classdesc æ¥è¯¢è¿æ»¤æ¡ä»¶åæ°ç±»ãè¯¥ç±»ç¨äºè®¾ç½®æ¥è¯¢æ°æ®éçæ¥è¯¢è¿æ»¤åæ°ã
 * @param {Object} options - åæ°ã 
 * @param {string} options.attributeFilter - å±æ§è¿æ»¤æ¡ä»¶ã 
 * @param {string} options.name - æ¥è¯¢æ°æ®éåç§°æèå¾å±åç§°ã 
 * @param {Array.<SuperMap.JoinItem>} [options.joinItems] - ä¸å¤é¨è¡¨çè¿æ¥ä¿¡æ¯ SuperMap.JoinItem æ°ç»ã 
 * @param {Array.<SuperMap.LinkItem>} [options.linkItems] - ä¸å¤é¨è¡¨çå³èä¿¡æ¯ SuperMap.LinkItem æ°ç»ã 
 * @param {Array.<string>} [options.ids] - æ¥è¯¢ id æ°ç»ï¼å³å±æ§è¡¨ä¸­ç SmID å¼ã 
 * @param {string} [options.orderBy] - æ¥è¯¢æåºçå­æ®µï¼orderBy çå­æ®µé¡»ä¸ºæ°å¼åçã 
 * @param {string} [options.groupBy] - æ¥è¯¢åç»æ¡ä»¶çå­æ®µã 
 * @param {Array.<string>} [options.fields] - æ¥è¯¢å­æ®µæ°ç»ã 
 */

var FilterParameter = /*#__PURE__*/function () {
  function FilterParameter(options) {
    FilterParameter_classCallCheck(this, FilterParameter);

    /**
     * @member {string} SuperMap.FilterParameter.prototype.attributeFilter
     * @description å±æ§è¿æ»¤æ¡ä»¶ã
     * ç¸å½äº SQL è¯­å¥ä¸­ç WHERE å­å¥ï¼å¶æ ¼å¼ä¸ºï¼WHERE <æ¡ä»¶è¡¨è¾¾å¼>ï¼
     * attributeFilter å°±æ¯å¶ä¸­çâæ¡ä»¶è¡¨è¾¾å¼âã
     * è¯¥å­æ®µçç¨æ³ä¸º attributeFilter = "è¿æ»¤æ¡ä»¶"ã
     * ä¾å¦ï¼è¦æ¥è¯¢å­æ®µ fieldValue å°äº100çè®°å½ï¼è®¾ç½® attributeFilter = "fieldValue < 100"ï¼
     * è¦æ¥è¯¢å­æ®µ name çå¼ä¸ºâéåºâçè®°å½ï¼è®¾ç½® attributeFilter = "name like '%éåº%'"ï¼ç­ç­ã
     */
    this.attributeFilter = null;
    /**
     * @member {string} SuperMap.FilterParameter.prototype.name
     * @description æ¥è¯¢æ°æ®éåç§°æèå¾å±åç§°ï¼æ ¹æ®å®éçæ¥è¯¢å¯¹è±¡èå®ã
     * ä¸è¬æåµä¸è¯¥å­æ®µä¸ºæ°æ®éåç§°ï¼ä½å¨è¿è¡ä¸å°å¾ç¸å³åè½çæä½æ¶ï¼
     * éè¦è®¾ç½®ä¸ºå¾å±åç§°ï¼å¾å±åç§°æ ¼å¼ï¼æ°æ®éåç§°@æ°æ®æºå«åï¼ã
     * å ä¸ºä¸ä¸ªå°å¾çå¾å±å¯è½æ¯æ¥èªäºä¸åæ°æ®æºçæ°æ®éï¼
     * èä¸åçæ°æ®æºä¸­å¯è½å­å¨ååçæ°æ®éï¼
     * ä½¿ç¨æ°æ®éåç§°ä¸è½å¯ä¸çç¡®å®æ°æ®éï¼
     * æä»¥å¨è¿è¡ä¸å°å¾ç¸å³åè½çæä½æ¶ï¼è¯¥å¼éè¦è®¾ç½®ä¸ºå¾å±åç§°ã
     */

    this.name = null;
    /**
     * @member {Array.<SuperMap.JoinItem>} [SuperMap.FilterParameter.prototype.joinItems]
     * @description ä¸å¤é¨è¡¨çè¿æ¥ä¿¡æ¯ SuperMap.JoinItem æ°ç»ã
     */

    this.joinItems = null;
    /**
     * @member {Array.<SuperMap.LinkItem>} [SuperMap.FilterParameter.prototype.linkItems]
     * @description ä¸å¤é¨è¡¨çå³èä¿¡æ¯ LinkItem æ°ç»ã
     */

    this.linkItems = null;
    /**
     * @member {Array.<string>} [SuperMap.FilterParameter.prototype.ids]
     * @description æ¥è¯¢ id æ°ç»ï¼å³å±æ§è¡¨ä¸­ç SmID å¼ã
     */

    this.ids = null;
    /**
     * @member {string} [SuperMap.FilterParameter.prototype.orderBy]
     * @description æ¥è¯¢æåºçå­æ®µï¼orderByçå­æ®µé¡»ä¸ºæ°å¼åçã
     * ç¸å½äº SQL è¯­å¥ä¸­ç ORDER BY å­å¥ï¼å¶æ ¼å¼ä¸ºï¼ORDER BY <åå>ï¼
     * ååå³å±æ§è¡¨ä¸­æ¯ä¸åçåç§°ï¼ååå¯ç§°ä¸ºå±æ§ï¼å¨ SuperMap ä¸­åç§°ä¸ºå­æ®µã
     * å¯¹åä¸ªå­æ®µæåºæ¶ï¼è¯¥å­æ®µçç¨æ³ä¸º orderBy = "å­æ®µå"ï¼
     * å¯¹å¤ä¸ªå­æ®µæåºæ¶ï¼å­æ®µä¹é´ä»¥è±æéå·è¿è¡åå²ï¼ç¨æ³ä¸º orderBy = "å­æ®µå1, å­æ®µå2"ã
     * ä¾å¦ï¼ç°æä¸ä¸ªå½å®¶æ°æ®éï¼å®æä¸¤ä¸ªå­æ®µåå«ä¸ºâSmAreaâåâpop_1994âï¼
     * åå«è¡¨ç¤ºå½å®¶çé¢ç§¯å1994å¹´çåå½äººå£æ°éã
     * å¦æè¦æç§åå½äººå£æ°éå¯¹è®°å½è¿è¡æåºï¼å orderBy = "pop_1994"ï¼
     * å¦æè¦ä»¥é¢ç§¯åäººå£è¿è¡æåºï¼å orderBy = "SmArea, pop_1994"ã
     */

    this.orderBy = null;
    /**
     * @member {string} [SuperMap.FilterParameter.prototype.groupBy]
     * @description æ¥è¯¢åç»æ¡ä»¶çå­æ®µã
     * ç¸å½äº SQL è¯­å¥ä¸­ç GROUP BY å­å¥ï¼å¶æ ¼å¼ä¸ºï¼GROUP BY <åå>ï¼
     * ååå³å±æ§è¡¨ä¸­æ¯ä¸åçåç§°ï¼ååå¯ç§°ä¸ºå±æ§ï¼å¨ SuperMap ä¸­åç§°ä¸ºå­æ®µã
     * å¯¹åä¸ªå­æ®µåç»æ¶ï¼è¯¥å­æ®µçç¨æ³ä¸º groupBy = "å­æ®µå"ï¼
     * å¯¹å¤ä¸ªå­æ®µåç»æ¶ï¼å­æ®µä¹é´ä»¥è±æéå·è¿è¡åå²ï¼ç¨æ³ä¸º groupBy = "å­æ®µå1, å­æ®µå2"ã
     * ä¾å¦ï¼ç°æä¸ä¸ªå¨çåå¸æ°æ®éï¼è¯¥æ°æ®éæä¸¤ä¸ªå­æ®µåå«ä¸ºâContinentâåâCountryâï¼
     * åå«è¡¨ç¤ºæä¸ªåå¸æå±çæ´²åå½å®¶ã
     * å¦æè¦æç§å½å®¶å¯¹å¨ççåå¸è¿è¡åç»ï¼ å¯ä»¥è®¾ç½® groupBy = "Country"ï¼
     * å¦æä»¥æ´²åå½å®¶å¯¹åå¸è¿è¡åç»ï¼è®¾ç½® groupBy = "Continent, Country"ã
     */

    this.groupBy = null;
    /**
     * @member {Array.<string>} [SuperMap.FilterParameter.prototype.fields]
     * @description æ¥è¯¢å­æ®µæ°ç»ï¼å¦æä¸è®¾ç½®åä½¿ç¨ç³»ç»è¿åçææå­æ®µã
     */

    this.fields = null;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.FilterParameter";
  }
  /**
   * @function SuperMap.FilterParameter.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  FilterParameter_createClass(FilterParameter, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.attributeFilter = null;
      me.name = null;

      if (me.joinItems) {
        for (var i = 0, joinItems = me.joinItems, len = joinItems.length; i < len; i++) {
          joinItems[i].destroy();
        }

        me.joinItems = null;
      }

      if (me.linkItems) {
        for (var _i = 0, linkItems = me.linkItems, _len = linkItems.length; _i < _len; _i++) {
          linkItems[_i].destroy();
        }

        me.linkItems = null;
      }

      me.ids = null;
      me.orderBy = null;
      me.groupBy = null;
      me.fields = null;
    }
  }]);

  return FilterParameter;
}();
SuperMap.FilterParameter = FilterParameter;
// CONCATENATED MODULE: ./src/common/iServer/DatasetBufferAnalystParameters.js
function DatasetBufferAnalystParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { DatasetBufferAnalystParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { DatasetBufferAnalystParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return DatasetBufferAnalystParameters_typeof(obj); }

function DatasetBufferAnalystParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function DatasetBufferAnalystParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function DatasetBufferAnalystParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) DatasetBufferAnalystParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) DatasetBufferAnalystParameters_defineProperties(Constructor, staticProps); return Constructor; }

function DatasetBufferAnalystParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { DatasetBufferAnalystParameters_get = Reflect.get; } else { DatasetBufferAnalystParameters_get = function _get(target, property, receiver) { var base = DatasetBufferAnalystParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return DatasetBufferAnalystParameters_get(target, property, receiver || target); }

function DatasetBufferAnalystParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = DatasetBufferAnalystParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function DatasetBufferAnalystParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) DatasetBufferAnalystParameters_setPrototypeOf(subClass, superClass); }

function DatasetBufferAnalystParameters_setPrototypeOf(o, p) { DatasetBufferAnalystParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return DatasetBufferAnalystParameters_setPrototypeOf(o, p); }

function DatasetBufferAnalystParameters_createSuper(Derived) { var hasNativeReflectConstruct = DatasetBufferAnalystParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = DatasetBufferAnalystParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = DatasetBufferAnalystParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return DatasetBufferAnalystParameters_possibleConstructorReturn(this, result); }; }

function DatasetBufferAnalystParameters_possibleConstructorReturn(self, call) { if (call && (DatasetBufferAnalystParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return DatasetBufferAnalystParameters_assertThisInitialized(self); }

function DatasetBufferAnalystParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function DatasetBufferAnalystParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function DatasetBufferAnalystParameters_getPrototypeOf(o) { DatasetBufferAnalystParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return DatasetBufferAnalystParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.DatasetBufferAnalystParameters
 * @category iServer SpatialAnalyst BufferAnalyst
 * @classdesc æ°æ®éç¼å²åºåæåæ°ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {string} options.dataset - è¦ç¨æ¥åç¼å²åºåæçæ°æ®æºä¸­æ°æ®éçåç§°ãè¯¥åç§°ç¨å½¢å¦âæ°æ®éåç§°@æ°æ®æºå«åâå½¢å¼æ¥è¡¨ç¤ºã 
 * @param {SuperMap.FilterParameter} [options.filterQueryParameter] - è®¾ç½®æ°æ®éä¸­å ä½å¯¹è±¡çè¿æ»¤æ¡ä»¶ãåªææ»¡è¶³æ­¤æ¡ä»¶çå ä½å¯¹è±¡æåä¸ç¼å²åºåæã 
 * @param {SuperMap.DataReturnOption} [options.resultSetting] - ç»æè¿åè®¾ç½®ç±»ã 
 * @param {boolean} [options.isAttributeRetained=true] - æ¯å¦ä¿çè¿è¡ç¼å²åºåæçå¯¹è±¡çå­æ®µå±æ§ãå½ isUnion å­æ®µä¸º false æ¶è¯¥å­æ®µææã 
 * @param {boolean} [options.isUnion=false] - æ¯å¦å°ç¼å²åºä¸æºè®°å½éä¸­çå¯¹è±¡åå¹¶åè¿åãå¯¹äºé¢å¯¹è±¡èè¨ï¼è¦æ±æºæ°æ®éä¸­çé¢å¯¹è±¡ä¸ç¸äº¤ã 
 * @param {SuperMap.BufferSetting} [options.bufferSetting] - è®¾ç½®ç¼å²åºéç¨åæ°ã 
 *
 * @extends {SuperMap.BufferAnalystParameters}
 */

var DatasetBufferAnalystParameters = /*#__PURE__*/function (_BufferAnalystParamet) {
  DatasetBufferAnalystParameters_inherits(DatasetBufferAnalystParameters, _BufferAnalystParamet);

  var _super = DatasetBufferAnalystParameters_createSuper(DatasetBufferAnalystParameters);

  function DatasetBufferAnalystParameters(options) {
    var _this;

    DatasetBufferAnalystParameters_classCallCheck(this, DatasetBufferAnalystParameters);

    _this = _super.call(this, options);
    /**
     * @member {string} SuperMap.DatasetBufferAnalystParameters.prototype.dataset
     * @description è¦ç¨æ¥åç¼å²åºåæçæ°æ®æºä¸­æ°æ®éçåç§°ãè¯¥åç§°ç¨å½¢å¦âæ°æ®éåç§°@æ°æ®æºå«åâå½¢å¼æ¥è¡¨ç¤ºã
     */

    _this.dataset = null;
    /**
     *  @member {SuperMap.FilterParameter} [SuperMap.DatasetBufferAnalystParameters.prototype.filterQueryParameter]
     *  @description è®¾ç½®æ°æ®éä¸­å ä½å¯¹è±¡çè¿æ»¤æ¡ä»¶ãåªææ»¡è¶³æ­¤æ¡ä»¶çå ä½å¯¹è±¡æåä¸ç¼å²åºåæã
     */

    _this.filterQueryParameter = new FilterParameter();
    /**
     * @member {SuperMap.DataReturnOption} [SuperMap.DatasetBufferAnalystParameters.prototype.resultSetting]
     * @description ç»æè¿åè®¾ç½®ç±»ã
     */

    _this.resultSetting = new DataReturnOption();
    /**
     * @member {boolean} [SuperMap.DatasetBufferAnalystParameters.prototype.isAttributeRetained=true]
     * @description æ¯å¦ä¿çè¿è¡ç¼å²åºåæçå¯¹è±¡çå­æ®µå±æ§ãå½ isUnion å­æ®µä¸º false æ¶è¯¥å­æ®µææã
     */

    _this.isAttributeRetained = true;
    /**
     * @member {boolean} [SuperMap.DatasetBufferAnalystParameters.prototype.isUnion=false]
     * @description æ¯å¦å°ç¼å²åºä¸æºè®°å½éä¸­çå¯¹è±¡åå¹¶åè¿åãå¯¹äºé¢å¯¹è±¡èè¨ï¼è¦æ±æºæ°æ®éä¸­çé¢å¯¹è±¡ä¸ç¸äº¤ã
     */

    _this.isUnion = false;
    Util.extend(DatasetBufferAnalystParameters_assertThisInitialized(_this), options);
    _this.CLASS_NAME = "SuperMap.DatasetBufferAnalystParameters";
    return _this;
  }
  /**
   * @function SuperMap.DatasetBufferAnalystParameters.prototype.destroy
   * @override
   */


  DatasetBufferAnalystParameters_createClass(DatasetBufferAnalystParameters, [{
    key: "destroy",
    value: function destroy() {
      DatasetBufferAnalystParameters_get(DatasetBufferAnalystParameters_getPrototypeOf(DatasetBufferAnalystParameters.prototype), "destroy", this).call(this);

      var me = this;
      me.dataset = null;

      if (me.filterQueryParameter) {
        me.filterQueryParameter.destroy();
        me.filterQueryParameter = null;
      }

      if (me.resultSetting) {
        me.resultSetting.destroy();
        me.resultSetting = null;
      }

      me.isAttributeRetained = null;
      me.isUnion = null;
    }
    /**
     * @function SuperMap.DatasetBufferAnalystParameters.toObject
     * @param {SuperMap.DatasetBufferAnalystParameters} datasetBufferAnalystParameters - æ°æ®éç¼å²åºåæåæ°ç±»ã
     * @param {SuperMap.DatasetBufferAnalystParameters} tempObj - æ°æ®éç¼å²åºåæåæ°å¯¹è±¡ã
     * @description å°æ°æ®éç¼å²åºåæåæ°å¯¹è±¡è½¬æ¢ä¸º JSON å¯¹è±¡ã
     * @returns {Object} JSON å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(datasetBufferAnalystParameters, tempObj) {
      for (var name in datasetBufferAnalystParameters) {
        if (name === "bufferSetting") {
          datasetBufferAnalystParameters.bufferSetting.radiusUnit = datasetBufferAnalystParameters.bufferSetting.radiusUnit.toUpperCase();
          tempObj.bufferAnalystParameter = datasetBufferAnalystParameters.bufferSetting;
        } else if (name === "resultSetting") {
          tempObj.dataReturnOption = datasetBufferAnalystParameters.resultSetting;
        } else if (name === "dataset") {
          continue;
        } else {
          tempObj[name] = datasetBufferAnalystParameters[name];
        }
      }
    }
  }]);

  return DatasetBufferAnalystParameters;
}(BufferAnalystParameters);
SuperMap.DatasetBufferAnalystParameters = DatasetBufferAnalystParameters;
// CONCATENATED MODULE: ./src/common/iServer/GeometryBufferAnalystParameters.js
function GeometryBufferAnalystParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GeometryBufferAnalystParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { GeometryBufferAnalystParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GeometryBufferAnalystParameters_typeof(obj); }

function GeometryBufferAnalystParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GeometryBufferAnalystParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GeometryBufferAnalystParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) GeometryBufferAnalystParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) GeometryBufferAnalystParameters_defineProperties(Constructor, staticProps); return Constructor; }

function GeometryBufferAnalystParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GeometryBufferAnalystParameters_get = Reflect.get; } else { GeometryBufferAnalystParameters_get = function _get(target, property, receiver) { var base = GeometryBufferAnalystParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GeometryBufferAnalystParameters_get(target, property, receiver || target); }

function GeometryBufferAnalystParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GeometryBufferAnalystParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function GeometryBufferAnalystParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GeometryBufferAnalystParameters_setPrototypeOf(subClass, superClass); }

function GeometryBufferAnalystParameters_setPrototypeOf(o, p) { GeometryBufferAnalystParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GeometryBufferAnalystParameters_setPrototypeOf(o, p); }

function GeometryBufferAnalystParameters_createSuper(Derived) { var hasNativeReflectConstruct = GeometryBufferAnalystParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GeometryBufferAnalystParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GeometryBufferAnalystParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GeometryBufferAnalystParameters_possibleConstructorReturn(this, result); }; }

function GeometryBufferAnalystParameters_possibleConstructorReturn(self, call) { if (call && (GeometryBufferAnalystParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return GeometryBufferAnalystParameters_assertThisInitialized(self); }

function GeometryBufferAnalystParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GeometryBufferAnalystParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GeometryBufferAnalystParameters_getPrototypeOf(o) { GeometryBufferAnalystParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GeometryBufferAnalystParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.GeometryBufferAnalystParameters
 * @category  iServer SpatialAnalyst BufferAnalyst
 * @classdesc å ä½å¯¹è±¡ç¼å²åºåæåæ°ç±»
 * å¯¹æå®çæä¸ªå ä½å¯¹è±¡åç¼å²åºåæãéè¿è¯¥ç±»å¯ä»¥æå®è¦åç¼å²åºåæçå ä½å¯¹è±¡ãç¼å²åºåæ°ç­ã
 * @param {Object} options - åæ°ã 
 * @param {Object} options.sourceGeometry - è¦åç¼å²åºåæçå ä½å¯¹è±¡ã
 * @param {number} options.sourceGeometrySRID - ç¼å²åºå ä½å¯¹è±¡æå½±åæ åæ°, å¦ 4326ï¼3857ã
 * @param {SuperMap.BufferSetting} [options.bufferSetting] - è®¾ç½®ç¼å²åºéç¨åæ°ã
 * @extends {SuperMap.BufferAnalystParameters}
 */

var GeometryBufferAnalystParameters = /*#__PURE__*/function (_BufferAnalystParamet) {
  GeometryBufferAnalystParameters_inherits(GeometryBufferAnalystParameters, _BufferAnalystParamet);

  var _super = GeometryBufferAnalystParameters_createSuper(GeometryBufferAnalystParameters);

  function GeometryBufferAnalystParameters(options) {
    var _this;

    GeometryBufferAnalystParameters_classCallCheck(this, GeometryBufferAnalystParameters);

    _this = _super.call(this, options);
    /**
     * @member {Object} SuperMap.GeometryBufferAnalystParameters.prototype.sourceGeometry
     * @description è¦åç¼å²åºåæçå ä½å¯¹è±¡ã<br>
     * ç¹ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.Point}|{@link L.Marker}|{@link L.CircleMarker}|{@link L.Circle}|{@link L.GeoJSON}|{@link ol.geom.Point}|{@link ol.format.GeoJSON}ã</br>
     * çº¿ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.LineString}|{@link SuperMap.Geometry.LinearRing}|{@link L.Polyline}|{@link L.GeoJSON}|{@link ol.geom.LineString}|{@link ol.format.GeoJSON}ã</br>
     * é¢ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.Polygon}|{@link L.Polygon}|{@link L.GeoJSON}|{@link ol.geom.Polygon}|{@link ol.format.GeoJSON}ã 
     */

    _this.sourceGeometry = null;
    /**
     * @member {number} SuperMap.GeometryBufferAnalystParameters.prototype.sourceGeometrySRID
     * @description ç¼å²åºå ä½å¯¹è±¡æå½±åæ åæ°, å¦ 4326ï¼3857ã
     */

    _this.sourceGeometrySRID = null;

    if (options) {
      Util.extend(GeometryBufferAnalystParameters_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = " SuperMap.GeometryBufferAnalystParameters";
    return _this;
  }
  /**
   * @function SuperMap.GeometryBufferAnalystParameters.prototype.destroy
   * @override
   */


  GeometryBufferAnalystParameters_createClass(GeometryBufferAnalystParameters, [{
    key: "destroy",
    value: function destroy() {
      GeometryBufferAnalystParameters_get(GeometryBufferAnalystParameters_getPrototypeOf(GeometryBufferAnalystParameters.prototype), "destroy", this).call(this);

      var me = this;

      if (me.sourceGeometry) {
        me.sourceGeometry.destroy();
        me.sourceGeometry = null;
      }
    }
    /**
     * @function SuperMap.GeometryBufferAnalystParameters.toObject
     * @param {SuperMap.GeometryBufferAnalystParameters} geometryBufferAnalystParameters - å ä½å¯¹è±¡ç¼å²åºåæåæ°ç±»ã
     * @param {SuperMap.GeometryBufferAnalystParameters} tempObj - å ä½å¯¹è±¡ç¼å²åºåæåæ°å¯¹è±¡ã
     * @description å°å ä½å¯¹è±¡ç¼å²åºåæåæ°å¯¹è±¡è½¬æ¢ä¸º JSON å¯¹è±¡ã
     * @returns {Object} JSON å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(geometryBufferAnalystParameters, tempObj) {
      for (var name in geometryBufferAnalystParameters) {
        if (name === "bufferSetting") {
          var tempBufferSetting = {};

          for (var key in geometryBufferAnalystParameters.bufferSetting) {
            tempBufferSetting[key] = geometryBufferAnalystParameters.bufferSetting[key];
          }

          tempObj.analystParameter = tempBufferSetting;
        } else if (name === "sourceGeometry") {
          tempObj.sourceGeometry = ServerGeometry.fromGeometry(geometryBufferAnalystParameters.sourceGeometry);
        } else {
          tempObj[name] = geometryBufferAnalystParameters[name];
        }
      }
    }
  }]);

  return GeometryBufferAnalystParameters;
}(BufferAnalystParameters);
SuperMap.GeometryBufferAnalystParameters = GeometryBufferAnalystParameters;
// CONCATENATED MODULE: ./src/common/iServer/BufferAnalystService.js
function BufferAnalystService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { BufferAnalystService_typeof = function _typeof(obj) { return typeof obj; }; } else { BufferAnalystService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return BufferAnalystService_typeof(obj); }

function BufferAnalystService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function BufferAnalystService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function BufferAnalystService_createClass(Constructor, protoProps, staticProps) { if (protoProps) BufferAnalystService_defineProperties(Constructor.prototype, protoProps); if (staticProps) BufferAnalystService_defineProperties(Constructor, staticProps); return Constructor; }

function BufferAnalystService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { BufferAnalystService_get = Reflect.get; } else { BufferAnalystService_get = function _get(target, property, receiver) { var base = BufferAnalystService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return BufferAnalystService_get(target, property, receiver || target); }

function BufferAnalystService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = BufferAnalystService_getPrototypeOf(object); if (object === null) break; } return object; }

function BufferAnalystService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) BufferAnalystService_setPrototypeOf(subClass, superClass); }

function BufferAnalystService_setPrototypeOf(o, p) { BufferAnalystService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return BufferAnalystService_setPrototypeOf(o, p); }

function BufferAnalystService_createSuper(Derived) { var hasNativeReflectConstruct = BufferAnalystService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = BufferAnalystService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = BufferAnalystService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return BufferAnalystService_possibleConstructorReturn(this, result); }; }

function BufferAnalystService_possibleConstructorReturn(self, call) { if (call && (BufferAnalystService_typeof(call) === "object" || typeof call === "function")) { return call; } return BufferAnalystService_assertThisInitialized(self); }

function BufferAnalystService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function BufferAnalystService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function BufferAnalystService_getPrototypeOf(o) { BufferAnalystService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return BufferAnalystService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.BufferAnalystService
 * @category iServer SpatialAnalyst BufferAnalyst
 * @classdesc ç¼å²åºåææå¡ç±»ã
 * è¯¥ç±»è´è´£å°å®¢æ·è®¾ç½®çç¼å²åºåæåæ°ä¼ éç»æå¡ç«¯ï¼å¹¶æ¥æ¶æå¡ç«¯è¿åçç¼å²åºåæç»ææ°æ®ã
 * ç¼å²åºåæç»æéè¿è¯¥ç±»æ¯æçäºä»¶ççå¬å½æ°åæ°è·åã
 * @param {string} url - æå¡çè®¿é®å°åãå¦ï¼http://localhost:8090/iserver/services/spatialanalyst-changchun/restjsr/spatialanalystã
 * @param {Object} options - åæ°ã</br>
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @extends {SuperMap.SpatialAnalystBase}
 * @example ä¾å¦ï¼
 * (start code)
 * var myBufferAnalystService = new SuperMap.BufferAnalystService(url, {
     *     eventListeners: {
     *           "processCompleted": bufferCompleted,
     *           "processFailed": bufferFailed
     *           }
     *    });
 * (end)
 *
 *
 */

var BufferAnalystService = /*#__PURE__*/function (_SpatialAnalystBase) {
  BufferAnalystService_inherits(BufferAnalystService, _SpatialAnalystBase);

  var _super = BufferAnalystService_createSuper(BufferAnalystService);

  function BufferAnalystService(url, options) {
    var _this;

    BufferAnalystService_classCallCheck(this, BufferAnalystService);

    _this = _super.call(this, url, options);
    /**
     * @member {string} SuperMap.BufferAnalystService.prototype.mode
     * @description ç¼å²åºåæç±»å
     */

    _this.mode = null;

    if (options) {
      Util.extend(BufferAnalystService_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.BufferAnalystService";
    return _this;
  }
  /**
   * @function SuperMap.BufferAnalystService.prototype.destroy
   * @override
   */


  BufferAnalystService_createClass(BufferAnalystService, [{
    key: "destroy",
    value: function destroy() {
      BufferAnalystService_get(BufferAnalystService_getPrototypeOf(BufferAnalystService.prototype), "destroy", this).call(this);

      this.mode = null;
    }
    /**
     * @method SuperMap.BufferAnalystService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.BufferAnalystParameters} parameter - ç¼å²åºåæåæ°
     */

  }, {
    key: "processAsync",
    value: function processAsync(parameter) {
      var parameterObject = {};
      var me = this;

      if (parameter instanceof DatasetBufferAnalystParameters) {
        me.mode = 'datasets';
        me.url = Util.urlPathAppend(me.url, 'datasets/' + parameter.dataset + '/buffer');
        DatasetBufferAnalystParameters.toObject(parameter, parameterObject);
      } else if (parameter instanceof GeometryBufferAnalystParameters) {
        me.mode = 'geometry';
        me.url = Util.urlPathAppend(me.url, 'geometry/buffer');
        GeometryBufferAnalystParameters.toObject(parameter, parameterObject);
      }

      var jsonParameters = Util.toJSON(parameterObject);
      me.url = Util.urlAppend(me.url, 'returnContent=true');
      me.request({
        method: "POST",
        data: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return BufferAnalystService;
}(SpatialAnalystBase);
SuperMap.BufferAnalystService = BufferAnalystService;
// CONCATENATED MODULE: ./src/common/iServer/OutputSetting.js
function OutputSetting_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function OutputSetting_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function OutputSetting_createClass(Constructor, protoProps, staticProps) { if (protoProps) OutputSetting_defineProperties(Constructor.prototype, protoProps); if (staticProps) OutputSetting_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.OutputSetting
 * @category  iServer ProcessingService
 * @classdesc åå¸å¼åæè¾åºç±»åè®¾ç½®ç±»ã
 * @param {Object} options - åæ°ã
 * @param {SuperMap.DatasourceConnectionInfo} options.datasourceInfo - æ°æ®æºè¿æ¥ä¿¡æ¯ã
 * @param {string} [options.datasetName='analystResult'] - ç»ææ°æ®éåç§°ã
 * @param {SuperMap.OutputType} [options.type=SuperMap.OutputType.UDB] - è¾åºç±»åã
 * @param {string} [options.outputPath] - åæç»æè¾åºè·¯å¾ã
 */

var OutputSetting = /*#__PURE__*/function () {
  function OutputSetting(options) {
    OutputSetting_classCallCheck(this, OutputSetting);

    /**
     * @member {SuperMap.OutputType} SuperMap.OutputSetting.prototype.type
     * @description åå¸å¼åæçè¾åºç±»åã
     */
    this.type = OutputType.UDB;
    /**
     * @member {string} [SuperMap.OutputSetting.prototype.datasetName='analystResult']
     * @description åå¸å¼åæçè¾åºç»ææ°æ®éåç§°ã
     */

    this.datasetName = "analystResult";
    /**
     * @member {SuperMap.DatasourceConnectionInfo} SuperMap.OutputSetting.prototype.datasourceInfo
     * @description åå¸å¼åæçè¾åºç»ææ°æ®æºè¿æ¥ä¿¡æ¯ã
     */

    this.datasourceInfo = null;
    /**
     * @member {string} [SuperMap.OutputSetting.prototype.outputPath]
     * @description åå¸å¼åæçåæç»æè¾åºè·¯å¾ã
     */

    this.outputPath = "";
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.OutputSetting";
  }
  /**
   * @function SuperMap.OutputSetting.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  OutputSetting_createClass(OutputSetting, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.type = null;
      me.datasetName = null;
      me.outputPath = null;

      if (me.datasourceInfo instanceof DatasourceConnectionInfo) {
        me.datasourceInfo.destroy();
        me.datasourceInfo = null;
      }
    }
  }]);

  return OutputSetting;
}();
SuperMap.OutputSetting = OutputSetting;
// CONCATENATED MODULE: ./src/common/iServer/MappingParameters.js
function MappingParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function MappingParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function MappingParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) MappingParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) MappingParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.MappingParameters
 * @category  iServer ProcessingService
 * @classdesc åæåç»æå¯è§åçåæ°ç±»ã
 * @param {Object} options - åæ°ã
 * @param {Array.<SuperMap.ThemeGridRangeItem>} [options.items] - æ æ ¼åæ®µä¸é¢å¾å­é¡¹æ°ç»ã
 * @param {number} [options.numericPrecision=1] - ç²¾åº¦ï¼æ­¤å­æ®µç¨äºè®¾ç½®åæç»ææ ç­¾ä¸é¢å¾ä¸­æ ç­¾æ°å¼çç²¾åº¦ï¼å¦â1âè¡¨ç¤ºç²¾ç¡®å°å°æ°ç¹çåä¸ä½ã
 * @param {SuperMap.RangeMode} [options.rangeMode=SuperMap.RangeMode.EQUALINTERVAL] - ä¸é¢å¾åæ®µæ¨¡å¼ã
 * @param {number} [options.rangeCount] - ä¸é¢å¾åæ®µä¸ªæ°ã
 * @param {SuperMap.ColorGradientType} [options.colorGradientType=SuperMap.ColorGradientType.YELLOW_RED] - ä¸é¢å¾é¢è²æ¸åæ¨¡å¼ã
 */

var MappingParameters = /*#__PURE__*/function () {
  function MappingParameters(options) {
    MappingParameters_classCallCheck(this, MappingParameters);

    /**
     * @member {Array.<SuperMap.ThemeGridRangeItem>} [SuperMap.MappingParameters.prototype.items]
     * @description æ æ ¼åæ®µä¸é¢å¾å­é¡¹æ°ç»ã
     */
    this.items = null;
    /**
     * @member {number} [SuperMap.MappingParameters.prototype.numericPrecision=1]
     * @description ç²¾åº¦ï¼æ­¤å­æ®µç¨äºè®¾ç½®åæç»ææ ç­¾ä¸é¢å¾ä¸­æ ç­¾æ°å¼çç²¾åº¦ï¼å¦â1âè¡¨ç¤ºç²¾ç¡®å°å°æ°ç¹çåä¸ä½ã
     */

    this.numericPrecision = 1;
    /**
     * @member {SuperMap.RangeMode} [SuperMap.MappingParameters.prototype.RangeMode=SuperMap.RangeMode.EQUALINTERVAL]
     * @description ä¸é¢å¾åæ®µæ¨¡å¼ã
     */

    this.rangeMode = RangeMode.EQUALINTERVAL;
    /**
     * @member {number} [SuperMap.MappingParameters.prototype.rangeCount]
     * @description ä¸é¢å¾åæ®µä¸ªæ°ã
     */

    this.rangeCount = "";
    /**
     * @member {SuperMap.ColorGradientType} [SuperMap.MappingParameters.prototype.colorGradientType=SuperMap.ColorGradientType.YELLOW_RED]
     * @description ä¸é¢å¾é¢è²æ¸åæ¨¡å¼ã
     */

    this.colorGradientType = ColorGradientType.YELLOW_RED;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.MappingParameters";
  }
  /**
   * @function SuperMap.MappingParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  MappingParameters_createClass(MappingParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;

      if (me.items) {
        if (me.items.length > 0) {
          for (var item in me.items) {
            me.items[item].destroy();
            me.items[item] = null;
          }
        }

        me.items = null;
      }

      me.numericPrecision = null;
      me.rangeMode = null;
      me.rangeCount = null;
      me.colorGradientType = null;
    }
  }]);

  return MappingParameters;
}();
SuperMap.MappingParameters = MappingParameters;
// CONCATENATED MODULE: ./src/common/iServer/BuffersAnalystJobsParameter.js
function BuffersAnalystJobsParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function BuffersAnalystJobsParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function BuffersAnalystJobsParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) BuffersAnalystJobsParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) BuffersAnalystJobsParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.BuffersAnalystJobsParameter
 * @category iServer ProcessingService BufferAnalyst
 * @classdesc ç¼å²åºåæä»»å¡åæ°ç±»ã
 * @param {Object} options - åæ°ã
 * @param {string} options.datasetName - æ°æ®éåã
 * @param {(SuperMap.Bounds|L.Bounds|ol.extent)} [options.bounds] - åæèå´ï¼é»è®¤ä¸ºå¨å¾èå´ï¼ã
 * @param {string} [options.distance='15'] - ç¼å²è·ç¦»ï¼æç¼å²åºåå¾ã
 * @param {string} [options.distanceField='pickup_latitude'] - ç¼å²åºåæè·ç¦»å­æ®µã
 * @param {SuperMap.AnalystSizeUnit} [options.distanceUnit=SuperMap.AnalystSizeUnit.METER] - ç¼å²è·ç¦»åä½åä½ã
 * @param {SuperMap.OutputSetting} [options.output] - è¾åºåæ°è®¾ç½®ã
 * @param {SuperMap.MappingParameters} [options.mappingParameters] - åæåç»æå¯è§åçåæ°ç±»ã
 */

var BuffersAnalystJobsParameter = /*#__PURE__*/function () {
  function BuffersAnalystJobsParameter(options) {
    BuffersAnalystJobsParameter_classCallCheck(this, BuffersAnalystJobsParameter);

    /**
     * @member {string} SuperMap.BuffersAnalystJobsParameter.prototype.datasetName
     * @description æ°æ®éåã
     */
    this.datasetName = '';
    /**
     * @member {(SuperMap.Bounds|L.Bounds|ol.extent)} SuperMap.BuffersAnalystJobsParameter.prototype.bounds
     * @description åæèå´ã
     */

    this.bounds = '';
    /**
     * @member {string} [SuperMap.BuffersAnalystJobsParameter.prototype.distance='15']
     * @description ç¼å²è·ç¦»ï¼æç§°ä¸ºç¼å²åºåå¾ãå½ç¼å²è·ç¦»å­æ®µä½ç©ºæ¶ï¼æ­¤åæ°ææã
     */

    this.distance = '';
    /**
     * @member {string} [SuperMap.BuffersAnalystJobsParameter.prototype.distanceField='pickup_latitude']
     * @description ç¼å²è·ç¦»å­æ®µã
     */

    this.distanceField = '';
    /**
     * @member {SuperMap.AnalystSizeUnit} [SuperMap.BuffersAnalystJobsParameter.prototype.distanceUnit=SuperMap.AnalystSizeUnit.METER]
     * @description ç¼å²è·ç¦»åä½ã
     */

    this.distanceUnit = AnalystSizeUnit.METER;
    /**
     * @member {string} SuperMap.BuffersAnalystJobsParameter.prototype.dissolveField
     * @description èåå­æ®µï¼æ ¹æ®å­æ®µå¼å¯¹ç¼å²åºç»æé¢å¯¹è±¡è¿è¡èåã
     */

    this.dissolveField = '';
    /**
     * @member {SuperMap.OutputSetting} [SuperMap.BuffersAnalystJobsParameter.prototype.output]
     * @description è¾åºåæ°è®¾ç½®ç±»ã
     */

    this.output = null;
    /**
     * @member {SuperMap.MappingParameters} [SuperMap.BuffersAnalystJobsParameter.prototype.mappingParameters]
     * @description åæåç»æå¯è§åçåæ°ç±»ã
     */

    this.mappingParameters = null;

    if (!options) {
      return this;
    }

    Util.extend(this, options);
    this.CLASS_NAME = 'SuperMap.BuffersAnalystJobsParameter';
  }
  /**
   * @function SuperMap.BuffersAnalystJobsParameter.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  BuffersAnalystJobsParameter_createClass(BuffersAnalystJobsParameter, [{
    key: "destroy",
    value: function destroy() {
      this.datasetName = null;
      this.bounds = null;
      this.distance = null;
      this.distanceField = null;
      this.distanceUnit = null;
      this.dissolveField = null;

      if (this.output instanceof OutputSetting) {
        this.output.destroy();
        this.output = null;
      }

      if (this.mappingParameters instanceof MappingParameters) {
        this.mappingParameters.destroy();
        this.mappingParameters = null;
      }
    }
    /**
     * @function SuperMap.BuffersAnalystJobsParameter.toObject
     * @param {SuperMap.BuffersAnalystJobsParameter} BuffersAnalystJobsParameter - ç¼å²åºåæä»»å¡åæ°ã
     * @param {Object} tempObj - ç®æ å¯¹è±¡ã
     * @description çæç¼å²åºåæä»»å¡å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(BuffersAnalystJobsParameter, tempObj) {
      for (var name in BuffersAnalystJobsParameter) {
        if (name === 'datasetName') {
          tempObj['input'] = tempObj['input'] || {};
          tempObj['input'][name] = BuffersAnalystJobsParameter[name];
          continue;
        }

        if (name === 'output') {
          tempObj['output'] = tempObj['output'] || {};
          tempObj['output'] = BuffersAnalystJobsParameter[name];
          continue;
        }

        tempObj['analyst'] = tempObj['analyst'] || {};

        if (name === 'bounds' && BuffersAnalystJobsParameter[name]) {
          tempObj['analyst'][name] = BuffersAnalystJobsParameter[name].toBBOX();
        } else {
          tempObj['analyst'][name] = BuffersAnalystJobsParameter[name];
        }

        if (name === 'mappingParameters') {
          tempObj['analyst'][name] = tempObj['analyst'][name] || {};
          tempObj['analyst']['mappingParameters'] = BuffersAnalystJobsParameter[name];
        }
      }
    }
  }]);

  return BuffersAnalystJobsParameter;
}();
SuperMap.BuffersAnalystJobsParameter = BuffersAnalystJobsParameter;
// CONCATENATED MODULE: ./src/common/iServer/ProcessingServiceBase.js
function ProcessingServiceBase_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { ProcessingServiceBase_typeof = function _typeof(obj) { return typeof obj; }; } else { ProcessingServiceBase_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return ProcessingServiceBase_typeof(obj); }

function ProcessingServiceBase_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ProcessingServiceBase_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ProcessingServiceBase_createClass(Constructor, protoProps, staticProps) { if (protoProps) ProcessingServiceBase_defineProperties(Constructor.prototype, protoProps); if (staticProps) ProcessingServiceBase_defineProperties(Constructor, staticProps); return Constructor; }

function ProcessingServiceBase_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { ProcessingServiceBase_get = Reflect.get; } else { ProcessingServiceBase_get = function _get(target, property, receiver) { var base = ProcessingServiceBase_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return ProcessingServiceBase_get(target, property, receiver || target); }

function ProcessingServiceBase_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = ProcessingServiceBase_getPrototypeOf(object); if (object === null) break; } return object; }

function ProcessingServiceBase_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) ProcessingServiceBase_setPrototypeOf(subClass, superClass); }

function ProcessingServiceBase_setPrototypeOf(o, p) { ProcessingServiceBase_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return ProcessingServiceBase_setPrototypeOf(o, p); }

function ProcessingServiceBase_createSuper(Derived) { var hasNativeReflectConstruct = ProcessingServiceBase_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = ProcessingServiceBase_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = ProcessingServiceBase_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return ProcessingServiceBase_possibleConstructorReturn(this, result); }; }

function ProcessingServiceBase_possibleConstructorReturn(self, call) { if (call && (ProcessingServiceBase_typeof(call) === "object" || typeof call === "function")) { return call; } return ProcessingServiceBase_assertThisInitialized(self); }

function ProcessingServiceBase_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function ProcessingServiceBase_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ProcessingServiceBase_getPrototypeOf(o) { ProcessingServiceBase_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return ProcessingServiceBase_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.ProcessingServiceBase
 * @category  iServer ProcessingService
 * @classdesc åå¸å¼åææå¡åºç±»
 * @extends {SuperMap.CommonServiceBase}
 * @param {string} url - åå¸å¼åææå¡å°åã
 * @param {Object} options - åæ°ã
 * @param {SuperMap.Events} options.events - å¤çææäºä»¶çå¯¹è±¡ã
 * @param {number} options.index - æå¡è®¿é®å°åå¨æ°ç»ä¸­çä½ç½®ã
 * @param {number} options.length - æå¡è®¿é®å°åæ°ç»é¿åº¦ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã
 * @param {Object} [options.eventListeners] - äºä»¶çå¬å¨å¯¹è±¡ãæ processCompleted å±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailed å±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var ProcessingServiceBase = /*#__PURE__*/function (_CommonServiceBase) {
  ProcessingServiceBase_inherits(ProcessingServiceBase, _CommonServiceBase);

  var _super = ProcessingServiceBase_createSuper(ProcessingServiceBase);

  function ProcessingServiceBase(url, options) {
    var _this;

    ProcessingServiceBase_classCallCheck(this, ProcessingServiceBase);

    options = options || {};
    /*
     * Constant: EVENT_TYPES
     * {Array.<string>}
     * æ­¤ç±»æ¯æçäºä»¶ç±»å
     * - *processCompleted* åå»ºæååè§¦åçäºä»¶ã
     * - *processFailed* åå»ºå¤±è´¥åè§¦åçäºä»¶ ã
     * - *processRunning* åå»ºè¿ç¨çæ´ä¸ªé¶æ®µé½ä¼è§¦åçäºä»¶ï¼ç¨äºè·ååå»ºè¿ç¨çç¶æ ã
     */

    options.EVENT_TYPES = ["processCompleted", "processFailed", "processRunning"];
    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.ProcessingServiceBase";
    return _this;
  }
  /**
   * @function SuperMap.ProcessingServiceBase.prototype.destroy
   * @override
   */


  ProcessingServiceBase_createClass(ProcessingServiceBase, [{
    key: "destroy",
    value: function destroy() {
      ProcessingServiceBase_get(ProcessingServiceBase_getPrototypeOf(ProcessingServiceBase.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.ProcessingServiceBase.prototype.getJobs
     * @description è·ååå¸å¼åæä»»å¡ã
     * @param {string} url - èµæºå°åã
     */

  }, {
    key: "getJobs",
    value: function getJobs(url) {
      var me = this;
      FetchRequest.get(me._processUrl(url), null, {
        proxy: me.proxy
      }).then(function (response) {
        return response.json();
      }).then(function (result) {
        me.events.triggerEvent("processCompleted", {
          result: result
        });
      })["catch"](function (e) {
        me.eventListeners.processFailed({
          error: e
        });
      });
    }
    /**
     * @function SuperMap.ProcessingServiceBase.prototype.addJob
     * @description æ·»å åå¸å¼åæä»»å¡ã
     * @param {string} url - èµæºæ ¹å°åã
     * @param {Object} params - åå»ºä¸ä¸ªç©ºé´åæçè¯·æ±åæ°ã
     * @param {string} paramType - è¯·æ±åæ°ç±»åã
     * @param {number} seconds - å¼å§åå»ºåï¼è·ååå»ºæåç»æçæ¶é´é´éã
     */

  }, {
    key: "addJob",
    value: function addJob(url, params, paramType, seconds) {
      var me = this,
          parameterObject = null;

      if (params && params instanceof paramType) {
        parameterObject = new Object();
        paramType.toObject(params, parameterObject);
      }

      var headers = Object.assign({
        'Content-Type': 'application/x-www-form-urlencoded'
      }, me.headers || {});
      var options = {
        proxy: me.proxy,
        headers: headers,
        withCredentials: me.withCredentials,
        crossOrigin: me.crossOrigin,
        isInTheSameDomain: me.isInTheSameDomain
      };
      FetchRequest.post(me._processUrl(url), JSON.stringify(parameterObject), options).then(function (response) {
        return response.json();
      }).then(function (result) {
        if (result.succeed) {
          me.serviceProcessCompleted(result, seconds);
        } else {
          me.serviceProcessFailed(result);
        }
      })["catch"](function (e) {
        me.serviceProcessFailed({
          error: e
        });
      });
    }
  }, {
    key: "serviceProcessCompleted",
    value: function serviceProcessCompleted(result, seconds) {
      result = Util.transformResult(result);
      seconds = seconds || 1000;
      var me = this;

      if (result) {
        var id = setInterval(function () {
          FetchRequest.get(me._processUrl(result.newResourceLocation), {
            _t: new Date().getTime()
          }).then(function (response) {
            return response.json();
          }).then(function (job) {
            me.events.triggerEvent("processRunning", {
              id: job.id,
              state: job.state
            });

            if (job.state.runState === 'LOST' || job.state.runState === 'KILLED' || job.state.runState === 'FAILED') {
              clearInterval(id);
              me.events.triggerEvent("processFailed", {
                error: job.state.errorMsg,
                state: job.state.runState
              });
            }

            if (job.state.runState === 'FINISHED' && job.setting.serviceInfo) {
              clearInterval(id);
              me.events.triggerEvent("processCompleted", {
                result: job
              });
            }
          })["catch"](function (e) {
            clearInterval(id);
            me.events.triggerEvent("processFailed", {
              error: e
            });
          });
        }, seconds);
      }
    }
  }, {
    key: "serviceProcessFailed",
    value: function serviceProcessFailed(result) {
      ProcessingServiceBase_get(ProcessingServiceBase_getPrototypeOf(ProcessingServiceBase.prototype), "serviceProcessFailed", this).call(this, result);
    }
  }, {
    key: "_processUrl",
    value: function _processUrl(url) {
      if (SecurityManager.getToken(url)) {
        url = Util.urlAppend(url, 'token=' + SecurityManager.getToken(url));
      }

      return url;
    }
  }]);

  return ProcessingServiceBase;
}(CommonServiceBase);
SuperMap.ProcessingServiceBase = ProcessingServiceBase;
// CONCATENATED MODULE: ./src/common/iServer/BuffersAnalystJobsService.js
function BuffersAnalystJobsService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { BuffersAnalystJobsService_typeof = function _typeof(obj) { return typeof obj; }; } else { BuffersAnalystJobsService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return BuffersAnalystJobsService_typeof(obj); }

function BuffersAnalystJobsService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function BuffersAnalystJobsService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function BuffersAnalystJobsService_createClass(Constructor, protoProps, staticProps) { if (protoProps) BuffersAnalystJobsService_defineProperties(Constructor.prototype, protoProps); if (staticProps) BuffersAnalystJobsService_defineProperties(Constructor, staticProps); return Constructor; }

function BuffersAnalystJobsService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { BuffersAnalystJobsService_get = Reflect.get; } else { BuffersAnalystJobsService_get = function _get(target, property, receiver) { var base = BuffersAnalystJobsService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return BuffersAnalystJobsService_get(target, property, receiver || target); }

function BuffersAnalystJobsService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = BuffersAnalystJobsService_getPrototypeOf(object); if (object === null) break; } return object; }

function BuffersAnalystJobsService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) BuffersAnalystJobsService_setPrototypeOf(subClass, superClass); }

function BuffersAnalystJobsService_setPrototypeOf(o, p) { BuffersAnalystJobsService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return BuffersAnalystJobsService_setPrototypeOf(o, p); }

function BuffersAnalystJobsService_createSuper(Derived) { var hasNativeReflectConstruct = BuffersAnalystJobsService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = BuffersAnalystJobsService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = BuffersAnalystJobsService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return BuffersAnalystJobsService_possibleConstructorReturn(this, result); }; }

function BuffersAnalystJobsService_possibleConstructorReturn(self, call) { if (call && (BuffersAnalystJobsService_typeof(call) === "object" || typeof call === "function")) { return call; } return BuffersAnalystJobsService_assertThisInitialized(self); }

function BuffersAnalystJobsService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function BuffersAnalystJobsService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function BuffersAnalystJobsService_getPrototypeOf(o) { BuffersAnalystJobsService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return BuffersAnalystJobsService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.BuffersAnalystJobsService
 * @category iServer ProcessingService BufferAnalyst
 * @classdesc ç¼å²åºåææå¡ç±»
 * @extends {SuperMap.ProcessingServiceBase}
 * @param {string} url - æå¡å°åã
 * @param {Object} options - åæ°ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var BuffersAnalystJobsService = /*#__PURE__*/function (_ProcessingServiceBas) {
  BuffersAnalystJobsService_inherits(BuffersAnalystJobsService, _ProcessingServiceBas);

  var _super = BuffersAnalystJobsService_createSuper(BuffersAnalystJobsService);

  function BuffersAnalystJobsService(url, options) {
    var _this;

    BuffersAnalystJobsService_classCallCheck(this, BuffersAnalystJobsService);

    _this = _super.call(this, url, options);
    _this.url = Util.urlPathAppend(_this.url, 'spatialanalyst/buffers');
    _this.CLASS_NAME = 'SuperMap.BuffersAnalystJobsService';
    return _this;
  }
  /**
   *@override
   */


  BuffersAnalystJobsService_createClass(BuffersAnalystJobsService, [{
    key: "destroy",
    value: function destroy() {
      BuffersAnalystJobsService_get(BuffersAnalystJobsService_getPrototypeOf(BuffersAnalystJobsService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.BuffersAnalystJobsService.prototype.getBufferJobs
     * @description è·åç¼å²åºåæææä»»å¡
     */

  }, {
    key: "getBuffersJobs",
    value: function getBuffersJobs() {
      BuffersAnalystJobsService_get(BuffersAnalystJobsService_getPrototypeOf(BuffersAnalystJobsService.prototype), "getJobs", this).call(this, this.url);
    }
    /**
     * @function SuperMap.BuffersAnalystJobsService.prototype.getBufferJob
     * @description è·åæå®idçç¼å²åºåææå¡
     * @param {string} id - æå®è¦è·åæ°æ®çidã
     */

  }, {
    key: "getBuffersJob",
    value: function getBuffersJob(id) {
      BuffersAnalystJobsService_get(BuffersAnalystJobsService_getPrototypeOf(BuffersAnalystJobsService.prototype), "getJobs", this).call(this, Util.urlPathAppend(this.url, id));
    }
    /**
     * @function SuperMap.BuffersAnalystJobsService.prototype.addBufferJob
     * @description æ°å»ºç¼å²åºåææå¡
     * @param {SuperMap.BuffersAnalystJobsParameter} params - åå»ºä¸ä¸ªç©ºé´åæçè¯·æ±åæ°ã
     * @param {number} seconds - å¼å§åå»ºåï¼è·ååå»ºæåç»æçæ¶é´é´éã
     */

  }, {
    key: "addBuffersJob",
    value: function addBuffersJob(params, seconds) {
      BuffersAnalystJobsService_get(BuffersAnalystJobsService_getPrototypeOf(BuffersAnalystJobsService.prototype), "addJob", this).call(this, this.url, params, BuffersAnalystJobsParameter, seconds);
    }
  }]);

  return BuffersAnalystJobsService;
}(ProcessingServiceBase);
SuperMap.BuffersAnalystJobsService = BuffersAnalystJobsService;
// CONCATENATED MODULE: ./src/common/iServer/BurstPipelineAnalystParameters.js
function BurstPipelineAnalystParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function BurstPipelineAnalystParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function BurstPipelineAnalystParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) BurstPipelineAnalystParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) BurstPipelineAnalystParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.BurstPipelineAnalystParameters
 * @category iServer NetworkAnalyst BurstAnalyse
 * @classdesc çç®¡åæåæ°ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {Array.<number>} options.sourceNodeIDs - æå®çè®¾æ½ç¹ ID æ°ç»ã 
 * @param {number} [options.edgeID] - æå®çå¼§æ®µIDï¼edgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã 
 * @param {number} [options.nodeID] - æå®çç»ç¹IDï¼edgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã 
 * @param {boolean} [options.isUncertainDirectionValid=false] - æå®ä¸ç¡®å®æµåæ¯å¦ææã
 */

var BurstPipelineAnalystParameters = /*#__PURE__*/function () {
  function BurstPipelineAnalystParameters(options) {
    BurstPipelineAnalystParameters_classCallCheck(this, BurstPipelineAnalystParameters);

    var me = this;
    /**
     * @member {Array.<number>} SuperMap.BurstPipelineAnalystParameters.prototype.sourceNodeIDs
     * @description æå®çè®¾æ½ç¹ ID æ°ç»ã
     */

    this.sourceNodeIDs = null;
    /**
     * @member {number} [SuperMap.BurstPipelineAnalystParameters.prototype.edgeID]
     * @description æå®çå¼§æ®µ IDï¼edgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã 
     */

    this.edgeID = null;
    /**
     * @member {number} [SuperMap.BurstPipelineAnalystParameters.prototype.nodeID]
     * @description æå®çç»ç¹ IDï¼edgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã 
     */

    this.nodeID = null;
    /**
     * @member {boolean} [SuperMap.BurstPipelineAnalystParameters.prototype.isUncertainDirectionValid=false]
     * @description æå®ä¸ç¡®å®æµåæ¯å¦ææã
     * æå®ä¸º trueï¼è¡¨ç¤ºä¸ç¡®å®æµåææï¼éå°ä¸ç¡®å®æµåæ¶åæç»§ç»­è¿è¡ã
     * æå®ä¸º falseï¼è¡¨ç¤ºä¸ç¡®å®æµåæ æï¼éå°ä¸ç¡®å®æµåå°åæ­¢å¨è¯¥æ¹åä¸ç»§ç»­æ¥æ¾ã
     */

    this.isUncertainDirectionValid = false;
    Util.extend(me, options);
    this.CLASS_NAME = "SuperMap.BurstPipelineAnalystParameters";
  }
  /**
   * @function SuperMap.BurstPipelineAnalystParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  BurstPipelineAnalystParameters_createClass(BurstPipelineAnalystParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.sourceNodeIDs = null;
      me.edgeID = null;
      me.nodeID = null;
      me.isUncertainDirectionValid = null;
    }
  }]);

  return BurstPipelineAnalystParameters;
}();
SuperMap.BurstPipelineAnalystParameters = BurstPipelineAnalystParameters;
// CONCATENATED MODULE: ./src/common/iServer/NetworkAnalystServiceBase.js
function NetworkAnalystServiceBase_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { NetworkAnalystServiceBase_typeof = function _typeof(obj) { return typeof obj; }; } else { NetworkAnalystServiceBase_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return NetworkAnalystServiceBase_typeof(obj); }

function NetworkAnalystServiceBase_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function NetworkAnalystServiceBase_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function NetworkAnalystServiceBase_createClass(Constructor, protoProps, staticProps) { if (protoProps) NetworkAnalystServiceBase_defineProperties(Constructor.prototype, protoProps); if (staticProps) NetworkAnalystServiceBase_defineProperties(Constructor, staticProps); return Constructor; }

function NetworkAnalystServiceBase_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { NetworkAnalystServiceBase_get = Reflect.get; } else { NetworkAnalystServiceBase_get = function _get(target, property, receiver) { var base = NetworkAnalystServiceBase_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return NetworkAnalystServiceBase_get(target, property, receiver || target); }

function NetworkAnalystServiceBase_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = NetworkAnalystServiceBase_getPrototypeOf(object); if (object === null) break; } return object; }

function NetworkAnalystServiceBase_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) NetworkAnalystServiceBase_setPrototypeOf(subClass, superClass); }

function NetworkAnalystServiceBase_setPrototypeOf(o, p) { NetworkAnalystServiceBase_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return NetworkAnalystServiceBase_setPrototypeOf(o, p); }

function NetworkAnalystServiceBase_createSuper(Derived) { var hasNativeReflectConstruct = NetworkAnalystServiceBase_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = NetworkAnalystServiceBase_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = NetworkAnalystServiceBase_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return NetworkAnalystServiceBase_possibleConstructorReturn(this, result); }; }

function NetworkAnalystServiceBase_possibleConstructorReturn(self, call) { if (call && (NetworkAnalystServiceBase_typeof(call) === "object" || typeof call === "function")) { return call; } return NetworkAnalystServiceBase_assertThisInitialized(self); }

function NetworkAnalystServiceBase_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function NetworkAnalystServiceBase_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function NetworkAnalystServiceBase_getPrototypeOf(o) { NetworkAnalystServiceBase_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return NetworkAnalystServiceBase_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.NetworkAnalystServiceBase
 * @category iServer NetworkAnalyst
 * @classdesc ç½ç»åææå¡åºç±»ã
 * @description ç½ç»åææå¡åºç±»ã
 * @extends {SuperMap.CommonServiceBase}
 * @param {string} url - ç½ç»åææå¡å°åã
 * @param {Object} options - åæ°ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var NetworkAnalystServiceBase = /*#__PURE__*/function (_CommonServiceBase) {
  NetworkAnalystServiceBase_inherits(NetworkAnalystServiceBase, _CommonServiceBase);

  var _super = NetworkAnalystServiceBase_createSuper(NetworkAnalystServiceBase);

  function NetworkAnalystServiceBase(url, options) {
    var _this;

    NetworkAnalystServiceBase_classCallCheck(this, NetworkAnalystServiceBase);

    _this = _super.call(this, url, options);
    /**
     * @member {SuperMap.DataFormat} [SuperMap.NetworkAnalystServiceBase.prototype.format=SuperMap.DataFormat.GEOJSON]
     * @description æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ï¼åæ°æ ¼å¼ä¸º "ISERVER","GEOJSON"
     */

    _this.format = DataFormat.GEOJSON;
    _this.CLASS_NAME = "SuperMap.NetworkAnalystServiceBase";
    return _this;
  }
  /**
   * @function SuperMap.NetworkAnalystServiceBase.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨çèµæºå±æ§ç½®ç©ºã
   */


  NetworkAnalystServiceBase_createClass(NetworkAnalystServiceBase, [{
    key: "destroy",
    value: function destroy() {
      NetworkAnalystServiceBase_get(NetworkAnalystServiceBase_getPrototypeOf(NetworkAnalystServiceBase.prototype), "destroy", this).call(this);

      this.format = null;
    }
    /**
     * @function SuperMap.NetworkAnalystServiceBase.prototype.serviceProcessCompleted
     * @description åæå®æï¼æ§è¡æ­¤æ¹æ³ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     */

  }, {
    key: "serviceProcessCompleted",
    value: function serviceProcessCompleted(result) {
      var me = this,
          analystResult;
      result = Util.transformResult(result);

      if (result && me.format === DataFormat.GEOJSON && typeof me.toGeoJSONResult === 'function') {
        analystResult = me.toGeoJSONResult(result);
      }

      if (!analystResult) {
        analystResult = result;
      }

      me.events.triggerEvent("processCompleted", {
        result: analystResult
      });
    }
    /**
     * @function SuperMap.NetworkAnalystServiceBase.prototype.toGeoJSONResult
     * @description å°å«æ geometry çæ°æ®è½¬æ¢ä¸º GeoJSON æ ¼å¼ãåªå¤çç»æä¸­çè·¯ç±ï¼ç±å­ç±»å®ç°ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     * @returns {GeoJSONObject} GeoJSON å¯¹è±¡ã
     */

  }, {
    key: "toGeoJSONResult",
    value: function toGeoJSONResult(result) {
      // eslint-disable-line no-unused-vars
      return null;
    }
  }]);

  return NetworkAnalystServiceBase;
}(CommonServiceBase);
SuperMap.NetworkAnalystServiceBase = NetworkAnalystServiceBase;
// CONCATENATED MODULE: ./src/common/iServer/BurstPipelineAnalystService.js
function BurstPipelineAnalystService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { BurstPipelineAnalystService_typeof = function _typeof(obj) { return typeof obj; }; } else { BurstPipelineAnalystService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return BurstPipelineAnalystService_typeof(obj); }

function BurstPipelineAnalystService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function BurstPipelineAnalystService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function BurstPipelineAnalystService_createClass(Constructor, protoProps, staticProps) { if (protoProps) BurstPipelineAnalystService_defineProperties(Constructor.prototype, protoProps); if (staticProps) BurstPipelineAnalystService_defineProperties(Constructor, staticProps); return Constructor; }

function BurstPipelineAnalystService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { BurstPipelineAnalystService_get = Reflect.get; } else { BurstPipelineAnalystService_get = function _get(target, property, receiver) { var base = BurstPipelineAnalystService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return BurstPipelineAnalystService_get(target, property, receiver || target); }

function BurstPipelineAnalystService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = BurstPipelineAnalystService_getPrototypeOf(object); if (object === null) break; } return object; }

function BurstPipelineAnalystService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) BurstPipelineAnalystService_setPrototypeOf(subClass, superClass); }

function BurstPipelineAnalystService_setPrototypeOf(o, p) { BurstPipelineAnalystService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return BurstPipelineAnalystService_setPrototypeOf(o, p); }

function BurstPipelineAnalystService_createSuper(Derived) { var hasNativeReflectConstruct = BurstPipelineAnalystService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = BurstPipelineAnalystService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = BurstPipelineAnalystService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return BurstPipelineAnalystService_possibleConstructorReturn(this, result); }; }

function BurstPipelineAnalystService_possibleConstructorReturn(self, call) { if (call && (BurstPipelineAnalystService_typeof(call) === "object" || typeof call === "function")) { return call; } return BurstPipelineAnalystService_assertThisInitialized(self); }

function BurstPipelineAnalystService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function BurstPipelineAnalystService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function BurstPipelineAnalystService_getPrototypeOf(o) { BurstPipelineAnalystService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return BurstPipelineAnalystService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.BurstPipelineAnalystService
 * @category iServer NetworkAnalyst BurstAnalyse
 * @classdesc çç®¡åææå¡ç±»ï¼å³å°ç»å®å¼§æ®µæèç¹ä½ä¸ºçç®¡ç¹æ¥è¿è¡åæï¼è¿åå³é®ç»ç¹ ID æ°ç»ãæ®éç»ç¹ ID æ°ç»åå¶ä¸ä¸æ¸¸å¼§æ®µ ID æ°ç»ã
 * @extends {SuperMap.NetworkAnalystServiceBase}
 * @param {string} url - ç½ç»åææå¡å°åãè¯·æ±ç½ç»åææå¡ï¼URLåºä¸ºï¼
 *                       http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{ç½ç»åææå¡å}/rest/networkanalyst/{ç½ç»æ°æ®é@æ°æ®æº}ï¼
 *                       ä¾å¦: "http://localhost:8090/iserver/services/test/rest/networkanalyst/WaterNet@FacilityNet"ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var BurstPipelineAnalystService = /*#__PURE__*/function (_NetworkAnalystServic) {
  BurstPipelineAnalystService_inherits(BurstPipelineAnalystService, _NetworkAnalystServic);

  var _super = BurstPipelineAnalystService_createSuper(BurstPipelineAnalystService);

  function BurstPipelineAnalystService(url, options) {
    var _this;

    BurstPipelineAnalystService_classCallCheck(this, BurstPipelineAnalystService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.BurstPipelineAnalystService";
    return _this;
  }
  /**
   * @function SuperMap.BurstPipelineAnalystService.prototype.destroy
   * @override
   */


  BurstPipelineAnalystService_createClass(BurstPipelineAnalystService, [{
    key: "destroy",
    value: function destroy() {
      BurstPipelineAnalystService_get(BurstPipelineAnalystService_getPrototypeOf(BurstPipelineAnalystService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.BurstPipelineAnalystService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @params {SuperMap.BurstPipelineAnalystParameters} params - çç®¡åæåæ°ç±»
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof BurstPipelineAnalystParameters)) {
        return null;
      }

      var me = this,
          jsonObject;
      me.url = Util.urlPathAppend(me.url, 'burstAnalyse');
      jsonObject = {
        sourceNodeIDs: params.sourceNodeIDs,
        isUncertainDirectionValid: params.isUncertainDirectionValid
      }; //å¿ä¼ åæ°ä¸æ­£ç¡®ï¼å°±ç»æ­¢

      if (params.edgeID !== null && params.nodeID !== null) {
        throw new Error('edgeID and nodeID cannot be null at the same time.');
      }

      if (params.edgeID === null && params.nodeID === null) {
        throw new Error('edgeID and nodeID cannot be null at the same time.');
      }

      if (params.edgeID !== null) {
        jsonObject.edgeID = params.edgeID;
      } else {
        jsonObject.nodeID = params.nodeID;
      }

      me.request({
        method: "GET",
        params: jsonObject,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return BurstPipelineAnalystService;
}(NetworkAnalystServiceBase);
SuperMap.BurstPipelineAnalystService = BurstPipelineAnalystService;
// CONCATENATED MODULE: ./src/common/iServer/ChartFeatureInfoSpecsService.js
function ChartFeatureInfoSpecsService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { ChartFeatureInfoSpecsService_typeof = function _typeof(obj) { return typeof obj; }; } else { ChartFeatureInfoSpecsService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return ChartFeatureInfoSpecsService_typeof(obj); }

function ChartFeatureInfoSpecsService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ChartFeatureInfoSpecsService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ChartFeatureInfoSpecsService_createClass(Constructor, protoProps, staticProps) { if (protoProps) ChartFeatureInfoSpecsService_defineProperties(Constructor.prototype, protoProps); if (staticProps) ChartFeatureInfoSpecsService_defineProperties(Constructor, staticProps); return Constructor; }

function ChartFeatureInfoSpecsService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { ChartFeatureInfoSpecsService_get = Reflect.get; } else { ChartFeatureInfoSpecsService_get = function _get(target, property, receiver) { var base = ChartFeatureInfoSpecsService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return ChartFeatureInfoSpecsService_get(target, property, receiver || target); }

function ChartFeatureInfoSpecsService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = ChartFeatureInfoSpecsService_getPrototypeOf(object); if (object === null) break; } return object; }

function ChartFeatureInfoSpecsService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) ChartFeatureInfoSpecsService_setPrototypeOf(subClass, superClass); }

function ChartFeatureInfoSpecsService_setPrototypeOf(o, p) { ChartFeatureInfoSpecsService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return ChartFeatureInfoSpecsService_setPrototypeOf(o, p); }

function ChartFeatureInfoSpecsService_createSuper(Derived) { var hasNativeReflectConstruct = ChartFeatureInfoSpecsService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = ChartFeatureInfoSpecsService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = ChartFeatureInfoSpecsService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return ChartFeatureInfoSpecsService_possibleConstructorReturn(this, result); }; }

function ChartFeatureInfoSpecsService_possibleConstructorReturn(self, call) { if (call && (ChartFeatureInfoSpecsService_typeof(call) === "object" || typeof call === "function")) { return call; } return ChartFeatureInfoSpecsService_assertThisInitialized(self); }

function ChartFeatureInfoSpecsService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function ChartFeatureInfoSpecsService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ChartFeatureInfoSpecsService_getPrototypeOf(o) { ChartFeatureInfoSpecsService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return ChartFeatureInfoSpecsService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.ChartFeatureInfoSpecsService
 * @category  iServer Map Chart
 * @classdesc æµ·å¾ç©æ ä¿¡æ¯æå¡ç±»ï¼éè¿è¯¥æå¡ç±»å¯ä»¥æ¥è¯¢å°æå¡ç«¯æ¯æçæææµ·å¾ç©æ ä¿¡æ¯ã
 *            ç¨æ·å¯ä»¥éè¿ä¸¤ç§æ¹å¼è·åæ¥è¯¢ç»æï¼
 *            ä¸ç§æ¯éè¿çå¬ ChartFeatureInfoSpecsEvent.PROCESS_COMPLETE äºä»¶ï¼
 *            å¦ä¸ç§æ¯ä½¿ç¨ AsyncResponder ç±»å®ç°å¼æ­¥å¤çã
 * @extends {SuperMap.CommonServiceBase}
 * @param {string} url - å°å¾ï¼ç¹ææµ·å¾ï¼æå¡å°åã
 *        å¦ï¼"http://localhost:8090/iserver/services/map-ChartW/rest/maps/æµ·å¾"ã
 *        åéè¯·æ±æ ¼å¼ç±»ä¼¼äºï¼"http://localhost:8090/iserver/services/map-ChartW/rest/maps/æµ·å¾/chartFeatureInfoSpecs.json"ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæprocessCompletedå±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailedå±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã
 * @param {SuperMap.DataFormat} [options.format] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ï¼åæ°æ ¼å¼ä¸º"ISERVER","GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var ChartFeatureInfoSpecsService = /*#__PURE__*/function (_CommonServiceBase) {
  ChartFeatureInfoSpecsService_inherits(ChartFeatureInfoSpecsService, _CommonServiceBase);

  var _super = ChartFeatureInfoSpecsService_createSuper(ChartFeatureInfoSpecsService);

  function ChartFeatureInfoSpecsService(url, options) {
    var _this;

    ChartFeatureInfoSpecsService_classCallCheck(this, ChartFeatureInfoSpecsService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.ChartFeatureInfoSpecsService";
    return _this;
  }
  /**
   * @function SuperMap.ChartFeatureInfoSpecsService.prototype.destroy
   * @override
   */


  ChartFeatureInfoSpecsService_createClass(ChartFeatureInfoSpecsService, [{
    key: "destroy",
    value: function destroy() {
      ChartFeatureInfoSpecsService_get(ChartFeatureInfoSpecsService_getPrototypeOf(ChartFeatureInfoSpecsService.prototype), "destroy", this).call(this);

      Util.reset(this);
    }
    /**
     * @function SuperMap.ChartFeatureInfoSpecsService.prototype.processAsync
     * @description æ ¹æ®å°å¾ï¼ç¹ææµ·å¾ï¼æå¡å°åä¸æå¡ç«¯å®æå¼æ­¥éè®¯ï¼è·åç©æ ä¿¡æ¯ã
     *              å½æ¥è¯¢ç©æ ä¿¡æ¯æåæ¶ï¼å°è§¦å ChartFeatureInfoSpecsEvent.PROCESS_COMPLETE
     *              äºä»¶ãç¨å¯ä»¥éè¿æ·ä¸¤ç§æ¹å¼è·åå¾å±ä¿¡æ¯:
     *              1. éè¿ AsyncResponder ç±»è·åï¼æ¨èä½¿ç¨ï¼ï¼
     *              2. éè¿çå¬ ChartFeatureInfoSpecsEvent.PROCESS_COMPLETE äºä»¶è·åã
     */

  }, {
    key: "processAsync",
    value: function processAsync() {
      var me = this,
          method = "GET";

      if (!me.isTempLayers) {
        Util.urlPathAppend(me.url, 'chartFeatureInfoSpecs');
      }

      me.request({
        method: method,
        params: null,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return ChartFeatureInfoSpecsService;
}(CommonServiceBase);
SuperMap.ChartFeatureInfoSpecsService = ChartFeatureInfoSpecsService;
// CONCATENATED MODULE: ./src/common/iServer/ChartQueryFilterParameter.js
function ChartQueryFilterParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ChartQueryFilterParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ChartQueryFilterParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) ChartQueryFilterParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) ChartQueryFilterParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.ChartQueryFilterParameter
 * @category  iServer Map Chart
 * @classdesc æµ·å¾æ¥è¯¢è¿æ»¤åæ°ç±»ï¼ç¨äºè®¾ç½®æµ·å¾æ¥è¯¢çè¿æ»¤åæ°ãåæ¬ï¼ç©æ ä»£ç ãç©æ å¯åºç¨å¯¹è±¡çéæ©ï¼æ¯å¦æ¥è¯¢ç¹ãçº¿æé¢ï¼ãå±æ§å­æ®µè¿æ»¤æ¡ä»¶ã
 * @param {Object} options - åæ°ã 
 * @param {string} options.attributeFilter - å±æ§å­æ®µè¿æ»¤æ¡ä»¶ã 
 * @param {number} options.chartFeatureInfoSpecCode - æ¥è¯¢çç©æ ä»£å·ã
 * @param {boolean} [options.isQueryPoint] - æ¯å¦æ¥è¯¢ç¹ã 
 * @param {boolean} [options.isQueryLine] - æ¯å¦æ¥è¯¢çº¿ã 
 * @param {boolean} [options.isQueryRegion] - æ¯å¦æ¥è¯¢é¢ã 
 */

var ChartQueryFilterParameter = /*#__PURE__*/function () {
  function ChartQueryFilterParameter(options) {
    ChartQueryFilterParameter_classCallCheck(this, ChartQueryFilterParameter);

    /**
     * @member {boolean} [SuperMap.ChartQueryFilterParameter.prototype.isQueryPoint]
     * @description æ¯å¦æ¥è¯¢ç¹ã
     */
    this.isQueryPoint = null;
    /**
     * @member {boolean} [SuperMap.ChartQueryFilterParameter.prototype.isQueryLine]
     * @description æ¯å¦æ¥è¯¢çº¿ã
     */

    this.isQueryLine = null;
    /**
     * @member {boolean} [SuperMap.ChartQueryFilterParameter.prototype.isQueryRegion]
     * @description æ¯å¦æ¥è¯¢é¢ã
     */

    this.isQueryRegion = null;
    /**
     * @member {string} SuperMap.ChartQueryFilterParameter.prototype.attributeFilter
     * @description å±æ§å­æ®µè¿æ»¤æ¡ä»¶ã
     */

    this.attributeFilter = null;
    /**
     * @member {number} SuperMap.ChartQueryFilterParameter.prototype.chartFeatureInfoSpecCode
     * @description æ¥è¯¢çç©æ ä»£å·ã
     */

    this.chartFeatureInfoSpecCode = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.ChartQueryFilterParameter";
  }
  /**
   * @function SuperMap.ChartQueryFilterParameter.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ChartQueryFilterParameter_createClass(ChartQueryFilterParameter, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.isQueryPoint = null;
      me.isQueryLine = null;
      me.isQueryRegion = null;
      me.attributeFilter = null;
      me.chartFeatureInfoSpecCode = null;
    }
    /**
     * @function SuperMap.ChartQueryFilterParameter.prototype.toJson
     * @description å°å±æ§ä¿¡æ¯è½¬åæ JSON æ ¼å¼å­ç¬¦ä¸²ã
     */

  }, {
    key: "toJson",
    value: function toJson() {
      var json = "";
      json += "\"isQueryPoint\":" + this.isQueryPoint + ",";
      json += "\"isQueryLine\":" + this.isQueryLine + ",";
      json += "\"isQueryRegion\":" + this.isQueryRegion + ",";

      if (this.attributeFilter) {
        json += "\"attributeFilter\": \"" + this.attributeFilter + "\",";
      }

      json += "\"chartFeatureInfoSpecCode\":" + this.chartFeatureInfoSpecCode;
      json = "{" + json + "}";
      return json;
    }
  }]);

  return ChartQueryFilterParameter;
}();
SuperMap.ChartQueryFilterParameter = ChartQueryFilterParameter;
// CONCATENATED MODULE: ./src/common/iServer/ChartQueryParameters.js
function ChartQueryParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ChartQueryParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ChartQueryParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) ChartQueryParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) ChartQueryParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.ChartQueryParameters
 * @category iServer Map Chart
 * @classdesc æµ·å¾æ¥è¯¢åæ°ç±»ï¼è¯¥ç±»ç¨äºè®¾ç½®æµ·å¾æ¥è¯¢æ¶çç¸å³åæ°ï¼æµ·å¾æ¥è¯¢åä¸ºæµ·å¾å±æ§æ¥è¯¢åæµ·å¾èå´æ¥è¯¢ä¸¤ç±»ï¼éè¿å±æ§ queryMode æå®æ¥è¯¢æ¨¡å¼ã
 *            å¿è®¾å±æ§æï¼queryModeãchartLayerNamesãchartQueryFilterParametersãå½è¿è¡æµ·å¾èå´æ¥è¯¢æ¶ï¼å¿è®¾å±æ§è¿åæ¬ boundsã
 * @param {Object} options - åæ°ã 
 * @param {string} options.queryMode - æµ·å¾æ¥è¯¢æ¨¡å¼ç±»åï¼æ¯æä¸¤ç§æ¥è¯¢æ¹å¼ï¼æµ·å¾å±æ§æ¥è¯¢ï¼"ChartAttributeQuery"ï¼åæµ·å¾ç©ºé´æ¥è¯¢ï¼"ChartBoundsQuery"ï¼ã 
 * @param {Array.<string>} options.chartLayerNames - æ¥è¯¢çæµ·å¾å¾å±çåç§°ã
 * @param {Array.<{SuperMap.ChartQueryFilterParameter}>} options.chartQueryFilterParameters - æµ·å¾æ¥è¯¢è¿æ»¤åæ°ãåæ¬ï¼ç©æ ä»£ç ãç©æ å¯åºç¨å¯¹è±¡çéæ©ï¼æ¯å¦æ¥è¯¢ç¹ãçº¿æé¢ï¼ãå±æ§å­æ®µè¿æ»¤æ¡ä»¶ã 
 * @param {(SuperMap.Bounds|L.Bounds|ol.extent)} [options.bounds] - æµ·å¾æ¥è¯¢èå´ãå½è¿è¡æµ·å¾èå´æ¥è¯¢æ¶ï¼æ­¤åæ°ä¸ºå¿éã
 * @param {boolean} [options.returnContent=true] - è·åæè®¾ç½®æ¯è¿åæ¥è¯¢ç»æè®°å½é recordsetsï¼è¿æ¯è¿åæ¥è¯¢ç»æçèµæº resourceInfoã 
 * @param {number} [options.startRecord=0] - æ¥è¯¢èµ·å§è®°å½ä½ç½®ã 
 * @param {number} [options.expectCount] - æææ¥è¯¢ç»æè¿åçè®°å½æ°ï¼è¯¥å¼å¤§äº0ã
 */

var ChartQueryParameters = /*#__PURE__*/function () {
  function ChartQueryParameters(options) {
    ChartQueryParameters_classCallCheck(this, ChartQueryParameters);

    /**
     * @member {string} SuperMap.ChartQueryParameters.prototype.queryMode
     * @description æµ·å¾æ¥è¯¢æ¨¡å¼ç±»åï¼æ¯æä¸¤ç§æ¥è¯¢æ¹å¼ï¼æµ·å¾å±æ§æ¥è¯¢ï¼"ChartAttributeQuery"ï¼åæµ·å¾ç©ºé´æ¥è¯¢ï¼"ChartBoundsQuery"ï¼ ã
     */
    this.queryMode = null;
    /**
     * @member {(SuperMap.Bounds|L.Bounds|ol.extent)} SuperMap.ChartQueryParameters.prototype.bounds
     * @description æµ·å¾æ¥è¯¢èå´ã
     */

    this.bounds = null;
    /**
     * @member {Array.<string>} SuperMap.ChartQueryParameters.prototype.chartLayerNames
     * @description æ¥è¯¢çæµ·å¾å¾å±çåç§°ã
     */

    this.chartLayerNames = null;
    /**
     * @member {Array.<SuperMap.ChartQueryFilterParameter>} SuperMap.ChartQueryParameters.prototype.chartQueryFilterParameters
     * @description æµ·å¾æ¥è¯¢è¿æ»¤åæ°ãåæ¬ï¼ç©æ ä»£ç ãç©æ å¯åºç¨å¯¹è±¡çéæ©ï¼æ¯å¦æ¥è¯¢ç¹ãçº¿æé¢ï¼ãå±æ§å­æ®µè¿æ»¤æ¡ä»¶ã
     */

    this.chartQueryFilterParameters = null;
    /**
     * @member {boolean} [SuperMap.ChartQueryParameters.prototype.returnContent=true]
     * @description è·åæè®¾ç½®æ¯è¿åæ¥è¯¢ç»æè®°å½é recordsetsï¼è¿æ¯è¿åæ¥è¯¢ç»æçèµæº resourceInfoã
     */

    this.returnContent = true;
    /**
     * @member {number} [SuperMap.ChartQueryParameters.prototype.startRecord=0]
     * @description æ¥è¯¢èµ·å§è®°å½ä½ç½®ã
     */

    this.startRecord = 0;
    /**
     * @member {number} [SuperMap.ChartQueryParameters.prototype.expectCount]
     * @description æææ¥è¯¢ç»æè¿åçè®°å½æ°ï¼è¯¥å¼å¤§äº0ã
     */

    this.expectCount = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.ChartQueryParameters";
  }
  /**
   * @function SuperMap.ChartQueryParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ChartQueryParameters_createClass(ChartQueryParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.queryMode = null;
      me.bounds = null;
      me.chartLayerNames = null;
      me.chartQueryFilterParameters = null;
      me.returnContent = true;
      me.startRecord = 0;
      me.expectCount = null;
    }
    /**
     * @function SuperMap.ChartQueryParameters.prototype.getVariablesJson
     * @description å°å±æ§ä¿¡æ¯è½¬æ¢æè½å¤è¢«æå¡è¯å«ç JSON æ ¼å¼å­ç¬¦ä¸²ã
     * @returns {string} JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "getVariablesJson",
    value: function getVariablesJson() {
      var json = "";
      json += "\"queryMode\":\"" + this.queryMode + "\",";

      if (this.chartLayerNames && this.chartLayerNames.length) {
        var chartLayersArray = [];
        var layerLength = this.chartLayerNames.length;

        for (var i = 0; i < layerLength; i++) {
          chartLayersArray.push("\"" + this.chartLayerNames[i] + "\"");
        }

        var layerNames = "[" + chartLayersArray.join(",") + "]";
        json += "\"chartLayerNames\":" + layerNames + ",";
      }

      if (this.queryMode === "ChartBoundsQuery" && this.bounds) {
        json += "\"bounds\":" + "{" + "\"leftBottom\":" + "{" + "\"x\":" + this.bounds.left + "," + "\"y\":" + this.bounds.bottom + "}" + "," + "\"rightTop\":" + "{" + "\"x\":" + this.bounds.right + "," + "\"y\":" + this.bounds.top + "}" + "},";
      }

      if (this.chartQueryFilterParameters && this.chartQueryFilterParameters.length) {
        var chartParamArray = [];
        var chartLength = this.chartQueryFilterParameters.length;

        for (var j = 0; j < chartLength; j++) {
          var chartQueryFilterParameter = this.chartQueryFilterParameters[j];

          if (!(chartQueryFilterParameter instanceof ChartQueryFilterParameter)) {
            continue;
          }

          chartParamArray.push(chartQueryFilterParameter.toJson());
        }

        var chartParamsJson = "[" + chartParamArray.join(",") + "]";
        chartParamsJson = "\"chartQueryParams\":" + chartParamsJson + ",";
        chartParamsJson += "\"startRecord\":" + this.startRecord + ",";
        chartParamsJson += "\"expectCount\":" + this.expectCount;
        chartParamsJson = "{" + chartParamsJson + "}";
        json += "\"chartQueryParameters\":" + chartParamsJson;
      }

      json = "{" + json + "}";
      return json;
    }
  }]);

  return ChartQueryParameters;
}();
SuperMap.ChartQueryParameters = ChartQueryParameters;
// CONCATENATED MODULE: ./src/common/iServer/QueryParameters.js
function QueryParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function QueryParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function QueryParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) QueryParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) QueryParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.QueryParameters
 * @category  iServer Map QueryResults
 * @classdesc æ¥è¯¢åæ°åºç±»ãè·ç¦»æ¥è¯¢ãSQL æ¥è¯¢ãå ä½å°ç©æ¥è¯¢ç­åèªçåæ°åç»§æ¿æ­¤ç±»ã
 * @param {Object} options - åæ°ã
 * @param {Array.<SuperMap.FilterParameter>} options.queryParams - æ¥è¯¢è¿æ»¤æ¡ä»¶åæ°æ°ç»ã
 * @param {string} [options.customParams] - èªå®ä¹åæ°ï¼ä¾æ©å±ä½¿ç¨ã
 * @param {Object} [options.prjCoordSys] - èªå®ä¹åæ°ï¼ä¾ SuperMap Online æä¾çå¨ææå½±æ¥è¯¢æ©å±ä½¿ç¨ãå¦ {"epsgCode":3857}ã
 * @param {number} [options.expectCount=100000] - ææè¿åç»æè®°å½ä¸ªæ°ã
 * @param {SuperMap.GeometryType} [options.networkType=SuperMap.GeometryType.LINE] - ç½ç»æ°æ®éå¯¹åºçæ¥è¯¢ç±»åã
 * @param {SuperMap.QueryOption} [options.queryOption=SuperMap.ATTRIBUTEANDGEOMETRY] - æ¥è¯¢ç»æç±»åæä¸¾ç±»ã
 * @param {number} [options.startRecord=0] - æ¥è¯¢èµ·å§è®°å½å·ã
 * @param {number} [options.holdTime=10] - èµæºå¨æå¡ç«¯ä¿å­çæ¶é´,åä½ä¸ºåéã
 * @param {boolean} [options.returnCustomResult=false] - ä»ä¾ä¸ç»´ä½¿ç¨ã
 * @param {boolean} [options.returnFeatureWithFieldCaption = false] - è¿åçæ¥è¯¢ç»æè¦ç´ å­æ®µæ è¯æ¯å¦ä¸ºå­æ®µå«åãä¸º false æ¶ï¼è¿åçæ¯å­æ®µåï¼ä¸º true æ¶ï¼è¿åçæ¯å­æ®µå«åã
 */

var QueryParameters = /*#__PURE__*/function () {
  function QueryParameters(options) {
    QueryParameters_classCallCheck(this, QueryParameters);

    if (!options) {
      return;
    }
    /**
     * @member {string} [SuperMap.QueryParameters.prototype.customParams]
     * @description èªå®ä¹åæ°ï¼ä¾æ©å±ä½¿ç¨ã
     */


    this.customParams = null;
    /**
     * @member {Object} [SuperMap.QueryParameters.prototype.prjCoordSys]
     * @description èªå®ä¹åæ°ï¼ä¾ SuperMap Online æä¾çå¨ææå½±æ¥è¯¢æ©å±ä½¿ç¨ãå¦ {"epsgCode":3857}
     */

    this.prjCoordSys = null;
    /**
     * @member {number} [SuperMap.QueryParameters.prototype.expectCount=100000]
     * @description ææè¿åç»æè®°å½ä¸ªæ°ï¼é»è®¤è¿å100000æ¡æ¥è¯¢è®°å½ï¼
     *              å¦æå®éä¸è¶³100000æ¡åè¿åå®éè®°å½æ¡æ°ã
     */

    this.expectCount = 100000;
    /**
     * @member {SuperMap.GeometryType} [SuperMap.QueryParameters.prototype.networkType=SuperMap.GeometryType.LINE]
     * @description ç½ç»æ°æ®éå¯¹åºçæ¥è¯¢ç±»åï¼åä¸ºç¹åçº¿ä¸¤ç§ç±»åã
     */

    this.networkType = GeometryType.LINE;
    /**
     * @member {SuperMap.QueryOption} [SuperMap.QueryParameters.prototype.queryOption=SuperMap.QueryOption.ATTRIBUTEANDGEOMETRY]
     * @description æ¥è¯¢ç»æç±»åæä¸¾ç±»ã
     *              è¯¥ç±»æè¿°æ¥è¯¢ç»æè¿åç±»åï¼åæ¬åªè¿åå±æ§ã
     *              åªè¿åå ä½å®ä½ä»¥åè¿åå±æ§åå ä½å®ä½ã
     */

    this.queryOption = QueryOption.ATTRIBUTEANDGEOMETRY;
    /**
     * @member {Array.<SuperMap.FilterParameter>} SuperMap.QueryParameters.prototype.queryParams
     * @description æ¥è¯¢è¿æ»¤æ¡ä»¶åæ°æ°ç»ã
     *              è¯¥ç±»ç¨äºè®¾ç½®æ¥è¯¢æ°æ®éçæ¥è¯¢è¿æ»¤åæ°ã
     */

    this.queryParams = null;
    /**
     * @member {number} [SuperMap.QueryParameters.prototype.startRecord=0]
     * @description æ¥è¯¢èµ·å§è®°å½å·ã
     */

    this.startRecord = 0;
    /**
     * @member {number} [SuperMap.QueryParameters.prototype.holdTime=10]
     * @description èµæºå¨æå¡ç«¯ä¿å­çæ¶é´ï¼åä½ä¸ºåéã
     */

    this.holdTime = 10;
    /**
     * @member {boolean} [SuperMap.QueryParameters.prototype.returnCustomResult=false]
     * @description ä»ä¾ä¸ç»´ä½¿ç¨ã
     */

    this.returnCustomResult = false;
    /**
     * @member {boolean} [SuperMap.QueryParameters.prototype.returnFeatureWithFieldCaption=false]
     * @description è¿åçæ¥è¯¢ç»æè¦ç´ å­æ®µæ è¯æ¯å¦ä¸ºå­æ®µå«åãä¸º false æ¶ï¼è¿åçæ¯å­æ®µåï¼ä¸º true æ¶ï¼è¿åçæ¯å­æ®µå«åã
     */

    this.returnFeatureWithFieldCaption = false;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.QueryParameters";
  }
  /**
   * @function SuperMap.QueryParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  QueryParameters_createClass(QueryParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.customParams = null;
      me.expectCount = null;
      me.networkType = null;
      me.queryOption = null;

      if (me.queryParams) {
        for (var i = 0, qps = me.queryParams, len = qps.length; i < len; i++) {
          qps[i].destroy();
        }

        me.queryParams = null;
      }

      me.startRecord = null;
      me.holdTime = null;
      me.returnCustomResult = null;
      me.prjCoordSys = null;
    }
  }]);

  return QueryParameters;
}();
SuperMap.QueryParameters = QueryParameters;
// CONCATENATED MODULE: ./src/common/iServer/ChartQueryService.js
function ChartQueryService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { ChartQueryService_typeof = function _typeof(obj) { return typeof obj; }; } else { ChartQueryService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return ChartQueryService_typeof(obj); }

function ChartQueryService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ChartQueryService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ChartQueryService_createClass(Constructor, protoProps, staticProps) { if (protoProps) ChartQueryService_defineProperties(Constructor.prototype, protoProps); if (staticProps) ChartQueryService_defineProperties(Constructor, staticProps); return Constructor; }

function ChartQueryService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) ChartQueryService_setPrototypeOf(subClass, superClass); }

function ChartQueryService_setPrototypeOf(o, p) { ChartQueryService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return ChartQueryService_setPrototypeOf(o, p); }

function ChartQueryService_createSuper(Derived) { var hasNativeReflectConstruct = ChartQueryService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = ChartQueryService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = ChartQueryService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return ChartQueryService_possibleConstructorReturn(this, result); }; }

function ChartQueryService_possibleConstructorReturn(self, call) { if (call && (ChartQueryService_typeof(call) === "object" || typeof call === "function")) { return call; } return ChartQueryService_assertThisInitialized(self); }

function ChartQueryService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function ChartQueryService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ChartQueryService_getPrototypeOf(o) { ChartQueryService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return ChartQueryService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/







/**
 * @class SuperMap.ChartQueryService
 * @category  iServer Map Chart
 * @classdesc æµ·å¾æ¥è¯¢æå¡ç±»ãè¯¥ç±»è´è´£å°æµ·å¾æ¥è¯¢æéåæ°ï¼ChartQueryParametersï¼ä¼ éè³æå¡ç«¯ï¼å¹¶è·åæå¡ç«¯çè¿åç»æã
 *      ç¨æ·å¯ä»¥éè¿ä¸¤ç§æ¹å¼è·åæ¥è¯¢ç»æï¼
 *      1.éè¿ AsyncResponder ç±»è·åï¼æ¨èä½¿ç¨ï¼ï¼
 *      2.éè¿çå¬ QueryEvent.PROCESS_COMPLETE äºä»¶è·åã
 * @extends {SuperMap.CommonServiceBase}
 * @param {string} url - å°å¾æ¥è¯¢æå¡è®¿é®å°åãå¦ï¼"http://localhost:8090/iserver/services/map-ChartW/rest/maps/æµ·å¾"ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæprocessCompletedå±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailedå±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã
 * @param {SuperMap.DataFormat} [options.format] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º"ISERVER","GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @example
 * ä¸é¢ç¤ºä¾æ¾ç¤ºäºå¦ä½è¿è¡æµ·å¾å±æ§æ¥è¯¢ï¼
 * var nameArray = ["GB4X0000_52000"];
 * var chartQueryFilterParameter = new ChartQueryFilterParameter({
 *       isQueryPoint:true,
 *        isQueryLine:true,
 *        isQueryRegion:true,
 *        attributeFilter:"SmID<10",
 *        chartFeatureInfoSpecCode:1
 *    });
 *
 * var chartQueryParameters = new SuperMap.ChartQueryParameters({
 *        queryMode:"ChartAttributeQuery",
 *        chartLayerNames:nameArray,
 *        returnContent:true,
 *        chartQueryFilterParameters:[chartQueryFilterParameter]
 *    });
 *
 * var chartQueryService = new SuperMap.ChartQueryService(url);
 *
 * chartQueryService.events.on({
 *        "processCompleted":processCompleted,
 *        "processFailed":processFailed
 *    });
 * chartQueryService.processAsync(chartQueryParameters);
 */

var ChartQueryService = /*#__PURE__*/function (_CommonServiceBase) {
  ChartQueryService_inherits(ChartQueryService, _CommonServiceBase);

  var _super = ChartQueryService_createSuper(ChartQueryService);

  function ChartQueryService(url, options) {
    var _this;

    ChartQueryService_classCallCheck(this, ChartQueryService);

    _this = _super.call(this, url, options);
    options = options || {};
    /**
     * @member {boolean} SuperMap.ChartQueryService.prototype.returnContent
     * @description æ¯å¦ç«å³è¿åæ°åå»ºèµæºçè¡¨è¿°è¿æ¯è¿åæ°èµæºçURIã
     */

    _this.returnContent = null;
    /**
     * @member {SuperMap.DataFormat} SuperMap.ChartQueryService.prototype.format
     * @description æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æiServerJSON åGeoJSONä¸¤ç§æ ¼å¼
     *              åæ°æ ¼å¼ä¸º"ISERVER","GEOJSON",GEOJSON
     */

    _this.format = DataFormat.GEOJSON;
    Util.extend(ChartQueryService_assertThisInitialized(_this), options);

    var me = ChartQueryService_assertThisInitialized(_this);

    if (options.format) {
      me.format = options.format.toUpperCase();
    }

    if (!me.url) {
      return ChartQueryService_possibleConstructorReturn(_this);
    }

    me.url = Util.urlPathAppend(me.url, 'queryResults');
    _this.CLASS_NAME = "SuperMap.ChartQueryService";
    return _this;
  }
  /**
   * @function SuperMap.ChartQueryService.prototype.destroy
   * @override
   */


  ChartQueryService_createClass(ChartQueryService, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      CommonServiceBase.prototype.destroy.apply(this, arguments);
      me.returnContent = null;
      me.format = null;
    }
    /**
     * @function SuperMap.ChartQueryService.prototype.processAsync
     * @description ä½¿ç¨æå¡å°å URL å®ä¾å ChartQueryService å¯¹è±¡ã
     * @param {SuperMap.ChartQueryParameters} params - æ¥è¯¢åæ°ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      //todoéç¹éè¦æ·»å ä»£ç çå°æ¹
      if (!(params instanceof ChartQueryParameters)) {
        return;
      }

      var me = this,
          jsonParameters;
      me.returnContent = params.returnContent;
      jsonParameters = params.getVariablesJson();

      if (me.returnContent) {
        me.url = Util.urlAppend(me.url, 'returnContent=true');
      }

      me.request({
        method: "POST",
        data: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.ChartQueryService.prototype.serviceProcessCompleted
     * @description æ¥è¯¢å®æï¼æ§è¡æ­¤æ¹æ³ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     */

  }, {
    key: "serviceProcessCompleted",
    value: function serviceProcessCompleted(result) {
      var me = this;
      result = Util.transformResult(result);

      if (result && result.recordsets && me.format === DataFormat.GEOJSON) {
        for (var i = 0, recordsets = result.recordsets, len = recordsets.length; i < len; i++) {
          if (recordsets[i].features) {
            var geoJSONFormat = new GeoJSON();
            recordsets[i].features = geoJSONFormat.toGeoJSON(recordsets[i].features);
          }
        }
      }

      me.events.triggerEvent("processCompleted", {
        result: result
      });
    }
    /**
     * @function SuperMap.ChartQueryService.prototype.getQueryParameters
     * @description å° JSON å¯¹è±¡è¡¨ç¤ºçæ¥è¯¢åæ°è½¬åä¸º QueryParameters å¯¹è±¡ã
     * @param {Object} params - JSON å­ç¬¦ä¸²è¡¨ç¤ºçæ¥è¯¢åæ°ã
     * @returns {SuperMap.QueryParameters} è¿åæ¥è¯¢ç»æ
     */

  }, {
    key: "getQueryParameters",
    value: function getQueryParameters(params) {
      return new QueryParameters({
        queryMode: params.queryMode,
        bounds: params.bounds,
        chartLayerNames: params.chartLayerNames,
        chartQueryFilterParameters: params.chartQueryFilterParameters,
        returnContent: params.returnContent
      });
    }
  }]);

  return ChartQueryService;
}(CommonServiceBase);
SuperMap.ChartQueryService = ChartQueryService;
// CONCATENATED MODULE: ./src/common/iServer/ClipParameter.js
function ClipParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ClipParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ClipParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) ClipParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) ClipParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.ClipParameter
 * @category iServer SpatialAnalyst InterpolationAnalyst
 * @classdesc ç¨äºè£åªçåæ°ã
 * @description ä¼åä½¿ç¨ç¨æ·æå®çè£åªåºåå¤è¾¹å½¢è¿è¡è£åªï¼ä¹å¯ä»¥éè¿æå®æ°æ®æºåæ°æ®éåï¼ä»èä½¿ç¨æå®æ°æ®éçè¾¹çå¤è¾¹å½¢è¿è¡è£åªã
 * @param {Object} options - åæ°ã 
 * @param {string} [options.clipDatasetName] - è£åªçæ°æ®éåã 
 * @param {string} [options.clipDatasourceName] - è£åªçæ°æ®éæå¨æ°æ®æºçåå­ã 
 * @param {(SuperMap.Geometry.Polygon|L.Polygon|L.GeoJSON|ol.geom.Polygon|ol.format.GeoJSON)} [options.clipRegion] - ç¨æ·æå®çè£åªåºåã 
 * @param {boolean} [options.isClipInRegion=true] - æ¯å¦å¯¹è£åªåºåçæ°æ®éè¿è¡è£åªã 
 * @param {boolean} [options.isExactClip=true] - æ¯å¦ä½¿ç¨ç²¾ç¡®è£åªã
 */

var ClipParameter = /*#__PURE__*/function () {
  function ClipParameter(options) {
    ClipParameter_classCallCheck(this, ClipParameter);

    /**
     * @member {string} SuperMap.ClipParameter.prototype.clipDatasetName
     * @description ç¨äºè£åªçæ°æ®éåï¼clipDatasetName ä¸ clipRegion å¿é¡»è®¾ç½®ä¸ä¸ªã
     */
    this.clipDatasetName = null;
    /**
     * @member {string} SuperMap.ClipParameter.prototype.clipDatasourceName
     * @description ç¨äºè£åªçæ°æ®éæå¨æ°æ®æºçåå­ãå½ clipRegion ä¸è®¾ç½®æ¶èµ·ä½ç¨ã
     */

    this.clipDatasourceName = null;
    /**
     * @member {(SuperMap.Geometry.Polygon|L.Polygon|L.GeoJSON|ol.geom.Polygon|ol.format.GeoJSON)} SuperMap.ClipParameter.prototype.clipRegion
     * @description ç¨æ·æå®çè£åªåºåï¼ä¼åä½¿ç¨ï¼clipDatasetName ä¸ clipRegion å¿é¡»è®¾ç½®ä¸ä¸ªã 
     */

    this.clipRegion = null;
    /**
     * @member {boolean} [SuperMap.ClipParameter.prototype.isClipInRegion=true]
     * @description æ¯å¦å¯¹è£åªåºåçæ°æ®éè¿è¡è£åªãè¥ä¸º trueï¼åå¯¹è£åªåºååçç»æè¿è¡è£åªï¼è¥ä¸º falseï¼åå¯¹è£åªåºåå¤çç»æè¿è¡è£åªã 
     */

    this.isClipInRegion = true;
    /**
     * @member {boolean} [SuperMap.ClipParameter.prototype.isExactClip=true]
     * @description æ¯å¦ä½¿ç¨ç²¾ç¡®è£åªã
     */

    this.isExactClip = null;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ClipParameter";
  }
  /**
   * @function SuperMap.ClipParameter.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ClipParameter_createClass(ClipParameter, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.clipDatasetName = null;
      me.clipDatasourceName = null;
      me.clipRegion = null;
      me.isClipInRegion = null;
      me.isExactClip = null;
    }
    /**
     * @function SuperMap.ClipParameter.prototype.toJSON
     * @description å° ClipParameter å¯¹è±¡è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @returns {string} è¿åè½¬æ¢åç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "toJSON",
    value: function toJSON() {
      return Util.toJSON({
        isClipInRegion: this.isClipInRegion,
        clipDatasetName: this.clipDatasetName,
        clipDatasourceName: this.clipDatasourceName,
        isExactClip: this.isExactClip,
        clipRegion: ServerGeometry.fromGeometry(this.clipRegion)
      });
    }
  }]);

  return ClipParameter;
}();
SuperMap.ClipParameter = ClipParameter;
// CONCATENATED MODULE: ./src/common/iServer/ColorDictionary.js
function ColorDictionary_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ColorDictionary_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ColorDictionary_createClass(Constructor, protoProps, staticProps) { if (protoProps) ColorDictionary_defineProperties(Constructor.prototype, protoProps); if (staticProps) ColorDictionary_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.ColorDictionary
 * @category  iServer Map Theme
 * @classdesc é¢è²å¯¹ç§è¡¨ç±»ã
 * @description é¢è²å¯¹ç§è¡¨ä¸­çé®åä¸ºå·ä½çé«ç¨å¼ï¼é®å¼è¡¨ç¤ºè¯¥é«ç¨å¼è¦æ¾ç¤ºçé¢è²ãå¯¹äºæ æ ¼å¾å±ä¸­é«ç¨å¼å°äºé¢è²å¯¹ç§è¡¨ä¸­é«ç¨æå°å¼çç¹ä½¿ç¨é¢è²å¯¹ç§è¡¨ä¸­é«ç¨æå°å¼å¯¹åºçé¢è²ï¼å¯¹äºæ æ ¼å¾å±ä¸­é«ç¨å¼å¤§äºé¢è²å¯¹ç§è¡¨ä¸­é«ç¨æå¤§å¼çç¹ä½¿ç¨é¢è²å¯¹ç§è¡¨ä¸­é«ç¨æå¤§å¼å¯¹åºçé¢è²ï¼å¯¹äºæ æ ¼å¾å±ä¸­é«ç¨å¼å¨é¢è²å¯¹ç§è¡¨ä¸­æ²¡æå¯¹åºé¢è²çç¹ï¼åæ¥æ¾é¢è²å¯¹ç§è¡¨ä¸­ä¸å½åé«ç¨å¼ç¸é»çä¸¤ä¸ªé«ç¨å¯¹åºçé¢è²ï¼ç¶åéè¿æ¸åè¿ç®è¦æ¾ç¤ºçé¢è²ãå¦æè®¾ç½®äºé¢è²å¯¹ç§è¡¨çè¯ï¼åé¢è²è¡¨è®¾ç½®æ æã
 * @param {Object} options - åæ°ã 
 * @param {number} options.elevation - é«ç¨å¼ã 
 * @param {SuperMap.ServerColor} options.color - æå¡ç«¯é¢è²ç±»ã
 */

var ColorDictionary = /*#__PURE__*/function () {
  function ColorDictionary(options) {
    ColorDictionary_classCallCheck(this, ColorDictionary);

    options = options || {};
    /**
     * @member {number} SuperMap.ColorDictionary.prototype.elevation
     * @description é«ç¨å¼ã
     */

    this.elevation = null;
    /**
     * @member {SuperMap.ServerColor} SuperMap.ColorDictionary.prototype.color
     * @description æå¡ç«¯é¢è²ç±»ã
     */

    this.color = null;
    Util.extend(this, options);
    var me = this,
        c = me.color;

    if (c) {
      me.color = new ServerColor(c.red, c.green, c.blue);
    }

    this.CLASS_NAME = "SuperMap.ColorDictionary";
  }
  /**
   * @function SuperMap.ColorDictionary.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ColorDictionary_createClass(ColorDictionary, [{
    key: "destroy",
    value: function destroy() {
      Util.reset(this);
    }
    /**
     * @function SuperMap.ColorDictionary.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     * @returns {Object} JSON å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      var dataObj = {};
      dataObj = Util.copyAttributes(dataObj, this);
      return dataObj;
    }
  }]);

  return ColorDictionary;
}();
SuperMap.ColorDictionary = ColorDictionary;
// CONCATENATED MODULE: ./src/common/iServer/TransportationAnalystResultSetting.js
function TransportationAnalystResultSetting_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function TransportationAnalystResultSetting_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function TransportationAnalystResultSetting_createClass(Constructor, protoProps, staticProps) { if (protoProps) TransportationAnalystResultSetting_defineProperties(Constructor.prototype, protoProps); if (staticProps) TransportationAnalystResultSetting_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.TransportationAnalystResultSetting
 * @category  iServer NetworkAnalyst
 * @classdesc äº¤éç½ç»åæç»æåæ°ç±»ã
 * @description éè¿è¯¥ç±»è®¾ç½®äº¤éç½ç»åæè¿åçç»æï¼åæ¬æ¯å¦è¿åå¾çãæ¯å¦è¿åå¼§æ®µç©ºé´ä¿¡æ¯ãæ¯å¦è¿åç»ç¹ç©ºé´ä¿¡æ¯ç­ã
 * @param {Object} options - åæ°ã
 * @param {boolean} [options.returnEdgeFeatures=false] - æ¯å¦å¨åæç»æä¸­åå«å¼§æ®µè¦ç´ éåã
 * @param {boolean} [options.returnEdgeGeometry=false] - è¿åçå¼§æ®µè¦ç´ éåä¸­æ¯å¦åå«å ä½å¯¹è±¡ä¿¡æ¯ã
 * @param {boolean} [options.returnEdgeIDs=false] - è¿åç»æä¸­æ¯å¦åå«ç»è¿å¼§æ®µ ID éåã
 * @param {boolean} [options.returnNodeFeatures=false] - æ¯å¦å¨åæç»æä¸­åå«ç»ç¹è¦ç´ éåã
 * @param {boolean} [options.returnNodeGeometry=false] - è¿åçç»ç¹è¦ç´ éåä¸­æ¯å¦åå«å ä½å¯¹è±¡ä¿¡æ¯ã
 * @param {boolean} [options.returnNodeIDs=false] - è¿åç»æä¸­æ¯å¦åå«ç»è¿ç»ç¹ ID éåã
 * @param {boolean} [options.returnPathGuides=false] - è¿ååæç»æä¸­æ¯å¦åå«è¡é©¶å¯¼å¼éåã
 * @param {boolean} [options.returnRoutes=false] - è¿ååæç»æä¸­æ¯å¦åå«è·¯ç±å¯¹è±¡çéåã
 */

var TransportationAnalystResultSetting = /*#__PURE__*/function () {
  function TransportationAnalystResultSetting(options) {
    TransportationAnalystResultSetting_classCallCheck(this, TransportationAnalystResultSetting);

    if (!options) {
      return;
    }
    /**
     * @member {boolean} SuperMap.TransportationAnalystResultSetting.prototype.returnEdgeFeatures
     * @description æ¯å¦å¨åæç»æä¸­åå«å¼§æ®µè¦ç´ éåãå¼§æ®µè¦ç´ åæ¬å¼§æ®µçç©ºé´ä¿¡æ¯åå±æ§ä¿¡æ¯ã
     */


    this.returnEdgeFeatures = false;
    /**
     * @member {boolean} [SuperMap.TransportationAnalystResultSetting.prototype.returnEdgeGeometry=false]
     * @description è¿åçå¼§æ®µè¦ç´ éåä¸­æ¯å¦åå«å ä½å¯¹è±¡ä¿¡æ¯ã
     */

    this.returnEdgeGeometry = false;
    /**
     * @member {boolean} [SuperMap.TransportationAnalystResultSetting.prototype.returnEdgeIDs=false]
     * @description è¿åç»æä¸­æ¯å¦åå«ç»è¿å¼§æ®µ ID éåã
     */

    this.returnEdgeIDs = false;
    /**
     * @member {boolean} [SuperMap.TransportationAnalystResultSetting.prototype.returnNodeFeatures=false]
     * @description æ¯å¦å¨åæç»æä¸­åå«ç»ç¹è¦ç´ éåã
     * ç»ç¹è¦ç´ åæ¬ç»ç¹çç©ºé´ä¿¡æ¯åå±æ§ä¿¡æ¯ãå¶ä¸­è¿åçç»ç¹è¦ç´ æ¯å¦åå«ç©ºé´ä¿¡æ¯å¯éè¿ returnNodeGeometry å­æ®µè®¾ç½®ã
     */

    this.returnNodeFeatures = false;
    /**
     * @member {boolean} [SuperMap.TransportationAnalystResultSetting.prototype.returnNodeGeometry=false]
     * @description è¿åçç»ç¹è¦ç´ éåä¸­æ¯å¦åå«å ä½å¯¹è±¡ä¿¡æ¯ã
     */

    this.returnNodeGeometry = false;
    /**
     * @member {boolean} [SuperMap.TransportationAnalystResultSetting.prototype.returnNodeIDs=false]
     * @description è¿åç»æä¸­æ¯å¦åå«ç»è¿ç»ç¹ ID éåã
     */

    this.returnNodeIDs = false;
    /**
     * @member {boolean} SuperMap.TransportationAnalystResultSetting.prototype.returnPathGuides
     * @description è¿ååæç»æä¸­æ¯å¦åå«è¡é©¶å¯¼å¼éåã
     */

    this.returnPathGuides = false;
    /**
     * @member {boolean} SuperMap.TransportationAnalystResultSetting.prototype.returnRoutes
     * @description è¿ååæç»æä¸­æ¯å¦åå«è·¯ç±å¯¹è±¡çéåã
     */

    this.returnRoutes = false;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.TransportationAnalystResultSetting";
  }
  /**
   * @function SuperMap.TransportationAnalystResultSetting.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  TransportationAnalystResultSetting_createClass(TransportationAnalystResultSetting, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.returnEdgeFeatures = null;
      me.returnEdgeGeometry = null;
      me.returnEdgeIDs = null;
      me.returnNodeFeatures = null;
      me.returnNodeGeometry = null;
      me.returnNodeIDs = null;
      me.returnPathGuides = null;
      me.returnRoutes = null;
    }
  }]);

  return TransportationAnalystResultSetting;
}();
SuperMap.TransportationAnalystResultSetting = TransportationAnalystResultSetting;
// CONCATENATED MODULE: ./src/common/iServer/TransportationAnalystParameter.js
function TransportationAnalystParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function TransportationAnalystParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function TransportationAnalystParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) TransportationAnalystParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) TransportationAnalystParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.TransportationAnalystParameter
 * @category  iServer NetworkAnalyst
 * @classdesc äº¤éç½ç»åæéç¨åæ°ç±»ã
 * @description è¯¥ç±»ä¸»è¦ç¨æ¥æä¾äº¤éç½ç»åææéçéç¨åæ°ã
 * éè¿æ¬ç±»å¯ä»¥è®¾ç½®éç¢è¾¹ãéç¢ç¹ãæå¼å­æ®µä¿¡æ¯çåç§°æ è¯ãè½¬åæå¼å­æ®µç­ä¿¡æ¯ï¼è¿å¯ä»¥å¯¹åæç»æåå«çåå®¹è¿è¡ä¸äºè®¾ç½®ã
 * @param {Object} options - åæ°ã
 * @param {Array.<number>} options.barrierEdgeIDs - ç½ç»åæä¸­éç¢å¼§æ®µç ID æ°ç»ã
 * @param {Array.<number>} options.barrierNodeIDs - ç½ç»åæä¸­éç¢ç¹ç ID æ°ç»ã
 * @param {string} options.turnWeightField - è½¬åæéå­æ®µçåç§°ã
 * @param {SuperMap.TransportationAnalystResultSetting} options.resultSetting - åæç»æè¿ååå®¹ã
 * @param {Array.<(SuperMap.Geometry.Point|L.Point|L.LatLng|ol.geom.Point)>} [options.barrierPoints] - ç½ç»åæä¸­ Point2D ç±»åçéç¢ç¹æ°ç»ã
 * @param {string} [options.weightFieldName] - é»åå­æ®µçåç§°ã
 */

var TransportationAnalystParameter = /*#__PURE__*/function () {
  function TransportationAnalystParameter(options) {
    TransportationAnalystParameter_classCallCheck(this, TransportationAnalystParameter);

    if (!options) {
      return;
    }
    /**
     * @member {Array.<number>} SuperMap.TransportationAnalystParameter.prototype.barrierEdgeIDs
     * @description ç½ç»åæä¸­éç¢å¼§æ®µç ID æ°ç»ãå¼§æ®µè®¾ç½®ä¸ºéç¢è¾¹ä¹åï¼è¡¨ç¤ºååé½ä¸éã
     */


    this.barrierEdgeIDs = null;
    /**
     * @member {Array.<number>} SuperMap.TransportationAnalystParameter.prototype.barrierNodeIDs
     * @description ç½ç»åæä¸­éç¢ç¹ç ID æ°ç»ãç»ç¹è®¾ç½®ä¸ºéç¢ç¹ä¹åï¼è¡¨ç¤ºä»»ä½æ¹åé½ä¸è½éè¿æ­¤ç»ç¹ã
     */

    this.barrierNodeIDs = null;
    /**
     * @member {Array.<(SuperMap.Geometry.Point|L.Point|L.LatLng|ol.geom.Point)>}  SuperMap.TransportationAnalystParameter.prototype.barrierPoints
     * @description ç½ç»åæä¸­ Point2D ç±»åçéç¢ç¹æ°ç»ãéç¢ç¹è¡¨ç¤ºä»»ä½æ¹åé½ä¸è½éè¿æ­¤ç¹ã</br>
     * å½åç½ç»åæåæ°ç±»ä¸­ç isAnalyzeById å±æ§è®¾ç½®ä¸º false æ¶ï¼è¯¥å±æ§æçæã
     */

    this.barrierPoints = null;
    /**
     * @member {string} [SuperMap.TransportationAnalystParameter.prototype.weightFieldName]
     * @description é»åå­æ®µçåç§°ï¼æ è¯äºè¿è¡ç½ç»åææ¶æä½¿ç¨çé»åå­æ®µï¼ä¾å¦è¡¨ç¤ºæ¶é´ãé¿åº¦ç­çå­æ®µé½å¯ä»¥ç¨ä½é»åå­æ®µã
     * è¯¥å­æ®µé»å¼ä¸ºæå¡å¨åå¸çææèè´¹å­æ®µçç¬¬ä¸ä¸ªå­æ®µã
     */

    this.weightFieldName = null;
    /**
     * @member {string} SuperMap.TransportationAnalystParameter.prototype.turnWeightField
     * @description è½¬åæéå­æ®µçåç§°ã
     */

    this.turnWeightField = null;
    /**
     *  @member {SuperMap.TransportationAnalystResultSetting} SuperMap.TransportationAnalystParameter.prototype.resultSetting
     *  @description åæç»æè¿ååå®¹ã
     */

    this.resultSetting = new TransportationAnalystResultSetting();
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.TransportationAnalystParameter";
  }
  /**
   * @function SuperMap.TransportationAnalystParameter.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  TransportationAnalystParameter_createClass(TransportationAnalystParameter, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.barrierEdgeIDs = null;
      me.barrierNodeIDs = null;
      me.weightFieldName = null;
      me.turnWeightField = null;

      if (me.resultSetting) {
        me.resultSetting.destroy();
        me.resultSetting = null;
      }

      if (me.barrierPoints && me.barrierPoints.length) {
        for (var i in me.barrierPoints) {
          me.barrierPoints[i].destroy();
        }
      }

      me.barrierPoints = null;
    }
  }]);

  return TransportationAnalystParameter;
}();
SuperMap.TransportationAnalystParameter = TransportationAnalystParameter;
// CONCATENATED MODULE: ./src/common/iServer/ComputeWeightMatrixParameters.js
function ComputeWeightMatrixParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ComputeWeightMatrixParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ComputeWeightMatrixParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) ComputeWeightMatrixParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) ComputeWeightMatrixParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.ComputeWeightMatrixParameters
 * @category iServer NetworkAnalyst WeightMatrix
 * @classdesc èè´¹ç©éµåæåæ°ç±»ãæ ¹æ®äº¤éç½ç»åæåæ°ä¸­çèè´¹å­æ®µè¿åä¸ä¸ªèè´¹ç©éµãè¯¥ç©éµæ¯ä¸ä¸ªäºç»´æ°ç»ï¼ç¨æ¥å­å¨ä»»æä¸¤ç¹é´çèµæºæ¶èã
 * @param {Object} options - åæ°ã 
 * @param {boolean} [options.isAnalyzeById=false] - æ¯å¦éè¿èç¹ ID æå®è·¯å¾åæçç»ç¹ã 
 * @param {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point|number>} options.nodes - è¦è®¡ç®èè´¹ç©éµçç¹æ°ç»ã 
 * @param {SuperMap.TransportationAnalystParameter} [options.parameter] - äº¤éç½ç»åæéç¨åæ°ã
 */

var ComputeWeightMatrixParameters = /*#__PURE__*/function () {
  function ComputeWeightMatrixParameters(options) {
    ComputeWeightMatrixParameters_classCallCheck(this, ComputeWeightMatrixParameters);

    /**
     * @member {boolean} [SuperMap.ComputeWeightMatrixParameters.prototype.isAnalyzeById=false]
     * @description æ¯å¦éè¿èç¹ ID æå®è·¯å¾åæçç»ç¹ï¼å³éè¿åæ ç¹æå®ã
     */
    this.isAnalyzeById = false;
    /**
     * @member {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point|number>} SuperMap.ComputeWeightMatrixParameters.prototype.nodes
     * @description è¦è®¡ç®èè´¹ç©éµçç¹æ°ç»ã
     *              å½ {@link SuperMap.ComputeWeightMatrixParameters.isAnalyzeById} = false æ¶ï¼nodes åºä¸ºç¹çåæ æ°ç»ï¼
     *              å½ {@link SuperMap.ComputeWeightMatrixParameters.isAnalyzeById} = true æ¶ï¼nodes åºä¸ºç¹ç ID æ°ç»ã
     */

    this.nodes = null;
    /**
     * @member {SuperMap.TransportationAnalystParameter} SuperMap.ComputeWeightMatrixParameters.prototype.parameter
     * @description äº¤éç½ç»åæéç¨åæ°ã
     */

    this.parameter = new TransportationAnalystParameter();
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.ComputeWeightMatrixParameters";
  }
  /**
   * @function SuperMap.ComputeWeightMatrixParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ComputeWeightMatrixParameters_createClass(ComputeWeightMatrixParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.isAnalyzeById = null;
      me.nodes = null;

      if (me.parameter) {
        me.parameter.destroy();
        me.parameter = null;
      }
    }
  }]);

  return ComputeWeightMatrixParameters;
}();
SuperMap.ComputeWeightMatrixParameters = ComputeWeightMatrixParameters;
// CONCATENATED MODULE: ./src/common/iServer/ComputeWeightMatrixService.js
function ComputeWeightMatrixService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { ComputeWeightMatrixService_typeof = function _typeof(obj) { return typeof obj; }; } else { ComputeWeightMatrixService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return ComputeWeightMatrixService_typeof(obj); }

function ComputeWeightMatrixService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ComputeWeightMatrixService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ComputeWeightMatrixService_createClass(Constructor, protoProps, staticProps) { if (protoProps) ComputeWeightMatrixService_defineProperties(Constructor.prototype, protoProps); if (staticProps) ComputeWeightMatrixService_defineProperties(Constructor, staticProps); return Constructor; }

function ComputeWeightMatrixService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { ComputeWeightMatrixService_get = Reflect.get; } else { ComputeWeightMatrixService_get = function _get(target, property, receiver) { var base = ComputeWeightMatrixService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return ComputeWeightMatrixService_get(target, property, receiver || target); }

function ComputeWeightMatrixService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = ComputeWeightMatrixService_getPrototypeOf(object); if (object === null) break; } return object; }

function ComputeWeightMatrixService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) ComputeWeightMatrixService_setPrototypeOf(subClass, superClass); }

function ComputeWeightMatrixService_setPrototypeOf(o, p) { ComputeWeightMatrixService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return ComputeWeightMatrixService_setPrototypeOf(o, p); }

function ComputeWeightMatrixService_createSuper(Derived) { var hasNativeReflectConstruct = ComputeWeightMatrixService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = ComputeWeightMatrixService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = ComputeWeightMatrixService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return ComputeWeightMatrixService_possibleConstructorReturn(this, result); }; }

function ComputeWeightMatrixService_possibleConstructorReturn(self, call) { if (call && (ComputeWeightMatrixService_typeof(call) === "object" || typeof call === "function")) { return call; } return ComputeWeightMatrixService_assertThisInitialized(self); }

function ComputeWeightMatrixService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function ComputeWeightMatrixService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ComputeWeightMatrixService_getPrototypeOf(o) { ComputeWeightMatrixService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return ComputeWeightMatrixService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.ComputeWeightMatrixService
 * @category  iServer NetworkAnalyst WeightMatrix
 * @classdesc èè´¹ç©éµåææå¡ç±»ã
 *            èè´¹ç©éµæ¯æ ¹æ®äº¤éç½ç»åæåæ°ä¸­çèè´¹å­æ®µæ¥è®¡ç®ä¸ä¸ªäºç»´æ°ç»ï¼
 *            ç¨æ¥å­å¨æå®çä»»æä¸¤ç¹é´çèµæºæ¶èã
 *            èè´¹ç©éµåæç»æéè¿è¯¥ç±»æ¯æçäºä»¶ççå¬å½æ°åæ°è·å
 * @extends {SuperMap.NetworkAnalystServiceBase}
 * @example
 * var mycomputeWeightMatrixService = new SuperMap.ComputeWeightMatrixService(url,{
 *     eventListeners: {
 *	       "processCompleted": computeWeightMatrixCompleted,
 *		   "processFailed": computeWeightMatrixnError
 *	   }
 * });
 * @param {string} url - èè´¹ç©éµåææå¡å°åãè¯·æ±æå¡çURLåºä¸ºï¼
 *                       http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{ç½ç»åææå¡å}/rest/networkanalyst/{ç½ç»æ°æ®é@æ°æ®æº}ï¼
 *                       ä¾å¦ï¼"http://localhost:8090/iserver/services/components-rest/rest/networkanalyst/RoadNet@Changchun"ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var ComputeWeightMatrixService = /*#__PURE__*/function (_NetworkAnalystServic) {
  ComputeWeightMatrixService_inherits(ComputeWeightMatrixService, _NetworkAnalystServic);

  var _super = ComputeWeightMatrixService_createSuper(ComputeWeightMatrixService);

  function ComputeWeightMatrixService(url, options) {
    var _this;

    ComputeWeightMatrixService_classCallCheck(this, ComputeWeightMatrixService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.ComputeWeightMatrixService";
    return _this;
  }
  /**
   * @function SuperMap.ComputeWeightMatrixService.prototype.destroy
   * @override
   */


  ComputeWeightMatrixService_createClass(ComputeWeightMatrixService, [{
    key: "destroy",
    value: function destroy() {
      ComputeWeightMatrixService_get(ComputeWeightMatrixService_getPrototypeOf(ComputeWeightMatrixService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.ComputeWeightMatrixService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.ComputeWeightMatrixParameters} params - èè´¹ç©éµåæåæ°ç±»
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof ComputeWeightMatrixParameters)) {
        return;
      }

      var me = this,
          jsonObject;
      me.url = Util.urlPathAppend(me.url, 'weightmatrix');
      jsonObject = {
        parameter: Util.toJSON(params.parameter),
        nodes: me.getJson(params.isAnalyzeById, params.nodes)
      };
      me.request({
        method: "GET",
        params: jsonObject,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.ComputeWeightMatrixService.prototype.getJson
     * @description å°å¯¹è±¡è½¬åä¸ºJSONå­ç¬¦ä¸²ã
     * @param {boolean} isAnalyzeById - æ¯å¦éè¿idåæ
     * @param {Array.<SuperMap.ComputeWeightMatrixParameters>} params - åæåæ°æ°ç»
     * @returns {string} è½¬ååçJSONå­ç¬¦ä¸²ã
     */

  }, {
    key: "getJson",
    value: function getJson(isAnalyzeById, params) {
      var jsonString = "[",
          len = params ? params.length : 0;

      if (isAnalyzeById === false) {
        for (var i = 0; i < len; i++) {
          if (i > 0) {
            jsonString += ",";
          }

          jsonString += '{"x":' + params[i].x + ',"y":' + params[i].y + '}';
        }
      } else if (isAnalyzeById === true) {
        for (var _i = 0; _i < len; _i++) {
          if (_i > 0) {
            jsonString += ",";
          }

          jsonString += params[_i];
        }
      }

      jsonString += ']';
      return jsonString;
    }
  }]);

  return ComputeWeightMatrixService;
}(NetworkAnalystServiceBase);
SuperMap.ComputeWeightMatrixService = ComputeWeightMatrixService;
// CONCATENATED MODULE: ./src/common/iServer/DataFlowService.js
function DataFlowService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { DataFlowService_typeof = function _typeof(obj) { return typeof obj; }; } else { DataFlowService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return DataFlowService_typeof(obj); }

function DataFlowService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function DataFlowService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function DataFlowService_createClass(Constructor, protoProps, staticProps) { if (protoProps) DataFlowService_defineProperties(Constructor.prototype, protoProps); if (staticProps) DataFlowService_defineProperties(Constructor, staticProps); return Constructor; }

function DataFlowService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) DataFlowService_setPrototypeOf(subClass, superClass); }

function DataFlowService_setPrototypeOf(o, p) { DataFlowService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return DataFlowService_setPrototypeOf(o, p); }

function DataFlowService_createSuper(Derived) { var hasNativeReflectConstruct = DataFlowService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = DataFlowService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = DataFlowService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return DataFlowService_possibleConstructorReturn(this, result); }; }

function DataFlowService_possibleConstructorReturn(self, call) { if (call && (DataFlowService_typeof(call) === "object" || typeof call === "function")) { return call; } return DataFlowService_assertThisInitialized(self); }

function DataFlowService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function DataFlowService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function DataFlowService_getPrototypeOf(o) { DataFlowService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return DataFlowService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.DataFlowService
 * @category iServer DataFlow
 * @classdesc æ°æ®æµæå¡ç±»
 * @extends {SuperMap.CommonServiceBase}
 * @param {string} url - æ°æ®æµæå¡å°å
 * @param {Object} options - åæ°ã
 * @param {function} options.style - è®¾ç½®æ°æ®å è½½æ ·å¼ã
 * @param {function} [options.onEachFeature] - è®¾ç½®æ¯ä¸ªæ°æ®å è½½popupç­ã
 * @param {GeoJSONObject} [options.geometry] - æå®å ä½èå´ï¼è¯¥èå´åçè¦ç´ æè½è¢«è®¢éã
 * @param {Object} [options.excludeField] - -æé¤å­æ®µã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var DataFlowService_DataFlowService = /*#__PURE__*/function (_CommonServiceBase) {
  DataFlowService_inherits(DataFlowService, _CommonServiceBase);

  var _super = DataFlowService_createSuper(DataFlowService);

  function DataFlowService(url, options) {
    var _this;

    DataFlowService_classCallCheck(this, DataFlowService);

    options = options || {};
    /*
     * @constant EVENT_TYPES
     * {Array.<string>}
     * æ­¤ç±»æ¯æçäºä»¶ç±»å
     */

    options.EVENT_TYPES = ["broadcastSocketConnected", "broadcastSocketError", "broadcastFailed", "broadcastSucceeded", "subscribeSocketConnected", "subscribeSocketError", "messageSucceeded", "setFilterParamSucceeded"];
    _this = _super.call(this, url, options);
    /**
     * @member {GeoJSONObject} SuperMap.DataFlowService.prototype.geometry
     * @description æå®å ä½èå´ï¼è¯¥èå´åçè¦ç´ æè½è¢«è®¢éã
     */

    _this.geometry = null;
    /**
     * @member {Object} SuperMap.DataFlowService.prototype.prjCoordSys
     * @description å¨ææå½±åæ°
     */

    _this.prjCoordSys = null;
    /**
     * @member {Object} SuperMap.DataFlowService.prototype.excludeField
     * @description æé¤å­æ®µ
     */

    _this.excludeField = null;
    Util.extend(DataFlowService_assertThisInitialized(_this), options);
    _this.CLASS_NAME = "SuperMap.DataFlowService";
    return _this;
  }
  /**
   * @function SuperMap.DataFlowService.prototype.initBroadcast
   * @description åå§åå¹¿æ­
   * @returns {SuperMap.DataFlowService}
   */


  DataFlowService_createClass(DataFlowService, [{
    key: "initBroadcast",
    value: function initBroadcast() {
      var me = this;
      this.broadcastWebSocket = this._connect(Util.urlPathAppend(me.url, 'broadcast'));

      this.broadcastWebSocket.onopen = function (e) {
        me.broadcastWebSocket.isOpen = true;
        e.eventType = 'broadcastSocketConnected';
        me.events.triggerEvent('broadcastSocketConnected', e);
      };

      this.broadcastWebSocket.onclose = function (e) {
        me.broadcastWebSocket.isOpen = false;
        e.eventType = 'broadcastSocketConnected';
        me.events.triggerEvent('broadcastSocketConnected', e);
      };

      this.broadcastWebSocket.onerror = function (e) {
        e.eventType = 'broadcastSocketError';
        me.events.triggerEvent('broadcastSocketError', e);
      };

      return this;
    }
    /**
     * @function SuperMap.DataFlowService.prototype.broadcast
     * @description å è½½å¹¿æ­æ°æ®ã
     * @param {GeoJSONObject} geoJSONFeature - JSON æ ¼å¼çè¦ç´ æ°æ®ã
     */

  }, {
    key: "broadcast",
    value: function broadcast(geoJSONFeature) {
      if (!this.broadcastWebSocket || !this.broadcastWebSocket.isOpen) {
        this.events.triggerEvent('broadcastFailed');
        return;
      }

      this.broadcastWebSocket.send(JSON.stringify(geoJSONFeature));
      this.events.triggerEvent('broadcastSucceeded');
    }
    /**
     * @function SuperMap.DataFlowService.prototype.initSubscribe
     * @description åå§åè®¢éæ°æ®
     * @returns {this} this
     */

  }, {
    key: "initSubscribe",
    value: function initSubscribe() {
      var me = this;
      this.subscribeWebSocket = this._connect(Util.urlPathAppend(me.url, 'subscribe'));

      this.subscribeWebSocket.onopen = function (e) {
        me.subscribeWebSocket.send(me._getFilterParams());
        e.eventType = 'subscribeSocketConnected';
        me.events.triggerEvent('subscribeSocketConnected', e);
      };

      this.subscribeWebSocket.onerror = function (e) {
        e.eventType = 'subscribeSocketError';
        me.events.triggerEvent('subscribeSocketError', e);
      };

      this.subscribeWebSocket.onmessage = function (e) {
        me._onMessage(e);
      };

      return this;
    }
    /**
     * @function SuperMap.DataFlowService.prototype.setExcludeField
     * @description è®¾ç½®æé¤å­æ®µ
     * @param {Object} excludeField - æé¤å­æ®µ
     * @returns {this} this
     */

  }, {
    key: "setExcludeField",
    value: function setExcludeField(excludeField) {
      this.excludeField = excludeField;
      this.subscribeWebSocket.send(this._getFilterParams());
      return this;
    }
    /**
     * @function SuperMap.DataFlowService.prototype.setGeometry
     * @description è®¾ç½®æ·»å çå ä½è¦ç´ æ°æ®
     * @param {GeoJSONObject} geometry - æå®å ä½èå´ï¼è¯¥èå´åçè¦ç´ æè½è¢«è®¢éã
     * @returns {this} this
     */

  }, {
    key: "setGeometry",
    value: function setGeometry(geometry) {
      this.geometry = geometry;
      this.subscribeWebSocket.send(this._getFilterParams());
      return this;
    }
    /**
     * @function SuperMap.DataFlowService.prototype.unSubscribe
     * @description ç»æè®¢éæ°æ®
     */

  }, {
    key: "unSubscribe",
    value: function unSubscribe() {
      if (!this.subscribeWebSocket) {
        return;
      }

      this.subscribeWebSocket.close();
      this.subscribeWebSocket = null;
    }
    /**
     * @function SuperMap.DataFlowService.prototype.unBroadcast
     * @description ç»æå è½½å¹¿æ­
     */

  }, {
    key: "unBroadcast",
    value: function unBroadcast() {
      if (!this.broadcastWebSocket) {
        return;
      }

      this.broadcastWebSocket.close();
      this.broadcastWebSocket = null;
    }
    /**
     * @function SuperMap.DataFlowService.prototype.destroy
     * @override
     */

  }, {
    key: "destroy",
    value: function destroy() {
      CommonServiceBase.prototype.destroy.apply(this, arguments);
      var me = this;
      me.geometry = null;
      me.prjCoordSys = null;
      me.excludeField = null;
      this.unBroadcast();
      this.unSubscribe();
    }
  }, {
    key: "_getFilterParams",
    value: function _getFilterParams() {
      var filter = {
        filterParam: {
          prjCoordSys: this.prjCoordSys,
          excludeField: this.excludeField,
          geometry: this.geometry
        }
      };
      return Util.toJSON(filter);
    }
  }, {
    key: "_onMessage",
    value: function _onMessage(e) {
      if (e.data && e.data.indexOf("filterParam") >= 0) {
        var filterParam = JSON.parse(e.data);
        e.filterParam = filterParam;
        e.eventType = 'setFilterParamSucceeded';
        this.events.triggerEvent('setFilterParamSucceeded', e);
        return;
      }

      var feature = JSON.parse(e.data);
      e.featureResult = feature;
      e.eventType = 'messageSucceeded';
      this.events.triggerEvent('messageSucceeded', e);
    }
  }, {
    key: "_connect",
    value: function _connect(url) {
      url = this._appendCredentials(url);

      if ("WebSocket" in window) {
        return new WebSocket(url);
      } else if ("MozWebSocket" in window) {
        var mozWebSocket = window.MozWebSocket;
        return new mozWebSocket(url);
      } else {
        console.log("no WebSocket");
        return null;
      }
    }
  }, {
    key: "_appendCredentials",
    value: function _appendCredentials(url) {
      var token = SecurityManager.getToken(url);

      if (token) {
        url = Util.urlAppend(url, "token=" + token);
      }

      return url;
    }
  }]);

  return DataFlowService;
}(CommonServiceBase);
SuperMap.DataFlowService = DataFlowService_DataFlowService;
// CONCATENATED MODULE: ./src/common/iServer/DatasetInfo.js
function DatasetInfo_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function DatasetInfo_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function DatasetInfo_createClass(Constructor, protoProps, staticProps) { if (protoProps) DatasetInfo_defineProperties(Constructor.prototype, protoProps); if (staticProps) DatasetInfo_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.DatasetInfo
 * @category  iServer Data
 * @classdesc æ°æ®éä¿¡æ¯ç±»ã
 * @description æ°æ®éä¸è¬ä¸ºå­å¨å¨ä¸èµ·çç¸å³æ°æ®çéåï¼æ ¹æ®æ°æ®ç±»åçä¸åï¼åä¸ºç¢éæ°æ®éãæ æ ¼æ°æ®éï¼griddatasetï¼å
 * å½±åæ°æ®éï¼image datasetï¼ï¼ä»¥åä¸ºäºå¤çç¹å®é®é¢èè®¾è®¡çæ°æ®éï¼å¦æææ°æ®éï¼ç½ç»æ°æ®éç­ã
 * æ°æ®éæ¯ GIS æ°æ®ç»ç»çæå°åä½ãå¶ä¸­ç¢éæ°æ®éæ¯ç±åç§ç±»åç©ºé´è¦ç´ ç»æçéåï¼
 * æä»¥ä¹å¯ä»¥ç§°ä¸ºè¦ç´ éãæ ¹æ®è¦ç´ çç©ºé´ç¹å¾çä¸åï¼ç¢éæ°æ®éååä¸ºç¹æ°æ®éï¼
 * çº¿æ°æ®éï¼é¢æ°æ®éç­ï¼åç¢éæ°æ®éæ¯ç©ºé´ç¹å¾åæ§è´¨ç¸åçæ°æ®ç»ç»èµ·æ¥çéåã
 * ç®åçæ¬æ¯æçæ°æ®éä¸»è¦æç¹æ°æ®éï¼çº¿æ°æ®éï¼é¢æ°æ®éï¼ææ¬æ°æ®éï¼å¤åæ°æ®éï¼CAD æ°æ®éï¼ã
 * ç½ç»æ°æ®éï¼æ æ ¼æ°æ®éï¼grid datasetï¼åå½±åæ°æ®éï¼image datasetï¼ã
 * @param {Object} options - åæ°ã 
 * @param {SuperMap.Bounds} [options.bounds] - æ°æ®éèå´ï¼è¯¥å­æ®µåªè¯»ã 
 * @param {string} [options.dataSourceName] - æ°æ®æºåç§°ï¼è¯¥å­æ®µåªè¯»ã 
 * @param {string} [options.description] - æ°æ®éçæè¿°ä¿¡æ¯ã 
 * @param {string} [options.encodeType] - æ°æ®éå­å¨æ¶çåç¼©ç¼ç æ¹å¼ï¼è¯¥å­æ®µåªè¯»ã 
 * @param {boolean} [options.isReadOnly] - æ°æ®éæ¯å¦ä¸ºåªè¯»ã 
 * @param {string} options.name - æ°æ®éåç§°ï¼è¯¥å­æ®µå¿é¡»ä¸åªè¯»ã 
 * @param {SuperMap.Projection} [options.prjCoordSys] - æ°æ®éçæå½±ä¿¡æ¯ã 
 * @param {string} [options.tableName] - è¡¨åï¼è¯¥å­æ®µåªè¯»ã 
 * @param {string} options.type - æ°æ®éç±»åãä¸»è¦æç¹æ°æ®éï¼çº¿æ°æ®éï¼é¢æ°æ®éï¼ææ¬æ°æ®éï¼å¤åæ°æ®éï¼CAD æ°æ®éï¼ãç½ç»æ°æ®éï¼æ æ ¼æ°æ®éï¼grid datasetï¼åå½±åæ°æ®éï¼image datasetï¼ã
 */

var DatasetInfo = /*#__PURE__*/function () {
  function DatasetInfo(options) {
    DatasetInfo_classCallCheck(this, DatasetInfo);

    options = options || {};
    /**
     * @member {SuperMap.Bounds} [SuperMap.DatasetInfo.prototype.bounds]
     * @description æ°æ®éèå´ï¼è¯¥å­æ®µåªè¯»ã
     */

    this.bounds = null;
    /**
     * @member {string} [SuperMap.DatasetInfo.prototype.dataSourceName]
     * @description æ°æ®æºåç§°ï¼è¯¥å­æ®µåªè¯»ã
     */

    this.dataSourceName = null;
    /**
     * @member {string} [SuperMap.DatasetInfo.prototype.description]
     * @description æ°æ®éçæè¿°ä¿¡æ¯ã
     */

    this.description = null;
    /**
     * @member {string} [SuperMap.DatasetInfo.prototype.encodeType]
     * @description æ°æ®éå­å¨æ¶çåç¼©ç¼ç æ¹å¼ï¼è¯¥å­æ®µåªè¯»ã
     */

    this.encodeType = null;
    /**
     * @member {boolean} [SuperMap.DatasetInfo.prototype.isReadOnly]
     * @description æ°æ®éæ¯å¦ä¸ºåªè¯»ã
     */

    this.isReadOnly = null;
    /**
     * @member {string} SuperMap.DatasetInfo.prototype.name
     * @description æ°æ®éåç§°ï¼è¯¥å­æ®µå¿é¡»ä¸åªè¯»ã
     */

    this.name = null;
    /**
     * @member {SuperMap.Projection} [SuperMap.DatasetInfo.prototype.prjCoordSys]
     * @description æ°æ®éçæå½±ä¿¡æ¯ã
     */

    this.prjCoordSys = null;
    /**
     * @member {string} [SuperMap.DatasetInfo.prototype.tableName]
     * @description è¡¨åï¼è¯¥å­æ®µåªè¯»ã
     */

    this.tableName = null;
    /**
     * @member {string} SuperMap.DatasetInfo.prototype.type
     * @description æ°æ®éç±»åï¼è¯¥å­æ®µå¿è®¾ãä¸»è¦æç¹æ°æ®éï¼çº¿æ°æ®éï¼é¢æ°æ®éï¼ææ¬æ°æ®éï¼å¤åæ°æ®éï¼CAD æ°æ®éï¼ãç½ç»æ°æ®éï¼æ æ ¼æ°æ®éï¼grid datasetï¼åå½±åæ°æ®éï¼image datasetï¼ã
     */

    this.type = null;
    Util.extend(this, options);
    var b = this.bounds;

    if (b) {
      this.bounds = new Bounds(b.leftBottom.x, b.leftBottom.y, b.rightTop.x, b.rightTop.y);
    }

    this.CLASS_NAME = "SuperMap.DatasetInfo";
  }
  /**
   * @function SuperMap.DatasetInfo.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  DatasetInfo_createClass(DatasetInfo, [{
    key: "destroy",
    value: function destroy() {
      Util.reset(this);
    }
    /**
     * @function SuperMap.DatasetInfo.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     * @returns {Object} JSON å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      var dataObj = {};
      dataObj = Util.copyAttributes(dataObj, this);

      if (dataObj.bounds) {
        if (dataObj.bounds.toServerJSONObject) {
          dataObj.bounds = dataObj.bounds.toServerJSONObject();
        }
      }

      return dataObj;
    }
  }]);

  return DatasetInfo;
}();
SuperMap.DatasetInfo = DatasetInfo;
// CONCATENATED MODULE: ./src/common/iServer/OverlayAnalystParameters.js
function OverlayAnalystParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function OverlayAnalystParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function OverlayAnalystParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) OverlayAnalystParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) OverlayAnalystParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.OverlayAnalystParameters
 * @category  iServer SpatialAnalyst OverlayAnalyst
 * @classdesc å å åæåæ°åºç±»ãæ°æ®éå å åæåæ°åå ä½å¯¹è±¡å å åæåæ°åç»§æ¿æ­¤åºç±»ã
 * @param {Object} options - åæ°ã
 */

var OverlayAnalystParameters = /*#__PURE__*/function () {
  function OverlayAnalystParameters(options) {
    OverlayAnalystParameters_classCallCheck(this, OverlayAnalystParameters);

    /**
     * @member {SuperMap.OverlayOperationType} [SuperMap.OverlayAnalystParameters.prototype.operation=SuperMap.OverlayOperationType.UNION]
     * @description æå®å å åææä½ç±»åã
     */
    this.operation = OverlayOperationType.UNION;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.OverlayAnalystParameters";
  }
  /**
   * @function SuperMap.OverlayAnalystParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  OverlayAnalystParameters_createClass(OverlayAnalystParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.operation = null;
    }
  }]);

  return OverlayAnalystParameters;
}();
SuperMap.OverlayAnalystParameters = OverlayAnalystParameters;
// CONCATENATED MODULE: ./src/common/iServer/DatasetOverlayAnalystParameters.js
function DatasetOverlayAnalystParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { DatasetOverlayAnalystParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { DatasetOverlayAnalystParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return DatasetOverlayAnalystParameters_typeof(obj); }

function DatasetOverlayAnalystParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function DatasetOverlayAnalystParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function DatasetOverlayAnalystParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) DatasetOverlayAnalystParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) DatasetOverlayAnalystParameters_defineProperties(Constructor, staticProps); return Constructor; }

function DatasetOverlayAnalystParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { DatasetOverlayAnalystParameters_get = Reflect.get; } else { DatasetOverlayAnalystParameters_get = function _get(target, property, receiver) { var base = DatasetOverlayAnalystParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return DatasetOverlayAnalystParameters_get(target, property, receiver || target); }

function DatasetOverlayAnalystParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = DatasetOverlayAnalystParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function DatasetOverlayAnalystParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) DatasetOverlayAnalystParameters_setPrototypeOf(subClass, superClass); }

function DatasetOverlayAnalystParameters_setPrototypeOf(o, p) { DatasetOverlayAnalystParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return DatasetOverlayAnalystParameters_setPrototypeOf(o, p); }

function DatasetOverlayAnalystParameters_createSuper(Derived) { var hasNativeReflectConstruct = DatasetOverlayAnalystParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = DatasetOverlayAnalystParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = DatasetOverlayAnalystParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return DatasetOverlayAnalystParameters_possibleConstructorReturn(this, result); }; }

function DatasetOverlayAnalystParameters_possibleConstructorReturn(self, call) { if (call && (DatasetOverlayAnalystParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return DatasetOverlayAnalystParameters_assertThisInitialized(self); }

function DatasetOverlayAnalystParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function DatasetOverlayAnalystParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function DatasetOverlayAnalystParameters_getPrototypeOf(o) { DatasetOverlayAnalystParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return DatasetOverlayAnalystParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/






/**
 * @class SuperMap.DatasetOverlayAnalystParameters
 * @category  iServer SpatialAnalyst OverlayAnalyst
 * @classdesc æ°æ®éå å åæåæ°ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {string} options.operateDataset - å å åæä¸­æä½æ°æ®éçåç§°ã 
* @param {string} options.sourceDataset - å å åæä¸­æºæ°æ®éçåç§°ã 
 * @param {Array.<string>} [options.operateDatasetFields] - å å åæä¸­æä½æ°æ®éä¿çå¨ç»ææ°æ®éä¸­çå­æ®µååè¡¨ã 
 * @param {SuperMap.FilterParameter} [options.operateDatasetFilter] - è®¾ç½®æä½æ°æ®éä¸­ç©ºé´å¯¹è±¡è¿æ»¤æ¡ä»¶ã 
 * @param {Array.<SuperMap.Geometry.Polygon|L.Polygon|ol.geom.Polygon>} [options.operateRegions] - æä½é¢å¯¹è±¡éåï¼è¡¨ç¤ºä¸è¿äºé¢å¯¹è±¡è¿è¡å å åæãä¸ operateDataset åæ°äºæ¥ï¼å²çªæ¶ä»¥ operateDataset ä¸ºåã 
 * @param {Array.<string>} [options.sourceDatasetFields] - å å åæä¸­æºæ°æ®éä¿çå¨ç»ææ°æ®éä¸­çå­æ®µååè¡¨ã 
 * @param {SuperMap.FilterParameter} [options.sourceDatasetFilter] - è®¾ç½®æºæ°æ®éä¸­ç©ºé´å¯¹è±¡è¿æ»¤æ¡ä»¶ã 
 * @param {number} [options.tolerance=0] - å®¹éã 
 * @param {SuperMap.OverlayOperationType} options.operation - å å æä½æä¸¾å¼ã 
 * @param {SuperMap.DataReturnOption} [options.resultSetting] - ç»æè¿åè®¾ç½®ç±»ã 
 * @extends {SuperMap.GetFeaturesParametersBase}
 */

var DatasetOverlayAnalystParameters = /*#__PURE__*/function (_OverlayAnalystParame) {
  DatasetOverlayAnalystParameters_inherits(DatasetOverlayAnalystParameters, _OverlayAnalystParame);

  var _super = DatasetOverlayAnalystParameters_createSuper(DatasetOverlayAnalystParameters);

  function DatasetOverlayAnalystParameters(options) {
    var _this;

    DatasetOverlayAnalystParameters_classCallCheck(this, DatasetOverlayAnalystParameters);

    _this = _super.call(this, options);
    /**
     * @member {string} SuperMap.DatasetOverlayAnalystParameters.prototype.operateDataset
     * @description å å åæä¸­æä½æ°æ®éçåç§°ã
     */

    _this.operateDataset = null;
    /**
     * @member {Array.<string>} [SuperMap.DatasetOverlayAnalystParameters.prototype.operateDatasetFields]
     * @description å å åæä¸­æä½æ°æ®éä¿çå¨ç»ææ°æ®éä¸­çå­æ®µååè¡¨ã
     */

    _this.operateDatasetFields = [];
    /**
     * @member {SuperMap.FilterParameter} SuperMap.DatasetOverlayAnalystParameters.prototype.operateDatasetFilter
     * @description è®¾ç½®æä½æ°æ®éä¸­ç©ºé´å¯¹è±¡è¿æ»¤æ¡ä»¶ã
     */

    _this.operateDatasetFilter = new FilterParameter();
    /**
     * @member {Array.<SuperMap.Geometry.Polygon|L.Polygon|ol.geom.Polygon>} [SuperMap.DatasetOverlayAnalystParameters.prototype.operateRegions]
     * @description æä½é¢å¯¹è±¡éåï¼è¡¨ç¤ºä¸è¿äºé¢å¯¹è±¡è¿è¡å å åæãä¸ operateDataset åæ°äºæ¥ï¼å²çªæ¶ä»¥ operateDataset ä¸ºåã
     */

    _this.operateRegions = [];
    /**
     * @member {string} SuperMap.DatasetOverlayAnalystParameters.prototype.sourceDataset
     * @description å å åæä¸­æºæ°æ®éçåç§°ã
     */

    _this.sourceDataset = null;
    /**
     * @member {Array.<string>} [SuperMap.DatasetOverlayAnalystParameters.prototype.sourceDatasetFields]
     * @description å å åæä¸­æºæ°æ®éä¿çå¨ç»ææ°æ®éä¸­çå­æ®µååè¡¨ã
     */

    _this.sourceDatasetFields = [];
    /**
     * @member {SuperMap.FilterParameter} [SuperMap.DatasetOverlayAnalystParameters.prototype.filterQueryParameter]
     * @description è®¾ç½®æºæ°æ®éä¸­ç©ºé´å¯¹è±¡è¿æ»¤æ¡ä»¶ã
     */

    _this.sourceDatasetFilter = new FilterParameter();
    /**
     * @member {number} [SuperMap.DatasetOverlayAnalystParameters.prototype.tolerance=0]
     * @description å®¹éã
     */

    _this.tolerance = 0;
    /**
     * @member {SuperMap.DataReturnOption} [SuperMap.DatasetOverlayAnalystParameters.prototype.resultSetting]
     * @description ç»æè¿åè®¾ç½®ç±»ã
     */

    _this.resultSetting = new DataReturnOption();
    Util.extend(DatasetOverlayAnalystParameters_assertThisInitialized(_this), options);
    _this.CLASS_NAME = "SuperMap.DatasetOverlayAnalystParameters";
    return _this;
  }
  /**
   * @function SuperMap.DatasetOverlayAnalystParameters.prototype.destroy
   * @override
   */


  DatasetOverlayAnalystParameters_createClass(DatasetOverlayAnalystParameters, [{
    key: "destroy",
    value: function destroy() {
      DatasetOverlayAnalystParameters_get(DatasetOverlayAnalystParameters_getPrototypeOf(DatasetOverlayAnalystParameters.prototype), "destroy", this).call(this);

      var me = this;
      me.operateDataset = null;
      me.operateDatasetFields = null;

      if (me.operateDatasetFilter) {
        me.operateDatasetFilter.destroy();
        me.operateDatasetFilter = null;
      }

      if (me.operateRegions) {
        for (var i = 0, opRegions = me.operateRegions, len = opRegions.length; i < len; i++) {
          opRegions[i].destroy();
        }

        me.operateRegions = null;
      }

      me.sourceDataset = null;
      me.sourceDatasetFields = null;

      if (me.sourceDatasetFilter) {
        me.sourceDatasetFilter.destroy();
        me.sourceDatasetFilter = null;
      }

      me.tolerance = null;

      if (me.resultSetting) {
        me.resultSetting.destroy();
        me.resultSetting = null;
      }
    }
    /**
     * @function SuperMap.DatasetOverlayAnalystParameters.toObject
     * @param {SuperMap.DatasetOverlayAnalystParameters} datasetOverlayAnalystParameters - æ°æ®éå å åæåæ°ç±»ã
     * @param {SuperMap.DatasetOverlayAnalystParameters} tempObj - æ°æ®éå å åæåæ°å¯¹è±¡ã
     * @description å°æ°æ®éå å åæåæ°ç±»è½¬æ¢ä¸º JSON å¯¹è±¡ã
     * @returns {Object} JSON å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(datasetOverlayAnalystParameters, tempObj) {
      for (var name in datasetOverlayAnalystParameters) {
        if (name === "sourceDataset") {
          continue;
        } else if (name === "operateRegions") {
          tempObj.operateRegions = [];
          var ors = datasetOverlayAnalystParameters.operateRegions;

          for (var index in ors) {
            if (ors.hasOwnProperty(index)) {
              //icl542
              tempObj.operateRegions[index] = ServerGeometry.fromGeometry(ors[index]);
            }
          }
        } else if (name === "resultSetting") {
          tempObj.dataReturnOption = datasetOverlayAnalystParameters.resultSetting;
        } else {
          tempObj[name] = datasetOverlayAnalystParameters[name];
        }
      }
    }
  }]);

  return DatasetOverlayAnalystParameters;
}(OverlayAnalystParameters);
SuperMap.DatasetOverlayAnalystParameters = DatasetOverlayAnalystParameters;
// CONCATENATED MODULE: ./src/common/iServer/SurfaceAnalystParametersSetting.js
function SurfaceAnalystParametersSetting_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SurfaceAnalystParametersSetting_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SurfaceAnalystParametersSetting_createClass(Constructor, protoProps, staticProps) { if (protoProps) SurfaceAnalystParametersSetting_defineProperties(Constructor.prototype, protoProps); if (staticProps) SurfaceAnalystParametersSetting_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.SurfaceAnalystParametersSetting
 * @category  iServer SpatialAnalyst SurfaceAnalyst
 * @classdesc è¡¨é¢åæåæ°è®¾ç½®ç±»ã
 * éè¿è¯¥ç±»å¯ä»¥è®¾ç½®è¡¨é¢åææåç­å¼çº¿ãæåç­å¼é¢çä¸äºåæ°ï¼åæ¬åºåå¼ãç­å¼è·ãåæ»åº¦ãåæ»æ¹æ³ç­ã
 * @param {Object} options - åæ°ã
 * @param {(SuperMap.Geometry.Polygon|L.Polygon|ol.geom.Polygon)} [options.clipRegion] - è·åæè®¾ç½®è£åªé¢å¯¹è±¡ï¼å¦æä¸éè¦å¯¹æä½ç»æè¿è¡è£åªï¼å¯ä»¥ä½¿ç¨ null å¼åä»£è¯¥åæ°ã
 * @param {number} [options.datumValue=0] - è·åæè®¾ç½®è¡¨é¢åæä¸­æåç­å¼çº¿ãæåç­å¼é¢çåºåå¼ã
 * @param {Array.<number>} options.expectedZValues - è·åæè®¾ç½®ææåæç»æç Z å¼éåã
 * @param {number} [options.interval=0] - è·åæè®¾ç½®ç­å¼è·ãç­å¼è·æ¯ä¸¤æ¡ç­å¼çº¿ä¹é´çé´éå¼ã
 * @param {number} [options.resampleTolerance=0] - è·åæè®¾ç½®ééæ ·å®¹éã
 * @param {SuperMap.SmoothMethod} [options.smoothMethod=SuperMap.SmoothMethod.BSPLINE] - è·åæè®¾ç½®åæ»å¤çæä½¿ç¨çæ¹æ³ã
 * @param {number} [options.smoothness=0] - è·åæè®¾ç½®è¡¨é¢åæä¸­ç­å¼çº¿æç­å¼é¢çè¾¹ççº¿çåæ»åº¦ã
 */

var SurfaceAnalystParametersSetting = /*#__PURE__*/function () {
  function SurfaceAnalystParametersSetting(options) {
    SurfaceAnalystParametersSetting_classCallCheck(this, SurfaceAnalystParametersSetting);

    /**
     * @member {(SuperMap.Geometry.Polygon|L.Polygon|ol.geom.Polygon)} [SuperMap.SurfaceAnalystParametersSetting.prototype.clipRegion]
     * @description è·åæè®¾ç½®è£åªé¢å¯¹è±¡ï¼å¦æä¸éè¦å¯¹æä½ç»æè¿è¡è£åªï¼å¯ä»¥ä½¿ç¨ null å¼åä»£è¯¥åæ°ã
     */
    this.clipRegion = null;
    /**
     * @member {number} [SuperMap.SurfaceAnalystParametersSetting.prototype.datumValue=0]
     * @description è·åæè®¾ç½®è¡¨é¢åæä¸­æåç­å¼çº¿ãæåç­å¼é¢çåºåå¼ã
     * åºåå¼æ¯ä½ä¸ºä¸ä¸ªçæç­å¼çº¿çåå§èµ·ç®å¼ï¼å¹¶ä¸ä¸å®æ¯æå°ç­å¼çº¿çå¼ã ä¾å¦ï¼é«ç¨èå´ä¸º 220 -1550 ç DEM æ æ ¼æ°æ®ï¼
     * å¦æè®¾åºåå¼ä¸º 0ï¼ ç­å¼è·ä¸º 50ï¼åæåç­å¼çº¿æ¶ï¼ä»¥åºåå¼ 0 ä¸ºèµ·ç¹ï¼ç­å¼è· 50 ä¸ºé´éæåç­å¼çº¿ï¼
     * å ä¸ºç»å®é«ç¨çæå°å¼æ¯ 220ï¼æä»¥ï¼å¨ç»å®èå´åæåç­å¼çº¿çæå°é«ç¨æ¯ 250ã
     * æåç­å¼çº¿çç»ææ¯ï¼æå°ç­å¼çº¿å¼ä¸º 250ï¼æå¤§ç­å¼çº¿å¼ä¸º 1550ã
     */

    this.datumValue = 0;
    /**
     * @member {Array.<number>} SuperMap.SurfaceAnalystParametersSetting.prototype.expectedZValues
     * @description è·åæè®¾ç½®ææåæç»æç Z å¼éåã
     *              Z å¼éåå­å¨ä¸ç³»åæ°å¼ï¼è¯¥æ°å¼ä¸ºå¾æåç­å¼çº¿çå¼ãå³ä»é«ç¨å¼å¨ Z å¼éåä¸­çç­å¼çº¿ä¼è¢«æåã
     */

    this.expectedZValues = null;
    /**
     *  @member {number} [SuperMap.SurfaceAnalystParametersSetting.prototype.interval=0]
     *  @description è·åæè®¾ç½®ç­å¼è·ãç­å¼è·æ¯ä¸¤æ¡ç­å¼çº¿ä¹é´çé´éå¼ã
     */

    this.interval = 0;
    /**
     * @member {number} [SuperMap.SurfaceAnalystParametersSetting.prototype.resampleTolerance=0]
     * @description è·åæè®¾ç½®ééæ ·å®¹éã
     *              å®¹éå¼è¶å¤§ï¼éæ ·ç»ææ°æ®è¶ç®åãå½åæç»æåºç°äº¤åæ¶ï¼å¯éè¿è°æ´ééæ ·å®¹éä¸ºè¾å°çå¼æ¥å¤çã
     */

    this.resampleTolerance = 0;
    /**
     * @member {SuperMap.SmoothMethod} [SuperMap.SurfaceAnalystParametersSetting.prototype.smoothMethod=SuperMap.SmoothMethod.BSPLINE]
     * @description è·åæè®¾ç½®åæ»å¤çæä½¿ç¨çæ¹æ³ã
     */

    this.smoothMethod = SmoothMethod.BSPLINE;
    /**
     * @member {number} [SuperMap.SurfaceAnalystParametersSetting.prototype.smoothness=0]
     * @description è·åæè®¾ç½®è¡¨é¢åæä¸­ç­å¼çº¿æç­å¼é¢çè¾¹ççº¿çåæ»åº¦ã
     * ä»¥ä¸º 0-5 ä¸ºä¾ï¼åæ»åº¦ä¸º 0 è¡¨ç¤ºä¸è¿è¡åæ»æä½ï¼å¼è¶å¤§è¡¨ç¤ºåæ»åº¦è¶é«ã
     * éçåæ»åº¦çå¢å ï¼æåçç­å¼çº¿è¶åæ».å½ç¶åæ»åº¦è¶å¤§ï¼
     * è®¡ç®æéçæ¶é´åå ç¨çåå­ä¹å°±è¶å¤§ãèä¸ï¼å½ç­å¼è·è¾å°æ¶ï¼
     * åæ»åº¦å¤ªé«ä¼åºç°ç­å¼çº¿ç¸äº¤çé®é¢ã
     */

    this.smoothness = 0;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.SurfaceAnalystParametersSetting";
  }
  /**
   * @function SuperMap.SurfaceAnalystParametersSetting.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  SurfaceAnalystParametersSetting_createClass(SurfaceAnalystParametersSetting, [{
    key: "destroy",
    value: function destroy() {
      var me = this;

      if (me.clipRegion) {
        me.clipRegion.destroy();
        me.clipRegion = null;
      }

      me.datumValue = null;
      me.expectedZValues = null;
      me.interval = null;
      me.resampleTolerance = null;
      me.smoothMethod = null;
      me.smoothness = null;
    }
    /**
     * @function SuperMap.SurfaceAnalystParametersSetting.prototype.toJSON
     * @description å°å¯¹è±¡è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @returns {string} å¯¹è±¡ JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "toJSON",
    value: function toJSON() {
      var json = "'datumValue':" + Util.toJSON(this.datumValue);
      json += ",'interval':" + Util.toJSON(this.interval);
      json += ",'resampleTolerance':" + Util.toJSON(this.resampleTolerance);
      json += ",'smoothMethod':" + Util.toJSON(this.smoothMethod);
      json += ",'smoothness':" + Util.toJSON(this.smoothness);

      if (this.expectedZValues != null) {
        json += "," + "'expectedZValues':" + Util.toJSON(this.expectedZValues);
      }

      if (this.clipRegion != null) {
        var serverGeometry = this.clipRegion;

        if (this.clipRegion instanceof Geometry && this.clipRegion.components) {
          serverGeometry = ServerGeometry.fromGeometry(this.clipRegion);
        }

        json += ",'clipRegion':" + Util.toJSON(serverGeometry);
      }

      return "{" + json + "}";
    }
  }]);

  return SurfaceAnalystParametersSetting;
}();
SuperMap.SurfaceAnalystParametersSetting = SurfaceAnalystParametersSetting;
// CONCATENATED MODULE: ./src/common/iServer/SurfaceAnalystParameters.js
function SurfaceAnalystParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SurfaceAnalystParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SurfaceAnalystParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) SurfaceAnalystParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) SurfaceAnalystParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.SurfaceAnalystParameters
 * @category  iServer SpatialAnalyst SurfaceAnalyst
 * @classdesc è¡¨é¢åææåæä½åæ°ç±»ã
 * @description éè¿è¯¥ç±»å¯ä»¥ä¸ºè¿è¡è¡¨é¢åææä¾åæ°ä¿¡æ¯ï¼åæ¬è¡¨é¢åæçæ¹æ³æåç­å¼çº¿ãæåç­å¼é¢åä¸­é´ç»æçåè¾¨çï¼
 * {@link SuperMap.DatasetSurfaceAnalystParameters} å {@link SuperMap.GeometrySurfaceAnalystParameters} ç»§æ¿èªè¯¥ç±»ã
 * @param {Object} options - åæ°ã
 * @param {SuperMap.SurfaceAnalystParametersSetting} options.extractParameter - è·åæè®¾ç½®è¡¨é¢åæåæ°ã
 * @param {number} options.resolution - æå®ä¸­é´ç»æï¼æ æ ¼æ°æ®éï¼çåè¾¨çã
 * @param {SuperMap.DataReturnOption} options.resultSetting - ç»æè¿åè®¾ç½®ç±»ã
 * @param {SuperMap.SurfaceAnalystMethod} [options.surfaceAnalystMethod=SuperMap.SurfaceAnalystMethod.ISOLINE] - è·åæè®¾ç½®è¡¨é¢åæçæåæ¹æ³ï¼æåç­å¼çº¿åæåç­å¼é¢ã
 */

var SurfaceAnalystParameters = /*#__PURE__*/function () {
  function SurfaceAnalystParameters(options) {
    SurfaceAnalystParameters_classCallCheck(this, SurfaceAnalystParameters);

    /**
     * @member {number} SuperMap.SurfaceAnalystParameters.prototype.resolution
     * @description è·åæè®¾ç½®æå®ä¸­é´ç»æï¼æ æ ¼æ°æ®éï¼çåè¾¨çã
     */
    this.resolution = 0;
    /**
     * @member {SuperMap.SurfaceAnalystParametersSetting} SuperMap.SurfaceAnalystParameters.prototype.extractParameter
     * @description è·åæè®¾ç½®è¡¨é¢åæåæ°ã
     * å¨è¿è¡ç¹æ°æ®éè¿è¡æåç­å¼é¢åææ¶ï¼ææ¶ä¸æ¯æ SurfaceAnalystParametersSetting ç±»ä¸­ç expectedZValues å­æ®µã
     */

    this.extractParameter = new SurfaceAnalystParametersSetting();
    /**
     * @member {SuperMap.DataReturnOption} SuperMap.SurfaceAnalystParameters.prototype.resultSetting
     * @description ç»æè¿åè®¾ç½®ç±»ã
     */

    this.resultSetting = new DataReturnOption();
    /**
     * @member {SuperMap.SurfaceAnalystMethod} [SuperMap.SurfaceAnalystParameters.prototype.surfaceAnalystMethod=SuperMap.SurfaceAnalystMethod.ISOLINE]
     * @description è·åæè®¾ç½®è¡¨é¢åæçæåæ¹æ³ï¼æåç­å¼çº¿åæåç­å¼é¢ã
     */

    this.surfaceAnalystMethod = SurfaceAnalystMethod.ISOLINE;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.SurfaceAnalystParameters";
  }
  /**
   * @function SuperMap.SurfaceAnalystParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  SurfaceAnalystParameters_createClass(SurfaceAnalystParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.resolution = null;

      if (me.extractParameter) {
        me.extractParameter.destroy();
        me.extractParameter = null;
      }

      if (me.resultSetting) {
        me.resultSetting.destroy();
        me.resultSetting = null;
      }

      me.surfaceAnalystMethod = null;
    }
  }]);

  return SurfaceAnalystParameters;
}();
SuperMap.SurfaceAnalystParameters = SurfaceAnalystParameters;
// CONCATENATED MODULE: ./src/common/iServer/DatasetSurfaceAnalystParameters.js
function DatasetSurfaceAnalystParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { DatasetSurfaceAnalystParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { DatasetSurfaceAnalystParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return DatasetSurfaceAnalystParameters_typeof(obj); }

function DatasetSurfaceAnalystParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function DatasetSurfaceAnalystParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function DatasetSurfaceAnalystParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) DatasetSurfaceAnalystParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) DatasetSurfaceAnalystParameters_defineProperties(Constructor, staticProps); return Constructor; }

function DatasetSurfaceAnalystParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { DatasetSurfaceAnalystParameters_get = Reflect.get; } else { DatasetSurfaceAnalystParameters_get = function _get(target, property, receiver) { var base = DatasetSurfaceAnalystParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return DatasetSurfaceAnalystParameters_get(target, property, receiver || target); }

function DatasetSurfaceAnalystParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = DatasetSurfaceAnalystParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function DatasetSurfaceAnalystParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) DatasetSurfaceAnalystParameters_setPrototypeOf(subClass, superClass); }

function DatasetSurfaceAnalystParameters_setPrototypeOf(o, p) { DatasetSurfaceAnalystParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return DatasetSurfaceAnalystParameters_setPrototypeOf(o, p); }

function DatasetSurfaceAnalystParameters_createSuper(Derived) { var hasNativeReflectConstruct = DatasetSurfaceAnalystParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = DatasetSurfaceAnalystParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = DatasetSurfaceAnalystParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return DatasetSurfaceAnalystParameters_possibleConstructorReturn(this, result); }; }

function DatasetSurfaceAnalystParameters_possibleConstructorReturn(self, call) { if (call && (DatasetSurfaceAnalystParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return DatasetSurfaceAnalystParameters_assertThisInitialized(self); }

function DatasetSurfaceAnalystParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function DatasetSurfaceAnalystParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function DatasetSurfaceAnalystParameters_getPrototypeOf(o) { DatasetSurfaceAnalystParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return DatasetSurfaceAnalystParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/






/**
 * @class SuperMap.DatasetSurfaceAnalystParameters
 * @category iServer SpatialAnalyst SurfaceAnalyst
 * @classdesc æ°æ®éè¡¨é¢åæåæ°ç±»ãè¯¥ç±»å¯¹æ°æ®éè¡¨é¢åææç¨å°çåæ°è¿è¡è®¾ç½®ã
 * @param {Object} options - åæ°ã 
 * @param {string} options.dataset - è¦ç¨æ¥åæ°æ®éè¡¨é¢åæçæ°æ®æºä¸­æ°æ®éçåç§°ã 
 * @param {string} options.zValueFieldName - è·åæè®¾ç½®ç¨äºæåæä½çå­æ®µåç§°ã 
 * @param {integer} options.resolution - è·åæè®¾ç½®æå®ä¸­é´ç»æï¼æ æ ¼æ°æ®éï¼çåè¾¨çã 
 * @param {SuperMap.SurfaceAnalystParametersSetting} options.extractParameter - è¡¨é¢åæåæ°è®¾ç½®ç±»ãè·åæè®¾ç½®è¡¨é¢åæåæ°ã 
 * @param {SuperMap.FilterParameter} [options.filterQueryParameter] - è·åæè®¾ç½®æ¥è¯¢è¿æ»¤æ¡ä»¶åæ°ã 
 * @param {SuperMap.DataReturnOption} [options.resultSetting] - ç»æè¿åè®¾ç½®ç±»ã 
 * @param {SuperMap.SurfaceAnalystMethod} [options.surfaceAnalystMethod=SuperMap.SurfaceAnalystMethod.ISOLINE] - è·åæè®¾ç½®è¡¨é¢åæçæåæ¹æ³ï¼æåç­å¼çº¿åæåç­å¼é¢ã 
 * @extends {SuperMap.SurfaceAnalystParameters}
 */

var DatasetSurfaceAnalystParameters = /*#__PURE__*/function (_SurfaceAnalystParame) {
  DatasetSurfaceAnalystParameters_inherits(DatasetSurfaceAnalystParameters, _SurfaceAnalystParame);

  var _super = DatasetSurfaceAnalystParameters_createSuper(DatasetSurfaceAnalystParameters);

  function DatasetSurfaceAnalystParameters(options) {
    var _this;

    DatasetSurfaceAnalystParameters_classCallCheck(this, DatasetSurfaceAnalystParameters);

    _this = _super.call(this, options);
    /**
     * @member {string} SuperMap.DatasetSurfaceAnalystParameters.prototype.dataset
     * @description è¦ç¨æ¥åæ°æ®éè¡¨é¢åæçæ°æ®æºä¸­æ°æ®éçåç§°ãè¯¥åç§°ç¨å½¢å¦ "æ°æ®éåç§°@æ°æ®æºå«å" å½¢å¼æ¥è¡¨ç¤ºï¼ä¾å¦ï¼Country@Worldã
     */

    _this.dataset = null;
    /**
     *  @member {SuperMap.FilterParameter} SuperMap.DatasetSurfaceAnalystParameters.prototype.filterQueryParameter
     *  @description è·åæè®¾ç½®æ¥è¯¢è¿æ»¤æ¡ä»¶åæ°ã
     */

    _this.filterQueryParameter = new FilterParameter();
    /**
     * @member {string} SuperMap.DatasetSurfaceAnalystParameters.prototype.zValueFieldName
     * @description è·åæè®¾ç½®ç¨äºæåæä½çå­æ®µåç§°ãæåç­å¼çº¿æ¶ï¼å°ä½¿ç¨è¯¥å­æ®µä¸­çå¼ï¼å¯¹ç¹è®°å½éä¸­çç¹æ°æ®è¿è¡æå¼åæï¼å¾å°æ æ ¼æ°æ®éï¼ä¸­é´ç»æï¼ï¼æ¥çä»æ æ ¼æ°æ®éæåç­å¼çº¿ã
     */

    _this.zValueFieldName = null;

    if (options) {
      Util.extend(DatasetSurfaceAnalystParameters_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.DatasetSurfaceAnalystParameters";
    return _this;
  }
  /**
   * @function SuperMap.DatasetSurfaceAnalystParameters.prototype.destroy
   * @override
   */


  DatasetSurfaceAnalystParameters_createClass(DatasetSurfaceAnalystParameters, [{
    key: "destroy",
    value: function destroy() {
      DatasetSurfaceAnalystParameters_get(DatasetSurfaceAnalystParameters_getPrototypeOf(DatasetSurfaceAnalystParameters.prototype), "destroy", this).call(this);

      var me = this;
      me.dataset = null;

      if (me.filterQueryParameter) {
        me.filterQueryParameter.destroy();
        me.filterQueryParameter = null;
      }

      me.zValueFieldName = null;
    }
    /**
     * @function SuperMap.DatasetSurfaceAnalystParameters.toObject
     * @param {SuperMap.DatasetSurfaceAnalystParameters} datasetSurfaceAnalystParameters - æ°æ®éè¡¨é¢åæåæ°ç±»ã
     * @param {SuperMap.DatasetSurfaceAnalystParameters} tempObj - æ°æ®éè¡¨é¢åæåæ°å¯¹è±¡ã
     * @description å°æ°æ®éè¡¨é¢åæåæ°å¯¹è±¡è½¬æ¢ä¸º JSON å¯¹è±¡ã
     * @returns JSON å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(datasetSurfaceAnalystParameters, tempObj) {
      for (var name in datasetSurfaceAnalystParameters) {
        if (name === "filterQueryParameter") {
          tempObj.filterQueryParameter = datasetSurfaceAnalystParameters.filterQueryParameter;
        }

        if (name === "extractParameter") {
          if (datasetSurfaceAnalystParameters.extractParameter.clipRegion instanceof Geometry && datasetSurfaceAnalystParameters.extractParameter.clipRegion.components) {
            datasetSurfaceAnalystParameters.extractParameter.clipRegion = ServerGeometry.fromGeometry(datasetSurfaceAnalystParameters.extractParameter.clipRegion);
          }

          tempObj.extractParameter = datasetSurfaceAnalystParameters.extractParameter;
        } else if (name === "dataset") {
          continue;
        } else if (name === "surfaceAnalystMethod") {
          continue;
        } else {
          tempObj[name] = datasetSurfaceAnalystParameters[name];
        }
      }
    }
  }]);

  return DatasetSurfaceAnalystParameters;
}(SurfaceAnalystParameters);
SuperMap.DatasetSurfaceAnalystParameters = DatasetSurfaceAnalystParameters;
// CONCATENATED MODULE: ./src/common/iServer/ThiessenAnalystParameters.js
function ThiessenAnalystParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThiessenAnalystParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThiessenAnalystParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThiessenAnalystParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThiessenAnalystParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.ThiessenAnalystParameters
 * @category  iServer SpatialAnalyst ThiessenPolygonAnalyst
 * @classdesc æ³°æ£®å¤è¾¹å½¢åæåæ°åºç±»ã
 * @param {Object} options - åæ°ã
 * @param {(SuperMap.Geometry.Polygon|L.Polygon|ol.geom.Polygon)} [options.clipRegion] - ç»ææ°æ®è£åªåºåï¼å¯ä»¥ä¸º nullï¼è¡¨ç¤ºä¸å¯¹ç»æè¿è¡è£åªã
 * @param {boolean} [options.createResultDataset=false] - æ¯å¦è¿åç»ææ°æ®éã
 * @param {string} [options.resultDatasetName] - æå®ç»ææ°æ®éåç§°ã
 * @param {string} [options.resultDatasourceName] - æå®ç»ææ°æ®éæå¨æ°æ®æºï¼é»è®¤ä¸ºå½åæ°æ®æºã
 * @param {boolean} [options.returnResultRegion=true] - æ¯å¦è¿ååæå¾å°çå¤è¾¹å½¢é¢æ°ç»ã
 */

var ThiessenAnalystParameters = /*#__PURE__*/function () {
  function ThiessenAnalystParameters(options) {
    ThiessenAnalystParameters_classCallCheck(this, ThiessenAnalystParameters);

    if (!options) {
      return;
    }
    /**
     * @member {(SuperMap.Geometry.Polygon|L.Polygon|ol.geom.Polygon)} [SuperMap.ThiessenAnalystParameters.prototype.clipRegion]
     * @description ç»ææ°æ®è£åªåºåï¼å¯ä»¥ä¸º nullï¼è¡¨ç¤ºä¸å¯¹ç»æè¿è¡è£åªã
     */


    this.clipRegion = null;
    /**
     *  @member {boolean} [SuperMap.ThiessenAnalystParameters.prototype.createResultDataset=false]
     *  @description æ¯å¦è¿åç»ææ°æ®éãå¦æä¸º trueï¼åå¿é¡»è®¾ç½®å±æ§ resultDatasetName å resultDatasourceNameã
     */

    this.createResultDataset = false;
    /**
     * @member {string} SuperMap.ThiessenAnalystParameters.prototype.resultDatasetName
     * @description æå®ç»ææ°æ®éåç§°ã
     */

    this.resultDatasetName = null;
    /**
     * @member {string} SuperMap.ThiessenAnalystParameters.prototype.resultDatasourceName
     * @description æå®ç»ææ°æ®éæå¨æ°æ®æºã
     */

    this.resultDatasourceName = null;
    /**
     * @member {boolean} SuperMap.ThiessenAnalystParameters.prototype.returnResultRegion
     * @description æ¯å¦è¿ååæå¾å°çå¤è¾¹å½¢é¢æ°ç»ã
     */

    this.returnResultRegion = true;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.ThiessenAnalystParameters";
  }
  /**
   * @function SuperMap.ThiessenAnalystParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThiessenAnalystParameters_createClass(ThiessenAnalystParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;

      if (me.clipRegion) {
        me.clipRegion.destroy();
        me.clipRegion = null;
      }

      me.createResultDataset = null;
      me.resultDatasetName = null;
      me.resultDatasourceName = null;
      me.returnResultRegion = null;
    }
  }]);

  return ThiessenAnalystParameters;
}();
SuperMap.ThiessenAnalystParameters = ThiessenAnalystParameters;
// CONCATENATED MODULE: ./src/common/iServer/DatasetThiessenAnalystParameters.js
function DatasetThiessenAnalystParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { DatasetThiessenAnalystParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { DatasetThiessenAnalystParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return DatasetThiessenAnalystParameters_typeof(obj); }

function DatasetThiessenAnalystParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function DatasetThiessenAnalystParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function DatasetThiessenAnalystParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) DatasetThiessenAnalystParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) DatasetThiessenAnalystParameters_defineProperties(Constructor, staticProps); return Constructor; }

function DatasetThiessenAnalystParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { DatasetThiessenAnalystParameters_get = Reflect.get; } else { DatasetThiessenAnalystParameters_get = function _get(target, property, receiver) { var base = DatasetThiessenAnalystParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return DatasetThiessenAnalystParameters_get(target, property, receiver || target); }

function DatasetThiessenAnalystParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = DatasetThiessenAnalystParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function DatasetThiessenAnalystParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) DatasetThiessenAnalystParameters_setPrototypeOf(subClass, superClass); }

function DatasetThiessenAnalystParameters_setPrototypeOf(o, p) { DatasetThiessenAnalystParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return DatasetThiessenAnalystParameters_setPrototypeOf(o, p); }

function DatasetThiessenAnalystParameters_createSuper(Derived) { var hasNativeReflectConstruct = DatasetThiessenAnalystParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = DatasetThiessenAnalystParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = DatasetThiessenAnalystParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return DatasetThiessenAnalystParameters_possibleConstructorReturn(this, result); }; }

function DatasetThiessenAnalystParameters_possibleConstructorReturn(self, call) { if (call && (DatasetThiessenAnalystParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return DatasetThiessenAnalystParameters_assertThisInitialized(self); }

function DatasetThiessenAnalystParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function DatasetThiessenAnalystParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function DatasetThiessenAnalystParameters_getPrototypeOf(o) { DatasetThiessenAnalystParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return DatasetThiessenAnalystParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.DatasetThiessenAnalystParameters
 * @category iServer SpatialAnalyst ThiessenAnalyst
 * @classdesc æ°æ®éæ³°æ£®å¤è¾¹å½¢åæåæ°ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {SuperMap.FilterParameter} [options.filterQueryParameter] - å¯¹å¾åææ°æ®éä¸­çç¹è¿è¡è¿æ»¤ï¼å³å¯¹æ°æ®éä¸­çææç¹è¿è¡åæã
 * @extends {SuperMap.ThiessenAnalystParameters}
 */

var DatasetThiessenAnalystParameters = /*#__PURE__*/function (_ThiessenAnalystParam) {
  DatasetThiessenAnalystParameters_inherits(DatasetThiessenAnalystParameters, _ThiessenAnalystParam);

  var _super = DatasetThiessenAnalystParameters_createSuper(DatasetThiessenAnalystParameters);

  function DatasetThiessenAnalystParameters(options) {
    var _this;

    DatasetThiessenAnalystParameters_classCallCheck(this, DatasetThiessenAnalystParameters);

    _this = _super.call(this, options);
    /**
     * @member {SuperMap.FilterParameter} [SuperMap.DatasetThiessenAnalystParameters.prototype.filterQueryParameter]
     * @description è¿æ»¤æ¡ä»¶ï¼å¯¹å¾åææ°æ®éä¸­çç¹è¿è¡è¿æ»¤ï¼å³å¯¹æ°æ®éä¸­çææç¹è¿è¡åæã
     * @example
     *  var filterQueryParameter = new SuperMap.FilterParameter({
     *   name: "Countries@World",
     *   attributeFilter: "SmID>100"
     *  });
     */

    _this.filterQueryParameter = null;
    /**
     * @member {string} SuperMap.DatasetThiessenAnalystParameters.prototype.dataset
     * @description æ°æ®éåç§°å¾åæçæ°æ®éåç§°ï¼è¯·ä½¿ç¨ "datasetName@datasourceName" æ ¼å¼æ¥è¡¨ç¤ºã
     */

    _this.dataset = null;

    if (options) {
      Util.extend(DatasetThiessenAnalystParameters_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.DatasetThiessenAnalystParameters";
    return _this;
  }
  /**
   * @function SuperMap.DatasetThiessenAnalystParameters.prototype.destroy
   * @override
   */


  DatasetThiessenAnalystParameters_createClass(DatasetThiessenAnalystParameters, [{
    key: "destroy",
    value: function destroy() {
      DatasetThiessenAnalystParameters_get(DatasetThiessenAnalystParameters_getPrototypeOf(DatasetThiessenAnalystParameters.prototype), "destroy", this).call(this);

      var me = this;

      if (me.filterQueryParameter) {
        me.filterQueryParameter.destroy();
        me.filterQueryParameter = null;
      }
    }
    /**
     * @function SuperMap.DatasetThiessenAnalystParameters.toObject
     * @param {SuperMap.DatasetThiessenAnalystParameters} datasetThiessenAnalystParameters - æ³°æ£®å¤è¾¹å½¢åææå¡åæ°ç±»ã
     * @param {SuperMap.DatasetThiessenAnalystParameters} tempObj - æ³°æ£®å¤è¾¹å½¢åææå¡åæ°å¯¹è±¡ã
     * @description å°æ³°æ£®å¤è¾¹å½¢åææå¡åæ°å¯¹è±¡è½¬æ¢ä¸º JSON å¯¹è±¡ã
     * @returns JSON å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(datasetThiessenAnalystParameters, tempObj) {
      for (var name in datasetThiessenAnalystParameters) {
        if (name === "clipRegion") {
          tempObj.clipRegion = ServerGeometry.fromGeometry(datasetThiessenAnalystParameters.clipRegion);
        } else {
          tempObj[name] = datasetThiessenAnalystParameters[name];
        }
      }
    }
  }]);

  return DatasetThiessenAnalystParameters;
}(ThiessenAnalystParameters);
SuperMap.DatasetThiessenAnalystParameters = DatasetThiessenAnalystParameters;
// CONCATENATED MODULE: ./src/common/iServer/DensityKernelAnalystParameters.js
function DensityKernelAnalystParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function DensityKernelAnalystParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function DensityKernelAnalystParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) DensityKernelAnalystParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) DensityKernelAnalystParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.DensityKernelAnalystParameters
 * @category  iServer SpatialAnalyst DensityAnalyst
 * @classdesc æ ¸å¯åº¦åæåæ°ç±»ã
 * @param {Object} options - åæ°ã
 * @param {string} options.dataset - è¦ç¨æ¥åæ ¸å¯åº¦åææ°æ®æºä¸­æ°æ®éçåç§°ãè¯¥åç§°ç¨å½¢å¦ "æ°æ®éåç§°@æ°æ®æºå«å" å½¢å¼æ¥è¡¨ç¤ºï¼ä¾å¦ï¼BaseMap_P@Jingjinã 
 * @param {string} options.fieldName - ç¨äºè¿è¡æ ¸å¯åº¦åæçæµéå¼çå­æ®µåç§°ï¼æ ¸å¯åº¦åæä¸æ¯æææ¬ç±»åçå­æ®µã 
 * @param {string} options.resultGridName - æå®ç»ææ°æ®éåç§°ã 
 * @param {(SuperMap.Bounds|L.Bounds|ol.extent)} [options.bounds] - æ ¸å¯åº¦åæçèå´ï¼ç¨äºç¡®å®ç»ææ æ ¼æ°æ®éçèå´ãå¦æç¼ºçï¼åé»è®¤ä¸ºåæ°æ®éçèå´ã 
 * @param {number} [options.searchRadius] - æ æ ¼é»ååç¨äºè®¡ç®å¯åº¦çæ¥æ¾åå¾ï¼åä½ä¸å½åæ°æ®éç¸åãé»è®¤å¼ä¸ºå½åæ°æ®éçé¿å®½ä¸­çæå¤§å¼é¤30ã 
 * @param {number} [options.resultGridDatasetResolution] - å¯åº¦åæç»ææ æ ¼æ°æ®çåè¾¨çï¼åä½ä¸å½åæ°æ®éç¸åãé»è®¤å¼ä¸ºå½åæ°æ®éçé¿å®½ä¸­çæå°å¼é¤500ã 
 * @param {string} [options.targetDatasource] - æå®çå­å¨ç»ææ°æ®éçæ°æ®æºï¼é»è®¤ä¸ºå½ååæçæ°æ®éæå¨çæ°æ®æºã 
 * @param {boolean} [options.deleteExistResultDataset=false] - å¦æç¨æ·å½åçç»ææ°æ®éåç§°ä¸å·²æçæ°æ®ééåï¼æ¯å¦å é¤å·²æçæ°æ®éã 
 */

var DensityKernelAnalystParameters = /*#__PURE__*/function () {
  function DensityKernelAnalystParameters(options) {
    DensityKernelAnalystParameters_classCallCheck(this, DensityKernelAnalystParameters);

    /**
     * @member {string} SuperMap.DensityKernelAnalystParameters.prototype.dataset
     * @description è¦ç¨æ¥åæ ¸å¯åº¦åææ°æ®æºä¸­æ°æ®éçåç§°ã
     * è¯¥åç§°ç¨å½¢å¦ "æ°æ®éåç§°@æ°æ®æºå«å" å½¢å¼æ¥è¡¨ç¤ºï¼ä¾å¦ï¼Railway@Changchunã
     * æ³¨ï¼æ ¸å¯åº¦åææ¯æç¹æ°æ®éåçº¿æ°æ®éã
     */
    this.dataset = null;
    /**
     * @member {(SuperMap.Bounds|L.Bounds|ol.extent)} [SuperMap.DensityKernelAnalystParameters.prototype.bounds]
     * @description æ ¸å¯åº¦åæçèå´ï¼ç¨äºç¡®å®ç»ææ æ ¼æ°æ®éçèå´ã
     * å¦æç¼ºçï¼åé»è®¤ä¸ºåæ°æ®éçèå´ã
     */

    this.bounds = null;
    /**
     * @member {string} SuperMap.DensityKernelAnalystParameters.prototype.fieldName
     * @description ç¨äºè¿è¡æ ¸å¯åº¦åæçæµéå¼çå­æ®µåç§°ï¼æ ¸å¯åº¦åæä¸æ¯æææ¬ç±»åçå­æ®µã
     */

    this.fieldName = null;
    /**
     * @member {number} [SuperMap.DensityKernelAnalystParameters.prototype.resultGridDatasetResolution]
     * @description å¯åº¦åæç»ææ æ ¼æ°æ®çåè¾¨çï¼åä½ä¸å½åæ°æ®éç¸åãé»è®¤å¼ä¸ºå½åæ°æ®éçé¿å®½ä¸­çæå°å¼é¤500ã
     */

    this.resultGridDatasetResolution = null;
    /**
     * @member {number} [SuperMap.DensityKernelAnalystParameters.prototype.searchRadius]
     * @description æ æ ¼é»ååç¨äºè®¡ç®å¯åº¦çæ¥æ¾åå¾ï¼åä½ä¸å½åæ°æ®éç¸åãé»è®¤å¼ä¸ºå½åæ°æ®éçé¿å®½ä¸­çæå¤§å¼é¤30ã
     */

    this.searchRadius = null;
    /**
     * @member {string} [SuperMap.DensityKernelAnalystParameters.prototype.targetDatasource]
     * @description æå®çå­å¨ç»ææ°æ®éçæ°æ®æºï¼é»è®¤ä¸ºå½ååæçæ°æ®éæå¨çæ°æ®æºã
     */

    this.targetDatasource = null;
    /**
     * @member {string} SuperMap.DensityKernelAnalystParameters.prototype.resultGridName
     * @description æå®ç»ææ°æ®éåç§°ã
     */

    this.resultGridName = null;
    /**
     * @member {boolean} [SuperMap.DensityKernelAnalystParameters.prototype.deleteExistResultDataset=false]
     * @description å¦æç¨æ·å½åçç»ææ°æ®éåç§°ä¸å·²æçæ°æ®ééåï¼æ¯å¦å é¤å·²æçæ°æ®éã
     */

    this.deleteExistResultDataset = false;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.DensityKernelAnalystParameters";
  }
  /**
   * @function SuperMap.DensityKernelAnalystParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  DensityKernelAnalystParameters_createClass(DensityKernelAnalystParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.dataset = null;
      me.bounds = null;
      me.fieldName = null;
      me.resultGridDatasetResolution = null;
      me.searchRadius = null;
      me.targetDatasource = null;
      me.resultGridName = null;
      me.deleteExistResultDataset = null;
    }
    /**
     * @function SuperMap.DensityKernelAnalystParameters.toObject
     * @param {SuperMap.DensityKernelAnalystParameters} densityKernelAnalystParameters -æ ¸å¯åº¦åæåæ°ç±»ã
     * @param {SuperMap.DensityKernelAnalystParameters} tempObj - æ ¸å¯åº¦åæåæ°å¯¹è±¡ã
     * @description å°æ ¸å¯åº¦åæåæ°å¯¹è±¡è½¬æ¢æ JSON å¯¹è±¡ã
     * @returns JSON å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(densityKernelAnalystParameters, tempObj) {
      for (var name in densityKernelAnalystParameters) {
        if (name !== "dataset") {
          tempObj[name] = densityKernelAnalystParameters[name];
        }
      }
    }
  }]);

  return DensityKernelAnalystParameters;
}();
SuperMap.DensityKernelAnalystParameters = DensityKernelAnalystParameters;
// CONCATENATED MODULE: ./src/common/iServer/DensityAnalystService.js
function DensityAnalystService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { DensityAnalystService_typeof = function _typeof(obj) { return typeof obj; }; } else { DensityAnalystService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return DensityAnalystService_typeof(obj); }

function DensityAnalystService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function DensityAnalystService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function DensityAnalystService_createClass(Constructor, protoProps, staticProps) { if (protoProps) DensityAnalystService_defineProperties(Constructor.prototype, protoProps); if (staticProps) DensityAnalystService_defineProperties(Constructor, staticProps); return Constructor; }

function DensityAnalystService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { DensityAnalystService_get = Reflect.get; } else { DensityAnalystService_get = function _get(target, property, receiver) { var base = DensityAnalystService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return DensityAnalystService_get(target, property, receiver || target); }

function DensityAnalystService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = DensityAnalystService_getPrototypeOf(object); if (object === null) break; } return object; }

function DensityAnalystService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) DensityAnalystService_setPrototypeOf(subClass, superClass); }

function DensityAnalystService_setPrototypeOf(o, p) { DensityAnalystService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return DensityAnalystService_setPrototypeOf(o, p); }

function DensityAnalystService_createSuper(Derived) { var hasNativeReflectConstruct = DensityAnalystService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = DensityAnalystService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = DensityAnalystService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return DensityAnalystService_possibleConstructorReturn(this, result); }; }

function DensityAnalystService_possibleConstructorReturn(self, call) { if (call && (DensityAnalystService_typeof(call) === "object" || typeof call === "function")) { return call; } return DensityAnalystService_assertThisInitialized(self); }

function DensityAnalystService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function DensityAnalystService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function DensityAnalystService_getPrototypeOf(o) { DensityAnalystService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return DensityAnalystService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.DensityAnalystService
 * @category iServer SpatialAnalyst DensityAnalyst
 * @classdesc
 * å¯åº¦åææå¡ç±»ï¼å¯åº¦åæå¯è®¡ç®æ¯ä¸ªè¾åºæ æ ¼ååå¨å´åå½¢é»ååè¾å¥çç¹æçº¿å¯¹è±¡çå¯åº¦ã
 * å¯åº¦åæï¼å¨æç§æä¹ä¸æ¥è¯´ï¼ç¸å½äºå¨è¡¨é¢ä¸å°è¾å¥çç¹çº¿å¯¹è±¡çæµéå¼æ£å¼æ¥ï¼å°æ¯ä¸ªç¹æçº¿å¯¹è±¡çæµééåå¸å¨æ´ä¸ªç ç©¶åºåï¼å¹¶è®¡ç®è¾åºæ æ ¼ä¸­æ¯ä¸ªååçå¯åº¦å¼ãç®åæä¾1ç§å¯åº¦åæï¼æ ¸å¯åº¦åæï¼Kernelï¼ã
 * @param {string} url - æå¡çè®¿é®å°åãå¦ http://localhost:8090/iserver/services/spatialanalyst-changchun/restjsr/spatialanalyst ã
 * @param {Object} options - åæ°ã</br>
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @extends {SuperMap.SpatialAnalystBase}
 * @example  ä¾å¦ï¼
 *  var myDensityAnalystService = new SuperMap.DensityAnalystService(url);
 *  myDensityAnalystService.on({
 *     "processCompleted": processCompleted,
 *     "processFailed": processFailed
 *     }
 *  );
 */

var DensityAnalystService = /*#__PURE__*/function (_SpatialAnalystBase) {
  DensityAnalystService_inherits(DensityAnalystService, _SpatialAnalystBase);

  var _super = DensityAnalystService_createSuper(DensityAnalystService);

  function DensityAnalystService(url, options) {
    var _this;

    DensityAnalystService_classCallCheck(this, DensityAnalystService);

    _this = _super.call(this, url, options);
    /**
     * @member {string} SuperMap.DensityAnalystService.prototype.mode
     * @description å¯åº¦åæç±»åã
     */

    _this.mode = null;

    if (options) {
      Util.extend(DensityAnalystService_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.DensityAnalystService";
    return _this;
  }
  /**
   * @function SuperMap.DensityAnalystService.prototype.destroy
   * @description éæ¾èµæº,å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  DensityAnalystService_createClass(DensityAnalystService, [{
    key: "destroy",
    value: function destroy() {
      DensityAnalystService_get(DensityAnalystService_getPrototypeOf(DensityAnalystService.prototype), "destroy", this).call(this);

      this.mode = null;
    }
    /**
     * @function SuperMap.DensityAnalystService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.DensityKernelAnalystParameters} parameter - æ ¸å¯åº¦åæåæ°ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(parameter) {
      var me = this;
      var parameterObject = new Object();

      if (parameter instanceof DensityKernelAnalystParameters) {
        me.url = Util.urlPathAppend(me.url, 'datasets/' + parameter.dataset + '/densityanalyst/kernel');
        me.mode = "kernel";
      }

      DensityKernelAnalystParameters.toObject(parameter, parameterObject);
      var jsonParameters = Util.toJSON(parameterObject);
      me.url = Util.urlAppend(me.url, 'returnContent=true');
      me.request({
        method: "POST",
        data: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return DensityAnalystService;
}(SpatialAnalystBase);
SuperMap.DensityAnalystService = DensityAnalystService;
// CONCATENATED MODULE: ./src/common/iServer/EditFeaturesParameters.js
function EditFeaturesParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function EditFeaturesParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function EditFeaturesParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) EditFeaturesParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) EditFeaturesParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.EditFeaturesParameters
 * @category iServer Data Feature
 * @classdesc æ°æ®æå¡ä¸­æ°æ®éæ·»å ãä¿®æ¹ãå é¤åæ°ç±»ã
 * @category iServer Data
 * @param {Object} options - åæ°ã 
 * @param {Array.<SuperMap.Feature.Vector|GeoJSONObject|ol.feature>} options.features - å½åéè¦åå»ºæèæ¯ä¿®æ¹çè¦ç´ éã 
 * @param {boolean} [options.returnContent=false] - æ¯è¿ååå»ºè¦ç´ ç ID æ°ç»è¿æ¯è¿å featureResult èµæºç URIã 
 * @param {SuperMap.EditType} [options.editType=SuperMap.EditType.ADD] - POST å¨ä½ç±»å (ADDãUPDATEãDELETE)ã 
 * @param {Array.<string|integer>} [options.IDs] - å é¤è¦ç´ æ¶çè¦ç´ ç ID æ°ç»ã 
 */

var EditFeaturesParameters = /*#__PURE__*/function () {
  function EditFeaturesParameters(options) {
    EditFeaturesParameters_classCallCheck(this, EditFeaturesParameters);

    /**
     * @member {string} SuperMap.EditFeaturesParameters.prototype.dataSourceName
     * @description å½åéè¦åå»ºæèæ¯ä¿®æ¹çè¦ç´ çæ°æ®æºã
     */
    this.dataSourceName = null;
    /**
     * @member {string} SuperMap.EditFeaturesParameters.prototype.dataSetName
     * @description å½åéè¦åå»ºæèæ¯ä¿®æ¹çè¦ç´ çæ°æ®éã
     */

    this.dataSetName = null;
    /**
     * @member {Array.<SuperMap.Feature.Vector|GeoJSONObject|ol.feature>} SuperMap.EditFeaturesParameters.prototype.features
     * @description å½åéè¦åå»ºæèæ¯ä¿®æ¹çè¦ç´ éã 
     */

    this.features = null;
    /**
     * @member {SuperMap.EditType} [SuperMap.EditFeaturesParameters.prototype.editType=SuperMap.EditType.ADD]
     * @description è¦ç´ éæ´æ°ç±»å (addãupdateãdelete)ã
     */

    this.editType = EditType.ADD;
    /**
     * @member {Array.<string|number>} [SuperMap.EditFeaturesParameters.prototype.IDs]
     * @description æ§è¡å é¤æ¶è¦ç´ é ID éåã
     */

    this.IDs = null;
    /**
     * @member {boolean} [SuperMap.EditFeaturesParameters.prototype.returnContent=false]
     * @description è¦ç´ æ·»å æ¶ï¼isUseBatch ä¸ä¼ æä¼ ä¸º false çæåµä¸ææã
     *              true è¡¨ç¤ºç´æ¥è¿åæ°åå»ºçè¦ç´ ç ID æ°ç»ï¼false è¡¨ç¤ºè¿ååå»ºç featureResult èµæºç URIã
     */

    this.returnContent = false;
    /**
     * @member {boolean} [SuperMap.EditFeaturesParameters.prototype.isUseBatch=false]
     * @description æ¯å¦ä½¿ç¨æ¹éæ·»å è¦ç´ åè½ï¼è¦ç´ æ·»å æ¶ææãæ¹éæ·»å è½å¤æé«è¦ç´ ç¼è¾æçãtrue è¡¨ç¤ºæ¹éæ·»å ï¼false è¡¨ç¤ºä¸ä½¿ç¨æ¹éæ·»å ã
     */

    this.isUseBatch = false;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.EditFeaturesParameters";
  }
  /**
   * @function SuperMap.EditFeaturesParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  EditFeaturesParameters_createClass(EditFeaturesParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.dataSourceName = null;
      me.dataSetName = null;
      me.features = null;
      me.editType = null;
      me.IDs = null;
      me.returnContent = null;
    }
    /**
     * @function SuperMap.EditFeaturesParameters.prototype.toJsonParameters
     * @description å° EditFeaturesParameters å¯¹è±¡åæ°è½¬æ¢ä¸º JSON å­ç¬¦ä¸²ã
     * @param {SuperMap.EditFeaturesParameters} params - å°ç©ç¼è¾åæ°ã
     * @returns {string} JSON å­ç¬¦ä¸²ã
     */

  }], [{
    key: "toJsonParameters",
    value: function toJsonParameters(params) {
      var feature,
          len,
          features,
          editType = params.editType;

      if (editType === EditType.DELETE) {
        if (params.IDs === null) {
          return;
        }

        features = {
          ids: params.IDs
        };
      } else {
        features = [];

        if (params.features) {
          len = params.features.length;

          for (var i = 0; i < len; i++) {
            feature = params.features[i];
            feature.geometry = ServerGeometry.fromGeometry(feature.geometry);
            features.push(feature);
          }
        }
      }

      return Util.toJSON(features);
    }
  }]);

  return EditFeaturesParameters;
}();
SuperMap.EditFeaturesParameters = EditFeaturesParameters;
// CONCATENATED MODULE: ./src/common/iServer/EditFeaturesService.js
function EditFeaturesService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { EditFeaturesService_typeof = function _typeof(obj) { return typeof obj; }; } else { EditFeaturesService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return EditFeaturesService_typeof(obj); }

function EditFeaturesService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function EditFeaturesService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function EditFeaturesService_createClass(Constructor, protoProps, staticProps) { if (protoProps) EditFeaturesService_defineProperties(Constructor.prototype, protoProps); if (staticProps) EditFeaturesService_defineProperties(Constructor, staticProps); return Constructor; }

function EditFeaturesService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { EditFeaturesService_get = Reflect.get; } else { EditFeaturesService_get = function _get(target, property, receiver) { var base = EditFeaturesService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return EditFeaturesService_get(target, property, receiver || target); }

function EditFeaturesService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = EditFeaturesService_getPrototypeOf(object); if (object === null) break; } return object; }

function EditFeaturesService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) EditFeaturesService_setPrototypeOf(subClass, superClass); }

function EditFeaturesService_setPrototypeOf(o, p) { EditFeaturesService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return EditFeaturesService_setPrototypeOf(o, p); }

function EditFeaturesService_createSuper(Derived) { var hasNativeReflectConstruct = EditFeaturesService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = EditFeaturesService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = EditFeaturesService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return EditFeaturesService_possibleConstructorReturn(this, result); }; }

function EditFeaturesService_possibleConstructorReturn(self, call) { if (call && (EditFeaturesService_typeof(call) === "object" || typeof call === "function")) { return call; } return EditFeaturesService_assertThisInitialized(self); }

function EditFeaturesService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function EditFeaturesService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function EditFeaturesService_getPrototypeOf(o) { EditFeaturesService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return EditFeaturesService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.EditFeaturesService
 * @category  iServer Data Feature
 * @classdesc æ°æ®æå¡ä¸­æ°æ®éæ·»å ãæ´æ°ãå é¤æå¡ç±»ã
 * @extends {SuperMap.CommonServiceBase}
 * @param {string} url - æå¡ç«¯çæ°æ®æå¡èµæºå°åãè¯·æ±æ°æ®æå¡ä¸­æ°æ®éç¼è¾æå¡ï¼URL åºä¸ºï¼</br>
 * http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{æ°æ®æå¡å}/rest/data/datasources/name/{æ°æ®æºå}/datasets/name/{æ°æ®éå} ã</br>
 * ä¾å¦ï¼http://localhost:8090/iserver/services/data-jingjin/rest/data/datasources/name/Jingjin/datasets/name/Landuse_R
 * @param {Object} options - åæ°ã</br>
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæprocessCompletedå±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailedå±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã
 * @param {SuperMap.DataFormat} [format] -æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æiServerJSON åGeoJSONä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º"ISERVER","GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @example
 * var myService = new SuperMap.EditFeaturesService(url, {eventListeners: {
 *     "processCompleted": editFeatureCompleted,
 *     "processFailed": editFeatureError
 *       }
 * };
 *
 */

var EditFeaturesService = /*#__PURE__*/function (_CommonServiceBase) {
  EditFeaturesService_inherits(EditFeaturesService, _CommonServiceBase);

  var _super = EditFeaturesService_createSuper(EditFeaturesService);

  function EditFeaturesService(url, options) {
    var _this;

    EditFeaturesService_classCallCheck(this, EditFeaturesService);

    _this = _super.call(this, url, options);
    /**
     * @member {boolean} [SuperMap.EditFeaturesService.prototype.returnContent=false]
     * @descriptionè¦ç´ æ·»å æ¶ï¼isUseBatch ä¸ä¼ æä¼ ä¸º false çæåµä¸ææãtrue è¡¨ç¤ºç´æ¥è¿åæ°åå»ºçè¦ç´ ç ID æ°ç»;false è¡¨ç¤ºè¿ååå»ºç featureResult èµæºç URIã
     */

    _this.returnContent = false;
    /**
     * @member {boolean} [SuperMap.EditFeaturesService.prototype.isUseBatch=false]
     * @description æ¯å¦ä½¿ç¨æ¹éæ·»å è¦ç´ åè½ï¼è¦ç´ æ·»å æ¶ææã
     *              æ¹éæ·»å è½å¤æé«è¦ç´ ç¼è¾æçã
     *              true è¡¨ç¤ºæ¹éæ·»å ï¼false è¡¨ç¤ºä¸ä½¿ç¨æ¹éæ·»å ã
     */

    _this.isUseBatch = false;

    if (options) {
      Util.extend(EditFeaturesService_assertThisInitialized(_this), options);
    }

    _this.url = Util.urlPathAppend(_this.url, 'features');
    _this.CLASS_NAME = "SuperMap.EditFeaturesService";
    return _this;
  }
  /**
   * @function SuperMap.EditFeaturesService.prototype.destroy
   * @override
   */


  EditFeaturesService_createClass(EditFeaturesService, [{
    key: "destroy",
    value: function destroy() {
      EditFeaturesService_get(EditFeaturesService_getPrototypeOf(EditFeaturesService.prototype), "destroy", this).call(this);

      var me = this;
      me.returnContent = null;
      me.isUseBatch = null;
      me.fromIndex = null;
      me.toIndex = null;
    }
    /**
     * @function SuperMap.EditFeaturesService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ´æ°åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.EditFeaturesParameters} params - ç¼è¾è¦ç´ åæ°ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof EditFeaturesParameters)) {
        return;
      }

      var me = this,
          method = "POST",
          ids = "",
          editType = params.editType,
          jsonParameters = null;
      me.returnContent = params.returnContent;
      me.isUseBatch = params.isUseBatch;
      jsonParameters = EditFeaturesParameters.toJsonParameters(params);

      if (editType === EditType.DELETE) {
        ids = Util.toJSON(params.IDs);
        me.url = Util.urlAppend(me.url, "ids=" + ids);
        method = "DELETE";
        jsonParameters = ids;
      } else if (editType === EditType.UPDATE) {
        method = "PUT";
      } else {
        if (me.isUseBatch) {
          me.url = Util.urlAppend(me.url, "isUseBatch=".concat(me.isUseBatch));
          me.returnContent = false;
        }

        if (me.returnContent) {
          me.url = Util.urlAppend(me.url, 'returnContent=true');
          method = "POST";
        }
      }

      me.request({
        method: method,
        data: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return EditFeaturesService;
}(CommonServiceBase);
SuperMap.EditFeaturesService = EditFeaturesService;
// CONCATENATED MODULE: ./src/common/iServer/FacilityAnalyst3DParameters.js
function FacilityAnalyst3DParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FacilityAnalyst3DParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FacilityAnalyst3DParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) FacilityAnalyst3DParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) FacilityAnalyst3DParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.FacilityAnalyst3DParameters
 * @category  iServer FacilityAnalyst3D
 * @classdesc æè¿è®¾æ½åæåæ°åºç±»ãæè¿è®¾æ½åææ¯æå¨ç½ç»ä¸ç»å®ä¸ä¸ªäºä»¶ç¹åä¸ç»è®¾æ½ç¹ï¼æ¥æ¾ä»äºä»¶ç¹å°è®¾æ½ç¹ï¼æä»è®¾æ½ç¹å°äºä»¶ç¹ï¼ä»¥æå°èè´¹è½å°è¾¾çæä½³è·¯å¾ã
 * è®¾æ½ç¹ä¸è¬ä¸ºå­¦æ ¡ãè¶å¸ãå æ²¹ç«ç­æå¡è®¾æ½ï¼äºä»¶ç¹ä¸ºéè¦æå¡è®¾æ½çäºä»¶ä½ç½®ãä¾å¦äºä»¶åçç¹æ¯ä¸èµ·äº¤éäºæï¼è¦æ±æ¥æ¾å¨ 10 åéåè½å°è¾¾çæè¿å»é¢ï¼
 * è¶è¿ 10 åéè½å°è¾¾çé½ä¸äºèèãæ­¤ä¾ä¸­ï¼äºæåçå°å³æ¯ä¸ä¸ªäºä»¶ç¹ï¼å¨è¾¹çå»é¢åæ¯è®¾æ½ç¹ãæè¿è®¾æ½æ¥æ¾å®éä¸ä¹æ¯ä¸ç§è·¯å¾åæï¼å æ­¤å¯¹è·¯å¾åæèµ·
 * ä½ç¨çéç¢è¾¹ãéç¢ç¹ãè½¬åè¡¨ãèè´¹ç­å±æ§å¨æè¿è®¾æ½åææ¶åæ ·å¯è®¾ç½®ã
 * @param {Object} options - åæ°ã 
 * @param {string} options.weightName - æå®çæå¼å­æ®µä¿¡æ¯å¯¹è±¡çåç§°ã 
 * @param {number} [options.edgeID] - æå®çå¼§æ®µ IDï¼edgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã 
 * @param {number} [options.nodeID] - æå®çç»ç¹ IDï¼edgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã  
 * @param {boolean} [options.isUncertainDirectionValid=false] - æå®ä¸ç¡®å®æµåæ¯å¦ææãæå®ä¸º trueï¼è¡¨ç¤ºä¸ç¡®å®æµåææï¼éå°ä¸ç¡®å®æµåæ¶åæç»§ç»­è¿è¡ï¼
 *                                                      æå®ä¸º falseï¼è¡¨ç¤ºä¸ç¡®å®æµåæ æï¼éå°ä¸ç¡®å®æµåå°åæ­¢å¨è¯¥æ¹åä¸ç»§ç»­æ¥æ¾ã
 */

var FacilityAnalyst3DParameters = /*#__PURE__*/function () {
  function FacilityAnalyst3DParameters(options) {
    FacilityAnalyst3DParameters_classCallCheck(this, FacilityAnalyst3DParameters);

    /**
     * @member {number} [SuperMap.FacilityAnalyst3DParameters.prototype.edgeID]
     * @description æå®çå¼§æ®µ IDï¼edgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã 
     */
    this.edgeID = null;
    /**
     * @member {number} [SuperMap.FacilityAnalyst3DParameters.prototype.nodeID]
     * @description æå®çç»ç¹ IDï¼edgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã 
     */

    this.nodeID = null;
    /**
     * @member {string} SuperMap.FacilityAnalyst3DParameters.prototype.weightName
     * @description æå®çæå¼å­æ®µä¿¡æ¯å¯¹è±¡çåç§°ã
     */

    this.weightName = null;
    /**
     * @member {boolean} [SuperMap.FacilityAnalyst3DParameters.prototype.isUncertainDirectionValid=false]
     * @description æå®ä¸ç¡®å®æµåæ¯å¦ææãæå®ä¸º trueï¼è¡¨ç¤ºä¸ç¡®å®æµåææï¼éå°ä¸ç¡®å®æµåæ¶åæç»§ç»­è¿è¡ï¼
     *              æå®ä¸º falseï¼è¡¨ç¤ºä¸ç¡®å®æµåæ æï¼éå°ä¸ç¡®å®æµåå°åæ­¢å¨è¯¥æ¹åä¸ç»§ç»­æ¥æ¾
     */

    this.isUncertainDirectionValid = false;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.FacilityAnalyst3DParameters";
  }
  /**
   * @function SuperMap.FacilityAnalyst3DParameters.prototype.destroy
   * @override
   */


  FacilityAnalyst3DParameters_createClass(FacilityAnalyst3DParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.edgeID = null;
      me.nodeID = null;
      me.weightName = null;
      me.isUncertainDirectionValid = null;
    }
  }]);

  return FacilityAnalyst3DParameters;
}();
SuperMap.FacilityAnalyst3DParameters = FacilityAnalyst3DParameters;
// CONCATENATED MODULE: ./src/common/iServer/FacilityAnalystSinks3DParameters.js
function FacilityAnalystSinks3DParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FacilityAnalystSinks3DParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { FacilityAnalystSinks3DParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FacilityAnalystSinks3DParameters_typeof(obj); }

function FacilityAnalystSinks3DParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FacilityAnalystSinks3DParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FacilityAnalystSinks3DParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) FacilityAnalystSinks3DParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) FacilityAnalystSinks3DParameters_defineProperties(Constructor, staticProps); return Constructor; }

function FacilityAnalystSinks3DParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { FacilityAnalystSinks3DParameters_get = Reflect.get; } else { FacilityAnalystSinks3DParameters_get = function _get(target, property, receiver) { var base = FacilityAnalystSinks3DParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return FacilityAnalystSinks3DParameters_get(target, property, receiver || target); }

function FacilityAnalystSinks3DParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = FacilityAnalystSinks3DParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function FacilityAnalystSinks3DParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FacilityAnalystSinks3DParameters_setPrototypeOf(subClass, superClass); }

function FacilityAnalystSinks3DParameters_setPrototypeOf(o, p) { FacilityAnalystSinks3DParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FacilityAnalystSinks3DParameters_setPrototypeOf(o, p); }

function FacilityAnalystSinks3DParameters_createSuper(Derived) { var hasNativeReflectConstruct = FacilityAnalystSinks3DParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FacilityAnalystSinks3DParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FacilityAnalystSinks3DParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FacilityAnalystSinks3DParameters_possibleConstructorReturn(this, result); }; }

function FacilityAnalystSinks3DParameters_possibleConstructorReturn(self, call) { if (call && (FacilityAnalystSinks3DParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return FacilityAnalystSinks3DParameters_assertThisInitialized(self); }

function FacilityAnalystSinks3DParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FacilityAnalystSinks3DParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FacilityAnalystSinks3DParameters_getPrototypeOf(o) { FacilityAnalystSinks3DParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FacilityAnalystSinks3DParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.FacilityAnalystSinks3DParameters
 * @category  iServer FacilityAnalyst3D Sinks
 * @classdesc æè¿è®¾æ½åæåæ°ç±»(æ±æ¥æ¾èµæº)ãæè¿è®¾æ½åææ¯æå¨ç½ç»ä¸ç»å®ä¸ä¸ªäºä»¶ç¹åä¸ç»è®¾æ½ç¹ï¼æ¥æ¾ä»äºä»¶ç¹å°è®¾æ½ç¹(æä»è®¾æ½ç¹å°äºä»¶ç¹)ä»¥æå°èè´¹è½å°è¾¾çæä½³è·¯å¾ã
 *            è®¾æ½ç¹ä¸è¬ä¸ºå­¦æ ¡ãè¶å¸ãå æ²¹ç«ç­æå¡è®¾æ½ï¼äºä»¶ç¹ä¸ºéè¦æå¡è®¾æ½çäºä»¶ä½ç½®ãä¾å¦äºä»¶åçç¹æ¯ä¸èµ·äº¤éäºæï¼è¦æ±æ¥æ¾å¨10åéåè½å°è¾¾çæè¿å»é¢ï¼è¶è¿10åé
 *            è½å°è¾¾çé½ä¸äºèèãæ­¤ä¾ä¸­ï¼äºæåçå°å³æ¯ä¸ä¸ªäºä»¶ç¹ï¼å¨è¾¹çå»é¢åæ¯è®¾æ½ç¹ãæè¿è®¾æ½æ¥æ¾å®éä¸ä¹æ¯ä¸ç§è·¯å¾åæï¼å æ­¤å¯¹è·¯å¾åæèµ·ä½ç¨çéç¢è¾¹ãéç¢ç¹ã
 *            è½¬åè¡¨ãèè´¹ç­å±æ§å¨æè¿è®¾æ½åææ¶åæ ·å¯è®¾ç½®ã
 * @extends {SuperMap.FacilityAnalyst3DParameters}
 * @param {Object} options - åæ°ã 
 * @param {string} options.weightName - æå®çæå¼å­æ®µä¿¡æ¯å¯¹è±¡çåç§°ã 
 * @param {number} [options.edgeID] - æå®çå¼§æ®µ IDï¼edgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã  
 * @param {number} [options.nodeID] - æå®çç»ç¹ IDï¼edgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã  
 * @param {boolean} [options.isUncertainDirectionValid=false] - æå®ä¸ç¡®å®æµåæ¯å¦ææãæå®ä¸º trueï¼è¡¨ç¤ºä¸ç¡®å®æµåææï¼éå°ä¸ç¡®å®æµåæ¶åæç»§ç»­è¿è¡ï¼
 * æå®ä¸º falseï¼è¡¨ç¤ºä¸ç¡®å®æµåæ æï¼éå°ä¸ç¡®å®æµåå°åæ­¢å¨è¯¥æ¹åä¸ç»§ç»­æ¥æ¾ã
 */

var FacilityAnalystSinks3DParameters = /*#__PURE__*/function (_FacilityAnalyst3DPar) {
  FacilityAnalystSinks3DParameters_inherits(FacilityAnalystSinks3DParameters, _FacilityAnalyst3DPar);

  var _super = FacilityAnalystSinks3DParameters_createSuper(FacilityAnalystSinks3DParameters);

  function FacilityAnalystSinks3DParameters(options) {
    var _this;

    FacilityAnalystSinks3DParameters_classCallCheck(this, FacilityAnalystSinks3DParameters);

    _this = _super.call(this, options);
    _this.CLASS_NAME = "SuperMap.FacilityAnalystSinks3DParameters";
    return _this;
  }
  /**
   * @function SuperMap.FacilityAnalystSinks3DParameters.prototype.destroy
   * @override
   */


  FacilityAnalystSinks3DParameters_createClass(FacilityAnalystSinks3DParameters, [{
    key: "destroy",
    value: function destroy() {
      FacilityAnalystSinks3DParameters_get(FacilityAnalystSinks3DParameters_getPrototypeOf(FacilityAnalystSinks3DParameters.prototype), "destroy", this).call(this);
    }
  }]);

  return FacilityAnalystSinks3DParameters;
}(FacilityAnalyst3DParameters);
SuperMap.FacilityAnalystSinks3DParameters = FacilityAnalystSinks3DParameters;
// CONCATENATED MODULE: ./src/common/iServer/FacilityAnalystSinks3DService.js
function FacilityAnalystSinks3DService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FacilityAnalystSinks3DService_typeof = function _typeof(obj) { return typeof obj; }; } else { FacilityAnalystSinks3DService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FacilityAnalystSinks3DService_typeof(obj); }

function FacilityAnalystSinks3DService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FacilityAnalystSinks3DService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FacilityAnalystSinks3DService_createClass(Constructor, protoProps, staticProps) { if (protoProps) FacilityAnalystSinks3DService_defineProperties(Constructor.prototype, protoProps); if (staticProps) FacilityAnalystSinks3DService_defineProperties(Constructor, staticProps); return Constructor; }

function FacilityAnalystSinks3DService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FacilityAnalystSinks3DService_setPrototypeOf(subClass, superClass); }

function FacilityAnalystSinks3DService_setPrototypeOf(o, p) { FacilityAnalystSinks3DService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FacilityAnalystSinks3DService_setPrototypeOf(o, p); }

function FacilityAnalystSinks3DService_createSuper(Derived) { var hasNativeReflectConstruct = FacilityAnalystSinks3DService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FacilityAnalystSinks3DService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FacilityAnalystSinks3DService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FacilityAnalystSinks3DService_possibleConstructorReturn(this, result); }; }

function FacilityAnalystSinks3DService_possibleConstructorReturn(self, call) { if (call && (FacilityAnalystSinks3DService_typeof(call) === "object" || typeof call === "function")) { return call; } return FacilityAnalystSinks3DService_assertThisInitialized(self); }

function FacilityAnalystSinks3DService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FacilityAnalystSinks3DService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FacilityAnalystSinks3DService_getPrototypeOf(o) { FacilityAnalystSinks3DService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FacilityAnalystSinks3DService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.FacilityAnalystSinks3DService
 * @category iServer FacilityAnalyst3D Sinks
 * @classdesc  æè¿è®¾æ½åææå¡ç±»(æ±æ¥æ¾èµæº)<br>
 *             æè¿è®¾æ½åææ¯æå¨ç½ç»ä¸ç»å®ä¸ä¸ªäºä»¶ç¹åä¸ç»è®¾æ½ç¹ï¼
 *             æ¥æ¾ä»äºä»¶ç¹å°è®¾æ½ç¹(æä»è®¾æ½ç¹å°äºä»¶ç¹)ä»¥æå°èè´¹è½å°è¾¾çæä½³è·¯å¾ã
 *             è¯¥ç±»è´è´£å°å®¢æ·ç«¯æå®çæè¿è®¾æ½åæåæ°ä¼ éç»æå¡ç«¯ï¼å¹¶æ¥æ¶æå¡ç«¯è¿åçç»ææ°æ®ã
 *             æè¿è®¾æ½åæç»æéè¿è¯¥ç±»æ¯æçäºä»¶ççå¬å½æ°åæ°è·å
 * @extends {SuperMap.CommonServiceBase}
 * @example
 * var myFacilityAnalystSinks3DService = new SuperMap.FacilityAnalystSinks3DService(url, {
 *     eventListeners: {
 *	       "processCompleted": facilityAnalystSinks3DCompleted,
 *		   "processFailed": facilityAnalystSinks3DError
 *		   }
 * });
 * @param {string} url - ç½ç»åææå¡å°åãè¯·æ±ç½ç»åææå¡ï¼URLåºä¸ºï¼<br>
 *                       http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{ç½ç»åææå¡å}/rest/networkanalyst/{ç½ç»æ°æ®é@æ°æ®æº}ï¼<br>
 *                       ä¾å¦:"http://localhost:8090/iserver/services/components-rest/rest/networkanalyst/RoadNet@Changchun"ã<br>
 * @param {Object} options - åæ°ã<br>
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var FacilityAnalystSinks3DService = /*#__PURE__*/function (_CommonServiceBase) {
  FacilityAnalystSinks3DService_inherits(FacilityAnalystSinks3DService, _CommonServiceBase);

  var _super = FacilityAnalystSinks3DService_createSuper(FacilityAnalystSinks3DService);

  function FacilityAnalystSinks3DService(url, options) {
    var _this;

    FacilityAnalystSinks3DService_classCallCheck(this, FacilityAnalystSinks3DService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.FacilityAnalystSinks3DService";
    return _this;
  }
  /**
   * @function SuperMap.FacilityAnalystSinks3DService.prototype.destroy
   * @override
   */


  FacilityAnalystSinks3DService_createClass(FacilityAnalystSinks3DService, [{
    key: "destroy",
    value: function destroy() {
      CommonServiceBase.prototype.destroy.apply(this, arguments);
    }
    /**
     * @function SuperMap.FacilityAnalystSinks3DService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.FacilityAnalystSinks3DParameters} params - æè¿è®¾æ½åæåæ°ç±»(æ±æ¥æ¾èµæº)
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof FacilityAnalystSinks3DParameters)) {
        return;
      }

      var me = this,
          jsonObject;
      me.url = Util.urlPathAppend(me.url, 'sinks');
      jsonObject = {
        edgeID: params.edgeID,
        nodeID: params.nodeID,
        weightName: params.weightName,
        isUncertainDirectionValid: params.isUncertainDirectionValid
      };
      me.request({
        method: "GET",
        params: jsonObject,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return FacilityAnalystSinks3DService;
}(CommonServiceBase);
SuperMap.FacilityAnalystSinks3DService = FacilityAnalystSinks3DService;
// CONCATENATED MODULE: ./src/common/iServer/FacilityAnalystSources3DParameters.js
function FacilityAnalystSources3DParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FacilityAnalystSources3DParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { FacilityAnalystSources3DParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FacilityAnalystSources3DParameters_typeof(obj); }

function FacilityAnalystSources3DParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FacilityAnalystSources3DParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FacilityAnalystSources3DParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) FacilityAnalystSources3DParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) FacilityAnalystSources3DParameters_defineProperties(Constructor, staticProps); return Constructor; }

function FacilityAnalystSources3DParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { FacilityAnalystSources3DParameters_get = Reflect.get; } else { FacilityAnalystSources3DParameters_get = function _get(target, property, receiver) { var base = FacilityAnalystSources3DParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return FacilityAnalystSources3DParameters_get(target, property, receiver || target); }

function FacilityAnalystSources3DParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = FacilityAnalystSources3DParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function FacilityAnalystSources3DParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FacilityAnalystSources3DParameters_setPrototypeOf(subClass, superClass); }

function FacilityAnalystSources3DParameters_setPrototypeOf(o, p) { FacilityAnalystSources3DParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FacilityAnalystSources3DParameters_setPrototypeOf(o, p); }

function FacilityAnalystSources3DParameters_createSuper(Derived) { var hasNativeReflectConstruct = FacilityAnalystSources3DParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FacilityAnalystSources3DParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FacilityAnalystSources3DParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FacilityAnalystSources3DParameters_possibleConstructorReturn(this, result); }; }

function FacilityAnalystSources3DParameters_possibleConstructorReturn(self, call) { if (call && (FacilityAnalystSources3DParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return FacilityAnalystSources3DParameters_assertThisInitialized(self); }

function FacilityAnalystSources3DParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FacilityAnalystSources3DParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FacilityAnalystSources3DParameters_getPrototypeOf(o) { FacilityAnalystSources3DParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FacilityAnalystSources3DParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.FacilityAnalystSources3DParameters
 * @category  iServer FacilityAnalyst3D Sources 
 * @classdesc æè¿è®¾æ½åæåæ°ç±»(æºæ¥æ¾èµæº)ãæè¿è®¾æ½åææ¯æå¨ç½ç»ä¸ç»å®ä¸ä¸ªäºä»¶ç¹åä¸ç»è®¾æ½ç¹ï¼æ¥æ¾ä»äºä»¶ç¹å°è®¾æ½ç¹(æä»è®¾æ½ç¹å°äºä»¶ç¹)ä»¥æå°èè´¹è½å°è¾¾çæä½³è·¯å¾ã
 *            è®¾æ½ç¹ä¸è¬ä¸ºå­¦æ ¡ãè¶å¸ãå æ²¹ç«ç­æå¡è®¾æ½ï¼äºä»¶ç¹ä¸ºéè¦æå¡è®¾æ½çäºä»¶ä½ç½®ãä¾å¦äºä»¶åçç¹æ¯ä¸èµ·äº¤éäºæï¼è¦æ±æ¥æ¾å¨10åéåè½å°è¾¾çæè¿å»é¢ï¼è¶è¿10å
 *            éè½å°è¾¾çé½ä¸äºèèãæ­¤ä¾ä¸­ï¼äºæåçå°å³æ¯ä¸ä¸ªäºä»¶ç¹ï¼å¨è¾¹çå»é¢åæ¯è®¾æ½ç¹ãæè¿è®¾æ½æ¥æ¾å®éä¸ä¹æ¯ä¸ç§è·¯å¾åæï¼å æ­¤å¯¹è·¯å¾åæèµ·ä½ç¨çéç¢è¾¹ãéç¢
 *            ç¹ãè½¬åè¡¨ãèè´¹ç­å±æ§å¨æè¿è®¾æ½åææ¶åæ ·å¯è®¾ç½®ã
 * @extends {SuperMap.FacilityAnalyst3DParameters}
 * @param {Object} options - åæ°ã 
 * @param {string} options.weightName - æå®çæå¼å­æ®µä¿¡æ¯å¯¹è±¡çåç§°ã 
 * @param {number} [options.edgeID] - æå®çå¼§æ®µ IDï¼edgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã 
 * @param {number} [options.nodeID] - æå®çç»ç¹ IDï¼edgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã  
 * @param {boolean} [options.isUncertainDirectionValid=false] - æå®ä¸ç¡®å®æµåæ¯å¦ææãæå®ä¸º trueï¼è¡¨ç¤ºä¸ç¡®å®æµåææï¼éå°ä¸ç¡®å®æµåæ¶åæç»§ç»­è¿è¡ï¼
 * æå®ä¸º falseï¼è¡¨ç¤ºä¸ç¡®å®æµåæ æï¼éå°ä¸ç¡®å®æµåå°åæ­¢å¨è¯¥æ¹åä¸ç»§ç»­æ¥æ¾ã
 */

var FacilityAnalystSources3DParameters = /*#__PURE__*/function (_FacilityAnalyst3DPar) {
  FacilityAnalystSources3DParameters_inherits(FacilityAnalystSources3DParameters, _FacilityAnalyst3DPar);

  var _super = FacilityAnalystSources3DParameters_createSuper(FacilityAnalystSources3DParameters);

  function FacilityAnalystSources3DParameters(options) {
    var _this;

    FacilityAnalystSources3DParameters_classCallCheck(this, FacilityAnalystSources3DParameters);

    _this = _super.call(this, options);
    _this.CLASS_NAME = "SuperMap.FacilityAnalystSources3DParameters";
    return _this;
  }
  /**
   * @function SuperMap.FacilityAnalystSources3DParameters.prototype.destroy
   * @override
   */


  FacilityAnalystSources3DParameters_createClass(FacilityAnalystSources3DParameters, [{
    key: "destroy",
    value: function destroy() {
      FacilityAnalystSources3DParameters_get(FacilityAnalystSources3DParameters_getPrototypeOf(FacilityAnalystSources3DParameters.prototype), "destroy", this).call(this);
    }
  }]);

  return FacilityAnalystSources3DParameters;
}(FacilityAnalyst3DParameters);
SuperMap.FacilityAnalystSources3DParameters = FacilityAnalystSources3DParameters;
// CONCATENATED MODULE: ./src/common/iServer/FacilityAnalystSources3DService.js
function FacilityAnalystSources3DService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FacilityAnalystSources3DService_typeof = function _typeof(obj) { return typeof obj; }; } else { FacilityAnalystSources3DService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FacilityAnalystSources3DService_typeof(obj); }

function FacilityAnalystSources3DService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FacilityAnalystSources3DService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FacilityAnalystSources3DService_createClass(Constructor, protoProps, staticProps) { if (protoProps) FacilityAnalystSources3DService_defineProperties(Constructor.prototype, protoProps); if (staticProps) FacilityAnalystSources3DService_defineProperties(Constructor, staticProps); return Constructor; }

function FacilityAnalystSources3DService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { FacilityAnalystSources3DService_get = Reflect.get; } else { FacilityAnalystSources3DService_get = function _get(target, property, receiver) { var base = FacilityAnalystSources3DService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return FacilityAnalystSources3DService_get(target, property, receiver || target); }

function FacilityAnalystSources3DService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = FacilityAnalystSources3DService_getPrototypeOf(object); if (object === null) break; } return object; }

function FacilityAnalystSources3DService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FacilityAnalystSources3DService_setPrototypeOf(subClass, superClass); }

function FacilityAnalystSources3DService_setPrototypeOf(o, p) { FacilityAnalystSources3DService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FacilityAnalystSources3DService_setPrototypeOf(o, p); }

function FacilityAnalystSources3DService_createSuper(Derived) { var hasNativeReflectConstruct = FacilityAnalystSources3DService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FacilityAnalystSources3DService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FacilityAnalystSources3DService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FacilityAnalystSources3DService_possibleConstructorReturn(this, result); }; }

function FacilityAnalystSources3DService_possibleConstructorReturn(self, call) { if (call && (FacilityAnalystSources3DService_typeof(call) === "object" || typeof call === "function")) { return call; } return FacilityAnalystSources3DService_assertThisInitialized(self); }

function FacilityAnalystSources3DService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FacilityAnalystSources3DService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FacilityAnalystSources3DService_getPrototypeOf(o) { FacilityAnalystSources3DService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FacilityAnalystSources3DService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.FacilityAnalystSources3DService
 * @category  iServer FacilityAnalyst3D Sources
 * @classdesc æè¿è®¾æ½åææå¡ç±»(æºæ¥æ¾èµæº)
 *            æè¿è®¾æ½åææ¯æå¨ç½ç»ä¸ç»å®ä¸ä¸ªäºä»¶ç¹åä¸ç»è®¾æ½ç¹ï¼
 *            æ¥æ¾ä»äºä»¶ç¹å°è®¾æ½ç¹(æä»è®¾æ½ç¹å°äºä»¶ç¹)ä»¥æå°èè´¹è½å°è¾¾çæä½³è·¯å¾ã
 *            è¯¥ç±»è´è´£å°å®¢æ·ç«¯æå®çæè¿è®¾æ½åæåæ°ä¼ éç»æå¡ç«¯ï¼å¹¶æ¥æ¶æå¡ç«¯è¿åçç»ææ°æ®ã
 *            æè¿è®¾æ½åæç»æéè¿è¯¥ç±»æ¯æçäºä»¶ççå¬å½æ°åæ°è·åã
 * @extends {SuperMap.CommonServiceBase}
 * @param {string} url - ç½ç»åææå¡å°åãè¯·æ±ç½ç»åææå¡ï¼URLåºä¸ºï¼
 *                       http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{ç½ç»åææå¡å}/rest/networkanalyst/{ç½ç»æ°æ®é@æ°æ®æº}ï¼
 *                       ä¾å¦:"http://localhost:8090/iserver/services/components-rest/rest/networkanalyst/RoadNet@Changchun"ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var FacilityAnalystSources3DService = /*#__PURE__*/function (_CommonServiceBase) {
  FacilityAnalystSources3DService_inherits(FacilityAnalystSources3DService, _CommonServiceBase);

  var _super = FacilityAnalystSources3DService_createSuper(FacilityAnalystSources3DService);

  function FacilityAnalystSources3DService(url, options) {
    var _this;

    FacilityAnalystSources3DService_classCallCheck(this, FacilityAnalystSources3DService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.FacilityAnalystSources3DService";
    return _this;
  }
  /**
   * @function SuperMap.FacilityAnalystSources3DService.prototype.destroy
   * @override
   */


  FacilityAnalystSources3DService_createClass(FacilityAnalystSources3DService, [{
    key: "destroy",
    value: function destroy() {
      FacilityAnalystSources3DService_get(FacilityAnalystSources3DService_getPrototypeOf(FacilityAnalystSources3DService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.FacilityAnalystSources3DService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.FacilityAnalystSources3DParameters} params - æè¿è®¾æ½åæåæ°ç±»ï¼æºæ¥æ¾èµæºï¼
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof FacilityAnalystSources3DParameters)) {
        return;
      }

      var me = this,
          jsonObject;
      me.url = Util.urlPathAppend(me.url, 'sources');
      jsonObject = {
        edgeID: params.edgeID,
        nodeID: params.nodeID,
        weightName: params.weightName,
        isUncertainDirectionValid: params.isUncertainDirectionValid
      };
      me.request({
        method: "GET",
        params: jsonObject,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return FacilityAnalystSources3DService;
}(CommonServiceBase);
SuperMap.FacilityAnalystSources3DService = FacilityAnalystSources3DService;
// CONCATENATED MODULE: ./src/common/iServer/FacilityAnalystStreamParameters.js
function FacilityAnalystStreamParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FacilityAnalystStreamParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FacilityAnalystStreamParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) FacilityAnalystStreamParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) FacilityAnalystStreamParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.FacilityAnalystStreamParameters
 * @category iServer NetworkAnalyst UpstreamCriticalFacilities
 * @classdesc ä¸æ¸¸/ä¸æ¸¸å³é®è®¾æ½æ¥æ¾èµæºåæ°ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {Array.<number>} options.sourceNodeIDs - æå®çè®¾æ½ç¹ ID æ°ç»ã 
 * @param {number} options.queryType - åæç±»åï¼åªè½æ¯ 0 (ä¸æ¸¸å³é®è®¾æ½æ¥è¯¢) æèæ¯ 1ï¼ä¸æ¸¸å³é®è®¾æ½æ¥è¯¢ï¼ã
 * @param {number} [options.edgeID] - æå®çå¼§æ®µ IDï¼edgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã  
 * @param {number} [options.nodeID] - æå®çç»ç¹ IDï¼edgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã  
 * @param {boolean} [options.isUncertainDirectionValid=false] - æå®ä¸ç¡®å®æµåæ¯å¦ææã
 */

var FacilityAnalystStreamParameters = /*#__PURE__*/function () {
  function FacilityAnalystStreamParameters(options) {
    FacilityAnalystStreamParameters_classCallCheck(this, FacilityAnalystStreamParameters);

    /**
     * @member {Array.<number>} [SuperMap.FacilityAnalystStreamParameters.prototype.sourceNodeIDs]
     * @description æå®çè®¾æ½ç¹ ID æ°ç»ã
     */
    this.sourceNodeIDs = null;
    /**
     * @member {number} [SuperMap.FacilityAnalystStreamParameters.prototype.edgeID]
     * @description æå®çå¼§æ®µ IDï¼edgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã 
     */

    this.edgeID = null;
    /**
     * @member {number} [SuperMap.FacilityAnalystStreamParameters.prototype.nodeID]
     * @description æå®çç»ç¹ IDï¼edgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã 
     */

    this.nodeID = null;
    /**
     * @member {boolean} [SuperMap.FacilityAnalystStreamParameters.prototype.isUncertainDirectionValid=false]
     * @description æå®ä¸ç¡®å®æµåæ¯å¦ææãæå®ä¸º trueï¼è¡¨ç¤ºä¸ç¡®å®æµåææï¼éå°ä¸ç¡®å®æµåæ¶åæç»§ç»­è¿è¡ï¼
     *              æå®ä¸º falseï¼è¡¨ç¤ºä¸ç¡®å®æµåæ æï¼éå°ä¸ç¡®å®æµåå°åæ­¢å¨è¯¥æ¹åä¸ç»§ç»­æ¥æ¾ã
     */

    this.isUncertainDirectionValid = false;
    /**
     * @member {number} SuperMap.FacilityAnalystStreamParameters.prototype.queryType
     * @description åæç±»åï¼åªè½æ¯ 0 (ä¸æ¸¸å³é®è®¾æ½æ¥è¯¢) æèæ¯ 1ï¼ä¸æ¸¸å³é®è®¾æ½æ¥è¯¢ï¼ã
     */

    this.queryType = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.FacilityAnalystStreamParameters";
  }
  /**
   * @function SuperMap.FacilityAnalystStreamParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  FacilityAnalystStreamParameters_createClass(FacilityAnalystStreamParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.edgeID = null;
      me.nodeID = null;
      me.weightName = null;
      me.isUncertainDirectionValid = null;
      me.type = null;
    }
  }]);

  return FacilityAnalystStreamParameters;
}();
SuperMap.FacilityAnalystStreamParameters = FacilityAnalystStreamParameters;
// CONCATENATED MODULE: ./src/common/iServer/FacilityAnalystStreamService.js
function FacilityAnalystStreamService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FacilityAnalystStreamService_typeof = function _typeof(obj) { return typeof obj; }; } else { FacilityAnalystStreamService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FacilityAnalystStreamService_typeof(obj); }

function FacilityAnalystStreamService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FacilityAnalystStreamService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FacilityAnalystStreamService_createClass(Constructor, protoProps, staticProps) { if (protoProps) FacilityAnalystStreamService_defineProperties(Constructor.prototype, protoProps); if (staticProps) FacilityAnalystStreamService_defineProperties(Constructor, staticProps); return Constructor; }

function FacilityAnalystStreamService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { FacilityAnalystStreamService_get = Reflect.get; } else { FacilityAnalystStreamService_get = function _get(target, property, receiver) { var base = FacilityAnalystStreamService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return FacilityAnalystStreamService_get(target, property, receiver || target); }

function FacilityAnalystStreamService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = FacilityAnalystStreamService_getPrototypeOf(object); if (object === null) break; } return object; }

function FacilityAnalystStreamService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FacilityAnalystStreamService_setPrototypeOf(subClass, superClass); }

function FacilityAnalystStreamService_setPrototypeOf(o, p) { FacilityAnalystStreamService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FacilityAnalystStreamService_setPrototypeOf(o, p); }

function FacilityAnalystStreamService_createSuper(Derived) { var hasNativeReflectConstruct = FacilityAnalystStreamService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FacilityAnalystStreamService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FacilityAnalystStreamService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FacilityAnalystStreamService_possibleConstructorReturn(this, result); }; }

function FacilityAnalystStreamService_possibleConstructorReturn(self, call) { if (call && (FacilityAnalystStreamService_typeof(call) === "object" || typeof call === "function")) { return call; } return FacilityAnalystStreamService_assertThisInitialized(self); }

function FacilityAnalystStreamService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FacilityAnalystStreamService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FacilityAnalystStreamService_getPrototypeOf(o) { FacilityAnalystStreamService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FacilityAnalystStreamService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.FacilityAnalystStreamService
 * @category iServer NetworkAnalyst UpstreamCriticalFacilities
 * @classdesc ä¸æ¸¸/ä¸æ¸¸ å³é®è®¾æ½æ¥æ¾èµæºæå¡ç±»ï¼å³æ¥æ¾ç»å®å¼§æ®µæèç¹çä¸æ¸¸/ä¸æ¸¸ä¸­çå³é®è®¾æ½ç»ç¹ï¼è¿åå³é®ç»ç¹ ID æ°ç»åå¶ä¸æ¸¸å¼§æ®µ ID æ°ç»ã
 * @extends SuperMap.NetworkAnalystServiceBase
 * @param {string} url - ç½ç»åææå¡å°åãè¯·æ±ç½ç»åææå¡ï¼URLåºä¸ºï¼
 *                       http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{ç½ç»åææå¡å}/rest/networkanalyst/{ç½ç»æ°æ®é@æ°æ®æº}ï¼
 *                       ä¾å¦: "http://localhost:8090/iserver/services/test/rest/networkanalyst/WaterNet@FacilityNet";
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var FacilityAnalystStreamService = /*#__PURE__*/function (_NetworkAnalystServic) {
  FacilityAnalystStreamService_inherits(FacilityAnalystStreamService, _NetworkAnalystServic);

  var _super = FacilityAnalystStreamService_createSuper(FacilityAnalystStreamService);

  function FacilityAnalystStreamService(url, options) {
    var _this;

    FacilityAnalystStreamService_classCallCheck(this, FacilityAnalystStreamService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.FacilityAnalystStreamService";
    return _this;
  }
  /**
   * @function SuperMap.FacilityAnalystStreamService.prototype.destroy
   * @override
   */


  FacilityAnalystStreamService_createClass(FacilityAnalystStreamService, [{
    key: "destroy",
    value: function destroy() {
      FacilityAnalystStreamService_get(FacilityAnalystStreamService_getPrototypeOf(FacilityAnalystStreamService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.FacilityAnalystStreamService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.FacilityAnalystStreamParameters} params - ä¸æ¸¸/ä¸æ¸¸å³é®è®¾æ½æ¥æ¾èµæºåæ°ç±»ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof FacilityAnalystStreamParameters)) {
        return;
      }

      var me = this,
          jsonObject; //URL éè¿åæ°ç±»åæ¥å¤æ­æ¯ ä¸æ¸¸ è¿æ¯ä¸æ¸¸ æ¥è¯¢

      if (params.queryType === 0) {
        me.url = Util.urlPathAppend(me.url, 'upstreamcirticalfaclilities');
      } else if (params.queryType === 1) {
        me.url = Util.urlPathAppend(me.url, 'downstreamcirticalfaclilities');
      } else {
        return;
      }

      jsonObject = {
        sourceNodeIDs: params.sourceNodeIDs,
        isUncertainDirectionValid: params.isUncertainDirectionValid
      };

      if (params.edgeID !== null && params.nodeID !== null) {
        return;
      }

      if (params.edgeID === null && params.nodeID === null) {
        return;
      }

      if (params.edgeID !== null) {
        jsonObject.edgeID = params.edgeID;
      } else {
        jsonObject.nodeID = params.nodeID;
      }

      me.request({
        method: "GET",
        params: jsonObject,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return FacilityAnalystStreamService;
}(NetworkAnalystServiceBase);
SuperMap.FacilityAnalystStreamService = FacilityAnalystStreamService;
// CONCATENATED MODULE: ./src/common/iServer/FacilityAnalystTracedown3DParameters.js
function FacilityAnalystTracedown3DParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FacilityAnalystTracedown3DParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { FacilityAnalystTracedown3DParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FacilityAnalystTracedown3DParameters_typeof(obj); }

function FacilityAnalystTracedown3DParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FacilityAnalystTracedown3DParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FacilityAnalystTracedown3DParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) FacilityAnalystTracedown3DParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) FacilityAnalystTracedown3DParameters_defineProperties(Constructor, staticProps); return Constructor; }

function FacilityAnalystTracedown3DParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { FacilityAnalystTracedown3DParameters_get = Reflect.get; } else { FacilityAnalystTracedown3DParameters_get = function _get(target, property, receiver) { var base = FacilityAnalystTracedown3DParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return FacilityAnalystTracedown3DParameters_get(target, property, receiver || target); }

function FacilityAnalystTracedown3DParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = FacilityAnalystTracedown3DParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function FacilityAnalystTracedown3DParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FacilityAnalystTracedown3DParameters_setPrototypeOf(subClass, superClass); }

function FacilityAnalystTracedown3DParameters_setPrototypeOf(o, p) { FacilityAnalystTracedown3DParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FacilityAnalystTracedown3DParameters_setPrototypeOf(o, p); }

function FacilityAnalystTracedown3DParameters_createSuper(Derived) { var hasNativeReflectConstruct = FacilityAnalystTracedown3DParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FacilityAnalystTracedown3DParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FacilityAnalystTracedown3DParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FacilityAnalystTracedown3DParameters_possibleConstructorReturn(this, result); }; }

function FacilityAnalystTracedown3DParameters_possibleConstructorReturn(self, call) { if (call && (FacilityAnalystTracedown3DParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return FacilityAnalystTracedown3DParameters_assertThisInitialized(self); }

function FacilityAnalystTracedown3DParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FacilityAnalystTracedown3DParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FacilityAnalystTracedown3DParameters_getPrototypeOf(o) { FacilityAnalystTracedown3DParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FacilityAnalystTracedown3DParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.FacilityAnalystTracedown3DParameters
 * @category iServer FacilityAnalyst3D TraceDownResult
 * @classdesc ä¸æ¸¸è¿½è¸ªèµæºåæ°ç±»ã
 * @extends {SuperMap.FacilityAnalyst3DParameters}
 * @param {Object} options - åæ°ã 
 * @param {string} options.weightName - æå®çæå¼å­æ®µä¿¡æ¯å¯¹è±¡çåç§°ã 
 * @param {number} [options.edgeID] - æå®çå¼§æ®µ IDï¼edgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã  
 * @param {number} [options.nodeID] - æå®çç»ç¹ IDï¼edgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã  
 * @param {boolean} [options.isUncertainDirectionValid=false] - æå®ä¸ç¡®å®æµåæ¯å¦ææãæå®ä¸º trueï¼è¡¨ç¤ºä¸ç¡®å®æµåææï¼éå°ä¸ç¡®å®æµåæ¶åæç»§ç»­è¿è¡ï¼
 * æå®ä¸º falseï¼è¡¨ç¤ºä¸ç¡®å®æµåæ æï¼éå°ä¸ç¡®å®æµåå°åæ­¢å¨è¯¥æ¹åä¸ç»§ç»­æ¥æ¾ã

 */

var FacilityAnalystTracedown3DParameters = /*#__PURE__*/function (_FacilityAnalyst3DPar) {
  FacilityAnalystTracedown3DParameters_inherits(FacilityAnalystTracedown3DParameters, _FacilityAnalyst3DPar);

  var _super = FacilityAnalystTracedown3DParameters_createSuper(FacilityAnalystTracedown3DParameters);

  function FacilityAnalystTracedown3DParameters(options) {
    var _this;

    FacilityAnalystTracedown3DParameters_classCallCheck(this, FacilityAnalystTracedown3DParameters);

    _this = _super.call(this, options);
    _this.CLASS_NAME = "SuperMap.FacilityAnalystTracedown3DParameters";
    return _this;
  }
  /**
   * @function SuperMap.FacilityAnalystTracedown3DParameters.prototype.destroy
   * @override
   */


  FacilityAnalystTracedown3DParameters_createClass(FacilityAnalystTracedown3DParameters, [{
    key: "destroy",
    value: function destroy() {
      FacilityAnalystTracedown3DParameters_get(FacilityAnalystTracedown3DParameters_getPrototypeOf(FacilityAnalystTracedown3DParameters.prototype), "destroy", this).call(this);
    }
  }]);

  return FacilityAnalystTracedown3DParameters;
}(FacilityAnalyst3DParameters);
SuperMap.FacilityAnalystTracedown3DParameters = FacilityAnalystTracedown3DParameters;
// CONCATENATED MODULE: ./src/common/iServer/FacilityAnalystTracedown3DService.js
function FacilityAnalystTracedown3DService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FacilityAnalystTracedown3DService_typeof = function _typeof(obj) { return typeof obj; }; } else { FacilityAnalystTracedown3DService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FacilityAnalystTracedown3DService_typeof(obj); }

function FacilityAnalystTracedown3DService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FacilityAnalystTracedown3DService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FacilityAnalystTracedown3DService_createClass(Constructor, protoProps, staticProps) { if (protoProps) FacilityAnalystTracedown3DService_defineProperties(Constructor.prototype, protoProps); if (staticProps) FacilityAnalystTracedown3DService_defineProperties(Constructor, staticProps); return Constructor; }

function FacilityAnalystTracedown3DService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { FacilityAnalystTracedown3DService_get = Reflect.get; } else { FacilityAnalystTracedown3DService_get = function _get(target, property, receiver) { var base = FacilityAnalystTracedown3DService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return FacilityAnalystTracedown3DService_get(target, property, receiver || target); }

function FacilityAnalystTracedown3DService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = FacilityAnalystTracedown3DService_getPrototypeOf(object); if (object === null) break; } return object; }

function FacilityAnalystTracedown3DService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FacilityAnalystTracedown3DService_setPrototypeOf(subClass, superClass); }

function FacilityAnalystTracedown3DService_setPrototypeOf(o, p) { FacilityAnalystTracedown3DService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FacilityAnalystTracedown3DService_setPrototypeOf(o, p); }

function FacilityAnalystTracedown3DService_createSuper(Derived) { var hasNativeReflectConstruct = FacilityAnalystTracedown3DService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FacilityAnalystTracedown3DService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FacilityAnalystTracedown3DService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FacilityAnalystTracedown3DService_possibleConstructorReturn(this, result); }; }

function FacilityAnalystTracedown3DService_possibleConstructorReturn(self, call) { if (call && (FacilityAnalystTracedown3DService_typeof(call) === "object" || typeof call === "function")) { return call; } return FacilityAnalystTracedown3DService_assertThisInitialized(self); }

function FacilityAnalystTracedown3DService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FacilityAnalystTracedown3DService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FacilityAnalystTracedown3DService_getPrototypeOf(o) { FacilityAnalystTracedown3DService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FacilityAnalystTracedown3DService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.FacilityAnalystTracedown3DService
 * @category iServer FacilityAnalyst3D TraceDownResult
 * @classdesc ä¸æ¸¸è¿½è¸ªèµæºæå¡ç±»
 * @extends {SuperMap.CommonServiceBase}
 * @param {string} url - ç½ç»åææå¡å°åãè¯·æ±ç½ç»åææå¡ï¼URLåºä¸ºï¼
 *                       http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{ç½ç»åææå¡å}/rest/networkanalyst/{ç½ç»æ°æ®é@æ°æ®æº}ï¼
 *                       ä¾å¦:"http://localhost:8090/iserver/services/components-rest/rest/networkanalyst/RoadNet@Changchun"ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var FacilityAnalystTracedown3DService = /*#__PURE__*/function (_CommonServiceBase) {
  FacilityAnalystTracedown3DService_inherits(FacilityAnalystTracedown3DService, _CommonServiceBase);

  var _super = FacilityAnalystTracedown3DService_createSuper(FacilityAnalystTracedown3DService);

  function FacilityAnalystTracedown3DService(url, options) {
    var _this;

    FacilityAnalystTracedown3DService_classCallCheck(this, FacilityAnalystTracedown3DService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.FacilityAnalystTracedown3DService";
    return _this;
  }
  /**
   * @function SuperMap.FacilityAnalystTracedown3DService.prototype.destroy
   * @override
   */


  FacilityAnalystTracedown3DService_createClass(FacilityAnalystTracedown3DService, [{
    key: "destroy",
    value: function destroy() {
      FacilityAnalystTracedown3DService_get(FacilityAnalystTracedown3DService_getPrototypeOf(FacilityAnalystTracedown3DService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.FacilityAnalystTracedown3DService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.FacilityAnalystTracedown3DParameters} params - ä¸æ¸¸è¿½è¸ªèµæºåæ°ç±»ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof FacilityAnalystTracedown3DParameters)) {
        return;
      }

      var me = this,
          jsonObject;
      me.url = Util.urlPathAppend(me.url, 'tracedownresult');
      jsonObject = {
        edgeID: params.edgeID,
        nodeID: params.nodeID,
        weightName: params.weightName,
        isUncertainDirectionValid: params.isUncertainDirectionValid
      };
      me.request({
        method: "GET",
        params: jsonObject,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return FacilityAnalystTracedown3DService;
}(CommonServiceBase);
SuperMap.FacilityAnalystTracedown3DService = FacilityAnalystTracedown3DService;
// CONCATENATED MODULE: ./src/common/iServer/FacilityAnalystTraceup3DParameters.js
function FacilityAnalystTraceup3DParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FacilityAnalystTraceup3DParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { FacilityAnalystTraceup3DParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FacilityAnalystTraceup3DParameters_typeof(obj); }

function FacilityAnalystTraceup3DParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FacilityAnalystTraceup3DParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FacilityAnalystTraceup3DParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) FacilityAnalystTraceup3DParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) FacilityAnalystTraceup3DParameters_defineProperties(Constructor, staticProps); return Constructor; }

function FacilityAnalystTraceup3DParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { FacilityAnalystTraceup3DParameters_get = Reflect.get; } else { FacilityAnalystTraceup3DParameters_get = function _get(target, property, receiver) { var base = FacilityAnalystTraceup3DParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return FacilityAnalystTraceup3DParameters_get(target, property, receiver || target); }

function FacilityAnalystTraceup3DParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = FacilityAnalystTraceup3DParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function FacilityAnalystTraceup3DParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FacilityAnalystTraceup3DParameters_setPrototypeOf(subClass, superClass); }

function FacilityAnalystTraceup3DParameters_setPrototypeOf(o, p) { FacilityAnalystTraceup3DParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FacilityAnalystTraceup3DParameters_setPrototypeOf(o, p); }

function FacilityAnalystTraceup3DParameters_createSuper(Derived) { var hasNativeReflectConstruct = FacilityAnalystTraceup3DParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FacilityAnalystTraceup3DParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FacilityAnalystTraceup3DParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FacilityAnalystTraceup3DParameters_possibleConstructorReturn(this, result); }; }

function FacilityAnalystTraceup3DParameters_possibleConstructorReturn(self, call) { if (call && (FacilityAnalystTraceup3DParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return FacilityAnalystTraceup3DParameters_assertThisInitialized(self); }

function FacilityAnalystTraceup3DParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FacilityAnalystTraceup3DParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FacilityAnalystTraceup3DParameters_getPrototypeOf(o) { FacilityAnalystTraceup3DParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FacilityAnalystTraceup3DParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.FacilityAnalystTraceup3DParameters
 * @category iServer FacilityAnalyst3D TraceUpResult
 * @classdesc ä¸æ¸¸è¿½è¸ªèµæºåæ°ç±»ã
 * @extends {SuperMap.FacilityAnalyst3DParameters}
 * @param {Object} options - åæ°ã 
 * @param {string} options.weightName - æå®çæå¼å­æ®µä¿¡æ¯å¯¹è±¡çåç§°ã 
 * @param {number} [options.edgeID] - æå®çå¼§æ®µIDï¼edgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã 
 * @param {number} [options.nodeID] - æå®çç»ç¹IDï¼edgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã 
 * @param {boolean} [options.isUncertainDirectionValid=false] - æå®ä¸ç¡®å®æµåæ¯å¦ææãæå®ä¸º trueï¼è¡¨ç¤ºä¸ç¡®å®æµåææï¼éå°ä¸ç¡®å®æµåæ¶åæç»§ç»­è¿è¡ï¼
 * æå®ä¸º falseï¼è¡¨ç¤ºä¸ç¡®å®æµåæ æï¼éå°ä¸ç¡®å®æµåå°åæ­¢å¨è¯¥æ¹åä¸ç»§ç»­æ¥æ¾ã
 */

var FacilityAnalystTraceup3DParameters = /*#__PURE__*/function (_FacilityAnalyst3DPar) {
  FacilityAnalystTraceup3DParameters_inherits(FacilityAnalystTraceup3DParameters, _FacilityAnalyst3DPar);

  var _super = FacilityAnalystTraceup3DParameters_createSuper(FacilityAnalystTraceup3DParameters);

  function FacilityAnalystTraceup3DParameters(options) {
    var _this;

    FacilityAnalystTraceup3DParameters_classCallCheck(this, FacilityAnalystTraceup3DParameters);

    _this = _super.call(this, options);
    _this.CLASS_NAME = "SuperMap.FacilityAnalystTraceup3DParameters";
    return _this;
  }
  /**
   * @function SuperMap.FacilityAnalystTraceup3DParameters.prototype.destroy
   * @override
   */


  FacilityAnalystTraceup3DParameters_createClass(FacilityAnalystTraceup3DParameters, [{
    key: "destroy",
    value: function destroy() {
      FacilityAnalystTraceup3DParameters_get(FacilityAnalystTraceup3DParameters_getPrototypeOf(FacilityAnalystTraceup3DParameters.prototype), "destroy", this).call(this);
    }
  }]);

  return FacilityAnalystTraceup3DParameters;
}(FacilityAnalyst3DParameters);
SuperMap.FacilityAnalystTraceup3DParameters = FacilityAnalystTraceup3DParameters;
// CONCATENATED MODULE: ./src/common/iServer/FacilityAnalystTraceup3DService.js
function FacilityAnalystTraceup3DService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FacilityAnalystTraceup3DService_typeof = function _typeof(obj) { return typeof obj; }; } else { FacilityAnalystTraceup3DService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FacilityAnalystTraceup3DService_typeof(obj); }

function FacilityAnalystTraceup3DService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FacilityAnalystTraceup3DService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FacilityAnalystTraceup3DService_createClass(Constructor, protoProps, staticProps) { if (protoProps) FacilityAnalystTraceup3DService_defineProperties(Constructor.prototype, protoProps); if (staticProps) FacilityAnalystTraceup3DService_defineProperties(Constructor, staticProps); return Constructor; }

function FacilityAnalystTraceup3DService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { FacilityAnalystTraceup3DService_get = Reflect.get; } else { FacilityAnalystTraceup3DService_get = function _get(target, property, receiver) { var base = FacilityAnalystTraceup3DService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return FacilityAnalystTraceup3DService_get(target, property, receiver || target); }

function FacilityAnalystTraceup3DService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = FacilityAnalystTraceup3DService_getPrototypeOf(object); if (object === null) break; } return object; }

function FacilityAnalystTraceup3DService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FacilityAnalystTraceup3DService_setPrototypeOf(subClass, superClass); }

function FacilityAnalystTraceup3DService_setPrototypeOf(o, p) { FacilityAnalystTraceup3DService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FacilityAnalystTraceup3DService_setPrototypeOf(o, p); }

function FacilityAnalystTraceup3DService_createSuper(Derived) { var hasNativeReflectConstruct = FacilityAnalystTraceup3DService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FacilityAnalystTraceup3DService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FacilityAnalystTraceup3DService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FacilityAnalystTraceup3DService_possibleConstructorReturn(this, result); }; }

function FacilityAnalystTraceup3DService_possibleConstructorReturn(self, call) { if (call && (FacilityAnalystTraceup3DService_typeof(call) === "object" || typeof call === "function")) { return call; } return FacilityAnalystTraceup3DService_assertThisInitialized(self); }

function FacilityAnalystTraceup3DService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FacilityAnalystTraceup3DService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FacilityAnalystTraceup3DService_getPrototypeOf(o) { FacilityAnalystTraceup3DService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FacilityAnalystTraceup3DService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.FacilityAnalystTraceup3DService
 * @category iServer FacilityAnalyst3D TraceUpResult
 * @classdesc ä¸æ¸¸è¿½è¸ªèµæºæå¡ç±»
 * @extends {SuperMap.CommonServiceBase}
 * @param {string} url - ç½ç»åææå¡å°åãè¯·æ±ç½ç»åææå¡ï¼URLåºä¸ºï¼
 *                       http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{ç½ç»åææå¡å}/rest/networkanalyst/{ç½ç»æ°æ®é@æ°æ®æº}ï¼
 *                       ä¾å¦:"http://localhost:8090/iserver/services/components-rest/rest/networkanalyst/RoadNet@Changchun"ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var FacilityAnalystTraceup3DService = /*#__PURE__*/function (_CommonServiceBase) {
  FacilityAnalystTraceup3DService_inherits(FacilityAnalystTraceup3DService, _CommonServiceBase);

  var _super = FacilityAnalystTraceup3DService_createSuper(FacilityAnalystTraceup3DService);

  /**
   * @function SuperMap.FacilityAnalystTraceup3DService.constructor
   * @description ä¸æ¸¸è¿½è¸ªèµæºæå¡ç±»æé å½æ°ã
   * @param {string} url - ç½ç»åææå¡å°åãè¯·æ±ç½ç»åææå¡ï¼URLåºä¸ºï¼
   *                       http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{ç½ç»åææå¡å}/rest/networkanalyst/{ç½ç»æ°æ®é@æ°æ®æº}ï¼
   *                       ä¾å¦:"http://localhost:8090/iserver/services/components-rest/rest/networkanalyst/RoadNet@Changchun"ã
   * @param {Object} options - åæ°ã
   * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
   */
  function FacilityAnalystTraceup3DService(url, options) {
    var _this;

    FacilityAnalystTraceup3DService_classCallCheck(this, FacilityAnalystTraceup3DService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.FacilityAnalystTraceup3DService";
    return _this;
  }
  /**
   * @function SuperMap.FacilityAnalystTraceup3DService.prototype.destroy
   * @override
   */


  FacilityAnalystTraceup3DService_createClass(FacilityAnalystTraceup3DService, [{
    key: "destroy",
    value: function destroy() {
      FacilityAnalystTraceup3DService_get(FacilityAnalystTraceup3DService_getPrototypeOf(FacilityAnalystTraceup3DService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.FacilityAnalystTraceup3DService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.FacilityAnalystTraceup3DParameters} params - ä¸æ¸¸è¿½è¸ªèµæºåæ°ç±»
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof FacilityAnalystTraceup3DParameters)) {
        return;
      }

      var me = this,
          jsonObject;
      me.url = Util.urlPathAppend(me.url, 'traceupresult');
      jsonObject = {
        edgeID: params.edgeID,
        nodeID: params.nodeID,
        weightName: params.weightName,
        isUncertainDirectionValid: params.isUncertainDirectionValid
      };
      me.request({
        method: "GET",
        params: jsonObject,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return FacilityAnalystTraceup3DService;
}(CommonServiceBase);
SuperMap.FacilityAnalystTraceup3DService = FacilityAnalystTraceup3DService;
// CONCATENATED MODULE: ./src/common/iServer/FacilityAnalystUpstream3DParameters.js
function FacilityAnalystUpstream3DParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FacilityAnalystUpstream3DParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { FacilityAnalystUpstream3DParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FacilityAnalystUpstream3DParameters_typeof(obj); }

function FacilityAnalystUpstream3DParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FacilityAnalystUpstream3DParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FacilityAnalystUpstream3DParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) FacilityAnalystUpstream3DParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) FacilityAnalystUpstream3DParameters_defineProperties(Constructor, staticProps); return Constructor; }

function FacilityAnalystUpstream3DParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { FacilityAnalystUpstream3DParameters_get = Reflect.get; } else { FacilityAnalystUpstream3DParameters_get = function _get(target, property, receiver) { var base = FacilityAnalystUpstream3DParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return FacilityAnalystUpstream3DParameters_get(target, property, receiver || target); }

function FacilityAnalystUpstream3DParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = FacilityAnalystUpstream3DParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function FacilityAnalystUpstream3DParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FacilityAnalystUpstream3DParameters_setPrototypeOf(subClass, superClass); }

function FacilityAnalystUpstream3DParameters_setPrototypeOf(o, p) { FacilityAnalystUpstream3DParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FacilityAnalystUpstream3DParameters_setPrototypeOf(o, p); }

function FacilityAnalystUpstream3DParameters_createSuper(Derived) { var hasNativeReflectConstruct = FacilityAnalystUpstream3DParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FacilityAnalystUpstream3DParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FacilityAnalystUpstream3DParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FacilityAnalystUpstream3DParameters_possibleConstructorReturn(this, result); }; }

function FacilityAnalystUpstream3DParameters_possibleConstructorReturn(self, call) { if (call && (FacilityAnalystUpstream3DParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return FacilityAnalystUpstream3DParameters_assertThisInitialized(self); }

function FacilityAnalystUpstream3DParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FacilityAnalystUpstream3DParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FacilityAnalystUpstream3DParameters_getPrototypeOf(o) { FacilityAnalystUpstream3DParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FacilityAnalystUpstream3DParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.FacilityAnalystUpstream3DParameters
 * @category iServer FacilityAnalyst3D UpstreamCriticalFacilities
 * @classdesc ä¸æ¸¸å³é®è®¾æ½æ¥æ¾èµæºåæ°ç±»ã
 * @extends {SuperMap.FacilityAnalyst3DParameters}
 * @param {Object} options - åæ°ã 
 * @param {Array.<number>} options.sourceNodeIDs - æå®çè®¾æ½ç¹ ID æ°ç»ã 
 * @param {number} [options.edgeID] - æå®çå¼§æ®µIDãedgeID ä¸ nodeID å¿é¡»æå®ä¸ä¸ªã  
 * @param {number} [options.nodeID] - æå®çç»ç¹IDãedgeID ä¸ edgeID å¿é¡»æå®ä¸ä¸ªã
 * @param {boolean} [options.isUncertainDirectionValid=false] - æå®ä¸ç¡®å®æµåæ¯å¦ææãæå®ä¸º trueï¼è¡¨ç¤ºä¸ç¡®å®æµåææï¼éå°ä¸ç¡®å®æµåæ¶åæç»§ç»­è¿è¡ï¼
 * æå®ä¸º falseï¼è¡¨ç¤ºä¸ç¡®å®æµåæ æï¼éå°ä¸ç¡®å®æµåå°åæ­¢å¨è¯¥æ¹åä¸ç»§ç»­æ¥æ¾ã 
 */

var FacilityAnalystUpstream3DParameters = /*#__PURE__*/function (_FacilityAnalyst3DPar) {
  FacilityAnalystUpstream3DParameters_inherits(FacilityAnalystUpstream3DParameters, _FacilityAnalyst3DPar);

  var _super = FacilityAnalystUpstream3DParameters_createSuper(FacilityAnalystUpstream3DParameters);

  function FacilityAnalystUpstream3DParameters(options) {
    var _this;

    FacilityAnalystUpstream3DParameters_classCallCheck(this, FacilityAnalystUpstream3DParameters);

    _this = _super.call(this, options);
    options = options || {};
    _this.sourceNodeIDs = null;
    Util.extend(FacilityAnalystUpstream3DParameters_assertThisInitialized(_this), options);
    _this.CLASS_NAME = "SuperMap.FacilityAnalystUpstream3DParameters";
    return _this;
  }
  /**
   * @function SuperMap.FacilityAnalystUpstream3DParameters.prototype.destroy
   * @override
   */


  FacilityAnalystUpstream3DParameters_createClass(FacilityAnalystUpstream3DParameters, [{
    key: "destroy",
    value: function destroy() {
      FacilityAnalystUpstream3DParameters_get(FacilityAnalystUpstream3DParameters_getPrototypeOf(FacilityAnalystUpstream3DParameters.prototype), "destroy", this).call(this);

      this.sourceNodeIDs = null;
    }
  }]);

  return FacilityAnalystUpstream3DParameters;
}(FacilityAnalyst3DParameters);
SuperMap.FacilityAnalystUpstream3DParameters = FacilityAnalystUpstream3DParameters;
// CONCATENATED MODULE: ./src/common/iServer/FacilityAnalystUpstream3DService.js
function FacilityAnalystUpstream3DService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FacilityAnalystUpstream3DService_typeof = function _typeof(obj) { return typeof obj; }; } else { FacilityAnalystUpstream3DService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FacilityAnalystUpstream3DService_typeof(obj); }

function FacilityAnalystUpstream3DService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FacilityAnalystUpstream3DService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FacilityAnalystUpstream3DService_createClass(Constructor, protoProps, staticProps) { if (protoProps) FacilityAnalystUpstream3DService_defineProperties(Constructor.prototype, protoProps); if (staticProps) FacilityAnalystUpstream3DService_defineProperties(Constructor, staticProps); return Constructor; }

function FacilityAnalystUpstream3DService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { FacilityAnalystUpstream3DService_get = Reflect.get; } else { FacilityAnalystUpstream3DService_get = function _get(target, property, receiver) { var base = FacilityAnalystUpstream3DService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return FacilityAnalystUpstream3DService_get(target, property, receiver || target); }

function FacilityAnalystUpstream3DService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = FacilityAnalystUpstream3DService_getPrototypeOf(object); if (object === null) break; } return object; }

function FacilityAnalystUpstream3DService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FacilityAnalystUpstream3DService_setPrototypeOf(subClass, superClass); }

function FacilityAnalystUpstream3DService_setPrototypeOf(o, p) { FacilityAnalystUpstream3DService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FacilityAnalystUpstream3DService_setPrototypeOf(o, p); }

function FacilityAnalystUpstream3DService_createSuper(Derived) { var hasNativeReflectConstruct = FacilityAnalystUpstream3DService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FacilityAnalystUpstream3DService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FacilityAnalystUpstream3DService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FacilityAnalystUpstream3DService_possibleConstructorReturn(this, result); }; }

function FacilityAnalystUpstream3DService_possibleConstructorReturn(self, call) { if (call && (FacilityAnalystUpstream3DService_typeof(call) === "object" || typeof call === "function")) { return call; } return FacilityAnalystUpstream3DService_assertThisInitialized(self); }

function FacilityAnalystUpstream3DService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FacilityAnalystUpstream3DService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FacilityAnalystUpstream3DService_getPrototypeOf(o) { FacilityAnalystUpstream3DService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FacilityAnalystUpstream3DService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.FacilityAnalystUpstream3DService
 * @category  iServer FacilityAnalyst3D UpstreamCriticalFacilities
 * @classdesc ä¸æ¸¸å³é®è®¾æ½æ¥æ¾èµæºæå¡ç±»
 * @extends {SuperMap.CommonServiceBase}
 * @param {string} url - ç½ç»åææå¡å°åãè¯·æ±ç½ç»åææå¡ï¼URLåºä¸ºï¼
 *                       http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{ç½ç»åææå¡å}/rest/networkanalyst/{ç½ç»æ°æ®é@æ°æ®æº}ï¼
 *                       ä¾å¦:"http://localhost:8090/iserver/services/components-rest/rest/networkanalyst/RoadNet@Changchun"ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var FacilityAnalystUpstream3DService = /*#__PURE__*/function (_CommonServiceBase) {
  FacilityAnalystUpstream3DService_inherits(FacilityAnalystUpstream3DService, _CommonServiceBase);

  var _super = FacilityAnalystUpstream3DService_createSuper(FacilityAnalystUpstream3DService);

  function FacilityAnalystUpstream3DService(url, options) {
    var _this;

    FacilityAnalystUpstream3DService_classCallCheck(this, FacilityAnalystUpstream3DService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.FacilityAnalystUpstream3DService";
    return _this;
  }
  /**
   * @function SuperMap.FacilityAnalystUpstream3DService.prototype.destroy
   * @override
   */


  FacilityAnalystUpstream3DService_createClass(FacilityAnalystUpstream3DService, [{
    key: "destroy",
    value: function destroy() {
      FacilityAnalystUpstream3DService_get(FacilityAnalystUpstream3DService_getPrototypeOf(FacilityAnalystUpstream3DService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.FacilityAnalystUpstream3DService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.FacilityAnalystUpstream3DParameters} params - ä¸æ¸¸å³é®è®¾æ½æ¥æ¾èµæºåæ°ç±»
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof FacilityAnalystUpstream3DParameters)) {
        return;
      }

      var me = this,
          jsonObject;
      me.url = Util.urlPathAppend(me.url, 'upstreamcirticalfaclilities');
      jsonObject = {
        sourceNodeIDs: params.sourceNodeIDs,
        edgeID: params.edgeID,
        nodeID: params.nodeID,
        isUncertainDirectionValid: params.isUncertainDirectionValid
      };
      me.request({
        method: "GET",
        params: jsonObject,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return FacilityAnalystUpstream3DService;
}(CommonServiceBase);
SuperMap.FacilityAnalystUpstream3DService = FacilityAnalystUpstream3DService;
// CONCATENATED MODULE: ./src/common/iServer/FilterAggParameter.js
function FilterAggParameter_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FilterAggParameter_typeof = function _typeof(obj) { return typeof obj; }; } else { FilterAggParameter_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FilterAggParameter_typeof(obj); }

function FilterAggParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FilterAggParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FilterAggParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) FilterAggParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) FilterAggParameter_defineProperties(Constructor, staticProps); return Constructor; }

function FilterAggParameter_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { FilterAggParameter_get = Reflect.get; } else { FilterAggParameter_get = function _get(target, property, receiver) { var base = FilterAggParameter_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return FilterAggParameter_get(target, property, receiver || target); }

function FilterAggParameter_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = FilterAggParameter_getPrototypeOf(object); if (object === null) break; } return object; }

function FilterAggParameter_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FilterAggParameter_setPrototypeOf(subClass, superClass); }

function FilterAggParameter_setPrototypeOf(o, p) { FilterAggParameter_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FilterAggParameter_setPrototypeOf(o, p); }

function FilterAggParameter_createSuper(Derived) { var hasNativeReflectConstruct = FilterAggParameter_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FilterAggParameter_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FilterAggParameter_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FilterAggParameter_possibleConstructorReturn(this, result); }; }

function FilterAggParameter_possibleConstructorReturn(self, call) { if (call && (FilterAggParameter_typeof(call) === "object" || typeof call === "function")) { return call; } return FilterAggParameter_assertThisInitialized(self); }

function FilterAggParameter_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FilterAggParameter_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FilterAggParameter_getPrototypeOf(o) { FilterAggParameter_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FilterAggParameter_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.FilterAggParameter
 * @classdesc è¿æ»¤æ¡ä»¶åæ°è®¾ç½®ï¼è¯¥åæ°ä»æ¯ææ°æ®æ¥æº Elasticsearch æå¡çæ°æ®æå¡ã
 * @category iServer Data FeatureResults
 * @param {Object} options - åå§ååæ°ã
 * @param {SuperMap.AggQueryBuilderParameter} options.filterParam - è¿æ»¤æ¡ä»¶åæ°è®¾ç½®ç±»ã
 * @param {SuperMap.AggregationType} [options.aggType=AggregationType.FILTER] - èåç±»åã
 */

var FilterAggParameter = /*#__PURE__*/function (_AggregationParameter) {
  FilterAggParameter_inherits(FilterAggParameter, _AggregationParameter);

  var _super = FilterAggParameter_createSuper(FilterAggParameter);

  function FilterAggParameter(options) {
    var _this;

    FilterAggParameter_classCallCheck(this, FilterAggParameter);

    _this = _super.call(this, options);
    /**
     * @member {SuperMap.AggQueryBuilderParameter} SuperMap.FilterAggParameter.prototype.filterParam
     * @description è¿æ»¤æ¡ä»¶åæ°è®¾ç½®ç±»ã
     */

    _this.filterParam = null;
    /**
     * @member {SuperMap.AggregationType} [SuperMap.FilterAggParameter.prototype.aggType=AggregationType.FILTER]
     * @description èåç±»åã
     */

    _this.aggType = AggregationType.FILTER;
    _this.CLASS_NAME = "SuperMap.FilterAggParameter";
    Util.extend(FilterAggParameter_assertThisInitialized(_this), options);
    return _this;
  }

  FilterAggParameter_createClass(FilterAggParameter, [{
    key: "destroy",
    value: function destroy() {
      FilterAggParameter_get(FilterAggParameter_getPrototypeOf(FilterAggParameter.prototype), "destroy", this).call(this);

      var me = this;

      if (me.filterParam) {
        me.filterParam = null;
      }
    }
  }]);

  return FilterAggParameter;
}(AggregationParameter);
SuperMap.FilterAggParameter = FilterAggParameter;
// CONCATENATED MODULE: ./src/common/iServer/FieldParameters.js
function FieldParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FieldParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FieldParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) FieldParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) FieldParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.FieldParameters
 * @category iServer Data Field
 * @classdesc å­æ®µä¿¡æ¯æ¥è¯¢åæ°ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {string} options.datasource - æ°æ®æºåç§°ã
 * @param {string} options.dataset - æ°æ®éåç§°ã
 */

var FieldParameters = /*#__PURE__*/function () {
  function FieldParameters(options) {
    FieldParameters_classCallCheck(this, FieldParameters);

    /**
     * @member {string} SuperMap.FieldParameters.prototype.datasource
     * @description è¦æ¥è¯¢çæ°æ®éæå¨çæ°æ®æºåç§°ã
     */
    this.datasource = null;
    /**
     *  @member {string} SuperMap.FieldParameters.prototype.dataset
     *  @description è¦æ¥è¯¢çæ°æ®éåç§°ã
     */

    this.dataset = null;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.FieldParameters";
  }
  /**
   * @function SuperMap.FieldParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  FieldParameters_createClass(FieldParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.datasource = null;
      me.dataset = null;
    }
  }]);

  return FieldParameters;
}();
SuperMap.FieldParameters = FieldParameters;
// CONCATENATED MODULE: ./src/common/iServer/FieldStatisticsParameters.js
function FieldStatisticsParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FieldStatisticsParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { FieldStatisticsParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FieldStatisticsParameters_typeof(obj); }

function FieldStatisticsParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FieldStatisticsParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FieldStatisticsParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) FieldStatisticsParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) FieldStatisticsParameters_defineProperties(Constructor, staticProps); return Constructor; }

function FieldStatisticsParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FieldStatisticsParameters_setPrototypeOf(subClass, superClass); }

function FieldStatisticsParameters_setPrototypeOf(o, p) { FieldStatisticsParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FieldStatisticsParameters_setPrototypeOf(o, p); }

function FieldStatisticsParameters_createSuper(Derived) { var hasNativeReflectConstruct = FieldStatisticsParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FieldStatisticsParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FieldStatisticsParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FieldStatisticsParameters_possibleConstructorReturn(this, result); }; }

function FieldStatisticsParameters_possibleConstructorReturn(self, call) { if (call && (FieldStatisticsParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return FieldStatisticsParameters_assertThisInitialized(self); }

function FieldStatisticsParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FieldStatisticsParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FieldStatisticsParameters_getPrototypeOf(o) { FieldStatisticsParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FieldStatisticsParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.FieldStatisticsParameters
 * @category iServer Data Field
 * @classdesc å­æ®µç»è®¡ä¿¡æ¯æ¥è¯¢åæ°ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {string} options.datasource - æ°æ®æºåç§°ã 
 * @param {string} options.dataset - æ°æ®éåç§°ã 
 * @param {string} options.fieldName - å­æ®µåã 
 * @param {(string.<SuperMap.StatisticMode>|Array.<string.<SuperMap.StatisticMode>>)} statisticMode - å­æ®µç»è®¡æ¹æ³ç±»åã
 * @extends {SuperMap.FieldParameters}
 */

var FieldStatisticsParameters = /*#__PURE__*/function (_FieldParameters) {
  FieldStatisticsParameters_inherits(FieldStatisticsParameters, _FieldParameters);

  var _super = FieldStatisticsParameters_createSuper(FieldStatisticsParameters);

  function FieldStatisticsParameters(options) {
    var _this;

    FieldStatisticsParameters_classCallCheck(this, FieldStatisticsParameters);

    _this = _super.call(this, options);
    /**
     * @member {string} SuperMap.FieldStatisticsParameters.prototype.fieldName
     * @description å­æ®µå
     */

    _this.fieldName = null;
    /**
     * @member {(string.<SuperMap.StatisticMode>|Array.<string.<SuperMap.StatisticMode>>)} SuperMap.FieldStatisticsParameters.prototype.statisticMode
     * @description å­æ®µç»è®¡æ¹æ³ç±»å
     */

    _this.statisticMode = null;

    if (options) {
      Util.extend(FieldStatisticsParameters_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.FieldStatisticsParameters";
    return _this;
  }
  /**
   * @function SuperMap.FieldStatisticsParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  FieldStatisticsParameters_createClass(FieldStatisticsParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.fieldName = null;
      me.statisticMode = null;
    }
  }]);

  return FieldStatisticsParameters;
}(FieldParameters);
SuperMap.FieldStatisticsParameters = FieldStatisticsParameters;
// CONCATENATED MODULE: ./src/common/iServer/FieldStatisticService.js
function FieldStatisticService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FieldStatisticService_typeof = function _typeof(obj) { return typeof obj; }; } else { FieldStatisticService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FieldStatisticService_typeof(obj); }

function FieldStatisticService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FieldStatisticService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FieldStatisticService_createClass(Constructor, protoProps, staticProps) { if (protoProps) FieldStatisticService_defineProperties(Constructor.prototype, protoProps); if (staticProps) FieldStatisticService_defineProperties(Constructor, staticProps); return Constructor; }

function FieldStatisticService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { FieldStatisticService_get = Reflect.get; } else { FieldStatisticService_get = function _get(target, property, receiver) { var base = FieldStatisticService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return FieldStatisticService_get(target, property, receiver || target); }

function FieldStatisticService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = FieldStatisticService_getPrototypeOf(object); if (object === null) break; } return object; }

function FieldStatisticService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FieldStatisticService_setPrototypeOf(subClass, superClass); }

function FieldStatisticService_setPrototypeOf(o, p) { FieldStatisticService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FieldStatisticService_setPrototypeOf(o, p); }

function FieldStatisticService_createSuper(Derived) { var hasNativeReflectConstruct = FieldStatisticService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FieldStatisticService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FieldStatisticService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FieldStatisticService_possibleConstructorReturn(this, result); }; }

function FieldStatisticService_possibleConstructorReturn(self, call) { if (call && (FieldStatisticService_typeof(call) === "object" || typeof call === "function")) { return call; } return FieldStatisticService_assertThisInitialized(self); }

function FieldStatisticService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FieldStatisticService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FieldStatisticService_getPrototypeOf(o) { FieldStatisticService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FieldStatisticService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.FieldStatisticService
 * @category iServer Data Field
 * @classdesc å­æ®µæ¥è¯¢ç»è®¡æå¡ç±»ãç¨æ¥å®æå¯¹æå®æ°æ®éæå®å­æ®µçæ¥è¯¢ç»è®¡åæï¼å³æ±å¹³åå¼ï¼æå¤§å¼ç­ã
 * @extends {SuperMap.CommonServiceBase}
 * @param {string} url - æå¡çè®¿é®å°åãå¦è®¿é® World Map æå¡ï¼åªéå° url è®¾ä¸ºï¼http://localhost:8090/iserver/services/data-world/rest/data å³å¯ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæ processCompleted å±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailed å±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã
 * @param {SuperMap.DataFormat} [options.format] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON åGeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER","GEOJSON"ã
 * @param {string} options.datasource - æ°æ®éæå¨çæ°æ®æºåç§°ã
 * @param {string} options.dataset - æ°æ®éåç§°ã
 * @param {string} options.field - æ¥è¯¢ç»è®¡çç®æ å­æ®µåç§°ã
 * @param {SuperMap.StatisticMode} options.statisticMode - å­æ®µæ¥è¯¢ç»è®¡çæ¹æ³ç±»åã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @example
 * var myService = new SuperMap.FieldStatisticService(url, {eventListeners: {
 *     "processCompleted": fieldStatisticCompleted,
 *     "processFailed": fieldStatisticError
 *     }ï¼
 *     datasource: "World",
 *     dataset: "Countries",
 *     field: "SmID",
 *     statisticMode: StatisticMode.AVERAGE
 * };
 */

var FieldStatisticService = /*#__PURE__*/function (_CommonServiceBase) {
  FieldStatisticService_inherits(FieldStatisticService, _CommonServiceBase);

  var _super = FieldStatisticService_createSuper(FieldStatisticService);

  function FieldStatisticService(url, options) {
    var _this;

    FieldStatisticService_classCallCheck(this, FieldStatisticService);

    _this = _super.call(this, url, options);
    /**
     * @member {string} SuperMap.FieldStatisticService.prototype.datasource
     * @description æ°æ®éæå¨çæ°æ®æºåç§°ã
     */

    _this.datasource = null;
    /**
     * @member {string} SuperMap.FieldStatisticService.prototype.dataset
     * @description æ°æ®éåç§°ã
     */

    _this.dataset = null;
    /**
     * @member {string} SuperMap.FieldStatisticService.prototype.field
     * @description æ¥è¯¢ç»è®¡çç®æ å­æ®µåç§°ã
     */

    _this.field = null;
    /**
     * @member {SuperMap.StatisticMode} SuperMap.FieldStatisticService.prototype.statisticMode
     * @description å­æ®µæ¥è¯¢ç»è®¡çæ¹æ³ç±»åã
     */

    _this.statisticMode = null;

    if (options) {
      Util.extend(FieldStatisticService_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.FieldStatisticService";
    return _this;
  }
  /**
   * @function SuperMap.FieldStatisticService.prototype.destroy
   * @override
   */


  FieldStatisticService_createClass(FieldStatisticService, [{
    key: "destroy",
    value: function destroy() {
      FieldStatisticService_get(FieldStatisticService_getPrototypeOf(FieldStatisticService.prototype), "destroy", this).call(this);

      var me = this;
      me.datasource = null;
      me.dataset = null;
      me.field = null;
      me.statisticMode = null;
    }
    /**
     * @function SuperMap.FieldStatisticService.prototype.processAsync
     * @description æ§è¡æå¡ï¼è¿è¡æå®å­æ®µçæ¥è¯¢ç»è®¡ã
     */

  }, {
    key: "processAsync",
    value: function processAsync() {
      var me = this,
          fieldStatisticURL = "datasources/" + me.datasource + "/datasets/" + me.dataset + "/fields/" + me.field + "/" + me.statisticMode;
      me.url = Util.urlPathAppend(me.url, fieldStatisticURL);
      me.request({
        method: "GET",
        data: null,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return FieldStatisticService;
}(CommonServiceBase);
SuperMap.FieldStatisticService = FieldStatisticService;
// CONCATENATED MODULE: ./src/common/iServer/FindClosestFacilitiesParameters.js
function FindClosestFacilitiesParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FindClosestFacilitiesParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FindClosestFacilitiesParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) FindClosestFacilitiesParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) FindClosestFacilitiesParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.FindClosestFacilitiesParameters
 * @category iServer NetworkAnalyst ClosestFacility
 * @classdesc æè¿è®¾æ½åæåæ°ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {(SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point|number)} options.event - äºä»¶ç¹ï¼ä¸è¬ä¸ºéè¦è·å¾æå¡è®¾æ½æå¡çäºä»¶ä½ç½®ã 
 * @param {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point|number>}  options.facilities - è®¾æ½ç¹éåï¼ä¸è¬ä¸ºæä¾æå¡çæå¡è®¾æ½ä½ç½®ã 
 * @param {number} [options.expectFacilityCount=1] - è¦æ¥æ¾çè®¾æ½ç¹æ°éã 
 * @param {boolean} [options.fromEvent=false] - æ¯å¦ä»äºä»¶ç¹å°è®¾æ½ç¹è¿è¡æ¥æ¾ã 
 * @param {boolean} [options.isAnalyzeById=false] - äºä»¶ç¹åè®¾æ½ç¹æ¯å¦éè¿èç¹ ID å·æ¥æå®ã 
 * @param {number} [options.maxWeight=0] - æ¥æ¾åå¾ãåä½ä¸è¯¥ç±»ä¸­ parameter å­æ®µï¼äº¤éç½ç»åæéç¨åæ°ï¼ä¸­è®¾ç½®çèè´¹å­æ®µä¸è´ã 
 * @param {SuperMap.TransportationAnalystParameter} [options.parameter] - äº¤éç½ç»åæéç¨åæ°ã
 */

var FindClosestFacilitiesParameters = /*#__PURE__*/function () {
  function FindClosestFacilitiesParameters(options) {
    FindClosestFacilitiesParameters_classCallCheck(this, FindClosestFacilitiesParameters);

    /**
     * @member {(SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point|number)} SuperMap.FindClosestFacilitiesParameters.prototype.event
     * @description äºä»¶ç¹ï¼ä¸è¬ä¸ºéè¦è·å¾æå¡è®¾æ½æå¡çäºä»¶ä½ç½®ã
     *              å¯ä»¥éè¿ä¸¤ç§æ¹å¼èµäºäºä»¶ç¹ï¼å½è¯¥ç±»ä¸­å­æ®µ isAnalyzeById = true æ¶ï¼åºè¾å¥äºä»¶ç¹ ID å·ï¼å½ isAnalyzeById = false æ¶ï¼åºè¾å¥äºä»¶ç¹åæ ã
     */
    this.event = null;
    /**
     * @member {number} [SuperMap.FindClosestFacilitiesParameters.prototype.expectFacilityCount=1]
     * @description è¦æ¥æ¾çè®¾æ½ç¹æ°éã
     */

    this.expectFacilityCount = 1;
    /**
     * @member {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point|number>} [SuperMap.FindClosestFacilitiesParameters.prototype.facilities=false]
     * @description è®¾æ½ç¹éåï¼ä¸è¬ä¸ºæä¾æå¡çæå¡è®¾æ½ä½ç½®ã
     *              å¯ä»¥éè¿ä¸¤ç§æ¹å¼èµäºè®¾æ½ç¹ï¼å½è¯¥ç±»ä¸­å­æ®µ isAnalyzeById = true æ¶ï¼åºè¾å¥è®¾æ½ç¹ ID å·ï¼å½ isAnalyzeById = false æ¶ï¼åºè¾å¥è®¾æ½ç¹åæ ã
     */

    this.facilities = null;
    /**
     * @member {boolean} [SuperMap.FindClosestFacilitiesParameters.prototype.fromEvent=false]
     * @description æ¯å¦ä»äºä»¶ç¹å°è®¾æ½ç¹è¿è¡æ¥æ¾ãæè¿è®¾æ½åæä¸»è¦æ¯éè¿è®¾æ½ç¹åäºä»¶ç¹ä¹é´æä¼çè·¯çº¿æ¥åæå¨ä¸å®èå´ååªä¸ªæåªäºè®¾æ½ä¸äºä»¶ç¹ææä¼è·¯çº¿çå³ç³»ã
     *              è¿ä¸ªè¡èµ°çº¿è·¯æ¯éè¿ç½ç»å¾å±è¿è¡ç½ç»åæç®æ³è®¡ç®åºæ¥çä¸¤ç¹é´çæä¼è·¯çº¿ãç±äºå­å¨ä» A ç¹å° B ç¹ä¸ä» B ç¹å° A ç¹çèè´¹ä¸ä¸æ ·çæåµï¼å æ­¤èµ·æ­¢ç¹
     *              ä¸åå¯è½ä¼å¾å°ä¸åçæä¼è·¯çº¿ãå æ­¤å¨è¿è¡æè¿è®¾æ½åæä¹åï¼éè¦è®¾ç½®è·åçæä¼è·¯çº¿çæ¹åï¼å³æ¯ä»¥äºä»¶ç¹ä½ä¸ºèµ·ç¹å°æè¿è®¾æ½ç¹çæ¹ååæï¼è¿æ¯ä»¥æ
     *              è¿è®¾æ½ç¹ä¸ºèµ·ç¹å°äºä»¶ç¹çæ¹ååæãå¦æéè¦ä»¥äºä»¶ç¹ä½ä¸ºèµ·ç¹å°è®¾æ½ç¹æ¹åè¿è¡æ¥æ¾ï¼è®¾ç½®è¯¥å­æ®µå¼ä¸º trueï¼è®¾ç½®ä¸º falseï¼è¡¨ç¤ºä»è®¾æ½ç¹å°äºä»¶ç¹è¿è¡æ¥æ¾ã
     */

    this.fromEvent = false;
    /**
     * @member {boolean} [SuperMap.FindClosestFacilitiesParameters.prototype.isAnalyzeById=false]
     * @description äºä»¶ç¹åè®¾æ½ç¹æ¯å¦éè¿èç¹ ID å·æ¥æå®ï¼è®¾ç½®ä¸º falseï¼è¡¨ç¤ºéè¿åæ ç¹æå®äºä»¶ç¹åè®¾æ½ç¹ã
     */

    this.isAnalyzeById = false;
    /**
     * @member {number} [SuperMap.FindClosestFacilitiesParameters.prototype.maxWeight=0]
     * @description æ¥æ¾åå¾ãåä½ä¸è¯¥ç±»ä¸­ parameter å­æ®µï¼äº¤éç½ç»åæéç¨åæ°ï¼ä¸­è®¾ç½®çèè´¹å­æ®µä¸è´ã
     *              ä¾å¦äºä»¶åçç¹æ¯ä¸èµ·äº¤éäºæï¼è¦æ±æ¥æ¾å¨ 10 åéåè½å°è¾¾çæè¿å»é¢ï¼è¶è¿ 10 åéè½å°è¾¾çé½ä¸äºèèã
     *              é£ä¹éè¦å°ç½ç»åæåæ°ä¸­ parameter.weightFieldName è®¾ç½®ä¸ºè¡¨ç¤ºæ¶é´çå­æ®µï¼ç¶åè®¾ç½®æ¥æ¾èå´çåå¾å¼ä¸º10ã
     */

    this.maxWeight = 0;
    /**
     * @member {SuperMap.TransportationAnalystParameter} [SuperMap.FindClosestFacilitiesParameters.prototype.parameter]
     * @description äº¤éç½ç»åæéç¨åæ°ãéè¿æ¬ç±»å¯ä»¥è®¾ç½®éç¢è¾¹ãéç¢ç¹ãæå¼å­æ®µä¿¡æ¯çåç§°æ è¯ãè½¬åæå¼å­æ®µç­ä¿¡æ¯ã
     *              å®ä¸º SuperMap.TransportationAnalystParameter ç±»åï¼è½ç¶ä¸ºå¯éåæ°ï¼ä½æ¯å¦æä¸è®¾ç½®å¶ä¸­ç resultSetting å­æ®µï¼
     *              åè¿åç»æç©ºé´ä¿¡æ¯ç­é½ä¸ºç©ºã
     */

    this.parameter = new TransportationAnalystParameter();
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.FindClosestFacilitiesParameters";
  }
  /**
   * @function SuperMap.FindClosestFacilitiesParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  FindClosestFacilitiesParameters_createClass(FindClosestFacilitiesParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.event = null;
      me.expectFacilityCount = null;
      me.facilities = null;
      me.fromEvent = null;
      me.isAnalyzeById = null;
      me.maxWeight = null;

      if (me.parameter) {
        me.parameter.destroy();
        me.parameter = null;
      }
    }
  }]);

  return FindClosestFacilitiesParameters;
}();
SuperMap.FindClosestFacilitiesParameters = FindClosestFacilitiesParameters;
// CONCATENATED MODULE: ./src/common/iServer/FindClosestFacilitiesService.js
function FindClosestFacilitiesService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FindClosestFacilitiesService_typeof = function _typeof(obj) { return typeof obj; }; } else { FindClosestFacilitiesService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FindClosestFacilitiesService_typeof(obj); }

function FindClosestFacilitiesService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FindClosestFacilitiesService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FindClosestFacilitiesService_createClass(Constructor, protoProps, staticProps) { if (protoProps) FindClosestFacilitiesService_defineProperties(Constructor.prototype, protoProps); if (staticProps) FindClosestFacilitiesService_defineProperties(Constructor, staticProps); return Constructor; }

function FindClosestFacilitiesService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { FindClosestFacilitiesService_get = Reflect.get; } else { FindClosestFacilitiesService_get = function _get(target, property, receiver) { var base = FindClosestFacilitiesService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return FindClosestFacilitiesService_get(target, property, receiver || target); }

function FindClosestFacilitiesService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = FindClosestFacilitiesService_getPrototypeOf(object); if (object === null) break; } return object; }

function FindClosestFacilitiesService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FindClosestFacilitiesService_setPrototypeOf(subClass, superClass); }

function FindClosestFacilitiesService_setPrototypeOf(o, p) { FindClosestFacilitiesService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FindClosestFacilitiesService_setPrototypeOf(o, p); }

function FindClosestFacilitiesService_createSuper(Derived) { var hasNativeReflectConstruct = FindClosestFacilitiesService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FindClosestFacilitiesService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FindClosestFacilitiesService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FindClosestFacilitiesService_possibleConstructorReturn(this, result); }; }

function FindClosestFacilitiesService_possibleConstructorReturn(self, call) { if (call && (FindClosestFacilitiesService_typeof(call) === "object" || typeof call === "function")) { return call; } return FindClosestFacilitiesService_assertThisInitialized(self); }

function FindClosestFacilitiesService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FindClosestFacilitiesService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FindClosestFacilitiesService_getPrototypeOf(o) { FindClosestFacilitiesService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FindClosestFacilitiesService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.FindClosestFacilitiesService
 * @category  iServer NetworkAnalyst ClosestFacility
 * @classdesc æè¿è®¾æ½åææå¡ç±»ã
 *            æè¿è®¾æ½åææ¯æå¨ç½ç»ä¸ç»å®ä¸ä¸ªäºä»¶ç¹åä¸ç»è®¾æ½ç¹ï¼
 *            æ¥æ¾ä»äºä»¶ç¹å°è®¾æ½ç¹(æä»è®¾æ½ç¹å°äºä»¶ç¹)ä»¥æå°èè´¹è½å°è¾¾çæä½³è·¯å¾ã
 *            è¯¥ç±»è´è´£å°å®¢æ·ç«¯æå®çæè¿è®¾æ½åæåæ°ä¼ éç»æå¡ç«¯ï¼å¹¶æ¥æ¶æå¡ç«¯è¿åçç»ææ°æ®ã
 *            æè¿è®¾æ½åæç»æéè¿è¯¥ç±»æ¯æçäºä»¶ççå¬å½æ°åæ°è·å
 * @extends {SuperMap.NetworkAnalystServiceBase}
 * @example
 * var myfindClosestFacilitiesService = new SuperMap.FindClosestFacilitiesService(url, {
 *     eventListeners: {
 *	       "processCompleted": findClosestFacilitiesCompleted,
 *		   "processFailed": findClosestFacilitiesError
 *		   }
 * });
 * @param {string} url - ç½ç»åææå¡å°åãè¯·æ±ç½ç»åææå¡ï¼URLåºä¸ºï¼
 *                       http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{ç½ç»åææå¡å}/rest/networkanalyst/{ç½ç»æ°æ®é@æ°æ®æº}ï¼
 *                       ä¾å¦:"http://localhost:8090/iserver/services/components-rest/rest/networkanalyst/RoadNet@Changchun"ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var FindClosestFacilitiesService = /*#__PURE__*/function (_NetworkAnalystServic) {
  FindClosestFacilitiesService_inherits(FindClosestFacilitiesService, _NetworkAnalystServic);

  var _super = FindClosestFacilitiesService_createSuper(FindClosestFacilitiesService);

  /*
   * @function SuperMap.FindClosestFacilitiesService.prototype.constructor
   * @description æè¿è®¾æ½åææå¡ç±»æé å½æ°ã
   * @param {string} url - ç½ç»åææå¡å°åãè¯·æ±ç½ç»åææå¡ï¼URLåºä¸ºï¼
   *                       http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{ç½ç»åææå¡å}/rest/networkanalyst/{ç½ç»æ°æ®é@æ°æ®æº}ï¼
   *                       ä¾å¦:"http://localhost:8090/iserver/services/components-rest/rest/networkanalyst/RoadNet@Changchun"ã
   * @param {Object} options - éåæ°ã<br>
   * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
   */
  function FindClosestFacilitiesService(url, options) {
    var _this;

    FindClosestFacilitiesService_classCallCheck(this, FindClosestFacilitiesService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.FindClosestFacilitiesService";
    return _this;
  }
  /**
   * @function SuperMap.FindClosestFacilitiesService.prototype.destroy
   * @override
   */


  FindClosestFacilitiesService_createClass(FindClosestFacilitiesService, [{
    key: "destroy",
    value: function destroy() {
      FindClosestFacilitiesService_get(FindClosestFacilitiesService_getPrototypeOf(FindClosestFacilitiesService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.FindClosestFacilitiesService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.FindClosestFacilitiesParameters} params - æè¿è®¾æ½åææå¡åæ°ç±»
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof FindClosestFacilitiesParameters)) {
        return;
      }

      var me = this,
          jsonObject;
      me.url = Util.urlPathAppend(me.url, 'closestfacility');
      jsonObject = {
        expectFacilityCount: params.expectFacilityCount,
        fromEvent: params.fromEvent,
        maxWeight: params.maxWeight,
        parameter: Util.toJSON(params.parameter),
        event: Util.toJSON(params.event),
        facilities: me.getJson(params.isAnalyzeById, params.facilities)
      };
      me.request({
        method: "GET",
        params: jsonObject,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.FindClosestFacilitiesService.prototype.getJson
     * @description å°å¯¹è±¡è½¬åä¸ºJSONå­ç¬¦ä¸²ã
     * @param {boolean} isAnalyzeById - æ¯å¦éè¿IDæ¥åæ
     * @param {Array} params - åæåæ°æ°ç»
     * @returns {Object} è½¬ååçJSONå­ç¬¦ä¸²ã
     */

  }, {
    key: "getJson",
    value: function getJson(isAnalyzeById, params) {
      var jsonString = "[",
          len = params ? params.length : 0;

      if (isAnalyzeById === false) {
        for (var i = 0; i < len; i++) {
          if (i > 0) {
            jsonString += ",";
          }

          jsonString += '{"x":' + params[i].x + ',"y":' + params[i].y + '}';
        }
      } else if (isAnalyzeById === true) {
        for (var _i = 0; _i < len; _i++) {
          if (_i > 0) {
            jsonString += ",";
          }

          jsonString += params[_i];
        }
      }

      jsonString += ']';
      return jsonString;
    }
    /**
     * @function SuperMap.FindClosestFacilitiesService.prototype.toGeoJSONResult
     * @description å°å«æ geometry çæ°æ®è½¬æ¢ä¸º GeoJSON æ ¼å¼ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     */

  }, {
    key: "toGeoJSONResult",
    value: function toGeoJSONResult(result) {
      if (!result || !result.facilityPathList) {
        return result;
      }

      var geoJSONFormat = new GeoJSON();
      result.facilityPathList.map(function (path) {
        if (path.route) {
          path.route = geoJSONFormat.toGeoJSON(path.route);
        }

        if (path.pathGuideItems) {
          path.pathGuideItems = geoJSONFormat.toGeoJSON(path.pathGuideItems);
        }

        if (path.edgeFeatures) {
          path.edgeFeatures = geoJSONFormat.toGeoJSON(path.edgeFeatures);
        }

        if (path.nodeFeatures) {
          path.nodeFeatures = geoJSONFormat.toGeoJSON(path.nodeFeatures);
        }

        return path;
      });
      return result;
    }
  }]);

  return FindClosestFacilitiesService;
}(NetworkAnalystServiceBase);
SuperMap.FindClosestFacilitiesService = FindClosestFacilitiesService;
// CONCATENATED MODULE: ./src/common/iServer/FindLocationParameters.js
function FindLocationParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FindLocationParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FindLocationParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) FindLocationParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) FindLocationParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.FindLocationParameters
 * @category iServer NetworkAnalyst Location
 * @classdesc éåååºåæåæ°ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {string} options.turnWeightField - è½¬åæå¼å­æ®µçåç§°ã 
 * @param {string} options.weightName - é»åå­æ®µçåç§°ï¼æ è¯äºè¿è¡ç½ç»åææ¶æä½¿ç¨çé»åå­æ®µã
 * @param {Array.<SuperMap.SupplyCenter>} options.supplyCenters - èµæºä¾ç»ä¸­å¿éåã 
 * @param {number} [options.expectedSupplyCenterCount=1] - ææç¨äºæç»è®¾æ½éåçèµæºä¾ç»ä¸­å¿æ°éã 
 * @param {boolean} [options.isFromCenter=false] - æ¯å¦ä»ä¸­å¿ç¹å¼å§åéèµæºã 
 */

var FindLocationParameters = /*#__PURE__*/function () {
  function FindLocationParameters(options) {
    FindLocationParameters_classCallCheck(this, FindLocationParameters);

    /**
     * @member {number} [SuperMap.FindLocationParameters.prototype.expectedSupplyCenterCount=1]
     * @description ææç¨äºæç»è®¾æ½éåçèµæºä¾ç»ä¸­å¿æ°éã 
     *              å½è¾å¥å¼ä¸º 0 æ¶ï¼æç»è®¾æ½éåçèµæºä¾ç»ä¸­å¿æ°éé»è®¤ä¸ºè¦çåæåºååçæéæå°çä¾ç»ä¸­å¿æ°ã
     */
    this.expectedSupplyCenterCount = null;
    /**
     * @member {boolean} [SuperMap.FindLocationParameters.prototype.isFromCenter=false]
     * @description æ¯å¦ä»ä¸­å¿ç¹å¼å§åéèµæºã
     *              ç±äºç½è·¯æ°æ®ä¸­çå¼§æ®µå·ææ­£åé»åï¼å³å¼§æ®µçæ­£åé»åå¼ä¸å¶ååé»åå¼å¯è½ä¸åï¼
     *              å æ­¤ï¼å¨è¿è¡åææ¶ï¼ä»èµæºä¾ç»ä¸­å¿å¼å§åéèµæºå°éæ±ç¹ä¸ä»éæ±ç¹åèµæºä¾ç»ä¸­å¿åéè¿ä¸¤ç§åéå½¢å¼ä¸ï¼æå¾çåæç»æä¼ä¸åã
     */

    this.isFromCenter = false;
    /**
     * @member {Array.<SuperMap.SupplyCenter>} SuperMap.FindLocationParameters.prototype.supplyCenters
     * @description èµæºä¾ç»ä¸­å¿éåã
     *              èµæºä¾ç»ä¸­å¿æ¯æä¾èµæºåæå¡çè®¾æ½ï¼å¯¹åºäºç½ç»ç»ç¹ï¼
     *              èµæºä¾ç»ä¸­å¿çç¸å³ä¿¡æ¯åæ¬èµæºéãæå¤§é»åå¼ãèµæºä¾ç»ä¸­å¿ç±»åï¼èµæºä¾ç»ä¸­å¿å¨ç½ç»ä¸­æå¤ç»ç¹ç ID ç­ï¼ä»¥ä¾¿å¨è¿è¡éåååºåææ¶ä½¿ç¨ã
     */

    this.supplyCenters = null;
    /**
     * @member {string} SuperMap.FindLocationParameters.prototype.turnWeightField
     * @description è½¬åæå¼å­æ®µçåç§°ã
     */

    this.turnWeightField = null;
    /**
     * @member {string} SuperMap.FindLocationParameters.prototype.weightName
     * @description é»åå­æ®µçåç§°ï¼æ è¯äºè¿è¡ç½ç»åææ¶æä½¿ç¨çé»åå­æ®µã
     */

    this.weightName = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.FindLocationParameters";
  }
  /**
   * @function SuperMap.FindLocationParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  FindLocationParameters_createClass(FindLocationParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.expectedSupplyCenterCount = null;
      me.isFromCenter = null;
      me.turnWeightField = null;
      me.weightName = null;

      if (me.supplyCenters) {
        for (var i = 0, supplyCenters = me.supplyCenters, len = supplyCenters.length; i < len; i++) {
          supplyCenters[i].destroy();
        }

        me.supplyCenters = null;
      }
    }
  }]);

  return FindLocationParameters;
}();
SuperMap.FindLocationParameters = FindLocationParameters;
// CONCATENATED MODULE: ./src/common/iServer/FindLocationService.js
function FindLocationService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FindLocationService_typeof = function _typeof(obj) { return typeof obj; }; } else { FindLocationService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FindLocationService_typeof(obj); }

function FindLocationService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FindLocationService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FindLocationService_createClass(Constructor, protoProps, staticProps) { if (protoProps) FindLocationService_defineProperties(Constructor.prototype, protoProps); if (staticProps) FindLocationService_defineProperties(Constructor, staticProps); return Constructor; }

function FindLocationService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { FindLocationService_get = Reflect.get; } else { FindLocationService_get = function _get(target, property, receiver) { var base = FindLocationService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return FindLocationService_get(target, property, receiver || target); }

function FindLocationService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = FindLocationService_getPrototypeOf(object); if (object === null) break; } return object; }

function FindLocationService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FindLocationService_setPrototypeOf(subClass, superClass); }

function FindLocationService_setPrototypeOf(o, p) { FindLocationService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FindLocationService_setPrototypeOf(o, p); }

function FindLocationService_createSuper(Derived) { var hasNativeReflectConstruct = FindLocationService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FindLocationService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FindLocationService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FindLocationService_possibleConstructorReturn(this, result); }; }

function FindLocationService_possibleConstructorReturn(self, call) { if (call && (FindLocationService_typeof(call) === "object" || typeof call === "function")) { return call; } return FindLocationService_assertThisInitialized(self); }

function FindLocationService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FindLocationService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FindLocationService_getPrototypeOf(o) { FindLocationService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FindLocationService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.FindLocationService
 * @category iServer NetworkAnalyst Location
 * @classdesc éåååºåææå¡ç±»ã
 *            éåååºåææ¯ä¸ºäºç¡®å®ä¸ä¸ªæå¤ä¸ªå¾å»ºè®¾æ½çæä½³ææä¼ä½ç½®ï¼ä½¿å¾è®¾æ½å¯ä»¥ç¨ä¸ç§æç»æµææçæ¹å¼ä¸ºéæ±æ¹æä¾æå¡æèååã
 *            éåååºä¸ä»ä»æ¯ä¸ä¸ªéåè¿ç¨ï¼è¿è¦å°éæ±ç¹çéæ±åéå°ç¸åºçæ°å»ºè®¾æ½çæå¡åºä¸­ï¼å æ­¤ç§°ä¹ä¸ºéåä¸ååºã
 *            éåååºåæç»æéè¿è¯¥ç±»æ¯æçäºä»¶ççå¬å½æ°åæ°è·å
 * @extends {SuperMap.NetworkAnalystServiceBase}
 * @example
 * (start code)
 * var findLocationService = new SuperMap.FindLocationService(url, {
 *     eventListeners: {
 *         "processCompleted": findLocationCompleted,
 *		   "processFailed": findLocationError
 *		   }
 * });
 * (end)
 * @param {string} url - æå¡çè®¿é®å°åã
 *                       å¦ http://localhost:8090/iserver/services/transportationanalyst-sample/rest/networkanalyst/RoadNet@Changchun ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var FindLocationService = /*#__PURE__*/function (_NetworkAnalystServic) {
  FindLocationService_inherits(FindLocationService, _NetworkAnalystServic);

  var _super = FindLocationService_createSuper(FindLocationService);

  function FindLocationService(url, options) {
    var _this;

    FindLocationService_classCallCheck(this, FindLocationService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.FindLocationService";
    return _this;
  }
  /**
   * @function SuperMap.FindLocationService.prototype.destroy
   * @override
   */


  FindLocationService_createClass(FindLocationService, [{
    key: "destroy",
    value: function destroy() {
      FindLocationService_get(FindLocationService_getPrototypeOf(FindLocationService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.FindLocationService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.FindLocationParameters} params - éåååºåææå¡åæ°ç±»
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof FindLocationParameters)) {
        return;
      }

      var me = this,
          jsonObject;
      me.url = Util.urlPathAppend(me.url, 'location');
      jsonObject = {
        isFromCenter: params.isFromCenter,
        expectedSupplyCenterCount: params.expectedSupplyCenterCount,
        weightName: params.weightName,
        turnWeightField: params.turnWeightField,
        returnEdgeFeature: true,
        returnEdgeGeometry: true,
        returnNodeFeature: true,
        mapParameter: Util.toJSON(params.mapParameter),
        supplyCenters: me.getCentersJson(params.supplyCenters)
      };
      me.request({
        method: "GET",
        params: jsonObject,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.FindLocationService.prototype.getCentersJson
     * @description å°æ°ç»å¯¹è±¡è½¬åä¸ºJSONå­ç¬¦ä¸²ã
     * @param {Array} params - éè¦è½¬æ¢çåæ°
     * @returns {string} è½¬ååçJSONå­ç¬¦ä¸²ã
     */

  }, {
    key: "getCentersJson",
    value: function getCentersJson(params) {
      var json = "[",
          len = params ? params.length : 0;

      for (var i = 0; i < len; i++) {
        if (i > 0) {
          json += ",";
        }

        json += Util.toJSON(params[i]);
      }

      json += "]";
      return json;
    }
    /**
     * @function SuperMap.FindLocationService.prototype.toGeoJSONResult
     * @description å°å«æ geometry çæ°æ®è½¬æ¢ä¸º GeoJSON æ ¼å¼ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     */

  }, {
    key: "toGeoJSONResult",
    value: function toGeoJSONResult(result) {
      if (!result) {
        return null;
      }

      var geoJSONFormat = new GeoJSON();

      if (result.demandResults) {
        result.demandResults = geoJSONFormat.toGeoJSON(result.demandResults);
      }

      if (result.supplyResults) {
        result.supplyResults = geoJSONFormat.toGeoJSON(result.supplyResults);
      }

      return result;
    }
  }]);

  return FindLocationService;
}(NetworkAnalystServiceBase);
SuperMap.FindLocationService = FindLocationService;
// CONCATENATED MODULE: ./src/common/iServer/FindMTSPPathsParameters.js
function FindMTSPPathsParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FindMTSPPathsParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FindMTSPPathsParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) FindMTSPPathsParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) FindMTSPPathsParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.FindMTSPPathsParameters
 * @category iServer NetworkAnalyst MTSPPath
 * @classdesc å¤æè¡ååæåæ°ç±»
 * @param {Object} options - åæ°ã 
 * @param {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point|number>} options.centers - ééä¸­å¿éåã 
 * @param {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point|number>} options.nodes - ééç®æ éåã 
 * @param {boolean} [options.hasLeastTotalCost=false] - ééæ¨¡å¼æ¯å¦ä¸ºæ»è±è´¹æå°æ¹æ¡ã 
 * @param {boolean} [options.isAnalyzeById=false] - æ¯å¦éè¿èç¹ ID å·æ¥æå®ééä¸­å¿ç¹åééç®çç¹ï¼å³éè¿åæ ç¹æå®ã 
 * @param {SuperMap.TransportationAnalystParameter} [options.parameter] - äº¤éç½ç»åæéç¨åæ°ã
 */

var FindMTSPPathsParameters = /*#__PURE__*/function () {
  function FindMTSPPathsParameters(options) {
    FindMTSPPathsParameters_classCallCheck(this, FindMTSPPathsParameters);

    /**
     * @member SuperMap.FindMTSPPathsParameters.prototype.centers - {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point|number>}
     * @description ééä¸­å¿éåã
     *              å½ SuperMap.FindMTSPPathsParameters.isAnalyzeById = false æ¶ï¼centers åºä¸ºç¹çåæ æ°ç»ï¼
     *              å½ SuperMap.FindMTSPPathsParameters.isAnalyzeById = true æ¶ï¼centers åºä¸ºç¹ç ID æ°ç»ã
     */
    this.centers = null;
    /**
     * @member {boolean} [SuperMap.FindMTSPPathsParameters.prototype.hasLeastTotalCost=false]
     * @description ééæ¨¡å¼æ¯å¦ä¸ºæ»è±è´¹æå°æ¹æ¡ã
     *              è¥ä¸º trueï¼åæç§æ»è±è´¹æå°çæ¨¡å¼è¿è¡ééï¼æ­¤æ¶å¯è½ä¼åºç°æå ä¸ªééä¸­å¿ç¹ééçè±è´¹è¾å¤èå¶ä»ééä¸­å¿ç¹çè±è´¹å¾å°çæåµã
     *              è¥ä¸º falseï¼åä¸ºå±é¨æä¼ï¼æ­¤æ¹æ¡ä¼æ§å¶æ¯ä¸ªééä¸­å¿ç¹çè±è´¹ï¼ä½¿åä¸ªä¸­å¿ç¹è±è´¹ç¸å¯¹å¹³åï¼æ­¤æ¶æ»è±è´¹ä¸ä¸å®æå°ã
     */

    this.hasLeastTotalCost = false;
    /**
     * @member {boolean} [SuperMap.FindMTSPPathsParameters.prototype.isAnalyzeById=false] 
     * @description æ¯å¦éè¿èç¹ ID å·æ¥æå®ééä¸­å¿ç¹åééç®çç¹ï¼å³éè¿åæ ç¹æå®ã
     */

    this.isAnalyzeById = false;
    /**
     * @member {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point|number>} SuperMap.FindMTSPPathsParameters.prototype.nodes  
     * @description ééç®æ éåã
     *              å½ SuperMap.FindMTSPPathsParameters.isAnalyzeById = false æ¶ï¼nodes åºä¸ºç¹çåæ æ°ç»ï¼
     *              å½ SuperMap.FindMTSPPathsParameters.isAnalyzeById = true æ¶ï¼nodes åºä¸ºç¹ç ID æ°ç»ã
     */

    this.nodes = null;
    /**
     * @member {SuperMap.TransportationAnalystParameter} [SuperMap.FindMTSPPathsParameters.prototype.parameter]
     * @description äº¤éç½ç»åæéç¨åæ°ã
     *              éè¿æ¬ç±»å¯ä»¥è®¾ç½®éç¢è¾¹ãéç¢ç¹ãæå¼å­æ®µä¿¡æ¯çåç§°æ è¯ãè½¬åæå¼å­æ®µç­ä¿¡æ¯ã
     *              SuperMap.TransportationAnalystParameter ç±»åï¼å®è½ç¶ä¸ºå¯éåæ°ï¼ä½æ¯å¦æä¸è®¾ç½®å¶ä¸­ç resultSetting å­æ®µï¼åè¿åç»æç©ºé´ä¿¡æ¯ç­é½ä¸ºç©ºã
     */

    this.parameter = new TransportationAnalystParameter();
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.FindMTSPPathsParameters";
  }
  /**
   * @function SuperMap.FindMTSPPathsParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  FindMTSPPathsParameters_createClass(FindMTSPPathsParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.centers = null;
      me.hasLeastTotalCost = null;
      me.isAnalyzeById = null;
      me.nodes = null;
      me.maxWeight = null;

      if (me.parameter) {
        me.parameter.destroy();
        me.parameter = null;
      }
    }
  }]);

  return FindMTSPPathsParameters;
}();
SuperMap.FindMTSPPathsParameters = FindMTSPPathsParameters;
// CONCATENATED MODULE: ./src/common/iServer/FindMTSPPathsService.js
function FindMTSPPathsService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FindMTSPPathsService_typeof = function _typeof(obj) { return typeof obj; }; } else { FindMTSPPathsService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FindMTSPPathsService_typeof(obj); }

function FindMTSPPathsService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FindMTSPPathsService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FindMTSPPathsService_createClass(Constructor, protoProps, staticProps) { if (protoProps) FindMTSPPathsService_defineProperties(Constructor.prototype, protoProps); if (staticProps) FindMTSPPathsService_defineProperties(Constructor, staticProps); return Constructor; }

function FindMTSPPathsService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { FindMTSPPathsService_get = Reflect.get; } else { FindMTSPPathsService_get = function _get(target, property, receiver) { var base = FindMTSPPathsService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return FindMTSPPathsService_get(target, property, receiver || target); }

function FindMTSPPathsService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = FindMTSPPathsService_getPrototypeOf(object); if (object === null) break; } return object; }

function FindMTSPPathsService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FindMTSPPathsService_setPrototypeOf(subClass, superClass); }

function FindMTSPPathsService_setPrototypeOf(o, p) { FindMTSPPathsService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FindMTSPPathsService_setPrototypeOf(o, p); }

function FindMTSPPathsService_createSuper(Derived) { var hasNativeReflectConstruct = FindMTSPPathsService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FindMTSPPathsService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FindMTSPPathsService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FindMTSPPathsService_possibleConstructorReturn(this, result); }; }

function FindMTSPPathsService_possibleConstructorReturn(self, call) { if (call && (FindMTSPPathsService_typeof(call) === "object" || typeof call === "function")) { return call; } return FindMTSPPathsService_assertThisInitialized(self); }

function FindMTSPPathsService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FindMTSPPathsService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FindMTSPPathsService_getPrototypeOf(o) { FindMTSPPathsService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FindMTSPPathsService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.FindMTSPPathsService
 * @category  iServer NetworkAnalyst MTSPPath
 * @classdesc å¤æè¡ååææå¡ç±»
 *            å¤æè¡ååæä¹ç§°ä¸ºç©æµééï¼æ¯æå¨ç½ç»æ°æ®éä¸­ï¼ç»å® M ä¸ªééä¸­å¿ç¹å N ä¸ªééç®çå°ï¼Mï¼N ä¸ºå¤§äºé¶çæ´æ°ï¼ã
 *            æ¥æ¾ç»æµææçééè·¯å¾ï¼å¹¶ç»åºç¸åºçè¡èµ°è·¯çº¿ã
 *            ç©æµééåè½å°±æ¯è§£å³å¦ä½åçåéééæ¬¡åºåéè´§è·¯çº¿ï¼ä½¿ééæ»è±è´¹è¾¾å°æå°ææ¯ä¸ªééä¸­å¿çè±è´¹è¾¾å°æå°ã
 *            è¯¥ç±»è´è´£å°å®¢æ·ç«¯æå®çå¤æè¡ååæåæ°ä¼ éç»æå¡ç«¯ï¼å¹¶æ¥æ¶æå¡ç«¯è¿åçç»ææ°æ®ã
 *            å¤æè¡ååæç»æéè¿è¯¥ç±»æ¯æçäºä»¶ççå¬å½æ°åæ°è·å
 * @extends {SuperMap.NetworkAnalystServiceBase}
 * @example
 * var myFindMTSPPathsService = new SuperMap.FindMTSPPathsService(url, {
 *     eventListeners: {
 *         "processCompleted": findMTSPPathsCompleted,
 *		   "processFailed": findMTSPPathsError
 *		   }
 * });
 * @param {string} url - ç½ç»åææå¡å°åãè¯·æ±ç½ç»åææå¡ï¼URLåºä¸ºï¼
 *                       http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/ç½ç»åææå¡å}/rest/networkanalyst/{ç½ç»æ°æ®é@æ°æ®æº}ï¼
 *                       ä¾å¦:"http://localhost:8090/iserver/services/components-rest/rest/networkanalyst/RoadNet@Changchun"ã
 * @param {Object} options - äºæå¡æ¶æéå¯éåæ°ãå¦ï¼
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var FindMTSPPathsService = /*#__PURE__*/function (_NetworkAnalystServic) {
  FindMTSPPathsService_inherits(FindMTSPPathsService, _NetworkAnalystServic);

  var _super = FindMTSPPathsService_createSuper(FindMTSPPathsService);

  function FindMTSPPathsService(url, options) {
    var _this;

    FindMTSPPathsService_classCallCheck(this, FindMTSPPathsService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.FindMTSPPathsService";
    return _this;
  }
  /**
   * @function SuperMap.FindMTSPPathsService.prototype.destroy
   * @override
   */


  FindMTSPPathsService_createClass(FindMTSPPathsService, [{
    key: "destroy",
    value: function destroy() {
      FindMTSPPathsService_get(FindMTSPPathsService_getPrototypeOf(FindMTSPPathsService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.FindMTSPPathsService..prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.FindMTSPPathsParameters} params - å¤æè¡ååææå¡åæ°ç±»
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof FindMTSPPathsParameters)) {
        return;
      }

      var me = this,
          jsonObject,
          //end = me.url.substr(me.url.length - 1, 1),
      centers = me.getJson(params.isAnalyzeById, params.centers),
          nodes = me.getJson(params.isAnalyzeById, params.nodes);
      me.url = Util.urlPathAppend(me.url, 'mtsppath');
      jsonObject = {
        centers: centers,
        nodes: nodes,
        parameter: Util.toJSON(params.parameter),
        hasLeastTotalCost: params.hasLeastTotalCost
      };
      me.request({
        method: "GET",
        params: jsonObject,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.FindMTSPPathsService.prototype.getJson
     * @description å°å¯¹è±¡è½¬åä¸ºJSONå­ç¬¦ä¸²ã
     * @param {boolean} isAnalyzeById - æ¯å¦éè¿idåæ
     * @param {Array} params - éè¦è½¬æ¢çæ°å­
     * @returns {Object} è½¬ååçJSONå­ç¬¦ä¸²ã
     */

  }, {
    key: "getJson",
    value: function getJson(isAnalyzeById, params) {
      var jsonString = "[",
          len = params ? params.length : 0;

      if (isAnalyzeById === false) {
        for (var i = 0; i < len; i++) {
          if (i > 0) {
            jsonString += ",";
          }

          jsonString += '{"x":' + params[i].x + ',"y":' + params[i].y + '}';
        }
      } else if (isAnalyzeById === true) {
        for (var _i = 0; _i < len; _i++) {
          if (_i > 0) {
            jsonString += ",";
          }

          jsonString += params[_i];
        }
      }

      jsonString += ']';
      return jsonString;
    }
    /**
     * @function SuperMap.FindMTSPPathsService.prototype.toGeoJSONResult
     * @description å°å«æ geometry çæ°æ®è½¬æ¢ä¸º GeoJSON æ ¼å¼ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     */

  }, {
    key: "toGeoJSONResult",
    value: function toGeoJSONResult(result) {
      if (!result || !result.pathList) {
        return null;
      }

      var geoJSONFormat = new GeoJSON();
      result.pathList.map(function (path) {
        if (path.route) {
          path.route = geoJSONFormat.toGeoJSON(path.route);
        }

        if (path.pathGuideItems) {
          path.pathGuideItems = geoJSONFormat.toGeoJSON(path.pathGuideItems);
        }

        if (path.edgeFeatures) {
          path.edgeFeatures = geoJSONFormat.toGeoJSON(path.edgeFeatures);
        }

        if (path.nodeFeatures) {
          path.nodeFeatures = geoJSONFormat.toGeoJSON(path.nodeFeatures);
        }

        return path;
      });
      return result;
    }
  }]);

  return FindMTSPPathsService;
}(NetworkAnalystServiceBase);
SuperMap.FindMTSPPathsService = FindMTSPPathsService;
// CONCATENATED MODULE: ./src/common/iServer/FindPathParameters.js
function FindPathParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FindPathParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FindPathParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) FindPathParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) FindPathParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.FindPathParameters
 * @category  iServer NetworkAnalyst Path 
 * @classdesc æä½³è·¯å¾åæåæ°ç±»ãæä½³è·¯å¾æ¯å¨ç½ç»æ°æ®éä¸­æå®ä¸äºç»ç¹ï¼æç§é¡ºåºè®¿é®ç»ç¹ä»èæ±è§£èµ·æ­¢ç¹ä¹é´é»ææå°çè·¯å¾ã
 * ä¾å¦å¦æè¦é¡ºåºè®¿é® 1ã2ã3ã4 åä¸ªç»ç¹ï¼åéè¦åå«æ¾å°1ã2ç»ç¹é´çæä½³è·¯å¾ R1â2ï¼2ã3 é´çæä½³è·¯å¾ R2â3 å 3ã4 ç»ç¹é´çæä½³è·¯å¾ R3â4ï¼
 * é¡ºåºè®¿é® 1ã2ã3ã4 åä¸ªç»ç¹çæä½³è·¯å¾å°±æ¯ R = R1â2 + R2â3 + R3â4ã
 * é»æå°±æ¯æä»ä¸ç¹å°å¦ä¸ç¹çèè´¹ï¼å¨å®éåºç¨ä¸­æä»¬å¯ä»¥å°è·ç¦»ãæ¶é´ãè±è´¹ç­ä½ä¸ºé»ææ¡ä»¶ã
 * é»ææå°ä¹å°±å¯ä»¥çè§£ä¸ºä»ä¸ç¹å°å¦ä¸ç¹è·ç¦»æç­ãæ¶é´æå°ãè±è´¹æä½ç­ãå½ä¸¤ç¹é´è·ç¦»æç­æ¶ä¸ºæç­è·¯å¾ï¼å®æ¯æä½³è·¯å¾é®é¢çä¸ä¸ªç¹ä¾ã
 * é»æå¼éè¿ SuperMap.TransportationAnalystParameter.weightFieldName è®¾ç½®ã
 * è®¡ç®æä½³è·¯å¾é¤äºåé»æå½±åå¤ï¼è¿åè½¬åå­æ®µçå½±åãè½¬åå¼éè¿ {@link SuperMap.TransportationAnalystParameter.turnWeightField} è®¾ç½®ã
 *
 * @param {Object} options - åæ°ã 
 * @param {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point|number>} options.nodes - æä½³è·¯å¾åæç»è¿çç»ç¹æè®¾æ½ç¹æ°ç»ãè¯¥å­æ®µè³å°åå«ä¸¤ä¸ªç¹ã
 * @param {boolean} [options.isAnalyzeById=false] - æ¯å¦éè¿èç¹ ID æå®è·¯å¾åæçç»ç¹ã 
 * @param {boolean} [options.hasLeastEdgeCount=false] - æ¯å¦æç§å¼§æ®µæ°æå°çè¿è¡æä½³è·¯å¾åæã 
 * @param {SuperMap.TransportationAnalystParameter} [options.parameter] - äº¤éç½ç»åæéç¨åæ°ã
 */

var FindPathParameters = /*#__PURE__*/function () {
  function FindPathParameters(options) {
    FindPathParameters_classCallCheck(this, FindPathParameters);

    /**
     * @member {boolean} [SuperMap.FindPathParameters.prototype.isAnalyzeById=false]
     * @description æ¯å¦éè¿èç¹ ID æå®è·¯å¾åæçç»ç¹ã
     *              æå®è·¯å¾åæç»è¿çç»ç¹æè®¾æ½ç¹æä¸¤ç§æ¹å¼ï¼è¾å¥ç»ç¹ ID å·æç´æ¥è¾å¥ç¹åæ ã
     *              å½è¯¥å­æ®µä¸º true æ¶ï¼è¡¨ç¤ºéè¿ç»ç¹ ID æå®éç»ç¹ï¼å³ SuperMap.FindPathParameters.nodes = [ID1,ID2,...]ï¼
     *              åä¹è¡¨ç¤ºéè¿ç»ç¹åæ æå®éç»ç¹ï¼å³ SuperMap.FindPathParameters.nodes = [{x1,y1},{x2,y2},...] ã
     */
    this.isAnalyzeById = false;
    /**
     * @member {boolean} [SuperMap.FindPathParameters.prototype.hasLeastEdgeCount=false]
     * @description æ¯å¦æç§å¼§æ®µæ°æå°çè¿è¡æä½³è·¯å¾åæã
     *              true è¡¨ç¤ºæç§å¼§æ®µæ°æå°è¿è¡åæï¼è¿åå¼§æ®µæ°æå°çè·¯å¾ä¸­ä¸ä¸ªé»ææå°çæä½³è·¯å¾ï¼
     *              false è¡¨ç¤ºç´æ¥è¿åé»ææå°çè·¯å¾ï¼èä¸èèå¼§æ®µçå¤å°ã
     */

    this.hasLeastEdgeCount = null;
    /**
     * @member {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point|number>} SuperMap.FindPathParameters.prototype.nodes
     * @description æä½³è·¯å¾åæç»è¿çç»ç¹æè®¾æ½ç¹æ°ç»ï¼å¿è®¾å­æ®µãè¯¥å­æ®µè³å°åå«ä¸¤ä¸ªç¹ã
     *              å½ SuperMap.FindPathParameters.isAnalyzeById = false æ¶ï¼nodes åºä¸ºç¹çåæ æ°ç»ï¼
     *              å½ SuperMap.FindPathParameters.isAnalyzeById = true æ¶ï¼nodes åºä¸ºç¹ç ID æ°ç»ã
     */

    this.nodes = null;
    /**
     * @member {SuperMap.TransportationAnalystParameter} SuperMap.FindPathParameters.prototype.parameter
     * @description äº¤éç½ç»åæéç¨åæ°ã
     */

    this.parameter = new TransportationAnalystParameter();
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.FindPathParameters";
  }
  /**
   * @function SuperMap.FindPathParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  FindPathParameters_createClass(FindPathParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.isAnalyzeById = null;
      me.hasLeastEdgeCount = null;
      me.nodes = null;

      if (me.parameter) {
        me.parameter.destroy();
        me.parameter = null;
      }
    }
  }]);

  return FindPathParameters;
}();
SuperMap.FindPathParameters = FindPathParameters;
// CONCATENATED MODULE: ./src/common/iServer/FindPathService.js
function FindPathService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FindPathService_typeof = function _typeof(obj) { return typeof obj; }; } else { FindPathService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FindPathService_typeof(obj); }

function FindPathService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FindPathService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FindPathService_createClass(Constructor, protoProps, staticProps) { if (protoProps) FindPathService_defineProperties(Constructor.prototype, protoProps); if (staticProps) FindPathService_defineProperties(Constructor, staticProps); return Constructor; }

function FindPathService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { FindPathService_get = Reflect.get; } else { FindPathService_get = function _get(target, property, receiver) { var base = FindPathService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return FindPathService_get(target, property, receiver || target); }

function FindPathService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = FindPathService_getPrototypeOf(object); if (object === null) break; } return object; }

function FindPathService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FindPathService_setPrototypeOf(subClass, superClass); }

function FindPathService_setPrototypeOf(o, p) { FindPathService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FindPathService_setPrototypeOf(o, p); }

function FindPathService_createSuper(Derived) { var hasNativeReflectConstruct = FindPathService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FindPathService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FindPathService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FindPathService_possibleConstructorReturn(this, result); }; }

function FindPathService_possibleConstructorReturn(self, call) { if (call && (FindPathService_typeof(call) === "object" || typeof call === "function")) { return call; } return FindPathService_assertThisInitialized(self); }

function FindPathService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FindPathService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FindPathService_getPrototypeOf(o) { FindPathService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FindPathService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.FindPathService
 * @category iServer NetworkAnalyst Path
 * @classdesc æä½³è·¯å¾åææå¡ç±»ã
 *            æä½³è·¯å¾æ¯å¨ç½ç»æ°æ®éä¸­æå®ä¸äºèç¹ï¼æç§èç¹çéæ©é¡ºåºï¼
 *            é¡ºåºè®¿é®è¿äºèç¹ä»èæ±è§£èµ·æ­¢ç¹ä¹é´é»ææå°çè·¯ç»ã
 *            è¯¥ç±»è´è´£å°å®¢æ·ç«¯æå®çæä½³è·¯å¾åæåæ°ä¼ éç»æå¡ç«¯ï¼å¹¶æ¥æ¶æå¡ç«¯è¿åçç»ææ°æ®ã
 *            æä½³è·¯å¾åæç»æéè¿è¯¥ç±»æ¯æçäºä»¶ççå¬å½æ°åæ°è·å
 * @extends {SuperMap.NetworkAnalystServiceBase}
 * @example
 * var myFindPathService = new SuperMap.FindPathService(url, {
 *     eventListeners: {
 *	       "processCompleted": findPathCompleted,
 *		   "processFailed": findPathError
 *		   }
 * });
 * @param {string} url - ç½ç»åææå¡å°åãè¯·æ±ç½ç»åææå¡ï¼URLåºä¸ºï¼
 *                       http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{ç½ç»åææå¡å}/rest/networkanalyst/{ç½ç»æ°æ®é@æ°æ®æº}ï¼
 *                       ä¾å¦:"http://localhost:8090/iserver/services/components-rest/rest/networkanalyst/RoadNet@Changchun"ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var FindPathService = /*#__PURE__*/function (_NetworkAnalystServic) {
  FindPathService_inherits(FindPathService, _NetworkAnalystServic);

  var _super = FindPathService_createSuper(FindPathService);

  function FindPathService(url, options) {
    var _this;

    FindPathService_classCallCheck(this, FindPathService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.FindPathService";
    return _this;
  }
  /**
   * @function SuperMap.FindPathService.prototype.destroy
   * @override
   */


  FindPathService_createClass(FindPathService, [{
    key: "destroy",
    value: function destroy() {
      FindPathService_get(FindPathService_getPrototypeOf(FindPathService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.FindPathService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.FindPathParameters} params - æä½³è·¯å¾åææå¡åæ°ç±»
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof FindPathParameters)) {
        return;
      }

      var me = this,
          jsonObject;
      me.url = Util.urlPathAppend(me.url, 'path');
      jsonObject = {
        hasLeastEdgeCount: params.hasLeastEdgeCount,
        parameter: Util.toJSON(params.parameter),
        nodes: me.getJson(params.isAnalyzeById, params.nodes)
      };
      me.request({
        method: "GET",
        params: jsonObject,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.FindPathService.prototype.getJson
     * @description å°å¯¹è±¡è½¬åä¸ºJSONå­ç¬¦ä¸²ã
     * @param {boolean} isAnalyzeById - æ¯å¦éè¿idåæ
     * @param {Array} params - éè¦è½¬æ¢çæ°å­
     * @returns {Object} è½¬ååçJSONå­ç¬¦ä¸²ã
     */

  }, {
    key: "getJson",
    value: function getJson(isAnalyzeById, params) {
      var jsonString = "[",
          len = params ? params.length : 0;

      if (isAnalyzeById === false) {
        for (var i = 0; i < len; i++) {
          if (i > 0) {
            jsonString += ",";
          }

          jsonString += '{"x":' + params[i].x + ',"y":' + params[i].y + '}';
        }
      } else if (isAnalyzeById === true) {
        for (var _i = 0; _i < len; _i++) {
          if (_i > 0) {
            jsonString += ",";
          }

          jsonString += params[_i];
        }
      }

      jsonString += ']';
      return jsonString;
    }
    /**
     * @function SuperMap.FindMTSPPathsService.prototype.toGeoJSONResult
     * @description å°å«æ geometry çæ°æ®è½¬æ¢ä¸º GeoJSON æ ¼å¼ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     */

  }, {
    key: "toGeoJSONResult",
    value: function toGeoJSONResult(result) {
      if (!result || !result.pathList || result.pathList.length < 1) {
        return null;
      }

      var geoJSONFormat = new GeoJSON();
      result.pathList.forEach(function (path) {
        if (path.route) {
          path.route = geoJSONFormat.toGeoJSON(path.route);
        }

        if (path.pathGuideItems) {
          path.pathGuideItems = geoJSONFormat.toGeoJSON(path.pathGuideItems);
        }

        if (path.edgeFeatures) {
          path.edgeFeatures = geoJSONFormat.toGeoJSON(path.edgeFeatures);
        }

        if (path.nodeFeatures) {
          path.nodeFeatures = geoJSONFormat.toGeoJSON(path.nodeFeatures);
        }
      });
      return result;
    }
  }]);

  return FindPathService;
}(NetworkAnalystServiceBase);
SuperMap.FindPathService = FindPathService;
// CONCATENATED MODULE: ./src/common/iServer/FindServiceAreasParameters.js
function FindServiceAreasParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FindServiceAreasParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FindServiceAreasParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) FindServiceAreasParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) FindServiceAreasParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.FindServiceAreasParameters
 * @category iServer NetworkAnalyst ServiceArea
 * @classdesc æå¡åºåæåæ°ç±»ã
 *            æå¡åºåææ¯ä»¥æå®æå¡ç«ç¹ä¸ºä¸­å¿ï¼å¨ä¸å®æå¡èå´åæ¥æ¾ç½ç»ä¸æå¡ç«ç¹è½å¤æä¾æå¡çåºåèå´ã
 *            ä¾å¦ï¼è®¡ç®æå¿«é¤åºè½å¤å¨30åéåéè¾¾å¿«é¤çåºåã
 * @param {Object} options - åæ°ã 
 * @param {Array.<number>} options.weights - æ¯ä¸ªæå¡ç«ç¹æä¾æå¡çé»ååå¾ï¼è¶è¿è¿ä¸ªé»ååå¾çåºåä¸äºèèï¼å¶åä½ä¸é»åå­æ®µä¸è´ã 
 * @param {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point|number>} options.centers - æå¡ç«ç¹æ°ç»ã 
 * @param {boolean} [options.isAnalyzeById=false] - æ¯å¦éè¿èç¹ ID æå®è·¯å¾åæçç»ç¹ã 
 * @param {boolean} [options.isCenterMutuallyExclusive=false] - æ¯å¦ä¸­å¿ç¹äºæ¥ã 
 * @param {boolean} [options.isFromCenter=false] - æ¯å¦ä»ä¸­å¿ç¹å¼å§åæã 
 * @param {SuperMap.TransportationAnalystParameter} [options.parameter] - äº¤éç½ç»åæéç¨åæ°ã
 */

var FindServiceAreasParameters = /*#__PURE__*/function () {
  function FindServiceAreasParameters(options) {
    FindServiceAreasParameters_classCallCheck(this, FindServiceAreasParameters);

    /**
     * @member {boolean} [SuperMap.FindServiceAreasParameters.prototype.isAnalyzeById=false]
     * @description æ¯å¦éè¿èç¹ ID æå®è·¯å¾åæçç»ç¹ã
     *              æå®è·¯å¾åæç»è¿çç»ç¹æè®¾æ½ç¹æä¸¤ç§æ¹å¼ï¼è¾å¥ç»ç¹ ID å·æç´æ¥è¾å¥ç¹åæ ã
     *              å½è¯¥å­æ®µä¸º true æ¶ï¼è¡¨ç¤ºéè¿ç»ç¹ ID æå®éç»ç¹ï¼å³ SuperMap.FindServiceAreasParameters.centers = [ID1,ID2,...]ï¼
     *              åä¹è¡¨ç¤ºéè¿ç»ç¹åæ æå®éç»ç¹ï¼å³ SuperMap.FindServiceAreasParameters.centers = [{x1,y1},{x2,y2},...]ã
     */
    this.isAnalyzeById = false;
    /**
     * @member {boolean} [SuperMap.FindServiceAreasParameters.prototype.isCenterMutuallyExclusive=false]
     * @description æ¯å¦ä¸­å¿ç¹äºæ¥ï¼å³æç§ä¸­å¿ç¹çè·ç¦»è¿è¡å¤æ­æ¯å¦è¦è¿è¡äºæ¥å¤çã
     *              è¥åæåºçæå¡åºæéå çé¨åï¼åéè¿è®¾ç½®è¯¥åæ°è¿è¡äºæ¥å¤çã
     */

    this.isCenterMutuallyExclusive = false;
    /**
     * @member {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point|number>} SuperMap.FindServiceAreasParameters.prototype.centers
     * @description æå¡ç«ç¹æ°ç»ã
     *              å½è¯¥ç±»ç iSAnalyzeById = true æ¶ï¼éè¿ç»ç¹ ID å·æå®æå¡ç«ç¹ï¼å½ iSAnalyzeById = false æ¶ï¼éè¿ç¹åæ æå®æå¡ç«ç¹ã
     */

    this.centers = null;
    /**
     * @member {boolean} [SuperMap.FindServiceAreasParameters.prototype.isFromCenter=false]
     * @description æ¯å¦ä»ä¸­å¿ç¹å¼å§åæã
     *              ä»ä¸­å¿ç¹å¼å§åæåä¸ä»ä¸­å¿ç¹å¼å§åæï¼ä½ç°äºæå¡ä¸­å¿åéè¦è¯¥æå¡çéæ±å°çå³ç³»æ¨¡å¼ã
     *              ä»ä¸­å¿ç¹å¼å§åæï¼æ¯ä¸ä¸ªæå¡ä¸­å¿åæå¡éæ±å°æä¾æå¡ï¼
     *              èä¸ä»ä¸­å¿ç¹å¼å§åæï¼æ¯ä¸ä¸ªæå¡éæ±å°ä¸»å¨å°æå¡ä¸­å¿è·å¾æå¡ã
     */

    this.isFromCenter = false;
    /**
     * APIProperty: weights
     * @member {Array.<number>} SuperMap.FindServiceAreasParameters.prototype.weights
     * @description æ¯ä¸ªæå¡ç«ç¹æä¾æå¡çé»ååå¾ï¼å³è¶è¿è¿ä¸ªé»ååå¾çåºåä¸äºèèï¼å¶åä½ä¸é»åå­æ®µä¸è´ã
     *              è¯¥å­æ®µä¸ºä¸ä¸ªæ°ç»ï¼æ°ç»é¿åº¦è·æå¡ä¸­å¿ä¸ªæ°ä¸è´ï¼æç§ç´¢å¼é¡ºåºä¸ç«ç¹ä¸ä¸å¯¹åºï¼æ¯ä¸ªåç´ è¡¨ç¤ºäºå¨å¯¹æ¯ä¸ªæå¡ä¸­å¿è¿è¡æå¡åºåææ¶ï¼æç¨çæå¡åå¾ã
     */

    this.weights = null;
    /**
     * @member {SuperMap.TransportationAnalystParameter} SuperMap.FindServiceAreasParameters.prototype.parameter
     * @description äº¤éç½ç»åæéç¨åæ°ã
     */

    this.parameter = new TransportationAnalystParameter();
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.FindServiceAreasParameters";
  }
  /**
   * @function SuperMap.FindServiceAreasParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  FindServiceAreasParameters_createClass(FindServiceAreasParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.isAnalyzeById = null;
      me.isCenterMutuallyExclusive = null;
      me.centers = null;
      me.isFromCenter = null;
      me.weights = null;

      if (me.parameter) {
        me.parameter.destroy();
        me.parameter = null;
      }
    }
  }]);

  return FindServiceAreasParameters;
}();
SuperMap.FindServiceAreasParameters = FindServiceAreasParameters;
// CONCATENATED MODULE: ./src/common/iServer/FindServiceAreasService.js
function FindServiceAreasService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FindServiceAreasService_typeof = function _typeof(obj) { return typeof obj; }; } else { FindServiceAreasService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FindServiceAreasService_typeof(obj); }

function FindServiceAreasService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FindServiceAreasService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FindServiceAreasService_createClass(Constructor, protoProps, staticProps) { if (protoProps) FindServiceAreasService_defineProperties(Constructor.prototype, protoProps); if (staticProps) FindServiceAreasService_defineProperties(Constructor, staticProps); return Constructor; }

function FindServiceAreasService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { FindServiceAreasService_get = Reflect.get; } else { FindServiceAreasService_get = function _get(target, property, receiver) { var base = FindServiceAreasService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return FindServiceAreasService_get(target, property, receiver || target); }

function FindServiceAreasService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = FindServiceAreasService_getPrototypeOf(object); if (object === null) break; } return object; }

function FindServiceAreasService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FindServiceAreasService_setPrototypeOf(subClass, superClass); }

function FindServiceAreasService_setPrototypeOf(o, p) { FindServiceAreasService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FindServiceAreasService_setPrototypeOf(o, p); }

function FindServiceAreasService_createSuper(Derived) { var hasNativeReflectConstruct = FindServiceAreasService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FindServiceAreasService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FindServiceAreasService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FindServiceAreasService_possibleConstructorReturn(this, result); }; }

function FindServiceAreasService_possibleConstructorReturn(self, call) { if (call && (FindServiceAreasService_typeof(call) === "object" || typeof call === "function")) { return call; } return FindServiceAreasService_assertThisInitialized(self); }

function FindServiceAreasService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FindServiceAreasService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FindServiceAreasService_getPrototypeOf(o) { FindServiceAreasService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FindServiceAreasService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.FindServiceAreasService
 * @category iServer NetworkAnalyst ServiceArea
 * @classdesc æå¡åºåææå¡ç±»ã
 *            æå¡åºåææ¯ä»¥æå®æå¡ç«ç¹ä¸ºä¸­å¿ï¼
 *            å¨ä¸å®æå¡èå´åæ¥æ¾ç½ç»ä¸æå¡ç«ç¹è½å¤æä¾æå¡çåºåèå´ã
 *            è¯¥ç±»è´è´£å°å®¢æ·ç«¯æå®çæå¡åºåæåæ°ä¼ éç»æå¡ç«¯ï¼å¹¶æ¥æ¶æå¡ç«¯è¿åçç»ææ°æ®ã
 *            æå¡åºåæç»æéè¿è¯¥ç±»æ¯æçäºä»¶ççå¬å½æ°åæ°è·å
 * @extends {SuperMap.NetworkAnalystServiceBase}
 * @example
 * var myFindServiceAreasService = new SuperMap.FindServiceAreasService(url, {
 *          eventListeners: {
 *              "processCompleted": findServiceAreasCompleted,
 *              "processFailed": findServiceAreasError
 *          }
 * });
 * @param {string} url - ç½ç»åææå¡å°åãè¯·æ±ç½ç»åææå¡ï¼URLåºä¸ºï¼
 *                       http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{ç½ç»åææå¡å}/rest/networkanalyst/{ç½ç»æ°æ®é@æ°æ®æº}ï¼
 *                       ä¾å¦:"http://localhost:8090/iserver/services/components-rest/rest/networkanalyst/RoadNet@Changchun"ã
 * @param {Object} options - äºæå¡æ¶æéå¯éåæ°ãå¦ï¼
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var FindServiceAreasService = /*#__PURE__*/function (_NetworkAnalystServic) {
  FindServiceAreasService_inherits(FindServiceAreasService, _NetworkAnalystServic);

  var _super = FindServiceAreasService_createSuper(FindServiceAreasService);

  function FindServiceAreasService(url, options) {
    var _this;

    FindServiceAreasService_classCallCheck(this, FindServiceAreasService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.FindServiceAreasService";
    return _this;
  }
  /**
   * @function SuperMap.FindServiceAreasService.prototype.destroy
   * @override
   */


  FindServiceAreasService_createClass(FindServiceAreasService, [{
    key: "destroy",
    value: function destroy() {
      FindServiceAreasService_get(FindServiceAreasService_getPrototypeOf(FindServiceAreasService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.FindServiceAreasService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.FindServiceAreasParameters} params - æå¡åºåææå¡åæ°ç±»
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof FindServiceAreasParameters)) {
        return;
      }

      var me = this,
          jsonObject;
      me.url = Util.urlPathAppend(me.url, 'servicearea');
      jsonObject = {
        isFromCenter: params.isFromCenter,
        isCenterMutuallyExclusive: params.isCenterMutuallyExclusive,
        parameter: Util.toJSON(params.parameter),
        centers: me.getJson(params.isAnalyzeById, params.centers),
        weights: me.getJson(true, params.weights)
      };
      me.request({
        method: "GET",
        params: jsonObject,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.FindServiceAreasService.prototype.getJson
     * @description å°å¯¹è±¡è½¬åä¸ºJSONå­ç¬¦ä¸²ã
     * @param {boolean} isAnalyzeById - æ¯å¦éè¿idåæ
     * @param {Array} params - éè¦è½¬æ¢çæ°å­
     * @returns {Object} è½¬ååçJSONå­ç¬¦ä¸²ã
     */

  }, {
    key: "getJson",
    value: function getJson(isAnalyzeById, params) {
      var jsonString = "[",
          len = params ? params.length : 0;

      if (isAnalyzeById === false) {
        for (var i = 0; i < len; i++) {
          if (i > 0) {
            jsonString += ",";
          }

          jsonString += '{"x":' + params[i].x + ',"y":' + params[i].y + '}';
        }
      } else if (isAnalyzeById === true) {
        for (var _i = 0; _i < len; _i++) {
          if (_i > 0) {
            jsonString += ",";
          }

          jsonString += params[_i];
        }
      }

      jsonString += ']';
      return jsonString;
    }
    /**
     * @function SuperMap.FindServiceAreasService.prototype.toGeoJSONResult
     * @description å°å«æ geometry çæ°æ®è½¬æ¢ä¸º GeoJSON æ ¼å¼ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ãã
     */

  }, {
    key: "toGeoJSONResult",
    value: function toGeoJSONResult(result) {
      if (!result || !result.serviceAreaList) {
        return result;
      }

      var geoJSONFormat = new GeoJSON();
      result.serviceAreaList.map(function (serviceArea) {
        if (serviceArea.serviceRegion) {
          serviceArea.serviceRegion = geoJSONFormat.toGeoJSON(serviceArea.serviceRegion);
        }

        if (serviceArea.edgeFeatures) {
          serviceArea.edgeFeatures = geoJSONFormat.toGeoJSON(serviceArea.edgeFeatures);
        }

        if (serviceArea.nodeFeatures) {
          serviceArea.nodeFeatures = geoJSONFormat.toGeoJSON(serviceArea.nodeFeatures);
        }

        if (serviceArea.routes) {
          serviceArea.routes = geoJSONFormat.toGeoJSON(serviceArea.routes);
        }

        return serviceArea;
      });
      return result;
    }
  }]);

  return FindServiceAreasService;
}(NetworkAnalystServiceBase);
SuperMap.FindServiceAreasService = FindServiceAreasService;
// CONCATENATED MODULE: ./src/common/iServer/FindTSPPathsParameters.js
function FindTSPPathsParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FindTSPPathsParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FindTSPPathsParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) FindTSPPathsParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) FindTSPPathsParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.FindTSPPathsParameters
 * @category iServer NetworkAnalyst TSPPath
 * @classdesc æè¡ååæåæ°ç±»ã
 * æè¡ååææ¯è·¯å¾åæçä¸ç§ï¼å®ä»èµ·ç¹å¼å§ï¼é»è®¤ä¸ºç¨æ·æå®çç¬¬ä¸ç¹ï¼æ¥æ¾è½å¤éåææéç»ç¹ä¸è±è´¹æå°çè·¯å¾ã
 * æè¡ååæä¹å¯ä»¥æå®å°è¾¾çç»ç¹ï¼è¿æ¶æ¥æ¾ä»èµ·ç¹è½å¤éåææéç»ç¹æåå°è¾¾ç»ç¹ï¼ä¸è±è´¹æå°çè·¯å¾ã
 * æè¡ååæåæä½³è·¯å¾åæé½æ¯å¨ç½ç»ä¸­å¯»æ¾éåææç«ç¹çæç»æµçè·¯å¾ï¼åºå«æ¯å¨éåç½ç»ææç«ç¹çè¿ç¨ä¸­å¯¹ç»ç¹è®¿é®é¡ºåºä¸å
 * æä½³è·¯å¾åæå¿é¡»æç§æå®é¡ºåºå¯¹ç«ç¹è¿è¡è®¿é®ï¼èæè¡ååææ¯æ åºçè·¯å¾åæã
 * @param {Object} options - åæ°ã 
 * @param {boolean} [options.endNodeAssigned=false] - æ¯å¦æå®ç»æ­¢ç¹ï¼å°æå®çéç»ç¹çæåä¸ä¸ªç¹ä½ä¸ºç»æ­¢ç¹ãtrue è¡¨ç¤ºæå®ç»æ­¢ç¹ï¼åæè¡åå¿é¡»æåä¸ä¸ªè®¿é®ç»æ­¢ç¹ã 
 * @param {boolean} [options.isAnalyzeById=false] - æ¯å¦éè¿èç¹ ID å·æ¥æå®ééä¸­å¿ç¹åééç®çç¹ã 
 * @param {Array.<(SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point|number)>} options.nodes - ééç®æ éåã 
 * @param {SuperMap.TransportationAnalystParameter} [options.parameter] - äº¤éç½ç»åæéç¨åæ°ã 
 */

var FindTSPPathsParameters = /*#__PURE__*/function () {
  function FindTSPPathsParameters(options) {
    FindTSPPathsParameters_classCallCheck(this, FindTSPPathsParameters);

    /**
     * @member {boolean} [SuperMap.FindTSPPathsParameters.prototype.endNodeAssigned=false]
     * @description æ¯å¦æå®ç»æ­¢ç¹ï¼å°æå®çéç»ç¹çæåä¸ä¸ªç¹ä½ä¸ºç»æ­¢ç¹ã
     *              true è¡¨ç¤ºæå®ç»æ­¢ç¹ï¼åæè¡åå¿é¡»æåä¸ä¸ªè®¿é®ç»æ­¢ç¹ã
     */
    this.endNodeAssigned = false;
    /**
     * @member {boolean} [SuperMap.FindTSPPathsParameters.prototype.isAnalyzeById=false]
     * @description æ¯å¦éè¿èç¹ ID å·æ¥æå®éç»ç¹ã
     */

    this.isAnalyzeById = false;
    /**
     * @member {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point|number>} SuperMap.FindTSPPathsParameters.prototype.nodes
     * @description æè¡ååæéç»ç¹æ°ç»ã
     *              å½ SuperMap.FindTSPPathsParameters.isAnalyzeById = false æ¶ï¼nodes åºä¸ºç¹çåæ æ°ç»ï¼
     *              å½ SuperMap.FindTSPPathsParameters.isAnalyzeById = true æ¶ï¼nodes åºä¸ºç¹ç ID æ°ç»ã
     */

    this.nodes = null;
    /**
     * @member {SuperMap.TransportationAnalystParameter} [SuperMap.FindTSPPathsParameters.prototype.parameter]
     * @description äº¤éç½ç»åæéç¨åæ°ãéè¿æ¬ç±»å¯ä»¥è®¾ç½®éç¢è¾¹ãéç¢ç¹ãæå¼å­æ®µä¿¡æ¯çåç§°æ è¯ãè½¬åæå¼å­æ®µç­ä¿¡æ¯ã
     *              SuperMap.TransportationAnalystParameter ç±»åï¼å®è½ç¶ä¸ºå¯éåæ°ï¼ä½æ¯å¦æä¸è®¾ç½®å¶ä¸­ç resultSetting
     *              å­æ®µï¼åè¿åç»æç©ºé´ä¿¡æ¯ç­é½ä¸ºç©ºã
     */

    this.parameter = new TransportationAnalystParameter();
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.FindTSPPathsParameters";
  }
  /**
   * @function SuperMap.FindTSPPathsParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  FindTSPPathsParameters_createClass(FindTSPPathsParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.endNodeAssigned = null;
      me.isAnalyzeById = null;
      me.nodes = null;

      if (me.parameter) {
        me.parameter.destroy();
        me.parameter = null;
      }
    }
  }]);

  return FindTSPPathsParameters;
}();
SuperMap.FindTSPPathsParameters = FindTSPPathsParameters;
// CONCATENATED MODULE: ./src/common/iServer/FindTSPPathsService.js
function FindTSPPathsService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FindTSPPathsService_typeof = function _typeof(obj) { return typeof obj; }; } else { FindTSPPathsService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FindTSPPathsService_typeof(obj); }

function FindTSPPathsService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FindTSPPathsService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FindTSPPathsService_createClass(Constructor, protoProps, staticProps) { if (protoProps) FindTSPPathsService_defineProperties(Constructor.prototype, protoProps); if (staticProps) FindTSPPathsService_defineProperties(Constructor, staticProps); return Constructor; }

function FindTSPPathsService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { FindTSPPathsService_get = Reflect.get; } else { FindTSPPathsService_get = function _get(target, property, receiver) { var base = FindTSPPathsService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return FindTSPPathsService_get(target, property, receiver || target); }

function FindTSPPathsService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = FindTSPPathsService_getPrototypeOf(object); if (object === null) break; } return object; }

function FindTSPPathsService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FindTSPPathsService_setPrototypeOf(subClass, superClass); }

function FindTSPPathsService_setPrototypeOf(o, p) { FindTSPPathsService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FindTSPPathsService_setPrototypeOf(o, p); }

function FindTSPPathsService_createSuper(Derived) { var hasNativeReflectConstruct = FindTSPPathsService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FindTSPPathsService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FindTSPPathsService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FindTSPPathsService_possibleConstructorReturn(this, result); }; }

function FindTSPPathsService_possibleConstructorReturn(self, call) { if (call && (FindTSPPathsService_typeof(call) === "object" || typeof call === "function")) { return call; } return FindTSPPathsService_assertThisInitialized(self); }

function FindTSPPathsService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FindTSPPathsService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FindTSPPathsService_getPrototypeOf(o) { FindTSPPathsService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FindTSPPathsService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.FindTSPPathsService
 * @category  iServer NetworkAnalyst TSPPath
 * @classdesc æè¡ååææå¡ç±»
 *            æè¡ååææ¯è·¯å¾åæçä¸ç§ï¼å®ä»èµ·ç¹å¼å§ï¼é»è®¤ä¸ºç¨æ·æå®çç¬¬ä¸ç¹ï¼æ¥æ¾è½å¤éåææéç»ç¹ä¸è±è´¹æå°çè·¯å¾ã
 *            æè¡ååæä¹å¯ä»¥æå®å°è¾¾çç»ç¹ï¼è¿æ¶æ¥æ¾ä»èµ·ç¹è½å¤éåææéç»ç¹æåå°è¾¾ç»ç¹ï¼ä¸è±è´¹æå°çè·¯å¾ã
 *            è¯¥ç±»è´è´£å°å®¢æ·ç«¯æå®çæè¡ååæåæ°ä¼ éç»æå¡ç«¯ï¼å¹¶æ¥æ¶æå¡ç«¯è¿åçç»ææ°æ®ã
 *            æè¡ååæç»æéè¿è¯¥ç±»æ¯æçäºä»¶ççå¬å½æ°åæ°è·å
 * @extends {SuperMap.NetworkAnalystServiceBase}
 * @example
 * (start code)
 * var myFindTSPPathsService = new SuperMap.FindTSPPathsService(url, {
 *     eventListeners: {
 *	      "processCompleted": findTSPPathsCompleted,
 *		  "processFailed": findTSPPathsError
 *		  }
 *  });
 * (end)
 * @param {string} url - ç½ç»åææå¡å°åãè¯·æ±ç½ç»åææå¡ï¼URLåºä¸ºï¼
 *                       http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{ç½ç»åææå¡å}/rest/networkanalyst/{ç½ç»æ°æ®é@æ°æ®æº}ï¼
 *                       ä¾å¦:"http://localhost:8090/iserver/services/components-rest/rest/networkanalyst/RoadNet@Changchun"ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var FindTSPPathsService = /*#__PURE__*/function (_NetworkAnalystServic) {
  FindTSPPathsService_inherits(FindTSPPathsService, _NetworkAnalystServic);

  var _super = FindTSPPathsService_createSuper(FindTSPPathsService);

  function FindTSPPathsService(url, options) {
    var _this;

    FindTSPPathsService_classCallCheck(this, FindTSPPathsService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.FindTSPPathsService";
    return _this;
  }
  /**
   * @function SuperMap.FindTSPPathsService.prototype.destroy
   * @override
   */


  FindTSPPathsService_createClass(FindTSPPathsService, [{
    key: "destroy",
    value: function destroy() {
      FindTSPPathsService_get(FindTSPPathsService_getPrototypeOf(FindTSPPathsService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.FindTSPPathsService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.FindTSPPathsParameters} params - æè¡ååææå¡åæ°ç±»ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof FindTSPPathsParameters)) {
        return;
      }

      var me = this,
          jsonObject;
      me.url = Util.urlPathAppend(me.url, 'tsppath');
      jsonObject = {
        parameter: SuperMap.Util.toJSON(params.parameter),
        endNodeAssigned: params.endNodeAssigned,
        nodes: me.getNodesJson(params)
      };
      me.request({
        method: "GET",
        params: jsonObject,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.FindTSPPathsService.prototype.getNodesJson
     * @description å°èç¹å¯¹è±¡è½¬åä¸ºJSONå­ç¬¦ä¸²ã
     * @param {SuperMap.FindTSPPathsParameters} params - æè¡ååææå¡åæ°ç±»ã
     * @returns {string} è½¬ååçJSONå­ç¬¦ä¸²ã
     */

  }, {
    key: "getNodesJson",
    value: function getNodesJson(params) {
      var jsonParameters = "",
          nodesString,
          i,
          len,
          nodes;

      if (params.isAnalyzeById === false) {
        for (nodesString = "[", i = 0, nodes = params.nodes, len = nodes.length; i < len; i++) {
          if (i > 0) {
            nodesString += ",";
          }

          nodesString += '{"x":' + nodes[i].x + ',"y":' + nodes[i].y + '}';
        }

        nodesString += ']';
        jsonParameters += nodesString;
      } else if (params.isAnalyzeById === true) {
        var nodeIDsString = "[",
            _nodes = params.nodes,
            _len = _nodes.length;

        for (var _i = 0; _i < _len; _i++) {
          if (_i > 0) {
            nodeIDsString += ",";
          }

          nodeIDsString += _nodes[_i];
        }

        nodeIDsString += ']';
        jsonParameters += nodeIDsString;
      }

      return jsonParameters;
    }
    /**
     * @function SuperMap.FindTSPPathsService.prototype.toGeoJSONResult
     * @description å°å«æ geometry çæ°æ®è½¬æ¢ä¸º GeoJSON æ ¼å¼ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     */

  }, {
    key: "toGeoJSONResult",
    value: function toGeoJSONResult(result) {
      if (!result || !result.tspPathList) {
        return null;
      }

      var geoJSONFormat = new GeoJSON();
      result.tspPathList.forEach(function (path) {
        if (path.route) {
          path.route = geoJSONFormat.toGeoJSON(path.route);
        }

        if (path.pathGuideItems) {
          path.pathGuideItems = geoJSONFormat.toGeoJSON(path.pathGuideItems);
        }

        if (path.edgeFeatures) {
          path.edgeFeatures = geoJSONFormat.toGeoJSON(path.edgeFeatures);
        }

        if (path.nodeFeatures) {
          path.nodeFeatures = geoJSONFormat.toGeoJSON(path.nodeFeatures);
        }
      });
      return result;
    }
  }]);

  return FindTSPPathsService;
}(NetworkAnalystServiceBase);
SuperMap.FindTSPPathsService = FindTSPPathsService;
// CONCATENATED MODULE: ./src/common/iServer/GenerateSpatialDataParameters.js
function GenerateSpatialDataParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GenerateSpatialDataParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GenerateSpatialDataParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) GenerateSpatialDataParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) GenerateSpatialDataParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.GenerateSpatialDataParameters
 * @category iServer SpatialAnalyst GenerateSpatialData
 * @classdesc å¨æåæ®µæä½åæ°ç±»ãéè¿è¯¥ç±»å¯ä»¥ä¸ºå¨æåæ®µæä¾åæ°ä¿¡æ¯ã
 * @param {Object} options - åæ°ã 
 * @param {string} options.routeTable - è·¯ç±æ°æ®éã 
 * @param {string} options.routeIDField - è·¯ç±æ°æ®éçæ è¯å­æ®µã 
 * @param {string} options.eventTable - ç¨äºçæç©ºé´æ°æ®çäºä»¶è¡¨åã 
 * @param {SuperMap.DataReturnOption} options.dataReturnOption - è®¾ç½®æ°æ®è¿åéé¡¹ã
 * @param {string} [options.attributeFilter] - å±æ§è¿æ»¤æ¡ä»¶ã 
 * @param {string} options.eventRouteIDField - ç¨äºçæç©ºé´æ°æ®çäºä»¶è¡¨çè·¯ç±æ è¯å­æ®µã 
 * @param {string} [options.measureField] - ç¨äºçæç©ºé´æ°æ®çäºä»¶è¡¨çå»åº¦å­æ®µï¼åªæå½äºä»¶ä¸ºç¹äºä»¶çæ¶åè¯¥å±æ§æææä¹ã
 * @param {string} [options.measureStartField] - ç¨äºçæç©ºé´æ°æ®çäºä»¶è¡¨çèµ·å§å»åº¦å­æ®µï¼åªæå½äºä»¶ä¸ºçº¿äºä»¶çæ¶åè¯¥å±æ§æææä¹ã 
 * @param {string} [options.measureEndField] - ç¨äºçæç©ºé´æ°æ®çäºä»¶è¡¨çç»æ­¢å»åº¦å­æ®µï¼åªæå½äºä»¶ä¸ºçº¿äºä»¶çæ¶åè¯¥å±æ§æææä¹ã 
 * @param {string} [options.measureOffsetField] - å»åº¦åç§»éå­æ®µã 
 * @param {string} [options.errorInfoField] - éè¯¯ä¿¡æ¯å­æ®µï¼ç´æ¥åå¥åäºä»¶è¡¨ï¼ç¨äºæè¿°äºä»¶æªè½çæå¯¹åºçç¹æçº¿æ¶çéè¯¯ä¿¡æ¯ã 
 * @param {Array.<string>} [options.retainedFields] - æ¬²ä¿çå°ç»æç©ºé´æ°æ®ä¸­çå­æ®µéåï¼ç³»ç»å­æ®µé¤å¤ï¼ã 
 */

var GenerateSpatialDataParameters = /*#__PURE__*/function () {
  function GenerateSpatialDataParameters(options) {
    GenerateSpatialDataParameters_classCallCheck(this, GenerateSpatialDataParameters);

    /**
     * @member {string} SuperMap.GenerateSpatialDataParameters.prototype.routeTable
     * @description è·¯ç±æ°æ®éã
     */
    this.routeTable = null;
    /**
     * @member {string} SuperMap.GenerateSpatialDataParameters.prototype.routeIDField
     * @description è·¯ç±æ°æ®éçæ è¯å­æ®µã
     */

    this.routeIDField = null;
    /**
     * @member {string} [SuperMap.GenerateSpatialDataParameters.prototype.attributeFilter]
     * @description å±æ§è¿æ»¤æ¡ä»¶ã
     * å½ {@link SuperMap.GenerateSpatialDataParameters.prototype.dataReturnOption.dataReturnMode}  ä¸º {@link DataReturnMode.DATASET_AND_RECORDSET} æ {@link DataReturnMode.RECORDSET_ONLY} æ¶ææã
     */

    this.attributeFilter = null;
    /**
     * @member {string} SuperMap.GenerateSpatialDataParameters.prototype.eventTable
     * @description ç¨äºçæç©ºé´æ°æ®çäºä»¶è¡¨åã
     */

    this.eventTable = null;
    /**
     * @member {string} SuperMap.GenerateSpatialDataParameters.prototype.eventRouteIDField
     * @description ç¨äºçæç©ºé´æ°æ®çäºä»¶è¡¨çè·¯ç±æ è¯å­æ®µã
     */

    this.eventRouteIDField = null;
    /**
     * @member {string} [SuperMap.GenerateSpatialDataParameters.prototype.measureField]
     * @description ç¨äºçæç©ºé´æ°æ®çäºä»¶è¡¨çå»åº¦å­æ®µï¼åªæå½äºä»¶ä¸ºç¹äºä»¶çæ¶åè¯¥å±æ§æææä¹
     */

    this.measureField = null;
    /**
     * @member {string} [SuperMap.GenerateSpatialDataParameters.prototype.measureStartField]
     * @description ç¨äºçæç©ºé´æ°æ®çäºä»¶è¡¨çèµ·å§å»åº¦å­æ®µï¼åªæå½äºä»¶ä¸ºçº¿äºä»¶çæ¶åè¯¥å±æ§æææä¹ã
     */

    this.measureStartField = null;
    /**
     * @member {string} [SuperMap.GenerateSpatialDataParameters.prototype.measureEndField]
     * @description ç¨äºçæç©ºé´æ°æ®çäºä»¶è¡¨çç»æ­¢å»åº¦å­æ®µï¼åªæå½äºä»¶ä¸ºçº¿äºä»¶çæ¶åè¯¥å±æ§æææä¹ã
     */

    this.measureEndField = null;
    /**
     * @member {string} [SuperMap.GenerateSpatialDataParameters.prototype.measureOffsetField]
     * @description å»åº¦åç§»éå­æ®µã
     */

    this.measureOffsetField = null;
    /**
     * @member {string} [SuperMap.GenerateSpatialDataParameters.prototype.errorInfoField]
     * @description éè¯¯ä¿¡æ¯å­æ®µï¼ç´æ¥åå¥åäºä»¶è¡¨ï¼ç¨äºæè¿°äºä»¶æªè½çæå¯¹åºçç¹æçº¿æ¶çéè¯¯ä¿¡æ¯ã
     */

    this.errorInfoField = null;
    /**
     * @member {Array.<string>} [SuperMap.GenerateSpatialDataParameters.prototype.retainedFields]
     * @description æ¬²ä¿çå°ç»æç©ºé´æ°æ®ä¸­çå­æ®µéåï¼ç³»ç»å­æ®µé¤å¤ï¼ã
     * çæç©ºé´æ°æ®æ¶ï¼æ è®ºæ¯å¦æå®ä¿çå­æ®µï¼è·¯ç± ID å­æ®µãå»åº¦åç§»éå­æ®µãå»åº¦å¼å­æ®µï¼ç¹äºä»¶ä¸ºå»åº¦å­æ®µï¼çº¿äºä»¶æ¯èµ·å§åç»æ­¢å»åº¦å­æ®µï¼é½ä¼ä¿çå°ç»æç©ºé´æ°æ®ä¸­ï¼
     * å¦ææ²¡ææå® retainedFields åæ°æè retainedFields åæ°æ°ç»é¿åº¦ä¸º 0ï¼åè¿åææç¨æ·å­æ®µã
     */

    this.retainedFields = null;
    /**
     * @member {SuperMap.DataReturnOption} SuperMap.GenerateSpatialDataParameters.prototype.dataReturnOption
     * @description è®¾ç½®æ°æ®è¿åçéé¡¹ã
     */

    this.dataReturnOption = null;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.GenerateSpatialDataParameters";
  }
  /**
   * @function SuperMap.GenerateSpatialDataParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  GenerateSpatialDataParameters_createClass(GenerateSpatialDataParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;

      if (me.routeTable) {
        me.routeTable = null;
      }

      me.routeIDField = null;
      me.attributeFilter = null;
      me.eventTable = null;
      me.eventRouteIDField = null;
      me.measureField = null;
      me.measureStartField = null;
      me.measureEndField = null;
      me.measureOffsetField = null;
      me.errorInfoField = null;

      if (me.dataReturnOption) {
        me.dataReturnOption.destroy();
        me.dataReturnOption = null;
      }
    }
  }]);

  return GenerateSpatialDataParameters;
}();
SuperMap.GenerateSpatialDataParameters = GenerateSpatialDataParameters;
// CONCATENATED MODULE: ./src/common/iServer/GenerateSpatialDataService.js
function GenerateSpatialDataService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GenerateSpatialDataService_typeof = function _typeof(obj) { return typeof obj; }; } else { GenerateSpatialDataService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GenerateSpatialDataService_typeof(obj); }

function GenerateSpatialDataService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GenerateSpatialDataService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GenerateSpatialDataService_createClass(Constructor, protoProps, staticProps) { if (protoProps) GenerateSpatialDataService_defineProperties(Constructor.prototype, protoProps); if (staticProps) GenerateSpatialDataService_defineProperties(Constructor, staticProps); return Constructor; }

function GenerateSpatialDataService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GenerateSpatialDataService_get = Reflect.get; } else { GenerateSpatialDataService_get = function _get(target, property, receiver) { var base = GenerateSpatialDataService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GenerateSpatialDataService_get(target, property, receiver || target); }

function GenerateSpatialDataService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GenerateSpatialDataService_getPrototypeOf(object); if (object === null) break; } return object; }

function GenerateSpatialDataService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GenerateSpatialDataService_setPrototypeOf(subClass, superClass); }

function GenerateSpatialDataService_setPrototypeOf(o, p) { GenerateSpatialDataService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GenerateSpatialDataService_setPrototypeOf(o, p); }

function GenerateSpatialDataService_createSuper(Derived) { var hasNativeReflectConstruct = GenerateSpatialDataService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GenerateSpatialDataService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GenerateSpatialDataService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GenerateSpatialDataService_possibleConstructorReturn(this, result); }; }

function GenerateSpatialDataService_possibleConstructorReturn(self, call) { if (call && (GenerateSpatialDataService_typeof(call) === "object" || typeof call === "function")) { return call; } return GenerateSpatialDataService_assertThisInitialized(self); }

function GenerateSpatialDataService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GenerateSpatialDataService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GenerateSpatialDataService_getPrototypeOf(o) { GenerateSpatialDataService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GenerateSpatialDataService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.GenerateSpatialDataService
 * @category iServer SpatialAnalyst GenerateSpatialData
 * @classdesc å¨æåæ®µåææå¡ç±»ãè¯¥ç±»è´è´£å°å®¢æ·è®¾ç½®çå¨æåæ®µåææå¡åæ°ä¼ éç»æå¡ç«¯ï¼å¹¶æ¥æ¶æå¡ç«¯è¿åçå¨æåæ®µåæç»ææ°æ®ã
 * è·åçç»ææ°æ®åæ¬ originResult ãresult ä¸¤ç§ï¼å¶ä¸­ï¼originResult ä¸ºæå¡ç«¯è¿åçç¨ JSON å¯¹è±¡è¡¨ç¤ºçå¨æåæ®µåæç»ææ°æ®ï¼result ä¸ºæå¡ç«¯è¿åçå¨æåæ®µåæç»ææ°æ®ã
 * @param {string} url - æå¡çè®¿é®å°åãå¦ http://localhost:8090/iserver/services/spatialanalyst-changchun/restjsr/spatialanalystã
 * @param {Object} options - åæ°ã</br>
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @extends {SuperMap.SpatialAnalystBase}
 * @example å®ä¾åè¯¥ç±»å¦ä¸ä¾æç¤ºï¼
 * (start code)
 *  function GenerateSpatialData(){
     *
     *  //éç½®æ°æ®è¿åéé¡¹(option)
     *  var option = new SuperMap.DataReturnOption({
     *      expectCount: 1000,
     *      dataset: "generateSpatialData",
     *      deleteExistResultDataset: true,
     *      dataReturnMode: SuperMap.DataReturnMode.DATASET_ONLY
     *  }),
     *  //éç½®å¨æåæ®µåæ°(Parameters)
     *  parameters = new SuperMap.GenerateSpatialDataParameters({
     *      routeTable: "RouteDT_road@Changchun",
     *      routeIDField: "RouteID",
     *      eventTable: "LinearEventTabDT@Changchun",
     *      eventRouteIDField: "RouteID",
     *      measureField: "",
     *      measureStartField: "LineMeasureFrom",
     *      measureEndField: "LineMeasureTo",
     *      measureOffsetField: "",
     *      errorInfoField: "",
     *      retainedFields:[],
     *      dataReturnOption: option
     *  }),
     *  //éç½®å¨æåæ®µiService
     *  iService = new SuperMap.GenerateSpatialDataService(Changchun_spatialanalyst, {
     *      eventListeners: {
     *          processCompleted: generateCompleted,
     *          processFailed: generateFailded
     *      }
     *  });
     *  //æ§è¡
     *  iService.processAsync(parameters);
     *  function Completed(generateSpatialDataEventArgs){//todo};
     *  function Error(generateSpatialDataEventArgs){//todo};
     * (end)
     */

var GenerateSpatialDataService = /*#__PURE__*/function (_SpatialAnalystBase) {
  GenerateSpatialDataService_inherits(GenerateSpatialDataService, _SpatialAnalystBase);

  var _super = GenerateSpatialDataService_createSuper(GenerateSpatialDataService);

  function GenerateSpatialDataService(url, options) {
    var _this;

    GenerateSpatialDataService_classCallCheck(this, GenerateSpatialDataService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.GenerateSpatialDataService";
    return _this;
  }
  /**
   * @function SuperMap.GenerateSpatialDataService.prototype.destroy
   * @override
   */


  GenerateSpatialDataService_createClass(GenerateSpatialDataService, [{
    key: "destroy",
    value: function destroy() {
      GenerateSpatialDataService_get(GenerateSpatialDataService_getPrototypeOf(GenerateSpatialDataService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.GenerateSpatialDataService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çå¨æåæ®µæå¡åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.GenerateSpatialDataParameters} params - å¨æåæ®µæä½åæ°ç±»ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof GenerateSpatialDataParameters)) {
        return;
      }

      var me = this,
          jsonParameters;
      jsonParameters = me.getJsonParameters(params);
      me.request({
        method: "POST",
        data: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.GenerateSpatialDataService.prototype.getJsonParameters
     * @description å°åæ°è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @param {SuperMap.GenerateSpatialDataParameters} params - å¨æåæ®µæä½åæ°ç±»ã
     * @returns {string}è½¬ååçJSONå­ç¬¦ä¸²ã
     */

  }, {
    key: "getJsonParameters",
    value: function getJsonParameters(params) {
      var jsonParameters = "",
          jsonStr = "datasets/" + params.routeTable + "/linearreferencing/generatespatialdata",
          me = this;
      me.url = Util.urlPathAppend(me.url, jsonStr);
      me.url = Util.urlAppend(me.url, 'returnContent=true');
      jsonParameters = Util.toJSON(params);
      return jsonParameters;
    }
  }]);

  return GenerateSpatialDataService;
}(SpatialAnalystBase);
SuperMap.GenerateSpatialDataService = GenerateSpatialDataService;
// CONCATENATED MODULE: ./src/common/iServer/GeoBoundingBoxQueryBuilderParameter.js
function GeoBoundingBoxQueryBuilderParameter_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GeoBoundingBoxQueryBuilderParameter_typeof = function _typeof(obj) { return typeof obj; }; } else { GeoBoundingBoxQueryBuilderParameter_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GeoBoundingBoxQueryBuilderParameter_typeof(obj); }

function GeoBoundingBoxQueryBuilderParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GeoBoundingBoxQueryBuilderParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GeoBoundingBoxQueryBuilderParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) GeoBoundingBoxQueryBuilderParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) GeoBoundingBoxQueryBuilderParameter_defineProperties(Constructor, staticProps); return Constructor; }

function GeoBoundingBoxQueryBuilderParameter_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GeoBoundingBoxQueryBuilderParameter_get = Reflect.get; } else { GeoBoundingBoxQueryBuilderParameter_get = function _get(target, property, receiver) { var base = GeoBoundingBoxQueryBuilderParameter_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GeoBoundingBoxQueryBuilderParameter_get(target, property, receiver || target); }

function GeoBoundingBoxQueryBuilderParameter_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GeoBoundingBoxQueryBuilderParameter_getPrototypeOf(object); if (object === null) break; } return object; }

function GeoBoundingBoxQueryBuilderParameter_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GeoBoundingBoxQueryBuilderParameter_setPrototypeOf(subClass, superClass); }

function GeoBoundingBoxQueryBuilderParameter_setPrototypeOf(o, p) { GeoBoundingBoxQueryBuilderParameter_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GeoBoundingBoxQueryBuilderParameter_setPrototypeOf(o, p); }

function GeoBoundingBoxQueryBuilderParameter_createSuper(Derived) { var hasNativeReflectConstruct = GeoBoundingBoxQueryBuilderParameter_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GeoBoundingBoxQueryBuilderParameter_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GeoBoundingBoxQueryBuilderParameter_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GeoBoundingBoxQueryBuilderParameter_possibleConstructorReturn(this, result); }; }

function GeoBoundingBoxQueryBuilderParameter_possibleConstructorReturn(self, call) { if (call && (GeoBoundingBoxQueryBuilderParameter_typeof(call) === "object" || typeof call === "function")) { return call; } return GeoBoundingBoxQueryBuilderParameter_assertThisInitialized(self); }

function GeoBoundingBoxQueryBuilderParameter_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GeoBoundingBoxQueryBuilderParameter_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GeoBoundingBoxQueryBuilderParameter_getPrototypeOf(o) { GeoBoundingBoxQueryBuilderParameter_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GeoBoundingBoxQueryBuilderParameter_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.GeoBoundingBoxQueryBuilderParameter
 * @classdesc bounds æ¥è¯¢åæ°è®¾ç½®ç±»ï¼è¯¥åæ°ä»æ¯ææ°æ®æ¥æº Elasticsearch æå¡çæ°æ®æå¡ã
 * @category iServer Data FeatureResults
 * @param {Object} options - åæ°ã 
 * @param {(SuperMap.Bounds|L.Bounds|ol.extent)} options.bounds - æ¥è¯¢èå´ã 
 * @param {SuperMap.AggregationQueryBuilderType} [options.queryType=SuperMap.AggregationQueryBuilderType.GEO_BOUNDING_BOX] - æ¥è¯¢ç±»åã 
 */

var GeoBoundingBoxQueryBuilderParameter = /*#__PURE__*/function (_AggQueryBuilderParam) {
  GeoBoundingBoxQueryBuilderParameter_inherits(GeoBoundingBoxQueryBuilderParameter, _AggQueryBuilderParam);

  var _super = GeoBoundingBoxQueryBuilderParameter_createSuper(GeoBoundingBoxQueryBuilderParameter);

  function GeoBoundingBoxQueryBuilderParameter(options) {
    var _this;

    GeoBoundingBoxQueryBuilderParameter_classCallCheck(this, GeoBoundingBoxQueryBuilderParameter);

    _this = _super.call(this, options);
    /**
     * @member {(SuperMap.Bounds|L.Bounds|ol.extent)} SuperMap.GeoBoundingBoxQueryBuilderParameter.prototype.bounds
     * @description æ¥è¯¢èå´ã
     */

    _this.bounds = null;
    /**
     * @member {SuperMap.AggregationQueryBuilderType} [SuperMap.GeoBoundingBoxQueryBuilderParameter.prototype.queryType=SuperMap.AggregationQueryBuilderType.GEO_BOUNDING_BOX]
     * @description æ¥è¯¢ç±»åã
     */

    _this.queryType = AggregationQueryBuilderType.GEO_BOUNDING_BOX;
    _this.CLASS_NAME = "SuperMap.GeoBoundingBoxQueryBuilderParameter";
    Util.extend(GeoBoundingBoxQueryBuilderParameter_assertThisInitialized(_this), options);
    return _this;
  }

  GeoBoundingBoxQueryBuilderParameter_createClass(GeoBoundingBoxQueryBuilderParameter, [{
    key: "destroy",
    value: function destroy() {
      GeoBoundingBoxQueryBuilderParameter_get(GeoBoundingBoxQueryBuilderParameter_getPrototypeOf(GeoBoundingBoxQueryBuilderParameter.prototype), "destroy", this).call(this);

      this.bounds = null;
      this.queryType = null;
    }
  }]);

  return GeoBoundingBoxQueryBuilderParameter;
}(AggQueryBuilderParameter);
SuperMap.GeoBoundingBoxQueryBuilderParameter = GeoBoundingBoxQueryBuilderParameter;
// CONCATENATED MODULE: ./src/common/iServer/GeoHashGridAggParameter.js
function GeoHashGridAggParameter_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GeoHashGridAggParameter_typeof = function _typeof(obj) { return typeof obj; }; } else { GeoHashGridAggParameter_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GeoHashGridAggParameter_typeof(obj); }

function GeoHashGridAggParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GeoHashGridAggParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GeoHashGridAggParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) GeoHashGridAggParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) GeoHashGridAggParameter_defineProperties(Constructor, staticProps); return Constructor; }

function GeoHashGridAggParameter_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GeoHashGridAggParameter_get = Reflect.get; } else { GeoHashGridAggParameter_get = function _get(target, property, receiver) { var base = GeoHashGridAggParameter_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GeoHashGridAggParameter_get(target, property, receiver || target); }

function GeoHashGridAggParameter_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GeoHashGridAggParameter_getPrototypeOf(object); if (object === null) break; } return object; }

function GeoHashGridAggParameter_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GeoHashGridAggParameter_setPrototypeOf(subClass, superClass); }

function GeoHashGridAggParameter_setPrototypeOf(o, p) { GeoHashGridAggParameter_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GeoHashGridAggParameter_setPrototypeOf(o, p); }

function GeoHashGridAggParameter_createSuper(Derived) { var hasNativeReflectConstruct = GeoHashGridAggParameter_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GeoHashGridAggParameter_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GeoHashGridAggParameter_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GeoHashGridAggParameter_possibleConstructorReturn(this, result); }; }

function GeoHashGridAggParameter_possibleConstructorReturn(self, call) { if (call && (GeoHashGridAggParameter_typeof(call) === "object" || typeof call === "function")) { return call; } return GeoHashGridAggParameter_assertThisInitialized(self); }

function GeoHashGridAggParameter_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GeoHashGridAggParameter_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GeoHashGridAggParameter_getPrototypeOf(o) { GeoHashGridAggParameter_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GeoHashGridAggParameter_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.GeoHashGridAggParameter
 * @classdesc æ ¼ç½èåæ¥è¯¢åæ°ç±»ï¼è¯¥åæ°ä»æ¯ææ°æ®æ¥æº Elasticsearch æå¡çæ°æ®æå¡ã
 * @category iServer Data FeatureResults
 * @param {Object} option - åå§ååæ°ã
 * @param {number} [option.precision=5] - ç½æ ¼ä¸­æ°å­çç²¾åº¦ã
 * @param {SuperMap.AggregationType} [option.aggType=SuperMap.AggregationType.GEOHASH_GRID] - æ ¼ç½èåç±»åã
 */

var GeoHashGridAggParameter = /*#__PURE__*/function (_AggregationParameter) {
  GeoHashGridAggParameter_inherits(GeoHashGridAggParameter, _AggregationParameter);

  var _super = GeoHashGridAggParameter_createSuper(GeoHashGridAggParameter);

  function GeoHashGridAggParameter(option) {
    var _this;

    GeoHashGridAggParameter_classCallCheck(this, GeoHashGridAggParameter);

    _this = _super.call(this, option);
    /**
     * @member {number} [SuperMap.GeoHashGridAggParameter.prototype.precision=5]
     * @description ç½æ ¼ä¸­æ°å­çç²¾åº¦ã
     */

    _this.precision = 5;
    /**
     * @member {SuperMap.AggregationType} [SuperMap.GeoHashGridAggParameter.prototype.aggType=SuperMap.AggregationType.GEOHASH_GRID]
     * @description æ ¼ç½èåç±»åã
     */

    _this.aggType = AggregationType.GEOHASH_GRID;
    Util.extend(GeoHashGridAggParameter_assertThisInitialized(_this), option);
    _this.CLASS_NAME = "SuperMap.GeoHashGridAggParameter";
    return _this;
  }

  GeoHashGridAggParameter_createClass(GeoHashGridAggParameter, [{
    key: "destroy",
    value: function destroy() {
      GeoHashGridAggParameter_get(GeoHashGridAggParameter_getPrototypeOf(GeoHashGridAggParameter.prototype), "destroy", this).call(this);

      this.aggType = null;
    }
    /**
     * @function SuperMap.GeoHashGridAggParameter.toJsonParameters
     * @description å°å¯¹è±¡è½¬ä¸º JSON æ ¼å¼ã
     * @param param è½¬æ¢å¯¹è±¡ã
     * @returns {string|object}
     */

  }], [{
    key: "toJsonParameters",
    value: function toJsonParameters(param) {
      var parameters = {
        aggName: param.aggName,
        aggFieldName: param.aggFieldName,
        aggType: param.aggType,
        precision: param.precision
      };

      if (param.subAgg) {
        parameters.subAgg = param.subAgg;
      }

      return Util.toJson(parameters);
    }
  }]);

  return GeoHashGridAggParameter;
}(AggregationParameter);
SuperMap.GeoHashGridAggParameter = GeoHashGridAggParameter;
// CONCATENATED MODULE: ./src/common/iServer/GeometryOverlayAnalystParameters.js
function GeometryOverlayAnalystParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GeometryOverlayAnalystParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { GeometryOverlayAnalystParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GeometryOverlayAnalystParameters_typeof(obj); }

function GeometryOverlayAnalystParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GeometryOverlayAnalystParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GeometryOverlayAnalystParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) GeometryOverlayAnalystParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) GeometryOverlayAnalystParameters_defineProperties(Constructor, staticProps); return Constructor; }

function GeometryOverlayAnalystParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GeometryOverlayAnalystParameters_get = Reflect.get; } else { GeometryOverlayAnalystParameters_get = function _get(target, property, receiver) { var base = GeometryOverlayAnalystParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GeometryOverlayAnalystParameters_get(target, property, receiver || target); }

function GeometryOverlayAnalystParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GeometryOverlayAnalystParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function GeometryOverlayAnalystParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GeometryOverlayAnalystParameters_setPrototypeOf(subClass, superClass); }

function GeometryOverlayAnalystParameters_setPrototypeOf(o, p) { GeometryOverlayAnalystParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GeometryOverlayAnalystParameters_setPrototypeOf(o, p); }

function GeometryOverlayAnalystParameters_createSuper(Derived) { var hasNativeReflectConstruct = GeometryOverlayAnalystParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GeometryOverlayAnalystParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GeometryOverlayAnalystParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GeometryOverlayAnalystParameters_possibleConstructorReturn(this, result); }; }

function GeometryOverlayAnalystParameters_possibleConstructorReturn(self, call) { if (call && (GeometryOverlayAnalystParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return GeometryOverlayAnalystParameters_assertThisInitialized(self); }

function GeometryOverlayAnalystParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GeometryOverlayAnalystParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GeometryOverlayAnalystParameters_getPrototypeOf(o) { GeometryOverlayAnalystParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GeometryOverlayAnalystParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.GeometryOverlayAnalystParameters
 * @category  iServer SpatialAnalyst OverlayAnalyst
 * @classdesc
 * å ä½å¯¹è±¡å å åæåæ°ç±»ãå¯¹æå®çæä¸¤ä¸ªå ä½å¯¹è±¡åå å åæãéè¿è¯¥ç±»å¯ä»¥æå®è¦åå å åæçå ä½å¯¹è±¡ãå å æä½ç±»åã
 * @param {Object} options - åæ°ã 
 * @param {Object} options.operateGeometry - å å åæçæä½å ä½å¯¹è±¡ã </br>
 *                                   ç¹ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.Point}|{@link L.Marker}|{@link L.CircleMarker}|{@link L.Circle}|{@link L.GeoJSON}|{@link ol.geom.Point}|{@link ol.format.GeoJSON}ã</br>
 *                                   çº¿ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.LineString}|{@link SuperMap.Geometry.LinearRing}|{@link L.Polyline}|{@link L.GeoJSON}|{@link ol.geom.LineString}|{@link GeoJSONObject}ã</br>
 *                                   é¢ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.Polygon}|{@link L.Polygon}|{@link L.GeoJSON}|{@link ol.geom.Polygon}|{@link GeoJSONObject}ã 
 * @param {Object} options.sourceGeometry - å å åæçæºå ä½å¯¹è±¡ã 
 * @param {Array.<Object>} [options.operateGeometries] - æ¹éå å åæçæä½å ä½å¯¹è±¡æ°ç»ã 
 * @param {Array.<Object>} [options.sourceGeometries] -æ¹éå å åæçæºå ä½å¯¹è±¡æ°ç»ã 
 * @param {SuperMap.OverlayOperationType} [options.operation] - å å æä½æä¸¾å¼ã 
 * @extends {SuperMap.OverlayAnalystParameters}
 */

var GeometryOverlayAnalystParameters = /*#__PURE__*/function (_OverlayAnalystParame) {
  GeometryOverlayAnalystParameters_inherits(GeometryOverlayAnalystParameters, _OverlayAnalystParame);

  var _super = GeometryOverlayAnalystParameters_createSuper(GeometryOverlayAnalystParameters);

  function GeometryOverlayAnalystParameters(options) {
    var _this;

    GeometryOverlayAnalystParameters_classCallCheck(this, GeometryOverlayAnalystParameters);

    _this = _super.call(this, options);

    if (options && options.operateGeometry) {
      _this.operateGeometry = options.operateGeometry;
    }

    if (options && options.sourceGeometry) {
      _this.sourceGeometry = options.sourceGeometry;
    }

    if (options && options.operateGeometries) {
      _this.operateGeometries = options.operateGeometries;
    }

    if (options && options.sourceGeometries) {
      _this.sourceGeometries = options.sourceGeometries;
    }

    if (options) {
      Util.extend(GeometryOverlayAnalystParameters_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.GeometryOverlayAnalystParameters";
    return _this;
  }
  /**
   * @function SuperMap.GeometryOverlayAnalystParameters.prototype.destroy
   * @override
   */


  GeometryOverlayAnalystParameters_createClass(GeometryOverlayAnalystParameters, [{
    key: "destroy",
    value: function destroy() {
      GeometryOverlayAnalystParameters_get(GeometryOverlayAnalystParameters_getPrototypeOf(GeometryOverlayAnalystParameters.prototype), "destroy", this).call(this);

      var me = this;

      if (me.sourceGeometry) {
        me.sourceGeometry.destroy();
        me.sourceGeometry = null;
      }

      if (me.sourceGeometries) {
        me.sourceGeometries.destroy();
        me.sourceGeometries = null;
      }

      if (me.sourceGeometry) {
        me.sourceGeometry.destroy();
        me.sourceGeometry = null;
      }

      if (me.operateGeometries) {
        me.operateGeometries.destroy();
        me.operateGeometries = null;
      }
    }
    /**
     * @function SuperMap.GeometryOverlayAnalystParameters.toObject
     * @param {SuperMap.GeometryOverlayAnalystParameters} geometryOverlayAnalystParameters - å ä½å¯¹è±¡å å åæåæ°ç±»ã
     * @param {SuperMap.GeometryOverlayAnalystParameters} tempObj - å ä½å¯¹è±¡å å åæåæ°å¯¹è±¡ã
     * @description å°å ä½å¯¹è±¡å å åæåæ°å¯¹è±¡è½¬æ¢ä¸º JSON å¯¹è±¡ã
     * @returns {Object} JSON å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(geometryOverlayAnalystParameters, tempObj) {
      for (var name in geometryOverlayAnalystParameters) {
        if (name === "sourceGeometry") {
          tempObj.sourceGeometry = ServerGeometry.fromGeometry(geometryOverlayAnalystParameters.sourceGeometry);
        } else if (name === "sourceGeometries") {
          var sourceGeometries = [];

          for (var i = 0; i < geometryOverlayAnalystParameters.sourceGeometries.length; i++) {
            sourceGeometries.push(ServerGeometry.fromGeometry(geometryOverlayAnalystParameters.sourceGeometries[i]));
          }

          tempObj.sourceGeometries = sourceGeometries;
        } else if (name === "operateGeometry") {
          tempObj.operateGeometry = ServerGeometry.fromGeometry(geometryOverlayAnalystParameters.operateGeometry);
        } else if (name === "operateGeometries") {
          var operateGeometries = [];

          for (var j = 0; j < geometryOverlayAnalystParameters.operateGeometries.length; j++) {
            operateGeometries.push(ServerGeometry.fromGeometry(geometryOverlayAnalystParameters.operateGeometries[j]));
          }

          tempObj.operateGeometries = operateGeometries;
        } else {
          tempObj[name] = geometryOverlayAnalystParameters[name];
        }
      }
    }
  }]);

  return GeometryOverlayAnalystParameters;
}(OverlayAnalystParameters);
SuperMap.GeometryOverlayAnalystParameters = GeometryOverlayAnalystParameters;
// CONCATENATED MODULE: ./src/common/iServer/GeometrySurfaceAnalystParameters.js
function GeometrySurfaceAnalystParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GeometrySurfaceAnalystParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { GeometrySurfaceAnalystParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GeometrySurfaceAnalystParameters_typeof(obj); }

function GeometrySurfaceAnalystParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GeometrySurfaceAnalystParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GeometrySurfaceAnalystParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) GeometrySurfaceAnalystParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) GeometrySurfaceAnalystParameters_defineProperties(Constructor, staticProps); return Constructor; }

function GeometrySurfaceAnalystParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GeometrySurfaceAnalystParameters_get = Reflect.get; } else { GeometrySurfaceAnalystParameters_get = function _get(target, property, receiver) { var base = GeometrySurfaceAnalystParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GeometrySurfaceAnalystParameters_get(target, property, receiver || target); }

function GeometrySurfaceAnalystParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GeometrySurfaceAnalystParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function GeometrySurfaceAnalystParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GeometrySurfaceAnalystParameters_setPrototypeOf(subClass, superClass); }

function GeometrySurfaceAnalystParameters_setPrototypeOf(o, p) { GeometrySurfaceAnalystParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GeometrySurfaceAnalystParameters_setPrototypeOf(o, p); }

function GeometrySurfaceAnalystParameters_createSuper(Derived) { var hasNativeReflectConstruct = GeometrySurfaceAnalystParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GeometrySurfaceAnalystParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GeometrySurfaceAnalystParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GeometrySurfaceAnalystParameters_possibleConstructorReturn(this, result); }; }

function GeometrySurfaceAnalystParameters_possibleConstructorReturn(self, call) { if (call && (GeometrySurfaceAnalystParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return GeometrySurfaceAnalystParameters_assertThisInitialized(self); }

function GeometrySurfaceAnalystParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GeometrySurfaceAnalystParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GeometrySurfaceAnalystParameters_getPrototypeOf(o) { GeometrySurfaceAnalystParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GeometrySurfaceAnalystParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.GeometrySurfaceAnalystParameters
 * @category  iServer SpatialAnalyst SurfaceAnalyst
 * @classdesc å ä½å¯¹è±¡è¡¨é¢åæåæ°ç±»ãè¯¥ç±»å¯¹å ä½å¯¹è±¡è¡¨é¢åææç¨å°çåæ°è¿è¡è®¾ç½®ã
 * @param {Object} options - åæ°ã 
 * @param {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point>} options.points - è¡¨é¢åæçåæ ç¹æ°ç»ã 
 * @param {Array.<number>} options.zValues - è¡¨é¢åæçåæ ç¹ç Z å¼æ°ç»ã 
 * @param {number} [options.resolution] - è·åæè®¾ç½®æå®ä¸­é´ç»æï¼æ æ ¼æ°æ®éï¼çåè¾¨çã 
 * @param {SuperMap.DataReturnOption} [options.resultSetting] - ç»æè¿åè®¾ç½®ç±»ã 
 * @param {SuperMap.SurfaceAnalystParametersSetting} options.extractParameter - è·åæè®¾ç½®è¡¨é¢åæåæ°ã 
 * @param {SuperMap.SurfaceAnalystMethod} [options.surfaceAnalystMethod = SuperMap.SurfaceAnalystMethod.ISOLINE] - è·åæè®¾ç½®è¡¨é¢åæçæåæ¹æ³ï¼æåç­å¼çº¿åæåç­å¼é¢ã 
 * @extends {SuperMap.SurfaceAnalystParameters}
 */

var GeometrySurfaceAnalystParameters = /*#__PURE__*/function (_SurfaceAnalystParame) {
  GeometrySurfaceAnalystParameters_inherits(GeometrySurfaceAnalystParameters, _SurfaceAnalystParame);

  var _super = GeometrySurfaceAnalystParameters_createSuper(GeometrySurfaceAnalystParameters);

  function GeometrySurfaceAnalystParameters(options) {
    var _this;

    GeometrySurfaceAnalystParameters_classCallCheck(this, GeometrySurfaceAnalystParameters);

    _this = _super.call(this, options);
    /**
     * @member {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point>} SuperMap.GeometrySurfaceAnalystParameters.prototype.points
     * @description è·åæè®¾ç½®ç¨äºè¡¨é¢åæçåæ ç¹æ°ç»ã
     */

    _this.points = null;
    /**
     * @member {Array.<number>} SuperMap.GeometrySurfaceAnalystParameters.prototype.zValues
     * @description è·åæè®¾ç½®ç¨äºæåæä½çå¼ãæåç­å¼çº¿æ¶ï¼å°ä½¿ç¨è¯¥æ°ç»ä¸­çå¼ï¼
     * å¯¹å ä½å¯¹è±¡ä¸­çåæ ç¹æ°ç»è¿è¡æå¼åæï¼å¾å°æ æ ¼æ°æ®éï¼ä¸­é´ç»æï¼ï¼æ¥çä»æ æ ¼æ°æ®éæåç­å¼çº¿ã
     */

    _this.zValues = null;

    if (options) {
      Util.extend(GeometrySurfaceAnalystParameters_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.GeometrySurfaceAnalystParameters";
    return _this;
  }
  /**
   * @function SuperMap.GeometrySurfaceAnalystParameters.prototype.destroy
   * @override
   */


  GeometrySurfaceAnalystParameters_createClass(GeometrySurfaceAnalystParameters, [{
    key: "destroy",
    value: function destroy() {
      GeometrySurfaceAnalystParameters_get(GeometrySurfaceAnalystParameters_getPrototypeOf(GeometrySurfaceAnalystParameters.prototype), "destroy", this).call(this);

      var me = this;

      if (me.points) {
        for (var i = 0, points = me.points, len = points.length; i < len; i++) {
          points[i].destroy();
        }

        me.points = null;
      }

      me.zValues = null;
    }
  }]);

  return GeometrySurfaceAnalystParameters;
}(SurfaceAnalystParameters);
SuperMap.GeometrySurfaceAnalystParameters = GeometrySurfaceAnalystParameters;
// CONCATENATED MODULE: ./src/common/iServer/GeometryThiessenAnalystParameters.js
function GeometryThiessenAnalystParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GeometryThiessenAnalystParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { GeometryThiessenAnalystParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GeometryThiessenAnalystParameters_typeof(obj); }

function GeometryThiessenAnalystParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GeometryThiessenAnalystParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GeometryThiessenAnalystParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) GeometryThiessenAnalystParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) GeometryThiessenAnalystParameters_defineProperties(Constructor, staticProps); return Constructor; }

function GeometryThiessenAnalystParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GeometryThiessenAnalystParameters_get = Reflect.get; } else { GeometryThiessenAnalystParameters_get = function _get(target, property, receiver) { var base = GeometryThiessenAnalystParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GeometryThiessenAnalystParameters_get(target, property, receiver || target); }

function GeometryThiessenAnalystParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GeometryThiessenAnalystParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function GeometryThiessenAnalystParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GeometryThiessenAnalystParameters_setPrototypeOf(subClass, superClass); }

function GeometryThiessenAnalystParameters_setPrototypeOf(o, p) { GeometryThiessenAnalystParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GeometryThiessenAnalystParameters_setPrototypeOf(o, p); }

function GeometryThiessenAnalystParameters_createSuper(Derived) { var hasNativeReflectConstruct = GeometryThiessenAnalystParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GeometryThiessenAnalystParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GeometryThiessenAnalystParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GeometryThiessenAnalystParameters_possibleConstructorReturn(this, result); }; }

function GeometryThiessenAnalystParameters_possibleConstructorReturn(self, call) { if (call && (GeometryThiessenAnalystParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return GeometryThiessenAnalystParameters_assertThisInitialized(self); }

function GeometryThiessenAnalystParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GeometryThiessenAnalystParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GeometryThiessenAnalystParameters_getPrototypeOf(o) { GeometryThiessenAnalystParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GeometryThiessenAnalystParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.GeometryThiessenAnalystParameters
 * @constructs SuperMap.GeometryThiessenAnalystParameters
 * @category iServer SpatialAnalyst ThiessenPolygonAnalyst
 * @classdesc å ä½å¯¹è±¡æ³°æ£®å¤è¾¹å½¢åæåæ°ç±»ãå¯¹æå®çæä¸ªå ä½å¯¹è±¡åæ³°æ£®å¤è¾¹å½¢åæãéè¿è¯¥ç±»å¯ä»¥æå®è¦åæ³°æ£®å¤è¾¹å½¢åæçå ä½å¯¹è±¡ãè¿åæ°æ®éåç§°ç­ã
 * @param {Object} options - åæ°ã 
 * @param {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point>} options.points - ä½¿ç¨ç¹æ°ç»è¿è¡åææ¶ä½¿ç¨çå ä½å¯¹è±¡ã 
 * @extends {SuperMap.ThiessenAnalystParameters}
 */

var GeometryThiessenAnalystParameters = /*#__PURE__*/function (_ThiessenAnalystParam) {
  GeometryThiessenAnalystParameters_inherits(GeometryThiessenAnalystParameters, _ThiessenAnalystParam);

  var _super = GeometryThiessenAnalystParameters_createSuper(GeometryThiessenAnalystParameters);

  function GeometryThiessenAnalystParameters(options) {
    var _this;

    GeometryThiessenAnalystParameters_classCallCheck(this, GeometryThiessenAnalystParameters);

    _this = _super.call(this, options);
    /**
     * @member {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point>} SuperMap.GeometryThiessenAnalystParameters.prototype.points
     * @description ä½¿ç¨ç¹æ°ç»è¿è¡åææ¶ä½¿ç¨çå ä½å¯¹è±¡ã
     */

    _this.points = null;

    if (options) {
      Util.extend(GeometryThiessenAnalystParameters_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.GeometryThiessenAnalystParameters";
    return _this;
  }
  /**
   * @function SuperMap.GeometryThiessenAnalystParameters.prototype.destroy
   * @override
   */


  GeometryThiessenAnalystParameters_createClass(GeometryThiessenAnalystParameters, [{
    key: "destroy",
    value: function destroy() {
      GeometryThiessenAnalystParameters_get(GeometryThiessenAnalystParameters_getPrototypeOf(GeometryThiessenAnalystParameters.prototype), "destroy", this).call(this);

      var me = this;

      if (me.points) {
        for (var i = me.points.length - 1; i >= 0; i--) {
          me.points[i].destroy();
        }

        me.points = null;
      }
    }
    /**
     * @function SuperMap.GeometryThiessenAnalystParameters.toObject
     * @param {SuperMap.GeometryThiessenAnalystParameters} geometryThiessenAnalystParameters - å ä½å¯¹è±¡æ³°æ£®å¤è¾¹å½¢åæåæ°ç±»ã
     * @param {SuperMap.GeometryThiessenAnalystParameters} tempObj - å ä½å¯¹è±¡æ³°æ£®å¤è¾¹å½¢åæåæ°å¯¹è±¡ã
     * @description å°å ä½å¯¹è±¡æ³°æ£®å¤è¾¹å½¢åæåæ°å¯¹è±¡è½¬æ¢ä¸º JSON å¯¹è±¡ã
     * @returns {Object} JSON å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(geometryThiessenAnalystParameters, tempObj) {
      for (var name in geometryThiessenAnalystParameters) {
        if (name === "clipRegion") {
          tempObj.clipRegion = ServerGeometry.fromGeometry(geometryThiessenAnalystParameters.clipRegion);
        } else {
          tempObj[name] = geometryThiessenAnalystParameters[name];
        }
      }
    }
  }]);

  return GeometryThiessenAnalystParameters;
}(ThiessenAnalystParameters);
SuperMap.GeometryThiessenAnalystParameters = GeometryThiessenAnalystParameters;
// CONCATENATED MODULE: ./src/common/iServer/GeoprocessingService.js
function GeoprocessingService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GeoprocessingService_typeof = function _typeof(obj) { return typeof obj; }; } else { GeoprocessingService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GeoprocessingService_typeof(obj); }

function GeoprocessingService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GeoprocessingService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GeoprocessingService_createClass(Constructor, protoProps, staticProps) { if (protoProps) GeoprocessingService_defineProperties(Constructor.prototype, protoProps); if (staticProps) GeoprocessingService_defineProperties(Constructor, staticProps); return Constructor; }

function GeoprocessingService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GeoprocessingService_setPrototypeOf(subClass, superClass); }

function GeoprocessingService_setPrototypeOf(o, p) { GeoprocessingService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GeoprocessingService_setPrototypeOf(o, p); }

function GeoprocessingService_createSuper(Derived) { var hasNativeReflectConstruct = GeoprocessingService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GeoprocessingService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GeoprocessingService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GeoprocessingService_possibleConstructorReturn(this, result); }; }

function GeoprocessingService_possibleConstructorReturn(self, call) { if (call && (GeoprocessingService_typeof(call) === "object" || typeof call === "function")) { return call; } return GeoprocessingService_assertThisInitialized(self); }

function GeoprocessingService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GeoprocessingService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GeoprocessingService_getPrototypeOf(o) { GeoprocessingService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GeoprocessingService_getPrototypeOf(o); }



/**
 * @class SuperMap.GeoprocessingService
 * @category  iServer GeoprocessingService
 * @classdesc å°çå¤çæå¡æ¥å£çåºç±»ã
 * @version 10.1.0
 * @extends {SuperMap.CommonServiceBase}
 * @param {string} url - æå¡å°åã
 * @param {Object} options - åæ°ã
 * @param {SuperMap.Events} options.events - å¤çææäºä»¶çå¯¹è±¡ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼iServer|iPortal|Onlineã
 * @param {Object} [options.eventListeners] - äºä»¶çå¬å¨å¯¹è±¡ãæ processCompleted å±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailed å±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 */

var GeoprocessingService_GeoprocessingService = /*#__PURE__*/function (_CommonServiceBase) {
  GeoprocessingService_inherits(GeoprocessingService, _CommonServiceBase);

  var _super = GeoprocessingService_createSuper(GeoprocessingService);

  function GeoprocessingService(url, options) {
    var _this;

    GeoprocessingService_classCallCheck(this, GeoprocessingService);

    options = options || {};
    options.EVENT_TYPES = ['processCompleted', 'processFailed', 'processRunning'];
    _this = _super.call(this, url, options);
    _this.CLASS_NAME = 'SuperMap.GeoprocessingService';
    _this.headers = {};
    _this.crossOrigin = true;
    return _this;
  }
  /**
   * @function SuperMap.GeoprocessingService.prototype.getTools
   * @description è·åå°çå¤çå·¥å·åè¡¨ã
   */


  GeoprocessingService_createClass(GeoprocessingService, [{
    key: "getTools",
    value: function getTools() {
      this._get("".concat(this.url, "/list"));
    }
    /**
     * @function SuperMap.GeoprocessingService.prototype.getTool
     * @description è·åå°çå¤çå·¥å·çIDãåç§°ãæè¿°ãè¾å¥åæ°ãç¯å¢åæ°åè¾åºç»æç­ç¸å³åæ°ã
     * @param {string} identifier - å°çå¤çå·¥å·IDã
     */

  }, {
    key: "getTool",
    value: function getTool(identifier) {
      this._get("".concat(this.url, "/").concat(identifier));
    }
    /**
     * @function SuperMap.GeoprocessingService.prototype.execute
     * @description åæ­¥æ§è¡å°çå¤çå·¥å·ã
     * @param {string} identifier - å°çå¤çå·¥å·IDã
     * @param {Object} parameter - å°çå¤çå·¥å·çè¾å¥åæ°ã
     * @param {Object} environment - å°çå¤çå·¥å·çç¯å¢åæ°ã
     */

  }, {
    key: "execute",
    value: function execute(identifier, parameter, environment) {
      parameter = parameter ? parameter : null;
      environment = environment ? environment : null;
      var executeParamter = {
        parameter: parameter,
        environment: environment
      };

      this._get("".concat(this.url, "/").concat(identifier, "/execute"), executeParamter);
    }
    /**
     * @function SuperMap.GeoprocessingService.prototype.submitJob
     * @description å¼æ­¥æ§è¡å°çå¤çå·¥å·ã
     * @param {string} identifier - å°çå¤çå·¥å·IDã
     * @param {Object} parameter - å°çå¤çå·¥å·çè¾å¥åæ°ã
     * @param {Object} environments - å°çå¤çå·¥å·çç¯å¢åæ°ã
     */

  }, {
    key: "submitJob",
    value: function submitJob(identifier, parameter, environments) {
      parameter = parameter ? parameter : null;
      environments = environments ? environments : null;
      var asyncParamter = {
        parameter: parameter,
        environments: environments
      };
      this.request({
        url: "".concat(this.url, "/").concat(identifier, "/jobs"),
        headers: {
          'Content-type': 'application/json'
        },
        method: 'POST',
        data: JSON.stringify(asyncParamter),
        scope: this,
        success: this.serviceProcessCompleted,
        failure: this.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.GeoprocessingService.prototype.waitForJobCompletion
     * @description è·åå°çå¤çå¼æ­¥æ§è¡ç¶æä¿¡æ¯ã
     * @param {string} jobId - å°çå¤çä»»å¡IDã
     * @param {string} identifier - å°çå¤çå·¥å·IDã
     * @param {Object} options - ç¶æä¿¡æ¯åæ°ã
     * @param {number} options.interval - å®æ¶å¨æ¶é´é´éã
     * @param {Callback} options.statusCallback - ä»»å¡ç¶æçåè°å½æ°ã
     */

  }, {
    key: "waitForJobCompletion",
    value: function waitForJobCompletion(jobId, identifier, options) {
      var me = this;
      var timer = setInterval(function () {
        var serviceProcessCompleted = function serviceProcessCompleted(serverResult) {
          var state = serverResult.state.runState;

          if (options.statusCallback) {
            options.statusCallback(state);
          }

          switch (state) {
            case 'FINISHED':
              clearInterval(timer);
              me.events.triggerEvent('processCompleted', {
                result: serverResult
              });
              break;

            case 'FAILED':
              clearInterval(timer);
              me.events.triggerEvent('processFailed', {
                result: serverResult
              });
              break;

            case 'CANCELED':
              clearInterval(timer);
              me.events.triggerEvent('processFailed', {
                result: serverResult
              });
              break;
          }
        };

        me._get("".concat(me.url, "/").concat(identifier, "/jobs/").concat(jobId), null, serviceProcessCompleted);
      }, options.interval);
    }
    /**
     * @function SuperMap.GeoprocessingService.prototype.getJobInfo
     * @description è·åå°çå¤çä»»å¡çæ§è¡ä¿¡æ¯ã
     * @param {string} identifier - å°çå¤çå·¥å·IDã
     * @param {string} jobId - å°çå¤çä»»å¡IDã
     */

  }, {
    key: "getJobInfo",
    value: function getJobInfo(identifier, jobId) {
      this._get("".concat(this.url, "/").concat(identifier, "/jobs/").concat(jobId));
    }
    /**
     * @function SuperMap.GeoprocessingService.prototype.cancelJob
     * @description åæ¶å°çå¤çä»»å¡çå¼æ­¥æ§è¡ã
     * @param {string} identifier - å°çå¤çå·¥å·IDã
     * @param {string} jobId - å°çå¤çä»»å¡IDã
     */

  }, {
    key: "cancelJob",
    value: function cancelJob(identifier, jobId) {
      this._get("".concat(this.url, "/").concat(identifier, "/jobs/").concat(jobId, "/cancel"));
    }
    /**
     * @function SuperMap.GeoprocessingService.prototype.getJobs
     * @description è·åå°çå¤çæå¡ä»»å¡åè¡¨ã
     * @param {string} identifier - å°çå¤çå·¥å·IDã(ä¼ åä»£è¡¨identifierç®å­çä»»å¡åè¡¨ï¼ä¸ä¼ åä»£è¡¨ææä»»å¡çåè¡¨)
     */

  }, {
    key: "getJobs",
    value: function getJobs(identifier) {
      var url = "".concat(this.url, "/jobs");

      if (identifier) {
        url = "".concat(this.url, "/").concat(identifier, "/jobs");
      }

      this._get(url);
    }
    /**
     * @function SuperMap.GeoprocessingService.prototype.getResults
     * @description å°çå¤çå·¥å·æ§è¡çç»æç­,æ¯æç»æè¿æ»¤ã
     * @param {string} identifier - å°çå¤çå·¥å·IDã
     * @param {string} jobId - å°çå¤çä»»å¡IDã
     * @param {string} filter - è¾åºå¼æ­¥ç»æçidã(å¯éï¼ä¼ å¥filteråæ°æ¶å¯¹è¯¥å°çå¤çå·¥å·æ§è¡çç»æè¿è¡è¿æ»¤è·åï¼ä¸å¡«åæ¶æ¾ç¤ºææçæ§è¡ç»æ)
     */

  }, {
    key: "getResults",
    value: function getResults(identifier, jobId, filter) {
      var url = "".concat(this.url, "/").concat(identifier, "/jobs/").concat(jobId, "/results");

      if (filter) {
        url = "".concat(url, "/").concat(filter);
      }

      this._get(url);
    }
  }, {
    key: "_get",
    value: function _get(url, paramter, serviceProcessCompleted, serviceProcessFailed) {
      this.request({
        url: url,
        method: 'GET',
        params: paramter,
        headers: {
          'Content-type': 'application/json'
        },
        scope: this,
        success: serviceProcessCompleted ? serviceProcessCompleted : this.serviceProcessCompleted,
        failure: serviceProcessFailed ? serviceProcessFailed : this.serviceProcessFailed
      });
    }
  }]);

  return GeoprocessingService;
}(CommonServiceBase);
SuperMap.GeoprocessingService = GeoprocessingService_GeoprocessingService;
// CONCATENATED MODULE: ./src/common/iServer/GeoRelationAnalystParameters.js
function GeoRelationAnalystParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GeoRelationAnalystParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GeoRelationAnalystParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) GeoRelationAnalystParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) GeoRelationAnalystParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.GeoRelationAnalystParameters
 * @category iServer SpatialAnalyst GeoRelationAnalyst
 * @classdesc ç©ºé´å³ç³»åææå¡åæ°ç±»ãä½¿ç¨è¯¥ç±»å¯ä»¥ä¸ºç©ºé´å³ç³»åææå¡æä¾æéçåæ°ä¿¡æ¯ã
 * @param {Object} options - åæ°ã 
 * @param {SuperMap.FilterParameter} options.sourceFilter - ç©ºé´å³ç³»åæä¸­çæºæ°æ®éæ¥è¯¢åæ°ãä» name, ids, attributeFilter å fields å­æ®µææã 
 * @param {SuperMap.FilterParameter} options.referenceFilter - ç©ºé´å³ç³»åæä¸­çåèæ°æ®éæ¥è¯¢åæ°ãä» name, ids, attributeFilter å fields å­æ®µææã 
 * @param {SuperMap.SpatialRelationType} options.spatialRelationType - æå®çç©ºé´å³ç³»ç±»åã 
 * @param {boolean} [options.isBorderInside] - è¾¹çå¤çæ¹å¼ï¼å³ä½äºé¢è¾¹çº¿ä¸çç¹æ¯å¦è¢«é¢åå«ãæ­¤åæ°ä»ç¨äºç©ºé´å³ç³»ä¸ºåå«æè¢«åå«çæåµã 
 * @param {boolean} [options.returnFeature] - æ¯å¦è¿å Feature ä¿¡æ¯ã 
 * @param {boolean} [options.returnGeoRelatedOnly=true] - ä»è¿åæ»¡è¶³æå®ç©ºé´å³ç³»çç©ºé´å¯¹è±¡ã 
 * @param {number} [options.startRecord=0] - åæç»æèµ·å§è®°å½ä½ç½®ã 
 * @param {number} [options.expectCount=500] - ç©ºé´å³ç³»åæææè¿åç»æè®°å½æ°ï¼å¦æå®éä¸è¶³500æ¡ç»æåè¿åææåæç»æã 
 */

var GeoRelationAnalystParameters = /*#__PURE__*/function () {
  function GeoRelationAnalystParameters(options) {
    GeoRelationAnalystParameters_classCallCheck(this, GeoRelationAnalystParameters);

    /**
     *  @member {string} SuperMap.GeoRelationAnalystParameters.prototype.dataset
     *  @description æºæ°æ®éåç§°ã
     */
    this.dataset = null;
    /**
     * @member {SuperMap.FilterParameter} SuperMap.GeoRelationAnalystParameters.prototype.sourceFilter
     * @description ç©ºé´å³ç³»åæä¸­çæºæ°æ®éæ¥è¯¢åæ°ãä» idsãattributeFilter å fields å­æ®µææã
     */

    this.sourceFilter = null;
    /**
     * @member {SuperMap.FilterParameter} SuperMap.GeoRelationAnalystParameters.prototype.referenceFilter
     * @description ç©ºé´å³ç³»åæä¸­çåèæ°æ®éæ¥è¯¢åæ°ãä» nameï¼idsï¼attributeFilter å fields å­æ®µææã
     */

    this.referenceFilter = null;
    /**
     * @member {SuperMap.SpatialRelationType} SuperMap.GeoRelationAnalystParameters.prototype.spatialRelationType
     * @description æå®çç©ºé´å³ç³»ç±»åã
     */

    this.spatialRelationType = null;
    /**
     * @member {boolean} [SuperMap.GeoRelationAnalystParameters.prototype.isBorderInside]
     * @description è¾¹çå¤çæ¹å¼ï¼å³ä½äºé¢è¾¹çº¿ä¸çç¹æ¯å¦è¢«é¢åå«ãæ­¤åæ°ä»ç¨äºç©ºé´å³ç³»ä¸ºåå«æè¢«åå«çæåµã
     */

    this.isBorderInside = null;
    /**
     * @member {boolean} [SuperMap.GeoRelationAnalystParameters.prototype.returnFeature]
     * @description æ¯å¦è¿å Feature ä¿¡æ¯ã
     */

    this.returnFeature = null;
    /**
     * @member {boolean} [SuperMap.GeoRelationAnalystParameters.prototype.returnGeoRelatedOnly=true]
     * @description æ¯å¦ä»è¿åæ»¡è¶³æå®ç©ºé´å³ç³»çç©ºé´å¯¹è±¡ã
     */

    this.returnGeoRelatedOnly = null;
    /**
     * @member {number} [SuperMap.GeoRelationAnalystParameters.prototype.returnGeoRelatedOnly=0]
     * @description åæç»æèµ·å§è®°å½ä½ç½®ã
     */

    this.startRecord = 0;
    /**
     * @member {number} [SuperMap.GeoRelationAnalystParameters.prototype.expectCount=500]
     * @description ç©ºé´å³ç³»åæææè¿åç»æè®°å½æ°ï¼å¦æå®éä¸è¶³ 500 æ¡ç»æåè¿åææåæç»æã
     */

    this.expectCount = 500;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.GeoRelationAnalystParameters";
  }
  /**
   * @function SuperMap.GeoRelationAnalystParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  GeoRelationAnalystParameters_createClass(GeoRelationAnalystParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;

      if (me.sourceFilter) {
        me.sourceFilter.destroy();
      }

      me.sourceFilter = null;

      if (me.referenceFilter) {
        me.referenceFilter.destroy();
      }

      me.referenceFilter = null;
      me.dataset = null;
      me.spatialRelationType = null;
      me.isBorderInside = null;
      me.returnFeature = null;
      me.returnGeoRelatedOnly = null;
      me.startRecord = null;
      me.expectCount = null;
    }
  }]);

  return GeoRelationAnalystParameters;
}();
SuperMap.GeoRelationAnalystParameters = GeoRelationAnalystParameters;
// CONCATENATED MODULE: ./src/common/iServer/GeoRelationAnalystService.js
function GeoRelationAnalystService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GeoRelationAnalystService_typeof = function _typeof(obj) { return typeof obj; }; } else { GeoRelationAnalystService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GeoRelationAnalystService_typeof(obj); }

function GeoRelationAnalystService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GeoRelationAnalystService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GeoRelationAnalystService_createClass(Constructor, protoProps, staticProps) { if (protoProps) GeoRelationAnalystService_defineProperties(Constructor.prototype, protoProps); if (staticProps) GeoRelationAnalystService_defineProperties(Constructor, staticProps); return Constructor; }

function GeoRelationAnalystService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GeoRelationAnalystService_get = Reflect.get; } else { GeoRelationAnalystService_get = function _get(target, property, receiver) { var base = GeoRelationAnalystService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GeoRelationAnalystService_get(target, property, receiver || target); }

function GeoRelationAnalystService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GeoRelationAnalystService_getPrototypeOf(object); if (object === null) break; } return object; }

function GeoRelationAnalystService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GeoRelationAnalystService_setPrototypeOf(subClass, superClass); }

function GeoRelationAnalystService_setPrototypeOf(o, p) { GeoRelationAnalystService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GeoRelationAnalystService_setPrototypeOf(o, p); }

function GeoRelationAnalystService_createSuper(Derived) { var hasNativeReflectConstruct = GeoRelationAnalystService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GeoRelationAnalystService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GeoRelationAnalystService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GeoRelationAnalystService_possibleConstructorReturn(this, result); }; }

function GeoRelationAnalystService_possibleConstructorReturn(self, call) { if (call && (GeoRelationAnalystService_typeof(call) === "object" || typeof call === "function")) { return call; } return GeoRelationAnalystService_assertThisInitialized(self); }

function GeoRelationAnalystService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GeoRelationAnalystService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GeoRelationAnalystService_getPrototypeOf(o) { GeoRelationAnalystService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GeoRelationAnalystService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.GeoRelationAnalystService
 * @category iServer SpatialAnalyst GeoRelationAnalyst
 * @classdesc ç©ºé´å³ç³»åææå¡ç±»ãè¯¥ç±»è´è´£å°å®¢æ·è®¾ç½®çç©ºé´å³ç³»åææå¡åæ°ä¼ éç»æå¡ç«¯ï¼å¹¶æ¥æ¶æå¡ç«¯è¿åçç©ºé´å³ç³»åæç»ææ°æ®ã
 * @param {string} url - æå¡çè®¿é®å°åãå¦ http://localhost:8090/iserver/services/spatialanalyst-changchun/restjsr/spatialanalystã
 * @param {Object} options - åæ°ã</br>
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @extends {SuperMap.SpatialAnalystBase}
 * @example å®ä¾åè¯¥ç±»å¦ä¸ä¾æç¤ºï¼
 * (start code)
 *  function datasetGeoRelationAnalystProcess() {
     *      var referenceFilter = new SuperMap.FilterParameter({
     *                              name:"Frame_R@Changchun",
     *                              attributeFilter:"SmID>0"});
     *      var sourceFilter = new SuperMap.FilterParameter({
     *                          attributeFilter:"SmID>0"});
     *      //åå§åæå¡ç±»
     *      var datasetGeoRelationService = new SuperMap.GeoRelationAnalystService(
     *          "http://localhost:8090/iserver/services/spatialanalyst-changchun/restjsr/spatialanalyst/"),
     *      //æå»ºåæ°ç±»
     *      datasetGeoRelationParameters = new SuperMap.GeoRelationAnalystParameters({
     *          dataset: "Park@Changchun",
     *          startRecord: 0,
     *          expectCount: 20,
     *          sourceFilter: sourceFilter,
     *          referenceFilter: referenceFilter,
     *          spatialRelationType: SuperMap.SpatialRelationType.INTERSECT,
     *          isBorderInside: true,
     *          returnFeature: true,
     *          returnGeoRelatedOnly: true
     *      });
     *      datasetGeoRelationService.events.on({
     *          "processCompleted": datasetGeoRelationAnalystCompleted,
     *          "processFailed": datasetGeoRelationAnalystFailed});
     *      //æ§è¡
     *      datasetGeoRelationService.processAsync(datasetGeoRelationParameters);
     *  }
 *  function Completed(datasetGeoRelationAnalystCompleted){//todo};
 *  function Error(datasetGeoRelationAnalystFailed){//todo};
 * (end)
 *
 */

var GeoRelationAnalystService = /*#__PURE__*/function (_SpatialAnalystBase) {
  GeoRelationAnalystService_inherits(GeoRelationAnalystService, _SpatialAnalystBase);

  var _super = GeoRelationAnalystService_createSuper(GeoRelationAnalystService);

  function GeoRelationAnalystService(url, options) {
    var _this;

    GeoRelationAnalystService_classCallCheck(this, GeoRelationAnalystService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.GeoRelationAnalystService";
    return _this;
  }
  /**
   * @function SuperMap.GeoRelationAnalystService.prototype.destroy
   * @override
   */


  GeoRelationAnalystService_createClass(GeoRelationAnalystService, [{
    key: "destroy",
    value: function destroy() {
      GeoRelationAnalystService_get(GeoRelationAnalystService_getPrototypeOf(GeoRelationAnalystService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.GeoRelationAnalystService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çç©ºé´å³ç³»åæåæ°ä¼ éå°æå¡ç«¯
     * @param {SuperMap.GeoRelationAnalystParameters} parameter - ç©ºé´å³ç³»åææéçåæ°ä¿¡æ¯ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(parameter) {
      if (!(parameter instanceof GeoRelationAnalystParameters)) {
        return;
      }

      var me = this;
      me.url = Util.urlPathAppend(me.url, 'datasets/' + parameter.dataset + '/georelation');
      var jsonParameters = SuperMap.Util.toJSON(parameter);
      me.url = Util.urlAppend(me.url, 'returnContent=true');
      me.request({
        method: "POST",
        data: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return GeoRelationAnalystService;
}(SpatialAnalystBase);
SuperMap.GeoRelationAnalystService = GeoRelationAnalystService;
// CONCATENATED MODULE: ./src/common/iServer/GetFeaturesParametersBase.js
function GetFeaturesParametersBase_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GetFeaturesParametersBase_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GetFeaturesParametersBase_createClass(Constructor, protoProps, staticProps) { if (protoProps) GetFeaturesParametersBase_defineProperties(Constructor.prototype, protoProps); if (staticProps) GetFeaturesParametersBase_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.GetFeaturesParametersBase
 * @category  iServer Data FeatureResults
 * @classdesc è¦ç´ æ¥è¯¢åæ°åºç±»ã
 * @param {Object} options - åæ°ã 
 * @param {Array.<string>} options.datasetNames - æ°æ®ééåä¸­çæ°æ®éåç§°åè¡¨ã 
 * @param {boolean} [options.returnContent=true] - æ¯å¦ç´æ¥è¿åæ¥è¯¢ç»æã 
 * @param {number} [options.fromIndex=0] - æ¥è¯¢ç»æçæå°ç´¢å¼å·ã 
 * @param {number} [options.toIndex=19] - æ¥è¯¢ç»æçæå¤§ç´¢å¼å·ã 
 * @param {string|number} [options.targetEpsgCode] - å¨ææå½±çç®æ åæ ç³»å¯¹åºç EPSG Codeï¼ä½¿ç¨æ­¤åæ°æ¶ï¼returnContent åæ°éä¸º trueã
 * @param {Object} [options.targetPrj] - å¨ææå½±çç®æ åæ ç³»ãä½¿ç¨æ­¤åæ°æ¶ï¼returnContent åæ°éä¸º trueã å¦ï¼prjCoordSys={"epsgCode":3857}ãå½åæ¶è®¾ç½® targetEpsgCode åæ°æ¶ï¼æ­¤åæ°ä¸çæã
 */

var GetFeaturesParametersBase = /*#__PURE__*/function () {
  function GetFeaturesParametersBase(options) {
    GetFeaturesParametersBase_classCallCheck(this, GetFeaturesParametersBase);

    /**
     * @member {Array.<string>} SuperMap.GetFeaturesParametersBase.prototype.datasetName
     * @description æ°æ®ééåä¸­çæ°æ®éåç§°åè¡¨ã
     */
    this.datasetNames = null;
    /**
     * @member {string} SuperMap.GetFeaturesParametersBase.prototype.targetEpsgCode
     * @description å¨ææå½±çç®æ åæ ç³»å¯¹åºç EPSG Codeï¼ä½¿ç¨æ¶éè®¾ç½® returnContent åæ°ä¸º trueã
     */

    this.targetEpsgCode = null;
    /**
     * @member {Object} SuperMap.GetFeaturesParametersBase.prototype.targetEpsgCode
     * @description å¨ææå½±çç®æ åæ ç³»ãä½¿ç¨æ¶éè®¾ç½® returnContent åæ°ä¸º trueã å¦ï¼prjCoordSys={"epsgCode":3857}ãå½åæ¶è®¾ç½® targetEpsgCode åæ°æ¶ï¼æ­¤åæ°ä¸çæã
     */

    this.targetPrj = null;
    /**
     * @member {boolean} [SuperMap.GetFeaturesParametersBase.prototype.returnContent=true]
     * @description æ¯å¦ç«å³è¿åæ°åå»ºèµæºçè¡¨è¿°è¿æ¯è¿åæ°èµæºç URIã
     *              å¦æä¸º trueï¼åç´æ¥è¿åæ°åå»ºèµæºï¼å³æ¥è¯¢ç»æçè¡¨è¿°ã
     *              å¦æä¸º falseï¼åè¿åçæ¯æ¥è¯¢ç»æèµæºç URIã
     */

    this.returnContent = true;
    /**
     * @member {number} [SuperMap.GetFeaturesParametersBase.prototype.fromIndex=0]
     * @description æ¥è¯¢ç»æçæå°ç´¢å¼å·ãå¦æè¯¥å¼å¤§äºæ¥è¯¢ç»æçæå¤§ç´¢å¼å·ï¼åæ¥è¯¢ç»æä¸ºç©ºã
     */

    this.fromIndex = 0;
    /**
     * @member {number} [SuperMap.GetFeaturesParametersBase.prototype.toIndex=19]
     * @description æ¥è¯¢ç»æçæå¤§ç´¢å¼å·ãå¦æè¯¥å¼å¤§äºæ¥è¯¢ç»æçæå¤§ç´¢å¼å·ï¼åä»¥æ¥è¯¢ç»æçæå¤§ç´¢å¼å·ä¸ºç»æ­¢ç´¢å¼å·ã
     */

    this.toIndex = 19;
    /**
     * @member {boolean} [SuperMap.GetFeaturesParametersBase.prototype.returnCountOnly=false]
     * @description åªè¿åæ¥è¯¢ç»æçæ»æ°ã
     */

    this.returnCountOnly = false;
    /**
     * @member {number} [SuperMap.GetFeaturesParametersBase.prototype.maxFeatures=1000]
     * @description è¿è¡ SQL æ¥è¯¢æ¶ï¼ç¨äºè®¾ç½®æå¡ç«¯è¿åæ¥è¯¢ç»ææ¡ç®æ°éã
     */

    this.maxFeatures = null;
    /**
     * @member {Object} SuperMap.GetFeaturesParametersBase.prototype.aggregations
     * @description èåæ¥è¯¢åæ°ï¼è¯¥åæ°ä»æ¯ææ°æ®æ¥æº Elasticsearch æå¡çæ°æ®æå¡ã
     */

    this.aggregations = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.GetFeaturesParametersBase";
  }
  /**
   *
   * @function SuperMap.GetFeaturesParametersBase.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  GetFeaturesParametersBase_createClass(GetFeaturesParametersBase, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.datasetNames = null;
      me.returnContent = null;
      me.fromIndex = null;
      me.toIndex = null;
      me.maxFeatures = null;
      me.targetEpsgCode = null;
      me.targetPrj = null;

      if (me.aggregation) {
        me.aggregation = null;
      }
    }
  }]);

  return GetFeaturesParametersBase;
}();
SuperMap.GetFeaturesParametersBase = GetFeaturesParametersBase;
// CONCATENATED MODULE: ./src/common/iServer/GetFeaturesByBoundsParameters.js
function GetFeaturesByBoundsParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GetFeaturesByBoundsParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { GetFeaturesByBoundsParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GetFeaturesByBoundsParameters_typeof(obj); }

function GetFeaturesByBoundsParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GetFeaturesByBoundsParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GetFeaturesByBoundsParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) GetFeaturesByBoundsParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) GetFeaturesByBoundsParameters_defineProperties(Constructor, staticProps); return Constructor; }

function GetFeaturesByBoundsParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GetFeaturesByBoundsParameters_get = Reflect.get; } else { GetFeaturesByBoundsParameters_get = function _get(target, property, receiver) { var base = GetFeaturesByBoundsParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GetFeaturesByBoundsParameters_get(target, property, receiver || target); }

function GetFeaturesByBoundsParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GetFeaturesByBoundsParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function GetFeaturesByBoundsParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GetFeaturesByBoundsParameters_setPrototypeOf(subClass, superClass); }

function GetFeaturesByBoundsParameters_setPrototypeOf(o, p) { GetFeaturesByBoundsParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GetFeaturesByBoundsParameters_setPrototypeOf(o, p); }

function GetFeaturesByBoundsParameters_createSuper(Derived) { var hasNativeReflectConstruct = GetFeaturesByBoundsParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GetFeaturesByBoundsParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GetFeaturesByBoundsParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GetFeaturesByBoundsParameters_possibleConstructorReturn(this, result); }; }

function GetFeaturesByBoundsParameters_possibleConstructorReturn(self, call) { if (call && (GetFeaturesByBoundsParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return GetFeaturesByBoundsParameters_assertThisInitialized(self); }

function GetFeaturesByBoundsParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GetFeaturesByBoundsParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GetFeaturesByBoundsParameters_getPrototypeOf(o) { GetFeaturesByBoundsParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GetFeaturesByBoundsParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.GetFeaturesByBoundsParameters
 * @category iServer Data FeatureResults
 * @classdesc æ°æ®éèå´æ¥è¯¢åæ°ç±»ï¼è¯¥ç±»ç¨äºè®¾ç½®æ°æ®éèå´æ¥è¯¢çç¸å³åæ°ã
 * @param {Object} options - åæ°ã 
 * @param {(SuperMap.Bounds|L.Bounds|ol.extent)} options.bounds - ç¨äºæ¥è¯¢çèå´å¯¹è±¡ã 
 * @param {Array.<string>} options.datasetNames - æ°æ®ééåä¸­çæ°æ®éåç§°åè¡¨ã 
 * @param {string} [options.attributeFilter] - èå´æ¥è¯¢å±æ§è¿æ»¤æ¡ä»¶ã 
 * @param {Array.<string>} [options.fields] - è®¾ç½®æ¥è¯¢ç»æè¿åå­æ®µãé»è®¤è¿åææå­æ®µã 
 * @param {SuperMap.SpatialQueryMode} [options.spatialQueryMode=SuperMap.SpatialQueryMode.CONTAIN] - ç©ºé´æ¥è¯¢æ¨¡å¼å¸¸éã 
 * @param {boolean} [options.returnContent=true] - æ¯å¦ç´æ¥è¿åæ¥è¯¢ç»æã 
 * @param {number} [options.fromIndex=0] - æ¥è¯¢ç»æçæå°ç´¢å¼å·ã 
 * @param {number} [options.toIndex=19] - æ¥è¯¢ç»æçæå¤§ç´¢å¼å·ã 
 * @param {string|number} [options.targetEpsgCode] - å¨ææå½±çç®æ åæ ç³»å¯¹åºç EPSG Codeï¼ä½¿ç¨æ­¤åæ°æ¶ï¼returnContent åæ°éä¸º trueã
 * @param {Object} [options.targetPrj] - å¨ææå½±çç®æ åæ ç³»ãä½¿ç¨æ­¤åæ°æ¶ï¼returnContent åæ°éä¸º trueã å¦ï¼prjCoordSys={"epsgCode":3857}ãå½åæ¶è®¾ç½® targetEpsgCode åæ°æ¶ï¼æ­¤åæ°ä¸çæã
 * @extends {SuperMap.GetFeaturesParametersBase}
 */

var GetFeaturesByBoundsParameters = /*#__PURE__*/function (_GetFeaturesParameter) {
  GetFeaturesByBoundsParameters_inherits(GetFeaturesByBoundsParameters, _GetFeaturesParameter);

  var _super = GetFeaturesByBoundsParameters_createSuper(GetFeaturesByBoundsParameters);

  function GetFeaturesByBoundsParameters(options) {
    var _this;

    GetFeaturesByBoundsParameters_classCallCheck(this, GetFeaturesByBoundsParameters);

    _this = _super.call(this, options);
    /**
     * @member {string} SuperMap.GetFeaturesByBoundsParameters.prototype.getFeatureMode
     * @description æ°æ®éæ¥è¯¢æ¨¡å¼ãèå´æ¥è¯¢æ "BOUNDS"ï¼"BOUNDS_ATTRIBUTEFILTER" ä¸¤ç§ï¼å½ç¨æ·è®¾ç½® attributeFilter æ¶ä¼èªå¨åæ¢å° BOUNDS_ATTRIBUTEFILTER è®¿é®æå¡ã
     */

    _this.getFeatureMode = GetFeaturesByBoundsParameters.getFeatureMode.BOUNDS;
    /**
     * @member {(SuperMap.Bounds|L.Bounds|ol.extent)} SuperMap.GetFeaturesByBoundsParameters.prototype.bounds
     * @description ç¨äºæ¥è¯¢çèå´å¯¹è±¡ã
     *
     */

    _this.bounds = null;
    /**
     * @member {Array.<string>} SuperMap.GetFeaturesByBoundsParameters.prototype.fields
     * @description è®¾ç½®æ¥è¯¢ç»æè¿åå­æ®µãå½æå®äºè¿åç»æå­æ®µåï¼å GetFeaturesResult ä¸­ç features çå±æ§å­æ®µåªåå«ææå®çå­æ®µãä¸è®¾ç½®å³è¿åå¨é¨å­æ®µã
     */

    _this.fields = null;
    /**
     * @member {string} SuperMap.GetFeaturesByBoundsParameters.prototype.attributeFilter
     * @description èå´æ¥è¯¢å±æ§è¿æ»¤æ¡ä»¶ã
     */

    _this.attributeFilter = null;
    /**
     * @member {SuperMap.SpatialQueryMode} [SuperMap.GetFeaturesByBoundsParameters.prototype.spatialQueryMode=SuperMap.SpatialQueryMode.CONTAIN]
     * @description ç©ºé´æ¥è¯¢æ¨¡å¼å¸¸éã
     */

    _this.spatialQueryMode = SpatialQueryMode.CONTAIN;
    Util.extend(GetFeaturesByBoundsParameters_assertThisInitialized(_this), options);
    _this.CLASS_NAME = "SuperMap.GetFeaturesByBoundsParameters";
    return _this;
  }
  /**
   * @function SuperMap.GetFeaturesByBoundsParameters.prototype.destroy
   * @override
   */


  GetFeaturesByBoundsParameters_createClass(GetFeaturesByBoundsParameters, [{
    key: "destroy",
    value: function destroy() {
      GetFeaturesByBoundsParameters_get(GetFeaturesByBoundsParameters_getPrototypeOf(GetFeaturesByBoundsParameters.prototype), "destroy", this).call(this);

      var me = this;

      if (me.bounds) {
        me.bounds.destroy();
        me.bounds = null;
      }

      if (me.fields) {
        while (me.fields.length > 0) {
          me.fields.pop();
        }

        me.fields = null;
      }

      me.attributeFilter = null;
      me.spatialQueryMode = null;
      me.getFeatureMode = null;
    }
    /**
     * @function SuperMap.GetFeaturesByBoundsParameters.toJsonParameters
     * @description å° {@link SuperMap.GetFeaturesByBoundsParameters} å¯¹è±¡åæ°è½¬æ¢ä¸º JSON å­ç¬¦ä¸²ã
     * @param {SuperMap.GetFeaturesByBoundsParameters} params - èå´æ¥è¯¢åæ°ã
     * @returns {string} è½¬ååç JSON å­ç¬¦ä¸²ã
     *
     */

  }], [{
    key: "toJsonParameters",
    value: function toJsonParameters(params) {
      var filterParameter, bounds, parasByBounds;
      bounds = {
        "leftBottom": {
          "x": params.bounds.left,
          "y": params.bounds.bottom
        },
        "rightTop": {
          "x": params.bounds.right,
          "y": params.bounds.top
        }
      };
      parasByBounds = {
        datasetNames: params.datasetNames,
        getFeatureMode: GetFeaturesByBoundsParameters.getFeatureMode.BOUNDS,
        bounds: bounds,
        spatialQueryMode: params.spatialQueryMode
      };

      if (params.fields) {
        filterParameter = new FilterParameter();
        filterParameter.name = params.datasetNames;
        filterParameter.fields = params.fields;
        parasByBounds.queryParameter = filterParameter;
      }

      if (params.attributeFilter) {
        parasByBounds.attributeFilter = params.attributeFilter;
        parasByBounds.getFeatureMode = GetFeaturesByBoundsParameters.getFeatureMode.BOUNDS_ATTRIBUTEFILTER;
      }

      if (params.maxFeatures && !isNaN(params.maxFeatures)) {
        parasByBounds.maxFeatures = params.maxFeatures;
      }

      if (params.targetEpsgCode) {
        parasByBounds.targetEpsgCode = params.targetEpsgCode;
      }

      if (!params.targetEpsgCode && params.targetPrj) {
        parasByBounds.targetPrj = params.targetPrj;
      }

      return Util.toJSON(parasByBounds);
    }
  }]);

  return GetFeaturesByBoundsParameters;
}(GetFeaturesParametersBase);
GetFeaturesByBoundsParameters.getFeatureMode = {
  "BOUNDS": "BOUNDS",
  "BOUNDS_ATTRIBUTEFILTER": "BOUNDS_ATTRIBUTEFILTER"
};
SuperMap.GetFeaturesByBoundsParameters = GetFeaturesByBoundsParameters;
// CONCATENATED MODULE: ./src/common/iServer/GetFeaturesServiceBase.js
function GetFeaturesServiceBase_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GetFeaturesServiceBase_typeof = function _typeof(obj) { return typeof obj; }; } else { GetFeaturesServiceBase_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GetFeaturesServiceBase_typeof(obj); }

function GetFeaturesServiceBase_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GetFeaturesServiceBase_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GetFeaturesServiceBase_createClass(Constructor, protoProps, staticProps) { if (protoProps) GetFeaturesServiceBase_defineProperties(Constructor.prototype, protoProps); if (staticProps) GetFeaturesServiceBase_defineProperties(Constructor, staticProps); return Constructor; }

function GetFeaturesServiceBase_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GetFeaturesServiceBase_get = Reflect.get; } else { GetFeaturesServiceBase_get = function _get(target, property, receiver) { var base = GetFeaturesServiceBase_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GetFeaturesServiceBase_get(target, property, receiver || target); }

function GetFeaturesServiceBase_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GetFeaturesServiceBase_getPrototypeOf(object); if (object === null) break; } return object; }

function GetFeaturesServiceBase_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GetFeaturesServiceBase_setPrototypeOf(subClass, superClass); }

function GetFeaturesServiceBase_setPrototypeOf(o, p) { GetFeaturesServiceBase_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GetFeaturesServiceBase_setPrototypeOf(o, p); }

function GetFeaturesServiceBase_createSuper(Derived) { var hasNativeReflectConstruct = GetFeaturesServiceBase_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GetFeaturesServiceBase_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GetFeaturesServiceBase_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GetFeaturesServiceBase_possibleConstructorReturn(this, result); }; }

function GetFeaturesServiceBase_possibleConstructorReturn(self, call) { if (call && (GetFeaturesServiceBase_typeof(call) === "object" || typeof call === "function")) { return call; } return GetFeaturesServiceBase_assertThisInitialized(self); }

function GetFeaturesServiceBase_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GetFeaturesServiceBase_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GetFeaturesServiceBase_getPrototypeOf(o) { GetFeaturesServiceBase_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GetFeaturesServiceBase_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.GetFeaturesServiceBase
 * @category  iServer Data FeatureResults
 * @classdesc æ°æ®æå¡ä¸­æ°æ®éæ¥è¯¢æå¡åºç±»ãè·åç»ææ°æ®ç±»åä¸º Objectãåå« result å±æ§ï¼result çæ°æ®æ ¼å¼æ ¹æ® format åæ°å³å®ä¸º GeoJSON æè iServerJSONã
 * @extends SuperMap.CommonServiceBase
 * @param {string} url - æ°æ®æ¥è¯¢ç»æèµæºå°åãè¯·æ±æ°æ®æå¡ä¸­æ°æ®éæ¥è¯¢æå¡ï¼
 * URLåºä¸ºï¼http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{æ°æ®æå¡å}/rest/data/
 * ä¾å¦ï¼"http://localhost:8090/iserver/services/data-jingjin/rest/data/"
 * @param {Object} options - åæ°ã 
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæ processCompleted å±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailed å±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã 
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã 
 * @param {SuperMap.DataFormat} [options.format=SuperMap.DataFormat.GEOJSON] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @example
 * var myService = new SuperMap.GetFeaturesServiceBase(url, {
 *     eventListeners: {
 *         "processCompleted": getFeatureCompleted,
 *         "processFailed": getFeatureError
 *     }
 * });
 */

var GetFeaturesServiceBase = /*#__PURE__*/function (_CommonServiceBase) {
  GetFeaturesServiceBase_inherits(GetFeaturesServiceBase, _CommonServiceBase);

  var _super = GetFeaturesServiceBase_createSuper(GetFeaturesServiceBase);

  function GetFeaturesServiceBase(url, options) {
    var _this;

    GetFeaturesServiceBase_classCallCheck(this, GetFeaturesServiceBase);

    _this = _super.call(this, url, options);
    options = options || {};
    /**
     * @member {boolean} [SuperMap.GetFeaturesServiceBase.prototype.returnContent=true]
     * @description æ¯å¦ç«å³è¿åæ°åå»ºèµæºçè¡¨è¿°è¿æ¯è¿åæ°èµæºç URIã
     * å¦æä¸º trueï¼åç´æ¥è¿åæ°åå»ºèµæºï¼å³æ¥è¯¢ç»æçè¡¨è¿°ã
     * å¦æä¸º falseï¼åè¿åçæ¯æ¥è¯¢ç»æèµæºç URIã
     */

    _this.returnContent = true;
    /**
     * @member {number} [SuperMap.GetFeaturesServiceBase.prototype.fromIndex=0]
     * @description æ¥è¯¢ç»æçæå°ç´¢å¼å·ãå¦æè¯¥å¼å¤§äºæ¥è¯¢ç»æçæå¤§ç´¢å¼å·ï¼åæ¥è¯¢ç»æä¸ºç©ºã
     */

    _this.fromIndex = 0;
    /**
     * @member {number} [SuperMap.GetFeaturesServiceBase.prototype.toIndex=19]
     * @description æ¥è¯¢ç»æçæå¤§ç´¢å¼å·ã
     * å¦æè¯¥å¼å¤§äºæ¥è¯¢ç»æçæå¤§ç´¢å¼å·ï¼åä»¥æ¥è¯¢ç»æçæå¤§ç´¢å¼å·ä¸ºç»æ­¢ç´¢å¼å·ã
     */

    _this.toIndex = 19;
    /**
     * @member {number} [SuperMap.GetFeaturesServiceBase.prototype.maxFeatures=1000]
     * @description è¿è¡ SQL æ¥è¯¢æ¶ï¼ç¨äºè®¾ç½®æå¡ç«¯è¿åæ¥è¯¢ç»ææ¡ç®æ°éã
     */

    _this.maxFeatures = null;
    /**
     * @member {string} [SuperMap.GetFeaturesServiceBase.prototype.format=SuperMap.DataFormat.GEOJSON]
     * @description æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ã
     * åæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
     */

    _this.format = DataFormat.GEOJSON;
    Util.extend(GetFeaturesServiceBase_assertThisInitialized(_this), options);
    _this.url = Util.urlPathAppend(_this.url, 'featureResults');
    _this.CLASS_NAME = "SuperMap.GetFeaturesServiceBase";
    return _this;
  }
  /**
   * @function SuperMap.GetFeaturesServiceBase.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  GetFeaturesServiceBase_createClass(GetFeaturesServiceBase, [{
    key: "destroy",
    value: function destroy() {
      GetFeaturesServiceBase_get(GetFeaturesServiceBase_getPrototypeOf(GetFeaturesServiceBase.prototype), "destroy", this).call(this);

      var me = this;
      me.returnContent = null;
      me.fromIndex = null;
      me.toIndex = null;
      me.maxFeatures = null;
      me.format = null;
    }
    /**
     * @function SuperMap.GetFeaturesServiceBase.prototype.processAsync
     * @description å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {Object} params - æ¥è¯¢åæ°ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!params) {
        return;
      }

      var me = this,
          jsonParameters = null,
          firstPara = true;
      me.returnContent = params.returnContent;
      me.fromIndex = params.fromIndex;
      me.toIndex = params.toIndex;
      me.maxFeatures = params.maxFeatures;

      if (me.returnContent) {
        me.url = Util.urlAppend(me.url, 'returnContent=' + me.returnContent);
        firstPara = false;
      }

      var isValidNumber = me.fromIndex != null && me.toIndex != null && !isNaN(me.fromIndex) && !isNaN(me.toIndex);

      if (isValidNumber && me.fromIndex >= 0 && me.toIndex >= 0 && !firstPara) {
        me.url = Util.urlAppend(me.url, "fromIndex=".concat(me.fromIndex, "&toIndex=").concat(me.toIndex));
      }

      if (params.returnCountOnly) {
        me.url = Util.urlAppend(me.url, "&returnCountOnly=" + params.returnContent);
      }

      jsonParameters = me.getJsonParameters(params);
      me.request({
        method: "POST",
        data: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.GetFeaturesServiceBase.prototype.getFeatureComplete
     * @description æ¥è¯¢å®æï¼æ§è¡æ­¤æ¹æ³ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     */

  }, {
    key: "serviceProcessCompleted",
    value: function serviceProcessCompleted(result) {
      var me = this;
      result = Util.transformResult(result);

      if (me.format === DataFormat.GEOJSON && result.features) {
        var geoJSONFormat = new GeoJSON();
        result.features = geoJSONFormat.toGeoJSON(result.features);
      }

      me.events.triggerEvent("processCompleted", {
        result: result
      });
    }
  }]);

  return GetFeaturesServiceBase;
}(CommonServiceBase);
SuperMap.GetFeaturesServiceBase = GetFeaturesServiceBase;
// CONCATENATED MODULE: ./src/common/iServer/GetFeaturesByBoundsService.js
function GetFeaturesByBoundsService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GetFeaturesByBoundsService_typeof = function _typeof(obj) { return typeof obj; }; } else { GetFeaturesByBoundsService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GetFeaturesByBoundsService_typeof(obj); }

function GetFeaturesByBoundsService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GetFeaturesByBoundsService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GetFeaturesByBoundsService_createClass(Constructor, protoProps, staticProps) { if (protoProps) GetFeaturesByBoundsService_defineProperties(Constructor.prototype, protoProps); if (staticProps) GetFeaturesByBoundsService_defineProperties(Constructor, staticProps); return Constructor; }

function GetFeaturesByBoundsService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GetFeaturesByBoundsService_get = Reflect.get; } else { GetFeaturesByBoundsService_get = function _get(target, property, receiver) { var base = GetFeaturesByBoundsService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GetFeaturesByBoundsService_get(target, property, receiver || target); }

function GetFeaturesByBoundsService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GetFeaturesByBoundsService_getPrototypeOf(object); if (object === null) break; } return object; }

function GetFeaturesByBoundsService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GetFeaturesByBoundsService_setPrototypeOf(subClass, superClass); }

function GetFeaturesByBoundsService_setPrototypeOf(o, p) { GetFeaturesByBoundsService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GetFeaturesByBoundsService_setPrototypeOf(o, p); }

function GetFeaturesByBoundsService_createSuper(Derived) { var hasNativeReflectConstruct = GetFeaturesByBoundsService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GetFeaturesByBoundsService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GetFeaturesByBoundsService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GetFeaturesByBoundsService_possibleConstructorReturn(this, result); }; }

function GetFeaturesByBoundsService_possibleConstructorReturn(self, call) { if (call && (GetFeaturesByBoundsService_typeof(call) === "object" || typeof call === "function")) { return call; } return GetFeaturesByBoundsService_assertThisInitialized(self); }

function GetFeaturesByBoundsService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GetFeaturesByBoundsService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GetFeaturesByBoundsService_getPrototypeOf(o) { GetFeaturesByBoundsService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GetFeaturesByBoundsService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.GetFeaturesByBoundsService
 * @category iServer Data FeatureResults
 * @classdesc æ°æ®éèå´æ¥è¯¢æå¡ç±»,æ¥è¯¢ä¸æå®èå´å¯¹è±¡ç¬¦åä¸å®ç©ºé´å³ç³»çç¢éè¦ç´ ã
 * @description æ°æ®éèå´æ¥è¯¢æå¡ç±»æé å½æ°ã
 * @extends {SuperMap.GetFeaturesServiceBase}
 * @param {string} url - æ°æ®æ¥è¯¢ç»æèµæºå°åãè¯·æ±æ°æ®æå¡ä¸­æ°æ®éæ¥è¯¢æå¡ï¼URL åºä¸ºï¼http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{æ°æ®æå¡å}/rest/data/ï¼
 * ä¾å¦ï¼"http://localhost:8090/iserver/services/data-jingjin/rest/data/"
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæ processCompleted å±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailed å±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã 
 * @param {SuperMap.DataFormat} [options.format=SuperMap.DataFormat.GEOJSON] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @example
 * var myGetFeaturesByBoundsService = new SuperMa.GetFeaturesByBoundsService(url, {
 *     eventListeners: {
 *           "processCompleted": getFeatureCompleted,
 *           "processFailed": getFeatureError
 *           }
 * });
 * function getFeatureCompleted(object){//todo};
 * function getFeatureError(object){//todo}
 */

var GetFeaturesByBoundsService = /*#__PURE__*/function (_GetFeaturesServiceBa) {
  GetFeaturesByBoundsService_inherits(GetFeaturesByBoundsService, _GetFeaturesServiceBa);

  var _super = GetFeaturesByBoundsService_createSuper(GetFeaturesByBoundsService);

  function GetFeaturesByBoundsService(url, options) {
    var _this;

    GetFeaturesByBoundsService_classCallCheck(this, GetFeaturesByBoundsService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.GetFeaturesByBoundsService";
    return _this;
  }
  /**
   * @function SuperMap.GetFeaturesByBoundsService.prototype.destroy
   * @override
   */


  GetFeaturesByBoundsService_createClass(GetFeaturesByBoundsService, [{
    key: "destroy",
    value: function destroy() {
      GetFeaturesByBoundsService_get(GetFeaturesByBoundsService_getPrototypeOf(GetFeaturesByBoundsService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.GetFeaturesByBoundsService.prototype.getJsonParameters
     * @description å°æ¥è¯¢åæ°è½¬åä¸º JSON å­ç¬¦ä¸²ãå¨æ¬ç±»ä¸­éåæ­¤æ¹æ³ï¼å¯ä»¥å®ç°ä¸åç§ç±»çæ¥è¯¢ï¼ID, SQL, Buffer, Geometry,Boundsç­ï¼ã
     * @param params {SuperMap.GetFeaturesByBoundsParameters}
     * @returns {string} è½¬ååç JSON å­ç¬¦ä¸²ã
     *
     */

  }, {
    key: "getJsonParameters",
    value: function getJsonParameters(params) {
      return GetFeaturesByBoundsParameters.toJsonParameters(params);
    }
  }]);

  return GetFeaturesByBoundsService;
}(GetFeaturesServiceBase);
SuperMap.GetFeaturesByBoundsService = GetFeaturesByBoundsService;
// CONCATENATED MODULE: ./src/common/iServer/GetFeaturesByBufferParameters.js
function GetFeaturesByBufferParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GetFeaturesByBufferParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { GetFeaturesByBufferParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GetFeaturesByBufferParameters_typeof(obj); }

function GetFeaturesByBufferParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GetFeaturesByBufferParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GetFeaturesByBufferParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) GetFeaturesByBufferParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) GetFeaturesByBufferParameters_defineProperties(Constructor, staticProps); return Constructor; }

function GetFeaturesByBufferParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GetFeaturesByBufferParameters_get = Reflect.get; } else { GetFeaturesByBufferParameters_get = function _get(target, property, receiver) { var base = GetFeaturesByBufferParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GetFeaturesByBufferParameters_get(target, property, receiver || target); }

function GetFeaturesByBufferParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GetFeaturesByBufferParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function GetFeaturesByBufferParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GetFeaturesByBufferParameters_setPrototypeOf(subClass, superClass); }

function GetFeaturesByBufferParameters_setPrototypeOf(o, p) { GetFeaturesByBufferParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GetFeaturesByBufferParameters_setPrototypeOf(o, p); }

function GetFeaturesByBufferParameters_createSuper(Derived) { var hasNativeReflectConstruct = GetFeaturesByBufferParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GetFeaturesByBufferParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GetFeaturesByBufferParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GetFeaturesByBufferParameters_possibleConstructorReturn(this, result); }; }

function GetFeaturesByBufferParameters_possibleConstructorReturn(self, call) { if (call && (GetFeaturesByBufferParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return GetFeaturesByBufferParameters_assertThisInitialized(self); }

function GetFeaturesByBufferParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GetFeaturesByBufferParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GetFeaturesByBufferParameters_getPrototypeOf(o) { GetFeaturesByBufferParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GetFeaturesByBufferParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.GetFeaturesByBufferParameters
 * @category iServer Data FeatureResults
 * @classdesc æ°æ®æå¡ä¸­æ°æ®éç¼å²åºæ¥è¯¢åæ°ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {number} options.bufferDistance - buffer è·ç¦»ï¼åä½ä¸ææ¥è¯¢å¾å±å¯¹åºçæ°æ®éåä½ç¸åã  
 * @param {Object} options.geometry - ç©ºé´æ¥è¯¢æ¡ä»¶ã</br>
 * @param {Array.<string>} options.dataSetNames - æ°æ®ééåä¸­çæ°æ®éåç§°åè¡¨ã  
 * @param {Array.<string>} [options.fields] - è®¾ç½®æ¥è¯¢ç»æè¿åå­æ®µãé»è®¤è¿åææå­æ®µã  
 * @param {string} [options.attributeFilter] - å±æ§æ¥è¯¢æ¡ä»¶ã   
 * @param {boolean} [options.returnContent=true] - æ¯å¦ç´æ¥è¿åæ¥è¯¢ç»æã  
 * @param {number} [options.fromIndex=0] - æ¥è¯¢ç»æçæå°ç´¢å¼å·ã  
 * @param {number} [options.toIndex=19] - æ¥è¯¢ç»æçæå¤§ç´¢å¼å·ã  
 * @param {string|number} [options.targetEpsgCode] - å¨ææå½±çç®æ åæ ç³»å¯¹åºç EPSG Codeï¼ä½¿ç¨æ­¤åæ°æ¶ï¼returnContent åæ°éä¸º trueã
 * @param {Object} [options.targetPrj] - å¨ææå½±çç®æ åæ ç³»ãä½¿ç¨æ­¤åæ°æ¶ï¼returnContent åæ°éä¸º trueã å¦ï¼prjCoordSys={"epsgCode":3857}ãå½åæ¶è®¾ç½® targetEpsgCode åæ°æ¶ï¼æ­¤åæ°ä¸çæã
 * @extends {SuperMap.GetFeaturesParametersBase}
 */

var GetFeaturesByBufferParameters = /*#__PURE__*/function (_GetFeaturesParameter) {
  GetFeaturesByBufferParameters_inherits(GetFeaturesByBufferParameters, _GetFeaturesParameter);

  var _super = GetFeaturesByBufferParameters_createSuper(GetFeaturesByBufferParameters);

  function GetFeaturesByBufferParameters(options) {
    var _this;

    GetFeaturesByBufferParameters_classCallCheck(this, GetFeaturesByBufferParameters);

    _this = _super.call(this, options);
    /**
     * @member {number} SuperMap.GetFeaturesByBufferParameters.prototype.bufferDistance
     * @description buffer è·ç¦»,åä½ä¸ææ¥è¯¢å¾å±å¯¹åºçæ°æ®éåä½ç¸åã
     */

    _this.bufferDistance = null;
    /**
     * @member {string} SuperMap.GetFeaturesByBufferParameters.prototype.attributeFilter
     * @description å±æ§æ¥è¯¢æ¡ä»¶ã
     */

    _this.attributeFilter = null;
    /**
     * @member {Object} SuperMap.GetFeaturesByBufferParameters.prototype.geometry
     * @description ç©ºé´æ¥è¯¢æ¡ä»¶ã <br>
     * ç¹ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.Point}|{@link L.Marker}|{@link L.CircleMarker}|{@link L.Circle}|{@link L.GeoJSON}|{@link ol.geom.Point}|{@link ol.format.GeoJSON}ã</br>
     * çº¿ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.LineString}|{@link SuperMap.Geometry.LinearRing}|{@link L.Polyline}|{@link L.GeoJSON}|{@link ol.geom.LineString}|{@link ol.format.GeoJSON}ã</br>  
     * é¢ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.Polygon}|{@link L.Polygon}|{@link L.GeoJSON}|{@link ol.geom.Polygon}|{@link ol.format.GeoJSON}ã  
     */

    _this.geometry = null;
    /**
     * @member {Array.<string>} SuperMap.GetFeaturesByBufferParameters.prototype.fields
     * @description è®¾ç½®æ¥è¯¢ç»æè¿åå­æ®µãå½æå®äºè¿åç»æå­æ®µåï¼å GetFeaturesResult ä¸­ç features çå±æ§å­æ®µåªåå«ææå®çå­æ®µãä¸è®¾ç½®å³è¿åå¨é¨å­æ®µã
     */

    _this.fields = null;
    Util.extend(GetFeaturesByBufferParameters_assertThisInitialized(_this), options);
    _this.CLASS_NAME = "SuperMap.GetFeaturesByBufferParameters";
    return _this;
  }
  /**
   * @function SuperMap.GetFeaturesByBufferParameters.prototype.destroy
   * @override
   */


  GetFeaturesByBufferParameters_createClass(GetFeaturesByBufferParameters, [{
    key: "destroy",
    value: function destroy() {
      GetFeaturesByBufferParameters_get(GetFeaturesByBufferParameters_getPrototypeOf(GetFeaturesByBufferParameters.prototype), "destroy", this).call(this);

      var me = this;
      me.bufferDistance = null;
      me.attributeFilter = null;

      if (me.fields) {
        while (me.fields.length > 0) {
          me.fields.pop();
        }

        me.fields = null;
      }

      if (me.geometry) {
        me.geometry.destroy();
        me.geometry = null;
      }
    }
    /**
     * @function SuperMap.GetFeaturesByBufferParameters.toJsonParameters
     * @description å° SuperMap.GetFeaturesByBufferParameters å¯¹è±¡è½¬æ¢ä¸º JSON å­ç¬¦ä¸²ã
     * @param {SuperMap.GetFeaturesByBufferParameters} params - æ°æ®éç¼å²åºæ¥è¯¢åæ°å¯¹è±¡ã
     * @returns {string} è½¬ååç JSON å­ç¬¦ä¸²ã
     */

  }], [{
    key: "toJsonParameters",
    value: function toJsonParameters(params) {
      var filterParameter, paramsBySql, geometry;
      geometry = ServerGeometry.fromGeometry(params.geometry);
      paramsBySql = {
        datasetNames: params.datasetNames,
        getFeatureMode: "BUFFER",
        bufferDistance: params.bufferDistance,
        geometry: geometry
      };

      if (params.fields) {
        filterParameter = new FilterParameter();
        filterParameter.name = params.datasetNames;
        filterParameter.fields = params.fields;
        paramsBySql.queryParameter = filterParameter;
      }

      if (params.attributeFilter) {
        paramsBySql.attributeFilter = params.attributeFilter;
        paramsBySql.getFeatureMode = "BUFFER_ATTRIBUTEFILTER";
      }

      if (params.maxFeatures && !isNaN(params.maxFeatures)) {
        paramsBySql.maxFeatures = params.maxFeatures;
      }

      if (params.targetEpsgCode) {
        paramsBySql.targetEpsgCode = params.targetEpsgCode;
      }

      if (!params.targetEpsgCode && params.targetPrj) {
        paramsBySql.targetPrj = params.targetPrj;
      }

      return Util.toJSON(paramsBySql);
    }
  }]);

  return GetFeaturesByBufferParameters;
}(GetFeaturesParametersBase);
SuperMap.GetFeaturesByBufferParameters = GetFeaturesByBufferParameters;
// CONCATENATED MODULE: ./src/common/iServer/GetFeaturesByBufferService.js
function GetFeaturesByBufferService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GetFeaturesByBufferService_typeof = function _typeof(obj) { return typeof obj; }; } else { GetFeaturesByBufferService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GetFeaturesByBufferService_typeof(obj); }

function GetFeaturesByBufferService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GetFeaturesByBufferService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GetFeaturesByBufferService_createClass(Constructor, protoProps, staticProps) { if (protoProps) GetFeaturesByBufferService_defineProperties(Constructor.prototype, protoProps); if (staticProps) GetFeaturesByBufferService_defineProperties(Constructor, staticProps); return Constructor; }

function GetFeaturesByBufferService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GetFeaturesByBufferService_get = Reflect.get; } else { GetFeaturesByBufferService_get = function _get(target, property, receiver) { var base = GetFeaturesByBufferService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GetFeaturesByBufferService_get(target, property, receiver || target); }

function GetFeaturesByBufferService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GetFeaturesByBufferService_getPrototypeOf(object); if (object === null) break; } return object; }

function GetFeaturesByBufferService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GetFeaturesByBufferService_setPrototypeOf(subClass, superClass); }

function GetFeaturesByBufferService_setPrototypeOf(o, p) { GetFeaturesByBufferService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GetFeaturesByBufferService_setPrototypeOf(o, p); }

function GetFeaturesByBufferService_createSuper(Derived) { var hasNativeReflectConstruct = GetFeaturesByBufferService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GetFeaturesByBufferService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GetFeaturesByBufferService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GetFeaturesByBufferService_possibleConstructorReturn(this, result); }; }

function GetFeaturesByBufferService_possibleConstructorReturn(self, call) { if (call && (GetFeaturesByBufferService_typeof(call) === "object" || typeof call === "function")) { return call; } return GetFeaturesByBufferService_assertThisInitialized(self); }

function GetFeaturesByBufferService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GetFeaturesByBufferService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GetFeaturesByBufferService_getPrototypeOf(o) { GetFeaturesByBufferService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GetFeaturesByBufferService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.GetFeaturesByBufferService
 * @category iServer Data FeatureResults
 * @classdesc æ°æ®æå¡ä¸­æ°æ®éç¼å²åºæ¥è¯¢æå¡ç±»ã
 * @param {string} url - æ°æ®æ¥è¯¢ç»æèµæºå°åãè¯·æ±æ°æ®æå¡ä¸­æ°æ®éæ¥è¯¢æå¡ï¼
 * URL åºä¸ºï¼http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{æ°æ®æå¡å}/rest/data/ï¼
 * ä¾å¦ï¼"http://localhost:8090/iserver/services/data-jingjin/rest/data/"
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæprocessCompletedå±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailedå±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã 
 * @param {SuperMap.DataFormat} [options.format=SuperMap.DataFormat.GEOJSON] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @extends {SuperMap.GetFeaturesServiceBase}
 * @example
 * var myGetFeaturesByBufferService = new SuperMap.GetFeaturesByBufferService(url, {
 *     eventListeners: {
 *           "processCompleted": GetFeaturesCompleted,
 *           "processFailed": GetFeaturesError
 *           }
 * });
 * function GetFeaturesCompleted(object){//todo};
 * function GetFeaturesError(object){//todo};
 */

var GetFeaturesByBufferService = /*#__PURE__*/function (_GetFeaturesServiceBa) {
  GetFeaturesByBufferService_inherits(GetFeaturesByBufferService, _GetFeaturesServiceBa);

  var _super = GetFeaturesByBufferService_createSuper(GetFeaturesByBufferService);

  function GetFeaturesByBufferService(url, options) {
    var _this;

    GetFeaturesByBufferService_classCallCheck(this, GetFeaturesByBufferService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.GetFeaturesByBufferService";
    return _this;
  }
  /**
   * @function SuperMap.GetFeaturesByBufferService.prototype.destroy
   * @override
   */


  GetFeaturesByBufferService_createClass(GetFeaturesByBufferService, [{
    key: "destroy",
    value: function destroy() {
      GetFeaturesByBufferService_get(GetFeaturesByBufferService_getPrototypeOf(GetFeaturesByBufferService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.GetFeaturesByBufferService.prototype.getJsonParameters
     * @description å°æ¥è¯¢åæ°è½¬åä¸º JSON å­ç¬¦ä¸²ãå¨æ¬ç±»ä¸­éåæ­¤æ¹æ³ï¼å¯ä»¥å®ç°ä¸åç§ç±»çæ¥è¯¢ï¼IDs, SQL, Buffer, Geometryç­ï¼ã
     * @param {SuperMap.GetFeaturesByBufferParameters} params - æ°æ®éç¼å²åºæ¥è¯¢åæ°ç±»ã
     * @returns {Object} è½¬ååç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "getJsonParameters",
    value: function getJsonParameters(params) {
      if (!(params instanceof GetFeaturesByBufferParameters)) {
        return;
      }

      return SuperMap.GetFeaturesByBufferParameters.toJsonParameters(params);
    }
  }]);

  return GetFeaturesByBufferService;
}(GetFeaturesServiceBase);
SuperMap.GetFeaturesByBufferService = GetFeaturesByBufferService;
// CONCATENATED MODULE: ./src/common/iServer/GetFeaturesByGeometryParameters.js
function GetFeaturesByGeometryParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GetFeaturesByGeometryParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { GetFeaturesByGeometryParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GetFeaturesByGeometryParameters_typeof(obj); }

function GetFeaturesByGeometryParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GetFeaturesByGeometryParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GetFeaturesByGeometryParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) GetFeaturesByGeometryParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) GetFeaturesByGeometryParameters_defineProperties(Constructor, staticProps); return Constructor; }

function GetFeaturesByGeometryParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GetFeaturesByGeometryParameters_get = Reflect.get; } else { GetFeaturesByGeometryParameters_get = function _get(target, property, receiver) { var base = GetFeaturesByGeometryParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GetFeaturesByGeometryParameters_get(target, property, receiver || target); }

function GetFeaturesByGeometryParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GetFeaturesByGeometryParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function GetFeaturesByGeometryParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GetFeaturesByGeometryParameters_setPrototypeOf(subClass, superClass); }

function GetFeaturesByGeometryParameters_setPrototypeOf(o, p) { GetFeaturesByGeometryParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GetFeaturesByGeometryParameters_setPrototypeOf(o, p); }

function GetFeaturesByGeometryParameters_createSuper(Derived) { var hasNativeReflectConstruct = GetFeaturesByGeometryParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GetFeaturesByGeometryParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GetFeaturesByGeometryParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GetFeaturesByGeometryParameters_possibleConstructorReturn(this, result); }; }

function GetFeaturesByGeometryParameters_possibleConstructorReturn(self, call) { if (call && (GetFeaturesByGeometryParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return GetFeaturesByGeometryParameters_assertThisInitialized(self); }

function GetFeaturesByGeometryParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GetFeaturesByGeometryParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GetFeaturesByGeometryParameters_getPrototypeOf(o) { GetFeaturesByGeometryParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GetFeaturesByGeometryParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/






/**
 * @class SuperMap.GetFeaturesByGeometryParameters
 * @category iServer Data FeatureResults
 * @classdesc æ°æ®éå ä½æ¥è¯¢åæ°ç±»ãè¯¥ç±»ç¨äºè®¾ç½®æ°æ®éå ä½æ¥è¯¢çç¸å³åæ°ã
 * @param {Object} options - åæ°ã  
 * @param {Object} options.geometry - ç¨äºæ¥è¯¢çå ä½å¯¹è±¡ã 
 * @param {Array.<string>} options.datasetNames - æ°æ®ééåä¸­çæ°æ®éåç§°åè¡¨ã  
 * @param {string} [options.attributeFilter] - å ä½æ¥è¯¢å±æ§è¿æ»¤æ¡ä»¶ã  
 * @param {Array.<string>} [options.fields] - è®¾ç½®æ¥è¯¢ç»æè¿åå­æ®µãé»è®¤è¿åææå­æ®µã  
 * @param {SuperMap.SpatialQueryMode} [options.spatialQueryMode=SuperMap.SpatialQueryMode.CONTAIN] - ç©ºé´æ¥è¯¢æ¨¡å¼å¸¸éã  
 * @param {boolean} [options.returnContent=true] - æ¯å¦ç´æ¥è¿åæ¥è¯¢ç»æã  
 * @param {number} [options.fromIndex=0] - æ¥è¯¢ç»æçæå°ç´¢å¼å·ã  
 * @param {number} [options.toIndex=19] - æ¥è¯¢ç»æçæå¤§ç´¢å¼å·ã  
 * @param {string|number} [options.targetEpsgCode] - å¨ææå½±çç®æ åæ ç³»å¯¹åºç EPSG Codeï¼ä½¿ç¨æ­¤åæ°æ¶ï¼returnContent åæ°éä¸º trueã
 * @param {Object} [options.targetPrj] - å¨ææå½±çç®æ åæ ç³»ãä½¿ç¨æ­¤åæ°æ¶ï¼returnContent åæ°éä¸º trueã å¦ï¼prjCoordSys={"epsgCode":3857}ãå½åæ¶è®¾ç½® targetEpsgCode åæ°æ¶ï¼æ­¤åæ°ä¸çæã
 * @extends {SuperMap.GetFeaturesParametersBase}
 */

var GetFeaturesByGeometryParameters = /*#__PURE__*/function (_GetFeaturesParameter) {
  GetFeaturesByGeometryParameters_inherits(GetFeaturesByGeometryParameters, _GetFeaturesParameter);

  var _super = GetFeaturesByGeometryParameters_createSuper(GetFeaturesByGeometryParameters);

  function GetFeaturesByGeometryParameters(options) {
    var _this;

    GetFeaturesByGeometryParameters_classCallCheck(this, GetFeaturesByGeometryParameters);

    _this = _super.call(this, options);
    /**
     * @member {string} SuperMap.GetFeaturesByGeometryParameters.prototype.getFeatureMode
     * @description æ°æ®éæ¥è¯¢æ¨¡å¼ãå ä½æ¥è¯¢æ "SPATIAL"ï¼"SPATIAL_ATTRIBUTEFILTER" ä¸¤ç§ï¼å½ç¨æ·è®¾ç½® attributeFilter æ¶ä¼èªå¨åæ¢å° SPATIAL_ATTRIBUTEFILTER è®¿é®æå¡ã
     */

    _this.getFeatureMode = "SPATIAL";
    /**
     * @member {Object} SuperMap.GetFeaturesByGeometryParameters.prototype.geometry
     * @description ç¨äºæ¥è¯¢çå ä½å¯¹è±¡ã </br>
     * ç¹ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.Point}|{@link L.Marker}|{@link L.CircleMarker}|{@link L.Circle}|{@link L.GeoJSON}|{@link ol.geom.Point}|{@link ol.format.GeoJSON}ã</br>
     * çº¿ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.LineString}|{@link SuperMap.Geometry.LinearRing}|{@link L.Polyline}|{@link L.GeoJSON}|{@link ol.geom.LineString}|{@link ol.format.GeoJSON}ã</br>  
     * é¢ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.Polygon}|{@link L.Polygon}|{@link L.GeoJSON}|{@link ol.geom.Polygon}|{@link ol.format.GeoJSON}ã  
     */

    _this.geometry = null;
    /**
     * @member {Array.<string>} SuperMap.GetFeaturesByGeometryParameters.prototype.fields
     * @description è®¾ç½®æ¥è¯¢ç»æè¿åå­æ®µãå½æå®äºè¿åç»æå­æ®µåï¼å GetFeaturesResult ä¸­ç features çå±æ§å­æ®µåªåå«ææå®çå­æ®µãä¸è®¾ç½®å³è¿åå¨é¨å­æ®µã
     */

    _this.fields = null;
    /**
     * @member {string} SuperMap.GetFeaturesByGeometryParameters.prototype.attributeFilter
     *  @description å ä½æ¥è¯¢å±æ§è¿æ»¤æ¡ä»¶ã
     */

    _this.attributeFilter = null;
    /**
     * @member {SuperMap.SpatialQueryMode} [SuperMap.GetFeaturesByGeometryParameters.prototype.spatialQueryMode=SuperMap.SpatialQueryMode.CONTAIN]
     * @description ç©ºé´æ¥è¯¢æ¨¡å¼å¸¸éã
     */

    _this.spatialQueryMode = SpatialQueryMode.CONTAIN;
    Util.extend(GetFeaturesByGeometryParameters_assertThisInitialized(_this), options);
    _this.CLASS_NAME = "SuperMap.GetFeaturesByGeometryParameters";
    return _this;
  }
  /**
   * @function SuperMap.GetFeaturesByGeometryParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  GetFeaturesByGeometryParameters_createClass(GetFeaturesByGeometryParameters, [{
    key: "destroy",
    value: function destroy() {
      GetFeaturesByGeometryParameters_get(GetFeaturesByGeometryParameters_getPrototypeOf(GetFeaturesByGeometryParameters.prototype), "destroy", this).call(this);

      var me = this;

      if (me.geometry) {
        me.geometry.destroy();
        me.geometry = null;
      }

      if (me.fields) {
        while (me.fields.length > 0) {
          me.fields.pop();
        }

        me.fields = null;
      }

      me.attributeFilter = null;
      me.spatialQueryMode = null;
      me.getFeatureMode = null;
    }
    /**
     * @function SuperMap.GetFeaturesByGeometryParameters.toJsonParameters
     * @description å° SuperMap.GetFeaturesByGeometryParameters å¯¹è±¡åæ°è½¬æ¢ä¸º JSON å­ç¬¦ä¸²ã
     * @param {SuperMap.GetFeaturesByGeometryParameters} params - æ¥è¯¢åæ°å¯¹è±¡ã
     * @returns {string} è½¬ååç JSON å­ç¬¦ä¸²ã
     */

  }], [{
    key: "toJsonParameters",
    value: function toJsonParameters(params) {
      var filterParameter, geometry, parasByGeometry;
      geometry = ServerGeometry.fromGeometry(params.geometry);
      parasByGeometry = {
        datasetNames: params.datasetNames,
        getFeatureMode: "SPATIAL",
        geometry: geometry,
        spatialQueryMode: params.spatialQueryMode
      };

      if (params.fields) {
        filterParameter = new FilterParameter();
        filterParameter.name = params.datasetNames;
        filterParameter.fields = params.fields;
        parasByGeometry.queryParameter = filterParameter;
      }

      if (params.attributeFilter) {
        parasByGeometry.attributeFilter = params.attributeFilter;
        parasByGeometry.getFeatureMode = "SPATIAL_ATTRIBUTEFILTER";
      }

      if (params.maxFeatures && !isNaN(params.maxFeatures)) {
        parasByGeometry.maxFeatures = params.maxFeatures;
      }

      if (params.targetEpsgCode) {
        parasByGeometry.targetEpsgCode = params.targetEpsgCode;
      }

      if (!params.targetEpsgCode && params.targetPrj) {
        parasByGeometry.targetPrj = params.targetPrj;
      }

      return Util.toJSON(parasByGeometry);
    }
  }]);

  return GetFeaturesByGeometryParameters;
}(GetFeaturesParametersBase);
SuperMap.GetFeaturesByGeometryParameters = GetFeaturesByGeometryParameters;
// CONCATENATED MODULE: ./src/common/iServer/GetFeaturesByGeometryService.js
function GetFeaturesByGeometryService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GetFeaturesByGeometryService_typeof = function _typeof(obj) { return typeof obj; }; } else { GetFeaturesByGeometryService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GetFeaturesByGeometryService_typeof(obj); }

function GetFeaturesByGeometryService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GetFeaturesByGeometryService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GetFeaturesByGeometryService_createClass(Constructor, protoProps, staticProps) { if (protoProps) GetFeaturesByGeometryService_defineProperties(Constructor.prototype, protoProps); if (staticProps) GetFeaturesByGeometryService_defineProperties(Constructor, staticProps); return Constructor; }

function GetFeaturesByGeometryService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GetFeaturesByGeometryService_get = Reflect.get; } else { GetFeaturesByGeometryService_get = function _get(target, property, receiver) { var base = GetFeaturesByGeometryService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GetFeaturesByGeometryService_get(target, property, receiver || target); }

function GetFeaturesByGeometryService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GetFeaturesByGeometryService_getPrototypeOf(object); if (object === null) break; } return object; }

function GetFeaturesByGeometryService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GetFeaturesByGeometryService_setPrototypeOf(subClass, superClass); }

function GetFeaturesByGeometryService_setPrototypeOf(o, p) { GetFeaturesByGeometryService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GetFeaturesByGeometryService_setPrototypeOf(o, p); }

function GetFeaturesByGeometryService_createSuper(Derived) { var hasNativeReflectConstruct = GetFeaturesByGeometryService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GetFeaturesByGeometryService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GetFeaturesByGeometryService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GetFeaturesByGeometryService_possibleConstructorReturn(this, result); }; }

function GetFeaturesByGeometryService_possibleConstructorReturn(self, call) { if (call && (GetFeaturesByGeometryService_typeof(call) === "object" || typeof call === "function")) { return call; } return GetFeaturesByGeometryService_assertThisInitialized(self); }

function GetFeaturesByGeometryService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GetFeaturesByGeometryService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GetFeaturesByGeometryService_getPrototypeOf(o) { GetFeaturesByGeometryService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GetFeaturesByGeometryService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.GetFeaturesByGeometryService
 * @category iServer Data FeatureResults
 * @classdesc æ°æ®éå ä½æ¥è¯¢æå¡ç±»ï¼æ¥è¯¢ä¸æå®å ä½å¯¹è±¡ç¬¦åä¸å®ç©ºé´å³ç³»çç¢éè¦ç´ ã
 * @param {string} url - æ°æ®æ¥è¯¢ç»æèµæºå°åãè¯·æ±æ°æ®æå¡ä¸­æ°æ®éæ¥è¯¢æå¡ã
 * URL åºä¸ºï¼http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{æ°æ®æå¡å}/rest/dataï¼
 * ä¾å¦ï¼"http://localhost:8090/iserver/services/data-jingjin/rest/data"
 * @param {Object} options - åæ°ã</br>
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæprocessCompletedå±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailedå±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã 
 * @param {SuperMap.DataFormat} [options.format=SuperMap.DataFormat.GEOJSON] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @extends {SuperMap.GetFeaturesServiceBase}
 * @example
 * var myService = new SuperMap.GetFeaturesByGeometryService(url, {
     *     eventListeners: {
     *           "processCompleted": getFeatureCompleted,
     *           "processFailed": getFeatureError
     *           }
     * });
 * function getFeatureCompleted(object){//todo};
 * function getFeatureError(object){//todo}
 */

var GetFeaturesByGeometryService = /*#__PURE__*/function (_GetFeaturesServiceBa) {
  GetFeaturesByGeometryService_inherits(GetFeaturesByGeometryService, _GetFeaturesServiceBa);

  var _super = GetFeaturesByGeometryService_createSuper(GetFeaturesByGeometryService);

  function GetFeaturesByGeometryService(url, options) {
    var _this;

    GetFeaturesByGeometryService_classCallCheck(this, GetFeaturesByGeometryService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.GetFeaturesByGeometryService";
    return _this;
  }
  /**
   * @function SuperMap.GetFeaturesByGeometryService.prototype.destroy
   * @override
   */


  GetFeaturesByGeometryService_createClass(GetFeaturesByGeometryService, [{
    key: "destroy",
    value: function destroy() {
      GetFeaturesByGeometryService_get(GetFeaturesByGeometryService_getPrototypeOf(GetFeaturesByGeometryService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.GetFeaturesByGeometryService.prototype.getJsonParameters
     * @param {SuperMap.GetFeaturesByGeometryParameters} params - æ°æ®éå ä½æ¥è¯¢åæ°ç±»ã
     * @description å°æ¥è¯¢åæ°è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * å¨æ¬ç±»ä¸­éåæ­¤æ¹æ³ï¼å¯ä»¥å®ç°ä¸åç§ç±»çæ¥è¯¢ï¼ID, SQL, Buffer, Geometryç­ï¼ã
     * @returns {Object} è½¬ååç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "getJsonParameters",
    value: function getJsonParameters(params) {
      return GetFeaturesByGeometryParameters.toJsonParameters(params);
    }
  }]);

  return GetFeaturesByGeometryService;
}(GetFeaturesServiceBase);
SuperMap.GetFeaturesByGeometryService = GetFeaturesByGeometryService;
// CONCATENATED MODULE: ./src/common/iServer/GetFeaturesByIDsParameters.js
function GetFeaturesByIDsParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GetFeaturesByIDsParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { GetFeaturesByIDsParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GetFeaturesByIDsParameters_typeof(obj); }

function GetFeaturesByIDsParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GetFeaturesByIDsParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GetFeaturesByIDsParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) GetFeaturesByIDsParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) GetFeaturesByIDsParameters_defineProperties(Constructor, staticProps); return Constructor; }

function GetFeaturesByIDsParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GetFeaturesByIDsParameters_get = Reflect.get; } else { GetFeaturesByIDsParameters_get = function _get(target, property, receiver) { var base = GetFeaturesByIDsParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GetFeaturesByIDsParameters_get(target, property, receiver || target); }

function GetFeaturesByIDsParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GetFeaturesByIDsParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function GetFeaturesByIDsParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GetFeaturesByIDsParameters_setPrototypeOf(subClass, superClass); }

function GetFeaturesByIDsParameters_setPrototypeOf(o, p) { GetFeaturesByIDsParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GetFeaturesByIDsParameters_setPrototypeOf(o, p); }

function GetFeaturesByIDsParameters_createSuper(Derived) { var hasNativeReflectConstruct = GetFeaturesByIDsParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GetFeaturesByIDsParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GetFeaturesByIDsParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GetFeaturesByIDsParameters_possibleConstructorReturn(this, result); }; }

function GetFeaturesByIDsParameters_possibleConstructorReturn(self, call) { if (call && (GetFeaturesByIDsParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return GetFeaturesByIDsParameters_assertThisInitialized(self); }

function GetFeaturesByIDsParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GetFeaturesByIDsParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GetFeaturesByIDsParameters_getPrototypeOf(o) { GetFeaturesByIDsParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GetFeaturesByIDsParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.GetFeaturesByIDsParameters
 * @category  iServer Data FeatureResults
 * @classdesc IDæ¥è¯¢åæ°ç±»ã
 * @param {Object} options - åæ°ã  
 * @param {Array.<number>} options.IDs - æè¦æ¥è¯¢æå®çåç´  ID ä¿¡æ¯ã  
 * @param {Array.<string>} [options.fields] - è®¾ç½®æ¥è¯¢ç»æè¿åå­æ®µãé»è®¤è¿åææå­æ®µã  
 * @param {Array.<string>} options.dataSetNames - æ°æ®ééåä¸­çæ°æ®éåç§°åè¡¨ã  
 * @param {boolean} [options.returnContent=true] - æ¯å¦ç´æ¥è¿åæ¥è¯¢ç»æã  
 * @param {number} [options.fromIndex=0] - æ¥è¯¢ç»æçæå°ç´¢å¼å·ã  
 * @param {number} [options.toIndex=19] - æ¥è¯¢ç»æçæå¤§ç´¢å¼å·ã  
 * @param {string|number} [options.targetEpsgCode] - å¨ææå½±çç®æ åæ ç³»å¯¹åºç EPSG Codeï¼ä½¿ç¨æ­¤åæ°æ¶ï¼returnContent åæ°éä¸º trueã
 * @param {Object} [options.targetPrj] - å¨ææå½±çç®æ åæ ç³»ãä½¿ç¨æ­¤åæ°æ¶ï¼returnContent åæ°éä¸º trueã å¦ï¼prjCoordSys={"epsgCode":3857}ãå½åæ¶è®¾ç½® targetEpsgCode åæ°æ¶ï¼æ­¤åæ°ä¸çæã
 * @extends {SuperMap.GetFeaturesParametersBase}
 */

var GetFeaturesByIDsParameters = /*#__PURE__*/function (_GetFeaturesParameter) {
  GetFeaturesByIDsParameters_inherits(GetFeaturesByIDsParameters, _GetFeaturesParameter);

  var _super = GetFeaturesByIDsParameters_createSuper(GetFeaturesByIDsParameters);

  function GetFeaturesByIDsParameters(options) {
    var _this;

    GetFeaturesByIDsParameters_classCallCheck(this, GetFeaturesByIDsParameters);

    _this = _super.call(this, options);
    /**
     * @member {string} SuperMap.GetFeaturesByIDsParameters.prototype.getFeatureMode
     * @description æ°æ®éæ¥è¯¢æ¨¡å¼ã
     */

    _this.getFeatureMode = "ID";
    /**
     * @member {Array.<number>} SuperMap.GetFeaturesByIDsParameters.prototype.IDs
     * @description æè¦æ¥è¯¢æå®çåç´  ID ä¿¡æ¯ã
     */

    _this.IDs = null;
    /**
     *  @member {Array.<string>} SuperMap.GetFeaturesByIDsParameters.prototype.fields
     *  @description è®¾ç½®æ¥è¯¢ç»æè¿åå­æ®µãå½æå®äºè¿åç»æå­æ®µåï¼å GetFeaturesResult ä¸­ç features çå±æ§å­æ®µåªåå«ææå®çå­æ®µãä¸è®¾ç½®å³è¿åå¨é¨å­æ®µã
     */

    _this.fields = null;
    Util.extend(GetFeaturesByIDsParameters_assertThisInitialized(_this), options);
    _this.CLASS_NAME = "SuperMap.GetFeaturesByIDsParameters";
    return _this;
  }
  /**
   * @function SuperMap.GetFeaturesByIDsParameters.prototype.destroy
   * @override
   */


  GetFeaturesByIDsParameters_createClass(GetFeaturesByIDsParameters, [{
    key: "destroy",
    value: function destroy() {
      GetFeaturesByIDsParameters_get(GetFeaturesByIDsParameters_getPrototypeOf(GetFeaturesByIDsParameters.prototype), "destroy", this).call(this);

      var me = this;
      me.IDs = null;
      me.getFeatureMode = null;

      if (me.fields) {
        while (me.fields.length > 0) {
          me.fields.pop();
        }

        me.fields = null;
      }
    }
    /**
     * @function SuperMap.GetFeaturesByIDsParameters.toJsonParameters
     * @description å° SuperMap.GetFeaturesByIDsParameters å¯¹è±¡è½¬æ¢ä¸º JSON å­ç¬¦ä¸²ã
     * @param {SuperMap.GetFeaturesByIDsParameters} params - ID æ¥è¯¢åæ°å¯¹è±¡ã
     * @returns {string} è½¬ååç JSON å­ç¬¦ä¸²ã
     */

  }], [{
    key: "toJsonParameters",
    value: function toJsonParameters(params) {
      var parasByIDs, filterParameter;
      parasByIDs = {
        datasetNames: params.datasetNames,
        getFeatureMode: "ID",
        ids: params.IDs
      };

      if (params.fields) {
        filterParameter = new FilterParameter();
        filterParameter.name = params.datasetNames;
        filterParameter.fields = params.fields;
        parasByIDs.queryParameter = filterParameter;
      }

      if (params.targetEpsgCode) {
        parasByIDs.targetEpsgCode = params.targetEpsgCode;
      }

      if (!params.targetEpsgCode && params.targetPrj) {
        parasByIDs.targetPrj = params.targetPrj;
      }

      return Util.toJSON(parasByIDs);
    }
  }]);

  return GetFeaturesByIDsParameters;
}(GetFeaturesParametersBase);
SuperMap.GetFeaturesByIDsParameters = GetFeaturesByIDsParameters;
// CONCATENATED MODULE: ./src/common/iServer/GetFeaturesByIDsService.js
function GetFeaturesByIDsService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GetFeaturesByIDsService_typeof = function _typeof(obj) { return typeof obj; }; } else { GetFeaturesByIDsService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GetFeaturesByIDsService_typeof(obj); }

function GetFeaturesByIDsService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GetFeaturesByIDsService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GetFeaturesByIDsService_createClass(Constructor, protoProps, staticProps) { if (protoProps) GetFeaturesByIDsService_defineProperties(Constructor.prototype, protoProps); if (staticProps) GetFeaturesByIDsService_defineProperties(Constructor, staticProps); return Constructor; }

function GetFeaturesByIDsService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GetFeaturesByIDsService_get = Reflect.get; } else { GetFeaturesByIDsService_get = function _get(target, property, receiver) { var base = GetFeaturesByIDsService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GetFeaturesByIDsService_get(target, property, receiver || target); }

function GetFeaturesByIDsService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GetFeaturesByIDsService_getPrototypeOf(object); if (object === null) break; } return object; }

function GetFeaturesByIDsService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GetFeaturesByIDsService_setPrototypeOf(subClass, superClass); }

function GetFeaturesByIDsService_setPrototypeOf(o, p) { GetFeaturesByIDsService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GetFeaturesByIDsService_setPrototypeOf(o, p); }

function GetFeaturesByIDsService_createSuper(Derived) { var hasNativeReflectConstruct = GetFeaturesByIDsService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GetFeaturesByIDsService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GetFeaturesByIDsService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GetFeaturesByIDsService_possibleConstructorReturn(this, result); }; }

function GetFeaturesByIDsService_possibleConstructorReturn(self, call) { if (call && (GetFeaturesByIDsService_typeof(call) === "object" || typeof call === "function")) { return call; } return GetFeaturesByIDsService_assertThisInitialized(self); }

function GetFeaturesByIDsService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GetFeaturesByIDsService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GetFeaturesByIDsService_getPrototypeOf(o) { GetFeaturesByIDsService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GetFeaturesByIDsService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.GetFeaturesByIDsService
 * @category iServer Data FeatureResults
 * @classdesc æ°æ®éIDæ¥è¯¢æå¡ç±»ãå¨æ°æ®ééåä¸­æ¥æ¾æå® ID å·å¯¹åºçç©ºé´å°ç©è¦ç´ ã
 * @param {string} url - æ°æ®æ¥è¯¢ç»æèµæºå°åãè¯·æ±æ°æ®æå¡ä¸­æ°æ®éæ¥è¯¢æå¡ã
 *                       URL åºä¸ºï¼http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{æ°æ®æå¡å}/rest/data/ï¼</br>
 *                       ä¾å¦ï¼"http://localhost:8090/iserver/services/data-jingjin/rest/data/"
 * @param {Object} options - åæ°ã</br>
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæprocessCompletedå±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailedå±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã 
 * @param {SuperMap.DataFormat} [options.format=SuperMap.DataFormat.GEOJSON] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @extends {SuperMap.GetFeaturesServiceBase}
 * @example
 * var myGetFeaturesByIDsService = new SuperMap.GetFeaturesByIDsService(url, {
 *     eventListeners: {
 *         "processCompleted": getFeatureCompleted,
 *         "processFailed": getFeatureError
 *            }
 *     });
 * function getFeatureCompleted(object){//todo};
 * function getFeatureError(object){//todo}
 */

var GetFeaturesByIDsService = /*#__PURE__*/function (_GetFeaturesServiceBa) {
  GetFeaturesByIDsService_inherits(GetFeaturesByIDsService, _GetFeaturesServiceBa);

  var _super = GetFeaturesByIDsService_createSuper(GetFeaturesByIDsService);

  function GetFeaturesByIDsService(url, options) {
    var _this;

    GetFeaturesByIDsService_classCallCheck(this, GetFeaturesByIDsService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.GetFeaturesByIDsService";
    return _this;
  }
  /**
   * @function SuperMap.GetFeaturesByIDsService.prototype.destroy
   * @override
   */


  GetFeaturesByIDsService_createClass(GetFeaturesByIDsService, [{
    key: "destroy",
    value: function destroy() {
      GetFeaturesByIDsService_get(GetFeaturesByIDsService_getPrototypeOf(GetFeaturesByIDsService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.GetFeaturesByIDsService.prototype.getJsonParameters
     * @description å°æ¥è¯¢åæ°è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * å¨æ¬ç±»ä¸­éåæ­¤æ¹æ³ï¼å¯ä»¥å®ç°ä¸åç§ç±»çæ¥è¯¢ï¼ID, SQL, Buffer, Geometryç­ï¼ã
     * @param {SuperMap.GetFeaturesByIDsParameters} params - IDæ¥è¯¢åæ°ç±»ã
     * @returns {string} è½¬ååç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "getJsonParameters",
    value: function getJsonParameters(params) {
      return GetFeaturesByIDsParameters.toJsonParameters(params);
    }
  }]);

  return GetFeaturesByIDsService;
}(GetFeaturesServiceBase);
SuperMap.GetFeaturesByIDsService = GetFeaturesByIDsService;
// CONCATENATED MODULE: ./src/common/iServer/GetFeaturesBySQLParameters.js
function GetFeaturesBySQLParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GetFeaturesBySQLParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { GetFeaturesBySQLParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GetFeaturesBySQLParameters_typeof(obj); }

function GetFeaturesBySQLParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GetFeaturesBySQLParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GetFeaturesBySQLParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) GetFeaturesBySQLParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) GetFeaturesBySQLParameters_defineProperties(Constructor, staticProps); return Constructor; }

function GetFeaturesBySQLParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GetFeaturesBySQLParameters_get = Reflect.get; } else { GetFeaturesBySQLParameters_get = function _get(target, property, receiver) { var base = GetFeaturesBySQLParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GetFeaturesBySQLParameters_get(target, property, receiver || target); }

function GetFeaturesBySQLParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GetFeaturesBySQLParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function GetFeaturesBySQLParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GetFeaturesBySQLParameters_setPrototypeOf(subClass, superClass); }

function GetFeaturesBySQLParameters_setPrototypeOf(o, p) { GetFeaturesBySQLParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GetFeaturesBySQLParameters_setPrototypeOf(o, p); }

function GetFeaturesBySQLParameters_createSuper(Derived) { var hasNativeReflectConstruct = GetFeaturesBySQLParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GetFeaturesBySQLParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GetFeaturesBySQLParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GetFeaturesBySQLParameters_possibleConstructorReturn(this, result); }; }

function GetFeaturesBySQLParameters_possibleConstructorReturn(self, call) { if (call && (GetFeaturesBySQLParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return GetFeaturesBySQLParameters_assertThisInitialized(self); }

function GetFeaturesBySQLParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GetFeaturesBySQLParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GetFeaturesBySQLParameters_getPrototypeOf(o) { GetFeaturesBySQLParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GetFeaturesBySQLParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.GetFeaturesBySQLParameters
 * @category iServer Data FeatureResults
 * @classdesc æ°æ®æå¡ä¸­æ°æ®é SQL æ¥è¯¢åæ°ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {SuperMap.FilterParameter} options.queryParameter - æ¥è¯¢è¿æ»¤æ¡ä»¶åæ°ã 
 * @param {Array.<string>} options.datasetNames - æ°æ®ééåä¸­çæ°æ®éåç§°åè¡¨ã 
 * @param {boolean} [options.returnContent=true] - æ¯å¦ç´æ¥è¿åæ¥è¯¢ç»æã 
 * @param {number} [options.fromIndex=0] - æ¥è¯¢ç»æçæå°ç´¢å¼å·ã 
 * @param {number} [options.toIndex=19] - æ¥è¯¢ç»æçæå¤§ç´¢å¼å·ã 
 * @param {string|number} [options.targetEpsgCode] - å¨ææå½±çç®æ åæ ç³»å¯¹åºç EPSG Codeï¼ä½¿ç¨æ­¤åæ°æ¶ï¼returnContent åæ°éä¸º trueã
 * @param {Object} [options.targetPrj] - å¨ææå½±çç®æ åæ ç³»ãä½¿ç¨æ­¤åæ°æ¶ï¼returnContent åæ°éä¸º trueã å¦ï¼prjCoordSys={"epsgCode":3857}ãå½åæ¶è®¾ç½® targetEpsgCode åæ°æ¶ï¼æ­¤åæ°ä¸çæã
 * @extends {SuperMap.GetFeaturesParametersBase}
 */

var GetFeaturesBySQLParameters = /*#__PURE__*/function (_GetFeaturesParameter) {
  GetFeaturesBySQLParameters_inherits(GetFeaturesBySQLParameters, _GetFeaturesParameter);

  var _super = GetFeaturesBySQLParameters_createSuper(GetFeaturesBySQLParameters);

  function GetFeaturesBySQLParameters(options) {
    var _this;

    GetFeaturesBySQLParameters_classCallCheck(this, GetFeaturesBySQLParameters);

    _this = _super.call(this, options);
    /**
     * @member {string} SuperMap.GetFeaturesBySQLParameters.prototype.getFeatureMode
     * @description æ°æ®éæ¥è¯¢æ¨¡å¼ã
     */

    _this.getFeatureMode = "SQL";
    /**
     * @member {SuperMap.FilterParameter} SuperMap.GetFeaturesBySQLParameters.prototype.queryParameter
     * @description æ¥è¯¢è¿æ»¤æ¡ä»¶åæ°ç±»ã
     */

    _this.queryParameter = null;
    Util.extend(GetFeaturesBySQLParameters_assertThisInitialized(_this), options);
    _this.CLASS_NAME = "SuperMap.GetFeaturesBySQLParameters";
    return _this;
  }
  /**
   * @function SuperMap.GetFeaturesBySQLParameters.prototype.destroy
   * @override
   */


  GetFeaturesBySQLParameters_createClass(GetFeaturesBySQLParameters, [{
    key: "destroy",
    value: function destroy() {
      GetFeaturesBySQLParameters_get(GetFeaturesBySQLParameters_getPrototypeOf(GetFeaturesBySQLParameters.prototype), "destroy", this).call(this);

      var me = this;
      me.getFeatureMode = null;

      if (me.queryParameter) {
        me.queryParameter.destroy();
        me.queryParameter = null;
      }
    }
    /**
     * @function SuperMap.GetFeaturesBySQLParameters.prototype.toJsonParameters
     * @description å° SuperMap.GetFeaturesBySQLParameters å¯¹è±¡è½¬æ¢ä¸º JSON å­ç¬¦ä¸²ã
     * @param {SuperMap.GetFeaturesBySQLParameters} params - æ°æ®é SQL æ¥è¯¢åæ°å¯¹è±¡ã
     * @returns {string} è½¬ååç JSON å­ç¬¦ä¸²ã
     */

  }], [{
    key: "toJsonParameters",
    value: function toJsonParameters(params) {
      var paramsBySql = {
        datasetNames: params.datasetNames,
        getFeatureMode: "SQL",
        queryParameter: params.queryParameter
      };

      if (params.maxFeatures && !isNaN(params.maxFeatures)) {
        paramsBySql.maxFeatures = params.maxFeatures;
      }

      if (params.aggregations) {
        paramsBySql.aggregations = params.aggregations;
      }

      if (params.targetEpsgCode) {
        paramsBySql.targetEpsgCode = params.targetEpsgCode;
      }

      if (!params.targetEpsgCode && params.targetPrj) {
        paramsBySql.targetPrj = params.targetPrj;
      }

      return Util.toJSON(paramsBySql);
    }
  }]);

  return GetFeaturesBySQLParameters;
}(GetFeaturesParametersBase);
SuperMap.GetFeaturesBySQLParameters = GetFeaturesBySQLParameters;
// CONCATENATED MODULE: ./src/common/iServer/GetFeaturesBySQLService.js
function GetFeaturesBySQLService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GetFeaturesBySQLService_typeof = function _typeof(obj) { return typeof obj; }; } else { GetFeaturesBySQLService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GetFeaturesBySQLService_typeof(obj); }

function GetFeaturesBySQLService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GetFeaturesBySQLService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GetFeaturesBySQLService_createClass(Constructor, protoProps, staticProps) { if (protoProps) GetFeaturesBySQLService_defineProperties(Constructor.prototype, protoProps); if (staticProps) GetFeaturesBySQLService_defineProperties(Constructor, staticProps); return Constructor; }

function GetFeaturesBySQLService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GetFeaturesBySQLService_get = Reflect.get; } else { GetFeaturesBySQLService_get = function _get(target, property, receiver) { var base = GetFeaturesBySQLService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GetFeaturesBySQLService_get(target, property, receiver || target); }

function GetFeaturesBySQLService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GetFeaturesBySQLService_getPrototypeOf(object); if (object === null) break; } return object; }

function GetFeaturesBySQLService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GetFeaturesBySQLService_setPrototypeOf(subClass, superClass); }

function GetFeaturesBySQLService_setPrototypeOf(o, p) { GetFeaturesBySQLService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GetFeaturesBySQLService_setPrototypeOf(o, p); }

function GetFeaturesBySQLService_createSuper(Derived) { var hasNativeReflectConstruct = GetFeaturesBySQLService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GetFeaturesBySQLService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GetFeaturesBySQLService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GetFeaturesBySQLService_possibleConstructorReturn(this, result); }; }

function GetFeaturesBySQLService_possibleConstructorReturn(self, call) { if (call && (GetFeaturesBySQLService_typeof(call) === "object" || typeof call === "function")) { return call; } return GetFeaturesBySQLService_assertThisInitialized(self); }

function GetFeaturesBySQLService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GetFeaturesBySQLService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GetFeaturesBySQLService_getPrototypeOf(o) { GetFeaturesBySQLService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GetFeaturesBySQLService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.GetFeaturesBySQLService
 * @constructs SuperMap.GetFeaturesBySQLService
 * @category iServer Data FeatureResults
 * @classdesc æ°æ®æå¡ä¸­æ°æ®é SQL æ¥è¯¢æå¡ç±»ãå¨ä¸ä¸ªæå¤ä¸ªæå®çå¾å±ä¸æ¥è¯¢ç¬¦å SQL æ¡ä»¶çç©ºé´å°ç©ä¿¡æ¯ã
 * @param {string} url - æ°æ®æ¥è¯¢ç»æèµæºå°åãè¯·æ±æ°æ®æå¡ä¸­æ°æ®éæ¥è¯¢æå¡ï¼
 *                       URL åºä¸ºï¼http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{æ°æ®æå¡å}/rest/data/ï¼</br>
 *                       ä¾å¦ï¼"http://localhost:8090/iserver/services/data-jingjin/rest/data/"
 * @param {Object} options - åæ°ã</br>
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæprocessCompletedå±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailedå±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã 
 * @param {SuperMap.DataFormat} [options.format=SuperMap.DataFormat.GEOJSON] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @extends {SuperMap.GetFeaturesServiceBase}
 * @example
 * var myGetFeaturesBySQLService = new SuperMap.GetFeaturesBySQLService(url, {
     *     eventListeners: {
     *         "processCompleted": GetFeaturesCompleted,
     *         "processFailed": GetFeaturesError
     *         }
     * });
 * function getFeaturesCompleted(object){//todo};
 * function getFeaturesError(object){//todo};
 *
 */

var GetFeaturesBySQLService = /*#__PURE__*/function (_GetFeaturesServiceBa) {
  GetFeaturesBySQLService_inherits(GetFeaturesBySQLService, _GetFeaturesServiceBa);

  var _super = GetFeaturesBySQLService_createSuper(GetFeaturesBySQLService);

  function GetFeaturesBySQLService(url, options) {
    var _this;

    GetFeaturesBySQLService_classCallCheck(this, GetFeaturesBySQLService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.GetFeaturesBySQLService";
    return _this;
  }
  /**
   * @function SuperMap.GetFeaturesBySQLService.prototype.destroy
   * @override
   */


  GetFeaturesBySQLService_createClass(GetFeaturesBySQLService, [{
    key: "destroy",
    value: function destroy() {
      GetFeaturesBySQLService_get(GetFeaturesBySQLService_getPrototypeOf(GetFeaturesBySQLService.prototype), "destroy", this).call(this);
    }
    /*
     * @function SuperMap.GetFeaturesBySQLService.prototype.getJsonParameters
     * @description å°æ¥è¯¢åæ°è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * å¨æ¬ç±»ä¸­éåæ­¤æ¹æ³ï¼å¯ä»¥å®ç°ä¸åç§ç±»çæ¥è¯¢ï¼ID, SQL, Buffer, Geometryç­ï¼ã
     * @param {SuperMap.GetFeaturesBySQLParameters} params - æ°æ®éSQLæ¥è¯¢åæ°ç±»ã
     * @returns {string} è½¬ååç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "getJsonParameters",
    value: function getJsonParameters(params) {
      return GetFeaturesBySQLParameters.toJsonParameters(params);
    }
  }]);

  return GetFeaturesBySQLService;
}(GetFeaturesServiceBase);
SuperMap.GetFeaturesBySQLService = GetFeaturesBySQLService;
// CONCATENATED MODULE: ./src/common/iServer/GetFieldsService.js
function GetFieldsService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GetFieldsService_typeof = function _typeof(obj) { return typeof obj; }; } else { GetFieldsService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GetFieldsService_typeof(obj); }

function GetFieldsService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GetFieldsService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GetFieldsService_createClass(Constructor, protoProps, staticProps) { if (protoProps) GetFieldsService_defineProperties(Constructor.prototype, protoProps); if (staticProps) GetFieldsService_defineProperties(Constructor, staticProps); return Constructor; }

function GetFieldsService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GetFieldsService_get = Reflect.get; } else { GetFieldsService_get = function _get(target, property, receiver) { var base = GetFieldsService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GetFieldsService_get(target, property, receiver || target); }

function GetFieldsService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GetFieldsService_getPrototypeOf(object); if (object === null) break; } return object; }

function GetFieldsService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GetFieldsService_setPrototypeOf(subClass, superClass); }

function GetFieldsService_setPrototypeOf(o, p) { GetFieldsService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GetFieldsService_setPrototypeOf(o, p); }

function GetFieldsService_createSuper(Derived) { var hasNativeReflectConstruct = GetFieldsService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GetFieldsService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GetFieldsService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GetFieldsService_possibleConstructorReturn(this, result); }; }

function GetFieldsService_possibleConstructorReturn(self, call) { if (call && (GetFieldsService_typeof(call) === "object" || typeof call === "function")) { return call; } return GetFieldsService_assertThisInitialized(self); }

function GetFieldsService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GetFieldsService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GetFieldsService_getPrototypeOf(o) { GetFieldsService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GetFieldsService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.GetFieldsService
 * @category iServer Data Field
 * @classdesc å­æ®µæ¥è¯¢æå¡ï¼æ¯ææ¥è¯¢æå®æ°æ®éçä¸­ææå±æ§å­æ®µï¼fieldï¼çéåã
 * @param {string} url - æå¡çè®¿é®å°åãå¦è®¿é®World Mapæå¡ï¼åªéå°urlè®¾ä¸ºï¼http://localhost:8090/iserver/services/data-world/rest/data å³å¯ã
 * @param {Object} options - åæ°ã</br>
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæprocessCompletedå±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailedå±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã 
 * @param {SuperMap.DataFormat} [options.format=SuperMap.DataFormat.GEOJSON] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
 * @param {string}options.datasource - è¦æ¥è¯¢çæ°æ®éæå¨çæ°æ®æºåç§°ã</br>
 * @param {string}options.dataset - è¦æ¥è¯¢çæ°æ®éåç§°ã</br>
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @extends {SuperMap.CommonServiceBase}
 * @example
 * var myService = new SuperMap.GetFieldsService(url, {eventListeners: {
 *     "processCompleted": getFieldsCompleted,
 *     "processFailed": getFieldsError
 *     },
 *     datasource: "World",
 *     dataset: "Countries"
 * };
 *
 */

var GetFieldsService = /*#__PURE__*/function (_CommonServiceBase) {
  GetFieldsService_inherits(GetFieldsService, _CommonServiceBase);

  var _super = GetFieldsService_createSuper(GetFieldsService);

  function GetFieldsService(url, options) {
    var _this;

    GetFieldsService_classCallCheck(this, GetFieldsService);

    _this = _super.call(this, url, options);
    /**
     * @member {string} SuperMap.GetFieldsService.prototype.datasource
     * @description è¦æ¥è¯¢çæ°æ®éæå¨çæ°æ®æºåç§°ã
     */

    _this.datasource = null;
    /**
     *  @member {string} SuperMap.GetFieldsService.prototype.dataset
     *  @description è¦æ¥è¯¢çæ°æ®éåç§°ã
     */

    _this.dataset = null;

    if (options) {
      Util.extend(GetFieldsService_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.GetFieldsService";
    return _this;
  }
  /**
   * @function SuperMap.GetFieldsService.prototype.destroy
   * @override
   */


  GetFieldsService_createClass(GetFieldsService, [{
    key: "destroy",
    value: function destroy() {
      GetFieldsService_get(GetFieldsService_getPrototypeOf(GetFieldsService.prototype), "destroy", this).call(this);

      var me = this;
      me.datasource = null;
      me.dataset = null;
    }
    /**
     * @function SuperMap.GetFieldsService.prototype.processAsync
     * @description æ§è¡æå¡ï¼æ¥è¯¢æå®æ°æ®éçå­æ®µä¿¡æ¯ã
     */

  }, {
    key: "processAsync",
    value: function processAsync() {
      var me = this;
      me.url = Util.urlPathAppend(me.url, "datasources/".concat(me.datasource, "/datasets/").concat(me.dataset, "/fields"));
      me.request({
        method: "GET",
        data: null,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return GetFieldsService;
}(CommonServiceBase);
SuperMap.GetFieldsService = GetFieldsService;
// CONCATENATED MODULE: ./src/common/iServer/GetGridCellInfosParameters.js
function GetGridCellInfosParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GetGridCellInfosParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GetGridCellInfosParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) GetGridCellInfosParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) GetGridCellInfosParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.GetGridCellInfosParameters
 * @category iServer Data Grid
 * @classdesc æ°æ®æå¡æ æ ¼æ¥è¯¢åæ°ç±»ã
 * @param {Object} options - åæ°ã  
 * @param {string} options.datasetName - æ°æ®éåç§°ã 
 * @param {string} options.dataSourceName - æ°æ®æºåç§°ã 
 * @param {number} options.X - è¦æ¥è¯¢çå°çä½ç½® X è½´ã 
 * @param {number} options.Y - è¦æ¥è¯¢çå°çä½ç½® Y è½´ã
 */

var GetGridCellInfosParameters = /*#__PURE__*/function () {
  function GetGridCellInfosParameters(options) {
    GetGridCellInfosParameters_classCallCheck(this, GetGridCellInfosParameters);

    /**
     * @member {string} SuperMap.GetGridCellInfosParameters.prototype.datasetName
     * @description æ°æ®éåç§°ã
     */
    this.datasetName = null;
    /**
     * @member {string} SuperMap.GetGridCellInfosParameters.prototype.dataSourceName
     * @description æ°æ®æºåç§°ã
     */

    this.dataSourceName = null;
    /**
     * @member {number} SuperMap.GetGridCellInfosParameters.prototype.X
     * @description è¦æ¥è¯¢çå°çä½ç½® X è½´ã
     */

    this.X = null;
    /**
     * @member {number} SuperMap.GetGridCellInfosParameters.prototype.Y
     * @description è¦æ¥è¯¢çå°çä½ç½® Y è½´ã
     */

    this.Y = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.GetGridCellInfosParameters";
  }
  /**
   * @function SuperMap.GetGridCellInfosParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨çèµæºå±æ§ç½®ç©ºã
   */


  GetGridCellInfosParameters_createClass(GetGridCellInfosParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.datasetName = null;
      me.dataSourceName = null;
      me.X = null;
      me.Y = null;
    }
  }]);

  return GetGridCellInfosParameters;
}();
SuperMap.GetGridCellInfosParameters = GetGridCellInfosParameters;
// CONCATENATED MODULE: ./src/common/iServer/GetGridCellInfosService.js
function GetGridCellInfosService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GetGridCellInfosService_typeof = function _typeof(obj) { return typeof obj; }; } else { GetGridCellInfosService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GetGridCellInfosService_typeof(obj); }

function GetGridCellInfosService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GetGridCellInfosService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GetGridCellInfosService_createClass(Constructor, protoProps, staticProps) { if (protoProps) GetGridCellInfosService_defineProperties(Constructor.prototype, protoProps); if (staticProps) GetGridCellInfosService_defineProperties(Constructor, staticProps); return Constructor; }

function GetGridCellInfosService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GetGridCellInfosService_get = Reflect.get; } else { GetGridCellInfosService_get = function _get(target, property, receiver) { var base = GetGridCellInfosService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GetGridCellInfosService_get(target, property, receiver || target); }

function GetGridCellInfosService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GetGridCellInfosService_getPrototypeOf(object); if (object === null) break; } return object; }

function GetGridCellInfosService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GetGridCellInfosService_setPrototypeOf(subClass, superClass); }

function GetGridCellInfosService_setPrototypeOf(o, p) { GetGridCellInfosService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GetGridCellInfosService_setPrototypeOf(o, p); }

function GetGridCellInfosService_createSuper(Derived) { var hasNativeReflectConstruct = GetGridCellInfosService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GetGridCellInfosService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GetGridCellInfosService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GetGridCellInfosService_possibleConstructorReturn(this, result); }; }

function GetGridCellInfosService_possibleConstructorReturn(self, call) { if (call && (GetGridCellInfosService_typeof(call) === "object" || typeof call === "function")) { return call; } return GetGridCellInfosService_assertThisInitialized(self); }

function GetGridCellInfosService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GetGridCellInfosService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GetGridCellInfosService_getPrototypeOf(o) { GetGridCellInfosService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GetGridCellInfosService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.GetGridCellInfosService
 * @category iServer Data Grid
 * @classdesc æ°æ®æ æ ¼æ¥è¯¢æå¡ï¼æ¯ææ¥è¯¢æå®å°çä½ç½®çæ æ ¼ä¿¡æ¯ã
 * @param {string} url - æ¥è¯¢æå¡å°åãä¾å¦: http://localhost:8090/iserver/services/data-jingjin/rest/data
 * @param {Object} options - åæ°ã</br>
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæprocessCompletedå±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailedå±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã<br>
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã 
 * @param {SuperMap.DataFormat} [options.format=SuperMap.DataFormat.GEOJSON] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @extends {SuperMap.CommonServiceBase}
 * @example
 * var myService = new SuperMap.GetGridCellInfosService(url, {eventListeners: {
 *     "processCompleted": queryCompleted,
 *     "processFailed": queryError
 *     }
 * });
 *
 */

var GetGridCellInfosService = /*#__PURE__*/function (_CommonServiceBase) {
  GetGridCellInfosService_inherits(GetGridCellInfosService, _CommonServiceBase);

  var _super = GetGridCellInfosService_createSuper(GetGridCellInfosService);

  function GetGridCellInfosService(url, options) {
    var _this;

    GetGridCellInfosService_classCallCheck(this, GetGridCellInfosService);

    _this = _super.call(this, url, options);
    /**
     * @member {string} SuperMap.GetGridCellInfosService.prototype.datasetName
     * @description æ°æ®éåç§°ã
     */

    _this.datasetName = null;
    /**
     * @member {string} SuperMap.GetGridCellInfosService.prototype.dataSourceName
     * @description æ°æ®æºåç§°ã
     */

    _this.dataSourceName = null;
    /**
     * @member {string} SuperMap.GetGridCellInfosService.prototype.datasetType
     * @description æ°æ®éç±»åã
     */

    _this.datasetType = null;
    /**
     * @member {number} SuperMap.GetGridCellInfosService.prototype.X
     * @description è¦æ¥è¯¢çå°çä½ç½®Xè½´
     */

    _this.X = null;
    /**
     * @member {number} SuperMap.GetGridCellInfosService.prototype.Y
     * @description è¦æ¥è¯¢çå°çä½ç½®Yè½´
     */

    _this.Y = null;

    if (options) {
      Util.extend(GetGridCellInfosService_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.GetGridCellInfosService";
    return _this;
  }
  /**
   * @function SuperMap.GetGridCellInfosService.prototype.destroy
   * @override
   */


  GetGridCellInfosService_createClass(GetGridCellInfosService, [{
    key: "destroy",
    value: function destroy() {
      GetGridCellInfosService_get(GetGridCellInfosService_getPrototypeOf(GetGridCellInfosService.prototype), "destroy", this).call(this);

      var me = this;
      me.X = null;
      me.Y = null;
      me.datasetName = null;
      me.dataSourceName = null;
      me.datasetType = null;
    }
    /**
     * @function SuperMap.GetGridCellInfosService.prototype.processAsync
     * @description æ§è¡æå¡ï¼æ¥è¯¢æ°æ®éä¿¡æ¯ã
     * @param {SuperMap.GetGridCellInfosParameters} params - æ¥è¯¢åæ°ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof GetGridCellInfosParameters)) {
        return;
      }

      Util.extend(this, params);
      var me = this;
      me.url = Util.urlPathAppend(me.url, "datasources/".concat(me.dataSourceName, "/datasets/").concat(me.datasetName));
      me.queryRequest(me.getDatasetInfoCompleted, me.getDatasetInfoFailed);
    }
    /**
     * @function SuperMap.GetGridCellInfosService.prototype.queryRequest
     * @description æ§è¡æå¡ï¼æ¥è¯¢ã
     * @callback {function} successFun - æååæ§è¡çå½æ°ã
     * @callback {function} failedFunc - å¤±è´¥åæ§è¡çå½æ°ã
     */

  }, {
    key: "queryRequest",
    value: function queryRequest(successFun, failedFunc) {
      var me = this;
      me.request({
        method: "GET",
        data: null,
        scope: me,
        success: successFun,
        failure: failedFunc
      });
    }
    /**
     * @function SuperMap.GetGridCellInfosService.prototype.getDatasetInfoCompleted
     * @description æ°æ®éæ¥è¯¢å®æï¼æ§è¡æ­¤æ¹æ³ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     */

  }, {
    key: "getDatasetInfoCompleted",
    value: function getDatasetInfoCompleted(result) {
      var me = this;
      result = Util.transformResult(result);
      me.datasetType = result.datasetInfo.type;
      me.queryGridInfos();
    }
    /**
     * @function SuperMap.GetGridCellInfosService.prototype.queryGridInfos
     * @description æ§è¡æå¡ï¼æ¥è¯¢æ°æ®éæ æ ¼ä¿¡æ¯ä¿¡æ¯ã
     */

  }, {
    key: "queryGridInfos",
    value: function queryGridInfos() {
      var me = this;
      me.url = Util.urlPathAppend(me.url, me.datasetType == 'GRID' ? 'gridValue' : 'imageValue');

      if (me.X != null && me.Y != null) {
        me.url = Util.urlAppend(me.url, "x=".concat(me.X, "&y=").concat(me.Y));
      }

      me.queryRequest(me.serviceProcessCompleted, me.serviceProcessFailed);
    }
    /**
     * @function SuperMap.GetGridCellInfosService.prototype.getDatasetInfoFailed
     * @description æ°æ®éæ¥è¯¢å¤±è´¥ï¼æ§è¡æ­¤æ¹æ³ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     */

  }, {
    key: "getDatasetInfoFailed",
    value: function getDatasetInfoFailed(result) {
      var me = this;
      me.serviceProcessFailed(result);
    }
  }]);

  return GetGridCellInfosService;
}(CommonServiceBase);
SuperMap.GetGridCellInfosService = GetGridCellInfosService;
// CONCATENATED MODULE: ./src/common/iServer/ThemeMemoryData.js
function ThemeMemoryData_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeMemoryData_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeMemoryData_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeMemoryData_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeMemoryData_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @class SuperMap.ThemeMemoryData
 * @category  iServer Map Theme
 * @classdesc ä¸é¢å¾åå­æ°æ®ç±»ã
 * @param {Array} srcData - åå§å¼æ°ç»ã
 * @param {Array} targetData - å¤é¨å¼æ°ç»ã
 */

var ThemeMemoryData = /*#__PURE__*/function () {
  function ThemeMemoryData(srcData, targetData) {
    ThemeMemoryData_classCallCheck(this, ThemeMemoryData);

    /**
     * @member {Array} SuperMap.ThemeMemoryData.prototype.srcData
     * @description åå§å¼æ°ç»ï¼è¯¥å±æ§å¼å°è¢« targetData å±æ§ææå®çå¼æ¿æ¢æï¼ç¶åå¶ä½ä¸é¢å¾ï¼ä½æ°æ®åºä¸­çå¼å¹¶ä¸ä¼æ¹åã
     */
    this.srcData = srcData;
    /**
     * @member {Array} SuperMap.ThemeMemoryData.prototype.targetData
     * @description å¤é¨å¼æ°ç»ï¼å³ç¨äºå¶ä½ä¸é¢å¾çåå­æ°æ®ï¼è®¾å®è¯¥å±æ§å¼åï¼ä¼å° srcData å±æ§ææå®çåå§å¼æ¿æ¢æå¶ä½ä¸é¢å¾ï¼ä½æ°æ®åºä¸­çå¼å¹¶ä¸ä¼æ¹åã
     */

    this.targetData = targetData;
    this.CLASS_NAME = "SuperMap.ThemeMemoryData";
  }
  /**
   * @function SuperMap.ThemeMemoryData.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThemeMemoryData_createClass(ThemeMemoryData, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.srcData = null;
      me.targetData = null;
    }
    /**
     * @function SuperMap.ThemeMemoryData.prototype.toJSON
     * @description å° SuperMap.ThemeMemoryData å¯¹è±¡è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @returns {string} è¿åè½¬æ¢åç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "toJSON",
    value: function toJSON() {
      if (this.srcData && this.targetData) {
        var memoryDataStr = "";
        var count = Math.min(this.srcData.length, this.targetData.length);

        for (var i = 0; i < count; i++) {
          memoryDataStr += "\'" + this.srcData[i] + "\':\'" + this.targetData[i] + "\',";
        } //å»é¤å¤ä½çéå·


        if (i > 0) {
          memoryDataStr = memoryDataStr.substring(0, memoryDataStr.length - 1);
        }

        return "{" + memoryDataStr + "}";
      } else {
        return null;
      }
    }
  }]);

  return ThemeMemoryData;
}();
SuperMap.ThemeMemoryData = ThemeMemoryData;
// CONCATENATED MODULE: ./src/common/iServer/Theme.js
function Theme_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Theme_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Theme_createClass(Constructor, protoProps, staticProps) { if (protoProps) Theme_defineProperties(Constructor.prototype, protoProps); if (staticProps) Theme_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.Theme
 * @category  iServer Map Theme
 * @classdesc ä¸é¢å¾åºç±»ã
 * @param {string} type - ä¸é¢å¾ç±»åã
 * @param {Object} options - åæ°ã
 * @param {SuperMap.ThemeMemoryData} [options.memoryData] - ä¸é¢å¾åå­æ°æ®ã
 */

var Theme = /*#__PURE__*/function () {
  function Theme(type, options) {
    Theme_classCallCheck(this, Theme);

    if (!type) {
      return this;
    }
    /**
     * @member {SuperMap.ThemeMemoryData} SuperMap.Theme.prototype.memoryData
     * @description ä¸é¢å¾åå­æ°æ®ã<br>
     *              ç¨åå­æ°æ®å¶ä½ä¸é¢å¾çæ¹å¼ä¸è¡¨è¾¾å¼å¶ä½ä¸é¢å¾çæ¹å¼äºæ¥ï¼åèä¼åçº§è¾é«ã
     *              ç¬¬ä¸ä¸ªåæ°ä»£è¡¨ä¸é¢å¼ï¼å³æ°æ®éä¸­ç¨æ¥åä¸é¢å¾çå­æ®µæè¡¨è¾¾å¼çå¼ï¼ç¬¬äºä¸ªåæ°ä»£è¡¨å¤é¨å¼ãå¨å¶ä½ä¸é¢å¾æ¶ï¼ä¼ç¨å¤é¨å¼ä»£æ¿ä¸é¢å¼æ¥å¶ä½ç¸åºçä¸é¢å¾ã
     */


    this.memoryData = null;
    /**
     * @member {string} SuperMap.Theme.prototype.type
     * @description ä¸é¢å¾ç±»åã
     */

    this.type = type;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.Theme";
  }
  /**
   * @function SuperMap.Theme.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  Theme_createClass(Theme, [{
    key: "destroy",
    value: function destroy() {
      var me = this;

      if (me.memoryData) {
        me.memoryData.destroy();
        me.memoryData = null;
      }

      me.type = null;
    }
    /**
     * @function SuperMap.Theme.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     * @returns {Object} å¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      //return å­ç±»å®ç°
      return;
    }
  }]);

  return Theme;
}();
SuperMap.Theme = Theme;
// CONCATENATED MODULE: ./src/common/iServer/ServerTextStyle.js
function ServerTextStyle_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ServerTextStyle_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ServerTextStyle_createClass(Constructor, protoProps, staticProps) { if (protoProps) ServerTextStyle_defineProperties(Constructor.prototype, protoProps); if (staticProps) ServerTextStyle_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.ServerTextStyle
 * @category  iServer Map Theme
 * @classdesc æå¡ç«¯ææ¬é£æ ¼ç±»ã
 * @description è¯¥ç±»ç¨äºå®ä¹ææ¬é£æ ¼çç¸å³å±æ§ã
 * @param {Object} options - åæ°ã
 * @param {SuperMap.TextAlignment} [options.align=SuperMap.TextAlignment.BASELINECENTER] - ææ¬çå¯¹é½æ¹å¼ã
 * @param {SuperMap.ServerColor} [options.backColor] - ææ¬çèæ¯è²ãé»è®¤ backColor = new ServerColor(255, 255, 255)ã
 * @param {SuperMap.ServerColor} [options.foreColor] - ææ¬çåæ¯è²ãé»è®¤ foreColor = new ServerColor(0, 0, 0)ã
 * @param {boolean} [options.backOpaque=false] - ææ¬èæ¯æ¯å¦ä¸éæã
 * @param {boolean} [options.sizeFixed=true] - ææ¬å¤§å°æ¯å¦åºå®ã
 * @param {number} [options.fontHeight=6] - ææ¬å­ä½çé«åº¦ã
 * @param {number} [options.fontWidth=0] - ææ¬å­ä½çå®½åº¦ã
 * @param {number} [options.fontWeight=400] - ææ¬å­ä½çç£æ°ã
 * @param {string} [options.fontName='Times New Roman'] - ææ¬å­ä½çåç§°ã
 * @param {boolean} [options.bold=false] - ææ¬æ¯å¦ä¸ºç²ä½å­ã
 * @param {boolean} [options.italic=false] - ææ¬æ¯å¦éç¨æä½ã
 * @param {number} [options.italicAngle=0] - å­ä½å¾æè§åº¦ã
 * @param {boolean} [options.shadow=false] - ææ¬æ¯å¦æé´å½±ã
 * @param {boolean} [options.strikeout=false] - ææ¬å­ä½æ¯å¦å å é¤çº¿ã
 * @param {boolean} [options.outline=false] - æ¯å¦ä»¥è½®å»çæ¹å¼æ¥æ¾ç¤ºææ¬çèæ¯ã
 * @param {number} [options.opaqueRate=0] - æ³¨è®°æå­çä¸éæåº¦ã
 * @param {boolean} [options.underline=false] - ææ¬å­ä½æ¯å¦å ä¸åçº¿ã
 * @param {number} [options.rotation=0.0] -  ææ¬æè½¬çè§åº¦ã
 */

var ServerTextStyle = /*#__PURE__*/function () {
  function ServerTextStyle(options) {
    ServerTextStyle_classCallCheck(this, ServerTextStyle);

    /**
     * @member {SuperMap.TextAlignment} [SuperMap.ServerTextStyle.prototype.align= SuperMap.TextAlignment.BASELINECENTER]
     * @description ææ¬çå¯¹é½æ¹å¼ã
     */
    this.align = TextAlignment.BASELINECENTER;
    /**
     * @member {SuperMap.ServerColor} [SuperMap.ServerTextStyle.prototype.backColor=(255, 255, 255)]
     * @description ææ¬çèæ¯è²ã
     */

    this.backColor = new ServerColor(255, 255, 255);
    /**
     * @member {SuperMap.ServerColor} [SuperMap.ServerTextStyle.prototype.foreColor=(0, 0, 0)]
     * @description ææ¬çåæ¯è²ã
     */

    this.foreColor = new ServerColor(0, 0, 0);
    /**
     * @member {boolean} [SuperMap.ServerTextStyle.prototype.backOpaque=false]
     * @description ææ¬èæ¯æ¯å¦ä¸éæãtrue è¡¨ç¤ºææ¬èæ¯ä¸éæã
     */

    this.backOpaque = false;
    /**
     * @member {boolean} [SuperMap.ServerTextStyle.prototype.sizeFixed=true]
     * @description ææ¬å¤§å°æ¯å¦åºå®ãè®¾ç½®ä¸º trueï¼è¡¨ç¤ºå¾çä¸ºåºå®åç´ å¤§å°ï¼å·ä½å¤§å°è¯·åè fontHeightãå½è®¾ä¸º false æ¶ï¼å¾çä¼éçå°å¾ç¼©æ¾èç¼©æ¾ã
     */

    this.sizeFixed = true;
    /**
     * @member {number} [SuperMap.ServerTextStyle.prototype.fontHeight=6]
     * @description ææ¬å­ä½çé«åº¦ï¼åä½ä¸ sizeFixed æå³ï¼å½ sizeFixed ä¸º False æ¶ï¼å³éåºå®ææ¬å¤§å°æ¶ä½¿ç¨å°å¾åæ åä½ï¼
     *              å¦å°çåæ ç³»ä¸çå°å¾ä¸­åä½ä¸ºåº¦ï¼å½ sizeFixed ä¸º True æ¶ï¼åä½ä¸ºæ¯«ç±³ï¼mmï¼ã
     */

    this.fontHeight = 6;
    /**
     * @member {number} [SuperMap.ServerTextStyle.prototype.fontWidth=0]
     * @description ææ¬å­ä½çå®½åº¦ãå­ä½çå®½åº¦ä»¥è±æå­ç¬¦ä¸ºæ åï¼ç±äºä¸ä¸ªä¸­æå­ç¬¦ç¸å½äºä¸¤ä¸ªè±æå­ç¬¦ã
     */

    this.fontWidth = 0;
    /**
     * @member {number} [SuperMap.ServerTextStyle.prototype.fontWeight=400]
     * @description ææ¬å­ä½çç£æ°ãè¡¨ç¤ºç²ä½çå·ä½æ°å¼ãåå¼èå´ä¸ºä»0ï¼900ä¹é´çæ´ç¾æ°ã
     */

    this.fontWeight = 400;
    /**
     * @member {string} [SuperMap.ServerTextStyle.prototype.fontName="Times New Roman"]
     * @description ææ¬å­ä½çåç§°ã
     */

    this.fontName = "Times New Roman";
    /**
     * @member {boolean} [SuperMap.ServerTextStyle.prototype.bold=false]
     * @description ææ¬æ¯å¦ä¸ºç²ä½å­ãtrue è¡¨ç¤ºä¸ºç²ä½ãfalse è¡¨ç¤ºææ¬ä¸æ¯ç²ä½å­ã
     */

    this.bold = false;
    /**
     * @member {boolean} [SuperMap.ServerTextStyle.prototype.italic=false]
     * @description ææ¬æ¯å¦éç¨æä½ãtrue è¡¨ç¤ºéç¨æä½ã
     */

    this.italic = false;
    /**
     * @member {number} [SuperMap.ServerTextStyle.prototype.italicAngle=0]
     * @description å­ä½å¾æè§åº¦ãæ­£è´åº¦ä¹é´ï¼ä»¥åº¦ä¸ºåä½ï¼ç²¾ç¡®å°0.1åº¦ãå½å¾æè§åº¦ä¸º0åº¦ï¼ä¸ºç³»ç»é»è®¤çå­ä½å¾ææ ·å¼ã
     *              æ­£è´åº¦æ¯æä»¥çºµè½´ä¸ºèµ·å§é¶åº¦çº¿ï¼å¶çºµè½´å·¦ä¾§ä¸ºæ­£ï¼å³ä¾§ä¸ºè´ãåè®¸çæå¤§è§åº¦ä¸º60ï¼æå°-60ãå¤§äº60æç§60å¤çï¼å°äº-60æç§-60å¤çãç®ååªå¯¹æ ç­¾ä¸é¢å¾ææã
     */

    this.italicAngle = 0;
    /**
     * @member {boolean} [SuperMap.ServerTextStyle.prototype.shadow=false]
     * @description ææ¬æ¯å¦æé´å½±ãtrue è¡¨ç¤ºç»ææ¬å¢å é´å½±ãfalse è¡¨ç¤ºææ¬æ²¡æé´å½±ã
     */

    this.shadow = false;
    /**
     * @member {boolean} [SuperMap.ServerTextStyle.prototype.strikeout=false]
     * @description ææ¬å­ä½æ¯å¦å å é¤çº¿ãtrue è¡¨ç¤ºå å é¤çº¿ãfalse è¡¨ç¤ºææ¬å­ä½ä¸å å é¤çº¿ã
     */

    this.strikeout = false;
    /**
     * @member {boolean} [SuperMap.ServerTextStyle.prototype.outline=false]
     * @description æ¯å¦ä»¥è½®å»çæ¹å¼æ¥æ¾ç¤ºææ¬çèæ¯ãtrue è¡¨ç¤ºä»¥è½®å»çæ¹å¼æ¥æ¾ç¤ºææ¬çèæ¯ãfalse è¡¨ç¤ºä¸ä»¥è½®å»çæ¹å¼æ¥æ¾ç¤ºææ¬çèæ¯ã
     */

    this.outline = false;
    /**
     * @member {number} [SuperMap.ServerTextStyle.prototype.opaqueRate=0]
     * @description æ³¨è®°æå­çä¸éæåº¦ãä¸éæåº¦çèå´ä¸º0-100ã0è¡¨ç¤ºéæã
     */

    this.opaqueRate = 0;
    /**
     * @member {boolean} [SuperMap.ServerTextStyle.prototype.underline=false]
     * @description ææ¬å­ä½æ¯å¦å ä¸åçº¿ãtrue è¡¨ç¤ºå ä¸åçº¿ã
     */

    this.underline = false;
    /**
     * @member {number} [SuperMap.ServerTextStyle.prototype.rotation=0.0]
     * @description ææ¬æè½¬çè§åº¦ãéæ¶éæ¹åä¸ºæ­£æ¹åï¼åä½ä¸ºåº¦ï¼ç²¾ç¡®å°0.1åº¦ã
     */

    this.rotation = 0.0;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ServerTextStyle";
  }
  /**
   * @function SuperMap.ServerTextStyle.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ServerTextStyle_createClass(ServerTextStyle, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.align = null;

      if (me.backColor) {
        me.backColor.destroy();
        me.backColor = null;
      }

      if (me.foreColor) {
        me.foreColor.destroy();
        me.foreColor = null;
      }

      me.backOpaque = null;
      me.sizeFixed = null;
      me.fontHeight = null;
      me.fontWidth = null;
      me.fontWeight = null;
      me.fontName = null;
      me.bold = null;
      me.italic = null;
      me.italicAngle = null;
      me.shadow = null;
      me.strikeout = null;
      me.outline = null;
      me.opaqueRate = null;
      me.underline = null;
      me.rotation = null;
    }
    /**
     * @function SuperMap.ServerTextStyle.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·æå¡ç«¯ææ¬é£æ ¼ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡
     * @returns {SuperMap.ServerTextStyle} è¿åæå¡ç«¯ææ¬é£æ ¼å¯¹è±¡
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      var res = new ServerTextStyle(obj);
      Util.copy(res, obj);
      res.backColor = ServerColor.fromJson(obj.backColor);
      res.foreColor = ServerColor.fromJson(obj.foreColor);
      return res;
    }
  }]);

  return ServerTextStyle;
}();
SuperMap.ServerTextStyle = ServerTextStyle;
// CONCATENATED MODULE: ./src/common/iServer/ThemeLabelItem.js
function ThemeLabelItem_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeLabelItem_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeLabelItem_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeLabelItem_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeLabelItem_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.ThemeLabelItem
 * @category  iServer Map Theme
 * @classdesc åæ®µæ ç­¾ä¸é¢å¾çå­é¡¹ã
 * @description æ ç­¾ä¸é¢å¾ç¨ä¸é¢å¼å¯¹ç¹ãçº¿ãé¢ç­å¯¹è±¡åæ æ³¨ï¼å¼å¾æ³¨æçæ¯ï¼åæ®µæ ç­¾ä¸é¢å¾åè®¸ç¨æ·éè¿ rangeExpression
 *              å­æ®µæå®ç¨äºåæ®µçæ°å¼åå­æ®µï¼åä¸èå´æ®µåçæ ç­¾å·æç¸åçæ¾ç¤ºé£æ ¼ï¼å¶ä¸­æ¯ä¸ä¸ªèå´æ®µå°±æ¯ä¸ä¸ªä¸é¢å¾å­é¡¹ï¼
 *              æ¯ä¸ä¸ªå­é¡¹é½å·æå¶åç§°ãé£æ ¼ãèµ·å§å¼åç»æ­¢å¼ãæ³¨æï¼æ¯ä¸ªåæ®µæè¡¨ç¤ºçèå´ä¸º [Start, End)ãä¾å¦ï¼æ ç­¾ä¸é¢å¾çåæ®µç¹æä¸¤ä¸ªå­é¡¹ï¼
 *              ä»ä»¬æä»£è¡¨çåæ®µåºé´åå«ä¸º[0,5)ï¼[5,10)ãé£ä¹éè¦åå«è®¾ç½® SuperMap.ThemeLabelItem[0].start=0ï¼
 *              SuperMap.ThemeLabelItem[0].end=5ï¼SuperMap.ThemeLabelItem[1].start=5ï¼SuperMap.ThemeLabelItem[1].end=10ã
 * @param {Object} options - åæ°ã
 * @param {string} [options.caption] - ä¸é¢å¾å­é¡¹çåç§°ã
 * @param {number} [options.end=0] - æ ç­¾ä¸é¢å¾å­é¡¹çç»æ­¢å¼ã
 * @param {number} [options.start=0] - æ ç­¾ä¸é¢å¾å­é¡¹çåæ®µèµ·å§å¼ã
 * @param {boolean} [options.visible=true] - æ ç­¾ä¸é¢å¾å­é¡¹æ¯å¦å¯è§ã
 * @param {SuperMap.ServerTextStyle} [options.style] - æ ç­¾ä¸é¢å¾å­é¡¹ææ¬çæ¾ç¤ºé£æ ¼ã
 */

var ThemeLabelItem = /*#__PURE__*/function () {
  function ThemeLabelItem(options) {
    ThemeLabelItem_classCallCheck(this, ThemeLabelItem);

    /**
     * @member {string} [SuperMap.ThemeLabelItem.prototype.caption]
     * @description æ ç­¾ä¸é¢å­é¡¹çæ é¢ã
     */
    this.caption = null;
    /**
     * @member {number} [SuperMap.ThemeLabelItem.prototype.end=0]
     * @description æ ç­¾ä¸é¢å¾å­é¡¹çç»æ­¢å¼ãå¦æè¯¥å­é¡¹æ¯åæ®µä¸­æåä¸ä¸ªå­é¡¹ï¼é£ä¹è¯¥ç»æ­¢å¼å°±æ¯åæ®µçæå¤§å¼ï¼
     *              å¦æä¸æ¯æåä¸é¡¹ï¼è¯¥ç»æ­¢å¼å¿é¡»ä¸å¶ä¸ä¸å­é¡¹çèµ·å§å¼ç¸åï¼å¦åç³»ç»æåºå¼å¸¸ã
     */

    this.end = 0;
    /**
     * @member {number} [SuperMap.ThemeLabelItem.prototype.start=0]
     * @description æ ç­¾ä¸é¢å¾å­é¡¹çåæ®µèµ·å§å¼ãå¦æè¯¥å­é¡¹æ¯åæ®µä¸­ç¬¬ä¸é¡¹ï¼é£ä¹è¯¥èµ·å§å¼å°±æ¯åæ®µçæå°å¼ï¼
     *              å¦æè¯¥å­é¡¹çåºå·å¤§äºç­äº 1 çæ¶åï¼è¯¥èµ·å§å¼å¿é¡»ä¸åä¸å­é¡¹çç»æ­¢å¼ç¸åï¼å¦åç³»ç»ä¼æåºå¼å¸¸ã
     */

    this.start = 0;
    /**
     * @member {boolean} [SuperMap.ThemeLabelItem.prototype.visible=true]
     * @description æ ç­¾ä¸é¢å¾å­é¡¹æ¯å¦å¯è§ãå¦ææ ç­¾ä¸é¢å¾å­é¡¹å¯è§ï¼åä¸º trueï¼å¦åä¸º falseã
     */

    this.visible = true;
    /**
     * @member {SuperMap.ServerTextStyle} SuperMap.ThemeLabelItem.prototype.style
     * @description æ ç­¾ä¸é¢å¾å­é¡¹ææ¬çæ¾ç¤ºé£æ ¼ãåç§é£æ ¼çä¼åçº§ä»é«å°ä½ä¸ºï¼<br>
     *              uniformMixedStyleï¼æ ç­¾ææ¬çå¤åé£æ ¼ï¼ï¼SuperMap.ThemeLabelItem.styleï¼åæ®µå­é¡¹çææ¬é£æ ¼ï¼ï¼uniformStyleï¼ç»ä¸ææ¬é£æ ¼ï¼ã
     */

    this.style = new ServerTextStyle();

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ThemeLabelItem";
  }
  /**
   * @function SuperMap.ThemeLabelItem.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThemeLabelItem_createClass(ThemeLabelItem, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.caption = null;
      me.end = null;
      me.start = null;

      if (me.style) {
        me.style.destroy();
        me.style = null;
      }

      me.visible = null;
    }
    /**
     * @function SuperMap.ThemeLabelItem.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·ååæ®µæ ç­¾ä¸é¢å¾çå­é¡¹ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeLabelItem} ThemeLabelItem å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      if (!obj) {
        return;
      }

      var t = new ThemeLabelItem();
      Util.copy(t, obj);
      return t;
    }
  }]);

  return ThemeLabelItem;
}();
SuperMap.ThemeLabelItem = ThemeLabelItem;
// CONCATENATED MODULE: ./src/common/iServer/ThemeUniqueItem.js
function ThemeUniqueItem_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeUniqueItem_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeUniqueItem_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeUniqueItem_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeUniqueItem_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.ThemeUniqueItem
 * @category  iServer Map Theme
 * @classdesc åå¼ä¸é¢å¾å­é¡¹ç±»ã
 * @description åå¼ä¸é¢å¾æ¯å°ä¸é¢å¼ç¸åçè¦ç´ å½ä¸ºä¸ç±»ï¼ä¸ºæ¯ä¸ç±»è®¾å®ä¸ç§æ¸²æé£æ ¼ï¼å¶ä¸­æ¯ä¸ç±»å°±æ¯ä¸ä¸ªä¸é¢å¾å­é¡¹ãæ¯å¦ï¼å©ç¨åå¼ä¸é¢å¾å¶ä½è¡æ¿åºåå¾ï¼Name å­æ®µä»£è¡¨
 *              ç/ç´è¾å¸åï¼è¯¥å­æ®µç¨æ¥åä¸é¢åéï¼å¦æè¯¥å­æ®µçå­æ®µå¼æ»å±æ 5 ç§ä¸åå¼ï¼åè¯¥è¡æ¿åºåå¾æ 5 ä¸ªä¸é¢å¾å­é¡¹ã
 * @param {Object} options - åæ°ã
 * @param {string} options.unique - åå¼ä¸é¢å¾å­é¡¹çåå¼ã
 * @param {string} [options.caption] - åå¼ä¸é¢å¾å­é¡¹çæ é¢ã
 * @param {SuperMap.ServerStyle} [options.style] - åå¼ä¸é¢å¾å­é¡¹çé£æ ¼ã
 * @param {boolean} [options.visible=true] - åå¼ä¸é¢å¾å­é¡¹æ¯å¦å¯è§ã
 */

var ThemeUniqueItem = /*#__PURE__*/function () {
  function ThemeUniqueItem(options) {
    ThemeUniqueItem_classCallCheck(this, ThemeUniqueItem);

    /**
     * @member {string} [SuperMap.ThemeUniqueItem.prototype.caption]
     * @description åå¼ä¸é¢å¾å­é¡¹çæ é¢ã
     */
    this.caption = null;
    /**
     * @member {SuperMap.ServerStyle} [SuperMap.ThemeUniqueItem.prototype.style]
     * @description åå¼ä¸é¢å¾å­é¡¹çæ¾ç¤ºé£æ ¼ã
     */

    this.style = new ServerStyle();
    /**
     * @member {string} SuperMap.ThemeUniqueItem.prototype.unique
     * @description åå¼ä¸é¢å¾å­é¡¹çå¼ï¼å¯ä»¥ä¸ºæ°å­ãå­ç¬¦ä¸²ç­ã
     */

    this.unique = null;
    /**
     * @member {boolean} [SuperMap.ThemeUniqueItem.prototype.visible=true]
     * @description åå¼ä¸é¢å¾å­é¡¹çå¯è§æ§ã
     */

    this.visible = true;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ThemeUniqueItem";
  }
  /**
   * @function SuperMap.ThemeUniqueItem.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThemeUniqueItem_createClass(ThemeUniqueItem, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.caption = null;
      me.unique = null;

      if (me.style) {
        me.style.destroy();
        me.style = null;
      }

      me.visible = null;
    }
    /**
     * @function SuperMap.ThemeUniqueItem.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     * @returns {Object} å¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      var obj = {};
      obj = Util.copyAttributes(obj, this);

      if (obj.style) {
        if (obj.style.toServerJSONObject) {
          obj.style = obj.style.toServerJSONObject();
        }
      }

      return obj;
    }
    /**
     * @function SuperMap.ThemeUniqueItem.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·ååå¼ä¸é¢å¾å­é¡¹ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeUniqueItem} ThemeUniqueItem å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      var res = new ThemeUniqueItem();
      Util.copy(res, obj);
      res.style = ServerStyle.fromJson(obj.style);
      return res;
    }
  }]);

  return ThemeUniqueItem;
}();
SuperMap.ThemeUniqueItem = ThemeUniqueItem;
// CONCATENATED MODULE: ./src/common/iServer/ThemeFlow.js
function ThemeFlow_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeFlow_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeFlow_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeFlow_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeFlow_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.ThemeFlow
 * @category  iServer Map Theme
 * @classdesc æ ç­¾æç¬¦å·æµå¨æ¾ç¤ºåçµå¼çº¿é£æ ¼è®¾ç½®ç±»ã
 *            éè¿è¯¥ç±»å¯ä»¥è®¾ç½®ä¸é¢å¾ä¸­ç¬¦å·æ¯å¦æµå¨æ¾ç¤ºãæ¯å¦ä½¿ç¨çµå¼çº¿ä»¥åçµå¼çº¿é£æ ¼ã
 * @param {Object} options - åæ°ã
 * @param {boolean} [options.flowEnabled=false] - æ¯å¦æµå¨æ¾ç¤ºæ ç­¾æç¬¦å·ã
 * @param {boolean} [options.leaderLineDisplayed=false] - æ¯å¦æ¾ç¤ºæ ç­¾æç¬¦å·åå®æ æ³¨çå¯¹è±¡ä¹é´ççµå¼çº¿ã
 * @param {SuperMap.ServerStyle} [options.leaderLineStyle] - æ ç­¾æç¬¦å·ä¸å¶æ æ³¨å¯¹è±¡ä¹é´çµå¼çº¿çé£æ ¼ã
 */

var ThemeFlow = /*#__PURE__*/function () {
  function ThemeFlow(options) {
    ThemeFlow_classCallCheck(this, ThemeFlow);

    /**
     * @member {boolean} [SuperMap.ThemeFlow.prototype.flowEnabled=false]
     * @description æ¯å¦æµå¨æ¾ç¤ºæ ç­¾æç¬¦å·ã<br>
     *              å¯¹äºæ ç­¾ä¸é¢å¾èè¨ï¼å¯¹äºè·¨è¶æ¯è¾å¤§çåºååçº¿æ¡ç¶çå ä½å¯¹è±¡ï¼å¨ä¸ä¸ªå°å¾çªå£ä¸­ä¸è½å®å¨æ¾ç¤ºçæåµä¸ï¼å¦æå¶æ ç­¾ä½ç½®æ¯è¾åºå®ï¼
     *              å¨å½åå°å¾çªå£ä¸­è¯¥å¯¹è±¡çæ ç­¾ä¸å¯è§ï¼åéè¦éè¿å¹³ç§»å°å¾æ¥æ¥çå¯¹è±¡çæ ç­¾ä¿¡æ¯ãå¦æéç¨äºæµå¨æ¾ç¤ºçææï¼å¨å½åå°å¾çªå£ä¸­ï¼å¯¹è±¡å³ä½¿æ¯é¨åæ¾ç¤ºï¼
     *              å¶æ ç­¾ä¹ä¼æ¾ç¤ºå¨å½åå°å¾çªå£ä¸­ãå½å¹³ç§»å°å¾æ¶ï¼å¯¹è±¡çæ ç­¾ä¼éä¹ç§»å¨ï¼ä»¥ä¿è¯å¨å½åå°å¾çªå£ä¸­é¨åæå¨é¨æ¾ç¤ºçå¯¹è±¡å¶æ ç­¾é½å¯è§ï¼ä»èå¯ä»¥æ¹ä¾¿å°æ¥çåè¦ç´ çæ ç­¾ä¿¡æ¯ã
     */
    this.flowEnabled = false;
    /**
     * @member {boolean} [SuperMap.ThemeFlow.prototype.leaderLineDisplayed=false]
     * @description æ¯å¦æ¾ç¤ºæ ç­¾æç¬¦å·åå®æ æ³¨çå¯¹è±¡ä¹é´ççµå¼çº¿ãfalseè¡¨ç¤ºä¸æ¾ç¤ºæ ç­¾æç¬¦å·åå®æ æ³¨çå¯¹è±¡ä¹é´ççµå¼çº¿ã<br>
     *              åªæå½ flowEnabled ä¸º true æ¶ï¼çµå¼çº¿æèµ·ä½ç¨ãå¨å½æ ç­¾æµå¨æ¾ç¤ºæ¶ï¼å¶ä½ç½®ä¸åºå®ï¼ç±äºçµå¼çº¿å§ç»æåè¦ç´ çåç¹ï¼
     *              å èéè¿çµå¼çº¿æ¾ç¤ºåè½å¯ä»¥æ¾å°æµå¨çæ ç­¾æç¬¦å·å®éå¯¹åºçè¦ç´ ãæèæ¸²æç¬¦å·åç§»å®ææåçå¯¹è±¡æ¶ï¼å¾ä¸å¯¹è±¡ä¹é´å¯ä»¥éç¨çµå¼çº¿è¿è¡è¿æ¥ã
     */

    this.leaderLineDisplayed = false;
    /**
     * @member {SuperMap.ServerStyle} SuperMap.ThemeFlow.prototype.leaderLineStyle
     * @description æ ç­¾æç¬¦å·ä¸å¶æ æ³¨å¯¹è±¡ä¹é´çµå¼çº¿çé£æ ¼ã
     */

    this.leaderLineStyle = new ServerStyle();

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ThemeFlow";
  }
  /**
   * @function SuperMap.ThemeFlow.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThemeFlow_createClass(ThemeFlow, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.flowEnabled = null;
      me.leaderLineDisplayed = null;

      if (me.leaderLineStyle) {
        me.leaderLineStyle.destroy();
        me.leaderLineStyle = null;
      }
    }
    /**
     * @function SuperMap.ThemeFlow.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·åæ ç­¾æç¬¦å·æµå¨æ¾ç¤ºåçµå¼çº¿é£æ ¼è®¾ç½®ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeFlow} ThemeFlow å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      if (!obj) {
        return;
      }

      var res = new ThemeFlow();
      Util.copy(res, obj);
      res.leaderLineStyle = ServerStyle.fromJson(obj.leaderLineStyle);
      return res;
    }
  }]);

  return ThemeFlow;
}();
SuperMap.ThemeFlow = ThemeFlow;
// CONCATENATED MODULE: ./src/common/iServer/ThemeOffset.js
function ThemeOffset_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeOffset_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeOffset_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeOffset_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeOffset_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.ThemeOffset
 * @category  iServer Map Theme
 * @classdesc ä¸é¢å¾ä¸­ææ¬æç¬¦å·ç¸å¯¹äºè¦ç´ åç¹çåç§»éè®¾ç½®ç±»ã
 *            éè¿è¯¥ç±»å¯ä»¥è®¾ç½®ä¸é¢å¾ä¸­æ è®°ææ¬æç¬¦å·çåç§»éä»¥ååç§»éæ¯å¦éå°å¾ç¼©æ¾èæ¹åã
 * @param {Object} options - åæ°ã
 * @param {boolean} [options.offsetFixed=false] - å½åä¸é¢å¾æ¯å¦åºå®æ è®°ææ¬æç¬¦å·çåç§»éã
 * @param {string} [options.offsetX='0.0'] - ä¸é¢å¾ä¸­ææ¬æç¬¦å·ç¸å¯¹äºè¦ç´ åç¹çæ°´å¹³åç§»éã
 * @param {string} [options.offsetY='0.0'] - ä¸é¢å¾ä¸­ææ¬æç¬¦å·ç¸å¯¹äºè¦ç´ åç¹çåç´åç§»éã
 */

var ThemeOffset = /*#__PURE__*/function () {
  function ThemeOffset(options) {
    ThemeOffset_classCallCheck(this, ThemeOffset);

    /**
     * @member {boolean} [SuperMap.ThemeOffset.prototype.offsetFixed=false]
     * @description å½åä¸é¢å¾æ¯å¦åºå®æ è®°ææ¬æç¬¦å·çåç§»éãæè°åºå®åç§»éï¼åææ¬æç¬¦å·çåç§»éä¸éå°å¾çç¼©æ¾èååã
     */
    this.offsetFixed = false;
    /**
     * @member {string} [SuperMap.ThemeOffset.prototype.offsetX=0.0]
     * @description ä¸é¢å¾ä¸­ææ¬æç¬¦å·ç¸å¯¹äºè¦ç´ åç¹çæ°´å¹³åç§»éãåç§»éçåä½ä¸ºå°å¾åä½ã
     *              è¯¥åç§»éçå¼ä¸ºä¸ä¸ªå¸¸éå¼æèå­æ®µè¡¨è¾¾å¼æè¡¨ç¤ºçå¼ï¼å³å¦æå­æ®µè¡¨è¾¾å¼ä¸º SmIDï¼å¶ä¸­ SmID = 2ï¼é£ä¹æ°´å¹³åç§»éä¸º2ã
     */

    this.offsetX = "0.0";
    /**
     * @member {string} [SuperMap.ThemeOffset.prototype.offsetY=0.0]
     * @description ä¸é¢å¾ä¸­ææ¬æç¬¦å·ç¸å¯¹äºè¦ç´ åç¹çåç´åç§»éãåç§»éçåä½ä¸ºå°å¾åä½ã
     *              è¯¥åç§»éçå¼ä¸ºä¸ä¸ªå¸¸éå¼æèå­æ®µè¡¨è¾¾å¼æè¡¨ç¤ºçå¼ï¼å³å¦æå­æ®µè¡¨è¾¾å¼ä¸º SmIDï¼å¶ä¸­ SmID = 2ï¼é£ä¹åç´åç§»éä¸º2ã
     */

    this.offsetY = "0.0";

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ThemeOffset";
  }
  /**
   * @function SuperMap.ThemeOffset.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThemeOffset_createClass(ThemeOffset, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.offsetFixed = null;
      me.offsetX = null;
      me.offsetY = null;
    }
    /**
     * @function SuperMap.ThemeOffset.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·åä¸é¢å¾ä¸­ææ¬æç¬¦å·ç¸å¯¹äºè¦ç´ åç¹çåç§»éè®¾ç½®ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeOffset} ThemeOffset å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      if (!obj) {
        return;
      }

      var res = new ThemeOffset();
      Util.copy(res, obj);
      return res;
    }
  }]);

  return ThemeOffset;
}();
SuperMap.ThemeOffset = ThemeOffset;
// CONCATENATED MODULE: ./src/common/iServer/LabelMixedTextStyle.js
function LabelMixedTextStyle_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function LabelMixedTextStyle_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function LabelMixedTextStyle_createClass(Constructor, protoProps, staticProps) { if (protoProps) LabelMixedTextStyle_defineProperties(Constructor.prototype, protoProps); if (staticProps) LabelMixedTextStyle_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.LabelMixedTextStyle
 * @category iServer Map Theme
 * @classdesc æ ç­¾ææ¬å¤åé£æ ¼ç±»
 * @description è¯¥ç±»ä¸»è¦ç¨äºå¯¹æ ç­¾ä¸é¢å¾ä¸­æ ç­¾çææ¬åå®¹è¿è¡é£æ ¼è®¾ç½®ãéè¿è¯¥ç±»ç¨æ·å¯ä»¥ä½¿æ ç­¾çæå­æ¾ç¤ºä¸åçé£æ ¼ï¼æ¯å¦ææ¬ âåé©¬æéå±±âï¼éè¿æ¬ç±»å¯ä»¥å°åä¸ä¸ªå­ç¨çº¢è²æ¾ç¤ºï¼åä¸¤ä¸ªå­ç¨èè²æ¾ç¤ºãå¯¹åä¸ææ¬è®¾ç½®ä¸åçé£æ ¼å®è´¨ä¸æ¯å¯¹ææ¬çå­ç¬¦è¿è¡åæ®µï¼åä¸åæ®µåçå­ç¬¦å·æç¸åçæ¾ç¤ºé£æ ¼ãå¯¹å­ç¬¦åæ®µæä¸¤ç§æ¹å¼ï¼ä¸ç§æ¯å©ç¨åéç¬¦å¯¹ææ¬è¿è¡åæ®µï¼å¦ä¸ç§æ¯æ ¹æ®åæ®µç´¢å¼å¼è¿è¡åæ®µã<br>
 *  1. å©ç¨åéç¬¦å¯¹ææ¬è¿è¡åæ®µ: æ¯å¦ææ¬ â5&109â è¢«åéç¬¦ â&â åä¸º â5â å â109â ä¸¤é¨åï¼
 *     å¨æ¾ç¤ºæ¶ï¼â5â ååéç¬¦ â&â ä½¿ç¨åä¸ä¸ªé£æ ¼ï¼å­ç¬¦ä¸² â109â ä½¿ç¨ç¸åçé£æ ¼ã<br>
 *  2. å©ç¨åæ®µç´¢å¼å¼è¿è¡åæ®µ: ææ¬ä¸­å­ç¬¦çç´¢å¼å¼æ¯ä»¥0å¼å§çæ´æ°ï¼æ¯å¦ææ¬ âç ç©æçå³°âï¼
 *     ç¬¬ä¸ä¸ªå­ç¬¦ï¼âç âï¼çç´¢å¼å¼ä¸º 0ï¼ç¬¬äºä¸ªå­ç¬¦ï¼âç©âï¼çç´¢å¼å¼ä¸º 1ï¼ä»¥æ­¤ç±»æ¨ï¼å½è®¾ç½®åæ®µç´¢å¼å¼ä¸º 1ï¼3ï¼4ï¼9 æ¶ï¼
 *     å­ç¬¦åæ®µèå´ç¸åºçå°±æ¯ (-âï¼1)ï¼[1ï¼3)ï¼[3ï¼4)ï¼[4ï¼9)ï¼[9ï¼+â)ï¼å¯ä»¥çåºç´¢å¼å·ä¸º 0 çå­ç¬¦ï¼å³âç â ï¼å¨ç¬¬ä¸ä¸ªåæ®µåï¼
 *     ç´¢å¼å·ä¸º 1ï¼2 çå­ç¬¦ï¼å³âç©âãâæâï¼ä½äºç¬¬äºä¸ªåæ®µåï¼ç´¢å¼å·ä¸º 3 çå­ç¬¦ï¼âçâï¼å¨ç¬¬ä¸ä¸ªåæ®µåï¼ç´¢å¼å·ä¸º 4 çå­ç¬¦ï¼âå³°âï¼å¨ç¬¬åä¸ªåæ®µåï¼å¶ä½åæ®µä¸­æ²¡æå­ç¬¦ã
 * @param {Object} options - åæ°ã
 * @param {SuperMap.ServerTextStyle} [options.defaultStyle] - é»è®¤çææ¬å¤åé£æ ¼ã
 * @param {string} [options.separator] - ææ¬çåéç¬¦ã 
 * @param {boolean} [options.separatorEnabled=false] - ææ¬çåéç¬¦æ¯å¦ææã 
 * @param {Array.<number>} [options.splitIndexes] - åæ®µç´¢å¼å¼ï¼åæ®µç´¢å¼å¼ç¨æ¥å¯¹ææ¬ä¸­çå­ç¬¦è¿è¡åæ®µã 
 * @param {Array.<SuperMap.ServerTextStyle>} [options.styles] - ææ¬æ ·å¼éåã
 */

var LabelMixedTextStyle = /*#__PURE__*/function () {
  function LabelMixedTextStyle(options) {
    LabelMixedTextStyle_classCallCheck(this, LabelMixedTextStyle);

    /**
     * @member {SuperMap.ServerTextStyle} SuperMap.LabelMixedTextStyle.prototype.defaultStyle
     * @description é»è®¤çææ¬å¤åé£æ ¼ï¼å³ SuperMap.ServerTextStyle åå­æ®µçé»è®¤å¼ã
     */
    this.defaultStyle = null;
    /**
     * @member {string} SuperMap.LabelMixedTextStyle.prototype.separator
     * @description ææ¬çåéç¬¦ï¼åéç¬¦çé£æ ¼ä¸åä¸ä¸ªå­ç¬¦çé£æ ¼ä¸æ ·ãææ¬çåéç¬¦æ¯ä¸ä¸ªå°ææ¬åå²å¼çç¬¦å·ï¼
     *              æ¯å¦ææ¬ â5_109â è¢« â_â éç¬¦ä¸º â5â å â109â ä¸¤é¨åï¼åè®¾æé£æ ¼æ°ç»ï¼style1ãstyle2ã
     *              å¨æ¾ç¤ºæ¶ï¼â5â ååéç¬¦ â_â ä½¿ç¨ Style1 é£æ ¼æ¸²æï¼å­ç¬¦ä¸² â109â ä½¿ç¨ Style2 çé£æ ¼ã
     */

    this.separator = null;
    /**
     * @member {boolean} [SuperMap.LabelMixedTextStyle.prototype.separatorEnabled=false]
     * @description ææ¬çåéç¬¦æ¯å¦ææãåéç¬¦æææ¶å©ç¨åéç¬¦å¯¹ææ¬è¿è¡åæ®µï¼æ ææ¶æ ¹æ®ææ¬ä¸­å­ç¬¦çä½ç½®è¿è¡åæ®µã
     *              åæ®µåï¼åä¸åæ®µåçå­ç¬¦å·æç¸åçæ¾ç¤ºé£æ ¼ã
     */

    this.separatorEnabled = false;
    /**
     * @member {Array.<number>} SuperMap.LabelMixedTextStyle.prototype.splitIndexes
     * @description åæ®µç´¢å¼å¼ï¼åæ®µç´¢å¼å¼ç¨æ¥å¯¹ææ¬ä¸­çå­ç¬¦è¿è¡åæ®µã
     *              ææ¬ä¸­å­ç¬¦çç´¢å¼å¼æ¯ä»¥ 0 å¼å§çæ´æ°ï¼æ¯å¦ææ¬âç ç©æçå³°âï¼ç¬¬ä¸ä¸ªå­ç¬¦ï¼âç âï¼çç´¢å¼å¼ä¸º0ï¼ç¬¬äºä¸ªå­ç¬¦ï¼âç©âï¼çç´¢å¼å¼ä¸º 1ï¼
     *              ä»¥æ­¤ç±»æ¨ï¼å½è®¾ç½®åæ®µç´¢å¼å¼æ°ç»ä¸º [1ï¼3ï¼4ï¼9] æ¶ï¼å­ç¬¦åæ®µèå´ç¸åºçå°±æ¯ (-âï¼1)ï¼[1ï¼3)ï¼[3ï¼4)ï¼[4ï¼9)ï¼[9ï¼+â)ï¼
     *              å¯ä»¥çåºç´¢å¼å·ä¸º 0 çå­ç¬¦ï¼å³ âç âï¼å¨ç¬¬ä¸ä¸ªåæ®µåï¼ç´¢å¼å·ä¸º 1ï¼2 çå­ç¬¦ï¼å³ âç©âãâæâï¼ä½äºç¬¬äºä¸ªåæ®µåï¼
     *              ç´¢å¼å·ä¸º 3 çå­ç¬¦ï¼âçâï¼å¨ç¬¬ä¸ä¸ªåæ®µåï¼ç´¢å¼å·ä¸º 4 çå­ç¬¦ï¼âå³°âï¼å¨ç¬¬åä¸ªåæ®µåï¼å¶ä½åæ®µä¸­æ²¡æå­ç¬¦ã
     */

    this.splitIndexes = null;
    /**
     * @member {Array.<SuperMap.ServerTextStyle>} SuperMap.LabelMixedTextStyle.prototype.styles
     * @description ææ¬æ ·å¼éåãææ¬æ ·å¼éåä¸­çæ ·å¼æ ¹æ®ç´¢å¼ä¸ä¸ååæ®µä¸ä¸å¯¹åºï¼
     *              å¦ææåæ®µæ²¡æé£æ ¼å¯¹åºåä½¿ç¨ defaultStyleã
     */

    this.styles = new ServerTextStyle();

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.LabelMixedTextStyle";
  }
  /**
   * @function SuperMap.LabelMixedTextStyle.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  LabelMixedTextStyle_createClass(LabelMixedTextStyle, [{
    key: "destroy",
    value: function destroy() {
      var me = this;

      if (me.defaultStyle) {
        me.defaultStyle.destroy();
        me.defaultStyle = null;
      }

      me.separator = null;
      me.separatorEnabled = null;

      if (me.splitIndexes) {
        me.splitIndexes = null;
      }

      if (me.styles) {
        for (var i = 0, styles = me.styles, len = styles.length; i < len; i++) {
          styles[i].destroy();
        }

        me.styles = null;
      }
    }
    /**
     * @function SuperMap.LabelMixedTextStyle.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·åæ ç­¾ææ¬å¤åé£æ ¼ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.LabelMixedTextStyle} è¿åæ°ç LabelMixedTextStyle å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      if (!obj) {
        return;
      }

      var res = new LabelMixedTextStyle();
      var stys = obj.styles;
      Util.copy(res, obj);
      res.defaultStyle = new ServerTextStyle(obj.defaultStyle);

      if (stys) {
        res.styles = [];

        for (var i = 0, len = stys.length; i < len; i++) {
          res.styles.push(new ServerTextStyle(stys[i]));
        }
      }

      return res;
    }
  }]);

  return LabelMixedTextStyle;
}();
SuperMap.LabelMixedTextStyle = LabelMixedTextStyle;
// CONCATENATED MODULE: ./src/common/iServer/ThemeLabelText.js
function ThemeLabelText_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeLabelText_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeLabelText_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeLabelText_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeLabelText_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.ThemeLabelText
 * @category  iServer Map Theme
 * @classdesc æ ç­¾ä¸­ææ¬é£æ ¼ç±»ã
 *            éè¿è¯¥ç±»å¯ä»¥è®¾ç½®æ ç­¾ä¸­çææ¬å­ä½å¤§å°åæ¾ç¤ºé£æ ¼ã
 * @param {Object} options - åæ°ã
 * @param {number} [options.maxTextHeight=0] - æ ç­¾ä¸­ææ¬çæå¤§é«åº¦ã
 * @param {number} [options.maxTextWidth=0] - æ ç­¾ä¸­ææ¬çæå¤§å®½åº¦ã
 * @param {number} [options.minTextHeight=0] - æ ç­¾ä¸­ææ¬çæå°é«åº¦ã
 * @param {number} [options.minTextWidth=0] - æ ç­¾ä¸­ææ¬çæå°å®½åº¦ã
 * @param {SuperMap.ServerTextStyle} [options.uniformStyle] - ç»ä¸ææ¬é£æ ¼ã
 * @param {SuperMap.LabelMixedTextStyle} [options.uniformMixedStyle] - æ ç­¾ä¸é¢å¾ç»ä¸çææ¬å¤åé£æ ¼ã
 */

var ThemeLabelText = /*#__PURE__*/function () {
  function ThemeLabelText(options) {
    ThemeLabelText_classCallCheck(this, ThemeLabelText);

    /**
     * @member {number} [SuperMap.ThemeLabelText.prototype.maxTextHeight=0]
     * @description æ ç­¾ä¸­ææ¬çæå¤§é«åº¦ãå½æ ç­¾ææ¬ä¸åºå®å¤§å°æ¶ï¼å³ SuperMap.ServerTextStyle.sizeFixed = false ææï¼
     *              å½æ¾å¤§åçææ¬é«åº¦è¶è¿æå¤§é«åº¦ä¹åå°±ä¸åæ¾å¤§ãé«åº¦åä½ä¸º 0.1 æ¯«ç±³ã
     */
    this.maxTextHeight = 0;
    /**
     * @member {number} [SuperMap.ThemeLabelText.prototype.maxTextWidth=0]
     * @description æ ç­¾ä¸­ææ¬çæå¤§å®½åº¦ãå½æ ç­¾ææ¬ä¸åºå®å¤§å°æ¶ï¼å³ SuperMap.ServerTextStyle.sizeFixed = false ææï¼
     *              å½æ¾å¤§åçææ¬å®½åº¦è¶è¿æå¤§é«åº¦ä¹åå°±ä¸åæ¾å¤§ãå®½åº¦åä½ä¸º 0.1 æ¯«ç±³ã
     */

    this.maxTextWidth = 0;
    /**
     * @member {number} [SuperMap.ThemeLabelText.prototype.minTextHeight=0]
     * @description æ ç­¾ä¸­ææ¬çæå°é«åº¦ãå½æ ç­¾ææ¬ä¸åºå®å¤§å°æ¶ï¼å³ SuperMap.ServerTextStyle.sizeFixed = false ææï¼
     *              å½ç¼©å°åçææ¬é«åº¦å°äºæå°é«åº¦ä¹åå°±ä¸åç¼©å°ãé«åº¦åä½ä¸º 0.1 æ¯«ç±³ã
     */

    this.minTextHeight = 0;
    /**
     * @member {number} [SuperMap.ThemeLabelText.prototype.minTextWidth=0]
     * @description æ ç­¾ä¸­ææ¬çæå°å®½åº¦ãå½æ ç­¾ææ¬ä¸åºå®å¤§å°æ¶ï¼å³ SuperMap.ServerTextStyle.sizeFixed = false ææï¼
     *              å½ç¼©å°åçææ¬å®½åº¦å°äºæå°å®½åº¦ä¹åå°±ä¸åç¼©å°ãå®½åº¦åä½ä¸º 0.1 æ¯«ç±³ã
     */

    this.minTextWidth = 0;
    /**
     * @member {SuperMap.ServerTextStyle} [SuperMap.ThemeLabelText.prototype.uniformStyle]
     * @description ç»ä¸ææ¬é£æ ¼ãå½æ ç­¾ä¸é¢å¾å­é¡¹çä¸ªæ°å¤§äºç­äº1æ¶ï¼
     *              uniformStyle ä¸èµ·ä½ç¨ï¼åæ ç­¾çé£æ ¼ä½¿ç¨å­é¡¹ä¸­è®¾ç½®çé£æ ¼ãåç§é£æ ¼çä¼åçº§ä»é«å°ä½ä¸ºï¼uniformMixedStyleï¼æ ç­¾ææ¬çå¤åé£æ ¼ï¼ï¼
     *              SuperMap.ThemeLabelItem.styleï¼åæ®µå­é¡¹çææ¬é£æ ¼ï¼ï¼uniformStyleï¼ç»ä¸ææ¬é£æ ¼ï¼ã
     */

    this.uniformStyle = new ServerTextStyle();
    /**
     *@member {SuperMap.LabelMixedTextStyle} [SuperMap.ThemeLabelText.prototype.uniformMixedStyle]
     *@description  æ ç­¾ä¸é¢å¾ç»ä¸çææ¬å¤åé£æ ¼ãéè¿è¯¥ç±»å¯ä»¥ä½¿åä¸ä¸ªæ 
     *              ç­¾ä¸­çæå­ä½¿ç¨å¤ç§é£æ ¼æ¾ç¤ºãåç§é£æ ¼çä¼åçº§ä»é«å°ä½ä¸ºï¼uniformMixedStyleï¼æ ç­¾ææ¬çå¤åé£æ ¼ï¼ï¼
     *              SuperMap.ThemeLabelItem.styleï¼åæ®µå­é¡¹çææ¬é£æ ¼ï¼ï¼uniformStyleï¼ç»ä¸ææ¬é£æ ¼ï¼ã
     */

    this.uniformMixedStyle = null;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ThemeLabelText";
  }
  /**
   * @function SuperMap.ThemeLabelText.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThemeLabelText_createClass(ThemeLabelText, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.maxTextHeight = null;
      me.maxTextWidth = null;
      me.minTextHeight = null;
      me.minTextWidth = null;

      if (me.uniformStyle) {
        me.uniformStyle.destroy();
        me.uniformStyle = null;
      }

      if (me.uniformMixedStyle) {
        me.uniformMixedStyle.destroy();
        me.uniformMixedStyle = null;
      }
    }
    /**
     * @function SuperMap.ThemeLabelText.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·åæ ç­¾ä¸­ææ¬é£æ ¼ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeLabelText} ThemeLabelText å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      if (!obj) {
        return;
      }

      var res = new ThemeLabelText();
      Util.copy(res, obj);
      res.uniformStyle = ServerTextStyle.fromObj(obj.uniformStyle);
      res.uniformMixedStyle = LabelMixedTextStyle.fromObj(obj.uniformMixedStyle);
      return res;
    }
  }]);

  return ThemeLabelText;
}();
SuperMap.ThemeLabelText = ThemeLabelText;
// CONCATENATED MODULE: ./src/common/iServer/ThemeLabelAlongLine.js
function ThemeLabelAlongLine_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeLabelAlongLine_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeLabelAlongLine_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeLabelAlongLine_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeLabelAlongLine_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.ThemeLabelAlongLine
 * @category  iServer Map Theme
 * @classdesc æ ç­¾æ²¿çº¿æ æ³¨æ ·å¼ç±»ã
 * @param {Object} options - åæ°ã
 * @param {boolean} [options.isAlongLine=true] - æ¯å¦æ²¿çº¿æ¾ç¤ºææ¬ã
 * @param {SuperMap.AlongLineDirection} [options.alongLineDirection=SuperMap.AlongLineDirection.LB_TO_RT] - æ ç­¾æ²¿çº¿æ æ³¨æ¹åã
 * @param {boolean} [options.angleFixed=false] - å½æ²¿çº¿æ¾ç¤ºææ¬æ¶ï¼æ¯å¦å°ææ¬è§åº¦åºå®ã
 * @param {boolean} [options.repeatedLabelAvoided=false] - æ²¿çº¿å¾ªç¯æ æ³¨æ¶æ¯å¦é¿åæ ç­¾éå¤æ æ³¨ã
 * @param {boolean} [options.repeatIntervalFixed=false] - å¾ªç¯æ æ³¨é´éæ¯å¦åºå®ã
 * @param {number} [options.labelRepeatInterval=0] - æ²¿çº¿ä¸å¾ªç¯æ æ³¨æ¶å¾ªç¯æ æ³¨çé´éã
 */

var ThemeLabelAlongLine = /*#__PURE__*/function () {
  function ThemeLabelAlongLine(options) {
    ThemeLabelAlongLine_classCallCheck(this, ThemeLabelAlongLine);

    /**
     * @member {boolean} [SuperMap.ThemeLabelAlongLine.prototype.isAlongLine=true]
     * @description æ¯å¦æ²¿çº¿æ¾ç¤ºææ¬ãtrue è¡¨ç¤ºæ²¿çº¿æ¾ç¤ºææ¬ï¼false è¡¨ç¤ºæ­£å¸¸æ¾ç¤ºææ¬ã
     */
    this.isAlongLine = true;
    /**
     * @member {SuperMap.AlongLineDirection} [SuperMap.ThemeLabelAlongLine.prototype.alongLineDirection=SuperMap.AlongLineDirection.LB_TO_RT]
     * @description æ ç­¾æ²¿çº¿æ æ³¨æ¹åã
     */

    this.alongLineDirection = AlongLineDirection.LB_TO_RT;
    /**
     * @member {boolean} [SuperMap.ThemeLabelAlongLine.prototype.angleFixed=false]
     * @description å½æ²¿çº¿æ¾ç¤ºææ¬æ¶ï¼æ¯å¦å°ææ¬è§åº¦åºå®ãtrue è¡¨ç¤ºæåºå®ææ¬è§åº¦æ¾ç¤ºææ¬ï¼false è¡¨ç¤ºæç§æ²¿çº¿è§åº¦æ¾ç¤ºææ¬ã
     *              å¦æåºå®è§åº¦ï¼åæææ ç­¾åææè®¾ç½®çææ¬é£æ ¼ä¸­å­ä½çæè½¬è§åº¦æ¥æ¾ç¤ºï¼ä¸èèæ²¿çº¿æ æ³¨çæ¹åï¼
     *              å¦æä¸åºå®è§åº¦ï¼å¨æ¾ç¤ºæ ç­¾æ¶ä¼åæ¶èèå­ä½çæè½¬è§åº¦åæ²¿çº¿æ æ³¨çæ¹åã
     */

    this.angleFixed = false;
    /**
     * @member {boolean} SuperMap.ThemeLabelAlongLine.prototype.repeatedLabelAvoided
     * @description æ²¿çº¿å¾ªç¯æ æ³¨æ¶æ¯å¦é¿åæ ç­¾éå¤æ æ³¨ã
     */

    this.repeatedLabelAvoided = false;
    /**
     * @member {boolean} [SuperMap.ThemeLabelAlongLine.prototype.repeatIntervalFixed=false]
     * @description å¾ªç¯æ æ³¨é´éæ¯å¦åºå®ãtrue è¡¨ç¤ºä½¿ç¨åºå®å¾ªç¯æ æ³¨é´éï¼å³ä½¿ç¨é»è¾åæ æ¥æ¾ç¤ºå¾ªç¯æ æ³¨é´éï¼
     *              false è¡¨ç¤ºå¾ªç¯æ æ³¨é´ééå°å¾çç¼©æ¾èååï¼å³ä½¿ç¨å°çåæ æ¥æ¾ç¤ºå¾ªç¯æ æ³¨é´éã
     */

    this.repeatIntervalFixed = false;
    /**
     * @member {number} [SuperMap.ThemeLabelAlongLine.prototype.labelRepeatInterval=0]
     * @description æ²¿çº¿ä¸å¾ªç¯æ æ³¨æ¶å¾ªç¯æ æ³¨çé´éãé¿åº¦çåä½ä¸å°å¾çå°çåä½ä¸è´ãåªæè®¾å® RepeatedLabelAvoided ä¸º true
     *              çæ¶åï¼labelRepeatInterval å±æ§æææã
     */

    this.labelRepeatInterval = 0;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ThemeLabelAlongLine";
  }
  /**
   * @function SuperMap.ThemeLabelAlongLine.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThemeLabelAlongLine_createClass(ThemeLabelAlongLine, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.isAlongLine = null;
      me.alongLineDirection = null;
      me.angleFixed = null;
      me.repeatedLabelAvoided = null;
      me.repeatIntervalFixed = null;
      me.labelRepeatInterval = null;
    }
    /**
     * @function SuperMap.ThemeLabelAlongLine.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·åæ ç­¾æ²¿çº¿æ æ³¨æ ·å¼ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeLabelAlongLine} ThemeLabelAlongLine å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      if (!obj) {
        return;
      }

      var t = new ThemeLabelAlongLine();
      Util.copy(t, obj);
      return t;
    }
  }]);

  return ThemeLabelAlongLine;
}();
SuperMap.ThemeLabelAlongLine = ThemeLabelAlongLine;
// CONCATENATED MODULE: ./src/common/iServer/ThemeLabelBackground.js
function ThemeLabelBackground_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeLabelBackground_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeLabelBackground_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeLabelBackground_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeLabelBackground_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.ThemeLabelBackground
 * @category  iServer Map Theme
 * @classdesc æ ç­¾èæ¯é£æ ¼ç±»ãéè¿è¯¥ç±»å¯ä»¥è®¾ç½®æ ç­¾çèæ¯å½¢ç¶åé£æ ¼ã
 * @param {Object} options - åæ°ã
 * @param {SuperMap.LabelBackShape} [options.labelBackShape=SuperMap.LabelBackShape.NONE] - æ ç­¾ä¸é¢å¾ä¸­æ ç­¾èæ¯é£æ ¼ã
 * @param {SuperMap.ServerStyle} [options.backStyle=SuperMap.LabelBackShape.NONE] - æ ç­¾ä¸é¢å¾ä¸­æ ç­¾èæ¯çå½¢ç¶æä¸¾ç±»ã
 */

var ThemeLabelBackground = /*#__PURE__*/function () {
  function ThemeLabelBackground(options) {
    ThemeLabelBackground_classCallCheck(this, ThemeLabelBackground);

    /**
     * @member {SuperMap.LabelBackShape} [SuperMap.ThemeLabelBackground.prototype.labelBackShape=SuperMap.LabelBackShape.NONE]
     * @description æ ç­¾ä¸é¢å¾ä¸­æ ç­¾èæ¯é£æ ¼ãå½èæ¯å½¢ç¶
     *              labelBackShape å±æ§è®¾ä¸º NONEï¼å³æ èæ¯å½¢ç¶ï¼ æ¶ï¼backStyle å±æ§æ æã
     */
    this.labelBackShape = LabelBackShape.NONE;
    /**
     * @member {SuperMap.ServerStyle} [SuperMap.ThemeLabelBackground.prototype.backStyle=SuperMap.LabelBackShape.NON]
     * @description æ ç­¾ä¸é¢å¾ä¸­æ ç­¾èæ¯çå½¢ç¶æä¸¾ç±»ãèæ¯ç±»åå¯
     *              ä»¥æ¯ç©å½¢ãåè§ç©å½¢ãè±å½¢ãæ¤­åå½¢ãä¸è§å½¢åç¬¦å·ç­ï¼å³ä¸ä½¿ç¨ä»»ä½çå½¢ç¶ä½ä¸ºæ ç­¾çèæ¯ã
     */

    this.backStyle = new ServerStyle();

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ThemeLabelBackground";
  }
  /**
   * @function SuperMap.ThemeLabelBackground.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThemeLabelBackground_createClass(ThemeLabelBackground, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.labelBackShape = null;

      if (me.backStyle) {
        me.backStyle.destroy();
        me.backStyle = null;
      }
    }
    /**
     * @function SuperMap.ThemeLabelBackground.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·åæ ç­¾èæ¯é£æ ¼ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeLabelBackground} ThemeLabelBackground å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      if (!obj) {
        return;
      }

      var t = new ThemeLabelBackground();
      t.labelBackShape = obj.labelBackShape;
      t.backStyle = ServerStyle.fromJson(obj.backStyle);
      return t;
    }
  }]);

  return ThemeLabelBackground;
}();
SuperMap.ThemeLabelBackground = ThemeLabelBackground;
// CONCATENATED MODULE: ./src/common/iServer/ThemeLabel.js
function ThemeLabel_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { ThemeLabel_typeof = function _typeof(obj) { return typeof obj; }; } else { ThemeLabel_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return ThemeLabel_typeof(obj); }

function ThemeLabel_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeLabel_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeLabel_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeLabel_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeLabel_defineProperties(Constructor, staticProps); return Constructor; }

function ThemeLabel_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { ThemeLabel_get = Reflect.get; } else { ThemeLabel_get = function _get(target, property, receiver) { var base = ThemeLabel_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return ThemeLabel_get(target, property, receiver || target); }

function ThemeLabel_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = ThemeLabel_getPrototypeOf(object); if (object === null) break; } return object; }

function ThemeLabel_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) ThemeLabel_setPrototypeOf(subClass, superClass); }

function ThemeLabel_setPrototypeOf(o, p) { ThemeLabel_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return ThemeLabel_setPrototypeOf(o, p); }

function ThemeLabel_createSuper(Derived) { var hasNativeReflectConstruct = ThemeLabel_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = ThemeLabel_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = ThemeLabel_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return ThemeLabel_possibleConstructorReturn(this, result); }; }

function ThemeLabel_possibleConstructorReturn(self, call) { if (call && (ThemeLabel_typeof(call) === "object" || typeof call === "function")) { return call; } return ThemeLabel_assertThisInitialized(self); }

function ThemeLabel_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function ThemeLabel_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ThemeLabel_getPrototypeOf(o) { ThemeLabel_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return ThemeLabel_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/











/**
 * @class SuperMap.ThemeLabel
 * @category  iServer Map Theme
 * @classdesc æ ç­¾ä¸é¢å¾ç±»ã
 * @extends SuperMap.Theme
 * @param {Object} options - åæ°ã
 * @param {Array.<SuperMap.ThemeUniqueItem>} options.items - åæ®µæ ç­¾ä¸é¢å¾çå­é¡¹æ°ç»ã
 * @param {string} options.labelExpression - æ æ³¨å­æ®µè¡¨è¾¾å¼ã
 * @param {Array.<SuperMap.LabelMatrixCell>} options.matrixCells - ç©éµæ ç­¾åç´ æ°ç»ã
 * @param {SuperMap.ThemeLabelAlongLine} [options.alongLine] - æ ç­¾æ²¿çº¿æ æ³¨æ¹åæ ·å¼ç±»ã
 * @param {SuperMap.ThemeLabelBackground} [options.background] - æ ç­¾ä¸é¢å¾ä¸­æ ç­¾çèæ¯é£æ ¼ç±»ã
 * @param {SuperMap.ThemeFlow} [options.flow] - æ ç­¾ä¸é¢å¾æ ç­¾æµå¨æ¾ç¤ºä¸çµå¼çº¿è®¾ç½®ç±»ã
 * @param {SuperMap.LabelOverLengthMode} [options.labelOverLengthMode=SuperMap.LabelOverLengthMode.NONE] - æ ç­¾ä¸é¢å¾ä¸­è¶é¿æ ç­¾çå¤çæ¨¡å¼æä¸¾ç±»ã
 * @param {number} [options.maxLabelLength=256] - æ ç­¾å¨æ¯ä¸è¡æ¾ç¤ºçæå¤§é¿åº¦ã
 * @param {number} [options.numericPrecision=0] - éè¿è¯¥å­æ®µè®¾ç½®å¶æ¾ç¤ºçç²¾åº¦ã
 * @param {SuperMap.ThemeOffset} [options.offset] - ç¨äºè®¾ç½®æ ç­¾ä¸é¢å¾ä¸­æ è®°ææ¬ç¸å¯¹äºè¦ç´ åç¹çåç§»éå¯¹è±¡ã
 * @param {boolean} [options.overlapAvoided=true] - æ¯å¦åè®¸ä»¥ææ¬é¿è®©æ¹å¼æ¾ç¤ºææ¬ã
 * @param {string} [options.rangeExpression] - å¶ä½åæ®µæ ç­¾ä¸é¢çåæ®µå­æ®µæå­æ®µè¡¨è¾¾å¼ã
 * @param {boolean} [options.smallGeometryLabeled=false] - æ¯å¦æ¾ç¤ºé¿åº¦å¤§äºè¢«æ æ³¨å¯¹è±¡æ¬èº«é¿åº¦çæ ç­¾ã
 * @param {SuperMap.ThemeLabelText} options.text - æ ç­¾ä¸­ææ¬é£æ ¼ã
 * @param {number} [options.textSpace=0] - æ²¿çº¿æ æ³¨ï¼ç¸é»ä¸¤ä¸ªæå­ä¹é´çé´è·ï¼åä½å½åè®¾ç½®çå­é«ã
 * @param {SuperMap.ThemeMemoryData} [options.memoryData] - ä¸é¢å¾åå­æ°æ®ã
 */

var ThemeLabel = /*#__PURE__*/function (_Theme) {
  ThemeLabel_inherits(ThemeLabel, _Theme);

  var _super = ThemeLabel_createSuper(ThemeLabel);

  function ThemeLabel(options) {
    var _this;

    ThemeLabel_classCallCheck(this, ThemeLabel);

    _this = _super.call(this, "LABEL", options);
    /**
     * @member {SuperMap.ThemeLabelAlongLine} [SuperMap.ThemeLabel.prototype.alongLine]
     * @description æ ç­¾æ²¿çº¿æ æ³¨æ¹åæ ·å¼ç±»ã
     *              å¨è¯¥ç±»ä¸­å¯ä»¥è®¾ç½®æ ç­¾æ¯å¦æ²¿çº¿æ æ³¨ä»¥åæ²¿çº¿æ æ³¨çå¤ç§æ¹å¼ãæ²¿çº¿æ æ³¨å±æ§åªéç¨äºçº¿æ°æ®éä¸é¢å¾ã
     */

    _this.alongLine = new ThemeLabelAlongLine();
    /**
     * @member {SuperMap.ThemeLabelBackground} [SuperMap.ThemeLabel.prototype.background] 
     * @description æ ç­¾ä¸é¢å¾ä¸­æ ç­¾çèæ¯é£æ ¼ç±»ãéè¿è¯¥å­æ®µå¯ä»¥è®¾ç½®æ ç­¾çèæ¯å½¢ç¶åé£æ ¼ã
     */

    _this.background = new ThemeLabelBackground();
    /**
     * @member {SuperMap.ThemeFlow} [SuperMap.ThemeLabel.prototype.flow]
     * @description æ ç­¾ä¸é¢å¾æ ç­¾æµå¨æ¾ç¤ºä¸çµå¼çº¿è®¾ç½®ç±»ãéè¿è¯¥å­æ®µå¯ä»¥è®¾ç½®æ ç­¾æ¯å¦æµå¨æ¾ç¤ºåçµå¼çº¿é£æ ¼ã
     */

    _this.flow = new ThemeFlow();
    /**
     * @member {Array.<SuperMap.ThemeUniqueItem>} [SuperMap.ThemeLabel.prototype.items]
     * @description åæ®µæ ç­¾ä¸é¢å¾çå­é¡¹æ°ç»ãåæ®µæ ç­¾ä¸é¢å¾ä½¿ç¨ rangeExpression
     *              æå®æ°å­åçå­æ®µä½ä¸ºåæ®µæ°æ®ï¼items ä¸­çæ¯ä¸ªå­å¯¹è±¡ç [startï¼end) åæ®µå¼å¿é¡»æ¥æºäºå±æ§ rangeExpression çå­æ®µå¼ãæ¯ä¸ªå­é¡¹æ¥æèªå·±çé£æ ¼ã
     */

    _this.items = null;
    /**
     * @member {Array.<SuperMap.ThemeLabelUniqueItem>} SuperMap.ThemeLabel.prototype.uniqueItems
     * @description åå¼æ ç­¾ä¸é¢å¾å­é¡¹æ°ç»ãåå¼æ ç­¾ä¸é¢å¾ä½¿ç¨ uniqueExpressionåå¼æ ç­¾ä¸é¢å¾å­é¡¹éåã
     */

    _this.uniqueItems = null;
    /**
     * @member {string} SuperMap.ThemeLabel.prototype.labelExpression
     * @description æ æ³¨å­æ®µè¡¨è¾¾å¼ãç³»ç»å° labelExpression å¯¹åºçå­æ®µæå­æ®µè¡¨è¾¾å¼çå¼ä»¥æ ç­¾çå½¢å¼æ¾ç¤ºå¨å¾å±ä¸­ã
     */

    _this.labelExpression = null;
    /**
     * @member {SuperMap.LabelOverLengthMode} [SuperMap.ThemeLabel.prototype.labelOverLengthMode=SuperMap.LabelOverLengthMode.NONE] - æ ç­¾ä¸é¢å¾ä¸­è¶é¿æ ç­¾çå¤çæ¨¡å¼æä¸¾ç±»ã
     * @description å¯¹äºæ ç­¾çé¿åº¦è¶è¿è®¾ç½®çæ ç­¾æå¤§é¿åº¦ maxLabelLength æ¶ç§°ä¸ºè¶é¿æ ç­¾ã
     */

    _this.labelOverLengthMode = LabelOverLengthMode.NONE;
    /**
     * @member {Array.<SuperMap.LabelMatrixCell>} SuperMap.ThemeLabel.prototype.matrixCells
     * @description ç©éµæ ç­¾åç´ æ°ç»ï¼ç¨äºå¶ä½ç©éµæ ç­¾ä¸é¢å¾ã
     *              æ°ç»ä¸­å¯ä»¥æ¾ç½®ç¬¦å·ç±»åçç©éµæ ç­¾åç´ åå¾çç±»åçç©éµæ ç­¾åç´ ã
     */

    _this.matrixCells = null;
    /**
     * @member {number} [SuperMap.ThemeLabel.prototype.maxLabelLength=256]
     * @description æ ç­¾å¨æ¯ä¸è¡æ¾ç¤ºçæå¤§é¿åº¦ï¼ä¸ä¸ªä¸­æä¸ºä¸¤ä¸ªå­ç¬¦ã
     *              å¦æè¶è¿æå¤§é¿åº¦ï¼å¯ä»¥éç¨ä¸¤ç§æ¹å¼æ¥å¤çï¼ä¸ç§æ¯æ¢è¡çæ¨¡å¼è¿è¡æ¾ç¤ºï¼å¦ä¸ç§æ¯ä»¥çç¥å·æ¹å¼æ¾ç¤ºãåä½ä¸ºå­ç¬¦ã
     */

    _this.maxLabelLength = 256;
    /**
     * @member {number} [SuperMap.ThemeLabel.prototype.numericPrecision=0]
     * @description å¦ææ¾ç¤ºçæ ç­¾åå®¹ä¸ºæ°å­ï¼éè¿è¯¥å­æ®µè®¾ç½®å¶æ¾ç¤ºçç²¾åº¦ãä¾å¦æ ç­¾å¯¹åºçæ°å­æ¯8071.64529347ï¼
     *              å¦æè¯¥å±æ§ä¸º0æ¶ï¼æ¾ç¤º8071ï¼ä¸º1æ¶ï¼æ¾ç¤º8071.6ï¼ä¸º3æ¶ï¼åæ¯8071.645ã
     */

    _this.numericPrecision = 0;
    /**
     * @member {SuperMap.ThemeOffset} [SuperMap.ThemeLabel.prototype.offset]
     * @description ç¨äºè®¾ç½®æ ç­¾ä¸é¢å¾ä¸­æ è®°ææ¬ç¸å¯¹äºè¦ç´ åç¹çåç§»éå¯¹è±¡ã
     */

    _this.offset = new ThemeOffset();
    /**
     * @member {boolean} [SuperMap.ThemeLabel.prototype.overlapAvoided=true]
     * @description æ¯å¦åè®¸ä»¥ææ¬é¿è®©æ¹å¼æ¾ç¤ºææ¬ãtrue è¡¨ç¤ºèªå¨é¿åææ¬å çãåªéå¯¹è¯¥æ ç­¾ä¸é¢å¾å±ä¸­çææ¬æ°æ®ã
     *              å¨æ ç­¾éå åº¦å¾å¤§çæåµä¸ï¼å³ä½¿ä½¿ç¨èªå¨é¿è®©åè½ï¼å¯è½ä¹æ æ³å®å¨é¿åæ ç­¾éå ç°è±¡ã
     */

    _this.overlapAvoided = true;
    /**
     * @member {string} SuperMap.ThemeLabel.prototype.rangeExpression
     * @description å¶ä½åæ®µæ ç­¾ä¸é¢çåæ®µå­æ®µæå­æ®µè¡¨è¾¾å¼ãè¯¥è¡¨è¾¾å¼å¯¹åºçå­æ®µï¼æèå­æ®µè¡¨è¾¾å¼ï¼çå¼åºè¯¥ä¸ºæ°å¼åã
     *              è¯¥å­æ®µä¸ items åæ®µå­é¡¹èåä½¿ç¨ï¼æ¯ä¸ªå­é¡¹çèµ·å§å¼ [startï¼end)æ¥æºäº rangeExpression å­æ®µå¼ã
     *              æå labelExpression æå®çæ ç­¾å­æ®µï¼æ ç­¾ä¸é¢å¾è¦æ¾ç¤ºçå·ä½åå®¹ï¼ä¼æ ¹æ®åæ®µå­é¡¹çé£æ ¼è¿è¡åæ®µæ¾ç¤ºã
     */

    _this.rangeExpression = null;
    /**
     * @member {string} SuperMap.ThemeLabel.prototype.uniqueExpression
     * @description ç¨äºå¶ä½åå¼ä¸é¢å¾çå­æ®µæå­æ®µè¡¨è¾¾å¼ã
     *              è¯¥å­æ®µå¼çæ°æ®ç±»åå¯ä»¥ä¸ºæ°å¼åæå­ç¬¦åãå¦æè®¾ç½®å­æ®µè¡¨è¾¾å¼ï¼åªè½æ¯ç¸åæ°æ®ç±»åå­æ®µé´çè¿ç®ãå¿é¡»ä¸labelExpressionä¸èµ·ä½¿ç¨ã
     */

    _this.uniqueExpression = null;
    /**
     * @member {boolean} [SuperMap.ThemeLabel.prototype.smallGeometryLabeled=false]
     * @description æ¯å¦æ¾ç¤ºé¿åº¦å¤§äºè¢«æ æ³¨å¯¹è±¡æ¬èº«é¿åº¦çæ ç­¾ãå¨æ ç­¾çé¿åº¦å¤§äºçº¿æèé¢å¯¹è±¡æ¬èº«çé¿åº¦æ¶ï¼
     *              å¦æè¯¥å¼ä¸º trueï¼åæ ç­¾æå­ä¼å å å¨ä¸èµ·æ¾ç¤ºï¼ä¸ºäºæ¸æ¥å®æ´çæ¾ç¤ºè¯¥æ ç­¾ï¼
     *              å¯ä»¥éç¨æ¢è¡æ¨¡å¼æ¥æ¾ç¤ºæ ç­¾ï¼ä½å¿é¡»ä¿è¯æ¯è¡çé¿åº¦å°äºå¯¹è±¡æ¬èº«çé¿åº¦ã
     */

    _this.smallGeometryLabeled = false;
    /**
     * @member {SuperMap.ThemeLabelText} SuperMap.ThemeLabel.prototype.text
     * @description æ ç­¾ä¸­ææ¬é£æ ¼ã
     */

    _this.text = new ThemeLabelText();
    /**
     * @member {number} [SuperMap.ThemeLabel.prototype.textSpace=0]
     * @description æ²¿çº¿æ æ³¨ï¼ç¸é»ä¸¤ä¸ªæå­ä¹é´çé´è·ï¼åä½å½åè®¾ç½®çå­é«ã
     */

    _this.textSpace = 0;

    if (options) {
      Util.extend(ThemeLabel_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.ThemeLabel";
    return _this;
  }
  /**
   * @function SuperMap.ThemeLabel.prototype.destroy
   * @override
   */


  ThemeLabel_createClass(ThemeLabel, [{
    key: "destroy",
    value: function destroy() {
      ThemeLabel_get(ThemeLabel_getPrototypeOf(ThemeLabel.prototype), "destroy", this).call(this);

      var me = this;
      me.alongLine = null;

      if (me.background) {
        me.background.destroy();
        me.background = null;
      }

      me.flow = null;

      if (me.items) {
        for (var i = 0, items = me.items, len = items.length; i < len; i++) {
          items[i].destroy();
        }

        me.items = null;
      }

      if (me.uniqueItems) {
        for (var j = 0, uniqueItems = me.uniqueItems, uniqueLen = uniqueItems.length; j < uniqueLen; j++) {
          uniqueItems[j].destory();
        }

        me.uniqueItems = null;
      }

      me.labelExpression = null;
      me.labelOverLengthMode = null;
      me.matrixCells = null;
      me.maxLabelLength = null;
      me.numericPrecision = null;
      me.overlapAvoided = null;
      me.rangeExpression = null;
      me.uniqueExpression = null;

      if (me.offset) {
        me.offset.destroy();
        me.offset = null;
      }

      me.overlapAvoided = null;
      me.smallGeometryLabeled = null;

      if (me.text) {
        me.text.destroy();
        me.text = null;
      }

      me.textSpace = null;
    }
    /**
     * @function SuperMap.ThemeLabel.prototype.toJSON
     * @description å°themeLabelå¯¹è±¡è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @returns {string} è¿åè½¬æ¢åç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "toJSON",
    value: function toJSON() {
      return Util.toJSON(this.toServerJSONObject());
    }
    /**
     * @function SuperMap.ThemeLabel.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     * @returns {Object} å¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      var obj = {};
      obj.type = this.type;
      obj.memoryData = this.memoryData;

      if (this.alongLine) {
        obj.alongLine = this.alongLine.isAlongLine;
        obj.alongLineDirection = this.alongLine.alongLineDirection;
        obj.angleFixed = this.alongLine.angleFixed;
        obj.isLabelRepeated = this.alongLine.isLabelRepeated;
        obj.labelRepeatInterval = this.alongLine.labelRepeatInterval;
        obj.repeatedLabelAvoided = this.alongLine.repeatedLabelAvoided;
        obj.repeatIntervalFixed = this.alongLine.repeatIntervalFixed;
      }

      if (this.offset) {
        obj.offsetFixed = this.offset.offsetFixed;
        obj.offsetX = this.offset.offsetX;
        obj.offsetY = this.offset.offsetY;
      }

      if (this.flow) {
        obj.flowEnabled = this.flow.flowEnabled;
        obj.leaderLineDisplayed = this.flow.leaderLineDisplayed;
        obj.leaderLineStyle = this.flow.leaderLineStyle;
      }

      if (this.text) {
        obj.maxTextHeight = this.text.maxTextHeight;
        obj.maxTextWidth = this.text.maxTextWidth;
        obj.minTextHeight = this.text.minTextHeight;
        obj.minTextWidth = this.text.minTextWidth;
        obj.uniformStyle = this.text.uniformStyle;
        obj.uniformMixedStyle = this.text.uniformMixedStyle;
      }

      if (this.background) {
        obj.labelBackShape = this.background.labelBackShape;
        obj.backStyle = this.background.backStyle;
      }

      obj.labelOverLengthMode = this.labelOverLengthMode;
      obj.maxLabelLength = this.maxLabelLength;
      obj.smallGeometryLabeled = this.smallGeometryLabeled;
      obj.rangeExpression = this.rangeExpression;
      obj.uniqueExpression = this.uniqueExpression;
      obj.numericPrecision = this.numericPrecision;
      obj.items = this.items;
      obj.uniqueItems = this.uniqueItems;
      obj.labelExpression = this.labelExpression;
      obj.overlapAvoided = this.overlapAvoided;
      obj.matrixCells = this.matrixCells;
      obj.textSpace = this.textSpace;
      return obj;
    }
    /**
     * @function SuperMap.ThemeLabel.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·åæ ç­¾ä¸é¢å¾ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeLabel} ThemeLabel å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      if (!obj) {
        return;
      }

      var lab = new ThemeLabel();
      var itemsL = obj.items,
          itemsU = obj.uniqueItems,
          cells = obj.matrixCells;
      obj.matrixCells = null;
      Util.copy(lab, obj);
      lab.alongLine = ThemeLabelAlongLine.fromObj(obj);
      lab.background = ThemeLabelBackground.fromObj(obj);
      lab.flow = new ThemeFlow({
        flowEnabled: obj.flowEnabled,
        leaderLineDisplayed: obj.leaderLineDisplayed,
        leaderLineStyle: obj.leaderLineStyle
      });

      if (itemsL) {
        lab.items = [];

        for (var i = 0, len = itemsL.length; i < len; i++) {
          lab.items.push(ThemeLabelItem.fromObj(itemsL[i]));
        }
      }

      if (itemsU) {
        lab.uniqueItems = [];

        for (var j = 0, uniqueLen = itemsU.length; j < uniqueLen; j++) {
          lab.uniqueItems.push(ThemeUniqueItem.fromObj(itemsU[j]));
        }
      }

      if (cells) {
        lab.matrixCells = [];

        for (var _i = 0, _len = cells.length; _i < _len; _i++) {//TODO
          //lab.matrixCells.push(SuperMap.LabelMatrixCell.fromObj(cells[i]));
        }
      }

      lab.offset = ThemeOffset.fromObj(obj);
      lab.text = ThemeLabelText.fromObj(obj);
      return lab;
    }
  }]);

  return ThemeLabel;
}(Theme);
SuperMap.ThemeLabel = ThemeLabel;
// CONCATENATED MODULE: ./src/common/iServer/ThemeUnique.js
function ThemeUnique_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { ThemeUnique_typeof = function _typeof(obj) { return typeof obj; }; } else { ThemeUnique_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return ThemeUnique_typeof(obj); }

function ThemeUnique_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeUnique_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeUnique_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeUnique_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeUnique_defineProperties(Constructor, staticProps); return Constructor; }

function ThemeUnique_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { ThemeUnique_get = Reflect.get; } else { ThemeUnique_get = function _get(target, property, receiver) { var base = ThemeUnique_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return ThemeUnique_get(target, property, receiver || target); }

function ThemeUnique_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = ThemeUnique_getPrototypeOf(object); if (object === null) break; } return object; }

function ThemeUnique_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) ThemeUnique_setPrototypeOf(subClass, superClass); }

function ThemeUnique_setPrototypeOf(o, p) { ThemeUnique_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return ThemeUnique_setPrototypeOf(o, p); }

function ThemeUnique_createSuper(Derived) { var hasNativeReflectConstruct = ThemeUnique_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = ThemeUnique_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = ThemeUnique_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return ThemeUnique_possibleConstructorReturn(this, result); }; }

function ThemeUnique_possibleConstructorReturn(self, call) { if (call && (ThemeUnique_typeof(call) === "object" || typeof call === "function")) { return call; } return ThemeUnique_assertThisInitialized(self); }

function ThemeUnique_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function ThemeUnique_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ThemeUnique_getPrototypeOf(o) { ThemeUnique_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return ThemeUnique_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/






/**
 * @class SuperMap.ThemeUnique
 * @category  iServer Map Theme
 * @classdesc åå¼ä¸é¢å¾ã
 * @description åå¼ä¸é¢å¾æ¯å©ç¨ä¸åçé¢è²æç¬¦å·ï¼çº¿åãå¡«åï¼è¡¨ç¤ºå¾å±ä¸­æä¸å±æ§ä¿¡æ¯çä¸åå±æ§å¼ï¼å±æ§å¼ç¸åçè¦ç´ å·æç¸åçæ¸²æé£æ ¼ãåå¼ä¸é¢å¾å¤ç¨äºå·æåç±»å±æ§çå°å¾ä¸ï¼
 *              æ¯å¦åå£¤ç±»ååå¸å¾ãåå°å©ç¨å¾ãè¡æ¿åºåå¾ç­ãåå¼ä¸é¢å¾çéè¡¨ç¤ºç°è±¡è´¨çå·®å«ï¼ä¸è¬ä¸è¡¨ç¤ºæ°éçç¹å¾ãå°¤å¶æ¯æäº¤åæéå ç°è±¡æ¶ï¼æ­¤ç±»ä¸æ¨èä½¿ç¨ï¼ä¾å¦ï¼æ°æåå¸åºç­ã
 * @extends {SuperMap.Theme}
 * @param {Object} options - åæ°ã
 * @param {Array.<SuperMap.ThemeUniqueItem>} options.items - åå¼ä¸é¢å¾å­é¡¹ç±»æ°ç»ã
 * @param {string} options.uniqueExpression - ç¨äºå¶ä½åå¼ä¸é¢å¾çå­æ®µæå­æ®µè¡¨è¾¾å¼ã
 * @param {SuperMap.ServerStyle} [options.defaultStyle] - æªåä¸åå¼ä¸é¢å¾å¶ä½çå¯¹è±¡çæ¾ç¤ºé£æ ¼ã
 * @param {SuperMap.ColorGradientType} [options.colorGradientType=SuperMap.ColorGradientType.YELLOW_RED] - æ¸åé¢è²æä¸¾ç±»ã
 * @param {SuperMap.ThemeMemoryData} [options.memoryData] - ä¸é¢å¾åå­æ°æ®ã
 */

var ThemeUnique = /*#__PURE__*/function (_Theme) {
  ThemeUnique_inherits(ThemeUnique, _Theme);

  var _super = ThemeUnique_createSuper(ThemeUnique);

  function ThemeUnique(options) {
    var _this;

    ThemeUnique_classCallCheck(this, ThemeUnique);

    _this = _super.call(this, "UNIQUE", options);
    /**
     * @member {SuperMap.ServerStyle} SuperMap.ThemeUnique.prototype.defaultStyle
     * @description æªåä¸åå¼ä¸é¢å¾å¶ä½çå¯¹è±¡çæ¾ç¤ºé£æ ¼ã
     *              éè¿åå¼ä¸é¢å¾å­é¡¹æ°ç» ï¼itemsï¼å¯ä»¥æå®æäºè¦ç´ åä¸åå¼ä¸é¢å¾å¶ä½ï¼å¯¹äºé£äºæ²¡æè¢«åå«çè¦ç´ ï¼å³ä¸åå åå¼ä¸é¢è¡¨è¾¾çè¦ç´ ï¼ä½¿ç¨è¯¥é£æ ¼æ¾ç¤ºã
     */

    _this.defaultStyle = new ServerStyle();
    /**
     * @member {Array.<SuperMap.ThemeUniqueItem>} SuperMap.ThemeUnique.prototype.items
     * @description åå¼ä¸é¢å¾å­é¡¹ç±»æ°ç»ã
     *              åå¼ä¸é¢å¾æ¯å°ä¸é¢å¼ç¸åçè¦ç´ å½ä¸ºä¸ç±»ï¼ä¸ºæ¯ä¸ç±»è®¾å®ä¸ç§æ¸²æé£æ ¼ï¼å¶ä¸­æ¯ä¸ç±»å°±æ¯ä¸ä¸ªä¸é¢å¾å­é¡¹ãæ¯å¦ï¼å©ç¨åå¼ä¸é¢å¾å¶ä½è¡æ¿åºåå¾ï¼
     *              Name å­æ®µä»£è¡¨ç/ç´è¾å¸åï¼è¯¥å­æ®µç¨æ¥åä¸é¢åéï¼å¦æè¯¥å­æ®µçå­æ®µå¼æ»å±æ5ç§ä¸åå¼ï¼åè¯¥è¡æ¿åºåå¾æ 5 ä¸ªä¸é¢å¾å­é¡¹ã
     */

    _this.items = null;
    /**
     * @member {string} SuperMap.ThemeUnique.prototype.uniqueExpression
     * @description ç¨äºå¶ä½åå¼ä¸é¢å¾çå­æ®µæå­æ®µè¡¨è¾¾å¼ã
     *              è¯¥å­æ®µå¼çæ°æ®ç±»åå¯ä»¥ä¸ºæ°å¼åæå­ç¬¦åãå¦æè®¾ç½®å­æ®µè¡¨è¾¾å¼ï¼åªè½æ¯ç¸åæ°æ®ç±»åå­æ®µé´çè¿ç®ã
     */

    _this.uniqueExpression = null;
    /**
     * @member {SuperMap.ColorGradientType} [SuperMap.ThemeUnique.prototype.colorGradientType=SuperMap.ColorGradientType.YELLOW_RED]
     * @description æ¸åé¢è²æä¸¾ç±»ã
     *              æ¸åè²æ¯ç±èµ·å§è²æ ¹æ®ä¸å®ç®æ³éæ¸è¿æ¸¡å°ç»æ­¢è²çä¸ç§æ··ååé¢è²ã
     *              è¯¥ç±»ä½ä¸ºåå¼ä¸é¢å¾åæ°ç±»ãåæ®µä¸é¢å¾åæ°ç±»çå±æ§ï¼è´è´£è®¾ç½®åå¼ä¸é¢å¾ãåæ®µä¸é¢å¾çéè²æ¹æ¡ï¼å¨é»è®¤æåµä¸ä¸é¢å¾ææå­é¡¹ä¼æ ¹æ®è¿ä¸ªéè²æ¹æ¡å®æå¡«åã
     *              ä½å¦æä¸ºæå ä¸ªå­é¡¹çé£æ ¼è¿è¡åç¬è®¾ç½®åï¼è®¾ç½®äº ThemeUniqueItem æ ThemeRangeItem ç±»ä¸­Styleå±æ§ï¼ï¼
     *              è¯¥éè²æ¹æ¡å¯¹äºè¿å ä¸ªå­é¡¹å°ä¸èµ·ä½ç¨ã
     */

    _this.colorGradientType = ColorGradientType.YELLOW_RED;

    if (options) {
      Util.extend(ThemeUnique_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.ThemeUnique";
    return _this;
  }
  /**
   * @function SuperMap.ThemeUnique.prototype.destroy
   * @override
   */


  ThemeUnique_createClass(ThemeUnique, [{
    key: "destroy",
    value: function destroy() {
      ThemeUnique_get(ThemeUnique_getPrototypeOf(ThemeUnique.prototype), "destroy", this).call(this);

      var me = this;
      me.uniqueExpression = null;
      me.colorGradientType = null;

      if (me.items) {
        if (me.items.length > 0) {
          for (var item in me.items) {
            me.items[item].destroy();
            me.items[item] = null;
          }
        }

        me.items = null;
      }

      if (me.defaultStyle) {
        me.defaultStyle.destroy();
        me.defaultStyle = null;
      }
    }
    /**
     * @function SuperMap.ThemeUnique.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     * @returns {Object} å¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      var obj = {};
      obj = Util.copyAttributes(obj, this);

      if (obj.defaultStyle) {
        if (obj.defaultStyle.toServerJSONObject) {
          obj.defaultStyle = obj.defaultStyle.toServerJSONObject();
        }
      }

      if (obj.items) {
        var items = [],
            len = obj.items.length;

        for (var i = 0; i < len; i++) {
          items.push(obj.items[i].toServerJSONObject());
        }

        obj.items = items;
      }

      return obj;
    }
    /**
     * @function SuperMap.ThemeUnique.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·ååå¼ä¸é¢å¾ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeUnique} ThemeUnique å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      var res = new ThemeUnique();
      var uItems = obj.items;
      var len = uItems ? uItems.length : 0;
      Util.extend(res, obj);
      res.items = [];
      res.defaultStyle = ServerStyle.fromJson(obj.defaultStyle);

      for (var i = 0; i < len; i++) {
        res.items.push(ThemeUniqueItem.fromObj(uItems[i]));
      }

      return res;
    }
  }]);

  return ThemeUnique;
}(Theme);
SuperMap.ThemeUnique = ThemeUnique;
// CONCATENATED MODULE: ./src/common/iServer/ThemeGraphAxes.js
function ThemeGraphAxes_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeGraphAxes_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeGraphAxes_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeGraphAxes_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeGraphAxes_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.ThemeGraphAxes
 * @category  iServer Map Theme
 * @classdesc ç»è®¡ä¸é¢å¾åæ è½´æ ·å¼ç±»ã
 * @param {Object} options - åæ°ã
 * @param {SuperMap.ServerColor} [options.axesColor=(0, 0, 0)] - åæ è½´é¢è²ã
 * @param {boolean} [options.axesDisplayed=false] - æ¯å¦æ¾ç¤ºåæ è½´ã
 * @param {boolean} [options.axesGridDisplayed=false] - æ¯å¦å¨ç»è®¡å¾åæ è½´ä¸æ¾ç¤ºç½æ ¼ã
 * @param {boolean} [options.axesTextDisplayed=false] - æ¯å¦æ¾ç¤ºåæ è½´çææ¬æ æ³¨ã
 * @param {SuperMap.ServerTextStyle} [options.axesTextStyle] - ç»è®¡ç¬¦å·çæå¤§æå°å°ºå¯¸ã
 */

var ThemeGraphAxes = /*#__PURE__*/function () {
  function ThemeGraphAxes(options) {
    ThemeGraphAxes_classCallCheck(this, ThemeGraphAxes);

    /**
     * @member {SuperMap.ServerColor} [SuperMap.ThemeGraphAxes.prototype.axesColor=(0, 0, 0)]
     * @description åæ è½´é¢è²ãå½ axesDisplayed = true æ¶ææã
     */
    this.axesColor = new ServerColor(0, 0, 0);
    /**
     * @member {boolean} [SuperMap.ThemeGraphAxes.prototype.axesDisplayed=false]
     * @description æ¯å¦æ¾ç¤ºåæ è½´ã<br>
     *              ç±äºé¥¼ç¶å¾åç¯ç¶å¾æ åæ è½´ï¼æè¯¥å±æ§ä»¥åææä¸åæ è½´è®¾ç½®ç¸å³çå±æ§é½ä¸éç¨äºå®ä»¬ãå¹¶ä¸åªæå½è¯¥å¼ä¸º true æ¶ï¼å¶å®è®¾ç½®åæ è½´çå±æ§æèµ·ä½ç¨ã
     */

    this.axesDisplayed = false;
    /**
     * @member {boolean} [SuperMap.ThemeGraphAxes.prototype.axesGridDisplayed=false]
     * @description æ¯å¦å¨ç»è®¡å¾åæ è½´ä¸æ¾ç¤ºç½æ ¼ã
     */

    this.axesGridDisplayed = false;
    /**
     * @member {boolean} [SuperMap.ThemeGraphAxes.prototype.axesTextDisplayed=false]
     * @description æ¯å¦æ¾ç¤ºåæ è½´çææ¬æ æ³¨ã
     */

    this.axesTextDisplayed = false;
    /**
     * @member {SuperMap.ServerTextStyle} SuperMap.ThemeGraphAxes.prototype.axesTextStyle
     * @description åæ è½´ææ¬é£æ ¼ãå½ axesTextDisplayed = true æ¶ææã
     */

    this.axesTextStyle = new ServerTextStyle();

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ThemeGraphAxes";
  }
  /**
   * @function SuperMap.ThemeGraphAxes.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThemeGraphAxes_createClass(ThemeGraphAxes, [{
    key: "destroy",
    value: function destroy() {
      var me = this;

      if (me.axesColor) {
        me.axesColor.destroy();
        me.axesColor = null;
      }

      me.axesDisplayed = null;
      me.axesGridDisplayed = null;
      me.axesTextDisplayed = null;

      if (me.axesTextStyle) {
        me.axesTextStyle.destroy();
        me.axesTextStyle = null;
      }
    }
    /**
     * @function SuperMap.ThemeGraphAxes.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·åç»è®¡ä¸é¢å¾åæ è½´æ ·å¼ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeGraphAxes} ThemeGraphAxes å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      if (!obj) {
        return;
      }

      var res = new ThemeGraphAxes();
      Util.copy(res, obj);
      res.axesColor = ServerColor.fromJson(obj.axesColor);
      res.axesTextStyle = ServerTextStyle.fromObj(obj.axesTextStyle);
      return res;
    }
  }]);

  return ThemeGraphAxes;
}();
SuperMap.ThemeGraphAxes = ThemeGraphAxes;
// CONCATENATED MODULE: ./src/common/iServer/ThemeGraphSize.js
function ThemeGraphSize_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeGraphSize_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeGraphSize_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeGraphSize_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeGraphSize_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.ThemeGraphSize
 * @category  iServer Map Theme
 * @classdesc ç»è®¡ä¸é¢å¾ç¬¦å·å°ºå¯¸ç±»ã
 * @param {Object} options - åæ°ã
 * @param {number} [options.maxGraphSize=0] - ç»è®¡å¾ä¸­æ¾ç¤ºçæå¤§å¾è¡¨å°ºå¯¸åºåå¼ã
 * @param {number} [options.minGraphSize=0] - ç»è®¡å¾ä¸­æ¾ç¤ºçæå°å¾è¡¨å°ºå¯¸åºåå¼ã
 */

var ThemeGraphSize = /*#__PURE__*/function () {
  function ThemeGraphSize(options) {
    ThemeGraphSize_classCallCheck(this, ThemeGraphSize);

    /**
     * @member {number} [SuperMap.ThemeGraphSize.prototype.maxGraphSize=0]
     * @description è·åæè®¾ç½®ç»è®¡å¾ä¸­æ¾ç¤ºçæå¤§å¾è¡¨å°ºå¯¸åºåå¼ï¼åä½ä¸ºåç´ ã
     */
    this.maxGraphSize = 0;
    /**
     * @member {number} [SuperMap.ThemeGraphSize.prototype.minGraphSize=0]
     * @description è·åæè®¾ç½®ç»è®¡å¾ä¸­æ¾ç¤ºçæå°å¾è¡¨å°ºå¯¸åºåå¼ï¼åä½ä¸ºåç´ ã
     */

    this.minGraphSize = 0;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ThemeGraphSize";
  }
  /**
   * @function SuperMap.ThemeGraphSize.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThemeGraphSize_createClass(ThemeGraphSize, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.maxGraphSize = null;
      me.minGraphSize = null;
    }
    /**
     * @function SuperMap.ThemeGraphSize.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·ç»è®¡ä¸é¢å¾ç¬¦å·å°ºå¯¸ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeGraphSize}  ThemeGraphSize å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      var res = new ThemeGraphSize();
      Util.copy(res, obj);
      return res;
    }
  }]);

  return ThemeGraphSize;
}();
SuperMap.ThemeGraphSize = ThemeGraphSize;
// CONCATENATED MODULE: ./src/common/iServer/ThemeGraphText.js
function ThemeGraphText_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeGraphText_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeGraphText_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeGraphText_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeGraphText_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.ThemeGraphText
 * @category  iServer Map Theme
 * @classdesc ç»è®¡å¾æå­æ æ³¨é£æ ¼ç±»ã
 * @param {Object} options - å¯éåæ°ã
 * @param {boolean} [options.graphTextDisplayed=false] - æ¯å¦æ¾ç¤ºç»è®¡å¾ä¸çæå­æ æ³¨ã
 * @param {SuperMap.ThemeGraphTextFormat} [options.graphTextFormat=SuperMap.ThemeGraphTextFormat.CAPTION] - ç»è®¡ä¸é¢å¾ææ¬æ¾ç¤ºæ ¼å¼ã
 * @param {SuperMap.ServerTextStyle} [options.graphTextStyle] - ç»è®¡å¾ä¸çæå­æ æ³¨é£æ ¼ã
 */

var ThemeGraphText = /*#__PURE__*/function () {
  function ThemeGraphText(options) {
    ThemeGraphText_classCallCheck(this, ThemeGraphText);

    /**
     * @member {boolean} [SuperMap.ThemeGraphText.prototype.graphTextDisplayed=false]
     * @description æ¯å¦æ¾ç¤ºç»è®¡å¾ä¸çæå­æ æ³¨ã
     */
    this.graphTextDisplayed = false;
    /**
     * @member {SuperMap.ThemeGraphTextFormat} [SuperMap.ThemeGraphText.prototype.graphTextFormat=SuperMap.ThemeGraphTextFormat.CAPTION]
     * @description ç»è®¡ä¸é¢å¾ææ¬æ¾ç¤ºæ ¼å¼ã
     *              ææ¬æ¾ç¤ºæ ¼å¼åæ¬ç¾åæ°ãçå®æ°å¼ãæ é¢ãæ é¢+ç¾åæ°ãæ é¢+çå®æ°å¼ã
     */

    this.graphTextFormat = ThemeGraphTextFormat.CAPTION;
    /**
     * @member {SuperMap.ServerTextStyle} SuperMap.ThemeGraphText.prototype.graphTextStyle
     * @description ç»è®¡å¾ä¸çæå­æ æ³¨é£æ ¼ã
     */

    this.graphTextStyle = new ServerTextStyle();

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ThemeGraphText";
  }
  /**
   * @function SuperMap.ThemeGraphText.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThemeGraphText_createClass(ThemeGraphText, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.graphTextDisplayed = null;
      me.graphTextFormat = null;

      if (me.graphTextStyle) {
        me.graphTextStyle.destroy();
        me.graphTextStyle = null;
      }
    }
    /**
     * @function SuperMap.ThemeGraphText.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·åç»è®¡å¾æå­æ æ³¨é£æ ¼ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeGraphText} ThemeGraphText å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      var res = new ThemeGraphText();
      Util.copy(res, obj);
      res.graphTextStyle = ServerTextStyle.fromObj(obj.graphTextStyle);
      return res;
    }
  }]);

  return ThemeGraphText;
}();
SuperMap.ThemeGraphText = ThemeGraphText;
// CONCATENATED MODULE: ./src/common/iServer/ThemeGraphItem.js
function ThemeGraphItem_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeGraphItem_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeGraphItem_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeGraphItem_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeGraphItem_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.ThemeGraphItem
 * @category  iServer Map Theme
 * @classdesc ç»è®¡ä¸é¢å¾å­é¡¹ç±»ã
 * @param {Object} options - åæ°ã
 * @param {string} [options.caption] - ä¸é¢å¾å­é¡¹çåç§°ã
 * @param {string} options.graphExpression - ç»è®¡ä¸é¢å¾çä¸é¢åéã
 * @param {Array.<number>} [options.memoryDoubleValues] - åå­æ°ç»æ¹å¼å¶ä½ä¸é¢å¾æ¶çå¼æ°ç»ã
 * @param {SuperMap.ServerStyle} [options.uniformStyle] - ç»è®¡ä¸é¢å¾å­é¡¹çæ¾ç¤ºé£æ ¼
 */

var ThemeGraphItem = /*#__PURE__*/function () {
  function ThemeGraphItem(options) {
    ThemeGraphItem_classCallCheck(this, ThemeGraphItem);

    /**
     * @member {string} [SuperMap.ThemeGraphItem.prototype.caption]
     * @description ä¸é¢å¾å­é¡¹çåç§°ã
     */
    this.caption = null;
    /**
     * @member {string} SuperMap.ThemeGraphItem.prototype.graphExpression
     * @description ç»è®¡ä¸é¢å¾çä¸é¢åéãä¸é¢åéå¯ä»¥æ¯ä¸ä¸ªå­æ®µæå­æ®µè¡¨è¾¾å¼ãå­æ®µå¿é¡»ä¸ºæ°å¼åï¼è¡¨è¾¾å¼åªè½ä¸ºæ°å¼åçå­æ®µé´çè¿ç®ã
     */

    this.graphExpression = null;
    /**
     * @member {Array.<number>} [SuperMap.ThemeGraphItem.prototype.memoryDoubleValues]
     * @description åå­æ°ç»æ¹å¼å¶ä½ä¸é¢å¾æ¶çå¼æ°ç»ã<br>
     *              åå­æ°ç»æ¹å¼å¶ä½ä¸é¢å¾æ¶ï¼åªå¯¹ SmID å¼å¨é®æ°ç»ï¼{@link SuperMap.ThemeGraph.memoryKeys}ï¼ä¸­çè®°å½å¶ä½ä¸é¢å¾ã
     *              å¼æ°ç»çæ°å¼ä¸ªæ°å¿é¡»ä¸é®æ°ç»ä¸­æ°å¼çä¸ªæ°ä¸è´ã å¼æ°ç»ä¸­çå¼å°ä»£æ¿åæ¥çä¸é¢å¼æ¥å¶ä½ç»è®¡ä¸é¢å¾ã
     *              æ¯å¦ï¼å©ç¨é¢ç§¯å­æ®µåå¨é¿å­æ®µï¼å³æä¸¤ä¸ªç»è®¡ä¸é¢å¾å­é¡¹ ï¼ä½ä¸ºä¸é¢åéå¶ä½ç»è®¡ä¸é¢å¾ã
     */

    this.memoryDoubleValues = null;
    /**
     * @member {SuperMap.ServerStyle} [SuperMap.ThemeGraphItem.prototype.uniformStyle]
     * @description ç»è®¡ä¸é¢å¾å­é¡¹çæ¾ç¤ºé£æ ¼ã
     *              æ¯ä¸ä¸ªç»è®¡ä¸é¢å¾å­é¡¹é½å¯¹åºä¸ç§æ¾ç¤ºé£æ ¼ã
     */

    this.uniformStyle = new ServerStyle();

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ThemeGraphItem";
  }
  /**
   * @function SuperMap.ThemeGraphItem.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThemeGraphItem_createClass(ThemeGraphItem, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.caption = null;
      me.graphExpression = null;
      me.memoryDoubleValues = null;
      me.uniformStyle = null;
    }
    /**
     * @function SuperMap.ThemeGraphItem.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·åç»è®¡ä¸é¢å¾å­é¡¹ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeGraphItem} ThemeGraphItem å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      if (!obj) {
        return;
      }

      var res = new ThemeGraphItem();
      Util.copy(res, obj);
      res.uniformStyle = ServerStyle.fromJson(obj.uniformStyle);
      return res;
    }
  }]);

  return ThemeGraphItem;
}();
SuperMap.ThemeGraphItem = ThemeGraphItem;
// CONCATENATED MODULE: ./src/common/iServer/ThemeGraph.js
function ThemeGraph_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { ThemeGraph_typeof = function _typeof(obj) { return typeof obj; }; } else { ThemeGraph_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return ThemeGraph_typeof(obj); }

function ThemeGraph_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeGraph_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeGraph_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeGraph_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeGraph_defineProperties(Constructor, staticProps); return Constructor; }

function ThemeGraph_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { ThemeGraph_get = Reflect.get; } else { ThemeGraph_get = function _get(target, property, receiver) { var base = ThemeGraph_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return ThemeGraph_get(target, property, receiver || target); }

function ThemeGraph_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = ThemeGraph_getPrototypeOf(object); if (object === null) break; } return object; }

function ThemeGraph_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) ThemeGraph_setPrototypeOf(subClass, superClass); }

function ThemeGraph_setPrototypeOf(o, p) { ThemeGraph_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return ThemeGraph_setPrototypeOf(o, p); }

function ThemeGraph_createSuper(Derived) { var hasNativeReflectConstruct = ThemeGraph_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = ThemeGraph_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = ThemeGraph_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return ThemeGraph_possibleConstructorReturn(this, result); }; }

function ThemeGraph_possibleConstructorReturn(self, call) { if (call && (ThemeGraph_typeof(call) === "object" || typeof call === "function")) { return call; } return ThemeGraph_assertThisInitialized(self); }

function ThemeGraph_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function ThemeGraph_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ThemeGraph_getPrototypeOf(o) { ThemeGraph_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return ThemeGraph_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/










/**
 * @class SuperMap.ThemeGraph
 * @category  iServer Map Theme
 * @classdesc ç»è®¡ä¸é¢å¾ç±»ã
 * @extends {SuperMap.Theme}
 * @param {Object} options - åæ°ã
 * @param {Array.<SuperMap.ThemeGraphItem>} options.items - ç»è®¡ä¸é¢å¾å­é¡¹éåã
 * @param {number}  [options.barWidth=0] - æ±ç¶ä¸é¢å¾ä¸­æ¯ä¸ä¸ªæ±çå®½åº¦ã
 * @param {SuperMap.ThemeFlow} [options.flow] - ç»è®¡ä¸é¢å¾æµå¨æ¾ç¤ºä¸çµå¼çº¿è®¾ç½®ã
 * @param {SuperMap.GraduatedMode} [options.graduatedMode=SuperMap.GraduatedMode.CONSTANT] - ç»è®¡å¾ä¸­å°çè¦ç´ çå¼ä¸å¾è¡¨å°ºå¯¸é´çæ å°å³ç³»ã
 * @param {SuperMap.ThemeGraphAxes} [options.graphAxes] - ç»è®¡å¾ä¸­åæ è½´æ ·å¼ç¸å³ä¿¡æ¯ã
 * @param {SuperMap.ThemeGraphSize} [options.graphSize=0] - ç»è®¡ç¬¦å·çæå¤§æå°å°ºå¯¸ã
 * @param {boolean} [options.graphSizeFixed=false] - ç¼©æ¾å°å¾æ¶ç»è®¡å¾ç¬¦å·æ¯å¦åºå®å¤§å°ã
 * @param {SuperMap.ThemeGraphText} [options.graphText] - ç»è®¡å¾ä¸çæå­æ¯å¦å¯ä»¥è§ä»¥åæå­æ æ³¨é£æ ¼ã
 * @param {SuperMap.GraphAxesTextDisplayMode} [options.graphAxesTextDisplayMode=SuperMap.GraphAxesTextDisplayMode.NONE] - ç»è®¡ä¸é¢å¾åæ è½´ææ¬æ¾ç¤ºæ¨¡å¼ã
 * @param {SuperMap.ThemeGraphType} [options.graphType=SuperMap.ThemeGraphType.AREA] - ç»è®¡ä¸é¢å¾ç±»åã
 * @param {Array.<number>} [options.memoryKeys] - ä»¥åå­æ°ç»æ¹å¼å¶ä½ä¸é¢å¾æ¶çé®æ°ç»ã
 * @param {boolean} [options.negativeDisplayed=false] - ä¸é¢å¾ä¸­æ¯å¦æ¾ç¤ºå±æ§ä¸ºè´å¼çæ°æ®ã
 * @param {SuperMap.ThemeOffset} [options.offset] - ç»è®¡å¾ç¸å¯¹äºè¦ç´ åç¹çåç§»éã
 * @param {boolean} [options.overlapAvoided=true] - ç»è®¡å¾æ¯å¦éç¨é¿è®©æ¹å¼æ¾ç¤ºã
 * @param {number} [options.roseAngle=0] - ç»è®¡å¾ä¸­ç«ç°å¾æä¸ç»´ç«ç°å¾ç¨äºç­åçè§åº¦ã
 * @param {number} [options.startAngle=0] - é¥¼ç¶ç»è®¡å¾æå½¢çèµ·å§è§åº¦ã
 */

var ThemeGraph = /*#__PURE__*/function (_Theme) {
  ThemeGraph_inherits(ThemeGraph, _Theme);

  var _super = ThemeGraph_createSuper(ThemeGraph);

  function ThemeGraph(options) {
    var _this;

    ThemeGraph_classCallCheck(this, ThemeGraph);

    _this = _super.call(this, "GRAPH", options);
    /**
     * @member {number} [SuperMap.ThemeGraph.prototype.barWidth=0]
     * @description æ±ç¶ä¸é¢å¾ä¸­æ¯ä¸ä¸ªæ±çå®½åº¦ãä½¿ç¨å°å¾åæ åä½ã
     *              åªæéæ©çç»è®¡å¾ç±»åä¸ºæ±ç¶å¾ï¼æ±ç¶å¾ãä¸ç»´æ±ç¶å¾ãå å æ±ç¶å¾ãä¸ç»´å å æ±ç¶å¾ï¼æ¶ï¼æ­¤é¡¹æå¯è®¾ç½®ã
     */

    _this.barWidth = 0;
    /**
     * @member {SuperMap.ThemeFlow} SuperMap.ThemeGraph.prototype.flow
     * @description ç»è®¡ä¸é¢å¾æµå¨æ¾ç¤ºä¸çµå¼çº¿è®¾ç½®ã
     *              éè¿è¯¥å­æ®µå¯ä»¥è®¾ç½®ç»è®¡ç¬¦å·æ¯å¦æµå¨æ¾ç¤ºåçµå¼çº¿é£æ ¼ã
     */

    _this.flow = new ThemeFlow();
    /**
     * @member {SuperMap.GraduatedMode} [SuperMap.ThemeGraph.prototype.graduatedMode=SuperMap.GraduatedMode.CONSTANT]
     * @description ç»è®¡å¾ä¸­å°çè¦ç´ çå¼ä¸å¾è¡¨å°ºå¯¸é´çæ å°å³ç³»ï¼å¸¸æ°ãå¯¹æ°ãå¹³æ¹æ ¹ï¼ï¼å³åçº§æ¹å¼ã
     *              åçº§ä¸»è¦æ¯ä¸ºäºåå°å¶ä½ç»è®¡ä¸é¢å¾ä¸­æ°æ®å¤§å°ä¹é´çå·®å¼ï¼ä½¿å¾ç»è®¡å¾çè§è§æææ¯è¾å¥½ï¼åæ¶ä¸åç±»å«ä¹é´çæ¯è¾ä¹è¿æ¯ææä¹çã
     *              æä¾ä¸ç§åçº§æ¨¡å¼ï¼å¸¸æ°ãå¯¹æ°åå¹³æ¹æ ¹ï¼å¯¹äºæå¼ä¸ºè´æ°çå­æ®µï¼ä¸å¯ä»¥éç¨å¯¹æ°åå¹³æ¹æ ¹çåçº§æ¹å¼ãä¸åçç­çº§æ¹å¼ç¨äºç¡®å®ç¬¦å·å¤§å°çæ°å¼æ¯ä¸ç¸åçã
     */

    _this.graduatedMode = GraduatedMode.CONSTANT;
    /**
     * @member {SuperMap.ThemeGraphAxes} SuperMap.ThemeGraph.prototype.graphAxes
     * @description ç¨äºè®¾ç½®ç»è®¡å¾ä¸­åæ è½´æ ·å¼ç¸å³ä¿¡æ¯ï¼å¦åæ è½´é¢è²ãæ¯å¦æ¾ç¤ºãåæ ææ¬æ ·å¼ç­ã
     */

    _this.graphAxes = new ThemeGraphAxes();
    /**
     * @member {SuperMap.ThemeGraphSize} [SuperMap.ThemeGraph.prototype.graphSize=0]
     * @description ç¨äºè®¾ç½®ç»è®¡ç¬¦å·çæå¤§æå°å°ºå¯¸ã
     */

    _this.graphSize = new ThemeGraphSize();
    /**
     * @member {boolean} [SuperMap.ThemeGraph.prototype.graphSizeFixed=false]
     * @description ç¼©æ¾å°å¾æ¶ç»è®¡å¾ç¬¦å·æ¯å¦åºå®å¤§å°ãå³ç»è®¡å¾ç¬¦å·å°éå°å¾ç¼©æ¾ã
     */

    _this.graphSizeFixed = false;
    /**
     * @member {SuperMap.ThemeGraphText} SuperMap.ThemeGraph.prototype.graphText
     * @description ç»è®¡å¾ä¸çæå­æ¯å¦å¯ä»¥è§ä»¥åæå­æ æ³¨é£æ ¼ã
     */

    _this.graphText = new ThemeGraphText();
    /**
     * @member {SuperMap.ThemeGraphType} [SuperMap.ThemeGraph.prototype.graphType=SuperMap.ThemeGraphType.AREA]
     * @description ç»è®¡ä¸é¢å¾ç±»åãSuperMap æä¾äºå¤ç§ç±»åçç»è®¡å¾ï¼
     *              åå«ä¸ºé¢ç§¯å¾ãé¶æ¢¯å¾ãæçº¿å¾ãç¹ç¶å¾ãæ±ç¶å¾ãä¸ç»´æ±ç¶å¾ãé¥¼å¾ãä¸ç»´é¥¼å¾ãç«ç°å¾ãä¸ç»´ç«ç°å¾ãå å æ±ç¶å¾ãä¸ç»´å å æ±ç¶å¾ãç¯ç¶å¾ãé»è®¤ä¸ºé¢ç§¯å¾ã
     */

    _this.graphType = ThemeGraphType.AREA;
    /**
     * @member {SuperMap.GraphAxesTextDisplayMode} [SuperMap.ThemeGraph.prototype.graphAxesTextDisplayMode=SuperMap.GraphAxesTextDisplayMode.NONE]
     * @description ç»è®¡ä¸é¢å¾åæ è½´ææ¬æ¾ç¤ºæ¨¡å¼ã
     */

    _this.graphAxesTextDisplayMode = GraphAxesTextDisplayMode.NONE;
    /**
     * @member {Array.<SuperMap.ThemeGraphItem>} SuperMap.ThemeGraph.prototype.items
     * @description ç»è®¡ä¸é¢å¾å­é¡¹éåã
     *              ç»è®¡ä¸é¢å¾å¯ä»¥åºäºå¤ä¸ªåéï¼åæ å¤ç§å±æ§ï¼å³å¯ä»¥å°å¤ä¸ªä¸é¢åéçå¼ç»å¶å¨ä¸ä¸ªç»è®¡å¾ä¸ãæ¯ä¸ä¸ªä¸é¢åéå¯¹åºçç»è®¡å¾å³ä¸ºä¸ä¸ªä¸é¢å¾å­é¡¹ã
     *              å¯¹äºæ¯ä¸ªä¸é¢å¾å­é¡¹å¯ä»¥ä¸ºå¶è®¾ç½®æ é¢ãé£æ ¼ï¼çè³å¯ä»¥å°è¯¥å­é¡¹åå¶ä½æèå´åæ®µä¸é¢å¾ã
     */

    _this.items = null;
    /**
     * @member {Array.<number>} SuperMap.ThemeGraph.prototype.memoryKeys
     * @description ä»¥åå­æ°ç»æ¹å¼å¶ä½ä¸é¢å¾æ¶çé®æ°ç»ã
     *              é®æ°ç»åçæ°å¼ä»£è¡¨ SmID å¼ï¼å®ä¸ SuperMap.ThemeGraphItem ç±»ä¸­çå¼æ°ç»ï¼SuperMap.ThemeGraphItem.memoryDoubleValuesï¼è¦å³èèµ·æ¥åºç¨ã
     *              é®æ°ç»ä¸­æ°å¼çä¸ªæ°å¿é¡»è¦ä¸å¼æ°ç»çæ°å¼ä¸ªæ°ä¸è´ãå¼æ°ç»ä¸­çå¼å°ä»£æ¿åæ¥çä¸é¢å¼æ¥å¶ä½ç»è®¡ä¸é¢å¾ã
     *              ç®åææçä¸é¢å¾é½æ¯æä»¥åå­æ°ç»çæ¹å¼å¶ä½ä¸é¢å¾ï¼ä½ç»è®¡ä¸é¢å¾ä¸å¶ä»ä¸é¢å¾æå®åå­æ°ç»çæ¹å¼ä¸åï¼
     *              ç»è®¡ä¸é¢å¾ä½¿ç¨ memoryKeys æå®åå­æ°ç»ï¼èå¶ä»ä¸é¢å¾åä½¿ç¨ memoryData æ¥æå®åå­æ°ç»ã
     * @example
     *  memoryKeys çä½¿ç¨æ¹æ³å¦ä¸ï¼
     *  function addThemeGraph() {
     *      removeTheme();
     *       //åå»ºç»è®¡ä¸é¢å¾å¯¹è±¡ï¼SuperMap.ThemeGraph å¿è®¾ itemsã
     *       //ä¸é¢å¾åæ° ThemeParameters å¿è®¾ themeï¼å³ä»¥è®¾ç½®å¥½çåæ®µä¸é¢å¾å¯¹è±¡ï¼ãdataSourceName å datasetName
     *      var style1 = new SuperMap.ServerStyle({
     *                   fillForeColor: new SuperMap.ServerColor(92,73,234),
     *                   lineWidth: 0.1
     *               }),
     *               style2 = new SuperMap.ServerStyle({
     *                   fillForeColor: new SuperMap.ServerColor(211,111,240),
     *                   lineWidth: 0.1
     *               }),
     *               item1 = new SuperMap.ThemeGraphItem({
     *                   memoryDoubleValues:[1.18,0.95,0.37,1.31,0.8,1.5],
     *                  caption: "1992-1995äººå£å¢é¿ç",
     *                  graphExpression: "Pop_Rate95",
     *                   uniformStyle: style1
     *               }),
     *               item2 = new SuperMap.ThemeGraphItem({
     *               //ä»¥åå­æ°ç»æ¹å¼å¶ä½ä¸é¢å¾æ¶çå¼æ°ç»
     *                   memoryDoubleValues:[2.71,0,0.74,3.1,2.2,3.5],
     *                   caption: "1995-1999äººå£å¢é¿ç",  //ä¸é¢å¾å­é¡¹çåç§°
     *                   graphExpression: "Pop_Rate99",  //ç»è®¡ä¸é¢å¾çä¸é¢åé
     *                   uniformStyle: style2      //ç»è®¡ä¸é¢å¾å­é¡¹çæ¾ç¤ºé£æ ¼
     *               }),
     *               themeGraph  = new SuperMap.ThemeGraph({
     *               //ä»¥åå­æ°ç»æ¹å¼å¶ä½ä¸é¢å¾æ¶çé®æ°ç»ï¼é®æ°ç»åçæ°å¼ä»£è¡¨ SmID å¼
     *                    memoryKeys:[1,2,4,8,10,12],
     *                   items: new Array(item1,item2),
     *                   barWidth: 0.03,
     *                    //ç»è®¡å¾ä¸­å°çè¦ç´ çå¼ä¸å¾è¡¨å°ºå¯¸é´çæ å°å³ç³»ä¸ºå¹³æ¹æ ¹
     *                   graduatedMode: SuperMap.GraduatedMode.SQUAREROOT,
     *                   //graphAxesç¨äºè®¾ç½®ç»è®¡å¾ä¸­åæ è½´æ ·å¼ç¸å³ä¿¡æ¯
     *                   graphAxes: new SuperMap.ThemeGraphAxes({
     *                       axesDisplayed: true
     *                   }),
     *                   graphSize: new SuperMap.ThemeGraphSize({
     *                       maxGraphSize: 1,
     *                       minGraphSize: 0.35
     *                   }),
     *                   //ç»è®¡å¾ä¸çæå­æ¯å¦å¯ä»¥è§ä»¥åæå­æ æ³¨é£æ ¼
     *                   graphText: new SuperMap.ThemeGraphText({
     *                       graphTextDisplayed: true,
     *                       graphTextFormat: SuperMap.ThemeGraphTextFormat.VALUE,
     *                       graphTextStyle: new SuperMap.ServerTextStyle({
     *                           sizeFixed: true,
     *                           fontHeight: 9,
     *                           fontWidth: 5
     *                       })
     *                   }),
     *                   //ç»è®¡ä¸é¢å¾ç±»åä¸ºä¸ç»´æ±ç¶å¾
     *                   graphType: SuperMap.ThemeGraphType.BAR3D
     *               }),
     *                   //ä¸é¢å¾åæ°å¯¹è±¡
     *               themeParameters = new SuperMap.ThemeParameters({
     *                   themes: [themeGraph],
     *                   dataSourceNames: ["Jingjin"],
     *                   datasetNames: ["BaseMap_R"]
     *               }),
     *                   //ä¸æå¡ç«¯äº¤äº
     *               themeService=new SuperMap.ThemeService(url, {
     *                   eventListeners: {
     *                       "processCompleted": ThemeCompleted,
     *                        "processFailed": themeFailed
     *                  }
     *              });
     *       themeService.processAsync(themeParameters);
     *   }
     */

    _this.memoryKeys = null;
    /**
     * @member {boolean} [SuperMap.ThemeGraph.prototype.negativeDisplayed=false]
     * @description ä¸é¢å¾ä¸­æ¯å¦æ¾ç¤ºå±æ§ä¸ºè´å¼çæ°æ®ãtrue è¡¨ç¤ºæ¾ç¤ºï¼falese ä¸æ¾ç¤ºã
     */

    _this.negativeDisplayed = false;
    /**
     * @member {SuperMap.ThemeOffset} SuperMap.ThemeGraph.prototype.offset
     * @description ç¨äºè®¾ç½®ç»è®¡å¾ç¸å¯¹äºè¦ç´ åç¹çåç§»éã
     */

    _this.offset = new ThemeOffset();
    /**
     * @member {boolean} SuperMap.ThemeGraph.prototype.overlapAvoided
     * @description ç»è®¡å¾æ¯å¦éç¨é¿è®©æ¹å¼æ¾ç¤ºã<br>
     *              1.å¯¹æ°æ®éå¶ä½ç»è®¡ä¸é¢å¾:å½ç»è®¡å¾éç¨é¿è®©æ¹å¼æ¾ç¤ºæ¶ï¼å¦æ overlapAvoided ä¸º trueï¼åå¨ç»è®¡å¾éå åº¦å¾å¤§çæåµä¸ï¼
     *              ä¼åºç°æ æ³å®å¨é¿åç»è®¡å¾éå çç°è±¡ï¼å¦æ overlapAvoided ä¸º falseï¼ä¼è¿æ»¤æä¸äºç»è®¡å¾ï¼ä»èä¿è¯ææçç»è®¡å¾åä¸éå ã<br>
     *              2.å¯¹æ°æ®éåæ¶å¶ä½ç»è®¡ä¸é¢å¾åæ ç­¾ä¸é¢å¾ï¼å½ç»è®¡å¾ä¸æ¾ç¤ºå­é¡¹ææ¬æ¶ï¼æ ç­¾ä¸é¢å¾çæ ç­¾å³ä½¿åç»è®¡å¾éå ï¼ä¸¤èä¹é½å¯æ­£å¸¸æ¾ç¤ºï¼
     *              å½ç»è®¡å¾æ¾ç¤ºå­é¡¹ææ¬æ¶ï¼å¦æç»è®¡å¾ä¸­çå­é¡¹ææ¬åæ ç­¾ä¸é¢å¾ä¸­çæ ç­¾ä¸éå ï¼åä¸¤èåæ­£å¸¸æ¾ç¤ºï¼å¦æéå ï¼åä¼è¿æ»¤æç»è®¡å¾çå­é¡¹ææ¬ï¼åªæ¾ç¤ºæ ç­¾ã
     */

    _this.overlapAvoided = true;
    /**
     * @member {number} [SuperMap.ThemeGraph.prototype.roseAngle=0]
     * @description ç»è®¡å¾ä¸­ç«ç°å¾æä¸ç»´ç«ç°å¾ç¨äºç­åçè§åº¦ï¼é»è®¤ä¸º 0 åº¦ï¼ç²¾ç¡®å° 0.1 åº¦ãå¨è§åº¦ä¸º0æèå¤§äº 360 åº¦çæåµä¸åä½¿ç¨ 360 åº¦æ¥ç­åå¶ä½ç»è®¡å¾çå­æ®µæ°ã
     */

    _this.roseAngle = 0;
    /**
     * @member {number} [SuperMap.ThemeGraph.prototype.startAngle=0]
     * @description é¥¼ç¶ç»è®¡å¾æå½¢çèµ·å§è§åº¦ãç²¾ç¡®å° 0.1 åº¦ï¼ä»¥æ°´å¹³æ¹åä¸ºæ­£åãåªæéæ©çç»è®¡å¾ç±»åä¸ºé¥¼ç¶å¾ï¼é¥¼å¾ãä¸ç»´é¥¼å¾ãç«ç°å¾ãä¸ç»´ç«ç°å¾ï¼æ¶ï¼æ­¤é¡¹æå¯è®¾ç½®ã
     */

    _this.startAngle = 0;

    if (options) {
      Util.extend(ThemeGraph_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.ThemeGraph";
    return _this;
  }
  /**
   * @function SuperMap.ThemeGraph.prototype.destroy
   * @override
   */


  ThemeGraph_createClass(ThemeGraph, [{
    key: "destroy",
    value: function destroy() {
      ThemeGraph_get(ThemeGraph_getPrototypeOf(ThemeGraph.prototype), "destroy", this).call(this);

      var me = this;
      me.barWidth = null;

      if (me.flow) {
        me.flow.destroy();
        me.flow = null;
      }

      me.graduatedMode = null;

      if (me.graphAxes) {
        me.graphAxes.destroy();
        me.graphAxes = null;
      }

      if (me.graphSize) {
        me.graphSize.destroy();
        me.graphSize = null;
      }

      me.graphSizeFixed = null;

      if (me.graphText) {
        me.graphText.destroy();
        me.graphText = null;
      }

      me.graphType = null;

      if (me.items) {
        for (var i = 0, items = me.items, len = items.length; i < len; i++) {
          items[i].destroy();
        }

        me.items = null;
      }

      me.memoryKeys = null;
      me.negativeDisplayed = null;

      if (me.offset) {
        me.offset.destroy();
        me.offset = null;
      }

      me.overlapAvoided = null;
      me.roseAngle = null;
      me.startAngle = null;
      me.graphAxesTextDisplayMode = null;
    }
    /**
     * @function SuperMap.ThemeGraph.prototype.toJSON
     * @description å° SuperMap.ThemeGraph å¯¹è±¡è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @returns {string} è¿åè½¬æ¢åç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "toJSON",
    value: function toJSON() {
      return Util.toJSON(this.toServerJSONObject());
    }
    /**
     * @function SuperMap.ThemeGraph.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     * @returns {Object} å¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      var obj = {};
      obj.type = this.type;

      if (this.graphText) {
        obj.graphTextDisplayed = this.graphText.graphTextDisplayed;
        obj.graphTextFormat = this.graphText.graphTextFormat;
        obj.graphTextStyle = this.graphText.graphTextStyle;
      }

      if (this.flow) {
        obj.flowEnabled = this.flow.flowEnabled;
        obj.leaderLineDisplayed = this.flow.leaderLineDisplayed;
        obj.leaderLineStyle = this.flow.leaderLineStyle;
      }

      if (this.graphAxes) {
        obj.axesColor = this.graphAxes.axesColor;
        obj.axesDisplayed = this.graphAxes.axesDisplayed;
        obj.axesGridDisplayed = this.graphAxes.axesGridDisplayed;
        obj.axesTextDisplayed = this.graphAxes.axesTextDisplayed;
        obj.axesTextStyle = this.graphAxes.axesTextStyle;
      }

      if (this.graphSize) {
        obj.maxGraphSize = this.graphSize.maxGraphSize;
        obj.minGraphSize = this.graphSize.minGraphSize;
      }

      if (this.offset) {
        obj.offsetFixed = this.offset.offsetFixed;
        obj.offsetX = this.offset.offsetX;
        obj.offsetY = this.offset.offsetY;
      }

      obj.barWidth = this.barWidth;
      obj.graduatedMode = this.graduatedMode;
      obj.graphSizeFixed = this.graphSizeFixed;
      obj.graphType = this.graphType;
      obj.graphAxesTextDisplayMode = this.graphAxesTextDisplayMode;
      obj.items = this.items;
      obj.memoryKeys = this.memoryKeys;
      obj.negativeDisplayed = this.negativeDisplayed;
      obj.overlapAvoided = this.overlapAvoided;
      obj.roseAngle = this.roseAngle;
      obj.startAngle = this.startAngle;
      return obj;
    }
    /**
     * @function SuperMap.ThemeGraph.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·åç»è®¡ä¸é¢å¾ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeGraph} ThemeGraph å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      var res = new ThemeGraph();
      var itemsG = obj.items;
      var len = itemsG ? itemsG.length : 0;
      Util.copy(res, obj);
      res.items = [];
      res.flow = ThemeFlow.fromObj(obj);
      res.graphAxes = ThemeGraphAxes.fromObj(obj);
      res.graphSize = ThemeGraphSize.fromObj(obj);
      res.graphText = ThemeGraphText.fromObj(obj);
      res.offset = ThemeOffset.fromObj(obj);

      for (var i = 0; i < len; i++) {
        res.items.push(ThemeGraphItem.fromObj(itemsG[i]));
      }

      return res;
    }
  }]);

  return ThemeGraph;
}(Theme);
SuperMap.ThemeGraph = ThemeGraph;
// CONCATENATED MODULE: ./src/common/iServer/ThemeDotDensity.js
function ThemeDotDensity_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { ThemeDotDensity_typeof = function _typeof(obj) { return typeof obj; }; } else { ThemeDotDensity_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return ThemeDotDensity_typeof(obj); }

function ThemeDotDensity_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeDotDensity_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeDotDensity_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeDotDensity_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeDotDensity_defineProperties(Constructor, staticProps); return Constructor; }

function ThemeDotDensity_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) ThemeDotDensity_setPrototypeOf(subClass, superClass); }

function ThemeDotDensity_setPrototypeOf(o, p) { ThemeDotDensity_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return ThemeDotDensity_setPrototypeOf(o, p); }

function ThemeDotDensity_createSuper(Derived) { var hasNativeReflectConstruct = ThemeDotDensity_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = ThemeDotDensity_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = ThemeDotDensity_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return ThemeDotDensity_possibleConstructorReturn(this, result); }; }

function ThemeDotDensity_possibleConstructorReturn(self, call) { if (call && (ThemeDotDensity_typeof(call) === "object" || typeof call === "function")) { return call; } return ThemeDotDensity_assertThisInitialized(self); }

function ThemeDotDensity_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function ThemeDotDensity_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ThemeDotDensity_getPrototypeOf(o) { ThemeDotDensity_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return ThemeDotDensity_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.ThemeDotDensity
 * @category  iServer Map Theme
 * @classdesc ç¹å¯åº¦ä¸é¢å¾ã
 * @description ç¹å¯åº¦ä¸é¢å¾ç¨ä¸å®å¤§å°ãå½¢ç¶ç¸åçç¹è¡¨ç¤ºç°è±¡åå¸èå´ãæ°éç¹å¾ååå¸å¯åº¦ãç¹çå¤å°åæä»£è¡¨çæä¹ç±å°å¾çåå®¹ç¡®å®ã
 *              ç¹å¯åº¦ä¸é¢å¾å©ç¨å¾å±çæä¸æ°å¼å±æ§ä¿¡æ¯ï¼ä¸é¢å¼ï¼æ å°ä¸ºä¸åç­çº§ï¼æ¯ä¸çº§å«ä½¿ç¨ä¸åæ°éæè¡¨ç°ä¸ºå¯åº¦çç¹ç¬¦å·æ¥è¡¨ç¤ºã
 *              è¯¥ä¸é¢å¼å¨åä¸ªååºåçåå¸æåµï¼ä½ç°ä¸ååºåçç¸å¯¹æ°éå·®å¼ãå¤ç¨äºå·ææ°éç¹å¾çå°å¾ä¸ï¼
 *              æ¯å¦è¡¨ç¤ºä¸åå°åºçç²®é£äº§éãGDPãäººå£ç­çåçº§ï¼ä¸»è¦éå¯¹åºåæé¢ç¶çè¦ç´ ï¼å èï¼ç¹å¯åº¦ä¸é¢å¾éç¨äºé¢æ°æ®éã
 *              æ³¨æï¼ç¹å¯åº¦ä¸é¢å¾ä¸­ç¹çåå¸æ¯éæºçï¼å¹¶ä¸ä»£è¡¨å®éçåå¸ä½ç½®ãå³ä½¿å¨ç¸å³è®¾ç½®å®å¨ç¸åçæåµä¸ï¼
 *              æ¯æ¬¡å¶ä½åºçä¸é¢å¾ï¼ç¹çæ°éç¸åï¼ä½ç¹çä½ç½®é½æå·®å¼ã
 * @extends {SuperMap.Theme}
 * @param {Object} options - åæ°ã
 * @param {string} options.dotExpression - åå»ºç¹å¯åº¦ä¸é¢å¾çå­æ®µæå­æ®µè¡¨è¾¾å¼ã
 * @param {SuperMap.ServerStyle} [options.style] - ç¹å¯åº¦ä¸é¢å¾ä¸­ç¹çé£æ ¼ã
 * @param {number} [options.value] - ä¸é¢å¾ä¸­æ¯ä¸ä¸ªç¹æä»£è¡¨çæ°å¼ã
 * @param {SuperMap.ThemeMemoryData} [options.memoryData] - ä¸é¢å¾åå­æ°æ®ã
 */

var ThemeDotDensity = /*#__PURE__*/function (_Theme) {
  ThemeDotDensity_inherits(ThemeDotDensity, _Theme);

  var _super = ThemeDotDensity_createSuper(ThemeDotDensity);

  function ThemeDotDensity(options) {
    var _this;

    ThemeDotDensity_classCallCheck(this, ThemeDotDensity);

    _this = _super.call(this, "DOTDENSITY", options);
    /**
     * @member {string} SuperMap.ThemeDotDensity.prototype.dotExpression
     * @description åå»ºç¹å¯åº¦ä¸é¢å¾çå­æ®µæå­æ®µè¡¨è¾¾å¼ãç¹çæ°ç®æå¯éç¨åº¦çæ¥æºã
     */

    _this.dotExpression = null;
    /**
     * @member {SuperMap.ServerStyle} SuperMap.ThemeDotDensity.prototype.style
     * @description ç¹å¯åº¦ä¸é¢å¾ä¸­ç¹çé£æ ¼ã
     */

    _this.style = new ServerStyle();
    /**
     * @member {number} SuperMap.ThemeDotDensity.prototype.value
     * @description ä¸é¢å¾ä¸­æ¯ä¸ä¸ªç¹æä»£è¡¨çæ°å¼ã<br>
     *              ç¹å¼çç¡®å®ä¸å°å¾æ¯ä¾å°ºä»¥åç¹çå¤§å°æå³ãå°å¾æ¯ä¾å°ºè¶å¤§ï¼ç¸åºçå¾é¢èå´ä¹è¶å¤§ï¼
     *              ç¹ç¸åºå°±å¯ä»¥è¶å¤ï¼æ­¤æ¶ç¹å¼å°±å¯ä»¥è®¾ç½®ç¸å¯¹å°ä¸äºãç¹å½¢ç¶è¶å¤§ï¼
     *              ç¹å¼ç¸åºå°±åºè¯¥è®¾ç½®çå°ä¸äºãç¹å¼è¿å¤§æè¿å°é½æ¯ä¸åéçã
     */

    _this.value = null;

    if (options) {
      Util.extend(ThemeDotDensity_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.ThemeDotDensity";
    return _this;
  }
  /**
   * @function SuperMap.ThemeDotDensity.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThemeDotDensity_createClass(ThemeDotDensity, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.dotExpression = null;
      me.value = null;

      if (me.style) {
        me.style.destroy();
        me.style = null;
      }
    }
    /**
     * @function SuperMap.ThemeDotDensity.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     * @returns {Object} å¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      var obj = {};
      obj = Util.copyAttributes(obj, this);

      if (obj.style) {
        if (obj.style.toServerJSONObject) {
          obj.style = obj.style.toServerJSONObject();
        }
      }

      return obj;
    }
    /**
     * @function SuperMap.ThemeDotDensity.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·åç¹å¯åº¦ä¸é¢å¾ä¸­ç¹çé£æ ¼ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeDotDensity} ThemeDotDensity å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      if (!obj) {
        return;
      }

      var res = new ThemeDotDensity();
      Util.copy(res, obj);
      res.style = ServerStyle.fromJson(obj.style);
      return res;
    }
  }]);

  return ThemeDotDensity;
}(Theme);
SuperMap.ThemeDotDensity = ThemeDotDensity;
// CONCATENATED MODULE: ./src/common/iServer/ThemeGraduatedSymbolStyle.js
function ThemeGraduatedSymbolStyle_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeGraduatedSymbolStyle_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeGraduatedSymbolStyle_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeGraduatedSymbolStyle_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeGraduatedSymbolStyle_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.ThemeGraduatedSymbolStyle
 * @category  iServer Map Theme
 * @classdesc ç­çº§ç¬¦å·ä¸é¢å¾æ­£è´é¶å¼æ¾ç¤ºé£æ ¼ç±»ã
 * @param {Object} options - åæ°ã
 * @param {boolean} [options.negativeDisplayed=false] - æ¯å¦æ¾ç¤ºè´å¼ã
 * @param {SuperMap.ServerStyle} [options.negativeStyle] - è´å¼çç­çº§ç¬¦å·é£æ ¼ã
 * @param {SuperMap.ServerStyle} [options.positiveStyle] - æ­£å¼çç­çº§ç¬¦å·é£æ ¼ã
 * @param {boolean} [options.zeroDisplayed=false] - æ¯å¦æ¾ç¤º 0 å¼ã
 * @param {SuperMap.ServerStyle} [options.zeroStyle] - 0 å¼çç­çº§ç¬¦å·é£æ ¼ã
 */

var ThemeGraduatedSymbolStyle = /*#__PURE__*/function () {
  function ThemeGraduatedSymbolStyle(options) {
    ThemeGraduatedSymbolStyle_classCallCheck(this, ThemeGraduatedSymbolStyle);

    /**
     * @member {boolean} [SuperMap.ThemeGraduatedSymbolStyle.prototype.negativeDisplayed=false]
     * @description æ¯å¦æ¾ç¤ºè´å¼ã
     */
    this.negativeDisplayed = false;
    /**
     * @member {SuperMap.ServerStyle} [SuperMap.ThemeGraduatedSymbolStyle.prototype.negativeStyle]
     * @description è´å¼çç­çº§ç¬¦å·é£æ ¼ã
     */

    this.negativeStyle = new ServerStyle();
    /**
     * @member {SuperMap.ServerStyle} [SuperMap.ThemeGraduatedSymbolStyle.prototype.positiveStyle]
     * @description æ­£å¼çç­çº§ç¬¦å·é£æ ¼ã
     */

    this.positiveStyle = new ServerStyle();
    /**
     * @member {boolean} [SuperMap.ThemeGraduatedSymbolStyle.prototype.zeroDisplayed=false]
     * @description æ¯å¦æ¾ç¤º 0 å¼ã
     */

    this.zeroDisplayed = false;
    /**
     * @member {SuperMap.ServerStyle} SuperMap.ThemeGraduatedSymbolStyle.prototype.zeroStyle
     * @description 0 å¼çç­çº§ç¬¦å·é£æ ¼ã
     */

    this.zeroStyle = new ServerStyle();

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ThemeGraduatedSymbolStyle";
  }
  /**
   * @function SuperMap.ThemeGraduatedSymbolStyle.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThemeGraduatedSymbolStyle_createClass(ThemeGraduatedSymbolStyle, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.negativeDisplayed = null;
      me.negativeStyle = null;
      me.positiveStyle = null;
      me.zeroDisplayed = null;
      me.zeroStyle = null;
    }
    /**
     * @function SuperMap.ThemeGraduatedSymbolStyle.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·åç­çº§ç¬¦å·ä¸é¢å¾æ­£è´é¶å¼æ¾ç¤ºé£æ ¼ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeGraduatedSymbolStyle} ThemeGraduatedSymbolStyle å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      if (!obj) {
        return;
      }

      var res = new ThemeGraduatedSymbolStyle();
      Util.copy(res, obj);
      res.negativeStyle = ServerStyle.fromJson(obj.negativeStyle);
      res.positiveStyle = ServerStyle.fromJson(obj.positiveStyle);
      res.zeroStyle = ServerStyle.fromJson(obj.zeroStyle);
      return res;
    }
  }]);

  return ThemeGraduatedSymbolStyle;
}();
SuperMap.ThemeGraduatedSymbolStyle = ThemeGraduatedSymbolStyle;
// CONCATENATED MODULE: ./src/common/iServer/ThemeGraduatedSymbol.js
function ThemeGraduatedSymbol_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { ThemeGraduatedSymbol_typeof = function _typeof(obj) { return typeof obj; }; } else { ThemeGraduatedSymbol_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return ThemeGraduatedSymbol_typeof(obj); }

function ThemeGraduatedSymbol_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeGraduatedSymbol_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeGraduatedSymbol_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeGraduatedSymbol_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeGraduatedSymbol_defineProperties(Constructor, staticProps); return Constructor; }

function ThemeGraduatedSymbol_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { ThemeGraduatedSymbol_get = Reflect.get; } else { ThemeGraduatedSymbol_get = function _get(target, property, receiver) { var base = ThemeGraduatedSymbol_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return ThemeGraduatedSymbol_get(target, property, receiver || target); }

function ThemeGraduatedSymbol_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = ThemeGraduatedSymbol_getPrototypeOf(object); if (object === null) break; } return object; }

function ThemeGraduatedSymbol_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) ThemeGraduatedSymbol_setPrototypeOf(subClass, superClass); }

function ThemeGraduatedSymbol_setPrototypeOf(o, p) { ThemeGraduatedSymbol_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return ThemeGraduatedSymbol_setPrototypeOf(o, p); }

function ThemeGraduatedSymbol_createSuper(Derived) { var hasNativeReflectConstruct = ThemeGraduatedSymbol_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = ThemeGraduatedSymbol_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = ThemeGraduatedSymbol_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return ThemeGraduatedSymbol_possibleConstructorReturn(this, result); }; }

function ThemeGraduatedSymbol_possibleConstructorReturn(self, call) { if (call && (ThemeGraduatedSymbol_typeof(call) === "object" || typeof call === "function")) { return call; } return ThemeGraduatedSymbol_assertThisInitialized(self); }

function ThemeGraduatedSymbol_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function ThemeGraduatedSymbol_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ThemeGraduatedSymbol_getPrototypeOf(o) { ThemeGraduatedSymbol_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return ThemeGraduatedSymbol_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/







/**
 * @class SuperMap.ThemeGraduatedSymbol
 * @category  iServer Map Theme
 * @classdesc ç­çº§ç¬¦å·ä¸é¢å¾ã
 * @extends {SuperMap.Theme}
 * @param {Object} options - åæ°ã
 * @param {SuperMap.ThemeGraduatedSymbolStyle} options.style - ç¨äºè®¾ç½®ç­çº§ç¬¦å·å¾æ­£è´åé¶å¼æ¾ç¤ºé£æ ¼ã
 * @param {string} options.expression - ç­çº§ç¬¦å·ä¸é¢å¾çå­æ®µæå­æ®µè¡¨è¾¾å¼ã
 * @param {number} [options.baseValue=0] - ç­çº§ç¬¦å·ä¸é¢å¾çåºåå¼ï¼åä½åä¸é¢åéçåä½ã
 * @param {SuperMap.ThemeFlow} [options.flow] - ç­çº§ç¬¦å·ä¸é¢å¾ç¬¦å·æµå¨æ¾ç¤ºä¸çµå¼çº¿è®¾ç½®ç±»ã
 * @param {SuperMap.GraduatedMode} [options.graduatedMode=SuperMap.GraduatedMode.CONSTANT] - ç­çº§ç¬¦å·ä¸é¢å¾åçº§æ¨¡å¼ã
 * @param {SuperMap.ThemeOffset} [options.offset] - ç¨äºè®¾ç½®æ ç­¾ä¸é¢å¾ä¸­æ è®°ææ¬ç¸å¯¹äºè¦ç´ åç¹çåç§»éå¯¹è±¡ã
 * @param {SuperMap.ThemeMemoryData} [options.memoryData] - ä¸é¢å¾åå­æ°æ®ã
 */

var ThemeGraduatedSymbol = /*#__PURE__*/function (_Theme) {
  ThemeGraduatedSymbol_inherits(ThemeGraduatedSymbol, _Theme);

  var _super = ThemeGraduatedSymbol_createSuper(ThemeGraduatedSymbol);

  function ThemeGraduatedSymbol(options) {
    var _this;

    ThemeGraduatedSymbol_classCallCheck(this, ThemeGraduatedSymbol);

    _this = _super.call(this, "GRADUATEDSYMBOL", options);
    /**
     * @member {number} [SuperMap.ThemeGraduatedSymbol.prototype.baseValue=0]
     * @description ç­çº§ç¬¦å·ä¸é¢å¾çåºåå¼ï¼åä½åä¸é¢åéçåä½ã<br>
     *              ä¾æ®æ­¤å¼ç³»ç»ä¼èªå¨æ ¹æ®åçº§æ¹å¼è®¡ç®å¶ä½å¼å¯¹åºçç¬¦å·å¤§å°ï¼æ¯ä¸ªç¬¦å·çæ¾ç¤ºå¤§å°ç­äº 
     *              ThemeValueSection.positiveStyleï¼æ zeroStyleï¼negativeStyleï¼.markerSize * value / basevalueï¼ 
     *              å¶ä¸­ value æ¯ expression ææå®å­æ®µå¯¹åºçå¼ç»è¿åçº§è®¡ç®ä¹åçå¼ãé»è®¤å¼ä¸º0ï¼å»ºè®®éè¿å¤æ¬¡å°è¯è®¾ç½®è¯¥å¼æè½è¾¾å°è¾å¥½çæ¾ç¤ºææã
     */

    _this.baseValue = 0;
    /**
     * @member {string} SuperMap.ThemeGraduatedSymbol.prototype.expression
     * @description ç¨äºåå»ºç­çº§ç¬¦å·ä¸é¢å¾çå­æ®µæå­æ®µè¡¨è¾¾å¼ï¼å­æ®µæå­æ®µè¡¨è¾¾å¼åºä¸ºæ°å¼åã
     */

    _this.expression = null;
    /**
     * @member {SuperMap.ThemeFlow} SuperMap.ThemeGraduatedSymbol.prototype.flow
     * @description ç­çº§ç¬¦å·ä¸é¢å¾ç¬¦å·æµå¨æ¾ç¤ºä¸çµå¼çº¿è®¾ç½®ç±»ã<br>
     *              éè¿è¯¥å­æ®µå¯ä»¥è®¾ç½®ç­çº§ç¬¦å·æ¯å¦æµå¨æ¾ç¤ºåçµå¼çº¿é£æ ¼ã
     */

    _this.flow = new ThemeFlow();
    /**
     * @member {SuperMap.GraduatedMode} [SuperMap.ThemeGraduatedSymbol.prototype.graduatedMode=SuperMap.GraduatedMode.CONSTANT]
     * @description ç­çº§ç¬¦å·ä¸é¢å¾åçº§æ¨¡å¼ã<br>
     *              åçº§ä¸»è¦æ¯ä¸ºäºåå°å¶ä½ç­çº§ç¬¦å·ä¸é¢å¾ä¸­æ°æ®å¤§å°ä¹é´çå·®å¼ãå¦ææ°æ®ä¹é´å·®è·è¾å¤§ï¼åå¯ä»¥éç¨å¯¹æ°æèå¹³æ¹æ ¹çåçº§æ¹å¼æ¥è¿è¡ï¼
     *              è¿æ ·å°±åå°äºæ°æ®ä¹é´çç»å¯¹å¤§å°çå·®å¼ï¼ä½¿å¾ç­çº§ç¬¦å·å¾çè§è§æææ¯è¾å¥½ï¼åæ¶ä¸åç±»å«ä¹é´çæ¯è¾ä¹æ¯ææä¹çã
     *              æä¸ç§åçº§æ¨¡å¼ï¼å¸¸æ°ãå¯¹æ°åå¹³æ¹æ ¹ï¼å¯¹äºæå¼ä¸ºè´æ°çå­æ®µï¼å¨ç¨å¯¹æ°æå¹³æ¹æ ¹æ¹å¼åçº§æ¶ï¼é»è®¤å¯¹è´æ°åæ­£ã
     *              ä¸åçåçº§æ¨¡å¼ç¨äºç¡®å®ç¬¦å·å¤§å°çæ°å¼æ¯ä¸ç¸åçï¼å¸¸æ°æç§å­æ®µçåå§æ°æ®è¿è¡ï¼å¯¹æ°åæ¯å¯¹æ¯æ¡è®°å½å¯¹åºçä¸é¢åéåèªç¶å¯¹æ°ï¼
     *              å¹³æ¹æ ¹åæ¯å¯¹å¶åå¹³æ¹æ ¹ï¼ç¶åç¨æç»å¾å°çç»ææ¥ç¡®å®å¶ç­çº§ç¬¦å·çå¤§å°ã
     */

    _this.graduatedMode = SuperMap.GraduatedMode.CONSTAN;
    /**
     * @member {SuperMap.ThemeOffset} [SuperMap.ThemeGraduatedSymbol.prototype.offset]
     * @description ç¨äºè®¾ç½®ç­çº§ç¬¦å·å¾ç¸å¯¹äºè¦ç´ åç¹çåç§»éã
     */

    _this.offset = new ThemeOffset();
    /**
     * @member {SuperMap.ThemeGraduatedSymbolStyle} SuperMap.ThemeGraduatedSymbol.prototype.style
     * @description ç¨äºè®¾ç½®ç­çº§ç¬¦å·å¾æ­£è´åé¶å¼æ¾ç¤ºé£æ ¼ã
     */

    _this.style = new ThemeGraduatedSymbolStyle();

    if (options) {
      Util.extend(ThemeGraduatedSymbol_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.ThemeGraduatedSymbol";
    return _this;
  }
  /**
   * @function SuperMap.ThemeGraduatedSymbol.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThemeGraduatedSymbol_createClass(ThemeGraduatedSymbol, [{
    key: "destroy",
    value: function destroy() {
      ThemeGraduatedSymbol_get(ThemeGraduatedSymbol_getPrototypeOf(ThemeGraduatedSymbol.prototype), "destroy", this).call(this);

      var me = this;
      me.expression = null;

      if (me.flow) {
        me.flow.destroy();
        me.flow = null;
      }

      me.graduatedMode = GraduatedMode.CONSTANT;

      if (me.offset) {
        me.offset.destroy();
        me.offset = null;
      }

      if (me.style) {
        me.style.destroy();
        me.style = null;
      }
    }
    /**
     * @function SuperMap.ThemeGraduatedSymbol.prototype.toJSON
     * @description å° themeLabel å¯¹è±¡è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @returns {string} è¿åè½¬æ¢åç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "toJSON",
    value: function toJSON() {
      return Util.toJSON(this.toServerJSONObject());
    }
    /**
     * @function SuperMap.ThemeGraduatedSymbol.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     * @returns {Object} å¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      var obj = {};
      obj.type = this.type;
      obj.memoryData = this.memoryData;
      obj.baseValue = this.baseValue;
      obj.expression = this.expression;
      obj.graduatedMode = this.graduatedMode;

      if (this.flow) {
        obj.flowEnabled = this.flow.flowEnabled;
        obj.leaderLineDisplayed = this.flow.leaderLineDisplayed;
        obj.leaderLineStyle = this.flow.leaderLineStyle;
      }

      if (this.offset) {
        obj.offsetFixed = this.offset.offsetFixed;
        obj.offsetX = this.offset.offsetX;
        obj.offsetY = this.offset.offsetY;
      }

      if (this.style) {
        obj.negativeStyle = this.style.negativeStyle;
        obj.negativeDisplayed = this.style.negativeDisplayed;
        obj.positiveStyle = this.style.positiveStyle;
        obj.zeroDisplayed = this.style.zeroDisplayed;
        obj.zeroStyle = this.style.zeroStyle;
      }

      return obj;
    }
    /**
     * @function SuperMap.ThemeGraduatedSymbol.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·åç­çº§ç¬¦å·ä¸é¢å¾ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeGraduatedSymbol} ç­çº§ç¬¦å·ä¸é¢å¾å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      if (!obj) {
        return;
      }

      var res = new SuperMap.ThemeGraduatedSymbol();
      Util.copy(res, obj);
      res.flow = ThemeFlow.fromObj(obj);
      res.offset = ThemeOffset.fromObj(obj);
      res.style = ThemeGraduatedSymbolStyle.fromObj(obj);
      return res;
    }
  }]);

  return ThemeGraduatedSymbol;
}(Theme);
SuperMap.ThemeGraduatedSymbol = ThemeGraduatedSymbol;
// CONCATENATED MODULE: ./src/common/iServer/ThemeRangeItem.js
function ThemeRangeItem_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeRangeItem_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeRangeItem_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeRangeItem_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeRangeItem_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.ThemeRangeItem
 * @category  iServer Map Theme
 * @classdesc èå´åæ®µä¸é¢å¾å­é¡¹ç±»ã
 * @description å¨åæ®µä¸é¢å¾ä¸­ï¼å­æ®µå¼æç§æç§åæ®µæ¨¡å¼è¢«åæå¤ä¸ªèå´æ®µï¼æ¯ä¸ªèå´æ®µå³ä¸ºä¸ä¸ªå­é¡¹ï¼åä¸èå´æ®µçè¦ç´ å±äºåä¸ä¸ªåæ®µä¸é¢å¾å­é¡¹ã
 *              æ¯ä¸ªå­é¡¹é½æå¶åæ®µèµ·å§å¼ãç»æ­¢å¼ãåç§°åé£æ ¼ç­ãæ¯ä¸ªåæ®µæè¡¨ç¤ºçèå´ä¸º[start, end)ã
 * @param {Object} options - åæ°ã
 * @param {string} [options.caption] - åæ®µä¸é¢å¾å­é¡¹çæ é¢ã
 * @param {number} [options.end=0] - åæ®µä¸é¢å¾å­é¡¹çç»æ­¢å¼ã
 * @param {number} [options.start=0] - åæ®µä¸é¢å¾å­é¡¹çèµ·å§å¼ã
 * @param {SuperMap.ServerStyle} options.style - åæ®µä¸é¢å¾å­é¡¹çé£æ ¼ã
 * @param {boolean} [options.visible=true] - åæ®µä¸é¢å¾å­é¡¹æ¯å¦å¯è§ã
 */

var ThemeRangeItem = /*#__PURE__*/function () {
  function ThemeRangeItem(options) {
    ThemeRangeItem_classCallCheck(this, ThemeRangeItem);

    /**
     * @member {string} [SuperMap.ThemeRangeItem.prototype.caption]
     * @description åæ®µä¸é¢å¾å­é¡¹çæ é¢ã
     */
    this.caption = null;
    /**
     * @member {number} [SuperMap.ThemeRangeItem.prototype.end=0]
     * @description åæ®µä¸é¢å¾å­é¡¹çç»æ­¢å¼ï¼å³è¯¥æ®µä¸é¢å¼èå´çæå¤§å¼ã<br>
     *              å¦æè¯¥å­é¡¹æ¯åæ®µä¸­æåä¸ä¸ªå­é¡¹ï¼åè¯¥ç»æ­¢å¼åºå¤§äºåæ®µå­æ®µï¼ThemeRange ç±»ç rangeExpression å±æ§ï¼çæå¤§å¼ï¼è¥è¯¥ç»æ­¢å¼å°äºåæ®µå­æ®µæå¤§å¼ï¼
     *              åå©ä½é¨åç±åé¨éæºå®ä¹å¶é¢è²ï¼å¦æä¸æ¯æåä¸é¡¹ï¼è¯¥ç»æ­¢å¼å¿é¡»ä¸å¶ä¸ä¸å­é¡¹çèµ·å§å¼ç¸åï¼å¦åç³»ç»æåºå¼å¸¸ï¼
     *              å¦æè®¾ç½®äºèå´åæ®µæ¨¡å¼ååæ®µæ°ï¼åä¼èªå¨è®¡ç®æ¯æ®µçèå´ [start, end)ï¼ææ éè®¾ç½® [start, end)ï¼å½ç¶å¯ä»¥è®¾ç½®ï¼é£ä¹ç»æå°±ä¼ææ¨è®¾ç½®çå¼å¯¹åæ®µç»æè¿è¡è°æ´ã
     */

    this.end = 0;
    /**
     * @member {number} [SuperMap.ThemeRangeItem.prototype.start=0]
     * @description åæ®µä¸é¢å¾å­é¡¹çèµ·å§å¼ï¼å³è¯¥æ®µä¸é¢å¼èå´çæå°å¼ã<br>
     *              å¦æè¯¥å­é¡¹æ¯åæ®µä¸­ç¬¬ä¸ä¸ªå­é¡¹ï¼é£ä¹è¯¥èµ·å§å¼å°±æ¯åæ®µçæå°å¼ï¼å¦æå­é¡¹çåºå·å¤§äºç­äº 1 çæ¶åï¼è¯¥èµ·å§å¼å¿é¡»ä¸åä¸å­é¡¹çç»æ­¢å¼ç¸åï¼å¦åç³»ç»ä¼æåºå¼å¸¸ã
     *              å¦æè®¾ç½®äºèå´åæ®µæ¨¡å¼ååæ®µæ°ï¼åä¼èªå¨è®¡ç®æ¯æ®µçèå´ [start, end)ï¼ææ éè®¾ç½® [start, end)ï¼å½ç¶å¯ä»¥è®¾ç½®ï¼é£ä¹ç»æå°±ä¼ææ¨è®¾ç½®çå¼å¯¹åæ®µç»æè¿è¡è°æ´ã
     */

    this.start = 0;
    /**
     * @member {SuperMap.ServerStyle} SuperMap.ThemeRangeItem.prototype.style
     * @description åæ®µä¸é¢å¾å­é¡¹çé£æ ¼ã
     *              æ¯ä¸ä¸ªåæ®µä¸é¢å¾å­é¡¹é½å¯¹åºä¸ç§æ¾ç¤ºé£æ ¼ã
     */

    this.style = new ServerStyle();
    /**
     * @member {boolean} [SuperMap.ThemeRangeItem.prototype.visible=true]
     * @description åæ®µä¸é¢å¾å­é¡¹æ¯å¦å¯è§ã
     */

    this.visible = true;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ThemeRangeItem";
  }
  /**
   * @function SuperMap.ThemeRangeItem.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThemeRangeItem_createClass(ThemeRangeItem, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.caption = null;
      me.end = null;
      me.start = null;

      if (me.style) {
        me.style.destroy();
        me.style = null;
      }

      me.visible = null;
    }
    /**
     * @function SuperMap.ThemeRangeItem.prototypetoServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     * @returns {Object} å¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      var obj = {};
      obj = Util.copyAttributes(obj, this);

      if (obj.style) {
        if (obj.style.toServerJSONObject) {
          obj.style = obj.style.toServerJSONObject();
        }
      }

      return obj;
    }
    /**
     * @function SuperMap.ThemeRangeItem.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·åèå´åæ®µä¸é¢å¾å­é¡¹ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeRangeItem} ThemeRangeItem å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      if (!obj) {
        return;
      }

      var res = new ThemeRangeItem();
      Util.copy(res, obj);
      res.style = ServerStyle.fromJson(obj.style);
      return res;
    }
  }]);

  return ThemeRangeItem;
}();
SuperMap.ThemeRangeItem = ThemeRangeItem;
// CONCATENATED MODULE: ./src/common/iServer/ThemeRange.js
function ThemeRange_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { ThemeRange_typeof = function _typeof(obj) { return typeof obj; }; } else { ThemeRange_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return ThemeRange_typeof(obj); }

function ThemeRange_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeRange_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeRange_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeRange_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeRange_defineProperties(Constructor, staticProps); return Constructor; }

function ThemeRange_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { ThemeRange_get = Reflect.get; } else { ThemeRange_get = function _get(target, property, receiver) { var base = ThemeRange_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return ThemeRange_get(target, property, receiver || target); }

function ThemeRange_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = ThemeRange_getPrototypeOf(object); if (object === null) break; } return object; }

function ThemeRange_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) ThemeRange_setPrototypeOf(subClass, superClass); }

function ThemeRange_setPrototypeOf(o, p) { ThemeRange_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return ThemeRange_setPrototypeOf(o, p); }

function ThemeRange_createSuper(Derived) { var hasNativeReflectConstruct = ThemeRange_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = ThemeRange_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = ThemeRange_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return ThemeRange_possibleConstructorReturn(this, result); }; }

function ThemeRange_possibleConstructorReturn(self, call) { if (call && (ThemeRange_typeof(call) === "object" || typeof call === "function")) { return call; } return ThemeRange_assertThisInitialized(self); }

function ThemeRange_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function ThemeRange_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ThemeRange_getPrototypeOf(o) { ThemeRange_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return ThemeRange_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.ThemeRange
 * @category  iServer Map Theme
 * @classdesc èå´åæ®µä¸é¢å¾ã
 * @description èå´åæ®µä¸é¢å¾æ¯æç§æå®çåæ®µæ¹æ³ï¼å¦ï¼ç­è·ç¦»åæ®µæ³ï¼å¯¹å­æ®µçå±æ§å¼è¿è¡åæ®µï¼ä½¿ç¨ä¸åçé¢è²æç¬¦å·ï¼çº¿åãå¡«åï¼è¡¨ç¤ºä¸åèå´æ®µè½çå±æ§å¼å¨æ´ä½ä¸çåå¸æåµï¼ä½ç°åºåçå·®å¼ã
 *              å¨åæ®µä¸é¢å¾ä¸­ï¼ä¸é¢å¼æç§æç§åæ®µæ¹å¼è¢«åæå¤ä¸ªèå´æ®µï¼è¦ç´ æ ¹æ®åèªçä¸é¢å¼è¢«åéå°å¶ä¸­ä¸ä¸ªèå´æ®µä¸­ï¼å¨åä¸ä¸ªèå´æ®µä¸­çè¦ç´ ä½¿ç¨ç¸åçé¢è²ï¼å¡«åï¼ç¬¦å·ç­é£æ ¼è¿è¡æ¾ç¤ºã
 *              åæ®µä¸é¢å¾æåºäºçä¸é¢åéå¿é¡»ä¸ºæ°å¼åï¼åæ®µä¸é¢å¾ä¸è¬ç¨æ¥åæ è¿ç»­åå¸ç°è±¡çæ°éæç¨åº¦ç¹å¾ï¼å¦éæ°´éçåå¸ï¼åå£¤ä¾µèå¼ºåº¦çåå¸ç­ã
 * @extends {SuperMap.Theme}
 * @param {Object} options - åæ°ã
 * @param {Array.<SuperMap.ThemeRangeItem>} options.items - åæ®µä¸é¢å¾å­é¡¹æ°ç»ã
 * @param {string} options.rangeExpression - åæ®µå­æ®µè¡¨è¾¾å¼ã
 * @param {number} options.rangeParameter - åæ®µåæ°ã
 * @param {number} options.rangeParameter - åæ®µåæ°ã
 * @param {SuperMap.RangeMode} [options.rangeMode=SuperMap.RangeMode.EQUALINTERVAL] - åæ®µä¸é¢å¾çåæ®µæ¨¡å¼ã
 * @param {SuperMap.ColorGradientType} [options.colorGradientType=SuperMap.ColorGradientType.YELLOW_RED] - æ¸åé¢è²æä¸¾ç±»ã
 * @param {SuperMap.ThemeMemoryData} [options.memoryData] - ä¸é¢å¾åå­æ°æ®ã
 */

var ThemeRange = /*#__PURE__*/function (_Theme) {
  ThemeRange_inherits(ThemeRange, _Theme);

  var _super = ThemeRange_createSuper(ThemeRange);

  function ThemeRange(options) {
    var _this;

    ThemeRange_classCallCheck(this, ThemeRange);

    _this = _super.call(this, "RANGE", options);
    /**
     * @member {string} SuperMap.ThemeRange.prototype.precision
     * @description ç²¾ååº¦
     */

    _this.precision = '1.0E-12';
    /**
     * @member {Array.<SuperMap.ThemeRangeItem>} SuperMap.ThemeRange.prototype.items
     * @description åæ®µä¸é¢å¾å­é¡¹æ°ç»ã<br>
     *              å¨åæ®µä¸é¢å¾ä¸­ï¼å­æ®µå¼æç§æç§åæ®µæ¨¡å¼è¢«åæå¤ä¸ªèå´æ®µï¼æ¯ä¸ªèå´æ®µå³ä¸ºä¸ä¸ªå­é¡¹ï¼åä¸èå´æ®µçè¦ç´ å±äºåä¸ä¸ªåæ®µä¸é¢å¾å­é¡¹ã
     *              æ¯ä¸ªå­é¡¹é½æå¶åæ®µèµ·å§å¼ãç»æ­¢å¼ãåç§°åé£æ ¼ç­ãæ¯ä¸ªåæ®µæè¡¨ç¤ºçèå´ä¸º [start, end)ã
     *              å¦æè®¾ç½®äºèå´åæ®µæ¨¡å¼ååæ®µæ°ï¼åä¼èªå¨è®¡ç®æ¯æ®µçèå´ [start, end)ï¼ææ éè®¾ç½® [start, end)ï¼å½ç¶å¯ä»¥è®¾ç½®ï¼é£ä¹ç»æå°±ä¼æç§æ¨è®¾ç½®çå¼å¯¹åæ®µç»æè¿è¡è°æ´ã
     */

    _this.items = null;
    /**
     * @member {string} SuperMap.ThemeRange.prototype.rangeExpression
     * @description åæ®µå­æ®µè¡¨è¾¾å¼ã<br>
     *              ç±äºèå´åæ®µä¸é¢å¾åºäºåç§åæ®µæ¹æ³æ ¹æ®ä¸å®çè·ç¦»è¿è¡åæ®µï¼å èèå´åæ®µä¸é¢å¾æåºäºçå­æ®µå¼çæ°æ®ç±»åå¿é¡»ä¸ºæ°å¼åãå¯¹äºå­æ®µè¡¨è¾¾å¼ï¼åªè½ä¸ºæ°å¼åçå­æ®µé´çè¿ç®ã
     */

    _this.rangeExpression = null;
    /**
     * @member {SuperMap.RangeMode} [SuperMap.ThemeRange.prototype.rangeMode=SuperMap.RangeMode.EQUALINTERVAL]
     * @description åæ®µä¸é¢å¾çåæ®µæ¨¡å¼ã<br>
     *              å¨åæ®µä¸é¢å¾ä¸­ï¼ä½ä¸ºä¸é¢åéçå­æ®µæè¡¨è¾¾å¼çå¼æç§æç§åæ®µæ¹å¼è¢«åæå¤ä¸ªèå´æ®µã
     *              ç®å SuperMap æä¾çåæ®µæ¹å¼åæ¬ï¼ç­è·ç¦»åæ®µæ³ãå¹³æ¹æ ¹åæ®µæ³ãæ åå·®åæ®µæ³ãå¯¹æ°åæ®µæ³ãç­è®¡æ°åæ®µæ³åèªå®ä¹è·ç¦»æ³ï¼
     *              æ¾ç¶è¿äºåæ®µæ¹æ³æ ¹æ®ä¸å®çè·ç¦»è¿è¡åæ®µï¼å èèå´åæ®µä¸é¢å¾æåºäºçä¸é¢åéå¿é¡»ä¸ºæ°å¼åã
     */

    _this.rangeMode = RangeMode.EQUALINTERVAL;
    /**
     * @member {number} SuperMap.ThemeRange.prototype.rangeParameter
     * @description åæ®µåæ°ã
     *              å½åæ®µæ¨¡å¼ä¸ºç­è·ç¦»åæ®µæ³ï¼å¹³æ¹æ ¹åæ®µï¼å¯¹æ°åæ®µæ³ï¼è®¡æ°åæ®µæ³å¶ä¸­ä¸ç§æ¨¡å¼æ¶ï¼è¯¥åæ°ç¨äºè®¾ç½®åæ®µä¸ªæ°ï¼å½åæ®µæ¨¡å¼ä¸ºæ åå·®åæ®µæ³æ¶ï¼
     *              è¯¥åæ°ä¸èµ·ä½ç¨ï¼å½åæ®µæ¨¡å¼ä¸ºèªå®ä¹è·ç¦»æ¶ï¼è¯¥åæ°ç¨äºè®¾ç½®èªå®ä¹è·ç¦»ã
     */

    _this.rangeParameter = 0;
    /**
     * @member {SuperMap.ColorGradientType} [SuperMap.ThemeRange.prototype.colorGradientType=SuperMap.ColorGradientType.YELLOW_RED]
     * @description æ¸åé¢è²æä¸¾ç±»ã<br>
     *              æ¸åè²æ¯ç±èµ·å§è²æ ¹æ®ä¸å®ç®æ³éæ¸è¿æ¸¡å°ç»æ­¢è²çä¸ç§æ··ååé¢è²ã
     *              è¯¥ç±»ä½ä¸ºåå¼ä¸é¢å¾åæ°ç±»ãåæ®µä¸é¢å¾åæ°ç±»çå±æ§ï¼è´è´£è®¾ç½®åå¼ä¸é¢å¾ãåæ®µä¸é¢å¾çéè²æ¹æ¡ï¼å¨é»è®¤æåµä¸ä¸é¢å¾ææå­é¡¹ä¼æ ¹æ®è¿ä¸ªéè²
     *              æ¹æ¡å®æå¡«*åãä½å¦æä¸ºæå ä¸ªå­é¡¹çé£æ ¼è¿è¡åç¬è®¾ç½®åï¼è®¾ç½®äº {@link SuperMap.ThemeUniqueItem} æ {@link SuperMap.ThemeRangeItem} ç±»ä¸­Styleå±æ§ï¼ï¼
     *              è¯¥éè²æ¹æ¡å¯¹äºè¿å ä¸ªå­é¡¹å°ä¸èµ·ä½ç¨ã
     */

    _this.colorGradientType = ColorGradientType.YELLOW_RED;

    if (options) {
      Util.extend(ThemeRange_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.ThemeRange";
    return _this;
  }
  /**
   * @function SuperMap.ThemeRange.prototype.destroy
   * @override
   */


  ThemeRange_createClass(ThemeRange, [{
    key: "destroy",
    value: function destroy() {
      ThemeRange_get(ThemeRange_getPrototypeOf(ThemeRange.prototype), "destroy", this).call(this);

      var me = this;

      if (me.items) {
        if (me.items.length > 0) {
          for (var item in me.items) {
            me.items[item].destroy();
            me.items[item] = null;
          }
        }

        me.items = null;
      }

      me.rangeExpression = null;
      me.rangeMode = null;
      me.rangeParameter = null;
      me.colorGradientType = null;
    }
    /**
     * @function SuperMap.ThemeRange.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·åèå´åæ®µä¸é¢å¾ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeRange} ThemeRange å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      if (!obj) {
        return;
      }

      var res = new ThemeRange();
      Util.copy(res, obj);
      var itemsR = obj.items;
      var len = itemsR ? itemsR.length : 0;
      res.items = [];

      for (var i = 0; i < len; i++) {
        res.items.push(ThemeRangeItem.fromObj(itemsR[i]));
      }

      return res;
    }
  }]);

  return ThemeRange;
}(Theme);
SuperMap.ThemeRange = ThemeRange;
// CONCATENATED MODULE: ./src/common/iServer/UGCLayer.js
function UGCLayer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function UGCLayer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function UGCLayer_createClass(Constructor, protoProps, staticProps) { if (protoProps) UGCLayer_defineProperties(Constructor.prototype, protoProps); if (staticProps) UGCLayer_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.UGCLayer
 * @category  iServer Map Layer
 * @classdesc UGC å¾å±ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {SuperMap.Bounds} options.bounds - å¾å±èå´ã 
 * @param {string} options.name - å¾å±çåç§°ã 
 * @param {SuperMap.UGCLayerType} options.type  - å¾å±ç±»å 
 * @param {string} [options.caption] - å¾å±çæ é¢ã 
 * @param {string} [options.description] - å¾å±çæè¿°ä¿¡æ¯ã 
 * @param {boolean} [options.queryable] - å¾å±ä¸­çå¯¹è±¡æ¯å¦å¯ä»¥æ¥è¯¢ã
 * @param {boolean} [options.subUGCLayers] - æ¯å¦åè®¸å¾å±çç¬¦å·å¤§å°éå¾ç¼©æ¾ã 
 * @param {boolean} [options.visible=false] - å°å¾å¯¹è±¡å¨åä¸èå´åæ¶ï¼æ¯å¦éå æ¾ç¤ºã
 */

var UGCLayer = /*#__PURE__*/function () {
  function UGCLayer(options) {
    UGCLayer_classCallCheck(this, UGCLayer);

    options = options || {};
    /**
     * @member {SuperMap.Bounds} SuperMap.UGCLayer.prototype.bounds
     * @description å¾å±èå´ã
     */

    this.bounds = null;
    /**
     * @member {string} [SuperMap.UGCLayer.prototype.caption]
     * @description å¾å±çæ é¢ãé»è®¤æåµä¸å¾å±çæ é¢ä¸å¾å±çåç§°ä¸è´ãå¨å¾ä¾ãå¾å±æ§å¶åè¡¨ä¸­æ¾ç¤ºçå¾å±åç§°å°±æ¯è¯¥å¾å±çæ é¢å¼ã
     */

    this.caption = null;
    /**
     * @member {string} SuperMap.UGCLayer.prototype.description
     * @description å¾å±çæè¿°ä¿¡æ¯ã
     */

    this.description = null;
    /**
     * @member {string} SuperMap.UGCLayer.prototype.name
     * @description å¾å±çåç§°ãå¾å±çåç§°å¨å¾å±æå¨çå°å¾ä¸­å¯ä¸æ è¯æ­¤å¾å±ãè¯¥å±æ§åºåå¤§å°åã
     */

    this.name = null;
    /**
     * @member {boolean} SuperMap.UGCLayer.prototype.queryable
     * @description å¾å±ä¸­çå¯¹è±¡æ¯å¦å¯ä»¥æ¥è¯¢ã
     */

    this.queryable = null;
    /**
     * @member {Array} SuperMap.UGCLayer.prototype.subLayers
     * @description å­å¾å±éã
     */

    this.subLayers = null;
    /**
     * @member {SuperMap.UGCLayerType} SuperMap.UGCLayer.prototype.type
     * @description å¾å±ç±»åã
     */

    this.type = null;
    /**
     * @member {boolean} SuperMap.UGCLayer.prototype.visible
     * @description å°å¾å¯¹è±¡å¨åä¸èå´åæ¶ï¼æ¯å¦éå æ¾ç¤ºã
     */

    this.visible = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.UGCLayer";
  }
  /**
   * @function SuperMap.UGCLayer.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  UGCLayer_createClass(UGCLayer, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      Util.reset(me);
    }
    /**
     * @function SuperMap.UGCLayer.prototype.fromJson
     * @description å°æå¡ç«¯ JSON å¯¹è±¡è½¬æ¢æå½åå®¢æ·ç«¯å¯¹è±¡ã
     * @param {Object} jsonObject - è¦è½¬æ¢ç JSON å¯¹è±¡ã
     */

  }, {
    key: "fromJson",
    value: function fromJson(jsonObject) {
      jsonObject = jsonObject ? jsonObject : {};
      Util.extend(this, jsonObject);
      var b = this.bounds;

      if (b) {
        this.bounds = new Bounds(b.leftBottom.x, b.leftBottom.y, b.rightTop.x, b.rightTop.y);
      }
    }
    /**
     * @function SuperMap.UGCLayer.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     * @returns {Object} å¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      var jsonObject = {};
      jsonObject = Util.copyAttributes(jsonObject, this);

      if (jsonObject.bounds) {
        if (jsonObject.bounds.toServerJSONObject) {
          jsonObject.bounds = jsonObject.bounds.toServerJSONObject();
        }
      }

      return jsonObject;
    }
  }]);

  return UGCLayer;
}();
SuperMap.UGCLayer = UGCLayer;
// CONCATENATED MODULE: ./src/common/iServer/OverlapDisplayedOptions.js
function OverlapDisplayedOptions_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function OverlapDisplayedOptions_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function OverlapDisplayedOptions_createClass(Constructor, protoProps, staticProps) { if (protoProps) OverlapDisplayedOptions_defineProperties(Constructor.prototype, protoProps); if (staticProps) OverlapDisplayedOptions_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.OverlapDisplayedOptions
 * @category iServer Map Layer
 * @classdesc å°å¾åçè¿æ»¤æ¾ç¤ºéé¡¹ã
 * @description å¨ææ¬æä¸é¢å¾åç´ æ¾ç¤ºè¾å¯éçåºåï¼ææ¬ä¹é´æä¸é¢åç´ ä¹é´ä¼åçç¸äºåççç°è±¡ï¼
 * è¯¥ç±»å¯ä»¥åå«æ§å¶åç§ç±»åçå¯¹è±¡çåçæ¾ç¤ºæåµï¼è¿èå¾å¥½å°å¤çå°å¾ä¸­åç§ç±»åå¯¹è±¡çåçæ¾ç¤ºé®é¢ã
 * @param {Object} options - åæ°ã
 * @param {boolean} [options.allowPointOverlap=true] - ç¹åç¹åçæ¶æ¯å¦æ¾ç¤ºåççç¹å¯¹è±¡ã
 * @param {boolean} [options.allowPointWithTextDisplay=true] - æ ç­¾åç¸åºæ®éå¾å±ä¸çç¹æ¯å¦ä¸èµ·è¿æ»¤æ¾ç¤º,å¦æè¿æ»¤æ¾ç¤ºï¼
 *                                                             åªä»¥å¾å±éåä¸­å¯¹åºæ°æ®éçç´¢å¼æå°çå¾å±çç¹é£æ ¼æ¥ç»å¶ç¹ã
 * @param {boolean} [options.allowTextOverlap=false] - ææ¬åçæ¶æ¯å¦æ¾ç¤ºåççææ¬å¯¹è±¡ã
 * @param {boolean} [options.allowTextAndPointOverlap=true] - ææ¬åç¹åçæ¶æ¯å¦æ¾ç¤ºåççææ¬æç¹å¯¹è±¡ï¼æ­¤å±æ§ä¸å¤çææ¬ä¹é´çåçåç¹ä¹é´çåçï¼ã
 * @param {boolean} [options.allowThemeGraduatedSymbolOverlap=false] - ç­çº§ç¬¦å·åç´ åçæ¶æ¯å¦æ¾ç¤ºåççç­çº§ç¬¦å·åç´ ã
 * @param {boolean} [options.allowThemeGraphOverlap=false] - ç»è®¡ä¸é¢å¾åç´ åçæ¶æ¯å¦æ¾ç¤ºåççç»è®¡ä¸é¢å¾åç´ ã
 * @param {number} [options.horizontalOverlappedSpaceSize=0] - ä¸¤ä¸ªå¯¹è±¡ä¹é´çæ¨ªååçé´è·ï¼åä½ä¸º 0.1 æ¯«ç±³ï¼è· verticalOverlappedSpaceSize ç»åä½¿ç¨ï¼
 *                                                             å½ä¸¤ä¸ªå¯¹è±¡çæ¨ªåé´è·å°äºè¯¥å¼ï¼ä¸çºµåé´è·å°äº verticalOverlappedSpaceSize æ¶è®¤ä¸ºåçã
 * @param {number} [options.verticalOverlappedSpaceSize=0] - ä¸¤ä¸ªå¯¹è±¡ä¹é´ççºµååçé´è·ï¼åä½ä¸º 0.1 æ¯«ç±³ï¼è· horizontalOverlappedSpaceSize ç»åä½¿ç¨ï¼
 *                                                           å½ä¸¤ä¸ªå¯¹è±¡ççºµåé´è·å°äºè¯¥å¼ï¼ä¸æ¨ªåé´è·å°äº horizontalOverlappedSpaceSize æ¶è®¤ä¸ºåçã
 */

var OverlapDisplayedOptions = /*#__PURE__*/function () {
  function OverlapDisplayedOptions(options) {
    OverlapDisplayedOptions_classCallCheck(this, OverlapDisplayedOptions);

    options = options || {};
    /**
     * @member {boolean} [SuperMap.OverlapDisplayedOptions.prototype.allowPointOverlap=true]
     * @description ç¹åç¹åçæ¶æ¯å¦æ¾ç¤ºåççç¹å¯¹è±¡ã
     */

    this.allowPointOverlap = true;
    /**
     * @member {boolean} [SuperMap.OverlapDisplayedOptions.prototype.allowPointWithTextDisplay=true]
     * @description æ ç­¾åç¸åºæ®éå¾å±ä¸çç¹æ¯å¦ä¸èµ·è¿æ»¤æ¾ç¤ºï¼å¦æè¿æ»¤æ¾ç¤ºï¼
     * åªä»¥å¾å±éåä¸­å¯¹åºæ°æ®éçç´¢å¼æå°çå¾å±çç¹é£æ ¼æ¥ç»å¶ç¹ã
     */

    this.allowPointWithTextDisplay = true;
    /**
     * @member {boolean} [SuperMap.OverlapDisplayedOptions.prototype.allowTextOverlap=false]
     * @description ææ¬åçæ¶æ¯å¦æ¾ç¤ºåççææ¬å¯¹è±¡ã
     */

    this.allowTextOverlap = false;
    /**
     * @member {boolean} [SuperMap.OverlapDisplayedOptions.prototype.allowTextAndPointOverlap=true]
     * @description  ææ¬åç¹åçæ¶æ¯å¦æ¾ç¤ºåççææ¬æç¹å¯¹è±¡ï¼æ­¤å±æ§ä¸å¤çææ¬ä¹é´çåçåç¹ä¹é´çåçï¼ã
     */

    this.allowTextAndPointOverlap = true;
    /**
     * @member {boolean} [SuperMap.OverlapDisplayedOptions.prototype.allowThemeGraduatedSymbolOverlap=false]
     * @description ç­çº§ç¬¦å·åç´ åçæ¶æ¯å¦æ¾ç¤ºåççç­çº§ç¬¦å·åç´ ã
     */

    this.allowThemeGraduatedSymbolOverlap = false;
    /**
     * @member {boolean} [SuperMap.OverlapDisplayedOptions.prototype.allowThemeGraphOverlap=false]
     * @description ç»è®¡ä¸é¢å¾åç´ åçæ¶æ¯å¦æ¾ç¤ºåççç»è®¡ä¸é¢å¾åç´ ã
     */

    this.allowThemeGraphOverlap = false;
    /**
     * @member {number} [SuperMap.OverlapDisplayedOptions.prototype.horizontalOverlappedSpaceSize=0]
     * @description ä¸¤ä¸ªå¯¹è±¡ä¹é´çæ¨ªååçé´è·ï¼åä½ä¸º0.1æ¯«ç±³ï¼è· verticalOverlappedSpaceSize ç»åä½¿ç¨ï¼
     * å½ä¸¤ä¸ªå¯¹è±¡çæ¨ªåé´è·å°äºè¯¥å¼ï¼ä¸çºµåé´è·å°äº verticalOverlappedSpaceSize æ¶è®¤ä¸ºåçã
     */

    this.horizontalOverlappedSpaceSize = 0;
    /**
     * @member {number} [SuperMap.OverlapDisplayedOptions.prototype.verticalOverlappedSpaceSize=0]
     * @description ä¸¤ä¸ªå¯¹è±¡ä¹é´ççºµååçé´è·ï¼åä½ä¸º0.1æ¯«ç±³ï¼è· horizontalOverlappedSpaceSize ç»åä½¿ç¨ï¼
     * å½ä¸¤ä¸ªå¯¹è±¡ççºµåé´è·å°äºè¯¥å¼ï¼ä¸æ¨ªåé´è·å°äº horizontalOverlappedSpaceSize æ¶è®¤ä¸ºåçã
     */

    this.verticalOverlappedSpaceSize = 0;
    Util.extend(this, options);
    this.ugcLayer = new UGCLayer(options);
    this.CLASS_NAME = "SuperMap.OverlapDisplayedOptions";
  }
  /**
   * @function SuperMap.OverlapDisplayedOptions.prototype.destroy
   * @description éæ¾èµæºï¼å°èµæºçå±æ§ç½®ç©ºã
   */


  OverlapDisplayedOptions_createClass(OverlapDisplayedOptions, [{
    key: "destroy",
    value: function destroy() {
      Util.reset(this);
    }
    /**
     * @function SuperMap.OverlapDisplayedOptions.prototype.fromJson
     * @description å°æå¡ç«¯ JSON å¯¹è±¡è½¬æ¢æå½åå®¢æ·ç«¯å¯¹è±¡ã
     * @param {Object} jsonObject - è¦è½¬æ¢ç JSON å¯¹è±¡ã
     */

  }, {
    key: "fromJson",
    value: function fromJson(jsonObject) {
      this.ugcLayer.fromJson.apply(this, [jsonObject]);
    }
    /**
     * @function SuperMap.OverlapDisplayedOptions.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     * @returns {Object} å¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      var jsonObject = this.ugcLayer.toServerJSONObject.apply(this, arguments);
      return jsonObject;
    }
    /**
     * @function SuperMap.OverlapDisplayedOptions.prototype.toString
     * @description è½¬æ¢æå¯¹åºç tileLayer è¯·æ±ç¦çæ¶ overlapDisplayedOptions åæ°ã
     * @returns {string} å¯¹åºç tileLayer è¯·æ±ç¦çæ¶ overlapDisplayedOptions åæ°ã
     */

  }, {
    key: "toString",
    value: function toString() {
      var jsonObject = this.ugcLayer.toServerJSONObject.apply(this, arguments);
      var str = "{";

      for (var attr in jsonObject) {
        if (jsonObject.hasOwnProperty(attr)) {
          str += "'" + attr + "':" + jsonObject[attr] + ",";
        }
      }

      str = str.substr(0, str.length - 1);
      str += "}";
      return str;
    }
  }]);

  return OverlapDisplayedOptions;
}();
SuperMap.OverlapDisplayedOptions = OverlapDisplayedOptions;
// CONCATENATED MODULE: ./src/common/iServer/UGCMapLayer.js
function UGCMapLayer_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { UGCMapLayer_typeof = function _typeof(obj) { return typeof obj; }; } else { UGCMapLayer_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return UGCMapLayer_typeof(obj); }

function UGCMapLayer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function UGCMapLayer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function UGCMapLayer_createClass(Constructor, protoProps, staticProps) { if (protoProps) UGCMapLayer_defineProperties(Constructor.prototype, protoProps); if (staticProps) UGCMapLayer_defineProperties(Constructor, staticProps); return Constructor; }

function UGCMapLayer_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { UGCMapLayer_get = Reflect.get; } else { UGCMapLayer_get = function _get(target, property, receiver) { var base = UGCMapLayer_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return UGCMapLayer_get(target, property, receiver || target); }

function UGCMapLayer_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = UGCMapLayer_getPrototypeOf(object); if (object === null) break; } return object; }

function UGCMapLayer_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) UGCMapLayer_setPrototypeOf(subClass, superClass); }

function UGCMapLayer_setPrototypeOf(o, p) { UGCMapLayer_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return UGCMapLayer_setPrototypeOf(o, p); }

function UGCMapLayer_createSuper(Derived) { var hasNativeReflectConstruct = UGCMapLayer_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = UGCMapLayer_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = UGCMapLayer_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return UGCMapLayer_possibleConstructorReturn(this, result); }; }

function UGCMapLayer_possibleConstructorReturn(self, call) { if (call && (UGCMapLayer_typeof(call) === "object" || typeof call === "function")) { return call; } return UGCMapLayer_assertThisInitialized(self); }

function UGCMapLayer_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function UGCMapLayer_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function UGCMapLayer_getPrototypeOf(o) { UGCMapLayer_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return UGCMapLayer_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.UGCMapLayer
 * @category  iServer Map Layer
 * @classdesc UGC å°å¾å¾å±ç±»ã
 * @extends {SuperMap.UGCLayer}
 * @param {Object} options - åæ°ã 
 * @param {boolean} [options.completeLineSymbolDisplayed] - æ¯å¦æ¾ç¤ºå®æ´çº¿åã 
 * @param {number} [options.maxScale] - å°å¾æå¤§æ¯ä¾å°ºã 
 * @param {number} [options.minScale] - å°å¾æå°æ¯ä¾å°ºã 
 * @param {number} [options.minVisibleGeometrySize] - å ä½å¯¹è±¡çæå°å¯è§å¤§å°ï¼ä»¥åç´ ä¸ºåä½ã 
 * @param {number} [options.opaqueRate] - å¾å±çä¸éæåº¦ã 
 * @param {boolean} [options.symbolScalable] - æ¯å¦åè®¸å¾å±çç¬¦å·å¤§å°éå¾ç¼©æ¾ã 
 * @param {number} [options.symbolScale] - å¾å±çç¬¦å·ç¼©æ¾åºåæ¯ä¾å°ºã 
 * @param {boolean} [options.overlapDisplayed=false] - å°å¾å¯¹è±¡å¨åä¸èå´åæ¶ï¼æ¯å¦éå æ¾ç¤ºã 
 * @param {SuperMap.OverlapDisplayedOptions} [options.overlapDisplayedOptions] - å°å¾çåçè¿æ»¤æ¾ç¤ºéé¡¹ï¼å½overlapDisplayed ä¸º false æ¶ææã
 */

var UGCMapLayer = /*#__PURE__*/function (_UGCLayer) {
  UGCMapLayer_inherits(UGCMapLayer, _UGCLayer);

  var _super = UGCMapLayer_createSuper(UGCMapLayer);

  function UGCMapLayer(options) {
    var _this;

    UGCMapLayer_classCallCheck(this, UGCMapLayer);

    options = options || {};
    _this = _super.call(this, options);
    /**
     * @member {boolean} SuperMap.UGCMapLayer.prototype.completeLineSymbolDisplayed
     * @description æ¯å¦æ¾ç¤ºå®æ´çº¿åã
     */

    _this.completeLineSymbolDisplayed = null;
    /**
     * @member {number} SuperMap.UGCMapLayer.prototype.maxScale
     * @description å°å¾æå¤§æ¯ä¾å°ºã
     */

    _this.maxScale = null;
    /**
     * @member {number} SuperMap.UGCMapLayer.prototype.minScale
     * @description å°å¾æå°æ¯ä¾å°ºã
     */

    _this.minScale = null;
    /**
     * @member {number} SuperMap.UGCMapLayer.prototype.minVisibleGeometrySize
     * @description å ä½å¯¹è±¡çæå°å¯è§å¤§å°ï¼ä»¥åç´ ä¸ºåä½ã
     */

    _this.minVisibleGeometrySize = null;
    /**
     * @member {number} SuperMap.UGCMapLayer.prototype.opaqueRate
     * @description å¾å±çä¸éæåº¦ã
     */

    _this.opaqueRate = null;
    /**
     * @member {boolean} SuperMap.UGCMapLayer.prototype.symbolScalable
     * @description æ¯å¦åè®¸å¾å±çç¬¦å·å¤§å°éå¾ç¼©æ¾ã
     */

    _this.symbolScalable = null;
    /**
     * @member {number} SuperMap.UGCMapLayer.prototype.symbolScale
     * @description å¾å±çç¬¦å·ç¼©æ¾åºåæ¯ä¾å°ºã
     */

    _this.symbolScale = null;
    /**
     * @member {boolean} [SuperMap.UGCMapLayer.prototype.overlapDisplayed=false]
     * @description å°å¾å¯¹è±¡å¨åä¸èå´åæ¶ï¼æ¯å¦éå æ¾ç¤ºã
     */

    _this.overlapDisplayed = null;
    /**
     * @member {SuperMap.OverlapDisplayedOptions} SuperMap.UGCMapLayer.prototype.overlapDisplayedOptions
     * @description å°å¾çåçè¿æ»¤æ¾ç¤ºéé¡¹ï¼å½ overlapDisplayed ä¸º false æ¶ææã
     */

    _this.overlapDisplayedOptions = null;
    _this.CLASS_NAME = "SuperMap.UGCMapLayer";
    return _this;
  }
  /**
   * @function SuperMap.UGCMapLayer.prototype.destroy
   * @override
   */


  UGCMapLayer_createClass(UGCMapLayer, [{
    key: "destroy",
    value: function destroy() {
      UGCMapLayer_get(UGCMapLayer_getPrototypeOf(UGCMapLayer.prototype), "destroy", this).call(this);

      Util.reset(this);
    }
    /**
     * @function SuperMap.UGCMapLayer.prototype.fromJson
     * @description å°æå¡ç«¯ JSON å¯¹è±¡è½¬æ¢æå½åå®¢æ·ç«¯å¯¹è±¡
     * @param {Object} jsonObject - è¦è½¬æ¢ç JSON å¯¹è±¡ã
     */

  }, {
    key: "fromJson",
    value: function fromJson(jsonObject) {
      UGCMapLayer_get(UGCMapLayer_getPrototypeOf(UGCMapLayer.prototype), "fromJson", this).call(this, jsonObject);
    }
    /**
     * @function SuperMap.UGCMapLayer.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     * @returns {Object} å¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      return UGCMapLayer_get(UGCMapLayer_getPrototypeOf(UGCMapLayer.prototype), "toServerJSONObject", this).call(this);
    }
  }]);

  return UGCMapLayer;
}(UGCLayer);
SuperMap.UGCMapLayer = UGCMapLayer;
// CONCATENATED MODULE: ./src/common/iServer/UGCSubLayer.js
function UGCSubLayer_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { UGCSubLayer_typeof = function _typeof(obj) { return typeof obj; }; } else { UGCSubLayer_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return UGCSubLayer_typeof(obj); }

function UGCSubLayer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function UGCSubLayer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function UGCSubLayer_createClass(Constructor, protoProps, staticProps) { if (protoProps) UGCSubLayer_defineProperties(Constructor.prototype, protoProps); if (staticProps) UGCSubLayer_defineProperties(Constructor, staticProps); return Constructor; }

function UGCSubLayer_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { UGCSubLayer_get = Reflect.get; } else { UGCSubLayer_get = function _get(target, property, receiver) { var base = UGCSubLayer_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return UGCSubLayer_get(target, property, receiver || target); }

function UGCSubLayer_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = UGCSubLayer_getPrototypeOf(object); if (object === null) break; } return object; }

function UGCSubLayer_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) UGCSubLayer_setPrototypeOf(subClass, superClass); }

function UGCSubLayer_setPrototypeOf(o, p) { UGCSubLayer_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return UGCSubLayer_setPrototypeOf(o, p); }

function UGCSubLayer_createSuper(Derived) { var hasNativeReflectConstruct = UGCSubLayer_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = UGCSubLayer_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = UGCSubLayer_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return UGCSubLayer_possibleConstructorReturn(this, result); }; }

function UGCSubLayer_possibleConstructorReturn(self, call) { if (call && (UGCSubLayer_typeof(call) === "object" || typeof call === "function")) { return call; } return UGCSubLayer_assertThisInitialized(self); }

function UGCSubLayer_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function UGCSubLayer_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function UGCSubLayer_getPrototypeOf(o) { UGCSubLayer_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return UGCSubLayer_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/






/**
 * @class SuperMap.UGCSubLayer
 * @category  iServer Map Layer
 * @classdesc å°å¾æå¡å¾å±å±æ§ä¿¡æ¯ç±»ãå½±åå¾å±ï¼Imageï¼ãä¸é¢å¾å±ï¼ServerThemeï¼ãæ æ ¼å¾å±ï¼Gridï¼ãç¢éå¾å±ï¼Vectorï¼ç­å¾å±åç»§æ¿è¯¥ç±»ã
 * @extends {SuperMap.UGCMapLayer}
 * @param {Object} options - åæ°ã 
 * @param {SuperMap.DatasetInfo} options.datasetInfo - æ°æ®éä¿¡æ¯ã 
 * @param {string} [options.displayFilter] - å¾å±æ¾ç¤ºè¿æ»¤æ¡ä»¶ã 
 * @param {SuperMap.JoinItem} [options.joinItems] - è¿æ¥ä¿¡æ¯ç±»ã 
 * @param {string} [options.representationField] - å­å¨å¶å¾è¡¨è¾¾ä¿¡æ¯çå­æ®µã 
 * @param {SuperMap.LayerType} [options.ugcLayerType] - å¾å±ç±»åã
 */

var UGCSubLayer = /*#__PURE__*/function (_UGCMapLayer) {
  UGCSubLayer_inherits(UGCSubLayer, _UGCMapLayer);

  var _super = UGCSubLayer_createSuper(UGCSubLayer);

  function UGCSubLayer(options) {
    var _this;

    UGCSubLayer_classCallCheck(this, UGCSubLayer);

    options = options || {};
    _this = _super.call(this, options);
    /**
     * @member {SuperMap.DatasetInfo} SuperMap.UGCSubLayer.prototype.datasetInfo
     * @description æ°æ®éä¿¡æ¯ã
     */

    _this.datasetInfo = null;
    /**
     * @member {string} SuperMap.UGCSubLayer.prototype.displayFilter
     * @description å¾å±æ¾ç¤ºè¿æ»¤æ¡ä»¶ã
     */

    _this.displayFilter = null;
    /**
     * @member {SuperMap.JoinItem} SuperMap.UGCSubLayer.prototype.joinItems
     * @description è¿æ¥ä¿¡æ¯ç±»ã
     */

    _this.joinItems = null;
    /**
     * @member {string} SuperMap.UGCSubLayer.prototype.representationField
     * @description å­å¨å¶å¾è¡¨è¾¾ä¿¡æ¯çå­æ®µã
     */

    _this.representationField = null;
    /**
     * @member {SuperMap.LayerType} SuperMap.UGCSubLayer.prototype.ugcLayerType
     * @description å¾å±ç±»åã
     */

    _this.ugcLayerType = null;
    _this.CLASS_NAME = "SuperMap.UGCSubLayer";
    return _this;
  }
  /**
   * @function SuperMap.UGCSubLayer.prototype.fromJson
   * @description å°æå¡ç«¯ JSON å¯¹è±¡è½¬æ¢æå½åå®¢æ·ç«¯å¯¹è±¡
   * @param {Object} jsonObject - è¦è½¬æ¢ç JSON å¯¹è±¡ã
   */


  UGCSubLayer_createClass(UGCSubLayer, [{
    key: "fromJson",
    value: function fromJson(jsonObject) {
      UGCSubLayer_get(UGCSubLayer_getPrototypeOf(UGCSubLayer.prototype), "fromJson", this).call(this, jsonObject);

      if (this.datasetInfo) {
        this.datasetInfo = new DatasetInfo(this.datasetInfo);
      }

      if (this.joinItems && this.joinItems.length) {
        var newJoinItems = [];

        for (var i = 0; i < this.joinItems.length; i++) {
          newJoinItems[i] = new JoinItem(this.joinItems[i]);
        }

        this.joinItems = newJoinItems;
      }
    }
    /**
     * @function SuperMap.UGCSubLayer.prototype.destroy
     * @override
     */

  }, {
    key: "destroy",
    value: function destroy() {
      UGCSubLayer_get(UGCSubLayer_getPrototypeOf(UGCSubLayer.prototype), "destroy", this).call(this);

      Util.reset(this);
    }
    /**
     * @function SuperMap.UGCSubLayer.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     * @returns {Object} å¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      var jsonObject = UGCSubLayer_get(UGCSubLayer_getPrototypeOf(UGCSubLayer.prototype), "toServerJSONObject", this).call(this);

      if (jsonObject.joinItems) {
        var joinItems = [];

        for (var i = 0; i < jsonObject.joinItems.length; i++) {
          if (jsonObject.joinItems[i].toServerJSONObject) {
            joinItems[i] = jsonObject.joinItems[i].toServerJSONObject();
          }
        }

        jsonObject.joinItems = joinItems;
      }

      if (jsonObject.datasetInfo) {
        if (jsonObject.datasetInfo.toServerJSONObject) {
          jsonObject.datasetInfo = jsonObject.datasetInfo.toServerJSONObject();
        }
      }

      return jsonObject;
    }
  }]);

  return UGCSubLayer;
}(UGCMapLayer);
SuperMap.UGCSubLayer = UGCSubLayer;
// CONCATENATED MODULE: ./src/common/iServer/ServerTheme.js
function ServerTheme_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { ServerTheme_typeof = function _typeof(obj) { return typeof obj; }; } else { ServerTheme_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return ServerTheme_typeof(obj); }

function ServerTheme_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ServerTheme_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ServerTheme_createClass(Constructor, protoProps, staticProps) { if (protoProps) ServerTheme_defineProperties(Constructor.prototype, protoProps); if (staticProps) ServerTheme_defineProperties(Constructor, staticProps); return Constructor; }

function ServerTheme_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { ServerTheme_get = Reflect.get; } else { ServerTheme_get = function _get(target, property, receiver) { var base = ServerTheme_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return ServerTheme_get(target, property, receiver || target); }

function ServerTheme_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = ServerTheme_getPrototypeOf(object); if (object === null) break; } return object; }

function ServerTheme_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) ServerTheme_setPrototypeOf(subClass, superClass); }

function ServerTheme_setPrototypeOf(o, p) { ServerTheme_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return ServerTheme_setPrototypeOf(o, p); }

function ServerTheme_createSuper(Derived) { var hasNativeReflectConstruct = ServerTheme_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = ServerTheme_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = ServerTheme_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return ServerTheme_possibleConstructorReturn(this, result); }; }

function ServerTheme_possibleConstructorReturn(self, call) { if (call && (ServerTheme_typeof(call) === "object" || typeof call === "function")) { return call; } return ServerTheme_assertThisInitialized(self); }

function ServerTheme_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function ServerTheme_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ServerTheme_getPrototypeOf(o) { ServerTheme_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return ServerTheme_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/










/**
 * @class SuperMap.ServerTheme
 * @category  iServer Map Theme
 * @classdesc UGC ä¸é¢å¾å¾å±ç±»ã
 * @extends {SuperMap.UGCSubLayer}
 * @param {SuperMap.Theme} theme - ä¸é¢å¾å¯¹è±¡ã
 * @param {SuperMap.LonLat} themeElementPosition - ä¸é¢å¾åç´ ä½ç½®ã
 */

var ServerTheme = /*#__PURE__*/function (_UGCSubLayer) {
  ServerTheme_inherits(ServerTheme, _UGCSubLayer);

  var _super = ServerTheme_createSuper(ServerTheme);

  function ServerTheme(options) {
    var _this;

    ServerTheme_classCallCheck(this, ServerTheme);

    options = options || {};
    _this = _super.call(this, options);
    /**
     * @member {SuperMap.Theme} SuperMap.ServerTheme.prototype.theme
     * @description ä¸é¢å¾å¯¹è±¡ã
     */

    _this.theme = null;
    /**
     * @member {SuperMap.LonLat} SuperMap.ServerTheme.prototype.themeElementPosition
     * @description ä¸é¢å¾åç´ ä½ç½®ã
     */

    _this.themeElementPosition = null;
    _this.CLASS_NAME = "SuperMap.ServerTheme";
    return _this;
  }
  /**
   * @function SuperMap.ServerTheme.prototype.destroy
   * @override
   */


  ServerTheme_createClass(ServerTheme, [{
    key: "destroy",
    value: function destroy() {
      ServerTheme_get(ServerTheme_getPrototypeOf(ServerTheme.prototype), "destroy", this).call(this);

      Util.reset(this);
    }
    /**
     * @function SuperMap.ServerTheme.prototype.fromJson
     * @description å°æå¡ç«¯ JSON å¯¹è±¡è½¬æ¢æå½åå®¢æ·ç«¯å¯¹è±¡
     * @param {Object} jsonObject - è¦è½¬æ¢ç JSON å¯¹è±¡ã
     */

  }, {
    key: "fromJson",
    value: function fromJson(jsonObject) {
      ServerTheme_get(ServerTheme_getPrototypeOf(ServerTheme.prototype), "fromJson", this).call(this, jsonObject);

      var themeObj = this.theme;
      var themeT = themeObj && themeObj.type;

      switch (themeT) {
        case 'LABEL':
          this.theme = ThemeLabel.fromObj(themeObj);
          break;

        case 'UNIQUE':
          this.theme = ThemeUnique.fromObj(themeObj);
          break;

        case 'GRAPH':
          this.theme = ThemeGraph.fromObj(themeObj);
          break;

        case 'DOTDENSITY':
          this.theme = ThemeDotDensity.fromObj(themeObj);
          break;

        case 'GRADUATEDSYMBOL':
          this.theme = ThemeGraduatedSymbol.fromObj(themeObj);
          break;

        case 'RANGE':
          this.theme = ThemeRange.fromObj(themeObj);
          break;

        default:
          break;
      }

      if (this.themeElementPosition) {
        //å¾æµè¯
        this.themeElementPosition = new LonLat(this.themeElementPosition.x, this.themeElementPosition.y);
      }
    }
    /**
     * @function SuperMap.ServerTheme.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      //æ®éå±æ§ç´æ¥èµå¼
      var jsonObject = ServerTheme_get(ServerTheme_getPrototypeOf(ServerTheme.prototype), "toServerJSONObject", this).call(this);

      if (jsonObject.themeElementPosition) {
        if (jsonObject.themeElementPosition.toServerJSONObject) {
          jsonObject.themeElementPosition = jsonObject.themeElementPosition.toServerJSONObject();
        }
      }

      if (jsonObject.theme) {
        if (jsonObject.theme.toServerJSONObject) {
          jsonObject.theme = jsonObject.theme.toServerJSONObject();
        }
      }

      return jsonObject;
    }
  }]);

  return ServerTheme;
}(UGCSubLayer);
SuperMap.ServerTheme = ServerTheme;
// CONCATENATED MODULE: ./src/common/iServer/Grid.js
function Grid_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Grid_typeof = function _typeof(obj) { return typeof obj; }; } else { Grid_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Grid_typeof(obj); }

function Grid_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Grid_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Grid_createClass(Constructor, protoProps, staticProps) { if (protoProps) Grid_defineProperties(Constructor.prototype, protoProps); if (staticProps) Grid_defineProperties(Constructor, staticProps); return Constructor; }

function Grid_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { Grid_get = Reflect.get; } else { Grid_get = function _get(target, property, receiver) { var base = Grid_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return Grid_get(target, property, receiver || target); }

function Grid_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = Grid_getPrototypeOf(object); if (object === null) break; } return object; }

function Grid_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Grid_setPrototypeOf(subClass, superClass); }

function Grid_setPrototypeOf(o, p) { Grid_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Grid_setPrototypeOf(o, p); }

function Grid_createSuper(Derived) { var hasNativeReflectConstruct = Grid_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Grid_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Grid_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Grid_possibleConstructorReturn(this, result); }; }

function Grid_possibleConstructorReturn(self, call) { if (call && (Grid_typeof(call) === "object" || typeof call === "function")) { return call; } return Grid_assertThisInitialized(self); }

function Grid_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Grid_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Grid_getPrototypeOf(o) { Grid_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Grid_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/







/**
 * @class SuperMap.Grid
 * @category iServer Map Layer
 * @classdesc UGC æ æ ¼å¾å±ç±»ã
 * @extends {SuperMap.UGCSubLayer}
 * @param {Object} options - åæ°ã 
 * @param {Array.<Object>} [options.colorDictionary] - é¢è²å¯¹ç§è¡¨å¯¹è±¡ã 
 * @param {number} [options.brightness] - Grid å¾å±çäº®åº¦ã 
 * @param {SuperMap.ColorGradientType} [options.colorGradientType] - é¢è²æ¸åæä¸¾ã 
 * @param {SuperMap.ServerColor} [options.colors] - é¢è²è¡¨å¯¹è±¡ã 
 * @param {number} [options.contrast] - Grid å¾å±çå¯¹æ¯åº¦ã 
 * @param {SuperMap.GridType} [options.gridType] - æ ¼ç½ç±»åã 
 * @param {number} [options.horizontalSpacing] - æ ¼ç½æ°´å¹³é´éå¤§å°ã 
 * @param {boolean} [options.sizeFixed] - æ ¼ç½æ¯å¦åºå®å¤§å°ï¼å¦æä¸åºå®å¤§å°ï¼åæ ¼ç½éçå°å¾ç¼©æ¾ã 
 * @param {SuperMap.ServerStyle} [options.solidStyle] - æ ¼ç½å®çº¿çæ ·å¼ã 
 * @param {SuperMap.ServerColor} [options.specialColor] - æ æ ¼æ°æ®éæ å¼æ°æ®çé¢è²ã 
 * @param {number} [options.specialValue] - å¾å±çç¹æ®å¼ã 
 * @param {boolean} [options.specialValueTransparent] - å¾å±çç¹æ®å¼ï¼specialValueï¼æå¤åºåæ¯å¦éæã 
 * @param {number} [options.verticalSpacing] - æ ¼ç½åç´é´éå¤§å°ã
 */

var Grid = /*#__PURE__*/function (_UGCSubLayer) {
  Grid_inherits(Grid, _UGCSubLayer);

  var _super = Grid_createSuper(Grid);

  function Grid(options) {
    var _this;

    Grid_classCallCheck(this, Grid);

    options = options || {};
    _this = _super.call(this, options);
    /**
     * @member {Array.<SuperMap.ColorDictionary>} SuperMap.Grid.prototype.colorDictionarys
     * @description é¢è²å¯¹ç§è¡¨å¯¹è±¡ã
     */

    _this.colorDictionarys = null;
    /**
     * @member {number} SuperMap.Grid.prototype.brightness
     * @description Grid å¾å±çäº®åº¦ã
     */

    _this.brightness = null;
    /**
     * @member {SuperMap.ColorGradientType} SuperMap.Grid.prototype.colorGradientType
     * @description æ¸åé¢è²æä¸¾å¼ã
     */

    _this.colorGradientType = null;
    /**
     * @member {SuperMap.ServerColor} SuperMap.Grid.prototype.colors
     * @description é¢è²è¡¨å¯¹è±¡ã
     */

    _this.colors = null;
    /**
     * @member {number} SuperMap.Grid.prototype.contrast
     * @description Grid å¾å±çå¯¹æ¯åº¦ã
     */

    _this.contrast = null;
    /**
     * @member {SuperMap.ServerStyle} SuperMap.Grid.prototype.dashStyle
     * @description æ æ ¼æ°æ®éç¹æ®å¼æ°æ®çé¢è²ã
     */

    _this.dashStyle = null;
    /**
     * @member {SuperMap.GridType} SuperMap.Grid.prototype.gridType
     * @description æ ¼ç½ç±»åã
     */

    _this.gridType = null;
    /**
     * @member {number} SuperMap.Grid.prototype.horizontalSpacing
     * @description æ ¼ç½æ°´å¹³é´éå¤§å°ã
     */

    _this.horizontalSpacing = null;
    /**
     * @member {boolean} SuperMap.Grid.prototype.sizeFixed
     * @description æ ¼ç½æ¯å¦åºå®å¤§å°ï¼å¦æä¸åºå®å¤§å°ï¼åæ ¼ç½éçå°å¾ç¼©æ¾ã
     */

    _this.sizeFixed = null;
    /**
     * @member {SuperMap.ServerStyle} SuperMap.Grid.prototype.solidStyle
     * @description æ ¼ç½å®çº¿çæ ·å¼ã
     */

    _this.solidStyle = null;
    /**
     * @member {SuperMap.ServerColor} SuperMap.Grid.prototype.specialColor
     * @description æ æ ¼æ°æ®éæ å¼æ°æ®çé¢è²ã
     */

    _this.specialColor = null;
    /**
     * @member {number} SuperMap.Grid.prototype.specialValue
     * @description å¾å±çç¹æ®å¼ã
     */

    _this.specialValue = null;
    /**
     * @member {boolean} SuperMap.Grid.prototype.specialValueTransparent
     * @description å¾å±çç¹æ®å¼ï¼specialValueï¼æå¤åºåæ¯å¦éæã
     */

    _this.specialValueTransparent = null;
    /**
     * @member {number} SuperMap.Grid.prototype.verticalSpacing
     * @description æ ¼ç½åç´é´éå¤§å°ã
     */

    _this.verticalSpacing = null;
    _this.CLASS_NAME = "SuperMap.Grid";
    return _this;
  }
  /**
   * @function SuperMap.Grid.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  Grid_createClass(Grid, [{
    key: "destroy",
    value: function destroy() {
      Grid_get(Grid_getPrototypeOf(Grid.prototype), "destroy", this).call(this);

      Util.reset(this);
    }
    /**
     * @function SuperMap.Grid.prototype.fromJson
     * @description å°æå¡ç«¯ JSON å¯¹è±¡è½¬æ¢æå½åå®¢æ·ç«¯å¯¹è±¡ã
     * @param {Object} jsonObject - è¦è½¬æ¢ç JSON å¯¹è±¡ã
     */

  }, {
    key: "fromJson",
    value: function fromJson(jsonObject) {
      Grid_get(Grid_getPrototypeOf(Grid.prototype), "fromJson", this).call(this, jsonObject);

      if (this.specialColor) {
        this.specialColor = new ServerColor(this.specialColor.red, this.specialColor.green, this.specialColor.blue);
      }

      if (this.colors) {
        var colors = [],
            color;

        for (var i in this.colors) {
          color = this.colors[i];
          colors.push(new ServerColor(color.red, color.green, color.blue));
        }

        this.colors = colors;
      }

      if (this.dashStyle) {
        this.dashStyle = new ServerStyle(this.dashStyle);
      }

      if (this.solidStyle) {
        this.solidStyle = new ServerStyle(this.solidStyle);
      }

      if (this.colorDictionary) {
        var colorDics = [],
            colorDic;

        for (var key in this.colorDictionary) {
          colorDic = this.colorDictionary[key];
          colorDics.push(new ColorDictionary({
            elevation: key,
            color: colorDic
          }));
        }

        this.colorDictionarys = colorDics;
      }

      delete this.colorDictionary;
    }
    /**
     * @function SuperMap.Grid.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON å¯¹è±¡ã
     * @returns JSON å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      var jsonObject = Grid_get(Grid_getPrototypeOf(Grid.prototype), "toServerJSONObject", this).call(this);

      if (jsonObject.dashStyle) {
        if (jsonObject.dashStyle.toServerJSONObject) {
          jsonObject.dashStyle = jsonObject.dashStyle.toServerJSONObject();
        }
      }

      if (jsonObject.solidStyle) {
        if (jsonObject.solidStyle.toServerJSONObject) {
          jsonObject.solidStyle = jsonObject.solidStyle.toServerJSONObject();
        }
      }

      return jsonObject;
    }
  }]);

  return Grid;
}(UGCSubLayer);
SuperMap.Grid = Grid;
// CONCATENATED MODULE: ./src/common/iServer/Image.js
function Image_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Image_typeof = function _typeof(obj) { return typeof obj; }; } else { Image_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Image_typeof(obj); }

function Image_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Image_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Image_createClass(Constructor, protoProps, staticProps) { if (protoProps) Image_defineProperties(Constructor.prototype, protoProps); if (staticProps) Image_defineProperties(Constructor, staticProps); return Constructor; }

function Image_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { Image_get = Reflect.get; } else { Image_get = function _get(target, property, receiver) { var base = Image_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return Image_get(target, property, receiver || target); }

function Image_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = Image_getPrototypeOf(object); if (object === null) break; } return object; }

function Image_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Image_setPrototypeOf(subClass, superClass); }

function Image_setPrototypeOf(o, p) { Image_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Image_setPrototypeOf(o, p); }

function Image_createSuper(Derived) { var hasNativeReflectConstruct = Image_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Image_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Image_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Image_possibleConstructorReturn(this, result); }; }

function Image_possibleConstructorReturn(self, call) { if (call && (Image_typeof(call) === "object" || typeof call === "function")) { return call; } return Image_assertThisInitialized(self); }

function Image_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Image_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Image_getPrototypeOf(o) { Image_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Image_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.Image
 * @category iServer Map Layer
 * @classdesc UGC å½±åå¾å±ç±» 
 * @extends {SuperMap.UGCSubLayer}
 * @param {Object} options - åæ°ã 
 * @param {SuperMap.ColorSpaceType} [options.colorSpaceType] - è¿åå½±åå¾å±çè²å½©æ¾ç¤ºæ¨¡å¼ã
 * @param {number} [options.brightness] - å½±åå¾å±çäº®åº¦ã
 * @param {Array.<number>} [options.displayBandIndexes] - è¿åå½åå½±åå¾å±æ¾ç¤ºçæ³¢æ®µç´¢å¼ã
 * @param {number} [options.contrast] - å½±åå¾å±çå¯¹æ¯åº¦ã
 * @param {boolean} [options.transparent] - æ¯å¦èæ¯éæã
 * @param {SuperMap.ServerColor} [options.transparentColor] - è¿åèæ¯éæè²ã
 * @param {number} [options.transparentColorTolerance] - èæ¯éæè²å®¹éã
 */

var UGCImage = /*#__PURE__*/function (_UGCSubLayer) {
  Image_inherits(UGCImage, _UGCSubLayer);

  var _super = Image_createSuper(UGCImage);

  function UGCImage(options) {
    var _this;

    Image_classCallCheck(this, UGCImage);

    options = options || {};
    _this = _super.call(this, options);
    /**
     * @member {number} SuperMap.Image.prototype.brightness
     * @description å½±åå¾å±çäº®åº¦ã
     */

    _this.brightness = null;
    /**
     * @member {SuperMap.ColorSpaceType} SuperMap.Image.prototype.colorSpaceType
     * @description è¿åå½±åå¾å±çè²å½©æ¾ç¤ºæ¨¡å¼ã
     */

    _this.colorSpaceType = null;
    /**
     * @member {number} SuperMap.Image.prototype.contrast
     * @description å½±åå¾å±çå¯¹æ¯åº¦ã
     */

    _this.contrast = null;
    /**
     * @member {Array.<number>} SuperMap.Image.prototype.displayBandIndexes
     * @description è¿åå½åå½±åå¾å±æ¾ç¤ºçæ³¢æ®µç´¢å¼ã
     */

    _this.displayBandIndexes = null;
    /**
     * @member {boolean} SuperMap.Image.prototype.transparent
     * @description æ¯å¦èæ¯éæã
     */

    _this.transparent = null;
    /**
     * @member {SuperMap.ServerColor} SuperMap.Image.prototype.transparentColor
     * @description è¿åèæ¯éæè²ã
     */

    _this.transparentColor = null;
    /**
     * @member {number} SuperMap.Image.prototype.transparentColorTolerance
     * @description èæ¯éæè²å®¹éã
     */

    _this.transparentColorTolerance = null;
    _this.CLASS_NAME = "SuperMap.Image";
    return _this;
  }
  /**
   * @function SuperMap.Image.prototype.destroy
   * @override
   */


  Image_createClass(UGCImage, [{
    key: "destroy",
    value: function destroy() {
      Image_get(Image_getPrototypeOf(UGCImage.prototype), "destroy", this).call(this);

      Util.reset(this);
    }
    /**
     * @function SuperMap.Image.prototype.fromJson
     * @description å°æå¡ç«¯ JSON å¯¹è±¡è½¬æ¢æå½åå®¢æ·ç«¯å¯¹è±¡ã
     * @param {Object} jsonObject - è¦è½¬æ¢ç JSON å¯¹è±¡ã
     */

  }, {
    key: "fromJson",
    value: function fromJson(jsonObject) {
      Image_get(Image_getPrototypeOf(UGCImage.prototype), "fromJson", this).call(this, jsonObject);

      if (this.transparentColor) {
        this.transparentColor = new ServerColor(this.transparentColor.red, this.transparentColor.green, this.transparentColor.blue);
      }
    }
    /**
     * @function SuperMap.Image.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      return Image_get(Image_getPrototypeOf(UGCImage.prototype), "toServerJSONObject", this).call(this);
    }
  }]);

  return UGCImage;
}(UGCSubLayer);
SuperMap.Image = UGCImage;
// CONCATENATED MODULE: ./src/common/iServer/Vector.js
function iServer_Vector_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { iServer_Vector_typeof = function _typeof(obj) { return typeof obj; }; } else { iServer_Vector_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return iServer_Vector_typeof(obj); }

function iServer_Vector_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function iServer_Vector_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function iServer_Vector_createClass(Constructor, protoProps, staticProps) { if (protoProps) iServer_Vector_defineProperties(Constructor.prototype, protoProps); if (staticProps) iServer_Vector_defineProperties(Constructor, staticProps); return Constructor; }

function iServer_Vector_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { iServer_Vector_get = Reflect.get; } else { iServer_Vector_get = function _get(target, property, receiver) { var base = iServer_Vector_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return iServer_Vector_get(target, property, receiver || target); }

function iServer_Vector_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = iServer_Vector_getPrototypeOf(object); if (object === null) break; } return object; }

function iServer_Vector_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) iServer_Vector_setPrototypeOf(subClass, superClass); }

function iServer_Vector_setPrototypeOf(o, p) { iServer_Vector_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return iServer_Vector_setPrototypeOf(o, p); }

function iServer_Vector_createSuper(Derived) { var hasNativeReflectConstruct = iServer_Vector_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = iServer_Vector_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = iServer_Vector_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return iServer_Vector_possibleConstructorReturn(this, result); }; }

function iServer_Vector_possibleConstructorReturn(self, call) { if (call && (iServer_Vector_typeof(call) === "object" || typeof call === "function")) { return call; } return iServer_Vector_assertThisInitialized(self); }

function iServer_Vector_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function iServer_Vector_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function iServer_Vector_getPrototypeOf(o) { iServer_Vector_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return iServer_Vector_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.Vector
 * @category  iServer Map TileFeature
 * @classdesc UGC ç¢éå¾å±ç±»ã
 * @extends {SuperMap.UGCSubLayer}
 * @param {Object} options - åæ°ã
 * @param {SuperMap.ServerStyle} [options.style] - ç¢éå¾å±çé£æ ¼ã
 */

var Vector_Vector = /*#__PURE__*/function (_UGCSubLayer) {
  iServer_Vector_inherits(Vector, _UGCSubLayer);

  var _super = iServer_Vector_createSuper(Vector);

  function Vector(options) {
    var _this;

    iServer_Vector_classCallCheck(this, Vector);

    options = options || {};
    _this = _super.call(this, options);
    /**
     * @member {SuperMap.ServerStyle} SuperMap.Vector.prototype.style
     * @description ç¢éå¾å±çé£æ ¼ã
     */

    _this.style = null;
    _this.CLASS_NAME = "SuperMap.Vector";
    return _this;
  }
  /**
   * @function SuperMap.Vector.prototype.destroy
   * @override
   */


  iServer_Vector_createClass(Vector, [{
    key: "destroy",
    value: function destroy() {
      iServer_Vector_get(iServer_Vector_getPrototypeOf(Vector.prototype), "destroy", this).call(this);

      Util.reset(this);
    }
    /**
     * @function SuperMap.Vector.prototype.fromJson
     * @description å°æå¡ç«¯ JSON å¯¹è±¡è½¬æ¢æå½åå®¢æ·ç«¯å¯¹è±¡ã
     * @param {Object} jsonObject - è¦è½¬æ¢ç JSON å¯¹è±¡ã
     */

  }, {
    key: "fromJson",
    value: function fromJson(jsonObject) {
      iServer_Vector_get(iServer_Vector_getPrototypeOf(Vector.prototype), "fromJson", this).call(this, jsonObject);

      var sty = this.style;

      if (sty) {
        this.style = new ServerStyle(sty);
      }
    }
    /**
     * @function SuperMap.Vector.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     * @returns {Object} å¯¹åºç JSON æ ¼å¼å¯¹è±¡
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      var jsonObject = SuperMap.toServerJSONObject();

      if (jsonObject.style) {
        if (jsonObject.style.toServerJSONObject) {
          jsonObject.style = jsonObject.style.toServerJSONObject();
        }
      }

      return jsonObject;
    }
  }]);

  return Vector;
}(UGCSubLayer);
SuperMap.Vector = Vector_Vector;
// CONCATENATED MODULE: ./src/common/iServer/GetLayersInfoService.js
function GetLayersInfoService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GetLayersInfoService_typeof = function _typeof(obj) { return typeof obj; }; } else { GetLayersInfoService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GetLayersInfoService_typeof(obj); }

function GetLayersInfoService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GetLayersInfoService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GetLayersInfoService_createClass(Constructor, protoProps, staticProps) { if (protoProps) GetLayersInfoService_defineProperties(Constructor.prototype, protoProps); if (staticProps) GetLayersInfoService_defineProperties(Constructor, staticProps); return Constructor; }

function GetLayersInfoService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GetLayersInfoService_get = Reflect.get; } else { GetLayersInfoService_get = function _get(target, property, receiver) { var base = GetLayersInfoService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GetLayersInfoService_get(target, property, receiver || target); }

function GetLayersInfoService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GetLayersInfoService_getPrototypeOf(object); if (object === null) break; } return object; }

function GetLayersInfoService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GetLayersInfoService_setPrototypeOf(subClass, superClass); }

function GetLayersInfoService_setPrototypeOf(o, p) { GetLayersInfoService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GetLayersInfoService_setPrototypeOf(o, p); }

function GetLayersInfoService_createSuper(Derived) { var hasNativeReflectConstruct = GetLayersInfoService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GetLayersInfoService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GetLayersInfoService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GetLayersInfoService_possibleConstructorReturn(this, result); }; }

function GetLayersInfoService_possibleConstructorReturn(self, call) { if (call && (GetLayersInfoService_typeof(call) === "object" || typeof call === "function")) { return call; } return GetLayersInfoService_assertThisInitialized(self); }

function GetLayersInfoService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GetLayersInfoService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GetLayersInfoService_getPrototypeOf(o) { GetLayersInfoService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GetLayersInfoService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/







/**
 * @class SuperMap.GetLayersInfoService
 * @category iServer Map Layer
 * @classdesc è·åå¾å±ä¿¡æ¯æå¡ç±»æé å½æ°ã
 * @extends {SuperMap.CommonServiceBase}
 * @param {string} url - ä¸å®¢æ·ç«¯äº¤äºçå°å¾æå¡å°åãè¯·æ±å°å¾æå¡,URL åºä¸ºï¼
 *        http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{å°å¾æå¡å}/rest/maps/{å°å¾å}ï¼
 *        å¦ http://localhost:8090/iserver/services/map-world/rest/maps/World ã
 *        å¦ææ¥è¯¢ä¸´æ¶å¾å±çä¿¡æ¯ï¼è¯·æå®å®æçurlï¼åå«ä¸´æ¶å¾å±IDä¿¡æ¯ï¼å¦ï¼
 *        http://localhost:8090/iserver/services/map-world/rest/maps/World/tempLayersSet/resourceID
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæprocessCompletedå±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailedå±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã 
 * @param {SuperMap.DataFormat} [options.format=SuperMap.DataFormat.GEOJSON] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @param {boolean} options.isTempLayers - å½åurlå¯¹åºçå¾å±æ¯å¦æ¯ä¸´æ¶å¾å±ã
 */

var GetLayersInfoService = /*#__PURE__*/function (_CommonServiceBase) {
  GetLayersInfoService_inherits(GetLayersInfoService, _CommonServiceBase);

  var _super = GetLayersInfoService_createSuper(GetLayersInfoService);

  function GetLayersInfoService(url, options) {
    var _this;

    GetLayersInfoService_classCallCheck(this, GetLayersInfoService);

    _this = _super.call(this, url, options);
    /**
     * @member {boolean} SuperMap.GetLayersInfoService.prototype.isTempLayers
     * @description å½åurlå¯¹åºçå¾å±æ¯å¦æ¯ä¸´æ¶å¾å±ã
     */

    _this.isTempLayers = false;

    if (options) {
      Util.extend(GetLayersInfoService_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.GetLayersInfoService";
    return _this;
  }
  /**
   * @function SuperMap.GetLayersInfoService.prototype.destroy
   * @override
   */


  GetLayersInfoService_createClass(GetLayersInfoService, [{
    key: "destroy",
    value: function destroy() {
      GetLayersInfoService_get(GetLayersInfoService_getPrototypeOf(GetLayersInfoService.prototype), "destroy", this).call(this);

      Util.reset(this);
    }
    /**
     * @function SuperMap.GetLayersInfoService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ´æ°åæ°ä¼ éå°æå¡ç«¯ã
     */

  }, {
    key: "processAsync",
    value: function processAsync() {
      var me = this,
          method = "GET";

      if (!me.isTempLayers) {
        me.url = Util.urlPathAppend(me.url, 'layers');
      }

      me.request({
        method: method,
        params: null,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.GetLayersInfoService.prototype.serviceProcessCompleted
     * @description ç¼è¾å®æï¼æ§è¡æ­¤æ¹æ³ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     */

  }, {
    key: "serviceProcessCompleted",
    value: function serviceProcessCompleted(result) {
      var me = this,
          existRes,
          layers,
          len;
      result = Util.transformResult(result);
      existRes = !!result && result.length > 0;
      layers = existRes ? result[0].subLayers.layers : null;
      len = layers ? layers.length : 0;
      me.handleLayers(len, layers);
      me.events.triggerEvent("processCompleted", {
        result: result[0]
      });
    }
    /**
     * TODO ä¸é¢å¾æ¶åå¯è½ä¼ç¨å°
     * @function SuperMap.GetLayersInfoService.prototype.handleLayers
     * @description å¤ç iServer æ°å¢å¾å±ç»æ°æ® (subLayers.layers ä¸­å¯è½è¿ä¼å«æ subLayers.layers)
     * @param {number} len - subLayers.layersçé¿åº¦
     * @param {Array.<number>} layers - subLayers.layersçé¿åº¦æ°ç»
     */

  }, {
    key: "handleLayers",
    value: function handleLayers(len, layers) {
      var me = this,
          tempLayer;

      if (len) {
        for (var i = 0; i < len; i++) {
          if (layers[i].subLayers && layers[i].subLayers.layers && layers[i].subLayers.layers.length > 0) {
            me.handleLayers(layers[i].subLayers.layers.length, layers[i].subLayers.layers);
          } else {
            var type = layers[i].ugcLayerType;

            switch (type) {
              case 'THEME':
                tempLayer = new ServerTheme();
                tempLayer.fromJson(layers[i]);
                layers[i] = tempLayer;
                break;

              case 'GRID':
                tempLayer = new Grid();
                tempLayer.fromJson(layers[i]);
                layers[i] = tempLayer;
                break;

              case 'IMAGE':
                tempLayer = new UGCImage();
                tempLayer.fromJson(layers[i]);
                layers[i] = tempLayer;
                break;

              case 'VECTOR':
                tempLayer = new Vector_Vector();
                tempLayer.fromJson(layers[i]);
                layers[i] = tempLayer;
                break;

              default:
                break;
            }
          }
        }
      }
    }
  }]);

  return GetLayersInfoService;
}(CommonServiceBase);
SuperMap.GetLayersInfoService = GetLayersInfoService;
// CONCATENATED MODULE: ./src/common/iServer/InterpolationAnalystParameters.js
function InterpolationAnalystParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function InterpolationAnalystParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function InterpolationAnalystParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) InterpolationAnalystParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) InterpolationAnalystParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.InterpolationAnalystParameters
 * @category iServer SpatialAnalyst InterpolationAnalyst
 * @classdesc æå¼åæåæ°ç±»ã
 * @param {Object} options - åæ°ã
 * @param {(SuperMap.Bounds|L.Bounds|ol.extent)} options.bounds - æå¼åæçèå´ï¼ç¨äºç¡®å®ç»ææ æ ¼æ°æ®éçèå´ã 
 * @param {string} options.outputDatasetName - æå¼åæç»ææ°æ®éçåç§°ã 
 * @param {string} options.outputDatasourceName - æå¼åæç»ææ°æ®æºçåç§°ã 
 * @param {string} [options.zValueFieldName] - å­å¨ç¨äºè¿è¡æå¼åæçå­æ®µåç§°ï¼æå¼åæä¸æ¯æææ¬ç±»åçå­æ®µã
 * @param {string} [options.dataset] - ç¨äºåæå¼åæçæ°æ®æºä¸­æ°æ®éçåç§°ãå½æå¼åæç±»åï¼InterpolationAnalystTypeï¼ä¸º dataset æ¶ï¼æ­¤åæ°ä¸ºå¿éã 
 * @param {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point>} [options.inputPoints] - ç¨äºåæå¼åæçç¦»æ£ç¹éåãå½æå¼åæç±»åï¼InterpolationAnalystTypeï¼ä¸º geometry æ¶ï¼æ­¤åæ°ä¸ºå¿è®¾åæ°ã 
 * @param {number} [options.searchRadius=0] - æ¥æ¾åå¾ï¼å³åä¸è¿ç®ç¹çæ¥æ¾èå´ï¼ä¸ç¹æ°æ®éåä½ç¸åã 
 * @param {number} [options.zValueScale=1] - ç¨äºè¿è¡æå¼åæå¼çç¼©æ¾æ¯çã 
 * @param {number} [options.resolution] - æå¼ç»ææ æ ¼æ°æ®éçåè¾¨çï¼å³ä¸ä¸ªååæä»£è¡¨çå®å°è·ç¦»ï¼ä¸ç¹æ°æ®éåä½ç¸åã 
 * @param {SuperMap.FilterParameter} [options.filterQueryParameter] - å±æ§è¿æ»¤æ¡ä»¶ã 
 * @param {SuperMap.PixelFormat} [options.pixelFormat] - æå®ç»ææ æ ¼æ°æ®éå­å¨çåç´ æ ¼å¼ã 
 * @param {string} [options.InterpolationAnalystType="dataset"] - æå¼åæç±»åï¼"dataset" æ "geometry"ï¼ã 
 */

var InterpolationAnalystParameters = /*#__PURE__*/function () {
  function InterpolationAnalystParameters(options) {
    InterpolationAnalystParameters_classCallCheck(this, InterpolationAnalystParameters);

    if (!options) {
      return;
    }
    /**
     * @member {(SuperMap.Bounds|L.Bounds|ol.extent)} SuperMap.InterpolationAnalystParameters.prototype.bounds
     * @description æå¼åæçèå´ï¼ç¨äºç¡®å®ç»ææ æ ¼æ°æ®éçèå´ã
     * å¦æç¼ºçï¼åé»è®¤ä¸ºåæ°æ®éçèå´ãé´äºæ­¤æå¼æ¹æ³ä¸ºåææ¹æ³ï¼åæ°æ®éçèå´åçæå¼ç»ææç¸å¯¹æåèä»·å¼ï¼
     * å æ­¤å»ºè®®æ­¤åæ°ä¸å¤§äºåæ°æ®éèå´ã
     */


    this.bounds = null;
    /**
     * @member {number} [SuperMap.InterpolationAnalystParameters.prototype.searchRadius=0]
     * @description æ¥æ¾åå¾ï¼å³åä¸è¿ç®ç¹çæ¥æ¾èå´ï¼ä¸ç¹æ°æ®éåä½ç¸åã
     * è®¡ç®æä¸ªä½ç½®çZ å¼æ¶ï¼ä¼ä»¥è¯¥ä½ç½®ä¸ºåå¿ï¼ä»¥æ¥æ¾èå´çå¼ä¸ºåå¾ï¼è½å¨è¿ä¸ªèå´åçéæ ·ç¹é½å°åä¸è¿ç®ã
     * è¯¥å¼éè¦æ ¹æ®å¾æå¼ç¹æ°æ®çåå¸ç¶åµåç¹æ°æ®éèå´è¿è¡è®¾ç½®ã
     */

    this.searchRadius = 0;
    /**
     * @member {string} SuperMap.InterpolationAnalystParameters.prototype.zValueFieldName
     * @description æ°æ®éæå¼åæä¸­ï¼ç¨äºæå®è¿è¡æå¼åæçç®æ å­æ®µåï¼æå¼åæä¸æ¯æææ¬ç±»åçå­æ®µã
     * å«ä¹ä¸ºæ¯ä¸ªæå¼ç¹å¨æå¼è¿ç¨ä¸­çæéï¼å¯ä»¥å°ææç¹æ­¤å­æ®µå¼è®¾ç½®ä¸º 1ï¼å³ææç¹å¨æ´ä½æå¼ä¸­æéç¸åã
     * å½æå¼åæç±»åï¼InterpolationAnalystTypeï¼ä¸º dataset æ¶ï¼æ­¤ä¸ºå¿éåæ°ã
     */

    this.zValueFieldName = null;
    /**
     * @member {number} [SuperMap.InterpolationAnalystParameters.prototype.zValueScale=1]
     * @description ç¨äºè¿è¡æå¼åæå¼çç¼©æ¾æ¯çã
     * åå æå¼åæçå¼å°ä¹ä»¥è¯¥åæ°å¼ååè¿è¡æå¼ï¼ä¹å°±æ¯å¯¹è¿è¡æå¼åæçå¼è¿è¡ç»ä¸çæ©å¤§æç¼©å°ã
     */

    this.zValueScale = 1;
    /**
     * @member {number} SuperMap.InterpolationAnalystParameters.prototype.resolution
     * @description æå¼ç»ææ æ ¼æ°æ®éçåè¾¨çï¼å³ä¸ä¸ªååæä»£è¡¨çå®å°è·ç¦»ï¼ä¸ç¹æ°æ®éåä½ç¸åã
     * è¯¥å¼ä¸è½è¶è¿å¾åææ°æ®éçèå´è¾¹é¿ã
     * ä¸è¯¥å¼è®¾ç½®æ¶ï¼åºè¯¥èèç¹æ°æ®éèå´å¤§å°æ¥åå¼ï¼ä¸è¬ä¸ºç»ææ æ ¼è¡åå¼ï¼å³ç»ææ æ ¼æ°æ®éèå´é¤ä»¥åè¾¨çï¼ï¼å¨ 500 ä»¥åå¯ä»¥è¾å¥½å°ä½ç°å¯åº¦èµ°å¿ã
     */

    this.resolution = null;
    /**
     * @member {SuperMap.FilterParameter} [SuperMap.InterpolationAnalystParameters.prototype.filterQueryParameter]
     * @description è¿æ»¤æ¡ä»¶ï¼å¯¹åææ°æ®éä¸­çç¹è¿è¡è¿æ»¤ï¼è®¾ç½®ä¸º null è¡¨ç¤ºå¯¹æ°æ®éä¸­çææç¹è¿è¡åæã
     */

    this.filterQueryParameter = null;
    /**
     * @member {string} SuperMap.InterpolationAnalystParameters.prototype.outputDatasetName
     * @description æå¼åæç»ææ°æ®éçåç§°ã 
     */

    this.outputDatasetName = null;
    /**
     * @member {string} SuperMap.InterpolationAnalystParameters.prototype.outputDatasourceName
     * @description æå¼åæç»ææ°æ®æºçåç§°ã 
     */

    this.outputDatasourceName = null;
    /**
     * @member {SuperMap.PixelFormat} [SuperMap.InterpolationAnalystParameters.prototype.pixelFormat]
     * @description æå®ç»ææ æ ¼æ°æ®éå­å¨çåç´ æ ¼å¼ãæ¯æå­å¨çåç´ æ ¼å¼æ BIT16ãBIT32ãDOUBLEãSINGLEãUBIT1ãUBIT4ãUBIT8ãUBIT24ãUBIT32ã
     */

    this.pixelFormat = null;
    /**
     * @member {string} [SuperMap.InterpolationAnalystParameters.prototype.dataset]
     * @description ç¨æ¥åæå¼åæçæ°æ®æºä¸­æ°æ®éçåç§°ï¼è¯¥åç§°ç¨å½¢å¦ "æ°æ®éåç§°@æ°æ®æºå«å" å½¢å¼æ¥è¡¨ç¤ºã
     * å½æå¼åæç±»åï¼InterpolationAnalystTypeï¼ä¸º dataset æ¶ï¼æ­¤åæ°ä¸ºå¿éã
     */

    this.dataset = null;
    /**
     * @member {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point>} [SuperMap.InterpolationAnalystParameters.prototype.inputPoints]
     * @description ç¨äºåæå¼åæçç¦»æ£ç¹ï¼ç¦»æ£ç¹åæ¬Zå¼ï¼éåã
     * å½æå¼åæç±»åï¼InterpolationAnalystTypeï¼ä¸º geometry æ¶ï¼æ­¤åæ°ä¸ºå¿è®¾åæ°ã
     * éè¿ç¦»æ£ç¹ç´æ¥è¿è¡æå¼åæä¸éè¦æå®è¾å¥æ°æ®éinputDatasourceNameï¼inputDatasetNameä»¥åzValueFieldNameã
     */

    this.inputPoints = null;
    /**
     * @member {string} [SuperMap.InterpolationAnalystParameters.prototype.InterpolationAnalystType="dataset"]
     * @description  æå¼åæç±»åãå·®å¼åæåæ¬æ°æ®éæå¼åæåå ä½æå¼åæä¸¤ç±»ï¼
     *               "dataset" è¡¨ç¤ºå¯¹æ°æ®éè¿è¡æå¼åæï¼"geometry" è¡¨ç¤ºå¯¹ç¦»æ£ç¹æ°ç»è¿è¡æå¼åæã
     */

    this.InterpolationAnalystType = "dataset";
    /**
     * @member {Object} SuperMap.InterpolationAnalystParameters.prototype.clipParam
     * @description å¯¹æå¼åæç»æè¿è¡è£åªçåæ°ã
     */

    this.clipParam = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.InterpolationAnalystParameters";
  }
  /**
   * @function SuperMap.InterpolationAnalystParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  InterpolationAnalystParameters_createClass(InterpolationAnalystParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.bounds = null;
      me.searchRadius = null;
      me.zValueFieldName = null;
      me.zValueScale = null;
      me.resolution = null;
      me.filterQueryParameter = null;
      me.outputDatasetName = null;
      me.pixelFormat = null;
    }
    /**
     * @function SuperMap.InterpolationAnalystParameters.toObject
     * @param {SuperMap.InterpolationAnalystParameters} interpolationAnalystParameters - æå¼åæåæ°ç±»ã
     * @param {SuperMap.InterpolationAnalystParameters} tempObj - æå¼åæåæ°å¯¹è±¡ã
     * @description å°æå¼åæåæ°å¯¹è±¡è½¬æ¢æ JSON å¯¹è±¡ã
     * @returns JSON å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(interpolationAnalystParameters, tempObj) {
      for (var name in interpolationAnalystParameters) {
        if (name === "inputPoints" && interpolationAnalystParameters.InterpolationAnalystType === "geometry") {
          var objs = [];

          for (var i = 0; i < interpolationAnalystParameters.inputPoints.length; i++) {
            var item = interpolationAnalystParameters.inputPoints[i];
            var obj = {
              x: item.x,
              y: item.y,
              z: item.tag
            };
            objs.push(obj);
          }

          tempObj[name] = objs;
        } else {
          tempObj[name] = interpolationAnalystParameters[name];
        }
      }
    }
  }]);

  return InterpolationAnalystParameters;
}();
SuperMap.InterpolationAnalystParameters = InterpolationAnalystParameters;
// CONCATENATED MODULE: ./src/common/iServer/InterpolationRBFAnalystParameters.js
function InterpolationRBFAnalystParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { InterpolationRBFAnalystParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { InterpolationRBFAnalystParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return InterpolationRBFAnalystParameters_typeof(obj); }

function InterpolationRBFAnalystParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function InterpolationRBFAnalystParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function InterpolationRBFAnalystParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) InterpolationRBFAnalystParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) InterpolationRBFAnalystParameters_defineProperties(Constructor, staticProps); return Constructor; }

function InterpolationRBFAnalystParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { InterpolationRBFAnalystParameters_get = Reflect.get; } else { InterpolationRBFAnalystParameters_get = function _get(target, property, receiver) { var base = InterpolationRBFAnalystParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return InterpolationRBFAnalystParameters_get(target, property, receiver || target); }

function InterpolationRBFAnalystParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = InterpolationRBFAnalystParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function InterpolationRBFAnalystParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) InterpolationRBFAnalystParameters_setPrototypeOf(subClass, superClass); }

function InterpolationRBFAnalystParameters_setPrototypeOf(o, p) { InterpolationRBFAnalystParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return InterpolationRBFAnalystParameters_setPrototypeOf(o, p); }

function InterpolationRBFAnalystParameters_createSuper(Derived) { var hasNativeReflectConstruct = InterpolationRBFAnalystParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = InterpolationRBFAnalystParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = InterpolationRBFAnalystParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return InterpolationRBFAnalystParameters_possibleConstructorReturn(this, result); }; }

function InterpolationRBFAnalystParameters_possibleConstructorReturn(self, call) { if (call && (InterpolationRBFAnalystParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return InterpolationRBFAnalystParameters_assertThisInitialized(self); }

function InterpolationRBFAnalystParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function InterpolationRBFAnalystParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function InterpolationRBFAnalystParameters_getPrototypeOf(o) { InterpolationRBFAnalystParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return InterpolationRBFAnalystParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.InterpolationRBFAnalystParameters
 * @category iServer SpatialAnalyst InterpolationAnalyst
 * @classdesc æ ·æ¡æå¼ï¼å¾ååºå½æ°æå¼æ³ï¼åæåæ°ç±»ã
 * @extends {SuperMap.InterpolationAnalystParameters}
 * @param {Object} options - åæ°ã 
 * @param {(SuperMap.Bounds|L.Bounds|ol.extent)} options.bounds - æå¼åæçèå´ï¼ç¨äºç¡®å®ç»ææ æ ¼æ°æ®éçèå´ã 
 * @param {string} options.searchMode - æå¼è¿ç®æ¶ï¼æ¥æ¾åä¸è¿ç®ç¹çæ¹å¼ï¼æåºå®ç¹æ°æ¥æ¾ãå®é¿æ¥æ¾ãåæ¥æ¾ã  
 * @param {string} options.outputDatasetName - æå¼åæç»ææ°æ®éçåç§°ã  
 * @param {string} options.outputDatasourceName - æå¼åæç»ææ°æ®æºçåç§°ã 
 * @param {string} [options.zValueFieldName] - å­å¨ç¨äºè¿è¡æå¼åæçå­æ®µåç§°ï¼æå¼åæä¸æ¯æææ¬ç±»åçå­æ®µãå½æå¼åæç±»å(SuperMap.InterpolationAnalystType)ä¸º dataset æ¶ï¼æ­¤ä¸ºå¿éåæ°ã 
 * @param {number} [options.smooth=0.1] - åæ»ç³»æ°ï¼è¯¥å¼è¡¨ç¤ºæå¼å½æ°æ²çº¿ä¸ç¹çé¼è¿ç¨åº¦ï¼å¼åä¸º0å°1ã 
 * @param {number} [options.tension=40] - å¼ åç³»æ°ï¼ç¨äºè°æ´ç»ææ æ ¼æ°æ®è¡¨é¢çç¹æ§ã 
 * @param {number} [options.expectedCount=12] - ãåºå®ç¹æ°æ¥æ¾ãæ¹å¼ä¸ï¼è®¾ç½®åä¸å·®å¼è¿ç®çç¹æ°ã 
 * @param {number} [options.searchRadius=0] - ãå®é¿æ¥æ¾ãæ¹å¼ä¸ï¼è®¾ç½®åä¸è¿ç®ç¹çæ¥æ¾èå´ã 
 * @param {number} [options.maxPointCountForInterpolation=200] - ãåæ¥æ¾ãæ¹å¼ä¸ï¼è®¾ç½®æå¤åä¸æå¼çç¹æ°ã 
 * @param {number} [options.maxPointCountInNode=50] - ãåæ¥æ¾ãæ¹å¼ä¸ï¼è®¾ç½®åä¸ªååæå¤åä¸è¿ç®ç¹æ°ã 
 * @param {number} [options.zValueScale=1] - ç¨äºè¿è¡æå¼åæå¼çç¼©æ¾æ¯çã
 * @param {number} [options.resolution] - æå¼ç»ææ æ ¼æ°æ®éçåè¾¨çï¼å³ä¸ä¸ªååæä»£è¡¨çå®å°è·ç¦»ï¼ä¸ç¹æ°æ®éåä½ç¸åã 
 * @param {SuperMap.FilterParameter} [options.filterQueryParameter] - å±æ§è¿æ»¤æ¡ä»¶ã 
 * @param {string} [options.pixelFormat] - æå®ç»ææ æ ¼æ°æ®éå­å¨çåç´ æ ¼å¼ã 
 * @param {string} [options.dataset] - è¦ç¨æ¥åæå¼åæçæ°æ®æºä¸­æ°æ®éçåç§°ãè¯¥åç§°ç¨å½¢å¦âæ°æ®éåç§°@æ°æ®æºå«åâå½¢å¼æ¥è¡¨ç¤ºãå½æå¼åæç±»å(InterpolationAnalystType)ä¸º dataset æ¶ãæ­¤åæ°ä¸ºå¿éã
 * @param {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point>} [options.inputPoints] - ç¨äºåæå¼åæçç¦»æ£ç¹éåãå½æå¼åæç±»åï¼InterpolationAnalystTypeï¼ä¸º geometry æ¶ãæ­¤åæ°ä¸ºå¿éã
 * @example
 * var myInterpolationRBFAnalystParameters = new SuperMap.InterpolationRBFAnalystParameters({
 *     dataset:"SamplesP@Interpolation",
 *     smooth: 0.1,
 *     tension: 40,
 *     searchMode: "QUADTREE",
 *     maxPointCountForInterpolation: 20,
 *     maxPointCountInNode: 5,
 *     pixelFormat: "BIT16",
 *     zValueFieldName: "AVG_TMP",
 *     resolution: 3000,
 *     filterQueryParameter: {
 *         attributeFilter: ""
 *     },
 *     outputDatasetName: "myRBF"
 * });
 */

var InterpolationRBFAnalystParameters = /*#__PURE__*/function (_InterpolationAnalyst) {
  InterpolationRBFAnalystParameters_inherits(InterpolationRBFAnalystParameters, _InterpolationAnalyst);

  var _super = InterpolationRBFAnalystParameters_createSuper(InterpolationRBFAnalystParameters);

  function InterpolationRBFAnalystParameters(options) {
    var _this;

    InterpolationRBFAnalystParameters_classCallCheck(this, InterpolationRBFAnalystParameters);

    _this = _super.call(this, options);
    /**
     * @member {number} [SuperMap.InterpolationRBFAnalystParameters.prototype.smooth=0.1]
     * @description åæ»ç³»æ°ï¼å¼åä¸º 0 å° 1ï¼å¸¸ç¨åå¼å¦ 0ã0.001ã0.01ã0.1ãå 0.5ã
     * è¯¥å¼è¡¨ç¤ºæå¼å½æ°æ²çº¿ä¸ç¹çé¼è¿ç¨åº¦ï¼æ­¤æ°å¼è¶å¤§ï¼å½æ°æ²çº¿ä¸ç¹çåå·®è¶å¤§ï¼åä¹è¶å°ã
     */

    _this.smooth = 0.1;
    /**
     * @member {number} [SuperMap.InterpolationRBFAnalystParameters.prototype.tension=40]
     * @description å¼ åç³»æ°ï¼å¸¸ç¨åå¼å¦ 0ã1ã5 å 10ã
     * ç¨äºè°æ´ç»ææ æ ¼æ°æ®è¡¨é¢çç¹æ§ï¼å¼ åè¶å¤§ï¼æå¼æ¶æ¯ä¸ªç¹å¯¹è®¡ç®ç»æå½±åè¶å°ï¼åä¹è¶å¤§ã
     */

    _this.tension = 40;
    /**
     * @member {SuperMap.SearchMode} SuperMap.InterpolationRBFAnalystParameters.prototype.searchMode
     * @description æå¼è¿ç®æ¶ï¼æ¥æ¾åä¸è¿ç®ç¹çæ¹å¼ï¼æåºå®ç¹æ°æ¥æ¾ãå®é¿æ¥æ¾ãåæ¥æ¾ãå¿è®¾åæ°ã
     * å·ä½å¦ä¸ï¼
     * {KDTREE_FIXED_COUNT} ä½¿ç¨ KDTREE çåºå®ç¹æ°æ¹å¼æ¥æ¾åä¸åæåæçç¹ã
     * {KDTREE_FIXED_RADIUS} ä½¿ç¨ KDTREE çå®é¿æ¹å¼æ¥æ¾åä¸åæåæçç¹ã
     * {QUADTREE} ä½¿ç¨ QUADTREE æ¹å¼æ¥æ¾åä¸åæåæçç¹ï¼åæ¥æ¾ï¼ã
     */

    _this.searchMode = null;
    /**
     * @member {number} [SuperMap.InterpolationRBFAnalystParameters.prototype.expectedCount=12]
     * @description ãåºå®ç¹æ°æ¥æ¾ãæ¹å¼ä¸ï¼è®¾ç½®å¾æ¥æ¾çç¹æ°ï¼å³åä¸å·®å¼è¿ç®çç¹æ°ã
     */

    _this.expectedCount = 12;
    /**
     * @member {number} [SuperMap.InterpolationRBFAnalystParameters.prototype.maxPointCountForInterpolation=200]
     * @description ãåæ¥æ¾ãæ¹å¼ä¸ï¼æå¤åä¸æå¼çç¹æ°ã
     */

    _this.maxPointCountForInterpolation = 200;
    /**
     * @member {number} [SuperMap.InterpolationRBFAnalystParameters.prototype.maxPointCountInNode=50]
     * @description ãåæ¥æ¾ãæ¹å¼ä¸ï¼åä¸ªååæå¤åä¸è¿ç®ç¹æ°ã
     */

    _this.maxPointCountInNode = 50;

    if (options) {
      Util.extend(InterpolationRBFAnalystParameters_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.InterpolationRBFAnalystParameters";
    return _this;
  }
  /**
   * @function SuperMap.InterpolationRBFAnalystParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  InterpolationRBFAnalystParameters_createClass(InterpolationRBFAnalystParameters, [{
    key: "destroy",
    value: function destroy() {
      InterpolationRBFAnalystParameters_get(InterpolationRBFAnalystParameters_getPrototypeOf(InterpolationRBFAnalystParameters.prototype), "destroy", this).call(this);

      var me = this;
      me.smooth = null;
      me.tension = null;
      me.searchMode = null;
      me.expectedCount = null;
      me.maxPointCountForInterpolation = null;
      me.maxPointCountInNode = null;
    }
    /**
     * @function SuperMap.InterpolationRBFAnalystParameters.toObject
     * @param {SuperMap.InterpolationRBFAnalystParameters} datasetInterpolationRBFAnalystParameters - æ ·æ¡æå¼ï¼å¾ååºå½æ°æå¼æ³ï¼åæåæ°ç±»
     * @param {SuperMap.InterpolationRBFAnalystParameters} tempObj - æ ·æ¡æå¼ï¼å¾ååºå½æ°æå¼æ³ï¼åæåæ°å¯¹è±¡
     * @description å°æ ·æ¡æå¼ï¼å¾ååºå½æ°æå¼æ³ï¼åæåæ°å¯¹è±¡è½¬æ¢ä¸º JSON å¯¹è±¡ã
     * @returns JSON å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(datasetInterpolationRBFAnalystParameters, tempObj) {
      for (var name in datasetInterpolationRBFAnalystParameters) {
        tempObj[name] = datasetInterpolationRBFAnalystParameters[name];
      }
    }
  }]);

  return InterpolationRBFAnalystParameters;
}(InterpolationAnalystParameters);
SuperMap.InterpolationRBFAnalystParameters = InterpolationRBFAnalystParameters;
// CONCATENATED MODULE: ./src/common/iServer/InterpolationDensityAnalystParameters.js
function InterpolationDensityAnalystParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { InterpolationDensityAnalystParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { InterpolationDensityAnalystParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return InterpolationDensityAnalystParameters_typeof(obj); }

function InterpolationDensityAnalystParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function InterpolationDensityAnalystParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function InterpolationDensityAnalystParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) InterpolationDensityAnalystParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) InterpolationDensityAnalystParameters_defineProperties(Constructor, staticProps); return Constructor; }

function InterpolationDensityAnalystParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { InterpolationDensityAnalystParameters_get = Reflect.get; } else { InterpolationDensityAnalystParameters_get = function _get(target, property, receiver) { var base = InterpolationDensityAnalystParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return InterpolationDensityAnalystParameters_get(target, property, receiver || target); }

function InterpolationDensityAnalystParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = InterpolationDensityAnalystParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function InterpolationDensityAnalystParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) InterpolationDensityAnalystParameters_setPrototypeOf(subClass, superClass); }

function InterpolationDensityAnalystParameters_setPrototypeOf(o, p) { InterpolationDensityAnalystParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return InterpolationDensityAnalystParameters_setPrototypeOf(o, p); }

function InterpolationDensityAnalystParameters_createSuper(Derived) { var hasNativeReflectConstruct = InterpolationDensityAnalystParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = InterpolationDensityAnalystParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = InterpolationDensityAnalystParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return InterpolationDensityAnalystParameters_possibleConstructorReturn(this, result); }; }

function InterpolationDensityAnalystParameters_possibleConstructorReturn(self, call) { if (call && (InterpolationDensityAnalystParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return InterpolationDensityAnalystParameters_assertThisInitialized(self); }

function InterpolationDensityAnalystParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function InterpolationDensityAnalystParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function InterpolationDensityAnalystParameters_getPrototypeOf(o) { InterpolationDensityAnalystParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return InterpolationDensityAnalystParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.InterpolationDensityAnalystParameters
 * @category iServer SpatialAnalyst InterpolationAnalyst
 * @classdesc ç¹å¯åº¦å·®å¼åæåæ°ç±»ã
 * @param {Object} options - åæ°ã
 * @param {(SuperMap.Bounds|L.Bounds|ol.extent)} options.bounds - æå¼åæçèå´ï¼ç¨äºç¡®å®ç»ææ æ ¼æ°æ®éçèå´ã
 * @param {string} options.outputDatasourceName - æå¼åæç»ææ°æ®æºçåç§°ã 
 * @param {string} options.outputDatasetName - æå¼åæç»ææ°æ®éçåç§°ã 
 * @param {number} [options.searchRadius=0] - æ¥æ¾åå¾ï¼å³åä¸è¿ç®ç¹çæ¥æ¾èå´ï¼ä¸ç¹æ°æ®éåä½ç¸åã
 * @param {string} [options.zValueFieldName] - å­å¨ç¨äºè¿è¡æå¼åæçå­æ®µåç§°ï¼æå¼åæä¸æ¯æææ¬ç±»åçå­æ®µãå½æå¼åæç±»å( SuperMap.InterpolationAnalystType)ä¸º dataset æ¶ãæ­¤ä¸ºå¿éåæ°ã 
 * @param {number} [options.zValueScale=1] - ç¨äºè¿è¡æå¼åæå¼çç¼©æ¾æ¯çã 
 * @param {number} [options.resolution] - æå¼ç»ææ æ ¼æ°æ®éçåè¾¨çï¼å³ä¸ä¸ªååæä»£è¡¨çå®å°è·ç¦»ï¼ä¸ç¹æ°æ®éåä½ç¸åã
 * @param {SuperMap.FilterParameter} [options.filterQueryParameter] - å±æ§è¿æ»¤æ¡ä»¶ã
 * @param {string} [options.pixelFormat] - æå®ç»ææ æ ¼æ°æ®éå­å¨çåç´ æ ¼å¼ã
 * @param {string} [options.dataset] - ç¨æ¥åæå¼åæçæ°æ®æºä¸­æ°æ®éçåç§°ï¼è¯¥åç§°ç¨å½¢å¦ "æ°æ®éåç§°@æ°æ®æºå«å" å½¢å¼æ¥è¡¨ç¤ºãå½æå¼åæç±»åï¼SuperMap.InterpolationAnalystTypeï¼ä¸º dataset æ¶ï¼å¿è®¾åæ°ã 
 * @param {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point>} [options.inputPoints] - ç¨äºåæå¼åæçç¦»æ£ç¹éåãå½æå¼åæç±»åï¼SuperMap.InterpolationAnalystTypeï¼ä¸º geometry æ¶ï¼å¿è®¾åæ°ã
 * @extends {SuperMap.InterpolationAnalystParameters}
 * @example
 * var myInterpolationDensityAnalystParameters = new SuperMap.InterpolationDensityAnalystParameters({
 *      dataset: "SamplesP@Interpolation",
 *      searchRadius: "100000",
 *      pixelFormat: "BIT16",
 *      zValueFieldName: "AVG_TMP",
 *      resolution: 3000,
 *      filterQueryParameter: {
 *          attributeFilter: ""
 *      },
 *      outputDatasetName: "myDensity"
 * });
 */

var InterpolationDensityAnalystParameters = /*#__PURE__*/function (_InterpolationAnalyst) {
  InterpolationDensityAnalystParameters_inherits(InterpolationDensityAnalystParameters, _InterpolationAnalyst);

  var _super = InterpolationDensityAnalystParameters_createSuper(InterpolationDensityAnalystParameters);

  function InterpolationDensityAnalystParameters(options) {
    var _this;

    InterpolationDensityAnalystParameters_classCallCheck(this, InterpolationDensityAnalystParameters);

    _this = _super.call(this, options);

    if (options) {
      Util.extend(InterpolationDensityAnalystParameters_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.InterpolationDensityAnalystParameters";
    return _this;
  }
  /**
   * @function SuperMap.InterpolationDensityAnalystParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  InterpolationDensityAnalystParameters_createClass(InterpolationDensityAnalystParameters, [{
    key: "destroy",
    value: function destroy() {
      InterpolationDensityAnalystParameters_get(InterpolationDensityAnalystParameters_getPrototypeOf(InterpolationDensityAnalystParameters.prototype), "destroy", this).call(this);
    }
  }]);

  return InterpolationDensityAnalystParameters;
}(InterpolationAnalystParameters);
SuperMap.InterpolationDensityAnalystParameters = InterpolationDensityAnalystParameters;
// CONCATENATED MODULE: ./src/common/iServer/InterpolationIDWAnalystParameters.js
function InterpolationIDWAnalystParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { InterpolationIDWAnalystParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { InterpolationIDWAnalystParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return InterpolationIDWAnalystParameters_typeof(obj); }

function InterpolationIDWAnalystParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function InterpolationIDWAnalystParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function InterpolationIDWAnalystParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) InterpolationIDWAnalystParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) InterpolationIDWAnalystParameters_defineProperties(Constructor, staticProps); return Constructor; }

function InterpolationIDWAnalystParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { InterpolationIDWAnalystParameters_get = Reflect.get; } else { InterpolationIDWAnalystParameters_get = function _get(target, property, receiver) { var base = InterpolationIDWAnalystParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return InterpolationIDWAnalystParameters_get(target, property, receiver || target); }

function InterpolationIDWAnalystParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = InterpolationIDWAnalystParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function InterpolationIDWAnalystParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) InterpolationIDWAnalystParameters_setPrototypeOf(subClass, superClass); }

function InterpolationIDWAnalystParameters_setPrototypeOf(o, p) { InterpolationIDWAnalystParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return InterpolationIDWAnalystParameters_setPrototypeOf(o, p); }

function InterpolationIDWAnalystParameters_createSuper(Derived) { var hasNativeReflectConstruct = InterpolationIDWAnalystParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = InterpolationIDWAnalystParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = InterpolationIDWAnalystParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return InterpolationIDWAnalystParameters_possibleConstructorReturn(this, result); }; }

function InterpolationIDWAnalystParameters_possibleConstructorReturn(self, call) { if (call && (InterpolationIDWAnalystParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return InterpolationIDWAnalystParameters_assertThisInitialized(self); }

function InterpolationIDWAnalystParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function InterpolationIDWAnalystParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function InterpolationIDWAnalystParameters_getPrototypeOf(o) { InterpolationIDWAnalystParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return InterpolationIDWAnalystParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.InterpolationIDWAnalystParameters
 * @category  iServer SpatialAnalyst InterpolationAnalyst
 * @classdesc åè·ç¦»å ææå¼ï¼IDWï¼åæåæ°ç±»ã
 * @param {Object} options - åæ°ã
 * @param {(SuperMap.Bounds|L.Bounds|ol.extent)} options.bounds - æå¼åæçèå´ï¼ç¨äºç¡®å®ç»ææ æ ¼æ°æ®éçèå´ã 
 * @param {string} options.searchMode - æå¼è¿ç®æ¶ï¼æ¥æ¾åä¸è¿ç®ç¹çæ¹å¼ï¼æ¯æåºå®ç¹æ°æ¥æ¾ãå®é¿æ¥æ¾ã 
 * @param {string} options.outputDatasetName - æå¼åæç»ææ°æ®éçåç§°ã 
 * @param {string} options.outputDatasourceName - æå¼åæç»ææ°æ®æºçåç§°ã 
 * @param {string} [options.zValueFieldName] - å­å¨ç¨äºè¿è¡æå¼åæçå­æ®µåç§°ï¼æå¼åæä¸æ¯æææ¬ç±»åçå­æ®µãå½æå¼åæç±»å(SuperMap.InterpolationAnalystType)ä¸º dataset æ¶ï¼æ­¤ä¸ºå¿éåæ°ã
 * @param {number} [options.expectedCount=12] - ãåºå®ç¹æ°æ¥æ¾ãæ¹å¼ä¸ï¼è®¾ç½®å¾æ¥æ¾çç¹æ°ï¼å³åä¸å·®å¼è¿ç®çç¹æ°ã
 * @param {number} [options.searchRadius=0] - ãå®é¿æ¥æ¾ãæ¹å¼ä¸ï¼è®¾ç½®æ¥æ¾åå¾ï¼å³åä¸è¿ç®ç¹çæ¥æ¾èå´ï¼ä¸ç¹æ°æ®éåä½ç¸åã 
 * @param {number} [options.power=2] - è·ç¦»æéè®¡ç®çå¹æ¬¡ã 
 * @param {number} [options.zValueScale=1] - ç¨äºè¿è¡æå¼åæå¼çç¼©æ¾æ¯çã 
 * @param {number} [options.resolution] - æå¼ç»ææ æ ¼æ°æ®éçåè¾¨çï¼å³ä¸ä¸ªååæä»£è¡¨çå®å°è·ç¦»ï¼ä¸ç¹æ°æ®éåä½ç¸åã 
 * @param {SuperMap.FilterParameter} [options.filterQueryParameter] - å±æ§è¿æ»¤æ¡ä»¶ã 
 * @param {string} [options.pixelFormat] - æå®ç»ææ æ ¼æ°æ®éå­å¨çåç´ æ ¼å¼ã 
 * @param {string} [options.dataset] - è¦ç¨æ¥åæå¼åæçæ°æ®æºä¸­æ°æ®éçåç§°ãè¯¥åç§°ç¨å½¢å¦âæ°æ®éåç§°@æ°æ®æºå«åâå½¢å¼æ¥è¡¨ç¤ºãå½æå¼åæç±»å(SuperMap.InterpolationAnalystType)ä¸º dataset æ¶ï¼å¿è®¾åæ°ã 
 * @param {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point>} [options.inputPoints] - ç¨äºåæå¼åæçç¦»æ£ç¹éåãå½æå¼åæç±»åï¼SuperMap.InterpolationAnalystTypeï¼ä¸º geometry æ¶ï¼å¿è®¾åæ°ã 
 * @extends {SuperMap.InterpolationAnalystParameters}
 * @example ä¾å¦ï¼
 * var myInterpolationIDWAnalystParameters = new SuperMap.InterpolationIDWAnalystParameters({
 *      dataset:"SamplesP@Interpolation",
 *      power: 2,
 *      searchMode: "KDTREE_FIXED_COUNT",
 *      expectedCount: 12,
 *      pixelFormat: "BIT16",
 *      zValueFieldName: "AVG_TMP",
 *      resolution: 3000,
 *      filterQueryParameter: {
 *          attributeFilter: ""
 *      },
 *      outputDatasetName: "myIDW"
 * });
 *
 */

var InterpolationIDWAnalystParameters = /*#__PURE__*/function (_InterpolationAnalyst) {
  InterpolationIDWAnalystParameters_inherits(InterpolationIDWAnalystParameters, _InterpolationAnalyst);

  var _super = InterpolationIDWAnalystParameters_createSuper(InterpolationIDWAnalystParameters);

  function InterpolationIDWAnalystParameters(options) {
    var _this;

    InterpolationIDWAnalystParameters_classCallCheck(this, InterpolationIDWAnalystParameters);

    _this = _super.call(this, options);
    /**
     * @member {number} [SuperMap.InterpolationIDWAnalystParameters.prototype.power=2]
     * @description è·ç¦»æéè®¡ç®çå¹æ¬¡ã
     * è¯¥å¼å³å®äºæå¼ä¸éçéåº¦ï¼å¹æ¬¡è¶å¤§ï¼éè·ç¦»çå¢å¤§æå¼ä¸éè¶å¿«ï¼è·ç¦»é¢æµç¹è¶è¿çç¹çæå¼ä¹è¶å°ã
     * çè®ºä¸ï¼åæ°å¼å¿é¡»å¤§äº0ï¼ä½æ¯0.5å°3ä¹é´æ¶è¿ç®ç»ææ´åçï¼å æ­¤æ¨èå¼ä¸º0.5~3ã
     */

    _this.power = 2;
    /**
     * @member {SuperMap.SearchMode} SuperMap.InterpolationIDWAnalystParameters.prototype.searchMode
     * @description æå¼è¿ç®æ¶ï¼æ¥æ¾åä¸è¿ç®ç¹çæ¹å¼ï¼æ¯æåºå®ç¹æ°æ¥æ¾ãå®é¿æ¥æ¾ã 
     * å·ä½å¦ä¸ï¼
     * {KDTREE_FIXED_COUNT} ä½¿ç¨ KDTREE çåºå®ç¹æ°æ¹å¼æ¥æ¾åä¸åæåæçç¹ã
     * {KDTREE_FIXED_RADIUS} ä½¿ç¨ KDTREE çå®é¿æ¹å¼æ¥æ¾åä¸åæåæçç¹ã
     */

    _this.searchMode = null;
    /**
     * @member {number} [SuperMap.InterpolationIDWAnalystParameters.prototype.expectedCount=12]
     * @description ãåºå®ç¹æ°æ¥æ¾ãæ¹å¼ä¸ï¼è®¾ç½®å¾æ¥æ¾çç¹æ°ï¼å³åä¸å·®å¼è¿ç®çç¹æ°ã
     */

    _this.expectedCount = 12;

    if (options) {
      Util.extend(InterpolationIDWAnalystParameters_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.InterpolationIDWAnalystParameters";
    return _this;
  }
  /**
   * @function SuperMap.InterpolationIDWAnalystParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  InterpolationIDWAnalystParameters_createClass(InterpolationIDWAnalystParameters, [{
    key: "destroy",
    value: function destroy() {
      InterpolationIDWAnalystParameters_get(InterpolationIDWAnalystParameters_getPrototypeOf(InterpolationIDWAnalystParameters.prototype), "destroy", this).call(this);

      var me = this;
      me.power = null;
      me.searchMode = null;
      me.expectedCount = null;
    }
  }]);

  return InterpolationIDWAnalystParameters;
}(InterpolationAnalystParameters);
SuperMap.InterpolationIDWAnalystParameters = InterpolationIDWAnalystParameters;
// CONCATENATED MODULE: ./src/common/iServer/InterpolationKrigingAnalystParameters.js
function InterpolationKrigingAnalystParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { InterpolationKrigingAnalystParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { InterpolationKrigingAnalystParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return InterpolationKrigingAnalystParameters_typeof(obj); }

function InterpolationKrigingAnalystParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function InterpolationKrigingAnalystParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function InterpolationKrigingAnalystParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) InterpolationKrigingAnalystParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) InterpolationKrigingAnalystParameters_defineProperties(Constructor, staticProps); return Constructor; }

function InterpolationKrigingAnalystParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { InterpolationKrigingAnalystParameters_get = Reflect.get; } else { InterpolationKrigingAnalystParameters_get = function _get(target, property, receiver) { var base = InterpolationKrigingAnalystParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return InterpolationKrigingAnalystParameters_get(target, property, receiver || target); }

function InterpolationKrigingAnalystParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = InterpolationKrigingAnalystParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function InterpolationKrigingAnalystParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) InterpolationKrigingAnalystParameters_setPrototypeOf(subClass, superClass); }

function InterpolationKrigingAnalystParameters_setPrototypeOf(o, p) { InterpolationKrigingAnalystParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return InterpolationKrigingAnalystParameters_setPrototypeOf(o, p); }

function InterpolationKrigingAnalystParameters_createSuper(Derived) { var hasNativeReflectConstruct = InterpolationKrigingAnalystParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = InterpolationKrigingAnalystParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = InterpolationKrigingAnalystParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return InterpolationKrigingAnalystParameters_possibleConstructorReturn(this, result); }; }

function InterpolationKrigingAnalystParameters_possibleConstructorReturn(self, call) { if (call && (InterpolationKrigingAnalystParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return InterpolationKrigingAnalystParameters_assertThisInitialized(self); }

function InterpolationKrigingAnalystParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function InterpolationKrigingAnalystParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function InterpolationKrigingAnalystParameters_getPrototypeOf(o) { InterpolationKrigingAnalystParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return InterpolationKrigingAnalystParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.InterpolationKrigingAnalystParameters
 * @category iServer SpatialAnalyst InterpolationAnalyst
 * @classdesc ååéæå¼åæåæ°ç±»ã
 * @description éè¿è¯¥ç±»å¯ä»¥è®¾ç½®ååéæå¼åææéçåæ°ã
 * ååéï¼Krigingï¼æ³ä¸ºå°ç»è®¡å­¦ä¸ä¸ç§ç©ºé´æ°æ®åæå¤çæ¹æ³ï¼ä¸»è¦çç®çæ¯å©ç¨åæ°æ®ç¹é´åå¼æ°ï¼varianceï¼çå¤§å°æ¥æ¨æ±æä¸æªç¥ç¹ä¸åå·²ç¥ç¹çæéå³ç³»ï¼
 * åç±åæ°æ®ç¹çå¼åå¶ä¸æªç¥ç¹çæéå³ç³»æ¨æ±æªç¥ç¹çå¼ãKriging æ³æå¤§çç¹è²ä¸ä»æ¯æä¾ä¸ä¸ªæå°ä¼°è®¡è¯¯å·®çé¢æµå¼ï¼å¹¶ä¸å¯æç¡®çæåºè¯¯å·®å¼çå¤§å°ã
 * ä¸è¬èè¨ï¼è®¸å¤å°è´¨åæ°ï¼å¦å°å½¢é¢ï¼æ¬èº«å³å·æè¿ç»­æ§ï¼æå¨ä¸æ®µè·ç¦»åçä»»ä¸¤ç¹å¿æç©ºé´ä¸çå³ç³»ãåä¹ï¼å¨ä¸ä¸è§åé¢ä¸çä¸¤ç¹è¥ç¸è·çè¿ï¼
 * åå¨ç»è®¡æä¹ä¸å¯è§ä¸ºäºä¸ºç¬ç« (stastically indepedent)ãè¿ç§éè·ç¦»èæ¹åçç©ºé´ä¸è¿ç»­æ§ï¼å¯ç¨ååå¼å¾ (semivariogram) æ¥è¡¨ç°ã
 * å æ­¤ï¼è¥æ³ç±å·²ç¥çæ£ä¹±ç¹æ¥æ¨æ±æä¸æªç¥ç¹çå¼ï¼åå¯å©ç¨ååå¼å¾æ¨æ±åå·²ç¥ç¹ä¸æªç¥ç¹çç©ºé´å³ç³»ï¼å³ä»¥ä¸åä¸ªåæ°ã
 * ç¶åï¼ç±æ­¤ç©ºé´åæ°æ¨æ±ååå¼æ°ï¼ç±åæ°æ®ç¹é´çååå¼æ°å¯æ¨æ±æªç¥ç¹ä¸å·²ç¥ç¹é´çæéå³ç³»ï¼è¿èæ¨æ±åºæªç¥ç¹çå¼ã<br>
 *
 * Â· åéå¼ï¼nuggetï¼ï¼å½éæ ·ç¹é´è·ä¸º0æ¶ï¼çè®ºä¸ååå¼å½æ°å¼ä¸º0ï¼ä½æ¶é´ä¸ä¸¤éæ ·ç¹éå¸¸æ¥è¿æ¶ååå¼å½æ°å¼å¹¶ä¸ä¸º0ï¼å³äº§çäºä¸å¾æç¤ºçåéæåºï¼
 * å¯¹åºçååå¼å½æ°å¼ä¸ºåéå¼ãåéå¼å¯è½ç±äºæµéè¯¯å·®æèç©ºé´åå¼äº§çã<br>
 *
 * Â· åºå°å¼ï¼sillï¼ï¼éçéæ ·ç¹é´è·çä¸æ­å¢å¤§ï¼ååå¼å½æ°çå¼è¶åä¸ä¸ªç¨³å®çå¸¸æ°ï¼è¯¥å¸¸æ°æä¸ºåºå°å¼ãå°è¾¾åºå°å¼åï¼ååå¼å½æ°çå¼ä¸åééæ ·ç¹é´è·èæ¹åï¼
 *   å³å¤§äºæ­¤é´è·çéæ ·ç¹ä¸åå·æç©ºé´ç¸å³æ§ã<br>
 *
 * Â· ååºå°å¼ï¼åºå°å¼ä¸åéå¼çå·®å¼ã<br>
 *
 * Â· èªç¸å³éå¼ï¼rangeï¼ï¼ä¹ç§°åç¨ï¼æ¯ååå¼å½æ°å¼è¾¾å°åºå°å¼æ¶ï¼éæ ·ç¹çé´è·ãè¶è¿èªç¸å³éå¼çéæ ·ç¹ä¸åå·æç©ºé´ç¸å³æ§ï¼å°ä¸å¯¹é¢æµç»æäº§çå½±åã<br>
 *
 * ç±ä¸è¿°å¯ç¥ï¼ååå¼å½æ°æ¯ååéæå¼çå³é®ï¼å æ­¤éæ©åéçååå¼å½æ°æ¨¡åéå¸¸éè¦ï¼SuperMap æä¾äºä»¥ä¸ä¸ç§ååå¼å½æ°æ¨¡åï¼<br>
 *
 * Â· ææ°åï¼EXPONENTIALï¼ï¼éç¨äºç©ºé´ç¸å³å³ç³»éæ ·æ¬é´è·çå¢å æææ°éåçæåµï¼å¶ç©ºé´èªç¸å³å³ç³»å¨æ ·æ¬é´è·çæ ç©·è¿å¤å®å¨æ¶å¤±ã<br>
 *
 * Â· çåï¼SPHERICALï¼ï¼éç¨äºç©ºé´èªç¸å³å³ç³»éæ ·æ¬é´è·çå¢å èéæ¸åå°ï¼ç´å°è¶åºä¸å®çè·ç¦»æ¶ç©ºé´èªç¸å³å³ç³»æ¶å¤±çæåµã<br>
 *
 * Â· é«æ¯åï¼GAUSSIANï¼ï¼éç¨äºååå¼å½æ°å¼æ¸è¿å°é¼è¿åºå°å¼çæåµã<br>
 *
 * ååå¼å½æ°ä¸­ï¼æä¸ä¸ªå³é®åæ°å³æå¼çå­æ®µå¼çææï¼å¹³åå¼ï¼ï¼ç±äºå¯¹äºæ­¤åæ°çä¸åå¤çæ¹æ³èè¡çåºäºä¸åç Kriging æ¹æ³ãSuperMapçå·®å¼åè½åºäºä»¥ä¸ä¸ç§å¸¸ç¨ Kriging ç®æ³ï¼<br>
 *
 * 1. ç®åååéï¼Simple Krigingï¼ï¼è¯¥æ¹æ³åå®ç¨äºæå¼çå­æ®µå¼çææï¼å¹³åå¼ï¼å·²ç¥çæä¸å¸¸æ°ã<br>
 *
 * 2. æ®éååéï¼Krigingï¼ï¼è¯¥æ¹æ³åå®ç¨äºæå¼çå­æ®µå¼çææï¼å¹³åå¼ï¼æªç¥ä¸æå®ãå®å©ç¨ä¸å®çæ°å­¦å½æ°ï¼éè¿å¯¹ç»å®çç©ºé´ç¹è¿è¡æåæ¥ä¼°ç®ååæ ¼çå¼ï¼<br>
 *      çææ ¼ç½æ°æ®éãå®ä¸ä»å¯ä»¥çæä¸ä¸ªè¡¨é¢ï¼è¿å¯ä»¥ç»åºé¢æµç»æçç²¾åº¦æèç¡®å®æ§çåº¦éãå æ­¤ï¼æ­¤æ¹æ³è®¡ç®ç²¾åº¦è¾é«ï¼å¸¸ç¨äºå°å­¦é¢åã
 *
 * 3. æ³ååéï¼Universal Krigingï¼ï¼è¯¥æ¹æ³åå®ç¨äºæå¼çå­æ®µå¼çææï¼å¹³åå¼ï¼æ¯æªç¥çåéãå¨æ ·ç¹æ°æ®ä¸­å­å¨æç§ä¸»å¯¼è¶å¿ä¸è¯¥è¶å¿å¯ä»¥éè¿æä¸ä¸ªç¡®å®<br>
 *      çå½æ°æèå¤é¡¹å¼è¿è¡æåçæåµä¸ï¼éç¨æ³ååéæå¼æ³ã
 *
 * ååéæ³çä¼ç¹æ¯ä»¥ç©ºé´ç»è®¡å­¦ä½ä¸ºå¶åå®ççè®ºåºç¡ï¼ç©çå«ä¹æç¡®ï¼ä¸ä½è½ä¼°è®¡æµå®åæ°çç©ºé´åå¼åå¸ï¼èä¸è¿å¯ä»¥ä¼°ç®åæ°çæ¹å·®åå¸ãååéæ³çç¼ºç¹æ¯è®¡ç®æ­¥éª¤è¾ç¦çï¼
 * è®¡ç®éå¤§ï¼ä¸åå¼å½æ°ææ¶éè¦æ ¹æ®ç»éªäººä¸ºéå®ã
 * @param {Object} options - åæ°ã 
 * @param {string} options.type - ååéæå¼çç±»åã 
 * @param {(SuperMap.Bounds|L.Bounds|ol.extent)} options.bounds - æå¼åæçèå´ï¼ç¨äºç¡®å®ç»ææ æ ¼æ°æ®éçèå´ã 
 * @param {string} options.searchMode - æå¼è¿ç®æ¶ï¼æ¥æ¾åä¸è¿ç®ç¹çæ¹å¼ï¼æåºå®ç¹æ°æ¥æ¾ãå®é¿æ¥æ¾ãåæ¥æ¾ã 
 * @param {string} options.outputDatasetName - æå¼åæç»ææ°æ®éçåç§°ã 
 * @param {string} options.outputDatasourceName - æå¼åæç»ææ°æ®æºçåç§°ã
 * @param {string} [options.zValueFieldName] - å­å¨ç¨äºè¿è¡æå¼åæçå­æ®µåç§°ï¼æå¼åæä¸æ¯æææ¬ç±»åçå­æ®µãå½æå¼åæç±»å(SuperMap.InterpolationAnalystType)ä¸º dataset æ¶ï¼æ­¤ä¸ºå¿éåæ°ã 
 * @param {number} [options.mean] - ãç®åååéãç±»åä¸ï¼æå¼å­æ®µçå¹³åå¼ã 
 * @param {number} [options.angle=0] - ååéç®æ³ä¸­æè½¬è§åº¦å¼ã 
 * @param {number} [options.nugget=0] - ååéç®æ³ä¸­åéæåºå¼ã 
 * @param {number} [options.range=0] - ååéç®æ³ä¸­èªç¸å³éå¼ï¼åä½ä¸åæ°æ®éåä½ç¸åã 
 * @param {number} [options.sill=0] - ååéç®æ³ä¸­åºå°å¼ã 
 * @param {string} [options.variogramMode="SPHERICAL"] - ååéæå¼æ¶çååå½æ°ç±»åã 
 * @param {string} [options.exponent='exp1'] - ãæ³ååéãç±»åä¸ï¼ç¨äºæå¼çæ ·ç¹æ°æ®ä¸­è¶å¿é¢æ¹ç¨çé¶æ°ï¼å¯éå¼ä¸º exp1ãexp2ã
 * @param {number} [options.expectedCount=12] - ãåºå®ç¹æ°æ¥æ¾ãæ¹å¼ä¸ï¼è®¾ç½®å¾æ¥æ¾çç¹æ°ï¼ãå®é¿æ¥æ¾ãæ¹å¼ä¸ï¼è®¾ç½®æ¥æ¾çæå°ç¹æ°ã 
 * @param {number} [options.searchRadius=0] - ãå®é¿æ¥æ¾ãæ¹å¼ä¸ï¼è®¾ç½®åä¸è¿ç®ç¹çæ¥æ¾èå´ã  
 * @param {number} [options.maxPointCountForInterpolation=200] - ãåæ¥æ¾ãæ¹å¼ä¸ï¼è®¾ç½®æå¤åä¸æå¼çç¹æ°ã 
 * @param {number} [options.maxPointCountInNode=50] - ãåæ¥æ¾ãæ¹å¼ä¸ï¼è®¾ç½®åä¸ªååæå¤åä¸è¿ç®ç¹æ°ã 
 * @param {number} [options.zValueScale=1] - ç¨äºè¿è¡æå¼åæå¼çç¼©æ¾æ¯çã 
 * @param {number} [options.resolution] - æå¼ç»ææ æ ¼æ°æ®éçåè¾¨çï¼å³ä¸ä¸ªååæä»£è¡¨çå®å°è·ç¦»ï¼ä¸ç¹æ°æ®éåä½ç¸åã 
 * @param {SuperMap.FilterParameter} [options.filterQueryParameter] - å±æ§è¿æ»¤æ¡ä»¶ã 
 * @param {string} [options.pixelFormat] - æå®ç»ææ æ ¼æ°æ®éå­å¨çåç´ æ ¼å¼ã 
 * @param {string} [options.dataset] - è¦ç¨æ¥åæå¼åæçæ°æ®æºä¸­æ°æ®éçåç§°ãè¯¥åç§°ç¨å½¢å¦ âæ°æ®éåç§°@æ°æ®æºå«åâ å½¢å¼æ¥è¡¨ç¤ºãå½æå¼åæç±»åï¼SuperMap.InterpolationAnalystTypeï¼ä¸º dataset æ¶ã
 * @param {Array.<SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point>} [options.inputPoints] - ç¨äºåæå¼åæçç¦»æ£ç¹éåãå½æå¼åæç±»åï¼InterpolationAnalystTypeï¼ä¸º geometry æ¶ã
 * @extends {SuperMap.InterpolationAnalystParameters}
 * @example ä¾å¦ï¼
 * var myInterpolationKrigingAnalystParameters = new SuperMap.InterpolationKrigingAnalystParameters({
 *     dataset:"SamplesP@Interpolation",
 *     type: "KRIGING",
 *     angle: 0,
 *     mean: 5,
 *     nugget: 30,
 *     range: 50,
 *     sill: 300,
 *     variogramMode: "EXPONENTIAL",
 *     searchMode: "QUADTREE",
 *     maxPointCountForInterpolation: 20,
 *     maxPointCountInNode: 5,
 *     pixelFormat: "BIT16",
 *     zValueFieldName: "AVG_TMP",
 *     resolution: 30000,
 *     filterQueryParameter: {
 *         attributeFilter: ""
 *     },
 *     outputDatasetName: "myKriging"
 * });
 *
 */

var InterpolationKrigingAnalystParameters = /*#__PURE__*/function (_InterpolationAnalyst) {
  InterpolationKrigingAnalystParameters_inherits(InterpolationKrigingAnalystParameters, _InterpolationAnalyst);

  var _super = InterpolationKrigingAnalystParameters_createSuper(InterpolationKrigingAnalystParameters);

  function InterpolationKrigingAnalystParameters(options) {
    var _this;

    InterpolationKrigingAnalystParameters_classCallCheck(this, InterpolationKrigingAnalystParameters);

    _this = _super.call(this, options);
    /**
     * @member {SuperMap.InterpolationAlgorithmType} SuperMap.InterpolationKrigingAnalystParameters.prototype.type
     * @description ååéæå¼çç±»åã
     * å·ä½å¦ä¸ï¼<br>
     * {KRIGING} æ®éååéæå¼æ³ã
     * {SimpleKriging} ç®åååéæå¼æ³ã
     * {UniversalKriging} æ³ååéæå¼æ³ã
     */

    _this.type = null;
    /**
     * @member {number} SuperMap.InterpolationKrigingAnalystParameters.prototype.mean
     * @description ãç®åååéãæ¹å¼ä¸ï¼æå¼å­æ®µçå¹³åå¼ã
     * å³éæ ·ç¹æå¼å­æ®µå¼æ»åé¤ä»¥éæ ·ç¹æ°ç®ã
     */

    _this.mean = null;
    /**
     * @member {number} [SuperMap.InterpolationKrigingAnalystParameters.prototype.angle=0]
     * @description ååéç®æ³ä¸­æè½¬è§åº¦å¼ã
     * æ­¤è§åº¦å¼æç¤ºäºæ¯ä¸ªæ¥æ¾é»åç¸å¯¹äºæ°´å¹³æ¹åéæ¶éæè½¬çè§åº¦ã
     */

    _this.angle = 0;
    /**
     * @member {number} [SuperMap.InterpolationKrigingAnalystParameters.prototype.nugget=0]
     * @description ååéç®æ³ä¸­åéæåºå¼ã
     */

    _this.nugget = 0;
    /**
     * @member {number} [SuperMap.InterpolationKrigingAnalystParameters.prototype.range=0]
     * @description ååéç®æ³ä¸­èªç¸å³éå¼ï¼åä½ä¸åæ°æ®éåä½ç¸åã
     */

    _this.range = 0;
    /**
     * @member {number} [SuperMap.InterpolationKrigingAnalystParameters.prototype.sill=0]
     * @description ååéç®æ³ä¸­åºå°å¼ã
     */

    _this.sill = 0;
    /**
     * @member {SuperMap.VariogramMode} [SuperMap.InterpolationKrigingAnalystParameters.prototype.variogramMode=SuperMap.VariogramMode.SPHERICAL]
     * @description ååéæå¼æ¶çååå½æ°ç±»åã
     * ç¨æ·æéæ©çååå½æ°ç±»åä¼å½±åæªç¥ç¹çé¢æµï¼ç¹å«æ¯æ²çº¿å¨åç¹å¤çä¸åå½¢ç¶æéè¦æä¹ã
     * æ²çº¿å¨åç¹å¤è¶é¡ï¼åè¾è¿é¢åå¯¹è¯¥é¢æµå¼çå½±åå°±è¶å¤§ï¼å æ­¤è¾åºè¡¨é¢å°±ä¼è¶ä¸åæ»ã
     */

    _this.variogramMode = VariogramMode.SPHERICAL;
    /**
     * @member {SuperMap.Exponent} [SuperMap.InterpolationKrigingAnalystParameters.prototype.exponent=SuperMap.Exponent.EXP1]
     * @description ãæ³ååéãç±»åä¸ï¼ç¨äºæå¼çæ ·ç¹æ°æ®ä¸­è¶å¿é¢æ¹ç¨çé¶æ°ã
     */

    _this.exponent = Exponent.EXP1;
    /**
     * @member {SuperMap.SearchMode} SuperMap.InterpolationKrigingAnalystParameters.prototype.searchMode
     * @description æå¼è¿ç®æ¶ï¼æ¥æ¾åä¸è¿ç®ç¹çæ¹å¼ï¼æåºå®ç¹æ°æ¥æ¾ãå®é¿æ¥æ¾ãåæ¥æ¾ãå¿è®¾åæ°ã
     * ç®åååéåæ³ååéä¸æ¯æåæ¥æ¾ã
     * å·ä½å¦ä¸ï¼<br>
     * {KDTREE_FIXED_COUNT} ä½¿ç¨ KDTREE çåºå®ç¹æ°æ¹å¼æ¥æ¾åä¸åæåæçç¹ã<br>
     * {KDTREE_FIXED_RADIUS} ä½¿ç¨ KDTREE çå®é¿æ¹å¼æ¥æ¾åä¸åæåæçç¹ã<br>
     * {QUADTREE} ä½¿ç¨ QUADTREE æ¹å¼æ¥æ¾åä¸åæåæçç¹ï¼åæ¥æ¾ï¼ã
     */

    _this.searchMode = null;
    /**
     * @member {number} [SuperMap.InterpolationKrigingAnalystParameters.prototype.expectedCount=12]
     * @description ãåºå®ç¹æ°æ¥æ¾ãæ¹å¼ä¸ï¼è®¾ç½®å¾æ¥æ¾çç¹æ°ï¼å³åä¸å·®å¼è¿ç®çç¹æ°ï¼é»è®¤å¼ä¸º12ã
     * ãå®é¿æ¥æ¾ãæ¹å¼ä¸ï¼è®¾ç½®æ¥æ¾çæå°ç¹æ°ï¼é»è®¤å¼ä¸º12ã
     */

    _this.expectedCount = 12;
    /**
     * @member {number} [SuperMap.InterpolationKrigingAnalystParameters.prototype.maxPointCountForInterpolation=200]
     * @description ãåæ¥æ¾ãæ¹å¼ä¸ï¼æå¤åä¸æå¼çç¹æ°ã
     * ä»ç¨äºæ®éååéæå¼ï¼ç®åååéåæ³ååéä¸æ¯æåæ¥æ¾ã
     */

    _this.maxPointCountForInterpolation = 200;
    /**
     * @member {number} [SuperMap.InterpolationKrigingAnalystParameters.prototype.maxPointCountForInterpolation=50]
     * @description ãåæ¥æ¾ãæ¹å¼ä¸ï¼è®¾ç½®åä¸ªååæå¤åä¸è¿ç®ç¹æ°ã
     * ä»ç¨äºæ®éååéæå¼ï¼ç®åååéåæ³ååéä¸æ¯æåæ¥æ¾ã
     */

    _this.maxPointCountInNode = 50;

    if (options) {
      Util.extend(InterpolationKrigingAnalystParameters_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.InterpolationKrigingAnalystParameters";
    return _this;
  }
  /**
   * @function SuperMap.InterpolationKrigingAnalystParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  InterpolationKrigingAnalystParameters_createClass(InterpolationKrigingAnalystParameters, [{
    key: "destroy",
    value: function destroy() {
      InterpolationKrigingAnalystParameters_get(InterpolationKrigingAnalystParameters_getPrototypeOf(InterpolationKrigingAnalystParameters.prototype), "destroy", this).call(this);

      var me = this;
      me.type = null;
      me.mean = null;
      me.angle = null;
      me.nugget = null;
      me.range = null;
      me.sill = null;
      me.variogramMode = null;
      me.exponent = null;
      me.searchMode = null;
      me.expectedCount = null;
      me.maxPointCountForInterpolation = null;
      me.maxPointCountInNode = null;
    }
  }]);

  return InterpolationKrigingAnalystParameters;
}(InterpolationAnalystParameters);
SuperMap.InterpolationKrigingAnalystParameters = InterpolationKrigingAnalystParameters;
// CONCATENATED MODULE: ./src/common/iServer/InterpolationAnalystService.js
function InterpolationAnalystService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { InterpolationAnalystService_typeof = function _typeof(obj) { return typeof obj; }; } else { InterpolationAnalystService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return InterpolationAnalystService_typeof(obj); }

function InterpolationAnalystService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function InterpolationAnalystService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function InterpolationAnalystService_createClass(Constructor, protoProps, staticProps) { if (protoProps) InterpolationAnalystService_defineProperties(Constructor.prototype, protoProps); if (staticProps) InterpolationAnalystService_defineProperties(Constructor, staticProps); return Constructor; }

function InterpolationAnalystService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { InterpolationAnalystService_get = Reflect.get; } else { InterpolationAnalystService_get = function _get(target, property, receiver) { var base = InterpolationAnalystService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return InterpolationAnalystService_get(target, property, receiver || target); }

function InterpolationAnalystService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = InterpolationAnalystService_getPrototypeOf(object); if (object === null) break; } return object; }

function InterpolationAnalystService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) InterpolationAnalystService_setPrototypeOf(subClass, superClass); }

function InterpolationAnalystService_setPrototypeOf(o, p) { InterpolationAnalystService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return InterpolationAnalystService_setPrototypeOf(o, p); }

function InterpolationAnalystService_createSuper(Derived) { var hasNativeReflectConstruct = InterpolationAnalystService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = InterpolationAnalystService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = InterpolationAnalystService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return InterpolationAnalystService_possibleConstructorReturn(this, result); }; }

function InterpolationAnalystService_possibleConstructorReturn(self, call) { if (call && (InterpolationAnalystService_typeof(call) === "object" || typeof call === "function")) { return call; } return InterpolationAnalystService_assertThisInitialized(self); }

function InterpolationAnalystService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function InterpolationAnalystService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function InterpolationAnalystService_getPrototypeOf(o) { InterpolationAnalystService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return InterpolationAnalystService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/








/**
 * @class SuperMap.InterpolationAnalystService
 * @category iServer SpatialAnalyst InterpolationAnalyst
 * @classdesc æå¼åææå¡ç±»ã
 * æå¼åæå¯ä»¥å°æéçéæ ·ç¹æ°æ®ï¼éè¿æå¼ç®æ³å¯¹éæ ·ç¹å¨å´çæ°å¼æåµè¿è¡é¢æµï¼å¯ä»¥ææ¡ç ç©¶åºååæ°æ®çæ»ä½åå¸ç¶åµï¼ä»èä½¿éæ ·çç¦»æ£ç¹ä¸ä»ä»åæ å¶æå¨ä½ç½®çæ°å¼æåµï¼
 * è¿å¯ä»¥åæ åºåçæ°å¼åå¸ãç®åSuperMap iServerçæå¼åè½æä¾ä»ç¹æ°æ®éæå¼å¾å°æ æ ¼æ°æ®éçåè½ï¼æ¯æä»¥ä¸å¸¸ç¨çåææ¹æ³ï¼
 * åæ¬ï¼åè·ç¦»å ææå¼ãååéï¼Krigingï¼æå¼æ³ãæ ·æ¡ï¼å¾ååºå½æ°ï¼Radial Basis Functionï¼æå¼ãç¹å¯åº¦æå¼ã
 * @param {string} url - æå¡çè®¿é®å°åãå¦ http://localhost:8090/iserver/services/spatialanalyst-changchun/restjsr/spatialanalystã
 * @param {Object} options - åæ°ã</br>
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @extends {SuperMap.SpatialAnalystBase}
 * @example ä¾å¦ï¼
 * (start code)
 * var myTInterpolationAnalystService = new SuperMap.InterpolationAnalystService(url);
 * myTInterpolationAnalystService.events.on({
     *     "processCompleted": processCompleted,
     *     "processFailed": processFailed
     *     }
 * );
 * (end)
 *
 */

var InterpolationAnalystService = /*#__PURE__*/function (_SpatialAnalystBase) {
  InterpolationAnalystService_inherits(InterpolationAnalystService, _SpatialAnalystBase);

  var _super = InterpolationAnalystService_createSuper(InterpolationAnalystService);

  function InterpolationAnalystService(url, options) {
    var _this;

    InterpolationAnalystService_classCallCheck(this, InterpolationAnalystService);

    _this = _super.call(this, url, options);
    /**
     * @member {string} SuperMap.InterpolationAnalystService.prototype.mode
     * @description æå¼åæç±»åã
     */

    _this.mode = null;

    if (options) {
      Util.extend(InterpolationAnalystService_assertThisInitialized(_this), options);
    }

    return _this;
  }
  /**
   * @function SuperMap.InterpolationAnalystService.prototype.destroy
   * @description éæ¾èµæº,å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  InterpolationAnalystService_createClass(InterpolationAnalystService, [{
    key: "destroy",
    value: function destroy() {
      InterpolationAnalystService_get(InterpolationAnalystService_getPrototypeOf(InterpolationAnalystService.prototype), "destroy", this).call(this);

      this.mode = null;
      this.CLASS_NAME = "SuperMap.InterpolationAnalystService";
    }
    /**
     * @function SuperMap.InterpolationAnalystService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.InterpolationAnalystParameters} parameter - æå¼åæåæ°ç±»ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(parameter) {
      var parameterObject = {};
      var me = this;

      if (parameter instanceof InterpolationDensityAnalystParameters) {
        me.mode = 'Density';

        if (parameter.InterpolationAnalystType === 'geometry') {
          me.url = Util.urlPathAppend(me.url, 'geometry/interpolation/density');
        } else {
          me.url = Util.urlPathAppend(me.url, 'datasets/' + parameter.dataset + '/interpolation/density');
        }
      } else if (parameter instanceof InterpolationIDWAnalystParameters) {
        me.mode = 'IDW';

        if (parameter.InterpolationAnalystType === 'geometry') {
          me.url = Util.urlPathAppend(me.url, 'geometry/interpolation/idw');
        } else {
          me.url = Util.urlPathAppend(me.url, 'datasets/' + parameter.dataset + '/interpolation/idw');
        }
      } else if (parameter instanceof InterpolationRBFAnalystParameters) {
        me.mode = 'RBF';

        if (parameter.InterpolationAnalystType === 'geometry') {
          me.url = Util.urlPathAppend(me.url, 'geometry/interpolation/rbf');
        } else {
          me.url = Util.urlPathAppend(me.url, 'datasets/' + parameter.dataset + '/interpolation/rbf');
        }
      } else if (parameter instanceof InterpolationKrigingAnalystParameters) {
        me.mode = 'Kriging';

        if (parameter.InterpolationAnalystType === 'geometry') {
          me.url = Util.urlPathAppend(me.url, 'geometry/interpolation/kriging');
        } else {
          me.url = Util.urlPathAppend(me.url, 'datasets/' + parameter.dataset + '/interpolation/kriging');
        }
      }

      InterpolationAnalystParameters.toObject(parameter, parameterObject);
      var jsonParameters = Util.toJSON(parameterObject);
      me.url = Util.urlAppend(me.url, 'returnContent=true');
      me.request({
        method: "POST",
        data: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return InterpolationAnalystService;
}(SpatialAnalystBase);
SuperMap.InterpolationAnalystService = InterpolationAnalystService;
// CONCATENATED MODULE: ./src/common/iServer/KernelDensityJobParameter.js
function KernelDensityJobParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function KernelDensityJobParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function KernelDensityJobParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) KernelDensityJobParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) KernelDensityJobParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.KernelDensityJobParameter
 * @category iServer ProcessingService DensityAnalyst
 * @classdesc å¯åº¦åæä»»å¡åæ°ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {string} options.datasetName - æ°æ®éåã 
 * @param {string} options.fields - æéç´¢å¼ã 
 * @param {(SuperMap.Bounds|L.Bounds|ol.extent)} [options.query] - åæèå´ï¼é»è®¤ä¸ºå¨å¾èå´ï¼ã 
 * @param {number} [options.resolution=80] - åè¾¨çã 
 * @param {number} [options.method=0] - åææ¹æ³ã 
 * @param {number} [options.meshType=0] - åæç±»åã 
 * @param {number} [options.radius=300] - åæçå½±ååå¾ã
 * @param {SuperMap.OutputSetting} [options.output] - è¾åºåæ°è®¾ç½®ã
 * @param {SuperMap.MappingParameters} [options.mappingParameters] - åæåç»æå¯è§åçåæ°ç±»ã   
 */

var KernelDensityJobParameter = /*#__PURE__*/function () {
  function KernelDensityJobParameter(options) {
    KernelDensityJobParameter_classCallCheck(this, KernelDensityJobParameter);

    if (!options) {
      return;
    }
    /**
     * @member {string} SuperMap.KernelDensityJobParameter.prototype.datasetName
     * @description æ°æ®éåã
     */


    this.datasetName = "";
    /**
     * @member {SuperMap.Bounds|L.Bounds|ol.extent} [SuperMap.KernelDensityJobParameter.prototype.query]
     * @description åæèå´ã 
     */

    this.query = "";
    /**
     * @member {number} [SuperMap.KernelDensityJobParameter.prototype.resolution=80]
     * @description ç½æ ¼å¤§å°ã
     */

    this.resolution = 80;
    /**
     * @member {number} [SuperMap.KernelDensityJobParameter.prototype.method=0]
     * @description åææ¹æ³ã
     */

    this.method = 0;
    /**
     * @member {number} [SuperMap.KernelDensityJobParameter.prototype.meshType=0]
     * @description åæç±»åã
     */

    this.meshType = 0;
    /**
     * @member {string} SuperMap.KernelDensityJobParameter.prototype.fields
     * @description æéç´¢å¼ã
     */

    this.fields = "";
    /**
     * @member {number} [SuperMap.KernelDensityJobParameter.prototype.radius=300]
     * @description åæçå½±ååå¾ã
     */

    this.radius = 300;
    /**
     * @member {SuperMap.AnalystSizeUnit} [SuperMap.KernelDensityJobParameter.prototype.meshSizeUnit=SuperMap.AnalystSizeUnit.METER]
     * @description ç½æ ¼å¤§å°åä½ã
     */

    this.meshSizeUnit = AnalystSizeUnit.METER;
    /**
     * @member {SuperMap.AnalystSizeUnit} [SuperMap.KernelDensityJobParameter.prototype.radiusUnit=SuperMap.AnalystSizeUnit.METER]
     * @description æç´¢åå¾åä½ã
     */

    this.radiusUnit = AnalystSizeUnit.METER;
    /**
     * @member {SuperMap.AnalystAreaUnit} [SuperMap.KernelDensityJobParameter.prototype.areaUnit=SuperMap.AnalystAreaUnit.SQUAREMILE]
     * @description é¢ç§¯åä½ã
     */

    this.areaUnit = AnalystAreaUnit.SQUAREMILE;
    /**
     * @member {SuperMap.OutputSetting} SuperMap.KernelDensityJobParameter.prototype.output
     * @description è¾åºåæ°è®¾ç½®ç±»
     */

    this.output = null;
    /**
     * @member {SuperMap.MappingParameters} [SuperMap.KernelDensityJobParameter.prototype.mappingParameters]
     * @description åæåç»æå¯è§åçåæ°ç±»ã
     */

    this.mappingParameters = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.KernelDensityJobParameter";
  }
  /**
   * @function SuperMap.KernelDensityJobParameter.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  KernelDensityJobParameter_createClass(KernelDensityJobParameter, [{
    key: "destroy",
    value: function destroy() {
      this.datasetName = null;
      this.query = null;
      this.resolution = null;
      this.method = null;
      this.radius = null;
      this.meshType = null;
      this.fields = null;
      this.meshSizeUnit = null;
      this.radiusUnit = null;
      this.areaUnit = null;

      if (this.output instanceof OutputSetting) {
        this.output.destroy();
        this.output = null;
      }

      if (this.mappingParameters instanceof MappingParameters) {
        this.mappingParameters.destroy();
        this.mappingParameters = null;
      }
    }
    /**
     * @function SuperMap.KernelDensityJobParameter.toObject
     * @param {SuperMap.KernelDensityJobParameter} kernelDensityJobParameter - å¯åº¦åæä»»å¡åæ°ç±»ã
     * @param {SuperMap.KernelDensityJobParameter} tempObj - å¯åº¦åæä»»å¡åæ°å¯¹è±¡ã
     * @description å°å¯åº¦åæä»»å¡åæ°å¯¹è±¡è½¬æ¢ä¸º JSON å¯¹è±¡ã
     * @returns JSON å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(kernelDensityJobParameter, tempObj) {
      for (var name in kernelDensityJobParameter) {
        if (name === "datasetName") {
          tempObj['input'] = tempObj['input'] || {};
          tempObj['input'][name] = kernelDensityJobParameter[name];
          continue;
        }

        if (name === "output") {
          tempObj['output'] = tempObj['output'] || {};
          tempObj['output'] = kernelDensityJobParameter[name];
          continue;
        }

        tempObj['analyst'] = tempObj['analyst'] || {};

        if (name === 'query' && kernelDensityJobParameter[name]) {
          tempObj['analyst'][name] = kernelDensityJobParameter[name].toBBOX();
        } else {
          tempObj['analyst'][name] = kernelDensityJobParameter[name];
        }

        if (name === 'mappingParameters') {
          tempObj['analyst'][name] = tempObj['analyst'][name] || {};
          tempObj['analyst']['mappingParameters'] = kernelDensityJobParameter[name];
        }
      }
    }
  }]);

  return KernelDensityJobParameter;
}();
SuperMap.KernelDensityJobParameter = KernelDensityJobParameter;
// CONCATENATED MODULE: ./src/common/iServer/KernelDensityJobsService.js
function KernelDensityJobsService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { KernelDensityJobsService_typeof = function _typeof(obj) { return typeof obj; }; } else { KernelDensityJobsService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return KernelDensityJobsService_typeof(obj); }

function KernelDensityJobsService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function KernelDensityJobsService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function KernelDensityJobsService_createClass(Constructor, protoProps, staticProps) { if (protoProps) KernelDensityJobsService_defineProperties(Constructor.prototype, protoProps); if (staticProps) KernelDensityJobsService_defineProperties(Constructor, staticProps); return Constructor; }

function KernelDensityJobsService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { KernelDensityJobsService_get = Reflect.get; } else { KernelDensityJobsService_get = function _get(target, property, receiver) { var base = KernelDensityJobsService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return KernelDensityJobsService_get(target, property, receiver || target); }

function KernelDensityJobsService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = KernelDensityJobsService_getPrototypeOf(object); if (object === null) break; } return object; }

function KernelDensityJobsService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) KernelDensityJobsService_setPrototypeOf(subClass, superClass); }

function KernelDensityJobsService_setPrototypeOf(o, p) { KernelDensityJobsService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return KernelDensityJobsService_setPrototypeOf(o, p); }

function KernelDensityJobsService_createSuper(Derived) { var hasNativeReflectConstruct = KernelDensityJobsService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = KernelDensityJobsService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = KernelDensityJobsService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return KernelDensityJobsService_possibleConstructorReturn(this, result); }; }

function KernelDensityJobsService_possibleConstructorReturn(self, call) { if (call && (KernelDensityJobsService_typeof(call) === "object" || typeof call === "function")) { return call; } return KernelDensityJobsService_assertThisInitialized(self); }

function KernelDensityJobsService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function KernelDensityJobsService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function KernelDensityJobsService_getPrototypeOf(o) { KernelDensityJobsService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return KernelDensityJobsService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.KernelDensityJobsService
 * @category  iServer ProcessingService DensityAnalyst
 * @classdesc æ ¸å¯åº¦åææå¡ç±»
 * @extends {SuperMap.ProcessingServiceBase}
 * @param {string} url -æ ¸å¯åº¦åææå¡å°åã
 * @param {Object} options - äº¤äºæå¡æ¶æéå¯éåæ°ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var KernelDensityJobsService = /*#__PURE__*/function (_ProcessingServiceBas) {
  KernelDensityJobsService_inherits(KernelDensityJobsService, _ProcessingServiceBas);

  var _super = KernelDensityJobsService_createSuper(KernelDensityJobsService);

  function KernelDensityJobsService(url, options) {
    var _this;

    KernelDensityJobsService_classCallCheck(this, KernelDensityJobsService);

    _this = _super.call(this, url, options);
    _this.url = Util.urlPathAppend(_this.url, 'spatialanalyst/density');
    _this.CLASS_NAME = "SuperMap.KernelDensityJobsService";
    return _this;
  }
  /**
   * @function SuperMap.KernelDensityJobsService.prototype.destroy
   * @override
   */


  KernelDensityJobsService_createClass(KernelDensityJobsService, [{
    key: "destroy",
    value: function destroy() {
      KernelDensityJobsService_get(KernelDensityJobsService_getPrototypeOf(KernelDensityJobsService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.KernelDensityJobsService.prototype.getKernelDensityJobs
     * @description è·åæ ¸å¯åº¦åæä»»å¡
     */

  }, {
    key: "getKernelDensityJobs",
    value: function getKernelDensityJobs() {
      KernelDensityJobsService_get(KernelDensityJobsService_getPrototypeOf(KernelDensityJobsService.prototype), "getJobs", this).call(this, this.url);
    }
    /**
     * @function SuperMap.KernelDensityJobsService.prototype.getKernelDensityJobs
     * @description è·åæå®idçæ ¸å¯åº¦åææå¡
     * @param {string} id - æå®è¦è·åæ°æ®çid
     */

  }, {
    key: "getKernelDensityJob",
    value: function getKernelDensityJob(id) {
      KernelDensityJobsService_get(KernelDensityJobsService_getPrototypeOf(KernelDensityJobsService.prototype), "getJobs", this).call(this, Util.urlPathAppend(this.url, id));
    }
    /**
     * @function SuperMap.KernelDensityJobsService.prototype.addKernelDensityJob
     * @description æ°å»ºæ ¸å¯åº¦åææå¡
     * @param {SuperMap.KernelDensityJobParameter} params - åå»ºä¸ä¸ªç©ºé´åæçè¯·æ±åæ°ã
     * @param {number} seconds - å¼å§åå»ºåï¼è·ååå»ºæåç»æçæ¶é´é´éã
     */

  }, {
    key: "addKernelDensityJob",
    value: function addKernelDensityJob(params, seconds) {
      KernelDensityJobsService_get(KernelDensityJobsService_getPrototypeOf(KernelDensityJobsService.prototype), "addJob", this).call(this, this.url, params, KernelDensityJobParameter, seconds);
    }
  }]);

  return KernelDensityJobsService;
}(ProcessingServiceBase);
SuperMap.KernelDensityJobsService = KernelDensityJobsService;
// CONCATENATED MODULE: ./src/common/iServer/LabelMatrixCell.js
function LabelMatrixCell_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @class SuperMap.LabelMatrixCell
 * @category iServer Map Theme
 * @classdesc ç©éµæ ç­¾åç´ æ½è±¡ç±»ã
 * @description è¯¥ç±»å¯ä»¥åå« n*n ä¸ªç©éµæ ç­¾åç´ ï¼ç©éµæ ç­¾åç´ çç±»åå¯ä»¥æ¯å¾çï¼ç¬¦å·ï¼æ ç­¾ä¸é¢å¾ç­ã
 *              ç¬¦å·ç±»åçç©éµæ ç­¾åç´ ç±»ãå¾çç±»åçç©éµæ ç­¾åç´ ç±»åä¸é¢å¾ç±»åçç©éµæ ç­¾åç´ ç±»åç»§æ¿èªè¯¥ç±»ã
 */

var LabelMatrixCell = function LabelMatrixCell() {
  LabelMatrixCell_classCallCheck(this, LabelMatrixCell);

  this.CLASS_NAME = "LabelMatrixCell";
};
SuperMap.LabelMatrixCell = LabelMatrixCell;
// CONCATENATED MODULE: ./src/common/iServer/LabelImageCell.js
function LabelImageCell_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { LabelImageCell_typeof = function _typeof(obj) { return typeof obj; }; } else { LabelImageCell_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return LabelImageCell_typeof(obj); }

function LabelImageCell_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function LabelImageCell_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function LabelImageCell_createClass(Constructor, protoProps, staticProps) { if (protoProps) LabelImageCell_defineProperties(Constructor.prototype, protoProps); if (staticProps) LabelImageCell_defineProperties(Constructor, staticProps); return Constructor; }

function LabelImageCell_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) LabelImageCell_setPrototypeOf(subClass, superClass); }

function LabelImageCell_setPrototypeOf(o, p) { LabelImageCell_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return LabelImageCell_setPrototypeOf(o, p); }

function LabelImageCell_createSuper(Derived) { var hasNativeReflectConstruct = LabelImageCell_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = LabelImageCell_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = LabelImageCell_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return LabelImageCell_possibleConstructorReturn(this, result); }; }

function LabelImageCell_possibleConstructorReturn(self, call) { if (call && (LabelImageCell_typeof(call) === "object" || typeof call === "function")) { return call; } return LabelImageCell_assertThisInitialized(self); }

function LabelImageCell_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function LabelImageCell_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function LabelImageCell_getPrototypeOf(o) { LabelImageCell_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return LabelImageCell_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.LabelImageCell
 * @category iServer Map Theme
 * @classdesc å¾çç±»åçç©éµæ ç­¾åç´ ç±»ã
 * @description è¯¥ç±»ç»§æ¿èª {@link SuperMap.LabelMatrixCell}ç±»ï¼ä¸»è¦å¯¹ç©éµæ ç­¾ä¸­çä¸é¢å¾ç±»åçç©éµæ ç­¾åç´ è¿è¡è®¾ç½®ã
 * ç©éµæ ç­¾ä¸é¢å¾æ¯æ ç­¾ä¸é¢å¾ï¼ThemeLabelï¼çä¸ç§ï¼å¶ä¸­ç©éµæ ç­¾ä¸­çå¡«ååç´ åå¯åä¸ºå¾çç±»åï¼{@link SuperMap.LabelImageCell}ï¼ã
 * ç¬¦å·ç±»åï¼{@link SuperMap.LabelSymbolCell}ï¼ãä¸é¢å¾ç±»åï¼{@link SuperMap.LabelThemeCell}ï¼ä¸ç§ï¼è¯¥ç±»æ¯è¿ä¸ç§ç±»åçç©éµæ ç­¾åç´ å¶ä¸­çä¸ç§ï¼
 * ç¨äºå®ä¹ç¬¦å·ç±»åçç©éµæ ç­¾ï¼å¦ç¬¦å· ID å­æ®µåç§°ï¼ç¬¦å· ID ä¸ SuperMap æ¡é¢äº§åä¸­ç¹ãçº¿ãé¢ç¬¦å·ç ID å¯¹åºï¼ ãå¤§å°ç­ã
 * ç¨æ·å¨å®ç°ç©éµæ ç­¾ä¸é¢å¾æ¶åªéå°å®ä¹å¥½çç©éµæ ç­¾åç´ èµå¼äº {@link SuperMap.ThemeLabel.matrixCells} å±æ§å³å¯ãmatrixCells æ¯ä¸ä¸ªäºç»´æ°ç»ï¼
 * æ¯ä¸ç»´å¯ä»¥æ¯ä»»æç±»åçç©éµæ ç­¾åç´ ç»æçæ°ç»ï¼ä¹å¯æ¯åä¸ªæ ç­¾åç´ ç»æçæ°ç»ï¼å³æ°ç»ä¸­åªæä¸ä¸ªåç´ ï¼ã
 * @extends {SuperMap.LabelMatrixCell}
 * @param {Object} options - åæ°ã 
 * @param {number} [options.height=0] - è®¾ç½®å¾ççé«åº¦ï¼åä½ä¸ºæ¯«ç±³ã
 * @param {string} [options.pathField] - è®¾ç½®ç©éµæ ç­¾åç´ æä½¿ç¨å¾ççè·¯å¾ã 
 * @param {number} [options.rotation=0.0] - å¾ççæè½¬è§åº¦ãéæ¶éæ¹åä¸ºæ­£æ¹åï¼åä½ä¸ºåº¦ï¼ç²¾ç¡®å°0.1åº¦ã
 * @param {number} [options.width=0] - è®¾ç½®å¾ççå®½åº¦ï¼åä½ä¸ºæ¯«ç±³ã
 * @param {boolean} [options.sizeFixed=false] - æ¯å¦åºå®å¾ççå¤§å°ã
 */

var LabelImageCell = /*#__PURE__*/function (_LabelMatrixCell) {
  LabelImageCell_inherits(LabelImageCell, _LabelMatrixCell);

  var _super = LabelImageCell_createSuper(LabelImageCell);

  function LabelImageCell(options) {
    var _this;

    LabelImageCell_classCallCheck(this, LabelImageCell);

    _this = _super.call(this, options);
    /**
     * @member {number} SuperMap.LabelImageCell.prototype.height
     * @description è®¾ç½®å¾ççé«åº¦ï¼åä½ä¸ºæ¯«ç±³ã
     */

    _this.height = 0;
    /**
     * @member {string} SuperMap.LabelImageCell.prototype.pathField
     * @description è®¾ç½®ç©éµæ ç­¾åç´ æä½¿ç¨çå¾çè·¯å¾å¯¹åºçå­æ®µåã
     */

    _this.pathField = null;
    /**
     * @member {number} [SuperMap.LabelImageCell.prototype.rotation=0.0]
     * @description å¾ççæè½¬è§åº¦ãéæ¶éæ¹åä¸ºæ­£æ¹åï¼åä½ä¸ºåº¦ï¼ç²¾ç¡®å°0.1åº¦ã
     */

    _this.rotation = 0.0;
    /**
     * @member {number} SuperMap.LabelImageCell.prototype.width
     * @description è®¾ç½®å¾ççå®½åº¦ï¼åä½ä¸ºæ¯«ç±³ã
     */

    _this.width = 0;
    /**
     * @member {boolean} [SuperMap.LabelImageCell.prototype.sizeFixed=false]
     * @description æ¯å¦åºå®å¾ççå¤§å°ã
     */

    _this.sizeFixed = false;
    /**
     * @member {string} SuperMap.LabelImageCell.prototype.type
     * @description å¶ä½ç©éµä¸é¢å¾æ¶æ¯å¿é¡»çã
     */

    _this.type = "IMAGE";

    if (options) {
      Util.extend(LabelImageCell_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.LabelImageCell";
    return _this;
  }
  /**
   * @function SuperMap.LabelImageCell.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  LabelImageCell_createClass(LabelImageCell, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.height = null;
      me.pathField = null;
      me.rotation = null;
      me.width = null;
      me.sizeFixed = null;
    }
  }]);

  return LabelImageCell;
}(LabelMatrixCell);
SuperMap.LabelImageCell = LabelImageCell;
// CONCATENATED MODULE: ./src/common/iServer/LabelSymbolCell.js
function LabelSymbolCell_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { LabelSymbolCell_typeof = function _typeof(obj) { return typeof obj; }; } else { LabelSymbolCell_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return LabelSymbolCell_typeof(obj); }

function LabelSymbolCell_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function LabelSymbolCell_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function LabelSymbolCell_createClass(Constructor, protoProps, staticProps) { if (protoProps) LabelSymbolCell_defineProperties(Constructor.prototype, protoProps); if (staticProps) LabelSymbolCell_defineProperties(Constructor, staticProps); return Constructor; }

function LabelSymbolCell_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) LabelSymbolCell_setPrototypeOf(subClass, superClass); }

function LabelSymbolCell_setPrototypeOf(o, p) { LabelSymbolCell_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return LabelSymbolCell_setPrototypeOf(o, p); }

function LabelSymbolCell_createSuper(Derived) { var hasNativeReflectConstruct = LabelSymbolCell_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = LabelSymbolCell_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = LabelSymbolCell_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return LabelSymbolCell_possibleConstructorReturn(this, result); }; }

function LabelSymbolCell_possibleConstructorReturn(self, call) { if (call && (LabelSymbolCell_typeof(call) === "object" || typeof call === "function")) { return call; } return LabelSymbolCell_assertThisInitialized(self); }

function LabelSymbolCell_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function LabelSymbolCell_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function LabelSymbolCell_getPrototypeOf(o) { LabelSymbolCell_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return LabelSymbolCell_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.LabelSymbolCell
 * @category  iServer Map Theme 
 * @classdesc ç¬¦å·ç±»åçç©éµæ ç­¾åç´ ç±»ã
 * @description è¯¥ç±»ç»§æ¿èª {@link SuperMap.LabelMatrixCell}ç±»ï¼ä¸»è¦å¯¹ç©éµæ ç­¾ä¸­çä¸é¢å¾ç±»åçç©éµæ ç­¾åç´ è¿è¡è®¾ç½®ã
 * ç©éµæ ç­¾ä¸é¢å¾æ¯æ ç­¾ä¸é¢å¾ï¼{@link SuperMap.ThemeLabel}ï¼çä¸ç§ï¼å¶ä¸­ç©éµæ ç­¾ä¸­çå¡«ååç´ åå¯åä¸ºå¾çç±»åï¼{@link SuperMap.LabelImageCell}ï¼ã
 * ç¬¦å·ç±»åï¼{@link SuperMap.LabelSymbolCell}ï¼ãä¸é¢å¾ç±»åï¼{@link SuperMap.LabelThemeCell}ï¼ä¸ç§ï¼è¯¥ç±»æ¯è¿ä¸ç§ç±»åçç©éµæ ç­¾åç´ å¶ä¸­çä¸ç§ï¼
 * ç¨äºå®ä¹ç¬¦å·ç±»åçç©éµæ ç­¾ï¼å¦ç¬¦å· ID å­æ®µåç§°ï¼ç¬¦å· ID ä¸ SuperMap æ¡é¢äº§åä¸­ç¹ãçº¿ãé¢ç¬¦å·ç ID å¯¹åºï¼ ãå¤§å°ç­ã
 * ç¨æ·å¨å®ç°ç©éµæ ç­¾ä¸é¢å¾æ¶åªéå°å®ä¹å¥½çç©éµæ ç­¾åç´ èµå¼äº {@link SuperMap.ThemeLabel.matrixCells} å±æ§å³å¯ãmatrixCells å±æ¯ä¸ä¸ªäºç»´æ°ç»ï¼
 * æ¯ä¸ç»´å¯ä»¥æ¯ä»»æç±»åçç©éµæ ç­¾åç´ ç»æçæ°ç»ï¼ä¹å¯æ¯åä¸ªæ ç­¾åç´ ç»æçæ°ç»ï¼å³æ°ç»ä¸­åªæä¸ä¸ªåç´ ï¼ã
 * @extends {SuperMap.LabelMatrixCell}
 * @param {Object} options - åæ°ã 
 * @param {SuperMap.ServerStyle} options.style - è·åæè®¾ç½®ç¬¦å·æ ·å¼ã 
 * @param {string} options.symbolIDField - ç¬¦å· ID æç¬¦å· ID æå¯¹åºçå­æ®µåç§°ã
 */

var LabelSymbolCell = /*#__PURE__*/function (_LabelMatrixCell) {
  LabelSymbolCell_inherits(LabelSymbolCell, _LabelMatrixCell);

  var _super = LabelSymbolCell_createSuper(LabelSymbolCell);

  function LabelSymbolCell(options) {
    var _this;

    LabelSymbolCell_classCallCheck(this, LabelSymbolCell);

    _this = _super.call(this, options);
    /**
     * @member {SuperMap.ServerStyle} SuperMap.LabelSymbolCell.prototype.style
     * @description è·åæè®¾ç½®ç¬¦å·æ ·å¼ââ {@link SuperMap.ServerStyle} å¯¹è±¡ï¼åæ¬ç¬¦å·å¤§å°ï¼{@link SuperMap.ServerStyle.markerSize}ï¼
     *              åç¬¦å·æè½¬ï¼{@link SuperMap.ServerStyle.markerAngle}ï¼è§åº¦ï¼å¶ä¸­ç¨äºè®¾ç½®ç¬¦å· ID çå±æ§ï¼{@link SuperMap.ServerStyle.markerSymbolID}ï¼å¨æ­¤å¤ä¸èµ·ä½ç¨ã
     */

    _this.style = new ServerStyle();
    /**
     * @member {string} SuperMap.LabelSymbolCell.prototype.symbolIDField
     * @description è·åæè®¾ç½®ç¬¦å· ID æç¬¦å· ID æå¯¹åºçå­æ®µåç§°ã
     */

    _this.symbolIDField = null;
    /**
     * @member {string} SuperMap.LabelSymbolCell.prototype.type
     * @description å¶ä½ç©éµä¸é¢å¾æ¶æ¯å¿é¡»çã
     */

    _this.type = "SYMBOL";

    if (options) {
      Util.extend(LabelSymbolCell_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.LabelSymbolCell";
    return _this;
  }
  /**
   * @function SuperMap.LabelSymbolCell.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  LabelSymbolCell_createClass(LabelSymbolCell, [{
    key: "destroy",
    value: function destroy() {
      var me = this;

      if (me.style) {
        me.style.destroy();
        me.style = null;
      }

      me.symbolIDField = null;
    }
  }]);

  return LabelSymbolCell;
}(LabelMatrixCell);
SuperMap.LabelSymbolCell = LabelSymbolCell;
// CONCATENATED MODULE: ./src/common/iServer/LabelThemeCell.js
function LabelThemeCell_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { LabelThemeCell_typeof = function _typeof(obj) { return typeof obj; }; } else { LabelThemeCell_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return LabelThemeCell_typeof(obj); }

function LabelThemeCell_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function LabelThemeCell_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function LabelThemeCell_createClass(Constructor, protoProps, staticProps) { if (protoProps) LabelThemeCell_defineProperties(Constructor.prototype, protoProps); if (staticProps) LabelThemeCell_defineProperties(Constructor, staticProps); return Constructor; }

function LabelThemeCell_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) LabelThemeCell_setPrototypeOf(subClass, superClass); }

function LabelThemeCell_setPrototypeOf(o, p) { LabelThemeCell_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return LabelThemeCell_setPrototypeOf(o, p); }

function LabelThemeCell_createSuper(Derived) { var hasNativeReflectConstruct = LabelThemeCell_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = LabelThemeCell_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = LabelThemeCell_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return LabelThemeCell_possibleConstructorReturn(this, result); }; }

function LabelThemeCell_possibleConstructorReturn(self, call) { if (call && (LabelThemeCell_typeof(call) === "object" || typeof call === "function")) { return call; } return LabelThemeCell_assertThisInitialized(self); }

function LabelThemeCell_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function LabelThemeCell_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function LabelThemeCell_getPrototypeOf(o) { LabelThemeCell_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return LabelThemeCell_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.LabelThemeCell
 * @category iServer Map Theme
 * @classdesc ä¸é¢å¾ç±»åçç©éµæ ç­¾åç´ ç±»ã
 * @description è¯¥ç±»ç»§æ¿èª {@link SuperMap.LabelMatrixCell} ç±»ï¼ä¸»è¦å¯¹ç©éµæ ç­¾ä¸­çä¸é¢å¾ç±»åçç©éµæ ç­¾åç´ è¿è¡è®¾ç½®ã
 *              ç©éµæ ç­¾ä¸é¢å¾æ¯æ ç­¾ä¸é¢å¾ï¼{@link SuperMap.ThemeLabel}ï¼çä¸ç§ï¼å¶ä¸­ç©éµæ ç­¾ä¸­çå¡«ååç´ åå¯åä¸ºå¾çç±»åï¼{@link SuperMap.LabelImageCell}ï¼ã
 *              ç¬¦å·ç±»åï¼{@link SuperMap.LabelSymbolCell}ï¼ãä¸é¢å¾ç±»åï¼{@link SuperMap.LabelThemeCell}ï¼ä¸ç§ï¼è¯¥ç±»æ¯è¿ä¸ç§ç±»åçç©éµæ ç­¾åç´ å¶ä¸­çä¸ç§ï¼
 *              ç¨äºå®ä¹ç¬¦å·ç±»åçç©éµæ ç­¾ï¼å¦ç¬¦å· ID å­æ®µåç§°ï¼ç¬¦å· ID ä¸ SuperMap æ¡é¢äº§åä¸­ç¹ãçº¿ãé¢ç¬¦å·ç ID å¯¹åºï¼ ãå¤§å°ç­ã
 *              ç¨æ·å¨å®ç°ç©éµæ ç­¾ä¸é¢å¾æ¶åªéå°å®ä¹å¥½çç©éµæ ç­¾åç´ èµå¼äº {@link SuperMap.ThemeLabel.matrixCells} å±æ§å³å¯ãmatrixCells å±æ¯ä¸ä¸ªäºç»´æ°ç»ï¼
 *              æ¯ä¸ç»´å¯ä»¥æ¯ä»»æç±»åçç©éµæ ç­¾åç´ ç»æçæ°ç»ï¼ä¹å¯æ¯åä¸ªæ ç­¾åç´ ç»æçæ°ç»ï¼å³æ°ç»ä¸­åªæä¸ä¸ªåç´ ï¼ã
 * @extends {SuperMap.LabelMatrixCell}
 * @param {Object} options -åæ°ã 
 * @param {SuperMap.ThemeLabel} options.themeLabel - ä½¿ç¨ä¸é¢å¾å¯¹è±¡ä½ä¸ºç©éµæ ç­¾çä¸ä¸ªåç´ ã
 */

var LabelThemeCell = /*#__PURE__*/function (_LabelMatrixCell) {
  LabelThemeCell_inherits(LabelThemeCell, _LabelMatrixCell);

  var _super = LabelThemeCell_createSuper(LabelThemeCell);

  function LabelThemeCell(options) {
    var _this;

    LabelThemeCell_classCallCheck(this, LabelThemeCell);

    _this = _super.call(this, options);
    /**
     * @member {SuperMap.ThemeLabel} SuperMap.LabelThemeCell.prototype.themeLabel
     * @description ä½¿ç¨ä¸é¢å¾å¯¹è±¡ä½ä¸ºç©éµæ ç­¾çä¸ä¸ªåç´ ã
     */

    _this.themeLabel = new ThemeLabel();
    /**
     * @member {string} SuperMap.LabelThemeCell.prototype.type
     * @description å¶ä½ç©éµä¸é¢å¾æ¶æ¯å¿é¡»çã
     */

    _this.type = "THEME";

    if (options) {
      Util.extend(LabelThemeCell_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = " SuperMap.LabelThemeCell";
    return _this;
  }
  /**
   * @function SuperMap.LabelThemeCell.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  LabelThemeCell_createClass(LabelThemeCell, [{
    key: "destroy",
    value: function destroy() {
      var me = this;

      if (me.themeLabel) {
        me.themeLabel.destroy();
        me.themeLabel = null;
      }
    }
  }]);

  return LabelThemeCell;
}(LabelMatrixCell);
SuperMap.LabelThemeCell = LabelThemeCell;
// CONCATENATED MODULE: ./src/common/iServer/LayerStatus.js
function LayerStatus_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function LayerStatus_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function LayerStatus_createClass(Constructor, protoProps, staticProps) { if (protoProps) LayerStatus_defineProperties(Constructor.prototype, protoProps); if (staticProps) LayerStatus_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.LayerStatus
 * @category iServer Map Theme
 * @classdesc å­å¾å±æ¾ç¤ºåæ°ç±»ã
 * @description è¯¥ç±»å­å¨äºåä¸ªå­å¾å±çåå­åæ¯å¦å¯è§çç¶æã
 * @param {Object} options - åæ°ã
 * @param {string} options.layerName - è·åæè®¾ç½®å¾å±åç§°ã
 * @param {boolean} [options.isVisible=true] - è·åæè®¾ç½®å¾å±æ¯å¦å¯è§ï¼true è¡¨ç¤ºå¯è§ã
 * @param {string} [options.displayFilter] - å¾å±æ¾ç¤º SQL è¿æ»¤æ¡ä»¶ã
 */

var LayerStatus = /*#__PURE__*/function () {
  function LayerStatus(options) {
    LayerStatus_classCallCheck(this, LayerStatus);

    /**
     * @member {string} SuperMap.LayerStatus.prototype.layerName
     * @description è·åæè®¾ç½®å¾å±åç§°ã
     */
    this.layerName = null;
    /**
     * @member {boolean} SuperMap.LayerStatus.prototype.isVisible
     * @description è·åæè®¾ç½®å¾å±æ¯å¦å¯è§ï¼true è¡¨ç¤ºå¯è§ã
     */

    this.isVisible = null;
    /**
     * @member {string} [SuperMap.LayerStatus.prototype.displayFilter]
     * @description å¾å±æ¾ç¤º SQL è¿æ»¤æ¡ä»¶ï¼å¦ layerStatus.displayFilter = "smid < 10"ï¼è¡¨ç¤ºä»æ¾ç¤º smid å¼å°äº 10 çå¯¹è±¡ã
     */

    this.displayFilter = null;
    /**
     * @member {Object} [SuperMap.LayerStatus.prototype.fieldValuesDisplayFilter]
     * @property {Array.<number>} values - è¦è¿æ»¤çå¼ã
     * @property {string} fieldName - è¦è¿æ»¤çå­æ®µåç§°åªæ¯ææ°å­ç±»åçå­æ®µã
     * @property {string} fieldValuesDisplayMode - ç®åæä¸¤ä¸ª DISPLAY/DISABLEãå½ä¸º DISPLAY æ¶ï¼è¡¨ç¤ºåªæ¾ç¤ºä»¥ä¸è®¾ç½®çç¸åºå±æ§å¼çè¦ç´ ï¼å¦åè¡¨ç¤ºä¸æ¾ç¤ºä»¥ä¸è®¾ç½®çç¸åºå±æ§å¼çè¦ç´ ã
     */

    this.fieldValuesDisplayFilter = null;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.LayerStatus";
  }
  /**
   * @function SuperMap.LayerStatus.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  LayerStatus_createClass(LayerStatus, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.layerName = null;
      me.isVisible = null;
      me.displayFilter = null;
    }
    /**
     * @function SuperMap.LayerStatus.prototype.toJSON
     * @description çæå¯¹åºç JSONã
     * @returns {Object} å¯¹åºç JSONã
     */

  }, {
    key: "toJSON",
    value: function toJSON() {
      var json = '{';
      json += '"type":"UGC",';
      var v = [];

      if (this.layerName) {
        v.push('"name":"' + this.layerName + '"');
        v.push('"visible":' + this.isVisible);
      }

      if (this.displayFilter) {
        v.push('"displayFilter":"' + this.displayFilter + '"');
      }

      if (this.minScale || this.minScale == 0) {
        v.push('"minScale":' + this.minScale);
      }

      if (this.maxScale || this.maxScale == 0) {
        v.push('"maxScale":' + this.maxScale);
      }

      if (this.fieldValuesDisplayFilter) {
        v.push('"fieldValuesDisplayFilter":' + Util.toJSON(this.fieldValuesDisplayFilter));
      }

      json += v;
      json += '}';
      return json;
    }
  }]);

  return LayerStatus;
}();
SuperMap.LayerStatus = LayerStatus;
// CONCATENATED MODULE: ./src/common/iServer/MapService.js
function MapService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { MapService_typeof = function _typeof(obj) { return typeof obj; }; } else { MapService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return MapService_typeof(obj); }

function MapService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function MapService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function MapService_createClass(Constructor, protoProps, staticProps) { if (protoProps) MapService_defineProperties(Constructor.prototype, protoProps); if (staticProps) MapService_defineProperties(Constructor, staticProps); return Constructor; }

function MapService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { MapService_get = Reflect.get; } else { MapService_get = function _get(target, property, receiver) { var base = MapService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return MapService_get(target, property, receiver || target); }

function MapService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = MapService_getPrototypeOf(object); if (object === null) break; } return object; }

function MapService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) MapService_setPrototypeOf(subClass, superClass); }

function MapService_setPrototypeOf(o, p) { MapService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return MapService_setPrototypeOf(o, p); }

function MapService_createSuper(Derived) { var hasNativeReflectConstruct = MapService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = MapService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = MapService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return MapService_possibleConstructorReturn(this, result); }; }

function MapService_possibleConstructorReturn(self, call) { if (call && (MapService_typeof(call) === "object" || typeof call === "function")) { return call; } return MapService_assertThisInitialized(self); }

function MapService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function MapService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function MapService_getPrototypeOf(o) { MapService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return MapService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.MapService
 * @category iServer Map
 * @classdesc å°å¾ä¿¡æ¯æå¡ç±»ã
 * @extends {SuperMap.CommonServiceBase}
 * @example
 * var myMapService = new SuperMap.MapService(url, {
 * eventListeners:{
 *     "processCompleted": MapServiceCompleted,
 *       "processFailed": MapServiceFailed
 *       }
 * });
 *
 * @param {string} url - æå¡çè®¿é®å°åãå¦ï¼http://localhost:8090/iserver/services/map-world/rest/maps/World+Map ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæ processCompleted å±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailed å±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã 
 * @param {SuperMap.DataFormat} [options.format=SuperMap.DataFormat.GEOJSON] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var MapService_MapService = /*#__PURE__*/function (_CommonServiceBase) {
  MapService_inherits(MapService, _CommonServiceBase);

  var _super = MapService_createSuper(MapService);

  function MapService(url, options) {
    var _this;

    MapService_classCallCheck(this, MapService);

    _this = _super.call(this, url, options);
    /**
     * @member {string} SuperMap.MapService.prototype.projection
     * @description æ ¹æ®æå½±åæ°è·åå°å¾ç¶æä¿¡æ¯ãå¦"EPSG:4326"
     */

    _this.projection = null;
    _this.CLASS_NAME = "SuperMap.MapService";

    if (options) {
      Util.extend(MapService_assertThisInitialized(_this), options);
    }

    var me = MapService_assertThisInitialized(_this);

    if (me.projection) {
      var arr = me.projection.split(":");

      if (arr instanceof Array) {
        if (arr.length === 2) {
          me.url = Util.urlAppend(me.url, "prjCoordSys=".concat(encodeURIComponent("{\"epsgCode\":\"".concat(arr[1], "\"}"))));
        }

        if (arr.length === 1) {
          me.url = Util.urlAppend(me.url, "prjCoordSys=".concat(encodeURIComponent("{\"epsgCode\":\"".concat(arr[0], "\"}"))));
        }
      }
    }

    return _this;
  }
  /**
   * @function  destroy
   * @description éæ¾èµæºï¼å°å¼ç¨çèµæºå±æ§ç½®ç©ºã
   */


  MapService_createClass(MapService, [{
    key: "destroy",
    value: function destroy() {
      MapService_get(MapService_getPrototypeOf(MapService.prototype), "destroy", this).call(this);

      var me = this;

      if (me.events) {
        me.events.un(me.eventListeners);
        me.events.listeners = null;
        me.events.destroy();
        me.events = null;
        me.eventListeners = null;
      }
    }
    /**
     * @function  SuperMap.MapService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çè®¾ç½®çåæ°ä¼ éå°æå¡ç«¯ï¼ä¸æå¡ç«¯å®æå¼æ­¥éè®¯ã
     */

  }, {
    key: "processAsync",
    value: function processAsync() {
      var me = this;
      me.request({
        method: "GET",
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /*
     * Method: getMapStatusCompleted
     * è·åå°å¾ç¶æå®æï¼æ§è¡æ­¤æ¹æ³ã
     *
     * Parameters:
     * {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     */

  }, {
    key: "serviceProcessCompleted",
    value: function serviceProcessCompleted(result) {
      var me = this;
      result = Util.transformResult(result);
      var codeStatus = result.code >= 200 && result.code < 300 || result.code == 0 || result.code === 304;
      var isCodeValid = result.code && codeStatus;

      if (!result.code || isCodeValid) {
        me.events && me.events.triggerEvent("processCompleted", {
          result: result
        });
      } else {
        ////å¨æ²¡ætokenæ¯è¿åçæ¯200ï¼ä½æ¯å¶å®æ¯æ²¡ææéï¼æä»¥è¿éä¹åºè¯¥æ¯è§¦åå¤±è´¥äºä»¶
        me.events.triggerEvent("processFailed", {
          error: result
        });
      }
    }
  }]);

  return MapService;
}(CommonServiceBase);
SuperMap.MapService = MapService_MapService;
// CONCATENATED MODULE: ./src/common/iServer/MathExpressionAnalysisParameters.js
function MathExpressionAnalysisParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function MathExpressionAnalysisParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function MathExpressionAnalysisParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) MathExpressionAnalysisParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) MathExpressionAnalysisParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.MathExpressionAnalysisParameters
 * @category iServer SpatialAnalyst GridMathAnalyst
 * @classdesc æ æ ¼ä»£æ°è¿ç®åæ°ç±»ã
 * @param {Object} options - åæ°ã
 * @param {string} options.dataset - è¦ç¨æ¥åæ æ ¼ä»£æ°è¿ç®æ°æ®æºä¸­æ°æ®éçåç§°ãè¯¥åç§°ç¨å½¢å¦"æ°æ®éåç§°@æ°æ®æºå«å"å½¢å¼æ¥è¡¨ç¤ºï¼ä¾å¦ï¼BaseMap_P@Jingjinã
 * @param {string} options.resultGridName - æå®ç»ææ°æ®éåç§°ã
 * @param {string} options.expression - æå®çæ æ ¼è¿ç®è¡¨è¾¾å¼ãå¦ï¼[DatasourceAlias1.Raster1]*2-10ã
 * @param {string} options.targetDatasource - æå®å­å¨ç»ææ°æ®éçæ°æ®æºã
 * @param {(SuperMap.Geometry.Polygon|L.Polygon|ol.geom.Polygon)} [options.extractRegion] - æ æ ¼ä»£æ°è¿ç®çèå´ï¼æå®æ°æ®éä¸­åä¸æ æ ¼ä»£æ°è¿ç®çåºåã
 *                                                                                        å¦æç¼ºçï¼åè®¡ç®å¨é¨åºåï¼å¦æåä¸è¿ç®çæ°æ®éèå´ä¸ä¸è´ï¼å°ä½¿ç¨æææ°æ®éçèå´çäº¤éä½ä¸ºè®¡ç®åºå ã
 * @param {boolean} [options.isZip=false] - æ¯å¦å¯¹ç»ææ°æ®éè¿è¡åç¼©å¤çã
 * @param {boolean} [options.ignoreNoValue=false] - æ¯å¦å¿½ç¥æ å¼æ æ ¼æ°æ®ãtrue è¡¨ç¤ºå¿½ç¥æ å¼æ°æ®ï¼å³æ å¼æ æ ¼ä¸åä¸è¿ç®ã
 * @param {boolean} [options.deleteExistResultDataset=false] - å¦æç¨æ·å½åçç»ææ°æ®éåç§°ä¸å·²æçæ°æ®ééåï¼æ¯å¦å é¤å·²æçæ°æ®éã
 */

var MathExpressionAnalysisParameters = /*#__PURE__*/function () {
  function MathExpressionAnalysisParameters(options) {
    MathExpressionAnalysisParameters_classCallCheck(this, MathExpressionAnalysisParameters);

    if (!options) {
      return;
    }
    /**
     * @member {string} SuperMap.MathExpressionAnalysisParameters.prototype.dataset
     * @description è¦ç¨æ¥åæ æ ¼ä»£æ°è¿ç®æ°æ®æºä¸­æ°æ®éçåç§°ã
     * è¯¥åç§°ç¨å½¢å¦"æ°æ®éåç§°@æ°æ®æºå«å"å½¢å¼æ¥è¡¨ç¤ºï¼ä¾å¦ï¼JingjinTerrain@Jingjinã
     *
     */


    this.dataset = null;
    /**
     * @member {(SuperMap.Geometry.Polygon|L.Polygon|ol.geom.Polygon)} [SuperMap.MathExpressionAnalysisParameters.prototype.extractRegion]
     * @description æ æ ¼ä»£æ°è¿ç®çèå´ï¼æå®æ°æ®éä¸­åä¸æ æ ¼ä»£æ°è¿ç®çåºåã
     * å¦æç¼ºçï¼åè®¡ç®å¨é¨åºåï¼å¦æåä¸è¿ç®çæ°æ®éèå´ä¸ä¸è´ï¼å°ä½¿ç¨æææ°æ®éçèå´çäº¤éä½ä¸ºè®¡ç®åºå ã
     */

    this.extractRegion = null;
    /**
     * @member {string} SuperMap.MathExpressionAnalysisParameters.prototype.expression
     * @description æå®çæ æ ¼è¿ç®è¡¨è¾¾å¼ãå¦ï¼"[DatasourceAlias1.Raster1]*2-10"ã
     */

    this.expression = null;
    /**
     * @member {boolean} [SuperMap.MathExpressionAnalysisParameters.prototype.isZip=false]
     * @description æ¯å¦å¯¹ç»ææ°æ®éè¿è¡åç¼©å¤çã
     */

    this.isZip = false;
    /**
     * @member {boolean} [SuperMap.MathExpressionAnalysisParameters.prototype.ignoreNoValue=false]
     * @description æ¯å¦å¿½ç¥æ å¼æ æ ¼æ°æ®ã
     */

    this.ignoreNoValue = false;
    /**
     * @member {string} SuperMap.MathExpressionAnalysisParameters.prototype.targetDatasource
     * @description æå®å­å¨ç»ææ°æ®éçæ°æ®æºã
     */

    this.targetDatasource = null;
    /**
     * @member {string} SuperMap.MathExpressionAnalysisParameters.prototype.resultGridName
     * @description æå®ç»ææ°æ®éåç§°ã
     */

    this.resultGridName = null;
    /**
     * @member {boolean} [SuperMap.MathExpressionAnalysisParameters.prototype.deleteExistResultDataset=false]
     * @description å¦æç¨æ·å½åçç»ææ°æ®éåç§°ä¸å·²æçæ°æ®ééåï¼æ¯å¦å é¤å·²æçæ°æ®éã
     */

    this.deleteExistResultDataset = false;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.MathExpressionAnalysisParameters";
  }
  /**
   * @function SuperMap.MathExpressionAnalysisParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  MathExpressionAnalysisParameters_createClass(MathExpressionAnalysisParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.dataset = null;
      me.bounds = null;
      me.expression = null;
      me.isZip = true;
      me.ignoreNoValue = true;
      me.targetDatasource = null;
      me.resultGridName = null;
      me.deleteExistResultDataset = null;
    }
    /**
     * @function SuperMap.MathExpressionAnalysisParameters.toObject
     * @param {Object} mathExpressionAnalysisParameters - æ æ ¼ä»£æ°è¿ç®åæ°ã
     * @param {Object} tempObj - ç®æ å¯¹è±¡ã
     * @description çææ æ ¼ä»£æ°è¿ç®å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(mathExpressionAnalysisParameters, tempObj) {
      for (var name in mathExpressionAnalysisParameters) {
        if (name !== "dataset") {
          tempObj[name] = mathExpressionAnalysisParameters[name];
        }

        if (name === "extractRegion") {
          if (mathExpressionAnalysisParameters[name]) {
            var bs = mathExpressionAnalysisParameters[name].components[0].components;
            var region = {},
                points = [],
                type = "REGION";
            var len = bs.length;

            for (var i = 0; i < len - 1; i++) {
              var poi = {};
              poi["x"] = bs[i].x;
              poi["y"] = bs[i].y;
              points.push(poi);
            }

            region["points"] = points;
            region["type"] = type;
            tempObj[name] = region;
          }
        }
      }
    }
  }]);

  return MathExpressionAnalysisParameters;
}();
SuperMap.MathExpressionAnalysisParameters = MathExpressionAnalysisParameters;
// CONCATENATED MODULE: ./src/common/iServer/MathExpressionAnalysisService.js
function MathExpressionAnalysisService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { MathExpressionAnalysisService_typeof = function _typeof(obj) { return typeof obj; }; } else { MathExpressionAnalysisService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return MathExpressionAnalysisService_typeof(obj); }

function MathExpressionAnalysisService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function MathExpressionAnalysisService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function MathExpressionAnalysisService_createClass(Constructor, protoProps, staticProps) { if (protoProps) MathExpressionAnalysisService_defineProperties(Constructor.prototype, protoProps); if (staticProps) MathExpressionAnalysisService_defineProperties(Constructor, staticProps); return Constructor; }

function MathExpressionAnalysisService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { MathExpressionAnalysisService_get = Reflect.get; } else { MathExpressionAnalysisService_get = function _get(target, property, receiver) { var base = MathExpressionAnalysisService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return MathExpressionAnalysisService_get(target, property, receiver || target); }

function MathExpressionAnalysisService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = MathExpressionAnalysisService_getPrototypeOf(object); if (object === null) break; } return object; }

function MathExpressionAnalysisService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) MathExpressionAnalysisService_setPrototypeOf(subClass, superClass); }

function MathExpressionAnalysisService_setPrototypeOf(o, p) { MathExpressionAnalysisService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return MathExpressionAnalysisService_setPrototypeOf(o, p); }

function MathExpressionAnalysisService_createSuper(Derived) { var hasNativeReflectConstruct = MathExpressionAnalysisService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = MathExpressionAnalysisService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = MathExpressionAnalysisService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return MathExpressionAnalysisService_possibleConstructorReturn(this, result); }; }

function MathExpressionAnalysisService_possibleConstructorReturn(self, call) { if (call && (MathExpressionAnalysisService_typeof(call) === "object" || typeof call === "function")) { return call; } return MathExpressionAnalysisService_assertThisInitialized(self); }

function MathExpressionAnalysisService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function MathExpressionAnalysisService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function MathExpressionAnalysisService_getPrototypeOf(o) { MathExpressionAnalysisService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return MathExpressionAnalysisService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.MathExpressionAnalysisService
 * @category  iServer SpatialAnalyst GridMathAnalyst
 * @classdesc æ æ ¼ä»£æ°è¿ç®æå¡ç±»ã
 * @param {string} url - æå¡çè®¿é®å°åãå¦ http://localhost:8090/iserver/services/spatialanalyst-changchun/restjsr/spatialanalyst
 * @param {Object} options - åæ°ã</br>
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @extends {SuperMap.SpatialAnalystBase}
 * @example ä¾å¦ï¼
 * (start code)
 * var myMathExpressionAnalysisService = new SuperMap.MathExpressionAnalysisService(url);
 * myMathExpressionAnalysisService.on({
     *     "processCompleted": processCompleted,
     *     "processFailed": processFailed
     *     }
 * );
 * (end)
 *
 */

var MathExpressionAnalysisService = /*#__PURE__*/function (_SpatialAnalystBase) {
  MathExpressionAnalysisService_inherits(MathExpressionAnalysisService, _SpatialAnalystBase);

  var _super = MathExpressionAnalysisService_createSuper(MathExpressionAnalysisService);

  function MathExpressionAnalysisService(url, options) {
    var _this;

    MathExpressionAnalysisService_classCallCheck(this, MathExpressionAnalysisService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.MathExpressionAnalysisService";
    return _this;
  }
  /**
   * @override
   */


  MathExpressionAnalysisService_createClass(MathExpressionAnalysisService, [{
    key: "destroy",
    value: function destroy() {
      MathExpressionAnalysisService_get(MathExpressionAnalysisService_getPrototypeOf(MathExpressionAnalysisService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.MathExpressionAnalysisService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.MathExpressionAnalysisParameters} parameter - æ æ ¼ä»£æ°è¿ç®åæ°ç±»ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(parameter) {
      var me = this;
      var parameterObject = {};

      if (parameter instanceof MathExpressionAnalysisParameters) {
        me.url = Util.urlPathAppend(me.url, 'datasets/' + parameter.dataset + '/mathanalyst');
      }

      MathExpressionAnalysisParameters.toObject(parameter, parameterObject);
      var jsonParameters = Util.toJSON(parameterObject);
      me.url = Util.urlAppend(me.url, 'returnContent=true');
      me.request({
        method: "POST",
        data: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return MathExpressionAnalysisService;
}(SpatialAnalystBase);
SuperMap.MathExpressionAnalysisService = MathExpressionAnalysisService;
// CONCATENATED MODULE: ./src/common/iServer/MeasureParameters.js
function MeasureParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function MeasureParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function MeasureParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) MeasureParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) MeasureParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.MeasureParameters
 * @category iServer Map Measure
 * @classdesc éç®åæ°ç±»ã
 * @param {Object} geometry - è¦éç®çå ä½å¯¹è±¡ã
 * @param {Object} options - åæ°ã
 * @param {SuperMap.Unit} [options.unit=SuperMap.Unit.METER] - éç®åä½ã
 * @param {string} [options.prjCoordSys] - ç¨æ¥æå®è¯¥éç®æä½æä½¿ç¨çæå½±ã
 * @param {string} [options.distanceMode="Geodesic"] - ç¨æ¥æå®éç®çæ¹å¼ä¸ºæçé¢é¿åº¦ 'Geodesic' æèå¹³é¢é¿åº¦ 'Planar' æ¥è®¡ç®ã
 */

var MeasureParameters = /*#__PURE__*/function () {
  function MeasureParameters(geometry, options) {
    MeasureParameters_classCallCheck(this, MeasureParameters);

    if (!geometry) {
      return;
    }
    /**
     * @member {Object} SuperMap.MeasureParameters.prototype.geometry
     * @description è¦éç®çå ä½å¯¹è±¡ã<br>
     * ç¹ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.Point}|{@link L.Marker}|{@link L.CircleMarker}|{@link L.Circle}|{@link L.GeoJSON}|{@link ol.geom.Point}|{@link ol.format.GeoJSON}ã<br>
     * çº¿ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.LineString}|{@link SuperMap.Geometry.LinearRing}|{@link L.Polyline}|{@link L.GeoJSON}|{@link ol.geom.LineString}|{@link ol.format.GeoJSON}ã<br>
     * é¢ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.Polygon}|{@link L.Polygon}|{@link L.GeoJSON}|{@link ol.geom.Polygon}|{@link ol.format.GeoJSON}ã
     */


    this.geometry = geometry;
    /**
     * @member {SuperMap.Unit} [SuperMap.MeasureParameters.prototype.unit=SuperMap.Unit.METER]
     * @description éç®åä½ãå³éç®ç»æä»¥ç±³ä¸ºåä½ã
     */

    this.unit = Unit.METER;
    /**
     * @member {string} [SuperMap.MeasureParameters.prototype.prjCoordSys]
     * @description ç¨æ¥æå®è¯¥éç®æä½æä½¿ç¨çæå½±ã
     */

    this.prjCoordSys = null;
    /**
     * @member {string} [SuperMap.MeasureParameters.prototype.distanceMode="Geodesic"]
     * @description ç¨æ¥æå®éç®çæ¹å¼ä¸ºæçé¢é¿åº¦ 'Geodesic' æèå¹³é¢é¿åº¦ 'Planar' æ¥è®¡ç®ã
     * @example
     * var param = new SuperMap.MeasureParameters(getmetry,{distanceMode:'Planar'});
     */

    this.distanceMode = null;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.MeasureParameters";
  }
  /**
   * @function SuperMap.MeasureParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  MeasureParameters_createClass(MeasureParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.geometry = null;
      me.unit = null;
      me.prjCoordSys = null;
    }
  }]);

  return MeasureParameters;
}();
SuperMap.MeasureParameters = MeasureParameters;
// CONCATENATED MODULE: ./src/common/iServer/MeasureService.js
function MeasureService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { MeasureService_typeof = function _typeof(obj) { return typeof obj; }; } else { MeasureService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return MeasureService_typeof(obj); }

function MeasureService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function MeasureService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function MeasureService_createClass(Constructor, protoProps, staticProps) { if (protoProps) MeasureService_defineProperties(Constructor.prototype, protoProps); if (staticProps) MeasureService_defineProperties(Constructor, staticProps); return Constructor; }

function MeasureService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { MeasureService_get = Reflect.get; } else { MeasureService_get = function _get(target, property, receiver) { var base = MeasureService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return MeasureService_get(target, property, receiver || target); }

function MeasureService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = MeasureService_getPrototypeOf(object); if (object === null) break; } return object; }

function MeasureService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) MeasureService_setPrototypeOf(subClass, superClass); }

function MeasureService_setPrototypeOf(o, p) { MeasureService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return MeasureService_setPrototypeOf(o, p); }

function MeasureService_createSuper(Derived) { var hasNativeReflectConstruct = MeasureService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = MeasureService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = MeasureService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return MeasureService_possibleConstructorReturn(this, result); }; }

function MeasureService_possibleConstructorReturn(self, call) { if (call && (MeasureService_typeof(call) === "object" || typeof call === "function")) { return call; } return MeasureService_assertThisInitialized(self); }

function MeasureService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function MeasureService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function MeasureService_getPrototypeOf(o) { MeasureService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return MeasureService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/






/**
 * @class SuperMap.MeasureService
 * @category iServer Map Measure
 * @classdesc éç®æå¡ç±»ã
 *            è¯¥ç±»è´è´£å°éç®åæ°ä¼ éå°æå¡ç«¯ï¼å¹¶è·åæå¡ç«¯è¿åçéç®ç»æã
 * @extends {SuperMap.CommonServiceBase}
 * @example
 * var myMeasuerService = new SuperMap.MeasureService(url, {
 *      measureMode: SuperMap.MeasureMode.DISTANCE,
 *      eventListeners:{
 *          "processCompleted": measureCompleted
 *      }
 * });
 * @param {string} url - æå¡è®¿é®çå°åãå¦ï¼http://localhost:8090/iserver/services/map-world/rest/maps/World+Map ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæ processCompleted å±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailed å±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã 
 * @param {SuperMap.DataFormat} [options.format=SuperMap.DataFormat.GEOJSON] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @param {MeasureMode} options.measureMode - éç®æ¨¡å¼ï¼åæ¬è·ç¦»éç®æ¨¡å¼åé¢ç§¯éç®æ¨¡å¼ã
 */

var MeasureService_MeasureService = /*#__PURE__*/function (_CommonServiceBase) {
  MeasureService_inherits(MeasureService, _CommonServiceBase);

  var _super = MeasureService_createSuper(MeasureService);

  function MeasureService(url, options) {
    var _this;

    MeasureService_classCallCheck(this, MeasureService);

    _this = _super.call(this, url, options);
    /**
     * @member {SuperMap.MeasureMode} [SuperMap.MeasureService.prototype.measureMode=MeasureMode.DISTANCE]
     * @description éç®æ¨¡å¼ï¼åæ¬è·ç¦»éç®æ¨¡å¼åé¢ç§¯éç®æ¨¡å¼ã
     */

    _this.measureMode = MeasureMode.DISTANCE;

    if (options) {
      Util.extend(MeasureService_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.MeasureService";
    return _this;
  }
  /**
   * @override
   */


  MeasureService_createClass(MeasureService, [{
    key: "destroy",
    value: function destroy() {
      MeasureService_get(MeasureService_getPrototypeOf(MeasureService.prototype), "destroy", this).call(this);

      var me = this;
      me.measureMode = null;
    }
    /**
     * @function SuperMap.MeasureService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çéç®åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.MeasureParameters} params - éç®åæ°ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof MeasureParameters)) {
        return;
      }

      var me = this,
          geometry = params.geometry,
          pointsCount = 0,
          point2ds = null;

      if (!geometry) {
        return;
      }

      me.url = Util.urlPathAppend(me.url, me.measureMode === MeasureMode.AREA ? 'area' : 'distance');
      var serverGeometry = ServerGeometry.fromGeometry(geometry);

      if (!serverGeometry) {
        return;
      }

      pointsCount = serverGeometry.parts[0];
      point2ds = serverGeometry.points.splice(0, pointsCount);
      var prjCoordSysTemp, prjCodeTemp, paramsTemp;

      if (params.prjCoordSys) {
        if (MeasureService_typeof(params.prjCoordSys) === "object") {
          prjCodeTemp = params.prjCoordSys.projCode;
          prjCoordSysTemp = '{"epsgCode"' + prjCodeTemp.substring(prjCodeTemp.indexOf(":"), prjCodeTemp.length) + "}";
        } else if (typeof params.prjCoordSys === "string") {
          prjCoordSysTemp = '{"epsgCode"' + params.prjCoordSys.substring(params.prjCoordSys.indexOf(":"), params.prjCoordSys.length) + "}";
        }

        paramsTemp = {
          "point2Ds": Util.toJSON(point2ds),
          "unit": params.unit,
          "prjCoordSys": prjCoordSysTemp
        };
      } else {
        paramsTemp = {
          "point2Ds": Util.toJSON(point2ds),
          "unit": params.unit
        };
      }

      me.request({
        method: "GET",
        params: paramsTemp,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return MeasureService;
}(CommonServiceBase);
SuperMap.MeasureService = MeasureService_MeasureService;
// CONCATENATED MODULE: ./src/common/iServer/OverlayAnalystService.js
function OverlayAnalystService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { OverlayAnalystService_typeof = function _typeof(obj) { return typeof obj; }; } else { OverlayAnalystService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return OverlayAnalystService_typeof(obj); }

function OverlayAnalystService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function OverlayAnalystService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function OverlayAnalystService_createClass(Constructor, protoProps, staticProps) { if (protoProps) OverlayAnalystService_defineProperties(Constructor.prototype, protoProps); if (staticProps) OverlayAnalystService_defineProperties(Constructor, staticProps); return Constructor; }

function OverlayAnalystService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { OverlayAnalystService_get = Reflect.get; } else { OverlayAnalystService_get = function _get(target, property, receiver) { var base = OverlayAnalystService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return OverlayAnalystService_get(target, property, receiver || target); }

function OverlayAnalystService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = OverlayAnalystService_getPrototypeOf(object); if (object === null) break; } return object; }

function OverlayAnalystService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) OverlayAnalystService_setPrototypeOf(subClass, superClass); }

function OverlayAnalystService_setPrototypeOf(o, p) { OverlayAnalystService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return OverlayAnalystService_setPrototypeOf(o, p); }

function OverlayAnalystService_createSuper(Derived) { var hasNativeReflectConstruct = OverlayAnalystService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = OverlayAnalystService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = OverlayAnalystService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return OverlayAnalystService_possibleConstructorReturn(this, result); }; }

function OverlayAnalystService_possibleConstructorReturn(self, call) { if (call && (OverlayAnalystService_typeof(call) === "object" || typeof call === "function")) { return call; } return OverlayAnalystService_assertThisInitialized(self); }

function OverlayAnalystService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function OverlayAnalystService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function OverlayAnalystService_getPrototypeOf(o) { OverlayAnalystService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return OverlayAnalystService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.OverlayAnalystService
 * @category iServer SpatialAnalyst OverlayAnalyst
 * @classdesc å å åææå¡ç±»ã
 * è¯¥ç±»è´è´£å°å®¢æ·è®¾ç½®çå å åæåæ°ä¼ éç»æå¡ç«¯ï¼å¹¶æ¥æ¶æå¡ç«¯è¿åçå å åæç»ææ°æ®ã
 * å å åæç»æéè¿è¯¥ç±»æ¯æçäºä»¶ççå¬å½æ°åæ°è·å
 * @param {string} url - æå¡çè®¿é®å°åãå¦http://localhost:8090/iserver/services/spatialanalyst-changchun/restjsr/spatialanalystã
 * @param {Object} options - åæ°ã</br>
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @extends {SuperMap.CommonServiceBase}
 * @example ä¾å¦ï¼
 * (start code)
 * var myOverlayAnalystService = new SuperMap.OverlayAnalystService(url, {
 *     eventListeners: {
 *	       "processCompleted": OverlayCompleted,
 *		   "processFailed": OverlayFailed
 *		   }
 * });
 * (end)
 */

var OverlayAnalystService = /*#__PURE__*/function (_SpatialAnalystBase) {
  OverlayAnalystService_inherits(OverlayAnalystService, _SpatialAnalystBase);

  var _super = OverlayAnalystService_createSuper(OverlayAnalystService);

  function OverlayAnalystService(url, options) {
    var _this;

    OverlayAnalystService_classCallCheck(this, OverlayAnalystService);

    _this = _super.call(this, url, options);
    /**
     * @member {string} SuperMap.OverlayAnalystService.prototype.mode
     * @description å å åæç±»å
     */

    _this.mode = null;

    if (options) {
      Util.extend(OverlayAnalystService_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.OverlayAnalystService";
    return _this;
  }
  /**
   * @override
   */


  OverlayAnalystService_createClass(OverlayAnalystService, [{
    key: "destroy",
    value: function destroy() {
      OverlayAnalystService_get(OverlayAnalystService_getPrototypeOf(OverlayAnalystService.prototype), "destroy", this).call(this);

      this.mode = null;
    }
    /**
     * @function SuperMap.OverlayAnalystService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.OverlayAnalystParameters} parameter - å å åæåæ°ç±»ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(parameter) {
      var parameterObject = {};
      var me = this;

      if (parameter instanceof DatasetOverlayAnalystParameters) {
        me.mode = "datasets";
        me.url = Util.urlPathAppend(me.url, 'datasets/' + parameter.sourceDataset + '/overlay');
        DatasetOverlayAnalystParameters.toObject(parameter, parameterObject);
      } else if (parameter instanceof GeometryOverlayAnalystParameters) {
        me.mode = "geometry"; //æ¯æä¼ å¥å¤ä¸ªå ä½è¦ç´ è¿è¡å å åæ

        if (parameter.operateGeometries && parameter.sourceGeometries) {
          me.url = Util.urlPathAppend(me.url, 'geometry/overlay/batch');
          me.url = Util.urlAppend(me.url, 'ignoreAnalystParam=true');
        } else {
          me.url = Util.urlPathAppend(me.url, 'geometry/overlay');
        }

        GeometryOverlayAnalystParameters.toObject(parameter, parameterObject);
      }

      me.url = Util.urlAppend(me.url, 'returnContent=true');
      var jsonParameters = Util.toJSON(parameterObject);
      me.request({
        method: "POST",
        data: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return OverlayAnalystService;
}(SpatialAnalystBase);
SuperMap.OverlayAnalystService = OverlayAnalystService;
// CONCATENATED MODULE: ./src/common/iServer/OverlayGeoJobParameter.js
function OverlayGeoJobParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function OverlayGeoJobParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function OverlayGeoJobParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) OverlayGeoJobParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) OverlayGeoJobParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.OverlayGeoJobParameter
 * @category iServer ProcessingService OverlayAnalyst
 * @classdesc å å åæä»»å¡åæ°ç±»ã
 * @param {Object} options - åæ°ã
 * @param {string} options.datasetName - æ°æ®éåã
 * @param {string} options.datasetOverlay - å å å¯¹è±¡æå¨çæ°æ®éåç§°ã
 * @param {string} options.srcFields - è¾å¥æ°æ®éè¦ä¿ççå­æ®µã
 * @param {string} [options.overlayFields] - å å æ°æ®éè¦ä¿ççå­æ®µãå¯¹åææ¨¡å¼ä¸º clipãupdateãerase æ¶ï¼æ­¤åæ°æ æã
 * @param {string} [options.mode] - å å åææ¨¡å¼ã
 * @param {SuperMap.OutputSetting} [options.output] - è¾åºåæ°è®¾ç½®ã
 * @param {SuperMap.MappingParameters} [options.mappingParameters] - åæåç»æå¯è§åçåæ°ç±»ã   
 */

var OverlayGeoJobParameter = /*#__PURE__*/function () {
  function OverlayGeoJobParameter(options) {
    OverlayGeoJobParameter_classCallCheck(this, OverlayGeoJobParameter);

    if (!options) {
      return;
    }
    /**
     * @member {string} SuperMap.OverlayGeoJobParameter.prototype.datasetName
     * @description æ°æ®éåã
     */


    this.datasetName = "";
    /**
     * @member {string} SuperMap.OverlayGeoJobParameter.prototype.datasetOverlay
     * @description å å å¯¹è±¡æå¨çæ°æ®éåç§°ã
     */

    this.datasetOverlay = "";
    /**
     * @member {string} [SuperMap.OverlayGeoJobParameter.prototype.mode]
     * @description å å åææ¨¡å¼ã
     */

    this.mode = "";
    /**
     * @member {string} SuperMap.OverlayGeoJobParameter.prototype.srcFields
     * @description è¾å¥æ°æ®éè¦ä¿ççå­æ®µã
     */

    this.srcFields = "";
    /**
     * @member {string} SuperMap.OverlayGeoJobParameter.prototype.overlayFields
     * @description å å æ°æ®éè¦ä¿ççå­æ®µï¼å¯¹åææ¨¡å¼ä¸º clipãupdateãerase æ¶ï¼æ­¤åæ°æ æã
     */

    this.overlayFields = "";
    /**
     * @member {SuperMap.OutputSetting} [SuperMap.OverlayGeoJobParameter.prototype.output]
     * @description è¾åºåæ°è®¾ç½®ç±»ã
     */

    this.output = null;
    /**
    * @member {SuperMap.MappingParameters} [SuperMap.OverlayGeoJobParameter.prototype.mappingParameters]
    * @description åæåç»æå¯è§åçåæ°ç±»ã   
    */

    this.mappingParameters = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.OverlayGeoJobParameter";
  }
  /**
   * @function SuperMap.OverlayGeoJobParameter.destroy
   * @override
   */


  OverlayGeoJobParameter_createClass(OverlayGeoJobParameter, [{
    key: "destroy",
    value: function destroy() {
      this.datasetName = null;
      this.datasetOverlay = null;
      this.mode = null;
      this.srcFields = null;
      this.overlayFields = null;

      if (this.output instanceof OutputSetting) {
        this.output.destroy();
        this.output = null;
      }

      if (this.mappingParameters instanceof MappingParameters) {
        this.mappingParameters.destroy();
        this.mappingParameters = null;
      }
    }
    /**
     * @function SuperMap.OverlayGeoJobParameter.toObject
     * @param {Object} OverlayGeoJobParameter - ç¹èååæä»»å¡åæ°ã
     * @param {Object} tempObj - ç®æ å¯¹è±¡ã
     * @description çæç¹èååæä»»å¡å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(OverlayGeoJobParameter, tempObj) {
      for (var name in OverlayGeoJobParameter) {
        if (name == "datasetName") {
          tempObj['input'] = tempObj['input'] || {};
          tempObj['input'][name] = OverlayGeoJobParameter[name];
          continue;
        }

        if (name === "output") {
          tempObj['output'] = tempObj['output'] || {};
          tempObj['output'] = OverlayGeoJobParameter[name];
          continue;
        }

        tempObj['analyst'] = tempObj['analyst'] || {};
        tempObj['analyst'][name] = OverlayGeoJobParameter[name];

        if (name === 'mappingParameters') {
          tempObj['analyst'][name] = tempObj['analyst'][name] || {};
          tempObj['analyst']['mappingParameters'] = OverlayGeoJobParameter[name];
        }
      }
    }
  }]);

  return OverlayGeoJobParameter;
}();
SuperMap.OverlayGeoJobParameter = OverlayGeoJobParameter;
// CONCATENATED MODULE: ./src/common/iServer/OverlayGeoJobsService.js
function OverlayGeoJobsService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { OverlayGeoJobsService_typeof = function _typeof(obj) { return typeof obj; }; } else { OverlayGeoJobsService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return OverlayGeoJobsService_typeof(obj); }

function OverlayGeoJobsService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function OverlayGeoJobsService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function OverlayGeoJobsService_createClass(Constructor, protoProps, staticProps) { if (protoProps) OverlayGeoJobsService_defineProperties(Constructor.prototype, protoProps); if (staticProps) OverlayGeoJobsService_defineProperties(Constructor, staticProps); return Constructor; }

function OverlayGeoJobsService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { OverlayGeoJobsService_get = Reflect.get; } else { OverlayGeoJobsService_get = function _get(target, property, receiver) { var base = OverlayGeoJobsService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return OverlayGeoJobsService_get(target, property, receiver || target); }

function OverlayGeoJobsService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = OverlayGeoJobsService_getPrototypeOf(object); if (object === null) break; } return object; }

function OverlayGeoJobsService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) OverlayGeoJobsService_setPrototypeOf(subClass, superClass); }

function OverlayGeoJobsService_setPrototypeOf(o, p) { OverlayGeoJobsService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return OverlayGeoJobsService_setPrototypeOf(o, p); }

function OverlayGeoJobsService_createSuper(Derived) { var hasNativeReflectConstruct = OverlayGeoJobsService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = OverlayGeoJobsService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = OverlayGeoJobsService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return OverlayGeoJobsService_possibleConstructorReturn(this, result); }; }

function OverlayGeoJobsService_possibleConstructorReturn(self, call) { if (call && (OverlayGeoJobsService_typeof(call) === "object" || typeof call === "function")) { return call; } return OverlayGeoJobsService_assertThisInitialized(self); }

function OverlayGeoJobsService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function OverlayGeoJobsService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function OverlayGeoJobsService_getPrototypeOf(o) { OverlayGeoJobsService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return OverlayGeoJobsService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.OverlayGeoJobsService
 * @category iServer ProcessingService OverlayAnalyst
 * @classdesc å å åæä»»å¡ç±»ã
 * @param {string} url - å å åæä»»å¡å°åã
 * @param {Object} options - åæ°ã
 * @param {SuperMap.Events} options.events - å¤çææäºä»¶çå¯¹è±¡ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã
 * @param {Object} [options.eventListeners] - äºä»¶çå¬å¨å¯¹è±¡ãæ processCompleted å±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailed å±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {number} options.index - æå¡è®¿é®å°åå¨æ°ç»ä¸­çä½ç½®ã
 * @param {number} options.length - æå¡è®¿é®å°åæ°ç»é¿åº¦ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var OverlayGeoJobsService = /*#__PURE__*/function (_ProcessingServiceBas) {
  OverlayGeoJobsService_inherits(OverlayGeoJobsService, _ProcessingServiceBas);

  var _super = OverlayGeoJobsService_createSuper(OverlayGeoJobsService);

  function OverlayGeoJobsService(url, options) {
    var _this;

    OverlayGeoJobsService_classCallCheck(this, OverlayGeoJobsService);

    _this = _super.call(this, url, options);
    _this.url = Util.urlPathAppend(_this.url, 'spatialanalyst/overlay');
    _this.CLASS_NAME = 'SuperMap.OverlayGeoJobsService';
    return _this;
  }
  /**
   * @override
   */


  OverlayGeoJobsService_createClass(OverlayGeoJobsService, [{
    key: "destroy",
    value: function destroy() {
      OverlayGeoJobsService_get(OverlayGeoJobsService_getPrototypeOf(OverlayGeoJobsService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.OverlayGeoJobsService.prototype.getOverlayGeoJobs
     * @description è·åå å åæä»»å¡
     */

  }, {
    key: "getOverlayGeoJobs",
    value: function getOverlayGeoJobs() {
      OverlayGeoJobsService_get(OverlayGeoJobsService_getPrototypeOf(OverlayGeoJobsService.prototype), "getJobs", this).call(this, this.url);
    }
    /**
     * @function SuperMap.OverlayGeoJobsService.prototype.getOverlayGeoJob
     * @description è·åæå®idçå å åæä»»å¡
     * @param {string} id - æå®è¦è·åæ°æ®çid
     */

  }, {
    key: "getOverlayGeoJob",
    value: function getOverlayGeoJob(id) {
      OverlayGeoJobsService_get(OverlayGeoJobsService_getPrototypeOf(OverlayGeoJobsService.prototype), "getJobs", this).call(this, Util.urlPathAppend(this.url, id));
    }
    /**
     * @function SuperMap.OverlayGeoJobsService.prototype.addOverlayGeoJob
     * @description æ°å»ºç¹å å ææå¡
     * @param {SuperMap.OverlayGeoJobParameter} params - åå»ºä¸ä¸ªå å åæçè¯·æ±åæ°ã
     * @param {number} seconds - å¼å§åå»ºåï¼è·ååå»ºæåç»æçæ¶é´é´éã
     */

  }, {
    key: "addOverlayGeoJob",
    value: function addOverlayGeoJob(params, seconds) {
      OverlayGeoJobsService_get(OverlayGeoJobsService_getPrototypeOf(OverlayGeoJobsService.prototype), "addJob", this).call(this, this.url, params, OverlayGeoJobParameter, seconds);
    }
  }]);

  return OverlayGeoJobsService;
}(ProcessingServiceBase);
SuperMap.OverlayGeoJobsService = OverlayGeoJobsService;
// CONCATENATED MODULE: ./src/common/iServer/QueryByBoundsParameters.js
function QueryByBoundsParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { QueryByBoundsParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { QueryByBoundsParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return QueryByBoundsParameters_typeof(obj); }

function QueryByBoundsParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function QueryByBoundsParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function QueryByBoundsParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) QueryByBoundsParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) QueryByBoundsParameters_defineProperties(Constructor, staticProps); return Constructor; }

function QueryByBoundsParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { QueryByBoundsParameters_get = Reflect.get; } else { QueryByBoundsParameters_get = function _get(target, property, receiver) { var base = QueryByBoundsParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return QueryByBoundsParameters_get(target, property, receiver || target); }

function QueryByBoundsParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = QueryByBoundsParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function QueryByBoundsParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) QueryByBoundsParameters_setPrototypeOf(subClass, superClass); }

function QueryByBoundsParameters_setPrototypeOf(o, p) { QueryByBoundsParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return QueryByBoundsParameters_setPrototypeOf(o, p); }

function QueryByBoundsParameters_createSuper(Derived) { var hasNativeReflectConstruct = QueryByBoundsParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = QueryByBoundsParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = QueryByBoundsParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return QueryByBoundsParameters_possibleConstructorReturn(this, result); }; }

function QueryByBoundsParameters_possibleConstructorReturn(self, call) { if (call && (QueryByBoundsParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return QueryByBoundsParameters_assertThisInitialized(self); }

function QueryByBoundsParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function QueryByBoundsParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function QueryByBoundsParameters_getPrototypeOf(o) { QueryByBoundsParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return QueryByBoundsParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.QueryByBoundsParameters
 * @category  iServer Map QueryResults
 * @classdesc Bounds æ¥è¯¢åæ°ç±»ãè¯¥ç±»ç¨äºè®¾ç½® Bounds æ¥è¯¢çç¸å³åæ°ã
 * @extends {SuperMap.QueryParameters}
 * @param {Object} options - åæ°ã
 * @param {(SuperMap.Bounds|L.Bounds|ol.extent)} options.bounds - æå®çæ¥è¯¢èå´ã
 * @param {Array.<SuperMap.FilterParameter>} options.queryParams - æ¥è¯¢è¿æ»¤æ¡ä»¶åæ°æ°ç»ã
 * @param {string} [options.customParams] - èªå®ä¹åæ°ï¼ä¾æ©å±ä½¿ç¨ã
 * @param {Object} [options.prjCoordSys] -èªå®ä¹åæ°ï¼ä¾ SuperMap Online æä¾çå¨ææå½±æ¥è¯¢æ©å±ä½¿ç¨ãå¦ {"epsgCode":3857}ã
 * @param {number} [options.expectCount=100000] - ææè¿åç»æè®°å½ä¸ªæ°ã
 * @param {SuperMap.GeometryType} [options.networkType=SuperMap.GeometryType.LINE] - ç½ç»æ°æ®éå¯¹åºçæ¥è¯¢ç±»åã
 * @param {SuperMap.QueryOption} [options.queryOption=SuperMap.QueryOption.ATTRIBUTEANDGEOMETRY] - æ¥è¯¢ç»æç±»åæä¸¾ç±»ã
 * @param {number} [options.startRecord=0] - æ¥è¯¢èµ·å§è®°å½å·ã
 * @param {number} [options.holdTime=10] - èµæºå¨æå¡ç«¯ä¿å­çæ¶é´ï¼åä½ä¸ºåéã
 * @param {boolean} [options.returnCustomResult=false] - ä»ä¾ä¸ç»´ä½¿ç¨ã
 * @param {boolean} [options.returnContent=true] - æ¯å¦ç«å³è¿åæ°åå»ºèµæºçè¡¨è¿°è¿æ¯è¿åæ°èµæºç URIã
 * @param {boolean} [options.returnFeatureWithFieldCaption = false] - è¿åçæ¥è¯¢ç»æè¦ç´ å­æ®µæ è¯æ¯å¦ä¸ºå­æ®µå«åãä¸º false æ¶ï¼è¿åçæ¯å­æ®µåï¼ä¸º true æ¶ï¼è¿åçæ¯å­æ®µå«åã
 */

var QueryByBoundsParameters = /*#__PURE__*/function (_QueryParameters) {
  QueryByBoundsParameters_inherits(QueryByBoundsParameters, _QueryParameters);

  var _super = QueryByBoundsParameters_createSuper(QueryByBoundsParameters);

  function QueryByBoundsParameters(options) {
    var _this;

    QueryByBoundsParameters_classCallCheck(this, QueryByBoundsParameters);

    if (!options) {
      return QueryByBoundsParameters_possibleConstructorReturn(_this);
    }

    _this = _super.call(this, options);
    /**
     * @member {boolean} [SuperMap.QueryByBoundsParameters.prototype.returnContent=true]
     * @description æ¯å¦ç«å³è¿åæ°åå»ºèµæºçè¡¨è¿°è¿æ¯è¿åæ°èµæºç URIã
     *              å¦æä¸º trueï¼åç´æ¥è¿åæ°åå»ºèµæºï¼å³æ¥è¯¢ç»æçè¡¨è¿°ã
     *              ä¸º falseï¼åè¿åçæ¯æ¥è¯¢ç»æèµæºç URIã
     */

    _this.returnContent = true;
    /**
     * @member {(SuperMap.Bounds|L.Bounds|ol.extent)} SuperMap.QueryByBoundsParameters.prototype.bounds
     * @description æå®çæ¥è¯¢èå´ã
     */

    _this.bounds = null;
    Util.extend(QueryByBoundsParameters_assertThisInitialized(_this), options);
    _this.CLASS_NAME = "SuperMap.QueryByBoundsParameters";
    return _this;
  }
  /**
   * @function SuperMap.QueryByBoundsParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  QueryByBoundsParameters_createClass(QueryByBoundsParameters, [{
    key: "destroy",
    value: function destroy() {
      QueryByBoundsParameters_get(QueryByBoundsParameters_getPrototypeOf(QueryByBoundsParameters.prototype), "destroy", this).call(this);

      var me = this;
      me.returnContent = null;

      if (me.bounds) {
        me.bounds = null;
      }
    }
  }]);

  return QueryByBoundsParameters;
}(QueryParameters);
SuperMap.QueryByBoundsParameters = QueryByBoundsParameters;
// CONCATENATED MODULE: ./src/common/iServer/QueryService.js
function QueryService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { QueryService_typeof = function _typeof(obj) { return typeof obj; }; } else { QueryService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return QueryService_typeof(obj); }

function QueryService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function QueryService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function QueryService_createClass(Constructor, protoProps, staticProps) { if (protoProps) QueryService_defineProperties(Constructor.prototype, protoProps); if (staticProps) QueryService_defineProperties(Constructor, staticProps); return Constructor; }

function QueryService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { QueryService_get = Reflect.get; } else { QueryService_get = function _get(target, property, receiver) { var base = QueryService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return QueryService_get(target, property, receiver || target); }

function QueryService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = QueryService_getPrototypeOf(object); if (object === null) break; } return object; }

function QueryService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) QueryService_setPrototypeOf(subClass, superClass); }

function QueryService_setPrototypeOf(o, p) { QueryService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return QueryService_setPrototypeOf(o, p); }

function QueryService_createSuper(Derived) { var hasNativeReflectConstruct = QueryService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = QueryService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = QueryService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return QueryService_possibleConstructorReturn(this, result); }; }

function QueryService_possibleConstructorReturn(self, call) { if (call && (QueryService_typeof(call) === "object" || typeof call === "function")) { return call; } return QueryService_assertThisInitialized(self); }

function QueryService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function QueryService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function QueryService_getPrototypeOf(o) { QueryService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return QueryService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/






/**
 * @class SuperMap.QueryService
 * @category  iServer Map QueryResults
 * @classdesc æ¥è¯¢æå¡åºç±»ã
 * @extends {SuperMap.CommonServiceBase}
 * @param {string} url - æå¡å°åãè¯·æ±å°å¾æ¥è¯¢æå¡ç URL åºä¸ºï¼http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{å°å¾æå¡å}/rest/maps/{å°å¾å}ï¼
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæprocessCompletedå±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailedå±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã 
 * @param {SuperMap.DataFormat} [options.format=SuperMap.DataFormat.GEOJSON] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @example
 * var myService = new SuperMap.QueryService(url, {
 *     eventListeners: {
 *	       "processCompleted": queryCompleted,
 *		   "processFailed": queryError
 *		   }
 * };
 */

var QueryService = /*#__PURE__*/function (_CommonServiceBase) {
  QueryService_inherits(QueryService, _CommonServiceBase);

  var _super = QueryService_createSuper(QueryService);

  /**
   * @function SuperMap.QueryService.prototype.constructor
   * @description æ¥è¯¢æå¡åºç±»æé å½æ°ã
   * @param {string} url - æå¡å°åãè¯·æ±å°å¾æ¥è¯¢æå¡ç URL åºä¸ºï¼http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{å°å¾æå¡å}/rest/maps/{å°å¾å}ï¼
   * @param {Object} options -åæ°ã
   * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
   */
  function QueryService(url, options) {
    var _this;

    QueryService_classCallCheck(this, QueryService);

    _this = _super.call(this, url, options);
    /**
     * @member {boolean} SuperMap.QueryService.prototype.returnContent
     * @description æ¯å¦ç«å³è¿åæ°åå»ºèµæºçè¡¨è¿°è¿æ¯è¿åæ°èµæºçURIã
     */

    _this.returnContent = false;
    /**
     * @member {string} SuperMap.QueryService.prototype.format
     * @description æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æiServerJSON åGeoJSONä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º"ISERVER","GEOJSON"ã
     */

    _this.format = DataFormat.GEOJSON;
    _this.returnFeatureWithFieldCaption = false;

    if (options) {
      Util.extend(QueryService_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.QueryService";

    if (!_this.url) {
      return QueryService_possibleConstructorReturn(_this);
    }

    if (options && options.format) {
      _this.format = options.format.toUpperCase();
    }

    _this.url = Util.urlPathAppend(_this.url, 'queryResults');
    return _this;
  }
  /**
   * @function SuperMap.QueryService.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  QueryService_createClass(QueryService, [{
    key: "destroy",
    value: function destroy() {
      QueryService_get(QueryService_getPrototypeOf(QueryService.prototype), "destroy", this).call(this);

      var me = this;
      me.returnContent = null;
      me.format = null;
    }
    /**
     * @function SuperMap.QueryService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.QueryParameters} params - æ¥è¯¢åæ°ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof QueryParameters)) {
        return;
      }

      var me = this,
          returnCustomResult = null,
          jsonParameters = null;
      me.returnContent = params.returnContent;
      jsonParameters = me.getJsonParameters(params);

      if (me.returnContent) {
        me.url = Util.urlAppend(me.url, 'returnContent=' + me.returnContent);
      } else {
        //ä»ä¾ä¸ç»´ä½¿ç¨ è·åé«äº®å¾ççbounds
        returnCustomResult = params.returnCustomResult;

        if (returnCustomResult) {
          me.url = Util.urlAppend(me.url, 'returnCustomResult=' + returnCustomResult);
        }
      }

      me.returnFeatureWithFieldCaption = params.returnFeatureWithFieldCaption;
      me.request({
        method: "POST",
        data: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.QueryService.prototype.serviceProcessCompleted
     * @description æ¥è¯¢å®æï¼æ§è¡æ­¤æ¹æ³ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     */

  }, {
    key: "serviceProcessCompleted",
    value: function serviceProcessCompleted(result) {
      var me = this;
      result = Util.transformResult(result);
      var geoJSONFormat = new GeoJSON();

      if (result && result.recordsets) {
        for (var i = 0, recordsets = result.recordsets, len = recordsets.length; i < len; i++) {
          if (recordsets[i].features) {
            if (me.returnFeatureWithFieldCaption === true) {
              recordsets[i].features.map(function (feature) {
                feature.fieldNames = recordsets[i].fieldCaptions;
                return feature;
              });
            }

            if (me.format === DataFormat.GEOJSON) {
              recordsets[i].features = geoJSONFormat.toGeoJSON(recordsets[i].features);
            }
          }
        }
      }

      me.events.triggerEvent("processCompleted", {
        result: result
      });
    }
    /**
     * @function SuperMap.QueryService.prototype.getQueryParameters
     * @description å° JSON å¯¹è±¡è¡¨ç¤ºçæ¥è¯¢åæ°è½¬åä¸º QueryParameters å¯¹è±¡ã
     * @param {Object} params - JSON å­ç¬¦ä¸²è¡¨ç¤ºçæ¥è¯¢åæ°ã
     * @returns {SuperMap.QueryParameters} è¿åè½¬ååç QueryParameters å¯¹è±¡ã
     */

  }, {
    key: "getQueryParameters",
    value: function getQueryParameters(params) {
      return new QueryParameters({
        customParams: params.customParams,
        expectCount: params.expectCount,
        networkType: params.networkType,
        queryOption: params.queryOption,
        queryParams: params.queryParams,
        startRecord: params.startRecord,
        prjCoordSys: params.prjCoordSys,
        holdTime: params.holdTime
      });
    }
  }]);

  return QueryService;
}(CommonServiceBase);
SuperMap.QueryService = QueryService;
// CONCATENATED MODULE: ./src/common/iServer/QueryByBoundsService.js
function QueryByBoundsService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { QueryByBoundsService_typeof = function _typeof(obj) { return typeof obj; }; } else { QueryByBoundsService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return QueryByBoundsService_typeof(obj); }

function QueryByBoundsService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function QueryByBoundsService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function QueryByBoundsService_createClass(Constructor, protoProps, staticProps) { if (protoProps) QueryByBoundsService_defineProperties(Constructor.prototype, protoProps); if (staticProps) QueryByBoundsService_defineProperties(Constructor, staticProps); return Constructor; }

function QueryByBoundsService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { QueryByBoundsService_get = Reflect.get; } else { QueryByBoundsService_get = function _get(target, property, receiver) { var base = QueryByBoundsService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return QueryByBoundsService_get(target, property, receiver || target); }

function QueryByBoundsService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = QueryByBoundsService_getPrototypeOf(object); if (object === null) break; } return object; }

function QueryByBoundsService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) QueryByBoundsService_setPrototypeOf(subClass, superClass); }

function QueryByBoundsService_setPrototypeOf(o, p) { QueryByBoundsService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return QueryByBoundsService_setPrototypeOf(o, p); }

function QueryByBoundsService_createSuper(Derived) { var hasNativeReflectConstruct = QueryByBoundsService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = QueryByBoundsService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = QueryByBoundsService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return QueryByBoundsService_possibleConstructorReturn(this, result); }; }

function QueryByBoundsService_possibleConstructorReturn(self, call) { if (call && (QueryByBoundsService_typeof(call) === "object" || typeof call === "function")) { return call; } return QueryByBoundsService_assertThisInitialized(self); }

function QueryByBoundsService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function QueryByBoundsService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function QueryByBoundsService_getPrototypeOf(o) { QueryByBoundsService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return QueryByBoundsService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.QueryByBoundsService
 * @category  iServer Map QueryResults
 * @classdesc Bounds æ¥è¯¢æå¡ç±»ã
 * @augments {SuperMap.QueryService}
 * @example
 * (start end)
 * var myQueryByBoundsService = new SuperMap.QueryByBoundsService(url, {
 *     eventListeners: {
 *         "processCompleted": queryCompleted,
 *		   "processFailed": queryError
 *		   }
 * });
 * function queryCompleted(object){//todo};
 * function queryError(object){//todo};
 * (end)
 * @param {string} url - æå¡çè®¿é®å°åãå¦è®¿é®World Mapæå¡ï¼åªéå°urlè®¾ä¸º: http://localhost:8090/iserver/services/map-world/rest/maps/World+Map å³å¯ã
 * @param {Object} options - åæ°ã<br>
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæprocessCompletedå±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailedå±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã<br>
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã 
 * @param {SuperMap.DataFormat} [options.format=SuperMap.DataFormat.GEOJSON] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var QueryByBoundsService = /*#__PURE__*/function (_QueryService) {
  QueryByBoundsService_inherits(QueryByBoundsService, _QueryService);

  var _super = QueryByBoundsService_createSuper(QueryByBoundsService);

  function QueryByBoundsService(url, options) {
    var _this;

    QueryByBoundsService_classCallCheck(this, QueryByBoundsService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.QueryByBoundsService";
    return _this;
  }
  /**
   * @override
   */


  QueryByBoundsService_createClass(QueryByBoundsService, [{
    key: "destroy",
    value: function destroy() {
      QueryByBoundsService_get(QueryByBoundsService_getPrototypeOf(QueryByBoundsService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.QueryByBoundsService.prototype.getJsonParameters
     * @description å°æ¥è¯¢åæ°è½¬åä¸º JSON å­ç¬¦ä¸²ã
     *              å¨æ¬ç±»ä¸­éåæ­¤æ¹æ³ï¼å¯ä»¥å®ç°ä¸åç§ç±»çæ¥è¯¢ï¼sql, geometry, distance, bounds ç­ï¼ã
     * @param {SuperMap.QueryByBoundsParameters} params - Bounds æ¥è¯¢åæ°ã
     * @returns {Object} è½¬ååç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "getJsonParameters",
    value: function getJsonParameters(params) {
      if (!(params instanceof QueryByBoundsParameters)) {
        return null;
      }

      var me = this,
          jsonParameters = "",
          qp = null,
          bounds = params.bounds;
      qp = me.getQueryParameters(params);
      jsonParameters += "'queryMode':'BoundsQuery','queryParameters':";
      jsonParameters += Util.toJSON(qp);
      jsonParameters += ",'bounds': {'rightTop':{'y':" + bounds.top + ",'x':" + bounds.right + "},'leftBottom':{'y':" + bounds.bottom + ",'x':" + bounds.left + "}}";
      jsonParameters = "{" + jsonParameters + "}";
      return jsonParameters;
    }
  }]);

  return QueryByBoundsService;
}(QueryService);
SuperMap.QueryByBoundsService = QueryByBoundsService;
// CONCATENATED MODULE: ./src/common/iServer/QueryByDistanceParameters.js
function QueryByDistanceParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { QueryByDistanceParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { QueryByDistanceParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return QueryByDistanceParameters_typeof(obj); }

function QueryByDistanceParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function QueryByDistanceParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function QueryByDistanceParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) QueryByDistanceParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) QueryByDistanceParameters_defineProperties(Constructor, staticProps); return Constructor; }

function QueryByDistanceParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { QueryByDistanceParameters_get = Reflect.get; } else { QueryByDistanceParameters_get = function _get(target, property, receiver) { var base = QueryByDistanceParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return QueryByDistanceParameters_get(target, property, receiver || target); }

function QueryByDistanceParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = QueryByDistanceParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function QueryByDistanceParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) QueryByDistanceParameters_setPrototypeOf(subClass, superClass); }

function QueryByDistanceParameters_setPrototypeOf(o, p) { QueryByDistanceParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return QueryByDistanceParameters_setPrototypeOf(o, p); }

function QueryByDistanceParameters_createSuper(Derived) { var hasNativeReflectConstruct = QueryByDistanceParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = QueryByDistanceParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = QueryByDistanceParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return QueryByDistanceParameters_possibleConstructorReturn(this, result); }; }

function QueryByDistanceParameters_possibleConstructorReturn(self, call) { if (call && (QueryByDistanceParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return QueryByDistanceParameters_assertThisInitialized(self); }

function QueryByDistanceParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function QueryByDistanceParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function QueryByDistanceParameters_getPrototypeOf(o) { QueryByDistanceParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return QueryByDistanceParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.QueryByDistanceParameters
 * @category  iServer Map QueryResults
 * @classdesc Distance æ¥è¯¢åæ°ç±»ã
 *            è¯¥ç±»ç¨äºè®¾ç½® Distance æ¥è¯¢çç¸å³åæ°ã
 * @extends {SuperMap.QueryParameters}
 * @param {Object} options - åæ°ã
 * @param {Object} options.geometry - ç¨äºæ¥è¯¢çå ä½å¯¹è±¡ã
 * @param {Array.<SuperMap.FilterParameter>} options.queryParams - æ¥è¯¢è¿æ»¤æ¡ä»¶åæ°æ°ç»ã
 * @param {string} [options.customParams] - èªå®ä¹åæ°ï¼ä¾æ©å±ä½¿ç¨ã
 * @param {Object} [options.prjCoordSys] -èªå®ä¹åæ°ï¼ä¾ SuperMap Online æä¾çå¨ææå½±æ¥è¯¢æ©å±ä½¿ç¨ãå¦ {"epsgCode":3857}ã
 * @param {number} [options.expectCount=100000] - ææè¿åç»æè®°å½ä¸ªæ°ã
 * @param {SuperMap.GeometryType} [options.networkType=SuperMap.GeometryType.LINE] - ç½ç»æ°æ®éå¯¹åºçæ¥è¯¢ç±»åã
 * @param {SuperMap.QueryOption} [options.queryOption=SuperMap.QueryOption.ATTRIBUTEANDGEOMETRY] - æ¥è¯¢ç»æç±»åæä¸¾ç±»ã
 * @param {number} [options.startRecord=0] - æ¥è¯¢èµ·å§è®°å½å·ã
 * @param {number} [options.holdTime=10] - èµæºå¨æå¡ç«¯ä¿å­çæ¶é´ï¼åä½ä¸ºåéã
 * @param {boolean} [options.returnCustomResult=false] -ä»ä¾ä¸ç»´ä½¿ç¨ã
 * @param {number} [options.distance=0] - æ¥è¯¢è·ç¦»ã
 * @param {boolean} [options.isNearest=false] - æ¯å¦ä¸ºæè¿è·ç¦»æ¥è¯¢ã
 * @param {boolean} [options.returnContent=true] - æ¯å¦ç«å³è¿åæ°åå»ºèµæºçè¡¨è¿°è¿æ¯è¿åæ°èµæºç URIã
 * @param {boolean} [options.returnFeatureWithFieldCaption = false] - è¿åçæ¥è¯¢ç»æè¦ç´ å­æ®µæ è¯æ¯å¦ä¸ºå­æ®µå«åãä¸º false æ¶ï¼è¿åçæ¯å­æ®µåï¼ä¸º true æ¶ï¼è¿åçæ¯å­æ®µå«åã
 */

var QueryByDistanceParameters = /*#__PURE__*/function (_QueryParameters) {
  QueryByDistanceParameters_inherits(QueryByDistanceParameters, _QueryParameters);

  var _super = QueryByDistanceParameters_createSuper(QueryByDistanceParameters);

  function QueryByDistanceParameters(options) {
    var _this;

    QueryByDistanceParameters_classCallCheck(this, QueryByDistanceParameters);

    if (!options) {
      return QueryByDistanceParameters_possibleConstructorReturn(_this);
    }

    _this = _super.call(this, options);
    /**
     * @member {number} [SuperMap.QueryByDistanceParameters.prototype.distance=0]
     * @description æ¥è¯¢è·ç¦»ï¼åä½ä¸ææ¥è¯¢å¾å±å¯¹åºçæ°æ®éåä½ç¸åã
     *              å½æ¥æ¾æè¿å°ç©æ¶ï¼è¯¥å±æ§æ æã
     */

    _this.distance = 0;
    /**
     * @member SuperMap.QueryByDistanceParameters.prototype.geometry
     * @description ç¨äºæ¥è¯¢çå°çå¯¹è±¡ã<br>
     * ç¹ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.Point}|{@link L.Marker}|{@link L.CircleMarker}|{@link L.Circle}|{@link L.GeoJSON}|{@link ol.geom.Point}|{@link ol.format.GeoJSON}ã<br>
     * çº¿ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.LineString}|{@link SuperMap.Geometry.LinearRing}|{@link L.Polyline}|{@link L.GeoJSON}|{@link ol.geom.LineString}|{@link ol.format.GeoJSON}ã<br>
     * é¢ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.Polygon}|{@link L.Polygon}|{@link L.GeoJSON}|{@link ol.geom.Polygon}|{@link ol.format.GeoJSON}ã
     */

    _this.geometry = null;
    /**
     * @member {boolean} [SuperMap.QueryByDistanceParameters.prototype.isNearest=false]
     * @description æ¯å¦ä¸ºæè¿è·ç¦»æ¥è¯¢ã<br>
     *               å»ºè®®è¯¥å±æ§ä¸ expectCountï¼ç»§æ¿èª {@link SuperMap.QueryParameters}ï¼å±æ§èåä½¿ç¨ã
     *               å½è¯¥å±æ§ä¸º true æ¶ï¼å³è¡¨ç¤ºæ¥æ¾æè¿å°ç©ï¼å¦ææ¥è¯¢ç»ææ°å¤§äºææè¿åçç»æè®°å½æ°ï¼expectCountï¼ï¼
     *               åæ¥æ¾ç»æä¸ºæ¥è¯¢æ»è®°å½ä¸­è·ç¦»ä¸­å¿æè¿ç expectCount ä¸ªå°ç©ã
     *               å½è¯¥å±æ§ä¸ºä¸ä¸º true æ¶ï¼å¦ææ¥è¯¢ç»ææ°å¤§äºææè¿åçç»æè®°å½æ°ï¼expectCountï¼ï¼
     *               åæ¥æ¾ç»æä¸ºä»æ¥è¯¢æ»è®°å½ä¸­éæºæ½åç expectCount ä¸ªå°ç©ã
     *               ç®åæ¥è¯¢ç»æä¸æ¯ææè¿è¿è·ç¦»æåºã
     */

    _this.isNearest = null;
    /**
     * @member {boolean} [SuperMap.QueryByDistanceParameters.prototype.returnContent=true]
     * @description æ¯å¦ç«å³è¿åæ°åå»ºèµæºçè¡¨è¿°è¿æ¯è¿åæ°èµæºç URIã
     *               å¦æä¸º trueï¼åç´æ¥è¿åæ°åå»ºèµæºï¼å³æ¥è¯¢ç»æçè¡¨è¿°ã
     *               ä¸º falseï¼åè¿åçæ¯æ¥è¯¢ç»æèµæºç URIã 
     */

    _this.returnContent = true;
    Util.extend(QueryByDistanceParameters_assertThisInitialized(_this), options);
    _this.CLASS_NAME = "SuperMap.QueryByDistanceParameters";
    return _this;
  }
  /**
   * @function SuperMap.QueryByDistanceParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  QueryByDistanceParameters_createClass(QueryByDistanceParameters, [{
    key: "destroy",
    value: function destroy() {
      QueryByDistanceParameters_get(QueryByDistanceParameters_getPrototypeOf(QueryByDistanceParameters.prototype), "destroy", this).call(this);

      var me = this;
      me.returnContent = null;
      me.distance = null;
      me.isNearest = null;

      if (me.geometry) {
        me.geometry.destroy();
        me.geometry = null;
      }
    }
  }]);

  return QueryByDistanceParameters;
}(QueryParameters);
SuperMap.QueryByDistanceParameters = QueryByDistanceParameters;
// CONCATENATED MODULE: ./src/common/iServer/QueryByDistanceService.js
function QueryByDistanceService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { QueryByDistanceService_typeof = function _typeof(obj) { return typeof obj; }; } else { QueryByDistanceService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return QueryByDistanceService_typeof(obj); }

function QueryByDistanceService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function QueryByDistanceService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function QueryByDistanceService_createClass(Constructor, protoProps, staticProps) { if (protoProps) QueryByDistanceService_defineProperties(Constructor.prototype, protoProps); if (staticProps) QueryByDistanceService_defineProperties(Constructor, staticProps); return Constructor; }

function QueryByDistanceService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { QueryByDistanceService_get = Reflect.get; } else { QueryByDistanceService_get = function _get(target, property, receiver) { var base = QueryByDistanceService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return QueryByDistanceService_get(target, property, receiver || target); }

function QueryByDistanceService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = QueryByDistanceService_getPrototypeOf(object); if (object === null) break; } return object; }

function QueryByDistanceService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) QueryByDistanceService_setPrototypeOf(subClass, superClass); }

function QueryByDistanceService_setPrototypeOf(o, p) { QueryByDistanceService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return QueryByDistanceService_setPrototypeOf(o, p); }

function QueryByDistanceService_createSuper(Derived) { var hasNativeReflectConstruct = QueryByDistanceService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = QueryByDistanceService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = QueryByDistanceService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return QueryByDistanceService_possibleConstructorReturn(this, result); }; }

function QueryByDistanceService_possibleConstructorReturn(self, call) { if (call && (QueryByDistanceService_typeof(call) === "object" || typeof call === "function")) { return call; } return QueryByDistanceService_assertThisInitialized(self); }

function QueryByDistanceService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function QueryByDistanceService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function QueryByDistanceService_getPrototypeOf(o) { QueryByDistanceService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return QueryByDistanceService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.QueryByDistanceService
 * @category  iServer Map QueryResults
 * @classdesc Distanceæ¥è¯¢æå¡ç±»ã
 * @extends {SuperMap.QueryService}
 * @example
 * var myQueryByDistService = new SuperMap.QueryByDistanceService(url, {
 *     eventListeners: {
 *         "processCompleted": queryCompleted,
 *		   "processFailed": queryError
 *		   }
 * });
 * function queryCompleted(object){//todo};
 * function queryError(object){//todo};
 * @param {string} url - æå¡çè®¿é®å°åãå¦è®¿é®World Mapæå¡ï¼åªéå°urlè®¾ä¸ºï¼http://localhost:8090/iserver/services/map-world/rest/maps/World+Map å³å¯ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæprocessCompletedå±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailedå±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã 
 * @param {SuperMap.DataFormat} [options.format=SuperMap.DataFormat.GEOJSON] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var QueryByDistanceService = /*#__PURE__*/function (_QueryService) {
  QueryByDistanceService_inherits(QueryByDistanceService, _QueryService);

  var _super = QueryByDistanceService_createSuper(QueryByDistanceService);

  function QueryByDistanceService(url, options) {
    var _this;

    QueryByDistanceService_classCallCheck(this, QueryByDistanceService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.QueryByDistanceService";
    return _this;
  }
  /**
   * @override
   */


  QueryByDistanceService_createClass(QueryByDistanceService, [{
    key: "destroy",
    value: function destroy() {
      QueryByDistanceService_get(QueryByDistanceService_getPrototypeOf(QueryByDistanceService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.QueryByDistanceService.prototype.getJsonParameters
     * @description å°æ¥è¯¢åæ°è½¬åä¸º JSON å­ç¬¦ä¸²ã
     *              å¨æ¬ç±»ä¸­éåæ­¤æ¹æ³ï¼å¯ä»¥å®ç°ä¸åç§ç±»çæ¥è¯¢ï¼sql, geometry, distance, boundsç­ï¼ã
     * @param {SuperMap.QueryByDistanceParameters} params - Distance æ¥è¯¢åæ°ç±»ã
     * @returns {Object} è½¬ååç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "getJsonParameters",
    value: function getJsonParameters(params) {
      if (!(params instanceof QueryByDistanceParameters)) {
        return;
      }

      var me = this,
          jsonParameters = "",
          qp = me.getQueryParameters(params);
      var sg = ServerGeometry.fromGeometry(params.geometry);
      jsonParameters += params.isNearest ? "'queryMode':'FindNearest','queryParameters':" : "'queryMode':'DistanceQuery','queryParameters':";
      jsonParameters += Util.toJSON(qp);
      jsonParameters += ",'geometry':" + Util.toJSON(sg) + ",'distance':" + params.distance;
      jsonParameters = "{" + jsonParameters + "}";
      return jsonParameters;
    }
  }]);

  return QueryByDistanceService;
}(QueryService);
SuperMap.QueryByDistanceService = QueryByDistanceService;
// CONCATENATED MODULE: ./src/common/iServer/QueryByGeometryParameters.js
function QueryByGeometryParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { QueryByGeometryParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { QueryByGeometryParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return QueryByGeometryParameters_typeof(obj); }

function QueryByGeometryParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function QueryByGeometryParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function QueryByGeometryParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) QueryByGeometryParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) QueryByGeometryParameters_defineProperties(Constructor, staticProps); return Constructor; }

function QueryByGeometryParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { QueryByGeometryParameters_get = Reflect.get; } else { QueryByGeometryParameters_get = function _get(target, property, receiver) { var base = QueryByGeometryParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return QueryByGeometryParameters_get(target, property, receiver || target); }

function QueryByGeometryParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = QueryByGeometryParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function QueryByGeometryParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) QueryByGeometryParameters_setPrototypeOf(subClass, superClass); }

function QueryByGeometryParameters_setPrototypeOf(o, p) { QueryByGeometryParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return QueryByGeometryParameters_setPrototypeOf(o, p); }

function QueryByGeometryParameters_createSuper(Derived) { var hasNativeReflectConstruct = QueryByGeometryParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = QueryByGeometryParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = QueryByGeometryParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return QueryByGeometryParameters_possibleConstructorReturn(this, result); }; }

function QueryByGeometryParameters_possibleConstructorReturn(self, call) { if (call && (QueryByGeometryParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return QueryByGeometryParameters_assertThisInitialized(self); }

function QueryByGeometryParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function QueryByGeometryParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function QueryByGeometryParameters_getPrototypeOf(o) { QueryByGeometryParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return QueryByGeometryParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.QueryByGeometryParameters
 * @category  iServer Map QueryResults
 * @classdesc Geometry æ¥è¯¢åæ°ç±»ã
 *            è¯¥ç±»ç¨äºè®¾ç½® Geometryæ¥è¯¢çç¸å³åæ°ã
 * @extends {SuperMap.QueryParameters}
 * @param {Object} options - åæ°ã
 * @param {Array.<SuperMap.FilterParameter>} options.queryParams - æ¥è¯¢è¿æ»¤æ¡ä»¶åæ°æ°ç»ã
 * @param {Object} options.geometry - ç¨äºæ¥è¯¢çå ä½å¯¹è±¡ã 
 * @param {string} [options.customParams] - èªå®ä¹åæ°ï¼ä¾æ©å±ä½¿ç¨ã
 * @param {SuperMap.QueryOption} [options.queryOption=SuperMap.ATTRIBUTEANDGEOMETRY] - æ¥è¯¢ç»æç±»åæä¸¾ç±»ã
 * @param {Object} [options.prjCoordSys] -èªå®ä¹åæ°ï¼ä¾SuperMap Onlineæä¾çå¨ææå½±æ¥è¯¢æ©å±ä½¿ç¨ãå¦ {"epsgCode":3857}ã
 * @param {number} [options.expectCount=100000] - ææè¿åç»æè®°å½ä¸ªæ°ã
 * @param {SuperMap.GeometryType} [options.networkType=SuperMap.GeometryType.LINE] - ç½ç»æ°æ®éå¯¹åºçæ¥è¯¢ç±»åã
 * @param {boolean} [options.returnCustomResult=false] -ä»ä¾ä¸ç»´ä½¿ç¨ã
 * @param {number} [options.startRecord=0] - æ¥è¯¢èµ·å§è®°å½å·ã
 * @param {number} [options.holdTime=10] - èµæºå¨æå¡ç«¯ä¿å­çæ¶é´ï¼åä½ä¸ºåéã
 * @param {boolean} [options.returnContent=true] - æ¯å¦ç«å³è¿åæ°åå»ºèµæºçè¡¨è¿°è¿æ¯è¿åæ°èµæºç URIã
 * @param {boolean} [options.returnFeatureWithFieldCaption = false] - è¿åçæ¥è¯¢ç»æè¦ç´ å­æ®µæ è¯æ¯å¦ä¸ºå­æ®µå«åãä¸º false æ¶ï¼è¿åçæ¯å­æ®µåï¼ä¸º true æ¶ï¼è¿åçæ¯å­æ®µå«åã
 * @param {SuperMap.SpatialQueryMode} [spatialQueryMode=SuperMap.SpatialQueryMode.INTERSECT] - ç©ºé´æ¥è¯¢æ¨¡å¼ã
 */

var QueryByGeometryParameters = /*#__PURE__*/function (_QueryParameters) {
  QueryByGeometryParameters_inherits(QueryByGeometryParameters, _QueryParameters);

  var _super = QueryByGeometryParameters_createSuper(QueryByGeometryParameters);

  function QueryByGeometryParameters(options) {
    var _this;

    QueryByGeometryParameters_classCallCheck(this, QueryByGeometryParameters);

    if (!options) {
      return QueryByGeometryParameters_possibleConstructorReturn(_this);
    }

    _this = _super.call(this, options);
    /**
     * @member {boolean} [SuperMap.QueryByGeometryParameters.prototype.returnContent=true]
     * @description æ¯å¦ç«å³è¿åæ°åå»ºèµæºçè¡¨è¿°è¿æ¯è¿åæ°èµæºç URIã<br>
     *              å¦æä¸º trueï¼åç´æ¥è¿åæ°åå»ºèµæºï¼å³æ¥è¯¢ç»æçè¡¨è¿°ã<br>
     *              ä¸º falseï¼åè¿åçæ¯æ¥è¯¢ç»æèµæºç URIã
     */

    _this.returnContent = true;
    /**
     * @member {Object} SuperMap.QueryByGeometryParameters.prototype.geometry
     * @description ç¨äºæ¥è¯¢çå ä½å¯¹è±¡ã<br>
     * ç¹ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.Point}|{@link L.Marker}|{@link L.CircleMarker}|{@link L.Circle}|{@link L.GeoJSON}|{@link ol.geom.Point}|{@link ol.format.GeoJSON}ã<br>
     * çº¿ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.LineString}|{@link SuperMap.Geometry.LinearRing}|{@link L.Polyline}|{@link L.GeoJSON}|{@link ol.geom.LineString}|{@link ol.format.GeoJSON}ã<br>
     * é¢ç±»åå¯ä»¥æ¯ï¼{@link SuperMap.Geometry.Polygon}|{@link L.Polygon}|{@link L.GeoJSON}|{@link ol.geom.Polygon}|{@link ol.format.GeoJSON}ã
     */

    _this.geometry = null;
    /**
     * @member {SuperMap.SpatialQueryMode} [SuperMap.QueryByGeometryParameters.prototype.spatialQueryMode=SuperMap.SpatialQueryMode.INTERSECT]
     * @description ç©ºé´æ¥è¯¢æ¨¡å¼ã
     */

    _this.spatialQueryMode = SpatialQueryMode.INTERSECT;
    Util.extend(QueryByGeometryParameters_assertThisInitialized(_this), options);
    _this.CLASS_NAME = "SuperMap.QueryByGeometryParameters";
    return _this;
  }
  /**
   * @function SuperMap.QueryByGeometryParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  QueryByGeometryParameters_createClass(QueryByGeometryParameters, [{
    key: "destroy",
    value: function destroy() {
      QueryByGeometryParameters_get(QueryByGeometryParameters_getPrototypeOf(QueryByGeometryParameters.prototype), "destroy", this).call(this);

      var me = this;
      me.returnContent = null;
      me.geometry = null;
      me.spatialQueryMode = null;
    }
  }]);

  return QueryByGeometryParameters;
}(QueryParameters);
SuperMap.QueryByGeometryParameters = QueryByGeometryParameters;
// CONCATENATED MODULE: ./src/common/iServer/QueryByGeometryService.js
function QueryByGeometryService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { QueryByGeometryService_typeof = function _typeof(obj) { return typeof obj; }; } else { QueryByGeometryService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return QueryByGeometryService_typeof(obj); }

function QueryByGeometryService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function QueryByGeometryService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function QueryByGeometryService_createClass(Constructor, protoProps, staticProps) { if (protoProps) QueryByGeometryService_defineProperties(Constructor.prototype, protoProps); if (staticProps) QueryByGeometryService_defineProperties(Constructor, staticProps); return Constructor; }

function QueryByGeometryService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { QueryByGeometryService_get = Reflect.get; } else { QueryByGeometryService_get = function _get(target, property, receiver) { var base = QueryByGeometryService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return QueryByGeometryService_get(target, property, receiver || target); }

function QueryByGeometryService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = QueryByGeometryService_getPrototypeOf(object); if (object === null) break; } return object; }

function QueryByGeometryService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) QueryByGeometryService_setPrototypeOf(subClass, superClass); }

function QueryByGeometryService_setPrototypeOf(o, p) { QueryByGeometryService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return QueryByGeometryService_setPrototypeOf(o, p); }

function QueryByGeometryService_createSuper(Derived) { var hasNativeReflectConstruct = QueryByGeometryService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = QueryByGeometryService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = QueryByGeometryService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return QueryByGeometryService_possibleConstructorReturn(this, result); }; }

function QueryByGeometryService_possibleConstructorReturn(self, call) { if (call && (QueryByGeometryService_typeof(call) === "object" || typeof call === "function")) { return call; } return QueryByGeometryService_assertThisInitialized(self); }

function QueryByGeometryService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function QueryByGeometryService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function QueryByGeometryService_getPrototypeOf(o) { QueryByGeometryService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return QueryByGeometryService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.QueryByGeometryService
 * @category  iServer Map QueryResults
 * @classdesc Geometryæ¥è¯¢æå¡ç±»ã
 * @extends {SuperMap.QueryService}
 * @example
 * var myQueryByGeometryService = new SuperMap.QueryByGeometryService(url, {
 *     eventListeners: {
 *	      "processCompleted": queryCompleted,
 *		  "processFailed": queryError
 *		  }
 * });
 * function queryCompleted(object){//todo};
 * function queryError(object){//todo};
 * @param {string} url - æå¡çè®¿é®å°åãå¦è®¿é®World Mapæå¡ï¼åªéå°urlè®¾ä¸º: http://localhost:8090/iserver/services/map-world/rest/maps/World+Map å³å¯ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæprocessCompletedå±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailedå±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã 
 * @param {SuperMap.DataFormat} [options.format=SuperMap.DataFormat.GEOJSON] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var QueryByGeometryService = /*#__PURE__*/function (_QueryService) {
  QueryByGeometryService_inherits(QueryByGeometryService, _QueryService);

  var _super = QueryByGeometryService_createSuper(QueryByGeometryService);

  /**
   * @function SuperMap.QueryByGeometryService.prototype.constructor
   * @description Geometry æ¥è¯¢æå¡ç±»æé å½æ°ã
   * @param {string} url - æå¡çè®¿é®å°åãå¦è®¿é®World Mapæå¡ï¼åªéå°urlè®¾ä¸º: http://localhost:8090/iserver/services/map-world/rest/maps/World+Map å³å¯ã
   * @param {Object} options - åæ°ã
   * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
   */
  function QueryByGeometryService(url, options) {
    var _this;

    QueryByGeometryService_classCallCheck(this, QueryByGeometryService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.QueryByGeometryService";
    return _this;
  }
  /**
   * @override
   */


  QueryByGeometryService_createClass(QueryByGeometryService, [{
    key: "destroy",
    value: function destroy() {
      QueryByGeometryService_get(QueryByGeometryService_getPrototypeOf(QueryByGeometryService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.QueryByGeometryService.prototype.getJsonParameters
     * @description å°æ¥è¯¢åæ°è½¬åä¸º JSON å­ç¬¦ä¸²ã
     *              å¨æ¬ç±»ä¸­éåæ­¤æ¹æ³ï¼å¯ä»¥å®ç°ä¸åç§ç±»çæ¥è¯¢ï¼sql, geometry, distance, boundsç­ï¼ã
     * @param {SuperMap.QueryByGeometryParameters} params - Geometry æ¥è¯¢åæ°ç±»ã
     * @returns {Object} è½¬ååç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "getJsonParameters",
    value: function getJsonParameters(params) {
      if (!(params instanceof QueryByGeometryParameters)) {
        return;
      }

      var me = this,
          jsonParameters = "",
          qp = null,
          geometry = params.geometry,
          sg = ServerGeometry.fromGeometry(geometry);
      qp = me.getQueryParameters(params);
      jsonParameters += "'queryMode':'SpatialQuery','queryParameters':";
      jsonParameters += Util.toJSON(qp) + ",'geometry':" + Util.toJSON(sg) + ",'spatialQueryMode':" + Util.toJSON(params.spatialQueryMode);
      jsonParameters = "{" + jsonParameters + "}";
      return jsonParameters;
    }
  }]);

  return QueryByGeometryService;
}(QueryService);
SuperMap.QueryByGeometryService = QueryByGeometryService;
// CONCATENATED MODULE: ./src/common/iServer/QueryBySQLParameters.js
function QueryBySQLParameters_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { QueryBySQLParameters_typeof = function _typeof(obj) { return typeof obj; }; } else { QueryBySQLParameters_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return QueryBySQLParameters_typeof(obj); }

function QueryBySQLParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function QueryBySQLParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function QueryBySQLParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) QueryBySQLParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) QueryBySQLParameters_defineProperties(Constructor, staticProps); return Constructor; }

function QueryBySQLParameters_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { QueryBySQLParameters_get = Reflect.get; } else { QueryBySQLParameters_get = function _get(target, property, receiver) { var base = QueryBySQLParameters_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return QueryBySQLParameters_get(target, property, receiver || target); }

function QueryBySQLParameters_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = QueryBySQLParameters_getPrototypeOf(object); if (object === null) break; } return object; }

function QueryBySQLParameters_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) QueryBySQLParameters_setPrototypeOf(subClass, superClass); }

function QueryBySQLParameters_setPrototypeOf(o, p) { QueryBySQLParameters_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return QueryBySQLParameters_setPrototypeOf(o, p); }

function QueryBySQLParameters_createSuper(Derived) { var hasNativeReflectConstruct = QueryBySQLParameters_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = QueryBySQLParameters_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = QueryBySQLParameters_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return QueryBySQLParameters_possibleConstructorReturn(this, result); }; }

function QueryBySQLParameters_possibleConstructorReturn(self, call) { if (call && (QueryBySQLParameters_typeof(call) === "object" || typeof call === "function")) { return call; } return QueryBySQLParameters_assertThisInitialized(self); }

function QueryBySQLParameters_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function QueryBySQLParameters_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function QueryBySQLParameters_getPrototypeOf(o) { QueryBySQLParameters_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return QueryBySQLParameters_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.QueryBySQLParameters
 * @category  iServer Map QueryResults
 * @classdesc SQL æ¥è¯¢åæ°ç±»ã
 *            è¯¥ç±»ç¨äºè®¾ç½® SQL æ¥è¯¢çç¸å³åæ°ã
 * @extends {SuperMap.QueryParameters}
 * @param {Object} options - åæ°ã
 * @param {Array.<SuperMap.FilterParameter>} options.queryParams - æ¥è¯¢è¿æ»¤æ¡ä»¶åæ°æ°ç»ã
 * @param {string} [options.customParams] - èªå®ä¹åæ°ï¼ä¾æ©å±ä½¿ç¨ã
 * @param {Object} [options.prjCoordSys] - èªå®ä¹åæ°ï¼ä¾ SuperMap Online æä¾çå¨ææå½±æ¥è¯¢æ©å±ä½¿ç¨ãå¦ {"epsgCode":3857}ã
 * @param {number} [options.expectCount=100000] - ææè¿åç»æè®°å½ä¸ªæ°ã
 * @param {SuperMap.GeometryType} [options.networkType=SuperMap.GeometryType.LINE] - ç½ç»æ°æ®éå¯¹åºçæ¥è¯¢ç±»åã
 * @param {SuperMap.QueryOption} [options.queryOption=SuperMap.ATTRIBUTEANDGEOMETRY] - æ¥è¯¢ç»æç±»åæä¸¾ç±»ã
 * @param {number} [options.startRecord=0] - æ¥è¯¢èµ·å§è®°å½å·ã
 * @param {number} [options.holdTime=10] - èµæºå¨æå¡ç«¯ä¿å­çæ¶é´ï¼åä½ä¸ºåéã
 * @param {boolean} [options.returnCustomResult=false] - ä»ä¾ä¸ç»´ä½¿ç¨ã
 * @param {boolean} [options.returnContent=true] - æ¯å¦ç«å³è¿åæ°åå»ºèµæºçè¡¨è¿°è¿æ¯è¿åæ°èµæºç URIã
 * @param {boolean} [options.returnFeatureWithFieldCaption = false] - è¿åçæ¥è¯¢ç»æè¦ç´ å­æ®µæ è¯æ¯å¦ä¸ºå­æ®µå«åãä¸º false æ¶ï¼è¿åçæ¯å­æ®µåï¼ä¸º true æ¶ï¼è¿åçæ¯å­æ®µå«åã
 */

var QueryBySQLParameters = /*#__PURE__*/function (_QueryParameters) {
  QueryBySQLParameters_inherits(QueryBySQLParameters, _QueryParameters);

  var _super = QueryBySQLParameters_createSuper(QueryBySQLParameters);

  function QueryBySQLParameters(options) {
    var _this;

    QueryBySQLParameters_classCallCheck(this, QueryBySQLParameters);

    if (!options) {
      return QueryBySQLParameters_possibleConstructorReturn(_this);
    }

    _this = _super.call(this, options);
    /**
     * @member {boolean} [SuperMap.QueryBySQLParameters.prototype.returnContent=true]
     * @description æ¯å¦ç«å³è¿åæ°åå»ºèµæºçè¡¨è¿°è¿æ¯è¿åæ°èµæºç URIã
     *              å¦æä¸º trueï¼åç´æ¥è¿åæ°åå»ºèµæºï¼å³æ¥è¯¢ç»æçè¡¨è¿°ã
     *              ä¸º falseï¼åè¿åçæ¯æ¥è¯¢ç»æèµæºç URIã
     */

    _this.returnContent = true;
    Util.extend(QueryBySQLParameters_assertThisInitialized(_this), options);
    _this.CLASS_NAME = "SuperMap.QueryBySQLParameters";
    return _this;
  }
  /**
   * @function SuperMap.QueryBySQLParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  QueryBySQLParameters_createClass(QueryBySQLParameters, [{
    key: "destroy",
    value: function destroy() {
      QueryBySQLParameters_get(QueryBySQLParameters_getPrototypeOf(QueryBySQLParameters.prototype), "destroy", this).call(this);

      var me = this;
      me.returnContent = null;
    }
  }]);

  return QueryBySQLParameters;
}(QueryParameters);
SuperMap.QueryBySQLParameters = QueryBySQLParameters;
// CONCATENATED MODULE: ./src/common/iServer/QueryBySQLService.js
function QueryBySQLService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { QueryBySQLService_typeof = function _typeof(obj) { return typeof obj; }; } else { QueryBySQLService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return QueryBySQLService_typeof(obj); }

function QueryBySQLService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function QueryBySQLService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function QueryBySQLService_createClass(Constructor, protoProps, staticProps) { if (protoProps) QueryBySQLService_defineProperties(Constructor.prototype, protoProps); if (staticProps) QueryBySQLService_defineProperties(Constructor, staticProps); return Constructor; }

function QueryBySQLService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { QueryBySQLService_get = Reflect.get; } else { QueryBySQLService_get = function _get(target, property, receiver) { var base = QueryBySQLService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return QueryBySQLService_get(target, property, receiver || target); }

function QueryBySQLService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = QueryBySQLService_getPrototypeOf(object); if (object === null) break; } return object; }

function QueryBySQLService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) QueryBySQLService_setPrototypeOf(subClass, superClass); }

function QueryBySQLService_setPrototypeOf(o, p) { QueryBySQLService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return QueryBySQLService_setPrototypeOf(o, p); }

function QueryBySQLService_createSuper(Derived) { var hasNativeReflectConstruct = QueryBySQLService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = QueryBySQLService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = QueryBySQLService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return QueryBySQLService_possibleConstructorReturn(this, result); }; }

function QueryBySQLService_possibleConstructorReturn(self, call) { if (call && (QueryBySQLService_typeof(call) === "object" || typeof call === "function")) { return call; } return QueryBySQLService_assertThisInitialized(self); }

function QueryBySQLService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function QueryBySQLService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function QueryBySQLService_getPrototypeOf(o) { QueryBySQLService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return QueryBySQLService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.QueryBySQLService
 * @category  iServer Map QueryResults
 * @classdesc SQL æ¥è¯¢æå¡ç±»ãå¨ä¸ä¸ªæå¤ä¸ªæå®çå¾å±ä¸æ¥è¯¢ç¬¦å SQL æ¡ä»¶çç©ºé´å°ç©ä¿¡æ¯ã
 * @extends {SuperMap.QueryService}
 * @example
 * var queryParam = new SuperMap.FilterParameter({
 *     name: "Countries@World.1",
 *     attributeFilter: "Pop_1994>1000000000 and SmArea>900"
 * });
 * var queryBySQLParams = new SuperMap.QueryBySQLParameters({
 *     queryParams: [queryParam]
 * });
 * var myQueryBySQLService = new SuperMap.QueryBySQLService(url, {eventListeners: {
 *     "processCompleted": queryCompleted,
 *     "processFailed": queryError
 *	   }
 * });
 * queryBySQLService.processAsync(queryBySQLParams);
 * function queryCompleted(object){//todo};
 * function queryError(object){//todo};
 * @param {string} url - æå¡çè®¿é®å°åãå¦è®¿é®World Mapæå¡ï¼åªéå°urlè®¾ä¸º: http://localhost:8090/iserver/services/map-world/rest/maps/World+Map å³å¯ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæprocessCompletedå±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailedå±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã 
 * @param {SuperMap.DataFormat} [options.format=SuperMap.DataFormat.GEOJSON] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var QueryBySQLService = /*#__PURE__*/function (_QueryService) {
  QueryBySQLService_inherits(QueryBySQLService, _QueryService);

  var _super = QueryBySQLService_createSuper(QueryBySQLService);

  /**
   * @function SuperMap.QueryBySQLService.prototype.constructor
   * @description SQL æ¥è¯¢æå¡ç±»æé å½æ°ã
   * @param {string} url - æå¡çè®¿é®å°åãå¦è®¿é®World Mapæå¡ï¼åªéå°urlè®¾ä¸º: http://localhost:8090/iserver/services/map-world/rest/maps/World+Map å³å¯ã
   * @param {Object} options - åæ°ã
   * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
   */
  function QueryBySQLService(url, options) {
    var _this;

    QueryBySQLService_classCallCheck(this, QueryBySQLService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.QueryBySQLService";
    return _this;
  }
  /**
   * @override
   */


  QueryBySQLService_createClass(QueryBySQLService, [{
    key: "destroy",
    value: function destroy() {
      QueryBySQLService_get(QueryBySQLService_getPrototypeOf(QueryBySQLService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.QueryBySQLService.prototype.getJsonParameters
     * @description å°æ¥è¯¢åæ°è½¬åä¸º JSON å­ç¬¦ä¸²ã
     *              å¨æ¬ç±»ä¸­éåæ­¤æ¹æ³ï¼å¯ä»¥å®ç°ä¸åç§ç±»çæ¥è¯¢ï¼sql, geometry, distance, boundsç­ï¼ã
     * @param {SuperMap.QueryBySQLParameters} params - SQL æ¥è¯¢åæ°ç±»ã
     * @returns {Object} è½¬ååç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "getJsonParameters",
    value: function getJsonParameters(params) {
      if (!(params instanceof QueryBySQLParameters)) {
        return;
      }

      var me = this,
          jsonParameters = "",
          qp = null;
      qp = me.getQueryParameters(params);
      jsonParameters += "'queryMode':'SqlQuery','queryParameters':";
      jsonParameters += Util.toJSON(qp);
      jsonParameters = "{" + jsonParameters + "}";
      return jsonParameters;
    }
  }]);

  return QueryBySQLService;
}(QueryService);
SuperMap.QueryBySQLService = QueryBySQLService;
// CONCATENATED MODULE: ./src/common/iServer/RouteCalculateMeasureParameters.js
function RouteCalculateMeasureParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function RouteCalculateMeasureParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function RouteCalculateMeasureParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) RouteCalculateMeasureParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) RouteCalculateMeasureParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.RouteCalculateMeasureParameters
 * @category  iServer SpatialAnalyst RouteCalculateMeasure
 * @classdesc åºäºè·¯ç±å¯¹è±¡è®¡ç®æå®ç¹ M å¼æä½çåæ°ç±»ãéè¿è¯¥ç±»æä¾åæ°ä¿¡æ¯ã
 * @param {Object} options - åæ°ã
 * @param {(SuperMap.Route|L.Polyline|ol.geom.LineString)} options.sourceRoute - è·¯ç±å¯¹è±¡ãè¯¥å¯¹è±¡å¯ä»¥æ¯ç¨æ·èªå·±çææå¨æ°æ®æºä¸­æ¥è¯¢å¾å°çç¬¦åæ åçè·¯ç±å¯¹è±¡ã
 * @param {(SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point)} options.point - äºç»´å°çåæ ç¹å¯¹è±¡ï¼åå« x,y åæ å¼å±æ§çå¯¹è±¡ã
 * @param {float} [options.tolerance] - å®¹éå¼ã
 * @param {boolean} [options.isIgnoreGap=false] - æ¯å¦å¿½ç¥å­å¯¹è±¡ä¹é´çè·ç¦»ã
 */

var RouteCalculateMeasureParameters = /*#__PURE__*/function () {
  function RouteCalculateMeasureParameters(options) {
    RouteCalculateMeasureParameters_classCallCheck(this, RouteCalculateMeasureParameters);

    if (!options) {
      return this;
    }
    /**
     * @member {(SuperMap.Route|L.Polyline|ol.geom.LineString)} SuperMap.RouteCalculateMeasureParameters.prototype.sourceRoute
     * @description è·¯ç±å¯¹è±¡ãè¯¥å¯¹è±¡å¯ä»¥æ¯ç¨æ·èªå·±çææå¨æ°æ®æºä¸­æ¥è¯¢å¾å°çç¬¦åæ åçè·¯ç±å¯¹è±¡ã
     */


    this.sourceRoute = null;
    /**
     * @member {(SuperMap.Geometry.Point|L.LatLng|L.Point|ol.geom.Point)} SuperMap.RouteCalculateMeasureParameters.prototype.point
     * @description äºç»´å°çåæ ç¹å¯¹è±¡ï¼åå« x,y åæ å¼å±æ§çå¯¹è±¡ã
     */

    this.point = null;
    /**
     * @member {float} [SuperMap.RouteCalculateMeasureParameters.prototype.tolerance]
     * @description å®¹éå¼ã
     */

    this.tolerance = null;
    /**
     * @member {boolean} [SuperMap.RouteCalculateMeasureParameters.prototype.isIgnoreGap=false]
     * @description æ¯å¦å¿½ç¥å­å¯¹è±¡ä¹é´çè·ç¦»ã
     */

    this.isIgnoreGap = false;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.RouteCalculateMeasureParameters";
  }
  /**
   * @function SuperMap.RouteCalculateMeasureParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  RouteCalculateMeasureParameters_createClass(RouteCalculateMeasureParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.sourceRoute = null;
      me.point = null;

      if (me.tolerance) {
        me.tolerance = null;
      }

      if (me.isIgnoreGap) {
        me.isIgnoreGap = false;
      }
    }
  }]);

  return RouteCalculateMeasureParameters;
}();
SuperMap.RouteCalculateMeasureParameters = RouteCalculateMeasureParameters;
// CONCATENATED MODULE: ./src/common/iServer/RouteCalculateMeasureService.js
function RouteCalculateMeasureService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { RouteCalculateMeasureService_typeof = function _typeof(obj) { return typeof obj; }; } else { RouteCalculateMeasureService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return RouteCalculateMeasureService_typeof(obj); }

function RouteCalculateMeasureService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function RouteCalculateMeasureService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function RouteCalculateMeasureService_createClass(Constructor, protoProps, staticProps) { if (protoProps) RouteCalculateMeasureService_defineProperties(Constructor.prototype, protoProps); if (staticProps) RouteCalculateMeasureService_defineProperties(Constructor, staticProps); return Constructor; }

function RouteCalculateMeasureService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { RouteCalculateMeasureService_get = Reflect.get; } else { RouteCalculateMeasureService_get = function _get(target, property, receiver) { var base = RouteCalculateMeasureService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return RouteCalculateMeasureService_get(target, property, receiver || target); }

function RouteCalculateMeasureService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = RouteCalculateMeasureService_getPrototypeOf(object); if (object === null) break; } return object; }

function RouteCalculateMeasureService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) RouteCalculateMeasureService_setPrototypeOf(subClass, superClass); }

function RouteCalculateMeasureService_setPrototypeOf(o, p) { RouteCalculateMeasureService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return RouteCalculateMeasureService_setPrototypeOf(o, p); }

function RouteCalculateMeasureService_createSuper(Derived) { var hasNativeReflectConstruct = RouteCalculateMeasureService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = RouteCalculateMeasureService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = RouteCalculateMeasureService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return RouteCalculateMeasureService_possibleConstructorReturn(this, result); }; }

function RouteCalculateMeasureService_possibleConstructorReturn(self, call) { if (call && (RouteCalculateMeasureService_typeof(call) === "object" || typeof call === "function")) { return call; } return RouteCalculateMeasureService_assertThisInitialized(self); }

function RouteCalculateMeasureService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function RouteCalculateMeasureService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function RouteCalculateMeasureService_getPrototypeOf(o) { RouteCalculateMeasureService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return RouteCalculateMeasureService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.RouteCalculateMeasureService
 * @category  iServer SpatialAnalyst RouteCalculateMeasure
 * @classdesc åºäºè·¯ç±å¯¹è±¡è®¡ç®æå®ç¹ M å¼æä½çæå¡ç±»ã
 *            è¯¥ç±»è´è´£å°å®¢æ·è®¾ç½®çè®¡ç®æå®ç¹ç M å¼åæ°ä¼ éç»æå¡ç«¯ï¼å¹¶æ¥æ¶æå¡ç«¯è¿åç
 *            æå®ç¹ç M å¼ãéè¿è¯¥ç±»æ¯æçäºä»¶ççå¬å½æ°åæ°è·åã
 * @extends {SuperMap.SpatialAnalystBase}
 * @param {string} url - æå¡çè®¿é®å°åãå¦ http://localhost:8090/iserver/services/spatialanalyst-changchun/restjsr/spatialanalyst
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @example å®ä¾åè¯¥ç±»å¦ä¸ä¾æç¤ºï¼
 * (start code)
 * var parameters = new SuperMap.RouteCalculateMeasureParameters({
     *     "sourceRoute":{
     *         "type":"LINEM",
     *        "parts":[4],
     *         "points":[
     *             {
     *                 "measure":0,
     *                 "y":-6674.466867067764,
     *                 "x":3817.3527876130133
     *             },
     *             {
     *                 "measure":199.57954019411724,
     *                 "y":-6670.830929417594,
     *                 "x":3617.806369901496
     *             },
     *             {
     *                 "measure":609.3656478634477,
     *                "y":-6877.837541432356,
     *                 "x":3264.1498746678444
     *             },
     *             {
     *                 "measure":936.0174126282958,
     *                 "y":-7038.687780615184,
     *                 "x":2979.846206068903
     *             }
     *         ]
     *     },
     *     "tolerance":1,
     *     "point":{
     *         "x":3330.7754269417,
     *         "y":-6838.8394457216
     *     },
     *     "isIgnoreGap":false
     * });
 *
 * var routeCalculateMeasureService = new SuperMap.RouteCalculateMeasureService(spatialAnalystURL, {
     *     eventListeners:{
     *         processCompleted:calculateCompleted,
     *         processFailed:calculateFailded
     *     }
     * );
     * routeCalculateMeasureService.processAsync(parameters);
     *
     *  //æ§è¡
     * function calculateCompleted(){todo}
     * function calculateFailded(){todo}
     * (end)
     *
     */

var RouteCalculateMeasureService = /*#__PURE__*/function (_SpatialAnalystBase) {
  RouteCalculateMeasureService_inherits(RouteCalculateMeasureService, _SpatialAnalystBase);

  var _super = RouteCalculateMeasureService_createSuper(RouteCalculateMeasureService);

  function RouteCalculateMeasureService(url, options) {
    var _this;

    RouteCalculateMeasureService_classCallCheck(this, RouteCalculateMeasureService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.RouteCalculateMeasureService";
    return _this;
  }
  /**
   * @override
   */


  RouteCalculateMeasureService_createClass(RouteCalculateMeasureService, [{
    key: "destroy",
    value: function destroy() {
      RouteCalculateMeasureService_get(RouteCalculateMeasureService_getPrototypeOf(RouteCalculateMeasureService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.RouteCalculateMeasureService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çåºäºè·¯ç±å¯¹è±¡è®¡ç®æå®ç¹ M å¼æä½çåæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.RouteCalculateMeasureParameters} params - åºäºè·¯ç±å¯¹è±¡è®¡ç®æå®ç¹ M å¼æä½çåæ°ç±»ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof RouteCalculateMeasureParameters)) {
        return;
      }

      var me = this,
          jsonParameters;
      jsonParameters = me.getJsonParameters(params);
      me.request({
        method: "POST",
        data: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.RouteCalculateMeasureService.prototype.getJsonParameters
     * @description å°åæ°è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @param {SuperMap.RouteCalculateMeasureParameters} params - åºäºè·¯ç±å¯¹è±¡è®¡ç®æå®ç¹ M å¼æä½çåæ°ç±»ã
     * @returns {Object} è½¬ååç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "getJsonParameters",
    value: function getJsonParameters(params) {
      var jsonParameters,
          jsonStr = "geometry/calculatemeasure",
          me = this;
      me.url = Util.urlPathAppend(me.url, jsonStr);
      me.url = Util.urlAppend(me.url, 'returnContent=true');
      jsonParameters = Util.toJSON(params);
      return jsonParameters;
    }
  }]);

  return RouteCalculateMeasureService;
}(SpatialAnalystBase);
SuperMap.RouteCalculateMeasureService = RouteCalculateMeasureService;
// CONCATENATED MODULE: ./src/common/iServer/RouteLocatorParameters.js
function RouteLocatorParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function RouteLocatorParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function RouteLocatorParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) RouteLocatorParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) RouteLocatorParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.RouteLocatorParameters
 * @category  iServer SpatialAnalyst RouteLocator
 * @classdesc è·¯ç±å¯¹è±¡å®ä½ç©ºé´å¯¹è±¡çåæ°ç±»ã
 * åæ°æä¸¤ç§æ¹å¼ï¼åå«ä¸º Geometry å Dataset ä¸¤ç§ï¼åèéè¦æå® sourceRoute å¯¹è±¡ä½ä¸ºåæ°ï¼åèéè¦ datasetï¼routeIDFieldï¼routeID ä¸ä¸ªåæ°
 * å¦æç¨æ·ä¸¤ç§åæ°åè®¾ç½®ï¼ä¼åéæ© Dataset æ¹å¼ã
 * @param {Object} options - åæ°ã
 * @param {(SuperMap.Route|L.Polyline|ol.geom.LineString)} options.sourceRoute - è·¯ç±å¯¹è±¡ã
 * @param {float} options.measure - å®ä½ç¹ç M å¼ãåªå½è·¯ç±å¯¹è±¡å®ä½ç¹æ¶ææä¹ã
 * @param {string} [options.type] -  ç±»åï¼ç¹ or çº¿ã
 * @param {float} [options.offset=0] - å®ä½ç¹åç§»éãåªå½è·¯ç±å¯¹è±¡å®ä½ç¹æ¶ææä¹ã
 * @param {boolean} [options.isIgnoreGap=false] - æ¯å¦å¿½ç¥å­å¯¹è±¡ä¹é´çè·ç¦»ãå³ä¸å¿½ç¥å­å¯¹è±¡ä¹é´çè·ç¦»ã
 * @param {float} [options.startMeasure] - å®ä½çº¿çèµ·å§ M å¼ãåªå½è·¯ç±å¯¹è±¡å®ä½çº¿æ¶ææä¹ã
 * @param {float} [options.endMeasure] - å®ä½çº¿çç»æ­¢ M å¼ãåªå½è·¯ç±å¯¹è±¡å®ä½çº¿æ¶ææä¹ã
 */

var RouteLocatorParameters = /*#__PURE__*/function () {
  function RouteLocatorParameters(options) {
    RouteLocatorParameters_classCallCheck(this, RouteLocatorParameters);

    if (!options) {
      return this;
    }
    /**
     * @member {(SuperMap.Route|L.Polyline|ol.geom.LineString)} SuperMap.RouteLocatorParameters.prototype.sourceRoute
     * @description è·¯ç±å¯¹è±¡ã
     */


    this.sourceRoute = null;
    /**
     * @member {string} SuperMap.RouteLocatorParameters.prototype.dataset
     * @description è¦ç¨æ¥åç¼å²åºåæçæ°æ®æºä¸­æ°æ®éçåç§°ãè¯¥åç§°ç¨å½¢å¦"æ°æ®éåç§°@æ°æ®æºå«å"å½¢å¼æ¥è¡¨ç¤ºã
     */

    this.dataset = null;
    /**
     * @member {string} SuperMap.RouteLocatorParameters.prototype.routeIDField
     * @description  è·¯ç±å¯¹è±¡æå¨çå­æ®µåç§°ã
     *
     */

    this.routeIDField = null;
    /**
     * @member {number} SuperMap.RouteLocatorParameters.prototype.routeID
     * @description è·¯ç±å¯¹è±¡æ è¯ã
     *
     */

    this.routeID = null;
    /**
     * @member {string} [SuperMap.RouteLocatorParameters.prototype.type]
     * @description ç±»åï¼ç¹ or çº¿ã
     * å¯éå¼ä¸º:
     * LINE :æ ¹æ®èµ·å§ M å¼åç»æ­¢ M å¼å®ä½çº¿å¯¹è±¡ã
     * POINT : æ ¹æ® M å¼å®ä½ç¹å¯¹è±¡ã
     */

    this.type = null;
    /**
     * @member {float} SuperMap.RouteLocatorParameters.prototype.measure
     * @description å®ä½ç¹ç M å¼ãåªå½è·¯ç±å¯¹è±¡å®ä½ç¹æ¶ææä¹ã
     */

    this.measure = null;
    /**
     * @member {float} [SuperMap.RouteLocatorParameters.prototype.offset=0]
     * @description å®ä½ç¹åç§»éãåªå½è·¯ç±å¯¹è±¡å®ä½ç¹æ¶ææä¹ã
     */

    this.offset = 0;
    /**
     * @member {boolean} [SuperMap.RouteLocatorParameters.prototype.isIgnoreGap=false]
     * @description æ¯å¦å¿½ç¥å­å¯¹è±¡ä¹é´çè·ç¦»ã
     */

    this.isIgnoreGap = false;
    /**
     *  @member {float} [SuperMap.RouteLocatorParameters.prototype.startMeasure]
     *  @description å®ä½çº¿çèµ·å§ M å¼ãåªå½è·¯ç±å¯¹è±¡å®ä½çº¿æ¶ææä¹ã
     */

    this.startMeasure = null;
    /**
     *  @member {float} [SuperMap.RouteLocatorParameters.prototype.endMeasure]
     *  @description å®ä½çº¿çç»æ­¢ M å¼ãåªå½è·¯ç±å¯¹è±¡å®ä½çº¿æ¶ææä¹ã
     */

    this.endMeasure = null;
    var routeFromClient = options.sourceRoute;
    var routeHandle = {};

    if (routeFromClient && routeFromClient instanceof Geometry && routeFromClient.components) {
      routeHandle.type = routeFromClient.type;
      routeHandle.parts = routeFromClient.parts;
      var parts = [];

      for (var i = 0, len = routeFromClient.components.length; i < len; i++) {
        parts = parts.concat(routeFromClient.components[i].components);
      }

      routeHandle.points = parts;
      options.sourceRoute = routeHandle;
    }

    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.RouteLocatorParameters";
  }
  /**
   * @function SuperMap.RouteLocatorParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  RouteLocatorParameters_createClass(RouteLocatorParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.sourceRoute = null;
      me.type = null;
      me.measure = null;
      me.offset = 0;
      me.isIgnoreGap = false;
      me.startMeasure = null;
      me.endMeasure = null;
      me.dataset = null;
      me.routeID = null;
      me.routeIDField = null;
    }
  }]);

  return RouteLocatorParameters;
}();
SuperMap.RouteLocatorParameters = RouteLocatorParameters;
// CONCATENATED MODULE: ./src/common/iServer/RouteLocatorService.js
function RouteLocatorService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { RouteLocatorService_typeof = function _typeof(obj) { return typeof obj; }; } else { RouteLocatorService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return RouteLocatorService_typeof(obj); }

function RouteLocatorService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function RouteLocatorService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function RouteLocatorService_createClass(Constructor, protoProps, staticProps) { if (protoProps) RouteLocatorService_defineProperties(Constructor.prototype, protoProps); if (staticProps) RouteLocatorService_defineProperties(Constructor, staticProps); return Constructor; }

function RouteLocatorService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { RouteLocatorService_get = Reflect.get; } else { RouteLocatorService_get = function _get(target, property, receiver) { var base = RouteLocatorService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return RouteLocatorService_get(target, property, receiver || target); }

function RouteLocatorService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = RouteLocatorService_getPrototypeOf(object); if (object === null) break; } return object; }

function RouteLocatorService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) RouteLocatorService_setPrototypeOf(subClass, superClass); }

function RouteLocatorService_setPrototypeOf(o, p) { RouteLocatorService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return RouteLocatorService_setPrototypeOf(o, p); }

function RouteLocatorService_createSuper(Derived) { var hasNativeReflectConstruct = RouteLocatorService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = RouteLocatorService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = RouteLocatorService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return RouteLocatorService_possibleConstructorReturn(this, result); }; }

function RouteLocatorService_possibleConstructorReturn(self, call) { if (call && (RouteLocatorService_typeof(call) === "object" || typeof call === "function")) { return call; } return RouteLocatorService_assertThisInitialized(self); }

function RouteLocatorService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function RouteLocatorService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function RouteLocatorService_getPrototypeOf(o) { RouteLocatorService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return RouteLocatorService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.RouteLocatorService
 * @category iServer SpatialAnalyst RouteLocator
 * @classdesc è·¯ç±å¯¹è±¡å®ä½ç©ºé´å¯¹è±¡çæå¡ç±»ã
 * @extends {SuperMap.SpatialAnalystBase}
 * @param {string} url -æå¡çè®¿é®å°åãå¦ http://localhost:8090/iserver/services/spatialanalyst-changchun/restjsr/spatialanalystã
 * @param {Object} options - åæ°ã</br>
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @example å®ä¾åè¯¥ç±»å¦ä¸ä¾æç¤ºï¼
 * (start code)
 * var routeLocatorParameters_point = new SuperMap.RouteLocatorParameters({
     *   "sourceRoute":{
     *       "type":"LINEM",
     *       "parts":[4],
     *       "points":[
     *           {
     *               "measure":0,
     *               "y":-6674.466867067764,
     *               "x":3817.3527876130133
     *           },
     *           {
     *               "measure":199.57954019411724,
     *               "y":-6670.830929417594,
     *               "x":3617.806369901496
     *          },
     *           {
     *               "measure":609.3656478634477,
     *               "y":-6877.837541432356,
     *               "x":3264.1498746678444
     *           },
     *           {
     *               "measure":936.0174126282958,
     *               "y":-7038.687780615184,
     *               "x":2979.846206068903
     *           }
     *       ]
     *   },
     *   "type":"POINT",
     *   "measure":10,
     *   "offset":3,
     *   "isIgnoreGap":true
     * });
     * var routeLocatorService = new SuperMap.RouteLocatorService(spatialAnalystURL, {
     *     eventListeners:{
     *         processCompleted:routeLocatorCompleted,
     *         processFailed:routeLocatorFailded
     *     }
     * );
     * routeLocatorService.processAsync(routeLocatorParameters_point);
     *
     *  //æ§è¡
     * function routeLocatorCompleted(){todo}
     * function routeLocatorFailded(){todo}
     * (end)
     *
     */

var RouteLocatorService = /*#__PURE__*/function (_SpatialAnalystBase) {
  RouteLocatorService_inherits(RouteLocatorService, _SpatialAnalystBase);

  var _super = RouteLocatorService_createSuper(RouteLocatorService);

  function RouteLocatorService(url, options) {
    var _this;

    RouteLocatorService_classCallCheck(this, RouteLocatorService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.RouteLocatorService";
    return _this;
  }
  /**
   * @override
   */


  RouteLocatorService_createClass(RouteLocatorService, [{
    key: "destroy",
    value: function destroy() {
      RouteLocatorService_get(RouteLocatorService_getPrototypeOf(RouteLocatorService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.RouteLocatorService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çåºäºè·¯ç±å¯¹è±¡è®¡ç®æå®ç¹ M å¼æä½çåæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.RouteLocatorParameters} params - è·¯ç±å¯¹è±¡å®ä½ç©ºé´å¯¹è±¡çåæ°ç±»ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof RouteLocatorParameters)) {
        return;
      }

      var me = this,
          jsonParameters;
      jsonParameters = me.getJsonParameters(params);
      me.request({
        method: "POST",
        data: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.RouteLocatorService.prototype.processAsync
     * @description å°åæ°è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @param {SuperMap.RouteLocatorParameters} params - è·¯ç±å¯¹è±¡å®ä½ç©ºé´å¯¹è±¡çåæ°ç±»ã
     * @returns {Object} è½¬ååçJSONå­ç¬¦ä¸²ã
     */

  }, {
    key: "getJsonParameters",
    value: function getJsonParameters(params) {
      var jsonParameters,
          jsonStr = "geometry/routelocator",
          me = this;

      if (params.dataset) {
        jsonStr = "datasets/" + params.dataset + "/linearreferencing/routelocator";
        params.sourceRoute = null;
      }

      me.url = Util.urlPathAppend(me.url, jsonStr);
      me.url = Util.urlAppend(me.url, 'returnContent=true');
      jsonParameters = Util.toJSON(params);
      return jsonParameters;
    }
  }]);

  return RouteLocatorService;
}(SpatialAnalystBase);
SuperMap.RouteLocatorService = RouteLocatorService;
// CONCATENATED MODULE: ./src/common/iServer/ServerFeature.js
function ServerFeature_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ServerFeature_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ServerFeature_createClass(Constructor, protoProps, staticProps) { if (protoProps) ServerFeature_defineProperties(Constructor.prototype, protoProps); if (staticProps) ServerFeature_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.ServerFeature
 * @category  iServer  
 * @classdesc æå¡ç«¯ç¢éè¦ç´ ç±»ãè¯¥ç±»æè¿°äºæå¡ç«¯è¿åçç¢éè¦ç´ çç¸å³ä¿¡æ¯ï¼åæ¬å­æ®µåå ä½ä¿¡æ¯ã
 * @param {Object} options - åæ°ã
 * @param {SuperMap.ServerGeometry} geometry - ç¢éè¦ç´ çå ä½ä¿¡æ¯ã
 * @param {Array.<string>} [options.fieldNames] - ç¢éè¦ç´ çå±æ§å­æ®µåéåã
 * @param {Array.<string>} [options.fieldValues] - ç¢éè¦ç´ çå±æ§å­æ®µå¼éåã
 */

var ServerFeature = /*#__PURE__*/function () {
  function ServerFeature(options) {
    ServerFeature_classCallCheck(this, ServerFeature);

    /**
     * @member {Array.<string>} [SuperMap.ServerFeature.prototype.fieldNames]
     * @description ç¢éè¦ç´ çå±æ§å­æ®µåéåã
     */
    this.fieldNames = null;
    /**
     * @member {Array.<string>} [SuperMap.ServerFeature.prototype.fieldValues]
     * @description ç¢éè¦ç´ çå±æ§å­æ®µå¼éåã
     */

    this.fieldValues = null;
    /**
     * @member {SuperMap.ServerGeometry} SuperMap.ServerFeature.prototype.geometry
     * @description ç¢éè¦ç´ çå ä½ä¿¡æ¯ã
     */

    this.geometry = null;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ServerFeature";
  }
  /**
   * @function SuperMap.ServerFeature.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ServerFeature_createClass(ServerFeature, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.fieldNames = null;
      me.fieldValues = null;

      if (me.geometry) {
        me.geometry.destroy();
        me.geometry = null;
      }
    }
    /**
     * @function SuperMap.ServerFeature.prototype.toFeature
     * @description å°æå¡ç«¯ç¢éè¦ç´  ServerFeature è½¬æ¢ä¸ºå®¢æ·ç«¯ç¢éè¦ç´  Featureã
     * @returns {SuperMap.Vector} è½¬æ¢åçå®¢æ·ç«¯ç¢éè¦ç´ ã
     */

  }, {
    key: "toFeature",
    value: function toFeature() {
      var names,
          values,
          geo,
          attr = {},
          me = this,
          feature;
      names = me.fieldNames;
      values = me.fieldValues;

      for (var i in names) {
        attr[names[i]] = values[i];
      }

      if (me.geometry) {
        geo = me.geometry.toGeometry();
      }

      feature = new Vector(geo, attr);

      if (me.geometry && me.geometry.id) {
        feature.fid = me.geometry.id;
      }

      return feature;
    }
    /**
     * @function SuperMap.ServerFeature.prototype.fromJson
     * @description å° JSON å¯¹è±¡è¡¨ç¤ºæå¡ç«¯ç¢éè¦ç´ è½¬æ¢ä¸º ServerFeatureã
     * @param {Object} jsonObject - è¦è½¬æ¢ç JSON å¯¹è±¡ã
     * @returns {SuperMap.ServerFeature} è½¬ååç ServerFeature å¯¹è±¡ã
     */

  }], [{
    key: "fromJson",
    value: function fromJson(jsonObject) {
      var geo = null;

      if (!jsonObject) {
        return;
      }

      geo = jsonObject.geometry;

      if (geo) {
        geo = ServerGeometry.fromJson(geo);
      }

      return new ServerFeature({
        fieldNames: jsonObject.fieldNames,
        fieldValues: jsonObject.fieldValues,
        geometry: geo
      });
    }
  }]);

  return ServerFeature;
}();
SuperMap.ServerFeature = ServerFeature;
// CONCATENATED MODULE: ./src/common/iServer/SetLayerInfoParameters.js
function SetLayerInfoParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SetLayerInfoParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SetLayerInfoParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) SetLayerInfoParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) SetLayerInfoParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.SetLayerInfoParameters
 * @category  iServer Map TempLayersSet
 * @classdesc è®¾ç½®å¾å±ä¿¡æ¯åæ°ç±».
 * @param {Object} options - åæ°ã
 * @param {string} options.resourceID - ä¸´æ¶å¾å±çèµæº IDã
 * @param {string} options.tempLayerName - ä¸´æ¶å¾å±ä¸çå­å¾å±åã
 * @param {string} options.layerInfo - è¦æ´æ°çå¾å±ä¿¡æ¯ã
 */

var SetLayerInfoParameters = /*#__PURE__*/function () {
  function SetLayerInfoParameters(options) {
    SetLayerInfoParameters_classCallCheck(this, SetLayerInfoParameters);

    options = options || {};
    /**
     * @member {string} SuperMap.SetLayerInfoParameters.prototype.resourceID
     * @description ä¸´æ¶å¾å±çèµæº IDã
     */

    this.resourceID = null;
    /**
     * @member {string} SuperMap.SetLayerInfoParameters.prototype.tempLayerName
     * @description ä¸´æ¶å¾å±ä¸å­å¾å±ï¼æèå¶å­å¾å±ï¼åï¼å¦ï¼Countries@World.3@@Worldã
     */

    this.tempLayerName = null;
    /**
     * @member {Object} SuperMap.SetLayerInfoParameters.prototype.layerInfo
     * @description è¦æ´æ°çå¾å±ä¿¡æ¯ï¼åå«ä¿®æ¹åæªä¿®æ¹çææå­æ®µï¼ãè¯¥åæ°å¯ä»¥éè¿å¾å±ä¿¡æ¯æå¡è·åï¼ç¶åå¯¹è¿åå¼ä¸­ subLayers.layers[i] å¾å±ä¿¡æ¯å±æ§è¿è¡ä¿®æ¹ã
     */

    this.layerInfo = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.SetLayerInfoParameters";
  }
  /**
   * @function SuperMap.SetLayerInfoParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  SetLayerInfoParameters_createClass(SetLayerInfoParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.resourceID = null;
      me.tempLayerName = null;
      me.layerInfo = null;
    }
  }]);

  return SetLayerInfoParameters;
}();
SuperMap.SetLayerInfoParameters = SetLayerInfoParameters;
// CONCATENATED MODULE: ./src/common/iServer/SetLayerInfoService.js
function SetLayerInfoService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SetLayerInfoService_typeof = function _typeof(obj) { return typeof obj; }; } else { SetLayerInfoService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SetLayerInfoService_typeof(obj); }

function SetLayerInfoService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SetLayerInfoService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SetLayerInfoService_createClass(Constructor, protoProps, staticProps) { if (protoProps) SetLayerInfoService_defineProperties(Constructor.prototype, protoProps); if (staticProps) SetLayerInfoService_defineProperties(Constructor, staticProps); return Constructor; }

function SetLayerInfoService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SetLayerInfoService_get = Reflect.get; } else { SetLayerInfoService_get = function _get(target, property, receiver) { var base = SetLayerInfoService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SetLayerInfoService_get(target, property, receiver || target); }

function SetLayerInfoService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SetLayerInfoService_getPrototypeOf(object); if (object === null) break; } return object; }

function SetLayerInfoService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SetLayerInfoService_setPrototypeOf(subClass, superClass); }

function SetLayerInfoService_setPrototypeOf(o, p) { SetLayerInfoService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SetLayerInfoService_setPrototypeOf(o, p); }

function SetLayerInfoService_createSuper(Derived) { var hasNativeReflectConstruct = SetLayerInfoService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SetLayerInfoService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SetLayerInfoService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SetLayerInfoService_possibleConstructorReturn(this, result); }; }

function SetLayerInfoService_possibleConstructorReturn(self, call) { if (call && (SetLayerInfoService_typeof(call) === "object" || typeof call === "function")) { return call; } return SetLayerInfoService_assertThisInitialized(self); }

function SetLayerInfoService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SetLayerInfoService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SetLayerInfoService_getPrototypeOf(o) { SetLayerInfoService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SetLayerInfoService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.SetLayerInfoService
 * @category  iServer Map TempLayersSet
 * @classdesc è®¾ç½®å¾å±ä¿¡æ¯æå¡ç±»ãå¯ä»¥å®ç°ä¸´æ¶å¾å±ä¸­å­å¾å±çä¿®æ¹
 *            è¯¥ç±»è´è´£å°å¾å±è®¾ç½®åæ°ä¼ éå°æå¡ç«¯ï¼å¹¶è·åæå¡ç«¯è¿åçç»æä¿¡æ¯ã
 * @extends {SuperMap.CommonServiceBase}
 * @param {string} url - ä¸å®¢æ·ç«¯äº¤äºçå°å¾æå¡å°åãè¯·æ±å°å¾æå¡ï¼URL åºä¸ºï¼
 *                 http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{å°å¾æå¡å}/rest/maps/{å°å¾å}/tempLayersSet/{tempLayerID}/Rivers@World@@World"ï¼
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæprocessCompletedå±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailedå±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã 
 * @param {SuperMap.DataFormat} [options.format=SuperMap.DataFormat.GEOJSON] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var SetLayerInfoService = /*#__PURE__*/function (_CommonServiceBase) {
  SetLayerInfoService_inherits(SetLayerInfoService, _CommonServiceBase);

  var _super = SetLayerInfoService_createSuper(SetLayerInfoService);

  function SetLayerInfoService(url, options) {
    var _this;

    SetLayerInfoService_classCallCheck(this, SetLayerInfoService);

    _this = _super.call(this, url, options);

    if (options) {
      Util.extend(SetLayerInfoService_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.SetLayerInfoService";
    return _this;
  }
  /**
   * @override
   */


  SetLayerInfoService_createClass(SetLayerInfoService, [{
    key: "destroy",
    value: function destroy() {
      SetLayerInfoService_get(SetLayerInfoService_getPrototypeOf(SetLayerInfoService.prototype), "destroy", this).call(this);

      Util.reset(this);
    }
    /**
     * @function SuperMap.SetLayerInfoService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ´æ°åæ°ä¼ éå°æå¡ç«¯ã
     * @param {Object} params - ä¿®æ¹åçå¾å±èµæºä¿¡æ¯ã
     *        è¯¥åæ°å¯ä»¥ä½¿ç¨è·åå¾å±ä¿¡æ¯æå¡<{@link SuperMap.GetLayersInfoService}>è¿åå¾å±ä¿¡æ¯ï¼è§£æç»æresult.subLayers.layers[i]ï¼ç¶åå¯¹å¶å±æ§è¿è¡ä¿®æ¹æ¥è·åã
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!params) {
        return;
      }

      var me = this;
      var jsonParamsStr = Util.toJSON(params);
      me.request({
        method: "PUT",
        data: jsonParamsStr,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return SetLayerInfoService;
}(CommonServiceBase);
SuperMap.SetLayerInfoService = SetLayerInfoService;
// CONCATENATED MODULE: ./src/common/iServer/SetLayersInfoParameters.js
function SetLayersInfoParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SetLayersInfoParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SetLayersInfoParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) SetLayersInfoParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) SetLayersInfoParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.SetLayersInfoParameters
 * @category  iServer Map TempLayersSet
 * @classdesc è®¾ç½®å¾å±ä¿¡æ¯åæ°ç±»ã
 * @param {Object} options - åæ°ã
 * @param {boolean} [options.isTempLayers=false] - æ¯å¦æ¯ä¸´æ¶å¾å±ã
 * @param {string} options.resourceID - ä¸´æ¶å¾å±èµæº IDã
 * @param {string} options.layersInfo - è¦æ´æ°çå¾å±ä¿¡æ¯ã
 */

var SetLayersInfoParameters = /*#__PURE__*/function () {
  function SetLayersInfoParameters(options) {
    SetLayersInfoParameters_classCallCheck(this, SetLayersInfoParameters);

    options = options || {};
    /**
     * @member {boolean} [SuperMap.SetLayersInfoParameters.prototype.isTempLayers=false]
     * @description æ¯å¦æ¯ä¸´æ¶å¾å±ã
     */

    this.isTempLayers = null;
    /**
     * @member {string} SuperMap.SetLayersInfoParameters.prototype.resourceID
     * @description ä¸´æ¶å¾å±èµæº IDï¼
     */

    this.resourceID = null;
    /**
     * @member {Object} SuperMap.SetLayersInfoParameters.prototype.layersInfo
     * @description è¦æ´æ°çå¾å±ä¿¡æ¯ï¼åå«ä¿®æ¹åæªä¿®æ¹çææå­æ®µï¼ãè¯¥åæ°å¯ä»¥éè¿å¾å±ä¿¡æ¯æå¡è·åï¼ç¶åå¯¹è¿åå¼ä¸­ subLayers.layers[i] å¾å±ä¿¡æ¯å±æ§è¿è¡ä¿®æ¹ã
     */

    this.layersInfo = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.SetLayersInfoParameters";
  }
  /**
   * @function SuperMap.SetLayersInfoParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  SetLayersInfoParameters_createClass(SetLayersInfoParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.isTempLayers = null;
      me.resourceID = null;
      me.layersInfo = null;
    }
  }]);

  return SetLayersInfoParameters;
}();
SuperMap.SetLayersInfoParameters = SetLayersInfoParameters;
// CONCATENATED MODULE: ./src/common/iServer/SetLayersInfoService.js
function SetLayersInfoService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SetLayersInfoService_typeof = function _typeof(obj) { return typeof obj; }; } else { SetLayersInfoService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SetLayersInfoService_typeof(obj); }

function SetLayersInfoService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SetLayersInfoService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SetLayersInfoService_createClass(Constructor, protoProps, staticProps) { if (protoProps) SetLayersInfoService_defineProperties(Constructor.prototype, protoProps); if (staticProps) SetLayersInfoService_defineProperties(Constructor, staticProps); return Constructor; }

function SetLayersInfoService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SetLayersInfoService_get = Reflect.get; } else { SetLayersInfoService_get = function _get(target, property, receiver) { var base = SetLayersInfoService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SetLayersInfoService_get(target, property, receiver || target); }

function SetLayersInfoService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SetLayersInfoService_getPrototypeOf(object); if (object === null) break; } return object; }

function SetLayersInfoService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SetLayersInfoService_setPrototypeOf(subClass, superClass); }

function SetLayersInfoService_setPrototypeOf(o, p) { SetLayersInfoService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SetLayersInfoService_setPrototypeOf(o, p); }

function SetLayersInfoService_createSuper(Derived) { var hasNativeReflectConstruct = SetLayersInfoService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SetLayersInfoService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SetLayersInfoService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SetLayersInfoService_possibleConstructorReturn(this, result); }; }

function SetLayersInfoService_possibleConstructorReturn(self, call) { if (call && (SetLayersInfoService_typeof(call) === "object" || typeof call === "function")) { return call; } return SetLayersInfoService_assertThisInitialized(self); }

function SetLayersInfoService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SetLayersInfoService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SetLayersInfoService_getPrototypeOf(o) { SetLayersInfoService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SetLayersInfoService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.SetLayersInfoService
 * @category  iServer Map TempLayersSet
 * @classdesc  è®¾ç½®å¾å±ä¿¡æ¯æå¡ç±»ãå¯ä»¥å®ç°åå»ºæ°çä¸´æ¶å¾å±åå¯¹ç°æä¸´æ¶å¾å±çä¿®æ¹ï¼
 *             å½ isTempLayers ä¸º falseçæ¶åæ§è¡åå»ºä¸´æ¶å¾å±ãå½ isTempLayers ä¸º ture å¹¶ä¸ä¸´æ¶å¾å±èµæº resourceID è¢«è®¾ç½®æææ¶æ§è¡å¯¹ä¸´æ¶å¾å±çç¼è¾ã
 *             è¯¥ç±»è´è´£å°å¾å±è®¾ç½®åæ°ä¼ éå°æå¡ç«¯ï¼å¹¶è·åæå¡ç«¯è¿åçç»æä¿¡æ¯ã
 * @extends {SuperMap.CommonServiceBase}
 * @param url - {string} ä¸å®¢æ·ç«¯äº¤äºçå°å¾æå¡å°åãè¯·æ±å°å¾æå¡,URL åºä¸ºï¼
 *              http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{å°å¾æå¡å}/rest/maps/{å°å¾å}ï¼
 * @param {Object} options - åæ°ã
 * @param {string} options.resourceID - å¾å±èµæºIDï¼ä¸´æ¶å¾å±çèµæºIDæ è®°ã
 * @param {boolean} options.isTempLayers - å½åurlå¯¹åºçå¾å±æ¯å¦æ¯ä¸´æ¶å¾å±ã
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæprocessCompletedå±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailedå±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã 
 * @param {SuperMap.DataFormat} [options.format=SuperMap.DataFormat.GEOJSON] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var SetLayersInfoService = /*#__PURE__*/function (_CommonServiceBase) {
  SetLayersInfoService_inherits(SetLayersInfoService, _CommonServiceBase);

  var _super = SetLayersInfoService_createSuper(SetLayersInfoService);

  function SetLayersInfoService(url, options) {
    var _this;

    SetLayersInfoService_classCallCheck(this, SetLayersInfoService);

    _this = _super.call(this, url, options);
    /**
     * @member {string} SuperMap.SetLayersInfoService.prototype.resourceID
     * @description å¾å±èµæºIDï¼ä¸´æ¶å¾å±çèµæºIDæ è®°ã
     */

    _this.resourceID = null;
    /**
     * @function {boolean} SuperMap.SetLayersInfoService.prototype.isTempLayers
     * @description å½åurlå¯¹åºçå¾å±æ¯å¦æ¯ä¸´æ¶å¾å±ã
     */

    _this.isTempLayers = false;

    if (options) {
      SuperMap.Util.extend(SetLayersInfoService_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.SetLayersInfoService";
    return _this;
  }
  /**
   * @override
   */


  SetLayersInfoService_createClass(SetLayersInfoService, [{
    key: "destroy",
    value: function destroy() {
      SetLayersInfoService_get(SetLayersInfoService_getPrototypeOf(SetLayersInfoService.prototype), "destroy", this).call(this);

      Util.reset(this);
    }
    /**
     * @function SuperMap.SetLayersInfoService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ´æ°åæ°ä¼ éå°æå¡ç«¯ã
     * @param {Object} params - ä¿®æ¹åçå¾å±èµæºä¿¡æ¯ãè¯¥åæ°å¯ä»¥ä½¿ç¨è·åå¾å±ä¿¡æ¯æå¡ <{@link SuperMap.GetLayersInfoService}>è¿åå¾å±ä¿¡æ¯ï¼ç¶åå¯¹å¶å±æ§è¿è¡ä¿®æ¹æ¥è·åã
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!params) {
        return;
      }

      var jsonParams,
          subLayers = [],
          me = this,
          method = ""; //åå»ºä¸´æ¶å¾å±åè®¾ç½®ä¿®æ¹ä¸´æ¶å¾å±ä¿¡æ¯å¯¹åºä¸åçèµæºURL

      if (me.isTempLayers) {
        me.url = Util.urlPathAppend(me.url, "tempLayersSet/" + me.resourceID);
        method = "PUT";
      } else {
        me.url = Util.urlPathAppend(me.url, "tempLayersSet");
        method = "POST";
      }

      if (!params.subLayers) {
        params.subLayers = {
          layers: []
        };
      }

      if (!params.subLayers.layers) {
        params.subLayers.layers = [];
      }

      var layers = params.subLayers.layers,
          len = layers.length;

      for (var i in layers) {
        if (layers[i].ugcLayerType === "GRID") {
          var colorDictionary = {};
          var colorDics = layers[i].colorDictionarys;

          for (var j in colorDics) {
            var key = colorDics[j].elevation;
            colorDictionary[key] = colorDics[j].color;
          }
        }

        layers[i].colorDictionary = colorDictionary;
        delete layers[i].colorDictionarys;
      }

      for (var _i = 0; _i < len; _i++) {
        if (layers[_i].toJsonObject) {
          //å°å¾å±ä¿¡æ¯è½¬æ¢ææå¡ç«¯è½è¯å«çç®åjsonå¯¹è±¡
          subLayers.push(layers[_i].toJsonObject());
        } else {
          subLayers.push(layers[_i]);
        }
      }

      jsonParams = Util.extend(jsonParams, params);
      jsonParams.subLayers = {
        "layers": subLayers
      };
      jsonParams.object = null;
      var jsonParamsStr = Util.toJSON([jsonParams]);
      me.request({
        method: method,
        data: jsonParamsStr,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return SetLayersInfoService;
}(CommonServiceBase);
SuperMap.SetLayersInfoService = SetLayersInfoService;
// CONCATENATED MODULE: ./src/common/iServer/SetLayerStatusParameters.js
function SetLayerStatusParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SetLayerStatusParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SetLayerStatusParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) SetLayerStatusParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) SetLayerStatusParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.SetLayerStatusParameters
 * @category  iServer Map TempLayersSet
 * @classdesc å­å¾å±æ¾ç¤ºæ§å¶åæ°ç±»,è¯¥ç±»å­å¨äºåå­å¾å±æ¯å¦å¯è§çç¶æã
 *            æ³¨æå¨ SuperMap iClient ç³»åäº§åä¸­æè¯´çå¾å±ä¸ SuperMap Deskpro çå°å¾å¯¹åºï¼å­å¾å±ä¸ SuperMap Deskpro çå¾å±å¯¹åºã
 * @param {Object} options - åæ°ã
 * @param {Array.<SuperMap.LayerStatus>} options.layerStatusList - è·åæè®¾ç½®å¾å±å¯è§ç¶æï¼{@link SuperMap.LayerStatus}ï¼éåï¼
 *                                                                 éåä¸­çæ¯ä¸ª {@link SuperMap.LayerStatus} å¯¹è±¡ä»£è¡¨ä¸ä¸ªå­å¾å±çå¯è§ç¶æã
 * @param {number} [options.holdTime=15] - è·åæè®¾ç½®èµæºå¨æå¡ç«¯ä¿å­çæ¶é´ã
 * @param {string} [options.resourceID] - è·åæè®¾ç½®èµæºæå¡ IDã
 */

var SetLayerStatusParameters = /*#__PURE__*/function () {
  function SetLayerStatusParameters(options) {
    SetLayerStatusParameters_classCallCheck(this, SetLayerStatusParameters);

    /**
     * @member {Array.<SuperMap.LayerStatus>} SuperMap.SetLayerStatusParameters.prototype.layerStatusList
     * @description è·åæè®¾ç½®å¾å±å¯è§ç¶æï¼{@link SuperMap.LayerStatus}ï¼éåï¼éåä¸­çæ¯ä¸ª {@link SuperMap.LayerStatus} å¯¹è±¡ä»£è¡¨ä¸ä¸ªå­å¾å±çå¯è§ç¶æã
     */
    this.layerStatusList = [];
    /**
     * @member {number} [SuperMap.SetLayerStatusParameters.prototype.holdTime=15]
     * @description è·åæè®¾ç½®èµæºå¨æå¡ç«¯ä¿å­çæ¶é´ãåä½ä¸ºåéã
     */

    this.holdTime = 15;
    /**
     * @member {string} SuperMap.SetLayerStatusParameters.prototype.resourceID
     * @description è·åæè®¾ç½®èµæºæå¡IDãå¦æè®¾ç½®è¯¥åæ°åä¼å¨æå®ç TempLayer è¿è¡å¾å±çæ¾ç¤ºæ§å¶ï¼
     *              å¦æä¸è®¾ç½®è¯¥åæ°ï¼åä¼é¦ååå»ºä¸ä¸ª TempLayer ï¼ç¶åå¨æ°åå»ºç TempLayer è¿è¡å¾å±çæ¾ç¤ºæ§å¶ã
     */

    this.resourceID = null;

    if (options) {
      Util.extend(this, options);
    }
  }
  /**
   * @function SuperMap.SetLayerStatusParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  SetLayerStatusParameters_createClass(SetLayerStatusParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.layerStatusList = null;
      me.holdTime = null;
      me.resourceID = null;
    }
    /**
     * @function SuperMap.SetLayerStatusParameters.prototype.toJSON
     * @description çæ JSONã
     * @returns {Object} å¯¹åºç JSON å¯¹è±¡ã
     */

  }, {
    key: "toJSON",
    value: function toJSON() {
      var json = '{';
      json += '"layers":[';
      var v = [];

      for (var i = 0, len = this.layerStatusList.length; i < len; i++) {
        v.push(this.layerStatusList[i].toJSON());
      }

      json += v;
      json += ']';
      json += '}';
      return json;
    }
  }]);

  return SetLayerStatusParameters;
}();
SuperMap.SetLayerStatusParameters = SetLayerStatusParameters;
// CONCATENATED MODULE: ./src/common/iServer/SetLayerStatusService.js
function SetLayerStatusService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SetLayerStatusService_typeof = function _typeof(obj) { return typeof obj; }; } else { SetLayerStatusService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SetLayerStatusService_typeof(obj); }

function SetLayerStatusService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SetLayerStatusService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SetLayerStatusService_createClass(Constructor, protoProps, staticProps) { if (protoProps) SetLayerStatusService_defineProperties(Constructor.prototype, protoProps); if (staticProps) SetLayerStatusService_defineProperties(Constructor, staticProps); return Constructor; }

function SetLayerStatusService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SetLayerStatusService_get = Reflect.get; } else { SetLayerStatusService_get = function _get(target, property, receiver) { var base = SetLayerStatusService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SetLayerStatusService_get(target, property, receiver || target); }

function SetLayerStatusService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SetLayerStatusService_getPrototypeOf(object); if (object === null) break; } return object; }

function SetLayerStatusService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SetLayerStatusService_setPrototypeOf(subClass, superClass); }

function SetLayerStatusService_setPrototypeOf(o, p) { SetLayerStatusService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SetLayerStatusService_setPrototypeOf(o, p); }

function SetLayerStatusService_createSuper(Derived) { var hasNativeReflectConstruct = SetLayerStatusService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SetLayerStatusService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SetLayerStatusService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SetLayerStatusService_possibleConstructorReturn(this, result); }; }

function SetLayerStatusService_possibleConstructorReturn(self, call) { if (call && (SetLayerStatusService_typeof(call) === "object" || typeof call === "function")) { return call; } return SetLayerStatusService_assertThisInitialized(self); }

function SetLayerStatusService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SetLayerStatusService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SetLayerStatusService_getPrototypeOf(o) { SetLayerStatusService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SetLayerStatusService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.SetLayerStatusService
 * @category  iServer Map TempLayersSet
 * @classdesc  å­å¾å±æ¾ç¤ºæ§å¶æå¡ç±»ãè¯¥ç±»è´è´£å°å­å¾å±æ¾ç¤ºæ§å¶åæ°ä¼ éå°æå¡ç«¯ï¼å¹¶è·åæå¡ç«¯è¿åçå¾å±æ¾ç¤ºç¶æã
 *             ç¨æ·è·åæå¡ç«¯è¿åçåå­å¾å±æ¾ç¤ºç¶ææä¸¤ç§æ¹å¼ï¼
 *             ä¸ç§æ¯éè¿çå¬ SetLayerEvent.PROCESS_COMPLETE äºä»¶ï¼
 *             ä¸ç§æ¯ä½¿ç¨ AsyncResponder ç±»å®ç°å¼æ­¥å¤çã
 * @extends {SuperMap.CommonServiceBase}
 * @param {string} url - å°å¾æå¡è®¿é®å°åãè¯·æ±å°å¾æå¡ï¼URL åºä¸ºï¼
 *                       http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{å°å¾æå¡å}/rest/maps/{å°å¾å}ï¼
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæprocessCompletedå±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailedå±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã 
 * @param {SuperMap.DataFormat} [options.format=SuperMap.DataFormat.GEOJSON] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var SetLayerStatusService = /*#__PURE__*/function (_CommonServiceBase) {
  SetLayerStatusService_inherits(SetLayerStatusService, _CommonServiceBase);

  var _super = SetLayerStatusService_createSuper(SetLayerStatusService);

  function SetLayerStatusService(url, options) {
    var _this;

    SetLayerStatusService_classCallCheck(this, SetLayerStatusService);

    _this = _super.call(this, url, options);
    _this.lastparams = null;
    _this.mapUrl = url;

    if (options) {
      Util.extend(SetLayerStatusService_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.SetLayerStatusService";
    return _this;
  }
  /**
   * @override
   */


  SetLayerStatusService_createClass(SetLayerStatusService, [{
    key: "destroy",
    value: function destroy() {
      SetLayerStatusService_get(SetLayerStatusService_getPrototypeOf(SetLayerStatusService.prototype), "destroy", this).call(this);

      Util.reset(this);
    }
    /**
     * @function SuperMap.SetLayerStatusService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ´æ°åæ°ä¼ éå°æå¡ç«¯ã
     * @param {Object} params - ä¿®æ¹åçå¾å±èµæºä¿¡æ¯ãè¯¥åæ°å¯ä»¥ä½¿ç¨è·åå¾å±ä¿¡æ¯æå¡{@link SuperMap.SetLayerStatusParameters}
     *                          è¿åå¾å±ä¿¡æ¯ï¼ç¶åå¯¹å¶å±æ§è¿è¡ä¿®æ¹æ¥è·åã
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof SetLayerStatusParameters)) {
        return;
      }

      var me = this,
          method = "POST";
      me.url = me.mapUrl;

      if (params.resourceID == null) {
        me.url = Util.urlPathAppend(me.url, 'tempLayersSet');
        me.lastparams = params;
        me.request({
          method: method,
          scope: me,
          success: me.createTempLayerComplete,
          failure: me.serviceProcessFailed
        });
      } else {
        me.url = Util.urlPathAppend(me.url, "tempLayersSet/" + params.resourceID);
        me.url = Util.urlAppend(me.url, "elementRemain=true&reference=" + params.resourceID + "&holdTime=" + params.holdTime.toString());
        var jsonParameters = '[{';
        jsonParameters += '"type":"UGC",';

        if (params.layerStatusList != null && params.layerStatusList.length > 0) {
          jsonParameters += '"subLayers":' + params.toJSON();
        }

        jsonParameters += ',"visible":' + true + ',';
        jsonParameters += '"name":"' + this.getMapName(this.mapUrl) + '"';
        jsonParameters += '}]';
        me.request({
          method: "PUT",
          data: jsonParameters,
          scope: me,
          success: me.serviceProcessCompleted,
          failure: me.serviceProcessFailed
        });
      }
    }
    /**
     * @function SuperMap.SetLayerStatusService.prototype.createTempLayerComplete
     * @description è®¾ç½®å®æï¼æ§è¡æ­¤æ¹æ³ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ï¼è®°å½è®¾ç½®æä½æ¯å¦æåã
     */

  }, {
    key: "createTempLayerComplete",
    value: function createTempLayerComplete(result) {
      var me = this;
      result = Util.transformResult(result);

      if (result.succeed) {
        me.lastparams.resourceID = result.newResourceID;
      }

      me.processAsync(me.lastparams);
    }
    /**
     * @function SuperMap.SetLayerStatusService.prototype.getMapName
     * @description è·åå°å¾åç§°ã
     * @param {Object} url - æå¡å°åã
     */

  }, {
    key: "getMapName",
    value: function getMapName(url) {
      var mapUrl = url;

      if (mapUrl.charAt(mapUrl.length - 1) === "/") {
        mapUrl = mapUrl.substr(0, mapUrl.length - 1);
      }

      var index = mapUrl.lastIndexOf("/");
      var mapName = mapUrl.substring(index + 1, mapUrl.length);
      return mapName;
    }
    /**
     * @function SuperMap.SetLayerStatusService.prototype.setLayerCompleted
     * @description è®¾ç½®å®æï¼æ§è¡æ­¤æ¹æ³ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ï¼è®°å½è®¾ç½®æä½æ¯å¦æåã
     */

  }, {
    key: "serviceProcessCompleted",
    value: function serviceProcessCompleted(result) {
      var me = this;
      result = Util.transformResult(result);

      if (result != null && me.lastparams != null) {
        result.newResourceID = me.lastparams.resourceID;
      }

      me.events.triggerEvent("processCompleted", {
        result: result
      });
    }
  }]);

  return SetLayerStatusService;
}(CommonServiceBase);
SuperMap.SetLayerStatusService = SetLayerStatusService;
// CONCATENATED MODULE: ./src/common/iServer/SingleObjectQueryJobsParameter.js
function SingleObjectQueryJobsParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SingleObjectQueryJobsParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SingleObjectQueryJobsParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) SingleObjectQueryJobsParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) SingleObjectQueryJobsParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.SingleObjectQueryJobsParameter
 * @category  iServer ProcessingService Query
 * @classdesc åå¯¹è±¡ç©ºé´æ¥è¯¢åæä»»å¡åæ°ç±»ã
 * @param {Object} options - åæ°ã
 * @param {string} options.datasetName - æ°æ®éåã
 * @param {string} options.datasetQuery - æ¥è¯¢å¯¹è±¡æå¨çæ°æ®éåç§°ã
 * @param {SuperMap.SpatialQueryMode} [options.mode=SuperMap.SpatialQueryMode.CONTAIN] - ç©ºé´æ¥è¯¢æ¨¡å¼ã
 * @param {SuperMap.OutputSetting} [options.output] - è¾åºåæ°è®¾ç½®ã
 * @param {SuperMap.MappingParameters} [options.mappingParameters] - åæåç»æå¯è§åçåæ°ç±»ã   
 */

var SingleObjectQueryJobsParameter = /*#__PURE__*/function () {
  function SingleObjectQueryJobsParameter(options) {
    SingleObjectQueryJobsParameter_classCallCheck(this, SingleObjectQueryJobsParameter);

    if (!options) {
      return;
    }
    /**
     * @member {string} SuperMap.SingleObjectQueryJobsParameter.prototype.datasetName
     * @description æ°æ®éåã
     */


    this.datasetName = "";
    /**
     * @member {string} SuperMap.SingleObjectQueryJobsParameter.prototype.datasetQuery
     * @description æ¥è¯¢å¯¹è±¡æå¨çæ°æ®éåç§°ã
     */

    this.datasetQuery = "";
    /**
     * @member {string} SuperMap.SingleObjectQueryJobsParameter.prototype.geometryQuery
     * @description æ¥è¯¢å¯¹è±¡æå¨çå ä½å¯¹è±¡ã
     */

    this.geometryQuery = "";
    /**
     * @member {SuperMap.SpatialQueryMode} [SuperMap.SingleObjectQueryJobsParameter.prototype.mode=SuperMap.SpatialQueryMode.CONTAIN]
     * @description ç©ºé´æ¥è¯¢æ¨¡å¼ ã
     */

    this.mode = SpatialQueryMode.CONTAIN;
    /**
     * @member {SuperMap.OutputSetting} [SuperMap.SingleObjectQueryJobsParameter.prototype.output]
     * @description è¾åºåæ°è®¾ç½®ç±»ã
     */

    this.output = null;
    /**
     * @member {SuperMap.MappingParameters} [SuperMap.SingleObjectQueryJobsParameter.prototype.mappingParameters]
     * @description åæåç»æå¯è§åçåæ°ç±»ã   
     */

    this.mappingParameters = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.SingleObjectQueryJobsParameter";
  }
  /**
   * @function SuperMap.SingleObjectQueryJobsParameter.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  SingleObjectQueryJobsParameter_createClass(SingleObjectQueryJobsParameter, [{
    key: "destroy",
    value: function destroy() {
      this.datasetName = null;
      this.datasetQuery = null;
      this.geometryQuery = null;
      this.mode = null;

      if (this.output instanceof OutputSetting) {
        this.output.destroy();
        this.output = null;
      }

      if (this.mappingParameters instanceof MappingParameters) {
        this.mappingParameters.destroy();
        this.mappingParameters = null;
      }
    }
    /**
     * @function SuperMap.SingleObjectQueryJobsParameter.toObject
     * @param {Object} singleObjectQueryJobsParameter - åå¯¹è±¡ç©ºé´æ¥è¯¢åæä»»å¡åæ°ã
     * @param {Object} tempObj - ç®æ å¯¹è±¡ã
     * @description çæåå¯¹è±¡ç©ºé´æ¥è¯¢åæä»»å¡å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(singleObjectQueryJobsParameter, tempObj) {
      for (var name in singleObjectQueryJobsParameter) {
        if (name === "datasetName") {
          tempObj['input'] = tempObj['input'] || {};
          tempObj['input'][name] = singleObjectQueryJobsParameter[name];
          continue;
        }

        if (name === "output") {
          tempObj['output'] = tempObj['output'] || {};
          tempObj['output'] = singleObjectQueryJobsParameter[name];
          continue;
        }

        tempObj['analyst'] = tempObj['analyst'] || {};
        tempObj['analyst'][name] = singleObjectQueryJobsParameter[name];

        if (name === 'mappingParameters') {
          tempObj['analyst'][name] = tempObj['analyst'][name] || {};
          tempObj['analyst']['mappingParameters'] = singleObjectQueryJobsParameter[name];
        }
      }
    }
  }]);

  return SingleObjectQueryJobsParameter;
}();
SuperMap.SingleObjectQueryJobsParameter = SingleObjectQueryJobsParameter;
// CONCATENATED MODULE: ./src/common/iServer/SingleObjectQueryJobsService.js
function SingleObjectQueryJobsService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SingleObjectQueryJobsService_typeof = function _typeof(obj) { return typeof obj; }; } else { SingleObjectQueryJobsService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SingleObjectQueryJobsService_typeof(obj); }

function SingleObjectQueryJobsService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SingleObjectQueryJobsService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SingleObjectQueryJobsService_createClass(Constructor, protoProps, staticProps) { if (protoProps) SingleObjectQueryJobsService_defineProperties(Constructor.prototype, protoProps); if (staticProps) SingleObjectQueryJobsService_defineProperties(Constructor, staticProps); return Constructor; }

function SingleObjectQueryJobsService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SingleObjectQueryJobsService_get = Reflect.get; } else { SingleObjectQueryJobsService_get = function _get(target, property, receiver) { var base = SingleObjectQueryJobsService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SingleObjectQueryJobsService_get(target, property, receiver || target); }

function SingleObjectQueryJobsService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SingleObjectQueryJobsService_getPrototypeOf(object); if (object === null) break; } return object; }

function SingleObjectQueryJobsService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SingleObjectQueryJobsService_setPrototypeOf(subClass, superClass); }

function SingleObjectQueryJobsService_setPrototypeOf(o, p) { SingleObjectQueryJobsService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SingleObjectQueryJobsService_setPrototypeOf(o, p); }

function SingleObjectQueryJobsService_createSuper(Derived) { var hasNativeReflectConstruct = SingleObjectQueryJobsService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SingleObjectQueryJobsService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SingleObjectQueryJobsService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SingleObjectQueryJobsService_possibleConstructorReturn(this, result); }; }

function SingleObjectQueryJobsService_possibleConstructorReturn(self, call) { if (call && (SingleObjectQueryJobsService_typeof(call) === "object" || typeof call === "function")) { return call; } return SingleObjectQueryJobsService_assertThisInitialized(self); }

function SingleObjectQueryJobsService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SingleObjectQueryJobsService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SingleObjectQueryJobsService_getPrototypeOf(o) { SingleObjectQueryJobsService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SingleObjectQueryJobsService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.SingleObjectQueryJobsService
 * @category  iServer ProcessingService Query
 * @classdesc åå¯¹è±¡æ¥è¯¢åææå¡ç±»
 * @extends {SuperMap.ProcessingServiceBase}
 * @param {string} url - åå¯¹è±¡ç©ºé´æ¥è¯¢åææå¡å°åã
 * @param {Object} options - åæ°ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var SingleObjectQueryJobsService = /*#__PURE__*/function (_ProcessingServiceBas) {
  SingleObjectQueryJobsService_inherits(SingleObjectQueryJobsService, _ProcessingServiceBas);

  var _super = SingleObjectQueryJobsService_createSuper(SingleObjectQueryJobsService);

  function SingleObjectQueryJobsService(url, options) {
    var _this;

    SingleObjectQueryJobsService_classCallCheck(this, SingleObjectQueryJobsService);

    _this = _super.call(this, url, options);
    _this.url = Util.urlPathAppend(_this.url, 'spatialanalyst/query');
    _this.CLASS_NAME = 'SuperMap.SingleObjectQueryJobsService';
    return _this;
  }
  /**
   *@override
   */


  SingleObjectQueryJobsService_createClass(SingleObjectQueryJobsService, [{
    key: "destroy",
    value: function destroy() {
      SingleObjectQueryJobsService_get(SingleObjectQueryJobsService_getPrototypeOf(SingleObjectQueryJobsService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.SingleObjectQueryJobsService.protitype.getQueryJobs
     * @description è·ååå¯¹è±¡ç©ºé´æ¥è¯¢åæææä»»å¡
     */

  }, {
    key: "getQueryJobs",
    value: function getQueryJobs() {
      SingleObjectQueryJobsService_get(SingleObjectQueryJobsService_getPrototypeOf(SingleObjectQueryJobsService.prototype), "getJobs", this).call(this, this.url);
    }
    /**
     * @function SuperMap.KernelDensityJobsService.protitype.getQueryJob
     * @description è·åæå®idçåå¯¹è±¡ç©ºé´æ¥è¯¢åææå¡
     * @param {string} id - æå®è¦è·åæ°æ®çid
     */

  }, {
    key: "getQueryJob",
    value: function getQueryJob(id) {
      SingleObjectQueryJobsService_get(SingleObjectQueryJobsService_getPrototypeOf(SingleObjectQueryJobsService.prototype), "getJobs", this).call(this, Util.urlPathAppend(this.url, id));
    }
    /**
     * @function SuperMap.SingleObjectQueryJobsService.protitype.addQueryJob
     * @description æ°å»ºåå¯¹è±¡ç©ºé´æ¥è¯¢åææå¡
     * @param {SuperMap.SingleObjectQueryJobsParameter} params - åå»ºä¸ä¸ªç©ºé´åæçè¯·æ±åæ°ã
     * @param {number} seconds - å¼å§åå»ºåï¼è·ååå»ºæåç»æçæ¶é´é´éã
     */

  }, {
    key: "addQueryJob",
    value: function addQueryJob(params, seconds) {
      SingleObjectQueryJobsService_get(SingleObjectQueryJobsService_getPrototypeOf(SingleObjectQueryJobsService.prototype), "addJob", this).call(this, this.url, params, SingleObjectQueryJobsParameter, seconds);
    }
  }]);

  return SingleObjectQueryJobsService;
}(ProcessingServiceBase);
SuperMap.SingleObjectQueryJobsService = SingleObjectQueryJobsService;
// CONCATENATED MODULE: ./src/common/iServer/StopQueryParameters.js
function StopQueryParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function StopQueryParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function StopQueryParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) StopQueryParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) StopQueryParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.StopQueryParameters
 * @category  iServer TrafficTransferAnalyst TransferStops
 * @classdesc ç«ç¹æ¥è¯¢åæ°ç±»ã
 * @param {Object} options - åæ°ã
 * @param {string} options.keyWord - ç«ç¹åç§°å³é®å­ã
 * @param {boolean} [options.returnPosition=false] - æ¯å¦è¿åç«ç¹åæ ä¿¡æ¯ã
 */

var StopQueryParameters = /*#__PURE__*/function () {
  function StopQueryParameters(options) {
    StopQueryParameters_classCallCheck(this, StopQueryParameters);

    options = options || {};
    /**
     *  @member {string} SuperMap.StopQueryParameters.prototype.keyWord
     *  @description ç«ç¹åç§°å³é®å­ã
     */

    this.keyWord = null;
    /**
     * @member {boolean} [SuperMap.StopQueryParameters.prototype.returnPosition=false]
     * @description æ¯å¦è¿åç«ç¹åæ ä¿¡æ¯ã
     */

    this.returnPosition = false;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.StopQueryParameters";
  }
  /**
   * @function SuperMap.StopQueryParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  StopQueryParameters_createClass(StopQueryParameters, [{
    key: "destroy",
    value: function destroy() {
      Util.reset(this);
    }
  }]);

  return StopQueryParameters;
}();
SuperMap.StopQueryParameters = StopQueryParameters;
// CONCATENATED MODULE: ./src/common/iServer/StopQueryService.js
function StopQueryService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { StopQueryService_typeof = function _typeof(obj) { return typeof obj; }; } else { StopQueryService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return StopQueryService_typeof(obj); }

function StopQueryService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function StopQueryService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function StopQueryService_createClass(Constructor, protoProps, staticProps) { if (protoProps) StopQueryService_defineProperties(Constructor.prototype, protoProps); if (staticProps) StopQueryService_defineProperties(Constructor, staticProps); return Constructor; }

function StopQueryService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { StopQueryService_get = Reflect.get; } else { StopQueryService_get = function _get(target, property, receiver) { var base = StopQueryService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return StopQueryService_get(target, property, receiver || target); }

function StopQueryService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = StopQueryService_getPrototypeOf(object); if (object === null) break; } return object; }

function StopQueryService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) StopQueryService_setPrototypeOf(subClass, superClass); }

function StopQueryService_setPrototypeOf(o, p) { StopQueryService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return StopQueryService_setPrototypeOf(o, p); }

function StopQueryService_createSuper(Derived) { var hasNativeReflectConstruct = StopQueryService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = StopQueryService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = StopQueryService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return StopQueryService_possibleConstructorReturn(this, result); }; }

function StopQueryService_possibleConstructorReturn(self, call) { if (call && (StopQueryService_typeof(call) === "object" || typeof call === "function")) { return call; } return StopQueryService_assertThisInitialized(self); }

function StopQueryService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function StopQueryService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function StopQueryService_getPrototypeOf(o) { StopQueryService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return StopQueryService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.StopQueryService
 * @category  iServer TrafficTransferAnalyst TransferStops
 * @classdesc ç«ç¹æ¥è¯¢æå¡ç±»ã
 * è¿åç»æéè¿è¯¥ç±»æ¯æçäºä»¶ççå¬å½æ°åæ°è·å
 * @extends {SuperMap.CommonServiceBase}
 * @param {string} url - ä¸å®¢æ·ç«¯äº¤äºçç«ç¹æ¥è¯¢æå¡å°åã
 * ä¾å¦ï¼</br>"http://localhost:8090/iserver/services/traffictransferanalyst-sample/restjsr/traffictransferanalyst/Traffic-Changchun"ã
 * @param {Object} options - åæ°ã</br>
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @example ä¾å¦ï¼
 * (start code)
 * var myService = new SuperMap.StopQueryService(url, {eventListeners: {
     *     "processCompleted": StopQueryCompleted,
     *     "processFailed": StopQueryError
     *     }
     * };
 * (end)
 *
 *
 */

var StopQueryService = /*#__PURE__*/function (_CommonServiceBase) {
  StopQueryService_inherits(StopQueryService, _CommonServiceBase);

  var _super = StopQueryService_createSuper(StopQueryService);

  function StopQueryService(url, options) {
    var _this;

    StopQueryService_classCallCheck(this, StopQueryService);

    _this = _super.call(this, url, options);
    options = options || {};
    Util.extend(StopQueryService_assertThisInitialized(_this), options);
    _this.CLASS_NAME = "SuperMap.StopQueryService";
    return _this;
  }
  /**
   *@override
   */


  StopQueryService_createClass(StopQueryService, [{
    key: "destroy",
    value: function destroy() {
      StopQueryService_get(StopQueryService_getPrototypeOf(StopQueryService.prototype), "destroy", this).call(this);

      Util.reset(this);
    }
    /**
     * @function SuperMap.StopQueryService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ´æ°åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.StopQueryParameters} params - äº¤éæ¢ä¹åæ°ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof StopQueryParameters)) {
        return;
      }

      var me = this;
      me.url = Util.urlPathAppend(me.url, 'stops/keyword/' + params.keyWord);
      me.request({
        method: "GET",
        params: {
          returnPosition: params.returnPosition
        },
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return StopQueryService;
}(CommonServiceBase);
SuperMap.StopQueryService = StopQueryService;
// CONCATENATED MODULE: ./src/common/iServer/SummaryAttributesJobsParameter.js
function SummaryAttributesJobsParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SummaryAttributesJobsParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SummaryAttributesJobsParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) SummaryAttributesJobsParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) SummaryAttributesJobsParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.SummaryAttributesJobsParameter
 * @category  iServer ProcessingService SummaryAttributes
 * @classdesc å±æ§æ±æ»åæä»»å¡åæ°ç±»
 * @param {Object} options - åæ°ã
 * @param {string} options.datasetName - æ°æ®éåã
 * @param {string} options.groupField - åç»å­æ®µã
 * @param {string} options.attributeField - å±æ§å­æ®µã
 * @param {string} options.statisticModes - ç»è®¡æ¨¡å¼ã
 * @param {SuperMap.OutputSetting} [options.output] -è¾åºåæ°è®¾ç½®ã
 * @param {SuperMap.MappingParameters} [options.mappingParameters] - åæåç»æå¯è§åçåæ°ç±»ã   
 */

var SummaryAttributesJobsParameter = /*#__PURE__*/function () {
  function SummaryAttributesJobsParameter(options) {
    SummaryAttributesJobsParameter_classCallCheck(this, SummaryAttributesJobsParameter);

    if (!options) {
      return;
    }
    /**
     * @member {string} SuperMap.SummaryAttributesJobsParameter.prototype.datasetName
     * @description æ±æ»æ°æ®éåç§°ã
     */


    this.datasetName = "";
    /**
     * @member {string} SuperMap.SummaryAttributesJobsParameter.prototype.groupField
     * @description åç»å­æ®µã
     */

    this.groupField = "";
    /**
     * @member {string} SuperMap.SummaryAttributesJobsParameter.prototype.attributeField
     * @description å±æ§å­æ®µã
     */

    this.attributeField = "";
    /**
     * @member {string} SuperMap.SummaryAttributesJobsParameter.prototype.statisticModes
     * @description å±æ§æ±æ»ç»è®¡æ¨¡å¼ã
     */

    this.statisticModes = "";
    /**
     * @member {SuperMap.OutputSetting} SuperMap.SummaryAttributesJobsParameter.prototype.output
     * @description è¾åºåæ°è®¾ç½®ç±»ã
     */

    this.output = null;
    /**
     * @member {SuperMap.MappingParameters} [SuperMap.SummaryAttributesJobsParameter.prototype.mappingParameters]
     * @description åæåç»æå¯è§åçåæ°ç±»ã   
     */

    this.mappingParameters = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.SummaryAttributesJobsParameter";
  }
  /**
   * @function SuperMap.SummaryAttributesJobsParameter.destroy
   * @override
   */


  SummaryAttributesJobsParameter_createClass(SummaryAttributesJobsParameter, [{
    key: "destroy",
    value: function destroy() {
      this.datasetName = null;
      this.groupField = null;
      this.attributeField = null;
      this.statisticModes = null;

      if (this.output instanceof OutputSetting) {
        this.output.destroy();
        this.output = null;
      }

      if (this.mappingParameters instanceof MappingParameters) {
        this.mappingParameters.destroy();
        this.mappingParameters = null;
      }
    }
    /**
     * @function SuperMap.SummaryAttributesJobsParameter.toObject
     * @param {Object} SummaryAttributesJobsParameter - å±æ§æ±æ»ä»»å¡åæ°ã
     * @param {Object} tempObj - ç®æ å¯¹è±¡ã
     * @description çæå±æ§æ±æ»åæä»»å¡å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(SummaryAttributesJobsParameter, tempObj) {
      for (var name in SummaryAttributesJobsParameter) {
        if (name === "datasetName") {
          tempObj['input'] = tempObj['input'] || {};
          tempObj['input'][name] = SummaryAttributesJobsParameter[name];
          continue;
        }

        if (name === "output") {
          tempObj['output'] = tempObj['output'] || {};
          tempObj['output'] = SummaryAttributesJobsParameter[name];
          continue;
        }

        tempObj['analyst'] = tempObj['analyst'] || {};
        tempObj['analyst'][name] = SummaryAttributesJobsParameter[name];

        if (name === 'mappingParameters') {
          tempObj['analyst'][name] = tempObj['analyst'][name] || {};
          tempObj['analyst']['mappingParameters'] = SummaryAttributesJobsParameter[name];
        }
      }
    }
  }]);

  return SummaryAttributesJobsParameter;
}();
SuperMap.SummaryAttributesJobsParameter = SummaryAttributesJobsParameter;
// CONCATENATED MODULE: ./src/common/iServer/SummaryAttributesJobsService.js
function SummaryAttributesJobsService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SummaryAttributesJobsService_typeof = function _typeof(obj) { return typeof obj; }; } else { SummaryAttributesJobsService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SummaryAttributesJobsService_typeof(obj); }

function SummaryAttributesJobsService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SummaryAttributesJobsService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SummaryAttributesJobsService_createClass(Constructor, protoProps, staticProps) { if (protoProps) SummaryAttributesJobsService_defineProperties(Constructor.prototype, protoProps); if (staticProps) SummaryAttributesJobsService_defineProperties(Constructor, staticProps); return Constructor; }

function SummaryAttributesJobsService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SummaryAttributesJobsService_get = Reflect.get; } else { SummaryAttributesJobsService_get = function _get(target, property, receiver) { var base = SummaryAttributesJobsService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SummaryAttributesJobsService_get(target, property, receiver || target); }

function SummaryAttributesJobsService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SummaryAttributesJobsService_getPrototypeOf(object); if (object === null) break; } return object; }

function SummaryAttributesJobsService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SummaryAttributesJobsService_setPrototypeOf(subClass, superClass); }

function SummaryAttributesJobsService_setPrototypeOf(o, p) { SummaryAttributesJobsService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SummaryAttributesJobsService_setPrototypeOf(o, p); }

function SummaryAttributesJobsService_createSuper(Derived) { var hasNativeReflectConstruct = SummaryAttributesJobsService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SummaryAttributesJobsService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SummaryAttributesJobsService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SummaryAttributesJobsService_possibleConstructorReturn(this, result); }; }

function SummaryAttributesJobsService_possibleConstructorReturn(self, call) { if (call && (SummaryAttributesJobsService_typeof(call) === "object" || typeof call === "function")) { return call; } return SummaryAttributesJobsService_assertThisInitialized(self); }

function SummaryAttributesJobsService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SummaryAttributesJobsService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SummaryAttributesJobsService_getPrototypeOf(o) { SummaryAttributesJobsService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SummaryAttributesJobsService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.SummaryAttributesJobsService
 * @category  iServer ProcessingService SummaryAttributes
 * @classdesc å±æ§æ±æ»åææå¡ç±»
 * @extends {SuperMap.ProcessingServiceBase}
 * @param {string} url - æ±æ»ç»è®¡åææå¡å°åã
 * @param {Object} options - åæ°ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var SummaryAttributesJobsService = /*#__PURE__*/function (_ProcessingServiceBas) {
  SummaryAttributesJobsService_inherits(SummaryAttributesJobsService, _ProcessingServiceBas);

  var _super = SummaryAttributesJobsService_createSuper(SummaryAttributesJobsService);

  function SummaryAttributesJobsService(url, options) {
    var _this;

    SummaryAttributesJobsService_classCallCheck(this, SummaryAttributesJobsService);

    _this = _super.call(this, url, options);
    _this.url = Util.urlPathAppend(_this.url, 'spatialanalyst/summaryattributes');
    _this.CLASS_NAME = "SuperMap.SummaryAttributesJobsService";
    return _this;
  }
  /**
   *@override
   */


  SummaryAttributesJobsService_createClass(SummaryAttributesJobsService, [{
    key: "destroy",
    value: function destroy() {
      SummaryAttributesJobsService_get(SummaryAttributesJobsService_getPrototypeOf(SummaryAttributesJobsService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.SummaryAttributesJobsService.protitype.getSummaryAttributesJobs
     * @description è·åå±æ§æ±æ»åæææä»»å¡
     */

  }, {
    key: "getSummaryAttributesJobs",
    value: function getSummaryAttributesJobs() {
      SummaryAttributesJobsService_get(SummaryAttributesJobsService_getPrototypeOf(SummaryAttributesJobsService.prototype), "getJobs", this).call(this, this.url);
    }
    /**
     * @function SuperMap.SummaryAttributesJobsService.protitype.getSummaryAttributesJob
     * @description è·åæå®idçå±æ§æ±æ»åææå¡
     * @param {string} id - æå®è¦è·åæ°æ®çid
     */

  }, {
    key: "getSummaryAttributesJob",
    value: function getSummaryAttributesJob(id) {
      SummaryAttributesJobsService_get(SummaryAttributesJobsService_getPrototypeOf(SummaryAttributesJobsService.prototype), "getJobs", this).call(this, Util.urlPathAppend(this.url, id));
    }
    /**
     * @function SuperMap.SummaryAttributesJobsService.protitype.addSummaryAttributesJob
     * @description æ°å»ºå±æ§æ±æ»åææå¡
     * @param {SuperMap.SummaryAttributesJobsParameter} params - åå»ºä¸ä¸ªç©ºé´åæçè¯·æ±åæ°ã
     * @param {number} seconds - å¼å§åå»ºåï¼è·ååå»ºæåç»æçæ¶é´é´éã
     */

  }, {
    key: "addSummaryAttributesJob",
    value: function addSummaryAttributesJob(params, seconds) {
      SummaryAttributesJobsService_get(SummaryAttributesJobsService_getPrototypeOf(SummaryAttributesJobsService.prototype), "addJob", this).call(this, this.url, params, SummaryAttributesJobsParameter, seconds);
    }
  }]);

  return SummaryAttributesJobsService;
}(ProcessingServiceBase);
SuperMap.SummaryAttributesJobsService = SummaryAttributesJobsService;
// CONCATENATED MODULE: ./src/common/iServer/SummaryMeshJobParameter.js
function SummaryMeshJobParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SummaryMeshJobParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SummaryMeshJobParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) SummaryMeshJobParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) SummaryMeshJobParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.SummaryMeshJobParameter
 * @category  iServer ProcessingService AggregatePoints
 * @classdesc ç¹èååæä»»å¡åæ°ç±»ã
 * @param {Object} options - åæ°ã
 * @param {string} options.datasetName - æ°æ®éåã
 * @param {(SuperMap.Bounds|L.Bounds|ol.extent)} [options.query] - åæèå´ï¼é»è®¤ä¸ºå¨å¾èå´ï¼ã
 * @param {number} options.fields - æéç´¢å¼ã
 * @param {number} [options.resolution=100] - åè¾¨çã
 * @param {SuperMap.StatisticAnalystMode} [options.statisticModes=SuperMap.StatisticAnalystMode.AVERAGE] - åææ¨¡å¼ã
 * @param {number} [options.meshType=0] - åæç±»åã
 * @param {SuperMap.SummaryType} [options.type=SuperMap.SummaryType.SUMMARYMESH] - èåç±»åã
 * @param {SuperMap.OutputSetting} [options.output] - è¾åºåæ°è®¾ç½®ã
 * @param {SuperMap.MappingParameters} [options.mappingParameters] - åæåç»æå¯è§åçåæ°ç±»ã   
 */

var SummaryMeshJobParameter = /*#__PURE__*/function () {
  function SummaryMeshJobParameter(options) {
    SummaryMeshJobParameter_classCallCheck(this, SummaryMeshJobParameter);

    if (!options) {
      return;
    }
    /**
     * @member {string} SuperMap.SummaryMeshJobParameter.prototype.datasetName
     * @description æ°æ®éåã
     */


    this.datasetName = "";
    /**
     * @member {string} SuperMap.SummaryMeshJobParameter.prototype.regionDataset
     * @description èåé¢æ°æ®éï¼èåç±»åä¸ºå¤è¾¹å½¢èåæ¶ä½¿ç¨çåæ°ï¼ã
     */

    this.regionDataset = "";
    /**
     * @member {(SuperMap.Bounds|L.Bounds|ol.extent)} SuperMap.SummaryMeshJobParameter.prototype.query
     * @description åæèå´ï¼èåç±»åä¸ºç½æ ¼é¢èåæ¶ä½¿ç¨çåæ°ï¼ã
     */

    this.query = "";
    /**
     * @member {number} [SuperMap.SummaryMeshJobParameter.prototype.resolution=100]
     * @description åè¾¨çï¼èåç±»åä¸ºç½æ ¼é¢èåæ¶ä½¿ç¨çåæ°ï¼ã
     */

    this.resolution = 100;
    /**
     * @member {number} [SuperMap.SummaryMeshJobParameter.prototype.meshType=0]
     * @description  ç½æ ¼é¢ç±»åï¼èåç±»åä¸ºç½æ ¼é¢èåæ¶ä½¿ç¨çåæ°ï¼ï¼åå¼ï¼0 æ 1ã
     */

    this.meshType = 0;
    /**
     * @member {SuperMap.StatisticAnalystMode} [SuperMap.SummaryMeshJobParameter.prototype.statisticModes=SuperMap.StatisticAnalystMode.AVERAGE]
     * @description ç»è®¡æ¨¡å¼ã
     */

    this.statisticModes = StatisticAnalystMode.AVERAGE;
    /**
     * @member {number} SuperMap.SummaryMeshJobParameter.prototype.fields
     * @description æéå­æ®µã
     */

    this.fields = "";
    /**
     * @member {SuperMap.SummaryType} [SuperMap.SummaryMeshJobParameter.prototype.type=SuperMap.SummaryType.SUMMARYMESH]
     * @description èåç±»åã
     */

    this.type = SummaryType.SUMMARYMESH;
    /**
     * @member {SuperMap.OutputSetting} [SuperMap.SummaryMeshJobParameter.prototype.output]
     * @description è¾åºåæ°è®¾ç½®ç±»ã
     */

    this.output = null;
    /**
     * @member {SuperMap.MappingParameters} [SuperMap.SummaryMeshJobParameter.prototype.mappingParameters]
     * @description åæåç»æå¯è§åçåæ°ç±»ã   
     */

    this.mappingParameters = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.SummaryMeshJobParameter";
  }
  /**
   * @function SuperMap.SummaryMeshJobParameter.destroy
   * @override
   */


  SummaryMeshJobParameter_createClass(SummaryMeshJobParameter, [{
    key: "destroy",
    value: function destroy() {
      this.datasetName = null;
      this.query = null;
      this.resolution = null;
      this.statisticModes = null;
      this.meshType = null;
      this.fields = null;
      this.regionDataset = null;
      this.type = null;

      if (this.output instanceof OutputSetting) {
        this.output.destroy();
        this.output = null;
      }

      if (this.mappingParameters instanceof MappingParameters) {
        this.mappingParameters.destroy();
        this.mappingParameters = null;
      }
    }
    /**
     * @function SuperMap.SummaryMeshJobParameter.toObject
     * @param {Object} summaryMeshJobParameter - ç¹èååæä»»å¡åæ°ã
     * @param {Object} tempObj - ç®æ å¯¹è±¡ã
     * @description çæç¹èååæä»»å¡å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(summaryMeshJobParameter, tempObj) {
      for (var name in summaryMeshJobParameter) {
        if (name === "datasetName") {
          tempObj['input'] = tempObj['input'] || {};
          tempObj['input'][name] = summaryMeshJobParameter[name];
          continue;
        }

        if (name === "type") {
          tempObj['type'] = summaryMeshJobParameter[name];
          continue;
        }

        if (name === "output") {
          tempObj['output'] = tempObj['output'] || {};
          tempObj['output'] = summaryMeshJobParameter[name];
          continue;
        }

        if (summaryMeshJobParameter.type === 'SUMMARYMESH' && name !== 'regionDataset' || summaryMeshJobParameter.type === 'SUMMARYREGION' && !contains(['meshType', 'resolution', 'query'], name)) {
          tempObj['analyst'] = tempObj['analyst'] || {};

          if (name === 'query' && summaryMeshJobParameter[name]) {
            tempObj['analyst'][name] = summaryMeshJobParameter[name].toBBOX();
          } else {
            tempObj['analyst'][name] = summaryMeshJobParameter[name];
          }

          if (name === 'mappingParameters') {
            tempObj['analyst'][name] = tempObj['analyst'][name] || {};
            tempObj['analyst']['mappingParameters'] = summaryMeshJobParameter[name];
          }
        }
      }

      function contains(arr, obj) {
        var i = arr.length;

        while (i--) {
          if (arr[i] === obj) {
            return true;
          }
        }

        return false;
      }
    }
  }]);

  return SummaryMeshJobParameter;
}();
SuperMap.SummaryMeshJobParameter = SummaryMeshJobParameter;
// CONCATENATED MODULE: ./src/common/iServer/SummaryMeshJobsService.js
function SummaryMeshJobsService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SummaryMeshJobsService_typeof = function _typeof(obj) { return typeof obj; }; } else { SummaryMeshJobsService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SummaryMeshJobsService_typeof(obj); }

function SummaryMeshJobsService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SummaryMeshJobsService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SummaryMeshJobsService_createClass(Constructor, protoProps, staticProps) { if (protoProps) SummaryMeshJobsService_defineProperties(Constructor.prototype, protoProps); if (staticProps) SummaryMeshJobsService_defineProperties(Constructor, staticProps); return Constructor; }

function SummaryMeshJobsService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SummaryMeshJobsService_get = Reflect.get; } else { SummaryMeshJobsService_get = function _get(target, property, receiver) { var base = SummaryMeshJobsService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SummaryMeshJobsService_get(target, property, receiver || target); }

function SummaryMeshJobsService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SummaryMeshJobsService_getPrototypeOf(object); if (object === null) break; } return object; }

function SummaryMeshJobsService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SummaryMeshJobsService_setPrototypeOf(subClass, superClass); }

function SummaryMeshJobsService_setPrototypeOf(o, p) { SummaryMeshJobsService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SummaryMeshJobsService_setPrototypeOf(o, p); }

function SummaryMeshJobsService_createSuper(Derived) { var hasNativeReflectConstruct = SummaryMeshJobsService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SummaryMeshJobsService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SummaryMeshJobsService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SummaryMeshJobsService_possibleConstructorReturn(this, result); }; }

function SummaryMeshJobsService_possibleConstructorReturn(self, call) { if (call && (SummaryMeshJobsService_typeof(call) === "object" || typeof call === "function")) { return call; } return SummaryMeshJobsService_assertThisInitialized(self); }

function SummaryMeshJobsService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SummaryMeshJobsService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SummaryMeshJobsService_getPrototypeOf(o) { SummaryMeshJobsService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SummaryMeshJobsService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.SummaryMeshJobsService
 * @category  iServer ProcessingService AggregatePoints
 * @classdesc ç¹èååæä»»å¡ç±»ã
 * @param {string} url -ç¹èååæä»»å¡å°åã
 * @param {Object} options - åæ°ã
 * @param {SuperMap.Events} options.events - å¤çææäºä»¶çå¯¹è±¡ã<br>
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã
 * @param {Object} [options.eventListeners] - äºä»¶çå¬å¨å¯¹è±¡ãæ processCompleted å±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailed å±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {number} options.index - æå¡è®¿é®å°åå¨æ°ç»ä¸­çä½ç½®ã<br>
 * @param {number} options.length - æå¡è®¿é®å°åæ°ç»é¿åº¦ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var SummaryMeshJobsService = /*#__PURE__*/function (_ProcessingServiceBas) {
  SummaryMeshJobsService_inherits(SummaryMeshJobsService, _ProcessingServiceBas);

  var _super = SummaryMeshJobsService_createSuper(SummaryMeshJobsService);

  function SummaryMeshJobsService(url, options) {
    var _this;

    SummaryMeshJobsService_classCallCheck(this, SummaryMeshJobsService);

    _this = _super.call(this, url, options);
    _this.url = Util.urlPathAppend(_this.url, 'spatialanalyst/aggregatepoints');
    _this.CLASS_NAME = 'SuperMap.SummaryMeshJobsService';
    return _this;
  }
  /**
   * @override
   */


  SummaryMeshJobsService_createClass(SummaryMeshJobsService, [{
    key: "destroy",
    value: function destroy() {
      SummaryMeshJobsService_get(SummaryMeshJobsService_getPrototypeOf(SummaryMeshJobsService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.SummaryMeshJobsService.prototype.getSummaryMeshJobs
     * @description è·åç¹èååæä»»å¡
     */

  }, {
    key: "getSummaryMeshJobs",
    value: function getSummaryMeshJobs() {
      SummaryMeshJobsService_get(SummaryMeshJobsService_getPrototypeOf(SummaryMeshJobsService.prototype), "getJobs", this).call(this, this.url);
    }
    /**
     * @function SuperMap.SummaryMeshJobsService.prototype.getSummaryMeshJob
     * @description è·åæå®ipçç¹èååæä»»å¡
     * @param {string} id - æå®è¦è·åæ°æ®çid
     */

  }, {
    key: "getSummaryMeshJob",
    value: function getSummaryMeshJob(id) {
      SummaryMeshJobsService_get(SummaryMeshJobsService_getPrototypeOf(SummaryMeshJobsService.prototype), "getJobs", this).call(this, Util.urlPathAppend(this.url, id));
    }
    /**
     * @function SuperMap.SummaryMeshJobsService.prototype.addSummaryMeshJob
     * @description æ°å»ºç¹èååææå¡
     * @param {SuperMap.SummaryMeshJobParameter} params - åå»ºä¸ä¸ªç©ºé´åæçè¯·æ±åæ°ã
     * @param {number} seconds - å¼å§åå»ºåï¼è·ååå»ºæåç»æçæ¶é´é´éã
     */

  }, {
    key: "addSummaryMeshJob",
    value: function addSummaryMeshJob(params, seconds) {
      SummaryMeshJobsService_get(SummaryMeshJobsService_getPrototypeOf(SummaryMeshJobsService.prototype), "addJob", this).call(this, this.url, params, SummaryMeshJobParameter, seconds);
    }
  }]);

  return SummaryMeshJobsService;
}(ProcessingServiceBase);
SuperMap.SummaryMeshJobsService = SummaryMeshJobsService;
// CONCATENATED MODULE: ./src/common/iServer/SummaryRegionJobParameter.js
function SummaryRegionJobParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SummaryRegionJobParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SummaryRegionJobParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) SummaryRegionJobParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) SummaryRegionJobParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.SummaryRegionJobParameter
 * @category  iServer ProcessingService SummaryRegion
 * @classdesc åºåæ±æ»åæä»»å¡åæ°ç±»ã
 * @param {Object} options - åæ°ã
 * @param {string} options.datasetName - æ°æ®éåã
 * @param {(SuperMap.Bounds|L.Bounds|ol.extent)} [options.query] - åæèå´ï¼é»è®¤ä¸ºå¨å¾èå´ï¼ã
 * @param {string} [options.standardFields] - æ åå±æ§å­æ®µåç§°ã
 * @param {string} [options.weightedFields] - æéå­æ®µåç§°ã
 * @param {SuperMap.StatisticAnalystMode} [options.standardStatisticModes] - æ åå±æ§å­æ®µçç»è®¡æ¨¡å¼ãstandardSummaryFields ä¸º true æ¶å¿å¡«ã
 * @param {SuperMap.StatisticAnalystMode} [options.weightedStatisticModes] - æéå­æ®µçç»è®¡æ¨¡å¼ãweightedSummaryFields ä¸º true æ¶å¿å¡«ã 
 * @param {boolean} [options.sumShape=true] - æ¯å¦ç»è®¡é¿åº¦æé¢ç§¯ã
 * @param {boolean} [options.standardSummaryFields=false] - æ¯å¦ä»¥æ åå±å­æ®µç»è®¡ã
 * @param {boolean} [options.weightedSummaryFields=false] - æ¯å¦ä»¥æéå­æ®µç»è®¡ã
 * @param {number} [options.resolution=100] - ç½æ ¼å¤§å°ã
 * @param {number} [options.meshType=0] - ç½æ ¼é¢æ±æ»ç±»åã
 * @param {SuperMap.AnalystSizeUnit} [options.meshSizeUnit=SuperMap.AnalystSizeUnit.METER] - ç½æ ¼å¤§å°åä½ã
 * @param {SuperMap.SummaryType} [options.type=SuperMap.SummaryType.SUMMARYMESH] - æ±æ»ç±»åã
 * @param {SuperMap.OutputSetting} [options.output] - è¾åºåæ°è®¾ç½®ã
 * @param {SuperMap.MappingParameters} [options.mappingParameters] - åæåç»æå¯è§åçåæ°ç±»ã   
 */

var SummaryRegionJobParameter = /*#__PURE__*/function () {
  function SummaryRegionJobParameter(options) {
    SummaryRegionJobParameter_classCallCheck(this, SummaryRegionJobParameter);

    if (!options) {
      return;
    }
    /**
     * @member {string} SuperMap.SummaryRegionJobParameter.prototype.datasetName
     * @description æ°æ®éåã
     */


    this.datasetName = "";
    /**
     * @member {string} SuperMap.SummaryRegionJobParameter.prototype.regionDataset
     * @description æ±æ»æ°æ®æºï¼å¤è¾¹å½¢æ±æ»æ¶ç¨å°çåæ°ï¼ã
     */

    this.regionDataset = "";
    /**
     * @member {boolean} [SuperMap.SummaryRegionJobParameter.prototype.sumShape=true]
     * @description æ¯å¦ç»è®¡é¿åº¦æé¢ç§¯ã
     */

    this.sumShape = true;
    /**
     * @member {(SuperMap.Bounds|L.Bounds|ol.extent)} SuperMap.SummaryRegionJobParameter.prototype.query
     * @description åæèå´ã
     */

    this.query = "";
    /**
     * @member {boolean} [SuperMap.SummaryRegionJobParameter.prototype.standardSummaryFields=false]
     * @description æ¯å¦ä»¥æ åå±å­æ®µç»è®¡ã
     */

    this.standardSummaryFields = false;
    /**
     * @member {string} SuperMap.SummaryRegionJobParameter.prototype.standardFields
     * @description æ åå±æ§å­æ®µåç§°ãä»æ¯æç³»ç»å­æ®µä»¥å¤çæ´å½¢ãé¿æ´å½¢ãæµ®ç¹åçå­æ®µçåç§°ãstandardSummaryFields ä¸º true æ¶å¿å¡«ã 
     */

    this.standardFields = "";
    /**
     * @member {SuperMap.StatisticAnalystMode} SuperMap.SummaryRegionJobParameter.prototype.standardStatisticModes
     * @description æ åå±æ§å­æ®µçç»è®¡æ¨¡å¼ãstandardSummaryFields ä¸º true æ¶å¿å¡«ã
     */

    this.standardStatisticModes = "";
    /**
     * @member {boolean} [SuperMap.SummaryRegionJobParameter.prototype.weightedSummaryFields=false]
     * @description æ¯å¦ä»¥æéå­æ®µç»è®¡ã
     */

    this.weightedSummaryFields = false;
    /**
     * @member {string} SuperMap.SummaryRegionJobParameter.prototype.weightedFields
     * @description æéå­æ®µåç§°ãä»æ¯æç³»ç»å­æ®µä»¥å¤çæ´å½¢ãé¿æ´å½¢ãæµ®ç¹åçå­æ®µçåç§°ãweightedSummaryFields ä¸º true æ¶å¿å¡«ã 
     */

    this.weightedFields = "";
    /**
     * @member {SuperMap.StatisticAnalystMode} SuperMap.SummaryRegionJobParameter.prototype.weightedStatisticModes
     * @description ä»¥æéå­æ®µç»è®¡çç»è®¡æ¨¡å¼ãæéå­æ®µçç»è®¡æ¨¡å¼ãweightedSummaryFields ä¸º true æ¶å¿å¡«ã 
     */

    this.weightedStatisticModes = "";
    /**
     * @member {number} [SuperMap.SummaryRegionJobParameter.prototype.meshType=0]
     * @description ç½æ ¼é¢æ±æ»ç±»åã
     */

    this.meshType = 0;
    /**
     * @member {number} [SuperMap.SummaryRegionJobParameter.prototype.resolution=100]
     * @description ç½æ ¼å¤§å°ã
     */

    this.resolution = 100;
    /**
     * @member {SuperMap.AnalystSizeUnit} [SuperMap.SummaryRegionJobParameter.prototype.meshSizeUnit=SuperMap.AnalystSizeUnit.METER]
     * @description ç½æ ¼å¤§å°åä½ã
     */

    this.meshSizeUnit = AnalystSizeUnit.METER;
    /**
     * @member {SuperMap.SummaryType} [SuperMap.SummaryRegionJobParameter.prototype.type=SuperMap.SummaryType.SUMMARYMESH]
     * @description æ±æ»ç±»åã
     */

    this.type = SummaryType.SUMMARYMESH;
    /**
     * @member {SuperMap.OutputSetting} SuperMap.SummaryRegionJobParameter.prototype.output
     * @description è¾åºåæ°è®¾ç½®ç±»
     */

    this.output = null;
    /**
     * @member {SuperMap.MappingParameters} [SuperMap.SummaryRegionJobParameter.prototype.mappingParameters]
     * @description åæåç»æå¯è§åçåæ°ç±»ã   
     */

    this.mappingParameters = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.SummaryRegionJobParameter";
  }
  /**
   * @function SuperMap.SummaryRegionJobParameter.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  SummaryRegionJobParameter_createClass(SummaryRegionJobParameter, [{
    key: "destroy",
    value: function destroy() {
      this.datasetName = null;
      this.sumShape = null;
      this.regionDataset = null;
      this.query = null;
      this.standardSummaryFields = null;
      this.standardFields = null;
      this.standardStatisticModes = null;
      this.weightedSummaryFields = null;
      this.weightedFields = null;
      this.weightedStatisticModes = null;
      this.meshType = null;
      this.resolution = null;
      this.meshSizeUnit = null;
      this.type = null;

      if (this.output instanceof OutputSetting) {
        this.output.destroy();
        this.output = null;
      }

      if (this.mappingParameters instanceof MappingParameters) {
        this.mappingParameters.destroy();
        this.mappingParameters = null;
      }
    }
    /**
     * @function SuperMap.SummaryRegionJobParameter.toObject
     * @param {Object} summaryRegionJobParameter - ç¢éè£åªåæä»»å¡åæ°ã
     * @param {Object} tempObj - ç®æ å¯¹è±¡ã
     * @description çæåºåæ±æ»åææå¡å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(summaryRegionJobParameter, tempObj) {
      for (var name in summaryRegionJobParameter) {
        if (name === "datasetName") {
          tempObj['input'] = tempObj['input'] || {};
          tempObj['input'][name] = summaryRegionJobParameter[name];
          continue;
        }

        if (name === "type") {
          tempObj['type'] = summaryRegionJobParameter[name];
          continue;
        }

        if (name === "type") {
          tempObj['type'] = summaryRegionJobParameter[name];
          continue;
        }

        if (name === "output") {
          tempObj['output'] = tempObj['output'] || {};
          tempObj['output'] = summaryRegionJobParameter[name];
          continue;
        }

        if (summaryRegionJobParameter.type === "SUMMARYREGION" || summaryRegionJobParameter.type === "SUMMARYMESH" && name !== "regionDataset") {
          tempObj['analyst'] = tempObj['analyst'] || {};

          if (name === 'query' && summaryRegionJobParameter[name]) {
            tempObj['analyst'][name] = summaryRegionJobParameter[name].toBBOX();
          } else {
            tempObj['analyst'][name] = summaryRegionJobParameter[name];
          }

          if (name === 'mappingParameters') {
            tempObj['analyst'][name] = tempObj['analyst'][name] || {};
            tempObj['analyst']['mappingParameters'] = summaryRegionJobParameter[name];
          }
        }
      }
    }
  }]);

  return SummaryRegionJobParameter;
}();
SuperMap.SummaryRegionJobParameter = SummaryRegionJobParameter;
// CONCATENATED MODULE: ./src/common/iServer/SummaryRegionJobsService.js
function SummaryRegionJobsService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SummaryRegionJobsService_typeof = function _typeof(obj) { return typeof obj; }; } else { SummaryRegionJobsService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SummaryRegionJobsService_typeof(obj); }

function SummaryRegionJobsService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SummaryRegionJobsService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SummaryRegionJobsService_createClass(Constructor, protoProps, staticProps) { if (protoProps) SummaryRegionJobsService_defineProperties(Constructor.prototype, protoProps); if (staticProps) SummaryRegionJobsService_defineProperties(Constructor, staticProps); return Constructor; }

function SummaryRegionJobsService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SummaryRegionJobsService_get = Reflect.get; } else { SummaryRegionJobsService_get = function _get(target, property, receiver) { var base = SummaryRegionJobsService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SummaryRegionJobsService_get(target, property, receiver || target); }

function SummaryRegionJobsService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SummaryRegionJobsService_getPrototypeOf(object); if (object === null) break; } return object; }

function SummaryRegionJobsService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SummaryRegionJobsService_setPrototypeOf(subClass, superClass); }

function SummaryRegionJobsService_setPrototypeOf(o, p) { SummaryRegionJobsService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SummaryRegionJobsService_setPrototypeOf(o, p); }

function SummaryRegionJobsService_createSuper(Derived) { var hasNativeReflectConstruct = SummaryRegionJobsService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SummaryRegionJobsService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SummaryRegionJobsService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SummaryRegionJobsService_possibleConstructorReturn(this, result); }; }

function SummaryRegionJobsService_possibleConstructorReturn(self, call) { if (call && (SummaryRegionJobsService_typeof(call) === "object" || typeof call === "function")) { return call; } return SummaryRegionJobsService_assertThisInitialized(self); }

function SummaryRegionJobsService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SummaryRegionJobsService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SummaryRegionJobsService_getPrototypeOf(o) { SummaryRegionJobsService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SummaryRegionJobsService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.SummaryRegionJobsService
 * @category  iServer ProcessingService SummaryRegion
 * @classdesc åºåæ±æ»åææå¡ç±»
 * @extends {SuperMap.ProcessingServiceBase}
 * @param {string} url - åºåæ±æ»åææå¡å°åã
 * @param {Object} options - åæ°ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var SummaryRegionJobsService = /*#__PURE__*/function (_ProcessingServiceBas) {
  SummaryRegionJobsService_inherits(SummaryRegionJobsService, _ProcessingServiceBas);

  var _super = SummaryRegionJobsService_createSuper(SummaryRegionJobsService);

  function SummaryRegionJobsService(url, options) {
    var _this;

    SummaryRegionJobsService_classCallCheck(this, SummaryRegionJobsService);

    _this = _super.call(this, url, options);
    _this.url = Util.urlPathAppend(_this.url, 'spatialanalyst/summaryregion');
    _this.CLASS_NAME = 'SuperMap.SummaryRegionJobsService';
    return _this;
  }
  /**
   *@override
   */


  SummaryRegionJobsService_createClass(SummaryRegionJobsService, [{
    key: "destroy",
    value: function destroy() {
      SummaryRegionJobsService_get(SummaryRegionJobsService_getPrototypeOf(SummaryRegionJobsService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.SummaryRegionJobsService.prototype.getSummaryRegionJobs
     * @description è·ååºåæ±æ»åæä»»å¡éåã
     */

  }, {
    key: "getSummaryRegionJobs",
    value: function getSummaryRegionJobs() {
      SummaryRegionJobsService_get(SummaryRegionJobsService_getPrototypeOf(SummaryRegionJobsService.prototype), "getJobs", this).call(this, this.url);
    }
    /**
     * @function SuperMap.SummaryRegionJobsService.prototype.getSummaryRegionJob
     * @description è·åæå®idçåºåæ±æ»åæä»»å¡ã
     * @param {string} id -è¦è·ååºåæ±æ»åæä»»å¡çid
     */

  }, {
    key: "getSummaryRegionJob",
    value: function getSummaryRegionJob(id) {
      SummaryRegionJobsService_get(SummaryRegionJobsService_getPrototypeOf(SummaryRegionJobsService.prototype), "getJobs", this).call(this, Util.urlPathAppend(this.url, id));
    }
    /**
     * @function SuperMap.SummaryRegionJobsService.prototype.addSummaryRegionJob
     * @description æ°å»ºåºåæ±æ»ä»»å¡ã
     * @param {SuperMap.SummaryRegionJobParameter} params - åå»ºä¸ä¸ªåºåæ±æ»ä»»å¡çè¯·æ±åæ°ã
     * @param {number} seconds - å¼å§åå»ºåï¼è·ååå»ºæåç»æçæ¶é´é´éã
     */

  }, {
    key: "addSummaryRegionJob",
    value: function addSummaryRegionJob(params, seconds) {
      SummaryRegionJobsService_get(SummaryRegionJobsService_getPrototypeOf(SummaryRegionJobsService.prototype), "addJob", this).call(this, this.url, params, SummaryRegionJobParameter, seconds);
    }
  }]);

  return SummaryRegionJobsService;
}(ProcessingServiceBase);
SuperMap.SummaryRegionJobsService = SummaryRegionJobsService;
// CONCATENATED MODULE: ./src/common/iServer/SupplyCenter.js
function SupplyCenter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SupplyCenter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SupplyCenter_createClass(Constructor, protoProps, staticProps) { if (protoProps) SupplyCenter_defineProperties(Constructor.prototype, protoProps); if (staticProps) SupplyCenter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.SupplyCenter
 * @category  iServer NetworkAnalyst Location
 * @classdesc èµæºä¾ç»ä¸­å¿ç±»ãå¨èµæºåéåéåååºåæä¸¤ä¸ªåè½ä¸­ä½¿ç¨ã
 * @param {Object} options - åæ°ã
 * @param {number} options.maxWeight - èµæºä¾ç»ä¸­å¿çæå¤§èè´¹å¼ã
 * @param {number} options.nodeID - èµæºä¾ç»ä¸­å¿ç¹çç»ç¹ ID å·ãèµæºä¾ç»ä¸­å¿å¿é¡»æ¯ç»ç¹ã
 * @param {number} options.resourceValue - èµæºä¾ç»ä¸­å¿è½æä¾çæå¤§æå¡éæååæ°éã
 * @param {SuperMap.SupplyCenterType} [options.type] - èµæºä¾ç»ä¸­å¿ç¹çç±»åå¸¸éã
 */

var SupplyCenter = /*#__PURE__*/function () {
  function SupplyCenter(options) {
    SupplyCenter_classCallCheck(this, SupplyCenter);

    /**
     * @member {number} SuperMap.SupplyCenter.prototype.maxWeight
     * @description èµæºä¾ç»ä¸­å¿çæå¤§èè´¹å¼ãä¸­å¿ç¹æå¤§é»å¼è®¾ç½®è¶å°ï¼è¡¨ç¤ºä¸­å¿ç¹ææä¾çèµæºå¯å½±åèå´è¶å¤§ã
     *              æå¤§é»åå¼æ¯ç¨æ¥éå¶éæ±ç¹å°ä¸­å¿ç¹çè±è´¹ã
     *              å¦æéæ±ç¹ï¼å¼§æ®µæç»ç¹ï¼å°æ­¤ä¸­å¿çè±è´¹å¤§äºæå¤§é»åå¼ï¼åè¯¥éæ±ç¹ä¸å±äºè¯¥èµæºä¾ç»ä¸­å¿æä¾èµæºçèå´ã
     */
    this.maxWeight = null;
    /**
     * @member {number} SuperMap.SupplyCenter.prototype.nodeID
     * @description èµæºä¾ç»ä¸­å¿ç¹çç»ç¹ ID å·ï¼èµæºä¾ç»ä¸­å¿å¿é¡»æ¯ç»ç¹ã
     */

    this.nodeID = null;
    /**
     * @member {number} SuperMap.SupplyCenter.prototype.resourceValue
     * @description èµæºä¾ç»ä¸­å¿è½æä¾çæå¤§æå¡éæååæ°éãä¾å¦èµæºä¸­å¿ä¸ºå­¦æ ¡ï¼èµæºä¸­å¿èµæºéè¡¨ç¤ºè¯¥å­¦æ ¡è½å¤æ¥çº³å¤å°å­¦çã
     */

    this.resourceValue = null;
    /**
     * @member {SuperMap.SupplyCenterType} [SuperMap.SupplyCenter.prototype.type]
     * @description èµæºä¾ç»ä¸­å¿ç¹çç±»åå¸¸éãèµæºä¾ç»ä¸­å¿ç¹çç±»ååæ¬éä¸­å¿ï¼åºå®ä¸­å¿åå¯éä¸­å¿ã
     *              åºå®ä¸­å¿ç¨äºèµæºåéåæï¼åºå®ä¸­å¿åå¯éä¸­å¿ç¨äºéååæï¼éä¸­å¿å¨ä¸¤ç§ç½ç»åææ¶é½ä¸äºèèã
     */

    this.type = null;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.SupplyCenter";
  }
  /**
   * @function SuperMap.SupplyCenter.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  SupplyCenter_createClass(SupplyCenter, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.maxWeight = null;
      me.nodeID = null;
      me.resourceValue = null;
      me.type = null;
    }
    /**
     * @function SuperMap.SupplyCenter.fromJson
     * @description å°æå¡ç«¯ JSON å¯¹è±¡è½¬æ¢æå½åå®¢æ·ç«¯å¯¹è±¡ã
     * @param {Object} jsonObject - è¦è½¬æ¢ç JSON å¯¹è±¡ã
     * @returns {SuperMap.SupplyCenter} SupplyCenter å¯¹è±¡ã
     */

  }], [{
    key: "fromJson",
    value: function fromJson(jsonObject) {
      if (!jsonObject) {
        return;
      }

      return new SupplyCenter({
        maxWeight: jsonObject.maxWeight,
        nodeID: jsonObject.nodeID,
        resourceValue: jsonObject.resourceValue,
        type: jsonObject.type
      });
    }
  }]);

  return SupplyCenter;
}();
SuperMap.SupplyCenter = SupplyCenter;
// CONCATENATED MODULE: ./src/common/iServer/SurfaceAnalystService.js
function SurfaceAnalystService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SurfaceAnalystService_typeof = function _typeof(obj) { return typeof obj; }; } else { SurfaceAnalystService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SurfaceAnalystService_typeof(obj); }

function SurfaceAnalystService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SurfaceAnalystService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SurfaceAnalystService_createClass(Constructor, protoProps, staticProps) { if (protoProps) SurfaceAnalystService_defineProperties(Constructor.prototype, protoProps); if (staticProps) SurfaceAnalystService_defineProperties(Constructor, staticProps); return Constructor; }

function SurfaceAnalystService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SurfaceAnalystService_get = Reflect.get; } else { SurfaceAnalystService_get = function _get(target, property, receiver) { var base = SurfaceAnalystService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SurfaceAnalystService_get(target, property, receiver || target); }

function SurfaceAnalystService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SurfaceAnalystService_getPrototypeOf(object); if (object === null) break; } return object; }

function SurfaceAnalystService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SurfaceAnalystService_setPrototypeOf(subClass, superClass); }

function SurfaceAnalystService_setPrototypeOf(o, p) { SurfaceAnalystService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SurfaceAnalystService_setPrototypeOf(o, p); }

function SurfaceAnalystService_createSuper(Derived) { var hasNativeReflectConstruct = SurfaceAnalystService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SurfaceAnalystService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SurfaceAnalystService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SurfaceAnalystService_possibleConstructorReturn(this, result); }; }

function SurfaceAnalystService_possibleConstructorReturn(self, call) { if (call && (SurfaceAnalystService_typeof(call) === "object" || typeof call === "function")) { return call; } return SurfaceAnalystService_assertThisInitialized(self); }

function SurfaceAnalystService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SurfaceAnalystService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SurfaceAnalystService_getPrototypeOf(o) { SurfaceAnalystService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SurfaceAnalystService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/






/**
 * @class SuperMap.SurfaceAnalystService
 * @category  iServer SpatialAnalyst SurfaceAnalyst
 * @classdesc è¡¨é¢åææå¡ç±»ã
 * è¯¥ç±»è´è´£å°å®¢æ·è®¾ç½®çè¡¨é¢åææå¡åæ°ä¼ éç»æå¡ç«¯ï¼å¹¶æ¥æ¶æå¡ç«¯è¿åçè¡¨é¢åææå¡åæç»ææ°æ®ã
 * è¡¨é¢åæç»æéè¿è¯¥ç±»æ¯æçäºä»¶ççå¬å½æ°åæ°è·å
 * @param {string} url - æå¡çè®¿é®å°åãå¦ http://localhost:8090/iserver/services/spatialanalyst-changchun/restjsr/spatialanalyst
 * @param {Object} options - åæ°ã</br>
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @extends {SuperMap.SpatialAnalystBase}
 * @example ä¾å¦ï¼
 * (start code)
 * var mySurfaceAnalystService = new SuperMap.SurfaceAnalystService(url, {
     *      eventListeners: {
     *	       "processCompleted": surfaceAnalysCompleted,
     *		   "processFailed": surfaceAnalysFailed
     *		   }
     * });
 * (end)
 *
 */

var SurfaceAnalystService = /*#__PURE__*/function (_SpatialAnalystBase) {
  SurfaceAnalystService_inherits(SurfaceAnalystService, _SpatialAnalystBase);

  var _super = SurfaceAnalystService_createSuper(SurfaceAnalystService);

  function SurfaceAnalystService(url, options) {
    var _this;

    SurfaceAnalystService_classCallCheck(this, SurfaceAnalystService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.SurfaceAnalystService";
    return _this;
  }
  /**
   * @function SuperMap.SurfaceAnalystService.prototype.destroy
   * @description éæ¾èµæº,å°å¼ç¨çèµæºå±æ§ç½®ç©ºã
   */


  SurfaceAnalystService_createClass(SurfaceAnalystService, [{
    key: "destroy",
    value: function destroy() {
      SurfaceAnalystService_get(SurfaceAnalystService_getPrototypeOf(SurfaceAnalystService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.SurfaceAnalystService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çè¡¨é¢åææå¡åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.SurfaceAnalystParameters} params - è¡¨é¢åææåæä½åæ°ç±»ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof SurfaceAnalystParameters)) {
        return;
      }

      var me = this,
          jsonParameters;
      jsonParameters = me.getJsonParameters(params);
      me.request({
        method: "POST",
        data: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.SurfaceAnalystService.prototype.getJsonParameters
     * @description å°åæ°è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @param {SuperMap.SurfaceAnalystParameters} params - è¡¨é¢åææåæä½åæ°ç±»ã
     * @returns {Object} è½¬ååçJSONå­ç¬¦ä¸²ã
     */

  }, {
    key: "getJsonParameters",
    value: function getJsonParameters(params) {
      var jsonParameters = '';
      var parameterObject = {};
      var me = this;

      if (params instanceof DatasetSurfaceAnalystParameters) {
        me.url = Util.urlPathAppend(me.url, 'datasets/' + params.dataset + '/' + params.surfaceAnalystMethod.toLowerCase());
        DatasetSurfaceAnalystParameters.toObject(params, parameterObject);
        jsonParameters = Util.toJSON(parameterObject);
      } else if (params instanceof GeometrySurfaceAnalystParameters) {
        me.url = Util.urlPathAppend(me.url, 'geometry/' + params.surfaceAnalystMethod.toLowerCase());
        jsonParameters = Util.toJSON(params);
      } else {
        return;
      }

      me.url = Util.urlAppend(me.url, 'returnContent=true');
      return jsonParameters;
    }
  }]);

  return SurfaceAnalystService;
}(SpatialAnalystBase);
SuperMap.SurfaceAnalystService = SurfaceAnalystService;
// CONCATENATED MODULE: ./src/common/iServer/TerrainCurvatureCalculationParameters.js
function TerrainCurvatureCalculationParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function TerrainCurvatureCalculationParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function TerrainCurvatureCalculationParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) TerrainCurvatureCalculationParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) TerrainCurvatureCalculationParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.TerrainCurvatureCalculationParameters
 * @category  iServer SpatialAnalyst TerrainCalculation
 * @classdesc å°å½¢æ²çè®¡ç®åæ°ç±»ã
 * @param {Object} options - åæ°ã
 * @param {string} options.dataset - è¦ç¨æ¥åå°å½¢æ²çè®¡ç®æ°æ®æºä¸­æ°æ®éçåç§°ãè¯¥åç§°ç¨å½¢å¦"æ°æ®éåç§°@æ°æ®æºå«å"å½¢å¼æ¥è¡¨ç¤ºï¼ä¾å¦ï¼JingjinTerrain@Jingjinã
 * @param {string} options.averageCurvatureName - ç»ææ°æ®éï¼å¹³åæ²çæ°æ®éçåç§°ã
 * @param {string} options.profileCurvatureName - ç»ææ°æ®éï¼åé¢æ²çæ°æ®éçåç§°ã
 * @param {string} options.planCurvatureName - ç»ææ°æ®éï¼å¹³é¢æ²çæ°æ®éçåç§°ã
 * @param {number} [options.zFactor=1.0] - æå®çé«ç¨ç¼©æ¾ç³»æ°ã1.0 è¡¨ç¤ºä¸ç¼©æ¾ã
 * @param {boolean} [options.deleteExistResultDataset=false] - å¦æç¨æ·å½åçç»ææ°æ®éåç§°ä¸å·²æçæ°æ®ééåï¼æ¯å¦å é¤å·²æçæ°æ®éã
 */

var TerrainCurvatureCalculationParameters = /*#__PURE__*/function () {
  function TerrainCurvatureCalculationParameters(options) {
    TerrainCurvatureCalculationParameters_classCallCheck(this, TerrainCurvatureCalculationParameters);

    if (!options) {
      return;
    }
    /**
     * @member {string} SuperMap.TerrainCurvatureCalculationParameters.prototype.dataset
     * @description è¦ç¨æ¥åå°å½¢æ²çè®¡ç®æ°æ®æºä¸­æ°æ®éçåç§°ã
     * è¯¥åç§°ç¨å½¢å¦"æ°æ®éåç§°@æ°æ®æºå«å"å½¢å¼æ¥è¡¨ç¤ºï¼ä¾å¦ï¼JingjinTerrain@Jingjinã
     * æ³¨ï¼å°å½¢æ²çè®¡ç®å¿é¡»ä¸ºæ æ ¼æ°æ®éã
     */


    this.dataset = null;
    /**
     * @member {number} [SuperMap.TerrainCurvatureCalculationParameters.prototype.zFactor=1.0]
     * @description æå®çé«ç¨ç¼©æ¾ç³»æ°ã1.0 è¡¨ç¤ºä¸ç¼©æ¾ã
     * è¯¥å¼æ¯æå¨ DEM æ æ ¼æ°æ®ä¸­ï¼æ æ ¼å¼ï¼ Z åæ ï¼å³é«ç¨å¼ï¼ç¸å¯¹äº X å Y åæ çåä½åæ¢ç³»æ°ã
     * éå¸¸æ Xï¼Yï¼Z é½åå çè®¡ç®ä¸­ï¼éè¦å°é«ç¨å¼ä¹ä»¥ä¸ä¸ªé«ç¨ç¼©æ¾ç³»æ°ï¼ä½¿å¾ä¸èåä½ä¸è´ã
     * ä¾å¦ï¼XãY æ¹åä¸çåä½æ¯ç±³ï¼è Z æ¹åçåä½æ¯è±å°ºï¼ç±äº 1 è±å°ºç­äº 0.3048 ç±³ï¼åéè¦æå®ç¼©æ¾ç³»æ°ä¸º 0.3048ã
     */

    this.zFactor = 1.0;
    /**
     * @member {string} SuperMap.TerrainCurvatureCalculationParameters.prototype.averageCurvatureName
     * @description ç»ææ°æ®éï¼å¹³åæ²çæ°æ®éçåç§°ã
     */

    this.averageCurvatureName = null;
    /**
     * @member {string} SuperMap.TerrainCurvatureCalculationParameters.prototype.profileCurvatureName
     * @description ç»ææ°æ®éï¼åé¢æ²çæ°æ®éçåç§°ã
     */

    this.profileCurvatureName = "";
    /**
     * @member {string} SuperMap.TerrainCurvatureCalculationParameters.prototype.planCurvatureName
     * @description ç»ææ°æ®éï¼å¹³é¢æ²çæ°æ®éçåç§°ã
     */

    this.planCurvatureName = "";
    /**
     * @member {boolean} [SuperMap.TerrainCurvatureCalculationParameters.prototype.deleteExistResultDataset=false]
     * @description å¦æç¨æ·å½åçç»ææ°æ®éåç§°ä¸å·²æçæ°æ®ééåï¼æ¯å¦å é¤å·²æçæ°æ®éã
     */

    this.deleteExistResultDataset = false;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.TerrainCurvatureCalculationParameters";
  }
  /**
   * @function SuperMap.TerrainCurvatureCalculationParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  TerrainCurvatureCalculationParameters_createClass(TerrainCurvatureCalculationParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.dataset = null;
      me.zFactor = 1.0;
      me.averageCurvatureName = null;
      me.profileCurvatureName = null;
      me.planCurvatureName = null;
      me.deleteExistResultDataset = true;
    }
    /**
     * @function SuperMap.TerrainCurvatureCalculationParameters.toObject
     * @param {Object} derrainCurvatureCalculationParameters - å°å½¢æ²çè®¡ç®åæ°ã
     * @param {Object} tempObj - ç®æ å¯¹è±¡ã
     * @description çæå°å½¢æ²çè®¡ç®å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(derrainCurvatureCalculationParameters, tempObj) {
      for (var name in derrainCurvatureCalculationParameters) {
        if (name !== "dataset") {
          tempObj[name] = derrainCurvatureCalculationParameters[name];
        }
      }
    }
  }]);

  return TerrainCurvatureCalculationParameters;
}();
SuperMap.TerrainCurvatureCalculationParameters = TerrainCurvatureCalculationParameters;
// CONCATENATED MODULE: ./src/common/iServer/TerrainCurvatureCalculationService.js
function TerrainCurvatureCalculationService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { TerrainCurvatureCalculationService_typeof = function _typeof(obj) { return typeof obj; }; } else { TerrainCurvatureCalculationService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return TerrainCurvatureCalculationService_typeof(obj); }

function TerrainCurvatureCalculationService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function TerrainCurvatureCalculationService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function TerrainCurvatureCalculationService_createClass(Constructor, protoProps, staticProps) { if (protoProps) TerrainCurvatureCalculationService_defineProperties(Constructor.prototype, protoProps); if (staticProps) TerrainCurvatureCalculationService_defineProperties(Constructor, staticProps); return Constructor; }

function TerrainCurvatureCalculationService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { TerrainCurvatureCalculationService_get = Reflect.get; } else { TerrainCurvatureCalculationService_get = function _get(target, property, receiver) { var base = TerrainCurvatureCalculationService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return TerrainCurvatureCalculationService_get(target, property, receiver || target); }

function TerrainCurvatureCalculationService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = TerrainCurvatureCalculationService_getPrototypeOf(object); if (object === null) break; } return object; }

function TerrainCurvatureCalculationService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) TerrainCurvatureCalculationService_setPrototypeOf(subClass, superClass); }

function TerrainCurvatureCalculationService_setPrototypeOf(o, p) { TerrainCurvatureCalculationService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return TerrainCurvatureCalculationService_setPrototypeOf(o, p); }

function TerrainCurvatureCalculationService_createSuper(Derived) { var hasNativeReflectConstruct = TerrainCurvatureCalculationService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = TerrainCurvatureCalculationService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = TerrainCurvatureCalculationService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return TerrainCurvatureCalculationService_possibleConstructorReturn(this, result); }; }

function TerrainCurvatureCalculationService_possibleConstructorReturn(self, call) { if (call && (TerrainCurvatureCalculationService_typeof(call) === "object" || typeof call === "function")) { return call; } return TerrainCurvatureCalculationService_assertThisInitialized(self); }

function TerrainCurvatureCalculationService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function TerrainCurvatureCalculationService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function TerrainCurvatureCalculationService_getPrototypeOf(o) { TerrainCurvatureCalculationService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return TerrainCurvatureCalculationService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.TerrainCurvatureCalculationService
 * @category  iServer SpatialAnalyst TerrainCalculation
 * @classdesc å°å½¢æ²çè®¡ç®æå¡ç±»ã
 * @extends {SuperMap.SpatialAnalystBase}
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {string} options.url - æå¡çè®¿é®å°åãå¦ http://localhost:8090/iserver/services/spatialanalyst-changchun/restjsr/spatialanalyst ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @example ä¾å¦ï¼
 * (start code)
 * var myTerrainCurvatureCalculationService = new SuperMap.TerrainCurvatureCalculationService(url);
 * myTerrainCurvatureCalculationService.on({
     *     "processCompleted": processCompleted,
     *     "processFailed": processFailed
     *     }
 * );
 * (end)
 *
 */

var TerrainCurvatureCalculationService = /*#__PURE__*/function (_SpatialAnalystBase) {
  TerrainCurvatureCalculationService_inherits(TerrainCurvatureCalculationService, _SpatialAnalystBase);

  var _super = TerrainCurvatureCalculationService_createSuper(TerrainCurvatureCalculationService);

  function TerrainCurvatureCalculationService(url, options) {
    var _this;

    TerrainCurvatureCalculationService_classCallCheck(this, TerrainCurvatureCalculationService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.TerrainCurvatureCalculationService";
    return _this;
  }
  /**
   *@override
   */


  TerrainCurvatureCalculationService_createClass(TerrainCurvatureCalculationService, [{
    key: "destroy",
    value: function destroy() {
      TerrainCurvatureCalculationService_get(TerrainCurvatureCalculationService_getPrototypeOf(TerrainCurvatureCalculationService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.TerrainCurvatureCalculationService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.TerrainCurvatureCalculationParameters} parameter - å°å½¢æ²çè®¡ç®åæ°ç±»ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(parameter) {
      var me = this;
      var parameterObject = {};

      if (parameter instanceof TerrainCurvatureCalculationParameters) {
        me.url = Util.urlPathAppend(me.url, 'datasets/' + parameter.dataset + '/terraincalculation/curvature');
      }

      TerrainCurvatureCalculationParameters.toObject(parameter, parameterObject);
      var jsonParameters = SuperMap.Util.toJSON(parameterObject);
      me.url = Util.urlAppend(me.url, 'returnContent=true');
      me.request({
        method: "POST",
        data: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return TerrainCurvatureCalculationService;
}(SpatialAnalystBase);
SuperMap.TerrainCurvatureCalculationService = TerrainCurvatureCalculationService;
// CONCATENATED MODULE: ./src/common/iServer/ThemeGridRangeItem.js
function ThemeGridRangeItem_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeGridRangeItem_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeGridRangeItem_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeGridRangeItem_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeGridRangeItem_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.ThemeGridRangeItem
 * @category  iServer Map Theme
 * @classdesc æ æ ¼åæ®µä¸é¢å¾å­é¡¹ç±»ã
 * @description å¨æ æ ¼åæ®µä¸é¢å¾ä¸­ï¼å°æ æ ¼å¼æç§æç§åæ®µæ¨¡å¼è¢«åæå¤ä¸ªèå´æ®µã
 *              æ¬ç±»ç¨æ¥è®¾ç½®æ¯ä¸ªèå´æ®µçåæ®µèµ·å§å¼ãç»æ­¢å¼ãåç§°åé¢è²ç­ãæ¯ä¸ªåæ®µæè¡¨ç¤ºçèå´ä¸º [Start,End)ã
 * @param {Object} options - åæ°ã
 * @param {SuperMap.ServerColor} options.color - æ æ ¼åæ®µä¸é¢å¾ä¸­æ¯ä¸ä¸ªåæ®µä¸é¢å¾å­é¡¹çå¯¹åºçé¢è²ã
 * @param {string} [options.caption] - æ æ ¼åæ®µä¸é¢å¾å­é¡¹çæ é¢ã
 * @param {number} [options.end=0] - æ æ ¼åæ®µä¸é¢å¾å­é¡¹çç»æ­¢å¼ã
 * @param {number} [options.start=0] - æ æ ¼åæ®µä¸é¢å¾å­é¡¹çèµ·å§å¼ã
 * @param {boolean} [options.visible=true] - æ æ ¼åæ®µä¸é¢å¾å­é¡¹æ¯å¦å¯è§ã
 */

var ThemeGridRangeItem = /*#__PURE__*/function () {
  function ThemeGridRangeItem(options) {
    ThemeGridRangeItem_classCallCheck(this, ThemeGridRangeItem);

    /**
     * @member {string} [SuperMap.ThemeGridRangeItem.prototype.caption]
     * @description æ æ ¼åæ®µä¸é¢å¾å­é¡¹çæ é¢ã
     */
    this.caption = null;
    /**
     * @member {SuperMap.ServerColor} SuperMap.ThemeGridRangeItem.prototype.color
     * @description æ æ ¼åæ®µä¸é¢å¾ä¸­æ¯ä¸ä¸ªåæ®µä¸é¢å¾å­é¡¹çå¯¹åºçé¢è²ã
     */

    this.color = new ServerColor();
    /**
     * @member {number} [SuperMap.ThemeGridRangeItem.prototype.end=0]
     * @description æ æ ¼åæ®µä¸é¢å¾å­é¡¹çç»æ­¢å¼ï¼å³è¯¥æ®µä¸é¢å¼èå´çæå¤§å¼ã
     */

    this.end = 0;
    /**
     * @member {number} [SuperMap.ThemeGridRangeItem.prototype.start=0]
     * @description æ æ ¼åæ®µä¸é¢å¾å­é¡¹çèµ·å§å¼ï¼å³è¯¥æ®µä¸é¢å¼èå´çæå°å¼ã
     */

    this.start = 0;
    /**
     * @member {boolean} [SuperMap.ThemeGridRangeItem.prototype.visible=true]
     * @description æ æ ¼åæ®µä¸é¢å¾å­é¡¹æ¯å¦å¯è§ã
     */

    this.visible = true;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ThemeGridRangeItem";
  }
  /**
   * @function SuperMap.ThemeGridRangeItem.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThemeGridRangeItem_createClass(ThemeGridRangeItem, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.caption = null;
      me.end = null;
      me.start = null; //éè¦éªè¯æ¯å¤å­å¨destroyæ¹æ³

      if (me.color) {
        me.color.destroy();
        me.color = null;
      }

      me.visible = null;
    }
    /**
     * @function SuperMap.ThemeGridRangeItem.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     * @returns {Object} å¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      var obj = {};
      obj = Util.copyAttributes(obj, this);

      if (obj.color) {
        if (obj.color.toServerJSONObject) {
          obj.color = obj.color.toServerJSONObject();
        }
      }

      return obj;
    }
    /**
     * @function SuperMap.ThemeGridRangeItem.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·åæ æ ¼åæ®µä¸é¢å¾å­é¡¹ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeGridRangeItem} ThemeGridRangeItem å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      if (!obj) {
        return;
      }

      var res = new ThemeGridRangeItem();
      Util.copy(res, obj);
      res.color = ServerColor.fromJson(obj.color);
      return res;
    }
  }]);

  return ThemeGridRangeItem;
}();
SuperMap.ThemeGridRangeItem = ThemeGridRangeItem;
// CONCATENATED MODULE: ./src/common/iServer/ThemeGridRange.js
function ThemeGridRange_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { ThemeGridRange_typeof = function _typeof(obj) { return typeof obj; }; } else { ThemeGridRange_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return ThemeGridRange_typeof(obj); }

function ThemeGridRange_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeGridRange_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeGridRange_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeGridRange_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeGridRange_defineProperties(Constructor, staticProps); return Constructor; }

function ThemeGridRange_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { ThemeGridRange_get = Reflect.get; } else { ThemeGridRange_get = function _get(target, property, receiver) { var base = ThemeGridRange_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return ThemeGridRange_get(target, property, receiver || target); }

function ThemeGridRange_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = ThemeGridRange_getPrototypeOf(object); if (object === null) break; } return object; }

function ThemeGridRange_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) ThemeGridRange_setPrototypeOf(subClass, superClass); }

function ThemeGridRange_setPrototypeOf(o, p) { ThemeGridRange_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return ThemeGridRange_setPrototypeOf(o, p); }

function ThemeGridRange_createSuper(Derived) { var hasNativeReflectConstruct = ThemeGridRange_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = ThemeGridRange_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = ThemeGridRange_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return ThemeGridRange_possibleConstructorReturn(this, result); }; }

function ThemeGridRange_possibleConstructorReturn(self, call) { if (call && (ThemeGridRange_typeof(call) === "object" || typeof call === "function")) { return call; } return ThemeGridRange_assertThisInitialized(self); }

function ThemeGridRange_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function ThemeGridRange_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ThemeGridRange_getPrototypeOf(o) { ThemeGridRange_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return ThemeGridRange_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.ThemeGridRange
 * @category  iServer Map Theme
 * @classdesc æ æ ¼åæ®µä¸é¢å¾ã
 * @description æ æ ¼åæ®µä¸é¢å¾ï¼æ¯å°ææååæ ¼çå¼æç§æç§åæ®µæ¹å¼åæå¤ä¸ªèå´æ®µï¼å¼å¨åä¸ä¸ªèå´æ®µä¸­çååæ ¼ä½¿ç¨ç¸åçé¢è²è¿è¡æ¾ç¤ºã
 *              æ æ ¼åæ®µä¸é¢å¾ä¸è¬ç¨æ¥åæ è¿ç»­åå¸ç°è±¡çæ°éæç¨åº¦ç¹å¾ãæ¯å¦æå¹´çå¨å½éæ°´éåå¸å¾ï¼å°åæ°è±¡ç«ç¹çè§æµå¼ç»è¿åæä¹åçæçæ æ ¼æ°æ®è¿è¡åæ®µæ¾ç¤ºã
 *              è¯¥ç±»ç±»ä¼¼äºåæ®µä¸é¢å¾ç±»ï¼ä¸åç¹å¨äºåæ®µä¸é¢å¾çæä½å¯¹è±¡æ¯ç¢éæ°æ®ï¼èæ æ ¼åæ®µä¸é¢å¾çæä½å¯¹è±¡æ¯æ æ ¼æ°æ®ã
 * @extends {SuperMap.Theme}
 * @param {Object} options - åæ°ã
 * @param {Array.<SuperMap.ThemeGridRangeItem>} options.items - æ æ ¼åæ®µä¸é¢å¾å­é¡¹æ°ç»ã
 * @param {boolean} [options.reverseColor=false] - æ¯å¦å¯¹æ æ ¼åæ®µä¸é¢å¾ä¸­åæ®µçé¢è²é£æ ¼è¿è¡ååºæ¾ç¤ºã
 * @param {SuperMap.RangeMode} [options.rangeMode=SuperMap.RangeMode.EQUALINTERVAL] - åæ®µä¸é¢å¾çåæ®µæ¨¡å¼ã
 * @param {number} [options.rangeParameter=0] - åæ®µåæ°ã
 * @param {SuperMap.ColorGradientType} [options.colorGradientType=SuperMap.ColorGradientType.YELLOW_RED] - æ¸åé¢è²æä¸¾ç±»ã
 */

var ThemeGridRange = /*#__PURE__*/function (_Theme) {
  ThemeGridRange_inherits(ThemeGridRange, _Theme);

  var _super = ThemeGridRange_createSuper(ThemeGridRange);

  function ThemeGridRange(options) {
    var _this;

    ThemeGridRange_classCallCheck(this, ThemeGridRange);

    _this = _super.call(this, "GRIDRANGE", options);
    /**
     * @member {Array.<SuperMap.ThemeGridRangeItem>} SuperMap.ThemeGridRange.prototype.items
     * @description æ æ ¼åæ®µä¸é¢å¾å­é¡¹æ°ç»ã<br>
     *              å¨æ æ ¼åæ®µä¸é¢å¾ä¸­ï¼å°æ æ ¼å¼æç§æç§åæ®µæ¨¡å¼è¢«åæå¤ä¸ªèå´æ®µã
     *              æ¬ç±»ç¨æ¥è®¾ç½®æ¯ä¸ªæ æ ¼èå´æ®µçåæ®µèµ·å§å¼ãç»æ­¢å¼ãåç§°åé¢è²ç­ãæ¯ä¸ªåæ®µæè¡¨ç¤ºçèå´ä¸º [Start,End)ã
     */

    _this.items = null;
    /**
     * @member {SuperMap.RangeMode} [SuperMap.ThemeGridRange.prototype.rangeMode=SuperMap.RangeMode.EQUALINTERVAL]
     * @description åæ®µä¸é¢å¾çåæ®µæ¨¡å¼ã<br>
     *              å¨æ æ ¼åæ®µä¸é¢å¾ä¸­ï¼ä½ä¸ºä¸é¢åéçå­æ®µæè¡¨è¾¾å¼çå¼æç§æç§åæ®µæ¹å¼è¢«åæå¤ä¸ªèå´æ®µã
     *              ç®å SuperMap æä¾çåæ®µæ¹å¼åæ¬ï¼ç­è·ç¦»åæ®µæ³ãå¹³æ¹æ ¹åæ®µæ³ãæ åå·®åæ®µæ³ãå¯¹æ°åæ®µæ³ãç­è®¡æ°åæ®µæ³åèªå®ä¹è·ç¦»æ³ï¼
     *              æ¾ç¶è¿äºåæ®µæ¹æ³æ ¹æ®ä¸å®çè·ç¦»è¿è¡åæ®µï¼å èèå´åæ®µä¸é¢å¾æåºäºçä¸é¢åéå¿é¡»ä¸ºæ°å¼åã
     */

    _this.rangeMode = RangeMode.EQUALINTERVAL;
    /**
     * @member {number} [SuperMap.ThemeGridRange.prototype.rangeParameter=0]
     * @description åæ®µåæ°ã<br>
     *              å½åæ®µæ¨¡å¼ä¸ºç­è·ç¦»åæ®µæ³ï¼å¹³æ¹æ ¹åæ®µï¼å¯¹æ°åæ®µæ³ï¼è®¡æ°åæ®µæ³å¶ä¸­ä¸ç§æ¨¡å¼æ¶ï¼è¯¥åæ°ç¨äºè®¾ç½®åæ®µä¸ªæ°ï¼å¿è®¾ï¼å½åæ®µæ¨¡å¼ä¸ºæ åå·®åæ®µæ³æ¶ï¼
     *              è¯¥åæ°ä¸èµ·ä½ç¨ï¼å½åæ®µæ¨¡å¼ä¸ºèªå®ä¹è·ç¦»æ¶ï¼è¯¥åæ°ç¨äºè®¾ç½®èªå®ä¹è·ç¦»ã
     */

    _this.rangeParameter = 0;
    /**
     * @member {SuperMap.ColorGradientType} [SuperMap.ThemeGridRange.prototype.colorGradientType=SuperMap.ColorGradientType.YELLOW_RED]
     * @description æ¸åé¢è²æä¸¾ç±»ã
     *
     */

    _this.colorGradientType = ColorGradientType.YELLOW_RED;
    /**
     * @member {boolean} SuperMap.ThemeGridRange.prototype.reverseColor
     * @description æ¯å¦å¯¹æ æ ¼åæ®µä¸é¢å¾ä¸­åæ®µçé¢è²é£æ ¼è¿è¡ååºæ¾ç¤ºã
     */

    _this.reverseColor = false;

    if (options) {
      Util.extend(ThemeGridRange_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.ThemeGridRange";
    return _this;
  }
  /**
   * @function SuperMap.ThemeGridRange.prototype.destroy
   * @override
   */


  ThemeGridRange_createClass(ThemeGridRange, [{
    key: "destroy",
    value: function destroy() {
      ThemeGridRange_get(ThemeGridRange_getPrototypeOf(ThemeGridRange.prototype), "destroy", this).call(this);

      var me = this;

      if (me.items) {
        if (me.items.length > 0) {
          for (var item in me.items) {
            me.items[item].destroy();
            me.items[item] = null;
          }
        }

        me.items = null;
      }

      me.reverseColor = null;
      me.rangeMode = null;
      me.rangeParameter = null;
      me.colorGradientType = null;
    }
    /**
     * @function SuperMap.ThemeGridRange.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·åæ æ ¼åæ®µä¸é¢å¾ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeGridRange} ThemeGridRange å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      if (!obj) {
        return;
      }

      var res = new ThemeGridRange();
      Util.copy(res, obj);
      var itemsR = obj.items;
      var len = itemsR ? itemsR.length : 0;
      res.items = [];

      for (var i = 0; i < len; i++) {
        res.items.push(ThemeGridRangeItem.fromObj(itemsR[i]));
      }

      return res;
    }
  }]);

  return ThemeGridRange;
}(Theme);
SuperMap.ThemeGridRange = ThemeGridRange;
// CONCATENATED MODULE: ./src/common/iServer/ThemeGridUniqueItem.js
function ThemeGridUniqueItem_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeGridUniqueItem_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeGridUniqueItem_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeGridUniqueItem_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeGridUniqueItem_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.ThemeGridUniqueItem
 * @category  iServer Map Theme
 * @classdesc æ æ ¼åå¼ä¸é¢å¾å­é¡¹ç±»ã
 *            æ æ ¼åå¼ä¸é¢å¾æ¯å°å¼ç¸åçååæ ¼å½ä¸ºä¸ç±»ï¼æ¯ä¸ç±»æ¯ä¸ä¸ªä¸é¢å¾å­é¡¹ã
 * @param {Object} options - åæ°ã
 * @param {string} [options.caption] - æ æ ¼åå¼ä¸é¢å¾å­é¡¹çåç§°ã
 * @param {SuperMap.ServerColor} [options.color] - æ æ ¼åå¼ä¸é¢å¾å­é¡¹çæ¾ç¤ºé¢è²ã
 * @param {number} options.unique - æ æ ¼åå¼ä¸é¢å¾å­é¡¹çä¸é¢å¼ï¼å³ååæ ¼çå¼ï¼å¼ç¸åçååæ ¼ä½äºä¸ä¸ªå­é¡¹åã
 * @param {boolean} [options.visible=true] - æ æ ¼åå¼ä¸é¢å¾å­é¡¹æ¯å¦å¯è§ã
 */

var ThemeGridUniqueItem = /*#__PURE__*/function () {
  function ThemeGridUniqueItem(options) {
    ThemeGridUniqueItem_classCallCheck(this, ThemeGridUniqueItem);

    /**
     * @member {string} [SuperMap.ThemeGridUniqueItem.prototype.caption]
     * @description æ æ ¼åå¼ä¸é¢å¾å­é¡¹çåç§°ã
     */
    this.caption = null;
    /**
     * @member {SuperMap.ServerColor} [SuperMap.ThemeGridUniqueItem.prototype.color]
     * @description æ æ ¼åå¼ä¸é¢å¾å­é¡¹çæ¾ç¤ºé¢è²ã
     */

    this.color = new ServerColor();
    /**
     * @member {number} SuperMap.ThemeGridUniqueItem.prototype.unique
     * @description æ æ ¼åå¼ä¸é¢å¾å­é¡¹çä¸é¢å¼ï¼å³ååæ ¼çå¼ï¼å¼ç¸åçååæ ¼ä½äºä¸ä¸ªå­é¡¹åã
     */

    this.unique = null;
    /**
     * @member {boolean} [SuperMap.ThemeGridUniqueItem.prototype.visible=true]
     * @description æ æ ¼åå¼ä¸é¢å¾å­é¡¹æ¯å¦å¯è§ã
     */

    this.visible = true;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ThemeGridUniqueItem";
  }
  /**
   * @function SuperMap.ThemeGridUniqueItem.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThemeGridUniqueItem_createClass(ThemeGridUniqueItem, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.caption = null;
      me.unique = null;

      if (me.color) {
        me.color.destroy();
        me.color = null;
      }

      me.visible = null;
    }
    /**
     * @function SuperMap.ThemeGridUniqueItem.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     * @returns {Object} å¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      var obj = {};
      obj = Util.copyAttributes(obj, this);

      if (obj.color) {
        if (obj.color.toServerJSONObject) {
          obj.color = obj.color.toServerJSONObject();
        }
      }

      return obj;
    }
    /**
     * @function SuperMap.ThemeGridUniqueItem.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·åæ æ ¼åå¼ä¸é¢å¾å­é¡¹ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeGridUniqueItem} ThemeGridUniqueItem å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      var res = new ThemeGridUniqueItem();
      Util.copy(res, obj);
      res.color = ServerColor.fromJson(obj.color);
      return res;
    }
  }]);

  return ThemeGridUniqueItem;
}();
SuperMap.ThemeGridUniqueItem = ThemeGridUniqueItem;
// CONCATENATED MODULE: ./src/common/iServer/ThemeGridUnique.js
function ThemeGridUnique_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { ThemeGridUnique_typeof = function _typeof(obj) { return typeof obj; }; } else { ThemeGridUnique_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return ThemeGridUnique_typeof(obj); }

function ThemeGridUnique_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeGridUnique_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeGridUnique_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeGridUnique_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeGridUnique_defineProperties(Constructor, staticProps); return Constructor; }

function ThemeGridUnique_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { ThemeGridUnique_get = Reflect.get; } else { ThemeGridUnique_get = function _get(target, property, receiver) { var base = ThemeGridUnique_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return ThemeGridUnique_get(target, property, receiver || target); }

function ThemeGridUnique_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = ThemeGridUnique_getPrototypeOf(object); if (object === null) break; } return object; }

function ThemeGridUnique_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) ThemeGridUnique_setPrototypeOf(subClass, superClass); }

function ThemeGridUnique_setPrototypeOf(o, p) { ThemeGridUnique_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return ThemeGridUnique_setPrototypeOf(o, p); }

function ThemeGridUnique_createSuper(Derived) { var hasNativeReflectConstruct = ThemeGridUnique_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = ThemeGridUnique_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = ThemeGridUnique_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return ThemeGridUnique_possibleConstructorReturn(this, result); }; }

function ThemeGridUnique_possibleConstructorReturn(self, call) { if (call && (ThemeGridUnique_typeof(call) === "object" || typeof call === "function")) { return call; } return ThemeGridUnique_assertThisInitialized(self); }

function ThemeGridUnique_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function ThemeGridUnique_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ThemeGridUnique_getPrototypeOf(o) { ThemeGridUnique_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return ThemeGridUnique_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.ThemeGridUnique
 * @category  iServer Map Theme
 * @classdesc æ æ ¼åå¼ä¸é¢å¾ç±»ã
 * @description æ æ ¼åå¼ä¸é¢å¾ï¼æ¯å°ååæ ¼å¼ç¸åçå½ä¸ºä¸ç±»ï¼ä¸ºæ¯ä¸ç±»è®¾å®ä¸ç§é¢è²ï¼ä»èç¨æ¥åºåä¸åçç±»å«ã<br>
 *              æ æ ¼åå¼ä¸é¢å¾éç¨äºç¦»æ£æ æ ¼æ°æ®åé¨åè¿ç»­æ æ ¼æ°æ®ï¼å¯¹äºååæ ¼å¼åä¸ç¸åçé£äºè¿ç»­æ æ ¼æ°æ®ï¼ä½¿ç¨æ æ ¼åå¼ä¸é¢å¾ä¸å·æä»»ä½æä¹ã
 * @extends {SuperMap.Theme}
 * @param {Object} options - åæ°ã
 * @param {Array.<SuperMap.ThemeGridUniqueItem>} options.items - æ æ ¼åå¼ä¸é¢å¾å­é¡¹æ°ç»ã
 * @param {SuperMap.ServerColor} [options.defaultcolor] - æ æ ¼åå¼ä¸é¢å¾çé»è®¤é¢è²ã
 */

var ThemeGridUnique = /*#__PURE__*/function (_Theme) {
  ThemeGridUnique_inherits(ThemeGridUnique, _Theme);

  var _super = ThemeGridUnique_createSuper(ThemeGridUnique);

  function ThemeGridUnique(options) {
    var _this;

    ThemeGridUnique_classCallCheck(this, ThemeGridUnique);

    _this = _super.call(this, "GRIDUNIQUE", options);
    /**
     * @member {SuperMap.ServerColor} SuperMap.ThemeGridUnique.prototype.defaultcolor
     * @description æ æ ¼åå¼ä¸é¢å¾çé»è®¤é¢è²ã
     *              å¯¹äºé£äºæªå¨æ ¼ç½åå¼ä¸é¢å¾å­é¡¹ä¹åçè¦ç´ ä½¿ç¨è¯¥é¢è²æ¾ç¤ºã
     */

    _this.defaultcolor = new ServerColor();
    /**
     * @member {Array.<SuperMap.ThemeGridUniqueItem>} SuperMap.ThemeGridUnique.prototype.items
     * @description æ æ ¼åå¼ä¸é¢å¾å­é¡¹æ°ç»ã
     *              æ æ ¼åå¼ä¸é¢å¾å°å¼ç¸åçååæ ¼å½ä¸ºä¸ç±»ï¼æ¯ä¸ç±»æ¯ä¸ä¸ªä¸é¢å¾å­é¡¹ã
     */

    _this.items = null;

    if (options) {
      Util.extend(ThemeGridUnique_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.ThemeGridUnique";
    return _this;
  }
  /**
   * @function SuperMap.ThemeGridUnique.prototype.destroy
   * @override
   */


  ThemeGridUnique_createClass(ThemeGridUnique, [{
    key: "destroy",
    value: function destroy() {
      ThemeGridUnique_get(ThemeGridUnique_getPrototypeOf(ThemeGridUnique.prototype), "destroy", this).call(this);

      var me = this;

      if (me.items) {
        if (me.items.length > 0) {
          for (var item in me.items) {
            me.items[item].destroy();
            me.items[item] = null;
          }
        }

        me.items = null;
      }

      if (me.defaultcolor) {
        me.defaultcolor.destroy();
        me.defaultcolor = null;
      }
    }
    /**
     * @function SuperMap.ThemeGridUnique.prototype.toServerJSONObject
     * @description è½¬æ¢æå¯¹åºç JSON æ ¼å¼å¯¹è±¡ã
     * @returns {Object} å¯¹åºç JSON æ ¼å¼å¯¹è±¡
     */

  }, {
    key: "toServerJSONObject",
    value: function toServerJSONObject() {
      var obj = {};
      obj = Util.copyAttributes(obj, this);

      if (obj.defaultcolor) {
        if (obj.defaultcolor.toServerJSONObject) {
          obj.defaultcolor = obj.defaultcolor.toServerJSONObject();
        }
      }

      if (obj.items) {
        var items = [],
            len = obj.items.length;

        for (var i = 0; i < len; i++) {
          items.push(obj.items[i].toServerJSONObject());
        }

        obj.items = items;
      }

      return obj;
    }
    /**
     * @function SuperMap.ThemeGridUnique.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·åæ æ ¼åå¼ä¸é¢å¾ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡
     * @returns {SuperMap.ThemeGridUnique} ThemeGridUnique å¯¹è±¡
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      var res = new ThemeGridUnique();
      var uItems = obj.items;
      var len = uItems ? uItems.length : 0;
      Util.extend(res, obj);
      res.items = [];
      res.defaultcolor = ServerColor.fromJson(obj.defaultcolor);

      for (var i = 0; i < len; i++) {
        res.items.push(ThemeGridUniqueItem.fromObj(uItems[i]));
      }

      return res;
    }
  }]);

  return ThemeGridUnique;
}(Theme);
SuperMap.ThemeGridUnique = ThemeGridUnique;
// CONCATENATED MODULE: ./src/common/iServer/ThemeLabelUniqueItem.js
function ThemeLabelUniqueItem_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeLabelUniqueItem_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeLabelUniqueItem_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeLabelUniqueItem_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeLabelUniqueItem_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.ThemeLabelUniqueItem
 * @category  iServer Map Theme
 * @classdesc åå¼æ ç­¾ä¸é¢å¾çå­é¡¹ã
 * @description æ ç­¾ä¸é¢å¾ç¨ä¸é¢å¼å¯¹ç¹ãçº¿ãé¢ç­å¯¹è±¡åæ æ³¨ï¼å¼å¾æ³¨æçæ¯ï¼åå¼æ ç­¾ä¸é¢å¾åè®¸ç¨æ·éè¿ uniqueExpression
 *              å­æ®µæå®ç¨äºåå¼çå­æ®µï¼åä¸å¼çæ ç­¾å·æç¸åçæ¾ç¤ºé£æ ¼ï¼å¶ä¸­æ¯ä¸ä¸ªå¼å°±æ¯ä¸ä¸ªä¸é¢å¾å­é¡¹ï¼
 *              æ¯ä¸ä¸ªå­é¡¹é½å·æå¶åç§°ãé£æ ¼ãæå®çåå¼ãX æ¹ååç§»éå Y æ¹ååç§»éã
 * @param {Object} options - åæ°ã
 * @param {string} options.unique - åå¼ä¸é¢å¾å­é¡¹çå¼ï¼å¯ä»¥ä¸ºæ°å­ãå­ç¬¦ä¸²ç­ã
 * @param {string} [options.caption] - ä¸é¢å¾å­é¡¹çåç§°ã
 * @param {number} [options.offsetX=0] - æ ç­¾å¨ X æ¹ååç§»éã
 * @param {number} [options.offsetY=0] - æ ç­¾å¨ Y æ¹ååç§»éã
 * @param {boolean} [options.visible=true] - æ ç­¾ä¸é¢å¾å­é¡¹æ¯å¦å¯è§ã
 * @param {SuperMap.ServerTextStyle} [options.style] - æ ç­¾ä¸é¢å¾å­é¡¹ææ¬çæ¾ç¤ºé£æ ¼ã
 */

var ThemeLabelUniqueItem = /*#__PURE__*/function () {
  function ThemeLabelUniqueItem(options) {
    ThemeLabelUniqueItem_classCallCheck(this, ThemeLabelUniqueItem);

    /**
     * @member {string} [SuperMap.ThemeLabelUniqueItem.prototype.caption]
     * @description æ ç­¾ä¸é¢å­é¡¹çæ é¢ã
     */
    this.caption = null;
    /**
     * @member {string} SuperMap.ThemeLabelUniqueItem.prototype.unique
     * @description åå¼ä¸é¢å¾å­é¡¹çå¼ï¼å¯ä»¥ä¸ºæ°å­ãå­ç¬¦ä¸²ç­ã
     */

    this.unique = null;
    /**
     * @member {number} [SuperMap.ThemeLabelUniqueItem.prototype.offsetX=0]
     * @description æ ç­¾å¨ X æ¹ååç§»éã
     */

    this.offsetX = 0;
    /**
     * @member {number} [SuperMap.ThemeLabelUniqueItem.prototype.offsetY=0]
     * @description æ ç­¾å¨ Y æ¹ååç§»éã
     */

    this.offsetY = 0;
    /**
     * @member {boolean} [SuperMap.ThemeLabelUniqueItem.prototype.visible=true]
     * @description æ ç­¾ä¸é¢å¾å­é¡¹æ¯å¦å¯è§ãå¦ææ ç­¾ä¸é¢å¾å­é¡¹å¯è§ï¼åä¸º trueï¼å¦åä¸º falseã
     */

    this.visible = true;
    /**
     * @member {SuperMap.ServerTextStyle} SuperMap.ThemeLabelUniqueItem.prototype.style
     * @description æ ç­¾ä¸é¢å¾å­é¡¹ææ¬çæ¾ç¤ºé£æ ¼ãåç§é£æ ¼çä¼åçº§ä»é«å°ä½ä¸ºï¼<br>
     *              uniformMixedStyleï¼æ ç­¾ææ¬çå¤åé£æ ¼ï¼ï¼SuperMap.ThemeLabelUniqueItem.styleï¼åå¼å­é¡¹çææ¬é£æ ¼ï¼ï¼uniformStyleï¼ç»ä¸ææ¬é£æ ¼ï¼ã
     */

    this.style = new ServerTextStyle();

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ThemeLabelUniqueItem";
  }
  /**
   * @function SuperMap.ThemeLabelUniqueItem.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThemeLabelUniqueItem_createClass(ThemeLabelUniqueItem, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.unique = null;
      me.caption = null;
      me.offsetX = null;
      me.offsetY = null;

      if (me.style) {
        me.style.destroy();
        me.style = null;
      }

      me.visible = null;
    }
    /**
     * @function SuperMap.ThemeLabelUniqueItem.fromObj
     * @description ä»ä¼ å¥å¯¹è±¡è·ååå¼æ ç­¾ä¸é¢å¾çå­é¡¹ç±»ã
     * @param {Object} obj - ä¼ å¥å¯¹è±¡ã
     * @returns {SuperMap.ThemeLabelUniqueItem} ThemeLabelUniqueItem å¯¹è±¡ã
     */

  }], [{
    key: "fromObj",
    value: function fromObj(obj) {
      if (!obj) {
        return;
      }

      var t = new ThemeLabelUniqueItem();
      Util.copy(t, obj);
      return t;
    }
  }]);

  return ThemeLabelUniqueItem;
}();
SuperMap.ThemeLabelUniqueItem = ThemeLabelUniqueItem;
// CONCATENATED MODULE: ./src/common/iServer/ThemeParameters.js
function ThemeParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/














/**
 * @class SuperMap.ThemeParameters
 * @category  iServer Map Theme
 * @classdesc ä¸é¢å¾åæ°ç±»ã
 *            è¯¥ç±»å­å¨äºå¶ä½ä¸é¢æéçåæ°ï¼åæ¬æ°æ®æºãæ°æ®éåç§°åä¸é¢å¾å¯¹è±¡ã
 * @param {Object} options - åæ°ã
 * @param {Array.<string>} options.datasetNames - è¦å¶ä½ä¸é¢å¾çæ°æ®éæ°ç»ã
 * @param {Array.<string>} options.dataSourceNames - è¦å¶ä½ä¸é¢å¾çæ°æ®éæå¨çæ°æ®æºæ°ç»ã
 * @param {Array.<SuperMap.JoinItem>} [options.joinItems] - ä¸é¢å¾å¤é¨è¡¨çè¿æ¥ä¿¡æ¯ JoinItem æ°ç»ã
 * @param {Array.<SuperMap.Theme>} options.themes - ä¸é¢å¾å¯¹è±¡åè¡¨ã
 * @param {Array.<string>} [options.displayFilters] - ä¸é¢å¾å±æ§è¿æ»¤æ¡ä»¶ã
 * @param {Array.<string>} [options.displayOrderBys] - ä¸é¢å¾å¯¹è±¡çæç¬¦å·å å æ¬¡åºæåºå­æ®µã
 * @param {Object} [options.fieldValuesDisplayFilter] - å¾å±è¦ç´ çæ¾ç¤ºåéèçè¿æ»¤å±æ§ï¼å¶å¸¦æä¸ä¸ªå±æ§ï¼åå«æ¯:valuesãfieldNameãfieldValuesDisplayModeã
 */

var ThemeParameters = /*#__PURE__*/function () {
  function ThemeParameters(options) {
    ThemeParameters_classCallCheck(this, ThemeParameters);

    /**
     * @member {Array.<string>} SuperMap.ThemeParameters.prototype.datasetNames
     * @description è¦å¶ä½ä¸é¢å¾çæ°æ®éæ°ç»ã
     */
    this.datasetNames = null;
    /**
     * @member {Array.<string>} SuperMap.ThemeParameters.prototype.dataSourceNames
     * @description è¦å¶ä½ä¸é¢å¾çæ°æ®éæå¨çæ°æ®æºæ°ç»ã
     */

    this.dataSourceNames = null;
    /**
     * @member {Array.<SuperMap.JoinItem>} [SuperMap.ThemeParameters.prototype.joinItems]
     * @description è®¾ç½®ä¸å¤é¨è¡¨çè¿æ¥ä¿¡æ¯ JoinItem æ°ç»ã
     *               ä½¿ç¨æ­¤å±æ§å¯ä»¥å¶ä½ä¸å¤é¨è¡¨è¿æ¥çä¸é¢å¾ã
     */

    this.joinItems = null;
    /**
     * @member {Array.<SuperMap.Theme>} SuperMap.ThemeParameters.prototype.themes
     * @description ä¸é¢å¾å¯¹è±¡åè¡¨ã
     *              è¯¥åæ°ä¸ºå®ä¾åçåç±»ä¸é¢å¾å¯¹è±¡çéåã
     */

    this.themes = null;
    /**
     * @member {Array.<string>} [SuperMap.ThemeParameters.prototype.displayFilters]
     * @description ä¸é¢å¾å±æ§è¿æ»¤æ¡ä»¶ã
     */

    this.displayFilters = null;
    /**
     * @member {Array.<string>}  [SuperMap.ThemeParameters.prototype.displayOrderBys]
     * @description ä¸é¢å¾å¯¹è±¡çæç¬¦å·å å æ¬¡åºæåºå­æ®µã
     */

    this.displayOrderBys = null;
    /**
     * @member {Object} [SuperMap.ThemeParameters.prototype.fieldValuesDisplayFilter]
     * @property {Array.<number>} values - éè¦è¿æ»¤çå¼ã
     * @property {string} fieldName - è¦è¿æ»¤çå­æ®µåç§°åªæ¯ææ°å­ç±»åçå­æ®µã
     * @property {string} fieldValuesDisplayMode - ç®åä¸º DISPLAY/DISABLEãå½ä¸º DISPLAY æ¶ï¼è¡¨ç¤ºåªæ¾ç¤ºä»¥ä¸è®¾ç½®çç¸åºå±æ§å¼çè¦ç´ ï¼å¦åè¡¨ç¤ºä¸æ¾ç¤ºä»¥ä¸è®¾ç½®çç¸åºå±æ§å¼çè¦ç´ ã
     */

    this.fieldValuesDisplayFilter = null;

    if (options) {
      Util.extend(this, options);
    }

    this.CLASS_NAME = "SuperMap.ThemeParameters";
  }
  /**
   * @function SuperMap.ThemeParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  ThemeParameters_createClass(ThemeParameters, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.datasetNames = null;
      me.dataSourceNames = null;

      if (me.joinItems) {
        for (var i = 0, joinItems = me.joinItems, len = joinItems.length; i < len; i++) {
          joinItems[i].destroy();
        }

        me.joinItems = null;
      }

      if (me.themes) {
        for (var _i = 0, themes = me.themes, _len = themes.length; _i < _len; _i++) {
          themes[_i].destroy();
        }

        me.themes = null;
      }
    }
  }]);

  return ThemeParameters;
}();
SuperMap.ThemeParameters = ThemeParameters;
// CONCATENATED MODULE: ./src/common/iServer/ThemeService.js
function ThemeService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { ThemeService_typeof = function _typeof(obj) { return typeof obj; }; } else { ThemeService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return ThemeService_typeof(obj); }

function ThemeService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeService_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeService_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeService_defineProperties(Constructor, staticProps); return Constructor; }

function ThemeService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { ThemeService_get = Reflect.get; } else { ThemeService_get = function _get(target, property, receiver) { var base = ThemeService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return ThemeService_get(target, property, receiver || target); }

function ThemeService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = ThemeService_getPrototypeOf(object); if (object === null) break; } return object; }

function ThemeService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) ThemeService_setPrototypeOf(subClass, superClass); }

function ThemeService_setPrototypeOf(o, p) { ThemeService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return ThemeService_setPrototypeOf(o, p); }

function ThemeService_createSuper(Derived) { var hasNativeReflectConstruct = ThemeService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = ThemeService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = ThemeService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return ThemeService_possibleConstructorReturn(this, result); }; }

function ThemeService_possibleConstructorReturn(self, call) { if (call && (ThemeService_typeof(call) === "object" || typeof call === "function")) { return call; } return ThemeService_assertThisInitialized(self); }

function ThemeService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function ThemeService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ThemeService_getPrototypeOf(o) { ThemeService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return ThemeService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.ThemeService
 * @category  iServer Map Theme
 * @classdesc ä¸é¢å¾æå¡ç±»ã
 * @extends {SuperMap.CommonServiceBase}
 * @example
 * var myThemeService = new SuperMap.ThemeService(url, {
 *     eventListeners: {
 *           "processCompleted": themeCompleted,
 *           "processFailed": themeFailed
 *           }
 * });
 * @param {string} url - æå¡çè®¿é®å°åãå¦ï¼http://localhost:8090/iserver/services/map-world/rest/maps/World+Map ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var ThemeService_ThemeService = /*#__PURE__*/function (_CommonServiceBase) {
  ThemeService_inherits(ThemeService, _CommonServiceBase);

  var _super = ThemeService_createSuper(ThemeService);

  function ThemeService(url, options) {
    var _this;

    ThemeService_classCallCheck(this, ThemeService);

    _this = _super.call(this, url, options);

    if (options) {
      SuperMap.Util.extend(ThemeService_assertThisInitialized(_this), options);
    }

    _this.url = Util.urlPathAppend(_this.url, 'tempLayersSet');
    _this.CLASS_NAME = 'SuperMap.ThemeService';
    return _this;
  }
  /**
   * @override
   */


  ThemeService_createClass(ThemeService, [{
    key: "destroy",
    value: function destroy() {
      ThemeService_get(ThemeService_getPrototypeOf(ThemeService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.ThemeService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çä¸é¢å¾åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.ThemeParameters} params - ä¸é¢å¾åæ°ç±»ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof ThemeParameters)) {
        return;
      }

      var me = this,
          jsonParameters = null;
      jsonParameters = me.getJsonParameters(params);
      me.request({
        method: "POST",
        data: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.ThemeService.prototype.getJsonParameters
     * @description å°ä¸é¢å¾åæ°åæ°è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @param {SuperMap.ThemeParameters} parameter - ä¸é¢å¾åæ°ç±»ã
     * @returns {Object} è½¬ååçJSONå­ç¬¦ä¸²ã
     */

  }, {
    key: "getJsonParameters",
    value: function getJsonParameters(parameter) {
      var jsonParameters = "",
          themeObj = null,
          filters = null,
          orderBys = null,
          fieldValuesDisplayFilter;
      jsonParameters += "[{'type': 'UGC','subLayers': {'layers': [";

      for (var i = 0; i < parameter.themes.length; i++) {
        themeObj = parameter.themes[i];
        var jsonTheme = Util.toJSON(themeObj);
        jsonTheme = jsonTheme.slice(0, -1);
        jsonParameters += "{'theme': " + jsonTheme + "},'type': 'UGC','ugcLayerType': 'THEME',";
        filters = parameter.displayFilters;

        if (filters && filters.length > 0) {
          if (filters.length === 1) {
            jsonParameters += "'displayFilter':\"" + filters[0] + "\",";
          } else {
            jsonParameters += "'displayFilter':\"" + filters[i] + "\",";
          }
        }

        orderBys = parameter.displayOrderBy;

        if (orderBys && orderBys.length > 0) {
          if (orderBys.length === 1) {
            jsonParameters += "'displayOrderBy':'" + orderBys[0] + "',";
          } else {
            jsonParameters += "'displayOrderBy':'" + orderBys[i] + "',";
          }
        }

        fieldValuesDisplayFilter = parameter.fieldValuesDisplayFilter;

        if (fieldValuesDisplayFilter) {
          jsonParameters += "'fieldValuesDisplayFilter':" + Util.toJSON(fieldValuesDisplayFilter) + ",";
        }

        if (parameter.joinItems && parameter.joinItems.length > 0 && parameter.joinItems[i]) {
          jsonParameters += "'joinItems':[" + Util.toJSON(parameter.joinItems[i]) + "],";
        }

        if (parameter.datasetNames && parameter.dataSourceNames) {
          var datasetID = parameter.datasetNames[i] ? i : parameter.datasetNames.length - 1;
          var dataSourceID = parameter.dataSourceNames[i] ? i : parameter.dataSourceNames.length - 1;
          jsonParameters += "'datasetInfo': {'name': '" + parameter.datasetNames[datasetID] + "','dataSourceName': '" + parameter.dataSourceNames[dataSourceID] + "'}},";
        } else {
          jsonParameters += "},";
        }
      } //å»é¤å¤ä½çéå·


      if (parameter.themes && parameter.themes.length > 0) {
        jsonParameters = jsonParameters.substring(0, jsonParameters.length - 1);
      }

      jsonParameters += "]},";
      var urlArray = this.url.split("/");
      var jsonMapName = urlArray[urlArray.length - 2];
      jsonParameters += "'name': '" + jsonMapName + "'}]";
      return jsonParameters;
    }
  }]);

  return ThemeService;
}(CommonServiceBase);
SuperMap.ThemeService = ThemeService_ThemeService;
// CONCATENATED MODULE: ./src/common/iServer/ThiessenAnalystService.js
function ThiessenAnalystService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { ThiessenAnalystService_typeof = function _typeof(obj) { return typeof obj; }; } else { ThiessenAnalystService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return ThiessenAnalystService_typeof(obj); }

function ThiessenAnalystService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThiessenAnalystService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThiessenAnalystService_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThiessenAnalystService_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThiessenAnalystService_defineProperties(Constructor, staticProps); return Constructor; }

function ThiessenAnalystService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { ThiessenAnalystService_get = Reflect.get; } else { ThiessenAnalystService_get = function _get(target, property, receiver) { var base = ThiessenAnalystService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return ThiessenAnalystService_get(target, property, receiver || target); }

function ThiessenAnalystService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = ThiessenAnalystService_getPrototypeOf(object); if (object === null) break; } return object; }

function ThiessenAnalystService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) ThiessenAnalystService_setPrototypeOf(subClass, superClass); }

function ThiessenAnalystService_setPrototypeOf(o, p) { ThiessenAnalystService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return ThiessenAnalystService_setPrototypeOf(o, p); }

function ThiessenAnalystService_createSuper(Derived) { var hasNativeReflectConstruct = ThiessenAnalystService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = ThiessenAnalystService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = ThiessenAnalystService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return ThiessenAnalystService_possibleConstructorReturn(this, result); }; }

function ThiessenAnalystService_possibleConstructorReturn(self, call) { if (call && (ThiessenAnalystService_typeof(call) === "object" || typeof call === "function")) { return call; } return ThiessenAnalystService_assertThisInitialized(self); }

function ThiessenAnalystService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function ThiessenAnalystService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ThiessenAnalystService_getPrototypeOf(o) { ThiessenAnalystService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return ThiessenAnalystService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.ThiessenAnalystService
 * @category  iServer SpatialAnalyst ThiessenPolygonAnalyst
 * @classdesc
 * æ³°æ£®å¤è¾¹å½¢åææå¡ç±»
 * è¯¥ç±»è´è´£å°å®¢æ·è®¾ç½®çæ³°æ£®å¤è¾¹å½¢åæåæ°ä¼ éç»æå¡ç«¯ï¼å¹¶æ¥æ¶æå¡ç«¯è¿åçåæç»ææ°æ®ã
 * æ³°æ£®å¤è¾¹å½¢åæç»æéè¿è¯¥ç±»æ¯æçäºä»¶ççå¬å½æ°åæ°è·å
 * æ³°æ£®å¤è¾¹å½¢åæçåæ°æ¯æä¸¤ç§ï¼å½åæ°ä¸º {SuperMap.DatasetThiessenAnalystParameters} ç±»å
 * æ¶ï¼æ§è¡æ°æ®éæ³°æ£®å¤è¾¹å½¢åæï¼å½åæ°ä¸º {SuperMap.GeometryThiessenAnalystParameters} ç±»åæ¶ï¼
 * æ§è¡å ä½å¯¹è±¡æ³°æ£®å¤è¾¹å½¢åæã
 * @param url - {string} æå¡çè®¿é®å°åã
 * å¦ http://localhost:8090/iserver/services/spatialanalyst-changchun/restjsr/spatialanalystã
 * @param {Object} options - åæ°ã</br>
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @extends {SuperMap.SpatialAnalystBase}
 * @example ä¾å¦ï¼
 * (start code)
 * var myThiessenAnalystService = new SuperMap.ThiessenAnalystService(url, {
     *     eventListeners: {
     *           "processCompleted": bufferCompleted,
     *           "processFailed": bufferFailed
     *           }
     *    });
 * (end)
 *
 */

var ThiessenAnalystService = /*#__PURE__*/function (_SpatialAnalystBase) {
  ThiessenAnalystService_inherits(ThiessenAnalystService, _SpatialAnalystBase);

  var _super = ThiessenAnalystService_createSuper(ThiessenAnalystService);

  function ThiessenAnalystService(url, options) {
    var _this;

    ThiessenAnalystService_classCallCheck(this, ThiessenAnalystService);

    _this = _super.call(this, url, options);
    /**
     * @member {string} SuperMap.ThiessenAnalystService.prototype.mode
     * @description ç¼å²åºåæç±»å
     */

    _this.mode = null;

    if (options) {
      Util.extend(ThiessenAnalystService_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.ThiessenAnalystService";
    return _this;
  }
  /**
   * @override
   */


  ThiessenAnalystService_createClass(ThiessenAnalystService, [{
    key: "destroy",
    value: function destroy() {
      ThiessenAnalystService_get(ThiessenAnalystService_getPrototypeOf(ThiessenAnalystService.prototype), "destroy", this).call(this);

      this.mode = null;
    }
    /**
     * @function SuperMap.ThiessenAnalystService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     * @param {(SuperMap.DatasetThiessenAnalystParameters|GeometryThiessenAnalystParameters)} parameter - æ³°æ£®å¤è¾¹å½¢åæåæ°åºç±»ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(parameter) {
      var parameterObject = {};
      var me = this;

      if (parameter instanceof DatasetThiessenAnalystParameters) {
        me.mode = "datasets";
        me.url = Util.urlPathAppend(me.url, 'datasets/' + parameter.dataset + '/thiessenpolygon');
        DatasetThiessenAnalystParameters.toObject(parameter, parameterObject);
      } else if (parameter instanceof GeometryThiessenAnalystParameters) {
        me.mode = "geometry";
        me.url = Util.urlPathAppend(me.url, 'geometry/thiessenpolygon');
        GeometryThiessenAnalystParameters.toObject(parameter, parameterObject);
      }

      var jsonParameters = Util.toJSON(parameterObject);
      me.url = Util.urlAppend(me.url, 'returnContent=true');
      me.request({
        method: "POST",
        data: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return ThiessenAnalystService;
}(SpatialAnalystBase);
SuperMap.ThiessenAnalystService = ThiessenAnalystService;
// CONCATENATED MODULE: ./src/common/iServer/GeometryBatchAnalystService.js
function GeometryBatchAnalystService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GeometryBatchAnalystService_typeof = function _typeof(obj) { return typeof obj; }; } else { GeometryBatchAnalystService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GeometryBatchAnalystService_typeof(obj); }

function GeometryBatchAnalystService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GeometryBatchAnalystService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GeometryBatchAnalystService_createClass(Constructor, protoProps, staticProps) { if (protoProps) GeometryBatchAnalystService_defineProperties(Constructor.prototype, protoProps); if (staticProps) GeometryBatchAnalystService_defineProperties(Constructor, staticProps); return Constructor; }

function GeometryBatchAnalystService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GeometryBatchAnalystService_get = Reflect.get; } else { GeometryBatchAnalystService_get = function _get(target, property, receiver) { var base = GeometryBatchAnalystService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GeometryBatchAnalystService_get(target, property, receiver || target); }

function GeometryBatchAnalystService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GeometryBatchAnalystService_getPrototypeOf(object); if (object === null) break; } return object; }

function GeometryBatchAnalystService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GeometryBatchAnalystService_setPrototypeOf(subClass, superClass); }

function GeometryBatchAnalystService_setPrototypeOf(o, p) { GeometryBatchAnalystService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GeometryBatchAnalystService_setPrototypeOf(o, p); }

function GeometryBatchAnalystService_createSuper(Derived) { var hasNativeReflectConstruct = GeometryBatchAnalystService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GeometryBatchAnalystService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GeometryBatchAnalystService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GeometryBatchAnalystService_possibleConstructorReturn(this, result); }; }

function GeometryBatchAnalystService_possibleConstructorReturn(self, call) { if (call && (GeometryBatchAnalystService_typeof(call) === "object" || typeof call === "function")) { return call; } return GeometryBatchAnalystService_assertThisInitialized(self); }

function GeometryBatchAnalystService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GeometryBatchAnalystService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GeometryBatchAnalystService_getPrototypeOf(o) { GeometryBatchAnalystService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GeometryBatchAnalystService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/







/**
 * @class SuperMap.GeometryBatchAnalystService
 * @category iServer SpatialAnalyst BatchAnalyst
 * @classdesc æ¹éç©ºé´åææå¡ç±»
 * @description è¯¥ç±»è´è´£å°å®¢æ·è®¾ç½®çå å åæåæ°ä¼ éç»æå¡ç«¯ï¼å¹¶æ¥æ¶æå¡ç«¯è¿åçå å åæç»ææ°æ®ã
 *              å å åæç»æéè¿è¯¥ç±»æ¯æçäºä»¶ççå¬å½æ°åæ°è·åï¼åæ°ç±»åä¸º {<SuperMap.REST.OverlayAnalystEventArgs>}; è·åçç»ææ°æ®åæ¬ originResult ãresult ä¸¤ç§ï¼
 *              å¶ä¸­ï¼originResult ä¸ºæå¡ç«¯è¿åçç¨ JSON å¯¹è±¡è¡¨ç¤ºçéç®ç»ææ°æ®ï¼result ä¸ºæå¡ç«¯è¿åçéç®ç»ææ°æ®ã
 * @extends {SuperMap.SpatialAnalystBase}
 * @param {string} url - æå¡çè®¿é®å°åãå¦ï¼http://localhost:8090/iserver/services/spatialanalyst-changchun/restjsr/spatialanalystã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @example
 * var myOverlayAnalystService = new SuperMap.REST.GeometryBatchAnalystService(url, {
 *     eventListeners: {
 *	       "processCompleted": OverlayCompleted,
 *		   "processFailed": OverlayFailed
 *		   }
 * });
 */

var GeometryBatchAnalystService = /*#__PURE__*/function (_SpatialAnalystBase) {
  GeometryBatchAnalystService_inherits(GeometryBatchAnalystService, _SpatialAnalystBase);

  var _super = GeometryBatchAnalystService_createSuper(GeometryBatchAnalystService);

  function GeometryBatchAnalystService(url, options) {
    var _this;

    GeometryBatchAnalystService_classCallCheck(this, GeometryBatchAnalystService);

    _this = _super.call(this, url, options);

    if (options) {
      Util.extend(GeometryBatchAnalystService_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = "SuperMap.GeometryBatchAnalystService";
    return _this;
  }
  /**
   * @function SuperMap.GeometryBatchAnalystService.prototype.processAsync
   * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
   * @param {SuperMap.GeometryBatchOverlayAnalystParameters} parameter - æ¹éå ä½å¯¹è±¡å å åæåæ°ç±»
   *
   */


  GeometryBatchAnalystService_createClass(GeometryBatchAnalystService, [{
    key: "processAsync",
    value: function processAsync(parameters) {
      var me = this;
      me.url = Util.urlPathAppend(me.url, 'geometry/batchanalyst');
      me.url = Util.urlAppend(me.url, 'returnContent=true&ignoreAnalystParam=true');

      var parameterObjects = me._processParams(parameters);

      var jsonParameters = Util.toJSON(parameterObjects);
      me.request({
        method: "POST",
        data: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }, {
    key: "_processParams",
    value: function _processParams(parameters) {
      var me = this;

      if (!Util.isArray(parameters)) {
        return;
      }

      var processParams = [];
      parameters.map(function (item) {
        processParams.push(me._toJSON(item));
        return item;
      });
      return processParams;
    }
  }, {
    key: "_toJSON",
    value: function _toJSON(parameter) {
      var tempObj = {};

      if (parameter.analystName === "buffer") {
        tempObj.analystName = "buffer";
        tempObj.param = {}; //å ä½å¯¹è±¡çæ¹éç©ºé´åæï¼

        GeometryBufferAnalystParameters.toObject(parameter.param, tempObj.param);
      } else if (parameter.analystName === "overlay") {
        tempObj.analystName = "overlay";
        tempObj.param = {};
        GeometryOverlayAnalystParameters.toObject(parameter.param, tempObj.param);
      } else if (parameter.analystName === "interpolationDensity") {
        tempObj.analystName = "interpolationDensity";
        tempObj.param = {};
        InterpolationAnalystParameters.toObject(parameter.param, tempObj.param);
      } else if (parameter.analystName === "interpolationidw") {
        tempObj.analystName = "interpolationidw";
        tempObj.param = {};
        InterpolationAnalystParameters.toObject(parameter.param, tempObj.param);
      } else if (parameter.analystName === "interpolationRBF") {
        tempObj.analystName = "interpolationRBF";
        tempObj.param = {};
        InterpolationAnalystParameters.toObject(parameter.param, tempObj.param);
      } else if (parameter.analystName === "interpolationKriging") {
        tempObj.analystName = "interpolationKriging";
        tempObj.param = {};
        InterpolationAnalystParameters.toObject(parameter.param, tempObj.param);
      } else if (parameter.analystName === "thiessenpolygon") {
        tempObj.analystName = "thiessenpolygon";
        tempObj.param = {};
        GeometryThiessenAnalystParameters.toObject(parameter.param, tempObj.param);
      } else {
        //isoline; isoregion; calculatemeasure; routelocator åç§åæä¸éè¦åå¤çåæ°
        return parameter;
      }

      return tempObj;
    }
    /**
     * @override
     */

  }, {
    key: "destroy",
    value: function destroy() {
      GeometryBatchAnalystService_get(GeometryBatchAnalystService_getPrototypeOf(GeometryBatchAnalystService.prototype), "destroy", this).call(this);
    }
  }]);

  return GeometryBatchAnalystService;
}(SpatialAnalystBase);
SuperMap.GeometryBatchAnalystService = GeometryBatchAnalystService;
// CONCATENATED MODULE: ./src/common/iServer/TilesetsService.js
function TilesetsService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { TilesetsService_typeof = function _typeof(obj) { return typeof obj; }; } else { TilesetsService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return TilesetsService_typeof(obj); }

function TilesetsService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function TilesetsService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function TilesetsService_createClass(Constructor, protoProps, staticProps) { if (protoProps) TilesetsService_defineProperties(Constructor.prototype, protoProps); if (staticProps) TilesetsService_defineProperties(Constructor, staticProps); return Constructor; }

function TilesetsService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { TilesetsService_get = Reflect.get; } else { TilesetsService_get = function _get(target, property, receiver) { var base = TilesetsService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return TilesetsService_get(target, property, receiver || target); }

function TilesetsService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = TilesetsService_getPrototypeOf(object); if (object === null) break; } return object; }

function TilesetsService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) TilesetsService_setPrototypeOf(subClass, superClass); }

function TilesetsService_setPrototypeOf(o, p) { TilesetsService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return TilesetsService_setPrototypeOf(o, p); }

function TilesetsService_createSuper(Derived) { var hasNativeReflectConstruct = TilesetsService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = TilesetsService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = TilesetsService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return TilesetsService_possibleConstructorReturn(this, result); }; }

function TilesetsService_possibleConstructorReturn(self, call) { if (call && (TilesetsService_typeof(call) === "object" || typeof call === "function")) { return call; } return TilesetsService_assertThisInitialized(self); }

function TilesetsService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function TilesetsService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function TilesetsService_getPrototypeOf(o) { TilesetsService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return TilesetsService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.TilesetsService
 * @category  iServer Map Tilesets
 * @classdesc åçåè¡¨ä¿¡æ¯æ¥è¯¢æå¡ç±»ï¼å³æ¥è¯¢åçå°å¾æå¡çåçåè¡¨ï¼è¿ååçéåç§°ãå°å¾åçåæ°æ®ä¿¡æ¯ãåççæ¬éä¿¡æ¯ã
 * @extends {SuperMap.CommonServiceBase}
 * @param {string} url - å°å¾æå¡å°åãURL åºä¸ºï¼
 *                       http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{æå¡å}/rest/maps/mapï¼
 *                       ä¾å¦: "http://localhost:8090/iserver/services/test/rest/maps/tianlocal"ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæ processCompleted å±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailed å±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡å¨ç±»åï¼ISERVER|IPORTAL|ONLINEã 
 * @param {SuperMap.DataFormat} [options.format=SuperMap.DataFormat.GEOJSON] - æ¥è¯¢ç»æè¿åæ ¼å¼ï¼ç®åæ¯æ iServerJSON å GeoJSON ä¸¤ç§æ ¼å¼ãåæ°æ ¼å¼ä¸º "ISERVER"ï¼"GEOJSON"ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var TilesetsService = /*#__PURE__*/function (_CommonServiceBase) {
  TilesetsService_inherits(TilesetsService, _CommonServiceBase);

  var _super = TilesetsService_createSuper(TilesetsService);

  function TilesetsService(url, options) {
    var _this;

    TilesetsService_classCallCheck(this, TilesetsService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.TilesetsService";
    return _this;
  }
  /**
   * @override
   */


  TilesetsService_createClass(TilesetsService, [{
    key: "destroy",
    value: function destroy() {
      TilesetsService_get(TilesetsService_getPrototypeOf(TilesetsService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.TilesetsService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ¥è¯¢åæ°ä¼ éå°æå¡ç«¯ã
     */

  }, {
    key: "processAsync",
    value: function processAsync() {
      if (!this.url) {
        return;
      }

      var me = this;
      me.url = Util.urlPathAppend(me.url, 'tilesets');
      me.request({
        method: "GET",
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return TilesetsService;
}(CommonServiceBase);
SuperMap.TilesetsService = TilesetsService;
// CONCATENATED MODULE: ./src/common/iServer/TopologyValidatorJobsParameter.js
function TopologyValidatorJobsParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function TopologyValidatorJobsParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function TopologyValidatorJobsParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) TopologyValidatorJobsParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) TopologyValidatorJobsParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.TopologyValidatorJobsParameter
 * @category  iServer ProcessingService TopologyValidator
 * @classdesc æææ£æ¥åæä»»å¡åæ°ç±»ã
 * @param {Object} options - å¿å¡«åæ°ã
 * @param {string} options.datasetName - æ°æ®éåã
 * @param {string} options.datasetTopology -æ£æ¥å¯¹è±¡æå¨çæ°æ®éåç§°ã
 * @param {SuperMap.TopologyValidatorRule} [options.rule=SuperMap.TopologyValidatorRule.REGIONNOOVERLAP] - æææ£æ¥è§åã
 * @param {string} [options.tolerance] - å®¹éã
 * @param {SuperMap.OutputSetting} [options.output] - è¾åºåæ°è®¾ç½®ã
 * @param {SuperMap.MappingParameters} [options.mappingParameters] - åæåç»æå¯è§åçåæ°ç±»ã   
 */

var TopologyValidatorJobsParameter = /*#__PURE__*/function () {
  function TopologyValidatorJobsParameter(options) {
    TopologyValidatorJobsParameter_classCallCheck(this, TopologyValidatorJobsParameter);

    if (!options) {
      return;
    }
    /**
     * @member {string} SuperMap.TopologyValidatorJobsParameter.prototype.datasetName
     * @description æ°æ®éåã
     */


    this.datasetName = "";
    /**
     * @member {string} SuperMap.TopologyValidatorJobsParameter.prototype.datasetTopology
     * @description æææ£æ¥å¯¹è±¡æå¨çæ°æ®éåç§°ã
     */

    this.datasetTopology = "";
    /**
     * @member {string} [SuperMap.TopologyValidatorJobsParameter.prototype.tolerance]
     * @description å®¹éï¼æå®çææéè¯¯æ£æ¥æ¶ä½¿ç¨çå®¹éã
     */

    this.tolerance = "";
    /**
     * @member {SuperMap.TopologyValidatorRule} [SuperMap.TopologyValidatorJobsParameter.prototype.rule=SuperMap.TopologyValidatorRule.REGIONNOOVERLAP]
     * @description æææ£æ¥æ¨¡å¼ã
     */

    this.rule = TopologyValidatorRule.REGIONNOOVERLAP;
    /**
     * @member {SuperMap.OutputSetting} [SuperMap.TopologyValidatorJobsParameter.prototype.output]
     * @description è¾åºåæ°è®¾ç½®ç±»ã
     */

    this.output = null;
    /**
     * @member {SuperMap.MappingParameters} [SuperMap.TopologyValidatorJobsParameter.prototype.mappingParameters]
     * @description åæåç»æå¯è§åçåæ°ç±»ã   
     */

    this.mappingParameters = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.TopologyValidatorJobsParameter";
  }
  /**
   * @function SuperMap.TopologyValidatorJobsParameter.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  TopologyValidatorJobsParameter_createClass(TopologyValidatorJobsParameter, [{
    key: "destroy",
    value: function destroy() {
      this.datasetName = null;
      this.datasetTopology = null;
      this.tolerance = null;
      this.rule = null;

      if (this.output instanceof OutputSetting) {
        this.output.destroy();
        this.output = null;
      }

      if (this.mappingParameters instanceof MappingParameters) {
        this.mappingParameters.destroy();
        this.mappingParameters = null;
      }
    }
    /**
     * @function SuperMap.TopologyValidatorJobsParameter.toObject
     * @param {Object} TopologyValidatorJobsParameter -æææ£æ¥åæä»»å¡åæ°ã
     * @param {Object} tempObj - ç®æ å¯¹è±¡ã
     * @description çææææ£æ¥åæä»»å¡å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(TopologyValidatorJobsParameter, tempObj) {
      for (var name in TopologyValidatorJobsParameter) {
        if (name === "datasetName") {
          tempObj['input'] = tempObj['input'] || {};
          tempObj['input'][name] = TopologyValidatorJobsParameter[name];
          continue;
        }

        if (name === "output") {
          tempObj['output'] = tempObj['output'] || {};
          tempObj['output'] = TopologyValidatorJobsParameter[name];
          continue;
        }

        tempObj['analyst'] = tempObj['analyst'] || {};
        tempObj['analyst'][name] = TopologyValidatorJobsParameter[name];

        if (name === 'mappingParameters') {
          tempObj['analyst'][name] = tempObj['analyst'][name] || {};
          tempObj['analyst']['mappingParameters'] = TopologyValidatorJobsParameter[name];
        }
      }
    }
  }]);

  return TopologyValidatorJobsParameter;
}();
SuperMap.TopologyValidatorJobsParameter = TopologyValidatorJobsParameter;
// CONCATENATED MODULE: ./src/common/iServer/TopologyValidatorJobsService.js
function TopologyValidatorJobsService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { TopologyValidatorJobsService_typeof = function _typeof(obj) { return typeof obj; }; } else { TopologyValidatorJobsService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return TopologyValidatorJobsService_typeof(obj); }

function TopologyValidatorJobsService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function TopologyValidatorJobsService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function TopologyValidatorJobsService_createClass(Constructor, protoProps, staticProps) { if (protoProps) TopologyValidatorJobsService_defineProperties(Constructor.prototype, protoProps); if (staticProps) TopologyValidatorJobsService_defineProperties(Constructor, staticProps); return Constructor; }

function TopologyValidatorJobsService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { TopologyValidatorJobsService_get = Reflect.get; } else { TopologyValidatorJobsService_get = function _get(target, property, receiver) { var base = TopologyValidatorJobsService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return TopologyValidatorJobsService_get(target, property, receiver || target); }

function TopologyValidatorJobsService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = TopologyValidatorJobsService_getPrototypeOf(object); if (object === null) break; } return object; }

function TopologyValidatorJobsService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) TopologyValidatorJobsService_setPrototypeOf(subClass, superClass); }

function TopologyValidatorJobsService_setPrototypeOf(o, p) { TopologyValidatorJobsService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return TopologyValidatorJobsService_setPrototypeOf(o, p); }

function TopologyValidatorJobsService_createSuper(Derived) { var hasNativeReflectConstruct = TopologyValidatorJobsService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = TopologyValidatorJobsService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = TopologyValidatorJobsService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return TopologyValidatorJobsService_possibleConstructorReturn(this, result); }; }

function TopologyValidatorJobsService_possibleConstructorReturn(self, call) { if (call && (TopologyValidatorJobsService_typeof(call) === "object" || typeof call === "function")) { return call; } return TopologyValidatorJobsService_assertThisInitialized(self); }

function TopologyValidatorJobsService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function TopologyValidatorJobsService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function TopologyValidatorJobsService_getPrototypeOf(o) { TopologyValidatorJobsService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return TopologyValidatorJobsService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.TopologyValidatorJobsService
 * @category  iServer ProcessingService TopologyValidator
 * @classdesc æææ£æ¥åææå¡ç±»
 * @extends {SuperMap.ProcessingServiceBase}
 * @param {string} url - æææ£æ¥åææå¡å°åã
 * @param {Object} options - åæ°ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var TopologyValidatorJobsService = /*#__PURE__*/function (_ProcessingServiceBas) {
  TopologyValidatorJobsService_inherits(TopologyValidatorJobsService, _ProcessingServiceBas);

  var _super = TopologyValidatorJobsService_createSuper(TopologyValidatorJobsService);

  function TopologyValidatorJobsService(url, options) {
    var _this;

    TopologyValidatorJobsService_classCallCheck(this, TopologyValidatorJobsService);

    _this = _super.call(this, url, options);
    _this.url = Util.urlPathAppend(_this.url, 'spatialanalyst/topologyvalidator');
    _this.CLASS_NAME = "SuperMap.TopologyValidatorJobsService";
    return _this;
  }
  /**
   *@override
   */


  TopologyValidatorJobsService_createClass(TopologyValidatorJobsService, [{
    key: "destroy",
    value: function destroy() {
      TopologyValidatorJobsService_get(TopologyValidatorJobsService_getPrototypeOf(TopologyValidatorJobsService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.TopologyValidatorJobsService.protitype.getTopologyValidatorJobs
     * @description è·åæææ£æ¥åæææä»»å¡
     */

  }, {
    key: "getTopologyValidatorJobs",
    value: function getTopologyValidatorJobs() {
      TopologyValidatorJobsService_get(TopologyValidatorJobsService_getPrototypeOf(TopologyValidatorJobsService.prototype), "getJobs", this).call(this, this.url);
    }
    /**
     * @function SuperMap.TopologyValidatorJobsService.protitype.getTopologyValidatorJob
     * @description è·åæå®idçæææ£æ¥åææå¡
     * @param {string} id - æå®è¦è·åæ°æ®çid
     */

  }, {
    key: "getTopologyValidatorJob",
    value: function getTopologyValidatorJob(id) {
      TopologyValidatorJobsService_get(TopologyValidatorJobsService_getPrototypeOf(TopologyValidatorJobsService.prototype), "getJobs", this).call(this, Util.urlPathAppend(this.url, id));
    }
    /**
     * @function SuperMap.TopologyValidatorJobsService.protitype.addTopologyValidatorJob
     * @description æ°å»ºæææ£æ¥åææå¡
     * @param {SuperMap.TopologyValidatorJobsParameter} params - åå»ºä¸ä¸ªç©ºé´åæçè¯·æ±åæ°ã
     * @param {number} seconds - å¼å§åå»ºåï¼è·ååå»ºæåç»æçæ¶é´é´éã
     */

  }, {
    key: "addTopologyValidatorJob",
    value: function addTopologyValidatorJob(params, seconds) {
      TopologyValidatorJobsService_get(TopologyValidatorJobsService_getPrototypeOf(TopologyValidatorJobsService.prototype), "addJob", this).call(this, this.url, params, TopologyValidatorJobsParameter, seconds);
    }
  }]);

  return TopologyValidatorJobsService;
}(ProcessingServiceBase);
SuperMap.TopologyValidatorJobsService = TopologyValidatorJobsService;
// CONCATENATED MODULE: ./src/common/iServer/TransferLine.js
function TransferLine_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function TransferLine_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function TransferLine_createClass(Constructor, protoProps, staticProps) { if (protoProps) TransferLine_defineProperties(Constructor.prototype, protoProps); if (staticProps) TransferLine_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.TransferLine
 * @category  iServer TrafficTransferAnalyst TransferPath
 * @classdesc æ¢ä¹è·¯çº¿ä¿¡æ¯ç±»ã
 * @param {Object} options - åæ°ã
 * @param {number} options.lineID - ä¹è½¦è·¯çº¿ IDã
 * @param {string} options.lineName - ä¹è½¦è·¯çº¿åç§°ã
 * @param {string} options.lineAliasName - ä¹è½¦è·¯çº¿å«åã
 * @param {number} options.startStopIndex - ä¸è½¦ç«ç¹å¨æ¬å¬äº¤è·¯çº¿ä¸­çç´¢å¼ã
 * @param {string} options.startStopName - ä¸è½¦ç«ç¹åç§°ã
 * @param {string} options.startStopAliasName - ä¸è½¦ç«ç¹å«åã
 * @param {number} options.endStopIndex - ä¸è½¦ç«ç¹å¨æ¬å¬äº¤è·¯çº¿ä¸­çç´¢å¼ã
 * @param {string} options.endStopName - ä¸è½¦ç«ç¹åç§°ã
 * @param {string} options.endStopAliasName - ä¸è½¦ç«ç¹å«åã
 */

var TransferLine = /*#__PURE__*/function () {
  function TransferLine(options) {
    TransferLine_classCallCheck(this, TransferLine);

    options = options || {};
    /**
     * @member {number} SuperMap.TransferLine.prototype.lineID
     * @description ä¹è½¦è·¯çº¿ IDã
     */

    this.lineID = null;
    /**
     * @member {string} SuperMap.TransferLine.prototype.lineName
     * @description ä¹è½¦è·¯çº¿åç§°ã
     */

    this.lineName = null;
    /**
     * @member {string} SuperMap.TransferLine.prototype.lineAliasName
     * @description ä¹è½¦è·¯çº¿å«åã
     */

    this.lineAliasName = null;
    /**
     * @member {number} SuperMap.TransferLine.prototype.startStopIndex
     * @description ä¸è½¦ç«ç¹å¨æ¬å¬äº¤è·¯çº¿ä¸­çç´¢å¼ã
     */

    this.startStopIndex = null;
    /**
     * @member {string} SuperMap.TransferLine.prototype.startStopName
     * @description ä¸è½¦ç«ç¹åç§°ã
     */

    this.startStopName = null;
    /**
     * @member {string} SuperMap.TransferLine.prototype.startStopAliasName
     * @description ä¸è½¦ç«ç¹å«åã
     */

    this.startStopAliasName = null;
    /**
     * @member {number} SuperMap.TransferLine.prototype.endStopIndex
     * @description ä¸è½¦ç«ç¹å¨æ¬å¬äº¤è·¯çº¿ä¸­çç´¢å¼ã
     */

    this.endStopIndex = null;
    /**
     * @member {string} SuperMap.TransferLine.prototype.endStopName
     * @description ä¸è½¦ç«ç¹åç§°ã
     */

    this.endStopName = null;
    /**
     * @member {string} SuperMap.TransferLine.prototype.endStopAliasName
     * @description ä¸è½¦ç«ç¹å«åã
     */

    this.endStopAliasName = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.TransferLine";
  }
  /**
   * @function SuperMap.TransferLine.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  TransferLine_createClass(TransferLine, [{
    key: "destroy",
    value: function destroy() {
      Util.reset(this);
    }
    /**
     * @function SuperMap.TransferLine.fromJson
     * @description å°è¿åç»æè½¬åä¸º {@link SuperMap.TransferLine} å¯¹è±¡ã
     * @param {Object} jsonObject - æ°çè¿åç»æã
     * @returns {SuperMap.TransferLine} è½¬ååç {@link SuperMap.TransferLine} å¯¹è±¡ã
     */

  }], [{
    key: "fromJson",
    value: function fromJson(jsonObject) {
      if (!jsonObject) {
        return;
      }

      return new TransferLine({
        lineID: jsonObject['lineID'],
        lineName: jsonObject['lineName'],
        lineAliasName: jsonObject['lineAliasName'],
        startStopIndex: jsonObject['startStopIndex'],
        startStopName: jsonObject['startStopName'],
        startStopAliasName: jsonObject['startStopAliasName'],
        endStopIndex: jsonObject['endStopIndex'],
        endStopName: jsonObject['endStopName'],
        endStopAliasName: jsonObject['endStopAliasName']
      });
    }
  }]);

  return TransferLine;
}();
SuperMap.TransferLine = TransferLine;
// CONCATENATED MODULE: ./src/common/iServer/TransferPathParameters.js
function TransferPathParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function TransferPathParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function TransferPathParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) TransferPathParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) TransferPathParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.TransferPathParameters
 * @category  iServer TrafficTransferAnalyst TransferPaths
 * @classdesc äº¤éæ¢ä¹çº¿è·¯æ¥è¯¢åæ°ç±»ã
 * @param {Object} options - åæ°ã
 * @param {Array.<SuperMap.TransferLine>} options.transferLines - æ¬æ¢ä¹åæ®µåå¯ä¹è½¦çè·¯çº¿éåã
 * @param {Array.<(string|SuperMap.Geometry.Point|L.Point|L.LatLng|ol.geom.Point)>} options.points - ä¸¤ç§æ¥è¯¢æ¹å¼ï¼æç§å¬äº¤ç«ç¹çèµ·æ­¢ ID è¿è¡æ¥è¯¢åæç§èµ·æ­¢ç¹çåæ è¿è¡æ¥è¯¢ã
 *
 */

var TransferPathParameters = /*#__PURE__*/function () {
  function TransferPathParameters(options) {
    TransferPathParameters_classCallCheck(this, TransferPathParameters);

    options = options || {};
    /**
     * @member {Array.<SuperMap.TransferLine>} SuperMap.TransferPathParameters.prototype.transferLines
     * @description æ¬æ¢ä¹åæ®µåå¯ä¹è½¦çè·¯çº¿éåï¼éè¿äº¤éæ¢ä¹æ¹æ¡æ¥è¯¢å¾å°ã
     */

    this.transferLines = null;
    /**
     *  @member {Array.<(string|SuperMap.Geometry.Point|L.Point|L.LatLng|ol.geom.Point)>} SuperMap.TransferPathParameters.prototype.points
     *  @description ä¸¤ç§æ¥è¯¢æ¹å¼ï¼<br>
     *           1. æç§å¬äº¤ç«ç¹çèµ·æ­¢IDè¿è¡æ¥è¯¢ï¼å points åæ°çç±»åä¸º int[]ï¼å½¢å¦ï¼[èµ·ç¹IDãç»ç¹ID]ï¼å¬äº¤ç«ç¹ç ID å¯¹åºæå¡æä¾èéç½®ä¸­çç«ç¹ ID å­æ®µï¼
     *           2. æç§èµ·æ­¢ç¹çåæ è¿è¡æ¥è¯¢ï¼å points åæ°çç±»åä¸º Point2D[]ï¼å½¢å¦ï¼[{"x":44,"y":39},{"x":45,"y":40}]ã
     */

    this.points = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.TransferPathParameters";
  }
  /**
   * @function SuperMap.TransferPathParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  TransferPathParameters_createClass(TransferPathParameters, [{
    key: "destroy",
    value: function destroy() {
      Util.reset(this);
    }
    /**
     * @function SuperMap.TransferPathParameters.toJson
     * @description å° {@link SuperMap.TransferPathParameters} å¯¹è±¡åæ°è½¬æ¢ä¸º JSON å­ç¬¦ä¸²ã
     * @param {SuperMap.TransferPathParameters} params - äº¤éæ¢ä¹åæ°ã
     * @returns {string} è½¬ååç JSON å­ç¬¦ä¸²ã
     */

  }], [{
    key: "toJson",
    value: function toJson(params) {
      if (params) {
        return Util.toJSON(params);
      }
    }
  }]);

  return TransferPathParameters;
}();
SuperMap.TransferPathParameters = TransferPathParameters;
// CONCATENATED MODULE: ./src/common/iServer/TransferPathService.js
function TransferPathService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { TransferPathService_typeof = function _typeof(obj) { return typeof obj; }; } else { TransferPathService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return TransferPathService_typeof(obj); }

function TransferPathService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function TransferPathService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function TransferPathService_createClass(Constructor, protoProps, staticProps) { if (protoProps) TransferPathService_defineProperties(Constructor.prototype, protoProps); if (staticProps) TransferPathService_defineProperties(Constructor, staticProps); return Constructor; }

function TransferPathService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { TransferPathService_get = Reflect.get; } else { TransferPathService_get = function _get(target, property, receiver) { var base = TransferPathService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return TransferPathService_get(target, property, receiver || target); }

function TransferPathService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = TransferPathService_getPrototypeOf(object); if (object === null) break; } return object; }

function TransferPathService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) TransferPathService_setPrototypeOf(subClass, superClass); }

function TransferPathService_setPrototypeOf(o, p) { TransferPathService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return TransferPathService_setPrototypeOf(o, p); }

function TransferPathService_createSuper(Derived) { var hasNativeReflectConstruct = TransferPathService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = TransferPathService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = TransferPathService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return TransferPathService_possibleConstructorReturn(this, result); }; }

function TransferPathService_possibleConstructorReturn(self, call) { if (call && (TransferPathService_typeof(call) === "object" || typeof call === "function")) { return call; } return TransferPathService_assertThisInitialized(self); }

function TransferPathService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function TransferPathService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function TransferPathService_getPrototypeOf(o) { TransferPathService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return TransferPathService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.TransferPathService
 * @category  iServer TrafficTransferAnalyst TransferPath
 * @classdesc äº¤éæ¢ä¹çº¿è·¯æ¥è¯¢æå¡ç±»ï¼æ ¹æ®äº¤éæ¢ä¹åæç»æ(TransferSolutionResult)ï¼è·åæä¸æ¡ä¹è½¦è·¯çº¿çè¯¦ç»ä¿¡æ¯ã
 *            è¿åç»æéè¿è¯¥ç±»æ¯æçäºä»¶ççå¬å½æ°åæ°è·å
 * @extends {SuperMap.CommonServiceBase}
 * @example ä¾å¦ï¼
 * var myService = new SuperMap.TransferPathService(url, {eventListeners: {
 *     "processCompleted": TrafficTransferCompleted,
 *     "processFailed": TrafficTransferError
 *     }
 * };
 * @param {string} url - ä¸å®¢æ·ç«¯äº¤äºçäº¤éæ¢ä¹çº¿è·¯æ¥è¯¢æå¡å°åã
 * ä¾å¦:</br>"http://localhost:8090/iserver/services/traffictransferanalyst-sample/restjsr/traffictransferanalyst/Traffic-Changchun"ã
 * @param {Object} options - åæ°ã</br>
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var TransferPathService = /*#__PURE__*/function (_CommonServiceBase) {
  TransferPathService_inherits(TransferPathService, _CommonServiceBase);

  var _super = TransferPathService_createSuper(TransferPathService);

  function TransferPathService(url, options) {
    var _this;

    TransferPathService_classCallCheck(this, TransferPathService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.TransferPathService";
    return _this;
  }
  /**
   * @override
   */


  TransferPathService_createClass(TransferPathService, [{
    key: "destroy",
    value: function destroy() {
      TransferPathService_get(TransferPathService_getPrototypeOf(TransferPathService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.TransferPathService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ´æ°åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.TransferPathParameters} params - äº¤éæ¢ä¹åæ°ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof TransferPathParameters)) {
        return;
      }

      var me = this,
          method = "GET",
          jsonParameters;
      me.url = Util.urlPathAppend(me.url, 'path');
      jsonParameters = {
        points: Util.toJSON(params.points),
        transferLines: Util.toJSON(params['transferLines'])
      };
      me.request({
        method: method,
        params: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return TransferPathService;
}(CommonServiceBase);
SuperMap.TransferPathService = TransferPathService;
// CONCATENATED MODULE: ./src/common/iServer/TransferSolutionParameters.js
function TransferSolutionParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function TransferSolutionParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function TransferSolutionParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) TransferSolutionParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) TransferSolutionParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.TransferSolutionParameters
 * @category  iServer TrafficTransferAnalyst TransferSolutions
 * @classdesc äº¤éæ¢ä¹æ¹æ¡æ¥è¯¢åæ°ç±»ã
 * @param {Object} options - åæ°ã
 * @param {Array.<(SuperMap.Geometry.Point|L.Point|L.LatLng|ol.geom.Point|number)>} options.points - ä¸¤ç§æ¥è¯¢æ¹å¼ï¼æç§å¬äº¤ç«ç¹çèµ·æ­¢IDè¿è¡æ¥è¯¢åæç§èµ·æ­¢ç¹çåæ è¿è¡æ¥è¯¢ã
 * @param {number} [options.solutionCount=6] - ä¹è½¦æ¹æ¡çæ°éã
 * @param {SuperMap.TransferTactic} [options.transferTactic=SuperMap.TransferTactic.LESS_TIME] - äº¤éæ¢ä¹ç­ç¥ç±»åï¼åæ¬æ¶é´æç­ãè·ç¦»æç­ãæå°æ¢ä¹ãæå°æ­¥è¡åç§éæ©ã
 * @param {SuperMap.TransferPreference} [options.transferPreference=SuperMap.TransferPreference.NONE] - ä¹è½¦åå¥½æä¸¾ã
 * @param {number} [options.walkingRatio=10] - æ­¥è¡ä¸å¬äº¤çæ¶èæéæ¯ã
 * @param {Array.<number>} [options.evadeLines] - é¿è®©è·¯çº¿ç IDã
 * @param {Array.<number>} [options.evadeStops] - é¿è®©ç«ç¹ç IDã
 * @param {Array.<number>} [options.priorLines] - ä¼åè·¯çº¿ç IDã
 * @param {Array.<number>} [options.priorStops] - ä¼åç«ç¹ç IDã
 * @param {string} [options.travelTime] - åºè¡çæ¶é´ã
 */

var TransferSolutionParameters = /*#__PURE__*/function () {
  function TransferSolutionParameters(options) {
    TransferSolutionParameters_classCallCheck(this, TransferSolutionParameters);

    options = options || {};
    /**
     *  @member {number} [SuperMap.TransferSolutionParameters.prototype.solutionCount=6]
     *  @description ä¹è½¦æ¹æ¡çæ°éã
     */

    this.solutionCount = 6;
    /**
     * @member {SuperMap.TransferPreference} [SuperMap.TransferSolutionParameters.prototype.transferPreference=SuperMap.TransferPreference.NONE]
     *  @description ä¹è½¦åå¥½æä¸¾ã
     */

    this.transferPreference = TransferPreference.NONE;
    /**
     *  @member {SuperMap.TransferTactic} [SuperMap.TransferSolutionParameters.prototype.transferTactic=TransferTactic|SuperMap.TransferTactic.LESS_TIME]
     *  @description äº¤éæ¢ä¹ç­ç¥ç±»åï¼åæ¬æ¶é´æç­ãè·ç¦»æç­ãæå°æ¢ä¹ãæå°æ­¥è¡åç§éæ©ã
     */

    this.transferTactic = TransferTactic.LESS_TIME;
    /**
     *  @member {number} [SuperMap.TransferSolutionParameters.prototype.walkingRatio=10]
     *  @description æ­¥è¡ä¸å¬äº¤çæ¶èæéæ¯ãæ­¤å¼è¶å¤§ï¼åæ­¥è¡å ç´ å¯¹äºæ¹æ¡éæ©çå½±åè¶å¤§ãä¾å¦ï¼</br>
     *  ä¾å¦ç°å¨æä¸¤ç§æ¢ä¹æ¹æ¡ï¼å¨ä»èèæ¶èå ç´ çæåµä¸ï¼ï¼</br>
     *  æ¹æ¡1ï¼åè½¦ 10 å¬éï¼èµ°è·¯ 1 å¬éï¼</br>
     *  æ¹æ¡2ï¼åè½¦ 15 å¬éï¼èµ°è·¯ 0.5 å¬éï¼</br>
     *  1. åè®¾æéæ¯ä¸º 15ï¼</br>
     *     â¢æ¹æ¡ 1 çæ»æ¶èä¸ºï¼10 + 1*15 = 25</br>
     *     â¢æ¹æ¡ 2 çæ»æ¶èä¸ºï¼15 + 0.5*15 = 22.5</br>
     *  æ­¤æ¶æ¹æ¡ 2 æ¶èæ´ä½ã</br>
     *  2. åè®¾æéæ¯ä¸º2ï¼</br>
     *     â¢æ¹æ¡ 1 çæ»æ¶èä¸ºï¼10+1*2 = 12</br>
     *     â¢æ¹æ¡ 2 çæ»æ¶èä¸ºï¼15+0.5*2 = 17</br>
     *  æ­¤æ¶æ¹æ¡ 1 æ¶èæ´ä½ã</br>
     */

    this.walkingRatio = null;
    /**
     *  @member {Array.<(SuperMap.Geometry.Point|L.Point|L.LatLng|ol.geom.Point|string)>} SuperMap.TransferSolutionParameters.prototype.points
     *  @description ä¸¤ç§æ¥è¯¢æ¹å¼ï¼</br>
     *           1. æç§å¬äº¤ç«ç¹çèµ·æ­¢ ID è¿è¡æ¥è¯¢ï¼å points åæ°çç±»åä¸º int[]ï¼å½¢å¦ï¼[èµ·ç¹ IDãç»ç¹ ID]ï¼å¬äº¤ç«ç¹ç ID å¯¹åºæå¡æä¾èéç½®ä¸­çç«ç¹ ID å­æ®µï¼
     *           2. æç§èµ·æ­¢ç¹çåæ è¿è¡æ¥è¯¢ï¼å points åæ°çç±»åä¸º Point2D[]ï¼å½¢å¦ï¼[{"x":44,"y":39},{"x":45,"y":40}]ã
     */

    this.points = false;
    /**
     * @member {Array.<number>} [SuperMap.TransferSolutionParameters.prototype.evadeLinesnull]
     * @description é¿è®©è·¯çº¿ IDã
     * */

    this.evadeLines = null;
    /**
     * @member {Array.<number>} [SuperMap.TransferSolutionParameters.prototype.evadeStops=TransferLine]
     * @description é¿è®©ç«ç¹ IDã
     * */

    this.evadeStops = null;
    /**
     * @member {Array.<number>} [SuperMap.TransferSolutionParameters.prototype.priorLines]
     * @description ä¼åè·¯çº¿ IDã
     * */

    this.priorLines = null;
    /**
     * @member {Array.<number>} [SuperMap.TransferSolutionParameters.prototype.priorStops]
     * @description ä¼åç«ç¹ IDã
     * */

    this.priorStops = null;
    /**
     * @member {string} SuperMap.TransferSolutionParameters.prototype.travelTime
     * @description åºè¡çæ¶é´ï¼ æ ¼å¼æ¯ï¼"å°æ¶:åé"ï¼å¦ï¼"08:30"ãå¦æè®¾ç½®äºè¯¥åæ°ï¼å¨åææ¶ï¼åä¼èèçº¿è·¯çé¦æ«ç­è½¦æ¶é´çéå¶ï¼å³å¨è¿åçç»æä¸­ä¼æç¤ºå¬äº¤çé¦æ«ç­åè½¦æ¶é´ã
     */

    this.travelTime = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.TransferSolutionParameters";
  }
  /**
   * @function SuperMap.TransferSolutionParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  TransferSolutionParameters_createClass(TransferSolutionParameters, [{
    key: "destroy",
    value: function destroy() {
      Util.reset(this);
    }
    /**
     * @function SuperMap.TransferSolutionParameters.toJsonParameters
     * @description å° {@link SuperMap.TransferSolutionParameters} å¯¹è±¡åæ°è½¬æ¢ä¸º JSON å­ç¬¦ä¸²ã
     * @param {SuperMap.TransferSolutionParameters} params - äº¤éæ¢ä¹åæ°ã
     * @returns {string} è½¬ååç JSON å­ç¬¦ä¸²ã
     */

  }], [{
    key: "toJson",
    value: function toJson(params) {
      if (params) {
        return Util.toJSON(params);
      }
    }
  }]);

  return TransferSolutionParameters;
}();
SuperMap.TransferSolutionParameters = TransferSolutionParameters;
// CONCATENATED MODULE: ./src/common/iServer/TransferSolutionService.js
function TransferSolutionService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { TransferSolutionService_typeof = function _typeof(obj) { return typeof obj; }; } else { TransferSolutionService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return TransferSolutionService_typeof(obj); }

function TransferSolutionService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function TransferSolutionService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function TransferSolutionService_createClass(Constructor, protoProps, staticProps) { if (protoProps) TransferSolutionService_defineProperties(Constructor.prototype, protoProps); if (staticProps) TransferSolutionService_defineProperties(Constructor, staticProps); return Constructor; }

function TransferSolutionService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { TransferSolutionService_get = Reflect.get; } else { TransferSolutionService_get = function _get(target, property, receiver) { var base = TransferSolutionService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return TransferSolutionService_get(target, property, receiver || target); }

function TransferSolutionService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = TransferSolutionService_getPrototypeOf(object); if (object === null) break; } return object; }

function TransferSolutionService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) TransferSolutionService_setPrototypeOf(subClass, superClass); }

function TransferSolutionService_setPrototypeOf(o, p) { TransferSolutionService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return TransferSolutionService_setPrototypeOf(o, p); }

function TransferSolutionService_createSuper(Derived) { var hasNativeReflectConstruct = TransferSolutionService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = TransferSolutionService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = TransferSolutionService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return TransferSolutionService_possibleConstructorReturn(this, result); }; }

function TransferSolutionService_possibleConstructorReturn(self, call) { if (call && (TransferSolutionService_typeof(call) === "object" || typeof call === "function")) { return call; } return TransferSolutionService_assertThisInitialized(self); }

function TransferSolutionService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function TransferSolutionService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function TransferSolutionService_getPrototypeOf(o) { TransferSolutionService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return TransferSolutionService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.TransferSolutionService
 * @category  iServer TrafficTransferAnalyst TransferSolutions
 * @classdesc äº¤éæ¢ä¹æ¹æ¡æ¥è¯¢æå¡ç±»ã
 * è¿åç»æéè¿è¯¥ç±»æ¯æçäºä»¶ççå¬å½æ°åæ°è·åã
 * @param {string} url - ä¸å®¢æ·ç«¯äº¤äºçäº¤éæ¢ä¹æ¹æ¡æ¥è¯¢æå¡å°åã
 * ä¾å¦:</br>"http://localhost:8090/iserver/services/traffictransferanalyst-sample/restjsr/traffictransferanalyst/Traffic-Changchun"ã
 * @param {Object} options - åæ°ã</br>
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã</br>
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @extends {SuperMap.CommonServiceBase}
 * @example ä¾å¦ï¼
 * (start code)
 * var myService = new SuperMap.TransferSolutionService(url, {eventListeners: {
     *     "processCompleted": trafficTransferCompleted,
     *     "processFailed": trafficTransferError
     *     }
     * };
 * (end)
 *
 */

var TransferSolutionService = /*#__PURE__*/function (_CommonServiceBase) {
  TransferSolutionService_inherits(TransferSolutionService, _CommonServiceBase);

  var _super = TransferSolutionService_createSuper(TransferSolutionService);

  function TransferSolutionService(url, options) {
    var _this;

    TransferSolutionService_classCallCheck(this, TransferSolutionService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.TransferSolutionService";
    return _this;
  }
  /**
   * @override
   */


  TransferSolutionService_createClass(TransferSolutionService, [{
    key: "destroy",
    value: function destroy() {
      TransferSolutionService_get(TransferSolutionService_getPrototypeOf(TransferSolutionService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.TransferSolutionService.prototype.processAsync
     * @description è´è´£å°å®¢æ·ç«¯çæ´æ°åæ°ä¼ éå°æå¡ç«¯ã
     * @param {SuperMap.TransferSolutionParameters} params - äº¤éæ¢ä¹åæ°ã
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof TransferSolutionParameters)) {
        return;
      }

      var me = this,
          method = "GET",
          jsonParameters;
      me.url = Util.urlPathAppend(me.url, 'solutions');
      jsonParameters = {
        points: Util.toJSON(params.points),
        walkingRatio: params['walkingRatio'],
        transferTactic: params['transferTactic'],
        solutionCount: params['solutionCount'],
        transferPreference: params["transferPreference"]
      };

      if (params.evadeLines) {
        jsonParameters["evadeLines"] = Util.toJSON(params.evadeLines);
      }

      if (params.evadeStops) {
        jsonParameters["evadeStops"] = Util.toJSON(params.evadeStops);
      }

      if (params.priorLines) {
        jsonParameters["priorLines"] = Util.toJSON(params.priorLines);
      }

      if (params.priorStops) {
        jsonParameters["priorStops"] = Util.toJSON(params.priorStops);
      }

      if (params.travelTime) {
        jsonParameters["travelTime"] = params.travelTime;
      }

      me.request({
        method: method,
        params: jsonParameters,
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
  }]);

  return TransferSolutionService;
}(CommonServiceBase);
SuperMap.TransferSolutionService = TransferSolutionService;
// CONCATENATED MODULE: ./src/common/iServer/UpdateEdgeWeightParameters.js
function UpdateEdgeWeightParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function UpdateEdgeWeightParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function UpdateEdgeWeightParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) UpdateEdgeWeightParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) UpdateEdgeWeightParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.UpdateEdgeWeightParameters
 * @category  iServer NetworkAnalyst EdgeWeight
 * @classdesc è¾¹çèè´¹æéæ´æ°æå¡åæ°ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {string} options.edgeId - æå¨è¾¹ç IDã 
 * @param {string} options.fromNodeId - èµ·å§è½¬åç¹ç IDã 
 * @param {string} options.toNodeId - ç»æ­¢è½¬åç¹ç IDã 
 * @param {string} options.weightField - è¾¹çèè´¹å­æ®µã 
 * @param {string} options.edgeWeight - èè´¹æéã
 */

var UpdateEdgeWeightParameters = /*#__PURE__*/function () {
  function UpdateEdgeWeightParameters(options) {
    UpdateEdgeWeightParameters_classCallCheck(this, UpdateEdgeWeightParameters);

    if (!options) {
      return;
    }
    /**
     * @member {string} SuperMap.UpdateEdgeWeightParameters.prototype.edgeId
     * @description æå¨è¾¹ç IDã
     */


    this.edgeId = "";
    /**
     * @member {string} SuperMap.UpdateEdgeWeightParameters.prototype.fromNodeId
     * @description èµ·å§è½¬åç¹ç IDã
     */

    this.fromNodeId = "";
    /**
     * @member {string} SuperMap.UpdateEdgeWeightParameters.prototype.toNodeId
     * @description ç»æ­¢è½¬åç¹ç IDã
     */

    this.toNodeId = "";
    /**
     * @member {string} SuperMap.UpdateEdgeWeightParameters.prototype.weightField
     * @description è¾¹çèè´¹å­æ®µã
     */

    this.weightField = "";
    /**
     * @member {string} SuperMap.UpdateEdgeWeightParameters.prototype.edgeWeight
     * @description èè´¹æéã
     */

    this.edgeWeight = "";
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.UpdateEdgeWeightParameters";
  }
  /**
   * @function SuperMap.UpdateEdgeWeightParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  UpdateEdgeWeightParameters_createClass(UpdateEdgeWeightParameters, [{
    key: "destroy",
    value: function destroy() {
      this.edgeId = null;
      this.fromNodeId = null;
      this.toNodeId = null;
      this.weightField = null;
      this.edgeWeight = null;
    }
  }]);

  return UpdateEdgeWeightParameters;
}();
SuperMap.UpdateEdgeWeightParameters = UpdateEdgeWeightParameters;
// CONCATENATED MODULE: ./src/common/iServer/UpdateEdgeWeightService.js
function UpdateEdgeWeightService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { UpdateEdgeWeightService_typeof = function _typeof(obj) { return typeof obj; }; } else { UpdateEdgeWeightService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return UpdateEdgeWeightService_typeof(obj); }

function UpdateEdgeWeightService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function UpdateEdgeWeightService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function UpdateEdgeWeightService_createClass(Constructor, protoProps, staticProps) { if (protoProps) UpdateEdgeWeightService_defineProperties(Constructor.prototype, protoProps); if (staticProps) UpdateEdgeWeightService_defineProperties(Constructor, staticProps); return Constructor; }

function UpdateEdgeWeightService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { UpdateEdgeWeightService_get = Reflect.get; } else { UpdateEdgeWeightService_get = function _get(target, property, receiver) { var base = UpdateEdgeWeightService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return UpdateEdgeWeightService_get(target, property, receiver || target); }

function UpdateEdgeWeightService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = UpdateEdgeWeightService_getPrototypeOf(object); if (object === null) break; } return object; }

function UpdateEdgeWeightService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) UpdateEdgeWeightService_setPrototypeOf(subClass, superClass); }

function UpdateEdgeWeightService_setPrototypeOf(o, p) { UpdateEdgeWeightService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return UpdateEdgeWeightService_setPrototypeOf(o, p); }

function UpdateEdgeWeightService_createSuper(Derived) { var hasNativeReflectConstruct = UpdateEdgeWeightService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = UpdateEdgeWeightService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = UpdateEdgeWeightService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return UpdateEdgeWeightService_possibleConstructorReturn(this, result); }; }

function UpdateEdgeWeightService_possibleConstructorReturn(self, call) { if (call && (UpdateEdgeWeightService_typeof(call) === "object" || typeof call === "function")) { return call; } return UpdateEdgeWeightService_assertThisInitialized(self); }

function UpdateEdgeWeightService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function UpdateEdgeWeightService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function UpdateEdgeWeightService_getPrototypeOf(o) { UpdateEdgeWeightService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return UpdateEdgeWeightService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.UpdateEdgeWeightService
 * @category  iServer NetworkAnalyst EdgeWeight
 * @classdesc æ´æ°è¾¹çè¾¹çèè´¹æéæå¡
 * @extends {SuperMap.NetworkAnalystServiceBase}
 * @example
 *(start code)
 * var updateEdgeWeightService = new SuperMap.UpdateEdgeWeightService(url, {
 *     eventListeners: {
 *         "processCompleted": UpdateEdgeWeightCompleted,      //åæ°ä¸ºSuperMap.UpdateEdgeWeightEventArgs
 *		   "processFailed": UpdateEdgeWeightError             //åæ°ä¸ºSuperMap.ServiceFailedEventArgs
 *		   }
 * });
 * (end)
 * @param {string} url - æå¡çè®¿é®å°åãå¦ï¼http://localhost:8090/iserver/services/transportationanalyst-sample/rest/networkanalyst/RoadNet@Changchun ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var UpdateEdgeWeightService = /*#__PURE__*/function (_NetworkAnalystServic) {
  UpdateEdgeWeightService_inherits(UpdateEdgeWeightService, _NetworkAnalystServic);

  var _super = UpdateEdgeWeightService_createSuper(UpdateEdgeWeightService);

  function UpdateEdgeWeightService(url, options) {
    var _this;

    UpdateEdgeWeightService_classCallCheck(this, UpdateEdgeWeightService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.UpdateEdgeWeightService";
    return _this;
  }
  /**
   * @override
   */


  UpdateEdgeWeightService_createClass(UpdateEdgeWeightService, [{
    key: "destroy",
    value: function destroy() {
      UpdateEdgeWeightService_get(UpdateEdgeWeightService_getPrototypeOf(UpdateEdgeWeightService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.UpdateEdgeWeightService.prototype.processAsync
     * @description å¼å§å¼æ­¥æ§è¡è¾¹çè¾¹çèè´¹æéçæ´æ°
     * @param {SuperMap.UpdateEdgeWeightParameters} params - è¾¹çèè´¹æéæ´æ°æå¡åæ°ç±»
     * @example
     * (code)
     *  var updateEdgeWeightParam=new SuperMapUpdateEdgeWeightParameters({
     *          edgeId:"20",
     *          fromNodeId:"26",
     *          toNodeId:"109",
     *          weightField:"time",
     *          edgeWeight:"25"
     *      });
     *  updateEdgeWeightService.processAsync(updateEdgeWeightParam);
     * (end)
     */

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof UpdateEdgeWeightParameters)) {
        return;
      }

      var me = this;
      var paramStr = me.parse(params);
      me.url = Util.urlPathAppend(me.url, paramStr);
      var data = params.edgeWeight ? params.edgeWeight : null;
      me.request({
        method: "PUT",
        scope: me,
        data: data,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
    * @function SuperMap.UpdateEdgeWeightService.prototype.parse
    * @description å°æ´æ°æå¡åæ°è§£æä¸ºç¨â/âååéçå­ç¬¦ä¸²
    */

  }, {
    key: "parse",
    value: function parse(params) {
      if (!params) {
        return;
      }

      var paramStr = "";

      for (var attr in params) {
        if (params[attr] === "" || params[attr] === "edgeWeight") {
          continue;
        }

        switch (attr) {
          case "edgeId":
            paramStr += "/edgeweight/" + params[attr];
            break;

          case "fromNodeId":
            paramStr += "/fromnode/" + params[attr];
            break;

          case "toNodeId":
            paramStr += "/tonode/" + params[attr];
            break;

          case "weightField":
            paramStr += "/weightfield/" + params[attr];
            break;

          default:
            break;
        }
      }

      return paramStr;
    }
  }]);

  return UpdateEdgeWeightService;
}(NetworkAnalystServiceBase);
SuperMap.UpdateEdgeWeightService = UpdateEdgeWeightService;
// CONCATENATED MODULE: ./src/common/iServer/UpdateTurnNodeWeightParameters.js
function UpdateTurnNodeWeightParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function UpdateTurnNodeWeightParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function UpdateTurnNodeWeightParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) UpdateTurnNodeWeightParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) UpdateTurnNodeWeightParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.UpdateTurnNodeWeightParameters
 * @category  iServer NetworkAnalyst TurnNodeWeight
 * @classdesc è½¬åèè´¹æéæ´æ°æå¡åæ°ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {string} options.nodeId - è½¬åç»ç¹ç  IDã 
 * @param {string} options.fromEdgeId - èµ·å§è¾¹ç  IDã 
 * @param {string} options.toEdgeId - ç»æ­¢è¾¹ç  IDã 
 * @param {string} options.weightField - è½¬åç»ç¹çèè´¹å­æ®µã 
 * @param {string} options.turnNodeWeight - èè´¹æéã
 */

var UpdateTurnNodeWeightParameters = /*#__PURE__*/function () {
  function UpdateTurnNodeWeightParameters(options) {
    UpdateTurnNodeWeightParameters_classCallCheck(this, UpdateTurnNodeWeightParameters);

    if (!options) {
      return;
    }
    /**
     * @member {string} SuperMap.UpdateTurnNodeWeightParameters.prototype.nodeId
     * @description è½¬åç»ç¹ç  IDã
     */


    this.nodeId = "";
    /**
     * @member {string} SuperMap.UpdateTurnNodeWeightParameters.prototype.fromEdgeId
     * @description èµ·å§è¾¹ç  IDã
     */

    this.fromEdgeId = "";
    /**
     * @member {string} SuperMap.UpdateTurnNodeWeightParameters.prototype.toEdgeId
     * @description ç»æ­¢è¾¹ç  IDã
     */

    this.toEdgeId = "";
    /**
     * @member {string} SuperMap.UpdateTurnNodeWeightParameters.prototype.weightField
     * @description è½¬åç»ç¹çèè´¹å­æ®µã
     */

    this.weightField = "";
    /**
     * @member {string} SuperMap.UpdateTurnNodeWeightParameters.prototype.turnNodeWeight
     * @description èè´¹æéã
     */

    this.turnNodeWeight = "";
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.UpdateTurnNodeWeightParameters";
  }
  /**
   * @function SuperMap.UpdateTurnNodeWeightParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  UpdateTurnNodeWeightParameters_createClass(UpdateTurnNodeWeightParameters, [{
    key: "destroy",
    value: function destroy() {
      this.nodeId = null;
      this.fromEdgeId = null;
      this.toEdgeId = null;
      this.weightField = null;
      this.turnNodeWeight = null;
    }
  }]);

  return UpdateTurnNodeWeightParameters;
}();
SuperMap.UpdateTurnNodeWeightParameters = UpdateTurnNodeWeightParameters;
// CONCATENATED MODULE: ./src/common/iServer/UpdateTurnNodeWeightService.js
function UpdateTurnNodeWeightService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { UpdateTurnNodeWeightService_typeof = function _typeof(obj) { return typeof obj; }; } else { UpdateTurnNodeWeightService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return UpdateTurnNodeWeightService_typeof(obj); }

function UpdateTurnNodeWeightService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function UpdateTurnNodeWeightService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function UpdateTurnNodeWeightService_createClass(Constructor, protoProps, staticProps) { if (protoProps) UpdateTurnNodeWeightService_defineProperties(Constructor.prototype, protoProps); if (staticProps) UpdateTurnNodeWeightService_defineProperties(Constructor, staticProps); return Constructor; }

function UpdateTurnNodeWeightService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { UpdateTurnNodeWeightService_get = Reflect.get; } else { UpdateTurnNodeWeightService_get = function _get(target, property, receiver) { var base = UpdateTurnNodeWeightService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return UpdateTurnNodeWeightService_get(target, property, receiver || target); }

function UpdateTurnNodeWeightService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = UpdateTurnNodeWeightService_getPrototypeOf(object); if (object === null) break; } return object; }

function UpdateTurnNodeWeightService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) UpdateTurnNodeWeightService_setPrototypeOf(subClass, superClass); }

function UpdateTurnNodeWeightService_setPrototypeOf(o, p) { UpdateTurnNodeWeightService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return UpdateTurnNodeWeightService_setPrototypeOf(o, p); }

function UpdateTurnNodeWeightService_createSuper(Derived) { var hasNativeReflectConstruct = UpdateTurnNodeWeightService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = UpdateTurnNodeWeightService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = UpdateTurnNodeWeightService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return UpdateTurnNodeWeightService_possibleConstructorReturn(this, result); }; }

function UpdateTurnNodeWeightService_possibleConstructorReturn(self, call) { if (call && (UpdateTurnNodeWeightService_typeof(call) === "object" || typeof call === "function")) { return call; } return UpdateTurnNodeWeightService_assertThisInitialized(self); }

function UpdateTurnNodeWeightService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function UpdateTurnNodeWeightService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function UpdateTurnNodeWeightService_getPrototypeOf(o) { UpdateTurnNodeWeightService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return UpdateTurnNodeWeightService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.UpdateTurnNodeWeightService
 * @category  iServer NetworkAnalyst TurnNodeWeight
 * @classdesc è½¬åèè´¹æéæ´æ°æå¡ç±»
 * @extends {SuperMap.NetworkAnalystServiceBase}
 * @example
 * var UpdateTurnNodeWeightService = new SuperMap.UpdateTurnNodeWeightService(url, {
 *     eventListeners: {
 *         "processCompleted": UpdateTurnNodeWeightCompleted,    //åæ°ä¸ºSuperMap.UpdateTurnNodeWeightEventArgs
 *		   "processFailed": UpdateTurnNodeWeightError          //åæ°ä¸ºSuperMap.ServiceFailedEventArgs
 *		   }
 * });
 * @param {string} url - æå¡çè®¿é®å°åãå¦:
 *                       http://localhost:8090/iserver/services/transportationanalyst-sample/rest/networkanalyst/RoadNet@Changchun ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var UpdateTurnNodeWeightService = /*#__PURE__*/function (_NetworkAnalystServic) {
  UpdateTurnNodeWeightService_inherits(UpdateTurnNodeWeightService, _NetworkAnalystServic);

  var _super = UpdateTurnNodeWeightService_createSuper(UpdateTurnNodeWeightService);

  function UpdateTurnNodeWeightService(url, options) {
    var _this;

    UpdateTurnNodeWeightService_classCallCheck(this, UpdateTurnNodeWeightService);

    _this = _super.call(this, url, options);
    _this.CLASS_NAME = "SuperMap.UpdateTurnNodeWeightService";
    return _this;
  }
  /**
   * @override
   */


  UpdateTurnNodeWeightService_createClass(UpdateTurnNodeWeightService, [{
    key: "destroy",
    value: function destroy() {
      UpdateTurnNodeWeightService_get(UpdateTurnNodeWeightService_getPrototypeOf(UpdateTurnNodeWeightService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.UpdateTurnNodeWeightService.prototype.processAsync
     * @description å¼å§å¼æ­¥æ§è¡è½¬åèè´¹æéçæ´æ°
     * @param {SuperMap.UpdateTurnNodeWeightParameters} params - è½¬åèè´¹æéæ´æ°æå¡åæ°ç±»
     * @example
     * (code)
     *  var updateTurnNodeWeightParam=new SuperMap.UpdateTurnNodeWeightParameters({
     *           nodeId:"106",
     *           fromEdgeId:"6508",
     *           toEdgeId:"6504",
     *           weightField:"TurnCost",
     *           turnNodeWeight:"50"
     *       });
     *  updateTurnNodeWeightService.processAsync(updateTurnNodeWeightParam);
     * (end)
     **/

  }, {
    key: "processAsync",
    value: function processAsync(params) {
      if (!(params instanceof UpdateTurnNodeWeightParameters)) {
        return;
      }

      var me = this;
      var paramStr = me.parse(params);
      me.url = Util.urlPathAppend(me.url, paramStr);
      var data = params.turnNodeWeight ? params.turnNodeWeight : null;
      me.request({
        method: "PUT",
        scope: me,
        data: data,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.UpdateTurnNodeWeightService.prototype.parse
     * @description å°æ´æ°æå¡åæ°è§£æä¸ºç¨â/âååéçå­ç¬¦ä¸²
     */

  }, {
    key: "parse",
    value: function parse(params) {
      if (!params) {
        return;
      }

      var paramStr = "";

      for (var attr in params) {
        if (params[attr] === "" || params[attr] === "turnNodeWeight") {
          continue;
        }

        switch (attr) {
          case "nodeId":
            paramStr += "/turnnodeweight/" + params[attr];
            break;

          case "fromEdgeId":
            paramStr += "/fromedge/" + params[attr];
            break;

          case "toEdgeId":
            paramStr += "/toedge/" + params[attr];
            break;

          case "weightField":
            paramStr += "/weightfield/" + params[attr];
            break;

          default:
            break;
        }
      }

      return paramStr;
    }
  }]);

  return UpdateTurnNodeWeightService;
}(NetworkAnalystServiceBase);
SuperMap.UpdateTurnNodeWeightService = UpdateTurnNodeWeightService;
// CONCATENATED MODULE: ./src/common/iServer/VectorClipJobsParameter.js
function VectorClipJobsParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function VectorClipJobsParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function VectorClipJobsParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) VectorClipJobsParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) VectorClipJobsParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.VectorClipJobsParameter
 * @category  iServer ProcessingService VectorClip
 * @classdesc ç¢éè£åªåæä»»å¡åæ°ç±»ã
 * @param {Object} options - åæ°ã 
 * @param {string} options.datasetName - æ°æ®éåã 
 * @param {string} options.datasetOverlay - è£åªå¯¹è±¡æ°æ®éã 
 * @param {SuperMap.ClipAnalystMode} [options.mode=SuperMap.ClipAnalystMode.CLIP] - è£åªåææ¨¡å¼ã 
 * @param {SuperMap.OutputSetting} [options.output] - è¾åºåæ°è®¾ç½®ã 
 * @param {SuperMap.MappingParameters} [options.mappingParameters] - åæåç»æå¯è§åçåæ°ç±»ã   
 */

var VectorClipJobsParameter = /*#__PURE__*/function () {
  function VectorClipJobsParameter(options) {
    VectorClipJobsParameter_classCallCheck(this, VectorClipJobsParameter);

    options = options || {};
    /**
     * @member {string} SuperMap.VectorClipJobsParameter.prototype.datasetName
     * @description æ°æ®éåã
     */

    this.datasetName = "";
    /**
     * @member {string} SuperMap.VectorClipJobsParameter.prototype.datasetOverlay
     * @description è£åªå¯¹è±¡æ°æ®éã
     */

    this.datasetVectorClip = "";
    /**
     * @member {string} SuperMap.VectorClipJobsParameter.prototype.geometryClip
     * @description è£åªå ä½å¯¹è±¡ã
     */

    this.geometryClip = "";
    /**
     * @member {SuperMap.ClipAnalystMode} [SuperMap.VectorClipJobsParameter.prototype.mode=ClipAnalystMode.CLIP]
     * @description è£åªåææ¨¡å¼ ã
     */

    this.mode = ClipAnalystMode.CLIP;
    /**
     * @member {SuperMap.OutputSetting} SuperMap.VectorClipJobsParameter.prototype.output
     * @description è¾åºåæ°è®¾ç½®ç±»ã
     */

    this.output = null;
    /**
     * @member {SuperMap.MappingParameters} [SuperMap.VectorClipJobsParameter.prototype.mappingParameters]
     * @description åæåç»æå¯è§åçåæ°ç±»ã   
     */

    this.mappingParameters = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.VectorClipJobsParameter";
  }
  /**
   * @function SuperMap.VectorClipJobsParameter.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  VectorClipJobsParameter_createClass(VectorClipJobsParameter, [{
    key: "destroy",
    value: function destroy() {
      this.datasetName = null;
      this.datasetVectorClip = null;
      this.geometryClip = null;
      this.mode = null;

      if (this.output instanceof OutputSetting) {
        this.output.destroy();
        this.output = null;
      }

      if (this.mappingParameters instanceof MappingParameters) {
        this.mappingParameters.destroy();
        this.mappingParameters = null;
      }
    }
    /**
     * @function SuperMap.VectorClipJobsParameter.toObject
     * @param {Object} vectorClipJobsParameter - åºåæ±æ»åææå¡åæ°ã
     * @param {Object} tempObj - ç®æ å¯¹è±¡ã
     * @description ç¢éè£åªåæä»»å¡å¯¹è±¡ã
     */

  }], [{
    key: "toObject",
    value: function toObject(vectorClipJobsParameter, tempObj) {
      for (var name in vectorClipJobsParameter) {
        if (name === "datasetName") {
          tempObj['input'] = tempObj['input'] || {};
          tempObj['input'][name] = vectorClipJobsParameter[name];
          continue;
        }

        if (name === "output") {
          tempObj['output'] = tempObj['output'] || {};
          tempObj['output'] = vectorClipJobsParameter[name];
          continue;
        }

        tempObj['analyst'] = tempObj['analyst'] || {};
        tempObj['analyst'][name] = vectorClipJobsParameter[name];

        if (name === 'mappingParameters') {
          tempObj['analyst'][name] = tempObj['analyst'][name] || {};
          tempObj['analyst']['mappingParameters'] = vectorClipJobsParameter[name];
        }
      }
    }
  }]);

  return VectorClipJobsParameter;
}();
SuperMap.VectorClipJobsParameter = VectorClipJobsParameter;
// CONCATENATED MODULE: ./src/common/iServer/VectorClipJobsService.js
function VectorClipJobsService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { VectorClipJobsService_typeof = function _typeof(obj) { return typeof obj; }; } else { VectorClipJobsService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return VectorClipJobsService_typeof(obj); }

function VectorClipJobsService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function VectorClipJobsService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function VectorClipJobsService_createClass(Constructor, protoProps, staticProps) { if (protoProps) VectorClipJobsService_defineProperties(Constructor.prototype, protoProps); if (staticProps) VectorClipJobsService_defineProperties(Constructor, staticProps); return Constructor; }

function VectorClipJobsService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { VectorClipJobsService_get = Reflect.get; } else { VectorClipJobsService_get = function _get(target, property, receiver) { var base = VectorClipJobsService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return VectorClipJobsService_get(target, property, receiver || target); }

function VectorClipJobsService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = VectorClipJobsService_getPrototypeOf(object); if (object === null) break; } return object; }

function VectorClipJobsService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) VectorClipJobsService_setPrototypeOf(subClass, superClass); }

function VectorClipJobsService_setPrototypeOf(o, p) { VectorClipJobsService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return VectorClipJobsService_setPrototypeOf(o, p); }

function VectorClipJobsService_createSuper(Derived) { var hasNativeReflectConstruct = VectorClipJobsService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = VectorClipJobsService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = VectorClipJobsService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return VectorClipJobsService_possibleConstructorReturn(this, result); }; }

function VectorClipJobsService_possibleConstructorReturn(self, call) { if (call && (VectorClipJobsService_typeof(call) === "object" || typeof call === "function")) { return call; } return VectorClipJobsService_assertThisInitialized(self); }

function VectorClipJobsService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function VectorClipJobsService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function VectorClipJobsService_getPrototypeOf(o) { VectorClipJobsService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return VectorClipJobsService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.VectorClipJobsService
 * @category  iServer ProcessingService VectorClip
 * @classdesc ç¢éè£åªåææå¡ç±»
 * @extends {SuperMap.ProcessingServiceBase}
 * @param {string} url -ç¢éè£åªåææå¡å°åã
 * @param {Object} options - äº¤äºæå¡æ¶æéå¯éåæ°ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var VectorClipJobsService = /*#__PURE__*/function (_ProcessingServiceBas) {
  VectorClipJobsService_inherits(VectorClipJobsService, _ProcessingServiceBas);

  var _super = VectorClipJobsService_createSuper(VectorClipJobsService);

  function VectorClipJobsService(url, options) {
    var _this;

    VectorClipJobsService_classCallCheck(this, VectorClipJobsService);

    _this = _super.call(this, url, options);
    _this.url = Util.urlPathAppend(_this.url, 'spatialanalyst/vectorclip');
    _this.CLASS_NAME = 'SuperMap.VectorClipJobsService';
    return _this;
  }
  /**
   *@override
   */


  VectorClipJobsService_createClass(VectorClipJobsService, [{
    key: "destroy",
    value: function destroy() {
      VectorClipJobsService_get(VectorClipJobsService_getPrototypeOf(VectorClipJobsService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.VectorClipJobsService.protitype.getVectorClipJobs
     * @description è·åç¢éè£åªåæææä»»å¡
     */

  }, {
    key: "getVectorClipJobs",
    value: function getVectorClipJobs() {
      VectorClipJobsService_get(VectorClipJobsService_getPrototypeOf(VectorClipJobsService.prototype), "getJobs", this).call(this, this.url);
    }
    /**
     * @function SuperMap.KernelDensityJobsService.protitype.getVectorClipJob
     * @description è·åæå®idçç¢éè£åªåææå¡
     * @param {string} id - æå®è¦è·åæ°æ®çid
     */

  }, {
    key: "getVectorClipJob",
    value: function getVectorClipJob(id) {
      VectorClipJobsService_get(VectorClipJobsService_getPrototypeOf(VectorClipJobsService.prototype), "getJobs", this).call(this, Util.urlPathAppend(this.url, id));
    }
    /**
     * @function SuperMap.VectorClipJobsService.protitype.addVectorClipJob
     * @description æ°å»ºç¢éè£åªåææå¡
     * @param {SuperMap.VectorClipJobsParameter} params - åå»ºä¸ä¸ªç©ºé´åæçè¯·æ±åæ°ã
     * @param {number} seconds - å¼å§åå»ºåï¼è·ååå»ºæåç»æçæ¶é´é´éã
     */

  }, {
    key: "addVectorClipJob",
    value: function addVectorClipJob(params, seconds) {
      VectorClipJobsService_get(VectorClipJobsService_getPrototypeOf(VectorClipJobsService.prototype), "addJob", this).call(this, this.url, params, VectorClipJobsParameter, seconds);
    }
  }]);

  return VectorClipJobsService;
}(ProcessingServiceBase);
SuperMap.VectorClipJobsService = VectorClipJobsService;
// CONCATENATED MODULE: ./src/common/iServer/RasterFunctionParameter.js
function RasterFunctionParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function RasterFunctionParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function RasterFunctionParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) RasterFunctionParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) RasterFunctionParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.RasterFunctionParameter
 * @category iServer Map
 * @classdesc iServer å°å¾æå¡æ æ ¼åæåæ°åºç±»
 * @param {Object} options - åæ°ã
 * @param {SuperMap.RasterFunctionType} options.type - æ æ ¼åææ¹æ³ã
 */

var RasterFunctionParameter = /*#__PURE__*/function () {
  function RasterFunctionParameter(options) {
    RasterFunctionParameter_classCallCheck(this, RasterFunctionParameter);

    options = options || {};
    /**
     * @member {SuperMap.RasterFunctionType} [SuperMap.RasterFunctionParameter.prototype.type]
     * @description æ æ ¼åææ¹æ³ã
     */

    this.type = null;
    Util.extend(this, options);
    this.CLASS_NAME = 'SuperMap.RasterFunctionParameter';
  }
  /**
   * @function SuperMap.RasterFunctionParameter.prototype.destroy
   * @description éæ¾èµæºï¼å°èµæºçå±æ§ç½®ç©ºã
   */


  RasterFunctionParameter_createClass(RasterFunctionParameter, [{
    key: "destroy",
    value: function destroy() {
      this.type = null;
    }
  }]);

  return RasterFunctionParameter;
}();
SuperMap.RasterFunctionParameter = RasterFunctionParameter;
// CONCATENATED MODULE: ./src/common/iServer/NDVIParameter.js
function NDVIParameter_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { NDVIParameter_typeof = function _typeof(obj) { return typeof obj; }; } else { NDVIParameter_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return NDVIParameter_typeof(obj); }

function NDVIParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function NDVIParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function NDVIParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) NDVIParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) NDVIParameter_defineProperties(Constructor, staticProps); return Constructor; }

function NDVIParameter_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { NDVIParameter_get = Reflect.get; } else { NDVIParameter_get = function _get(target, property, receiver) { var base = NDVIParameter_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return NDVIParameter_get(target, property, receiver || target); }

function NDVIParameter_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = NDVIParameter_getPrototypeOf(object); if (object === null) break; } return object; }

function NDVIParameter_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) NDVIParameter_setPrototypeOf(subClass, superClass); }

function NDVIParameter_setPrototypeOf(o, p) { NDVIParameter_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return NDVIParameter_setPrototypeOf(o, p); }

function NDVIParameter_createSuper(Derived) { var hasNativeReflectConstruct = NDVIParameter_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = NDVIParameter_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = NDVIParameter_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return NDVIParameter_possibleConstructorReturn(this, result); }; }

function NDVIParameter_possibleConstructorReturn(self, call) { if (call && (NDVIParameter_typeof(call) === "object" || typeof call === "function")) { return call; } return NDVIParameter_assertThisInitialized(self); }

function NDVIParameter_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function NDVIParameter_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function NDVIParameter_getPrototypeOf(o) { NDVIParameter_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return NDVIParameter_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.NDVIParameter
 * @category iServer Map
 * @classdesc å½ä¸åæ¤è¢«ææ°åæ°ç±»
 * @param {Object} options - åæ°ã
 * @param {number} [options.redIndex=0] - çº¢åè°±æ³¢æ®µç´¢å¼ã
 * @param {number} [options.nirIndex=1] - è¿çº¢å¤åè°±æ³¢æ®µç´¢å¼ã
 * @param {string} [options.colorMap="0:ffffe5ff;0.1:f7fcb9ff;0.2:d9f0a3ff;0.3:addd8eff;0.4:78c679ff;0.5:41ab5dff;0.6:238443ff;0.7:006837ff;1:004529ff"] - é¢è²è¡¨ãç±æ æ ¼çä¸­æ­å¼åé¢è²åæ­¢ä¹é´çæ å°ç»æçï¼å¦0.3->d9f0a3ff æçæ¯[0,0.3)æ¾ç¤ºd9f0a3ffãä»åæ³¢æ®µæ°æ®æ¶è®¾å®ã
 * @extends {SuperMap.RasterFunctionParameter}
 */

var NDVIParameter = /*#__PURE__*/function (_RasterFunctionParame) {
  NDVIParameter_inherits(NDVIParameter, _RasterFunctionParame);

  var _super = NDVIParameter_createSuper(NDVIParameter);

  function NDVIParameter(options) {
    var _this;

    NDVIParameter_classCallCheck(this, NDVIParameter);

    _this = _super.call(this, options);
    /**
     * @member {number} [SuperMap.NDVIParameter.prototype.redIndex=0]
     * @description çº¢åè°±æ³¢æ®µç´¢å¼ã
     */

    _this.redIndex = 0;
    /**
     * @member {number} [SuperMap.NDVIParameter.prototype.nirIndex=1]
     * @description è¿çº¢å¤åè°±æ³¢æ®µç´¢å¼ã
     */

    _this.nirIndex = 1;
    /**
     * @member {string} [SuperMap.NDVIParameter.prototype.colorMap="0:ffffe5ff;0.1:f7fcb9ff;0.2:d9f0a3ff;0.3:addd8eff;0.4:78c679ff;0.5:41ab5dff;0.6:238443ff;0.7:006837ff;1:004529ff"]
     * @description é¢è²è¡¨ãç±æ æ ¼çä¸­æ­å¼åé¢è²åæ­¢ä¹é´çæ å°ç»æçï¼å¦0.3->d9f0a3ff æçæ¯[0,0.3)æ¾ç¤ºd9f0a3ffãä»åæ³¢æ®µæ°æ®æ¶è®¾å®ã
     */

    _this.colorMap = '0:ffffe5ff;0.1:f7fcb9ff;0.2:d9f0a3ff;0.3:addd8eff;0.4:78c679ff;0.5:41ab5dff;0.6:238443ff;0.7:006837ff;1:004529ff';
    /**
     * @member {SuperMap.RasterFunctionType} [SuperMap.RasterFunctionParameter.prototype.type]
     * @description æ æ ¼åææ¹æ³ã
     */

    _this.type = RasterFunctionType.NDVI;
    Util.extend(NDVIParameter_assertThisInitialized(_this), options);
    _this.CLASS_NAME = 'SuperMap.NDVIParameter';
    return _this;
  }
  /**
   * @function SuperMap.NDVIParameter.prototype.destroy
   * @override
   */


  NDVIParameter_createClass(NDVIParameter, [{
    key: "destroy",
    value: function destroy() {
      NDVIParameter_get(NDVIParameter_getPrototypeOf(NDVIParameter.prototype), "destroy", this).call(this);

      this.redIndex = null;
      this.nirIndex = null;
      this.colorMap = null;
    }
    /**
     * @function SuperMap.NDVIParameter.prototype.toJSON
     * @description å° NDVIParameter å¯¹è±¡è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @returns {string} è¿åè½¬æ¢åç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "toJSON",
    value: function toJSON() {
      return {
        redIndex: this.redIndex,
        nirIndex: this.nirIndex,
        colorMap: this.colorMap,
        type: this.type
      };
    }
  }]);

  return NDVIParameter;
}(RasterFunctionParameter);
SuperMap.NDVIParameter = NDVIParameter;
// CONCATENATED MODULE: ./src/common/iServer/HillshadeParameter.js
function HillshadeParameter_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { HillshadeParameter_typeof = function _typeof(obj) { return typeof obj; }; } else { HillshadeParameter_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return HillshadeParameter_typeof(obj); }

function HillshadeParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function HillshadeParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function HillshadeParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) HillshadeParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) HillshadeParameter_defineProperties(Constructor, staticProps); return Constructor; }

function HillshadeParameter_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { HillshadeParameter_get = Reflect.get; } else { HillshadeParameter_get = function _get(target, property, receiver) { var base = HillshadeParameter_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return HillshadeParameter_get(target, property, receiver || target); }

function HillshadeParameter_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = HillshadeParameter_getPrototypeOf(object); if (object === null) break; } return object; }

function HillshadeParameter_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) HillshadeParameter_setPrototypeOf(subClass, superClass); }

function HillshadeParameter_setPrototypeOf(o, p) { HillshadeParameter_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return HillshadeParameter_setPrototypeOf(o, p); }

function HillshadeParameter_createSuper(Derived) { var hasNativeReflectConstruct = HillshadeParameter_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = HillshadeParameter_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = HillshadeParameter_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return HillshadeParameter_possibleConstructorReturn(this, result); }; }

function HillshadeParameter_possibleConstructorReturn(self, call) { if (call && (HillshadeParameter_typeof(call) === "object" || typeof call === "function")) { return call; } return HillshadeParameter_assertThisInitialized(self); }

function HillshadeParameter_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function HillshadeParameter_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function HillshadeParameter_getPrototypeOf(o) { HillshadeParameter_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return HillshadeParameter_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.HillshadeParameter
 * @category iServer Map
 * @classdesc é´å½±é¢åæåæ°ç±»
 * @param {Object} options - åæ°ã
 * @param {number} [options.altitude=45] - é«äºå°å¹³çº¿çåæºé«åº¦è§ãé«åº¦è§ç±æ­£åº¦æ°è¡¨ç¤ºï¼0 åº¦ä»£è¡¨å°å¹³çº¿ï¼è 90 åº¦ä»£è¡¨å¤´é¡¶æ­£ä¸æ¹ã
 * @param {number} [options.azimuth=315] - åæºçæ¹ä½è§ãæ¹ä½è§ç±0å°360åº¦ä¹é´çæ­£åº¦æ°è¡¨ç¤ºï¼ä»¥åä¸ºåºåæ¹åæé¡ºæ¶éè¿è¡æµéã
 * @param {number} [options.zFactor=1] - ä¸ä¸ªè¡¨é¢ z åä½ä¸­å°é¢ x,y åä½çæ°éãz åä½ä¸è¾å¥è¡¨é¢ç x,y åä½ä¸åæ¶ï¼å¯ä½¿ç¨ z å å­è°æ´ z åä½çæµéåä½ãè®¡ç®æç»è¾åºè¡¨é¢æ¶ï¼å°ç¨ z å å­ä¹ä»¥è¾å¥è¡¨é¢ç z å¼ã
 *                                       z åä½ä¸è¾å¥è¡¨é¢ç x,y åä½ä¸åæ¶ï¼å¯ä½¿ç¨ z å å­è°æ´ z åä½çæµéåä½ãè®¡ç®æç»è¾åºè¡¨é¢æ¶ï¼å°ç¨ z å å­ä¹ä»¥è¾å¥è¡¨é¢ç z å¼ã
 *                                      å¦æ x,y åä½å z åä½éç¨ç¸åçæµéåä½ï¼å z å å­ä¸º 1ãè¿æ¯é»è®¤è®¾ç½®ã
 *                                      å¦æ x,y åä½å z åä½éç¨ä¸åçæµéåä½ï¼åå¿é¡»å° z å å­è®¾ç½®ä¸ºéå½çå å­ï¼å¦åä¼å¾å°éè¯¯çç»æãä¾å¦ï¼å¦æ z åä½æ¯è±å°ºè x,y åä½æ¯ç±³ï¼ååºä½¿ç¨ z å å­ 0.3048 å° z åä½ä»è±å°ºè½¬æ¢ä¸ºç±³ï¼1 è±å°º = 0.3048 ç±³ï¼ã
 *                                      å¦æè¾å¥æ æ ¼ä½äºçé¢åæ ç³»ä¸­ï¼å¦åè¿å¶åº¦çé¢åæ ç³»ï¼ï¼åçæçå±±ä½é´å½±å¯è½çèµ·æ¥å¾ç¬ç¹ãè¿æ¯å ä¸ºæ°´å¹³å°é¢åä½ä¸é«ç¨ z åä½ä¹é´çæµéå¼å­å¨å·®å¼ãç±äºç»åº¦çé¿åº¦éççº¬åº¦èååï¼å æ­¤éè¦ä¸ºè¯¥çº¬åº¦æå®ä¸ä¸ªéå½ç z å å­ãå¦æ x,y åä½æ¯åè¿å¶åº¦è Z åä½æ¯ç±³ï¼ç¹å®çº¬åº¦çä¸äºåéç Z å å­ä¸ºï¼
 *                                      Latitude     Z-factor
 *                                      0           0.00000898
 *                                      10           0.00000912
 *                                      20           0.00000956
 *                                      30           0.00001036
 *                                      40           0.00001171
 *                                      50           0.00001395
 *                                      60           0.00001792
 *                                      70           0.00002619
 *                                      80           0.00005156
 * @extends {SuperMap.RasterFunctionParameter}
 */

var HillshadeParameter = /*#__PURE__*/function (_RasterFunctionParame) {
  HillshadeParameter_inherits(HillshadeParameter, _RasterFunctionParame);

  var _super = HillshadeParameter_createSuper(HillshadeParameter);

  function HillshadeParameter(options) {
    var _this;

    HillshadeParameter_classCallCheck(this, HillshadeParameter);

    _this = _super.call(this, options);
    /**
     * @member {number} [SuperMap.HillshadeParameter.prototype.altitude = 45]
     * @description é«äºå°å¹³çº¿çåæºé«åº¦è§ãé«åº¦è§ç±æ­£åº¦æ°è¡¨ç¤ºï¼0 åº¦ä»£è¡¨å°å¹³çº¿ï¼è 90 åº¦ä»£è¡¨å¤´é¡¶æ­£ä¸æ¹ã
     */

    _this.altitude = 45;
    /**
     * @member {number} [SuperMap.HillshadeParameter.prototype.azimuth = 315]
     * @description åæºçæ¹ä½è§ãæ¹ä½è§ç±0å°360åº¦ä¹é´çæ­£åº¦æ°è¡¨ç¤ºï¼ä»¥åä¸ºåºåæ¹åæé¡ºæ¶éè¿è¡æµéã
     */

    _this.azimuth = 315;
    /**
     * @member {number} [SuperMap.HillshadeParameter.prototype.zFactor = 1]
     * @description ä¸ä¸ªè¡¨é¢ z åä½ä¸­å°é¢ x,y åä½çæ°éãz åä½ä¸è¾å¥è¡¨é¢ç x,y åä½ä¸åæ¶ï¼å¯ä½¿ç¨ z å å­è°æ´ z åä½çæµéåä½ãè®¡ç®æç»è¾åºè¡¨é¢æ¶ï¼å°ç¨ z å å­ä¹ä»¥è¾å¥è¡¨é¢ç z å¼ã
     */

    _this.zFactor = 1;
    /**
     * @member {SuperMap.RasterFunctionType} SuperMap.RasterFunctionParameter.prototype.type
     * @description æ æ ¼åææ¹æ³ã
     */

    _this.type = RasterFunctionType.HILLSHADE;
    Util.extend(HillshadeParameter_assertThisInitialized(_this), options);
    _this.CLASS_NAME = 'SuperMap.HillshadeParameter';
    return _this;
  }
  /**
   * @function SuperMap.HillshadeParameter.prototype.destroy
   * @override
   */


  HillshadeParameter_createClass(HillshadeParameter, [{
    key: "destroy",
    value: function destroy() {
      HillshadeParameter_get(HillshadeParameter_getPrototypeOf(HillshadeParameter.prototype), "destroy", this).call(this);

      this.altitude = null;
      this.azimuth = null;
      this.zFactor = null;
    }
    /**
     * @function SuperMap.HillshadeParameter.prototype.toJSON
     * @description å° HillshadeParameter å¯¹è±¡è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @returns {string} è¿åè½¬æ¢åç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "toJSON",
    value: function toJSON() {
      return {
        altitude: this.altitude,
        azimuth: this.azimuth,
        zFactor: this.zFactor,
        type: this.type
      };
    }
  }]);

  return HillshadeParameter;
}(RasterFunctionParameter);
SuperMap.HillshadeParameter = HillshadeParameter;
// CONCATENATED MODULE: ./src/common/iServer/WebPrintingJobCustomItems.js
function WebPrintingJobCustomItems_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function WebPrintingJobCustomItems_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function WebPrintingJobCustomItems_createClass(Constructor, protoProps, staticProps) { if (protoProps) WebPrintingJobCustomItems_defineProperties(Constructor.prototype, protoProps); if (staticProps) WebPrintingJobCustomItems_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.WebPrintingJobCustomItems
 * @classdesc Web æå°å¾ä¾åç´ åæ°ç±»ã
 * @version 10.1.0
 * @category iServer WebPrintingJob
 * @param {Object} option - åå§ååæ°ã
 * @param {string} option.name - å¾ä¾åç´ çåç§°ã
 * @param {string} [option.picAsUrl] - å¾ä¾åç´  Base64 æ ¼å¼å¾çã
 * @param {string} [option.picAsBase64] - å¾ä¾åç´ å¾ççè·åå°åã
 */

var WebPrintingJobCustomItems = /*#__PURE__*/function () {
  function WebPrintingJobCustomItems(option) {
    WebPrintingJobCustomItems_classCallCheck(this, WebPrintingJobCustomItems);

    /**
     * @member {string} SuperMap.WebPrintingJobCustomItems.prototype.name
     * @description  å¾ä¾åç´ çåç§°ã
     */
    this.name = null;
    /**
     * @member {string} [SuperMap.WebPrintingJobCustomItems.prototype.picAsUrl]
     * @description  å¾ä¾åç´  Base64 æ ¼å¼å¾çã
     */

    this.picAsUrl = null;
    /**
     * @member {string} [SuperMap.WebPrintingJobCustomItems.prototype.picAsBase64]
     * @description  å¾ä¾åç´ å¾ççè·åå°åã
     */

    this.picAsBase64 = null;
    this.CLASS_NAME = 'SuperMap.WebPrintingJobCustomItems';
    Util.extend(this, option);
  }
  /**
   * @function SuperMap.WebPrintingJobCustomItems.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  WebPrintingJobCustomItems_createClass(WebPrintingJobCustomItems, [{
    key: "destroy",
    value: function destroy() {
      var me = this;
      me.name = null;
      me.picAsUrl = null;
      me.picAsBase64 = null;
    }
    /**
     * @function SuperMap.WebPrintingJobCustomItems.prototype.toJSON
     * @description å° SuperMap.WebPrintingJobCustomItems å¯¹è±¡è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @returns {string} è¿åè½¬æ¢åç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "toJSON",
    value: function toJSON() {
      var params = {
        name: this.name
      };

      if (this.title) {
        params.title = this.title;
      }

      if (this.picAsUrl) {
        params.picAsUrl = this.picAsUrl;
      } else if (this.picAsBase64) {
        params.picAsBase64 = this.picAsBase64.replace(/^data:.+;base64,/, '');
      }

      return Util.toJSON(params);
    }
  }]);

  return WebPrintingJobCustomItems;
}();
SuperMap.WebPrintingJobCustomItems = WebPrintingJobCustomItems;
// CONCATENATED MODULE: ./src/common/iServer/WebPrintingJobImage.js
function WebPrintingJobImage_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function WebPrintingJobImage_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function WebPrintingJobImage_createClass(Constructor, protoProps, staticProps) { if (protoProps) WebPrintingJobImage_defineProperties(Constructor.prototype, protoProps); if (staticProps) WebPrintingJobImage_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.WebPrintingJobImage
 * @classdesc è¡¨è¾¾å°å°å¾çéæå¾çåæ°ç±»ã
 * @version 10.1.0
 * @category iServer WebPrintingJob
 * @param {Object} option - åå§ååæ°ã
 * @param {string} [option.picAsUrl] - å°å°å¾çå¾ç url å°åã
 * @param {string} [option.picAsBase64] - å°å°å¾çbase64ä½å¾çä¿¡æ¯ã
 */

var WebPrintingJobImage = /*#__PURE__*/function () {
  function WebPrintingJobImage(option) {
    WebPrintingJobImage_classCallCheck(this, WebPrintingJobImage);

    /**
     * @member {string} [SuperMap.WebPrintingJobImage.prototype.picAsUrl]
     * @description å°å°å¾çå¾ç url å°åã
     */
    this.picAsUrl = null;
    /**
     * @member {string} [SuperMap.WebPrintingJobImage.prototype.picAsBase64]
     * @description å°å°å¾çbase64ä½å¾çä¿¡æ¯ã
     */

    this.picAsBase64 = null;
    this.CLASS_NAME = 'SuperMap.WebPrintingJobImage';
    Util.extend(this, option);
  }
  /**
   * @function SuperMap.WebPrintingJobImage.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  WebPrintingJobImage_createClass(WebPrintingJobImage, [{
    key: "destroy",
    value: function destroy() {
      this.picAsUrl = null;
      this.picAsBase64 = null;
    }
    /**
     * @function SuperMap.WebPrintingJobImage.prototype.toJSON
     * @description å° SuperMap.WebPrintingJobImage å¯¹è±¡è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @returns {string} è¿åè½¬æ¢åç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "toJSON",
    value: function toJSON() {
      var params = {};

      if (this.picAsUrl) {
        params.picAsUrl = this.picAsUrl;
      }

      if (this.picAsBase64) {
        params.picAsBase64 = this.picAsBase64.replace(/^data:.+;base64,/, '');
      }

      return Util.toJSON(params);
    }
  }]);

  return WebPrintingJobImage;
}();
SuperMap.WebPrintingJobImage = WebPrintingJobImage;
// CONCATENATED MODULE: ./src/common/iServer/WebPrintingJobLayers.js
function WebPrintingJobLayers_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function WebPrintingJobLayers_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function WebPrintingJobLayers_createClass(Constructor, protoProps, staticProps) { if (protoProps) WebPrintingJobLayers_defineProperties(Constructor.prototype, protoProps); if (staticProps) WebPrintingJobLayers_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.WebPrintingJobLayers
 * @classdesc å°å¾ä¾æ·»å å°å¸å±çä¸å¡å¾å±åæ°ç±»ã
 * @version 10.1.0
 * @category iServer WebPrintingJob
 * @param {Object} option - åå§ååæ°ã
 * @param {string} [option.name] - è¡¨ç¤ºå¾å± name çå­ç¬¦ä¸²ãæ­¤ name å¿é¡»å¯ä¸ï¼å¹¶ä¸å¿é¡»ä¸å®ä¹ä¸å¡å¾å±ç LegendOptions_layers åç´ ä¸­çå¾å± name å¹éã
 */

var WebPrintingJobLayers = /*#__PURE__*/function () {
  function WebPrintingJobLayers(option) {
    WebPrintingJobLayers_classCallCheck(this, WebPrintingJobLayers);

    /**
     * @member {string} SuperMap.WebPrintingJobLayers.prototype.name
     * @description  å¾å± nameã
     */
    this.name = null;
    /**
     * @member {string} SuperMap.WebPrintingJobLayers.prototype.layerType
     * @description  å¾å± typeã
     */

    this.layerType = null;
    /**
     * @member {string} SuperMap.WebPrintingJobLayers.prototype.url
     * @description  å¾å± urlã
     */

    this.url = null;
    this.CLASS_NAME = 'SuperMap.WebPrintingJobLayers';
    Util.extend(this, option);
  }
  /**
  * @function SuperMap.WebPrintingJobLayers.prototype.destroy
  * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
  */


  WebPrintingJobLayers_createClass(WebPrintingJobLayers, [{
    key: "destroy",
    value: function destroy() {
      this.name = null;
      this.layerType = null;
      this.url = null;
    }
  }]);

  return WebPrintingJobLayers;
}();
SuperMap.WebPrintingJobLayers = WebPrintingJobLayers;
// CONCATENATED MODULE: ./src/common/iServer/WebPrintingJobLegendOptions.js
function WebPrintingJobLegendOptions_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function WebPrintingJobLegendOptions_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function WebPrintingJobLegendOptions_createClass(Constructor, protoProps, staticProps) { if (protoProps) WebPrintingJobLegendOptions_defineProperties(Constructor.prototype, protoProps); if (staticProps) WebPrintingJobLegendOptions_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.WebPrintingJobLegendOptions
 * @classdesc Web æå°å¾ä¾åæ°ç±»ã
 * @version 10.1.0
 * @category iServer WebPrintingJob
 * @param {Object} option - åå§ååæ°ã
 * @param {string} [option.title] - å¾ä¾åç§°ã
 * @param {string} [option.picAsUrl] - å¾ä¾çå¾ç url å°åã
 * @param {string} [option.picAsBase64] - å¾ä¾ç base64 ä½å¾çä¿¡æ¯ã
 * @param {SuperMap.WebPrintingJobLayers} [option.layers] - å¾ä¾çå¸å±ä¸å¡å¾å±åæ°ç±»ã
 * @param {SuperMap.WebPrintingJobCustomItems} [option.customItems] - èªå®ä¹å¾ä¾åç´ åæ°ç±»ã
 */

var WebPrintingJobLegendOptions = /*#__PURE__*/function () {
  function WebPrintingJobLegendOptions(option) {
    WebPrintingJobLegendOptions_classCallCheck(this, WebPrintingJobLegendOptions);

    /**
     * @member {string} SuperMap.WebPrintingJobLegendOptions.prototype.title
     * @description  å¾ä¾åç§°ã
     */
    this.title = null;
    /**
     * @member {string} [SuperMap.WebPrintingJobLegendOptions.prototype.picAsUrl]
     * @description  å¾ä¾çå¾ç url å°åã
     */

    this.picAsUrl = null;
    /**
     * @member {string} [SuperMap.WebPrintingJobLegendOptions.prototype.picAsBase64]
     * @description  å¾ä¾ç base64 ä½å¾çä¿¡æ¯ã
     */

    this.picAsBase64 = null;
    /**
     * @member {SuperMap.WebPrintingJobLayers} [SuperMap.WebPrintingJobLegendOptions.prototype.layers]
     * @description  å¾ä¾çå¸å±ä¸å¡å¾å±åæ°ç±»ã
     */

    this.layers = null;
    /**
     * @member {SuperMap.WebPrintingJobCustomItems} [SuperMap.WebPrintingJobLegendOptions.prototype.customItems]
     * @description  èªå®ä¹å¾ä¾åç´ åæ°ç±»ã
     */

    this.customItems = null;
    this.CLASS_NAME = 'SuperMap.WebPrintingJobLegendOptions';
    Util.extend(this, option);
  }
  /**
   * @function SuperMap.WebPrintingJobLegendOptions.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  WebPrintingJobLegendOptions_createClass(WebPrintingJobLegendOptions, [{
    key: "destroy",
    value: function destroy() {
      this.title = null;
      this.picAsUrl = null;
      this.picAsBase64 = null;

      if (this.layers instanceof WebPrintingJobLayers) {
        this.layers.destroy();
        this.layers = null;
      }

      if (this.customItems instanceof WebPrintingJobCustomItems) {
        this.customItems.destroy();
        this.customItems = null;
      }
    }
    /**
     * @function SuperMap.WebPrintingJobLegendOptions.prototype.toJSON
     * @description å° SuperMap.WebPrintingJobLegendOptions å¯¹è±¡è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @returns {string} è¿åè½¬æ¢åç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "toJSON",
    value: function toJSON() {
      var params = {
        title: this.title || ""
      };

      if (this.picAsUrl) {
        params.picAsUrl = this.picAsUrl;
      } else if (this.picAsBase64) {
        params.picAsBase64 = this.picAsBase64.replace(/^data:.+;base64,/, '');
      } else if (this.customItems) {
        params.customItems = this.customItems;
      }

      return Util.toJSON(params);
    }
  }]);

  return WebPrintingJobLegendOptions;
}();
SuperMap.WebPrintingJobLegendOptions = WebPrintingJobLegendOptions;
// CONCATENATED MODULE: ./src/common/iServer/WebPrintingJobLittleMapOptions.js
function WebPrintingJobLittleMapOptions_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function WebPrintingJobLittleMapOptions_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function WebPrintingJobLittleMapOptions_createClass(Constructor, protoProps, staticProps) { if (protoProps) WebPrintingJobLittleMapOptions_defineProperties(Constructor.prototype, protoProps); if (staticProps) WebPrintingJobLittleMapOptions_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.WebPrintingJobLittleMapOptions
 * @classdesc Web æå°å°å°å¾åæ°ç±»ã
 * @version 10.1.0
 * @category iServer WebPrintingJob
 * @param {Object} option - åå§ååæ°ã
 * @param {SuperMap.Geometry.Point|L.Point|L.LatLng|ol.geom.Point|mapboxgl.LngLat|mapboxgl.Point|Array.<number>} option.center - å°å°å¾çä¸­å¿ç¹ã
 * @param {number} [option.scale] - å°å°å¾çæ¯ä¾å°ºã
 * @param {Array.<string>} [option.layerNames] - æå® WebMapä¸­å¾å±åç§°çåè¡¨ï¼ç¨äºæ¸²æå°å°å¾ã
 * @param {SuperMap.WebPrintingJobImage} [option.image] - è¡¨è¾¾å°å°å¾çéæå¾ç±»ã
 * @param {SuperMap.WebPrintingJobLayers} [option.layers] - æå® WebMap ä¸­ç layers å¾å±ç±»ã
 */

var WebPrintingJobLittleMapOptions = /*#__PURE__*/function () {
  function WebPrintingJobLittleMapOptions(option) {
    WebPrintingJobLittleMapOptions_classCallCheck(this, WebPrintingJobLittleMapOptions);

    /**
     * @member {Array.<(SuperMap.Geometry.Point|L.Point|L.LatLng|ol.geom.Point)>} SuperMap.WebPrintingJobLittleMapOptions.prototype.center
     * @description å°å°å¾çä¸­å¿ç¹ã
     */
    this.center = null;
    /**
     * @member {number} [SuperMap.WebPrintingJobLittleMapOptions.prototype.scale]
     * @description å°å°å¾çæ¯ä¾å°ºã
     */

    this.scale = null;
    /**
     * @member {Array.<string>} SuperMap.WebPrintingJobLittleMapOptions.prototype.layerNames
     * @description æå® WebMapä¸­å¾å±åç§°çåè¡¨ï¼ç¨äºæ¸²æå°å°å¾ã
     */

    this.layerNames = null;
    /**
     * @member {SuperMap.WebPrintingJobImage} [SuperMap.WebPrintingJobLittleMapOptions.prototype.image]
     * @description è¡¨è¾¾å°å°å¾çéæå¾ç±»ãæä¸æ¯æ
     */

    this.image = null;
    /**
     * @member {SuperMap.WebPrintingJobLayers} [SuperMap.WebPrintingJobLittleMapOptions.prototype.layers]
     * @description æå® WebMap ä¸­ç layers å¾å±ç±»ã
     */

    this.layers = null;
    this.CLASS_NAME = 'SuperMap.WebPrintingJobLittleMapOptions';
    Util.extend(this, option);
  }
  /**
   * @function SuperMap.WebPrintingJobLittleMapOptions.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  WebPrintingJobLittleMapOptions_createClass(WebPrintingJobLittleMapOptions, [{
    key: "destroy",
    value: function destroy() {
      this.center = null;
      this.scale = null;
      this.layerNames = null;

      if (this.image instanceof WebPrintingJobImage) {
        this.image.destroy();
        this.image = null;
      }

      if (this.layers instanceof WebPrintingJobLayers) {
        this.layers.destroy();
        this.layers = null;
      }
    }
    /**
     * @function SuperMap.WebPrintingJobLittleMapOptions.prototype.toJSON
     * @description å° SuperMap.WebPrintingJobLittleMapOptions å¯¹è±¡è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @returns {string} è¿åè½¬æ¢åç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "toJSON",
    value: function toJSON() {
      var params = {
        scale: this.scale,
        center: this.center
      };

      if (this.layerNames) {
        params.layerNames = this.layerNames;
      } else if (this.layers) {
        params.layers = this.layers;
      }

      if (this.image) {
        params.image = this.image;
      }

      return Util.toJSON(params);
    }
  }]);

  return WebPrintingJobLittleMapOptions;
}();
SuperMap.WebPrintingJobLittleMapOptions = WebPrintingJobLittleMapOptions;
// CONCATENATED MODULE: ./src/common/iServer/WebPrintingJobNorthArrowOptions.js
function WebPrintingJobNorthArrowOptions_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function WebPrintingJobNorthArrowOptions_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function WebPrintingJobNorthArrowOptions_createClass(Constructor, protoProps, staticProps) { if (protoProps) WebPrintingJobNorthArrowOptions_defineProperties(Constructor.prototype, protoProps); if (staticProps) WebPrintingJobNorthArrowOptions_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.WebPrintingJobNorthArrowOptions
 * @classdesc Web æå°å°å¾æåéåæ°ç±»ã
 * @version 10.1.0
 * @category iServer WebPrintingJob
 * @param {Object} option - åå§ååæ°ã
 * @param {string} option.picAsUrl - æåéçå¾ç url å°åã
 * @param {string} [option.picAsBase64] - æåéçbase64ä½å¾çä¿¡æ¯ã
 */

var WebPrintingJobNorthArrowOptions = /*#__PURE__*/function () {
  function WebPrintingJobNorthArrowOptions(option) {
    WebPrintingJobNorthArrowOptions_classCallCheck(this, WebPrintingJobNorthArrowOptions);

    /**
     * @member {string} SuperMap.WebPrintingJobNorthArrowOptions.prototype.picAsUrl
     * @description æåéçå¾ç url å°åã
     */
    this.picAsUrl = null;
    /**
     * @member {string} [SuperMap.WebPrintingJobNorthArrowOptions.prototype.picAsBase64]
     * @description æåéçbase64ä½å¾çä¿¡æ¯ã
     */

    this.picAsBase64 = null;
    this.CLASS_NAME = 'SuperMap.WebPrintingJobNorthArrowOptions';
    Util.extend(this, option);
  }
  /**
   * @function SuperMap.WebPrintingJobNorthArrowOptions.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  WebPrintingJobNorthArrowOptions_createClass(WebPrintingJobNorthArrowOptions, [{
    key: "destroy",
    value: function destroy() {
      this.picAsUrl = null;
      this.picAsBase64 = null;
    }
    /**
     * @function SuperMap.WebPrintingJobNorthArrowOptions.prototype.toJSON
     * @description å° SuperMap.WebPrintingJobNorthArrowOptions å¯¹è±¡è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @returns {string} è¿åè½¬æ¢åç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "toJSON",
    value: function toJSON() {
      var params = {};

      if (this.picAsUrl) {
        params.picAsUrl = this.picAsUrl;
      } else if (this.picAsBase64) {
        params.picAsBase64 = this.picAsBase64.replace(/^data:.+;base64,/, '');
      }

      return Util.toJSON(params);
    }
  }]);

  return WebPrintingJobNorthArrowOptions;
}();
SuperMap.WebPrintingJobNorthArrowOptions = WebPrintingJobNorthArrowOptions;
// CONCATENATED MODULE: ./src/common/iServer/WebPrintingJobScaleBarOptions.js
function WebPrintingJobScaleBarOptions_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function WebPrintingJobScaleBarOptions_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function WebPrintingJobScaleBarOptions_createClass(Constructor, protoProps, staticProps) { if (protoProps) WebPrintingJobScaleBarOptions_defineProperties(Constructor.prototype, protoProps); if (staticProps) WebPrintingJobScaleBarOptions_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.WebPrintingJobScaleBarOptions
 * @classdesc Web æå°æ¯ä¾å°ºåæ°ç±»ã
 * @category iServer WebPrintingJob
 * @version 10.1.0
 * @param {Object} option - åå§ååæ°ã
 * @param {string} [option.scaleText] - æ¯ä¾å°ºææ¬ä¿¡æ¯ãä¾å¦ï¼1:1000000
 * @param {SuperMap.WebScaleOrientationType} [option.orientation] - æ¯ä¾å°ºçæ¹ä½æ ·å¼ã
 * @param {SuperMap.WebScaleType} [option.type] - æ¯ä¾å°ºçæ ·å¼ã
 * @param {number} [option.intervals] - æ¯ä¾å°ºæ¡çæ®µæ°ã
 * @param {SuperMap.WebScaleUnit} [option.unit] - æ¯ä¾å°ºçåä½å¶ã
 */

var WebPrintingJobScaleBarOptions = /*#__PURE__*/function () {
  function WebPrintingJobScaleBarOptions(option) {
    WebPrintingJobScaleBarOptions_classCallCheck(this, WebPrintingJobScaleBarOptions);

    /**
     * @member {string} SuperMap.WebPrintingJobScaleBarOptions.prototype.scaleText
     * @description æ¯ä¾å°ºææ¬ä¿¡æ¯ã
     */
    this.scaleText = null;
    /**
     * @member {SuperMap.WebScaleOrientationType} [SuperMap.WebPrintingJobScaleBarOptions.prototype.orientation]
     * @description æ¯ä¾å°ºçæ¹ä½æ ·å¼ã
     */

    this.orientation = null;
    /**
     * @member {SuperMap.WebScaleType} [SuperMap.WebPrintingJobScaleBarOptions.prototype.type]
     * @description æ¯ä¾å°ºçæ ·å¼ã
     */

    this.type = null;
    /**
     * @member {object} [SuperMap.WebPrintingJobScaleBarOptions.prototype.intervals]
     * @description æ¯ä¾å°ºæ¡çæ®µæ°ã
     */

    this.intervals = null;
    /**
     * @member {SuperMap.WebScaleUnit} [SuperMap.WebPrintingJobScaleBarOptions.prototype.unit]
     * @description æ¯ä¾å°ºçåä½å¶ã
     */

    this.unit = null;
    this.CLASS_NAME = 'SuperMap.WebPrintingJobScaleBarOptions';
    Util.extend(this, option);
  }
  /**
   * @function SuperMap.WebPrintingJobScaleBarOptions.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  WebPrintingJobScaleBarOptions_createClass(WebPrintingJobScaleBarOptions, [{
    key: "destroy",
    value: function destroy() {
      this.scaleText = null;
      this.orientation = null;
      this.type = null;
      this.intervals = null;
      this.unit = null;
    }
    /**
     * @function SuperMap.WebPrintingJobScaleBarOptions.prototype.toJSON
     * @description å° SuperMap.WebPrintingJobScaleBarOptions å¯¹è±¡è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @returns {string} è¿åè½¬æ¢åç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "toJSON",
    value: function toJSON() {
      var params = {
        scaleText: this.scaleText || "",
        type: this.type || "BAR",
        intervals: this.intervals || "",
        unit: this.unit || "METER"
      };

      if (this.orientation) {
        params.orientation = this.orientation;
      }

      return Util.toJSON(params);
    }
  }]);

  return WebPrintingJobScaleBarOptions;
}();
SuperMap.WebPrintingJobScaleBarOptions = WebPrintingJobScaleBarOptions;
// CONCATENATED MODULE: ./src/common/iServer/WebPrintingJobContent.js
function WebPrintingJobContent_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function WebPrintingJobContent_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function WebPrintingJobContent_createClass(Constructor, protoProps, staticProps) { if (protoProps) WebPrintingJobContent_defineProperties(Constructor.prototype, protoProps); if (staticProps) WebPrintingJobContent_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.WebPrintingJobContent
 * @classdesc Web æå°åå®¹åæ°ç±»ã
 * @version 10.1.0
 * @category iServer WebPrintingJob
 * @param {Object} option - åå§ååæ°ã
 * @param {string} option.type - Web æå°åå®¹æ¯æçç±»åãç®åæ¯æçç±»åï¼WEBMAP
 * @param {string} [option.url] - å¾æå°ç SuperMap iPortal WebMap ç url å°åãä¾å¦ï¼http://supermapiportal:8190/iportal/web/maps/{mapid}/map.rjson
 * @param {string} [option.token] - å¦æå¾æå°çæ¯ SuperMap iPortal ç¨æ·ç§æç WebMapï¼éè¦æä¾ SuperMap iPortal ç¨æ·ç tokenã
 * @param {WebMapSummaryObject} [option.value] - ä¼ éçæ¯ä¸ä¸ªç¬¦å SuperMap WebMap è§èç WebMap ç JSON è¡¨è¾¾ï¼ä¹å¯ä»¥æ¯ä¸ä¸ªå®æ´ç SuperMap iPortal æ°æ®ä¸å¾å¶ä½ç WebMap ç json è¡¨è¾¾ãå¦æå·²å¡«äº url åæ°ï¼æ­¤åæ°å¯ä¸ä¼ 
 */

var WebPrintingJobContent = /*#__PURE__*/function () {
  function WebPrintingJobContent(option) {
    WebPrintingJobContent_classCallCheck(this, WebPrintingJobContent);

    /**
     * @member {string} SuperMap.WebPrintingJobContent.prototype.type
     * @description Web æå°åå®¹æ¯æçç±»åã
     */
    this.type = null;
    /**
     * @member {string} [SuperMap.WebPrintingJobContent.prototype.url]
     * @description å¾æå°ç SuperMap iPortal WebMap ç url å°åã
     */

    this.url = null;
    /**
     * @member {string} [SuperMap.WebPrintingJobContent.prototype.token]
     * @description å¦æå¾æå°çæ¯ SuperMap iPortal ç¨æ·ç§æç WebMapï¼éè¦æä¾ SuperMap iPortal ç¨æ·ç tokenã
     */

    this.token = null;
    /**
     * @member {WebMapSummaryObject} [SuperMap.WebPrintingJobContent.prototype.value]
     * @description ä¼ éçæ¯ä¸ä¸ªç¬¦å SuperMap WebMap è§èç WebMap ç JSON è¡¨è¾¾ï¼ä¹å¯ä»¥æ¯ä¸ä¸ªå®æ´ç SuperMap iPortal æ°æ®ä¸å¾å¶ä½ç WebMap ç json è¡¨è¾¾ã
     */

    this.value = null;
    this.CLASS_NAME = 'SuperMap.WebPrintingJobContent';
    Util.extend(this, option);
  }
  /**
   * @function SuperMap.WebPrintingJobContent.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  WebPrintingJobContent_createClass(WebPrintingJobContent, [{
    key: "destroy",
    value: function destroy() {
      this.type =  false || "WEBMAP";
      this.url = null;
      this.token = null;
      this.value = null;
    }
    /**
     * @function SuperMap.WebPrintingJobContent.prototype.toJSON
     * @description å° SuperMap.WebPrintingJobContent å¯¹è±¡è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @returns {string} è¿åè½¬æ¢åç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "toJSON",
    value: function toJSON() {
      var params = {
        type: this.type
      };

      if (this.token) {
        params.token = this.token;
      }

      if (this.url) {
        params.url = this.url;
      } else if (this.value) {
        params.value = this.value;
      }

      return Util.toJSON(params);
    }
  }]);

  return WebPrintingJobContent;
}();
SuperMap.WebPrintingJobContent = WebPrintingJobContent;
// CONCATENATED MODULE: ./src/common/iServer/WebPrintingJobLayoutOptions.js
function WebPrintingJobLayoutOptions_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function WebPrintingJobLayoutOptions_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function WebPrintingJobLayoutOptions_createClass(Constructor, protoProps, staticProps) { if (protoProps) WebPrintingJobLayoutOptions_defineProperties(Constructor.prototype, protoProps); if (staticProps) WebPrintingJobLayoutOptions_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/






/**
 * @class SuperMap.WebPrintingJobLayoutOptions
 * @classdesc Web æå°çå¸å±åæ°ç±»ã
 * @version 10.1.0
 * @category iServer WebPrintingJob
 * @param {Object} option - åå§ååæ°ã
 * @param {string} option.templateName - å¸å±æ¨¡æ¿çåç§°ã
 * @param {string} option.title - å°å¾ä¸»æ é¢åç§°ã
 * @param {string} option.subTitle - å°å¾å¯æ é¢åç§°ã
 * @param {string} option.author - å°å¾ä½èåç§°ã
 * @param {string} option.copyright - å°å¾çæä¿¡æ¯ã
 * @param {SuperMap.WebPrintingJobLittleMapOptions} option.littleMapOptions - å°å°å¾åæ°ç±»ã
 * @param {SuperMap.WebPrintingJobLegendOptions} option.legendOptions - å¾ä¾åæ°ç±»ã
 * @param {SuperMap.WebPrintingJobScaleBarOptions} [option.scaleBarOptions] - å°å¾æ¯ä¾å°ºåæ°ç±»ã
 * @param {SuperMap.WebPrintingJobNorthArrowOptions} [option.northArrowOptions] - å°å¾æåéåæ°ç±»ã
 */

var WebPrintingJobLayoutOptions = /*#__PURE__*/function () {
  function WebPrintingJobLayoutOptions(option) {
    WebPrintingJobLayoutOptions_classCallCheck(this, WebPrintingJobLayoutOptions);

    /**
     * @member {string} SuperMap.WebPrintingJobLayoutOptions.prototype.templateName
     * @description å¸å±æ¨¡æ¿çåç§°ã
     */
    this.templateName = null;
    /**
     * @member {string} SuperMap.WebPrintingJobLayoutOptions.prototype.title
     * @description å°å¾ä¸»æ é¢åç§°ã
     */

    this.title = null;
    /**
     * @member {string} SuperMap.WebPrintingJobLayoutOptions.prototype.subTitle
     * @description å°å¾å¯æ é¢åç§°ã
     */

    this.subTitle = null;
    /**
     * @member {string} SuperMap.WebPrintingJobLayoutOptions.prototype.author
     * @description å°å¾ä½èåç§°ã
     */

    this.author = null;
    /**
     * @member {string} SuperMap.WebPrintingJobLayoutOptions.prototype.copyright
     * @description å°å¾çæä¿¡æ¯ã
     */

    this.copyright = null;
    /**
     * @member {SuperMap.WebPrintingJobScaleBarOptions} [SuperMap.WebPrintingJobLayoutOptions.prototype.scaleBarOptions]
     * @description å°å¾æ¯ä¾å°ºåæ°ç±»ã
     */

    this.scaleBarOptions = null;
    /**
     * @member {SuperMap.WebPrintingJobNorthArrowOptions} [SuperMap.WebPrintingJobLayoutOptions.prototype.northArrowOptions]
     * @description å°å¾æåéåæ°ç±»ã
     */

    this.northArrowOptions = null;
    /**
     * @member {SuperMap.WebPrintingJobLittleMapOptions} SuperMap.WebPrintingJobLayoutOptions.prototype.littleMapOptions
     * @description å°å°å¾åæ°ç±»ã
     */

    this.littleMapOptions = null;
    /**
     * @member {SuperMap.WebPrintingJobLegendOptions} SuperMap.WebPrintingJobLayoutOptions.prototype.legendOptions
     * @description å¾ä¾åæ°ç±»ã
     */

    this.legendOptions = null;
    this.CLASS_NAME = 'SuperMap.WebPrintingJobLayoutOptions';
    Util.extend(this, option);
  }
  /**
   * @function SuperMap.WebPrintingJobLayoutOptions.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  WebPrintingJobLayoutOptions_createClass(WebPrintingJobLayoutOptions, [{
    key: "destroy",
    value: function destroy() {
      this.templateName = null;
      this.title = null;
      this.subTitle = null;
      this.author = null;
      this.copyright = null;

      if (this.scaleBarOptions instanceof WebPrintingJobScaleBarOptions) {
        this.scaleBarOptions.destroy();
        this.scaleBarOptions = null;
      }

      if (this.northArrowOptions instanceof WebPrintingJobNorthArrowOptions) {
        this.northArrowOptions.destroy();
        this.northArrowOptions = null;
      }

      if (this.littleMapOptions instanceof WebPrintingJobLittleMapOptions) {
        this.littleMapOptions.destroy();
        this.littleMapOptions = null;
      }

      if (this.legendOptions instanceof WebPrintingJobLegendOptions) {
        this.legendOptions.destroy();
        this.legendOptions = null;
      }
    }
    /**
     * @function SuperMap.WebPrintingJobLayoutOptions.prototype.toJSON
     * @description å° SuperMap.WebPrintingJobLayoutOptions å¯¹è±¡è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @returns {string} è¿åè½¬æ¢åç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "toJSON",
    value: function toJSON() {
      var params = {
        templateName: this.templateName,
        title: this.title,
        subTitle: this.subTitle,
        author: this.author,
        copyright: this.copyright
      };

      if (this.scaleBarOptions) {
        params.scaleBarOptions = this.scaleBarOptions;
      }

      if (this.northArrowOptions) {
        params.northArrowOptions = this.northArrowOptions;
      }

      if (this.littleMapOptions) {
        params.littleMapOptions = this.littleMapOptions;
      }

      if (this.legendOptions) {
        params.legendOptions = this.legendOptions;
      }

      return Util.toJSON(params);
    }
  }]);

  return WebPrintingJobLayoutOptions;
}();
SuperMap.WebPrintingJobLayoutOptions = WebPrintingJobLayoutOptions;
// CONCATENATED MODULE: ./src/common/iServer/WebPrintingJobExportOptions.js
function WebPrintingJobExportOptions_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function WebPrintingJobExportOptions_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function WebPrintingJobExportOptions_createClass(Constructor, protoProps, staticProps) { if (protoProps) WebPrintingJobExportOptions_defineProperties(Constructor.prototype, protoProps); if (staticProps) WebPrintingJobExportOptions_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.WebPrintingJobExportOptions
 * @classdesc Web æå°çè¾åºåæ°ç±»ã
 * @version 10.1.0
 * @category iServer WebPrintingJob
 * @param {Object} option - åå§ååæ°ã
 * @param {SuperMap.WebExportFormatType} option.format - Web æå°è¾åºçæ ¼å¼ï¼ç®åæ¯æï¼PNGãPDFã
 * @param {number} [option.dpi=96] - Web æå°è¾åºçåè¾¨çï¼åä½ä¸ºæ¯è±å¯¸ç¹æ°ãé»è®¤å¼ä¸º 96 dpiã
 * @param {number} [option.scale] - Web æå°è¾åºçå°å¾æ¯ä¾å°ºã
 * @param {number} [option.rotation] - Web æå°è¾åºçå°å¾è§åº¦ã
 * @param {SuperMap.Geometry.Point|L.Point|L.LatLng|ol.geom.Point|mapboxgl.LngLat|mapboxgl.Point|Array.<number>} [option.center] - Web æå°è¾åºçå°å¾ä¸­å¿ç¹ã
 */

var WebPrintingJobExportOptions = /*#__PURE__*/function () {
  function WebPrintingJobExportOptions(option) {
    WebPrintingJobExportOptions_classCallCheck(this, WebPrintingJobExportOptions);

    /**
     * @member {SuperMap.WebExportFormatType} SuperMap.WebPrintingJobExportOptions.prototype.format
     * @description Web æå°è¾åºçæ ¼å¼ã
     */
    this.format = null;
    /**
     * @member {number} [SuperMap.WebPrintingJobExportOptions.prototype.dpi=96]
     * @description  Web æå°è¾åºçåè¾¨çï¼åä½ä¸ºæ¯è±å¯¸ç¹æ°ã
     */

    this.dpi = 96;
    /**
     * @member {number} [SuperMap.WebPrintingJobExportOptions.prototype.scale]
     * @description Web æå°è¾åºçå°å¾æ¯ä¾å°ºã
     */

    this.scale = null;
    /**
     * @member {number} [SuperMap.WebPrintingJobExportOptions.prototype.rotation]
     * @description Web æå°è¾åºçå°å¾è§åº¦ã
     */

    this.rotation = null;
    /**
     * @member {Array.<(SuperMap.Geometry.Point|L.Point|L.LatLng|ol.geom.Point)>} [SuperMap.WebPrintingJobExportOptions.prototype.center]
     * @description Web æå°è¾åºçå°å¾ä¸­å¿ç¹ã
     */

    this.center = null;
    this.CLASS_NAME = 'SuperMap.WebPrintingJobExportOptions';
    Util.extend(this, option);
  }
  /**
   * @function SuperMap.WebPrintingJobExportOptions.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  WebPrintingJobExportOptions_createClass(WebPrintingJobExportOptions, [{
    key: "destroy",
    value: function destroy() {
      this.format = null;
      this.dpi = null;
      this.scale = null;
      this.rotation = null;
      this.center = null;
      this.outputSize = null;
    }
    /**
     * @function SuperMap.WebPrintingJobExportOptions.prototype.toJSON
     * @description å° SuperMap.WebPrintingJobExportOptions å¯¹è±¡è½¬åä¸º JSON å­ç¬¦ä¸²ã
     * @returns {string} è¿åè½¬æ¢åç JSON å­ç¬¦ä¸²ã
     */

  }, {
    key: "toJSON",
    value: function toJSON() {
      var params = {
        format: this.format || "PDF",
        dpi: this.dpi,
        scale: this.scale,
        center: this.center
      };

      if (this.rotation) {
        params.rotation = this.rotation;
      }

      if (this.outputSize) {
        params.outputSize = this.outputSize;
      }

      return Util.toJSON(params);
    }
  }]);

  return WebPrintingJobExportOptions;
}();
SuperMap.WebPrintingJobExportOptions = WebPrintingJobExportOptions;
// CONCATENATED MODULE: ./src/common/iServer/WebPrintingJobParameters.js
function WebPrintingJobParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function WebPrintingJobParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function WebPrintingJobParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) WebPrintingJobParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) WebPrintingJobParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.WebPrintingJobParameters
 * @category iServer WebPrintingJob
 * @version 10.1.0
 * @classdesc Web æå°åæ°ç±»
 * @param {Object} options - åå§ååæ°ã
 * @param {SuperMap.WebPrintingJobContent} options.content - Web æå°çåå®¹ç±»ã
 * @param {SuperMap.WebPrintingJobLayoutOptions} options.layoutOptions - Web æå°çå¸å±ç±»ï¼åå«åç§å¸å±åç´ çè®¾ç½®ã
 * @param {SuperMap.WebPrintingJobExportOptions} options.exportOptions - Web æå°çè¾åºç±»ï¼åå« DPIãé¡µé¢å¤§å°ç­ã
 */

var WebPrintingJobParameters = /*#__PURE__*/function () {
  function WebPrintingJobParameters(options) {
    WebPrintingJobParameters_classCallCheck(this, WebPrintingJobParameters);

    if (!options) {
      return;
    }
    /**
     * @member {SuperMap.WebPrintingJobContent} SuperMap.WebPrintingJobParameters.prototype.content
     * @description Web æå°çåå®¹ç±»ã
     */


    this.content = null;
    /**
     * @member {SuperMap.WebPrintingJobLayoutOptions} SuperMap.WebPrintingJobParameters.prototype.layoutOptions
     * @description Web æå°çå¸å±ç±»ï¼åå«åç§å¸å±åç´ çè®¾ç½®ã
     */

    this.layoutOptions = null;
    /**
     * @member {SuperMap.WebPrintingJobExportOptions} SuperMap.WebPrintingJobParameters.prototype.exportOptions
     * @description Web æå°çè¾åºç±»ï¼åå« DPIãé¡µé¢å¤§å°ç­ã
     */

    this.exportOptions = null;
    Util.extend(this, options);
    this.CLASS_NAME = 'SuperMap.WebPrintingJobParameters';
  }
  /**
   * @function SuperMap.WebPrintingJobParameters.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  WebPrintingJobParameters_createClass(WebPrintingJobParameters, [{
    key: "destroy",
    value: function destroy() {
      if (this.content instanceof WebPrintingJobContent) {
        this.content.destroy();
        this.content = null;
      }

      if (this.layoutOptions instanceof WebPrintingJobLayoutOptions) {
        this.layoutOptions.destroy();
        this.layoutOptions = null;
      }

      if (this.exportOptions instanceof WebPrintingJobExportOptions) {
        this.exportOptions.destroy();
        this.exportOptions = null;
      }
    }
  }]);

  return WebPrintingJobParameters;
}();
SuperMap.WebPrintingJobParameters = WebPrintingJobParameters;
// CONCATENATED MODULE: ./src/common/iServer/WebPrintingService.js
function WebPrintingService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { WebPrintingService_typeof = function _typeof(obj) { return typeof obj; }; } else { WebPrintingService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return WebPrintingService_typeof(obj); }

function WebPrintingService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function WebPrintingService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function WebPrintingService_createClass(Constructor, protoProps, staticProps) { if (protoProps) WebPrintingService_defineProperties(Constructor.prototype, protoProps); if (staticProps) WebPrintingService_defineProperties(Constructor, staticProps); return Constructor; }

function WebPrintingService_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { WebPrintingService_get = Reflect.get; } else { WebPrintingService_get = function _get(target, property, receiver) { var base = WebPrintingService_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return WebPrintingService_get(target, property, receiver || target); }

function WebPrintingService_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = WebPrintingService_getPrototypeOf(object); if (object === null) break; } return object; }

function WebPrintingService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) WebPrintingService_setPrototypeOf(subClass, superClass); }

function WebPrintingService_setPrototypeOf(o, p) { WebPrintingService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return WebPrintingService_setPrototypeOf(o, p); }

function WebPrintingService_createSuper(Derived) { var hasNativeReflectConstruct = WebPrintingService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = WebPrintingService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = WebPrintingService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return WebPrintingService_possibleConstructorReturn(this, result); }; }

function WebPrintingService_possibleConstructorReturn(self, call) { if (call && (WebPrintingService_typeof(call) === "object" || typeof call === "function")) { return call; } return WebPrintingService_assertThisInitialized(self); }

function WebPrintingService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function WebPrintingService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function WebPrintingService_getPrototypeOf(o) { WebPrintingService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return WebPrintingService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.WebPrintingService
 * @category iServer WebPrintingJob
 * @version 10.1.0
 * @classdesc æå°å°å¾æå¡åºç±»ã
 * @extends {SuperMap.CommonServiceBase}
 * @param {string} url - èµæºæ ¹å°åãè¯·æ±æå°å°å¾æå¡ç URL åºä¸ºï¼http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/webprinting/rest/webprinting/v1ã
 * @param {Object} options - åæ°ã
 * @param {Object} options.eventListeners - äºä»¶çå¬å¨å¯¹è±¡ãæprocessCompletedå±æ§å¯ä¼ å¥å¤çå®æåçåè°å½æ°ãprocessFailedå±æ§ä¼ å¥å¤çå¤±è´¥åçåè°å½æ°ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var WebPrintingService = /*#__PURE__*/function (_CommonServiceBase) {
  WebPrintingService_inherits(WebPrintingService, _CommonServiceBase);

  var _super = WebPrintingService_createSuper(WebPrintingService);

  /**
   * @function SuperMap.WebPrintingService.prototype.constructor
   * @description æå°å°å¾æå¡åºç±»ã
   * @param {string} url - èµæºæ ¹å°åãè¯·æ±æå°å°å¾æå¡ç URL åºä¸ºï¼http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/webprinting/rest/webprinting/v1ã
   * @param {Object} options -åæ°ã
   * @param {Object} options.eventListeners - éè¦è¢«æ³¨åççå¬å¨å¯¹è±¡ã
   */
  function WebPrintingService(url, options) {
    var _this;

    WebPrintingService_classCallCheck(this, WebPrintingService);

    _this = _super.call(this, url, options);

    if (options) {
      Util.extend(WebPrintingService_assertThisInitialized(_this), options);
    }

    _this.CLASS_NAME = 'SuperMap.WebPrintingService';

    if (!_this.url) {
      return WebPrintingService_possibleConstructorReturn(_this);
    }

    return _this;
  }
  /**
   * @function SuperMap.WebPrintingService.prototype.destroy
   * @description éæ¾èµæºï¼å°å¼ç¨èµæºçå±æ§ç½®ç©ºã
   */


  WebPrintingService_createClass(WebPrintingService, [{
    key: "destroy",
    value: function destroy() {
      WebPrintingService_get(WebPrintingService_getPrototypeOf(WebPrintingService.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.WebPrintingService.prototype.createWebPrintingJob
     * @description åå»º Web æå°ä»»å¡ã
     * @param {SuperMap.WebPrintingJobParameters} params - Web æå°çè¯·æ±åæ°ã
     */

  }, {
    key: "createWebPrintingJob",
    value: function createWebPrintingJob(params) {
      if (!params) {
        return;
      }

      if (params.layoutOptions) {
        if (params.layoutOptions.legendOptions) {
          !params.layoutOptions.legendOptions.title && (params.layoutOptions.legendOptions.title = '');
          params.layoutOptions.legendOptions.picAsBase64 = params.layoutOptions.legendOptions.picAsBase64 && params.layoutOptions.legendOptions.picAsBase64.replace(/^data:.+;base64,/, '');

          if (params.layoutOptions.legendOptions.customItems && params.layoutOptions.legendOptions.customItems.hasOwnProperty('picAsBase64')) {
            params.layoutOptions.legendOptions.customItems.picAsBase64 = params.layoutOptions.legendOptions.customItems.picAsBase64.replace(/^data:.+;base64,/, '');
          }
        }
      }

      var me = this;
      me.request({
        url: me._processUrl('jobs'),
        method: 'POST',
        data: Util.toJSON(params),
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.WebPrintingService.prototype.getPrintingJob
     * @description è·å Web æå°è¾åºææ¡£ä»»å¡ã
     * @param {String} jobId - Web æå°ä»»å¡ ID
     */

  }, {
    key: "getPrintingJob",
    value: function getPrintingJob(jobId) {
      var me = this;

      var url = me._processUrl("jobs/".concat(jobId));

      me.request({
        url: url,
        method: 'GET',
        scope: me,
        success: function success(result) {
          me.rollingProcess(result, url);
        },
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.WebPrintingService.prototype.getPrintingJobResult
     * @description è·å Web æå°ä»»å¡çè¾åºææ¡£ã
     * @param {String} jobId - Web æå°è¾å¥ææ¡£ä»»å¡ IDã
     */

  }, {
    key: "getPrintingJobResult",
    value: function getPrintingJobResult(jobId) {
      var me = this;
      me.request({
        url: me._processUrl("jobs/".concat(jobId, "/result")),
        method: 'GET',
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.WebPrintingService.prototype.getLayoutTemplates
     * @description æ¥è¯¢ Web æå°æå¡ææå¯ç¨çæ¨¡æ¿ä¿¡æ¯ã
     */

  }, {
    key: "getLayoutTemplates",
    value: function getLayoutTemplates() {
      var me = this;
      me.request({
        url: me._processUrl('layouts'),
        method: 'GET',
        scope: me,
        success: me.serviceProcessCompleted,
        failure: me.serviceProcessFailed
      });
    }
    /**
     * @function SuperMap.WebPrintingService.prototype.rollingProcess
     * @description è½®è¯¢æ¥è¯¢ Web æå°ä»»å¡ã
     * @param {Object} result - æå¡å¨è¿åçç»æå¯¹è±¡ã
     */

  }, {
    key: "rollingProcess",
    value: function rollingProcess(result, url) {
      var me = this;

      if (!result) {
        return;
      }

      var id = setInterval(function () {
        me.request({
          url: url,
          method: 'GET',
          scope: me,
          success: function success(result) {
            switch (result.status) {
              case 'FINISHED':
                clearInterval(id);
                me.serviceProcessCompleted(result);
                break;

              case 'ERROR':
                clearInterval(id);
                me.serviceProcessFailed(result);
                break;

              case 'RUNNING':
                me.events.triggerEvent('processRunning', result);
                break;
            }
          },
          failure: me.serviceProcessFailed
        });
      }, 1000);
    }
  }, {
    key: "_processUrl",
    value: function _processUrl(appendContent) {
      if (appendContent) {
        return Util.urlPathAppend(this.url, appendContent);
      }

      return this.url;
    }
  }]);

  return WebPrintingService;
}(CommonServiceBase);
SuperMap.WebPrintingService = WebPrintingService;
// CONCATENATED MODULE: ./src/common/iServer/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/






















































































































































































































































































































































































































































































// CONCATENATED MODULE: ./src/common/online/OnlineResources.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @enum ServiceStatus
 * @memberOf SuperMap
 * @category iPortal/Online
 * @description æå¡åå¸ç¶æã
 */

var ServiceStatus = SuperMap.ServiceStatus = {
  /** ä¸æ¶åï¼ä¸å¯åå¸ã */
  DOES_NOT_INVOLVE: "DOES_NOT_INVOLVE",

  /** åå¸å¤±è´¥ã */
  PUBLISH_FAILED: "PUBLISH_FAILED",

  /** å·²åå¸ã */
  PUBLISHED: "PUBLISHED",

  /** æ­£å¨åå¸ã */
  PUBLISHING: "PUBLISHING",

  /** æªåå¸ã */
  UNPUBLISHED: "UNPUBLISHED",

  /** åæ¶æå¡å¤±è´¥ã */
  UNPUBLISHED_FAILED: "UNPUBLISHED_FAILED"
};

/**
 * 
 * @enum DataItemType
 * @memberOf SuperMap
 * @category iPortal/Online
 * @description æ°æ®é¡¹ç±»åã
 */

var OnlineResources_DataItemType = SuperMap.DataItemType = {
  /** AUDIO */
  AUDIO: "AUDIO",

  /** COLOR */
  COLOR: "COLOR",

  /** COLORSCHEME */
  COLORSCHEME: "COLORSCHEME",

  /** CSV */
  CSV: "CSV",

  /** EXCEL */
  EXCEL: "EXCEL",

  /** FILLSYMBOL */
  FILLSYMBOL: "FILLSYMBOL",

  /** IMAGE */
  IMAGE: "IMAGE",

  /** LAYERTEMPLATE */
  LAYERTEMPLATE: "LAYERTEMPLATE",

  /** LAYOUTTEMPLATE */
  LAYOUTTEMPLATE: "LAYOUTTEMPLATE",

  /** LINESYMBOL */
  LINESYMBOL: "LINESYMBOL",

  /** MAPTEMPLATE */
  MAPTEMPLATE: "MAPTEMPLATE",

  /** MARKERSYMBOL */
  MARKERSYMBOL: "MARKERSYMBOL",

  /** MBTILES */
  MBTILES: "MBTILES",

  /** PHOTOS */
  PHOTOS: "PHOTOS",

  /** SHP */
  SHP: "SHP",

  /** SMTILES */
  SMTILES: "SMTILES",

  /** SVTILES */
  SVTILES: "SVTILES",

  /** THEMETEMPLATE */
  THEMETEMPLATE: "THEMETEMPLATE",

  /** TPK */
  TPK: "TPK",

  /** UDB */
  UDB: "UDB",

  /** UGCV5 */
  UGCV5: "UGCV5",

  /** UNKNOWN */
  UNKNOWN: "UNKNOWN",

  /** VIDEO */
  VIDEO: "VIDEO",

  /** WORKENVIRONMENT */
  WORKENVIRONMENT: "WORKENVIRONMENT",

  /** WORKSPACE */
  WORKSPACE: "WORKSPACE"
};

/**
 * @enum DataItemOrderBy
 * @memberOf SuperMap
 * @category iPortal/Online
 * @description æ°æ®æåºå­æ®µã
 */

var DataItemOrderBy = SuperMap.DataItemOrderBy = {
  /** FILENAME */
  FILENAME: "FILENAME",

  /** ID */
  ID: "ID",

  /** LASTMODIFIEDTIME */
  LASTMODIFIEDTIME: "LASTMODIFIEDTIME",

  /** NICKNAME */
  NICKNAME: "NICKNAME",

  /** SERVICESTATUS */
  SERVICESTATUS: "SERVICESTATUS",

  /** SIZE */
  SIZE: "SIZE",

  /** STATUS */
  STATUS: "STATUS",

  /** TYPE */
  TYPE: "TYPE",

  /** UPDATETIME */
  UPDATETIME: "UPDATETIME",

  /** USERNAME */
  USERNAME: "USERNAME"
};

/**
 * @enum FilterField
 * @memberOf SuperMap
 * @category iPortal/Online
 * @description å³é®å­æ¥è¯¢æ¶çè¿æ»¤å­æ®µã
 */

var FilterField = SuperMap.FilterField = {
  /** LINKPAGE */
  LINKPAGE: "LINKPAGE",

  /** LINKPAGE */
  MAPTITLE: "MAPTITLE",

  /** LINKPAGE */
  NICKNAME: "NICKNAME",

  /** LINKPAGE */
  RESTITLE: "RESTITLE",

  /** LINKPAGE */
  USERNAME: "USERNAME"
};

// CONCATENATED MODULE: ./src/common/online/OnlineServiceBase.js
function OnlineServiceBase_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function OnlineServiceBase_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function OnlineServiceBase_createClass(Constructor, protoProps, staticProps) { if (protoProps) OnlineServiceBase_defineProperties(Constructor.prototype, protoProps); if (staticProps) OnlineServiceBase_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

 // import {SecurityManager} from '../security/SecurityManager';



/**
 * @class SuperMap.OnlineServiceBase
 * @classdesc Online æå¡åºç±»ï¼ä½¿ç¨ key ä½ä¸ºæééå¶çç±»éè¦å®ç°æ­¤ç±»ï¼ã
 * @category iPortal/Online
 * @param {Object} options - æå¡åæ°ã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var OnlineServiceBase = /*#__PURE__*/function () {
  function OnlineServiceBase(options) {
    OnlineServiceBase_classCallCheck(this, OnlineServiceBase);

    options = options || {};
    Util.extend(this, options);
    this.serverType = ServerType.ONLINE;
    this.CLASS_NAME = "SuperMap.OnlineServiceBase";
  }
  /**
   * @function SuperMap.OnlineServiceBase.prototype.request
   * @description è¯·æ± online æå¡
   * @param {string} [method='GET'] - è¯·æ±æ¹å¼, 'GET', 'PUT', 'POST', 'DELETE'ã
   * @param {string} url - æå¡å°åã
   * @param {Object} param - URL æ¥è¯¢åæ°ã
   * @param {Object} [requestOptions] - http è¯·æ±åæ°, æ¯å¦è¯·æ±å¤´ï¼è¶æ¶æ¶é´ç­ã
   * @returns {Promise}  è¿ååå«è¯·æ±ç»æç Promise å¯¹è±¡ã
   */


  OnlineServiceBase_createClass(OnlineServiceBase, [{
    key: "request",
    value: function request(method, url, param) {
      var requestOptions = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
      url = this.createCredentialUrl(url);
      requestOptions['crossOrigin'] = this.options.crossOrigin;
      requestOptions['headers'] = this.options.headers;
      return FetchRequest.commit(method, url, param, requestOptions).then(function (response) {
        return response.json();
      });
    }
    /**
     * @function SuperMap.OnlineServiceBase.prototype.createCredentialUrl
     * @description è¿½å ææä¿¡æ¯ã
     * @param {string} url - å¯¹æ¥ç online æå¡å°åã
     */

  }, {
    key: "createCredentialUrl",
    value: function createCredentialUrl(url) {
      var newUrl = url,
          key = this.getCredential();

      if (key) {
        var paramStr = "key=" + key;
        var endStr = newUrl.substring(newUrl.length - 1, newUrl.length);

        if (newUrl.indexOf("?") > -1 && endStr === "?") {
          newUrl += paramStr;
        } else if (newUrl.indexOf("?") > -1 && endStr !== "?") {
          newUrl += "&" + paramStr;
        } else {
          newUrl += "?" + paramStr;
        }
      }

      return newUrl;
    } //å¶å­ç±»éè¦éåè¯¥æ¹æ³ï¼ä¿®æ¹å¶ä¸­è·åkeyçå­æ®µ
    //å­å¨keyå¯è½æ¯æå¡idå­æ®µï¼å¯è½æ¯urlï¼æèæ¯WebAPIç±»å

  }, {
    key: "getCredential",
    value: function getCredential() {//return SecurityManager.getKey(this.id);
      //æ
      //return SecurityManager.getKey(this.serviceUrl);
    }
  }]);

  return OnlineServiceBase;
}();
SuperMap.OnlineServiceBase = OnlineServiceBase;
// CONCATENATED MODULE: ./src/common/online/OnlineData.js
function OnlineData_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { OnlineData_typeof = function _typeof(obj) { return typeof obj; }; } else { OnlineData_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return OnlineData_typeof(obj); }

function OnlineData_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function OnlineData_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function OnlineData_createClass(Constructor, protoProps, staticProps) { if (protoProps) OnlineData_defineProperties(Constructor.prototype, protoProps); if (staticProps) OnlineData_defineProperties(Constructor, staticProps); return Constructor; }

function OnlineData_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) OnlineData_setPrototypeOf(subClass, superClass); }

function OnlineData_setPrototypeOf(o, p) { OnlineData_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return OnlineData_setPrototypeOf(o, p); }

function OnlineData_createSuper(Derived) { var hasNativeReflectConstruct = OnlineData_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = OnlineData_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = OnlineData_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return OnlineData_possibleConstructorReturn(this, result); }; }

function OnlineData_possibleConstructorReturn(self, call) { if (call && (OnlineData_typeof(call) === "object" || typeof call === "function")) { return call; } return OnlineData_assertThisInitialized(self); }

function OnlineData_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function OnlineData_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function OnlineData_getPrototypeOf(o) { OnlineData_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return OnlineData_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.OnlineData
 * @classdesc Online myData æå¡ã
 * @category iPortal/Online
 * @param {string} serviceRootUrl - æå¡æ ¹å°åã
 * @param {Object} options - æå¡ç¸å³åæ°ã 
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 */

var OnlineData = /*#__PURE__*/function (_OnlineServiceBase) {
  OnlineData_inherits(OnlineData, _OnlineServiceBase);

  var _super = OnlineData_createSuper(OnlineData);

  //TODO ç®åå¹¶æ²¡æå¯¹æ¥æå¡æ¯æçæææä½ï¼æ¥åéè¦è¡¥åå®æ´
  function OnlineData(serviceRootUrl, options) {
    var _this;

    OnlineData_classCallCheck(this, OnlineData);

    _this = _super.call(this, serviceRootUrl);
    options = options || {}; //MD5

    _this.MD5 = null; //æä»¶ç±»åã

    _this.type = null; //æ°æ®ä¸ä¼ èåç§°ã

    _this.userName = null; //æä»¶åç§°ã

    _this.fileName = null; //æä»¶å¤§å°ï¼åä½ä¸º B ã

    _this.size = null; //æå¡åå¸ç¶æã

    _this.serviceStatus = null; //æå¡ id ã

    _this.serviceId = null; //æ°æ®é¡¹ id ã

    _this.id = null; //æåä¿®æ¹æ¶é´ã

    _this.lastModfiedTime = null; //æä»¶ç¶æã

    _this.status = null; //æ°æ®æä»¶å­å¨ id ã

    _this.storageId = null; //æ°æ®çåå¸ä¿¡æ¯ã

    _this.publishInfo = null; //æ°æ®çæéä¿¡æ¯ã

    _this.authorizeSetting = null; //ç¨æ·çæµç§°ã

    _this.nickname = null; //æ°æ®çæ ç­¾ã

    _this.tags = []; //æ°æ®çæè¿°ä¿¡æ¯ã

    _this.description = null; //æ°æ®åå¸çæå¡ä¿¡æ¯éåã

    _this.dataItemServices = null; //æ°æ®åæ ç±»åã

    _this.coordType = null; //æ°æ®å®¡æ ¸ä¿¡æ¯

    _this.dataCheckResult = null; //æ°æ®åæ°æ®ä¿¡æ¯

    _this.dataMetaInfo = null; //æ°æ®çç¼©ç¥å¾è·¯å¾ã

    _this.thumbnail = null;
    Util.extend(OnlineData_assertThisInitialized(_this), options);

    if (_this.id) {
      _this.serviceUrl = serviceRootUrl + "/" + _this.id;
    }

    _this.CLASS_NAME = "SuperMap.OnlineData";
    return _this;
  }
  /**
   * @function SuperMap.OnlineData.prototype.load
   * @description éè¿ URL è¯·æ±è·åè¯¥æå¡å®æ´ä¿¡æ¯ã
   * @returns {Promise} è¿åä¸åå«è¯·æ±ç»æç Promise å¯¹è±¡,è¯·æ±è¿åç»æèªå¨å¡«åå°è¯¥ç±»å±æ§ä¸­ã
   */


  OnlineData_createClass(OnlineData, [{
    key: "load",
    value: function load() {
      if (!this.serviceUrl) {
        return;
      }

      var me = this;
      return me.request("GET", this.serviceUrl).then(function (result) {
        Util.extend(me, result);
      });
    }
    /**
     * @function SuperMap.OnlineData.prototype.getPublishedServices
     * @description è·åæ°æ®åå¸çæææå¡ã
     * @returns {Object} æ°æ®åå¸çæææå¡ã
     */

  }, {
    key: "getPublishedServices",
    value: function getPublishedServices() {
      return this.dataItemServices;
    }
    /**
     * @function SuperMap.OnlineData.prototype.getAuthorizeSetting
     * @description è·åæ°æ®çæéä¿¡æ¯ã
     * @returns {Object} æéä¿¡æ¯ã
     */

  }, {
    key: "getAuthorizeSetting",
    value: function getAuthorizeSetting() {
      return this.authorizeSetting;
    }
  }]);

  return OnlineData;
}(OnlineServiceBase);
SuperMap.OnlineData = OnlineData;
// CONCATENATED MODULE: ./src/common/online/Online.js
function Online_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Online_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Online_createClass(Constructor, protoProps, staticProps) { if (protoProps) Online_defineProperties(Constructor.prototype, protoProps); if (staticProps) Online_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.Online
 * @classdesc å¯¹æ¥ SuperMap Online ææåºç¡æå¡ã
 * @category iPortal/Online
 * @example
 * var online=new SuperMap.Online();
 * var services = online.queryDatas(param);
 * service.then(function(services){
 *      var service= services[0];
 *      service.updateDataInfo();
 * })
 */

var Online = /*#__PURE__*/function () {
  //TODO ç®åå¹¶æ²¡æå¯¹æ¥Onlineçæææä½ï¼éè¦è¡¥åå®æ´
  //æææ¥è¯¢è¿åçæ¯ä¸ä¸ªPromise,å¨å¤é¨ä½¿ç¨çæ¶åéè¿Promiseçthenæ¹æ³è·åå¼æ­¥ç»æ
  function Online() {
    Online_classCallCheck(this, Online);

    this.rootUrl = "https://www.supermapol.com";
    this.webUrl = this.rootUrl + "/web";
    var mContentUrl = this.webUrl + "/mycontent";
    this.mDatasUrl = mContentUrl + "/datas";
    this.CLASS_NAME = "SuperMap.Online";
  }
  /**
   * @function SuperMap.Online.prototype.load
   * @description å è½½ onlineï¼éªè¯ online æ¯å¦å¯ç¨ã
   * @returns {Promise} è¿ååå«ç½ç»è¯·æ±ç»æç Promise å¯¹è±¡ã
   */


  Online_createClass(Online, [{
    key: "load",
    value: function load() {
      return FetchRequest.get(this.rootUrl).then(function (response) {
        return response;
      });
    }
    /**
     * @function SuperMap.Online.prototype.login
     * @description ç»å½Online
     */

  }, {
    key: "login",
    value: function login() {
      SecurityManager.loginOnline(this.rootUrl, true);
    }
    /**
     * @function SuperMap.Online.prototype.queryDatas
     * @description æ¥è¯¢ Online âæçåå®¹â ä¸ âæçæ°æ®â æå¡ï¼éè¦ç»å½ç¶æè·åï¼ï¼å¹¶è¿åå¯æä½çæå¡å¯¹è±¡ã
     * @param {SuperMap.OnlineQueryDatasParameter} parameter - myDatas æå¡èµæºæ¥è¯¢åæ°ã
     * @returns {Promise} è¿ååå«æææ°æ®æå¡ä¿¡æ¯ç Promise å¯¹è±¡ã
     */

  }, {
    key: "queryDatas",
    value: function queryDatas(parameter) {
      var me = this,
          url = me.mDatasUrl;

      if (parameter) {
        parameter = parameter.toJSON();
      }

      return FetchRequest.get(url, parameter).then(function (json) {
        if (!json || !json.content || json.content.length < 1) {
          return;
        }

        var services = [],
            contents = json.content,
            len = contents.length;

        for (var i = 0; i < len; i++) {
          var content = contents[i];
          var service = new OnlineData(me.mDatasUrl, content);
          services.push(service);
        }

        return services;
      });
    }
  }]);

  return Online;
}();
SuperMap.Online = Online;
// CONCATENATED MODULE: ./src/common/online/OnlineQueryDatasParameter.js
function OnlineQueryDatasParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function OnlineQueryDatasParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function OnlineQueryDatasParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) OnlineQueryDatasParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) OnlineQueryDatasParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.OnlineQueryDatasParameter
 * @classdesc myDatas æå¡èµæºæ¥è¯¢åæ°ã
 * @category iPortal/Online
 * @param {Object} options - æ¥è¯¢åæ°ã
 */

var OnlineQueryDatasParameter = /*#__PURE__*/function () {
  function OnlineQueryDatasParameter(options) {
    OnlineQueryDatasParameter_classCallCheck(this, OnlineQueryDatasParameter);

    options = options || {};
    /**
     * @member {Array.<string>} SuperMap.OnlineQueryDatasParameter.prototype.userNames 
     * @description æ°æ®ä½èåãå¯ä»¥æ ¹æ®æ°æ®ä½èåæ¥è¯¢ï¼é»è®¤æ¥è¯¢å¨é¨ã
     */

    this.userNames = null;
    /**
     * @member {Array.<Object>} SuperMap.OnlineQueryDatasParameter.prototype.types
     * @description  æ°æ®ç±»åã
     */

    this.types = null;
    /**
     * @member {string} SuperMap.OnlineQueryDatasParameter.prototype.fileName  
     * @description  æä»¶åç§°ã
     */

    this.fileName = null;
    /**
     * @member {string} SuperMap.OnlineQueryDatasParameter.prototype.serviceStatuses 
     * @description  æå¡åå¸ç¶æã
     */

    this.serviceStatuses = null;
    /**
     * @member {string} SuperMap.OnlineQueryDatasParameter.prototype.serviceId  
     * @description  æå¡ IDã
     */

    this.serviceId = null;
    /**
     * @member {Array.<integer>} SuperMap.OnlineQueryDatasParameter.prototype.ids 
     * @description  ç±æ°æ®é¡¹ ID ç»æçæ´åæ°ç»ã
     */

    this.ids = null;
    /**
     * @member {Array.<string>} SuperMap.OnlineQueryDatasParameter.prototype.keywords 
     * @description å³é®å­ã
     */

    this.keywords = null;
    /**
     * @member {string} SuperMap.OnlineQueryDatasParameter.prototype.orderBy   
     * @description æåºå­æ®µã
     */

    this.orderBy = null;
    /**
     * @member {Array.<string>} SuperMap.OnlineQueryDatasParameter.prototype.tags  
     * @description æ°æ®çæ ç­¾ã
     */

    this.tags = null;
    /**
     * @member {Array.<string>} SuperMap.OnlineQueryDatasParameter.prototype.filterFields   
     * @description ç¨äºå³é®å­æ¥è¯¢æ¶çè¿æ»¤å­æ®µã
     */

    this.filterFields = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.OnlineQueryDatasParameter";
  }
  /**
   * @function SuperMap.OnlineQueryDatasParameter.prototype.toJSON
   * @description è¿åå¯¹åºç JSON å¯¹è±¡ã
   * @returns {Object} å¯¹åºç JSON å¯¹è±¡ã
   */


  OnlineQueryDatasParameter_createClass(OnlineQueryDatasParameter, [{
    key: "toJSON",
    value: function toJSON() {
      var me = this;
      var jsonObj = {
        "types": me.types,
        "fileName": me.fileName,
        "serviceStatuses": me.serviceStatuses,
        "serviceId": me.serviceId,
        "ids": me.ids,
        "keywords": me.keywords,
        "orderBy": me.orderBy,
        "tags": me.tags,
        "filterFields": me.filterFields
      };

      for (var key in jsonObj) {
        if (jsonObj[key] == null) {
          delete jsonObj[key];
        }
      }

      return jsonObj;
    }
  }]);

  return OnlineQueryDatasParameter;
}();
SuperMap.OnlineQueryDatasParameter = OnlineQueryDatasParameter;
// CONCATENATED MODULE: ./src/common/online/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/










// CONCATENATED MODULE: ./src/common/security/KeyServiceParameter.js
function KeyServiceParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function KeyServiceParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function KeyServiceParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) KeyServiceParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) KeyServiceParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.KeyServiceParameter
 * @classdesc keyç³è¯·åæ°
 * @category Security
 * @param {Object} options - åæ°ã
 * @param {string} options.name - ç³è¯·æå¡åç§°ã
 * @param {number} options.serviceIds - æå¡ IDã
 * @param {SuperMap.ClientType} [options.clientType=SuperMap.ClientType.SERVER] - æå¡ç«¯ç±»åã
 * @param {number} options.limitation - æææ
 */

var KeyServiceParameter = /*#__PURE__*/function () {
  function KeyServiceParameter(options) {
    KeyServiceParameter_classCallCheck(this, KeyServiceParameter);

    this.name = null;
    this.serviceIds = null;
    this.clientType = ClientType.SERVER;
    this.limitation = null;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.KeyServiceParameter";
  }
  /**
   * @function SuperMap.KeyServiceParameter.prototype.toJSON
   * @description è½¬æ¢æ JSON å¯¹è±¡
   * @returns {Object} åæ°ç JSON å¯¹è±¡
   */


  KeyServiceParameter_createClass(KeyServiceParameter, [{
    key: "toJSON",
    value: function toJSON() {
      return {
        name: this.name,
        serviceIds: this.serviceIds,
        clientType: this.clientType,
        limitation: this.limitation
      };
    }
  }]);

  return KeyServiceParameter;
}();
SuperMap.KeyServiceParameter = KeyServiceParameter;
// CONCATENATED MODULE: ./src/common/security/ServerInfo.js
function ServerInfo_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.ServerInfo
 * @classdesc æå¡å¨ä¿¡æ¯(å®å¨ç¸å³)ï¼åå«æå¡å¨ç±»åï¼æå¡å°åï¼tokenæå¡å°åç­
 * @category Security
 * @param {string} type - æå¡å¨ç±»å
 * @param {Object} options - æå¡å¨ä¿¡æ¯ç¸å³å¯éåæ°ã
 * @param {string} options.server - æå¡å¨å°å,å¦ï¼http://supermapiserver:8090/iserver
 * @param {string} [options.tokenServiceUrl] - å¦ï¼http://supermapiserver:8090/iserver/services/security/tokens.json
 * @param {string} [options.keyServiceUrl] - å¦ï¼http://supermapiserver:8092/web/mycontent/keys/register.json
 */

var ServerInfo = function ServerInfo(type, options) {
  ServerInfo_classCallCheck(this, ServerInfo);

  /**
   * @member {SuperMap.ServerType} SuperMap.ServerInfo.prototype.type
   * @description æå¡å¨ç±»å
   */
  this.type = type;
  /**
   * @member {string} SuperMap.ServerInfo.prototype.server
   * @description æå¡å¨å°å
   */

  this.server = null;
  /**
   * @member {string} [SuperMap.ServerInfo.prototype.tokenServiceUrl]
   * @description å¦ï¼http://supermapiserver:8090/iserver/services/security/tokens.json
   */

  this.tokenServiceUrl = null;
  /**
   * @member {string} [SuperMap.ServerInfo.prototype.keyServiceUrl]
   * @description å¦ï¼http://supermapiserver:8092/web/mycontent/keys/register.json
   */

  this.keyServiceUrl = null;
  Util.extend(this, options);
  this.CLASS_NAME = "SuperMap.ServerInfo";
  this.type = this.type || ServerType.ISERVER;

  if (!this.server) {
    console.error('server url require is not  undefined');
  } // var patten = /http:\/\/([^\/]+)/i;
  //this.server = this.server.match(patten)[0];


  var tokenServiceSuffix = "/services/security/tokens";

  if (this.type === ServerType.ISERVER && this.server.indexOf("iserver") < 0) {
    tokenServiceSuffix = "/iserver" + tokenServiceSuffix;
  }

  if (!this.tokenServiceUrl) {
    this.tokenServiceUrl = Util.urlPathAppend(this.server, tokenServiceSuffix);
  }

  if (!this.keyServiceUrl) {
    if (this.type === ServerType.IPORTAL) {
      this.keyServiceUrl = Util.urlPathAppend(this.server, "/web/mycontent/keys/register");
    } else if (this.type === ServerType.ONLINE) {
      this.keyServiceUrl = Util.urlPathAppend(this.server, "/web/mycontent/keys");
    }
  }
};
SuperMap.ServerInfo = ServerInfo;
// CONCATENATED MODULE: ./src/common/security/TokenServiceParameter.js
function TokenServiceParameter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function TokenServiceParameter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function TokenServiceParameter_createClass(Constructor, protoProps, staticProps) { if (protoProps) TokenServiceParameter_defineProperties(Constructor.prototype, protoProps); if (staticProps) TokenServiceParameter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.TokenServiceParameter
 * @classdesc token ç³è¯·åæ°ã
 * @category Security
 * @param {Object} options - token ç³è¯·åæ°ã
 * @param {string} options.username - ç¨æ·åã
 * @param {string} options.password - å¯ç ã
 * @param {SuperMap.ClientType} [options.clientType='SuperMap.ClientType.NONE'] - token ç³è¯·çå®¢æ·ç«¯æ è¯ç±»åã
 * @param {string} [options.ip] - clientType=IP æ¶ï¼å¿éã
 * @param {string} [options.referer] -clientType=Referer æ¶ï¼å¿éãå¦ææç§æå® URL çæ¹å¼ç³è¯·ä»¤çï¼åè®¾ç½®ç¸åºç URLã
 * @param {number} [options.expiration=60] - ç³è¯·ä»¤ççæææ,ä»åå¸ä»¤ççæ¶é´å¼å§è®¡ç®,åä½ä¸ºåéã
 *
 *
 */

var TokenServiceParameter = /*#__PURE__*/function () {
  function TokenServiceParameter(options) {
    TokenServiceParameter_classCallCheck(this, TokenServiceParameter);

    /**
     * @member {string} SuperMap.TokenServiceParameter.prototype.userName
     * @description ç¨æ·åã
     */
    this.userName = null;
    /**
     * @member {string} SuperMap.TokenServiceParameter.prototype.password
     * @description å¯ç ã
     */

    this.password = null;
    /**
     * @member {SuperMap.ClientType} SuperMap.TokenServiceParameter.prototype.clientType
     * @description token ç³è¯·çå®¢æ·ç«¯æ è¯ç±»åã
     */

    this.clientType = ClientType.NONE;
    /**
     * @member {string} [SuperMap.TokenServiceParameter.prototype.ip]
     * @description clientType=IP æ¶ï¼å¿éã
     */

    this.ip = null;
    /**
     * @member {string} [SuperMap.TokenServiceParameter.prototype.referer]
     * @description clientType=Referer æ¶ï¼å¿éãå¦ææç§æå® URL çæ¹å¼ç³è¯·ä»¤çï¼åè®¾ç½®ç¸åºç URLã
     */

    this.referer = null;
    /**
     * @member {number} SuperMap.TokenServiceParameter.prototype.expiration
     * @description ç³è¯·ä»¤ççæææï¼ä»åå¸ä»¤ççæ¶é´å¼å§è®¡ç®ï¼åä½ä¸ºåéã
     */

    this.expiration = 60;
    Util.extend(this, options);
    this.CLASS_NAME = "SuperMap.TokenServiceParameter";
  }
  /**
   * @function SuperMap.TokenServiceParameter.prototype.toJSON
   * @description å°ææä¿¡æ¯è½¬æ JSON å­ç¬¦ä¸²
   * @returns {string} åæ°ç JSON å­ç¬¦ä¸²
   */


  TokenServiceParameter_createClass(TokenServiceParameter, [{
    key: "toJSON",
    value: function toJSON() {
      return {
        userName: this.userName,
        password: this.password,
        clientType: this.clientType,
        ip: this.ip,
        referer: this.referer,
        expiration: this.expiration
      };
    }
  }]);

  return TokenServiceParameter;
}();
SuperMap.TokenServiceParameter = TokenServiceParameter;
// CONCATENATED MODULE: ./src/common/security/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/








// CONCATENATED MODULE: external "function(){try{return elasticsearch}catch(e){return {}}}()"
var external_function_try_return_elasticsearch_catch_e_return_namespaceObject = function(){try{return elasticsearch}catch(e){return {}}}();
var external_function_try_return_elasticsearch_catch_e_return_default = /*#__PURE__*/__webpack_require__.n(external_function_try_return_elasticsearch_catch_e_return_namespaceObject);

// CONCATENATED MODULE: ./src/common/thirdparty/elasticsearch/ElasticSearch.js
function ElasticSearch_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ElasticSearch_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ElasticSearch_createClass(Constructor, protoProps, staticProps) { if (protoProps) ElasticSearch_defineProperties(Constructor.prototype, protoProps); if (staticProps) ElasticSearch_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.ElasticSearch
 * @classdesc ElasticSearchæå¡ç±»ã
 * @category ElasticSearch
 * @param {string} url - ElasticSearchæå¡å°åã
 * @param {Object} options - åæ°ã
 * @param {function} [options.change] - æå¡å¨è¿åæ°æ®åæ§è¡çå½æ°ãåºå¼,ä¸å»ºè®®ä½¿ç¨ãä½¿ç¨searchæmsearchæ¹æ³ã
 * @param {boolean} [options.openGeoFence=false] - æ¯å¦å¼å¯å°çå´æ éªè¯ï¼é»è®¤ä¸ºä¸å¼å¯ã
 * @param {function} [options.outOfGeoFence] - æ°æ®è¶åºå°çå´æ åæ§è¡çå½æ°ã
 * @param {Object} [options.geoFence] - å°çå´æ ã
 */

var ElasticSearch = /*#__PURE__*/function () {
  function ElasticSearch(url, options) {
    ElasticSearch_classCallCheck(this, ElasticSearch);

    options = options || {};
    /**
     *  @member {string} SuperMap.ElasticSearch.prototype.url 
     *  @description ElasticSearchæå¡å°å
     */

    this.url = url;
    /**
     *  @member {Object} SuperMap.ElasticSearch.prototype.client
     *  @description client ESå®¢æ·ç«¯
     */

    this.client = new (external_function_try_return_elasticsearch_catch_e_return_default()).Client({
      host: this.url
    });
    /**
     *  @deprecated
     *  @member {function} [SuperMap.ElasticSearch.prototype.change]
     *  @description æå¡å¨è¿åæ°æ®åæ§è¡çå½æ°ãåºå¼,ä¸å»ºè®®ä½¿ç¨ãä½¿ç¨searchæmsearchæ¹æ³ã
     */

    this.change = null;
    /**
     *  @member {boolean} [SuperMap.ElasticSearch.prototype.openGeoFence=false]
     *  @description æ¯å¦å¼å¯å°çå´æ éªè¯ï¼é»è®¤ä¸ºä¸å¼å¯ã
     */

    this.openGeoFence = false;
    /**
     *  @member {function} [SuperMap.ElasticSearch.prototype.outOfGeoFence]
     *  @description æ°æ®è¶åºå°çå´æ åæ§è¡çå½æ°
     */

    this.outOfGeoFence = null;
    /**
     * @member {Object} [SuperMap.ElasticSearch.prototype.geoFence]
     * @description å°çå´æ 
     * @example {
    *    radius: 1000,//åä½æ¯m
    *    center: [104.40, 30.43],
    *    unit: 'meter|degree'
    *  }
     */

    this.geoFence = null;
    /*
     * Constant: EVENT_TYPES
     * {Array.<String>}
     * æ­¤ç±»æ¯æçäºä»¶ç±»åã
     *
     */

    this.EVENT_TYPES = ['change', 'error', 'outOfGeoFence'];
    /**
     * @member {SuperMap.Events} SuperMap.ElasticSearch.prototype.events
     * @description äºä»¶
     */

    this.events = new Events(this, null, this.EVENT_TYPES);
    /**
     * @member {Object} SuperMap.ElasticSearch.prototype.eventListeners
     * @description å¬å¨å¯¹è±¡ï¼å¨æé å½æ°ä¸­è®¾ç½®æ­¤åæ°ï¼å¯éï¼ï¼å¯¹ MapService æ¯æçä¸¤ä¸ªäºä»¶ processCompleted ãprocessFailed è¿è¡çå¬ï¼
     * ç¸å½äºè°ç¨ SuperMap.Events.on(eventListeners)ã
     */

    this.eventListeners = null;
    Util.extend(this, options);

    if (this.eventListeners instanceof Object) {
      this.events.on(this.eventListeners);
    }
  }
  /**
   * @function  SuperMap.ElasticSearch.prototype.setGeoFence
   * @description è®¾ç½®å°çå´æ ï¼openGeoFenceåæ°ä¸ºtrueçæ¶åï¼è®¾ç½®çå°çå´æ æçæã
   * @param {SuperMap.Geometry} geoFence - å°çå´æ ã
   */


  ElasticSearch_createClass(ElasticSearch, [{
    key: "setGeoFence",
    value: function setGeoFence(geoFence) {
      this.geoFence = geoFence;
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.bulk
     * @description æ¹éæä½APIï¼åè®¸æ§è¡å¤ä¸ªç´¢å¼/å é¤æä½ã
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-bulk}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "bulk",
    value: function bulk(params, callback) {
      return this.client.bulk(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.clearScroll
     * @description éè¿æå®scrollåæ°è¿è¡æ¥è¯¢æ¥æ¸é¤å·²ç»åå»ºçscrollè¯·æ±ã
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-clearscroll}</br>
     *æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-scroll.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "clearScroll",
    value: function clearScroll(params, callback) {
      return this.client.clearScroll(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.count
     * @description è·åéç¾¤ãç´¢å¼ãç±»åææ¥è¯¢çææ¡£ä¸ªæ°ã
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-count}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/search-count.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "count",
    value: function count(params, callback) {
      return this.client.count(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.count
     * @description å¨ç¹å®ç´¢å¼ä¸­æ·»å ä¸ä¸ªç±»ååçJSONææ¡£ï¼ä½¿å¶å¯æç´¢ãå¦æå·æç¸åindexï¼typeä¸idå·²ç»å­å¨çææ¡£å°åçéè¯¯ã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-create}
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-index_.html}
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "create",
    value: function create(params, callback) {
      return this.client.create(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.delete
     * @description æ ¹æ®å¶IDä»ç¹å®ç´¢å¼ä¸­å é¤é®å¥çJSONææ¡£ã
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-delete}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-delete.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "delete",
    value: function _delete(params, callback) {
      return this.client["delete"](params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.delete
     * @description æ ¹æ®å¶IDä»ç¹å®ç´¢å¼ä¸­å é¤é®å¥çJSONææ¡£ã
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-deletebyquery}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-delete-by-query.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "deleteByQuery",
    value: function deleteByQuery(params, callback) {
      return this.client.deleteByQuery(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.delete
     * @description æ ¹æ®å¶IDå é¤èæ¬ã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-deletescript}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-scripting.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "deleteScript",
    value: function deleteScript(params, callback) {
      return this.client.deleteScript(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.deleteTemplate
     * @description æ ¹æ®å¶IDå é¤æ¨¡æ¿ã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-deletetemplate}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/search-template.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "deleteTemplate",
    value: function deleteTemplate(params, callback) {
      return this.client.deleteTemplate(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.exists
     * @description æ£æ¥ç»å®ææ¡£æ¯å¦å­å¨ã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-exists}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-get.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "exists",
    value: function exists(params, callback) {
      return this.client.exists(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.existsSource
     * @description æ£æ¥èµæºæ¯å¦å­å¨ã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-existssource}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-get.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "existsSource",
    value: function existsSource(params, callback) {
      return this.client.existsSource(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.explain
     * @description æä¾ä¸ç¹å®æ¥è¯¢ç¸å³çç¹å®ææ¡£åæ°çè¯¦ç»ä¿¡æ¯ãå®è¿ä¼åè¯æ¨ææ¡£æ¯å¦ä¸æå®çæ¥è¯¢å¹éã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-explain}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/search-explain.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "explain",
    value: function explain(params, callback) {
      return this.client.explain(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.fieldCaps
     * @description åè®¸æ£ç´¢å¤ä¸ªç´¢å¼ä¹é´çå­æ®µçåè½ã(å®éªæ§APIï¼å¯è½ä¼å¨æªæ¥çæ¬ä¸­å é¤)</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-fieldcaps}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/search-field-caps.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "fieldCaps",
    value: function fieldCaps(params, callback) {
      return this.client.fieldCaps(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.get
     * @description ä»ç´¢å¼è·åä¸ä¸ªåºäºå¶idçç±»åçJSONææ¡£ã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-get}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-get.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "get",
    value: function get(params, callback) {
      return this.client.get(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.getScript
     * @description è·åèæ¬ã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-getscript}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-scripting.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "getScript",
    value: function getScript(params, callback) {
      return this.client.getScript(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.getSource
     * @description éè¿ç´¢å¼ï¼ç±»ååIDè·åææ¡£çæºã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-getsource}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-get.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "getSource",
    value: function getSource(params, callback) {
      return this.client.getSource(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.getTemplate
     * @description è·åæ¨¡æ¿ã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-gettemplate}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/search-template.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "getTemplate",
    value: function getTemplate(params, callback) {
      return this.client.getTemplate(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.index
     * @description å¨ç´¢å¼ä¸­å­å¨ä¸ä¸ªé®å¥çJSONææ¡£ï¼ä½¿å¶å¯æç´¢ã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-index}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-index_.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "index",
    value: function index(params, callback) {
      return this.client.index(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.info
     * @description ä»å½åéç¾¤è·ååºæ¬ä¿¡æ¯ã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-info}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/index.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "info",
    value: function info(params, callback) {
      return this.client.info(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.mget
     * @description æ ¹æ®ç´¢å¼ï¼ç±»åï¼å¯éï¼åidsæ¥è·åå¤ä¸ªææ¡£ãmgetæéçä¸»ä½å¯ä»¥éç¨ä¸¤ç§å½¢å¼ï¼ææ¡£ä½ç½®æ°ç»æææ¡£IDæ°ç»ã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-mget}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-multi-get.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "mget",
    value: function mget(params, callback) {
      return this.client.mget(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.msearch
     * @description å¨åä¸è¯·æ±ä¸­æ§è¡å¤ä¸ªæç´¢è¯·æ±ã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-msearch}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/search-multi-search.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - è¯·æ±è¿åçåè°å½æ°ãä¹å¯ä»¥ä½¿ç¨thenè¡¨è¾¾å¼è·åè¿åç»æã
     *     åè°åæ°ï¼error,responseãç»æå­å¨å¨response.responsesä¸­
     */

  }, {
    key: "msearch",
    value: function msearch(params, callback) {
      var me = this;
      return me.client.msearch(params).then(function (resp) {
        me._update(resp.responses, callback);

        return resp;
      }, function (err) {
        callback(err);
        me.events.triggerEvent('error', {
          error: err
        });
        return err;
      });
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.msearchTemplate
     * @description å¨åä¸è¯·æ±ä¸­æ§è¡å¤ä¸ªæç´¢æ¨¡æ¿è¯·æ±ã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-msearchtemplate}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/search-template.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "msearchTemplate",
    value: function msearchTemplate(params, callback) {
      return this.client.msearchTemplate(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.mtermvectors
     * @description å¤termvectors APIåè®¸ä¸æ¬¡è·å¾å¤ä¸ªtermvectorsã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-mtermvectors}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-multi-termvectors.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "mtermvectors",
    value: function mtermvectors(params, callback) {
      return this.client.mtermvectors(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.ping
     * @description æµè¯è¿æ¥ã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-ping}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/index.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "ping",
    value: function ping(params, callback) {
      return this.client.ping(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.putScript
     * @description æ·»å èæ¬ã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-putscript}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-scripting.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "putScript",
    value: function putScript(params, callback) {
      return this.client.putScript(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.putTemplate
     * @description æ·»å æ¨¡æ¿ã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-puttemplate}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/search-template.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "putTemplate",
    value: function putTemplate(params, callback) {
      return this.client.putTemplate(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.reindex
     * @description éæ°ç´¢å¼ã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-reindex}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-reindex.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "reindex",
    value: function reindex(params, callback) {
      return this.client.reindex(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.reindexRessrottle
     * @description éæ°ç´¢å¼ã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-reindexrethrottle}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-reindex.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "reindexRessrottle",
    value: function reindexRessrottle(params, callback) {
      return this.client.reindexRessrottle(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.renderSearchTemplate
     * @description æç´¢æ¨¡æ¿ã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-rendersearchtemplate}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/search-template.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "renderSearchTemplate",
    value: function renderSearchTemplate(params, callback) {
      return this.client.renderSearchTemplate(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.scroll
     * @description  å¨search()è°ç¨ä¸­æå®æ»å¨åæ°ä¹åï¼æ»å¨æç´¢è¯·æ±ï¼æ£ç´¢ä¸ä¸ç»ç»æï¼ã</br>
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-scroll}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-scroll.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "scroll",
    value: function scroll(params, callback) {
      return this.client.scroll(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.search
     * @description  å¨search()è°ç¨ä¸­æå®æ»å¨åæ°ä¹åï¼æ»å¨æç´¢è¯·æ±ï¼æ£ç´¢ä¸ä¸ç»ç»æï¼ã
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-search}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/search-search.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - è¯·æ±è¿åçåè°å½æ°ãä¹å¯ä»¥ä½¿ç¨thenè¡¨è¾¾å¼è·åè¿åç»æã
     *     åè°åæ°ï¼error,response,ç»æå­å¨å¨response.responsesä¸­
     */

  }, {
    key: "search",
    value: function search(params, callback) {
      var me = this;
      return me.client.search(params).then(function (resp) {
        me._update(resp.responses, callback);

        return resp;
      }, function (err) {
        callback(err);
        me.events.triggerEvent('error', {
          error: err
        });
        return err;
      });
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.searchShards
     * @description  è¿åè¦æ§è¡æç´¢è¯·æ±çç´¢å¼ååçã
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-searchshards}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/search-shards.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "searchShards",
    value: function searchShards(params, callback) {
      return this.client.searchShards(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.searchTemplate
     * @description  æç´¢æ¨¡æ¿ã
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-searchtemplate}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/search-suggesters.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "searchTemplate",
    value: function searchTemplate(params, callback) {
      return this.client.searchTemplate(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.suggest
     * @description è¯¥å»ºè®®åè½éè¿ä½¿ç¨ç¹å®çå»ºè®®èï¼åºäºææä¾çææ¬æ¥å»ºè®®ç±»ä¼¼çæ¯è¯­ã
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-suggest}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/search-suggesters.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "suggest",
    value: function suggest(params, callback) {
      return this.client.suggest(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.termvectors
     * @description è¿åæå³ç¹å®ææ¡£å­æ®µä¸­çæ¯è¯­çä¿¡æ¯åç»è®¡ä¿¡æ¯ã
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-termvectors}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-termvectors.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "termvectors",
    value: function termvectors(params, callback) {
      return this.client.termvectors(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.update
     * @description æ´æ°ææ¡£çé¨åã
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-update}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-update.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "update",
    value: function update(params, callback) {
      return this.client.update(params, callback);
    }
    /**
     * @function  SuperMap.ElasticSearch.prototype.update
     * @description éè¿æ¥è¯¢APIæ¥æ´æ°ææ¡£ã
     * åæ°è®¾ç½®åè {@link https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/api-reference.html#api-updatebyquery}</br>
     * æ´å¤ä¿¡æ¯åè {@link https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-update-by-query.html}</br>
     * @param {Object} params - åæ°ã
     * @param {function} callback - åè°å½æ°ã
     */

  }, {
    key: "updateByQuery",
    value: function updateByQuery(params, callback) {
      return this.client.updateByQuery(params, callback);
    }
  }, {
    key: "_update",
    value: function _update(data, callback) {
      var me = this;

      if (!data) {
        return;
      }

      me.data = data;

      if (me.openGeoFence && me.geoFence) {
        me._validateDatas(data);
      }

      me.events.triggerEvent('change', {
        data: me.data
      }); //changeæ¹æ³å·²åºå¼ï¼ä¸å»ºè®®ä½¿ç¨ãå»ºè®®ä½¿ç¨searchæ¹æ³çç¬¬äºä¸ªåæ°ä¼ å¥è¯·æ±æåçåè°

      if (me.change) {
        me.change && me.change(data);
      } else {
        //å responsesæ¯ä¸ºäºä¿æè·åæ¥esèªèº«çæ°æ®ç»æä¸è´
        callback && callback(undefined, {
          responses: data
        });
      }
    }
  }, {
    key: "_validateDatas",
    value: function _validateDatas(datas) {
      if (!datas) {
        return;
      }

      if (!(datas instanceof Array)) {
        datas = [datas];
      }

      var i,
          len = datas.length;

      for (i = 0; i < len; i++) {
        this._validateData(datas[i]);
      }
    }
  }, {
    key: "_validateData",
    value: function _validateData(data) {
      var me = this;
      data.hits.hits.map(function (source) {
        var content = source._source;

        var meterUnit = me._getMeterPerMapUnit(me.geoFence.unit);

        var geoFenceCX = me.geoFence.center[0] * meterUnit;
        var geoFenceCY = me.geoFence.center[1] * meterUnit;
        var contentX = content.x * meterUnit;
        var contentY = content.y * meterUnit;

        var distance = me._distance(contentX, contentY, geoFenceCX, geoFenceCY);

        var radius = me.geoFence.radius;

        if (distance > radius) {
          me.outOfGeoFence && me.outOfGeoFence(data);
          me.events.triggerEvent('outOfGeoFence', {
            data: data
          });
        }

        return source;
      });
    }
  }, {
    key: "_distance",
    value: function _distance(x1, y1, x2, y2) {
      return Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));
    }
  }, {
    key: "_getMeterPerMapUnit",
    value: function _getMeterPerMapUnit(mapUnit) {
      var earchRadiusInMeters = 6378137;
      var meterPerMapUnit;

      if (mapUnit === 'meter') {
        meterPerMapUnit = 1;
      } else if (mapUnit === 'degree') {
        // æ¯åº¦è¡¨ç¤ºå¤å°ç±³ã
        meterPerMapUnit = Math.PI * 2 * earchRadiusInMeters / 360;
      }

      return meterPerMapUnit;
    }
  }]);

  return ElasticSearch;
}();
SuperMap.ElasticSearch = ElasticSearch;
// CONCATENATED MODULE: ./src/common/thirdparty/elasticsearch/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


// CONCATENATED MODULE: ./src/common/thirdparty/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Util.js
function Util_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Util_typeof = function _typeof(obj) { return typeof obj; }; } else { Util_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Util_typeof(obj); }

function Util_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Util_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Util_createClass(Constructor, protoProps, staticProps) { if (protoProps) Util_defineProperties(Constructor.prototype, protoProps); if (staticProps) Util_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @private
 * @class  SuperMap.LevelRenderer.Tool.Util
 * @category Visualization Theme
 * LevelRenderer åºç¡å·¥å·ç±»
 *
 */
var Util_Util = /*#__PURE__*/function () {
  /**
   * @function SuperMap.LevelRenderer.Tool.Util.constructor
   * @description æé å½æ°ã
   *
   */
  function Util() {
    Util_classCallCheck(this, Util);

    /**
     * @member {Object} SuperMap.LevelRenderer.Tool.Util.prototype.BUILTIN_OBJECT
     * @description ç¨äºå¤çmergeæ¶æ æ³éåDateç­å¯¹è±¡çé®é¢
     */
    this.BUILTIN_OBJECT = {
      '[object Function]': 1,
      '[object RegExp]': 1,
      '[object Date]': 1,
      '[object Error]': 1,
      '[object CanvasGradient]': 1
    };
    /**
     * @member {Object} SuperMap.LevelRenderer.Tool.Util.prototype._ctx
     */

    this._ctx = null;
    /**
     * Property: _canvas
     * {Object}
     */

    this._canvas = null;
    /**
     * Property: _pixelCtx
     * {Object}
     */

    this._pixelCtx = null;
    /**
     * Property: _width
     * {Object}
     */

    this._width = null;
    /**
     * Property: _height
     * {Object}
     */

    this._height = null;
    /**
     * Property: _offsetX
     * {Object}
     */

    this._offsetX = 0;
    /**
     * Property: _offsetY
     * {Object}
     */

    this._offsetY = 0;
    this.CLASS_NAME = "SuperMap.LevelRenderer.Tool.Util";
  }
  /**
   * @function SuperMap.LevelRenderer.Tool.Util.prototype.clone
   * @description å¯¹ä¸ä¸ªobjectè¿è¡æ·±åº¦æ·è´ã
   * 
   * @param {Object} source - éè¦è¿è¡æ·è´çå¯¹è±¡ã
   * @return {Object} æ·è´åçæ°å¯¹è±¡ã
   */


  Util_createClass(Util, [{
    key: "clone",
    value: function clone(source) {
      var BUILTIN_OBJECT = this.BUILTIN_OBJECT;

      if (Util_typeof(source) == 'object' && source !== null) {
        var result = source;

        if (source instanceof Array) {
          result = [];

          for (var i = 0, len = source.length; i < len; i++) {
            result[i] = this.clone(source[i]);
          }
        } else if (!BUILTIN_OBJECT[Object.prototype.toString.call(source)]) {
          result = {};

          for (var key in source) {
            if (source.hasOwnProperty(key)) {
              result[key] = this.clone(source[key]);
            }
          }
        }

        return result;
      }

      return source;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Util.prototype.mergeItem
     * @description åå¹¶æºå¯¹è±¡çåä¸ªå±æ§å°ç®æ å¯¹è±¡ã
     *
     * @param {Object} target - ç®æ å¯¹è±¡ã
     * @param {Object} source - æºå¯¹è±¡ã
     * @param {string} key - é®ã
     * @param {boolean} overwrite - æ¯å¦è¦çã
     * @return {Object} ç®æ å¯¹è±¡
     */

  }, {
    key: "mergeItem",
    value: function mergeItem(target, source, key, overwrite) {
      var BUILTIN_OBJECT = this.BUILTIN_OBJECT;

      if (source.hasOwnProperty(key)) {
        if (Util_typeof(target[key]) == 'object' && !BUILTIN_OBJECT[Object.prototype.toString.call(target[key])]) {
          // å¦æéè¦éå½è¦çï¼å°±éå½è°ç¨merge
          this.merge(target[key], source[key], overwrite);
        } else if (overwrite || !(key in target)) {
          // å¦ååªå¤çoverwriteä¸ºtrueï¼æèå¨ç®æ å¯¹è±¡ä¸­æ²¡ææ­¤å±æ§çæåµ
          target[key] = source[key];
        }
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Util.prototype.merge
     * @description åå¹¶æºå¯¹è±¡çå±æ§å°ç®æ å¯¹è±¡ã
     * 
     * @param {Object} target - ç®æ å¯¹è±¡ã
     * @param {Object} source - æºå¯¹è±¡ã
     * @param {boolean} overwrite - æ¯å¦è¦çã
     * @return {Object} ç®æ å¯¹è±¡ã
     */

  }, {
    key: "merge",
    value: function merge(target, source, overwrite) {
      for (var i in source) {
        this.mergeItem(target, source, i, overwrite);
      }

      return target;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Util.prototype.getContext
     * @description è·å Canvas ä¸ä¸æã
     * @return {Object} ä¸ä¸æã
     */

  }, {
    key: "getContext",
    value: function getContext() {
      if (!this._ctx) {
        this._ctx = document.createElement('canvas').getContext('2d');
      }

      return this._ctx;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Util.prototype.getPixelContext
     * @description è·ååç´ æ¾åä¸ç¨çä¸ä¸æã
     * @return {Object} åç´ æ¾åä¸ç¨çä¸ä¸æã
     */

  }, {
    key: "getPixelContext",
    value: function getPixelContext() {
      if (!this._pixelCtx) {
        this._canvas = document.createElement('canvas');
        this._width = this._canvas.width;
        this._height = this._canvas.height;
        this._pixelCtx = this._canvas.getContext('2d');
      }

      return this._pixelCtx;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Util.prototype.adjustCanvasSize
     * @description å¦æåæ å¤å¨_canvaså¤é¨ï¼æ¹å_canvasçå¤§å°ï¼ä¿®æ¹canvasçå¤§å° éè¦éæ°è®¾ç½®translate
     *
     * @param {number} x - æ¨ªåæ ã
     * @param {number} y - çºµåæ ã
     *
     */

  }, {
    key: "adjustCanvasSize",
    value: function adjustCanvasSize(x, y) {
      var _canvas = this._canvas;
      var _pixelCtx = this._pixelCtx;
      var _width = this._width;
      var _height = this._height;
      var _offsetX = this._offsetX;
      var _offsetY = this._offsetY; // æ¯æ¬¡å çé¿åº¦

      var _v = 100;

      var _flag;

      if (x + _offsetX > _width) {
        _width = x + _offsetX + _v;
        _canvas.width = _width;
        _flag = true;
      }

      if (y + _offsetY > _height) {
        _height = y + _offsetY + _v;
        _canvas.height = _height;
        _flag = true;
      }

      if (x < -_offsetX) {
        _offsetX = Math.ceil(-x / _v) * _v;
        _width += _offsetX;
        _canvas.width = _width;
        _flag = true;
      }

      if (y < -_offsetY) {
        _offsetY = Math.ceil(-y / _v) * _v;
        _height += _offsetY;
        _canvas.height = _height;
        _flag = true;
      }

      if (_flag) {
        _pixelCtx.translate(_offsetX, _offsetY);
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Util.prototype.getPixelOffset
     * @description è·ååç´ canvasçåç§»éã
     * @return {Object} åç§»éã
     */

  }, {
    key: "getPixelOffset",
    value: function getPixelOffset() {
      return {
        x: this._offsetX,
        y: this._offsetY
      };
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Util.prototype.indexOf
     * @description æ¥è¯¢æ°ç»ä¸­åç´ çindex
     * @return {Object} åç§»éã
     */

  }, {
    key: "indexOf",
    value: function indexOf(array, value) {
      if (array.indexOf) {
        return array.indexOf(value);
      }

      for (var i = 0, len = array.length; i < len; i++) {
        if (array[i] === value) {
          return i;
        }
      }

      return -1;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Util.prototype.inherits
     * @description æé ç±»ç»§æ¿å³ç³»
     * 
     * @param {Function} clazz - æºç±»ã
     * @param {Function} baseClazz - åºç±»ã
     * @return {Object} åç§»éã
     */

  }, {
    key: "inherits",
    value: function inherits(clazz, baseClazz) {
      var clazzPrototype = clazz.prototype;

      function F() {}

      F.prototype = baseClazz.prototype;
      clazz.prototype = new F();

      for (var prop in clazzPrototype) {
        clazz.prototype[prop] = clazzPrototype[prop];
      }

      clazz.constructor = clazz;
    }
  }]);

  return Util;
}();
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Color.js
function Color_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Color_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Color_createClass(Constructor, protoProps, staticProps) { if (protoProps) Color_defineProperties(Constructor.prototype, protoProps); if (staticProps) Color_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @class  SuperMap.LevelRenderer.Tool.Color
 * @category Visualization Theme
 * @classdesc LevelRenderer å·¥å·-é¢è²è¾å©ç±»
 * @private 
 */

var Color = /*#__PURE__*/function () {
  function Color() {
    Color_classCallCheck(this, Color);

    /**
     * @member {SuperMap.LevelRenderer.Tool.Util} SuperMap.LevelRenderer.Tool.Color.prototype.util
     * @description LevelRenderer åºç¡å·¥å·å¯¹è±¡ã
     */
    this.util = new Util_Util();
    /**
     * @member {Object} SuperMap.LevelRenderer.Tool.Color.prototype._ctx
     * @description _ctxã
     */

    this._ctx = null;
    /**
     * @member {Array} SuperMap.LevelRenderer.Tool.Color.prototype.palette
     * @description é»è®¤è²æ¿ãè²æ¿æ¯ä¸ä¸ªåå«å¾è¡¨é»è®¤é¢è²ç³»åçæ°ç»ï¼å½è²æ¿ä¸­ææé¢è²è¢«ä½¿ç¨è¿åï¼åå°ä»æ°åå°è²æ¿ä¸­çç¬¬ä¸ä¸ªé¢è²ã
     */

    this.palette = ['#ff9277', ' #dddd00', ' #ffc877', ' #bbe3ff', ' #d5ffbb', '#bbbbff', ' #ddb000', ' #b0dd00', ' #e2bbff', ' #ffbbe3', '#ff7777', ' #ff9900', ' #83dd00', ' #77e3ff', ' #778fff', '#c877ff', ' #ff77ab', ' #ff6600', ' #aa8800', ' #77c7ff', '#ad77ff', ' #ff77ff', ' #dd0083', ' #777700', ' #00aa00', '#0088aa', ' #8400dd', ' #aa0088', ' #dd0000', ' #772e00'];
    /**
     * @member {Array} SuperMap.LevelRenderer.Tool.Color.prototype._palette
     * @description å¤ä½è²æ¿ï¼ç¨äºå¤ä½  palette
     */

    this._palette = this.palette;
    /**
     * @member {string} SuperMap.LevelRenderer.Tool.Color.prototype.highlightColor
     * @description é«äº®è²
     */

    this.highlightColor = 'rgba(0,0,255,1)';
    /**
     * @member {string} SuperMap.LevelRenderer.Tool.Color.prototype._highlightColor
     * @description å¤ä½é«äº®è²
     */

    this._highlightColor = this.highlightColor;
    /**
     * @member {string} SuperMap.LevelRenderer.Tool.Color.prototype.colorRegExp
     * @description é¢è²æ ¼å¼ï¼æ­£åè¡¨è¾¾å¼ã
     */

    this.colorRegExp = /^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i;
    /**
     * @member {string} SuperMap.LevelRenderer.Tool.Color.prototype._nameColors
     * @description é¢è²åã
     */

    this._nameColors = {
      aliceblue: '#f0f8ff',
      antiquewhite: '#faebd7',
      aqua: '#0ff',
      aquamarine: '#7fffd4',
      azure: '#f0ffff',
      beige: '#f5f5dc',
      bisque: '#ffe4c4',
      black: '#000',
      blanchedalmond: '#ffebcd',
      blue: '#00f',
      blueviolet: '#8a2be2',
      brown: '#a52a2a',
      burlywood: '#deb887',
      cadetblue: '#5f9ea0',
      chartreuse: '#7fff00',
      chocolate: '#d2691e',
      coral: '#ff7f50',
      cornflowerblue: '#6495ed',
      cornsilk: '#fff8dc',
      crimson: '#dc143c',
      cyan: '#0ff',
      darkblue: '#00008b',
      darkcyan: '#008b8b',
      darkgoldenrod: '#b8860b',
      darkgray: '#a9a9a9',
      darkgrey: '#a9a9a9',
      darkgreen: '#006400',
      darkkhaki: '#bdb76b',
      darkmagenta: '#8b008b',
      darkolivegreen: '#556b2f',
      darkorange: '#ff8c00',
      darkorchid: '#9932cc',
      darkred: '#8b0000',
      darksalmon: '#e9967a',
      darkseagreen: '#8fbc8f',
      darkslateblue: '#483d8b',
      darkslategray: '#2f4f4f',
      darkslategrey: '#2f4f4f',
      darkturquoise: '#00ced1',
      darkviolet: '#9400d3',
      deeppink: '#ff1493',
      deepskyblue: '#00bfff',
      dimgray: '#696969',
      dimgrey: '#696969',
      dodgerblue: '#1e90ff',
      firebrick: '#b22222',
      floralwhite: '#fffaf0',
      forestgreen: '#228b22',
      fuchsia: '#f0f',
      gainsboro: '#dcdcdc',
      ghostwhite: '#f8f8ff',
      gold: '#ffd700',
      goldenrod: '#daa520',
      gray: '#808080',
      grey: '#808080',
      green: '#008000',
      greenyellow: '#adff2f',
      honeydew: '#f0fff0',
      hotpink: '#ff69b4',
      indianred: '#cd5c5c',
      indigo: '#4b0082',
      ivory: '#fffff0',
      khaki: '#f0e68c',
      lavender: '#e6e6fa',
      lavenderblush: '#fff0f5',
      lawngreen: '#7cfc00',
      lemonchiffon: '#fffacd',
      lightblue: '#add8e6',
      lightcoral: '#f08080',
      lightcyan: '#e0ffff',
      lightgoldenrodyellow: '#fafad2',
      lightgray: '#d3d3d3',
      lightgrey: '#d3d3d3',
      lightgreen: '#90ee90',
      lightpink: '#ffb6c1',
      lightsalmon: '#ffa07a',
      lightseagreen: '#20b2aa',
      lightskyblue: '#87cefa',
      lightslategray: '#789',
      lightslategrey: '#789',
      lightsteelblue: '#b0c4de',
      lightyellow: '#ffffe0',
      lime: '#0f0',
      limegreen: '#32cd32',
      linen: '#faf0e6',
      magenta: '#f0f',
      maroon: '#800000',
      mediumaquamarine: '#66cdaa',
      mediumblue: '#0000cd',
      mediumorchid: '#ba55d3',
      mediumpurple: '#9370d8',
      mediumseagreen: '#3cb371',
      mediumslateblue: '#7b68ee',
      mediumspringgreen: '#00fa9a',
      mediumturquoise: '#48d1cc',
      mediumvioletred: '#c71585',
      midnightblue: '#191970',
      mintcream: '#f5fffa',
      mistyrose: '#ffe4e1',
      moccasin: '#ffe4b5',
      navajowhite: '#ffdead',
      navy: '#000080',
      oldlace: '#fdf5e6',
      olive: '#808000',
      olivedrab: '#6b8e23',
      orange: '#ffa500',
      orangered: '#ff4500',
      orchid: '#da70d6',
      palegoldenrod: '#eee8aa',
      palegreen: '#98fb98',
      paleturquoise: '#afeeee',
      palevioletred: '#d87093',
      papayawhip: '#ffefd5',
      peachpuff: '#ffdab9',
      peru: '#cd853f',
      pink: '#ffc0cb',
      plum: '#dda0dd',
      powderblue: '#b0e0e6',
      purple: '#800080',
      red: '#f00',
      rosybrown: '#bc8f8f',
      royalblue: '#4169e1',
      saddlebrown: '#8b4513',
      salmon: '#fa8072',
      sandybrown: '#f4a460',
      seagreen: '#2e8b57',
      seashell: '#fff5ee',
      sienna: '#a0522d',
      silver: '#c0c0c0',
      skyblue: '#87ceeb',
      slateblue: '#6a5acd',
      slategray: '#708090',
      slategrey: '#708090',
      snow: '#fffafa',
      springgreen: '#00ff7f',
      steelblue: '#4682b4',
      tan: '#d2b48c',
      teal: '#008080',
      thistle: '#d8bfd8',
      tomato: '#ff6347',
      turquoise: '#40e0d0',
      violet: '#ee82ee',
      wheat: '#f5deb3',
      white: '#fff',
      whitesmoke: '#f5f5f5',
      yellow: '#ff0',
      yellowgreen: '#9acd32'
    };
    this.CLASS_NAME = "SuperMap.LevelRenderer.Tool.Color";
  }
  /**
   * @function SuperMap.LevelRenderer.Tool.Color.prototype.customPalette
   * @description èªå®ä¹è°è²æ¿ã
   * @param {Array} userPalete - é¢è²æ¿ã
   */


  Color_createClass(Color, [{
    key: "customPalette",
    value: function customPalette(userPalete) {
      this.palette = userPalete;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.resetPalette
     * @description å¤ä½é»è®¤è²æ¿ã
     */

  }, {
    key: "resetPalette",
    value: function resetPalette() {
      this.palette = this._palette;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.getColor
     * @description è·åè²æ¿é¢è²ã
     * @param {number} idx - è²æ¿ä½ç½®ã
     * @param {Array} userPalete - è²æ¿ã
     * @returns {string} é¢è²å¼ã
     */

  }, {
    key: "getColor",
    value: function getColor(idx, userPalete) {
      idx = idx | 0;
      userPalete = userPalete || this.palette;
      return userPalete[idx % userPalete.length];
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.customHighlight
     * @description èªå®ä¹é»è®¤é«äº®é¢è²ã
     * @param {string} userHighlightColor - èªå®ä¹é«äº®è²ã
     */

  }, {
    key: "customHighlight",
    value: function customHighlight(userHighlightColor) {
      this.highlightColor = userHighlightColor;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.resetHighlight
     * @description éç½®é»è®¤é«äº®é¢è²ãå°å½åçé«äº®è²ä½ä¸ºé»è®¤é«äº®é¢è²
     */

  }, {
    key: "resetHighlight",
    value: function resetHighlight() {
      this.highlightColor = this._highlightColor;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.getHighlightColor
     * @description è·åé»è®¤é«äº®é¢è²
     * @returns {string} é¢è²å¼ã
     */

  }, {
    key: "getHighlightColor",
    value: function getHighlightColor() {
      return this.highlightColor;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.getRadialGradient
     * @description å¾åæ¸åã
     * @param {number} x0 - æ¸åèµ·ç¹æ¨ªåæ ã
     * @param {number} y0 - æ¸åèµ·ç¹çºµåæ ã
     * @param {number} r0 - åå¾
     * @param {number} x1 - æ¸åç»ç¹æ¨ªåæ ã
     * @param {number} y1 - æ¸åç»ç¹çºµåæ ã
     * @param {number} r1 - åå¾
     * @param {Array} colorList - é¢è²åè¡¨ã
     * @returns {CanvasGradient} Cavans æ¸åé¢è²ã
     */

  }, {
    key: "getRadialGradient",
    value: function getRadialGradient(x0, y0, r0, x1, y1, r1, colorList) {
      var util = this.util;

      if (!this._ctx) {
        this._ctx = util.getContext();
      }

      var gradient = this._ctx.createRadialGradient(x0, y0, r0, x1, y1, r1);

      for (var i = 0, l = colorList.length; i < l; i++) {
        gradient.addColorStop(colorList[i][0], colorList[i][1]);
      }

      gradient.__nonRecursion = true;
      return gradient;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.getLinearGradient
     * @description çº¿æ§æ¸åã
     * @param {number} x0 - æ¸åèµ·ç¹æ¨ªåæ ã
     * @param {number} y0 - æ¸åèµ·ç¹çºµåæ ã
     * @param {number} x1 - æ¸åç»ç¹æ¨ªåæ ã
     * @param {number} y1 - æ¸åç»ç¹çºµåæ ã
     * @param {Array} colorList - é¢è²åè¡¨ã
     * @returns {CanvasGradient} Cavans æ¸åé¢è²ã
     */

  }, {
    key: "getLinearGradient",
    value: function getLinearGradient(x0, y0, x1, y1, colorList) {
      var util = this.util;

      if (!this._ctx) {
        this._ctx = util.getContext();
      }

      var gradient = this._ctx.createLinearGradient(x0, y0, x1, y1);

      for (var i = 0, l = colorList.length; i < l; i++) {
        gradient.addColorStop(colorList[i][0], colorList[i][1]);
      }

      gradient.__nonRecursion = true;
      return gradient;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.getStepColors
     * @description è·åä¸¤ç§é¢è²ä¹é´æ¸åé¢è²æ°ç»ã
     * @param {Object} start - èµ·å§é¢è²å¯¹è±¡ã
     * @param {Object} end - ç»æé¢è²å¯¹è±¡ã
     * @param {number} step - æ¸åçº§æ°ã
     * @returns {Array} é¢è²æ°ç»ã
     */

  }, {
    key: "getStepColors",
    value: function getStepColors(start, end, step) {
      start = this.toRGBA(start);
      end = this.toRGBA(end);
      start = this.getData(start);
      end = this.getData(end);
      var colors = [];
      var stepR = (end[0] - start[0]) / step;
      var stepG = (end[1] - start[1]) / step;
      var stepB = (end[2] - start[2]) / step;
      var stepA = (end[3] - start[3]) / step; // çæé¢è²éå
      // fix by linfeng é¢è²å ç§¯

      for (var i = 0, r = start[0], g = start[1], b = start[2], a = start[3]; i < step; i++) {
        colors[i] = this.toColor([this.adjust(Math.floor(r), [0, 255]), this.adjust(Math.floor(g), [0, 255]), this.adjust(Math.floor(b), [0, 255]), a.toFixed(4) - 0], 'rgba');
        r += stepR;
        g += stepG;
        b += stepB;
        a += stepA;
      }

      r = end[0];
      g = end[1];
      b = end[2];
      a = end[3];
      colors[i] = this.toColor([r, g, b, a], 'rgba');
      return colors;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.getGradientColors
     * @description è·åæå®çº§æ°çæ¸åé¢è²æ°ç»ã
     * @param {Array.<string>} colors - é¢è²æ°ç»ã
     * @param {number} [step=20] - æ¸åçº§æ°ã
     * @returns {Array.<string>} é¢è²æ°ç»ã
     */

  }, {
    key: "getGradientColors",
    value: function getGradientColors(colors, step) {
      var ret = [];
      var len = colors.length;

      if (step === undefined) {
        step = 20;
      }

      if (len === 1) {
        ret = this.getStepColors(colors[0], colors[0], step);
      } else if (len > 1) {
        for (var i = 0, n = len - 1; i < n; i++) {
          var steps = this.getStepColors(colors[i], colors[i + 1], step);

          if (i < n - 1) {
            steps.pop();
          }

          ret = ret.concat(steps);
        }
      }

      return ret;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.toColor
     * @description é¢è²å¼æ°ç»è½¬ä¸ºæå®æ ¼å¼é¢è²ã
     * @param {Array} data - é¢è²å¼æ°ç»ã
     * @param {string} format - æ ¼å¼ï¼é»è®¤'rgb'
     * @returns {string} é¢è²ã
     */

  }, {
    key: "toColor",
    value: function toColor(data, format) {
      format = format || 'rgb';

      if (data && (data.length === 3 || data.length === 4)) {
        data = this.map(data, function (c) {
          return c > 1 ? Math.ceil(c) : c;
        });

        if (format.indexOf('hex') > -1) {
          return '#' + ((1 << 24) + (data[0] << 16) + (data[1] << 8) + +data[2]).toString(16).slice(1);
        } else if (format.indexOf('hs') > -1) {
          var sx = this.map(data.slice(1, 3), function (c) {
            return c + '%';
          });
          data[1] = sx[0];
          data[2] = sx[1];
        }

        if (format.indexOf('a') > -1) {
          if (data.length === 3) {
            data.push(1);
          }

          data[3] = this.adjust(data[3], [0, 1]);
          return format + '(' + data.slice(0, 4).join(',') + ')';
        }

        return format + '(' + data.slice(0, 3).join(',') + ')';
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.toArray
     * @description é¢è²å­ç¬¦ä¸²è½¬æ¢ä¸ºrgbaæ°ç»ã
     * @param {string} color - é¢è²ã
     * @returns {Array.<number>} é¢è²å¼æ°ç»ã
     */

  }, {
    key: "toArray",
    value: function toArray(color) {
      color = this.trim(color);

      if (color.indexOf('rgba') < 0) {
        color = this.toRGBA(color);
      }

      var data = [];
      var i = 0;
      color.replace(/[\d.]+/g, function (n) {
        if (i < 3) {
          n = n | 0;
        } else {
          // Alpha
          n = +n;
        }

        data[i++] = n;
      });
      return data;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.convert
     * @description é¢è²æ ¼å¼è½¬åã
     * @param {Array} data - é¢è²å¼æ°ç»ã
     * @param {string} format - æ ¼å¼ï¼é»è®¤'rgb'
     * @returns {string} é¢è²ã
     */

  }, {
    key: "convert",
    value: function convert(color, format) {
      if (!this.isCalculableColor(color)) {
        return color;
      }

      var data = this.getData(color);
      var alpha = data[3];

      if (typeof alpha === 'undefined') {
        alpha = 1;
      }

      if (color.indexOf('hsb') > -1) {
        data = this._HSV_2_RGB(data);
      } else if (color.indexOf('hsl') > -1) {
        data = this._HSL_2_RGB(data);
      }

      if (format.indexOf('hsb') > -1 || format.indexOf('hsv') > -1) {
        data = this._RGB_2_HSB(data);
      } else if (format.indexOf('hsl') > -1) {
        data = this._RGB_2_HSL(data);
      }

      data[3] = alpha;
      return this.toColor(data, format);
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.toRGBA
     * @description è½¬æ¢ä¸ºrgbaæ ¼å¼çé¢è²ã
     * @param {string} color - é¢è²ã
     * @returns {string} é¢è²ã
     */

  }, {
    key: "toRGBA",
    value: function toRGBA(color) {
      return this.convert(color, 'rgba');
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.toRGB
     * @description è½¬æ¢ä¸ºrgbæ°å­æ ¼å¼çé¢è²ã
     * @param {string} color - é¢è²ã
     * @returns {string} é¢è²ã
     */

  }, {
    key: "toRGB",
    value: function toRGB(color) {
      return this.convert(color, 'rgb');
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.toHex
     * @description è½¬æ¢ä¸º16è¿å¶é¢è²ã
     * @param {string} color - é¢è²ã
     * @returns {string} 16è¿å¶é¢è²ï¼#rrggbbæ ¼å¼
     */

  }, {
    key: "toHex",
    value: function toHex(color) {
      return this.convert(color, 'hex');
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.toHSVA
     * @description è½¬æ¢ä¸ºHSVé¢è²ã
     * @param {string} color - é¢è²ã
     * @returns {string} HSVAé¢è²ï¼hsva(h,s,v,a)
     */

  }, {
    key: "toHSVA",
    value: function toHSVA(color) {
      return this.convert(color, 'hsva');
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.toHSV
     * @description è½¬æ¢ä¸ºHSVé¢è²ã
     * @param {string} color - é¢è²ã
     * @returns {string} HSVé¢è²ï¼hsv(h,s,v)
     */

  }, {
    key: "toHSV",
    value: function toHSV(color) {
      return this.convert(color, 'hsv');
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.toHSBA
     * @description è½¬æ¢ä¸ºHSBAé¢è²ã
     * @param {string} color - é¢è²ã
     * @returns {string} HSBAé¢è²ï¼hsba(h,s,b,a)
     */

  }, {
    key: "toHSBA",
    value: function toHSBA(color) {
      return this.convert(color, 'hsba');
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.toHSB
     * @description è½¬æ¢ä¸ºHSBé¢è²ã
     * @param {string} color - é¢è²ã
     * @returns {string} HSBé¢è²ï¼hsb(h,s,b)
     */

  }, {
    key: "toHSB",
    value: function toHSB(color) {
      return this.convert(color, 'hsb');
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.toHSLA
     * @description è½¬æ¢ä¸ºHSLAé¢è²ã
     * @param {string} color - é¢è²ã
     * @returns {string} HSLAé¢è²ï¼hsla(h,s,l,a)
     */

  }, {
    key: "toHSLA",
    value: function toHSLA(color) {
      return this.convert(color, 'hsla');
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.toHSL
     * @description è½¬æ¢ä¸ºHSLé¢è²ã
     * @param {string} color - é¢è²ã
     * @returns {string}  HSLé¢è²ï¼hsl(h,s,l)
     */

  }, {
    key: "toHSL",
    value: function toHSL(color) {
      return this.convert(color, 'hsl');
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.toName
     * @description è½¬æ¢é¢è²åã
     * @param {string} color - é¢è²ã
     * @returns {string} é¢è²å
     */

  }, {
    key: "toName",
    value: function toName(color) {
      for (var key in this._nameColors) {
        if (this.toHex(this._nameColors[key]) === this.toHex(color)) {
          return key;
        }
      }

      return null;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.trim
     * @description ç§»é¤é¢è²ä¸­å¤ä½ç©ºæ ¼ã
     * @param {string} color - é¢è²ã
     * @returns {string} æ ç©ºæ ¼é¢è²
     */

  }, {
    key: "trim",
    value: function trim(color) {
      return String(color).replace(/\s+/g, '');
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.normalize
     * @description é¢è²è§èåã
     * @param {string} color - é¢è²ã
     * @returns {string} è§èååçé¢è²
     */

  }, {
    key: "normalize",
    value: function normalize(color) {
      // é¢è²å
      if (this._nameColors[color]) {
        color = this._nameColors[color];
      } // å»æç©ºæ ¼


      color = this.trim(color); // hsvä¸hsbç­ä»·

      color = color.replace(/hsv/i, 'hsb'); // rgbè½¬ä¸ºrrggbb

      if (/^#[\da-f]{3}$/i.test(color)) {
        color = parseInt(color.slice(1), 16);
        var r = (color & 0xf00) << 8;
        var g = (color & 0xf0) << 4;
        var b = color & 0xf;
        color = '#' + ((1 << 24) + (r << 4) + r + (g << 4) + g + (b << 4) + b).toString(16).slice(1);
      } // æèä½¿ç¨ä»¥ä¸æ­£åæ¿æ¢ï¼ä¸è¿ chrome ä¸æ§è½ç¸å¯¹å·®ç¹
      // color = color.replace(/^#([\da-f])([\da-f])([\da-f])$/i, '#$1$1$2$2$3$3');


      return color;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.lift
     * @description é¢è²å æ·±æåæ·¡ï¼å½level>0å æ·±ï¼å½level<0åæ·¡ã
     * @param {string} color - é¢è²ã
     * @param {number} level - åéç¨åº¦ï¼åå¼åºé´[-1,1]ã
     * @returns {string} å æ·±æåæ·¡åé¢è²å¼
     */

  }, {
    key: "lift",
    value: function lift(color, level) {
      if (!this.isCalculableColor(color)) {
        return color;
      }

      var direct = level > 0 ? 1 : -1;

      if (typeof level === 'undefined') {
        level = 0;
      }

      level = Math.abs(level) > 1 ? 1 : Math.abs(level);
      color = this.toRGB(color);
      var data = this.getData(color);

      for (var i = 0; i < 3; i++) {
        if (direct === 1) {
          data[i] = data[i] * (1 - level) | 0;
        } else {
          data[i] = (255 - data[i]) * level + data[i] | 0;
        }
      }

      return 'rgb(' + data.join(',') + ')';
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.reverse
     * @description é¢è²ç¿»è½¬ã[255-r,255-g,255-b,1-a]
     * @param {string} color - é¢è²ã
     * @returns {string} ç¿»è½¬é¢è²
     */

  }, {
    key: "reverse",
    value: function reverse(color) {
      if (!this.isCalculableColor(color)) {
        return color;
      }

      var data = this.getData(this.toRGBA(color));
      data = this.map(data, function (c) {
        return 255 - c;
      });
      return this.toColor(data, 'rgb');
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.mix
     * @description ç®åä¸¤ç§é¢è²æ··å
     * @param {string} color1 - ç¬¬ä¸ç§é¢è²ã
     * @param {string} color2 - ç¬¬äºç§é¢è²ã
     * @param {number} weight - æ··åæé[0-1]ã
     * @returns {string} ç»æè²ãrgb(r,g,b)ærgba(r,g,b,a)
     */

  }, {
    key: "mix",
    value: function mix(color1, color2, weight) {
      if (!this.isCalculableColor(color1) || !this.isCalculableColor(color2)) {
        return color1;
      }

      if (typeof weight === 'undefined') {
        weight = 0.5;
      }

      weight = 1 - this.adjust(weight, [0, 1]);
      var w = weight * 2 - 1;
      var data1 = this.getData(this.toRGBA(color1));
      var data2 = this.getData(this.toRGBA(color2));
      var d = data1[3] - data2[3];
      var weight1 = ((w * d === -1 ? w : (w + d) / (1 + w * d)) + 1) / 2;
      var weight2 = 1 - weight1;
      var data = [];

      for (var i = 0; i < 3; i++) {
        data[i] = data1[i] * weight1 + data2[i] * weight2;
      }

      var alpha = data1[3] * weight + data2[3] * (1 - weight);
      alpha = Math.max(0, Math.min(1, alpha));

      if (data1[3] === 1 && data2[3] === 1) {
        // ä¸èèéæåº¦
        return this.toColor(data, 'rgb');
      }

      data[3] = alpha;
      return this.toColor(data, 'rgba');
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.random
     * @description éæºé¢è²
     * @returns {string}  é¢è²å¼ï¼#rrggbbæ ¼å¼
     */

  }, {
    key: "random",
    value: function random() {
      return '#' + Math.random().toString(16).slice(2, 8);
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.getData
     * @description è·åé¢è²å¼æ°ç»ï¼è¿åå¼èå´ã
     * RGB èå´[0-255]
     * HSL/HSV/HSB èå´[0-1]
     * Aéæåº¦èå´[0-1]
     * æ¯ææ ¼å¼ï¼
     * #rgb
     * #rrggbb
     * rgb(r,g,b)
     * rgb(r%,g%,b%)
     * rgba(r,g,b,a)
     * hsb(h,s,b) // hsvä¸hsbç­ä»·
     * hsb(h%,s%,b%)
     * hsba(h,s,b,a)
     * hsl(h,s,l)
     * hsl(h%,s%,l%)
     * hsla(h,s,l,a)
     * @param {string} color - é¢è²ã
     * @returns {Array.<number>} é¢è²å¼æ°ç»ænull
     */

  }, {
    key: "getData",
    value: function getData(color) {
      color = this.normalize(color);
      var r = color.match(this.colorRegExp);

      if (r === null) {
        throw new Error('The color format error'); // é¢è²æ ¼å¼éè¯¯
      }

      var d;
      var a;
      var data = [];
      var rgb;

      if (r[2]) {
        // #rrggbb
        d = r[2].replace('#', '').split('');
        rgb = [d[0] + d[1], d[2] + d[3], d[4] + d[5]];
        data = this.map(rgb, function (c) {
          return Color.prototype.adjust.call(this, parseInt(c, 16), [0, 255]);
        });
      } else if (r[4]) {
        // rgb rgba
        var rgba = r[4].split(',');
        a = rgba[3];
        rgb = rgba.slice(0, 3);
        data = this.map(rgb, function (c) {
          c = Math.floor(c.indexOf('%') > 0 ? parseInt(c, 0) * 2.55 : c);
          return Color.prototype.adjust.call(this, c, [0, 255]);
        });

        if (typeof a !== 'undefined') {
          data.push(this.adjust(parseFloat(a), [0, 1]));
        }
      } else if (r[5] || r[6]) {
        // hsb hsba hsl hsla
        var hsxa = (r[5] || r[6]).split(',');
        var h = parseInt(hsxa[0], 0) / 360;
        var s = hsxa[1];
        var x = hsxa[2];
        a = hsxa[3];
        data = this.map([s, x], function (c) {
          return Color.prototype.adjust.call(this, parseFloat(c) / 100, [0, 1]);
        });
        data.unshift(h);

        if (typeof a !== 'undefined') {
          data.push(this.adjust(parseFloat(a), [0, 1]));
        }
      }

      return data;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.alpha
     * @description è®¾ç½®é¢è²éæåº¦
     * @param {string} color - é¢è²ã
     * @param {number} a - éæåº¦,åºé´[0,1]ã
     * @returns {string} rgbaé¢è²å¼
     */

  }, {
    key: "alpha",
    value: function alpha(color, a) {
      if (!this.isCalculableColor(color)) {
        return color;
      }

      if (a === null) {
        a = 1;
      }

      var data = this.getData(this.toRGBA(color));
      data[3] = this.adjust(Number(a).toFixed(4), [0, 1]);
      return this.toColor(data, 'rgba');
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.map
     * @description æ°ç»æ å°
     * @param {Array} array - æ°ç»ã
     * @param {function} fun - å½æ°ã
     * @returns {string} æ°ç»æ å°ç»æ
     */

  }, {
    key: "map",
    value: function map(array, fun) {
      if (typeof fun !== 'function') {
        throw new TypeError();
      }

      var len = array ? array.length : 0;

      for (var i = 0; i < len; i++) {
        array[i] = fun(array[i]);
      }

      return array;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.adjust
     * @description è°æ´å¼åºé´
     * @param {Array.<number>} value - æ°ç»ã
     * @param {Array.<number>} region - åºé´ã
     * @returns {number} è°æ´åçå¼
     */

  }, {
    key: "adjust",
    value: function adjust(value, region) {
      // < to <= & > to >=
      // modify by linzhifeng 2014-05-25 because -0 == 0
      if (value <= region[0]) {
        value = region[0];
      } else if (value >= region[1]) {
        value = region[1];
      }

      return value;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype.isCalculableColor
     * @description å¤æ­æ¯å¦æ¯å¯è®¡ç®çé¢è²
     * @param {string} color - é¢è²ã
     * @returns {boolean} æ¯å¦æ¯å¯è®¡ç®çé¢è²
     */

  }, {
    key: "isCalculableColor",
    value: function isCalculableColor(color) {
      return color instanceof Array || typeof color === 'string';
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype._HSV_2_RGBãåè§{@link http://www.easyrgb.com/index.php?X=MATH}
     */

  }, {
    key: "_HSV_2_RGB",
    value: function _HSV_2_RGB(data) {
      var H = data[0];
      var S = data[1];
      var V = data[2]; // HSV from 0 to 1

      var R;
      var G;
      var B;

      if (S === 0) {
        R = V * 255;
        G = V * 255;
        B = V * 255;
      } else {
        var h = H * 6;

        if (h === 6) {
          h = 0;
        }

        var i = h | 0;
        var v1 = V * (1 - S);
        var v2 = V * (1 - S * (h - i));
        var v3 = V * (1 - S * (1 - (h - i)));
        var r = 0;
        var g = 0;
        var b = 0;

        if (i === 0) {
          r = V;
          g = v3;
          b = v1;
        } else if (i === 1) {
          r = v2;
          g = V;
          b = v1;
        } else if (i === 2) {
          r = v1;
          g = V;
          b = v3;
        } else if (i === 3) {
          r = v1;
          g = v2;
          b = V;
        } else if (i === 4) {
          r = v3;
          g = v1;
          b = V;
        } else {
          r = V;
          g = v1;
          b = v2;
        } // RGB results from 0 to 255


        R = r * 255;
        G = g * 255;
        B = b * 255;
      }

      return [R, G, B];
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype._HSL_2_RGBãåè§{@link http://www.easyrgb.com/index.php?X=MATH}
     */

  }, {
    key: "_HSL_2_RGB",
    value: function _HSL_2_RGB(data) {
      var H = data[0];
      var S = data[1];
      var L = data[2]; // HSL from 0 to 1

      var R;
      var G;
      var B;

      if (S === 0) {
        R = L * 255;
        G = L * 255;
        B = L * 255;
      } else {
        var v2;

        if (L < 0.5) {
          v2 = L * (1 + S);
        } else {
          v2 = L + S - S * L;
        }

        var v1 = 2 * L - v2;
        R = 255 * this._HUE_2_RGB(v1, v2, H + 1 / 3);
        G = 255 * this._HUE_2_RGB(v1, v2, H);
        B = 255 * this._HUE_2_RGB(v1, v2, H - 1 / 3);
      }

      return [R, G, B];
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype._HUE_2_RGBãåè§{@link http://www.easyrgb.com/index.php?X=MATH}
     */

  }, {
    key: "_HUE_2_RGB",
    value: function _HUE_2_RGB(v1, v2, vH) {
      if (vH < 0) {
        vH += 1;
      }

      if (vH > 1) {
        vH -= 1;
      }

      if (6 * vH < 1) {
        return v1 + (v2 - v1) * 6 * vH;
      }

      if (2 * vH < 1) {
        return v2;
      }

      if (3 * vH < 2) {
        return v1 + (v2 - v1) * (2 / 3 - vH) * 6;
      }

      return v1;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype._RGB_2_HSBãåè§{@link http://www.easyrgb.com/index.php?X=MATH}
     */

  }, {
    key: "_RGB_2_HSB",
    value: function _RGB_2_HSB(data) {
      // RGB from 0 to 255
      var R = data[0] / 255;
      var G = data[1] / 255;
      var B = data[2] / 255;
      var vMin = Math.min(R, G, B); // Min. value of RGB

      var vMax = Math.max(R, G, B); // Max. value of RGB

      var delta = vMax - vMin; // Delta RGB value

      var V = vMax;
      var H;
      var S; // HSV results from 0 to 1

      if (delta === 0) {
        H = 0;
        S = 0;
      } else {
        S = delta / vMax;
        var deltaR = ((vMax - R) / 6 + delta / 2) / delta;
        var deltaG = ((vMax - G) / 6 + delta / 2) / delta;
        var deltaB = ((vMax - B) / 6 + delta / 2) / delta;

        if (R === vMax) {
          H = deltaB - deltaG;
        } else if (G === vMax) {
          H = 1 / 3 + deltaR - deltaB;
        } else if (B === vMax) {
          H = 2 / 3 + deltaG - deltaR;
        }

        if (H < 0) {
          H += 1;
        }

        if (H > 1) {
          H -= 1;
        }
      }

      H = H * 360;
      S = S * 100;
      V = V * 100;
      return [H, S, V];
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Color.prototype._RGB_2_HSLãåè§{@link http://www.easyrgb.com/index.php?X=MATH}
     */

  }, {
    key: "_RGB_2_HSL",
    value: function _RGB_2_HSL(data) {
      // RGB from 0 to 255
      var R = data[0] / 255;
      var G = data[1] / 255;
      var B = data[2] / 255;
      var vMin = Math.min(R, G, B); // Min. value of RGB

      var vMax = Math.max(R, G, B); // Max. value of RGB

      var delta = vMax - vMin; // Delta RGB value

      var L = (vMax + vMin) / 2;
      var H;
      var S; // HSL results from 0 to 1

      if (delta === 0) {
        H = 0;
        S = 0;
      } else {
        if (L < 0.5) {
          S = delta / (vMax + vMin);
        } else {
          S = delta / (2 - vMax - vMin);
        }

        var deltaR = ((vMax - R) / 6 + delta / 2) / delta;
        var deltaG = ((vMax - G) / 6 + delta / 2) / delta;
        var deltaB = ((vMax - B) / 6 + delta / 2) / delta;

        if (R === vMax) {
          H = deltaB - deltaG;
        } else if (G === vMax) {
          H = 1 / 3 + deltaR - deltaB;
        } else if (B === vMax) {
          H = 2 / 3 + deltaG - deltaR;
        }

        if (H < 0) {
          H += 1;
        }

        if (H > 1) {
          H -= 1;
        }
      }

      H = H * 360;
      S = S * 100;
      L = L * 100;
      return [H, S, L];
    }
  }]);

  return Color;
}();
// CONCATENATED MODULE: ./src/common/util/ColorsPickerUtil.js
function ColorsPickerUtil_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ColorsPickerUtil_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ColorsPickerUtil_createClass(Constructor, protoProps, staticProps) { if (protoProps) ColorsPickerUtil_defineProperties(Constructor.prototype, protoProps); if (staticProps) ColorsPickerUtil_defineProperties(Constructor, staticProps); return Constructor; }



var ColorRender = new Color(); // let "http://www.qzu.zj.cn": "#bd10e0"
// 					"www.qzct.net": "#7ed321" = new SuperMap.LevelRenderer.Tool.Color();

/**
 * Created by yzy on 2016/11/9.
 * è²å¸¦éæ©å¨å·¥å·ç±»  ç¨äº1ãåå»ºcanvaså¯¹è±¡ï¼2ãä»å ç§é¢è²ä¸­è·åä¸å®æ°éçæ¸åè²
 *
 */

var ColorsPickerUtil = /*#__PURE__*/function () {
  function ColorsPickerUtil() {
    ColorsPickerUtil_classCallCheck(this, ColorsPickerUtil);
  }

  ColorsPickerUtil_createClass(ColorsPickerUtil, null, [{
    key: "createCanvas",

    /**
     * åå»ºDOM canvas
     * @param height canvas é«åº¦
     * @param width canvas å®½åº¦
     *
     */
    value: function createCanvas(height, width) {
      var canvas = document.createElement("canvas");
      canvas.height = height;
      canvas.width = width;
      return canvas.getContext("2d");
    }
    /**
     * çº¿æ§æ¸åã
     * Parameters:
     * x0 - {Number} æ¸åèµ·ç¹ã
     * y0 - {Number}
     * x1 - {Number} æ¸åç»ç¹ã
     * y1 - {Number}
     * colorList - {Array} é¢è²åè¡¨ã
     *
     * Returns:
     * {CanvasGradient} Cavans æ¸åé¢è²ã
     */

  }, {
    key: "getLinearGradient",
    value: function getLinearGradient(x0, y0, x1, y1, colorList) {
      if (!this._ctx) {
        this._ctx = this.getContext();
      }

      var gradient = this._ctx.createLinearGradient(x0, y0, x1, y1);

      var leng = colorList.length;
      var add = 1 / (leng - 1);
      var offset = 0;

      for (var i = 0; i < leng; i++) {
        gradient.addColorStop(offset, colorList[i]);
        offset += add;
      }

      gradient.__nonRecursion = true;
      return gradient;
    }
    /**
     * è·å Cavans ä¸ä¸æ
     *
     * Returns:
     * {Object} Cavans ä¸ä¸æã
     */

  }, {
    key: "getContext",
    value: function getContext() {
      if (!this._ctx) {
        this._ctx = document.createElement('canvas').getContext('2d');
      }

      return this._ctx;
    }
    /**
     * è·åä¸¤ç§é¢è²ä¹é´æ¸åé¢è²æ°ç»ã
     *
     * Parameters:
     * start - {color} èµ·å§é¢è²ã
     * end - {color} ç»æé¢è²ã
     * step - {Number} æ¸åçº§æ°ã
     * colorList - {Array} é¢è²åè¡¨ã
     *
     * Returns:
     * {Array} é¢è²æ°ç»ã
     */

  }, {
    key: "getStepColors",
    value: function getStepColors(start, end, step) {
      start = ColorRender.toRGBA(start);
      end = ColorRender.toRGBA(end);
      start = ColorRender.getData(start);
      end = ColorRender.getData(end);
      var colors = [];
      var stepR = (end[0] - start[0]) / step;
      var stepG = (end[1] - start[1]) / step;
      var stepB = (end[2] - start[2]) / step;
      var stepA = (end[3] - start[3]) / step; // çæé¢è²éå
      // fix by linfeng é¢è²å ç§¯

      for (var i = 0, r = start[0], g = start[1], b = start[2], a = start[3]; i < step; i++) {
        colors[i] = ColorRender.toColor([ColorRender.adjust(Math.floor(r), [0, 255]), ColorRender.adjust(Math.floor(g), [0, 255]), ColorRender.adjust(Math.floor(b), [0, 255]), a.toFixed(4) - 0], 'hex');
        r += stepR;
        g += stepG;
        b += stepB;
        a += stepA;
      }

      r = end[0];
      g = end[1];
      b = end[2];
      a = end[3];
      colors[i] = ColorRender.toColor([r, g, b, a], 'hex');
      return colors;
    }
    /**
     * APIMethod: getGradientColors
     * è·åæå®çº§æ°çæ¸åé¢è²æ°ç»ã
     *
     * Parameters:
     * colors - {Array{String}} é¢è²ç»ã
     * total - {Number}  é¢è²æ»æ°ã
     * total - {String}  ä¸é¢ç±»å
     *
     * Returns:
     * {Array{String}} é¢è²æ°ç»ã
     */

  }, {
    key: "getGradientColors",
    value: function getGradientColors(colors, total, themeType) {
      var ret = [],
          step;
      var i,
          n,
          len = colors.length;

      if (total === undefined) {
        return;
      }

      if (len >= total) {
        if (themeType === 'RANGE') {
          for (i = 0; i < total; i++) {
            ret.push(colors[i]);
          }
        } else {
          //1/2åååè²
          for (i = 0; i < total; i++) {
            var ii = Math.floor(i / 2);

            if (i % 2 === 0) {
              ret.push(colors[ii]);
            } else {
              var _index = colors.length - 1 - ii;

              ret.push(colors[_index]);
            }
          }
        }
      } else {
        step = Math.ceil(total / (len - 1));

        for (i = 0, n = len - 1; i < n; i++) {
          var steps = this.getStepColors(colors[i], colors[i + 1], step);

          if (i < n - 1) {
            steps.pop();
          }

          ret = ret.concat(steps);
        } //å é¤å¤ä½åç´ 


        var nouse = ret.length - total;

        for (var j = 0, index = 0; j < nouse; j++) {
          ret.splice(index + 2, 1);
        }
      }

      return ret;
    }
  }]);

  return ColorsPickerUtil;
}();
SuperMap.ColorsPickerUtil = ColorsPickerUtil;
// CONCATENATED MODULE: ./src/common/util/ArrayStatistic.js
function ArrayStatistic_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ArrayStatistic_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ArrayStatistic_createClass(Constructor, protoProps, staticProps) { if (protoProps) ArrayStatistic_defineProperties(Constructor.prototype, protoProps); if (staticProps) ArrayStatistic_defineProperties(Constructor, staticProps); return Constructor; }


var ArrayStatistic = /*#__PURE__*/function () {
  function ArrayStatistic() {
    ArrayStatistic_classCallCheck(this, ArrayStatistic);
  }

  ArrayStatistic_createClass(ArrayStatistic, null, [{
    key: "newInstance",
    // geostatsInstance: null,

    /**
     * åå§åæä»¶å®ä¾
     */
    value: function newInstance() {
      // if(!this.geostatsInstance) {
      //         //     this.geostatsInstance = new geostats();
      //         // }
      // window.dataList = [];
      if (!this.geostatsInstance) {
        this.geostatsInstance = new window.geostats();
      }

      return this.geostatsInstance;
    }
    /**
     * è®¾ç½®éè¦è¢«å¤ççæ°ç»
     * 
     * @param array 
     */

  }, {
    key: "getInstance",
    value: function getInstance(array) {
      var instance = this.newInstance();
      instance.setSerie(array);
      return instance;
    }
    /**
     * è·åæ°ç»ç»è®¡çå¼
     *    
     * @param array éè¦ç»è®¡çæ°ç»
     * @param type  ç»è®¡æ¹æ³
     */

  }, {
    key: "getArrayStatistic",
    value: function getArrayStatistic(array, type) {
      if (!array.length) {
        return 0;
      }

      if (type === "Sum" || type === "æ±å") {
        return this.getSum(array);
      } else if (type === "Maximum" || type === "æå¤§å¼") {
        return this.getMax(array);
      } else if (type === "Minimum" || type === "æå°å¼") {
        return this.getMin(array);
      } else if (type === "Average" || type === "å¹³åå¼") {
        return this.getMean(array);
      } else if (type === "Median" || type === "ä¸­ä½æ°") {
        return this.getMedian(array);
      } else if (type === "times" || type === "è®¡æ°") {
        return this.getTimes(array);
      }
    }
    /**
     * è·åæ°ç»åæ®µåçæ°å¼
     * 
     * @param array  éè¦åæ®µçæ°ç»
     * @param type   åæ®µæ¹æ³
     * @param segNum åæ®µä¸ªæ°
     */

  }, {
    key: "getArraySegments",
    value: function getArraySegments(array, type, segNum) {
      if (type === "offset") {
        return this.getEqInterval(array, segNum);
      } else if (type === "jenks") {
        return this.getJenks(array, segNum);
      } else if (type === "square") {
        // æ°æ®é½å¿é¡» >= 0
        var minValue = this.getMin(array);

        if (minValue >= 0) {
          return this.getSqrtInterval(array, segNum);
        } else {
          //console.log('æ°æ®é½å¿é¡» >= 0');
          // Util.showMessage(Language.hasNegValue + Language.noSupportRange, 'ERROR');
          return false;
        }
      } else if (type === "logarithm") {
        // æ°æ®é½å¿é¡» > 0
        var _minValue = this.getMin(array);

        if (_minValue > 0) {
          return this.getGeometricProgression(array, segNum);
        } else {
          //console.log('æ°æ®é½å¿é¡» > 0');
          // Util.showMessage(Language.hasZeroNegValue + Language.noSupportRange, 'ERROR');
          return false;
        }
      }
    }
    /**
     * æ±å
     * @param array
     * @returns {number}
     */

  }, {
    key: "getSum",
    value: function getSum(array) {
      return this.getInstance(array).sum();
    }
    /**
     * æå°å¼
     * @param array
     * @returns {*}
     */

  }, {
    key: "getMax",
    value: function getMax(array) {
      return this.getInstance(array).max();
    }
    /**
     * æå¤§å¼
     * @param array
     * @returns {*}
     */

  }, {
    key: "getMin",
    value: function getMin(array) {
      return this.getInstance(array).min();
    }
    /**
     * æ±å¹³å
     * @param array
     * @returns {number}
     */

  }, {
    key: "getMean",
    value: function getMean(array) {
      return this.getInstance(array).mean();
    }
    /**
     * æ±ä¸­ä½æ°
     * 
     * @param array
     * @returns {number} 
     */

  }, {
    key: "getMedian",
    value: function getMedian(array) {
      return this.getInstance(array).median();
    }
    /**
     * è®¡æ°
     * 
     * @param array
     * @returns {number} 
     */

  }, {
    key: "getTimes",
    value: function getTimes(array) {
      return array.length;
    }
    /**
     * ç­è·åæ®µæ³
     * 
     * @param array 
     * @param segNum
     */

  }, {
    key: "getEqInterval",
    value: function getEqInterval(array, segNum) {
      return this.getInstance(array).getClassEqInterval(segNum);
    }
    /**
     * èªç¶æ­è£æ³
     * 
     * @param array 
     * @param segNum
     */

  }, {
    key: "getJenks",
    value: function getJenks(array, segNum) {
      return this.getInstance(array).getClassJenks(segNum);
    }
    /**
     * å¹³æ¹æ ¹åæ®µæ³
     * 
     * @param array
     * @param segNum
     */

  }, {
    key: "getSqrtInterval",
    value: function getSqrtInterval(array, segNum) {
      array = array.map(function (value) {
        return Math.sqrt(value);
      });
      var breaks = this.getInstance(array).getClassEqInterval(segNum);
      return breaks.map(function (value) {
        return value * value;
      });
    }
    /**
     * å¯¹æ°åæ®µæ³
     * 
     * @param array 
     * @param segNum
     */

  }, {
    key: "getGeometricProgression",
    value: function getGeometricProgression(array, segNum) {
      return this.getInstance(array).getClassGeometricProgression(segNum);
    }
  }]);

  return ArrayStatistic;
}();
SuperMap.ArrayStatistic = ArrayStatistic;
// CONCATENATED MODULE: ./src/common/util/MapCalculateUtil.js

var getMeterPerMapUnit = function getMeterPerMapUnit(mapUnit) {
  var earchRadiusInMeters = 6378137;
  var meterPerMapUnit;

  if (mapUnit === Unit.METER) {
    meterPerMapUnit = 1;
  } else if (mapUnit === Unit.DEGREE) {
    // æ¯åº¦è¡¨ç¤ºå¤å°ç±³ã
    meterPerMapUnit = Math.PI * 2 * earchRadiusInMeters / 360;
  } else if (mapUnit === Unit.KILOMETER) {
    meterPerMapUnit = 1.0e-3;
  } else if (mapUnit === Unit.INCH) {
    meterPerMapUnit = 1 / 2.5399999918e-2;
  } else if (mapUnit === Unit.FOOT) {
    meterPerMapUnit = 0.3048;
  } else {
    return meterPerMapUnit;
  }

  return meterPerMapUnit;
};
function getWrapNum(x) {
  var includeMax = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
  var includeMin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
  var range = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [-180, 180];
  var max = range[1],
      min = range[0],
      d = max - min;

  if (x === max && includeMax) {
    return x;
  }

  if (x === min && includeMin) {
    return x;
  }

  var tmp = ((x - min) % d + d) % d;

  if (tmp === 0 && includeMax) {
    return max;
  }

  return ((x - min) % d + d) % d + min;
}
function conversionDegree(degrees) {
  var degree = parseInt(degrees);
  var fraction = parseInt((degrees - degree) * 60);
  var second = parseInt(((degrees - degree) * 60 - fraction) * 60);
  fraction = parseInt(fraction / 10) === 0 ? "0".concat(fraction) : fraction;
  second = parseInt(second / 10) === 0 ? "0".concat(second) : second;
  return "".concat(degree, "\xB0").concat(fraction, "'").concat(second);
}
// CONCATENATED MODULE: ./src/common/util/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





// EXTERNAL MODULE: ./node_modules/lodash.topairs/index.js
var lodash_topairs = __webpack_require__(820);
var lodash_topairs_default = /*#__PURE__*/__webpack_require__.n(lodash_topairs);

// CONCATENATED MODULE: ./src/common/style/CartoCSS.js
function CartoCSS_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { CartoCSS_typeof = function _typeof(obj) { return typeof obj; }; } else { CartoCSS_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return CartoCSS_typeof(obj); }

function CartoCSS_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function CartoCSS_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function CartoCSS_createClass(Constructor, protoProps, staticProps) { if (protoProps) CartoCSS_defineProperties(Constructor.prototype, protoProps); if (staticProps) CartoCSS_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.CartoCSS
 * @classdesc CartoCSS è§£æç±»ï¼å¶ä¸»è¦åè½ä¸ºå° CartoCSS å­ç¬¦ä¸²è§£æä¸º CartoCSS ç shader å±æ§é£æ ¼å¯¹è±¡ã
 * @category BaseTypes Style
 * @param {string} cartoStr -  CartoCSS æ ·å¼è¡¨å­ç¬¦ä¸²
 * @example
 * var cartocss = "@provinceLineColor:#ddd;
 *                 #China_Provinces_L___China400{
 *                      line-dasharray:10,10;
 *                      line-color:@provinceLineColor;
 *                      line-width:1;
 *                 }";
 * new SuperMap.CartoCSS(cartocss);
 */

/*eslint no-useless-escape: "off"*/

var CartoCSS = /*#__PURE__*/function () {
  function CartoCSS(cartoStr) {
    CartoCSS_classCallCheck(this, CartoCSS);

    this.env = null;
    /**
     * @member SuperMap.CartoCSS.prototype.parser
     * @description è§£æå¨
     */

    this.parser = null;
    /**
     * @member SuperMap.CartoCSS.prototype.ruleSet
     * @description CartoCSS è§åå¯¹è±¡
     */

    this.ruleSet = null;
    /**
     * @member SuperMap.CartoCSS.prototype.cartoStr
     * @description CartoCSS æ ·å¼è¡¨å­ç¬¦ä¸²
     */

    this.cartoStr = "";
    /**
     * @member SuperMap.CartoCSS.prototype.shaders
     * @description Carto çè²å¨é
     */

    this.shaders = null;

    if (typeof cartoStr === "string") {
      this.cartoStr = cartoStr;
      this.env = {
        frames: [],
        errors: [],
        error: function error(obj) {
          this.errors.push(obj);
        }
      };
      this.parser = this.getParser(this.env);
      this.parse(cartoStr);
      this.shaders = this.toShaders();
    }
  }
  /**
   * @function SuperMap.CartoCSS.prototype.getParser
   * @description è·å CartoCSS è§£æå¨
   */


  CartoCSS_createClass(CartoCSS, [{
    key: "getParser",
    value: function getParser(env) {
      var input, // LeSS input string
      i, // current index in `input`
      j, // current chunk
      temp, // temporarily holds a chunk's state, for backtracking
      memo, // temporarily holds `i`, when backtracking
      furthest, // furthest index the parser has gone to
      chunks, // chunkified input
      current, // index of current chunk, in `input`
      parser;
      var that = this; // This function is called after all files
      // have been imported through `@import`.

      var finish = function finish() {//NOSONAR
        //æææä»¶å¯¼å¥å®æä¹åè°ç¨
      };

      function save() {
        temp = chunks[j];
        memo = i;
        current = i;
      }

      function restore() {
        chunks[j] = temp;
        i = memo;
        current = i;
      }

      function sync() {
        if (i > current) {
          chunks[j] = chunks[j].slice(i - current);
          current = i;
        }
      } //
      // Parse from a token, regexp or string, and move forward if match
      //


      function _match(tok) {
        var match, length, c, endIndex; // Non-terminal

        if (tok instanceof Function) {
          return tok.call(parser.parsers); // Terminal
          // Either match a single character in the input,
          // or match a regexp in the current chunk (chunk[j]).
        } else if (typeof tok === 'string') {
          match = input.charAt(i) === tok ? tok : null;
          length = 1;
          sync();
        } else {
          sync();
          match = tok.exec(chunks[j]);

          if (match) {
            length = match[0].length;
          } else {
            return null;
          }
        } // The match is confirmed, add the match length to `i`,
        // and consume any extra white-space characters (' ' || '\n')
        // which come after that. The reason for this is that LeSS's
        // grammar is mostly white-space insensitive.


        if (match) {
          var mem = i += length;
          endIndex = i + chunks[j].length - length;

          while (i < endIndex) {
            c = input.charCodeAt(i);

            if (!(c === 32 || c === 10 || c === 9)) {
              break;
            }

            i++;
          }

          chunks[j] = chunks[j].slice(length + (i - mem));
          current = i;

          if (chunks[j].length === 0 && j < chunks.length - 1) {
            j++;
          }

          if (typeof match === 'string') {
            return match;
          } else {
            return match.length === 1 ? match[0] : match;
          }
        }
      } // Same as _match(), but don't change the state of the parser,
      // just return the match.


      function peek(tok) {
        if (typeof tok === 'string') {
          return input.charAt(i) === tok;
        } else {
          return !!tok.test(chunks[j]);
        }
      } // Make an error object from a passed set of properties.
      // Accepted properties:
      // - `message`: Text of the error message.
      // - `filename`: Filename where the error occurred.
      // - `index`: Char. index where the error occurred.


      function makeError(err) {
        var einput;
        var defautls = {
          index: furthest,
          filename: env.filename,
          message: 'Parse error.',
          line: 0,
          column: -1
        };

        for (var prop in defautls) {
          if (err[prop] === 0) {
            err[prop] = defautls[prop];
          }
        }

        if (err.filename && that.env.inputs && that.env.inputs[err.filename]) {
          einput = that.env.inputs[err.filename];
        } else {
          einput = input;
        }

        err.line = (einput.slice(0, err.index).match(/\n/g) || '').length + 1;

        for (var n = err.index; n >= 0 && einput.charAt(n) !== '\n'; n--) {
          err.column++;
        }

        return new Error([err.filename, err.line, err.column, err.message].join(";"));
      }

      this.env = env = env || {};
      this.env.filename = this.env.filename || null;
      this.env.inputs = this.env.inputs || {}; // The Parser

      parser = {
        // Parse an input string into an abstract syntax tree.
        // Throws an error on parse errors.
        parse: function parse(str) {
          var root,
              error = null;
          i = j = current = furthest = 0;
          chunks = [];
          input = str.replace(/\r\n/g, '\n');

          if (env.filename) {
            that.env.inputs[env.filename] = input;
          } // Split the input into chunks.


          chunks = function (chunks) {
            var j = 0,
                skip = /(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,
                comment = /\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,
                string = /"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,
                level = 0,
                match,
                chunk = chunks[0],
                inParam;

            for (var i = 0, c, cc; i < input.length;) {
              skip.lastIndex = i;

              if (match = skip.exec(input)) {
                if (match.index === i) {
                  i += match[0].length;
                  chunk.push(match[0]);
                }
              }

              c = input.charAt(i);
              comment.lastIndex = string.lastIndex = i;

              if (match = string.exec(input)) {
                if (match.index === i) {
                  i += match[0].length;
                  chunk.push(match[0]);
                  continue;
                }
              }

              if (!inParam && c === '/') {
                cc = input.charAt(i + 1);

                if (cc === '/' || cc === '*') {
                  if (match = comment.exec(input)) {
                    if (match.index === i) {
                      i += match[0].length;
                      chunk.push(match[0]);
                      continue;
                    }
                  }
                }
              }

              switch (c) {
                case '{':
                  //NOSONAR
                  if (!inParam) {
                    level++;
                    chunk.push(c);
                    break;
                  }

                case '}':
                  //NOSONAR
                  if (!inParam) {
                    level--;
                    chunk.push(c);
                    chunks[++j] = chunk = [];
                    break;
                  }

                case '(':
                  //NOSONAR
                  if (!inParam) {
                    inParam = true;
                    chunk.push(c);
                    break;
                  }

                case ')':
                  //NOSONAR
                  if (inParam) {
                    inParam = false;
                    chunk.push(c);
                    break;
                  }

                default:
                  chunk.push(c);
                  break;
              }

              i++;
            }

            if (level !== 0) {
              error = {
                index: i - 1,
                type: 'Parse',
                message: level > 0 ? "missing closing `}`" : "missing opening `{`"
              };
            }

            return chunks.map(function (c) {
              return c.join('');
            });
          }([[]]);

          if (error) {
            throw makeError(error);
          } // Sort rules by specificity: this function expects selectors to be
          // split already.
          //
          // Written to be used as a .sort(Function);
          // argument.
          //
          // [1, 0, 0, 467] > [0, 0, 1, 520]


          var specificitySort = function specificitySort(a, b) {
            var as = a.specificity;
            var bs = b.specificity;

            if (as[0] != bs[0]) {
              return bs[0] - as[0];
            }

            if (as[1] != bs[1]) {
              return bs[1] - as[1];
            }

            if (as[2] != bs[2]) {
              return bs[2] - as[2];
            }

            return bs[3] - as[3];
          }; // Start with the primary rule.
          // The whole syntax tree is held under a Ruleset node,
          // with the `root` property set to true, so no `{}` are
          // output.


          root = new SuperMap.CartoCSS.Tree.Ruleset([], _match(this.parsers.primary));
          root.root = true; // Get an array of Ruleset objects, flattened
          // and sorted according to specificitySort

          root.toList = function () {
            return function (env) {
              env.error = function (e) {
                if (!env.errors) {
                  env.errors = new Error('');
                }

                if (env.errors.message) {
                  env.errors.message += '\n' + makeError(e).message;
                } else {
                  env.errors.message = makeError(e).message;
                }
              };

              env.frames = env.frames || []; // call populates Invalid-caused errors

              var definitions = this.flatten([], [], env);
              definitions.sort(specificitySort);
              return definitions;
            };
          }();

          return root;
        },
        // Here in, the parsing rules/functions
        //
        // The basic structure of the syntax tree generated is as follows:
        //
        //   Ruleset ->  Rule -> Value -> Expression -> Entity
        //
        //  In general, most rules will try to parse a token with the `_match()` function, and if the return
        //  value is truly, will return a new node, of the relevant type. Sometimes, we need to check
        //  first, before parsing, that's when we use `peek()`.
        parsers: {
          // The `primary` rule is the *entry* and *exit* point of the parser.
          // The rules here can appear at any level of the parse tree.
          //
          // The recursive nature of the grammar is an interplay between the `block`
          // rule, which represents `{ ... }`, the `ruleset` rule, and this `primary` rule,
          // as represented by this simplified grammar:
          //
          //     primary  â  (ruleset | rule)+
          //     ruleset  â  selector+ block
          //     block    â  '{' primary '}'
          //
          // Only at one point is the primary rule not called from the
          // block rule: at the root level.
          primary: function primary() {
            var node,
                root = [];

            while ((node = _match(this.rule) || _match(this.ruleset) || _match(this.comment)) || _match(/^[\s\n]+/) || (node = _match(this.invalid))) {
              if (node) {
                root.push(node);
              }
            }

            return root;
          },
          invalid: function invalid() {
            var chunk = _match(/^[^;\n]*[;\n]/); // To fail gracefully, match everything until a semicolon or linebreak.


            if (chunk) {
              return new SuperMap.CartoCSS.Tree.Invalid(chunk, memo);
            }
          },
          // We create a Comment node for CSS comments `/* */`,
          // but keep the LeSS comments `//` silent, by just skipping
          // over them.
          comment: function comment() {
            var comment;

            if (input.charAt(i) !== '/') {
              return;
            }

            if (input.charAt(i + 1) === '/') {
              return new SuperMap.CartoCSS.Tree.Comment(_match(/^\/\/.*/), true);
            } else if (comment = _match(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/)) {
              return new SuperMap.CartoCSS.Tree.Comment(comment);
            }
          },
          // Entities are tokens which can be found inside an Expression
          entities: {
            // A string, which supports escaping " and ' "milky way" 'he\'s the one!'
            quoted: function quoted() {
              if (input.charAt(i) !== '"' && input.charAt(i) !== "'") {
                return;
              }

              var str = _match(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);

              if (str) {
                return new SuperMap.CartoCSS.Tree.Quoted(str[1] || str[2]);
              }
            },
            // A reference to a Mapnik field, like [NAME]
            // Behind the scenes, this has the same representation, but Carto
            // needs to be careful to warn when unsupported operations are used.
            field: function field() {
              var l = '[',
                  r = ']';

              if (!_match(l)) {
                return;
              }

              var field_name = _match(/(^[^\]]+)/);

              if (!_match(r)) {
                return;
              }

              if (field_name) {
                return new SuperMap.CartoCSS.Tree.Field(field_name[1]);
              }
            },
            // This is a comparison operator
            comparison: function comparison() {
              var str = _match(/^=~|=|!=|<=|>=|<|>/);

              if (str) {
                return str;
              }
            },
            // A catch-all word, such as: hard-light
            // These can start with either a letter or a dash (-),
            // and then contain numbers, underscores, and letters.
            keyword: function keyword() {
              var k = _match(/^[A-Za-z\u4e00-\u9fa5-]+[A-Za-z-0-9\u4e00-\u9fa5_]*/);

              if (k) {
                return new SuperMap.CartoCSS.Tree.Keyword(k);
              }
            },
            // A function call like rgb(255, 0, 255)
            // The arguments are parsed with the `entities.arguments` parser.
            call: function call() {
              var name, args;

              if (!(name = /^([\w\-]+|%)\(/.exec(chunks[j]))) {
                return;
              }

              name = name[1];

              if (name === 'url') {
                // url() is handled by the url parser instead
                return null;
              } else {
                i += name.length;
              }

              var l = '(',
                  r = ')';

              _match(l); // Parse the '(' and consume whitespace.


              args = _match(this.entities['arguments']);

              if (!_match(r)) {
                return;
              }

              if (name) {
                return new SuperMap.CartoCSS.Tree.Call(name, args, i);
              }
            },
            // Arguments are comma-separated expressions
            'arguments': function _arguments() {
              var args = [],
                  arg;

              while (arg = _match(this.expression)) {
                args.push(arg);
                var q = ',';

                if (!_match(q)) {
                  break;
                }
              }

              return args;
            },
            literal: function literal() {
              return _match(this.entities.dimension) || _match(this.entities.keywordcolor) || _match(this.entities.hexcolor) || _match(this.entities.quoted);
            },
            // Parse url() tokens
            //
            // We use a specific rule for urls, because they don't really behave like
            // standard function calls. The difference is that the argument doesn't have
            // to be enclosed within a string, so it can't be parsed as an Expression.
            url: function url() {
              var value;

              if (input.charAt(i) !== 'u' || !_match(/^url\(/)) {
                return;
              }

              value = _match(this.entities.quoted) || _match(this.entities.variable) || _match(/^[\-\w%@_match\/.&=:;#+?~]+/) || '';
              var r = ')';

              if (!_match(r)) {
                return new SuperMap.CartoCSS.Tree.Invalid(value, memo, 'Missing closing ) in URL.');
              } else {
                return new SuperMap.CartoCSS.Tree.URL(typeof value.value !== 'undefined' || value instanceof SuperMap.CartoCSS.Tree.Variable ? value : new SuperMap.CartoCSS.Tree.Quoted(value));
              }
            },
            // A Variable entity, such as `@fink`, in
            //
            //     width: @fink + 2px
            //
            // We use a different parser for variable definitions,
            // see `parsers.variable`.
            variable: function variable() {
              var name,
                  index = i;

              if (input.charAt(i) === '@' && (name = _match(/^@[\w-]+/))) {
                return new SuperMap.CartoCSS.Tree.Variable(name, index, env.filename);
              }
            },
            hexcolor: function hexcolor() {
              var rgb;

              if (input.charAt(i) === '#' && (rgb = _match(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/))) {
                return new SuperMap.CartoCSS.Tree.Color(rgb[1]);
              }
            },
            keywordcolor: function keywordcolor() {
              var rgb = chunks[j].match(/^[a-z]+/);

              if (rgb && rgb[0] in SuperMap.CartoCSS.Tree.Reference.data.colors) {
                return new SuperMap.CartoCSS.Tree.Color(SuperMap.CartoCSS.Tree.Reference.data.colors[_match(/^[a-z]+/)]);
              }
            },
            // A Dimension, that is, a number and a unit. The only
            // unit that has an effect is %
            dimension: function dimension() {
              var c = input.charCodeAt(i);

              if (c > 57 || c < 45 || c === 47) {
                return;
              }

              var value = _match(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);

              if (value) {
                return new SuperMap.CartoCSS.Tree.Dimension(value[1], value[2], memo);
              }
            }
          },
          // The variable part of a variable definition.
          // Used in the `rule` parser. Like @fink:
          variable: function variable() {
            var name;

            if (input.charAt(i) === '@' && (name = _match(/^(@[\w-]+)\s*:/))) {
              return name[1];
            }
          },
          // Entities are the smallest recognized token,
          // and can be found inside a rule's value.
          entity: function entity() {
            var property1 = _match(this.entities.call) || _match(this.entities.literal);

            var property2 = _match(this.entities.field) || _match(this.entities.variable);

            var property3 = _match(this.entities.url) || _match(this.entities.keyword);

            return property1 || property2 || property3;
          },
          // A Rule terminator. Note that we use `peek()` to check for '}',
          // because the `block` rule will be expecting it, but we still need to make sure
          // it's there, if ';' was ommitted.
          end: function end() {
            var q = ';';
            return _match(q) || peek('}');
          },
          // Elements are the building blocks for Selectors. They consist of
          // an element name, such as a tag a class, or `*`.
          //å¢å å¯¹ä¸­æçæ¯æï¼[\u4e00-\u9fa5]
          element: function element() {
            var e = _match(/^(?:[.#][\w\u4e00-\u9fa5\-]+|\*|Map)/);

            if (e) {
              return new SuperMap.CartoCSS.Tree.Element(e);
            }
          },
          // Attachments allow adding multiple lines, polygons etc. to an
          // object. There can only be one attachment per selector.
          attachment: function attachment() {
            var s = _match(/^::([\w\-]+(?:\/[\w\-]+)*)/);

            if (s) {
              return s[1];
            }
          },
          // Selectors are made out of one or more Elements, see above.
          selector: function selector() {
            var a,
                attachment,
                e,
                elements = [],
                f,
                filters = new SuperMap.CartoCSS.Tree.Filterset(),
                z,
                zooms = [],
                segments = 0,
                conditions = 0;

            while ((e = _match(this.element)) || (z = _match(this.zoom)) || (f = _match(this.filter)) || (a = _match(this.attachment))) {
              segments++;

              if (e) {
                elements.push(e);
              } else if (z) {
                zooms.push(z);
                conditions++;
              } else if (f) {
                var err = filters.add(f);

                if (err) {
                  throw makeError({
                    message: err,
                    index: i - 1
                  });
                }

                conditions++;
              } else if (attachment) {
                throw makeError({
                  message: 'Encountered second attachment name.',
                  index: i - 1
                });
              } else {
                attachment = a;
              }

              var c = input.charAt(i);

              if (c === '{' || c === '}' || c === ';' || c === ',') {
                break;
              }
            }

            if (segments) {
              return new SuperMap.CartoCSS.Tree.Selector(filters, zooms, elements, attachment, conditions, memo);
            }
          },
          filter: function filter() {
            save();
            var key,
                op,
                val,
                l = '[',
                r = ']';

            if (!_match(l)) {
              return;
            }

            if (key = _match(/^[a-zA-Z0-9\-_]+/) || _match(this.entities.quoted) || _match(this.entities.variable) || _match(this.entities.keyword) || _match(this.entities.field)) {
              if (key instanceof SuperMap.CartoCSS.Tree.Quoted) {
                key = new SuperMap.CartoCSS.Tree.Field(key.toString());
              }

              if ((op = _match(this.entities.comparison)) && (val = _match(this.entities.quoted) || _match(this.entities.variable) || _match(this.entities.dimension) || _match(this.entities.keyword) || _match(this.entities.field))) {
                if (!_match(r)) {
                  throw makeError({
                    message: 'Missing closing ] of filter.',
                    index: memo - 1
                  });
                }

                if (!key.is) {
                  key = new SuperMap.CartoCSS.Tree.Field(key);
                }

                return new SuperMap.CartoCSS.Tree.Filter(key, op, val, memo, env.filename);
              }
            }
          },
          zoom: function zoom() {
            save();
            var op,
                val,
                r = ']';

            if (_match(/^\[\s*zoom/g) && (op = _match(this.entities.comparison)) && (val = _match(this.entities.variable) || _match(this.entities.dimension)) && _match(r)) {
              return new SuperMap.CartoCSS.Tree.Zoom(op, val, memo);
            } else {
              // backtrack
              restore();
            }
          },
          // The `block` rule is used by `ruleset`
          // It's a wrapper around the `primary` rule, with added `{}`.
          block: function block() {
            var content,
                l = '{',
                r = '}';

            if (_match(l) && (content = _match(this.primary)) && _match(r)) {
              return content;
            }
          },
          // div, .class, body > p {...}
          ruleset: function ruleset() {
            var selectors = [],
                s,
                rules,
                q = ',';
            save();

            while (s = _match(this.selector)) {
              selectors.push(s);

              while (_match(this.comment)) {//NOSONAR
              }

              if (!_match(q)) {
                break;
              }

              while (_match(this.comment)) {//NOSONAR
              }
            }

            if (s) {
              while (_match(this.comment)) {//NOSONAR
              }
            }

            if (selectors.length > 0 && (rules = _match(this.block))) {
              if (selectors.length === 1 && selectors[0].elements.length && selectors[0].elements[0].value === 'Map') {
                var rs = new SuperMap.CartoCSS.Tree.Ruleset(selectors, rules);
                rs.isMap = true;
                return rs;
              }

              return new SuperMap.CartoCSS.Tree.Ruleset(selectors, rules);
            } else {
              // Backtrack
              restore();
            }
          },
          rule: function rule() {
            var name,
                value,
                c = input.charAt(i);
            save();

            if (c === '.' || c === '#') {
              return;
            }

            if (name = _match(this.variable) || _match(this.property)) {
              value = _match(this.value);

              if (value && _match(this.end)) {
                return new SuperMap.CartoCSS.Tree.Rule(name, value, memo, env.filename);
              } else {
                furthest = i;
                restore();
              }
            }
          },
          font: function font() {
            var value = [],
                expression = [],
                e,
                q = ',';

            while (e = _match(this.entity)) {
              expression.push(e);
            }

            value.push(new SuperMap.CartoCSS.Tree.Expression(expression));

            if (_match(q)) {
              while (e = _match(this.expression)) {
                value.push(e);

                if (!_match(q)) {
                  break;
                }
              }
            }

            return new SuperMap.CartoCSS.Tree.Value(value);
          },
          // A Value is a comma-delimited list of Expressions
          // In a Rule, a Value represents everything after the `:`,
          // and before the `;`.
          value: function value() {
            var e,
                expressions = [],
                q = ',';

            while (e = _match(this.expression)) {
              expressions.push(e);

              if (!_match(q)) {
                break;
              }
            }

            if (expressions.length > 1) {
              return new SuperMap.CartoCSS.Tree.Value(expressions.map(function (e) {
                return e.value[0];
              }));
            } else if (expressions.length === 1) {
              return new SuperMap.CartoCSS.Tree.Value(expressions);
            }
          },
          // A sub-expression, contained by parenthensis
          sub: function sub() {
            var e,
                l = '(',
                r = ")";

            if (_match(l) && (e = _match(this.expression)) && _match(r)) {
              return e;
            }
          },
          // This is a misnomer because it actually handles multiplication
          // and division.
          multiplication: function multiplication() {
            var m,
                a,
                op,
                operation,
                q = '/';

            if (m = _match(this.operand)) {
              while ((op = _match(q) || _match('*') || _match('%')) && (a = _match(this.operand))) {
                operation = new SuperMap.CartoCSS.Tree.Operation(op, [operation || m, a], memo);
              }

              return operation || m;
            }
          },
          addition: function addition() {
            var m,
                a,
                op,
                operation,
                plus = '+';

            if (m = _match(this.multiplication)) {
              while ((op = _match(/^[-+]\s+/) || input.charAt(i - 1) != ' ' && (_match(plus) || _match('-'))) && (a = _match(this.multiplication))) {
                operation = new SuperMap.CartoCSS.Tree.Operation(op, [operation || m, a], memo);
              }

              return operation || m;
            }
          },
          // An operand is anything that can be part of an operation,
          // such as a Color, or a Variable
          operand: function operand() {
            return _match(this.sub) || _match(this.entity);
          },
          // Expressions either represent mathematical operations,
          // or white-space delimited Entities.  @var * 2
          expression: function expression() {
            var e,
                entities = [];

            while (e = _match(this.addition) || _match(this.entity)) {
              entities.push(e);
            }

            if (entities.length > 0) {
              return new SuperMap.CartoCSS.Tree.Expression(entities);
            }
          },
          property: function property() {
            var name = _match(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);

            if (name) {
              return name[1];
            }
          }
        }
      };
      return parser;
    }
    /**
     * @function SuperMap.CartoCSS.prototype.parse
     * @description å©ç¨CartoCSSè§£æå¨éé¢çparseæ¹æ³ï¼å°CartoCSSæ ·å¼è¡¨å­ç¬¦ä¸²è½¬åä¸ºCartoCSSè§åé
     * @returns {Object} CartoCSSè§åé
     */

  }, {
    key: "parse",
    value: function parse(str) {
      var parser = this.parser;
      var ruleSet = this.ruleSet = parser.parse(str);
      return ruleSet;
    }
    /**
     * @function SuperMap.CartoCSS.prototype.toShaders
     * @description å°CartoCSSè§åéè½¬åä¸ºçè²å¨
     * @returns {Array} CartoCSSçè²å¨é
     */

  }, {
    key: "toShaders",
    value: function toShaders() {
      if (this.ruleSet) {
        var ruleset = this.ruleSet;

        if (ruleset) {
          var defs = ruleset.toList(this.env);
          defs.reverse();
          var shaders = {};
          var keys = [];

          this._toShaders(shaders, keys, defs);

          var ordered_shaders = [];
          var done = {};

          for (var i = 0, len0 = defs.length; i < len0; ++i) {
            var def = defs[i];
            var k = def.attachment;
            var shader = shaders[keys[i]];
            var shaderArray = [];

            if (!done[k]) {
              var j = 0;

              for (var prop in shader) {
                if (prop !== 'zoom' && prop !== 'frames' && prop !== "attachment" && prop != "elements") {
                  //å¯¹layer-indexä½ç¹æ®å¤çä»¥å®ç°å¾å±çæ§å¶
                  if (prop === "layer-index") {
                    /*var getLayerIndex = Function("attributes", "zoom", "var _value = null;" + shader[prop].join('\n') + "; return _value; ");*/
                    var getLayerIndex = function getLayerIndex(attributes, zoom) {
                      //NOSONAR
                      var _value = null;
                      shader[prop].join('\n');
                      return _value;
                    };

                    var layerIndex = getLayerIndex();
                    Object.defineProperty(shaderArray, "layerIndex", {
                      configurable: true,
                      enumerable: false,
                      value: layerIndex
                    });
                  } else {
                    shaderArray[j++] = function (ops, shaderArray) {
                      //NOSONAR
                      if (!Array.isArray(ops)) {
                        return ops;
                      }

                      var body = ops.join('\n');
                      var myKeyword = 'attributes["FEATUREID"]&&attributes["FEATUREID"]';
                      var index = body.indexOf(myKeyword);

                      if (index >= 0) {
                        //å¯¹featureIDä½ä¸äºç¹æ®å¤çï¼ä»¥å°featureIDæååºæ¥
                        if (!shaderArray.featureFilter) {
                          var featureFilterStart = index + myKeyword.length;
                          var featureFilterEnd = body.indexOf(")", featureFilterStart + 1);
                          var featureFilterStr = "featureId&&(featureId" + body.substring(featureFilterStart, featureFilterEnd) + ")";
                          /*var featureFilter = Function("featureId", "if(" + featureFilterStr + "){return true;}return false;");*/

                          var featureFilter = function featureFilter(featureId) {
                            if (featureFilterStr) {
                              return true;
                            }

                            return false;
                          };

                          Object.defineProperty(shaderArray, "featureFilter", {
                            configurable: true,
                            enumerable: false,
                            value: featureFilter
                          });
                        }

                        return {
                          "property": prop,
                          "getValue": Function("attributes", "zoom", "seftFilter", "var _value = null; var isExcute=typeof seftFilter=='function'?sefgFilter():seftFilter;if(isExcute){" + body + ";} return _value; ") //NOSONAR

                        };
                      } else {
                        return {
                          "property": prop,
                          "getValue": Function("attributes", "zoom", "var _value = null;" + body + "; return _value; ") //NOSONAR

                        };
                      }
                    }(shader[prop], shaderArray);
                  }
                }
              }

              Object.defineProperty(shaderArray, "attachment", {
                configurable: true,
                enumerable: false,
                value: k
              });
              Object.defineProperty(shaderArray, "elements", {
                configurable: true,
                enumerable: false,
                value: def.elements
              });
              ordered_shaders.push(shaderArray);
              done[keys[i]] = true;
            }

            Object.defineProperty(shaderArray, "zoom", {
              configurable: true,
              enumerable: false,
              value: def.zoom
            }); //shader.frames.push(def.frame_offset);
          }

          return ordered_shaders;
        }
      }

      return null;
    }
  }, {
    key: "_toShaders",
    value: function _toShaders(shaders, keys, defs) {
      for (var i = 0, len0 = defs.length; i < len0; ++i) {
        var def = defs[i];
        var element_str = [];

        for (var j = 0, len1 = def.elements.length; j < len1; j++) {
          element_str.push(def.elements[j]);
        }

        var filters = def.filters.filters;
        var filterStr = [];

        for (var attr in filters) {
          filterStr.push(filters[attr].id);
        }

        var key = element_str.join("/") + "::" + def.attachment + "_" + filterStr.join("_");
        keys.push(key);
        var shader = shaders[key] = shaders[key] || {}; //shader.frames = [];

        shader.zoom = SuperMap.CartoCSS.Tree.Zoom.all;
        var props = def.toJS(this.env);

        for (var v in props) {
          (shader[v] = shader[v] || []).push(props[v].join('\n'));
        }
      }
    }
    /**
     * @function SuperMap.CartoCSS.prototype.getShaders
     * @description è·åCartoCSSçè²å¨
     * @returns {Array} çè²å¨é
     * @example
     *   //shadersçç»æå¤§æ¦å¦ä¸ï¼
     *   var shaders=[
     *   {
     *       attachment:"one",
     *       elements:[],
     *       zoom:23,
     *       length:2,
     *       0:{property:"line-color",value:function(attribute,zoom){var _value=null;if(zoom){_value="#123456"}return _vlaue;}},
     *       1:{preoperty:"line-width",value:function(attribute,zoom){var _value=null;if(zoom){_value=3}return _vlaue;}}
     *   },
     *   {
     *       attachment:"two",
     *       elements:[],
     *       zoom:23,
     *       length:2,
     *       0:{property:"polygon-color",value:function(attribute,zoom){var _value=null;if(zoom){_value="#123456"}return _vlaue;}},
     *       1:{property:"line-width",value:function(attribute,zoom){var _value=null;if(zoom){_value=3}return _vlaue;}}
     *   }
     *   ];
     */

  }, {
    key: "getShaders",
    value: function getShaders() {
      return this.shaders;
    }
    /**
     * @function SuperMap.CartoCSS.prototype.destroy
     * @description CartoCSSè§£æå¯¹è±¡çææå½æ°ï¼ç¨äºéæ¯CartoCSSè§£æå¯¹è±¡
     */

  }, {
    key: "destroy",
    value: function destroy() {
      this.cartoStr = null;
      this.env = null;
      this.ruleSet = null;
      this.parser = null;
      this.shaders = null;
    }
  }]);

  return CartoCSS;
}();
SuperMap._mapnik_reference_latest = {
  "version": "2.1.1",
  "style": {
    "filter-mode": {
      "type": ["all", "first"],
      "doc": "Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)",
      "default-value": "all",
      "default-meaning": "All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true."
    },
    "image-filters": {
      "css": "image-filters",
      "default-value": "none",
      "default-meaning": "no filters",
      "type": "functions",
      "functions": [["agg-stack-blur", 2], ["emboss", 0], ["blur", 0], ["gray", 0], ["sobel", 0], ["edge-detect", 0], ["x-gradient", 0], ["y-gradient", 0], ["invert", 0], ["sharpen", 0]],
      "doc": "A list of image filters."
    },
    "comp-op": {
      "css": "comp-op",
      "default-value": "src-over",
      "default-meaning": "add the current layer on top of other layers",
      "doc": "Composite operation. This defines how this layer should behave relative to layers atop or below it.",
      "type": ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"]
    },
    "opacity": {
      "css": "opacity",
      "type": "float",
      "doc": "An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)",
      "default-value": 1,
      "default-meaning": "no separate buffer will be used and no alpha will be applied to the style after rendering"
    }
  },
  "layer": {
    "name": {
      "default-value": "",
      "type": "string",
      "required": true,
      "default-meaning": "No layer name has been provided",
      "doc": "The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map"
    },
    "srs": {
      "default-value": "",
      "type": "string",
      "default-meaning": "No srs value is provided and the value will be inherited from the Map's srs",
      "doc": "The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'"
    },
    "status": {
      "default-value": true,
      "type": "boolean",
      "default-meaning": "This layer will be marked as active and available for processing",
      "doc": "A property that can be set to false to disable this layer from being processed"
    },
    "minzoom": {
      "default-value": "0",
      "type": "float",
      "default-meaning": "The layer will be visible at the minimum possible scale",
      "doc": "The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"
    },
    "maxzoom": {
      "default-value": "1.79769e+308",
      "type": "float",
      "default-meaning": "The layer will be visible at the maximum possible scale",
      "doc": "The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"
    },
    "queryable": {
      "default-value": false,
      "type": "boolean",
      "default-meaning": "The layer will not be available for the direct querying of data values",
      "doc": "This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true"
    },
    "clear-label-cache": {
      "default-value": false,
      "type": "boolean",
      "default-meaning": "The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer",
      "doc": "This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers"
    },
    "group-by": {
      "default-value": "",
      "type": "string",
      "default-meaning": "No special layer grouping will be used during rendering",
      "doc": "https://github.com/mapnik/mapnik/wiki/Grouped-rendering"
    },
    "buffer-size": {
      "default-value": "0",
      "type": "float",
      "default-meaning": "No buffer will be used",
      "doc": "Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"
    },
    "maximum-extent": {
      "default-value": "none",
      "type": "bbox",
      "default-meaning": "No clipping extent will be used",
      "doc": "An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer."
    }
  },
  "symbolizers": {
    "*": {
      "image-filters": {
        "css": "image-filters",
        "default-value": "none",
        "default-meaning": "no filters",
        "type": "functions",
        "functions": [["agg-stack-blur", 2], ["emboss", 0], ["blur", 0], ["gray", 0], ["sobel", 0], ["edge-detect", 0], ["x-gradient", 0], ["y-gradient", 0], ["invert", 0], ["sharpen", 0]],
        "doc": "A list of image filters."
      },
      "comp-op": {
        "css": "comp-op",
        "default-value": "src-over",
        "default-meaning": "add the current layer on top of other layers",
        "doc": "Composite operation. This defines how this layer should behave relative to layers atop or below it.",
        "type": ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"]
      },
      "opacity": {
        "css": "opacity",
        "type": "float",
        "doc": "An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)",
        "default-value": 1,
        "default-meaning": "no separate buffer will be used and no alpha will be applied to the style after rendering"
      }
    },
    "map": {
      "background-color": {
        "css": "background-color",
        "default-value": "none",
        "default-meaning": "transparent",
        "type": "color",
        "doc": "Map Background color"
      },
      "background-image": {
        "css": "background-image",
        "type": "uri",
        "default-value": "",
        "default-meaning": "transparent",
        "doc": "An image that is repeated below all features on a map as a background.",
        "description": "Map Background image"
      },
      "srs": {
        "css": "srs",
        "type": "string",
        "default-value": "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs",
        "default-meaning": "The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space",
        "doc": "Map spatial reference (proj4 string)"
      },
      "buffer-size": {
        "css": "buffer-size",
        "default-value": "0",
        "type": "float",
        "default-meaning": "No buffer will be used",
        "doc": "Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with \"avoid-edges\"."
      },
      "maximum-extent": {
        "css": "",
        "default-value": "none",
        "type": "bbox",
        "default-meaning": "No clipping extent will be used",
        "doc": "An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map."
      },
      "base": {
        "css": "base",
        "default-value": "",
        "default-meaning": "This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.",
        "type": "string",
        "doc": "Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet."
      },
      "paths-from-xml": {
        "css": "",
        "default-value": true,
        "default-meaning": "Paths read from XML will be interpreted from the location of the XML",
        "type": "boolean",
        "doc": "value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()"
      },
      "minimum-version": {
        "css": "",
        "default-value": "none",
        "default-meaning": "Mapnik version will not be detected and no error will be thrown about compatibility",
        "type": "string",
        "doc": "The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet"
      },
      "font-directory": {
        "css": "font-directory",
        "type": "uri",
        "default-value": "none",
        "default-meaning": "No map-specific fonts will be registered",
        "doc": "Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)."
      }
    },
    "polygon": {
      "fill": {
        "css": "polygon-fill",
        "type": "color",
        "default-value": "rgba(128,128,128,1)",
        "default-meaning": "gray and fully opaque (alpha = 1), same as rgb(128,128,128)",
        "doc": "Fill color to assign to a polygon"
      },
      "fill-opacity": {
        "css": "polygon-opacity",
        "type": "float",
        "doc": "The opacity of the polygon",
        "default-value": 1,
        "default-meaning": "opaque"
      },
      "gamma": {
        "css": "polygon-gamma",
        "type": "float",
        "default-value": 1,
        "default-meaning": "fully antialiased",
        "range": "0-1",
        "doc": "Level of antialiasing of polygon edges"
      },
      "gamma-method": {
        "css": "polygon-gamma-method",
        "type": ["power", "linear", "none", "threshold", "multiply"],
        "default-value": "power",
        "default-meaning": "pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",
        "doc": "An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"
      },
      "clip": {
        "css": "polygon-clip",
        "type": "boolean",
        "default-value": true,
        "default-meaning": "geometry will be clipped to map bounds before rendering",
        "doc": "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."
      },
      "smooth": {
        "css": "polygon-smooth",
        "type": "float",
        "default-value": 0,
        "default-meaning": "no smoothing",
        "range": "0-1",
        "doc": "Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."
      },
      "geometry-transform": {
        "css": "polygon-geometry-transform",
        "type": "functions",
        "default-value": "none",
        "default-meaning": "geometry will not be transformed",
        "doc": "Allows transformation functions to be applied to the geometry.",
        "functions": [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]]
      },
      "comp-op": {
        "css": "polygon-comp-op",
        "default-value": "src-over",
        "default-meaning": "add the current symbolizer on top of other symbolizer",
        "doc": "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",
        "type": ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"]
      }
    },
    "line": {
      "stroke": {
        "css": "line-color",
        "default-value": "rgba(0,0,0,1)",
        "type": "color",
        "default-meaning": "black and fully opaque (alpha = 1), same as rgb(0,0,0)",
        "doc": "The color of a drawn line"
      },
      "stroke-width": {
        "css": "line-width",
        "default-value": 1,
        "type": "float",
        "doc": "The width of a line in pixels"
      },
      "stroke-opacity": {
        "css": "line-opacity",
        "default-value": 1,
        "type": "float",
        "default-meaning": "opaque",
        "doc": "The opacity of a line"
      },
      "stroke-linejoin": {
        "css": "line-join",
        "default-value": "miter",
        "type": ["miter", "round", "bevel"],
        "doc": "The behavior of lines when joining"
      },
      "stroke-linecap": {
        "css": "line-cap",
        "default-value": "butt",
        "type": ["butt", "round", "square"],
        "doc": "The display of line endings"
      },
      "stroke-gamma": {
        "css": "line-gamma",
        "type": "float",
        "default-value": 1,
        "default-meaning": "fully antialiased",
        "range": "0-1",
        "doc": "Level of antialiasing of stroke line"
      },
      "stroke-gamma-method": {
        "css": "line-gamma-method",
        "type": ["power", "linear", "none", "threshold", "multiply"],
        "default-value": "power",
        "default-meaning": "pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",
        "doc": "An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"
      },
      "stroke-dasharray": {
        "css": "line-dasharray",
        "type": "numbers",
        "doc": "A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.",
        "default-value": "none",
        "default-meaning": "solid line"
      },
      "stroke-dashoffset": {
        "css": "line-dash-offset",
        "type": "numbers",
        "doc": "valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)",
        "default-value": "none",
        "default-meaning": "solid line"
      },
      "stroke-miterlimit": {
        "css": "line-miterlimit",
        "type": "float",
        "doc": "The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.",
        "default-value": 4.0,
        "default-meaning": "Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'"
      },
      "clip": {
        "css": "line-clip",
        "type": "boolean",
        "default-value": true,
        "default-meaning": "geometry will be clipped to map bounds before rendering",
        "doc": "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."
      },
      "smooth": {
        "css": "line-smooth",
        "type": "float",
        "default-value": 0,
        "default-meaning": "no smoothing",
        "range": "0-1",
        "doc": "Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."
      },
      "offset": {
        "css": "line-offset",
        "type": "float",
        "default-value": 0,
        "default-meaning": "no offset",
        "doc": "Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)."
      },
      "rasterizer": {
        "css": "line-rasterizer",
        "type": ["full", "fast"],
        "default-value": "full",
        "doc": "Exposes an alternate AGG rendering method that sacrifices some accuracy for speed."
      },
      "geometry-transform": {
        "css": "line-geometry-transform",
        "type": "functions",
        "default-value": "none",
        "default-meaning": "geometry will not be transformed",
        "doc": "Allows transformation functions to be applied to the geometry.",
        "functions": [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]]
      },
      "comp-op": {
        "css": "line-comp-op",
        "default-value": "src-over",
        "default-meaning": "add the current symbolizer on top of other symbolizer",
        "doc": "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",
        "type": ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"]
      }
    },
    "markers": {
      "file": {
        "css": "marker-file",
        "doc": "An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.",
        "default-value": "",
        "default-meaning": "An ellipse or circle, if width equals height",
        "type": "uri"
      },
      "opacity": {
        "css": "marker-opacity",
        "doc": "The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke",
        "default-value": 1,
        "default-meaning": "The stroke-opacity and fill-opacity will be used",
        "type": "float"
      },
      "fill-opacity": {
        "css": "marker-fill-opacity",
        "doc": "The fill opacity of the marker",
        "default-value": 1,
        "default-meaning": "opaque",
        "type": "float"
      },
      "stroke": {
        "css": "marker-line-color",
        "doc": "The color of the stroke around a marker shape.",
        "default-value": "black",
        "type": "color"
      },
      "stroke-width": {
        "css": "marker-line-width",
        "doc": "The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",
        "type": "float"
      },
      "stroke-opacity": {
        "css": "marker-line-opacity",
        "default-value": 1,
        "default-meaning": "opaque",
        "doc": "The opacity of a line",
        "type": "float"
      },
      "placement": {
        "css": "marker-placement",
        "type": ["point", "line", "interior"],
        "default-value": "point",
        "default-meaning": "Place markers at the center point (centroid) of the geometry",
        "doc": "Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior"
      },
      "multi-policy": {
        "css": "marker-multi-policy",
        "type": ["each", "whole", "largest"],
        "default-value": "each",
        "default-meaning": "If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each",
        "doc": "A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)."
      },
      "marker-type": {
        "css": "marker-type",
        "type": ["arrow", "ellipse"],
        "default-value": "ellipse",
        "doc": "The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)"
      },
      "width": {
        "css": "marker-width",
        "default-value": 10,
        "doc": "The width of the marker, if using one of the default types.",
        "type": "expression"
      },
      "height": {
        "css": "marker-height",
        "default-value": 10,
        "doc": "The height of the marker, if using one of the default types.",
        "type": "expression"
      },
      "fill": {
        "css": "marker-fill",
        "default-value": "blue",
        "doc": "The color of the area of the marker.",
        "type": "color"
      },
      "allow-overlap": {
        "css": "marker-allow-overlap",
        "type": "boolean",
        "default-value": false,
        "doc": "Control whether overlapping markers are shown or hidden.",
        "default-meaning": "Do not allow makers to overlap with each other - overlapping markers will not be shown."
      },
      "ignore-placement": {
        "css": "marker-ignore-placement",
        "type": "boolean",
        "default-value": false,
        "default-meaning": "do not store the bbox of this geometry in the collision detector cache",
        "doc": "value to control whether the placement of the feature will prevent the placement of other features"
      },
      "spacing": {
        "css": "marker-spacing",
        "doc": "Space between repeated labels",
        "default-value": 100,
        "type": "float"
      },
      "max-error": {
        "css": "marker-max-error",
        "type": "float",
        "default-value": 0.2,
        "doc": "The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers."
      },
      "transform": {
        "css": "marker-transform",
        "type": "functions",
        "functions": [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]],
        "default-value": "",
        "default-meaning": "No transformation",
        "doc": "SVG transformation definition"
      },
      "clip": {
        "css": "marker-clip",
        "type": "boolean",
        "default-value": true,
        "default-meaning": "geometry will be clipped to map bounds before rendering",
        "doc": "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."
      },
      "smooth": {
        "css": "marker-smooth",
        "type": "float",
        "default-value": 0,
        "default-meaning": "no smoothing",
        "range": "0-1",
        "doc": "Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."
      },
      "geometry-transform": {
        "css": "marker-geometry-transform",
        "type": "functions",
        "default-value": "none",
        "default-meaning": "geometry will not be transformed",
        "doc": "Allows transformation functions to be applied to the geometry.",
        "functions": [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]]
      },
      "comp-op": {
        "css": "marker-comp-op",
        "default-value": "src-over",
        "default-meaning": "add the current symbolizer on top of other symbolizer",
        "doc": "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",
        "type": ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"]
      }
    },
    "shield": {
      "name": {
        "css": "shield-name",
        "type": "expression",
        "serialization": "content",
        "doc": "Value to use for a shield\"s text label. Data columns are specified using brackets like [column_name]"
      },
      "file": {
        "css": "shield-file",
        "required": true,
        "type": "uri",
        "default-value": "none",
        "doc": "Image file to render behind the shield text"
      },
      "face-name": {
        "css": "shield-face-name",
        "type": "string",
        "validate": "font",
        "doc": "Font name and style to use for the shield text",
        "default-value": "",
        "required": true
      },
      "unlock-image": {
        "css": "shield-unlock-image",
        "type": "boolean",
        "doc": "This parameter should be set to true if you are trying to position text beside rather than on top of the shield image",
        "default-value": false,
        "default-meaning": "text alignment relative to the shield image uses the center of the image as the anchor for text positioning."
      },
      "size": {
        "css": "shield-size",
        "type": "float",
        "doc": "The size of the shield text in pixels"
      },
      "fill": {
        "css": "shield-fill",
        "type": "color",
        "doc": "The color of the shield text"
      },
      "placement": {
        "css": "shield-placement",
        "type": ["point", "line", "vertex", "interior"],
        "default-value": "point",
        "doc": "How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons."
      },
      "avoid-edges": {
        "css": "shield-avoid-edges",
        "doc": "Tell positioning algorithm to avoid labeling near intersection edges.",
        "type": "boolean",
        "default-value": false
      },
      "allow-overlap": {
        "css": "shield-allow-overlap",
        "type": "boolean",
        "default-value": false,
        "doc": "Control whether overlapping shields are shown or hidden.",
        "default-meaning": "Do not allow shields to overlap with other map elements already placed."
      },
      "minimum-distance": {
        "css": "shield-min-distance",
        "type": "float",
        "default-value": 0,
        "doc": "Minimum distance to the next shield symbol, not necessarily the same shield."
      },
      "spacing": {
        "css": "shield-spacing",
        "type": "float",
        "default-value": 0,
        "doc": "The spacing between repeated occurrences of the same shield on a line"
      },
      "minimum-padding": {
        "css": "shield-min-padding",
        "default-value": 0,
        "doc": "Determines the minimum amount of padding that a shield gets relative to other shields",
        "type": "float"
      },
      "wrap-width": {
        "css": "shield-wrap-width",
        "type": "unsigned",
        "default-value": 0,
        "doc": "Length of a chunk of text in characters before wrapping text"
      },
      "wrap-before": {
        "css": "shield-wrap-before",
        "type": "boolean",
        "default-value": false,
        "doc": "Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."
      },
      "wrap-character": {
        "css": "shield-wrap-character",
        "type": "string",
        "default-value": " ",
        "doc": "Use this character instead of a space to wrap long names."
      },
      "halo-fill": {
        "css": "shield-halo-fill",
        "type": "color",
        "default-value": "#FFFFFF",
        "default-meaning": "white",
        "doc": "Specifies the color of the halo around the text."
      },
      "halo-radius": {
        "css": "shield-halo-radius",
        "doc": "Specify the radius of the halo in pixels",
        "default-value": 0,
        "default-meaning": "no halo",
        "type": "float"
      },
      "character-spacing": {
        "css": "shield-character-spacing",
        "type": "unsigned",
        "default-value": 0,
        "doc": "Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement."
      },
      "line-spacing": {
        "css": "shield-line-spacing",
        "doc": "Vertical spacing between lines of multiline labels (in pixels)",
        "type": "unsigned"
      },
      "dx": {
        "css": "shield-text-dx",
        "type": "float",
        "doc": "Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right",
        "default-value": 0
      },
      "dy": {
        "css": "shield-text-dy",
        "type": "float",
        "doc": "Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down",
        "default-value": 0
      },
      "shield-dx": {
        "css": "shield-dx",
        "type": "float",
        "doc": "Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right",
        "default-value": 0
      },
      "shield-dy": {
        "css": "shield-dy",
        "type": "float",
        "doc": "Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down",
        "default-value": 0
      },
      "opacity": {
        "css": "shield-opacity",
        "type": "float",
        "doc": "(Default 1.0) - opacity of the image used for the shield",
        "default-value": 1
      },
      "text-opacity": {
        "css": "shield-text-opacity",
        "type": "float",
        "doc": "(Default 1.0) - opacity of the text placed on top of the shield",
        "default-value": 1
      },
      "horizontal-alignment": {
        "css": "shield-horizontal-alignment",
        "type": ["left", "middle", "right", "auto"],
        "doc": "The shield's horizontal alignment from its centerpoint",
        "default-value": "auto"
      },
      "vertical-alignment": {
        "css": "shield-vertical-alignment",
        "type": ["top", "middle", "bottom", "auto"],
        "doc": "The shield's vertical alignment from its centerpoint",
        "default-value": "middle"
      },
      "text-transform": {
        "css": "shield-text-transform",
        "type": ["none", "uppercase", "lowercase", "capitalize"],
        "doc": "Transform the case of the characters",
        "default-value": "none"
      },
      "justify-alignment": {
        "css": "shield-justify-alignment",
        "type": ["left", "center", "right", "auto"],
        "doc": "Define how text in a shield's label is justified",
        "default-value": "auto"
      },
      "clip": {
        "css": "shield-clip",
        "type": "boolean",
        "default-value": true,
        "default-meaning": "geometry will be clipped to map bounds before rendering",
        "doc": "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."
      },
      "comp-op": {
        "css": "shield-comp-op",
        "default-value": "src-over",
        "default-meaning": "add the current symbolizer on top of other symbolizer",
        "doc": "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",
        "type": ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"]
      }
    },
    "line-pattern": {
      "file": {
        "css": "line-pattern-file",
        "type": "uri",
        "default-value": "none",
        "required": true,
        "doc": "An image file to be repeated and warped along a line"
      },
      "clip": {
        "css": "line-pattern-clip",
        "type": "boolean",
        "default-value": true,
        "default-meaning": "geometry will be clipped to map bounds before rendering",
        "doc": "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."
      },
      "smooth": {
        "css": "line-pattern-smooth",
        "type": "float",
        "default-value": 0,
        "default-meaning": "no smoothing",
        "range": "0-1",
        "doc": "Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."
      },
      "geometry-transform": {
        "css": "line-pattern-geometry-transform",
        "type": "functions",
        "default-value": "none",
        "default-meaning": "geometry will not be transformed",
        "doc": "Allows transformation functions to be applied to the geometry.",
        "functions": [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]]
      },
      "comp-op": {
        "css": "line-pattern-comp-op",
        "default-value": "src-over",
        "default-meaning": "add the current symbolizer on top of other symbolizer",
        "doc": "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",
        "type": ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"]
      }
    },
    "polygon-pattern": {
      "file": {
        "css": "polygon-pattern-file",
        "type": "uri",
        "default-value": "none",
        "required": true,
        "doc": "Image to use as a repeated pattern fill within a polygon"
      },
      "alignment": {
        "css": "polygon-pattern-alignment",
        "type": ["local", "global"],
        "default-value": "local",
        "doc": "Specify whether to align pattern fills to the layer or to the map."
      },
      "gamma": {
        "css": "polygon-pattern-gamma",
        "type": "float",
        "default-value": 1,
        "default-meaning": "fully antialiased",
        "range": "0-1",
        "doc": "Level of antialiasing of polygon pattern edges"
      },
      "opacity": {
        "css": "polygon-pattern-opacity",
        "type": "float",
        "doc": "(Default 1.0) - Apply an opacity level to the image used for the pattern",
        "default-value": 1,
        "default-meaning": "The image is rendered without modifications"
      },
      "clip": {
        "css": "polygon-pattern-clip",
        "type": "boolean",
        "default-value": true,
        "default-meaning": "geometry will be clipped to map bounds before rendering",
        "doc": "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."
      },
      "smooth": {
        "css": "polygon-pattern-smooth",
        "type": "float",
        "default-value": 0,
        "default-meaning": "no smoothing",
        "range": "0-1",
        "doc": "Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."
      },
      "geometry-transform": {
        "css": "polygon-pattern-geometry-transform",
        "type": "functions",
        "default-value": "none",
        "default-meaning": "geometry will not be transformed",
        "doc": "Allows transformation functions to be applied to the geometry.",
        "functions": [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]]
      },
      "comp-op": {
        "css": "polygon-pattern-comp-op",
        "default-value": "src-over",
        "default-meaning": "add the current symbolizer on top of other symbolizer",
        "doc": "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",
        "type": ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"]
      }
    },
    "raster": {
      "opacity": {
        "css": "raster-opacity",
        "default-value": 1,
        "default-meaning": "opaque",
        "type": "float",
        "doc": "The opacity of the raster symbolizer on top of other symbolizers."
      },
      "filter-factor": {
        "css": "raster-filter-factor",
        "default-value": -1,
        "default-meaning": "Allow the datasource to choose appropriate downscaling.",
        "type": "float",
        "doc": "This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed."
      },
      "scaling": {
        "css": "raster-scaling",
        "type": ["near", "fast", "bilinear", "bilinear8", "bicubic", "spline16", "spline36", "hanning", "hamming", "hermite", "kaiser", "quadric", "catrom", "gaussian", "bessel", "mitchell", "sinc", "lanczos", "blackman"],
        "default-value": "near",
        "doc": "The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality."
      },
      "mesh-size": {
        "css": "raster-mesh-size",
        "default-value": 16,
        "default-meaning": "Reprojection mesh will be 1/16 of the resolution of the source image",
        "type": "unsigned",
        "doc": "A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion."
      },
      "comp-op": {
        "css": "raster-comp-op",
        "default-value": "src-over",
        "default-meaning": "add the current symbolizer on top of other symbolizer",
        "doc": "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",
        "type": ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"]
      }
    },
    "point": {
      "file": {
        "css": "point-file",
        "type": "uri",
        "required": false,
        "default-value": "none",
        "doc": "Image file to represent a point"
      },
      "allow-overlap": {
        "css": "point-allow-overlap",
        "type": "boolean",
        "default-value": false,
        "doc": "Control whether overlapping points are shown or hidden.",
        "default-meaning": "Do not allow points to overlap with each other - overlapping markers will not be shown."
      },
      "ignore-placement": {
        "css": "point-ignore-placement",
        "type": "boolean",
        "default-value": false,
        "default-meaning": "do not store the bbox of this geometry in the collision detector cache",
        "doc": "value to control whether the placement of the feature will prevent the placement of other features"
      },
      "opacity": {
        "css": "point-opacity",
        "type": "float",
        "default-value": 1.0,
        "default-meaning": "Fully opaque",
        "doc": "A value from 0 to 1 to control the opacity of the point"
      },
      "placement": {
        "css": "point-placement",
        "type": ["centroid", "interior"],
        "doc": "How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.",
        "default-value": "centroid"
      },
      "transform": {
        "css": "point-transform",
        "type": "functions",
        "functions": [["matrix", 6], ["translate", 2], ["scale", 2], ["rotate", 3], ["skewX", 1], ["skewY", 1]],
        "default-value": "",
        "default-meaning": "No transformation",
        "doc": "SVG transformation definition"
      },
      "comp-op": {
        "css": "point-comp-op",
        "default-value": "src-over",
        "default-meaning": "add the current symbolizer on top of other symbolizer",
        "doc": "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",
        "type": ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"]
      }
    },
    "text": {
      "name": {
        "css": "text-name",
        "type": "expression",
        "required": true,
        "default-value": "",
        "serialization": "content",
        "doc": "Value to use for a text label. Data columns are specified using brackets like [column_name]"
      },
      "face-name": {
        "css": "text-face-name",
        "type": "string",
        "validate": "font",
        "doc": "Font name and style to render a label in",
        "required": true
      },
      "size": {
        "css": "text-size",
        "type": "float",
        "default-value": 10,
        "doc": "Text size in pixels"
      },
      "text-ratio": {
        "css": "text-ratio",
        "doc": "Define the amount of text (of the total) present on successive lines when wrapping occurs",
        "default-value": 0,
        "type": "unsigned"
      },
      "wrap-width": {
        "css": "text-wrap-width",
        "doc": "Length of a chunk of text in characters before wrapping text",
        "default-value": 0,
        "type": "unsigned"
      },
      "wrap-before": {
        "css": "text-wrap-before",
        "type": "boolean",
        "default-value": false,
        "doc": "Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."
      },
      "wrap-character": {
        "css": "text-wrap-character",
        "type": "string",
        "default-value": " ",
        "doc": "Use this character instead of a space to wrap long text."
      },
      "spacing": {
        "css": "text-spacing",
        "type": "unsigned",
        "doc": "Distance between repeated text labels on a line (aka. label-spacing)"
      },
      "character-spacing": {
        "css": "text-character-spacing",
        "type": "float",
        "default-value": 0,
        "doc": "Horizontal spacing adjustment between characters in pixels"
      },
      "line-spacing": {
        "css": "text-line-spacing",
        "default-value": 0,
        "type": "unsigned",
        "doc": "Vertical spacing adjustment between lines in pixels"
      },
      "label-position-tolerance": {
        "css": "text-label-position-tolerance",
        "default-value": 0,
        "type": "unsigned",
        "doc": "Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)"
      },
      "max-char-angle-delta": {
        "css": "text-max-char-angle-delta",
        "type": "float",
        "default-value": "22.5",
        "doc": "The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners."
      },
      "fill": {
        "css": "text-fill",
        "doc": "Specifies the color for the text",
        "default-value": "#000000",
        "type": "color"
      },
      "opacity": {
        "css": "text-opacity",
        "doc": "A number from 0 to 1 specifying the opacity for the text",
        "default-value": 1.0,
        "default-meaning": "Fully opaque",
        "type": "float"
      },
      "halo-fill": {
        "css": "text-halo-fill",
        "type": "color",
        "default-value": "#FFFFFF",
        "default-meaning": "white",
        "doc": "Specifies the color of the halo around the text."
      },
      "halo-radius": {
        "css": "text-halo-radius",
        "doc": "Specify the radius of the halo in pixels",
        "default-value": 0,
        "default-meaning": "no halo",
        "type": "float"
      },
      "dx": {
        "css": "text-dx",
        "type": "float",
        "doc": "Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right",
        "default-value": 0
      },
      "dy": {
        "css": "text-dy",
        "type": "float",
        "doc": "Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down",
        "default-value": 0
      },
      "vertical-alignment": {
        "css": "text-vertical-alignment",
        "type": ["top", "middle", "bottom", "auto"],
        "doc": "Position of label relative to point position.",
        "default-value": "auto",
        "default-meaning": "Default affected by value of dy; \"bottom\" for dy>0, \"top\" for dy<0."
      },
      "avoid-edges": {
        "css": "text-avoid-edges",
        "doc": "Tell positioning algorithm to avoid labeling near intersection edges.",
        "default-value": false,
        "type": "boolean"
      },
      "minimum-distance": {
        "css": "text-min-distance",
        "doc": "Minimum permitted distance to the next text symbolizer.",
        "type": "float"
      },
      "minimum-padding": {
        "css": "text-min-padding",
        "doc": "Determines the minimum amount of padding that a text symbolizer gets relative to other text",
        "type": "float"
      },
      "minimum-path-length": {
        "css": "text-min-path-length",
        "type": "float",
        "default-value": 0,
        "default-meaning": "place labels on all paths",
        "doc": "Place labels only on paths longer than this value."
      },
      "allow-overlap": {
        "css": "text-allow-overlap",
        "type": "boolean",
        "default-value": false,
        "doc": "Control whether overlapping text is shown or hidden.",
        "default-meaning": "Do not allow text to overlap with other text - overlapping markers will not be shown."
      },
      "orientation": {
        "css": "text-orientation",
        "type": "expression",
        "doc": "Rotate the text."
      },
      "placement": {
        "css": "text-placement",
        "type": ["point", "line", "vertex", "interior"],
        "default-value": "point",
        "doc": "Control the style of placement of a point versus the geometry it is attached to."
      },
      "placement-type": {
        "css": "text-placement-type",
        "doc": "Re-position and/or re-size text to avoid overlaps. \"simple\" for basic algorithm (using text-placements string,) \"dummy\" to turn this feature off.",
        "type": ["dummy", "simple"],
        "default-value": "dummy"
      },
      "placements": {
        "css": "text-placements",
        "type": "string",
        "default-value": "",
        "doc": "If \"placement-type\" is set to \"simple\", use this \"POSITIONS,[SIZES]\" string. An example is `text-placements: \"E,NE,SE,W,NW,SW\";` "
      },
      "text-transform": {
        "css": "text-transform",
        "type": ["none", "uppercase", "lowercase", "capitalize"],
        "doc": "Transform the case of the characters",
        "default-value": "none"
      },
      "horizontal-alignment": {
        "css": "text-horizontal-alignment",
        "type": ["left", "middle", "right", "auto"],
        "doc": "The text's horizontal alignment from its centerpoint",
        "default-value": "auto"
      },
      "justify-alignment": {
        "css": "text-align",
        "type": ["left", "right", "center", "auto"],
        "doc": "Define how text is justified",
        "default-value": "auto",
        "default-meaning": "Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives"
      },
      "clip": {
        "css": "text-clip",
        "type": "boolean",
        "default-value": true,
        "default-meaning": "geometry will be clipped to map bounds before rendering",
        "doc": "geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."
      },
      "comp-op": {
        "css": "text-comp-op",
        "default-value": "src-over",
        "default-meaning": "add the current symbolizer on top of other symbolizer",
        "doc": "Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",
        "type": ["clear", "src", "dst", "src-over", "dst-over", "src-in", "dst-in", "src-out", "dst-out", "src-atop", "dst-atop", "xor", "plus", "minus", "multiply", "screen", "overlay", "darken", "lighten", "color-dodge", "color-burn", "hard-light", "soft-light", "difference", "exclusion", "contrast", "invert", "invert-rgb", "grain-merge", "grain-extract", "hue", "saturation", "color", "value"]
      }
    },
    "building": {
      "fill": {
        "css": "building-fill",
        "default-value": "#FFFFFF",
        "doc": "The color of the buildings walls.",
        "type": "color"
      },
      "fill-opacity": {
        "css": "building-fill-opacity",
        "type": "float",
        "doc": "The opacity of the building as a whole, including all walls.",
        "default-value": 1
      },
      "height": {
        "css": "building-height",
        "doc": "The height of the building in pixels.",
        "type": "expression",
        "default-value": "0"
      }
    }
  },
  "colors": {
    "aliceblue": [240, 248, 255],
    "antiquewhite": [250, 235, 215],
    "aqua": [0, 255, 255],
    "aquamarine": [127, 255, 212],
    "azure": [240, 255, 255],
    "beige": [245, 245, 220],
    "bisque": [255, 228, 196],
    "black": [0, 0, 0],
    "blanchedalmond": [255, 235, 205],
    "blue": [0, 0, 255],
    "blueviolet": [138, 43, 226],
    "brown": [165, 42, 42],
    "burlywood": [222, 184, 135],
    "cadetblue": [95, 158, 160],
    "chartreuse": [127, 255, 0],
    "chocolate": [210, 105, 30],
    "coral": [255, 127, 80],
    "cornflowerblue": [100, 149, 237],
    "cornsilk": [255, 248, 220],
    "crimson": [220, 20, 60],
    "cyan": [0, 255, 255],
    "darkblue": [0, 0, 139],
    "darkcyan": [0, 139, 139],
    "darkgoldenrod": [184, 134, 11],
    "darkgray": [169, 169, 169],
    "darkgreen": [0, 100, 0],
    "darkgrey": [169, 169, 169],
    "darkkhaki": [189, 183, 107],
    "darkmagenta": [139, 0, 139],
    "darkolivegreen": [85, 107, 47],
    "darkorange": [255, 140, 0],
    "darkorchid": [153, 50, 204],
    "darkred": [139, 0, 0],
    "darksalmon": [233, 150, 122],
    "darkseagreen": [143, 188, 143],
    "darkslateblue": [72, 61, 139],
    "darkslategrey": [47, 79, 79],
    "darkturquoise": [0, 206, 209],
    "darkviolet": [148, 0, 211],
    "deeppink": [255, 20, 147],
    "deepskyblue": [0, 191, 255],
    "dimgray": [105, 105, 105],
    "dimgrey": [105, 105, 105],
    "dodgerblue": [30, 144, 255],
    "firebrick": [178, 34, 34],
    "floralwhite": [255, 250, 240],
    "forestgreen": [34, 139, 34],
    "fuchsia": [255, 0, 255],
    "gainsboro": [220, 220, 220],
    "ghostwhite": [248, 248, 255],
    "gold": [255, 215, 0],
    "goldenrod": [218, 165, 32],
    "gray": [128, 128, 128],
    "grey": [128, 128, 128],
    "green": [0, 128, 0],
    "greenyellow": [173, 255, 47],
    "honeydew": [240, 255, 240],
    "hotpink": [255, 105, 180],
    "indianred": [205, 92, 92],
    "indigo": [75, 0, 130],
    "ivory": [255, 255, 240],
    "khaki": [240, 230, 140],
    "lavender": [230, 230, 250],
    "lavenderblush": [255, 240, 245],
    "lawngreen": [124, 252, 0],
    "lemonchiffon": [255, 250, 205],
    "lightblue": [173, 216, 230],
    "lightcoral": [240, 128, 128],
    "lightcyan": [224, 255, 255],
    "lightgoldenrodyellow": [250, 250, 210],
    "lightgray": [211, 211, 211],
    "lightgreen": [144, 238, 144],
    "lightgrey": [211, 211, 211],
    "lightpink": [255, 182, 193],
    "lightsalmon": [255, 160, 122],
    "lightseagreen": [32, 178, 170],
    "lightskyblue": [135, 206, 250],
    "lightslategray": [119, 136, 153],
    "lightslategrey": [119, 136, 153],
    "lightsteelblue": [176, 196, 222],
    "lightyellow": [255, 255, 224],
    "lime": [0, 255, 0],
    "limegreen": [50, 205, 50],
    "linen": [250, 240, 230],
    "magenta": [255, 0, 255],
    "maroon": [128, 0, 0],
    "mediumaquamarine": [102, 205, 170],
    "mediumblue": [0, 0, 205],
    "mediumorchid": [186, 85, 211],
    "mediumpurple": [147, 112, 219],
    "mediumseagreen": [60, 179, 113],
    "mediumslateblue": [123, 104, 238],
    "mediumspringgreen": [0, 250, 154],
    "mediumturquoise": [72, 209, 204],
    "mediumvioletred": [199, 21, 133],
    "midnightblue": [25, 25, 112],
    "mintcream": [245, 255, 250],
    "mistyrose": [255, 228, 225],
    "moccasin": [255, 228, 181],
    "navajowhite": [255, 222, 173],
    "navy": [0, 0, 128],
    "oldlace": [253, 245, 230],
    "olive": [128, 128, 0],
    "olivedrab": [107, 142, 35],
    "orange": [255, 165, 0],
    "orangered": [255, 69, 0],
    "orchid": [218, 112, 214],
    "palegoldenrod": [238, 232, 170],
    "palegreen": [152, 251, 152],
    "paleturquoise": [175, 238, 238],
    "palevioletred": [219, 112, 147],
    "papayawhip": [255, 239, 213],
    "peachpuff": [255, 218, 185],
    "peru": [205, 133, 63],
    "pink": [255, 192, 203],
    "plum": [221, 160, 221],
    "powderblue": [176, 224, 230],
    "purple": [128, 0, 128],
    "red": [255, 0, 0],
    "rosybrown": [188, 143, 143],
    "royalblue": [65, 105, 225],
    "saddlebrown": [139, 69, 19],
    "salmon": [250, 128, 114],
    "sandybrown": [244, 164, 96],
    "seagreen": [46, 139, 87],
    "seashell": [255, 245, 238],
    "sienna": [160, 82, 45],
    "silver": [192, 192, 192],
    "skyblue": [135, 206, 235],
    "slateblue": [106, 90, 205],
    "slategray": [112, 128, 144],
    "slategrey": [112, 128, 144],
    "snow": [255, 250, 250],
    "springgreen": [0, 255, 127],
    "steelblue": [70, 130, 180],
    "tan": [210, 180, 140],
    "teal": [0, 128, 128],
    "thistle": [216, 191, 216],
    "tomato": [255, 99, 71],
    "turquoise": [64, 224, 208],
    "violet": [238, 130, 238],
    "wheat": [245, 222, 179],
    "white": [255, 255, 255],
    "whitesmoke": [245, 245, 245],
    "yellow": [255, 255, 0],
    "yellowgreen": [154, 205, 50],
    "transparent": [0, 0, 0, 0]
  },
  "filter": {
    "value": ["true", "false", "null", "point", "linestring", "polygon", "collection"]
  }
};
CartoCSS['mapnik_reference'] = {
  version: {
    latest: SuperMap._mapnik_reference_latest,
    '2.1.1': SuperMap._mapnik_reference_latest
  }
};
SuperMap.CartoCSS = CartoCSS;
SuperMap.CartoCSS.Tree = {};

SuperMap.CartoCSS.Tree.operate = function (op, a, b) {
  switch (op) {
    case '+':
      return a + b;

    case '-':
      return a - b;

    case '*':
      return a * b;

    case '%':
      return a % b;

    case '/':
      return a / b;
  }
};

SuperMap.CartoCSS.Tree.functions = {
  rgb: function rgb(r, g, b) {
    return this.rgba(r, g, b, 1.0);
  },
  rgba: function rgba(r, g, b, a) {
    var me = this;
    var rgb = [r, g, b].map(function (c) {
      return me.number(c);
    });
    a = me.number(a);

    if (rgb.some(isNaN) || isNaN(a)) {
      return null;
    }

    return new SuperMap.CartoCSS.Tree.Color(rgb, a);
  },
  // Only require val
  stop: function stop(val) {
    var color, mode;

    if (arguments.length > 1) {
      color = arguments[1];
    }

    if (arguments.length > 2) {
      mode = arguments[2];
    }

    return {
      is: 'tag',
      val: val,
      color: color,
      mode: mode,
      toString: function toString(env) {
        return '\n\t<stop value="' + val.ev(env) + '"' + (color ? ' color="' + color.ev(env) + '" ' : '') + (mode ? ' mode="' + mode.ev(env) + '" ' : '') + '/>';
      }
    };
  },
  hsl: function hsl(h, s, l) {
    return this.hsla(h, s, l, 1.0);
  },
  hsla: function hsla(h, s, l, a) {
    h = this.number(h) % 360 / 360;
    s = this.number(s);
    l = this.number(l);
    a = this.number(a);

    if ([h, s, l, a].some(isNaN)) {
      return null;
    }

    var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s,
        m1 = l * 2 - m2;
    return this.rgba(hue(h + 1 / 3) * 255, hue(h) * 255, hue(h - 1 / 3) * 255, a);

    function hue(h) {
      h = h < 0 ? h + 1 : h > 1 ? h - 1 : h;

      if (h * 6 < 1) {
        return m1 + (m2 - m1) * h * 6;
      } else if (h * 2 < 1) {
        return m2;
      } else if (h * 3 < 2) {
        return m1 + (m2 - m1) * (2 / 3 - h) * 6;
      } else {
        return m1;
      }
    }
  },
  hue: function hue(color) {
    if (!('toHSL' in color)) {
      return null;
    }

    return new SuperMap.CartoCSS.Tree.Dimension(Math.round(color.toHSL().h));
  },
  saturation: function saturation(color) {
    if (!('toHSL' in color)) {
      return null;
    }

    return new SuperMap.CartoCSS.Tree.Dimension(Math.round(color.toHSL().s * 100), '%');
  },
  lightness: function lightness(color) {
    if (!('toHSL' in color)) {
      return null;
    }

    return new SuperMap.CartoCSS.Tree.Dimension(Math.round(color.toHSL().l * 100), '%');
  },
  alpha: function alpha(color) {
    if (!('toHSL' in color)) {
      return null;
    }

    return new SuperMap.CartoCSS.Tree.Dimension(color.toHSL().a);
  },
  saturate: function saturate(color, amount) {
    if (!('toHSL' in color)) {
      return null;
    }

    var hsl = color.toHSL();
    hsl.s += amount.value / 100;
    hsl.s = this.clamp(hsl.s);
    return this.hsla_simple(hsl);
  },
  desaturate: function desaturate(color, amount) {
    if (!('toHSL' in color)) {
      return null;
    }

    var hsl = color.toHSL();
    hsl.s -= amount.value / 100;
    hsl.s = this.clamp(hsl.s);
    return this.hsla_simple(hsl);
  },
  lighten: function lighten(color, amount) {
    if (!('toHSL' in color)) {
      return null;
    }

    var hsl = color.toHSL();
    hsl.l += amount.value / 100;
    hsl.l = this.clamp(hsl.l);
    return this.hsla_simple(hsl);
  },
  darken: function darken(color, amount) {
    if (!('toHSL' in color)) {
      return null;
    }

    var hsl = color.toHSL();
    hsl.l -= amount.value / 100;
    hsl.l = this.clamp(hsl.l);
    return this.hsla_simple(hsl);
  },
  fadein: function fadein(color, amount) {
    if (!('toHSL' in color)) {
      return null;
    }

    var hsl = color.toHSL();
    hsl.a += amount.value / 100;
    hsl.a = this.clamp(hsl.a);
    return this.hsla_simple(hsl);
  },
  fadeout: function fadeout(color, amount) {
    if (!('toHSL' in color)) {
      return null;
    }

    var hsl = color.toHSL();
    hsl.a -= amount.value / 100;
    hsl.a = this.clamp(hsl.a);
    return this.hsla_simple(hsl);
  },
  spin: function spin(color, amount) {
    if (!('toHSL' in color)) {
      return null;
    }

    var hsl = color.toHSL();
    var hue = (hsl.h + amount.value) % 360;
    hsl.h = hue < 0 ? 360 + hue : hue;
    return this.hsla_simple(hsl);
  },
  replace: function replace(entity, a, b) {
    if (entity.is === 'field') {
      return entity.toString + '.replace(' + a.toString() + ', ' + b.toString() + ')';
    } else {
      return entity.replace(a, b);
    }
  },
  //
  // Copyright (c) 2006-2009 Hampton Catlin, Nathan Weizenbaum, and Chris Eppstein
  // http://sass-lang.com
  //
  mix: function mix(color1, color2, weight) {
    var p = weight.value / 100.0;
    var w = p * 2 - 1;
    var a = color1.toHSL().a - color2.toHSL().a;
    var w1 = ((w * a == -1 ? w : (w + a) / (1 + w * a)) + 1) / 2.0;
    var w2 = 1 - w1;
    var rgb = [color1.rgb[0] * w1 + color2.rgb[0] * w2, color1.rgb[1] * w1 + color2.rgb[1] * w2, color1.rgb[2] * w1 + color2.rgb[2] * w2];
    var alpha = color1.alpha * p + color2.alpha * (1 - p);
    return new SuperMap.CartoCSS.Tree.Color(rgb, alpha);
  },
  greyscale: function greyscale(color) {
    return this.desaturate(color, new SuperMap.CartoCSS.Tree.Dimension(100));
  },
  '%': function _(quoted
  /* arg, arg, ...*/
  ) {
    var args = Array.prototype.slice.call(arguments, 1),
        str = quoted.value;

    for (var i = 0; i < args.length; i++) {
      str = str.replace(/%s/, args[i].value).replace(/%[da]/, args[i].toString());
    }

    str = str.replace(/%%/g, '%');
    return new SuperMap.CartoCSS.Tree.Quoted(str);
  },
  hsla_simple: function hsla_simple(h) {
    return this.hsla(h.h, h.s, h.l, h.a);
  },
  number: function number(n) {
    if (n instanceof SuperMap.CartoCSS.Tree.Dimension) {
      return parseFloat(n.unit === '%' ? n.value / 100 : n.value);
    } else if (typeof n === 'number') {
      return n;
    } else {
      return NaN;
    }
  },
  clamp: function clamp(val) {
    return Math.min(1, Math.max(0, val));
  }
};

SuperMap.CartoCSS.Tree.Call = /*#__PURE__*/function () {
  function Call(name, args, index) {
    CartoCSS_classCallCheck(this, Call);

    this.is = 'call';
    this.name = name;
    this.args = args;
    this.index = index;
  } // When evuating a function call,
  // we either find the function in `tree.functions` [1],
  // in which case we call it, passing the  evaluated arguments,
  // or we simply print it out as it appeared originally [2].
  // The *functions.js* file contains the built-in functions.
  // The reason why we evaluate the arguments, is in the case where
  // we try to pass a variable to a function, like: `saturate(@color)`.
  // The function should receive the value, not the variable.


  CartoCSS_createClass(Call, [{
    key: 'ev',
    value: function ev(env) {
      var args = this.args.map(function (a) {
        return a.ev(env);
      });

      for (var i = 0; i < args.length; i++) {
        if (args[i].is === 'undefined') {
          return {
            is: 'undefined',
            value: 'undefined'
          };
        }
      }

      if (this.name in SuperMap.CartoCSS.Tree.functions) {
        if (SuperMap.CartoCSS.Tree.functions[this.name].length <= args.length) {
          var val = SuperMap.CartoCSS.Tree.functions[this.name].apply(SuperMap.CartoCSS.Tree.functions, args);

          if (val === null) {
            env.error({
              message: 'incorrect arguments given to ' + this.name + '()',
              index: this.index,
              type: 'runtime',
              filename: this.filename
            });
            return {
              is: 'undefined',
              value: 'undefined'
            };
          }

          return val;
        } else {
          env.error({
            message: 'incorrect number of arguments for ' + this.name + '(). ' + SuperMap.CartoCSS.Tree.functions[this.name].length + ' expected.',
            index: this.index,
            type: 'runtime',
            filename: this.filename
          });
          return {
            is: 'undefined',
            value: 'undefined'
          };
        }
      } else {
        var fn = SuperMap.CartoCSS.Tree.Reference.mapnikFunctions[this.name];

        if (fn === undefined) {
          var functions = lodash_topairs_default()(SuperMap.CartoCSS.Tree.Reference.mapnikFunctions); // cheap closest, needs improvement.

          var name = this.name;
          var mean = functions.map(function (f) {
            return [f[0], SuperMap.CartoCSS.Tree.Reference.editDistance(name, f[0]), f[1]];
          }).sort(function (a, b) {
            return a[1] - b[1];
          });
          env.error({
            message: 'unknown function ' + this.name + '(), did you mean ' + mean[0][0] + '(' + mean[0][2] + ')',
            index: this.index,
            type: 'runtime',
            filename: this.filename
          });
          return {
            is: 'undefined',
            value: 'undefined'
          };
        }

        if (fn !== args.length && // support variable-arg functions like `colorize-alpha`
        fn !== -1) {
          env.error({
            message: 'function ' + this.name + '() takes ' + fn + ' arguments and was given ' + args.length,
            index: this.index,
            type: 'runtime',
            filename: this.filename
          });
          return {
            is: 'undefined',
            value: 'undefined'
          };
        } else {
          // Save the evaluated versions of arguments
          this.args = args;
          return this;
        }
      }
    }
  }, {
    key: "toString",
    value: function toString(env, format) {
      if (this.args.length) {
        return this.name + '(' + this.args.join(',') + ')';
      } else {
        return this.name;
      }
    }
  }]);

  return Call;
}();

SuperMap.CartoCSS.Tree.Color = /*#__PURE__*/function () {
  function Color(rgb, a) {
    CartoCSS_classCallCheck(this, Color);

    this.is = 'color'; // The end goal here, is to parse the arguments
    // into an integer triplet, such as `128, 255, 0`
    //
    // This facilitates operations and conversions.

    if (Array.isArray(rgb)) {
      this.rgb = rgb.slice(0, 3);
    } else if (rgb.length == 6) {
      this.rgb = rgb.match(/.{2}/g).map(function (c) {
        return parseInt(c, 16);
      });
    } else {
      this.rgb = rgb.split('').map(function (c) {
        return parseInt(c + c, 16);
      });
    }

    if (typeof a === 'number') {
      this.alpha = a;
    } else if (rgb.length === 4) {
      this.alpha = rgb[3];
    } else {
      this.alpha = 1;
    }
  }

  CartoCSS_createClass(Color, [{
    key: 'ev',
    value: function ev() {
      return this;
    } // If we have some transparency, the only way to represent it
    // is via `rgba`. Otherwise, we use the hex representation,
    // which has better compatibility with older browsers.
    // Values are capped between `0` and `255`, rounded and zero-padded.

  }, {
    key: "toString",
    value: function toString() {
      /* if (this.alpha < 1.0) {*/
      return 'rgba(' + this.rgb.map(function (c) {
        return Math.round(c);
      }).concat(this.alpha).join(', ') + ')';
      /*} else {
       return '#' + this.rgb.map(function(i) {
       i = Math.round(i);
       i = (i > 255 ? 255 : (i < 0 ? 0 : i)).toString(16);
       return i.length === 1 ? '0' + i : i;
       }).join('');
       }*/
    } // Operations have to be done per-channel, if not,
    // channels will spill onto each other. Once we have
    // our result, in the form of an integer triplet,
    // we create a new Color node to hold the result.

  }, {
    key: "operate",
    value: function operate(env, op, other) {
      var result = [];

      if (!(other instanceof SuperMap.CartoCSS.Tree.Color)) {
        other = other.toColor();
      }

      for (var c = 0; c < 3; c++) {
        result[c] = SuperMap.CartoCSS.Tree.operate(op, this.rgb[c], other.rgb[c]);
      }

      return new SuperMap.CartoCSS.Tree.Color(result);
    }
  }, {
    key: "toHSL",
    value: function toHSL() {
      var r = this.rgb[0] / 255,
          g = this.rgb[1] / 255,
          b = this.rgb[2] / 255,
          a = this.alpha;
      var max = Math.max(r, g, b),
          min = Math.min(r, g, b);
      var h,
          s,
          l = (max + min) / 2,
          d = max - min;

      if (max === min) {
        h = s = 0;
      } else {
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);

        switch (max) {
          case r:
            h = (g - b) / d + (g < b ? 6 : 0);
            break;

          case g:
            h = (b - r) / d + 2;
            break;

          case b:
            h = (r - g) / d + 4;
            break;

          default:
            break;
        }

        h /= 6;
      }

      return {
        h: h * 360,
        s: s,
        l: l,
        a: a
      };
    }
  }]);

  return Color;
}();

SuperMap.CartoCSS.Tree.Comment = /*#__PURE__*/function () {
  function Comment(value, silent) {
    CartoCSS_classCallCheck(this, Comment);

    this.value = value;
    this.silent = !!silent;
  }

  CartoCSS_createClass(Comment, [{
    key: "toString",
    value: function toString(env) {
      return '<!--' + this.value + '-->';
    }
  }, {
    key: 'ev',
    value: function ev() {
      return this;
    }
  }]);

  return Comment;
}();

SuperMap.CartoCSS.Tree.Definition = /*#__PURE__*/function () {
  function Definition(selector, rules) {
    CartoCSS_classCallCheck(this, Definition);

    this.elements = selector.elements; //assert.ok(selector.filters instanceof SuperMap.CartoCSS.Tree.Filterset);

    this.rules = rules;
    this.ruleIndex = {};

    for (var i = 0; i < this.rules.length; i++) {
      if ('zoom' in this.rules[i]) {
        this.rules[i] = this.rules[i].clone();
      }

      this.rules[i].zoom = selector.zoom;
      this.ruleIndex[this.rules[i].updateID()] = true;
    }

    this.filters = selector.filters;
    this.zoom = selector.zoom;
    this.attachment = selector.attachment || '__default__';
    this.specificity = selector.specificity();
  }

  CartoCSS_createClass(Definition, [{
    key: "toString",
    value: function toString() {
      var str = this.filters.toString();

      for (var i = 0; i < this.rules.length; i++) {
        str += '\n    ' + this.rules[i];
      }

      return str;
    }
  }, {
    key: "toJS",
    value: function toJS(env) {
      var shaderAttrs = {}; // merge conditions from filters with zoom condition of the
      // definition

      var zoom = this.zoom; //var frame_offset = this.frame_offset;

      var _if = this.filters.toJS(env);

      var filters = [zoom];

      if (_if) {
        filters.push(_if);
      } //if(frame_offset) filters.push('ctx["frame-offset"] === ' + frame_offset);


      _if = filters.join(" && ");

      function eachRule(rule) {
        if (rule instanceof SuperMap.CartoCSS.Tree.Rule) {
          shaderAttrs[rule.name] = shaderAttrs[rule.name] || [];

          if (_if) {
            shaderAttrs[rule.name].push("if(" + _if + "){" + rule.value.toJS(env) + "}");
          } else {
            shaderAttrs[rule.name].push(rule.value.toJS(env));
          }
        } else {
          if (rule instanceof SuperMap.CartoCSS.Tree.Ruleset) {
            var sh = rule.toJS(env);

            for (var v in sh) {
              shaderAttrs[v] = shaderAttrs[v] || [];

              for (var attr in sh[v]) {
                shaderAttrs[v].push(sh[v][attr]);
              }
            }
          }
        }
      }

      for (var id in this.rules) {
        eachRule(this.rules[id]);
      }

      return shaderAttrs;
    }
  }]);

  return Definition;
}();

SuperMap.CartoCSS.Tree.Dimension = /*#__PURE__*/function () {
  function Dimension(value, unit, index) {
    CartoCSS_classCallCheck(this, Dimension);

    this.is = 'float';
    this.physical_units = ['m', 'cm', 'in', 'mm', 'pt', 'pc'];
    this.screen_units = ['px', '%'];
    this.all_units = ['m', 'cm', 'in', 'mm', 'pt', 'pc', 'px', '%'];
    this.densities = {
      m: 0.0254,
      mm: 25.4,
      cm: 2.54,
      pt: 72,
      pc: 6
    };
    this.value = parseFloat(value);
    this.unit = unit || null;
    this.index = index;
  }

  CartoCSS_createClass(Dimension, [{
    key: "ev",
    value: function ev(env) {
      if (this.unit && this.all_units.indexOf(this.unit) < 0) {
        env.error({
          message: "Invalid unit: '" + this.unit + "'",
          index: this.index
        });
        return {
          is: 'undefined',
          value: 'undefined'
        };
      } // normalize units which are not px or %


      if (this.unit && this.physical_units.indexOf(this.unit) >= 0) {
        if (!env.ppi) {
          env.error({
            message: "ppi is not set, so metric units can't be used",
            index: this.index
          });
          return {
            is: 'undefined',
            value: 'undefined'
          };
        } // convert all units to inch
        // convert inch to px using ppi


        this.value = this.value / this.densities[this.unit] * env.ppi;
        this.unit = 'px';
      }

      return this;
    }
  }, {
    key: "toColor",
    value: function toColor() {
      return new SuperMap.CartoCSS.Tree.Color([this.value, this.value, this.value]);
    }
  }, {
    key: "round",
    value: function round() {
      this.value = Math.round(this.value);
      return this;
    }
  }, {
    key: "toString",
    value: function toString() {
      return this.value.toString();
    }
  }, {
    key: "operate",
    value: function operate(env, op, other) {
      if (this.unit === '%' && other.unit !== '%') {
        env.error({
          message: 'If two operands differ, the first must not be %',
          index: this.index
        });
        return {
          is: 'undefined',
          value: 'undefined'
        };
      }

      if (this.unit !== '%' && other.unit === '%') {
        if (op === '*' || op === '/' || op === '%') {
          env.error({
            message: 'Percent values can only be added or subtracted from other values',
            index: this.index
          });
          return {
            is: 'undefined',
            value: 'undefined'
          };
        }

        return new SuperMap.CartoCSS.Tree.Dimension(SuperMap.CartoCSS.Tree.operate(op, this.value, this.value * other.value * 0.01), this.unit);
      } //here the operands are either the same (% or undefined or px), or one is undefined and the other is px


      return new SuperMap.CartoCSS.Tree.Dimension(SuperMap.CartoCSS.Tree.operate(op, this.value, other.value), this.unit || other.unit);
    }
  }]);

  return Dimension;
}();

SuperMap.CartoCSS.Tree.Element = /*#__PURE__*/function () {
  function Element(value) {
    CartoCSS_classCallCheck(this, Element);

    this.value = value.trim();

    if (this.value[0] === '#') {
      this.type = 'id';
      this.clean = this.value.replace(/^#/, '');
    }

    if (this.value[0] === '.') {
      this.type = 'class';
      this.clean = this.value.replace(/^\./, '');
    }

    if (this.value.indexOf('*') !== -1) {
      this.type = 'wildcard';
    }
  }

  CartoCSS_createClass(Element, [{
    key: "specificity",
    value: function specificity() {
      return [this.type === 'id' ? 1 : 0, // a
      this.type === 'class' ? 1 : 0 // b
      ];
    }
  }, {
    key: "toString",
    value: function toString() {
      return this.value;
    }
  }]);

  return Element;
}();

SuperMap.CartoCSS.Tree.Expression = /*#__PURE__*/function () {
  function Expression(value) {
    CartoCSS_classCallCheck(this, Expression);

    this.is = 'expression';
    this.value = value;
  }

  CartoCSS_createClass(Expression, [{
    key: "ev",
    value: function ev(env) {
      if (this.value.length > 1) {
        return new SuperMap.CartoCSS.Tree.Expression(this.value.map(function (e) {
          return e.ev(env);
        }));
      } else {
        return this.value[0].ev(env);
      }
    }
  }, {
    key: "toString",
    value: function toString(env) {
      return this.value.map(function (e) {
        return e.toString(env);
      }).join(' ');
    }
  }]);

  return Expression;
}();

SuperMap.CartoCSS.Tree.Field = /*#__PURE__*/function () {
  function Field(content) {
    CartoCSS_classCallCheck(this, Field);

    this.is = 'field';
    this.value = content || '';
  }

  CartoCSS_createClass(Field, [{
    key: "toString",
    value: function toString() {
      return '["' + this.value.toUpperCase() + '"]';
    }
  }, {
    key: 'ev',
    value: function ev() {
      return this;
    }
  }]);

  return Field;
}();

SuperMap.CartoCSS.Tree.Filter = /*#__PURE__*/function () {
  function Filter(key, op, val, index, filename) {
    CartoCSS_classCallCheck(this, Filter);

    this.ops = {
      '<': [' &lt; ', 'numeric'],
      '>': [' &gt; ', 'numeric'],
      '=': [' = ', 'both'],
      '!=': [' != ', 'both'],
      '<=': [' &lt;= ', 'numeric'],
      '>=': [' &gt;= ', 'numeric'],
      '=~': ['.match(', 'string', ')']
    };
    this.key = key;
    this.op = op;
    this.val = val;
    this.index = index;
    this.filename = filename;
    this.id = this.key + this.op + this.val;
  }

  CartoCSS_createClass(Filter, [{
    key: "ev",
    value: function ev(env) {
      this.key = this.key.ev(env);
      this.val = this.val.ev(env);
      return this;
    }
  }, {
    key: "toString",
    value: function toString() {
      return '[' + this.id + ']';
    }
  }]);

  return Filter;
}();

SuperMap.CartoCSS.Tree.Filterset = /*#__PURE__*/function () {
  function Filterset() {
    CartoCSS_classCallCheck(this, Filterset);

    this.filters = {};
  }

  CartoCSS_createClass(Filterset, [{
    key: "toJS",
    value: function toJS(env) {
      function eachFilter(filter) {
        var op = filter.op;

        if (op === "=") {
          op = "==";
        }

        var val = filter.val;

        if (filter._val !== undefined) {
          val = filter._val.toString(true);
        } //å¯¹scaleè¿è¡ç¹æ®å¤çï¼å°å¼è½¬æ¢ææ°å¼


        if (filter.key && filter.key.value === 'scale') {
          val = +val;
        } else if (typeof val === 'string' || CartoCSS_typeof(val) === 'object') {
          val = "'" + val + "'";
        }

        var attrs = "attributes";
        return attrs + "&&" + attrs + filter.key + "&&" + attrs + filter.key + " " + op + val;
      }

      var results = [];

      for (var id in this.filters) {
        results.push(eachFilter(this.filters[id]));
      }

      return results.join(' && ');
    }
  }, {
    key: "toString",
    value: function toString() {
      var arr = [];

      for (var id in this.filters) {
        arr.push(this.filters[id].id);
      }

      return arr.sort().join('\t');
    }
  }, {
    key: "ev",
    value: function ev(env) {
      for (var i in this.filters) {
        this.filters[i].ev(env);
      }

      return this;
    }
  }, {
    key: "clone",
    value: function clone() {
      var clone = new SuperMap.CartoCSS.Tree.Filterset();

      for (var id in this.filters) {
        clone.filters[id] = this.filters[id];
      }

      return clone;
    }
  }, {
    key: "cloneWith",
    value: function cloneWith(other) {
      var additions = [];

      for (var id in other.filters) {
        var status = this.addable(other.filters[id]); // status is true, false or null. if it's null we don't fail this
        // clone nor do we add the filter.

        if (status === false) {
          return false;
        }

        if (status === true) {
          // Adding the filter will override another value.
          additions.push(other.filters[id]);
        }
      } // Adding the other filters doesn't make this filterset invalid, but it
      // doesn't add anything to it either.


      if (!additions.length) {
        return null;
      } // We can successfully add all filters. Now clone the filterset and add the
      // new rules.


      var clone = new SuperMap.CartoCSS.Tree.Filterset(); // We can add the rules that are already present without going through the
      // add function as a Filterset is always in it's simplest canonical form.

      for (id in this.filters) {
        clone.filters[id] = this.filters[id];
      } // Only add new filters that actually change the filter.


      while (id = additions.shift()) {
        clone.add(id);
      }

      return clone;
    }
  }, {
    key: "addable",
    value: function addable(filter) {
      var key = filter.key.toString(),
          value = filter.val.toString();

      if (value.match(/^[0-9]+(\.[0-9]*)?_match/)) {
        value = parseFloat(value);
      }

      switch (filter.op) {
        case '=':
          // if there is already foo= and we're adding foo=
          if (this.filters[key + '='] !== undefined) {
            if (this.filters[key + '='].val.toString() != value) {
              return false;
            } else {
              return null;
            }
          }

          if (this.filters[key + '!=' + value] !== undefined) {
            return false;
          }

          if (this.filters[key + '>'] !== undefined && this.filters[key + '>'].val >= value) {
            return false;
          }

          if (this.filters[key + '<'] !== undefined && this.filters[key + '<'].val <= value) {
            return false;
          }

          if (this.filters[key + '>='] !== undefined && this.filters[key + '>='].val > value) {
            return false;
          }

          if (this.filters[key + '<='] !== undefined && this.filters[key + '<='].val < value) {
            return false;
          }

          return true;

        case '=~':
          return true;

        case '!=':
          if (this.filters[key + '='] !== undefined) {
            return this.filters[key + '='].val === value ? false : null;
          }

          if (this.filters[key + '!=' + value] !== undefined) {
            return null;
          }

          if (this.filters[key + '>'] !== undefined && this.filters[key + '>'].val >= value) {
            return null;
          }

          if (this.filters[key + '<'] !== undefined && this.filters[key + '<'].val <= value) {
            return null;
          }

          if (this.filters[key + '>='] !== undefined && this.filters[key + '>='].val > value) {
            return null;
          }

          if (this.filters[key + '<='] !== undefined && this.filters[key + '<='].val < value) {
            return null;
          }

          return true;

        case '>':
          if (key + '=' in this.filters) {
            if (this.filters[key + '='].val <= value) {
              return false;
            } else {
              return null;
            }
          }

          if (this.filters[key + '<'] !== undefined && this.filters[key + '<'].val <= value) {
            return false;
          }

          if (this.filters[key + '<='] !== undefined && this.filters[key + '<='].val <= value) {
            return false;
          }

          if (this.filters[key + '>'] !== undefined && this.filters[key + '>'].val >= value) {
            return null;
          }

          if (this.filters[key + '>='] !== undefined && this.filters[key + '>='].val > value) {
            return null;
          }

          return true;

        case '>=':
          if (this.filters[key + '='] !== undefined) {
            return this.filters[key + '='].val < value ? false : null;
          }

          if (this.filters[key + '<'] !== undefined && this.filters[key + '<'].val <= value) {
            return false;
          }

          if (this.filters[key + '<='] !== undefined && this.filters[key + '<='].val < value) {
            return false;
          }

          if (this.filters[key + '>'] !== undefined && this.filters[key + '>'].val >= value) {
            return null;
          }

          if (this.filters[key + '>='] !== undefined && this.filters[key + '>='].val >= value) {
            return null;
          }

          return true;

        case '<':
          if (this.filters[key + '='] !== undefined) {
            return this.filters[key + '='].val >= value ? false : null;
          }

          if (this.filters[key + '>'] !== undefined && this.filters[key + '>'].val >= value) {
            return false;
          }

          if (this.filters[key + '>='] !== undefined && this.filters[key + '>='].val >= value) {
            return false;
          }

          if (this.filters[key + '<'] !== undefined && this.filters[key + '<'].val <= value) {
            return null;
          }

          if (this.filters[key + '<='] !== undefined && this.filters[key + '<='].val < value) {
            return null;
          }

          return true;

        case '<=':
          if (this.filters[key + '='] !== undefined) {
            return this.filters[key + '='].val > value ? false : null;
          }

          if (this.filters[key + '>'] !== undefined && this.filters[key + '>'].val >= value) {
            return false;
          }

          if (this.filters[key + '>='] !== undefined && this.filters[key + '>='].val > value) {
            return false;
          }

          if (this.filters[key + '<'] !== undefined && this.filters[key + '<'].val <= value) {
            return null;
          }

          if (this.filters[key + '<='] !== undefined && this.filters[key + '<='].val <= value) {
            return null;
          }

          return true;

        default:
          break;
      }
    }
  }, {
    key: "conflict",
    value: function conflict(filter) {
      var key = filter.key.toString(),
          value = filter.val.toString();

      if (!isNaN(parseFloat(value))) {
        value = parseFloat(value);
      } // if (a=b) && (a=c)
      // if (a=b) && (a!=b)
      // or (a!=b) && (a=b)


      if (filter.op === '=' && this.filters[key + '='] !== undefined && value != this.filters[key + '='].val.toString() || filter.op === '!=' && this.filters[key + '='] !== undefined && value == this.filters[key + '='].val.toString() || filter.op === '=' && this.filters[key + '!='] !== undefined && value === this.filters[key + '!='].val.toString()) {
        return filter.toString() + ' added to ' + this.toString() + ' produces an invalid filter';
      }

      return false;
    }
  }, {
    key: "add",
    value: function add(filter, env) {
      var key = filter.key.toString(),
          op = filter.op,
          conflict = this.conflict(filter),
          numval;

      if (conflict) {
        return conflict;
      }

      if (op === '=') {
        for (var i in this.filters) {
          if (this.filters[i].key === key) {
            delete this.filters[i];
          }
        }

        this.filters[key + '='] = filter;
      } else if (op === '!=') {
        this.filters[key + '!=' + filter.val] = filter;
      } else if (op === '=~') {
        this.filters[key + '=~' + filter.val] = filter;
      } else if (op === '>') {
        // If there are other filters that are also >
        // but are less than this one, they don't matter, so
        // remove them.
        for (var j in this.filters) {
          if (this.filters[j].key === key && this.filters[j].val <= filter.val) {
            delete this.filters[j];
          }
        }

        this.filters[key + '>'] = filter;
      } else if (op === '>=') {
        for (var k in this.filters) {
          numval = +this.filters[k].val.toString();

          if (this.filters[k].key === key && numval < filter.val) {
            delete this.filters[k];
          }
        }

        if (this.filters[key + '!=' + filter.val] !== undefined) {
          delete this.filters[key + '!=' + filter.val];
          filter.op = '>';
          this.filters[key + '>'] = filter;
        } else {
          this.filters[key + '>='] = filter;
        }
      } else if (op === '<') {
        for (var l in this.filters) {
          numval = +this.filters[l].val.toString();

          if (this.filters[l].key === key && numval >= filter.val) {
            delete this.filters[l];
          }
        }

        this.filters[key + '<'] = filter;
      } else if (op === '<=') {
        for (var m in this.filters) {
          numval = +this.filters[m].val.toString();

          if (this.filters[m].key === key && numval > filter.val) {
            delete this.filters[m];
          }
        }

        if (this.filters[key + '!=' + filter.val] !== undefined) {
          delete this.filters[key + '!=' + filter.val];
          filter.op = '<';
          this.filters[key + '<'] = filter;
        } else {
          this.filters[key + '<='] = filter;
        }
      }
    }
  }]);

  return Filterset;
}();

SuperMap.CartoCSS.Tree.Fontset = function Fontset(env, fonts) {
  CartoCSS_classCallCheck(this, Fontset);

  this.fonts = fonts;
  this.name = 'fontset-' + env.effects.length;
};

SuperMap.CartoCSS.Tree.Invalid = /*#__PURE__*/function () {
  function Invalid(chunk, index, message) {
    CartoCSS_classCallCheck(this, Invalid);

    this.is = 'invalid';
    this.chunk = chunk;
    this.index = index;
    this.type = 'syntax';
    this.message = message || "Invalid code: " + this.chunk;
  }

  CartoCSS_createClass(Invalid, [{
    key: "ev",
    value: function ev(env) {
      env.error({
        chunk: this.chunk,
        index: this.index,
        type: 'syntax',
        message: this.message || "Invalid code: " + this.chunk
      });
      return {
        is: 'undefined'
      };
    }
  }]);

  return Invalid;
}();

SuperMap.CartoCSS.Tree.Keyword = /*#__PURE__*/function () {
  CartoCSS_createClass(Keyword, [{
    key: "ev",
    value: function ev() {
      return this;
    }
  }]);

  function Keyword(value) {
    CartoCSS_classCallCheck(this, Keyword);

    this.value = value;
    var special = {
      'transparent': 'color',
      'true': 'boolean',
      'false': 'boolean'
    };
    this.is = special[value] ? special[value] : 'keyword';
  }

  CartoCSS_createClass(Keyword, [{
    key: "toString",
    value: function toString() {
      return this.value;
    }
  }]);

  return Keyword;
}();
/*Layer:class Invalid ),*/


SuperMap.CartoCSS.Tree.Literal = /*#__PURE__*/function () {
  function Literal(content) {
    CartoCSS_classCallCheck(this, Literal);

    this.value = content || '';
    this.is = 'field';
  }

  CartoCSS_createClass(Literal, [{
    key: "toString",
    value: function toString() {
      return this.value;
    }
  }, {
    key: 'ev',
    value: function ev() {
      return this;
    }
  }]);

  return Literal;
}();

SuperMap.CartoCSS.Tree.Operation = /*#__PURE__*/function () {
  function Operation(op, operands, index) {
    CartoCSS_classCallCheck(this, Operation);

    this.is = 'operation';
    this.op = op.trim();
    this.operands = operands;
    this.index = index;
  }

  CartoCSS_createClass(Operation, [{
    key: "ev",
    value: function ev(env) {
      var a = this.operands[0].ev(env),
          b = this.operands[1].ev(env),
          temp;

      if (a.is === 'undefined' || b.is === 'undefined') {
        return {
          is: 'undefined',
          value: 'undefined'
        };
      }

      if (a instanceof SuperMap.CartoCSS.Tree.Dimension && b instanceof SuperMap.CartoCSS.Tree.Color) {
        if (this.op === '*' || this.op === '+') {
          temp = b;
          b = a;
          a = temp;
        } else {
          env.error({
            name: "OperationError",
            message: "Can't substract or divide a color from a number",
            index: this.index
          });
        }
      } // Only concatenate plain strings, because this is easily
      // pre-processed


      if (a instanceof SuperMap.CartoCSS.Tree.Quoted && b instanceof SuperMap.CartoCSS.Tree.Quoted && this.op !== '+') {
        env.error({
          message: "Can't subtract, divide, or multiply strings.",
          index: this.index,
          type: 'runtime',
          filename: this.filename
        });
        return {
          is: 'undefined',
          value: 'undefined'
        };
      } // Fields, literals, dimensions, and quoted strings can be combined.


      if (a instanceof SuperMap.CartoCSS.Tree.Field || b instanceof SuperMap.CartoCSS.Tree.Field || a instanceof SuperMap.CartoCSS.Tree.Literal || b instanceof SuperMap.CartoCSS.Tree.Literal) {
        if (a.is === 'color' || b.is === 'color') {
          env.error({
            message: "Can't subtract, divide, or multiply colors in expressions.",
            index: this.index,
            type: 'runtime',
            filename: this.filename
          });
          return {
            is: 'undefined',
            value: 'undefined'
          };
        } else {
          return new SuperMap.CartoCSS.Tree.Literal(a.ev(env).toString(true) + this.op + b.ev(env).toString(true));
        }
      }

      if (a.operate === undefined) {
        env.error({
          message: 'Cannot do math with type ' + a.is + '.',
          index: this.index,
          type: 'runtime',
          filename: this.filename
        });
        return {
          is: 'undefined',
          value: 'undefined'
        };
      }

      return a.operate(env, this.op, b);
    }
  }]);

  return Operation;
}();

SuperMap.CartoCSS.Tree.Quoted = /*#__PURE__*/function () {
  function Quoted(content) {
    CartoCSS_classCallCheck(this, Quoted);

    this.is = 'string';
    this.value = content || '';
  }

  CartoCSS_createClass(Quoted, [{
    key: "toString",
    value: function toString(quotes) {
      var escapedValue = this.value.replace(/&/g, '&amp;');
      var xmlvalue = escapedValue.replace(/\'/g, '\\\'').replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/\>/g, '&gt;');
      return quotes === true ? "'" + xmlvalue + "'" : escapedValue;
    }
  }, {
    key: "ev",
    value: function ev() {
      return this;
    }
  }, {
    key: "operate",
    value: function operate(env, op, other) {
      return new SuperMap.CartoCSS.Tree.Quoted(SuperMap.CartoCSS.Tree.operate(op, this.toString(), other.toString(this.contains_field)));
    }
  }]);

  return Quoted;
}();

SuperMap.CartoCSS.Tree.Reference = {
  _validateValue: {
    'font': function font(env, value) {
      if (env.validation_data && env.validation_data.fonts) {
        return env.validation_data.fonts.indexOf(value) != -1;
      } else {
        return true;
      }
    }
  },
  setData: function setData(data) {
    this.data = data;
    this.selector_cache = generateSelectorCache(data);
    this.mapnikFunctions = generateMapnikFunctions(data);
    this.required_cache = generateRequiredProperties(data);

    function generateSelectorCache(data) {
      var index = {};

      for (var i in data.symbolizers) {
        for (var j in data.symbolizers[i]) {
          if (data.symbolizers[i][j].hasOwnProperty('css')) {
            index[data.symbolizers[i][j].css] = [data.symbolizers[i][j], i, j];
          }
        }
      }

      return index;
    }

    function generateMapnikFunctions(data) {
      var functions = {};

      for (var i in data.symbolizers) {
        for (var j in data.symbolizers[i]) {
          if (data.symbolizers[i][j].type === 'functions') {
            for (var k = 0; k < data.symbolizers[i][j].functions.length; k++) {
              var fn = data.symbolizers[i][j].functions[k];
              functions[fn[0]] = fn[1];
            }
          }
        }
      }

      return functions;
    }

    function generateRequiredProperties(data) {
      var cache = {};

      for (var symbolizer_name in data.symbolizers) {
        cache[symbolizer_name] = [];

        for (var j in data.symbolizers[symbolizer_name]) {
          if (data.symbolizers[symbolizer_name][j].required) {
            cache[symbolizer_name].push(data.symbolizers[symbolizer_name][j].css);
          }
        }
      }

      return cache;
    }
  },
  setVersion: function setVersion(version) {
    if (SuperMap.CartoCSS.mapnik_reference.version.hasOwnProperty(version)) {
      this.setData(SuperMap.CartoCSS.mapnik_reference.version[version]);
      return true;
    }

    return false;
  },
  selectorData: function selectorData(selector, i) {
    if (this.selector_cache && this.selector_cache[selector]) {
      return this.selector_cache[selector][i];
    }
  },
  validSelector: function validSelector(selector) {
    return !!this.selector_cache[selector];
  },
  selectorName: function selectorName(selector) {
    return this.selectorData(selector, 2);
  },
  selector: function selector(_selector) {
    return this.selectorData(_selector, 0);
  },
  symbolizer: function symbolizer(selector) {
    return this.selectorData(selector, 1);
  },
  requiredProperties: function requiredProperties(symbolizer_name, rules) {
    var req = this.required_cache[symbolizer_name];

    for (var i in req) {
      if (!(req[i] in rules)) {
        return 'Property ' + req[i] + ' required for defining ' + symbolizer_name + ' styles.';
      }
    }
  },
  isFont: function isFont(selector) {
    return this.selector(selector).validate === 'font';
  },
  editDistance: function editDistance(a, b) {
    if (a.length === 0) {
      return b.length;
    }

    if (b.length === 0) {
      return a.length;
    }

    var matrix = [];

    for (var i = 0; i <= b.length; i++) {
      matrix[i] = [i];
    }

    for (var j = 0; j <= a.length; j++) {
      matrix[0][j] = j;
    }

    for (i = 1; i <= b.length; i++) {
      for (j = 1; j <= a.length; j++) {
        if (b.charAt(i - 1) === a.charAt(j - 1)) {
          matrix[i][j] = matrix[i - 1][j - 1];
        } else {
          matrix[i][j] = Math.min(matrix[i - 1][j - 1] + 1, // substitution
          Math.min(matrix[i][j - 1] + 1, // insertion
          matrix[i - 1][j] + 1)); // deletion
        }
      }
    }

    return matrix[b.length][a.length];
  },
  validValue: function validValue(env, selector, value) {
    function validateFunctions(value, selector) {
      if (value.value[0].is === 'string') {
        return true;
      }

      for (var i in value.value) {
        for (var j in value.value[i].value) {
          if (value.value[i].value[j].is !== 'call') {
            return false;
          }

          var f = find(this.selector(selector).functions, function (x) {
            //NOSONAR
            return x[0] === value.value[i].value[j].name;
          });

          if (!(f && f[1] === -1)) {
            // This filter is unknown or given an incorrect number of arguments
            if (!f || f[1] !== value.value[i].value[j].args.length) {
              return false;
            }
          }
        }
      }

      return true;
    }

    function validateKeyword(value, selector) {
      if (CartoCSS_typeof(this.selector(selector).type) === 'object') {
        return this.selector(selector).type.indexOf(value.value[0].value) !== -1;
      } else {
        // allow unquoted keywords as strings
        return this.selector(selector).type === 'string';
      }
    }

    var i;

    if (!this.selector(selector)) {
      return false;
    } else if (value.value[0].is === 'keyword') {
      return validateKeyword(value, selector);
    } else if (value.value[0].is === 'undefined') {
      // caught earlier in the chain - ignore here so that
      // error is not overridden
      return true;
    } else if (this.selector(selector).type === 'numbers') {
      for (i in value.value) {
        if (value.value[i].is !== 'float') {
          return false;
        }
      }

      return true;
    } else if (this.selector(selector).type === 'tags') {
      if (!value.value) {
        return false;
      }

      if (!value.value[0].value) {
        return value.value[0].is === 'tag';
      }

      for (i = 0; i < value.value[0].value.length; i++) {
        if (value.value[0].value[i].is !== 'tag') {
          return false;
        }
      }

      return true;
    } else if (this.selector(selector).type == 'functions') {
      // For backwards compatibility, you can specify a string for `functions`-compatible
      // values, though they will not be validated.
      return validateFunctions(value, selector);
    } else if (this.selector(selector).type === 'expression') {
      return true;
    } else if (this.selector(selector).type === 'unsigned') {
      if (value.value[0].is === 'float') {
        value.value[0].round();
        return true;
      } else {
        return false;
      }
    } else {
      if (this.selector(selector).validate) {
        var valid = false;

        for (i = 0; i < value.value.length; i++) {
          if (this.selector(selector).type === value.value[i].is && this._validateValue[this.selector(selector).validate](env, value.value[i].value)) {
            return true;
          }
        }

        return valid;
      } else {
        return this.selector(selector).type === value.value[0].is;
      }
    }
  }
};
SuperMap.CartoCSS.Tree.Reference.setVersion("latest");

SuperMap.CartoCSS.Tree.Rule = /*#__PURE__*/function () {
  function Rule(name, value, index, filename) {
    CartoCSS_classCallCheck(this, Rule);

    this.is = 'rule';
    var parts = name.split('/');
    this.name = parts.pop();
    this.instance = parts.length ? parts[0] : '__default__';
    this.value = value instanceof SuperMap.CartoCSS.Tree.Value ? value : new SuperMap.CartoCSS.Tree.Value([value]);
    this.index = index;
    this.symbolizer = SuperMap.CartoCSS.Tree.Reference.symbolizer(this.name);
    this.filename = filename;
    this.variable = name.charAt(0) === '@';
  }

  CartoCSS_createClass(Rule, [{
    key: "clone",
    value: function clone() {
      var clone = Object.create(SuperMap.CartoCSS.Tree.Rule.prototype);
      clone.name = this.name;
      clone.value = this.value;
      clone.index = this.index;
      clone.instance = this.instance;
      clone.symbolizer = this.symbolizer;
      clone.filename = this.filename;
      clone.variable = this.variable;
      return clone;
    }
  }, {
    key: "updateID",
    value: function updateID() {
      return this.id = this.zoom + '#' + this.instance + '#' + this.name;
    }
  }, {
    key: "toString",
    value: function toString() {
      return '[' + SuperMap.CartoCSS.Tree.Zoom.toString(this.zoom) + '] ' + this.name + ': ' + this.value;
    }
  }, {
    key: "ev",
    value: function ev(context) {
      return new SuperMap.CartoCSS.Tree.Rule(this.name, this.value.ev(context), this.index, this.filename);
    }
  }]);

  return Rule;
}();

SuperMap.CartoCSS.Tree.Ruleset = /*#__PURE__*/function () {
  function Ruleset(selectors, rules) {
    CartoCSS_classCallCheck(this, Ruleset);

    this.is = 'ruleset';
    this.selectors = selectors;
    this.rules = rules; // static cache of find() function

    this._lookups = {};
  }

  CartoCSS_createClass(Ruleset, [{
    key: "ev",
    value: function ev(env) {
      var i,
          rule,
          ruleset = new SuperMap.CartoCSS.Tree.Ruleset(this.selectors, this.rules.slice(0));
      ruleset.root = this.root; // push the current ruleset to the frames stack

      env.frames.unshift(ruleset); // Evaluate everything else

      for (i = 0, rule; i < ruleset.rules.length; i++) {
        rule = ruleset.rules[i];
        ruleset.rules[i] = rule.ev ? rule.ev(env) : rule;
      } // Pop the stack


      env.frames.shift();
      return ruleset;
    }
  }, {
    key: "match",
    value: function match(args) {
      return !args || args.length === 0;
    }
  }, {
    key: "variables",
    value: function variables() {
      if (this._variables) {
        return this._variables;
      } else {
        return this._variables = this.rules.reduce(function (hash, r) {
          if (r instanceof SuperMap.CartoCSS.Tree.Rule && r.variable === true) {
            hash[r.name] = r;
          }

          return hash;
        }, {});
      }
    }
  }, {
    key: "variable",
    value: function variable(name) {
      return this.variables()[name];
    }
  }, {
    key: "rulesets",
    value: function rulesets() {
      if (this._rulesets) {
        return this._rulesets;
      } else {
        return this._rulesets = this.rules.filter(function (r) {
          return r instanceof SuperMap.CartoCSS.Tree.Ruleset;
        });
      }
    }
  }, {
    key: "find",
    value: function find(selector, self) {
      self = self || this;
      var rules = [],
          match,
          key = selector.toString();

      if (key in this._lookups) {
        return this._lookups[key];
      }

      this.rulesets().forEach(function (rule) {
        if (rule !== self) {
          for (var j = 0; j < rule.selectors.length; j++) {
            match = selector.match(rule.selectors[j]);

            if (match) {
              if (selector.elements.length > 1) {
                Array.prototype.push.apply(rules, rule.find(new SuperMap.CartoCSS.Tree.Selector(null, null, selector.elements.slice(1)), self));
              } else {
                rules.push(rule);
              }

              break;
            }
          }
        }
      });
      return this._lookups[key] = rules;
    } // Zooms can use variables. This replaces SuperMap.CartoCSS.Tree.Zoom objects on selectors
    // with simple bit-arrays that we can compare easily.

  }, {
    key: "evZooms",
    value: function evZooms(env) {
      for (var i = 0; i < this.selectors.length; i++) {
        var zval = SuperMap.CartoCSS.Tree.Zoom.all;

        for (var z = 0; z < this.selectors[i].zoom.length; z++) {
          zval = this.selectors[i].zoom[z].ev(env).zoom;
        }

        this.selectors[i].zoom = zval;
      }
    }
  }, {
    key: "flatten",
    value: function flatten(result, parents, env) {
      var selectors = [],
          i,
          j;

      if (this.selectors.length === 0) {
        env.frames = env.frames.concat(this.rules);
      } // evaluate zoom variables on this object.


      this.evZooms(env);

      for (i = 0; i < this.selectors.length; i++) {
        var child = this.selectors[i];

        if (!child.filters) {
          // This is an invalid filterset.
          continue;
        }

        if (parents.length) {
          for (j = 0; j < parents.length; j++) {
            var parent = parents[j];
            var mergedFilters = parent.filters.cloneWith(child.filters);

            if (mergedFilters === null) {
              // Filters could be added, but they didn't change the
              // filters. This means that we only have to clone when
              // the zoom levels or the attachment is different too.
              if (parent.zoom === child.zoom && parent.attachment === child.attachment && parent.elements.join() === child.elements.join()) {
                selectors.push(parent);
                continue;
              } else {
                mergedFilters = parent.filters;
              }
            } else if (!mergedFilters) {
              // The merged filters are invalid, that means we don't
              // have to clone.
              continue;
            }

            var clone = Object.create(SuperMap.CartoCSS.Tree.Selector.prototype);
            clone.filters = mergedFilters;
            clone.zoom = child.zoom;
            clone.elements = parent.elements.concat(child.elements);

            if (parent.attachment && child.attachment) {
              clone.attachment = parent.attachment + '/' + child.attachment;
            } else {
              clone.attachment = child.attachment || parent.attachment;
            }

            clone.conditions = parent.conditions + child.conditions;
            clone.index = child.index;
            selectors.push(clone);
          }
        } else {
          selectors.push(child);
        }
      }

      var rules = [];

      for (i = 0; i < this.rules.length; i++) {
        var rule = this.rules[i]; // Recursively flatten any nested rulesets

        if (rule instanceof SuperMap.CartoCSS.Tree.Ruleset) {
          rule.flatten(result, selectors, env);
        } else if (rule instanceof SuperMap.CartoCSS.Tree.Rule) {
          rules.push(rule);
        } else if (rule instanceof SuperMap.CartoCSS.Tree.Invalid) {
          env.error(rule);
        }
      }

      var index = rules.length ? rules[0].index : false;

      for (i = 0; i < selectors.length; i++) {
        // For specificity sort, use the position of the first rule to allow
        // defining attachments that are under current element as a descendant
        // selector.
        if (index !== false) {
          selectors[i].index = index;
        }

        result.push(new SuperMap.CartoCSS.Tree.Definition(selectors[i], rules.slice()));
      }

      return result;
    }
  }]);

  return Ruleset;
}();

SuperMap.CartoCSS.Tree.Selector = /*#__PURE__*/function () {
  function Selector(filters, zoom, elements, attachment, conditions, index) {
    CartoCSS_classCallCheck(this, Selector);

    this.elements = elements || [];
    this.attachment = attachment;
    this.filters = filters || {};
    this.zoom = typeof zoom !== 'undefined' ? zoom : SuperMap.CartoCSS.Tree.Zoom.all;
    this.conditions = conditions;
    this.index = index;
  }

  CartoCSS_createClass(Selector, [{
    key: "specificity",
    value: function specificity() {
      return this.elements.reduce(function (memo, e) {
        var spec = e.specificity();
        memo[0] += spec[0];
        memo[1] += spec[1];
        return memo;
      }, [0, 0, this.conditions, this.index]);
    }
  }]);

  return Selector;
}();
/*style:class Invalid ),*/


SuperMap.CartoCSS.Tree.URL = /*#__PURE__*/function () {
  function URL(val, paths) {
    CartoCSS_classCallCheck(this, URL);

    this.is = 'uri';
    this.value = val;
    this.paths = paths;
  }

  CartoCSS_createClass(URL, [{
    key: "toString",
    value: function toString() {
      return this.value.toString();
    }
  }, {
    key: "ev",
    value: function ev(ctx) {
      return new SuperMap.CartoCSS.Tree.URL(this.value.ev(ctx), this.paths);
    }
  }]);

  return URL;
}();

SuperMap.CartoCSS.Tree.Value = /*#__PURE__*/function () {
  function Value(value) {
    CartoCSS_classCallCheck(this, Value);

    this.is = 'value';
    this.value = value;
  }

  CartoCSS_createClass(Value, [{
    key: "ev",
    value: function ev(env) {
      if (this.value.length === 1) {
        return this.value[0].ev(env);
      } else {
        return new SuperMap.CartoCSS.Tree.Value(this.value.map(function (v) {
          return v.ev(env);
        }));
      }
    }
  }, {
    key: "toJS",
    value: function toJS(env) {
      //var v = this.value[0].value[0];
      var val = this.ev(env);
      var v = val.toString();

      if (val.is === "color" || val.is === 'uri' || val.is === 'string' || val.is === 'keyword') {
        v = "'" + v + "'";
      } else if (val.is === 'field') {
        // replace [varuable] by ctx['variable']
        v = v.replace(/\[(.*)\]/g, "attributes['\_match1']");
      } else if (val.value && CartoCSS_typeof(val.value) === "object") {
        v = "[" + v + "]";
      }

      return "_value = " + v + ";";
    }
  }, {
    key: "toString",
    value: function toString(env, selector, sep, format) {
      return this.value.map(function (e) {
        return e.toString(env, format);
      }).join(sep || ', ');
    }
  }, {
    key: "clone",
    value: function clone() {
      var obj = Object.create(SuperMap.CartoCSS.Tree.Value.prototype);

      if (Array.isArray(obj)) {
        obj.value = this.value.slice();
      } else {
        obj.value = this.value;
      }

      obj.is = this.is;
      return obj;
    }
  }]);

  return Value;
}();

SuperMap.CartoCSS.Tree.Variable = /*#__PURE__*/function () {
  function Variable(name, index, filename) {
    CartoCSS_classCallCheck(this, Variable);

    this.is = 'variable';
    this.name = name;
    this.index = index;
    this.filename = filename;
  }

  CartoCSS_createClass(Variable, [{
    key: "toString",
    value: function toString() {
      return this.name;
    }
  }, {
    key: "ev",
    value: function ev(env) {
      if (this._css) {
        return this._css;
      }

      var thisframe = env.frames.filter(function (f) {
        return f.name === this.name;
      }.bind(this));

      if (thisframe.length) {
        return thisframe[0].value.ev(env);
      } else {
        env.error({
          message: 'variable ' + this.name + ' is undefined',
          index: this.index,
          type: 'runtime',
          filename: this.filename
        });
        return {
          is: 'undefined',
          value: 'undefined'
        };
      }
    }
  }]);

  return Variable;
}();

SuperMap.CartoCSS.Tree.Zoom = /*#__PURE__*/function () {
  function Zoom(op, value, index) {
    CartoCSS_classCallCheck(this, Zoom);

    this.op = op;
    this.value = value;
    this.index = index;
  }

  CartoCSS_createClass(Zoom, [{
    key: "setZoom",
    value: function setZoom(zoom) {
      this.zoom = zoom;
      return this;
    }
  }, {
    key: "ev",
    value: function ev(env) {
      var value = parseInt(this.value.ev(env).toString(), 10);

      if (value > SuperMap.CartoCSS.Tree.Zoom.maxZoom || value < 0) {
        env.error({
          message: 'Only zoom levels between 0 and ' + SuperMap.CartoCSS.Tree.Zoom.maxZoom + ' supported.',
          index: this.index
        });
      }

      switch (this.op) {
        case '=':
          this.zoom = "zoom && zoom === " + value;
          return this;

        case '>':
          this.zoom = "zoom && zoom > " + value;
          break;

        case '>=':
          this.zoom = "zoom && zoom >= " + value;
          break;

        case '<':
          this.zoom = "zoom && zoom < " + value;
          break;

        case '<=':
          this.zoom = "zoom && zoom <= " + value;
          break;

        default:
          return this;
          break;
      }
      /*
       for (var i = 0; i <= SuperMap.CartoCSS.Tree.Zoom.maxZoom; i++) {
       if (i >= start && i <= end) {
       zoom |= (1 << i);
       }
       }
       this.zoom = zoom;
       this.zoom=value+this.op+"zoom";*/


      return this;
    }
  }, {
    key: "toString",
    value: function toString() {
      var str = '';

      for (var i = 0; i <= SuperMap.CartoCSS.Tree.Zoom.maxZoom; i++) {
        str += this.zoom & 1 << i ? 'X' : '.';
      }

      return str;
    }
  }]);

  return Zoom;
}(); // Covers all zoomlevels from 0 to 22


SuperMap.CartoCSS.Tree.Zoom.all = 23;
SuperMap.CartoCSS.Tree.Zoom.maxZoom = 22;
SuperMap.CartoCSS.Tree.Zoom.ranges = {
  0: 1000000000,
  1: 500000000,
  2: 200000000,
  3: 100000000,
  4: 50000000,
  5: 25000000,
  6: 12500000,
  7: 6500000,
  8: 3000000,
  9: 1500000,
  10: 750000,
  11: 400000,
  12: 200000,
  13: 100000,
  14: 50000,
  15: 25000,
  16: 12500,
  17: 5000,
  18: 2500,
  19: 1500,
  20: 750,
  21: 500,
  22: 250,
  23: 100
};
// CONCATENATED MODULE: ./src/common/style/ThemeStyle.js
function ThemeStyle_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.ThemeStyle
 * @classdesc å®¢æ·ç«¯ä¸é¢å¾é£æ ¼ç±»ã
 * @category Visualization Theme
 * @param {Object} options - å¯éåæ°ã
 * @param {boolean} [options.fill=true] - æ¯å¦å¡«åï¼ä¸éè¦å¡«ååè®¾ç½®ä¸º falseãå¦æ fill ä¸ stroke åæ¶ä¸º falseï¼å°æ fill ä¸ stroke çé»è®¤å¼æ¸²æå¾å±ã
 * @param {string} [options.fillColor='#000000'] - åå­è¿å¶å¡«åé¢è²ã
 * @param {number} [options.fillOpacity=1] - å¡«åä¸éæåº¦ãåå¼èå´[0, 1]ã
 * @param {boolean} [options.stroke=false] -  æ¯å¦æè¾¹ï¼ä¸éè¦æè¾¹åè®¾ç½®ä¸ºfalseãå¦æ fill ä¸ stroke åæ¶ä¸º falseï¼å°æ fill ä¸ stroke çé»è®¤å¼æ¸²æå¾å±ã
 * @param {string} [options.strokeColor='#000000'] - åå­è¿å¶æè¾¹é¢è²ã
 * @param {number} [options.strokeOpacity=1] - æè¾¹çä¸éæåº¦ãåå¼èå´[0, 1]ã
 * @param {number} [options.strokeWidth=1] - çº¿å®½åº¦/æè¾¹å®½åº¦ã
 * @param {string} [options.strokeLinecap='butt'] - çº¿å¸½æ ·å¼ãstrokeLinecap æä¸ç§ç±»å âbutt", "round", "square"ã
 * @param {string} [options.strokeLineJoin='iter'] - çº¿æ®µè¿æ¥æ ·å¼ãstrokeLineJoin æä¸ç§ç±»å âmiter", "round", "bevel"ã
 * @param {string} [options.strokeDashstyle='solid'] - èçº¿ç±»åãstrokeDashstyle æå«ç§ç±»å âdot",âdash",âdashdot",âlongdash",âlongdashdot",âsolid", "dashed", "dotted"ãsolid è¡¨ç¤ºå®çº¿ã
 * @param {number} [options.pointRadius=6] - ç¹åå¾,åä½ä¸ºåç´ ã
 * @param {number} [options.shadowBlur=0] - é´å½±æ¨¡ç³åº¦ï¼ï¼å¤§äº 0 ææ;ï¼ãæ³¨ï¼è¯·å° shadowColor å±æ§ä¸ shadowBlur å±æ§ä¸èµ·ä½¿ç¨ï¼æ¥åå»ºé´å½±ã
 * @param {string} [options.shadowColor='#000000'] - é´å½±é¢è²ãæ³¨ï¼è¯·å° shadowColor å±æ§ä¸ shadowBlur å±æ§ä¸èµ·ä½¿ç¨ï¼æ¥åå»ºé´å½±ã
 * @param {number} [options.shadowOffsetX=0] - é´å½± X æ¹ååç§»å¼ã
 * @param {number} [options.shadowOffsetY=0] - é´å½± Y æ¹ååç§»å¼ã
 * @param {string} options.label - ä¸é¢è¦ç´ éå ææ¬æ ç­¾åå®¹ã
 * @param {string} [options.fontColor] - éå ææ¬å­ä½é¢è²ã
 * @param {number} [options.fontSize=12] - éå ææ¬å­ä½å¤§å°,åä½æ¯åç´ ã
 * @param {string} [options.fontStyle='normal'] - éå ææ¬å­ä½æ ·å¼ãå¯è®¾å¼ï¼"normal", "italic", "oblique"ã
 * @param {string} [options.fontVariant='normal'] - éå ææ¬å­ä½åä½ãå¯è®¾å¼ï¼"normal", "small-caps"ã
 * @param {string} [options.fontWeight='normal'] - éå ææ¬å­ä½ç²ç»ãå¯è®¾å¼ï¼"normal", "bold", "bolder", "lighter"ã
 * @param {string} [options.fontFamily='arial,sans-serif'] - éå ææ¬å­ä½ç³»åãfontFamily å¼æ¯å­ä½æåç§°æ/åç±»æåç§°çä¸ä¸ªä¼åè¡¨ï¼æ¯ä¸ªå¼éå·åå²ï¼
 *                             æµè§å¨ä¼ä½¿ç¨å®å¯è¯å«çç¬¬ä¸ä¸ªå¯ä»¥ä½¿ç¨å·ä½çå­ä½åç§°ï¼"times"ã"courier"ã"arial"ï¼æå­ä½ç³»ååç§°
 *                              ï¼"serif"ã"sans-serif"ã"cursive"ã"fantasy"ã"monospace"ï¼ã
 * @param {string} [options.labelPosition='top'] - éå ææ¬ä½ç½®, å¯ä»¥æ¯ 'inside', 'left', 'right', 'top', 'bottom'ã
 * @param {string} [options.labelAlign='center'] - éå ææ¬æ°´å¹³å¯¹é½ãå¯ä»¥æ¯ 'left', 'right', 'center'ã
 * @param {string} [options.labelBaseline='middle'] - éå ææ¬åç´å¯¹é½ã å¯ä»¥æ¯ 'top', 'bottom', 'middle' ã
 * @param {number} [options.labelXOffset=0] - éå ææ¬å¨xè½´æ¹åçåç§»éã
 * @param {number} [options.labelYOffset=0] - éå ææ¬å¨yè½´æ¹åçåç§»éã
 */

var ThemeStyle = function ThemeStyle(options) {
  ThemeStyle_classCallCheck(this, ThemeStyle);

  options = options || {};
  /**
   * @member {boolean} [SuperMap.ThemeStyle.prototype.fill=true]
   * @description æ¯å¦å¡«åï¼ä¸éè¦å¡«ååè®¾ç½®ä¸º falseãå¦æ fill ä¸ stroke åæ¶ä¸º falseï¼å°æ fill ä¸ stroke çé»è®¤å¼æ¸²æå¾å±ã
   */

  this.fill = true;
  /**
   * @member {string} [SuperMap.ThemeStyle.prototype.fillColor="#000000"]
   * @description åå­è¿å¶å¡«åé¢è²ã
   */

  this.fillColor = "#000000";
  /**
   *  @member {number} [SuperMap.ThemeStyle.prototype.fillOpacity=1]
   *  @description å¡«åä¸éæåº¦ãåå¼èå´[0, 1]ã
   */

  this.fillOpacity = 1;
  /**
   * @member {boolean} [SuperMap.ThemeStyle.prototype.stroke=false]
   * @description  æ¯å¦æè¾¹ï¼ä¸éè¦æè¾¹åè®¾ç½®ä¸ºfalseãå¦æ fill ä¸ stroke åæ¶ä¸º falseï¼å°æ fill ä¸ stroke çé»è®¤å¼æ¸²æå¾å±ã
   */

  this.stroke = false;
  /**
   * @member {string} [SuperMap.ThemeStyle.prototype.strokeColor="#000000"]
   * @description  åå­è¿å¶æè¾¹é¢è²ã
   */

  this.strokeColor = "#000000";
  /**
   * @member {number} [SuperMap.ThemeStyle.prototype.strokeOpacity=1]
   * @description  æè¾¹çä¸éæåº¦ãåå¼èå´[0, 1]ã
   */

  this.strokeOpacity = 1;
  /**
   * @member {number} [SuperMap.ThemeStyle.prototype.strokeWidth=1]
   * @description  çº¿å®½åº¦/æè¾¹å®½åº¦ã
   */

  this.strokeWidth = 1;
  /**
   * @member {string} [SuperMap.ThemeStyle.prototype.strokeLinecap="butt"]
   * @description  çº¿å¸½æ ·å¼ï¼strokeLinecap æä¸ç§ç±»å âbutt", "round", "square" ã
   */

  this.strokeLinecap = "butt";
  /**
   * @member {string} [SuperMap.ThemeStyle.prototype.strokeLineJoin="miter"]
   * @description  çº¿æ®µè¿æ¥æ ·å¼ï¼strokeLineJoin æä¸ç§ç±»å âmiter", "round", "bevel"ã
   */

  this.strokeLineJoin = "miter";
  /**
   * @member {string} [SuperMap.ThemeStyle.prototype.strokeDashstyle="solid"]
   * @description   èçº¿ç±»åï¼ strokeDashstyle æå«ç§ç±»å âdot",âdash",âdashdot",âlongdash",âlongdashdot",âsolid", "dashed", "dotted";
   * solid è¡¨ç¤ºå®çº¿ã
   */

  this.strokeDashstyle = "solid";
  /**
   * @member {number} [SuperMap.ThemeStyle.prototype.pointRadius=6]
   * @description   ç¹åå¾ãåä½ä¸ºåç´ ã
   */

  this.pointRadius = 6;
  /**
   * @member {number} [SuperMap.ThemeStyle.prototype.shadowBlur=0]
   * @description   é´å½±æ¨¡ç³åº¦ï¼ï¼å¤§äº 0 ææï¼ãæ³¨ï¼è¯·å° shadowColor å±æ§ä¸ shadowBlur å±æ§ä¸èµ·ä½¿ç¨ï¼æ¥åå»ºé´å½±ã
   */

  this.shadowBlur = 0;
  /**
   * @member {string} [SuperMap.ThemeStyle.prototype.shadowColor='#000000']
   * @description  é´å½±é¢è²ãæ³¨ï¼è¯·å° shadowColor å±æ§ä¸ shadowBlur å±æ§ä¸èµ·ä½¿ç¨ï¼æ¥åå»ºé´å½±ã
   */

  this.shadowColor = "#000000";
  /**
   * @member {number} [SuperMap.ThemeStyle.prototype.shadowOffsetX=0]
   * @description é´å½± X æ¹ååç§»å¼ã
   */

  this.shadowOffsetX = 0;
  /**
   * @member {number} SuperMap.ThemeStyle.prototype.shadowOffsetY
   * @description Y æ¹ååç§»å¼ã
   */

  this.shadowOffsetY = 0;
  /**
   * @member {string} [SuperMap.ThemeStyle.prototype.label]
   * @description ä¸é¢è¦ç´ éå ææ¬æ ç­¾åå®¹ã
   */

  this.label = "";
  /**
   * @member {boolean} [SuperMap.ThemeStyle.prototype.labelRect=false]
   * @description æ¯å¦æ¾ç¤ºææ¬æ ç­¾ç©å½¢èæ¯ã
   */

  this.labelRect = false;
  /**
   * @member {string} [SuperMap.ThemeStyle.prototype.fontColor]
   * @description éå ææ¬å­ä½é¢è²ã
   */

  this.fontColor = "";
  /**
   * @member {number} [SuperMap.ThemeStyle.prototype.fontSize=12]
   * @description éå ææ¬å­ä½å¤§å°,åä½æ¯åç´ ã
   */

  this.fontSize = 12;
  /**
   * @member {string} [SuperMap.ThemeStyle.prototype.fontStyle="normal"]
   * @description éå ææ¬å­ä½æ ·å¼ãå¯è®¾å¼ï¼"normal", "italic", "oblique"ã
   */

  this.fontStyle = "normal";
  /**
   * @member {string} [SuperMap.ThemeStyle.prototype.fontVariant="normal"]
   * @description éå ææ¬å­ä½åä½ãå¯è®¾å¼ï¼"normal", "small-caps"ã
   */

  this.fontVariant = "normal";
  /**
   * @member {string} [SuperMap.ThemeStyle.prototype.fontWeight="normal"]
   * @description éå ææ¬å­ä½ç²ç»ãå¯è®¾å¼ï¼"normal", "bold", "bolder", "lighter"ã
   */

  this.fontWeight = "normal";
  /**
   * @member {string} [SuperMap.ThemeStyle.prototype.fontFamily="arial,sans-serif"]
   * @description éå ææ¬å­ä½ç³»åãfontFamily å¼æ¯å­ä½æåç§°æ/åç±»æåç§°çä¸ä¸ªä¼åè¡¨ï¼æ¯ä¸ªå¼éå·åå²ï¼æµè§å¨ä¼ä½¿ç¨å®å¯è¯å«çç¬¬ä¸ä¸ª
   * å¯ä»¥ä½¿ç¨å·ä½çå­ä½åç§°ï¼"times"ã"courier"ã"arial"ï¼æå­ä½ç³»ååç§°ï¼"serif"ã"sans-serif"ã"cursive"ã"fantasy"ã"monospace"ï¼ã
   */

  this.fontFamily = "arial,sans-serif";
  /**
   * @member {string} [SuperMap.ThemeStyle.prototype.labelPosition='top']
   * @description éå ææ¬ä½ç½®, å¯ä»¥æ¯ 'inside', 'left', 'right', 'top', 'bottom'ã
   */

  this.labelPosition = "top";
  /**
   * @member {string} [SuperMap.ThemeStyle.prototype.labelAlign='center']
   * @description éå ææ¬æ°´å¹³å¯¹é½ãå¯ä»¥æ¯ 'left', 'right', 'center'ã
   */

  this.labelAlign = "center";
  /**
   * @member {string} [SuperMap.ThemeStyle.prototype.labelBaseline='middle']
   * @description  éå ææ¬åç´å¯¹é½ã å¯ä»¥æ¯ 'top', 'bottom', 'middle'ã
   */

  this.labelBaseline = "middle";
  /**
   * @member {number} [SuperMap.ThemeStyle.prototype.labelXOffset=0]
   * @description  éå ææ¬å¨ X è½´æ¹åçåç§»éã
   */

  this.labelXOffset = 0;
  /**
   * @member {number} [SuperMap.ThemeStyle.prototype.labelYOffset=0]
   * @description éå ææ¬å¨ Y è½´æ¹åçåç§»éã
   */

  this.labelYOffset = 0;
  Util.extend(this, options);
};
SuperMap.ThemeStyle = ThemeStyle;
// CONCATENATED MODULE: ./src/common/style/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




// CONCATENATED MODULE: ./src/common/overlay/feature/ShapeParameters.js
function ShapeParameters_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ShapeParameters_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ShapeParameters_createClass(Constructor, protoProps, staticProps) { if (protoProps) ShapeParameters_defineProperties(Constructor.prototype, protoProps); if (staticProps) ShapeParameters_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @class  SuperMap.Feature.ShapeParameters
 * @category Visualization Theme
 * @classdesc å¾å½¢åæ°åºç±»ï¼æ­¤ç±»ä¸å¯å®ä¾å
 */

var ShapeParameters = /*#__PURE__*/function () {
  /**
   * @function SuperMap.Feature.ShapeParameters.prototype.constructor
   * @description å¾å½¢åæ°å¯¹è±¡ã
   * @returns {SuperMap.Feature.ShapeParameters} å¾å½¢åæ°å¯¹è±¡ã
   */
  function ShapeParameters() {
    ShapeParameters_classCallCheck(this, ShapeParameters);

    /**
     * @member {Array} [SuperMap.Feature.ShapeParameters.prototype.refOriginalPosition=[0,0]]
     * @description å¾å½¢åèåç¹ä½ç½®ï¼å¾å½¢çåèä¸­å¿ä½ç½®ã
     * refOriginalPosition æ¯é¿åº¦ä¸º 2 çæ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤º x åæ ï¼ç¬¬äºä¸ªåç´ è¡¨ç¤º y åæ ã
     * refOriginalPosition è¡¨ç¤ºå¾å½¢çåèä¸­å¿ï¼éå¸¸æåµä¸ï¼å¾å½¢æ¯ä½¿ç¨ canvas çåç¹ä½ç½®ä½ä¸ºä½ç½®åèï¼
     * ä½ refOriginalPosition å¯ä»¥æ¹åå¾å½¢çåèä½ç½®ï¼ä¾å¦ï¼ refOriginalPosition = [80, 80],
     * å¾å½¢åç style.x = 20, style.y = 20ï¼é£ä¹åå¨ canvas ä¸­çå®éä½ç½®æ¯ [100, 100]ã
     * å¾å½¢ï¼Shapeï¼ çææä½ç½®ç¸å³å±æ§é½æ¯ä»¥ refOriginalPosition ä¸ºåèä¸­å¿ï¼
     * ä¹å°±æ¯è¯´å¾å½¢çææä½ç½®ä¿¡æ¯å¨ canvas ä¸­é½æ¯ä»¥ refOriginalPosition ä¸ºåèçç¸å¯¹ä½ç½®ï¼åªæ
     * refOriginalPosition çå¼ä¸º [0, 0] æ¶ï¼å¾å½¢çä½ç½®ä¿¡æ¯ææ¯ canvas ç»å¯¹ä½ç½®ã
     * å¾å½¢çä½ç½®ä¿¡æ¯éå¸¸æï¼style.pointListï¼style.xï¼style.yã
     */
    this.refOriginalPosition = [0, 0];
    /**
     * @member {string} SuperMap.Feature.ShapeParameters.prototype.refDataID
     * @description å¾å½¢æå³èæ°æ®ç IDï¼<{@link SuperMap.Feature.Vector}> ç idï¼ã
     */

    this.refDataID = null;
    /**
     * @member {boolean} SuperMap.Feature.ShapeParameters.prototype.isHoverByRefDataID
     * @description æ¯å¦æ ¹æ® refDataID è¿è¡é«äº®ãç¨äºåæ¶é«äº®ææ refDataID ç¸åçå¾å½¢ã
     */

    this.isHoverByRefDataID = false;
    /**
     * @member {string} SuperMap.Feature.ShapeParameters.prototype.refDataHoverGroup
     * @description é«äº®å¾å½¢ç»çç»åãæ­¤å±æ§å¨ refDataID ææä¸ isHoverByRefDataID ä¸º true æ¶çæã
     * ä¸æ¦è®¾ç½®æ­¤å±æ§ï¼ä¸å±æ§å¼ææï¼åªæå³èåä¸ä¸ªæ°æ®çå¾å½¢ä¸æ­¤å±æ§ç¸åçå¾å½¢æä¼é«äº®ã
     */

    this.refDataHoverGroup = null;
    /**
     * @member {Object} SuperMap.Feature.ShapeParameters.prototype.dataInfo
     * @description å¾å½¢æºå¸¦çéå æ°æ®ã
     */

    this.dataInfo = null;
    /**
     * @member {boolean} SuperMap.Feature.ShapeParameters.prototype.clickable
     * @description æ¯å¦å¯ç¹å»ã
     */

    this.clickable = true;
    /**
     * @member {boolean} SuperMap.Feature.ShapeParameters.prototype.hoverable
     * @description æ¯å¦å¯ç¹å»ã
     */

    this.hoverable = true;
    /**
     * @member {Object} SuperMap.Feature.ShapeParameters.prototype.style
     * @description å¾å½¢æ ·å¼å¯¹è±¡ï¼å¯è®¾æ ·å¼å±æ§å¨å­ç±»ä¸­ç¡®å®ã
     */

    this.style = null;
    /**
     * @member {Object} SuperMap.Feature.ShapeParameters.prototype.highlightStyle
     * @description é«äº®æ ·å¼å¯¹è±¡ï¼å¯è®¾æ ·å¼å±æ§ä¸ style çå¯è®¾æ ·å¼å±æ§ç¸åã
     */

    this.highlightStyle = {};
    this.CLASS_NAME = "SuperMap.Feature.ShapeParameters";
  }
  /**
   * @function SuperMap.Feature.ShapeParameters.prototype.destroy
   * @description éæ¯å¯¹è±¡ã
   */


  ShapeParameters_createClass(ShapeParameters, [{
    key: "destroy",
    value: function destroy() {
      this.refOriginalPosition = null;
      this.refDataID = null;
      this.isHoverByRefDataID = null;
      this.refDataHoverGroup = null;
      this.dataInfo = null;
      this.clickable = null;
      this.hoverable = null;
      this.style = null;
      this.highlightStyle = null;
    }
  }]);

  return ShapeParameters;
}();
SuperMap.Feature = SuperMap.Feature || {};
SuperMap.Feature.ShapeParameters = ShapeParameters;
// CONCATENATED MODULE: ./src/common/overlay/feature/Point.js
function feature_Point_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { feature_Point_typeof = function _typeof(obj) { return typeof obj; }; } else { feature_Point_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return feature_Point_typeof(obj); }

function feature_Point_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function feature_Point_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function feature_Point_createClass(Constructor, protoProps, staticProps) { if (protoProps) feature_Point_defineProperties(Constructor.prototype, protoProps); if (staticProps) feature_Point_defineProperties(Constructor, staticProps); return Constructor; }

function feature_Point_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { feature_Point_get = Reflect.get; } else { feature_Point_get = function _get(target, property, receiver) { var base = feature_Point_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return feature_Point_get(target, property, receiver || target); }

function feature_Point_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = feature_Point_getPrototypeOf(object); if (object === null) break; } return object; }

function feature_Point_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) feature_Point_setPrototypeOf(subClass, superClass); }

function feature_Point_setPrototypeOf(o, p) { feature_Point_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return feature_Point_setPrototypeOf(o, p); }

function feature_Point_createSuper(Derived) { var hasNativeReflectConstruct = feature_Point_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = feature_Point_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = feature_Point_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return feature_Point_possibleConstructorReturn(this, result); }; }

function feature_Point_possibleConstructorReturn(self, call) { if (call && (feature_Point_typeof(call) === "object" || typeof call === "function")) { return call; } return feature_Point_assertThisInitialized(self); }

function feature_Point_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function feature_Point_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function feature_Point_getPrototypeOf(o) { feature_Point_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return feature_Point_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class  SuperMap.Feature.ShapeParameters.Point
 * @category Visualization Theme
 * @classdesc ç¹åæ°å¯¹è±¡ã
 * @extends {SuperMap.Feature.ShapeParameters}
 */

var Point_Point = /*#__PURE__*/function (_ShapeParameters) {
  feature_Point_inherits(Point, _ShapeParameters);

  var _super = feature_Point_createSuper(Point);

  /**
   * @function SuperMap.Feature.ShapeParameters.Point.prototype.constructor
   * @description åå»ºä¸ä¸ªå¾å½¢ç¹åæ°å¯¹è±¡ã
   * @param {number} x - ç¹ x åæ ï¼å¿è®¾åæ°ã
   * @param {number} y - ç¹ y åæ ï¼å¿è®¾åæ°ã
   * @returns {SuperMap.Feature.ShapeParameters.Point} æ ç­¾åæ°å¯¹è±¡ã
   */
  function Point(x, y) {
    var _this;

    feature_Point_classCallCheck(this, Point);

    _this = _super.call(this, x, y);
    /**
     * @member {number}  SuperMap.Feature.ShapeParameters.Point.prototype.x
     * @description ç¹ x åæ ã
     */

    _this.x = !isNaN(x) ? x : 0;
    /**
     * @member {number}  SuperMap.Feature.ShapeParameters.Point.prototype.y
     * @description ç¹ y åæ ã
     */

    _this.y = !isNaN(y) ? y : 0;
    /**
     * @member {number}  SuperMap.Feature.ShapeParameters.Point.prototype.r
     * @description ç¹çåå¾ã
     */

    _this.r = 6;
    _this.CLASS_NAME = "SuperMap.Feature.ShapeParameters.Point";
    return _this;
  }
  /**
   * @function SuperMap.Feature.ShapeParameters.Point.prototype.destroy
   * @description éæ¯å¯¹è±¡ã
   */


  feature_Point_createClass(Point, [{
    key: "destroy",
    value: function destroy() {
      this.x = null;
      this.y = null;
      this.r = null;

      feature_Point_get(feature_Point_getPrototypeOf(Point.prototype), "destroy", this).call(this);
    }
  }]);

  return Point;
}(ShapeParameters);
/**
 * @typedef {Object} SuperMap.Feature.ShapeParameters.Point.style
 * @property {number} pointRadius - ç¹çåå¾ï¼é»è®¤å¼ï¼6ã
 * @property {boolean} fill - æ¯å¦å¡«åï¼ä¸éè¦å¡«ååè®¾ç½®ä¸ºfalseï¼é»è®¤å¼ä¸º trueãæ­¤å±æ§ä¸ stroke ä¸è½åæ¶ä¸º falseï¼å¦æ fill ä¸ stroke åæ¶ä¸º falseï¼å°æ fill ä¸ stroke çé»è®¤å¼æ¸²æã
 * @property {string} fillColor - åå­è¿å¶å¡«åé¢è²ãé»è®¤å¼ä¸º "#000000"ã
 * @property {number} fillOpacity - å¡«åä¸éæåº¦ãåå¼èå´[0, 1]ï¼é»è®¤å¼ 1ã
 * @property {boolean} stroke - æ¯å¦æè¾¹ï¼ä¸éè¦æè¾¹åè®¾ç½®ä¸º falseï¼é»è®¤å¼ä¸º falseãæ­¤å±æ§ä¸ fill ä¸è½åæ¶ä¸º falseï¼å¦æ fill ä¸ stroke åæ¶ä¸º falseï¼å°æ fill ä¸ stroke çé»è®¤å¼æ¸²æã
 * @property {string} strokeColor - åå­è¿å¶æè¾¹é¢è²ã
 * @property {number} strokeWidth - æè¾¹å®½åº¦ï¼é»è®¤å¼ 1ã
 * @property {number} strokeOpacity - æè¾¹çä¸éæåº¦ãåå¼èå´[0, 1]ï¼é»è®¤å¼ 1ã
 * @property {number} shadowBlur - é´å½±æ¨¡ç³åº¦ï¼ï¼å¤§äº 0 ææ; é»è®¤å¼ 0ï¼ã
 * @property {string} shadowColor - é´å½±é¢è²; é»è®¤å¼ '#000000'ã
 * @property {number} shadowOffsetX - é´å½± X æ¹ååç§»å¼; é»è®¤å¼ 0ã
 * @property {number} shadowOffsetY - é´å½± Y æ¹ååç§»å¼; é»è®¤å¼ 0ã
 */

SuperMap.Feature = SuperMap.Feature || {};
SuperMap.Feature.ShapeParameters.Point = Point_Point;
// CONCATENATED MODULE: ./src/common/overlay/feature/Line.js
function Line_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Line_typeof = function _typeof(obj) { return typeof obj; }; } else { Line_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Line_typeof(obj); }

function Line_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Line_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Line_createClass(Constructor, protoProps, staticProps) { if (protoProps) Line_defineProperties(Constructor.prototype, protoProps); if (staticProps) Line_defineProperties(Constructor, staticProps); return Constructor; }

function Line_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { Line_get = Reflect.get; } else { Line_get = function _get(target, property, receiver) { var base = Line_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return Line_get(target, property, receiver || target); }

function Line_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = Line_getPrototypeOf(object); if (object === null) break; } return object; }

function Line_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Line_setPrototypeOf(subClass, superClass); }

function Line_setPrototypeOf(o, p) { Line_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Line_setPrototypeOf(o, p); }

function Line_createSuper(Derived) { var hasNativeReflectConstruct = Line_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Line_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Line_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Line_possibleConstructorReturn(this, result); }; }

function Line_possibleConstructorReturn(self, call) { if (call && (Line_typeof(call) === "object" || typeof call === "function")) { return call; } return Line_assertThisInitialized(self); }

function Line_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Line_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Line_getPrototypeOf(o) { Line_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Line_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class  SuperMap.Feature.ShapeParameters.Line
 * @category Visualization Theme
 * @classdesc çº¿åæ°å¯¹è±¡ã
 * @extends {SuperMap.Feature.ShapeParameters}
 */

var Line_Line = /*#__PURE__*/function (_ShapeParameters) {
  Line_inherits(Line, _ShapeParameters);

  var _super = Line_createSuper(Line);

  /**
   * @function SuperMap.Feature.ShapeParameters.Line.prototype.constructor
   * @description åå»ºä¸ä¸ªå¾å½¢çº¿åæ°å¯¹è±¡ã
   * @param {Array} pointList - çº¿è¦ç´ èç¹æ°ç»ï¼äºç»´æ°ç»ï¼å¿è®¾åæ°ã
   * @returns {SuperMap.Feature.ShapeParameters.Line} åå½¢åæ°å¯¹è±¡ã
   */
  function Line(pointList) {
    var _this;

    Line_classCallCheck(this, Line);

    _this = _super.call(this, pointList);
    /**
     * @member {Array} SuperMap.Feature.ShapeParameters.Line.prototype.pointList
     * @description çº¿è¦ç´ èç¹æ°ç»ï¼äºç»´æ°ç»ã
     * æ°ç»å½¢å¦ï¼
     * (start code)
     *  [
     *  [10, 20],         //èç¹
     *  [30, 40],
     *  [25, 30]         //æåä¸ä¸ªèç¹åç¬¬ä¸ä¸ªèç¹ä¸å¿ç¸åï¼ç»å¶æ¶èªå¨å°é­
     *   ]
     * (end)
     */

    _this.pointList = pointList;
    _this.CLASS_NAME = "SuperMap.Feature.ShapeParameters.Line";
    return _this;
  }
  /**
   * @function SuperMap.Feature.ShapeParameters.Line.prototype.destroy
   * @description éæ¯å¯¹è±¡ã
   */


  Line_createClass(Line, [{
    key: "destroy",
    value: function destroy() {
      this.pointList = null;

      Line_get(Line_getPrototypeOf(Line.prototype), "destroy", this).call(this);
    }
  }]);

  return Line;
}(ShapeParameters);
/**
* @typedef {Object} SuperMap.Feature.ShapeParameters.Line.style
* @property {string} strokeColor - åå­è¿å¶çº¿é¢è²ã
* @property {number}  strokeWidth - çº¿å®½åº¦ï¼é»è®¤å¼ 1ã
* @property {string} strokeLinecap - çº¿å¸½æ ·å¼ï¼strokeLinecap æä¸ç§ç±»å ï¼âbutt", "round", "square"; é»è®¤ä¸º"butt"ã
* @property {string} strokeLineJoin - çº¿æ®µè¿æ¥æ ·å¼ï¼strokeLineJoin æä¸ç§ç±»åï¼ âmiter", "round", "bevel"; é»è®¤ä¸º"miter"ã
* @property {string} strokeDashstyle - èçº¿ç±»åï¼ strokeDashstyle æå«ç§ç±»å ï¼âdot",âdash",âdashdot",âlongdash",âlongdashdot",âsolid", "dashed", "dotted"; é»è®¤å¼ "solid"ãsolid è¡¨ç¤ºå®çº¿ã
* @property {number}  strokeOpacity - çº¿çä¸éæåº¦ãåå¼èå´[0, 1]ï¼é»è®¤å¼ 1ã
* @property {number}  shadowBlur - é´å½±æ¨¡ç³åº¦ï¼ï¼å¤§äº 0 ææ; é»è®¤å¼ 0ï¼ã
* @property {string} shadowColor - é´å½±é¢è²; é»è®¤å¼ '#000000'ã
* @property {number}  shadowOffsetX - é´å½± X æ¹ååç§»å¼; é»è®¤å¼ 0ã
* @property {number}  shadowOffsetY - é´å½± Y æ¹ååç§»å¼; é»è®¤å¼ 0ã
*/

SuperMap.Feature = SuperMap.Feature || {};
SuperMap.Feature.ShapeParameters.Line = Line_Line;
// CONCATENATED MODULE: ./src/common/overlay/feature/Polygon.js
function feature_Polygon_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { feature_Polygon_typeof = function _typeof(obj) { return typeof obj; }; } else { feature_Polygon_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return feature_Polygon_typeof(obj); }

function feature_Polygon_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function feature_Polygon_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function feature_Polygon_createClass(Constructor, protoProps, staticProps) { if (protoProps) feature_Polygon_defineProperties(Constructor.prototype, protoProps); if (staticProps) feature_Polygon_defineProperties(Constructor, staticProps); return Constructor; }

function Polygon_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { Polygon_get = Reflect.get; } else { Polygon_get = function _get(target, property, receiver) { var base = Polygon_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return Polygon_get(target, property, receiver || target); }

function Polygon_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = feature_Polygon_getPrototypeOf(object); if (object === null) break; } return object; }

function feature_Polygon_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) feature_Polygon_setPrototypeOf(subClass, superClass); }

function feature_Polygon_setPrototypeOf(o, p) { feature_Polygon_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return feature_Polygon_setPrototypeOf(o, p); }

function feature_Polygon_createSuper(Derived) { var hasNativeReflectConstruct = feature_Polygon_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = feature_Polygon_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = feature_Polygon_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return feature_Polygon_possibleConstructorReturn(this, result); }; }

function feature_Polygon_possibleConstructorReturn(self, call) { if (call && (feature_Polygon_typeof(call) === "object" || typeof call === "function")) { return call; } return feature_Polygon_assertThisInitialized(self); }

function feature_Polygon_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function feature_Polygon_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function feature_Polygon_getPrototypeOf(o) { feature_Polygon_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return feature_Polygon_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class  SuperMap.Feature.ShapeParameters.Polygon
 * @category Visualization Theme
 * @classdesc é¢åæ°å¯¹è±¡ã
 * @extends {SuperMap.Feature.ShapeParameters}
 */

var Polygon_Polygon = /*#__PURE__*/function (_ShapeParameters) {
  feature_Polygon_inherits(Polygon, _ShapeParameters);

  var _super = feature_Polygon_createSuper(Polygon);

  /**
   * @function SuperMap.Feature.ShapeParameters.Polygon.prototype.constructor
   * @description åå»ºä¸ä¸ªå¾å½¢é¢åæ°å¯¹è±¡ã
   * @param {Array} pointList - æ¨ªåæ ï¼å¿è®¾åæ°ã
   * @returns {SuperMap.Feature.ShapeParameters.Polygon} æ ç­¾åæ°å¯¹è±¡ã
   */
  function Polygon(pointList) {
    var _this;

    feature_Polygon_classCallCheck(this, Polygon);

    _this = _super.call(this, pointList);
    /**
     * @member {Array} SuperMap.Feature.ShapeParameters.Polygon.prototype.pointList
     * @description é¢è¦ç´ èç¹æ°ç»ï¼äºç»´æ°ç»ã
     * æ°ç»å½¢å¦ï¼
     * (start code)
     *  [
     *  [10, 20],         //èç¹
     *  [30, 40],
     *  [25, 30]         //æåä¸ä¸ªèç¹åç¬¬ä¸ä¸ªèç¹ä¸å¿ç¸åï¼ç»å¶æ¶èªå¨å°é­
     *   ]
     * (end)
     */

    _this.pointList = pointList;
    /**
     * @member {Array} SuperMap.Feature.ShapeParameters.Polygon.prototype.holePolygonPointLists
     * @description å²æ´é¢å¤è¾¹å½¢é¡¶ç¹æ°ç»ï¼ä¸ç»´æ°ç»ï¼
     */

    _this.holePolygonPointLists = null;
    _this.CLASS_NAME = "SuperMap.Feature.ShapeParameters.Polygon";
    return _this;
  }
  /**
   * @function SuperMap.Feature.ShapeParameters.Polygon.prototype.destroy
   * @description éæ¯å¯¹è±¡ã
   */


  feature_Polygon_createClass(Polygon, [{
    key: "destroy",
    value: function destroy() {
      this.pointList = null;
      this.holePolygonPointLists = null;

      Polygon_get(feature_Polygon_getPrototypeOf(Polygon.prototype), "destroy", this).call(this);
    }
  }]);

  return Polygon;
}(ShapeParameters);
/**
 * @typedef {Object} SuperMap.Feature.ShapeParameters.Polygon.style
 * @property {boolean} fill - æ¯å¦å¡«åï¼ä¸éè¦å¡«ååè®¾ç½®ä¸ºfalseï¼é»è®¤å¼ä¸º trueãæ­¤å±æ§ä¸ stroke ä¸è½åæ¶ä¸º falseï¼å¦æ fill ä¸ stroke åæ¶ä¸º falseï¼å°æ fill ä¸ stroke çé»è®¤å¼æ¸²æã
 * @property {string} fillColor - åå­è¿å¶å¡«åé¢è²ãé»è®¤å¼ä¸º "#000000"ã
 * @property {number} fillOpacity - å¡«åä¸éæåº¦ãåå¼èå´[0, 1]ï¼é»è®¤å¼ 1ã
 * @property {boolean} stroke - æ¯å¦æè¾¹ï¼ä¸éè¦æè¾¹åè®¾ç½®ä¸º falseï¼é»è®¤å¼ä¸º falseãæ­¤å±æ§ä¸ fill ä¸è½åæ¶ä¸º falseï¼å¦æ fill ä¸ stroke åæ¶ä¸º falseï¼å°æ fill ä¸ stroke çé»è®¤å¼æ¸²æã
 * @property {string} strokeColor - åå­è¿å¶æè¾¹é¢è²ã
 * @property {number} strokeWidth - æè¾¹å®½åº¦ï¼é»è®¤å¼ 1ã
 * @property {number} strokeOpacity - æè¾¹çä¸éæåº¦ãåå¼èå´[0, 1]ï¼é»è®¤å¼ 1ã
 * @property {string} strokeLinecap - çº¿å¸½æ ·å¼ï¼strokeLinecap æä¸ç§ç±»å ï¼âbutt", "round", "square"; é»è®¤ä¸º"butt"ã
 * @property {string} strokeLineJoin - çº¿æ®µè¿æ¥æ ·å¼ï¼strokeLineJoin æä¸ç§ç±»åï¼ âmiter", "round", "bevel"; é»è®¤ä¸º"miter"ã
 * @property {string} strokeDashstyle - èçº¿ç±»åï¼ strokeDashstyle æå«ç§ç±»å ï¼âdot",âdash",âdashdot",âlongdash",âlongdashdot",âsolid", "dashed", "dotted"; é»è®¤å¼ "solid"ãsolid è¡¨ç¤ºå®çº¿ã
 * @property {number} shadowBlur - é´å½±æ¨¡ç³åº¦ï¼ï¼å¤§äº 0 ææ; é»è®¤å¼ 0ï¼ã
 * @property {string} shadowColor - é´å½±é¢è²; é»è®¤å¼ '#000000'ã
 * @property {number} shadowOffsetX - é´å½± X æ¹ååç§»å¼; é»è®¤å¼ 0ã
 * @property {number} shadowOffsetY - é´å½± Y æ¹ååç§»å¼; é»è®¤å¼ 0ã
*/

SuperMap.Feature = SuperMap.Feature || {};
SuperMap.Feature.ShapeParameters.Polygon = Polygon_Polygon;
// CONCATENATED MODULE: ./src/common/overlay/feature/Rectangle.js
function feature_Rectangle_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { feature_Rectangle_typeof = function _typeof(obj) { return typeof obj; }; } else { feature_Rectangle_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return feature_Rectangle_typeof(obj); }

function feature_Rectangle_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function feature_Rectangle_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function feature_Rectangle_createClass(Constructor, protoProps, staticProps) { if (protoProps) feature_Rectangle_defineProperties(Constructor.prototype, protoProps); if (staticProps) feature_Rectangle_defineProperties(Constructor, staticProps); return Constructor; }

function Rectangle_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { Rectangle_get = Reflect.get; } else { Rectangle_get = function _get(target, property, receiver) { var base = Rectangle_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return Rectangle_get(target, property, receiver || target); }

function Rectangle_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = feature_Rectangle_getPrototypeOf(object); if (object === null) break; } return object; }

function feature_Rectangle_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) feature_Rectangle_setPrototypeOf(subClass, superClass); }

function feature_Rectangle_setPrototypeOf(o, p) { feature_Rectangle_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return feature_Rectangle_setPrototypeOf(o, p); }

function feature_Rectangle_createSuper(Derived) { var hasNativeReflectConstruct = feature_Rectangle_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = feature_Rectangle_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = feature_Rectangle_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return feature_Rectangle_possibleConstructorReturn(this, result); }; }

function feature_Rectangle_possibleConstructorReturn(self, call) { if (call && (feature_Rectangle_typeof(call) === "object" || typeof call === "function")) { return call; } return feature_Rectangle_assertThisInitialized(self); }

function feature_Rectangle_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function feature_Rectangle_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function feature_Rectangle_getPrototypeOf(o) { feature_Rectangle_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return feature_Rectangle_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class  SuperMap.Feature.ShapeParameters.Rectangle
 * @category Visualization Theme
 * @classdesc ç©å½¢åæ°å¯¹è±¡ã
 * @extends {SuperMap.Feature.ShapeParameters}
 */

var Rectangle_Rectangle = /*#__PURE__*/function (_ShapeParameters) {
  feature_Rectangle_inherits(Rectangle, _ShapeParameters);

  var _super = feature_Rectangle_createSuper(Rectangle);

  /**
   * @function SuperMap.Feature.ShapeParameters.Rectangle.prototype.constructor
   * @description åå»ºä¸ä¸ªå¾å½¢ç©å½¢åæ°å¯¹è±¡ã
   * @param {number} x - ç©å½¢ x åæ ï¼å¿è®¾åæ°ã
   * @param {number} y - ç©å½¢ y åæ ï¼å¿è®¾åæ°ã
   * @param {number} width - ç©å½¢ width åæ ï¼å¿è®¾åæ°ã
   * @param {number} height - ç©å½¢ height åæ ï¼å¿è®¾åæ°ã
   * @returns {SuperMap.Feature.ShapeParameters.Rectangle} å¾å½¢ç©å½¢åæ°å¯¹è±¡ã
   */
  function Rectangle(x, y, width, height) {
    var _this;

    feature_Rectangle_classCallCheck(this, Rectangle);

    _this = _super.call(this, x, y, width, height);
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Rectangle.prototype.x
     * @description å·¦ä¸è§ x åæ ã
     */

    _this.x = !isNaN(x) ? x : 0;
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Rectangle.prototype.y
     * @description å·¦ä¸è§ y åæ ã
     */

    _this.y = !isNaN(x) ? y : 0;
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Rectangle.prototype.width
     * @description å®½åº¦ã
     */

    _this.width = !isNaN(width) ? width : 0;
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Rectangle.prototype.height
     * @description é«åº¦ã
     */

    _this.height = !isNaN(height) ? height : 0;
    _this.CLASS_NAME = "SuperMap.Feature.ShapeParameters.Rectangle";
    return _this;
  }
  /**
   * @function SuperMap.Feature.ShapeParameters.Rectangle.prototype.destroy
   * @description éæ¯å¯¹è±¡ã
   */


  feature_Rectangle_createClass(Rectangle, [{
    key: "destroy",
    value: function destroy() {
      this.x = null;
      this.y = null;
      this.width = null;
      this.height = null;

      Rectangle_get(feature_Rectangle_getPrototypeOf(Rectangle.prototype), "destroy", this).call(this);
    }
  }]);

  return Rectangle;
}(ShapeParameters);
/**
 * @typedef {Object} SuperMap.Feature.ShapeParameters.Rectangle.style
 * @property {boolean} fill - æ¯å¦å¡«åï¼ä¸éè¦å¡«ååè®¾ç½®ä¸ºfalseï¼é»è®¤å¼ä¸º trueãæ­¤å±æ§ä¸ stroke ä¸è½åæ¶ä¸º falseï¼å¦æ fill ä¸ stroke åæ¶ä¸º falseï¼å°æ fill ä¸ stroke çé»è®¤å¼æ¸²æã
 * @property {string}  fillColor - åå­è¿å¶å¡«åé¢è²ãé»è®¤å¼ä¸º "#000000"ã
 * @property {number} fillOpacity - å¡«åä¸éæåº¦ãåå¼èå´[0, 1]ï¼é»è®¤å¼ 1ã
 * @property {boolean} stroke - æ¯å¦æè¾¹ï¼ä¸éè¦æè¾¹åè®¾ç½®ä¸º falseï¼é»è®¤å¼ä¸º falseãæ­¤å±æ§ä¸ fill ä¸è½åæ¶ä¸º falseï¼å¦æ fill ä¸ stroke åæ¶ä¸º falseï¼å°æ fill ä¸ stroke çé»è®¤å¼æ¸²æã
 * @property {string}  strokeColor - åå­è¿å¶æè¾¹é¢è²ã
 * @property {number} strokeWidth - æè¾¹å®½åº¦ï¼é»è®¤å¼ 1ã
 * @property {number} strokeOpacity - æè¾¹çä¸éæåº¦ãåå¼èå´[0, 1]ï¼é»è®¤å¼ 1ã
 * @property {string}  strokeLinecap - çº¿å¸½æ ·å¼ï¼strokeLinecap æä¸ç§ç±»å ï¼âbutt", "round", "square"; é»è®¤ä¸º"butt"ã
 * @property {string}  strokeLineJoin - çº¿æ®µè¿æ¥æ ·å¼ï¼strokeLineJoin æä¸ç§ç±»åï¼ âmiter", "round", "bevel"; é»è®¤ä¸º"miter"ã
 * @property {string}  strokeDashstyle - èçº¿ç±»åï¼ strokeDashstyle æå«ç§ç±»å ï¼âdot",âdash",âdashdot",âlongdash",âlongdashdot",âsolid", "dashed", "dotted"; é»è®¤å¼ "solid"ãsolid è¡¨ç¤ºå®çº¿ã
 * @property {number} shadowBlur - é´å½±æ¨¡ç³åº¦ï¼ï¼å¤§äº 0 ææ; é»è®¤å¼ 0ï¼ã
 * @property {string}  shadowColor - é´å½±é¢è²; é»è®¤å¼ '#000000'ã
 * @property {number} shadowOffsetX - é´å½± X æ¹ååç§»å¼; é»è®¤å¼ 0ã
 * @property {number} shadowOffsetY - é´å½± Y æ¹ååç§»å¼; é»è®¤å¼ 0ã
*/

SuperMap.Feature = SuperMap.Feature || {};
SuperMap.Feature.ShapeParameters.Rectangle = Rectangle_Rectangle;
// CONCATENATED MODULE: ./src/common/overlay/feature/Sector.js
function Sector_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Sector_typeof = function _typeof(obj) { return typeof obj; }; } else { Sector_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Sector_typeof(obj); }

function Sector_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Sector_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Sector_createClass(Constructor, protoProps, staticProps) { if (protoProps) Sector_defineProperties(Constructor.prototype, protoProps); if (staticProps) Sector_defineProperties(Constructor, staticProps); return Constructor; }

function Sector_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { Sector_get = Reflect.get; } else { Sector_get = function _get(target, property, receiver) { var base = Sector_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return Sector_get(target, property, receiver || target); }

function Sector_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = Sector_getPrototypeOf(object); if (object === null) break; } return object; }

function Sector_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Sector_setPrototypeOf(subClass, superClass); }

function Sector_setPrototypeOf(o, p) { Sector_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Sector_setPrototypeOf(o, p); }

function Sector_createSuper(Derived) { var hasNativeReflectConstruct = Sector_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Sector_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Sector_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Sector_possibleConstructorReturn(this, result); }; }

function Sector_possibleConstructorReturn(self, call) { if (call && (Sector_typeof(call) === "object" || typeof call === "function")) { return call; } return Sector_assertThisInitialized(self); }

function Sector_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Sector_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Sector_getPrototypeOf(o) { Sector_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Sector_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class  SuperMap.Feature.ShapeParameters.Sector
 * @category Visualization Theme
 * @classdesc æå½¢åæ°å¯¹è±¡ã
 * @extends {SuperMap.Feature.ShapeParameters}
 */

var Sector = /*#__PURE__*/function (_ShapeParameters) {
  Sector_inherits(Sector, _ShapeParameters);

  var _super = Sector_createSuper(Sector);

  /**
   * @function SuperMap.Feature.ShapeParameters.Sector.prototype.constructor
   * @description åå»ºä¸ä¸ªæå½¢åæ°å¯¹è±¡ã
   * @param {number} x - åå¿ x åæ ï¼å¿è®¾åæ°ã
   * @param {number} y - åå¿ y åæ ï¼å¿è®¾åæ°ã
   * @param {number} r - å¤ååå¾ï¼å¿è®¾åæ°ã
   * @param {number} startAngle - èµ·å§è§åº¦ï¼å¿è®¾åæ°ãåå¼èå´[0, 360)ã
   * @param {number} endAngle - ç»æè§åº¦ï¼å¿è®¾åæ°ãåå¼èå´(0, 360]ã
   * @param {number} [r0=0] - åååå¾ï¼æå®åå°åºç°åå¼§ï¼åæ¶æè¾¹é¿åº¦ä¸º'r - r0'ãåå¼èå´[0, r)ã
   * @returns {SuperMap.Feature.ShapeParameters.Sector} æå½¢åæ°å¯¹è±¡ã
   */
  function Sector(x, y, r, startAngle, endAngle, r0, clockWise) {
    var _this;

    Sector_classCallCheck(this, Sector);

    _this = _super.call(this, x, y, r, startAngle, endAngle, r0, clockWise);
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Sector.prototype.x
     * @description  åå¿ x åæ ã
     */

    _this.x = !isNaN(x) ? x : 0;
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Sector.prototype.Y
     * @description  åå¿ Y åæ ã
     */

    _this.y = !isNaN(y) ? y : 0;
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Sector.prototype.r
     * @description  å¤ååå¾ã
     */

    _this.r = !isNaN(r) ? r : 0;
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Sector.prototype.startAngle
     * @description  èµ·å§è§åº¦ãåå¼èå´[0, 360)ï¼é»è®¤å¼ï¼nullã
     */

    _this.startAngle = !isNaN(startAngle) ? startAngle : 0;
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Sector.prototype.endAngle
     * @description  ç»æè§åº¦ãåå¼èå´(0, 360]ï¼é»è®¤å¼ï¼nullã
     */

    _this.endAngle = !isNaN(endAngle) ? endAngle : 0;
    /**
     * @member {number} [SuperMap.Feature.ShapeParameters.Sector.prototype.r0=0]
     * @description åååå¾ï¼æå®åå°åºç°åå¼§ï¼åæ¶æè¾¹é¿åº¦ä¸º r å r0ãåå¼èå´[0, r)ã
     */

    _this.r0 = !isNaN(r0) ? r0 : 0;
    /**
     * @member {number} [SuperMap.Feature.ShapeParameters.Sector.prototype.clockWise=false]
     * @description æ¯å¦æ¯é¡ºæ¶éãé»è®¤å¼ï¼falseã
     */

    _this.clockWise = clockWise;
    _this.CLASS_NAME = "SuperMap.Feature.ShapeParameters.Sector";
    return _this;
  }
  /**
   * @function SuperMap.Feature.ShapeParameters.Sector.prototype.destroy
   * @description éæ¯å¯¹è±¡ã
   */


  Sector_createClass(Sector, [{
    key: "destroy",
    value: function destroy() {
      this.x = null;
      this.y = null;
      this.r = null;
      this.startAngle = null;
      this.endAngle = null;
      this.r0 = null;
      this.clockWise = null;

      Sector_get(Sector_getPrototypeOf(Sector.prototype), "destroy", this).call(this);
    }
  }]);

  return Sector;
}(ShapeParameters);
/**
 * @typedef {Object} SuperMap.Feature.ShapeParameters.Sector.style
 * @property {boolean} fill - æ¯å¦å¡«åï¼ä¸éè¦å¡«ååè®¾ç½®ä¸ºfalseï¼é»è®¤å¼ä¸º trueãæ­¤å±æ§ä¸ stroke ä¸è½åæ¶ä¸º falseï¼å¦æ fill ä¸ stroke åæ¶ä¸º falseï¼å°æ fill ä¸ stroke çé»è®¤å¼æ¸²æã
 * @property {string} fillColor - åå­è¿å¶å¡«åé¢è²ãé»è®¤å¼ä¸º "#000000"ã
 * @property {number} fillOpacity - å¡«åä¸éæåº¦ãåå¼èå´[0, 1]ï¼é»è®¤å¼ 1ã
 * @property {boolean} stroke - æ¯å¦æè¾¹ï¼ä¸éè¦æè¾¹åè®¾ç½®ä¸º falseï¼é»è®¤å¼ä¸º falseãæ­¤å±æ§ä¸ fill ä¸è½åæ¶ä¸º falseï¼å¦æ fill ä¸ stroke åæ¶ä¸º falseï¼å°æ fill ä¸ stroke çé»è®¤å¼æ¸²æã
 * @property {string} strokeColor - åå­è¿å¶æè¾¹é¢è²ã
 * @property {number} strokeWidth - æè¾¹å®½åº¦ï¼é»è®¤å¼ 1ã
 * @property {number} strokeOpacity - æè¾¹çä¸éæåº¦ãåå¼èå´[0, 1]ï¼é»è®¤å¼ 1ã
 * @property {number} shadowBlur - é´å½±æ¨¡ç³åº¦ï¼ï¼å¤§äº 0 ææ; é»è®¤å¼ 0ï¼ã
 * @property {string} shadowColor - é´å½±é¢è²; é»è®¤å¼ '#000000'ã
 * @property {number} shadowOffsetX - é´å½± X æ¹ååç§»å¼; é»è®¤å¼ 0ã
 * @property {number} shadowOffsetY - é´å½± Y æ¹ååç§»å¼; é»è®¤å¼ 0ã
 */

SuperMap.Feature = SuperMap.Feature || {};
SuperMap.Feature.ShapeParameters.Sector = Sector;
// CONCATENATED MODULE: ./src/common/overlay/feature/Label.js
function Label_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Label_typeof = function _typeof(obj) { return typeof obj; }; } else { Label_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Label_typeof(obj); }

function Label_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Label_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Label_createClass(Constructor, protoProps, staticProps) { if (protoProps) Label_defineProperties(Constructor.prototype, protoProps); if (staticProps) Label_defineProperties(Constructor, staticProps); return Constructor; }

function Label_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { Label_get = Reflect.get; } else { Label_get = function _get(target, property, receiver) { var base = Label_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return Label_get(target, property, receiver || target); }

function Label_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = Label_getPrototypeOf(object); if (object === null) break; } return object; }

function Label_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Label_setPrototypeOf(subClass, superClass); }

function Label_setPrototypeOf(o, p) { Label_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Label_setPrototypeOf(o, p); }

function Label_createSuper(Derived) { var hasNativeReflectConstruct = Label_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Label_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Label_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Label_possibleConstructorReturn(this, result); }; }

function Label_possibleConstructorReturn(self, call) { if (call && (Label_typeof(call) === "object" || typeof call === "function")) { return call; } return Label_assertThisInitialized(self); }

function Label_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Label_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Label_getPrototypeOf(o) { Label_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Label_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.Feature.ShapeParameters.Label
 * @category Visualization Theme
 * @classdesc æ ç­¾åæ°å¯¹è±¡ã
 * @extent {SuperMap.Feature.ShapeParameters}
 */

var Label = /*#__PURE__*/function (_ShapeParameters) {
  Label_inherits(Label, _ShapeParameters);

  var _super = Label_createSuper(Label);

  /**
   * @function SuperMap.Feature.ShapeParameters.Label.prototype.constructor
   * @description åå»ºä¸ä¸ªæ ç­¾åæ°å¯¹è±¡ã
   * @param {number} x - æ¨ªåæ ï¼å¿è®¾åæ°ã
   * @param {number} y - çºµåæ ï¼å¿è®¾åæ°ã
   * @param {string} text - å¾å½¢ä¸­çéå ææ¬ï¼å¿è®¾åæ°ã
   * @returns {SuperMap.Feature.ShapeParameters.Label} æ ç­¾åæ°å¯¹è±¡ã
   */
  function Label(x, y, text) {
    var _this;

    Label_classCallCheck(this, Label);

    _this = _super.call(this, x, y, text);
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Label.prototype.x
     * @description æ ç­¾ x åæ ã
     */

    _this.x = x;
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Label.prototype.y
     * @description æ ç­¾ y åæ ã
     */

    _this.y = y;
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Label.prototype.text
     * @description æ ç­¾çææ¬åå®¹ã
     */

    _this.text = text;
    _this.CLASS_NAME = "SuperMap.Feature.ShapeParameters.Label";
    return _this;
  }
  /**
   * @function SuperMap.Feature.ShapeParameters.Label.prototype.destroy
   * @description éæ¯å¯¹è±¡ã
   */


  Label_createClass(Label, [{
    key: "destroy",
    value: function destroy() {
      this.x = null;
      this.y = null;
      this.text = null;

      Label_get(Label_getPrototypeOf(Label.prototype), "destroy", this).call(this);
    }
  }]);

  return Label;
}(ShapeParameters);
/**
* @typedef {Object} SuperMap.Feature.ShapeParameters.Label.style
* @property {boolean} fill - æ¯å¦å¡«åï¼ä¸éè¦å¡«ååè®¾ç½®ä¸º falseï¼é»è®¤å¼ä¸º trueãæ­¤å±æ§ä¸ stroke ä¸è½åæ¶ä¸º falseï¼å¦æ fill ä¸ stroke åæ¶ä¸º falseï¼å°æ fill ä¸ stroke çé»è®¤å¼æ¸²æã
* @property {string} fillColor - åå­è¿å¶å¡«åé¢è²ãé»è®¤å¼ä¸º "#000000"ã
* @property {number} fillOpacity - å¡«åä¸éæåº¦ãåå¼èå´[0, 1]ï¼é»è®¤å¼ 1ã
* @property {boolean} stroke - æ¯å¦æè¾¹ï¼ä¸éè¦æè¾¹åè®¾ç½®ä¸ºfalseï¼é»è®¤å¼ä¸º falseãæ­¤å±æ§ä¸ fill ä¸è½åæ¶ä¸º falseï¼å¦æ fill ä¸ stroke åæ¶ä¸º falseï¼å°æ fill ä¸ stroke çé»è®¤å¼æ¸²æã
* @property {string} strokeColor - åå­è¿å¶æè¾¹é¢è²ã
* @property {number} strokeOpacity - æè¾¹çä¸éæåº¦ãåå¼èå´[0, 1]ï¼é»è®¤å¼ 1ã
* @property {number} strokeWidth -æè¾¹å®½åº¦ï¼é»è®¤å¼ 1ã
* @property {number} maxWidth - æå¤§å®½åº¦éå¶ãé»è®¤å¼ï¼nullã
* @property {number} fontSize - æ ç­¾ææ¬å­ä½å¤§å°ãé»è®¤å¼ 12ï¼åä½æ¯åç´ ã
* @property {string} fontStyle - æ ç­¾ææ¬å­ä½æ ·å¼ãå¯è®¾å¼ï¼"normal", "italic", "oblique"; é»è®¤å¼ï¼"normal" ã
* @property {string} fontVariant - æ ç­¾ææ¬å­ä½åä½ãå¯è®¾å¼ï¼"normal", "small-caps"; é»è®¤å¼ï¼"normal" ã
* @property {string} fontWeight - æ ç­¾ææ¬å­ä½ç²ç»ãå¯è®¾å¼ï¼"normal", "bold", "bolder", "lighter"; é»è®¤å¼ï¼"normal" ã
* @property {string} fontFamily - æ ç­¾ææ¬å­ä½ç³»åãfontFamily å¼æ¯å­ä½æåç§°æ/åç±»æåç§°çä¸ä¸ªä¼åè¡¨ï¼æ¯ä¸ªå¼éå·åå²ï¼æµè§å¨ä¼ä½¿ç¨å®å¯è¯å«çç¬¬ä¸ä¸ªå¼ã
* å¯ä»¥ä½¿ç¨å·ä½çå­ä½åç§°ï¼"times"ã"courier"ã"arial"ï¼æå­ä½ç³»ååç§°ï¼"serif"ã"sans-serif"ã"cursive"ã"fantasy"ã"monospace"ï¼ãé»è®¤å¼ï¼"arial,sans-serif".
* @property {string} labelBaseline - æ ç­¾ææ¬åç´å¯¹é½, å¯ä»¥æ¯ 'top', 'bottom', 'middle'ï¼é»è®¤å¼ 'middle'ã
* @property {string} labelAlign - æ ç­¾ææ¬æ°´å¹³å¯¹é½ãå¯ä»¥æ¯ 'left', 'right', 'center'; é»è®¤å¼ 'center'ã
* @property {number} shadowBlur - é´å½±æ¨¡ç³åº¦ï¼å¤§äº 0 ææãé»è®¤å¼ï¼0ã
* @property {number} shadowColor - é´å½±é¢è²ãé»è®¤å¼ï¼"#000000'"ã
* @property {number} shadowOffsetX - é´å½±æ¨ªååç§»ãé»è®¤å¼ï¼0ã
* @property {number} shadowOffsetY - é´å½±çºµååç§»ãé»è®¤å¼ï¼0ã
*/

SuperMap.Feature = SuperMap.Feature || {};
SuperMap.Feature.ShapeParameters.Label = Label;
// CONCATENATED MODULE: ./src/common/overlay/feature/Image.js
function feature_Image_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { feature_Image_typeof = function _typeof(obj) { return typeof obj; }; } else { feature_Image_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return feature_Image_typeof(obj); }

function feature_Image_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function feature_Image_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function feature_Image_createClass(Constructor, protoProps, staticProps) { if (protoProps) feature_Image_defineProperties(Constructor.prototype, protoProps); if (staticProps) feature_Image_defineProperties(Constructor, staticProps); return Constructor; }

function feature_Image_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { feature_Image_get = Reflect.get; } else { feature_Image_get = function _get(target, property, receiver) { var base = feature_Image_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return feature_Image_get(target, property, receiver || target); }

function feature_Image_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = feature_Image_getPrototypeOf(object); if (object === null) break; } return object; }

function feature_Image_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) feature_Image_setPrototypeOf(subClass, superClass); }

function feature_Image_setPrototypeOf(o, p) { feature_Image_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return feature_Image_setPrototypeOf(o, p); }

function feature_Image_createSuper(Derived) { var hasNativeReflectConstruct = feature_Image_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = feature_Image_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = feature_Image_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return feature_Image_possibleConstructorReturn(this, result); }; }

function feature_Image_possibleConstructorReturn(self, call) { if (call && (feature_Image_typeof(call) === "object" || typeof call === "function")) { return call; } return feature_Image_assertThisInitialized(self); }

function feature_Image_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function feature_Image_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function feature_Image_getPrototypeOf(o) { feature_Image_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return feature_Image_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class  SuperMap.Feature.ShapeParameters.Image
 * @category Visualization Theme
 * @classdesc å¾çåæ°å¯¹è±¡ã
 * @extends {SuperMap.Feature.ShapeParameters}
 */

var Image_Image = /*#__PURE__*/function (_ShapeParameters) {
  feature_Image_inherits(Image, _ShapeParameters);

  var _super = feature_Image_createSuper(Image);

  /**
   * @function SuperMap.Feature.ShapeParameters.Image.prototype.constructor
   * @description åå»ºä¸ä¸ªå¾çåæ°å¯¹è±¡ã
   * @param {number} x - å·¦ä¸è§æ¨ªåæ ï¼å¿è®¾åæ°ã
   * @param {number} y - å·¦ä¸è§çºµåæ ï¼å¿è®¾åæ°ã
   * @param {(string|Object)} image - å¾çå°åæCavanså¯¹è±¡ï¼å¿è®¾åæ°ã
   * @param {number} width - ç»å¶å°ç»å¸ä¸çå®½åº¦ï¼é»è®¤ä¸ºå¾çé«åº¦ã
   * @param {number} height - ç»å¶å°ç»å¸ä¸çé«åº¦ï¼é»è®¤ä¸ºå¾çé«åº¦ã
   * @param {number} sx - ä»å¾çä¸­è£åªçå·¦ä¸è§æ¨ªåæ ã
   * @param {number} sy - ä»å¾çä¸­è£åªçå·¦ä¸è§çºµåæ ã
   * @param {number} sWidth - ä»å¾çä¸­è£åªçå®½åº¦ï¼é»è®¤ä¸ºå¾çé«åº¦ã
   * @param {number} sHeight - ç»å¶å°ç»å¸ä¸çé«åº¦ï¼é»è®¤ä¸ºå¾çé«åº¦ã
   * @returns {SuperMap.Feature.ShapeParameters.Image} åå½¢åæ°å¯¹è±¡ã
   */
  function Image(x, y, image, width, height, sx, sy, sWidth, sHeight) {
    var _this;

    feature_Image_classCallCheck(this, Image);

    _this = _super.call(this, x, y, image, width, height, sx, sy, sWidth, sHeight);
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Image.prototype.x
     * @description å·¦ä¸è§æ¨ªåæ ï¼å¿è®¾åæ°ã
     */

    _this.x = x;
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Image.prototype.y
     * @description å·¦ä¸è§çºµåæ ï¼å¿è®¾åæ°ã
     */

    _this.y = y;
    /**
     * @member {(string|Object)} SuperMap.Feature.ShapeParameters.Image.prototype.image
     * @description å¾çå°åã
     */

    _this.image = image;
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Image.prototype.width
     * @description ç»å¶å°ç»å¸ä¸çå®½åº¦ï¼é»è®¤ä¸ºå¾çé«åº¦ã
     */

    _this.width = width;
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Image.prototype.height
     * @description ç»å¶å°ç»å¸ä¸çé«åº¦ï¼é»è®¤ä¸ºå¾çé«åº¦ã
     */

    _this.height = height;
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Image.prototype.sx
     * @description ä»å¾çä¸­è£åªçå·¦ä¸è§æ¨ªåæ ã
     */

    _this.sx = sx;
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Image.prototype.sy
     * @description ä»å¾çä¸­è£åªçå·¦ä¸è§çºµåæ ã
     */

    _this.sy = sy;
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Image.prototype.sWidth
     * @description ä»å¾çä¸­è£åªçå®½åº¦ï¼é»è®¤ä¸ºå¾çé«åº¦ã
     */

    _this.sWidth = sWidth;
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Image.prototype.sHeight
     * @description ç»å¶å°ç»å¸ä¸çé«åº¦ï¼é»è®¤ä¸ºå¾çé«åº¦ã
     */

    _this.sHeight = sHeight;
    _this.CLASS_NAME = "SuperMap.Feature.ShapeParameters.Image";
    return _this;
  }
  /**
   * @function SuperMap.Feature.ShapeParameters.Image.prototype.destroy
   * @description éæ¯å¯¹è±¡ã
   */


  feature_Image_createClass(Image, [{
    key: "destroy",
    value: function destroy() {
      this.x = null;
      this.y = null;
      this.image = null;
      this.width = null;
      this.height = null;
      this.sx = null;
      this.sy = null;
      this.sWidth = null;
      this.sHeight = null;

      feature_Image_get(feature_Image_getPrototypeOf(Image.prototype), "destroy", this).call(this);
    }
  }]);

  return Image;
}(ShapeParameters);
SuperMap.Feature = SuperMap.Feature || {};
SuperMap.Feature.ShapeParameters.Image = Image_Image;
// CONCATENATED MODULE: ./src/common/overlay/feature/Circle.js
function Circle_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Circle_typeof = function _typeof(obj) { return typeof obj; }; } else { Circle_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Circle_typeof(obj); }

function Circle_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Circle_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Circle_createClass(Constructor, protoProps, staticProps) { if (protoProps) Circle_defineProperties(Constructor.prototype, protoProps); if (staticProps) Circle_defineProperties(Constructor, staticProps); return Constructor; }

function Circle_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { Circle_get = Reflect.get; } else { Circle_get = function _get(target, property, receiver) { var base = Circle_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return Circle_get(target, property, receiver || target); }

function Circle_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = Circle_getPrototypeOf(object); if (object === null) break; } return object; }

function Circle_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Circle_setPrototypeOf(subClass, superClass); }

function Circle_setPrototypeOf(o, p) { Circle_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Circle_setPrototypeOf(o, p); }

function Circle_createSuper(Derived) { var hasNativeReflectConstruct = Circle_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Circle_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Circle_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Circle_possibleConstructorReturn(this, result); }; }

function Circle_possibleConstructorReturn(self, call) { if (call && (Circle_typeof(call) === "object" || typeof call === "function")) { return call; } return Circle_assertThisInitialized(self); }

function Circle_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Circle_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Circle_getPrototypeOf(o) { Circle_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Circle_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class  SuperMap.Feature.ShapeParameters.Circle
 * @classdesc åå½¢åæ°å¯¹è±¡ã
 * @category Visualization Theme
 * @extends {SuperMap.Feature.ShapeParameters}
 */

var Circle_Circle = /*#__PURE__*/function (_ShapeParameters) {
  Circle_inherits(Circle, _ShapeParameters);

  var _super = Circle_createSuper(Circle);

  /**
   * @function SuperMap.Feature.ShapeParameters.Circle.prototype.constructor
   * @description åå»ºä¸ä¸ªåå½¢åæ°å¯¹è±¡ã
   * @param {number} x - åå¿ x åæ ï¼å¿è®¾åæ°ã
   * @param {number} y - åå¿ y åæ ï¼å¿è®¾åæ°ã
   * @param {number} r - ååå¾ï¼å¿è®¾åæ°ã
   * @returns {SuperMap.Feature.ShapeParameters.Circle} åå½¢åæ°å¯¹è±¡ã
   */
  function Circle(x, y, r) {
    var _this;

    Circle_classCallCheck(this, Circle);

    _this = _super.call(this, x, y, r);
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Circle.prototype.x
     * @description åå¿ x åæ ã
     */

    _this.x = !isNaN(x) ? x : 0;
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Circle.prototype.y
     * @description åå¿ y åæ ã
     */

    _this.y = !isNaN(y) ? y : 0;
    /**
     * @member {number} SuperMap.Feature.ShapeParameters.Circle.prototype.r
     * @description ååå¾ã
     */

    _this.r = !isNaN(r) ? r : 0;
    _this.CLASS_NAME = "SuperMap.Feature.ShapeParameters.Circle";
    return _this;
  }
  /**
   * @function SuperMap.Feature.ShapeParameters.Circle.prototype.destroy
   * @description éæ¯å¯¹è±¡ã
   */


  Circle_createClass(Circle, [{
    key: "destroy",
    value: function destroy() {
      this.x = null;
      this.y = null;
      this.r = null;

      Circle_get(Circle_getPrototypeOf(Circle.prototype), "destroy", this).call(this);
    }
  }]);

  return Circle;
}(ShapeParameters);
SuperMap.Feature = SuperMap.Feature || {};
SuperMap.Feature.ShapeParameters.Circle = Circle_Circle;
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Eventful.js
function Eventful_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Eventful_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Eventful_createClass(Constructor, protoProps, staticProps) { if (protoProps) Eventful_defineProperties(Constructor.prototype, protoProps); if (staticProps) Eventful_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @class  SuperMap.LevelRenderer.Eventful
 * @category Visualization Theme
 * @classdesc äºä»¶ååå¨è¶ç±»ï¼æææ¯æäºä»¶å¤ççç±»åæ¯æ­¤ç±»çå­ç±»ã
 * æ­¤ç±»ä¸å¯å®ä¾åã
 * @private 
 */
var Eventful = /*#__PURE__*/function () {
  /**
   * @function SuperMap.LevelRenderer.Eventful.prototype.constructor
   * @description æé å½æ°ãå¯¹è±¡å¯ä»¥éè¿ onxxxx ç»å®äºä»¶ã
   * æ¯æçäºä»¶ï¼
   * Symbolizer properties:
   * onclick - {function} é»è®¤å¼ï¼nullã
   * onmouseover - {function} é»è®¤å¼ï¼nullã
   * onmouseout - {function} é»è®¤å¼ï¼nullã
   * onmousemove - {function} é»è®¤å¼ï¼nullã
   * onmousewheel - {function} é»è®¤å¼ï¼nullã
   * onmousedown - {function} é»è®¤å¼ï¼nullã
   * onmouseup - {function} é»è®¤å¼ï¼nullã
   * ondragstart - {function} é»è®¤å¼ï¼nullã
   * ondragend - {function} é»è®¤å¼ï¼nullã
   * ondragenter - {function} é»è®¤å¼ï¼nullã
   * ondragleave - {function} é»è®¤å¼ï¼nullã
   * ondragover - {function} é»è®¤å¼ï¼nullã
   * ondrop - {function} é»è®¤å¼ï¼nullã
   */
  function Eventful() {
    Eventful_classCallCheck(this, Eventful);

    /**
     * @member {Object} SuperMap.LevelRenderer.Eventful.prototype._handlers
     * @description äºä»¶å¤çå¯¹è±¡ï¼äºä»¶ååå¨ï¼ã
     */
    this._handlers = {};
    this.CLASS_NAME = "SuperMap.LevelRenderer.Eventful";
  }
  /**
   * @function {Object} SuperMap.LevelRenderer.Eventful.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  Eventful_createClass(Eventful, [{
    key: "destroy",
    value: function destroy() {
      this._handlers = null;
    }
    /**
     * @function SuperMap.LevelRenderer.Eventful.prototype.one
     * @description åæ¬¡è§¦åç»å®ï¼dispatchåéæ¯ã
     * @param {string} event - äºä»¶åã
     * @param {boolean} handler - ååºå½æ°ã
     * @param {Object} context - contextã
     * @returns {SuperMap.LevelRenderer.Eventful} this
     */

  }, {
    key: "one",
    value: function one(event, handler, context) {
      var _h = this._handlers;

      if (!handler || !event) {
        return this;
      }

      if (!_h[event]) {
        _h[event] = [];
      }

      _h[event].push({
        h: handler,
        one: true,
        ctx: context || this
      });

      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Eventful.prototype.bind
     * @description ç»å®äºä»¶ã
     * @param {string} event - äºä»¶åã
     * @param {boolean} handler - ååºå½æ°ã
     * @param {Object} context - contextã
     * @returns {SuperMap.LevelRenderer.Eventful} this
     */

  }, {
    key: "bind",
    value: function bind(event, handler, context) {
      var _h = this._handlers;

      if (!handler || !event) {
        return this;
      }

      if (!_h[event]) {
        _h[event] = [];
      }

      _h[event].push({
        h: handler,
        one: false,
        ctx: context || this
      });

      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Eventful.prototype.unbind
     * @description è§£ç»äºä»¶ã
     * @param {string} event - äºä»¶åã
     * @param {boolean} handler - ååºå½æ°ã
     * @returns {SuperMap.LevelRenderer.Eventful} this
     */

  }, {
    key: "unbind",
    value: function unbind(event, handler) {
      var _h = this._handlers;

      if (!event) {
        this._handlers = {};
        return this;
      }

      if (handler) {
        if (_h[event]) {
          var newList = [];

          for (var i = 0, l = _h[event].length; i < l; i++) {
            if (_h[event][i]['h'] != handler) {
              newList.push(_h[event][i]);
            }
          }

          _h[event] = newList;
        }

        if (_h[event] && _h[event].length === 0) {
          delete _h[event];
        }
      } else {
        delete _h[event];
      }

      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Eventful.prototype.dispatch
     * @description äºä»¶ååã
     * @param {string} type - äºä»¶ç±»åã
     * @returns {SuperMap.LevelRenderer.Eventful} this
     */

  }, {
    key: "dispatch",
    value: function dispatch(type) {
      if (this._handlers[type]) {
        var args = arguments;
        var argLen = args.length;

        if (argLen > 3) {
          args = Array.prototype.slice.call(args, 1);
        }

        var _h = this._handlers[type];
        var len = _h.length;

        for (var i = 0; i < len;) {
          // Optimize advise from backbone
          switch (argLen) {
            case 1:
              _h[i]['h'].call(_h[i]['ctx']);

              break;

            case 2:
              _h[i]['h'].call(_h[i]['ctx'], args[1]);

              break;

            case 3:
              _h[i]['h'].call(_h[i]['ctx'], args[1], args[2]);

              break;

            default:
              // have more than 2 given arguments
              _h[i]['h'].apply(_h[i]['ctx'], args);

              break;
          }

          if (_h[i]['one']) {
            _h.splice(i, 1);

            len--;
          } else {
            i++;
          }
        }
      }

      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Eventful.prototype.dispatchWithContext
     * @description å¸¦æcontextçäºä»¶ååï¼æåä¸ä¸ªåæ°æ¯äºä»¶åè°ç contextã
     * @param {string} type - äºä»¶ç±»åã
     * @returns {SuperMap.LevelRenderer.Eventful} this
     */

  }, {
    key: "dispatchWithContext",
    value: function dispatchWithContext(type) {
      if (this._handlers[type]) {
        var args = arguments;
        var argLen = args.length;

        if (argLen > 4) {
          args = Array.prototype.slice.call(args, 1, args.length - 1);
        }

        var ctx = args[args.length - 1];
        var _h = this._handlers[type];
        var len = _h.length;

        for (var i = 0; i < len;) {
          // Optimize advise from backbone
          switch (argLen) {
            case 1:
              _h[i]['h'].call(ctx);

              break;

            case 2:
              _h[i]['h'].call(ctx, args[1]);

              break;

            case 3:
              _h[i]['h'].call(ctx, args[1], args[2]);

              break;

            default:
              // have more than 2 given arguments
              _h[i]['h'].apply(ctx, args);

              break;
          }

          if (_h[i]['one']) {
            _h.splice(i, 1);

            len--;
          } else {
            i++;
          }
        }
      }

      return this;
    }
  }]);

  return Eventful;
}();
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Vector.js
function levelRenderer_Vector_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function levelRenderer_Vector_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function levelRenderer_Vector_createClass(Constructor, protoProps, staticProps) { if (protoProps) levelRenderer_Vector_defineProperties(Constructor.prototype, protoProps); if (staticProps) levelRenderer_Vector_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @private
 * @class  SuperMap.LevelRenderer.Tool.Vector
 * @category Visualization Theme
 * @classdesc LevelRenderer äºç»´åéç±»
 *
 */
var levelRenderer_Vector_Vector = /*#__PURE__*/function () {
  /**
   * @function SuperMap.LevelRenderer.Tool.Vector.constructor
   * @description æé å½æ°
   */
  function Vector() {
    levelRenderer_Vector_classCallCheck(this, Vector);

    this.ArrayCtor = typeof Float32Array === 'undefined' ? Array : Float32Array;
    this.CLASS_NAME = "SuperMap.LevelRenderer.Tool.Vector";
  }
  /**
   * @function SuperMap.LevelRenderer.Tool.Vector.prototype.create
   * @description åå»ºä¸ä¸ªåéã
   * 
   * @param {number} x - xåæ 
   * @param {number} y - Yåæ 
   * @return {Vector2} åéã
   */


  levelRenderer_Vector_createClass(Vector, [{
    key: "create",
    value: function create(x, y) {
      var ArrayCtor = this.ArrayCtor;
      var out = new ArrayCtor(2);
      out[0] = x || 0;
      out[1] = y || 0;
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.copy
     * @description å¤å¶ä¸ä¸ªåéã
     * 
     * @param {Vector2} out - åºç¡åéã
     * @param {Vector2} v - åéã
     * @return {Vector2} åéåéã
     */

  }, {
    key: "copy",
    value: function copy(out, v) {
      out[0] = v[0];
      out[1] = v[1];
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.set
     * @description è®¾ç½®åéçä¸¤ä¸ªé¡¹ã
     * 
     * @param {Vector2} out - åºç¡åéã
     * @param {number} a - é¡¹ aã
     * @param {number} b - é¡¹ bã
     * @return {Vector2} ç»æã
     */

  }, {
    key: "set",
    value: function set(out, a, b) {
      out[0] = a;
      out[1] = b;
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.add
     * @description åéç¸å ã
     * 
     * @param {Vector2} out - åºç¡åéã
     * @param {Vector2} v1 - åé v1ã
     * @param {Vector2} v2 - åé v2ã
     * @return {Vector2} ç»æã
     */

  }, {
    key: "add",
    value: function add(out, v1, v2) {
      out[0] = v1[0] + v2[0];
      out[1] = v1[1] + v2[1];
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.scaleAndAdd
     * @description åéç¼©æ¾åç¸å ã
     * @param {Vector2} out - åºç¡åéã
     * @param {Vector2} v1 - åé v1ã
     * @param {Vector2} v2 - åé v2ï¼ç¼©æ¾åéï¼ã
     * @param {number} a - ç¼©æ¾åæ°ã
     * @return {Vector2} ç»æã
     */

  }, {
    key: "scaleAndAdd",
    value: function scaleAndAdd(out, v1, v2, a) {
      out[0] = v1[0] + v2[0] * a;
      out[1] = v1[1] + v2[1] * a;
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.sub
     * @description åéç¸åã
     * @param {Vector2} out - åºç¡åéã
     * @param {Vector2} v1 - åé v1ã
     * @param {Vector2} v2 - åé v2ã
     * @return {Vector2} ç»æã
     */

  }, {
    key: "sub",
    value: function sub(out, v1, v2) {
      out[0] = v1[0] - v2[0];
      out[1] = v1[1] - v2[1];
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.len
     * @description åéé¿åº¦ã
     * @param {Vector2} v - åéã
     * @return {number} åéé¿åº¦ã
     */

  }, {
    key: "len",
    value: function len(v) {
      return Math.sqrt(this.lenSquare(v));
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.lenSquare
     * @description åéé¿åº¦å¹³æ¹ã
     * @param {Vector2} v - åéã
     * @return {number} åéé¿åº¦å¹³æ¹ã
     */

  }, {
    key: "lenSquare",
    value: function lenSquare(v) {
      return v[0] * v[0] + v[1] * v[1];
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.mul
     * @description åéä¹æ³ã
     * @param {Vector2} out - åºç¡åéã
     * @param {Vector2} v1 - åé v1ã
     * @param {Vector2} v2 - åé v2ã
     * @return {Vector2} ç»æã
     */

  }, {
    key: "mul",
    value: function mul(out, v1, v2) {
      out[0] = v1[0] * v2[0];
      out[1] = v1[1] * v2[1];
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.div
     * @description åéé¤æ³ã
     * 
     * @param {Vector2} out - åºç¡åéã
     * @param {Vector2} v1 - åé v1ã
     * @param {Vector2} v2 - åé v2ã
     * @return {Vector2} ç»æã
     */

  }, {
    key: "div",
    value: function div(out, v1, v2) {
      out[0] = v1[0] / v2[0];
      out[1] = v1[1] / v2[1];
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.dot
     * @description åéç¹ä¹ã
     * 
     * @param  {Vector2} v1 - åé v1ã
     * @param  {Vector2} v2 - åé v2ã
     * @return {number} åéç¹ä¹ã
     */

  }, {
    key: "dot",
    value: function dot(v1, v2) {
      return v1[0] * v2[0] + v1[1] * v2[1];
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.scale
     * @description åéç¼©æ¾ã
     *
     * @param {Vector2} out - åºç¡åéã
     * @param {Vector2} v - åévã
     * @param {number} s -ç¼©æ¾åæ°ã
     * @return {Vector2} ç»æã
     */

  }, {
    key: "scale",
    value: function scale(out, v, s) {
      out[0] = v[0] * s;
      out[1] = v[1] * s;
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.normalize
     * @description åéå½ä¸åã
     *
     * @param {Vector2} out - åºç¡åéã
     * @param {Vector2} v - åé vã
     * @return {Vector2} ç»æã
     */

  }, {
    key: "normalize",
    value: function normalize(out, v) {
      var d = this.len(v);

      if (d === 0) {
        out[0] = 0;
        out[1] = 0;
      } else {
        out[0] = v[0] / d;
        out[1] = v[1] / d;
      }

      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.distance
     * @description è®¡ç®åéé´è·ç¦»ã
     * 
     * @param {Vector2} v1 - åé v1ã
     * @param {Vector2} v2 - åé v2ã
     * @return {number} åéé´è·ç¦»ã
     */

  }, {
    key: "distance",
    value: function distance(v1, v2) {
      return Math.sqrt((v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1]));
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.distanceSquare
     * @description åéè·ç¦»å¹³æ¹ã
     * 
     * @param {Vector2} v1 - åé v1ã
     * @param {Vector2} v2 - åé v2ã
     * @return {number} åéè·ç¦»å¹³æ¹ã
     */

  }, {
    key: "distanceSquare",
    value: function distanceSquare(v1, v2) {
      return (v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1]);
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.negate
     * @description æ±è´åéã
     * 
     * @param {Vector2} out - åºç¡åéã
     * @param {Vector2} v - åé vã
     * @return {Vector2} è´åéã
     */

  }, {
    key: "negate",
    value: function negate(out, v) {
      out[0] = -v[0];
      out[1] = -v[1];
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.lerp
     * @description ä¸¤ç¹ä¹é´çº¿æ§æå¼ã
     *
     * @param {Vector2} out - åºç¡åéã
     * @param {Vector2} v1 - åé v1ã
     * @param {Vector2} v2 - åé v2ã
     * @param {number} t
     * @return {Vector2} ç»æã
     */

  }, {
    key: "lerp",
    value: function lerp(out, v1, v2, t) {
      out[0] = v1[0] + t * (v2[0] - v1[0]);
      out[1] = v1[1] + t * (v2[1] - v1[1]);
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.applyTransform
     * @description ç©éµå·¦ä¹åéã
     * 
     * @param {Vector2} out - åºç¡åéã
     * @param {Vector2} v1 - åé v1ã
     * @param {Vector2} v2 - åé v2ã
     * @return {Vector2} ç»æã
     */

  }, {
    key: "applyTransform",
    value: function applyTransform(out, v, m) {
      var x = v[0];
      var y = v[1];
      out[0] = m[0] * x + m[2] * y + m[4];
      out[1] = m[1] * x + m[3] * y + m[5];
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.min
     * @description æ±ä¸¤ä¸ªåéæå°å¼ã
     * @param {Vector2} out - åºç¡åéã
     * @param {Vector2} v1 - åé v1ã
     * @param {Vector2} v2 - åé v2ã
     * @return {Vector2} ç»æã
     */

  }, {
    key: "min",
    value: function min(out, v1, v2) {
      out[0] = Math.min(v1[0], v2[0]);
      out[1] = Math.min(v1[1], v2[1]);
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.max
     * @description æ±ä¸¤ä¸ªåéæå¤§å¼ã
     *
     * @param {Vector2} out - åºç¡åéã
     * @param {Vector2} v1 - åé v1ã
     * @param {Vector2} v2 - åé v2ã
     * @return {Vector2} ç»æã
     */

  }, {
    key: "max",
    value: function max(out, v1, v2) {
      out[0] = Math.max(v1[0], v2[0]);
      out[1] = Math.max(v1[1], v2[1]);
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.length
     * @description åéé¿åº¦ã
     * 
     * @param {Vector2} v - åéã
     * @return {number} åéé¿åº¦ã
     */

  }, {
    key: "length",
    value: function length(v) {
      return this.len(v);
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.lengthSquare
     * @description åéé¿åº¦å¹³æ¹ã
     * 
     * @param {Vector2} v - åéã
     * @return {number} åéé¿åº¦å¹³æ¹ã
     */

  }, {
    key: "lengthSquare",
    value: function lengthSquare(v) {
      return this.lenSquare(v);
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.dist
     * @description è®¡ç®åéé´è·ç¦»ã
     *
     * @param {Vector2} v1 - åé v1ã
     * @param {Vector2} v2 - åé v2ã
     * @return {number} åéé´è·ç¦»ã
     */

  }, {
    key: "dist",
    value: function dist(v1, v2) {
      return this.distance(v1, v2);
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Vector.prototype.distSquare
     * @description åéè·ç¦»å¹³æ¹ã
     * 
     * @param {Vector2} v1 - åé v1ã
     * @param {Vector2} v2 - åé v2ã
     * @return {number} åéè·ç¦»å¹³æ¹
     */

  }, {
    key: "distSquare",
    value: function distSquare(v1, v2) {
      return this.distanceSquare(v1, v2);
    }
  }]);

  return Vector;
}();
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Curve.js
function levelRenderer_Curve_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Curve_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Curve_createClass(Constructor, protoProps, staticProps) { if (protoProps) Curve_defineProperties(Constructor.prototype, protoProps); if (staticProps) Curve_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @class  SuperMap.LevelRenderer.Tool.Curve
 * @category Visualization Theme
 * @classdesc LevelRenderer å·¥å·-æ²çº¿
 * @private 
 */

var Curve_Curve = /*#__PURE__*/function () {
  /**
   * @function SuperMap.LevelRenderer.Tool.Curve.prototype.constructor
   * @description æé å½æ°ã
   */
  function Curve() {
    levelRenderer_Curve_classCallCheck(this, Curve);

    /**
     * @member {SuperMap.LevelRenderer.Tool.Vector} SuperMap.LevelRenderer.Tool.Curve.prototype.vector
     * @description ç¢éå·¥å·ã
     */
    this.vector = new levelRenderer_Vector_Vector();
    /**
     * @member {number} SuperMap.LevelRenderer.Tool.Curve.prototype.EPSILON
     * @description eã
     */

    this.EPSILON = 1e-4;
    /**
     * @member {number} SuperMap.LevelRenderer.Tool.Curve.prototype.THREE_SQRT
     * @description 3 çå¹³æ¹æ ¹ã
     */

    this.THREE_SQRT = Math.sqrt(3);
    /**
     * @member {number} SuperMap.LevelRenderer.Tool.Curve.prototype.ONE_THIRD
     * @description 1/3ã
     */

    this.ONE_THIRD = 1 / 3;
    this.CLASS_NAME = "SuperMap.LevelRenderer.Tool.Curve";
  }
  /*
   * Method: evalCubicCoeff
   *
   * Parameters:
   * a - {number} å¼ã
   * b - {number} å¼ã
   * c - {number} å¼ã
   * d - {number} å¼ã
   * t - {number} å¼ã
   *
   * Returns:
   * {number}
   */

  /*
   evalCubicCoeff: function(a, b, c, d, t){
   return ((a * t + b) * t + c) * t + d;
   },
   */

  /**
   * @function SuperMap.LevelRenderer.Tool.Curve.prototype.isAroundZero
   * @description å¤æ­ä¸ä¸ªå¼æ¯å¦è¶äº0ï¼å¤æ­åèå¼ï¼1e-4ã
   * @param {number} val - å¼ã
   * @returns {boolean} å¼æ¯å¦è¶äº0ã
   */


  Curve_createClass(Curve, [{
    key: "isAroundZero",
    value: function isAroundZero(val) {
      return val > -this.EPSILON && val < this.EPSILON;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Curve.prototype.isNotAroundZero
     * @description å¤æ­ä¸ä¸ªå¼æ¯å¦ä¸è¶äº0ï¼å¤æ­åèå¼ï¼1e-4ã
     * @param {number} val - å¼ã
     * @returns {boolean} å¼æ¯å¦ä¸è¶äº0ã
     */

  }, {
    key: "isNotAroundZero",
    value: function isNotAroundZero(val) {
      return val > this.EPSILON || val < -this.EPSILON;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Curve.prototype.cubicAt
     * @description è®¡ç®ä¸æ¬¡è´å¡å°å¼
     * @param {number} p0 - ç¹p0ã
     * @param {number} p1 - ç¹p1ã
     * @param {number} p2 - ç¹p2ã
     * @param {number} p3 - ç¹p3ã
     * @param {number} t - tå¼ã
     * @returns {number} ä¸æ¬¡è´å¡å°å¼ã
     */

  }, {
    key: "cubicAt",
    value: function cubicAt(p0, p1, p2, p3, t) {
      var onet = 1 - t;
      return onet * onet * (onet * p0 + 3 * t * p1) + t * t * (t * p3 + 3 * onet * p2);
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Curve.prototype.cubicDerivativeAt
     * @description è®¡ç®ä¸æ¬¡è´å¡å°å¯¼æ°å¼
     * @param {number} p0 - ç¹p0ã
     * @param {number} p1 - ç¹p1ã
     * @param {number} p2 - ç¹p2ã
     * @param {number} p3 - ç¹p3ã
     * @param {number} t - tå¼ã
     * @returns {number} ä¸æ¬¡è´å¡å°å¯¼æ°å¼ã
     */

  }, {
    key: "cubicDerivativeAt",
    value: function cubicDerivativeAt(p0, p1, p2, p3, t) {
      var onet = 1 - t;
      return 3 * (((p1 - p0) * onet + 2 * (p2 - p1) * t) * onet + (p3 - p2) * t * t);
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Curve.prototype.cubicRootAt
     * @description è®¡ç®ä¸æ¬¡è´å¡å°æ¹ç¨æ ¹ï¼ä½¿ç¨çéå¬å¼
     * @param {number} p0 - ç¹p0ã
     * @param {number} p1 - ç¹p1ã
     * @param {number} p2 - ç¹p2ã
     * @param {number} p3 - ç¹p3ã
     * @param {number} val - å¼ã
     * @param {Array.<number>} roots - æææ ¹æ°ç®ã
     * @returns {number} æææ ¹ã
     */

  }, {
    key: "cubicRootAt",
    value: function cubicRootAt(p0, p1, p2, p3, val, roots) {
      // Evaluate roots of cubic functions
      var a = p3 + 3 * (p1 - p2) - p0;
      var b = 3 * (p2 - p1 * 2 + p0);
      var c = 3 * (p1 - p0);
      var d = p0 - val;
      var A = b * b - 3 * a * c;
      var B = b * c - 9 * a * d;
      var C = c * c - 3 * b * d;
      var n = 0;

      if (this.isAroundZero(A) && this.isAroundZero(B)) {
        if (this.isAroundZero(b)) {
          roots[0] = 0;
        } else {
          var t1 = -c / b; //t1, t2, t3, b is not zero

          if (t1 >= 0 && t1 <= 1) {
            roots[n++] = t1;
          }
        }
      } else {
        var disc = B * B - 4 * A * C;

        if (this.isAroundZero(disc)) {
          var K = B / A;

          var _t2 = -b / a + K; // t1, a is not zero


          var t2 = -K / 2; // t2, t3

          if (_t2 >= 0 && _t2 <= 1) {
            roots[n++] = _t2;
          }

          if (t2 >= 0 && t2 <= 1) {
            roots[n++] = t2;
          }
        } else if (disc > 0) {
          var discSqrt = Math.sqrt(disc);
          var Y1 = A * b + 1.5 * a * (-B + discSqrt);
          var Y2 = A * b + 1.5 * a * (-B - discSqrt);

          if (Y1 < 0) {
            Y1 = -Math.pow(-Y1, this.ONE_THIRD);
          } else {
            Y1 = Math.pow(Y1, this.ONE_THIRD);
          }

          if (Y2 < 0) {
            Y2 = -Math.pow(-Y2, this.ONE_THIRD);
          } else {
            Y2 = Math.pow(Y2, this.ONE_THIRD);
          }

          var _t3 = (-b - (Y1 + Y2)) / (3 * a);

          if (_t3 >= 0 && _t3 <= 1) {
            roots[n++] = _t3;
          }
        } else {
          var T = (2 * A * b - 3 * a * B) / (2 * Math.sqrt(A * A * A));
          var theta = Math.acos(T) / 3;
          var ASqrt = Math.sqrt(A);
          var tmp = Math.cos(theta);

          var _t4 = (-b - 2 * ASqrt * tmp) / (3 * a);

          var _t5 = (-b + ASqrt * (tmp + this.THREE_SQRT * Math.sin(theta))) / (3 * a);

          var t3 = (-b + ASqrt * (tmp - this.THREE_SQRT * Math.sin(theta))) / (3 * a);

          if (_t4 >= 0 && _t4 <= 1) {
            roots[n++] = _t4;
          }

          if (_t5 >= 0 && _t5 <= 1) {
            roots[n++] = _t5;
          }

          if (t3 >= 0 && t3 <= 1) {
            roots[n++] = t3;
          }
        }
      }

      return n;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Curve.prototype.cubicRootAt
     * @description è®¡ç®ä¸æ¬¡è´å¡å°æ¹ç¨æéå¼çä½ç½®
     * @param {number} p0 - ç¹p0ã
     * @param {number} p1 - ç¹p1ã
     * @param {number} p2 - ç¹p2ã
     * @param {number} p3 - ç¹p3ã
     * @param {Array.<number>} extrema - å¼ã
     * @returns {number} æææ°ç®ã
     */

  }, {
    key: "cubicExtrema",
    value: function cubicExtrema(p0, p1, p2, p3, extrema) {
      var b = 6 * p2 - 12 * p1 + 6 * p0;
      var a = 9 * p1 + 3 * p3 - 3 * p0 - 9 * p2;
      var c = 3 * p1 - 3 * p0;
      var n = 0;

      if (this.isAroundZero(a)) {
        if (this.isNotAroundZero(b)) {
          var t1 = -c / b;

          if (t1 >= 0 && t1 <= 1) {
            extrema[n++] = t1;
          }
        }
      } else {
        var disc = b * b - 4 * a * c;

        if (this.isAroundZero(disc)) {
          extrema[0] = -b / (2 * a);
        } else if (disc > 0) {
          var discSqrt = Math.sqrt(disc);

          var _t6 = (-b + discSqrt) / (2 * a);

          var t2 = (-b - discSqrt) / (2 * a);

          if (_t6 >= 0 && _t6 <= 1) {
            extrema[n++] = _t6;
          }

          if (t2 >= 0 && t2 <= 1) {
            extrema[n++] = t2;
          }
        }
      }

      return n;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Curve.prototype.cubicSubdivide
     * @description ç»åä¸æ¬¡è´å¡å°æ²çº¿
     * @param {number} p0 - ç¹p0ã
     * @param {number} p1 - ç¹p1ã
     * @param {number} p2 - ç¹p2ã
     * @param {number} p3 - ç¹p3ã
     * @param {number} t - tå¼ã
     * @param {Array.<number>} out - æå°ç¹ã
     * @returns {number} æå°ç¹ã
     */

  }, {
    key: "cubicSubdivide",
    value: function cubicSubdivide(p0, p1, p2, p3, t, out) {
      var p01 = (p1 - p0) * t + p0;
      var p12 = (p2 - p1) * t + p1;
      var p23 = (p3 - p2) * t + p2;
      var p012 = (p12 - p01) * t + p01;
      var p123 = (p23 - p12) * t + p12;
      var p0123 = (p123 - p012) * t + p012; // Seg0

      out[0] = p0;
      out[1] = p01;
      out[2] = p012;
      out[3] = p0123; // Seg1

      out[4] = p0123;
      out[5] = p123;
      out[6] = p23;
      out[7] = p3;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Curve.prototype.cubicProjectPoint
     * @description æå°ç¹å°ä¸æ¬¡è´å¡å°æ²çº¿ä¸ï¼è¿åæå°è·ç¦»ãæå°ç¹æå¯è½ä¼æä¸ä¸ªæèå¤ä¸ªï¼è¿éåªè¿åå¶ä¸­è·ç¦»æç­çä¸ä¸ªã
     * @param {number} x0 - ç¹p0æ¨ªåæ ã
     * @param {number} y0 - ç¹p0çºµåæ ã
     * @param {number} x1 - ç¹p1æ¨ªåæ ã
     * @param {number} y1 - ç¹p1çºµåæ ã
     * @param {number} x2 - ç¹p2æ¨ªåæ ã
     * @param {number} y2 - ç¹p2çºµåæ ã
     * @param {number} x3 - ç¹p3æ¨ªåæ ã
     * @param {number} y3 - ç¹p3çºµåæ ã
     * @param {number} x - ç¹pæ¨ªåæ ã
     * @param {number} y - ç¹pçºµåæ ã
     * @param {Array.<number>} out - æå°ç¹ã
     * @returns {number} æå°ç¹ã
     */

  }, {
    key: "cubicProjectPoint",
    value: function cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, out) {
      // ä¸´æ¶åé
      var _v0 = this.vector.create();

      var _v1 = this.vector.create();

      var _v2 = this.vector.create(); // var _v3 = vector.create();
      // http://pomax.github.io/bezierinfo/#projections


      var t;
      var interval = 0.005;
      var d = Infinity;
      _v0[0] = x;
      _v0[1] = y; // åç²ç¥ä¼°è®¡ä¸ä¸å¯è½çæå°è·ç¦»ç t å¼
      // PENDING

      for (var _t = 0; _t < 1; _t += 0.05) {
        _v1[0] = this.cubicAt(x0, x1, x2, x3, _t);
        _v1[1] = this.cubicAt(y0, y1, y2, y3, _t);
        var d1 = this.vector.distSquare(_v0, _v1);

        if (d1 < d) {
          t = _t;
          d = d1;
        }
      }

      d = Infinity; // At most 32 iteration

      for (var i = 0; i < 32; i++) {
        if (interval < this.EPSILON) {
          break;
        }

        var prev = t - interval;
        var next = t + interval; // t - interval

        _v1[0] = this.cubicAt(x0, x1, x2, x3, prev);
        _v1[1] = this.cubicAt(y0, y1, y2, y3, prev);

        var _d = this.vector.distSquare(_v1, _v0);

        if (prev >= 0 && _d < d) {
          t = prev;
          d = _d;
        } else {
          // t + interval
          _v2[0] = this.cubicAt(x0, x1, x2, x3, next);
          _v2[1] = this.cubicAt(y0, y1, y2, y3, next);
          var d2 = this.vector.distSquare(_v2, _v0);

          if (next <= 1 && d2 < d) {
            t = next;
            d = d2;
          } else {
            interval *= 0.5;
          }
        }
      } // t


      if (out) {
        out[0] = this.cubicAt(x0, x1, x2, x3, t);
        out[1] = this.cubicAt(y0, y1, y2, y3, t);
      } // console.log(interval, i);


      return Math.sqrt(d);
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Curve.prototype.quadraticAt
     * @description è®¡ç®äºæ¬¡æ¹è´å¡å°å¼ã
     * @param {number} p0 - ç¹p0ã
     * @param {number} p1 - ç¹p1ã
     * @param {number} p2 - ç¹p2ã
     * @param {number} t - tå¼ã
     * @returns {number} äºæ¬¡æ¹è´å¡å°å¼ã
     */

  }, {
    key: "quadraticAt",
    value: function quadraticAt(p0, p1, p2, t) {
      var onet = 1 - t;
      return onet * (onet * p0 + 2 * t * p1) + t * t * p2;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Curve.prototype.quadraticAt
     * @description è®¡ç®äºæ¬¡æ¹è´å¡å°å¯¼æ°å¼ã
     * @param {number} p0 - ç¹p0ã
     * @param {number} p1 - ç¹p1ã
     * @param {number} p2 - ç¹p2ã
     * @param {number} t - tå¼ã
     * @returns {number} äºæ¬¡æ¹è´å¡å°å¯¼æ°å¼ã
     */

  }, {
    key: "quadraticDerivativeAt",
    value: function quadraticDerivativeAt(p0, p1, p2, t) {
      return 2 * ((1 - t) * (p1 - p0) + t * (p2 - p1));
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Curve.prototype.quadraticRootAt
     * @description è®¡ç®äºæ¬¡æ¹è´å¡å°æ¹ç¨æ ¹
     * @param {number} p0 - ç¹p0ã
     * @param {number} p1 - ç¹p1ã
     * @param {number} p2 - ç¹p2ã
     * @param {number} val - å¼ã
     * @param {Array.<number>} roots - æææ ¹æ°ç®ã
     * @returns {number} æææ ¹æ°ç®ã
     */

  }, {
    key: "quadraticRootAt",
    value: function quadraticRootAt(p0, p1, p2, val, roots) {
      var a = p0 - 2 * p1 + p2;
      var b = 2 * (p1 - p0);
      var c = p0 - val;
      var n = 0;

      if (this.isAroundZero(a)) {
        if (this.isNotAroundZero(b)) {
          var t1 = -c / b;

          if (t1 >= 0 && t1 <= 1) {
            roots[n++] = t1;
          }
        }
      } else {
        var disc = b * b - 4 * a * c;

        if (this.isAroundZero(disc)) {
          var _t7 = -b / (2 * a);

          if (_t7 >= 0 && _t7 <= 1) {
            roots[n++] = _t7;
          }
        } else if (disc > 0) {
          var discSqrt = Math.sqrt(disc);

          var _t8 = (-b + discSqrt) / (2 * a);

          var t2 = (-b - discSqrt) / (2 * a);

          if (_t8 >= 0 && _t8 <= 1) {
            roots[n++] = _t8;
          }

          if (t2 >= 0 && t2 <= 1) {
            roots[n++] = t2;
          }
        }
      }

      return n;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Curve.prototype.quadraticExtremum
     * @description è®¡ç®äºæ¬¡è´å¡å°æ¹ç¨æéå¼
     * @param {number} p0 - ç¹p0ã
     * @param {number} p1 - ç¹p1ã
     * @param {number} p2 - ç¹p2ã
     * @returns {number} äºæ¬¡è´å¡å°æ¹ç¨æéå¼ã
     */

  }, {
    key: "quadraticExtremum",
    value: function quadraticExtremum(p0, p1, p2) {
      var divider = p0 + p2 - 2 * p1;

      if (divider === 0) {
        // p1 is center of p0 and p2
        return 0.5;
      } else {
        return (p0 - p1) / divider;
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Curve.prototype.quadraticProjectPoint
     * @description æå°ç¹å°äºæ¬¡è´å¡å°æ²çº¿ä¸ï¼è¿åæå°è·ç¦»ãæå°ç¹æå¯è½ä¼æä¸ä¸ªæèå¤ä¸ªï¼è¿éåªè¿åå¶ä¸­è·ç¦»æç­çä¸ä¸ªã
     * @param {number} x0 - ç¹p0æ¨ªåæ ã
     * @param {number} y0 - ç¹p0çºµåæ ã
     * @param {number} x1 - ç¹p1æ¨ªåæ ã
     * @param {number} y1 - ç¹p1çºµåæ ã
     * @param {number} x2 - ç¹p2æ¨ªåæ ã
     * @param {number} y2 - ç¹p2çºµåæ ã
     * @param {number} x - ç¹pæ¨ªåæ ã
     * @param {number} y - ç¹pçºµåæ ã
     * @param {Array.<number>} out - æå°ç¹ã
     * @returns {number} æå°è·ç¦»ã
     */

  }, {
    key: "quadraticProjectPoint",
    value: function quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, out) {
      // ä¸´æ¶åé
      var _v0 = this.vector.create();

      var _v1 = this.vector.create();

      var _v2 = this.vector.create(); // http://pomax.github.io/bezierinfo/#projections


      var t;
      var interval = 0.005;
      var d = Infinity;
      _v0[0] = x;
      _v0[1] = y; // åç²ç¥ä¼°è®¡ä¸ä¸å¯è½çæå°è·ç¦»ç t å¼
      // PENDING

      for (var _t = 0; _t < 1; _t += 0.05) {
        _v1[0] = this.quadraticAt(x0, x1, x2, _t);
        _v1[1] = this.quadraticAt(y0, y1, y2, _t);
        var d1 = this.vector.distSquare(_v0, _v1);

        if (d1 < d) {
          t = _t;
          d = d1;
        }
      }

      d = Infinity; // At most 32 iteration

      for (var i = 0; i < 32; i++) {
        if (interval < this.EPSILON) {
          break;
        }

        var prev = t - interval;
        var next = t + interval; // t - interval

        _v1[0] = this.quadraticAt(x0, x1, x2, prev);
        _v1[1] = this.quadraticAt(y0, y1, y2, prev);

        var _d2 = this.vector.distSquare(_v1, _v0);

        if (prev >= 0 && _d2 < d) {
          t = prev;
          d = _d2;
        } else {
          // t + interval
          _v2[0] = this.quadraticAt(x0, x1, x2, next);
          _v2[1] = this.quadraticAt(y0, y1, y2, next);
          var d2 = this.vector.distSquare(_v2, _v0);

          if (next <= 1 && d2 < d) {
            t = next;
            d = d2;
          } else {
            interval *= 0.5;
          }
        }
      } // t


      if (out) {
        out[0] = this.quadraticAt(x0, x1, x2, t);
        out[1] = this.quadraticAt(y0, y1, y2, t);
      } // console.log(interval, i);


      return Math.sqrt(d);
    }
  }]);

  return Curve;
}();
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Area.js
function Area_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Area_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Area_createClass(Constructor, protoProps, staticProps) { if (protoProps) Area_defineProperties(Constructor.prototype, protoProps); if (staticProps) Area_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class  SuperMap.LevelRenderer.Tool.Area
 * @category Visualization Theme
 * @classdesc LevelRenderer å·¥å·-å¾å½¢èå´å¤æ­
 * @private 
 */

var Area = /*#__PURE__*/function () {
  /**
   * @function SuperMap.LevelRenderer.Tool.Areal.prototype.constructor
   * @description æé å½æ°ã
   */
  function Area() {
    Area_classCallCheck(this, Area);

    /**
     * @member {SuperMap.LevelRenderer.Tool.Util}  SuperMap.LevelRenderer.Tool.Areal.prototype.util
     * @description åºç¡å·¥å·å¯¹è±¡ã
     */
    this.util = new Util_Util();
    /**
     * @member {SuperMap.LevelRenderer.Tool.Curve}  SuperMap.LevelRenderer.Tool.Areal.prototype.curve
     * @description æ²çº¿å·¥å·å¯¹è±¡
     */

    this.curve = new Curve_Curve();
    /**
     * @member {Object} SuperMap.LevelRenderer.Tool.Areal.prototype._ctx
     * @description Cavans2D æ¸²æä¸ä¸æ
     */

    this._ctx = null;
    /**
     * @member {Object} SuperMap.LevelRenderer.Tool.Areal.prototype._textWidthCache
     * @description ææ¬å®½åº¦ç¼å­
     */

    this._textWidthCache = {};
    /**
     * @member {Object} SuperMap.LevelRenderer.Tool.Areal.prototype._textHeightCache
     * @description ææ¬é«åº¦ç¼å­
     */

    this._textHeightCache = {};
    /**
     * @member {number} SuperMap.LevelRenderer.Tool.Areal.prototype._textWidthCacheCounter
     * @description ææ¬å®½åº¦ç¼å­æ°é
     */

    this._textWidthCacheCounter = 0;
    /**
     * @member {number} SuperMap.LevelRenderer.Tool.Areal.prototype._textHeightCacheCounter
     * @description ææ¬é«åº¦ç¼å­æ°é
     */

    this._textHeightCacheCounter = 0;
    /**
     * @member {number} SuperMap.LevelRenderer.Tool.Areal.prototype.TEXT_CACHE_MAX
     * @description ææ¬æå¤§ç¼å­æ°é
     */

    this.TEXT_CACHE_MAX = 5000;
    /**
     * @member {number} SuperMap.LevelRenderer.Tool.Areal.prototype.PI2
     * @description 2*PI çå¼
     */

    this.PI2 = Math.PI * 2;
    /**
     * @member {Array} SuperMap.LevelRenderer.Tool.Areal.prototype.roots
     * @description ä¸´æ¶æ°ç»
     */

    this.roots = [-1, -1, -1];
    /**
     * @member {Array} SuperMap.LevelRenderer.Tool.Areal.prototype.extrema
     * @description ä¸´æ¶æ°ç»
     */

    this.extrema = [-1, -1];
    this.CLASS_NAME = "SuperMap.LevelRenderer.Tool.Area";
  }
  /**
   * @function SuperMap.LevelRenderer.Tool.Areal.prototype.normalizeRadian
   * @description å¼§åº¦æ ååå½æ°ã
   * @param {number} angle - å¼§åº¦å¼ã
   * @returns {number} æ åååçå¼§åº¦å¼ã
   */


  Area_createClass(Area, [{
    key: "normalizeRadian",
    value: function normalizeRadian(angle) {
      angle %= this.PI2;

      if (angle < 0) {
        angle += this.PI2;
      }

      return angle;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype.isInside
     * @description åå«å¤æ­ã
     * @param {Object} shape - å¾å½¢ã
     * @param {number} area - ç®æ åºåã
     * @param {number} x - æ¨ªåæ ã
     * @param {number} y - çºµåæ ã
     * @returns {boolean} å¾å½¢æ¯å¦åå«é¼ æ ä½ç½®ã
     */

  }, {
    key: "isInside",
    value: function isInside(shape, area, x, y) {
      if (!area || !shape) {
        // æ åæ°æä¸æ¯æç±»å
        return false;
      }

      var zoneType = shape.type;
      this._ctx = this._ctx || this.util.getContext(); // æªå®ç°æä¸å¯ç¨æ¶åæ°å­¦è¿ç®ï¼ä¸»è¦æ¯lineï¼brokenLineï¼ring

      var _mathReturn = this._mathMethod(shape, area, x, y);

      if (typeof _mathReturn != 'undefined') {
        return _mathReturn;
      }

      if (shape.buildPath && this._ctx.isPointInPath) {
        return this._buildPathMethod(shape, this._ctx, area, x, y);
      } // ä¸é¢çæ¹æ³é½è¡ä¸éæ¶


      switch (zoneType) {
        case 'ellipse': // Todoï¼ä¸ç²¾ç¡®

        case 'smicellipse':
          // Todoï¼ä¸ç²¾ç¡®
          return true;
        // æè½®æ²çº¿  ä¸åç¡®

        case 'trochoid':
          var _r = area.location == 'out' ? area.r1 + area.r2 + area.d : area.r1 - area.r2 + area.d;

          return this.isInsideCircle(area, x, y, _r);
        // ç«ç°çº¿ ä¸åç¡®

        case 'rose':
          return this.isInsideCircle(area, x, y, area.maxr);
        // è·¯å¾ï¼æ¤­åï¼æ²çº¿ç­-----------------13

        default:
          return false;
        // Todoï¼æä¸æ¯æ
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype._mathMethod
     * @description åå«å¤æ­ãç¨æ°å­¦æ¹æ³å¤æ­ï¼ä¸ä¸ªæ¹æ³ä¸­æå¿«ï¼ä½æ¯æ¯æçshapeå°ã
     * @param {Object} shape - å¾å½¢ã
     * @param {number} area - ç®æ åºåã
     * @param {number} x - æ¨ªåæ ã
     * @param {number} y - çºµåæ ã
     * @returns {boolean} å¾å½¢æ¯å¦åå«é¼ æ ä½ç½®ï¼trueè¡¨ç¤ºåæ å¤å¨å¾å½¢ä¸­ã
     */

  }, {
    key: "_mathMethod",
    value: function _mathMethod(shape, area, x, y) {
      var zoneType = shape.type; // å¨ç©å½¢ååé¨åå¾å½¢éè¦è¿ä¸æ­¥å¤æ­

      switch (zoneType) {
        // è´å¡å°æ²çº¿
        case 'bezier-curve':
          if (typeof area.cpX2 === 'undefined') {
            return this.isInsideQuadraticStroke(area.xStart, area.yStart, area.cpX1, area.cpY1, area.xEnd, area.yEnd, area.lineWidth, x, y);
          }

          return this.isInsideCubicStroke(area.xStart, area.yStart, area.cpX1, area.cpY1, area.cpX2, area.cpY2, area.xEnd, area.yEnd, area.lineWidth, x, y);
        // çº¿

        case 'line':
          return this.isInsideLine(area.xStart, area.yStart, area.xEnd, area.yEnd, area.lineWidth, x, y);
        // æçº¿

        case 'broken-line':
          return this.isInsideBrokenLine(area.pointList, area.lineWidth, x, y);
        // æ©å±æçº¿

        case 'smicbroken-line':
          {
            // SMIC-ä¿®æ¹ - start
            var icX = x;
            var icY = y;

            if (shape.refOriginalPosition) {
              icX = x - shape.refOriginalPosition[0];
              icY = y - shape.refOriginalPosition[1];
            }

            return this.isInsideBrokenLine(area.pointList, area.lineWidth, icX, icY);
          }
        //åå§ä»£ç ï¼
        //      return isInsideBrokenLine(
        //          area.pointList, area.lineWidth, x, y
        //      );
        // SMIC-ä¿®æ¹ - end
        // åç¯

        case 'ring':
          return this.isInsideRing(area.x, area.y, area.r0, area.r, x, y);

        case 'smicring':
          {
            var areaX = area.x;
            var areaY = area.y;

            if (shape.refOriginalPosition) {
              areaX = area.x + shape.refOriginalPosition[0];
              areaY = area.y + shape.refOriginalPosition[1];
            }

            return this.isInsideRing(areaX, areaY, area.r0, area.r, x, y);
          }
        // åå½¢

        case 'circle':
          return this.isInsideCircle(area.x, area.y, area.r, x, y);
        // æ©å±-ç¹

        case 'smicpoint':
          {
            // SMIC-ä¿®æ¹ - start
            var _icX = x;
            var _icY = y;

            if (shape.refOriginalPosition) {
              _icX = x - shape.refOriginalPosition[0];
              _icY = y - shape.refOriginalPosition[1];
            }

            return this.isInsideCircle(area.x, area.y, area.r, _icX, _icY);
          }
        //åå§ä»£ç ï¼
        //  æ 
        // SMIC-ä¿®æ¹ - end
        // æå½¢

        case 'sector':
          {
            var startAngle = area.startAngle * Math.PI / 180;
            var endAngle = area.endAngle * Math.PI / 180;

            if (!area.clockWise) {
              startAngle = -startAngle;
              endAngle = -endAngle;
            }

            return this.isInsideSector(area.x, area.y, area.r0, area.r, startAngle, endAngle, !area.clockWise, x, y);
          }
        //åå§ä»£ç ï¼
        //  æ 
        // SMIC-å¢å  - end
        // æå½¢

        case 'smicsector':
          {
            var _startAngle = area.startAngle * Math.PI / 180;

            var _endAngle = area.endAngle * Math.PI / 180;

            if (!area.clockWise) {
              _startAngle = -_startAngle;
              _endAngle = -_endAngle;
            }

            var _areaX = area.x;
            var _areaY = area.y;

            if (shape.refOriginalPosition) {
              _areaX = area.x + shape.refOriginalPosition[0];
              _areaY = area.y + shape.refOriginalPosition[1];
            }

            return this.isInsideSector(_areaX, _areaY, area.r0, area.r, _startAngle, _endAngle, !area.clockWise, x, y);
          }
        // å¤è¾¹å½¢

        case 'path':
          return this.isInsidePath(area.pathArray, Math.max(area.lineWidth, 5), area.brushType, x, y);

        case 'polygon':
        case 'star':
        case 'smicstar':
        case 'isogon':
        case 'smicisogon':
          return this.isInsidePolygon(area.pointList, x, y);
        // æ©å±å¤è¾¹å½¢

        case 'smicpolygon':
          {
            // SMIC-ä¿®æ¹ - start
            var _icX2 = x;
            var _icY2 = y;

            if (shape.refOriginalPosition) {
              _icX2 = x - shape.refOriginalPosition[0];
              _icY2 = y - shape.refOriginalPosition[1];
            } //å²æ´é¢


            if (shape.holePolygonPointLists && shape.holePolygonPointLists.length > 0) {
              var isOnBase = this.isInsidePolygon(area.pointList, _icX2, _icY2); // éåå²æ´å­é¢

              var holePLS = shape.holePolygonPointLists;
              var isOnHole = false;

              for (var i = 0, holePLSen = holePLS.length; i < holePLSen; i++) {
                var holePL = holePLS[i];
                var isOnSubHole = this.isInsidePolygon(holePL, _icX2, _icY2);

                if (isOnSubHole === true) {
                  isOnHole = true;
                }
              } // æè·å¤æ­


              return isOnBase === true && isOnHole === false;
            } else {
              return this.isInsidePolygon(area.pointList, _icX2, _icY2);
            }
          }
        // åå§ä»£ç ï¼
        //  æ 
        // SMIC-ä¿®æ¹ - end
        // ææ¬

        case 'text':
          var rect = area.__rect || shape.getRect(area);
          return this.isInsideRect(rect.x, rect.y, rect.width, rect.height, x, y);
        // æ©å±ææ¬

        case 'smictext':
          //ç¨ææ¬èæ¯ç©å½¢å¤æ­
          var textBg = shape.getTextBackground(area);
          return this.isInsidePolygon(textBg, x, y);
        //åå§ä»£ç ï¼
        //  æ 
        // SMIC-ä¿®æ¹ - end
        // ç©å½¢

        case 'rectangle':
        case 'image':
          // å¾ç
          return this.isInsideRect(area.x, area.y, area.width, area.height, x, y);

        case 'smicimage':
          {
            var _areaX2 = area.x;
            var _areaY2 = area.y;

            if (shape.refOriginalPosition) {
              _areaX2 = area.x + shape.refOriginalPosition[0];
              _areaY2 = area.y + shape.refOriginalPosition[1];
            }

            return this.isInsideRect(_areaX2, _areaY2, area.width, area.height, x, y);
          }
        //// æ©å±ç©å½¢
        //case 'smicpolygon':
        //    // SMIC-ä¿®æ¹ - start
        //    var icX = x;
        //    var icY = y;
        //    if(shape.refOriginalPosition) {
        //        icX = x - shape.refOriginalPosition[0];
        //        icY = y - shape.refOriginalPosition[1];
        //    }
        //    return this.isInsideRect(
        //        area.x, area.y, area.width, area.height, icX, icY
        //    );
        //åå§ä»£ç ï¼
        //  æ 
        // SMIC-ä¿®æ¹ - end
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype._buildPathMethod
     * @description åå«å¤æ­ãéè¿buildPathæ¹æ³æ¥å¤æ­ï¼ä¸ä¸ªæ¹æ³ä¸­è¾å¿«ï¼ä½æ¯ä¸æ¯æçº¿æ¡ç±»åç shapeã
     * @param {Object} shape - å¾å½¢ã
     * @param {Object} context - ä¸ä¸æã
     * @param {number} area - ç®æ åºåã
     * @param {number} x - æ¨ªåæ ã
     * @param {number} y - çºµåæ ã
     * @returns {boolean} å¾å½¢æ¯å¦åå«é¼ æ ä½ç½®ï¼trueè¡¨ç¤ºåæ å¤å¨å¾å½¢ä¸­ã
     */

  }, {
    key: "_buildPathMethod",
    value: function _buildPathMethod(shape, context, area, x, y) {
      // å¾å½¢ç±»å®ç°è·¯å¾åå»ºäºåç¨ç±»çpath
      context.beginPath();
      shape.buildPath(context, area);
      context.closePath();
      return context.isPointInPath(x, y);
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype.isOutside
     * @description å¾å½¢æ¯å¦ä¸åå«é¼ æ ä½ç½®ã
     * @param {Object} shape - å¾å½¢ã
     * @param {number} area - ç®æ åºåã
     * @param {number} x - æ¨ªåæ ã
     * @param {number} y - çºµåæ ã
     * @returns {boolean} å¾å½¢æ¯å¦ä¸åå«é¼ æ ä½ç½®, trueè¡¨ç¤ºåæ å¤å¨å¾å½¢å¤ã
     */

  }, {
    key: "isOutside",
    value: function isOutside(shape, area, x, y) {
      return !this.isInside(shape, area, x, y);
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype.isInsideLine
     * @description çº¿æ®µåå«å¤æ­ã
     * @param {number} x0 - çº¿èµ·å§ç¹æ¨ªåæ ã
     * @param {number} y0 - çº¿èµ·å§ç¹çºµåæ ã
     * @param {number} x1 - çº¿ç»ç¹æ¨ªåæ ã
     * @param {number} y1 - çº¿ç»ç¹çºµåæ ã
     * @param {number} lineWidth - çº¿å®½ã
     * @param {number} x - é¼ æ ä½ç½®æ¨ªåæ ã
     * @param {number} y - é¼ æ ä½ç½®çºµåæ ã
     * @returns {boolean} å¾å½¢æ¯å¦åå«é¼ æ ä½ç½®ï¼trueè¡¨ç¤ºåæ å¤å¨å¾å½¢åã
     */

  }, {
    key: "isInsideLine",
    value: function isInsideLine(x0, y0, x1, y1, lineWidth, x, y) {
      if (lineWidth === 0) {
        return false;
      }

      var _l = Math.max(lineWidth, 5);

      var _a = 0;
      var _b = 0; // Quick reject

      if (y > y0 + _l && y > y1 + _l || y < y0 - _l && y < y1 - _l || x > x0 + _l && x > x1 + _l || x < x0 - _l && x < x1 - _l) {
        return false;
      }

      if (x0 !== x1) {
        _a = (y0 - y1) / (x0 - x1);
        _b = (x0 * y1 - x1 * y0) / (x0 - x1);
      } else {
        return Math.abs(x - x0) <= _l / 2;
      }

      var tmp = _a * x - y + _b;

      var _s = tmp * tmp / (_a * _a + 1);

      return _s <= _l / 2 * _l / 2;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype.isInsideCubicStroke
     * @description ä¸æ¬¡è´å¡å°æ²çº¿æè¾¹åå«å¤æ­ã
     * @param {number} x0 - ç¹1æ¨ªåæ ã
     * @param {number} y0 - ç¹1çºµåæ ã
     * @param {number} x1 - ç¹2æ¨ªåæ ã
     * @param {number} y1 - ç¹2çºµåæ ã
     * @param {number} x2 - ç¹3çºµåæ ã
     * @param {number} y2 - ç¹3çºµåæ ã
     * @param {number} lineWidth - çº¿å®½ã
     * @param {number} x - é¼ æ ä½ç½®æ¨ªåæ ã
     * @param {number} y - é¼ æ ä½ç½®çºµåæ ã
     * @returns {boolean} å¾å½¢æ¯å¦åå«é¼ æ ä½ç½®, trueè¡¨ç¤ºåæ å¤å¨å¾å½¢åã
     */

  }, {
    key: "isInsideCubicStroke",
    value: function isInsideCubicStroke(x0, y0, x1, y1, x2, y2, x3, y3, lineWidth, x, y) {
      if (lineWidth === 0) {
        return false;
      }

      var _l = Math.max(lineWidth, 5); // Quick reject


      if (y > y0 + _l && y > y1 + _l && y > y2 + _l && y > y3 + _l || y < y0 - _l && y < y1 - _l && y < y2 - _l && y < y3 - _l || x > x0 + _l && x > x1 + _l && x > x2 + _l && x > x3 + _l || x < x0 - _l && x < x1 - _l && x < x2 - _l && x < x3 - _l) {
        return false;
      }

      var d = this.curve.cubicProjectPoint(x0, y0, x1, y1, x2, y2, x3, y3, x, y, null);
      return d <= _l / 2;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype.isInsideQuadraticStroke
     * @description äºæ¬¡è´å¡å°æ²çº¿æè¾¹åå«å¤æ­ã
     * @param {number} x0 - ç¹1æ¨ªåæ ã
     * @param {number} y0 - ç¹1çºµåæ ã
     * @param {number} x1 - ç¹2æ¨ªåæ ã
     * @param {number} y1 - ç¹2çºµåæ ã
     * @param {number} x2 - ç¹3çºµåæ ã
     * @param {number} y2 - ç¹3çºµåæ ã
     * @param {number} lineWidth - çº¿å®½ã
     * @param {number} x - é¼ æ ä½ç½®æ¨ªåæ ã
     * @param {number} y - é¼ æ ä½ç½®çºµåæ ã
     * @returns {boolean} å¾å½¢æ¯å¦åå«é¼ æ ä½ç½®, trueè¡¨ç¤ºåæ å¤å¨å¾å½¢åã
     */

  }, {
    key: "isInsideQuadraticStroke",
    value: function isInsideQuadraticStroke(x0, y0, x1, y1, x2, y2, lineWidth, x, y) {
      if (lineWidth === 0) {
        return false;
      }

      var _l = Math.max(lineWidth, 5); // Quick reject


      if (y > y0 + _l && y > y1 + _l && y > y2 + _l || y < y0 - _l && y < y1 - _l && y < y2 - _l || x > x0 + _l && x > x1 + _l && x > x2 + _l || x < x0 - _l && x < x1 - _l && x < x2 - _l) {
        return false;
      }

      var d = this.curve.quadraticProjectPoint(x0, y0, x1, y1, x2, y2, x, y, null);
      return d <= _l / 2;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype.isInsideArcStroke
     * @description åå¼§æè¾¹åå«å¤æ­ã
     * @param {number} cx - åå¿æ¨ªåæ ã
     * @param {number} cy - åå¿çºµåæ ã
     * @param {number} r - ååå¾ã
     * @param {number} startAngle - èµ·å§è§åº¦ã
     * @param {number} endAngle - ç»æ­¢è§åº¦ã
     * @param {number} anticlockwise - é¡ºæ¶éè¿æ¯éæ¶éã
     * @param {number} lineWidth - çº¿å®½ã
     * @param {number} x - é¼ æ ä½ç½®æ¨ªåæ ã
     * @param {number} y - é¼ æ ä½ç½®çºµåæ ã
     * @returns {boolean} å¾å½¢æ¯å¦åå«é¼ æ ä½ç½®, trueè¡¨ç¤ºåæ å¤å¨å¾å½¢åã
     */

  }, {
    key: "isInsideArcStroke",
    value: function isInsideArcStroke(cx, cy, r, startAngle, endAngle, anticlockwise, lineWidth, x, y) {
      var PI2 = this.PI2;

      if (lineWidth === 0) {
        return false;
      }

      var _l = Math.max(lineWidth, 5);

      x -= cx;
      y -= cy;
      var d = Math.sqrt(x * x + y * y);

      if (d - _l > r || d + _l < r) {
        return false;
      }

      if (Math.abs(startAngle - endAngle) >= PI2) {
        // Is a circle
        return true;
      }

      if (anticlockwise) {
        var tmp = startAngle;
        startAngle = this.normalizeRadian(endAngle);
        endAngle = this.normalizeRadian(tmp);
      } else {
        startAngle = this.normalizeRadian(startAngle);
        endAngle = this.normalizeRadian(endAngle);
      }

      if (startAngle > endAngle) {
        endAngle += PI2;
      }

      var angle = Math.atan2(y, x);

      if (angle < 0) {
        angle += PI2;
      }

      return angle >= startAngle && angle <= endAngle || angle + PI2 >= startAngle && angle + PI2 <= endAngle;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype.isInsideBrokenLine
     * @description å¾å½¢ BrokenLine æ¯å¦åå«é¼ æ ä½ç½®, trueè¡¨ç¤ºåæ å¤å¨å¾å½¢åã
     * @param {Array} points - æ²çº¿ç¹å¯¹è±¡ã
     * @param {number} lineWidth - çº¿å®½ã
     * @param {number} x - é¼ æ ä½ç½®æ¨ªåæ ã
     * @param {number} y - é¼ æ ä½ç½®çºµåæ ã
     * @returns {boolean} å¾å½¢æ¯å¦åå«é¼ æ ä½ç½®, trueè¡¨ç¤ºåæ å¤å¨å¾å½¢åã
     */

  }, {
    key: "isInsideBrokenLine",
    value: function isInsideBrokenLine(points, lineWidth, x, y) {
      var _lineWidth = Math.max(lineWidth, 10);

      for (var i = 0, l = points.length - 1; i < l; i++) {
        var x0 = points[i][0];
        var y0 = points[i][1];
        var x1 = points[i + 1][0];
        var y1 = points[i + 1][1];

        if (this.isInsideLine(x0, y0, x1, y1, _lineWidth, x, y)) {
          return true;
        }
      }

      return false;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype.isInsideRing
     * @description  å¾å½¢ Ring æ¯å¦åå«é¼ æ ä½ç½®, trueè¡¨ç¤ºåæ å¤å¨å¾å½¢åã
     * @returns {boolean} å¾å½¢æ¯å¦åå«é¼ æ ä½ç½®, trueè¡¨ç¤ºåæ å¤å¨å¾å½¢åã
     */

  }, {
    key: "isInsideRing",
    value: function isInsideRing(cx, cy, r0, r, x, y) {
      var d = (x - cx) * (x - cx) + (y - cy) * (y - cy);
      return d < r * r && d > r0 * r0;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype.isInsideRect
     * @description å¾å½¢ Rect æ¯å¦åå«é¼ æ ä½ç½®, trueè¡¨ç¤ºåæ å¤å¨å¾å½¢åã
     * @returns {boolean} å¾å½¢æ¯å¦åå«é¼ æ ä½ç½®, trueè¡¨ç¤ºåæ å¤å¨å¾å½¢åã
     */

  }, {
    key: "isInsideRect",
    value: function isInsideRect(x0, y0, width, height, x, y) {
      return x >= x0 && x <= x0 + width && y >= y0 && y <= y0 + height;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype.isInsideCircle
     * @description å¾å½¢ Circle æ¯å¦åå«é¼ æ ä½ç½®, trueè¡¨ç¤ºåæ å¤å¨å¾å½¢åã
     * @returns {boolean} å¾å½¢æ¯å¦åå«é¼ æ ä½ç½®, trueè¡¨ç¤ºåæ å¤å¨å¾å½¢åã
     */

  }, {
    key: "isInsideCircle",
    value: function isInsideCircle(x0, y0, r, x, y) {
      return (x - x0) * (x - x0) + (y - y0) * (y - y0) < r * r;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype.isInsideSector
     * @description å¾å½¢ Sector æ¯å¦åå«é¼ æ ä½ç½®, trueè¡¨ç¤ºåæ å¤å¨å¾å½¢åã
     * @returns {boolean} å¾å½¢æ¯å¦åå«é¼ æ ä½ç½®, trueè¡¨ç¤ºåæ å¤å¨å¾å½¢åã
     */

  }, {
    key: "isInsideSector",
    value: function isInsideSector(cx, cy, r0, r, startAngle, endAngle, anticlockwise, x, y) {
      return this.isInsideArcStroke(cx, cy, (r0 + r) / 2, startAngle, endAngle, anticlockwise, r - r0, x, y);
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype.isInsidePolygon
     * @description å¾å½¢ Polygon æ¯å¦åå«é¼ æ ä½ç½®, trueè¡¨ç¤ºåæ å¤å¨å¾å½¢åãä¸ canvas ä¸æ ·éç¨ non-zero winding rule
     * @returns {boolean} å¾å½¢æ¯å¦åå«é¼ æ ä½ç½®, trueè¡¨ç¤ºåæ å¤å¨å¾å½¢åã
     */

  }, {
    key: "isInsidePolygon",
    value: function isInsidePolygon(points, x, y) {
      var N = points.length;
      var w = 0;

      for (var i = 0, j = N - 1; i < N; i++) {
        var x0 = points[j][0];
        var y0 = points[j][1];
        var x1 = points[i][0];
        var y1 = points[i][1];
        w += this.windingLine(x0, y0, x1, y1, x, y);
        j = i;
      }

      return w !== 0;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype.windingLine
     */

  }, {
    key: "windingLine",
    value: function windingLine(x0, y0, x1, y1, x, y) {
      if (y > y0 && y > y1 || y < y0 && y < y1) {
        return 0;
      }

      if (y1 == y0) {
        return 0;
      }

      var dir = y1 < y0 ? 1 : -1;
      var t = (y - y0) / (y1 - y0);
      var x_ = t * (x1 - x0) + x0;
      return x_ > x ? dir : 0;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype.swapExtrema
     */

  }, {
    key: "swapExtrema",
    value: function swapExtrema() {
      var tmp = this.extrema[0];
      this.extrema[0] = this.extrema[1];
      this.extrema[1] = tmp;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype.windingCubic
     */

  }, {
    key: "windingCubic",
    value: function windingCubic(x0, y0, x1, y1, x2, y2, x3, y3, x, y) {
      var curve = this.curve;
      var roots = this.roots;
      var extrema = this.extrema; // Quick reject

      if (y > y0 && y > y1 && y > y2 && y > y3 || y < y0 && y < y1 && y < y2 && y < y3) {
        return 0;
      }

      var nRoots = curve.cubicRootAt(y0, y1, y2, y3, y, roots);

      if (nRoots === 0) {
        return 0;
      } else {
        var w = 0;
        var nExtrema = -1;
        var y0_, y1_;

        for (var i = 0; i < nRoots; i++) {
          var t = roots[i];
          var x_ = curve.cubicAt(x0, x1, x2, x3, t);

          if (x_ < x) {
            // Quick reject
            continue;
          }

          if (nExtrema < 0) {
            nExtrema = curve.cubicExtrema(y0, y1, y2, y3, extrema);

            if (extrema[1] < extrema[0] && nExtrema > 1) {
              this.swapExtrema();
            }

            y0_ = curve.cubicAt(y0, y1, y2, y3, extrema[0]);

            if (nExtrema > 1) {
              y1_ = curve.cubicAt(y0, y1, y2, y3, extrema[1]);
            }
          }

          if (nExtrema == 2) {
            // åæä¸æ®µåè°å½æ°
            if (t < extrema[0]) {
              w += y0_ < y0 ? 1 : -1;
            } else if (t < extrema[1]) {
              w += y1_ < y0_ ? 1 : -1;
            } else {
              w += y3 < y1_ ? 1 : -1;
            }
          } else {
            // åæä¸¤æ®µåè°å½æ°
            if (t < extrema[0]) {
              w += y0_ < y0 ? 1 : -1;
            } else {
              w += y3 < y0_ ? 1 : -1;
            }
          }
        }

        return w;
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype.windingQuadratic
     */

  }, {
    key: "windingQuadratic",
    value: function windingQuadratic(x0, y0, x1, y1, x2, y2, x, y) {
      var curve = this.curve;
      var roots = this.roots; // Quick reject

      if (y > y0 && y > y1 && y > y2 || y < y0 && y < y1 && y < y2) {
        return 0;
      }

      var nRoots = curve.quadraticRootAt(y0, y1, y2, y, roots);

      if (nRoots === 0) {
        return 0;
      } else {
        var t = curve.quadraticExtremum(y0, y1, y2);

        if (t >= 0 && t <= 1) {
          var w = 0;
          var y_ = curve.quadraticAt(y0, y1, y2, t);

          for (var i = 0; i < nRoots; i++) {
            var x_ = curve.quadraticAt(x0, x1, x2, roots[i]);

            if (x_ > x) {
              continue;
            }

            if (roots[i] < t) {
              w += y_ < y0 ? 1 : -1;
            } else {
              w += y2 < y_ ? 1 : -1;
            }
          }

          return w;
        } else {
          var _x_ = curve.quadraticAt(x0, x1, x2, roots[0]);

          if (_x_ > x) {
            return 0;
          }

          return y2 < y0 ? 1 : -1;
        }
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype.windingArc
     * // TODO   Arc æè½¬
     */

  }, {
    key: "windingArc",
    value: function windingArc(cx, cy, r, startAngle, endAngle, anticlockwise, x, y) {
      var roots = this.roots;
      var PI2 = this.PI2;
      y -= cy;

      if (y > r || y < -r) {
        return 0;
      }

      var tmp = Math.sqrt(r * r - y * y);
      roots[0] = -tmp;
      roots[1] = tmp;

      if (Math.abs(startAngle - endAngle) >= PI2) {
        // Is a circle
        startAngle = 0;
        endAngle = PI2;
        var dir = anticlockwise ? 1 : -1;

        if (x >= roots[0] + cx && x <= roots[1] + cx) {
          return dir;
        } else {
          return 0;
        }
      }

      if (anticlockwise) {
        var _tmp = startAngle;
        startAngle = this.normalizeRadian(endAngle);
        endAngle = this.normalizeRadian(_tmp);
      } else {
        startAngle = this.normalizeRadian(startAngle);
        endAngle = this.normalizeRadian(endAngle);
      }

      if (startAngle > endAngle) {
        endAngle += PI2;
      }

      var w = 0;

      for (var i = 0; i < 2; i++) {
        var x_ = roots[i];

        if (x_ + cx > x) {
          var angle = Math.atan2(y, x_);

          var _dir = anticlockwise ? 1 : -1;

          if (angle < 0) {
            angle = PI2 + angle;
          }

          if (angle >= startAngle && angle <= endAngle || angle + PI2 >= startAngle && angle + PI2 <= endAngle) {
            if (angle > Math.PI / 2 && angle < Math.PI * 1.5) {
              _dir = -_dir;
            }

            w += _dir;
          }
        }
      }

      return w;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype.isInsidePath
     * @description ä¸ canvas ä¸æ ·éç¨ non-zero winding rule
     */

  }, {
    key: "isInsidePath",
    value: function isInsidePath(pathArray, lineWidth, brushType, x, y) {
      var w = 0;
      var xi = 0;
      var yi = 0;
      var x0 = 0;
      var y0 = 0;
      var beginSubpath = true;
      var firstCmd = true;
      brushType = brushType || 'fill';
      var hasStroke = brushType === 'stroke' || brushType === 'both';
      var hasFill = brushType === 'fill' || brushType === 'both'; // var roots = [-1, -1, -1];

      for (var i = 0; i < pathArray.length; i++) {
        var seg = pathArray[i];
        var p = seg.points; // Begin a new subpath

        if (beginSubpath || seg.command === 'M') {
          if (i > 0) {
            // Close previous subpath
            if (hasFill) {
              w += this.windingLine(xi, yi, x0, y0, x, y);
            }

            if (w !== 0) {
              return true;
            }
          }

          x0 = p[p.length - 2];
          y0 = p[p.length - 1];
          beginSubpath = false;

          if (firstCmd && seg.command !== 'A') {
            // å¦æç¬¬ä¸ä¸ªå½ä»¤ä¸æ¯M, æ¯lineTo, bezierCurveTo
            // ç­ç»å¶å½ä»¤çè¯ï¼æ¯ä¼ä»è¯¥ç»å¶çèµ·ç¹å¼å§ç®ç
            // Arc ä¼å¨ä¹åååç¬å¤çæä»¥è¿éå¿½ç¥
            firstCmd = false;
            xi = x0;
            yi = y0;
          }
        }

        switch (seg.command) {
          case 'M':
            xi = p[0];
            yi = p[1];
            break;

          case 'L':
            if (hasStroke) {
              if (this.isInsideLine(xi, yi, p[0], p[1], lineWidth, x, y)) {
                return true;
              }
            }

            if (hasFill) {
              w += this.windingLine(xi, yi, p[0], p[1], x, y);
            }

            xi = p[0];
            yi = p[1];
            break;

          case 'C':
            if (hasStroke) {
              if (this.isInsideCubicStroke(xi, yi, p[0], p[1], p[2], p[3], p[4], p[5], lineWidth, x, y)) {
                return true;
              }
            }

            if (hasFill) {
              w += this.windingCubic(xi, yi, p[0], p[1], p[2], p[3], p[4], p[5], x, y);
            }

            xi = p[4];
            yi = p[5];
            break;

          case 'Q':
            if (hasStroke) {
              if (this.isInsideQuadraticStroke(xi, yi, p[0], p[1], p[2], p[3], lineWidth, x, y)) {
                return true;
              }
            }

            if (hasFill) {
              w += this.windingQuadratic(xi, yi, p[0], p[1], p[2], p[3], x, y);
            }

            xi = p[2];
            yi = p[3];
            break;

          case 'A':
            // TODO Arc æè½¬
            // TODO Arc å¤æ­çå¼éæ¯è¾å¤§
            var cx = p[0];
            var cy = p[1];
            var rx = p[2];
            var ry = p[3];
            var theta = p[4];
            var dTheta = p[5];
            var x1 = Math.cos(theta) * rx + cx;
            var y1 = Math.sin(theta) * ry + cy; // ä¸æ¯ç´æ¥ä½¿ç¨ arc å½ä»¤

            if (!firstCmd) {
              w += this.windingLine(xi, yi, x1, y1);
            } else {
              firstCmd = false; // ç¬¬ä¸ä¸ªå½ä»¤èµ·ç¹è¿æªå®ä¹

              x0 = x1;
              y0 = y1;
            } // zr ä½¿ç¨scaleæ¥æ¨¡ææ¤­å, è¿éä¹å¯¹xåä¸å®çç¼©æ¾


            var _x = (x - cx) * ry / rx + cx;

            if (hasStroke) {
              if (this.isInsideArcStroke(cx, cy, ry, theta, theta + dTheta, 1 - p[7], lineWidth, _x, y)) {
                return true;
              }
            }

            if (hasFill) {
              w += this.windingArc(cx, cy, ry, theta, theta + dTheta, 1 - p[7], _x, y);
            }

            xi = Math.cos(theta + dTheta) * rx + cx;
            yi = Math.sin(theta + dTheta) * ry + cy;
            break;

          case 'z':
            if (hasStroke) {
              if (this.isInsideLine(xi, yi, x0, y0, lineWidth, x, y)) {
                return true;
              }
            }

            beginSubpath = true;
            break;
        }
      }

      if (hasFill) {
        w += this.windingLine(xi, yi, x0, y0, x, y);
      }

      return w !== 0;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype.getTextWidth
     * @description æµç®å¤è¡ææ¬å®½åº¦
     */

  }, {
    key: "getTextWidth",
    value: function getTextWidth(text, textFont) {
      var key = text + ':' + textFont;

      if (this._textWidthCache[key]) {
        return this._textWidthCache[key];
      }

      this._ctx = this._ctx || this.util.getContext();

      this._ctx.save();

      if (textFont) {
        this._ctx.font = textFont;
      }

      text = (text + '').split('\n');
      var width = 0;

      for (var i = 0, l = text.length; i < l; i++) {
        width = Math.max(this._ctx.measureText(text[i]).width, width);
      }

      this._ctx.restore();

      this._textWidthCache[key] = width;

      if (++this._textWidthCacheCounter > this.TEXT_CACHE_MAX) {
        // åå­éæ¾
        this._textWidthCacheCounter = 0;
        this._textWidthCache = {};
      }

      return width;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Areal.prototype.getTextHeight
     * @description æµç®å¤è¡ææ¬é«åº¦
     */

  }, {
    key: "getTextHeight",
    value: function getTextHeight(text, textFont) {
      var key = text + ':' + textFont;

      if (this._textHeightCache[key]) {
        return this._textHeightCache[key];
      }

      this._ctx = this._ctx || this.util.getContext();

      this._ctx.save();

      if (textFont) {
        this._ctx.font = textFont;
      }

      text = (text + '').split('\n'); // æ¯è¾ç²æ´
      //var height = (this._ctx.measureText('å½').width + 2) * text.length;  //æåä¸æ¯æä¸­æï¼æ¿æ¢æ

      var height = (this._ctx.measureText('ZH').width + 2) * text.length;

      this._ctx.restore();

      this._textHeightCache[key] = height;

      if (++this._textHeightCacheCounter > this.TEXT_CACHE_MAX) {
        // åå­éæ¾
        this._textHeightCacheCounter = 0;
        this._textHeightCache = {};
      }

      return height;
    }
  }]);

  return Area;
}();
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/ComputeBoundingBox.js
function ComputeBoundingBox_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ComputeBoundingBox_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ComputeBoundingBox_createClass(Constructor, protoProps, staticProps) { if (protoProps) ComputeBoundingBox_defineProperties(Constructor.prototype, protoProps); if (staticProps) ComputeBoundingBox_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class  SuperMap.LevelRenderer.Tool.ComputeBoundingBox
 * @category Visualization Theme
 * @classdesc LevelRenderer å·¥å·-å¾å½¢ Bounds è®¡ç®
 * @private 
 */

var ComputeBoundingBox = /*#__PURE__*/function () {
  /**
   * @function SuperMap.LevelRenderer.Tool.ComputeBoundingBox.prototype.constructor
   * @description æé å½æ°ã
   */
  function ComputeBoundingBox() {
    ComputeBoundingBox_classCallCheck(this, ComputeBoundingBox);

    if (arguments.length === 3) {
      this.computeBoundingBox(arguments);
    }

    this.CLASS_NAME = "SuperMap.LevelRenderer.Tool.ComputeBoundingBox";
  }
  /**
   * @function SuperMap.LevelRenderer.Tool.ComputeBoundingBox.prototype.computeBoundingBox
   * @description ä»é¡¶ç¹æ°ç»ä¸­è®¡ç®åºæå°åå´çï¼åå¥'min'å'max'ä¸­ã
   * @param {Array.<Object>} points - é¡¶ç¹æ°ç»ã
   * @param {Array} min - æå°
   * @param {Array} max - æå¤§
   */


  ComputeBoundingBox_createClass(ComputeBoundingBox, [{
    key: "computeBoundingBox",
    value: function computeBoundingBox(points, min, max) {
      if (points.length === 0) {
        return;
      }

      var left = points[0][0];
      var right = points[0][0];
      var top = points[0][1];
      var bottom = points[0][1];

      for (var i = 1; i < points.length; i++) {
        var p = points[i];

        if (p[0] < left) {
          left = p[0];
        }

        if (p[0] > right) {
          right = p[0];
        }

        if (p[1] < top) {
          top = p[1];
        }

        if (p[1] > bottom) {
          bottom = p[1];
        }
      }

      min[0] = left;
      min[1] = top;
      max[0] = right;
      max[1] = bottom;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.ComputeBoundingBox.prototype.cubeBezier
     * @description ä»ä¸é¶è´å¡å°æ²çº¿(p0, p1, p2, p3)ä¸­è®¡ç®åºæå°åå´çï¼åå¥'min'å'max'ä¸­ãåï¼computeCubeBezierBoundingBoxã
     * @param {Array.<number>} p0 - ä¸é¶è´å¡å°æ²çº¿p0ç¹
     * @param {Array.<number>} p1 - ä¸é¶è´å¡å°æ²çº¿p1ç¹
     * @param {Array.<number>} p2 - ä¸é¶è´å¡å°æ²çº¿p2ç¹
     * @param {Array.<number>} p3 - ä¸é¶è´å¡å°æ²çº¿p3ç¹
     * @param {Array.<number>} min - æå°
     * @param {Array.<number>} max - æå¤§
     */

  }, {
    key: "cubeBezier",
    value: function cubeBezier(p0, p1, p2, p3, min, max) {
      var curve = new Curve_Curve();
      var xDim = [];
      curve.cubicExtrema(p0[0], p1[0], p2[0], p3[0], xDim);

      for (var i = 0; i < xDim.length; i++) {
        xDim[i] = curve.cubicAt(p0[0], p1[0], p2[0], p3[0], xDim[i]);
      }

      var yDim = [];
      curve.cubicExtrema(p0[1], p1[1], p2[1], p3[1], yDim);

      for (var _i = 0; _i < yDim.length; _i++) {
        yDim[_i] = curve.cubicAt(p0[1], p1[1], p2[1], p3[1], yDim[_i]);
      }

      xDim.push(p0[0], p3[0]);
      yDim.push(p0[1], p3[1]);
      var left = Math.min.apply(null, xDim);
      var right = Math.max.apply(null, xDim);
      var top = Math.min.apply(null, yDim);
      var bottom = Math.max.apply(null, yDim);
      min[0] = left;
      min[1] = top;
      max[0] = right;
      max[1] = bottom;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.ComputeBoundingBox.prototype.quadraticBezier
     * @description ä»äºé¶è´å¡å°æ²çº¿(p0, p1, p2)ä¸­è®¡ç®åºæå°åå´çï¼åå¥'min'å'max'ä¸­ãåï¼computeQuadraticBezierBoundingBoxã
     * @param {Array.<number>} p0 - äºé¶è´å¡å°æ²çº¿p0ç¹
     * @param {Array.<number>} p1 - äºé¶è´å¡å°æ²çº¿p1ç¹
     * @param {Array.<number>} p2 - äºé¶è´å¡å°æ²çº¿p2ç¹
     * @param {Array.<number>} min - æå°
     * @param {Array.<number>} max - æå¤§
     */

  }, {
    key: "quadraticBezier",
    value: function quadraticBezier(p0, p1, p2, min, max) {
      var curve = new Curve_Curve(); // Find extremities, where derivative in x dim or y dim is zero

      var t1 = curve.quadraticExtremum(p0[0], p1[0], p2[0]);
      var t2 = curve.quadraticExtremum(p0[1], p1[1], p2[1]);
      t1 = Math.max(Math.min(t1, 1), 0);
      t2 = Math.max(Math.min(t2, 1), 0);
      var ct1 = 1 - t1;
      var ct2 = 1 - t2;
      var x1 = ct1 * ct1 * p0[0] + 2 * ct1 * t1 * p1[0] + t1 * t1 * p2[0];
      var y1 = ct1 * ct1 * p0[1] + 2 * ct1 * t1 * p1[1] + t1 * t1 * p2[1];
      var x2 = ct2 * ct2 * p0[0] + 2 * ct2 * t2 * p1[0] + t2 * t2 * p2[0];
      var y2 = ct2 * ct2 * p0[1] + 2 * ct2 * t2 * p1[1] + t2 * t2 * p2[1];
      min[0] = Math.min(p0[0], p2[0], x1, x2);
      min[1] = Math.min(p0[1], p2[1], y1, y2);
      max[0] = Math.max(p0[0], p2[0], x1, x2);
      max[1] = Math.max(p0[1], p2[1], y1, y2);
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.ComputeBoundingBox.prototype.arc
     * @description ä»åå¼§ä¸­è®¡ç®åºæå°åå´çï¼åå¥'min'å'max'ä¸­ãåï¼computeArcBoundingBoxã
     * @param {number} x - åå¼§ä¸­å¿ç¹ x
     * @param {number} y - åå¼§ä¸­å¿ç¹ y
     * @param {number} r - åå¼§åå¾
     * @param {number} startAngle - åå¼§å¼å§è§åº¦
     * @param {number} endAngle - åå¼§ç»æè§åº¦
     * @param {number} anticlockwise - æ¯å¦æ¯é¡ºæ¶é
     * @param {number} min - æå°
     * @param {number} max - æå¤§
     */

  }, {
    key: "arc",
    value: function arc(x, y, r, startAngle, endAngle, anticlockwise, min, max) {
      var vec2 = new levelRenderer_Vector_Vector();
      var start = vec2.create();
      var end = vec2.create();
      var extremity = vec2.create();
      start[0] = Math.cos(startAngle) * r + x;
      start[1] = Math.sin(startAngle) * r + y;
      end[0] = Math.cos(endAngle) * r + x;
      end[1] = Math.sin(endAngle) * r + y;
      vec2.min(min, start, end);
      vec2.max(max, start, end); // Thresh to [0, Math.PI * 2]

      startAngle = startAngle % (Math.PI * 2);

      if (startAngle < 0) {
        startAngle = startAngle + Math.PI * 2;
      }

      endAngle = endAngle % (Math.PI * 2);

      if (endAngle < 0) {
        endAngle = endAngle + Math.PI * 2;
      }

      if (startAngle > endAngle && !anticlockwise) {
        endAngle += Math.PI * 2;
      } else if (startAngle < endAngle && anticlockwise) {
        startAngle += Math.PI * 2;
      }

      if (anticlockwise) {
        var tmp = endAngle;
        endAngle = startAngle;
        startAngle = tmp;
      } // var number = 0;
      // var step = (anticlockwise ? -Math.PI : Math.PI) / 2;


      for (var angle = 0; angle < endAngle; angle += Math.PI / 2) {
        if (angle > startAngle) {
          extremity[0] = Math.cos(angle) * r + x;
          extremity[1] = Math.sin(angle) * r + y;
          vec2.min(min, extremity, min);
          vec2.max(max, extremity, max);
        }
      }
    }
  }]);

  return ComputeBoundingBox;
}();
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Env.js
function Env_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Env_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Env_createClass(Constructor, protoProps, staticProps) { if (protoProps) Env_defineProperties(Constructor.prototype, protoProps); if (staticProps) Env_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @class  SuperMap.LevelRenderer.Tool.Env
 * @category Visualization Theme
 * @classdesc ç¯å¢è¯å«
 * @private 
 */
var Env = /*#__PURE__*/function () {
  function Env() {
    Env_classCallCheck(this, Env);

    // Zepto.js
    // (c) 2010-2013 Thomas Fuchs
    // Zepto.js may be freely distributed under the MIT license.
    this.CLASS_NAME = "SuperMap.LevelRenderer.Tool.Env";
    var me = this;

    function detect(ua) {
      var os = me.os = {};
      var browser = me.browser = {};
      var webkit = ua.match(/Web[kK]it[\/]{0,1}([\d.]+)/);
      var android = ua.match(/(Android);?[\s\/]+([\d.]+)?/);
      var ipad = ua.match(/(iPad).*OS\s([\d_]+)/);
      var ipod = ua.match(/(iPod)(.*OS\s([\d_]+))?/);
      var iphone = !ipad && ua.match(/(iPhone\sOS)\s([\d_]+)/);
      var webos = ua.match(/(webOS|hpwOS)[\s\/]([\d.]+)/);
      var touchpad = webos && ua.match(/TouchPad/);
      var kindle = ua.match(/Kindle\/([\d.]+)/);
      var silk = ua.match(/Silk\/([\d._]+)/);
      var blackberry = ua.match(/(BlackBerry).*Version\/([\d.]+)/);
      var bb10 = ua.match(/(BB10).*Version\/([\d.]+)/);
      var rimtabletos = ua.match(/(RIM\sTablet\sOS)\s([\d.]+)/);
      var playbook = ua.match(/PlayBook/);
      var chrome = ua.match(/Chrome\/([\d.]+)/) || ua.match(/CriOS\/([\d.]+)/);
      var firefox = ua.match(/Firefox\/([\d.]+)/);
      var ie = ua.match(/MSIE ([\d.]+)/);
      var safari = webkit && ua.match(/Mobile\//) && !chrome;
      var webview = ua.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/) && !chrome; // Todo: clean this up with a better OS/browser seperation:
      // - discern (more) between multiple browsers on android
      // - decide if kindle fire in silk mode is android or not
      // - Firefox on Android doesn't specify the Android version
      // - possibly devide in os, device and browser hashes

      /*eslint-disable*/

      if (browser.webkit = !!webkit) {
        browser.version = webkit[1];
      }

      if (android) {
        os.android = true;
        os.version = android[2];
      }

      if (iphone && !ipod) {
        os.ios = os.iphone = true;
        os.version = iphone[2].replace(/_/g, '.');
      }

      if (ipad) {
        os.ios = os.ipad = true;
        os.version = ipad[2].replace(/_/g, '.');
      }

      if (ipod) {
        os.ios = os.ipod = true;
        os.version = ipod[3] ? ipod[3].replace(/_/g, '.') : null;
      }

      if (webos) {
        os.webos = true;
        os.version = webos[2];
      }

      if (touchpad) {
        os.touchpad = true;
      }

      if (blackberry) {
        os.blackberry = true;
        os.version = blackberry[2];
      }

      if (bb10) {
        os.bb10 = true;
        os.version = bb10[2];
      }

      if (rimtabletos) {
        os.rimtabletos = true;
        os.version = rimtabletos[2];
      }

      if (playbook) {
        browser.playbook = true;
      }

      if (kindle) {
        os.kindle = true;
        os.version = kindle[1];
      }

      if (silk) {
        browser.silk = true;
        browser.version = silk[1];
      }

      if (!silk && os.android && ua.match(/Kindle Fire/)) {
        browser.silk = true;
      }

      if (chrome) {
        browser.chrome = true;
        browser.version = chrome[1];
      }

      if (firefox) {
        browser.firefox = true;
        browser.version = firefox[1];
      }

      if (ie) {
        browser.ie = true;
        browser.version = ie[1];
      }

      if (safari && (ua.match(/Safari/) || !!os.ios)) {
        browser.safari = true;
      }

      if (webview) {
        browser.webview = true;
      }

      if (ie) {
        browser.ie = true;
        browser.version = ie[1];
      }

      os.tablet = !!(ipad || playbook || android && !ua.match(/Mobile/) || firefox && ua.match(/Tablet/) || ie && !ua.match(/Phone/) && ua.match(/Touch/));
      os.phone = !!(!os.tablet && !os.ipod && (android || iphone || webos || blackberry || bb10 || chrome && ua.match(/Android/) || chrome && ua.match(/CriOS\/([\d.]+)/) || firefox && ua.match(/Mobile/) || ie && ua.match(/Touch/)));
      return {
        browser: browser,
        os: os,
        // åçcanvasæ¯æ
        canvasSupported: document.createElement('canvas').getContext ? true : false
      };
    }

    return detect(navigator.userAgent);
  }

  Env_createClass(Env, [{
    key: "destory",
    value: function destory() {
      return true;
    }
  }]);

  return Env;
}();
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Event.js
function Event_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Event_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Event_createClass(Constructor, protoProps, staticProps) { if (protoProps) Event_defineProperties(Constructor.prototype, protoProps); if (staticProps) Event_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @class  SuperMap.LevelRenderer.Tool.Event
 * @category Visualization Theme
 * @classdesc LevelRenderer å·¥å·-äºä»¶è¾å©ç±»
 * @private 
 */
var Event_Event = /*#__PURE__*/function () {
  /**
   * @function SuperMap.LevelRenderer.Tool.Event.prototype.constructor
   * @description æé å½æ°ã
   */
  function Event() {
    Event_classCallCheck(this, Event);

    /**
     * @member {function} SuperMap.LevelRenderer.Tool.Event.prototype.stop
     * @description åæ­¢åæ³¡åé»æ­¢é»è®¤è¡ä¸º
     */
    this.stop = typeof window.addEventListener === 'function' ? function (e) {
      e.preventDefault();
      e.stopPropagation();
      e.cancelBubble = true;
    } : function (e) {
      e.returnValue = false;
      e.cancelBubble = true;
    };
    this.CLASS_NAME = "SuperMap.LevelRenderer.Tool.Event";
  }
  /**
   * @function SuperMap.LevelRenderer.Tool.Event.prototype.getX
   * @description æåé¼ æ ï¼ææï¼xåæ ã
   * @param {Event} e - äºä»¶ã
   * @returns {number} é¼ æ ï¼ææï¼xåæ ã
   */


  Event_createClass(Event, [{
    key: "getX",
    value: function getX(e) {
      return typeof e.zrenderX != 'undefined' && e.zrenderX || typeof e.offsetX != 'undefined' && e.offsetX || typeof e.layerX != 'undefined' && e.layerX || typeof e.clientX != 'undefined' && e.clientX;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Event.prototype.getY
     * @description æåé¼ æ ï¼ææï¼yåæ ã
     * @param {Event} e - äºä»¶ã
     * @returns {number} é¼ æ ï¼ææï¼yåæ ã
     */

  }, {
    key: "getY",
    value: function getY(e) {
      return typeof e.zrenderY != 'undefined' && e.zrenderY || typeof e.offsetY != 'undefined' && e.offsetY || typeof e.layerY != 'undefined' && e.layerY || typeof e.clientY != 'undefined' && e.clientY;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Event.prototype.getDelta
     * @description æåé¼ æ æ»è½®ååã
     * @param {Event} e - äºä»¶ã
     * @returns {number} æ»è½®ååï¼æ­£å¼è¯´ææ»è½®æ¯åä¸æ»å¨ï¼å¦ææ¯è´å¼è¯´ææ»è½®æ¯åä¸æ»å¨ã
     */

  }, {
    key: "getDelta",
    value: function getDelta(e) {
      return typeof e.zrenderDelta != 'undefined' && e.zrenderDelta || typeof e.wheelDelta != 'undefined' && e.wheelDelta || typeof e.detail != 'undefined' && -e.detail;
    }
  }]);

  return Event;
}();
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Http.js
function Http_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Http_typeof = function _typeof(obj) { return typeof obj; }; } else { Http_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Http_typeof(obj); }

function Http_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Http_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Http_createClass(Constructor, protoProps, staticProps) { if (protoProps) Http_defineProperties(Constructor.prototype, protoProps); if (staticProps) Http_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @private
 * @class  SuperMap.LevelRenderer.Tool.Http
 * @category Visualization Theme
 * @classdesc LevelRenderer å·¥å·-Http
 */
var Http = /*#__PURE__*/function () {
  /**
   * @function SuperMap.LevelRenderer.Tool.Http.constructor
   * @description æé å½æ°ã
   */
  function Http() {
    Http_classCallCheck(this, Http);

    this.CLASS_NAME = "SuperMap.LevelRenderer.Tool.Http";
  }
  /**
   * @function SuperMap.LevelRenderer.Tool.Http.prototype.get
   * @description getè¯·æ±ã
   * @param {(string|IHTTPGetOption)} url - è¯·æ±url
   * @param {function} onsuccess - è¯·æ±æåå½æ°
   * @param {function} onerror - è¯·æ±å¤±è´¥å½æ° 
   * @param {Object} opts - é¢å¤åæ°
   * @returns {number} coså¼
   */


  Http_createClass(Http, [{
    key: "get",
    value: function get(url, onsuccess, onerror) {
      if (Http_typeof(url) === 'object') {
        var obj = url;
        url = obj.url;
        onsuccess = obj.onsuccess;
        onerror = obj.onerror;
      }

      var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new window.ActiveXObject('Microsoft.XMLHTTP');
      xhr.open('GET', url, true);

      xhr.onreadystatechange = function () {
        if (xhr.readyState == 4) {
          if (xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) {
            onsuccess && onsuccess(xhr.responseText);
          } else {
            onerror && onerror();
          }

          xhr.onreadystatechange = new Function();
          xhr = null;
        }
      };

      xhr.send(null);
    }
  }]);

  return Http;
}();
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Config.js
function Config_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Config = function Config() {
  Config_classCallCheck(this, Config);
};
/**
 * @enum EVENT
 * @description äºä»¶
 * @type {Object}
 * @private 
 */

Config.EVENT = {
  //çªå£å¤§å°åå
  RESIZE: 'resize',
  //é¼ æ æé®è¢«ï¼ææï¼æä¸ï¼äºä»¶å¯¹è±¡æ¯ï¼ç®æ å¾å½¢åç´ æç©º
  CLICK: 'click',
  //åå»äºä»¶
  DBLCLICK: 'dblclick',
  //é¼ æ æ»è½®ååï¼äºä»¶å¯¹è±¡æ¯ï¼ç®æ å¾å½¢åç´ æç©º
  MOUSEWHEEL: 'mousewheel',
  //é¼ æ ï¼ææï¼è¢«ç§»å¨ï¼äºä»¶å¯¹è±¡æ¯ï¼ç®æ å¾å½¢åç´ æç©º
  MOUSEMOVE: 'mousemove',
  //é¼ æ ç§»å°æå¾å½¢åç´ ä¹ä¸ï¼äºä»¶å¯¹è±¡æ¯ï¼ç®æ å¾å½¢åç´ 
  MOUSEOVER: 'mouseover',
  //é¼ æ ä»æå¾å½¢åç´ ç§»å¼ï¼äºä»¶å¯¹è±¡æ¯ï¼ç®æ å¾å½¢åç´ 
  MOUSEOUT: 'mouseout',
  //é¼ æ æé®ï¼ææï¼è¢«æä¸ï¼äºä»¶å¯¹è±¡æ¯ï¼ç®æ å¾å½¢åç´ æç©º
  MOUSEDOWN: 'mousedown',
  //é¼ æ æé®ï¼ææï¼è¢«æ¾å¼ï¼äºä»¶å¯¹è±¡æ¯ï¼ç®æ å¾å½¢åç´ æç©º
  MOUSEUP: 'mouseup',
  //å¨å±ç¦»å¼ï¼MOUSEOUTè§¦åæ¯è¾é¢ç¹ï¼ä¸æ¬¡ç¦»å¼ä¼åç»å®
  GLOBALOUT: 'globalout',
  // ä¸æ¬¡æååç´ ææ½çè¡ä¸ºäºä»¶è¿ç¨æ¯ï¼
  // dragstart > dragenter > dragover [> dragleave] > drop > dragend
  //å¼å§ææ½æ¶è§¦åï¼äºä»¶å¯¹è±¡æ¯ï¼è¢«ææ½å¾å½¢åç´ 
  DRAGSTART: 'dragstart',
  //ææ½å®æ¯æ¶è§¦åï¼å¨dropä¹åè§¦åï¼ï¼äºä»¶å¯¹è±¡æ¯ï¼è¢«ææ½å¾å½¢åç´ 
  DRAGEND: 'dragend',
  //ææ½å¾å½¢åç´ è¿å¥ç®æ å¾å½¢åç´ æ¶è§¦åï¼äºä»¶å¯¹è±¡æ¯ï¼ç®æ å¾å½¢åç´ 
  DRAGENTER: 'dragenter',
  //ææ½å¾å½¢åç´ å¨ç®æ å¾å½¢åç´ ä¸ç§»å¨æ¶è§¦åï¼äºä»¶å¯¹è±¡æ¯ï¼ç®æ å¾å½¢åç´ 
  DRAGOVER: 'dragover',
  //ææ½å¾å½¢åç´ ç¦»å¼ç®æ å¾å½¢åç´ æ¶è§¦åï¼äºä»¶å¯¹è±¡æ¯ï¼ç®æ å¾å½¢åç´ 
  DRAGLEAVE: 'dragleave',
  //ææ½å¾å½¢åç´ æ¾å¨ç®æ å¾å½¢åç´ åæ¶è§¦åï¼äºä»¶å¯¹è±¡æ¯ï¼ç®æ å¾å½¢åç´ 
  DROP: 'drop',
  //touch end - start < delay is click
  touchClickDelay: 300
};
/**
 * @enum catchBrushException
 * @description æ¯å¦å¼å¸¸æè·
 * @type {boolean}
 * @private 
 */

Config.catchBrushException = false;
/**
 * @enum debugMode
 * @description debug æ¥å¿éé¡¹ï¼catchBrushException ä¸º true ä¸ææã
 * 0 : ä¸çædebugæ°æ®ï¼åå¸ç¨
 * 1 : å¼å¸¸æåºï¼è°è¯ç¨
 * 2 : æ§å¶å°è¾åºï¼è°è¯ç¨
 * @type {boolean}
 * @private 
 */

Config.debugMode = 0;
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Log.js
function Log_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Log_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Log_createClass(Constructor, protoProps, staticProps) { if (protoProps) Log_defineProperties(Constructor.prototype, protoProps); if (staticProps) Log_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @private
 * @class  SuperMap.LevelRenderer.Tool.Log
 * @category Visualization Theme
 * @classdesc LevelRenderer å·¥å·-æ¥å¿
 */

var Log = /*#__PURE__*/function () {
  /**
   * @function SuperMap.LevelRenderer.Tool.Log.constructor
   * @description æé å½æ°ã
   */
  function Log() {
    Log_classCallCheck(this, Log);

    this.CLASS_NAME = "SuperMap.LevelRenderer.Tool.Log";
    return function () {
      if (Config.debugMode === 0) {
        return;
      } else if (Config.debugMode == 1) {
        for (var k in arguments) {
          throw new Error(arguments[k]);
        }
      } else if (Config.debugMode > 1) {
        for (var _k in arguments) {
          console.log(arguments[_k]);
        }
      }
    };
    /* for debug
     return function(mes) {
     document.getElementById('wrong-message').innerHTML =
     mes + ' ' + (new Date() - 0)
     + '<br/>'
     + document.getElementById('wrong-message').innerHTML;
     };
     */
  }

  Log_createClass(Log, [{
    key: "destory",
    value: function destory() {
      return true;
    }
  }]);

  return Log;
}();
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Math.js
function Math_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Math_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Math_createClass(Constructor, protoProps, staticProps) { if (protoProps) Math_defineProperties(Constructor.prototype, protoProps); if (staticProps) Math_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @private
 * @class  SuperMap.LevelRenderer.Tool.Math
 * @category Visualization Theme
 * @classdesc LevelRenderer å·¥å·-æ°å­¦è¾å©ç±»
 */
var MathTool = /*#__PURE__*/function () {
  /**
  * @function SuperMap.LevelRenderer.Tool.Math.constructor
  * @description æé å½æ°ã
  */
  function MathTool() {
    Math_classCallCheck(this, MathTool);

    /**
     * @member {number} SuperMap.LevelRenderer.Tool.Math._radians
     * @description è§åº¦ä¸å¼§åº¦è½¬ååæ°
     */
    this._radians = window.Math.PI / 180;
    this.CLASS_NAME = "SuperMap.LevelRenderer.Tool.Math";
  }
  /**
   * @function SuperMap.LevelRenderer.Tool.Math.prototype.sin
   * @description æ­£å¼¦å½æ°ã
   * @param {number} angle - å¼§åº¦ï¼è§åº¦ï¼åæ°ã
   * @param {boolean} [isDegrees=false] - angleåæ°æ¯å¦ä¸ºè§åº¦è®¡ç®ï¼angleä¸ºä»¥å¼§åº¦è®¡éçè§åº¦ã
   * @returns {number} sin å¼ã
   */


  Math_createClass(MathTool, [{
    key: "sin",
    value: function sin(angle, isDegrees) {
      return window.Math.sin(isDegrees ? angle * this._radians : angle);
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Math.prototype.cos
     * @description ä½å¼¦å½æ°ã
     * @param {number} angle - å¼§åº¦ï¼è§åº¦ï¼åæ°ã
     * @param {boolean} [isDegrees=false] - angleåæ°æ¯å¦ä¸ºè§åº¦è®¡ç®ï¼angleä¸ºä»¥å¼§åº¦è®¡éçè§åº¦ã
     * @returns {number} cos å¼ã
     */

  }, {
    key: "cos",
    value: function cos(angle, isDegrees) {
      return window.Math.cos(isDegrees ? angle * this._radians : angle);
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Math.prototype.degreeToRadian
     * @description è§åº¦è½¬å¼§åº¦ã
     * @param {number} angle - å¼§åº¦ï¼è§åº¦ï¼åæ°ã
     * @param {boolean} [isDegrees=false] - angleåæ°æ¯å¦ä¸ºè§åº¦è®¡ç®ï¼angleä¸ºä»¥å¼§åº¦è®¡éçè§åº¦ã
     * @returns {number} å¼§åº¦å¼ã
     */

  }, {
    key: "degreeToRadian",
    value: function degreeToRadian(angle) {
      return angle * this._radians;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Math.prototype.radianToDegree
     * @description å¼§åº¦è½¬è§åº¦ã
     * @param {number} angle - å¼§åº¦ï¼è§åº¦ï¼åæ°ã
     * @param {boolean} [isDegrees=false] - angleåæ°æ¯å¦ä¸ºè§åº¦è®¡ç®ï¼angleä¸ºä»¥å¼§åº¦è®¡éçè§åº¦ã
     * @returns {number} è§åº¦ã
     */

  }, {
    key: "radianToDegree",
    value: function radianToDegree(angle) {
      return angle / this._radians;
    }
  }]);

  return MathTool;
}();
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Matrix.js
function Matrix_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Matrix_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Matrix_createClass(Constructor, protoProps, staticProps) { if (protoProps) Matrix_defineProperties(Constructor.prototype, protoProps); if (staticProps) Matrix_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @private
 * @class  SuperMap.LevelRenderer.Tool.Matrix
 * @category Visualization Theme
 * @classdesc LevelRenderer å·¥å·-3x2ç©éµæä½ç±»
 */
var Matrix = /*#__PURE__*/function () {
  /**
   * @function SuperMap.LevelRenderer.Tool.Matrix.constructor
   * @description æé å½æ°ã
   */
  function Matrix() {
    Matrix_classCallCheck(this, Matrix);

    /**
     * @member {Object} SuperMap.LevelRenderer.Tool.Matrix.prototype.ArrayCtor
     * @description æ°ç»ç±»åæ§å¶
     */
    this.ArrayCtor = typeof Float32Array === 'undefined' ? Array : Float32Array;
    this.CLASS_NAME = "SuperMap.LevelRenderer.Tool.Matrix";
  }
  /**
   * @function SuperMap.LevelRenderer.Tool.Matrix.prototype.create
   * @description åå»ºä¸ä¸ªåä½ç©éµã
   * @returns {(Float32Array|Array.<number>)} åä½ç©éµã
   */


  Matrix_createClass(Matrix, [{
    key: "create",
    value: function create() {
      var ArrayCtor = this.ArrayCtor;
      var out = new ArrayCtor(6);
      this.identity(out);
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Matrix.prototype.identity
     * @description è®¾ç½®ç©éµä¸ºåä½ç©éµã
     * @param {(Float32Array|Array.<number>)} out - åä½ç©éµã
     * @returns {(Float32Array|Array.<number>)} åä½ç©éµã
     */

  }, {
    key: "identity",
    value: function identity(out) {
      out[0] = 1;
      out[1] = 0;
      out[2] = 0;
      out[3] = 1;
      out[4] = 0;
      out[5] = 0;
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Matrix.prototype.copy
     * @description å¤å¶ç©éµã
     * @param {(Float32Array|Array.<number>)} out - åä½ç©éµã
     * @returns {(Float32Array|Array.<number>)} åéç©éµã
     */

  }, {
    key: "copy",
    value: function copy(out, m) {
      out[0] = m[0];
      out[1] = m[1];
      out[2] = m[2];
      out[3] = m[3];
      out[4] = m[4];
      out[5] = m[5];
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Matrix.prototype.mul
     * @description ç©éµç¸ä¹ã
     * @param {(Float32Array|Array.<number>)} out - åä½ç©éµã
     * @param {(Float32Array|Array.<number>)} m1 - ç©éµm1ã
     * @param {(Float32Array|Array.<number>)} m2- ç©éµm2ã
     * @returns {(Float32Array|Array.<number>)} ç»æç©éµã
     */

  }, {
    key: "mul",
    value: function mul(out, m1, m2) {
      out[0] = m1[0] * m2[0] + m1[2] * m2[1];
      out[1] = m1[1] * m2[0] + m1[3] * m2[1];
      out[2] = m1[0] * m2[2] + m1[2] * m2[3];
      out[3] = m1[1] * m2[2] + m1[3] * m2[3];
      out[4] = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];
      out[5] = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Matrix.prototype.mul
     * @description å¹³ç§»åæ¢ã
     * @param {(Float32Array|Array.<number>)} out - åä½ç©éµã
     * @param {(Float32Array|Array.<number>)} a - ç©éµã
     * @param {(Float32Array|Array.<number>)} v- å¹³ç§»åæ°ã
     * @returns {(Float32Array|Array.<number>)} ç»æç©éµã
     */

  }, {
    key: "translate",
    value: function translate(out, a, v) {
      out[0] = a[0];
      out[1] = a[1];
      out[2] = a[2];
      out[3] = a[3];
      out[4] = a[4] + v[0];
      out[5] = a[5] + v[1];
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Matrix.prototype.rotate
     * @description å¹³ç§»åæ¢ã
     * @param {(Float32Array|Array.<number>)} out - åä½ç©éµã
     * @param {(Float32Array|Array.<number>)} a - ç©éµã
     * @param {(Float32Array|Array.<number>)} rad - æè½¬åæ°ã
     * @returns {(Float32Array|Array.<number>)} ç»æç©éµã
     */

  }, {
    key: "rotate",
    value: function rotate(out, a, rad) {
      var aa = a[0];
      var ac = a[2];
      var atx = a[4];
      var ab = a[1];
      var ad = a[3];
      var aty = a[5];
      var st = Math.sin(rad);
      var ct = Math.cos(rad);
      out[0] = aa * ct + ab * st;
      out[1] = -aa * st + ab * ct;
      out[2] = ac * ct + ad * st;
      out[3] = -ac * st + ct * ad;
      out[4] = ct * atx + st * aty;
      out[5] = ct * aty - st * atx;
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Matrix.prototype.scale
     * @description ç¼©æ¾åæ¢ã
     * @param {(Float32Array|Array.<number>)} out - åä½ç©éµã
     * @param {(Float32Array|Array.<number>)} a - ç©éµã
     * @param {(Float32Array|Array.<number>)} v - ç¼©æ¾åæ°ã
     * @returns {(Float32Array|Array.<number>)} ç»æç©éµã
     */

  }, {
    key: "scale",
    value: function scale(out, a, v) {
      var vx = v[0];
      var vy = v[1];
      out[0] = a[0] * vx;
      out[1] = a[1] * vy;
      out[2] = a[2] * vx;
      out[3] = a[3] * vy;
      out[4] = a[4] * vx;
      out[5] = a[5] * vy;
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Matrix.prototype.invert
     * @description æ±éç©éµã
     * @param {(Float32Array|Array.<number>)} out - åä½ç©éµã
     * @param {(Float32Array|Array.<number>)} a - ç©éµã
     * @returns {(Float32Array|Array.<number>)} ç»æç©éµã
     */

  }, {
    key: "invert",
    value: function invert(out, a) {
      var aa = a[0];
      var ac = a[2];
      var atx = a[4];
      var ab = a[1];
      var ad = a[3];
      var aty = a[5];
      var det = aa * ad - ab * ac;

      if (!det) {
        return null;
      }

      det = 1.0 / det;
      out[0] = ad * det;
      out[1] = -ab * det;
      out[2] = -ac * det;
      out[3] = aa * det;
      out[4] = (ac * aty - ad * atx) * det;
      out[5] = (ab * atx - aa * aty) * det;
      return out;
    }
    /**
     * @function SuperMap.LevelRenderer.Tool.Matrix.prototype.mulVector
     * @description ç©éµå·¦ä¹åéã
     * @param {(Float32Array|Array.<number>)} out - åä½ç©éµã
     * @param {(Float32Array|Array.<number>)} a - ç©éµã
     * @param {(Float32Array|Array.<number>)} v - ç¼©æ¾åæ°ã
     * @returns {(Float32Array|Array.<number>)} ç»æç©éµã
     */

  }, {
    key: "mulVector",
    value: function mulVector(out, a, v) {
      var aa = a[0];
      var ac = a[2];
      var atx = a[4];
      var ab = a[1];
      var ad = a[3];
      var aty = a[5];
      out[0] = v[0] * aa + v[1] * ac + atx;
      out[1] = v[0] * ab + v[1] * ad + aty;
      return out;
    }
  }]);

  return Matrix;
}();
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/SUtil.js
function SUtil_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SUtil_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SUtil_createClass(Constructor, protoProps, staticProps) { if (protoProps) SUtil_defineProperties(Constructor.prototype, protoProps); if (staticProps) SUtil_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/












var SUtil_SUtil = /*#__PURE__*/function () {
  function SUtil() {
    SUtil_classCallCheck(this, SUtil);
  }

  SUtil_createClass(SUtil, null, [{
    key: "SUtil_smoothBezier",

    /**
     * @function SuperMap.LevelRenderer.SUtil.SUtil_smoothBezier
     * @description è´å¡å°å¹³æ»æ²çº¿ã
     * @private 
     * @param {Array} points - çº¿æ®µé¡¶ç¹æ°ç»ã
     * @param {number} smooth - å¹³æ»ç­çº§, 0-1ã
     * @param {boolean} isLoop - isLoopã
     * @param {Array} constraint - å°è®¡ç®åºæ¥çæ§å¶ç¹çº¦æå¨ä¸ä¸ªåå´çåï¼æ¯å¦ [[0, 0], [100, 100]], è¿ä¸ªåå´çä¼ä¸æ´ä¸ªæçº¿çåå´çåä¸ä¸ªå¹¶éç¨æ¥çº¦ææ§å¶ç¹ã
     * @param {Array} [originalPosition=[0, 0]] - åèåç¹ã
     * @return {Array} çæçå¹³æ»èç¹æ°ç»ã
     */
    value: function SUtil_smoothBezier(points, smooth, isLoop, constraint, originalPosition) {
      if (!originalPosition || originalPosition !== 2) {
        originalPosition = [0, 0];
      }

      var __OP = originalPosition;
      var cps = [];
      var v = [];
      var v1 = [];
      var v2 = [];
      var hasConstraint = !!constraint;
      var min, max;

      if (hasConstraint) {
        min = [Infinity, Infinity];
        max = [-Infinity, -Infinity];
        var _len = points.length;

        for (var i = 0; i < _len; i++) {
          SUtil.Util_vector.min(min, min, [points[i][0] + __OP[0], points[i][1] + __OP[1]]);
          SUtil.Util_vector.max(max, max, [points[i][0] + __OP[0], points[i][1] + __OP[1]]);
        } // ä¸æå®çåå´çåå¹¶é


        SUtil.Util_vector.min(min, min, constraint[0]);
        SUtil.Util_vector.max(max, max, constraint[1]);
      }

      var len = points.length;

      for (var _i = 0; _i < len; _i++) {
        var point = [points[_i][0] + __OP[0], points[_i][1] + __OP[1]];
        var prevPoint = void 0;
        var nextPoint = void 0;

        if (isLoop) {
          prevPoint = [points[_i ? _i - 1 : len - 1][0] + __OP[0], points[_i ? _i - 1 : len - 1][1] + __OP[1]];
          nextPoint = [points[(_i + 1) % len][0] + __OP[0], points[(_i + 1) % len][1] + __OP[1]];
        } else {
          if (_i === 0 || _i === len - 1) {
            cps.push([points[_i][0] + __OP[0], points[_i][1] + __OP[1]]);
            continue;
          } else {
            prevPoint = [points[_i - 1][0] + __OP[0], points[_i - 1][1] + __OP[1]];
            nextPoint = [points[_i + 1][0] + __OP[0], points[_i + 1][1] + __OP[1]];
          }
        }

        SUtil.Util_vector.sub(v, nextPoint, prevPoint); // use degree to scale the handle length

        SUtil.Util_vector.scale(v, v, smooth);
        var d0 = SUtil.Util_vector.distance(point, prevPoint);
        var d1 = SUtil.Util_vector.distance(point, nextPoint);
        var sum = d0 + d1;

        if (sum !== 0) {
          d0 /= sum;
          d1 /= sum;
        }

        SUtil.Util_vector.scale(v1, v, -d0);
        SUtil.Util_vector.scale(v2, v, d1);
        var cp0 = SUtil.Util_vector.add([], point, v1);
        var cp1 = SUtil.Util_vector.add([], point, v2);

        if (hasConstraint) {
          SUtil.Util_vector.max(cp0, cp0, min);
          SUtil.Util_vector.min(cp0, cp0, max);
          SUtil.Util_vector.max(cp1, cp1, min);
          SUtil.Util_vector.min(cp1, cp1, max);
        }

        cps.push(cp0);
        cps.push(cp1);
      }

      if (isLoop) {
        cps.push(cps.shift());
      }

      return cps;
    }
    /**
     * @function SuperMap.LevelRenderer.SUtil.SUtil_smoothSpline
     * @description æå¼æçº¿ã
     * @private 
     * @param {Array} points - çº¿æ®µé¡¶ç¹æ°ç»ã
     * @param {boolean} isLoop - isLoopã
     * @param {Array} constraint - å°è®¡ç®åºæ¥çæ§å¶ç¹çº¦æå¨ä¸ä¸ªåå´çåï¼æ¯å¦ [[0, 0], [100, 100]], è¿ä¸ªåå´çä¼ä¸æ´ä¸ªæçº¿çåå´çåä¸ä¸ªå¹¶éç¨æ¥çº¦ææ§å¶ç¹ã
     * @param {Array} originalPosition - åèåç¹ãé»è®¤å¼ï¼[0, 0]ã
     * @return {Array} çæçå¹³æ»èç¹æ°ç»ã
     */

  }, {
    key: "SUtil_smoothSpline",
    value: function SUtil_smoothSpline(points, isLoop, constraint, originalPosition) {
      if (!originalPosition || originalPosition !== 2) {
        originalPosition = [0, 0];
      }

      var __OP = originalPosition;
      var len = points.length;
      var ret = [];
      var distance = 0;

      for (var i = 1; i < len; i++) {
        distance += SUtil.Util_vector.distance([points[i - 1][0] + __OP[0], points[i - 1][1] + __OP[1]], [points[i][0] + __OP[0], points[i][1] + __OP[1]]);
      }

      var segs = distance / 5;
      segs = segs < len ? len : segs;

      for (var _i2 = 0; _i2 < segs; _i2++) {
        var pos = _i2 / (segs - 1) * (isLoop ? len : len - 1);
        var idx = Math.floor(pos);
        var w = pos - idx;
        var p0 = void 0;
        var p1 = [points[idx % len][0] + __OP[0], points[idx % len][1] + __OP[1]];
        var p2 = void 0;
        var p3 = void 0;

        if (!isLoop) {
          p0 = [points[idx === 0 ? idx : idx - 1][0] + __OP[0], points[idx === 0 ? idx : idx - 1][1] + __OP[1]];
          p2 = [points[idx > len - 2 ? len - 1 : idx + 1][0] + __OP[0], points[idx > len - 2 ? len - 1 : idx + 1][1] + __OP[1]];
          p3 = [points[idx > len - 3 ? len - 1 : idx + 2][0] + __OP[0], points[idx > len - 3 ? len - 1 : idx + 2][1] + __OP[1]];
        } else {
          p0 = [points[(idx - 1 + len) % len][0] + __OP[0], points[(idx - 1 + len) % len][1] + __OP[1]];
          p2 = [points[(idx + 1) % len][0] + __OP[0], points[(idx + 1) % len][1] + __OP[1]];
          p3 = [points[(idx + 2) % len][0] + __OP[0], points[(idx + 2) % len][1] + __OP[1]];
        }

        var w2 = w * w;
        var w3 = w * w2;
        ret.push([interpolate(p0[0], p1[0], p2[0], p3[0], w, w2, w3), interpolate(p0[1], p1[1], p2[1], p3[1], w, w2, w3)]);
      }

      return ret; // inner Function

      function interpolate(p0, p1, p2, p3, t, t2, t3) {
        var v0 = (p2 - p0) * 0.5;
        var v1 = (p3 - p1) * 0.5;
        return (2 * (p1 - p2) + v0 + v1) * t3 + (-3 * (p1 - p2) - 2 * v0 - v1) * t2 + v0 * t + p1;
      }
    }
    /**
     * @function SuperMap.LevelRenderer.SUtil.SUtil_dashedLineTo
     * @description èçº¿ lineToã
     */

  }, {
    key: "SUtil_dashedLineTo",
    value: function SUtil_dashedLineTo(ctx, x1, y1, x2, y2, dashLength, customDashPattern) {
      // http://msdn.microsoft.com/en-us/library/ie/dn265063(v=vs.85).aspx
      var dashPattern = [5, 5];
      dashLength = typeof dashLength != 'number' ? 5 : dashLength;

      if (ctx.setLineDash) {
        dashPattern[0] = dashLength;
        dashPattern[1] = dashLength;

        if (customDashPattern && customDashPattern instanceof Array) {
          ctx.setLineDash(customDashPattern);
        } else {
          ctx.setLineDash(dashPattern);
        } // ctx.setLineDash(dashPattern);


        ctx.moveTo(x1, y1);
        ctx.lineTo(x2, y2);
        return;
      }

      var dx = x2 - x1;
      var dy = y2 - y1;
      var numDashes = Math.floor(Math.sqrt(dx * dx + dy * dy) / dashLength);
      dx = dx / numDashes;
      dy = dy / numDashes;
      var flag = true;

      for (var i = 0; i < numDashes; ++i) {
        if (flag) {
          ctx.moveTo(x1, y1);
        } else {
          ctx.lineTo(x1, y1);
        }

        flag = !flag;
        x1 += dx;
        y1 += dy;
      }

      ctx.lineTo(x2, y2);
    }
  }]);

  return SUtil;
}(); // æææå·¥å·å¯¹è±¡æ¾å°å¨å±éæåéä¸ï¼ä»¥ä¾¿ç´æ¥è°ç¨å·¥å·æ¹æ³ï¼
// é¿åä½¿ç¨å·¥å·æ¶é¢ç¹çåå»ºå·¥å·å¯¹è±¡å¸¦æ¥çæ§è½æ¶èã

SUtil_SUtil.Util_area = new Area();
SUtil_SUtil.Util_color = new Color();
SUtil_SUtil.Util_computeBoundingBox = new ComputeBoundingBox();
SUtil_SUtil.Util_curve = new Curve_Curve();
SUtil_SUtil.Util_env = new Env();
SUtil_SUtil.Util_event = new Event_Event();
SUtil_SUtil.Util_http = new Http();
SUtil_SUtil.Util_log = new Log();
SUtil_SUtil.Util_math = new MathTool();
SUtil_SUtil.Util_matrix = new Matrix();
SUtil_SUtil.Util = new Util_Util();
SUtil_SUtil.Util_vector = new levelRenderer_Vector_Vector();
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Transformable.js
function Transformable_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Transformable_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Transformable_createClass(Constructor, protoProps, staticProps) { if (protoProps) Transformable_defineProperties(Constructor.prototype, protoProps); if (staticProps) Transformable_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @private
 * @class  SuperMap.LevelRenderer.Transformable
 * @category Visualization Theme
 * @classdesc å¯åæ¢è¶ç±»ï¼æææ¯æ Canvas Transform åæ¢æä½çç±»åæ¯æ­¤ç±»çå­ç±»ãæ­¤ç±»ä¸å¯å®ä¾åã
 */

var Transformable = /*#__PURE__*/function () {
  /**
   * @function SuperMap.LevelRenderer.Transformable.constructor
   * @description æé å½æ°ã
   */
  function Transformable() {
    Transformable_classCallCheck(this, Transformable);

    /**
     * @member {Array.<number>} SuperMap.LevelRenderer.Transformable.prototype.position 
     * @description å¹³ç§»ï¼ é»è®¤å¼ï¼[0, 0]ã
     */
    this.position = [0, 0];
    /**
     * @member {Array.<number>} SuperMap.LevelRenderer.Transformable.prototype.rotation
     * @description æè½¬ï¼å¯ä»¥éè¿æ°ç»äºä¸é¡¹æå®æè½¬çåç¹ï¼ é»è®¤å¼ï¼[0, 0, 0]ã
     */

    this.rotation = [0, 0, 0];
    /**
     * @member {Array.<number>} SuperMap.LevelRenderer.Transformable.prototype.scale
     * @description ç¼©æ¾ï¼å¯ä»¥éè¿æ°ç»ä¸åé¡¹æå®ç¼©æ¾çåç¹ï¼ é»è®¤å¼ï¼[1, 1, 0, 0]ã
     */

    this.scale = [1, 1, 0, 0];
    /**
     * @member {boolean} SuperMap.LevelRenderer.Transformable.prototype.needLocalTransform
     * @description æ¯å¦åæ¢ãé»è®¤å¼ï¼falseã
     */

    this.needLocalTransform = false;
    /**
     * @member {boolean} SuperMap.LevelRenderer.Transformable.prototype.needTransform
     * @description æ¯å¦æåæ åæ¢ãé»è®¤å¼ï¼falseã
     */

    this.needTransform = false;
    this.CLASS_NAME = "SuperMap.LevelRenderer.Transformable";
    /**
     * @function SuperMap.LevelRenderer.Transformable.prototype.lookAt
     * @description è®¾ç½®å¾å½¢çæåã
     */

    this.lookAt = function () {
      var v = SUtil_SUtil.Util_vector.create(); // {Array.<Number>|Float32Array} target

      return function (target) {
        if (!this.transform) {
          this.transform = SUtil_SUtil.Util_matrix.create();
        }

        var m = this.transform;
        SUtil_SUtil.Util_vector.sub(v, target, this.position);

        if (isAroundZero(v[0]) && isAroundZero(v[1])) {
          return;
        }

        SUtil_SUtil.Util_vector.normalize(v, v); // Y Axis
        // TODO Scale origin ?

        m[2] = v[0] * this.scale[1];
        m[3] = v[1] * this.scale[1]; // X Axis

        m[0] = v[1] * this.scale[0];
        m[1] = -v[0] * this.scale[0]; // Position

        m[4] = this.position[0];
        m[5] = this.position[1];
        this.decomposeTransform();

        function isAroundZero(val) {
          var EPSILON = 5e-5;
          return val > -EPSILON && val < EPSILON;
        }
      };
    }();
  }
  /**
   * @function SuperMap.LevelRenderer.Transformable.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  Transformable_createClass(Transformable, [{
    key: "destroy",
    value: function destroy() {
      this.position = null;
      this.rotation = null;
      this.scale = null;
      this.needLocalTransform = null;
      this.needTransform = null;
    }
    /**
     * @function SuperMap.LevelRenderer.Transformable.prototype.updateNeedTransform
     * @description æ´æ° needLocalTransform
     */

  }, {
    key: "updateNeedTransform",
    value: function updateNeedTransform() {
      this.needLocalTransform = isNotAroundZero(this.rotation[0]) || isNotAroundZero(this.position[0]) || isNotAroundZero(this.position[1]) || isNotAroundZero(this.scale[0] - 1) || isNotAroundZero(this.scale[1] - 1);

      function isNotAroundZero(val) {
        var EPSILON = 5e-5;
        return val > EPSILON || val < -EPSILON;
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Transformable.prototype.updateTransform
     * @description å¤æ­æ¯å¦éè¦æåæ åæ¢ï¼æ´æ° needTransform å±æ§ãå¦ææåæ åæ¢, åä» position, rotation, scale ä»¥åç¶èç¹ç transform è®¡ç®åºèªèº«ç transform ç©éµ
     */

  }, {
    key: "updateTransform",
    value: function updateTransform() {
      this.updateNeedTransform();

      if (this.parent) {
        this.needTransform = this.needLocalTransform || this.parent.needTransform;
      } else {
        this.needTransform = this.needLocalTransform;
      }

      if (!this.needTransform) {
        return;
      }

      var origin = [0, 0];
      var m = this.transform || SUtil_SUtil.Util_matrix.create();
      SUtil_SUtil.Util_matrix.identity(m);

      if (this.needLocalTransform) {
        if (isNotAroundZero(this.scale[0]) || isNotAroundZero(this.scale[1])) {
          origin[0] = -this.scale[2] || 0;
          origin[1] = -this.scale[3] || 0;
          var haveOrigin = isNotAroundZero(origin[0]) || isNotAroundZero(origin[1]);

          if (haveOrigin) {
            SUtil_SUtil.Util_matrix.translate(m, m, origin);
          }

          SUtil_SUtil.Util_matrix.scale(m, m, this.scale);

          if (haveOrigin) {
            origin[0] = -origin[0];
            origin[1] = -origin[1];
            SUtil_SUtil.Util_matrix.translate(m, m, origin);
          }
        }

        if (this.rotation instanceof Array) {
          if (this.rotation[0] !== 0) {
            origin[0] = -this.rotation[1] || 0;
            origin[1] = -this.rotation[2] || 0;

            var _haveOrigin = isNotAroundZero(origin[0]) || isNotAroundZero(origin[1]);

            if (_haveOrigin) {
              SUtil_SUtil.Util_matrix.translate(m, m, origin);
            }

            SUtil_SUtil.Util_matrix.rotate(m, m, this.rotation[0]);

            if (_haveOrigin) {
              origin[0] = -origin[0];
              origin[1] = -origin[1];
              SUtil_SUtil.Util_matrix.translate(m, m, origin);
            }
          }
        } else {
          if (this.rotation !== 0) {
            SUtil_SUtil.Util_matrix.rotate(m, m, this.rotation);
          }
        }

        if (isNotAroundZero(this.position[0]) || isNotAroundZero(this.position[1])) {
          SUtil_SUtil.Util_matrix.translate(m, m, this.position);
        }
      } // ä¿å­è¿ä¸ªåæ¢ç©éµ


      this.transform = m; // åºç¨ç¶èç¹åæ¢

      if (this.parent && this.parent.needTransform) {
        if (this.needLocalTransform) {
          SUtil_SUtil.Util_matrix.mul(this.transform, this.parent.transform, this.transform);
        } else {
          SUtil_SUtil.Util_matrix.copy(this.transform, this.parent.transform);
        }
      }

      function isNotAroundZero(val) {
        var EPSILON = 5e-5;
        return val > EPSILON || val < -EPSILON;
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Transformable.prototype.setTransform
     * @description å°èªå·±ç transform åºç¨å° context ä¸ã
     * 
     * @param {Context2D} ctx - Context2D ä¸ä¸æã
     */

  }, {
    key: "setTransform",
    value: function setTransform(ctx) {
      if (this.needTransform) {
        var m = this.transform;
        ctx.transform(m[0], m[1], m[2], m[3], m[4], m[5]);
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Transformable.prototype.decomposeTransform
     * @description åè§£`transform`ç©éµå°`position`, `rotation`, `scale` ã
     */

  }, {
    key: "decomposeTransform",
    value: function decomposeTransform() {
      if (!this.transform) {
        return;
      }

      var m = this.transform;
      var sx = m[0] * m[0] + m[1] * m[1];
      var position = this.position;
      var scale = this.scale;
      var rotation = this.rotation;

      if (isNotAroundZero(sx - 1)) {
        sx = Math.sqrt(sx);
      }

      var sy = m[2] * m[2] + m[3] * m[3];

      if (isNotAroundZero(sy - 1)) {
        sy = Math.sqrt(sy);
      }

      position[0] = m[4];
      position[1] = m[5];
      scale[0] = sx;
      scale[1] = sy;
      scale[2] = scale[3] = 0;
      rotation[0] = Math.atan2(-m[1] / sy, m[0] / sx);
      rotation[1] = rotation[2] = 0;

      function isNotAroundZero(val) {
        var EPSILON = 5e-5;
        return val > EPSILON || val < -EPSILON;
      }
    }
  }]);

  return Transformable;
}();
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Shape.js
function Shape_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Shape_typeof = function _typeof(obj) { return typeof obj; }; } else { Shape_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Shape_typeof(obj); }

function Shape_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Shape_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Shape_createClass(Constructor, protoProps, staticProps) { if (protoProps) Shape_defineProperties(Constructor.prototype, protoProps); if (staticProps) Shape_defineProperties(Constructor, staticProps); return Constructor; }

function Shape_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { Shape_get = Reflect.get; } else { Shape_get = function _get(target, property, receiver) { var base = Shape_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return Shape_get(target, property, receiver || target); }

function Shape_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = Shape_getPrototypeOf(object); if (object === null) break; } return object; }

function Shape_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Shape_setPrototypeOf(subClass, superClass); }

function Shape_setPrototypeOf(o, p) { Shape_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Shape_setPrototypeOf(o, p); }

function Shape_createSuper(Derived) { var hasNativeReflectConstruct = Shape_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Shape_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Shape_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Shape_possibleConstructorReturn(this, result); }; }

function Shape_possibleConstructorReturn(self, call) { if (call && (Shape_typeof(call) === "object" || typeof call === "function")) { return call; } return Shape_assertThisInitialized(self); }

function Shape_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Shape_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Shape_getPrototypeOf(o) { Shape_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Shape_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @private
 * @class  SuperMap.LevelRenderer.Shape
 * @category Visualization Theme
 * @classdesc å¾å½¢ï¼shapeï¼åºç±»ã
 * @extends SuperMap.LevelRenderer.Eventful
 * @extends SuperMap.LevelRenderer.Transformable
 */

var Shape_Shape = /*#__PURE__*/function (_SuperMap$mixin) {
  Shape_inherits(Shape, _SuperMap$mixin);

  var _super = Shape_createSuper(Shape);

  /**
   * @function SuperMap.LevelRenderer.Shape.constructor
   * @description æé å½æ°ã
   *
   * @param {Array} options - shape çéç½®ï¼optionsï¼é¡¹ï¼å¯ä»¥æ¯ shape çèªæå±æ§ï¼ä¹å¯ä»¥æ¯èªå®ä¹çå±æ§ã
   *
   */
  function Shape(options) {
    var _this;

    Shape_classCallCheck(this, Shape);

    _this = _super.call(this, options);
    options = options || {};
    /**
     * @member {string} SuperMap.LevelRenderer.Shape.prototype.id
     * @description å¯ä¸æ è¯ã
     */

    _this.id = null;
    /**
     * @member {Object} SuperMap.LevelRenderer.Shape.prototype.style
     * @description åºç¡ç»å¶æ ·å¼ã
     * @param {string} style.brushType - ç»ç¬ç±»åãå¯è®¾å¼ï¼"fill", "stroke", "both"ãé»è®¤å¼ï¼"fill"ã
     * @param {string} style.color - å¡«åé¢è²ãé»è®¤å¼ï¼"#000000'"ã
     * @param {string} style.strokeColor - æè¾¹é¢è²ãé»è®¤å¼ï¼"#000000'"ã
     * @param {string} style.lineCape - çº¿å¸½æ ·å¼ãå¯è®¾å¼ï¼"butt", "round", "square"ãé»è®¤å¼ï¼"butt"ã
     * @param {number} style.lineWidth - æè¾¹å®½åº¦ãé»è®¤å¼ï¼1ã
     * @param {number} style.opacity - ç»å¶éæåº¦ãé»è®¤å¼ï¼1ã
     * @param {number} style.shadowBlur - é´å½±æ¨¡ç³åº¦ï¼å¤§äº0ææãé»è®¤å¼ï¼0ã
     * @param {number} style.shadowColor - é´å½±é¢è²ãé»è®¤å¼ï¼"#000000'"ã
     * @param {number} style.shadowOffsetX - é´å½±æ¨ªååç§»ãé»è®¤å¼ï¼0ã
     * @param {number} style.shadowOffsetY -  é´å½±çºµååç§»ãé»è®¤å¼ï¼0ã
     * @param {string} style.text -  å¾å½¢ä¸­çéå ææ¬ãé»è®¤å¼ï¼""ã
     * @param {string} style.textColor -  ææ¬é¢è²ãé»è®¤å¼ï¼"#000000'"ã
     * @param {string} style.textFont -  éå ææ¬æ ·å¼ãç¤ºä¾:'bold 18px verdana'ã
     * @param {string} style.textPosition -  éå ææ¬ä½ç½®ãå¯è®¾å¼ï¼"inside", "left", "right", top", "bottom", "end"ãé»è®¤å¼ï¼"end"ã
     * @param {string} style.textAlign -  éå ææ¬æ°´å¹³å¯¹é½ãå¯è®¾å¼ï¼"start", "end", "left", "right", "center"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
     * @param {string} style.textBaseline - éå ææ¬åç´å¯¹é½ãå¯è®¾å¼ï¼"top", "bottom", "middle", "alphabetic", "hanging", "ideographic"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
     *
     */

    _this.style = {};
    /**
     * @member {Object} SuperMap.LevelRenderer.Shape.prototype.style.__rect
     * @description åå´å¾å½¢çæå°ç©å½¢çå­ã
     *
     * @param {number} x - å·¦ä¸è§é¡¶ç¹xè½´åæ ã
     * @param {number} y - å·¦ä¸è§é¡¶ç¹yè½´åæ ã
     * @param {number} width - åå´çç©å½¢å®½åº¦ã
     * @param {number} height - åå´çç©å½¢é«åº¦ã
     */

    /**
     * @member {Object} SuperMap.LevelRenderer.Shape.prototype.highlightStyle
     * @description é«äº®æ ·å¼ã
     *
     * @param {string} highlightStyle.brushType - ç»ç¬ç±»åãå¯è®¾å¼ï¼"fill", "stroke", "both"ãé»è®¤å¼ï¼"fill"ã
     * @param {string} highlightStyle.color -  å¡«åé¢è²ãé»è®¤å¼ï¼"#000000'"ã
     * @param {string} highlightStyle.strokeColor - æè¾¹é¢è²ãé»è®¤å¼ï¼"#000000'"ã
     * @param {string} highlightStyle.lineCape - çº¿å¸½æ ·å¼ãå¯è®¾å¼ï¼"butt", "round", "square"ãé»è®¤å¼ï¼"butt"ã
     * @param {number} highlightStyle.lineWidth - æè¾¹å®½åº¦ãé»è®¤å¼ï¼1ã
     * @param {number} highlightStyle.opacity -  ç»å¶éæåº¦ãé»è®¤å¼ï¼1ã
     * @param {number} highlightStyle.shadowBlur - é´å½±æ¨¡ç³åº¦ï¼å¤§äº0ææãé»è®¤å¼ï¼0ã
     * @param {number} highlightStyle.shadowColor - é´å½±é¢è²ãé»è®¤å¼ï¼"#000000'"ã
     * @param {number} highlightStyle.shadowOffsetX - é´å½±æ¨ªååç§»ãé»è®¤å¼ï¼0ã
     * @param {number} highlightStyle.shadowOffsetY - é´å½±çºµååç§»ãé»è®¤å¼ï¼0ã
     * @param {string} highlightStyle.text - å¾å½¢ä¸­çéå ææ¬ãé»è®¤å¼ï¼""ã
     * @param {string} highlightStyle.textColor - ææ¬é¢è²ãé»è®¤å¼ï¼"#000000'"ã
     * @param {string} highlightStyle.textFont - éå ææ¬æ ·å¼ãç¤ºä¾:'bold 18px verdana'ã
     * @param {string} highlightStyle.textPosition - éå ææ¬ä½ç½®ãå¯è®¾å¼ï¼"inside", "left", "right", top", "bottom", "end"ãé»è®¤å¼ï¼"end"ã
     * @param {string} highlightStyle.textAlign -  éå ææ¬æ°´å¹³å¯¹é½ãå¯è®¾å¼ï¼"start", "end", "left", "right", "center"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
     * @param {string} highlightStyle.textBaseline - éå ææ¬åç´å¯¹é½ãå¯è®¾å¼ï¼"top", "bottom", "middle", "alphabetic", "hanging", "ideographic"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
     */

    _this.highlightStyle = null;
    /**
     * @member {Object} SuperMap.LevelRenderer.Shape.prototype.parent
     * @description ç¶èç¹ï¼åªè¯»å±æ§ã<SuperMap.LevelRenderer.Group>
     */

    _this.parent = null;
    /**
     * @member {boolean} SuperMap.LevelRenderer.Shape.prototype.__dirty
     * @description {boolean}
     */

    _this.__dirty = true;
    /**
     * @member {Array} SuperMap.LevelRenderer.Shape.prototype.__clipShapes
     * @description {Array}
     * 
     */

    _this.__clipShapes = [];
    /**
     * @member {boolean} SuperMap.LevelRenderer.Shape.prototype.invisible
     * @description å¾å½¢æ¯å¦å¯è§ï¼ä¸º true æ¶ä¸ç»å¶å¾å½¢ï¼ä½æ¯ä»è½è§¦åé¼ æ äºä»¶ãé»è®¤å¼ï¼falseã
     */

    _this.invisible = false;
    /**
     * @member {boolean} SuperMap.LevelRenderer.Shape.prototype.ignore
     * @description å¾å½¢æ¯å¦å¿½ç¥ï¼ä¸º true æ¶å¿½ç¥å¾å½¢çç»å¶ä»¥åäºä»¶è§¦åãé»è®¤å¼ï¼falseã
     */

    _this.ignore = false;
    /**
     * @member {boolean} SuperMap.LevelRenderer.Shape.prototype.zlevel
     * @description z å± levelï¼å³å®ç»ç»å¨åªå± canvas ä¸­ãé»è®¤å¼ï¼0ã
     */

    _this.zlevel = 0;
    /**
     * @member {boolean} SuperMap.LevelRenderer.Shape.prototype.draggable
     * @description æ¯å¦å¯ææ½ãé»è®¤å¼ï¼falseã
     */

    _this.draggable = false;
    /**
     * @member {boolean} SuperMap.LevelRenderer.Shape.prototype.clickable
     * @description æ¯å¦å¯ç¹å»ãé»è®¤å¼ï¼falseã
     */

    _this.clickable = false;
    /**
     * @member {boolean} SuperMap.LevelRenderer.Shape.prototype.hoverable
     * @description æ¯å¦å¯ä»¥ hoverãé»è®¤å¼ï¼trueã
     */

    _this.hoverable = true;
    /**
     * @member {number} SuperMap.LevelRenderer.Shape.prototype.z
     * @description zå¼ï¼è·zlevelä¸æ ·å½±åshapeç»å¶çååé¡ºåºï¼zå¼å¤§çshapeä¼è¦çå¨zå¼å°çä¸é¢ï¼ä½æ¯å¹¶ä¸ä¼åå»ºæ°çcanvasï¼æä»¥ä¼åçº§ä½äºzlevelï¼èä¸é¢ç¹æ¹å¨çå¼éæ¯zlevelå°å¾å¤ãé»è®¤å¼ï¼0ã
     */

    _this.z = 0; //å°çæ©å±

    /**
     * @member {Array} SuperMap.LevelRenderer.Shape.prototype.refOriginalPosition
     * @description å¾å½¢åèåç¹ä½ç½®ï¼å¾å½¢çåèä¸­å¿ä½ç½®ã
     * refOriginalPosition æ¯é¿åº¦ä¸º 2 çæ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤º x åæ ï¼ç¬¬äºä¸ªåç´ è¡¨ç¤º y åæ ã
     *
     * refOriginalPosition è¡¨ç¤ºå¾å½¢çåèä¸­å¿ï¼éå¸¸æåµä¸ï¼å¾å½¢æ¯ä½¿ç¨ canvas çåç¹ä½ç½®ä½ä¸ºä½ç½®åèï¼
     * ä½ refOriginalPosition å¯ä»¥æ¹åå¾å½¢çåèä½ç½®ï¼ä¾å¦ï¼ refOriginalPosition = [80, 80],
     * å¾å½¢åç style.x = 20, style.y = 20ï¼é£ä¹åå¨ canvas ä¸­çå®éä½ç½®æ¯ [100, 100]ã
     *
     * å¾å½¢ï¼Shapeï¼ çææä½ç½®ç¸å³å±æ§é½æ¯ä»¥ refOriginalPosition ä¸ºåèä¸­å¿ï¼
     * ä¹å°±æ¯è¯´å¾å½¢çææä½ç½®ä¿¡æ¯å¨ canvas ä¸­é½æ¯ä»¥ refOriginalPosition ä¸ºåèçç¸å¯¹ä½ç½®ï¼åªæ
     * refOriginalPosition çå¼ä¸º [0, 0] æ¶ï¼å½¢çä½ç½®ä¿¡æ¯ææ¯ canvas ç»å¯¹ä½ç½®ã
     *
     * å¾å½¢çä½ç½®ä¿¡æ¯éå¸¸æï¼style.pointListï¼style.xï¼style.yã
     *
     * refOriginalPositionãé»è®¤å¼æ¯ï¼ [0, 0]ã
     */

    _this.refOriginalPosition = [0, 0];
    /**
     * @member {string} SuperMap.LevelRenderer.Shape.prototype.refDataID
     * @description å¾å½¢æå³èæ°æ®ç IDã
     *
     */

    _this.refDataID = null;
    /**
     * @member {boolean} SuperMap.LevelRenderer.Shape.prototype.isHoverByRefDataID
     * @description æ¯å¦æ ¹æ® refDataID è¿è¡é«äº®ãç¨äºåæ¶é«äº®ææ refDataID ç¸åçå¾å½¢ã
     *
     */

    _this.isHoverByRefDataID = false;
    /**
     *  @member {string} SuperMap.LevelRenderer.Shape.prototype.refDataHoverGroup 
     *  @description é«äº®å¾å½¢ç»çç»åãæ­¤å±æ§å¨ refDataID ææä¸ isHoverByRefDataID ä¸º true æ¶çæã
     * ä¸æ¦è®¾ç½®æ­¤å±æ§ï¼ä¸å±æ§å¼ææï¼åªæå³èåä¸ä¸ªæ°æ®çå¾å½¢ä¸æ­¤å±æ§ç¸åçå¾å½¢æä¼é«äº®ã
     *
     */

    _this.refDataHoverGroup = null;
    /**
     * @member {Object} SuperMap.LevelRenderer.Shape.prototype.dataInfo
     * @description å¾å½¢çæ°æ®ä¿¡æ¯ã
     *
     */

    _this.dataInfo = null;
    Util.extend(Shape_assertThisInitialized(_this), options);
    _this.id = _this.id || Util.createUniqueID("smShape_");
    _this.CLASS_NAME = "SuperMap.LevelRenderer.Shape";
    /**
     * @function SuperMap.LevelRenderer.Shape.prototype.getTansform
     * @description åæ¢é¼ æ ä½ç½®å° shape çå±é¨åæ ç©ºé´
     *
     */

    _this.getTansform = function () {
      var invTransform = [];
      return function (x, y) {
        var originPos = [x, y]; // å¯¹é¼ æ çåæ ä¹åç¸åçåæ¢

        if (this.needTransform && this.transform) {
          SUtil_SUtil.Util_matrix.invert(invTransform, this.transform);
          SUtil_SUtil.Util_matrix.mulVector(originPos, invTransform, [x, y, 1]);

          if (x == originPos[0] && y == originPos[1]) {
            // é¿åå¤é¨ä¿®æ¹å¯¼è´ç needTransform ä¸åç¡®
            this.updateNeedTransform();
          }
        }

        return originPos;
      };
    }();

    return _this;
  }
  /**
   * @function SuperMap.LevelRenderer.Shape.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  Shape_createClass(Shape, [{
    key: "destroy",
    value: function destroy() {
      this.id = null;
      this.style = null;
      this.highlightStyle = null;
      this.parent = null;
      this.__dirty = null;
      this.__clipShapes = null;
      this.invisible = null;
      this.ignore = null;
      this.zlevel = null;
      this.draggable = null;
      this.clickable = null;
      this.hoverable = null;
      this.z = null;
      this.refOriginalPosition = null;
      this.refDataID = null;
      this.refDataHoverGroup = null;
      this.isHoverByRefDataID = null;
      this.dataInfo = null;

      Shape_get(Shape_getPrototypeOf(Shape.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.prototype.brush
     * @description ç»å¶å¾å½¢ã
     *
     * @param {CanvasRenderingContext2D} ctx - Context2D ä¸ä¸æã
     * @param {boolean} isHighlight - æ¯å¦ä½¿ç¨é«äº®å±æ§ã
     * @param {Function} updateCallback - éè¦å¼æ­¥å è½½èµæºç shape å¯ä»¥éè¿è¿ä¸ª callback(e),è®©painteræ´æ°è§å¾ï¼base.brush æ²¡ç¨ï¼éè¦çè¯éè½½ brushã
     */

  }, {
    key: "brush",
    value: function brush(ctx, isHighlight) {
      var style = this.beforeBrush(ctx, isHighlight);
      ctx.beginPath();
      this.buildPath(ctx, style);

      switch (style.brushType) {
        /* jshint ignore:start */
        case 'both':
          this.setCtxGlobalAlpha(ctx, "fill", style);
          ctx.fill();

          if (style.lineWidth > 0) {
            this.setCtxGlobalAlpha(ctx, "stroke", style);
            ctx.stroke();
          }

          this.setCtxGlobalAlpha(ctx, "reset", style);
          break;

        case 'stroke':
          this.setCtxGlobalAlpha(ctx, "stroke", style);
          style.lineWidth > 0 && ctx.stroke();
          this.setCtxGlobalAlpha(ctx, "reset", style);
          break;

        /* jshint ignore:end */

        default:
          this.setCtxGlobalAlpha(ctx, "fill", style);
          ctx.fill();
          this.setCtxGlobalAlpha(ctx, "reset", style);
          break;
      }

      this.drawText(ctx, style, this.style);
      this.afterBrush(ctx);
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.prototype.beforeBrush
     * @description å·ä½ç»å¶æä½åçä¸äºå¬å±æä½ã
     *
     * @param {CanvasRenderingContext2D} ctx - Context2D ä¸ä¸æã
     * @param {boolean} isHighlight - æ¯å¦ä½¿ç¨é«äº®å±æ§ã
     * @return {Object} å¤çåçæ ·å¼ã
     */

  }, {
    key: "beforeBrush",
    value: function beforeBrush(ctx, isHighlight) {
      var style = this.style;

      if (this.brushTypeOnly) {
        style.brushType = this.brushTypeOnly;
      }

      if (isHighlight) {
        // æ ¹æ®styleæ©å±é»è®¤é«äº®æ ·å¼
        style = this.getHighlightStyle(style, this.highlightStyle || {}, this.brushTypeOnly);
      }

      if (this.brushTypeOnly == 'stroke') {
        style.strokeColor = style.strokeColor || style.color;
      }

      ctx.save();
      this.doClip(ctx);
      this.setContext(ctx, style); // è®¾ç½®transform

      this.setTransform(ctx);
      return style;
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.prototype.afterBrush
     * @description ç»å¶åçå¤çã
     *
     * @param {CanvasRenderingContext2D} ctx - Context2D ä¸ä¸æã
     *
     */

  }, {
    key: "afterBrush",
    value: function afterBrush(ctx) {
      ctx.restore();
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.prototype.setContext
     * @description è®¾ç½® fillStyle, strokeStyle, shadow ç­éç¨ç»å¶æ ·å¼ã
     *
     * @param {CanvasRenderingContext2D} ctx - Context2D ä¸ä¸æã
     * @param {Object} style - æ ·å¼ã
     *
     */

  }, {
    key: "setContext",
    value: function setContext(ctx, style) {
      var STYLE_CTX_MAP = [['color', 'fillStyle'], ['strokeColor', 'strokeStyle'], ['opacity', 'globalAlpha'], ['lineCap', 'lineCap'], ['lineJoin', 'lineJoin'], ['miterLimit', 'miterLimit'], ['lineWidth', 'lineWidth'], ['shadowBlur', 'shadowBlur'], ['shadowColor', 'shadowColor'], ['shadowOffsetX', 'shadowOffsetX'], ['shadowOffsetY', 'shadowOffsetY']];

      for (var i = 0, len = STYLE_CTX_MAP.length; i < len; i++) {
        var styleProp = STYLE_CTX_MAP[i][0];
        var styleValue = style[styleProp];
        var ctxProp = STYLE_CTX_MAP[i][1];

        if (typeof styleValue != 'undefined') {
          ctx[ctxProp] = styleValue;
        }
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.prototype.doClip
     *
     */

  }, {
    key: "doClip",
    value: function doClip(ctx) {
      var clipShapeInvTransform = SUtil_SUtil.Util_matrix.create();

      if (this.__clipShapes) {
        for (var i = 0; i < this.__clipShapes.length; i++) {
          var clipShape = this.__clipShapes[i];

          if (clipShape.needTransform) {
            var m = clipShape.transform;
            SUtil_SUtil.Util_matrix.invert(clipShapeInvTransform, m);
            ctx.transform(m[0], m[1], m[2], m[3], m[4], m[5]);
          }

          ctx.beginPath();
          clipShape.buildPath(ctx, clipShape.style);
          ctx.clip(); // Transform back

          if (clipShape.needTransform) {
            var _m = clipShapeInvTransform;
            ctx.transform(_m[0], _m[1], _m[2], _m[3], _m[4], _m[5]);
          }
        }
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.prototype.getHighlightStyle
     * @description æ ¹æ®é»è®¤æ ·å¼æ©å±é«äº®æ ·å¼
     * 
     * @param {Object} style - æ ·å¼ã
     * @param {Object} highlightStyle - é«äº®æ ·å¼ã
     * @param {string} brushTypeOnly - brushTypeOnlyã
     *
     */

  }, {
    key: "getHighlightStyle",
    value: function getHighlightStyle(style, highlightStyle, brushTypeOnly) {
      var newStyle = {};

      for (var k in style) {
        newStyle[k] = style[k];
      }

      var highlightColor = SUtil_SUtil.Util_color.getHighlightColor(); // æ ¹æ®highlightStyleæ©å±

      if (style.brushType != 'stroke') {
        // å¸¦å¡«ååç¨é«äº®è²å ç²è¾¹çº¿
        newStyle.strokeColor = highlightColor; // SMIC-æ¹æ³ä¿®æ¹ - start

        newStyle.lineWidth = style.lineWidth || 1; // åå§ä»£ç 
        //      newStyle.lineWidth = (style.lineWidth || 1)
        //          + this.getHighlightZoom();
        // ä¿®æ¹ä»£ç 1
        // if(!style.lineType || style.lineType === "solid"){
        //     newStyle.lineWidth = (style.lineWidth || 1)
        //         + this.getHighlightZoom();
        // }
        // else{
        //     newStyle.lineWidth = (style.lineWidth || 1);
        // }
        // SMIC-æ¹æ³ä¿®æ¹ - end

        newStyle.brushType = 'both';
      } else {
        if (brushTypeOnly != 'stroke') {
          // æè¾¹åçåç¨åè²å å·¥é«äº®
          newStyle.strokeColor = highlightColor; // SMIC-æ¹æ³ä¿®æ¹ - start

          newStyle.lineWidth = style.lineWidth || 1; // åå§ä»£ç 
          //      newStyle.lineWidth = (style.lineWidth || 1)
          //          + this.getHighlightZoom();
          // ä¿®æ¹ä»£ç 1
          // if(!style.lineType || style.lineType === "solid"){
          //     newStyle.lineWidth = (style.lineWidth || 1)
          //         + this.getHighlightZoom();
          // }
          // else{
          //     newStyle.lineWidth = (style.lineWidth || 1);
          // }
          // SMIC-æ¹æ³ä¿®æ¹ - end
        } else {
          // çº¿åçåç¨åè²å å·¥é«äº®
          newStyle.strokeColor = highlightStyle.strokeColor || SUtil_SUtil.Util_color.mix(style.strokeColor, SUtil_SUtil.Util_color.toRGB(highlightColor));
        }
      } // å¯èªå®ä¹è¦çé»è®¤å¼


      for (var _k in highlightStyle) {
        if (typeof highlightStyle[_k] != 'undefined') {
          newStyle[_k] = highlightStyle[_k];
        }
      }

      return newStyle;
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.prototype.getHighlightZoom
     * @description é«äº®æ¾å¤§ææåæ°ï¼å½åç»ä¸è®¾ç½®ä¸º6ï¼å¦æéè¦å·®å¼è®¾ç½®ï¼éè¿ this.type å¤æ­å®ä¾ç±»å
     *
     */

  }, {
    key: "getHighlightZoom",
    value: function getHighlightZoom() {
      return this.type != 'text' ? 6 : 2;
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.prototype.drift
     * @description ç§»å¨ä½ç½®
     *
     * @param {Object} dx - æ¨ªåæ ååã
     * @param {Object} dy - çºµåæ ååã
     *
     */

  }, {
    key: "drift",
    value: function drift(dx, dy) {
      this.position[0] += dx;
      this.position[1] += dy;
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.prototype.buildPath
     * @description æå»ºç»å¶çPathãå­ç±»å¿é¡»éæ°å®ç°æ­¤æ¹æ³ã
     *
     * @param {CanvasRenderingContext2D} ctx - Context2D ä¸ä¸æã
     * @param {Object} style - æ ·å¼ã
     */

  }, {
    key: "buildPath",
    value: function buildPath(ctx, style) {
      // eslint-disable-line no-unused-vars
      SUtil_SUtil.Util_log('buildPath not implemented in ' + this.type);
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.prototype.getRect
     * @description è®¡ç®è¿ååå´çç©å½¢ãå­ç±»å¿é¡»éæ°å®ç°æ­¤æ¹æ³ã
     *
     * @param {Object} style - æ ·å¼ã
     */

  }, {
    key: "getRect",
    value: function getRect(style) {
      // eslint-disable-line no-unused-vars
      SUtil_SUtil.Util_log('getRect not implemented in ' + this.type);
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.prototype.isCover
     * @description å¤æ­é¼ æ ä½ç½®æ¯å¦å¨å¾å½¢åã
     *
     * @param {number} x - xã
     * @param {number} y - yã
     */

  }, {
    key: "isCover",
    value: function isCover(x, y) {
      var originPos = this.getTansform(x, y);
      x = originPos[0];
      y = originPos[1]; // å¿«éé¢å¤å¹¶ä¿çå¤æ­ç©å½¢

      var rect = this.style.__rect;

      if (!rect) {
        rect = this.style.__rect = this.getRect(this.style);
      }

      if (x >= rect.x && x <= rect.x + rect.width && y >= rect.y && y <= rect.y + rect.height) {
        // ç©å½¢å
        return SUtil_SUtil.Util_area.isInside(this, this.style, x, y);
      }

      return false;
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.prototype.drawText
     * @description ç»å¶éå ææ¬ã
     *
     * @param {CanvasRenderingContext2D} ctx - Context2D ä¸ä¸æã
     * @param {string} style - æ ·å¼ã
     * @param {string} normalStyle - normalStyle é»è®¤æ ·å¼ï¼ç¨äºå®ä½æå­æ¾ç¤ºã
     */

  }, {
    key: "drawText",
    value: function drawText(ctx, style, normalStyle) {
      if (typeof style.text == 'undefined' || style.text === false) {
        return;
      } // å­ä½é¢è²ç­ç¥


      var textColor = style.textColor || style.color || style.strokeColor;
      ctx.fillStyle = textColor; // ææ¬ä¸å¾å½¢é´ç©ºç½é´é

      var dd = 10;
      var al; // ææ¬æ°´å¹³å¯¹é½

      var bl; // ææ¬åç´å¯¹é½

      var tx; // ææ¬æ¨ªåæ 

      var ty; // ææ¬çºµåæ 

      var textPosition = style.textPosition // ç¨æ·å®ä¹
      || this.textPosition // shapeé»è®¤
      || 'top'; // å¨å±é»è®¤
      // Smic æ¹æ³ä¿®æ¹ -start

      var __OP = [];

      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        __OP = [0, 0];
      } else {
        __OP = this.refOriginalPosition;
      } //åä»£ç ï¼
      // Smic æ¹æ³ä¿®æ¹ -end


      switch (textPosition) {
        case 'inside':
        case 'top':
        case 'bottom':
        case 'left':
        case 'right':
          if (this.getRect) {
            var rect = (normalStyle || style).__rect || this.getRect(normalStyle || style);

            switch (textPosition) {
              case 'inside':
                tx = rect.x + rect.width / 2;
                ty = rect.y + rect.height / 2;
                al = 'center';
                bl = 'middle';

                if (style.brushType != 'stroke' && textColor == style.color) {
                  ctx.fillStyle = '#fff';
                }

                break;

              case 'left':
                tx = rect.x - dd;
                ty = rect.y + rect.height / 2;
                al = 'end';
                bl = 'middle';
                break;

              case 'right':
                tx = rect.x + rect.width + dd;
                ty = rect.y + rect.height / 2;
                al = 'start';
                bl = 'middle';
                break;

              case 'top':
                tx = rect.x + rect.width / 2;
                ty = rect.y - dd;
                al = 'center';
                bl = 'bottom';
                break;

              case 'bottom':
                tx = rect.x + rect.width / 2;
                ty = rect.y + rect.height + dd;
                al = 'center';
                bl = 'top';
                break;
            }
          }

          break;

        case 'start':
        case 'end':
          var xStart = 0;
          var xEnd = 0;
          var yStart = 0;
          var yEnd = 0;

          if (typeof style.pointList != 'undefined') {
            var pointList = style.pointList;

            if (pointList.length < 2) {
              // å°äº2ä¸ªç¹å°±ä¸ç»äº~
              return;
            }

            var length = pointList.length;

            switch (textPosition) {
              // Smic æ¹æ³ä¿®æ¹ -start
              case 'start':
                xStart = pointList[0][0] + __OP[0];
                xEnd = pointList[1][0] + __OP[0];
                yStart = pointList[0][1] + __OP[1];
                yEnd = pointList[1][1] + __OP[1];
                break;

              case 'end':
                xStart = pointList[length - 2][0] + __OP[0];
                xEnd = pointList[length - 1][0] + __OP[0];
                yStart = pointList[length - 2][1] + __OP[1];
                yEnd = pointList[length - 1][1] + __OP[1];
                break;
              //åä»£ç ï¼

              /*
               case 'start':
               xStart = pointList[0][0];
               xEnd = pointList[1][0];
               yStart = pointList[0][1];
               yEnd = pointList[1][1];
               break;
               case 'end':
               xStart = pointList[length - 2][0];
               xEnd = pointList[length - 1][0];
               yStart = pointList[length - 2][1];
               yEnd = pointList[length - 1][1];
               break;
               */
              // Smic æ¹æ³ä¿®æ¹ -end
            }
          } else {
            // Smic æ¹æ³ä¿®æ¹ -start
            xStart = style.xStart + __OP[0] || 0;
            xEnd = style.xEnd + __OP[0] || 0;
            yStart = style.yStart + __OP[1] || 0;
            yEnd = style.yEnd + __OP[1] || 0; //åä»£ç ï¼

            /*
             xStart = style.xStart || 0;
             xEnd = style.xEnd || 0;
             yStart = style.yStart || 0;
             yEnd = style.yEnd || 0;
             */
            // Smic æ¹æ³ä¿®æ¹ -end
          }

          switch (textPosition) {
            case 'start':
              al = xStart < xEnd ? 'end' : 'start';
              bl = yStart < yEnd ? 'bottom' : 'top';
              tx = xStart;
              ty = yStart;
              break;

            case 'end':
              al = xStart < xEnd ? 'start' : 'end';
              bl = yStart < yEnd ? 'top' : 'bottom';
              tx = xEnd;
              ty = yEnd;
              break;
          }

          dd -= 4;

          if (xStart && xEnd && xStart != xEnd) {
            tx -= al == 'end' ? dd : -dd;
          } else {
            al = 'center';
          }

          if (yStart != yEnd) {
            ty -= bl == 'bottom' ? dd : -dd;
          } else {
            bl = 'middle';
          }

          break;

        case 'specific':
          tx = style.textX || 0;
          ty = style.textY || 0;
          al = 'start';
          bl = 'middle';
          break;
      } // Smic æ¹æ³ä¿®æ¹ -start


      if (style.labelXOffset && !isNaN(style.labelXOffset)) {
        tx += style.labelXOffset;
      }

      if (style.labelYOffset && !isNaN(style.labelYOffset)) {
        ty += style.labelYOffset;
      } //åä»£ç ï¼
      // Smic æ¹æ³ä¿®æ¹ -end


      if (tx != null && ty != null) {
        Shape._fillText(ctx, style.text, tx, ty, style.textFont, style.textAlign || al, style.textBaseline || bl);
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.prototype.modSelf
     * @description å¾å½¢åçæ¹å
     */

  }, {
    key: "modSelf",
    value: function modSelf() {
      this.__dirty = true;

      if (this.style) {
        this.style.__rect = null;
      }

      if (this.highlightStyle) {
        this.highlightStyle.__rect = null;
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.prototype.isSilent
     * @description å¾å½¢æ¯å¦ä¼è§¦åäºä»¶ï¼éè¿ bind ç»å®çäºä»¶
     */

  }, {
    key: "isSilent",
    value: function isSilent() {
      return !(this.hoverable || this.draggable || this.clickable || this.onmousemove || this.onmouseover || this.onmouseout || this.onmousedown || this.onmouseup || this.onclick || this.ondragenter || this.ondragover || this.ondragleave || this.ondrop);
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.prototype.setCtxGlobalAlpha
     * @description è®¾ç½® Cavans ä¸ä¸æå¨å±éæåº¦
     *
     * @param {Object} _ctx - Cavans ä¸ä¸æ
     * @param {string} type - one of 'stroke', 'fill', or 'reset'
     * @param {Object} style - Symbolizer hash
     */

  }, {
    key: "setCtxGlobalAlpha",
    value: function setCtxGlobalAlpha(_ctx, type, style) {
      if (type === "fill") {
        _ctx.globalAlpha = typeof style["fillOpacity"] === "undefined" ? typeof style["opacity"] === "undefined" ? 1 : style['opacity'] : style['fillOpacity'];
      } else if (type === "stroke") {
        _ctx.globalAlpha = typeof style["strokeOpacity"] === "undefined" ? typeof style["opacity"] === "undefined" ? 1 : style['opacity'] : style['strokeOpacity'];
      } else {
        _ctx.globalAlpha = typeof style["opacity"] === "undefined" ? 1 : style['opacity'];
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.prototype._fillText
     * @description å¡«åææ¬
     */

  }], [{
    key: "_fillText",
    value: function _fillText(ctx, text, x, y, textFont, textAlign, textBaseline) {
      if (textFont) {
        ctx.font = textFont;
      }

      ctx.textAlign = textAlign;
      ctx.textBaseline = textBaseline;

      var rect = Shape._getTextRect(text, x, y, textFont, textAlign, textBaseline);

      text = (text + '').split('\n');
      var lineHeight = SUtil_SUtil.Util_area.getTextHeight('ZH', textFont);

      switch (textBaseline) {
        case 'top':
          y = rect.y;
          break;

        case 'bottom':
          y = rect.y + lineHeight;
          break;

        default:
          y = rect.y + lineHeight / 2;
      }

      for (var i = 0, l = text.length; i < l; i++) {
        ctx.fillText(text[i], x, y);
        y += lineHeight;
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Shape._getTextRect
     * @description è¿åç©å½¢åºåï¼ç¨äºå±é¨å·æ°åæå­å®ä½
     *
     * @param {string} text - textã
     * @param {number} x - xã
     * @param {number} y - yã
     * @param {string} textFont -  textFontã
     * @param {string} textAlign - textAlignã
     * @param {string} textBaseline - textBaselineã
     * @return {Object} ç©å½¢åºåã
     */

  }, {
    key: "_getTextRect",
    value: function _getTextRect(text, x, y, textFont, textAlign, textBaseline) {
      var width = SUtil_SUtil.Util_area.getTextWidth(text, textFont);
      var lineHeight = SUtil_SUtil.Util_area.getTextHeight('ZH', textFont);
      text = (text + '').split('\n');

      switch (textAlign) {
        case 'end':
        case 'right':
          x -= width;
          break;

        case 'center':
          x -= width / 2;
          break;
      }

      switch (textBaseline) {
        case 'top':
          break;

        case 'bottom':
          y -= lineHeight * text.length;
          break;

        default:
          y -= lineHeight * text.length / 2;
      }

      return {
        x: x,
        y: y,
        width: width,
        height: lineHeight * text.length
      };
    }
  }]);

  return Shape;
}(SuperMap.mixin(Eventful, Transformable));
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/SmicPoint.js
function SmicPoint_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SmicPoint_typeof = function _typeof(obj) { return typeof obj; }; } else { SmicPoint_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SmicPoint_typeof(obj); }

function SmicPoint_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SmicPoint_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SmicPoint_createClass(Constructor, protoProps, staticProps) { if (protoProps) SmicPoint_defineProperties(Constructor.prototype, protoProps); if (staticProps) SmicPoint_defineProperties(Constructor, staticProps); return Constructor; }

function SmicPoint_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SmicPoint_get = Reflect.get; } else { SmicPoint_get = function _get(target, property, receiver) { var base = SmicPoint_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SmicPoint_get(target, property, receiver || target); }

function SmicPoint_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SmicPoint_getPrototypeOf(object); if (object === null) break; } return object; }

function SmicPoint_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SmicPoint_setPrototypeOf(subClass, superClass); }

function SmicPoint_setPrototypeOf(o, p) { SmicPoint_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SmicPoint_setPrototypeOf(o, p); }

function SmicPoint_createSuper(Derived) { var hasNativeReflectConstruct = SmicPoint_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SmicPoint_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SmicPoint_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SmicPoint_possibleConstructorReturn(this, result); }; }

function SmicPoint_possibleConstructorReturn(self, call) { if (call && (SmicPoint_typeof(call) === "object" || typeof call === "function")) { return call; } return SmicPoint_assertThisInitialized(self); }

function SmicPoint_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SmicPoint_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SmicPoint_getPrototypeOf(o) { SmicPoint_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SmicPoint_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @private
 * @class  SuperMap.LevelRenderer.Shape.SmicPoint
 * @category Visualization Theme
 * @classdesc ç¹ã
 * @extends SuperMap.LevelRenderer.Shape
 * @example
 *   var shape = new SuperMap.LevelRenderer.Shape.SmicPoint({
 *       style: {
 *           x: 100,
 *           y: 100,
 *           r: 40,
 *           brushType: 'both',
 *           color: 'blue',
 *           strokeColor: 'red',
 *           lineWidth: 3,
 *           text: 'point'
 *       }
 *   });
 *   levelRenderer.addShape(shape);
 *
 *
 */

var SmicPoint = /*#__PURE__*/function (_Shape) {
  SmicPoint_inherits(SmicPoint, _Shape);

  var _super = SmicPoint_createSuper(SmicPoint);

  /**
   * @member {Object} SuperMap.LevelRenderer.Shape.SmicPoint.prototype.style
   * @description ç»å¶æ ·å¼ã
   *
   * @param {number} style.x - åå¿xåæ ï¼å¿è®¾åæ°ã
   * @param {number} style.y - åå¿yåæ ï¼å¿è®¾åæ°ã
   * @param {number} style.r - åå¾ï¼å¿è®¾åæ°ã
   * @param {string} style.brushType - ç»ç¬ç±»åãå¯è®¾å¼ï¼"fill", "stroke", "both"ãé»è®¤å¼ï¼"fill"ã
   * @param {string} style.color - å¡«åé¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} style.strokeColor - æè¾¹é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} style.lineCape - çº¿å¸½æ ·å¼ãå¯è®¾å¼ï¼"butt", "round", "square"ãé»è®¤å¼ï¼"butt"ã
   * @param {number} style.lineWidth - æè¾¹å®½åº¦ãé»è®¤å¼ï¼1ã
   * @param {number} style.opacity - ç»å¶éæåº¦ãé»è®¤å¼ï¼1ã
   * @param {number} style.shadowBlur - é´å½±æ¨¡ç³åº¦ï¼å¤§äº0ææãé»è®¤å¼ï¼0ã
   * @param {number} style.shadowColor - é´å½±é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {number} style.shadowOffsetX - é´å½±æ¨ªååç§»ãé»è®¤å¼ï¼0ã
   * @param {number} style.shadowOffsetY -  é´å½±çºµååç§»ãé»è®¤å¼ï¼0ã
   * @param {string} style.text -  å¾å½¢ä¸­çéå ææ¬ãé»è®¤å¼ï¼""ã
   * @param {string} style.textColor - ææ¬é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} style.textFont - éå ææ¬æ ·å¼ãç¤ºä¾:'bold 18px verdana'ã
   * @param {string} style.textPosition - éå ææ¬ä½ç½®ãå¯è®¾å¼ï¼"inside", "left", "right", top", "bottom", "end"ãé»è®¤å¼ï¼"end"ã
   * @param {string} style.textAlign - éå ææ¬æ°´å¹³å¯¹é½ãå¯è®¾å¼ï¼"start", "end", "left", "right", "center"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   * @param {string} style.textBaseline - éå ææ¬åç´å¯¹é½ãå¯è®¾å¼ï¼"top", "bottom", "middle", "alphabetic", "hanging", "ideographic"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   */
  //æå¼æ¥å£ style

  /**
   * @function SuperMap.LevelRenderer.Shape.SmicPoint.constructor
   * @description æé å½æ°ã
   *
   * @param {Array} options - shape çéç½®ï¼optionsï¼é¡¹ï¼å¯ä»¥æ¯ shape çèªæå±æ§ï¼ä¹å¯ä»¥æ¯èªå®ä¹çå±æ§ã
   *
   */
  function SmicPoint(options) {
    var _this;

    SmicPoint_classCallCheck(this, SmicPoint);

    _this = _super.call(this, options);
    /**
     * @member {string} SuperMap.LevelRenderer.Shape.SmicPoint.prototype.type
     * @description å¾å½¢ç±»åã
     */

    _this.type = 'smicpoint';

    if (!_this.refOriginalPosition || _this.refOriginalPosition.length !== 2) {
      _this.refOriginalPosition = [0, 0];
    }

    _this.CLASS_NAME = "SuperMap.LevelRenderer.Shape.SmicPoint";
    return _this;
  }
  /**
   * @function cdestroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  SmicPoint_createClass(SmicPoint, [{
    key: "destroy",
    value: function destroy() {
      this.type = null;

      SmicPoint_get(SmicPoint_getPrototypeOf(SmicPoint.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicPoint.prototype.buildPath
     * @description åå»ºç¹è§¦ã
     *
     * @param {CanvasRenderingContext2D} ctx - Context2D ä¸ä¸æã
     * @param {Object} style - styleã
     *
     */

  }, {
    key: "buildPath",
    value: function buildPath(ctx, style) {
      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;
      ctx.arc(style.x + __OP[0], style.y + __OP[1], style.r, 0, Math.PI * 2, true);
      return;
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicPoint.prototype.getRect
     * @description è®¡ç®è¿åç¹çåå´çç©å½¢ãè¯¥åå´çæ¯ç´æ¥ä»åä¸ªæ§å¶ç¹è®¡ç®ï¼å¹¶éæå°åå´çã
     *
     * @param {Object} style - style
     * @return {Object} è¾¹æ¡å¯¹è±¡ãåå«å±æ§ï¼xï¼yï¼widthï¼heightã
     */

  }, {
    key: "getRect",
    value: function getRect(style) {
      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;

      if (style.__rect) {
        return style.__rect;
      }

      var lineWidth;

      if (style.brushType == 'stroke' || style.brushType == 'fill') {
        lineWidth = style.lineWidth || 1;
      } else {
        lineWidth = 0;
      }

      style.__rect = {
        x: Math.round(style.x + __OP[0] - style.r - lineWidth / 2),
        y: Math.round(style.y + __OP[1] - style.r - lineWidth / 2),
        width: style.r * 2 + lineWidth,
        height: style.r * 2 + lineWidth
      };
      return style.__rect;
    }
  }]);

  return SmicPoint;
}(Shape_Shape);
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/SmicText.js
function SmicText_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SmicText_typeof = function _typeof(obj) { return typeof obj; }; } else { SmicText_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SmicText_typeof(obj); }

function SmicText_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SmicText_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SmicText_createClass(Constructor, protoProps, staticProps) { if (protoProps) SmicText_defineProperties(Constructor.prototype, protoProps); if (staticProps) SmicText_defineProperties(Constructor, staticProps); return Constructor; }

function SmicText_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SmicText_get = Reflect.get; } else { SmicText_get = function _get(target, property, receiver) { var base = SmicText_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SmicText_get(target, property, receiver || target); }

function SmicText_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SmicText_getPrototypeOf(object); if (object === null) break; } return object; }

function SmicText_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SmicText_setPrototypeOf(subClass, superClass); }

function SmicText_setPrototypeOf(o, p) { SmicText_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SmicText_setPrototypeOf(o, p); }

function SmicText_createSuper(Derived) { var hasNativeReflectConstruct = SmicText_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SmicText_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SmicText_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SmicText_possibleConstructorReturn(this, result); }; }

function SmicText_possibleConstructorReturn(self, call) { if (call && (SmicText_typeof(call) === "object" || typeof call === "function")) { return call; } return SmicText_assertThisInitialized(self); }

function SmicText_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SmicText_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SmicText_getPrototypeOf(o) { SmicText_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SmicText_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @private
 * @class  SuperMap.LevelRenderer.Shape.SmicText
 * @category Visualization Theme
 * @extends {SuperMap.LevelRenderer.Shape}
 * @example
 *   var shape = new SuperMap.LevelRenderer.Shape.SmicText({
 *         style: {
 *             text: 'Label',
 *             x: 100,
 *             y: 100,
 *             textFont: '14px Arial'
 *         }
 *     });
 *   levelRenderer.addShape(shape);
 *
 */

var SmicText = /*#__PURE__*/function (_Shape) {
  SmicText_inherits(SmicText, _Shape);

  var _super = SmicText_createSuper(SmicText);

  /**
   * @member {Object} SuperMap.LevelRenderer.Shape.SmicText.prototype.style
   * @description ç»å¶æ ·å¼ã
   *
   * @param {number} style.x - æ¨ªåæ ï¼å¿è®¾åæ°ã
   * @param {number} style.y - çºµåæ ï¼å¿è®¾åæ°ã
   * @param {string} style.text - å¾å½¢ä¸­çéå ææ¬ãé»è®¤å¼ï¼""ã
   * @param {number} style.maxWidth - æå¤§å®½åº¦éå¶ãé»è®¤å¼ï¼nullã
   * @param {string} style.textFont - éå ææ¬æ ·å¼ãç¤ºä¾:'bold 18px verdana'ã
   * @param {string} style.textAlign - éå ææ¬æ°´å¹³å¯¹é½ãå¯è®¾å¼ï¼"start", "end", "left", "right", "center"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   * @param {string} style.textBaseline - éå ææ¬åç´å¯¹é½ãå¯è®¾å¼ï¼"top", "bottom", "middle", "alphabetic", "hanging", "ideographic"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   * @param {string} style.brushType -ç»ç¬ç±»åãå¯è®¾å¼ï¼"fill", "stroke", "both"ãé»è®¤å¼ï¼"fill"ã
   * @param {string} style.color - å¡«åé¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} style.strokeColor - æè¾¹é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {number} style.lineWidth - æè¾¹å®½åº¦ãé»è®¤å¼ï¼1ã
   * @param {number} style.opacity - ç»å¶éæåº¦ãé»è®¤å¼ï¼1ã
   * @param {number} style.shadowBlur - é´å½±æ¨¡ç³åº¦ï¼å¤§äº0ææãé»è®¤å¼ï¼0ã
   * @param {number} style.shadowColor - é´å½±é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {number} style.shadowOffsetX - é´å½±æ¨ªååç§»ãé»è®¤å¼ï¼0ã
   * @param {number} style.shadowOffsetY - é´å½±çºµååç§»ãé»è®¤å¼ï¼0ã
   */
  //æå¼æ¥å£ style

  /**
   * @function SuperMap.LevelRenderer.Shape.SmicText.constructor
   * @description æé å½æ°ã
   *
   * @param {Array} options - shape çéç½®ï¼optionsï¼é¡¹ï¼å¯ä»¥æ¯ shape çèªæå±æ§ï¼ä¹å¯ä»¥æ¯èªå®ä¹çå±æ§ã
   *
   */
  function SmicText(options) {
    var _this;

    SmicText_classCallCheck(this, SmicText);

    _this = _super.call(this, options);
    /**
     * @member {string} SuperMap.LevelRenderer.Shape.SmicText.prototype.type
     * @description å¾å½¢ç±»å.
     */

    _this.type = 'smictext';

    if (!_this.refOriginalPosition || _this.refOriginalPosition.length !== 2) {
      _this.refOriginalPosition = [0, 0];
    }

    _this.CLASS_NAME = "SuperMap.LevelRenderer.Shape.SmicText";
    return _this;
  }
  /**
   * @function SuperMap.LevelRenderer.Shape.SmicText.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  SmicText_createClass(SmicText, [{
    key: "destroy",
    value: function destroy() {
      this.type = null;

      SmicText_get(SmicText_getPrototypeOf(SmicText.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicText.prototype.brush
     * @description ç¬è§¦ã
     *
     * @param {CanvasRenderingContext2D} ctx - Context2D ä¸ä¸æã
     * @param {boolean} isHighlight - æ¯å¦ä½¿ç¨é«äº®å±æ§ã
     *
     */

  }, {
    key: "brush",
    value: function brush(ctx, isHighlight) {
      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;
      var style = this.style;

      if (isHighlight) {
        // æ ¹æ®styleæ©å±é»è®¤é«äº®æ ·å¼
        style = this.getHighlightStyle(style, this.highlightStyle || {});
      }

      if (typeof style.text == 'undefined' || style.text === false) {
        return;
      }

      ctx.save();
      this.doClip(ctx);
      this.setContext(ctx, style); // è®¾ç½®transform

      this.setTransform(ctx);

      if (style.textFont) {
        ctx.font = style.textFont;
      }

      ctx.textAlign = style.textAlign || 'start';
      ctx.textBaseline = style.textBaseline || 'middle';
      var text = (style.text + '').split('\n');
      var lineHeight = SUtil_SUtil.Util_area.getTextHeight('ZH', style.textFont);
      var rect = this.getRectNoRotation(style); // var x = style.x;

      var x = style.x + __OP[0];
      var y;

      if (style.textBaseline == 'top') {
        y = rect.y;
      } else if (style.textBaseline == 'bottom') {
        y = rect.y + lineHeight;
      } else {
        y = rect.y + lineHeight / 2;
      }

      var ox = style.x + __OP[0];
      var oy = style.y + __OP[1]; //ææ¬ç»å¶

      for (var i = 0, l = text.length; i < l; i++) {
        //æ¯å¦æ¸²æç©å½¢èæ¯åé¢è²
        if (style.labelRect) {
          //+4,-2æ¯ä¸ºäºè®©æå­è·è¾¹æ¡å·¦å³è¾¹ç¼æç¹é´é
          ctx.fillRect(rect.x - 2, rect.y, rect.width + 4, rect.height);
          ctx.fillStyle = style.strokeColor;
          ctx.strokeRect(rect.x - 2, rect.y, rect.width + 4, rect.height);
          ctx.fillStyle = style.textColor;
        }

        switch (style.brushType) {
          case 'stroke':
            this.setCtxGlobalAlpha(ctx, "stroke", style);

            if (style.textRotation && style.textRotation !== 0) {
              ctx.save();
              ctx.translate(ox, oy);
              ctx.rotate(style.textRotation * Math.PI / 180);

              if (style.textBaseline == 'top') {
                if (style.maxWidth) {
                  ctx.strokeText(text[i], 0, lineHeight * i, style.maxWidth);
                } else {
                  ctx.strokeText(text[i], 0, lineHeight * i);
                }
              } else if (style.textBaseline == 'bottom') {
                if (style.maxWidth) {
                  ctx.strokeText(text[i], 0, lineHeight * (i + 1) - rect.height, style.maxWidth);
                } else {
                  ctx.strokeText(text[i], 0, lineHeight * (i + 1) - rect.height);
                }
              } else {
                if (style.maxWidth) {
                  ctx.strokeText(text[i], 0, lineHeight * (i + 1) - rect.height / 2 - lineHeight / 2, style.maxWidth);
                } else {
                  ctx.strokeText(text[i], 0, lineHeight * (i + 1) - rect.height / 2 - lineHeight / 2);
                }
              }

              ctx.restore();
            } else {
              if (style.maxWidth) {
                ctx.strokeText(text[i], x, y, style.maxWidth);
              } else {
                ctx.strokeText(text[i], x, y);
              }
            }

            this.setCtxGlobalAlpha(ctx, "reset", style);
            break;

          case 'both':
            if (style.textRotation && style.textRotation !== 0) {
              ctx.save();
              ctx.translate(ox, oy);
              ctx.rotate(style.textRotation * Math.PI / 180);

              if (style.textBaseline == 'top') {
                if (style.maxWidth) {
                  this.setCtxGlobalAlpha(ctx, "fill", style);
                  ctx.fillText(text[i], 0, lineHeight * i, style.maxWidth);
                  this.setCtxGlobalAlpha(ctx, "reset", style);
                  this.setCtxGlobalAlpha(ctx, "stroke", style);
                  ctx.strokeText(text[i], 0, lineHeight * i, style.maxWidth);
                  this.setCtxGlobalAlpha(ctx, "reset", style);
                } else {
                  this.setCtxGlobalAlpha(ctx, "fill", style);
                  ctx.fillText(text[i], 0, lineHeight * i);
                  this.setCtxGlobalAlpha(ctx, "reset", style);
                  this.setCtxGlobalAlpha(ctx, "stroke", style);
                  ctx.strokeText(text[i], 0, lineHeight * i);
                  this.setCtxGlobalAlpha(ctx, "reset", style);
                }
              } else if (style.textBaseline == 'bottom') {
                if (style.maxWidth) {
                  this.setCtxGlobalAlpha(ctx, "fill", style);
                  ctx.fillText(text[i], 0, lineHeight * (i + 1) - rect.height, style.maxWidth);
                  this.setCtxGlobalAlpha(ctx, "reset", style);
                  this.setCtxGlobalAlpha(ctx, "stroke", style);
                  ctx.strokeText(text[i], 0, lineHeight * (i + 1) - rect.height, style.maxWidth);
                  this.setCtxGlobalAlpha(ctx, "reset", style);
                } else {
                  this.setCtxGlobalAlpha(ctx, "fill", style);
                  ctx.fillText(text[i], 0, lineHeight * (i + 1) - rect.height);
                  this.setCtxGlobalAlpha(ctx, "reset", style);
                  this.setCtxGlobalAlpha(ctx, "stroke", style);
                  ctx.strokeText(text[i], 0, lineHeight * (i + 1) - rect.height);
                  this.setCtxGlobalAlpha(ctx, "reset", style);
                }
              } else {
                if (style.maxWidth) {
                  this.setCtxGlobalAlpha(ctx, "fill", style);
                  ctx.fillText(text[i], 0, lineHeight * (i + 1) - rect.height / 2 - lineHeight / 2, style.maxWidth);
                  this.setCtxGlobalAlpha(ctx, "reset", style);
                  this.setCtxGlobalAlpha(ctx, "stroke", style);
                  ctx.strokeText(text[i], 0, lineHeight * (i + 1) - rect.height / 2 - lineHeight / 2, style.maxWidth);
                  this.setCtxGlobalAlpha(ctx, "reset", style);
                } else {
                  this.setCtxGlobalAlpha(ctx, "fill", style);
                  ctx.fillText(text[i], 0, lineHeight * (i + 1) - rect.height / 2 - lineHeight / 2);
                  this.setCtxGlobalAlpha(ctx, "reset", style);
                  this.setCtxGlobalAlpha(ctx, "stroke", style);
                  ctx.strokeText(text[i], 0, lineHeight * (i + 1) - rect.height / 2 - lineHeight / 2);
                  this.setCtxGlobalAlpha(ctx, "reset", style);
                }
              }

              ctx.restore();
            } else {
              if (style.maxWidth) {
                this.setCtxGlobalAlpha(ctx, "fill", style);
                ctx.fillText(text[i], x, y, style.maxWidth);
                this.setCtxGlobalAlpha(ctx, "reset", style);
                this.setCtxGlobalAlpha(ctx, "stroke", style);
                ctx.strokeText(text[i], x, y, style.maxWidth);
                this.setCtxGlobalAlpha(ctx, "reset", style);
              } else {
                this.setCtxGlobalAlpha(ctx, "fill", style);
                ctx.fillText(text[i], x, y);
                this.setCtxGlobalAlpha(ctx, "reset", style);
                this.setCtxGlobalAlpha(ctx, "stroke", style);
                ctx.strokeText(text[i], x, y);
                this.setCtxGlobalAlpha(ctx, "reset", style);
              }
            }

            break;

          default:
            //fill or others
            this.setCtxGlobalAlpha(ctx, "fill", style);

            if (style.textRotation && style.textRotation !== 0) {
              ctx.save();
              ctx.translate(ox, oy);
              ctx.rotate(style.textRotation * Math.PI / 180);

              if (style.textBaseline == 'top') {
                if (style.maxWidth) {
                  ctx.fillText(text[i], 0, lineHeight * i, style.maxWidth);
                } else {
                  ctx.fillText(text[i], 0, lineHeight * i);
                }
              } else if (style.textBaseline == 'bottom') {
                if (style.maxWidth) {
                  ctx.fillText(text[i], 0, lineHeight * (i + 1) - rect.height, style.maxWidth);
                } else {
                  ctx.fillText(text[i], 0, lineHeight * (i + 1) - rect.height);
                }
              } else {
                if (style.maxWidth) {
                  ctx.fillText(text[i], 0, lineHeight * (i + 1) - rect.height / 2 - lineHeight / 2, style.maxWidth);
                } else {
                  ctx.fillText(text[i], 0, lineHeight * (i + 1) - rect.height / 2 - lineHeight / 2);
                }
              }

              ctx.restore();
            } else {
              if (style.maxWidth) {
                ctx.fillText(text[i], x, y, style.maxWidth);
              } else {
                ctx.fillText(text[i], x, y);
              }
            }

            this.setCtxGlobalAlpha(ctx, "reset", style);
        }

        y += lineHeight;
      }

      ctx.restore();
      return;
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicText.prototype.getRect
     * @description è¿åæå­åå´çç©å½¢
     */

  }, {
    key: "getRect",
    value: function getRect(style) {
      if (style.__rect) {
        return style.__rect;
      }

      var left, top, right, bottom;
      var tbg = this.getTextBackground(style, true);

      for (var i = 0, len = tbg.length; i < len; i++) {
        var poi = tbg[i]; //ç¨ç¬¬ä¸ä¸ªç¹åå§å

        if (i == 0) {
          left = poi[0];
          right = poi[0];
          top = poi[1];
          bottom = poi[1];
        } else {
          if (poi[0] < left) {
            left = poi[0];
          }

          if (poi[0] > right) {
            right = poi[0];
          }

          if (poi[1] < top) {
            top = poi[1];
          }

          if (poi[1] > bottom) {
            bottom = poi[1];
          }
        }
      }

      style.__rect = {
        x: left,
        y: top,
        width: right - left,
        height: bottom - top
      };
      return style.__rect;
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicText.prototype.getRectNoRotation
     * @description è¿åå¿½ç¥æè½¬åmaxWidthæ¶æå­åå´çç©å½¢
     */

  }, {
    key: "getRectNoRotation",
    value: function getRectNoRotation(style) {
      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;
      var lineHeight = SUtil_SUtil.Util_area.getTextHeight('ZH', style.textFont);
      var width = SUtil_SUtil.Util_area.getTextWidth(style.text, style.textFont);
      var height = SUtil_SUtil.Util_area.getTextHeight(style.text, style.textFont); //å¤çæå­ä½ç½®ï¼æ³¨ï¼ææ¬çç»å¶æ¯ç±æ­¤ rect å³å®

      var textX = style.x + __OP[0]; // é»è®¤start == left

      if (style.textAlign == 'end' || style.textAlign == 'right') {
        textX -= width;
      } else if (style.textAlign == 'center') {
        textX -= width / 2;
      }

      var textY;

      if (style.textBaseline == 'top') {
        // textY = style.y;
        textY = style.y + __OP[1];
      } else if (style.textBaseline == 'bottom') {
        textY = style.y + __OP[1] - height;
      } else {
        // middle
        textY = style.y + __OP[1] - height / 2;
      }

      var isWidthChangeByMaxWidth = false;
      var widthBeforeChangeByMaxWidth; //å¤ç maxWidth

      if (style.maxWidth) {
        var maxWidth = parseInt(style.maxWidth);

        if (maxWidth < width) {
          widthBeforeChangeByMaxWidth = width;
          isWidthChangeByMaxWidth = true;
          width = maxWidth;
        }

        textX = style.x + __OP[0];

        if (style.textAlign == 'end' || style.textAlign == 'right') {
          textX -= width;
        } else if (style.textAlign == 'center') {
          textX -= width / 2;
        }
      } //å¤çæä½å­


      if (style.textFont) {
        var textFont = style.textFont;
        var textFontStr = textFont.toLowerCase();

        if (textFontStr.indexOf("italic") > -1) {
          if (isWidthChangeByMaxWidth === true) {
            width += lineHeight / 3 * (width / widthBeforeChangeByMaxWidth);
          } else {
            width += lineHeight / 3;
          }
        }
      }

      var rect = {
        x: textX,
        y: textY,
        width: width,
        height: height
      };
      return rect;
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicText.prototype.getTextBackground
     * @description è·åææ¬èæ¯æ¡èå´
     * 
     * @param {Object} style - æ ·å¼ã
     * @param {boolean} redo - æ¯å¦å¼ºå¶éæ°è®¡ç® textBackgroundã
     */

  }, {
    key: "getTextBackground",
    value: function getTextBackground(style, redo) {
      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;

      if (!redo && style.__textBackground) {
        return style.__textBackground;
      } //ä¸æè½¬æ¶ç©å½¢æ¡


      var rect = this.getRectNoRotation(style); //æè½¬ä¸­å¿ç¹

      var ox = style.x + __OP[0];
      var oy = style.y + __OP[1]; //èæ¯æ¡

      var background = [];

      if (style.textRotation && style.textRotation !== 0) {
        var textRotation = style.textRotation;
        var ltPoi = this.getRotatedLocation(rect.x, rect.y, ox, oy, textRotation);
        var rtPoi = this.getRotatedLocation(rect.x + rect.width, rect.y, ox, oy, textRotation);
        var rbPoi = this.getRotatedLocation(rect.x + rect.width, rect.y + rect.height, ox, oy, textRotation);
        var lbPoi = this.getRotatedLocation(rect.x, rect.y + rect.height, ox, oy, textRotation);
        background.push(ltPoi);
        background.push(rtPoi);
        background.push(rbPoi);
        background.push(lbPoi);
      } else {
        var _ltPoi = [rect.x, rect.y];
        var _rtPoi = [rect.x + rect.width, rect.y];
        var _rbPoi = [rect.x + rect.width, rect.y + rect.height];
        var _lbPoi = [rect.x, rect.y + rect.height];
        background.push(_ltPoi);
        background.push(_rtPoi);
        background.push(_rbPoi);
        background.push(_lbPoi);
      }

      style.__textBackground = background;
      return style.__textBackground;
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicText.prototype.getRotatedLocation
     * @description è·åä¸ä¸ªç¹ç»æè½¬ä¸­å¿é¡ºæ¶éæè½¬åçä½ç½®ãï¼æ­¤æ¹æ³ç¨äºå±å¹åæ ï¼
     * 
     * @param {number} x - æè½¬ç¹æ¨ªåæ ã
     * @param {number} y - æè½¬ç¹çºµåæ ã
     * @param {number} rx - æè½¬ä¸­å¿ç¹æ¨ªåæ ã
     * @param {number} ry - æè½¬ä¸­å¿ç¹çºµåæ ã
     * @param {number} angle - æè½¬è§åº¦ï¼åº¦ï¼ã
     * @return {Array} æè½¬åçåæ ä½ç½®ï¼é¿åº¦ä¸º 2 çä¸ç»´æ°ç»ï¼æ°ç»ç¬¬ä¸ä¸ªåç´ è¡¨ç¤º x åæ ï¼ç¬¬äºä¸ªåç´ è¡¨ç¤º y åæ ã
     */

  }, {
    key: "getRotatedLocation",
    value: function getRotatedLocation(x, y, rx, ry, angle) {
      var loc = new Array(),
          x0,
          y0;
      y = -y;
      ry = -ry;
      angle = -angle; //é¡ºæ¶éæè½¬

      x0 = (x - rx) * Math.cos(angle / 180 * Math.PI) - (y - ry) * Math.sin(angle / 180 * Math.PI) + rx;
      y0 = (x - rx) * Math.sin(angle / 180 * Math.PI) + (y - ry) * Math.cos(angle / 180 * Math.PI) + ry;
      loc[0] = x0;
      loc[1] = -y0;
      return loc;
    }
  }]);

  return SmicText;
}(Shape_Shape);
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/SmicCircle.js
function SmicCircle_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SmicCircle_typeof = function _typeof(obj) { return typeof obj; }; } else { SmicCircle_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SmicCircle_typeof(obj); }

function SmicCircle_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SmicCircle_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SmicCircle_createClass(Constructor, protoProps, staticProps) { if (protoProps) SmicCircle_defineProperties(Constructor.prototype, protoProps); if (staticProps) SmicCircle_defineProperties(Constructor, staticProps); return Constructor; }

function SmicCircle_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SmicCircle_get = Reflect.get; } else { SmicCircle_get = function _get(target, property, receiver) { var base = SmicCircle_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SmicCircle_get(target, property, receiver || target); }

function SmicCircle_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SmicCircle_getPrototypeOf(object); if (object === null) break; } return object; }

function SmicCircle_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SmicCircle_setPrototypeOf(subClass, superClass); }

function SmicCircle_setPrototypeOf(o, p) { SmicCircle_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SmicCircle_setPrototypeOf(o, p); }

function SmicCircle_createSuper(Derived) { var hasNativeReflectConstruct = SmicCircle_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SmicCircle_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SmicCircle_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SmicCircle_possibleConstructorReturn(this, result); }; }

function SmicCircle_possibleConstructorReturn(self, call) { if (call && (SmicCircle_typeof(call) === "object" || typeof call === "function")) { return call; } return SmicCircle_assertThisInitialized(self); }

function SmicCircle_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SmicCircle_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SmicCircle_getPrototypeOf(o) { SmicCircle_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SmicCircle_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @private
 * @class  SuperMap.LevelRenderer.Shape.SmicCircle
 * @category Visualization Theme
 * @classdesc åå½¢
 * @extends SuperMap.LevelRenderer.Shape
 * @example 
 *   var shape = new SuperMap.LevelRenderer.Shape.SmicCircle({
 *         style: {
 *             x: 100,
 *             y: 100,
 *             r: 60,
 *             brushType: "both",
 *             color: "blue",
 *             strokeColor: "red",
 *             lineWidth: 3,
 *             text: "Circle"
 *         }
 *   });
 *   levelRenderer.addShape(shape);
 * 
 *
 */

var SmicCircle = /*#__PURE__*/function (_Shape) {
  SmicCircle_inherits(SmicCircle, _Shape);

  var _super = SmicCircle_createSuper(SmicCircle);

  /**
   * @member {Object} SuperMap.LevelRenderer.Shape.SmicCircle.prototype.style
   * @description ç»å¶æ ·å¼ã
   *
   * @param {number} x - åå¿xåæ ,å¿è®¾åæ°
   * @param {number} y - åå¿yåæ ï¼å¿è®¾åæ°
   * @param {number} r - åå¾ï¼å¿è®¾åæ°
   * @param {string} brushType - ç»ç¬ç±»åãå¯è®¾å¼ï¼"fill", "stroke", "both"ãé»è®¤å¼ï¼"fill"ã
   * @param {string} color - å¡«åé¢è²,é»è®¤å¼"#000000"
   * @param {string} strokeColor - æè¾¹é¢è²,é»è®¤å¼ä¸º'#000000'
   * @param {string} lineCape â çº¿å¸½æ ·å¼ï¼å¯ä»¥æ¯ butt, round, squareï¼é»è®¤æ¯butt
   * @param {number} lineWidth - æè¾¹å®½åº¦ãé»è®¤æ¯1
   * @param {number} opacity - ç»å¶éæåº¦ãé»è®¤æ¯1ï¼ä¸éæ
   * @param {number} shadowBlur - é´å½±æ¨¡ç³åº¦ï¼å¤§äº0ææï¼é»è®¤æ¯0
   * @param {string} shadowColor - é´å½±é¢è²ï¼é»è®¤æ¯'#000000'
   * @param {number} shadowOffsetX - é´å½±æ¨ªååç§»ï¼é»è®¤æ¯0
   * @param {number} shadowOffsetY - é´å½±çºµååç§»ï¼é»è®¤æ¯0
   * @param {string} text - å¾å½¢ä¸­çéå ææ¬ï¼é»è®¤æ¯0
   * @param {string} textColor - ææ¬é¢è²ï¼é»è®¤æ¯'#000000'
   * @param {string} textFont - éå ææ¬æ ·å¼ï¼eg:'bold 18px verdana'
   * @param {string} textPosition - éå ææ¬ä½ç½®, å¯ä»¥æ¯ inside, left, right, top, bottom
   * @param {string} textAlign - é»è®¤æ ¹æ®textPositionèªå¨è®¾ç½®ï¼éå ææ¬æ°´å¹³å¯¹é½ãå¯ä»¥æ¯start, end, left, right, center
   * @param {string} textBaseline é»è®¤æ ¹æ®textPositionèªå¨è®¾ç½®ï¼éå ææ¬åç´å¯¹é½ãå¯ä»¥æ¯top, bottom, middle, alphabetic, hanging, ideographic
   */
  //æå¼æ¥å£ style

  /**
   * @function SuperMap.LevelRenderer.Shape.SmicCircle.constructor
   * @description æé å½æ°ã
   *
   * @param {Array} options - shape çéç½®ï¼optionsï¼é¡¹ï¼å¯ä»¥æ¯ shape çèªæå±æ§ï¼ä¹å¯ä»¥æ¯èªå®ä¹çå±æ§ã
   *
   */
  function SmicCircle(options) {
    var _this;

    SmicCircle_classCallCheck(this, SmicCircle);

    _this = _super.call(this, options);
    /**
     * @member {string} SuperMap.LevelRenderer.Shape.SmicCircle.prototype.type
     * @description å¾å½¢ç±»åã
     */

    _this.type = 'smiccircle';

    if (!_this.refOriginalPosition || _this.refOriginalPosition.length !== 2) {
      _this.refOriginalPosition = [0, 0];
    }

    _this.CLASS_NAME = "SuperMap.LevelRenderer.Shape.SmicCircle";
    return _this;
  }
  /**
   * @function SuperMap.LevelRenderer.Shape.SmicCircle.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  SmicCircle_createClass(SmicCircle, [{
    key: "destroy",
    value: function destroy() {
      this.type = null;

      SmicCircle_get(SmicCircle_getPrototypeOf(SmicCircle.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicCircle.prototype.buildPath
     * @description åå»ºå¾å½¢è·¯å¾ã
     * 
     * @param {CanvasRenderingContext2D} ctx - Context2D ä¸ä¸æã
     * @param {Object} style - styleã
     *
     */

  }, {
    key: "buildPath",
    value: function buildPath(ctx, style) {
      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;
      var x = style.x + __OP[0]; // åå¿x

      var y = style.y + __OP[1]; // åå¿y

      ctx.moveTo(x + style.r, y);
      ctx.arc(x, y, style.r, 0, Math.PI * 2, true);
      return true;
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicCircle.prototype.getRect
     * @description è¿ååå½¢åå´çç©å½¢
     * 
     * @param {Object} style - style
     * @return {Object} è¾¹æ¡å¯¹è±¡ãåå«å±æ§ï¼xï¼yï¼widthï¼heightã
     * 
     */

  }, {
    key: "getRect",
    value: function getRect(style) {
      if (style.__rect) {
        return style.__rect;
      }

      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;
      var x = style.x + __OP[0]; // åå¿x

      var y = style.y + __OP[1]; // åå¿y

      var r = style.r; // år

      var lineWidth;

      if (style.brushType == 'stroke' || style.brushType == 'fill') {
        lineWidth = style.lineWidth || 1;
      } else {
        lineWidth = 0;
      }

      style.__rect = {
        x: Math.round(x - r - lineWidth / 2),
        y: Math.round(y - r - lineWidth / 2),
        width: r * 2 + lineWidth,
        height: r * 2 + lineWidth
      };
      return style.__rect;
    }
  }]);

  return SmicCircle;
}(Shape_Shape);
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/SmicPolygon.js
function SmicPolygon_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SmicPolygon_typeof = function _typeof(obj) { return typeof obj; }; } else { SmicPolygon_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SmicPolygon_typeof(obj); }

function SmicPolygon_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SmicPolygon_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SmicPolygon_createClass(Constructor, protoProps, staticProps) { if (protoProps) SmicPolygon_defineProperties(Constructor.prototype, protoProps); if (staticProps) SmicPolygon_defineProperties(Constructor, staticProps); return Constructor; }

function SmicPolygon_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SmicPolygon_get = Reflect.get; } else { SmicPolygon_get = function _get(target, property, receiver) { var base = SmicPolygon_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SmicPolygon_get(target, property, receiver || target); }

function SmicPolygon_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SmicPolygon_getPrototypeOf(object); if (object === null) break; } return object; }

function SmicPolygon_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SmicPolygon_setPrototypeOf(subClass, superClass); }

function SmicPolygon_setPrototypeOf(o, p) { SmicPolygon_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SmicPolygon_setPrototypeOf(o, p); }

function SmicPolygon_createSuper(Derived) { var hasNativeReflectConstruct = SmicPolygon_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SmicPolygon_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SmicPolygon_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SmicPolygon_possibleConstructorReturn(this, result); }; }

function SmicPolygon_possibleConstructorReturn(self, call) { if (call && (SmicPolygon_typeof(call) === "object" || typeof call === "function")) { return call; } return SmicPolygon_assertThisInitialized(self); }

function SmicPolygon_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SmicPolygon_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SmicPolygon_getPrototypeOf(o) { SmicPolygon_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SmicPolygon_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @private
 * @class  SuperMap.LevelRenderer.Shape.SmicPolygon
 * @category Visualization Theme
 * @classdesc å¤è¾¹å½¢ã
 * @extends SuperMap.LevelRenderer.Shape
 * @example
 *   var shape = new SuperMap.LevelRenderer.Shape.SmicPolygon({
 *         style: {
 *             // 100x100 çæ­£æ¹å½¢
 *             pointList: [[0, 0], [100, 0], [100, 100], [0, 100]],
 *             color: 'blue'
 *         }
 *   });
 *   levelRenderer.addShape(shape);
 *
 */

var SmicPolygon = /*#__PURE__*/function (_Shape) {
  SmicPolygon_inherits(SmicPolygon, _Shape);

  var _super = SmicPolygon_createSuper(SmicPolygon);

  /**
   * @member {Object} SuperMap.LevelRenderer.Shape.SmicPolygon.prototype.style
   * @description ç»å¶æ ·å¼ã
   *
   * @param {Array} pointList - èç¹æ°ç»ï¼äºç»´æ°ç»ãé»è®¤å¼ï¼nullï¼å¿è®¾åæ°ãå¶å½¢å¼å¦ä¸ï¼
   * (code)
   * (start code)
   *  [
   *  [10, 20],         //åä¸ªèç¹
   *  [30, 40],
   *  [25, 30]
   *   ]
   * (end)
   * @param {string} style.smooth - æ¯å¦åå¹³æ»æå¼, å¹³æ»ç®æ³å¯ä»¥éæ© "bezier", "spline"ãé»è®¤å¼ï¼"";
   * @param {number} style.smoothConstraint - å¹³æ»çº¦æã
   * @param {string} style.brushType - ç»ç¬ç±»åãå¯è®¾å¼ï¼"fill", "stroke", "both"ãé»è®¤å¼ï¼"fill"ã
   * @param {string} style.color - å¡«åé¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} style.strokeColor - æè¾¹é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} style.lineCape - çº¿å¸½æ ·å¼ãå¯è®¾å¼ï¼"butt", "round", "square"ãé»è®¤å¼ï¼"butt"ã
   * @param {number} style.lineWidth - æè¾¹å®½åº¦ãé»è®¤å¼ï¼1ã
   * @param {number} style.opacity - ç»å¶éæåº¦ãé»è®¤å¼ï¼1ã
   * @param {number} style.shadowBlur - é´å½±æ¨¡ç³åº¦ï¼å¤§äº0ææãé»è®¤å¼ï¼0ã
   * @param {number} style.shadowColor - é´å½±é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {number} style.shadowOffsetX - é´å½±æ¨ªååç§»ãé»è®¤å¼ï¼0ã
   * @param {number} style.shadowOffsetY - é´å½±çºµååç§»ãé»è®¤å¼ï¼0ã
   * @param {string} style.text - å¾å½¢ä¸­çéå ææ¬ãé»è®¤å¼ï¼""ã
   * @param {string} style.textColor - ææ¬é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} style.textFont - éå ææ¬æ ·å¼ãç¤ºä¾:'bold 18px verdana'ã
   * @param {string} style.textPosition - éå ææ¬ä½ç½®ãå¯è®¾å¼ï¼"inside", "left", "right", top", "bottom", "end"ãé»è®¤å¼ï¼"end"ã
   * @param {string} style.textAlign - éå ææ¬æ°´å¹³å¯¹é½ãå¯è®¾å¼ï¼"start", "end", "left", "right", "center"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   * @param {string} style.textBaseline - éå ææ¬åç´å¯¹é½ãå¯è®¾å¼ï¼"top", "bottom", "middle", "alphabetic", "hanging", "ideographic"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   */
  //æå¼æ¥å£ style

  /**
   * @function SuperMap.LevelRenderer.Shape.SmicPolygon.constructor
   * @description æé å½æ°ã
   *
   * @param {Array} options - shape çéç½®ï¼optionsï¼é¡¹ï¼å¯ä»¥æ¯ shape çèªæå±æ§ï¼ä¹å¯ä»¥æ¯èªå®ä¹çå±æ§ã
   *
   */
  function SmicPolygon(options) {
    var _this;

    SmicPolygon_classCallCheck(this, SmicPolygon);

    _this = _super.call(this, options);
    /**
     * @member {string} SuperMap.LevelRenderer.Shape.SmicPolygon.prototype.type
     * @description å¾å½¢ç±»å.
     */

    _this.type = 'smicpolygon';
    /**
     * @member {Array} SuperMap.LevelRenderer.Shape.SmicPolygon.prototype._holePolygonPointList
     * @description å²æ´é¢å¤è¾¹å½¢é¡¶ç¹æ°ç»ï¼ä¸ç»´æ°ç»ï¼
     *
     */

    _this.holePolygonPointLists = null;

    if (!_this.refOriginalPosition || _this.refOriginalPosition.length !== 2) {
      _this.refOriginalPosition = [0, 0];
    }

    _this.CLASS_NAME = "SuperMap.LevelRenderer.Shape.SmicPolygon";
    return _this;
  }
  /**
   * @function SuperMap.LevelRenderer.Shape.SmicPolygon.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  SmicPolygon_createClass(SmicPolygon, [{
    key: "destroy",
    value: function destroy() {
      this.type = null;
      this.holePolygonPointLists = null;

      SmicPolygon_get(SmicPolygon_getPrototypeOf(SmicPolygon.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicPolygon.prototype.brush
     * @description ç¬è§¦ã
     *
     * @param {CanvasRenderingContext2D} ctx - Context2D ä¸ä¸æã
     * @param {boolean} isHighlight - æ¯å¦ä½¿ç¨é«äº®å±æ§ã
     *
     */

  }, {
    key: "brush",
    value: function brush(ctx, isHighlight) {
      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var style = this.style;

      if (isHighlight) {
        // æ ¹æ®styleæ©å±é»è®¤é«äº®æ ·å¼
        style = this.getHighlightStyle(style, this.highlightStyle || {});
      }

      ctx.save();
      this.setContext(ctx, style); // è®¾ç½® transform

      this.setTransform(ctx); // å fill åstroke

      var hasPath = false;

      if (style.brushType == 'fill' || style.brushType == 'both' || typeof style.brushType == 'undefined') {
        // é»è®¤ä¸ºfill
        ctx.beginPath();

        if (style.lineType == 'dashed' || style.lineType == 'dotted' || style.lineType == 'dot' || style.lineType == 'dash' || style.lineType == 'dashdot' || style.lineType == 'longdash' || style.lineType == 'longdashdot') {
          // ç¹æ®å¤çï¼èçº¿å´ä¸æpathï¼å®çº¿åbuildä¸æ¬¡
          this.buildPath(ctx, {
            lineType: 'solid',
            lineWidth: style.lineWidth,
            pointList: style.pointList
          });
        } else {
          this.buildPath(ctx, style);
          hasPath = true; // è¿ä¸ªpathè½ç¨
        }

        ctx.closePath();
        this.setCtxGlobalAlpha(ctx, "fill", style);
        ctx.fill();
        this.setCtxGlobalAlpha(ctx, "reset", style);
      }

      if (style.lineWidth > 0 && (style.brushType == 'stroke' || style.brushType == 'both')) {
        if (!hasPath) {
          ctx.beginPath();
          this.buildPath(ctx, style);
        }

        this.setCtxGlobalAlpha(ctx, "stroke", style);
        ctx.stroke();
        this.setCtxGlobalAlpha(ctx, "reset", style);
      }

      this.drawText(ctx, style, this.style); //å²æ´

      var hpStyle = Util.cloneObject(style);

      if (hpStyle.pointList) {
        if (this.holePolygonPointLists && this.holePolygonPointLists.length > 0) {
          var holePLS = this.holePolygonPointLists;
          var holePLSen = holePLS.length;

          for (var i = 0; i < holePLSen; i++) {
            var holePL = holePLS[i]; //å²æ´é¢

            hpStyle.pointList = holePL;
            ctx.globalCompositeOperation = "destination-out"; // å fill åstroke

            hasPath = false;

            if (hpStyle.brushType == 'fill' || hpStyle.brushType == 'both' || typeof hpStyle.brushType == 'undefined') {
              // é»è®¤ä¸ºfill
              ctx.beginPath();

              if (hpStyle.lineType == 'dashed' || hpStyle.lineType == 'dotted' || hpStyle.lineType == 'dot' || hpStyle.lineType == 'dash' || hpStyle.lineType == 'dashdot' || hpStyle.lineType == 'longdash' || hpStyle.lineType == 'longdashdot') {
                // ç¹æ®å¤çï¼èçº¿å´ä¸æpathï¼å®çº¿åbuildä¸æ¬¡
                this.buildPath(ctx, {
                  lineType: 'solid',
                  lineWidth: hpStyle.lineWidth,
                  pointList: hpStyle.pointList
                });
              } else {
                this.buildPath(ctx, hpStyle);
                hasPath = true; // è¿ä¸ªpathè½ç¨
              }

              ctx.closePath();
              this.setCtxGlobalAlpha(ctx, "fill", hpStyle);
              ctx.fill();
              this.setCtxGlobalAlpha(ctx, "reset", hpStyle);
            }

            if (hpStyle.lineWidth > 0 && (hpStyle.brushType == 'stroke' || hpStyle.brushType == 'both')) {
              if (!hasPath) {
                ctx.beginPath();
                this.buildPath(ctx, hpStyle);
              } //å¦ææè¾¹ï¼ååå¤ globalCompositeOperation é»è®¤å¼åæè¾¹ã


              ctx.globalCompositeOperation = "source-over";
              this.setCtxGlobalAlpha(ctx, "stroke", hpStyle);
              ctx.stroke();
              this.setCtxGlobalAlpha(ctx, "reset", hpStyle);
            } else {
              ctx.globalCompositeOperation = "source-over";
            }
          }
        }
      }

      ctx.restore();
      return;
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicPolygon.prototype.buildPath
     * @description åå»ºå¤è¾¹å½¢è·¯å¾ã
     *
     * @param {CanvasRenderingContext2D} ctx - Context2D ä¸ä¸æã
     * @param {Object} style - styleã
     *
     */

  }, {
    key: "buildPath",
    value: function buildPath(ctx, style) {
      if (style.showShadow) {
        ctx.shadowBlur = style.shadowBlur;
        ctx.shadowColor = style.shadowColor;
        ctx.shadowOffsetX = style.shadowOffsetX;
        ctx.shadowOffsetY = style.shadowOffsetY;
      }

      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition; // è½ç¶è½éç¨ brokenLineï¼ä½åºå±å¾å½¢åºäºæ§è½èèï¼éå¤ä»£ç åå°è°ç¨å§

      var pointList = style.pointList;

      if (pointList.length < 2) {
        // å°äº2ä¸ªç¹å°±ä¸ç»äº~
        return;
      }

      if (style.smooth && style.smooth !== 'spline') {
        var controlPoints = SUtil_SUtil.SUtil_smoothBezier(pointList, style.smooth, true, style.smoothConstraint, __OP);
        ctx.moveTo(pointList[0][0] + __OP[0], pointList[0][1] + __OP[1]);
        var cp1;
        var cp2;
        var p;
        var len = pointList.length;

        for (var i = 0; i < len; i++) {
          cp1 = controlPoints[i * 2];
          cp2 = controlPoints[i * 2 + 1];
          p = [pointList[(i + 1) % len][0] + __OP[0], pointList[(i + 1) % len][1] + __OP[1]];
          ctx.bezierCurveTo(cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]);
        }
      } else {
        if (style.smooth === 'spline') {
          pointList = SUtil_SUtil.SUtil_smoothSpline(pointList, true, null, __OP);
        }

        if (!style.lineType || style.lineType == 'solid') {
          // é»è®¤ä¸ºå®çº¿
          ctx.moveTo(pointList[0][0] + __OP[0], pointList[0][1] + __OP[1]);

          for (var _i = 1; _i < pointList.length; _i++) {
            ctx.lineTo(pointList[_i][0] + __OP[0], pointList[_i][1] + __OP[1]);
          }

          ctx.lineTo(pointList[0][0] + __OP[0], pointList[0][1] + __OP[1]);
        } else if (style.lineType === 'dashed' || style.lineType === 'dotted' || style.lineType === 'dot' || style.lineType === 'dash' || style.lineType === 'longdash') {
          // SMIC-æ¹æ³ä¿®æ¹ - start
          var dashLengthForStyle = style._dashLength || (style.lineWidth || 1) * (style.lineType == 'dashed' ? 5 : 1);
          style._dashLength = dashLengthForStyle;
          var dashLength = style.lineWidth || 1;
          var pattern1 = dashLength;
          var pattern2 = dashLength; //dashed

          if (style.lineType === 'dashed') {
            pattern1 *= 5;
            pattern2 *= 5;

            if (style.lineCap && style.lineCap !== "butt") {
              pattern1 -= dashLength;
              pattern2 += dashLength;
            }
          } //dotted


          if (style.lineType === 'dotted') {
            if (style.lineCap && style.lineCap !== "butt") {
              pattern1 = 1;
              pattern2 += dashLength;
            }
          } //dot


          if (style.lineType === 'dot') {
            pattern2 *= 4;

            if (style.lineCap && style.lineCap !== "butt") {
              pattern1 = 1;
              pattern2 += dashLength;
            }
          } //dash


          if (style.lineType === 'dash') {
            pattern1 *= 4;
            pattern2 *= 4;

            if (style.lineCap && style.lineCap !== "butt") {
              pattern1 -= dashLength;
              pattern2 += dashLength;
            }
          } //longdash


          if (style.lineType === 'longdash') {
            pattern1 *= 8;
            pattern2 *= 4;

            if (style.lineCap && style.lineCap !== "butt") {
              pattern1 -= dashLength;
              pattern2 += dashLength;
            }
          }

          ctx.moveTo(pointList[0][0] + __OP[0], pointList[0][1] + __OP[1]);

          for (var _i2 = 1; _i2 < pointList.length; _i2++) {
            SUtil_SUtil.SUtil_dashedLineTo(ctx, pointList[_i2 - 1][0] + __OP[0], pointList[_i2 - 1][1] + __OP[1], pointList[_i2][0] + __OP[0], pointList[_i2][1] + __OP[1], dashLength, [pattern1, pattern2]);
          }

          SUtil_SUtil.SUtil_dashedLineTo(ctx, pointList[pointList.length - 1][0] + __OP[0], pointList[pointList.length - 1][1] + __OP[1], pointList[0][0] + __OP[0], pointList[0][1] + __OP[1], dashLength, [pattern1, pattern2]);
        } else if (style.lineType === 'dashdot' || style.lineType === 'longdashdot') {
          var _dashLengthForStyle = style._dashLength || (style.lineWidth || 1) * (style.lineType == 'dashed' ? 5 : 1);

          style._dashLength = _dashLengthForStyle;

          var _dashLength = style.lineWidth || 1;

          var _pattern = _dashLength;
          var _pattern2 = _dashLength;
          var pattern3 = _dashLength;
          var pattern4 = _dashLength; //dashdot

          if (style.lineType === 'dashdot') {
            _pattern *= 4;
            _pattern2 *= 4;
            pattern4 *= 4;

            if (style.lineCap && style.lineCap !== "butt") {
              _pattern -= _dashLength;
              _pattern2 += _dashLength;
              pattern3 = 1;
              pattern4 += _dashLength;
            }
          } //longdashdot


          if (style.lineType === 'longdashdot') {
            _pattern *= 8;
            _pattern2 *= 4;
            pattern4 *= 4;

            if (style.lineCap && style.lineCap !== "butt") {
              _pattern -= _dashLength;
              _pattern2 += _dashLength;
              pattern3 = 1;
              pattern4 += _dashLength;
            }
          }

          ctx.moveTo(pointList[0][0] + __OP[0], pointList[0][1] + __OP[1]);

          for (var _i3 = 1; _i3 < pointList.length; _i3++) {
            SUtil_SUtil.SUtil_dashedLineTo(ctx, pointList[_i3 - 1][0] + __OP[0], pointList[_i3 - 1][1] + __OP[1], pointList[_i3][0] + __OP[0], pointList[_i3][1] + __OP[1], _dashLength, [_pattern, _pattern2, pattern3, pattern4]);
          }

          SUtil_SUtil.SUtil_dashedLineTo(ctx, pointList[pointList.length - 1][0] + __OP[0], pointList[pointList.length - 1][1] + __OP[1], pointList[0][0] + __OP[0], pointList[0][1] + __OP[1], _dashLength, [_pattern, _pattern2, pattern3, pattern4]);
        }
      }

      return;
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicPolygon.prototype.getRect
     * @description è®¡ç®è¿åå¤è¾¹å½¢åå´çç©éµãè¯¥åå´çæ¯ç´æ¥ä»åä¸ªæ§å¶ç¹è®¡ç®ï¼å¹¶éæå°åå´çã
     * 
     * @param {Object} style - style
     * @return {Object} è¾¹æ¡å¯¹è±¡ãåå«å±æ§ï¼xï¼yï¼widthï¼heightã
     * 
     */

  }, {
    key: "getRect",
    value: function getRect(style, refOriginalPosition) {
      var __OP;

      if (!refOriginalPosition) {
        if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
          this.refOriginalPosition = [0, 0];
        }

        __OP = this.refOriginalPosition;
      } else {
        __OP = refOriginalPosition;
      }

      if (style.__rect) {
        return style.__rect;
      }

      var minX = Number.MAX_VALUE;
      var maxX = Number.MIN_VALUE;
      var minY = Number.MAX_VALUE;
      var maxY = Number.MIN_VALUE;
      var pointList = style.pointList;

      for (var i = 0, l = pointList.length; i < l; i++) {
        if (pointList[i][0] + __OP[0] < minX) {
          minX = pointList[i][0] + __OP[0];
        }

        if (pointList[i][0] + __OP[0] > maxX) {
          maxX = pointList[i][0] + __OP[0];
        }

        if (pointList[i][1] + __OP[1] < minY) {
          minY = pointList[i][1] + __OP[1];
        }

        if (pointList[i][1] + __OP[1] > maxY) {
          maxY = pointList[i][1] + __OP[1];
        }
      }

      var lineWidth;

      if (style.brushType == 'stroke' || style.brushType == 'fill') {
        lineWidth = style.lineWidth || 1;
      } else {
        lineWidth = 0;
      }

      style.__rect = {
        x: Math.round(minX - lineWidth / 2),
        y: Math.round(minY - lineWidth / 2),
        width: maxX - minX + lineWidth,
        height: maxY - minY + lineWidth
      };
      return style.__rect;
    }
  }]);

  return SmicPolygon;
}(Shape_Shape);
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/SmicBrokenLine.js
function SmicBrokenLine_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SmicBrokenLine_typeof = function _typeof(obj) { return typeof obj; }; } else { SmicBrokenLine_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SmicBrokenLine_typeof(obj); }

function SmicBrokenLine_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SmicBrokenLine_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SmicBrokenLine_createClass(Constructor, protoProps, staticProps) { if (protoProps) SmicBrokenLine_defineProperties(Constructor.prototype, protoProps); if (staticProps) SmicBrokenLine_defineProperties(Constructor, staticProps); return Constructor; }

function SmicBrokenLine_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SmicBrokenLine_get = Reflect.get; } else { SmicBrokenLine_get = function _get(target, property, receiver) { var base = SmicBrokenLine_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SmicBrokenLine_get(target, property, receiver || target); }

function SmicBrokenLine_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SmicBrokenLine_getPrototypeOf(object); if (object === null) break; } return object; }

function SmicBrokenLine_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SmicBrokenLine_setPrototypeOf(subClass, superClass); }

function SmicBrokenLine_setPrototypeOf(o, p) { SmicBrokenLine_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SmicBrokenLine_setPrototypeOf(o, p); }

function SmicBrokenLine_createSuper(Derived) { var hasNativeReflectConstruct = SmicBrokenLine_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SmicBrokenLine_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SmicBrokenLine_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SmicBrokenLine_possibleConstructorReturn(this, result); }; }

function SmicBrokenLine_possibleConstructorReturn(self, call) { if (call && (SmicBrokenLine_typeof(call) === "object" || typeof call === "function")) { return call; } return SmicBrokenLine_assertThisInitialized(self); }

function SmicBrokenLine_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SmicBrokenLine_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SmicBrokenLine_getPrototypeOf(o) { SmicBrokenLine_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SmicBrokenLine_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @private
 * @class  SuperMap.LevelRenderer.Shape.SmicBrokenLine
 * @category Visualization Theme
 * @classdesc æçº¿(ic)ã
 * @extends SuperMap.LevelRenderer.Shape
 * @example
 *   var shape = new SuperMap.LevelRenderer.Shape.SmicBrokenLine({
 *         style: {
 *             pointList: [[0, 0], [100, 100], [100, 0]],
 *             smooth: 'bezier',
 *             strokeColor: 'purple'
 *         }
 *   });
 *   levelRenderer.addShape(shape);
 * 
 *
 */

var SmicBrokenLine = /*#__PURE__*/function (_Shape) {
  SmicBrokenLine_inherits(SmicBrokenLine, _Shape);

  var _super = SmicBrokenLine_createSuper(SmicBrokenLine);

  /**
   * @member {Object} SuperMap.LevelRenderer.Shape.SmicBrokenLine.prototype.style
   * @description ç»å¶æ ·å¼ã
   *
   * @param {Array} pointList - èç¹æ°ç»ï¼äºç»´æ°ç»ãé»è®¤å¼ï¼nullï¼å¿è®¾åæ°ãå¶å½¢å¼å¦ä¸ï¼
   * (code)
   * (start code)
   *  [
   *  [10, 20],         //åä¸ªèç¹
   *  [30, 40],
   *  [25, 30]
   *   ]
   * (end)
   * @param {string} smooth - æ¯å¦åå¹³æ»æå¼, å¹³æ»ç®æ³å¯ä»¥éæ© "bezier", "spline"ãé»è®¤å¼ï¼"";
   * @param {number} smoothConstraint - å¹³æ»çº¦æã
   * @param {string} strokeColor - æè¾¹é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} lineCape - çº¿å¸½æ ·å¼ãå¯è®¾å¼ï¼"butt", "round", "square"ãé»è®¤å¼ï¼"butt"ã
   * @param {number} lineWidth - æè¾¹å®½åº¦ãé»è®¤å¼ï¼1ã
   * @param {number} opacity - ç»å¶éæåº¦ãé»è®¤å¼ï¼1ã
   * @param {number} shadowBlur - é´å½±æ¨¡ç³åº¦ï¼å¤§äº0ææãé»è®¤å¼ï¼0ã
   * @param {number} shadowColor - é´å½±é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {number} shadowOffsetX - é´å½±æ¨ªååç§»ãé»è®¤å¼ï¼0ã
   * @param {number} shadowOffsetY - é´å½±çºµååç§»ãé»è®¤å¼ï¼0ã
   * @param {string} text - å¾å½¢ä¸­çéå ææ¬ãé»è®¤å¼ï¼""ã
   * @param {string} textColor - ææ¬é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} textFont - éå ææ¬æ ·å¼ãç¤ºä¾:'bold 18px verdana'ã
   * @param {string} textPosition - éå ææ¬ä½ç½®ãå¯è®¾å¼ï¼"inside", "left", "right", top", "bottom", "end"ãé»è®¤å¼ï¼"end"ã
   * @param {string} textAlign - éå ææ¬æ°´å¹³å¯¹é½ãå¯è®¾å¼ï¼"start", "end", "left", "right", "center"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   * @param {string} textBaseline - éå ææ¬åç´å¯¹é½ãå¯è®¾å¼ï¼"top", "bottom", "middle", "alphabetic", "hanging", "ideographic"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   */
  //æå¼æ¥å£ style

  /**
   * @function SuperMap.LevelRenderer.Shape.SmicBrokenLine.constructor
   * @description æé å½æ°ã
   *
   * @param {Array} options - shape çéç½®ï¼optionsï¼é¡¹ï¼å¯ä»¥æ¯ shape çèªæå±æ§ï¼ä¹å¯ä»¥æ¯èªå®ä¹çå±æ§ã
   *
   */
  function SmicBrokenLine(options) {
    var _this;

    SmicBrokenLine_classCallCheck(this, SmicBrokenLine);

    _this = _super.call(this, options);
    /**
     * @member {string}  SuperMap.LevelRenderer.Shape.SmicBrokenLine.prototype.brushTypeOnly
     * @description çº¿æ¡åªè½æè¾¹ã
     */

    _this.brushTypeOnly = 'stroke';
    /**
     * @member {string} SuperMap.LevelRenderer.Shape.SmicBrokenLine.prototype.textPosition
     * @description ææ¬ä½ç½®ã
     */

    _this.textPosition = 'end';
    /**
     * @member {string} SuperMap.LevelRenderer.Shape.SmicBrokenLine.prototype.type
     * @description å¾å½¢ç±»å.
     */

    _this.type = 'smicbroken-line';

    if (!_this.refOriginalPosition || _this.refOriginalPosition.length !== 2) {
      _this.refOriginalPosition = [0, 0];
    }

    _this.CLASS_NAME = "SuperMap.LevelRenderer.Shape.SmicBrokenLine";
    return _this;
  }
  /**
   * @function SuperMap.LevelRenderer.Shape.SmicBrokenLine.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  SmicBrokenLine_createClass(SmicBrokenLine, [{
    key: "destroy",
    value: function destroy() {
      this.brushTypeOnly = null;
      this.textPosition = null;
      this.type = null;

      SmicBrokenLine_get(SmicBrokenLine_getPrototypeOf(SmicBrokenLine.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicBrokenLine.prototype.buildPath
     * @description åå»ºæçº¿è·¯å¾ã
     *
     * @param {CanvasRenderingContext2D} ctx - Context2D ä¸ä¸æã
     * @param {Object} style - styleã
     *
     */

  }, {
    key: "buildPath",
    value: function buildPath(ctx, style) {
      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;
      var pointList = style.pointList;

      if (pointList.length < 2) {
        // å°äº2ä¸ªç¹å°±ä¸ç»äº~
        return;
      }

      var len = Math.min(style.pointList.length, Math.round(style.pointListLength || style.pointList.length));

      if (style.smooth && style.smooth !== 'spline') {
        var controlPoints = SUtil_SUtil.SUtil_smoothBezier(pointList, style.smooth, false, style.smoothConstraint, __OP);
        ctx.moveTo(pointList[0][0] + __OP[0], pointList[0][1] + __OP[1]);
        var cp1;
        var cp2;
        var p;

        for (var _i = 0; _i < len - 1; _i++) {
          cp1 = controlPoints[_i * 2];
          cp2 = controlPoints[_i * 2 + 1];
          p = [pointList[_i + 1][0] + __OP[0], pointList[_i + 1][1] + __OP[1]];
          ctx.bezierCurveTo(cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]);
        }
      } else {
        if (style.smooth === 'spline') {
          pointList = SUtil_SUtil.SUtil_smoothSpline(pointList, null, null, __OP);
          len = pointList.length;
        }

        if (!style.lineType || style.lineType === 'solid') {
          // é»è®¤ä¸ºå®çº¿
          ctx.moveTo(pointList[0][0] + __OP[0], pointList[0][1] + __OP[1]);

          for (var _i2 = 1; _i2 < len; _i2++) {
            ctx.lineTo(pointList[_i2][0] + __OP[0], pointList[_i2][1] + __OP[1]);
          }
        } else if (style.lineType === 'dashed' || style.lineType === 'dotted' || style.lineType === 'dot' || style.lineType === 'dash' || style.lineType === 'longdash') {
          var dashLength = style.lineWidth || 1;
          var pattern1 = dashLength;
          var pattern2 = dashLength; //dashed

          if (style.lineType === 'dashed') {
            pattern1 *= 5;
            pattern2 *= 5;

            if (style.lineCap && style.lineCap !== "butt") {
              pattern1 -= dashLength;
              pattern2 += dashLength;
            }
          } //dotted


          if (style.lineType === 'dotted') {
            if (style.lineCap && style.lineCap !== "butt") {
              pattern1 = 1;
              pattern2 += dashLength;
            }
          } //dot


          if (style.lineType === 'dot') {
            pattern2 *= 4;

            if (style.lineCap && style.lineCap !== "butt") {
              pattern1 = 1;
              pattern2 += dashLength;
            }
          } //dash


          if (style.lineType === 'dash') {
            pattern1 *= 4;
            pattern2 *= 4;

            if (style.lineCap && style.lineCap !== "butt") {
              pattern1 -= dashLength;
              pattern2 += dashLength;
            }
          } //longdash


          if (style.lineType === 'longdash') {
            pattern1 *= 8;
            pattern2 *= 4;

            if (style.lineCap && style.lineCap !== "butt") {
              pattern1 -= dashLength;
              pattern2 += dashLength;
            }
          }

          ctx.moveTo(pointList[0][0] + __OP[0], pointList[0][1] + __OP[1]);

          for (var i = 1; i < len; i++) {
            SUtil_SUtil.SUtil_dashedLineTo(ctx, pointList[i - 1][0] + __OP[0], pointList[i - 1][1] + __OP[1], pointList[i][0] + __OP[0], pointList[i][1] + __OP[1], dashLength, [pattern1, pattern2]);
          }
        } else if (style.lineType === 'dashdot' || style.lineType === 'longdashdot') {
          var _dashLength = style.lineWidth || 1;

          var _pattern = _dashLength;
          var _pattern2 = _dashLength;
          var pattern3 = _dashLength;
          var pattern4 = _dashLength; //dashdot

          if (style.lineType === 'dashdot') {
            _pattern *= 4;
            _pattern2 *= 4;
            pattern4 *= 4;

            if (style.lineCap && style.lineCap !== "butt") {
              _pattern -= _dashLength;
              _pattern2 += _dashLength;
              pattern3 = 1;
              pattern4 += _dashLength;
            }
          } //longdashdot


          if (style.lineType === 'longdashdot') {
            _pattern *= 8;
            _pattern2 *= 4;
            pattern4 *= 4;

            if (style.lineCap && style.lineCap !== "butt") {
              _pattern -= _dashLength;
              _pattern2 += _dashLength;
              pattern3 = 1;
              pattern4 += _dashLength;
            }
          }

          _dashLength = (style.lineWidth || 1) * (style.lineType === 'dashed' ? 5 : 1);
          ctx.moveTo(pointList[0][0] + __OP[0], pointList[0][1] + __OP[1]);

          for (var _i3 = 1; _i3 < len; _i3++) {
            SUtil_SUtil.SUtil_dashedLineTo(ctx, pointList[_i3 - 1][0] + __OP[0], pointList[_i3 - 1][1] + __OP[1], pointList[_i3][0] + __OP[0], pointList[_i3][1] + __OP[1], _dashLength, [_pattern, _pattern2, pattern3, pattern4]);
          }
        }
      }

      return;
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicBrokenLine.prototype.getRect
     * @description è®¡ç®è¿åæçº¿åå´çç©å½¢ãè¯¥åå´çæ¯ç´æ¥ä»åä¸ªæ§å¶ç¹è®¡ç®ï¼å¹¶éæå°åå´çã
     *
     * @param {Object} style - style
     * @return {Object} è¾¹æ¡å¯¹è±¡ãåå«å±æ§ï¼xï¼yï¼widthï¼heightã
     */

  }, {
    key: "getRect",
    value: function getRect(style) {
      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;
      return SmicPolygon.prototype.getRect.apply(this, [style, __OP]);
    }
  }]);

  return SmicBrokenLine;
}(Shape_Shape);
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/SmicImage.js
function SmicImage_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SmicImage_typeof = function _typeof(obj) { return typeof obj; }; } else { SmicImage_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SmicImage_typeof(obj); }

function SmicImage_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SmicImage_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SmicImage_createClass(Constructor, protoProps, staticProps) { if (protoProps) SmicImage_defineProperties(Constructor.prototype, protoProps); if (staticProps) SmicImage_defineProperties(Constructor, staticProps); return Constructor; }

function SmicImage_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SmicImage_get = Reflect.get; } else { SmicImage_get = function _get(target, property, receiver) { var base = SmicImage_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SmicImage_get(target, property, receiver || target); }

function SmicImage_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SmicImage_getPrototypeOf(object); if (object === null) break; } return object; }

function SmicImage_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SmicImage_setPrototypeOf(subClass, superClass); }

function SmicImage_setPrototypeOf(o, p) { SmicImage_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SmicImage_setPrototypeOf(o, p); }

function SmicImage_createSuper(Derived) { var hasNativeReflectConstruct = SmicImage_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SmicImage_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SmicImage_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SmicImage_possibleConstructorReturn(this, result); }; }

function SmicImage_possibleConstructorReturn(self, call) { if (call && (SmicImage_typeof(call) === "object" || typeof call === "function")) { return call; } return SmicImage_assertThisInitialized(self); }

function SmicImage_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SmicImage_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SmicImage_getPrototypeOf(o) { SmicImage_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SmicImage_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @private
 * @class  SuperMap.LevelRenderer.Shape.SmicImage
 * @category Visualization Theme
 * @classdesc å¾çç»å¶ã
 * @extends SuperMap.LevelRenderer.Shape
 * @example
 *   var shape = new SuperMap.LevelRenderer.Shape.SmicImage({
 *         style: {
 *             image: 'test.jpg',
 *             x: 100,
 *             y: 100
 *         }
 *   });
 *   levelRenderer.addShape(shape);
 *
 *
 */

var SmicImage = /*#__PURE__*/function (_Shape) {
  SmicImage_inherits(SmicImage, _Shape);

  var _super = SmicImage_createSuper(SmicImage);

  /**
   * @member {Object} SuperMap.LevelRenderer.Shape.SmicImage.prototype.style
   * @description ç»å¶æ ·å¼ã
   *
   * @param {number} style.x - å·¦ä¸è§æ¨ªåæ ï¼å¿è®¾åæ°ã
   * @param {number} style.y - å·¦ä¸è§çºµåæ ï¼å¿è®¾åæ°ã
   * @param {(string/Cavans)} style.image - å¾çå°åæcavanså¯¹è±¡ï¼å¿è®¾åæ°ã
   * @param {number} style.width - ç»å¶å°ç»å¸ä¸çå®½åº¦ï¼é»è®¤ä¸ºå¾çé«åº¦ã
   * @param {number} style.height - ç»å¶å°ç»å¸ä¸çé«åº¦ï¼é»è®¤ä¸ºå¾çé«åº¦ã
   * @param {number} style.sx - ä»å¾çä¸­è£åªçå·¦ä¸è§æ¨ªåæ ã
   * @param {number} style.sy - ä»å¾çä¸­è£åªçå·¦ä¸è§çºµåæ ã
   * @param {number} style.sWidth - ä»å¾çä¸­è£åªçå®½åº¦ï¼é»è®¤ä¸ºå¾çé«åº¦ã
   * @param {number} style.sHeight - ç»å¶å°ç»å¸ä¸çé«åº¦ï¼é»è®¤ä¸ºå¾çé«åº¦ã
   * @param {number} style.opacity - ç»å¶éæåº¦ãé»è®¤å¼ï¼1ã
   * @param {number} style.shadowBlur - é´å½±æ¨¡ç³åº¦ï¼å¤§äº0ææãé»è®¤å¼ï¼0ã
   * @param {number} style.shadowColor - é´å½±é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {number} style.shadowOffsetX - é´å½±æ¨ªååç§»ãé»è®¤å¼ï¼0ã
   * @param {number} style.shadowOffsetY - é´å½±çºµååç§»ãé»è®¤å¼ï¼0ã
   * @param {string} style.text - å¾å½¢ä¸­çéå ææ¬ãé»è®¤å¼ï¼""ã
   * @param {string} style.textColor - ææ¬é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} style.textFont - éå ææ¬æ ·å¼ãç¤ºä¾:'bold 18px verdana'ã
   * @param {string} style.textPosition - éå ææ¬ä½ç½®ãå¯è®¾å¼ï¼"inside", "left", "right", top", "bottom", "end"ãé»è®¤å¼ï¼"end"ã
   * @param {string} style.textAlign - éå ææ¬æ°´å¹³å¯¹é½ãå¯è®¾å¼ï¼"start", "end", "left", "right", "center"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   * @param {string} style.textBaseline - éå ææ¬åç´å¯¹é½ãå¯è®¾å¼ï¼"top", "bottom", "middle", "alphabetic", "hanging", "ideographic"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   */
  //æå¼æ¥å£ style

  /**
   * @function SuperMap.LevelRenderer.Shape.SmicImage.constructor
   * @description æé å½æ°ã
   *
   * @param {Array} options - shape çéç½®ï¼optionsï¼é¡¹ï¼å¯ä»¥æ¯ shape çèªæå±æ§ï¼ä¹å¯ä»¥æ¯èªå®ä¹çå±æ§ã
   *
   */
  function SmicImage(options) {
    var _this;

    SmicImage_classCallCheck(this, SmicImage);

    _this = _super.call(this, options);
    /**
     * @member {string} SuperMap.LevelRenderer.Shape.SmicImage.prototype.type
     * @description  å¾å½¢ç±»åã
     */

    _this.type = 'smicimage';
    /**
     * @member {string} SuperMap.LevelRenderer.Shape.SmicImage.prototype._imageCache
     * @description å¾çç¼å­ã
     */

    _this._imageCache = {};

    if (!_this.refOriginalPosition || _this.refOriginalPosition.length !== 2) {
      _this.refOriginalPosition = [0, 0];
    }

    _this.CLASS_NAME = "SuperMap.LevelRenderer.Shape.SmicImage";
    return _this;
  }
  /**
   * @function SuperMap.LevelRenderer.Shape.SmicImage.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  SmicImage_createClass(SmicImage, [{
    key: "destroy",
    value: function destroy() {
      this.type = null;
      this._imageCache = null;

      SmicImage_get(SmicImage_getPrototypeOf(SmicImage.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicImage.prototype.buildPath
     * @description åå»ºå¾çã
     * 
     * @param {CanvasRenderingContext2D} ctx - Context2D ä¸ä¸æã
     * @param {Object} style - styleã
     *
     */

  }, {
    key: "brush",
    value: function brush(ctx, isHighlight, refresh) {
      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;
      var style = this.style || {};

      if (isHighlight) {
        // æ ¹æ®styleæ©å±é»è®¤é«äº®æ ·å¼
        style = this.getHighlightStyle(style, this.highlightStyle || {});
      }

      var image = style.image;
      var me = this;

      if (typeof image === 'string') {
        var src = image;

        if (this._imageCache[src]) {
          image = this._imageCache[src];
        } else {
          image = new Image();

          image.onload = function () {
            image.onload = null;
            clearTimeout(SmicImage._refreshTimeout);

            SmicImage._needsRefresh.push(me); // é²æ­¢å ä¸ºç¼å­ç­æ¶é´åè§¦åå¤æ¬¡onloadäºä»¶


            SmicImage._refreshTimeout = setTimeout(function () {
              refresh && refresh(SmicImage._needsRefresh); // æ¸ç©º needsRefresh

              SmicImage._needsRefresh = [];
            }, 10);
          };

          image.src = src;
          this._imageCache[src] = image;
        }
      }

      if (image) {
        // å¾çå·²ç»å è½½å®æ
        if (image.nodeName.toUpperCase() == 'IMG') {
          if (window.ActiveXObject) {
            if (image.readyState != 'complete') {
              return;
            }
          } else {
            if (!image.complete) {
              return;
            }
          }
        } // Else is canvas


        var width = style.width || image.width;
        var height = style.height || image.height;
        var x = style.x + __OP[0];
        var y = style.y + __OP[1]; // å¾çå è½½å¤±è´¥

        if (!image.width || !image.height) {
          return;
        }

        ctx.save();
        this.doClip(ctx);
        this.setContext(ctx, style); // è®¾ç½®transform

        this.setTransform(ctx);

        if (style.sWidth && style.sHeight) {
          var sx = style.sx + __OP[0] || 0;
          var sy = style.sy + __OP[1] || 0;
          ctx.drawImage(image, sx, sy, style.sWidth, style.sHeight, x, y, width, height);
        } else if (style.sx && style.sy) {
          var _sx = style.sx + __OP[0];

          var _sy = style.sy + __OP[1];

          var sWidth = width - _sx;
          var sHeight = height - _sy;
          ctx.drawImage(image, _sx, _sy, sWidth, sHeight, x, y, width, height);
        } else {
          ctx.drawImage(image, x, y, width, height);
        } // å¦ææ²¡è®¾ç½®å®½åé«çè¯èªå¨æ ¹æ®å¾çå®½é«è®¾ç½®


        if (!style.width) {
          style.width = width;
        }

        if (!style.height) {
          style.height = height;
        }

        if (!this.style.width) {
          this.style.width = width;
        }

        if (!this.style.height) {
          this.style.height = height;
        }

        this.drawText(ctx, style, this.style);
        ctx.restore();
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicImage.prototype.getRect
     * @description è®¡ç®è¿åå¾ççåå´çç©å½¢ã
     *
     * @param {Object} style - style
     * @return {Object} è¾¹æ¡å¯¹è±¡ãåå«å±æ§ï¼xï¼yï¼widthï¼heightã
     */

  }, {
    key: "getRect",
    value: function getRect(style) {
      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;
      return {
        x: style.x + __OP[0],
        y: style.y + __OP[1],
        width: style.width,
        height: style.height
      };
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicImage.prototype.clearCache
     * @description æ¸é¤å¾çç¼å­ã
     *
     * @param {Object} style - style
     * @return {Object} è¾¹æ¡å¯¹è±¡ãåå«å±æ§ï¼xï¼yï¼widthï¼heightã
     * 
     */

  }, {
    key: "clearCache",
    value: function clearCache() {
      this._imageCache = {};
    }
  }]);

  return SmicImage;
}(Shape_Shape);
SmicImage._needsRefresh = [];
SmicImage._refreshTimeout = null;
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/SmicRectangle.js
function SmicRectangle_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SmicRectangle_typeof = function _typeof(obj) { return typeof obj; }; } else { SmicRectangle_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SmicRectangle_typeof(obj); }

function SmicRectangle_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SmicRectangle_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SmicRectangle_createClass(Constructor, protoProps, staticProps) { if (protoProps) SmicRectangle_defineProperties(Constructor.prototype, protoProps); if (staticProps) SmicRectangle_defineProperties(Constructor, staticProps); return Constructor; }

function SmicRectangle_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SmicRectangle_get = Reflect.get; } else { SmicRectangle_get = function _get(target, property, receiver) { var base = SmicRectangle_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SmicRectangle_get(target, property, receiver || target); }

function SmicRectangle_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SmicRectangle_getPrototypeOf(object); if (object === null) break; } return object; }

function SmicRectangle_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SmicRectangle_setPrototypeOf(subClass, superClass); }

function SmicRectangle_setPrototypeOf(o, p) { SmicRectangle_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SmicRectangle_setPrototypeOf(o, p); }

function SmicRectangle_createSuper(Derived) { var hasNativeReflectConstruct = SmicRectangle_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SmicRectangle_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SmicRectangle_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SmicRectangle_possibleConstructorReturn(this, result); }; }

function SmicRectangle_possibleConstructorReturn(self, call) { if (call && (SmicRectangle_typeof(call) === "object" || typeof call === "function")) { return call; } return SmicRectangle_assertThisInitialized(self); }

function SmicRectangle_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SmicRectangle_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SmicRectangle_getPrototypeOf(o) { SmicRectangle_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SmicRectangle_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @private
 * @class  SuperMap.LevelRenderer.Shape.SmicRectangle
 * @category Visualization Theme
 * @classdesc ç©å½¢ã
 * @extends SuperMap.LevelRenderer.Shape
 * @example
 *   var shape = new SuperMap.LevelRenderer.Shape.SmicRectangle({
 *         style: {
 *             x: 0,
 *             y: 0,
 *             width: 100,
 *             height: 100,
 *             radius: 20
 *         }
 *     });
 *   levelRenderer.addShape(shape);
 * 
 */

var SmicRectangle = /*#__PURE__*/function (_Shape) {
  SmicRectangle_inherits(SmicRectangle, _Shape);

  var _super = SmicRectangle_createSuper(SmicRectangle);

  /**
   * @member {Object} SuperMap.LevelRenderer.Shape.SmicRectangle.prototype.style
   * @description ç»å¶æ ·å¼ã
   *
   * @param {number} style.x - å·¦ä¸è§ x åæ ï¼å¿è®¾åæ°ã
   * @param {number} style.y - å·¦ä¸è§ y åæ ï¼å¿è®¾åæ°ã
   * @param {number} style.width - å®½åº¦ï¼å¿è®¾åæ°ã
   * @param {number} style.height - é«åº¦ï¼å¿è®¾åæ°ã
   * @param {Array} style.radius - ç©å½¢åè§ï¼å¯ä»¥ç¨æ°ç»åå«æå®åä¸ªè§çåè§ï¼è®¾ï¼å·¦ä¸ãå³ä¸ãå³ä¸ãå·¦ä¸è§çåå¾ä¾æ¬¡ä¸º r1ãr2ãr3ãr4 å radiusä¸º [r1ãr2ãr3ãr4 ]ã
   * @param {string} style.brushType - ç»ç¬ç±»åãå¯è®¾å¼ï¼"fill", "stroke", "both"ãé»è®¤å¼ï¼"fill"ã
   * @param {string} style.color - å¡«åé¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} style.strokeColor - æè¾¹é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} style.lineCape - çº¿å¸½æ ·å¼ãå¯è®¾å¼ï¼"butt", "round", "square"ãé»è®¤å¼ï¼"butt"ã
   * @param {number} style.lineWidth - æè¾¹å®½åº¦ãé»è®¤å¼ï¼1ã
   * @param {number} style.opacity - ç»å¶éæåº¦ãé»è®¤å¼ï¼1ã
   * @param {number} style.shadowBlur - é´å½±æ¨¡ç³åº¦ï¼å¤§äº0ææãé»è®¤å¼ï¼0ã
   * @param {number} style.shadowColor - é´å½±é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {number} style.shadowOffsetX - é´å½±æ¨ªååç§»ãé»è®¤å¼ï¼0ã
   * @param {number} style.shadowOffsetY - é´å½±çºµååç§»ãé»è®¤å¼ï¼0ã
   * @param {string} style.text - å¾å½¢ä¸­çéå ææ¬ãé»è®¤å¼ï¼""ã
   * @param {string} style.textColor - ææ¬é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} style.textFont - éå ææ¬æ ·å¼ãç¤ºä¾:'bold 18px verdana'ã
   * @param {string} style.textPosition - éå ææ¬ä½ç½®ãå¯è®¾å¼ï¼"inside", "left", "right", top", "bottom", "end"ãé»è®¤å¼ï¼"end"ã
   * @param {string} style.textAlign - éå ææ¬æ°´å¹³å¯¹é½ãå¯è®¾å¼ï¼"start", "end", "left", "right", "center"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   * @param {string} style.textBaseline - éå ææ¬åç´å¯¹é½ãå¯è®¾å¼ï¼"top", "bottom", "middle", "alphabetic", "hanging", "ideographic"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   */
  //æå¼æ¥å£ style

  /**
   * @function SuperMap.LevelRenderer.Shape.SmicRectangle.constructor
   * @description æé å½æ°ã
   *
   * @param {Array} options - shape çéç½®ï¼optionsï¼é¡¹ï¼å¯ä»¥æ¯ shape çèªæå±æ§ï¼ä¹å¯ä»¥æ¯èªå®ä¹çå±æ§ã
   *
   */
  function SmicRectangle(options) {
    var _this;

    SmicRectangle_classCallCheck(this, SmicRectangle);

    _this = _super.call(this, options);
    /**
     * @member {string} SuperMap.LevelRenderer.Shape.SmicRectangle.prototype.type
     * @description å¾å½¢ç±»å.
     */

    _this.type = 'smicrectangle';

    if (!_this.refOriginalPosition || _this.refOriginalPosition.length !== 2) {
      _this.refOriginalPosition = [0, 0];
    }

    _this.CLASS_NAME = "SuperMap.LevelRenderer.Shape.SmicRectangle";
    return _this;
  }
  /**
   * @function SuperMap.LevelRenderer.Shape.SmicRectangle.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  SmicRectangle_createClass(SmicRectangle, [{
    key: "destroy",
    value: function destroy() {
      this.type = null;

      SmicRectangle_get(SmicRectangle_getPrototypeOf(SmicRectangle.prototype), "destroy", this).call(this);
    }
    /**
     * APIMethod: _buildRadiusPath
     * åå»ºç©å½¢çåè§è·¯å¾ã
     *
     * Parameters:
     * ctx - {CanvasRenderingContext2D} Context2D ä¸ä¸æã
     * style - {Object} styleã
     *
     */

  }, {
    key: "_buildRadiusPath",
    value: function _buildRadiusPath(ctx, style) {
      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition; // å·¦ä¸ãå³ä¸ãå³ä¸ãå·¦ä¸è§çåå¾ä¾æ¬¡ä¸ºr1ãr2ãr3ãr4
      // rç¼©åä¸º1         ç¸å½äº [1, 1, 1, 1]
      // rç¼©åä¸º[1]       ç¸å½äº [1, 1, 1, 1]
      // rç¼©åä¸º[1, 2]    ç¸å½äº [1, 2, 1, 2]
      // rç¼©åä¸º[1, 2, 3] ç¸å½äº [1, 2, 3, 2]

      var x = style.x + __OP[0];
      var y = style.y + __OP[1];
      var width = style.width;
      var height = style.height;
      var r = style.radius;
      var r1;
      var r2;
      var r3;
      var r4;

      if (typeof r === 'number') {
        r1 = r2 = r3 = r4 = r;
      } else if (r instanceof Array) {
        if (r.length === 1) {
          r1 = r2 = r3 = r4 = r[0];
        } else if (r.length === 2) {
          r1 = r3 = r[0];
          r2 = r4 = r[1];
        } else if (r.length === 3) {
          r1 = r[0];
          r2 = r4 = r[1];
          r3 = r[2];
        } else {
          r1 = r[0];
          r2 = r[1];
          r3 = r[2];
          r4 = r[3];
        }
      } else {
        r1 = r2 = r3 = r4 = 0;
      }

      var total;

      if (r1 + r2 > width) {
        total = r1 + r2;
        r1 *= width / total;
        r2 *= width / total;
      }

      if (r3 + r4 > width) {
        total = r3 + r4;
        r3 *= width / total;
        r4 *= width / total;
      }

      if (r2 + r3 > height) {
        total = r2 + r3;
        r2 *= height / total;
        r3 *= height / total;
      }

      if (r1 + r4 > height) {
        total = r1 + r4;
        r1 *= height / total;
        r4 *= height / total;
      }

      ctx.moveTo(x + r1, y);
      ctx.lineTo(x + width - r2, y);
      r2 !== 0 && ctx.quadraticCurveTo(x + width, y, x + width, y + r2);
      ctx.lineTo(x + width, y + height - r3);
      r3 !== 0 && ctx.quadraticCurveTo(x + width, y + height, x + width - r3, y + height);
      ctx.lineTo(x + r4, y + height);
      r4 !== 0 && ctx.quadraticCurveTo(x, y + height, x, y + height - r4);
      ctx.lineTo(x, y + r1);
      r1 !== 0 && ctx.quadraticCurveTo(x, y, x + r1, y);
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicRectangle.prototype.buildPath
     * @description åå»ºç©å½¢è·¯å¾ã
     *
     * @param {CanvasRenderingContext2D} ctx - Context2D ä¸ä¸æã
     * @param {Object} style - styleã
     *
     */

  }, {
    key: "buildPath",
    value: function buildPath(ctx, style) {
      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;

      if (!style.radius) {
        ctx.moveTo(style.x + __OP[0], style.y + __OP[1]);
        ctx.lineTo(style.x + __OP[0] + style.width, style.y + __OP[1]);
        ctx.lineTo(style.x + __OP[0] + style.width, style.y + __OP[1] + style.height);
        ctx.lineTo(style.x + __OP[0], style.y + __OP[1] + style.height);
        ctx.lineTo(style.x + __OP[0], style.y + __OP[1]); // ctx.rect(style.x, style.y, style.width, style.height);
      } else {
        this._buildRadiusPath(ctx, style);
      }

      ctx.closePath();
      return;
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicRectangle.prototype.getRect
     * @description è®¡ç®è¿åç©å½¢åå´çç©éµãè¯¥åå´çæ¯ç´æ¥ä»åä¸ªæ§å¶ç¹è®¡ç®ï¼å¹¶éæå°åå´çã
     * 
     * @param {Object} style - style
     * @return {Object} è¾¹æ¡å¯¹è±¡ãåå«å±æ§ï¼xï¼yï¼widthï¼heightã
     */

  }, {
    key: "getRect",
    value: function getRect(style) {
      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;

      if (style.__rect) {
        return style.__rect;
      }

      var lineWidth;

      if (style.brushType == 'stroke' || style.brushType == 'fill') {
        lineWidth = style.lineWidth || 1;
      } else {
        lineWidth = 0;
      }

      style.__rect = {
        x: Math.round(style.x + __OP[0] - lineWidth / 2),
        y: Math.round(style.y + __OP[1] - lineWidth / 2),
        width: style.width + lineWidth,
        height: style.height + lineWidth
      };
      return style.__rect;
    }
  }]);

  return SmicRectangle;
}(Shape_Shape);
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/SmicSector.js
function SmicSector_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SmicSector_typeof = function _typeof(obj) { return typeof obj; }; } else { SmicSector_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SmicSector_typeof(obj); }

function SmicSector_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SmicSector_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SmicSector_createClass(Constructor, protoProps, staticProps) { if (protoProps) SmicSector_defineProperties(Constructor.prototype, protoProps); if (staticProps) SmicSector_defineProperties(Constructor, staticProps); return Constructor; }

function SmicSector_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SmicSector_get = Reflect.get; } else { SmicSector_get = function _get(target, property, receiver) { var base = SmicSector_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SmicSector_get(target, property, receiver || target); }

function SmicSector_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SmicSector_getPrototypeOf(object); if (object === null) break; } return object; }

function SmicSector_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SmicSector_setPrototypeOf(subClass, superClass); }

function SmicSector_setPrototypeOf(o, p) { SmicSector_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SmicSector_setPrototypeOf(o, p); }

function SmicSector_createSuper(Derived) { var hasNativeReflectConstruct = SmicSector_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SmicSector_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SmicSector_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SmicSector_possibleConstructorReturn(this, result); }; }

function SmicSector_possibleConstructorReturn(self, call) { if (call && (SmicSector_typeof(call) === "object" || typeof call === "function")) { return call; } return SmicSector_assertThisInitialized(self); }

function SmicSector_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SmicSector_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SmicSector_getPrototypeOf(o) { SmicSector_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SmicSector_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @private
 * @class  SuperMap.LevelRenderer.Shape.SmicSector
 * @category Visualization Theme
 * @classdesc æå½¢ã
 * @extends SuperMap.LevelRenderer.Shape
 * @example
 *   var shape = new SuperMap.LevelRenderer.Shape.SmicSector({
 *         style: {
 *             x: 100,
 *             y: 100,
 *             r: 60,
 *             r0: 30,
 *             startAngle: 0,
 *             endEngle: 180
 *         }
 *   });
 *   levelRenderer.addShape(shape);
 *
 *
 */

var SmicSector = /*#__PURE__*/function (_Shape) {
  SmicSector_inherits(SmicSector, _Shape);

  var _super = SmicSector_createSuper(SmicSector);

  /**
   * @member {Object} SuperMap.LevelRenderer.Shape.SmicSector.prototype.style
   * @description ç»å¶æ ·å¼ã
   *
   * @param {number} style.x - åå¿ x åæ ï¼å¿è®¾åæ°ã
   * @param {number} style.y - åå¿ y åæ ï¼å¿è®¾åæ°ã
   * @param {number} style.r - å¤ååå¾ï¼å¿è®¾åæ°ã
   * @param {number} style.r0 - åååå¾ï¼æå®åå°åºç°åå¼§ï¼åæ¶æè¾¹é¿åº¦ä¸º`r - r0`ãåå¼èå´[0, r)ï¼é»è®¤å¼ï¼0ã
   * @param {number} style.startAngle - èµ·å§è§åº¦ï¼å¿è®¾åæ°ãåå¼èå´[0, 360)ã
   * @param {number} style.endAngle - ç»æè§åº¦ï¼å¿è®¾åæ°ãåå¼èå´(0, 360ã
   * @param {boolean} style.clockWise - æ¯å¦æ¯é¡ºæ¶éãé»è®¤å¼ï¼falseã
   * @param {string} style.brushType - ç»ç¬ç±»åãå¯è®¾å¼ï¼"fill", "stroke", "both"ãé»è®¤å¼ï¼"fill"ã
   * @param {string} style.color - å¡«åé¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} style.strokeColor - æè¾¹é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} style.lineCape - çº¿å¸½æ ·å¼ãå¯è®¾å¼ï¼"butt", "round", "square"ãé»è®¤å¼ï¼"butt"ã
   * @param {number} style.lineWidth - æè¾¹å®½åº¦ãé»è®¤å¼ï¼1ã
   * @param {number} style.opacity - ç»å¶éæåº¦ãé»è®¤å¼ï¼1ã
   * @param {number} style.shadowBlur - é´å½±æ¨¡ç³åº¦ï¼å¤§äº0ææãé»è®¤å¼ï¼0ã
   * @param {number} style.shadowColor - é´å½±é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {number} style.shadowOffsetX - é´å½±æ¨ªååç§»ãé»è®¤å¼ï¼0ã
   * @param {number} style.shadowOffsetY - é´å½±çºµååç§»ãé»è®¤å¼ï¼0ã
   * @param {string} style.text - å¾å½¢ä¸­çéå ææ¬ãé»è®¤å¼ï¼""ã
   * @param {string} style.textColor - ææ¬é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} style.textFont - éå ææ¬æ ·å¼ãç¤ºä¾:'bold 18px verdana'ã
   * @param {string} style.textPosition - éå ææ¬ä½ç½®ãå¯è®¾å¼ï¼"inside", "left", "right", top", "bottom", "end"ãé»è®¤å¼ï¼"end"ã
   * @param {string} style.textAlign - éå ææ¬æ°´å¹³å¯¹é½ãå¯è®¾å¼ï¼"start", "end", "left", "right", "center"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   * @param {string} style.textBaseline - éå ææ¬åç´å¯¹é½ãå¯è®¾å¼ï¼"top", "bottom", "middle", "alphabetic", "hanging", "ideographic"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   */
  //æå¼æ¥å£ style

  /**
   * @function SuperMap.LevelRenderer.Shape.SmicSector.constructor
   * @description æé å½æ°ã
   * 
   * @param {Array} options - shape çéç½®ï¼optionsï¼é¡¹ï¼å¯ä»¥æ¯ shape çèªæå±æ§ï¼ä¹å¯ä»¥æ¯èªå®ä¹çå±æ§ã
   *
   */
  function SmicSector(options) {
    var _this;

    SmicSector_classCallCheck(this, SmicSector);

    _this = _super.call(this, options);
    /**
     * @member {string} SuperMap.LevelRenderer.Shape.SmicSector.protptype.type
     * @description å¾å½¢ç±»åã
     */

    _this.type = 'smicsector';

    if (!_this.refOriginalPosition || _this.refOriginalPosition.length !== 2) {
      _this.refOriginalPosition = [0, 0];
    }

    _this.CLASS_NAME = "SuperMap.LevelRenderer.Shape.SmicSector";
    return _this;
  }
  /**
   * @function SuperMap.LevelRenderer.Shape.SmicSector.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  SmicSector_createClass(SmicSector, [{
    key: "destroy",
    value: function destroy() {
      this.type = null;

      SmicSector_get(SmicSector_getPrototypeOf(SmicSector.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicSector.prototype.buildPath
     * @description åå»ºæå½¢è·¯å¾ã
     * 
     * @param {CanvasRenderingContext2D} ctx - Context2D ä¸ä¸æã
     * @param {Object} style - styleã
     *
     */

  }, {
    key: "buildPath",
    value: function buildPath(ctx, style) {
      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;
      var x = style.x + __OP[0]; // åå¿x

      var y = style.y + __OP[1]; // åå¿y

      var r0 = style.r0 || 0; // å½¢ååå¾[0,r)

      var r = style.r; // æå½¢å¤åå¾(0,r]

      var startAngle = style.startAngle; // èµ·å§è§åº¦[0,360)

      var endAngle = style.endAngle; // ç»æè§åº¦(0,360]

      var clockWise = style.clockWise || false;
      startAngle = SUtil_SUtil.Util_math.degreeToRadian(startAngle);
      endAngle = SUtil_SUtil.Util_math.degreeToRadian(endAngle);

      if (!clockWise) {
        // æå½¢é»è®¤æ¯éæ¶éæ¹åï¼Yè½´åä¸
        // è¿ä¸ªè·arcçæ åä¸ä¸æ ·ï¼ä¸ºäºå¼å®¹echarts
        startAngle = -startAngle;
        endAngle = -endAngle;
      }

      var unitX = SUtil_SUtil.Util_math.cos(startAngle);
      var unitY = SUtil_SUtil.Util_math.sin(startAngle);
      ctx.moveTo(unitX * r0 + x, unitY * r0 + y);
      ctx.lineTo(unitX * r + x, unitY * r + y);
      ctx.arc(x, y, r, startAngle, endAngle, !clockWise);
      ctx.lineTo(SUtil_SUtil.Util_math.cos(endAngle) * r0 + x, SUtil_SUtil.Util_math.sin(endAngle) * r0 + y);

      if (r0 !== 0) {
        ctx.arc(x, y, r0, endAngle, startAngle, clockWise);
      }

      ctx.closePath();
      return;
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicSector.prototype.getRect
     * @description è¿åæå½¢åå´çç©å½¢
     *
     * @param {Object} style - style
     * @return {Object} è¾¹æ¡å¯¹è±¡ãåå«å±æ§ï¼xï¼yï¼widthï¼heightã
     * 
     */

  }, {
    key: "getRect",
    value: function getRect(style) {
      if (style.__rect) {
        return style.__rect;
      }

      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;
      var min0 = SUtil_SUtil.Util_vector.create();
      var min1 = SUtil_SUtil.Util_vector.create();
      var max0 = SUtil_SUtil.Util_vector.create();
      var max1 = SUtil_SUtil.Util_vector.create();
      var x = style.x + __OP[0]; // åå¿x

      var y = style.y + __OP[1]; // åå¿y

      var r0 = style.r0 || 0; // å½¢ååå¾[0,r)

      var r = style.r; // æå½¢å¤åå¾(0,r]

      var startAngle = SUtil_SUtil.Util_math.degreeToRadian(style.startAngle);
      var endAngle = SUtil_SUtil.Util_math.degreeToRadian(style.endAngle);
      var clockWise = style.clockWise;

      if (!clockWise) {
        startAngle = -startAngle;
        endAngle = -endAngle;
      }

      if (r0 > 1) {
        SUtil_SUtil.Util_computeBoundingBox.arc(x, y, r0, startAngle, endAngle, !clockWise, min0, max0);
      } else {
        min0[0] = max0[0] = x;
        min0[1] = max0[1] = y;
      }

      SUtil_SUtil.Util_computeBoundingBox.arc(x, y, r, startAngle, endAngle, !clockWise, min1, max1);
      SUtil_SUtil.Util_vector.min(min0, min0, min1);
      SUtil_SUtil.Util_vector.max(max0, max0, max1);
      style.__rect = {
        x: min0[0],
        y: min0[1],
        width: max0[0] - min0[0],
        height: max0[1] - min0[1]
      };
      return style.__rect;
    }
  }]);

  return SmicSector;
}(Shape_Shape);
// CONCATENATED MODULE: ./src/common/overlay/feature/ShapeFactory.js
function ShapeFactory_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ShapeFactory_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ShapeFactory_createClass(Constructor, protoProps, staticProps) { if (protoProps) ShapeFactory_defineProperties(Constructor.prototype, protoProps); if (staticProps) ShapeFactory_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


















/**
 * @class  SuperMap.Feature.ShapeFactory
 * @category Visualization Theme
 * @classdesc å¾å½¢å·¥åç±»ã
 * ç®åæ¯æåå»ºçå¾å½¢æï¼<br>
 * ç¨äºç»è®¡ä¸é¢å¾ï¼<br>
 * ç¹ - åæ°å¯¹è±¡ <{@link SuperMap.Feature.ShapeParameters.Point}> <br>
 * çº¿ - åæ°å¯¹è±¡ <{@link SuperMap.Feature.ShapeParameters.Line}> <br>
 * é¢ - åæ°å¯¹è±¡ <{@link SuperMap.Feature.ShapeParameters.Polygon}> <br>
 * ç©å½¢ - åæ°å¯¹è±¡ <{@link SuperMap.Feature.ShapeParameters.Rectangle}> <br>
 * æå½¢ - åæ°å¯¹è±¡ <{@link SuperMap.Feature.ShapeParameters.Sector}> <br>
 * æ ç­¾ - åæ°å¯¹è±¡ <{@link SuperMap.Feature.ShapeParameters.Label}> <br>
 * å¾ç - åæ°å¯¹è±¡ <{@link SuperMap.Feature.ShapeParameters.Image}> <br>
 * ç¨äºç¬¦å·ä¸é¢å¾ï¼<br>
 * åå½¢ -  åæ°å¯¹è±¡ï¼<{@link SuperMap.Feature.ShapeParameters.Cilcle}>
 */

var ShapeFactory = /*#__PURE__*/function () {
  /**
   * @function SuperMap.Feature.ShapeFactory.prototype.constructor
   * @description æå»ºå¾å½¢å·¥åå¯¹è±¡ã
   * @param {Object} shapeParameters - å¾å½¢åæ°å¯¹è±¡ï¼<{@link SuperMap.Feature.ShapeParameters}> å­ç±»å¯¹è±¡ï¼å¯éåæ°ã
   * @returns {SuperMap.Feature.ShapeFactory} è¿åå¾å½¢å·¥åç±»å¯¹è±¡ã
   */
  function ShapeFactory(shapeParameters) {
    ShapeFactory_classCallCheck(this, ShapeFactory);

    /**
     * @member {Object} SuperMap.Feature.ShapeParameters.prototype.shapeParameters
     * @description  å¾å½¢åæ°å¯¹è±¡ï¼<{@link SuperMap.Feature.ShapeParameters}> å­ç±»å¯¹è±¡ãå¿è®¾åæ°ï¼é»è®¤å¼ nullã
     */
    this.shapeParameters = shapeParameters;
    this.CLASS_NAME = "SuperMap.Feature.ShapeFactory";
  }
  /**
   * @function  SuperMap.Feature.ShapeParameters.prototype.destroy
   * @description éæ¯å¾å½¢å·¥åç±»å¯¹è±¡ã
   */


  ShapeFactory_createClass(ShapeFactory, [{
    key: "destroy",
    value: function destroy() {
      this.shapeParameters = null;
    }
    /**
     * @function  SuperMap.Feature.ShapeParameters.prototype.createShape
     * @description åå»ºä¸ä¸ªå¾å½¢ãå·ä½å¾å½¢ç± shapeParameters å³å®ã
     * @param {Object} shapeParameters - å¾å½¢åæ°å¯¹è±¡ï¼<{@link SuperMap.Feature.ShapeParameters}> å­ç±»å¯¹è±¡ã
     * æ­¤åæ°å¯éï¼å¦æä½¿ç¨æ­¤åæ°ï¼ä¸ä¸º nullï¼ï¼shapeParameters å±æ§å¼å°è¢«ä¿®æ¹ä¸ºåæ°çå¼ï¼ç¶ååä½¿ç¨ shapeParameters å±æ§å¼åå»ºå¾å½¢ï¼
     * å¦æä¸ä½¿ç¨æ­¤åæ°ï¼createShape æ¹æ³å°ç´æ¥ä½¿ç¨ shapeParameters å±æ§åå»ºå¾å½¢ã
     * @returns {Object} å¾å½¢å¯¹è±¡ï¼æ null - å¾å½¢åå»ºå¤±è´¥ï¼ã
     */

  }, {
    key: "createShape",
    value: function createShape(shapeParameters) {
      if (shapeParameters) {
        this.shapeParameters = shapeParameters;
      }

      if (!this.shapeParameters) {
        return null;
      }

      var sps = this.shapeParameters;

      if (sps instanceof Point_Point) {
        // ç¹
        //è®¾ç½®style
        var style = new Object();
        style["x"] = sps.x;
        style["y"] = sps.y;
        style["r"] = sps.r;
        style = Util.copyAttributesWithClip(style, sps.style, ['x', 'y']); //åå»ºå¾å½¢

        var shape = new SmicPoint();
        shape.style = ShapeFactory.transformStyle(style);
        shape.highlightStyle = ShapeFactory.transformStyle(sps.highlightStyle);
        Util.copyAttributesWithClip(shape, sps, ['x', 'y', 'style', 'highlightStyle']);
        return shape;
      } else if (sps instanceof Line_Line) {
        // çº¿
        //æ£æ¥åæ° pointList æ¯å¦å­å¨
        if (!sps.pointList) {
          return null;
        } // è®¾ç½®style


        var _style = new Object();

        _style["pointList"] = sps.pointList;
        _style = Util.copyAttributesWithClip(_style, sps.style, ['pointList']); // åå»ºå¾å½¢

        var _shape = new SmicBrokenLine();

        _shape.style = ShapeFactory.transformStyle(_style);
        _shape.highlightStyle = ShapeFactory.transformStyle(sps.highlightStyle);
        Util.copyAttributesWithClip(_shape, sps, ['pointList', 'style', 'highlightStyle']);
        return _shape;
      } else if (sps instanceof Polygon_Polygon) {
        // é¢
        //æ£æ¥åæ° pointList æ¯å¦å­å¨
        if (!sps.pointList) {
          return null;
        } //è®¾ç½®style


        var _style2 = new Object();

        _style2["pointList"] = sps.pointList;
        _style2 = Util.copyAttributesWithClip(_style2, sps.style, ['pointList']); //åå»ºå¾å½¢

        var _shape2 = new SmicPolygon();

        _shape2.style = ShapeFactory.transformStyle(_style2);
        _shape2.highlightStyle = ShapeFactory.transformStyle(sps.highlightStyle);
        Util.copyAttributesWithClip(_shape2, sps, ['pointList', 'style', "highlightStyle"]);
        return _shape2;
      } else if (sps instanceof Rectangle_Rectangle) {
        // ç©å½¢
        //æ£æ¥åæ° pointList æ¯å¦å­å¨
        if (!sps.x && !sps.y & !sps.width & !sps.height) {
          return null;
        } //è®¾ç½®style


        var _style3 = new Object();

        _style3["x"] = sps.x;
        _style3["y"] = sps.y;
        _style3["width"] = sps.width;
        _style3["height"] = sps.height;
        _style3 = Util.copyAttributesWithClip(_style3, sps.style, ['x', 'y', 'width', 'height']); //åå»ºå¾å½¢

        var _shape3 = new SmicRectangle();

        _shape3.style = ShapeFactory.transformStyle(_style3);
        _shape3.highlightStyle = ShapeFactory.transformStyle(sps.highlightStyle);
        Util.copyAttributesWithClip(_shape3, sps, ['x', 'y', 'width', 'height', 'style', 'highlightStyle']);
        return _shape3;
      } else if (sps instanceof Sector) {
        // æå½¢
        //è®¾ç½®style
        var _style4 = new Object();

        _style4["x"] = sps.x;
        _style4["y"] = sps.y;
        _style4["r"] = sps.r;
        _style4["startAngle"] = sps.startAngle;
        _style4["endAngle"] = sps.endAngle;

        if (sps["r0"]) {
          _style4["r0"] = sps.r0;
        }

        if (sps["clockWise"]) {
          _style4["clockWise"] = sps.clockWise;
        }

        _style4 = Util.copyAttributesWithClip(_style4, sps.style, ['x', 'y', 'r', 'startAngle', 'endAngle', 'r0', 'endAngle']); //åå»ºå¾å½¢

        var _shape4 = new SmicSector();

        _shape4.style = ShapeFactory.transformStyle(_style4);
        _shape4.highlightStyle = ShapeFactory.transformStyle(sps.highlightStyle);
        Util.copyAttributesWithClip(_shape4, sps, ['x', 'y', 'r', 'startAngle', 'endAngle', 'r0', 'endAngle', 'style', 'highlightStyle']);
        return _shape4;
      } else if (sps instanceof Label) {
        // æ ç­¾
        //è®¾ç½®style
        var _style5 = new Object();

        _style5["x"] = sps.x;
        _style5["y"] = sps.y;
        _style5["text"] = sps.text;
        _style5 = Util.copyAttributesWithClip(_style5, sps.style, ['x', 'y', 'text']); //åå»ºå¾å½¢

        var _shape5 = new SmicText();

        _shape5.style = ShapeFactory.transformStyle(_style5);
        _shape5.highlightStyle = ShapeFactory.transformStyle(sps.highlightStyle);
        Util.copyAttributesWithClip(_shape5, sps, ['x', 'y', 'text', 'style', 'highlightStyle']);
        return _shape5;
      } else if (sps instanceof Image_Image) {
        // å¾ç
        //è®¾ç½®style
        var _style6 = new Object();

        _style6["x"] = sps.x;
        _style6["y"] = sps.y;

        if (sps["image"]) {
          _style6["image"] = sps.image;
        }

        if (sps["width"]) {
          _style6["width"] = sps.width;
        }

        if (sps["height"]) {
          _style6["height"] = sps.height;
        }

        if (sps["sx"]) {
          _style6["sx"] = sps.sx;
        }

        if (sps["sy"]) {
          _style6["sy"] = sps.sy;
        }

        if (sps["sWidth"]) {
          _style6["sWidth"] = sps.sWidth;
        }

        if (sps["sHeight"]) {
          _style6["sHeight"] = sps.sHeight;
        }

        _style6 = Util.copyAttributesWithClip(_style6, sps.style, ['x', 'y', 'image', 'width', 'height', 'sx', 'sy', 'sWidth', 'sHeight']); //åå»ºå¾å½¢

        var _shape6 = new SmicImage();

        _shape6.style = ShapeFactory.transformStyle(_style6);
        _shape6.highlightStyle = ShapeFactory.transformStyle(sps.highlightStyle);
        Util.copyAttributesWithClip(_shape6, sps, ['x', 'y', 'image', 'width', 'height', 'style', 'highlightStyle']);
        return _shape6;
      } else if (sps instanceof Circle_Circle) {
        //åå½¢ ç¨äºç¬¦å·ä¸é¢å¾
        //è®¾ç½®stytle
        var _style7 = new Object();

        _style7["x"] = sps.x;
        _style7["r"] = sps.r;
        _style7["y"] = sps.y;
        _style7 = Util.copyAttributesWithClip(_style7, sps.style, ['x', 'y', 'r']); //åå»ºå¾å½¢

        var _shape7 = new SmicCircle();

        _shape7.style = ShapeFactory.transformStyle(_style7);
        _shape7.highlightStyle = ShapeFactory.transformStyle(sps.highlightStyle);
        Util.copyAttributesWithClip(_shape7, sps, ['x', 'y', 'r', 'style', 'highlightStyle', 'lineWidth', 'text', 'textPosition']);
        return _shape7;
      }

      return null;
    }
    /**
     * @function  SuperMap.Feature.ShapeParameters.prototype.transformStyle
     * @description å°ç¨æ· feature.style (ç±» Svg style æ å) çæ ·å¼ï¼è½¬æ¢ä¸º levelRenderer çæ ·å¼æ åï¼ç±» CSS-Canvas æ ·å¼ï¼
     * @param {Object} style - ç¨æ· styleã
     * @returns {Object} ç¬¦å levelRenderer ç styleã
     */

  }], [{
    key: "transformStyle",
    value: function transformStyle(style) {
      var newStyle = {}; //å­ä½ ["font-style", "font-variant", "font-weight", "font-size / line-height", "font-family"];

      var fontStr = ["normal", "normal", "normal", "12", "arial,sans-serif"]; //ç»ç¬ç±»å ["fill", "stroke"];

      var brushType = [true, false];

      for (var ss in style) {
        switch (ss) {
          case "fill":
            brushType[0] = style[ss];
            break;

          case "fillColor":
            newStyle["color"] = style[ss];
            break;

          case "stroke":
            brushType[1] = style[ss];
            break;

          case "strokeWidth":
            newStyle["lineWidth"] = style[ss];
            break;

          case "strokeLinecap":
            newStyle["lineCap"] = style[ss];
            break;

          case "strokeLineJoin":
            newStyle["lineJoin"] = style[ss];
            break;

          case "strokeDashstyle":
            newStyle["lineType"] = style[ss];
            break;

          case "pointRadius":
            newStyle["r"] = style[ss];
            break;

          case "label":
            newStyle["text"] = style[ss];
            break;

          case "labelRect":
            newStyle["labelRect"] = style[ss];
            break;

          case "fontColor":
            newStyle["textColor"] = style[ss];
            break;

          case "fontStyle":
            fontStr[0] = style[ss];
            break;

          case "fontVariant":
            fontStr[1] = style[ss];
            break;

          case "fontWeight":
            fontStr[2] = style[ss];
            break;

          case "fontSize":
            var unit = "";

            if (style[ss] && style[ss].toString().indexOf("px") < 0) {
              unit = "px";
            }

            fontStr[3] = style[ss] + unit;
            break;

          case "fontFamily":
            fontStr[4] = style[ss];
            break;

          case "fontOpacity":
            newStyle["opacity"] = style[ss];
            break;

          case "labelPosition":
            newStyle["textPosition"] = style[ss];
            break;

          case "labelAlign":
            newStyle["textAlign"] = style[ss];
            break;

          case "labelBaseline":
            newStyle["textBaseline"] = style[ss];
            break;

          case "labelRotation":
            newStyle["textRotation"] = style[ss];
            break;

          default:
            newStyle[ss] = style[ss];
            break;
        }
      } //æ¼æ¥å­ä½å­ç¬¦ä¸²


      newStyle["textFont"] = fontStr.join(" "); //ç»ç¬ç±»å

      if (brushType[0] === true && brushType[1] === false) {
        newStyle["brushType"] = "fill";
      } else if (brushType[0] === false && brushType[1] === true) {
        newStyle["brushType"] = "stroke";
      } else if (brushType[0] === true && brushType[1] === true) {
        newStyle["brushType"] = "both";
      } else {
        newStyle["brushType"] = "fill";
      } //é»è®¤çº¿å®½ 1


      if (newStyle["lineWidth"] == null) {
        newStyle["lineWidth"] = 1;
      }

      return newStyle;
    }
    /**
     * @function  SuperMap.Feature.ShapeParameters.prototype.Background
     * @description åå»ºä¸ä¸ªç©å½¢èæ¯æ¡å¾å½¢å¯¹è±¡ã
     * @param {SuperMap.Feature.ShapeFactory} shapeFactory - å¾å½¢å·¥åå¯¹è±¡ï¼å¿è®¾åæ°ã
     * @param {Array.<number>} box - æ¡åºåï¼é¿åº¦ä¸º 4 çä¸ç»´æ°ç»ï¼åç´ åæ ï¼[left, bottom, right, top]ï¼å¿è®¾åæ°ã
     * @param {Object} setting - å¾è¡¨éç½®åæ°ï¼å¿è®¾åæ°ãæ¬å½æ°ä¸­å¾å½¢éç½®å¯¹è±¡ setting å¯è®¾å±æ§ï¼
     * @param {Object} setting.backgroundStyle - èæ¯æ ·å¼ï¼æ­¤æ ·å¼å¯¹è±¡å¯¹è±¡å¯è®¾å±æ§ï¼<SuperMap.Feature.ShapeParameters.Rectangle#style>ã
     * @param {Array} [setting.backgroundRadius=[0,0,0,0]] - èæ¯æ¡ç©å½¢åè§åå¾ï¼å¯ä»¥ç¨æ°ç»åå«æå®åä¸ªè§çåè§åå¾ï¼è®¾ï¼å·¦ä¸ãå³ä¸ãå³ä¸ãå·¦ä¸è§çåå¾ä¾æ¬¡ä¸º r1ãr2ãr3ãr4ï¼å backgroundRadius ä¸º [r1ãr2ãr3ãr4 ]ã
     * @returns {Object} èæ¯æ¡å¾å½¢ï¼ä¸ä¸ªå¯è§åå¾å½¢ï¼ç©å½¢ï¼å¯¹è±¡ã
     */

  }, {
    key: "Background",
    value: function Background(shapeFactory, box, setting) {
      var sets = setting ? setting : {}; // èæ¯æ¡å¾å½¢åæ°å¯¹è±¡

      var bgSP = new Rectangle_Rectangle(box[0], box[3], Math.abs(box[2] - box[0]), Math.abs(box[3] - box[1])); // é»è®¤æ ·å¼

      bgSP.style = {
        fillColor: "#f3f3f3"
      }; // è®¾ç½®ç¨æ· style

      if (sets.backgroundStyle) {
        Util.copyAttributesWithClip(bgSP.style, sets.backgroundStyle);
      } // è®¾ç½®èæ¯æ¡åè§åæ°


      if (sets.backgroundRadius) {
        bgSP.style["radius"] = sets.backgroundRadius;
      } // ç¦æ­¢èæ¯æ¡ååºäºä»¶


      bgSP.clickable = false;
      bgSP.hoverable = false;
      return shapeFactory.createShape(bgSP);
    }
    /**
     * @function  SuperMap.Feature.ShapeParameters.prototype.GraphAxis
     * @description åå»ºä¸ä¸ªç»è®¡å¾è¡¨åæ è½´å¾å½¢å¯¹è±¡ç»ã
     * @param {SuperMap.Feature.ShapeFactory} shapeFactory - å¾å½¢å·¥åå¯¹è±¡ï¼å¿è®¾åæ°ã
     * @param {Array.<number>} dataViewBox - ç»è®¡å¾è¡¨æ¨¡åçæ°æ®è§å¾æ¡ï¼é¿åº¦ä¸º 4 çä¸ç»´æ°ç»ï¼åç´ åæ ï¼[left, bottom, right, top]ï¼å¿è®¾åæ°ã
     * @param {Object} setting - å¾è¡¨éç½®åæ°ï¼å¿è®¾åæ°ã
     * @param {Object} setting.axisStyle - åæ è½´æ ·å¼ï¼æ­¤æ ·å¼å¯¹è±¡å¯¹è±¡å¯è®¾å±æ§ï¼<SuperMap.Feature.ShapeParameters.Line#style>ã
     * @param {boolean} [setting.axisUseArrow=false] - åæ è½´æ¯å¦ä½¿ç¨ç®­å¤´ã
     * @param {number} [setting.axisYTick=0] - y è½´å»åº¦æ°éï¼0è¡¨ç¤ºä¸ä½¿ç¨ç®­å¤´ã
     * @param {Array.<string>} setting.axisYLabels - y è½´ä¸çæ ç­¾ç»åå®¹ï¼æ ç­¾é¡ºåºæ²¿çæ°æ®è§å¾æ¡å·¦é¢æ¡è¾¹èªä¸èä¸ï¼ç­è·æå¸ãä¾å¦ï¼["1000", "750", "500", "250", "0"]ã
     * @param {Object} setting.axisYLabelsStyle - y è½´ä¸çæ ç­¾ç»æ ·å¼ï¼æ­¤æ ·å¼å¯¹è±¡å¯¹è±¡å¯è®¾å±æ§ï¼<SuperMap.Feature.ShapeParameters.Label#style>ã
     * @param {Array.<number>} [setting.axisYLabelsOffset=[0,0]] - y è½´ä¸çæ ç­¾ç»åç§»éãé¿åº¦ä¸º 2 çæ°ç»ï¼æ°ç»ç¬¬ä¸é¡¹è¡¨ç¤º y è½´æ ç­¾ç»æ¨ªåä¸çåç§»éï¼åå·¦ä¸ºæ­£ï¼é»è®¤å¼ï¼0ï¼æ°ç»ç¬¬äºé¡¹è¡¨ç¤º y è½´æ ç­¾ç»çºµåä¸çåç§»éï¼åä¸ä¸ºæ­£ï¼é»è®¤å¼ï¼0ã
     * @param {Array.<string>} setting.axisXLabels - x è½´ä¸çæ ç­¾ç»åå®¹ï¼æ ç­¾é¡ºåºæ²¿çæ°æ®è§å¾æ¡ä¸é¢æ¡è¾¹èªå·¦åå³æå¸ï¼ä¾å¦ï¼["92å¹´", "95å¹´", "99å¹´"]ã
     * æ ç­¾æå¸è§åï¼å½æ ç­¾æ°éä¸ xShapeInfo ä¸­çå±æ§ xPositions æ°éç¸åï¼å³æ ç­¾ä¸ªæ°ä¸æ°æ®ä¸ªæ°ç¸ç­æ¶ï¼, æç§ xPositions æä¾çä½ç½®å¨æ°´å¹³æ¹åä¸æå¸æ ç­¾ï¼å¦åæ²¿æ°æ®è§å¾æ¡ä¸é¢æ¡è¾¹ç­è·æå¸æ ç­¾ã
     * @param {Object} setting.axisXLabelsStyle - x è½´ä¸çæ ç­¾ç»æ ·å¼ï¼æ­¤æ ·å¼å¯¹è±¡å¯¹è±¡å¯è®¾å±æ§ï¼<SuperMap.Feature.ShapeParameters.Label#style>ã
     * @param {Array.<number>} [setting.axisXLabelsOffset=[0,0]] - x è½´ä¸çæ ç­¾ç»åç§»éãé¿åº¦ä¸º 2 çæ°ç»ï¼æ°ç»ç¬¬ä¸é¡¹è¡¨ç¤º x è½´æ ç­¾ç»æ¨ªåä¸çåç§»éï¼åå·¦ä¸ºæ­£ï¼é»è®¤å¼ï¼0ï¼æ°ç»ç¬¬äºé¡¹è¡¨ç¤º x è½´æ ç­¾ç»çºµåä¸çåç§»éï¼åä¸ä¸ºæ­£ï¼é»è®¤å¼ï¼0ã
     * @param {boolean} setting.useXReferenceLine - æ¯å¦ä½¿ç¨æ°´å¹³åèçº¿ï¼å¦æä¸º trueï¼å¨ axisYTick å¤§äº 0 æ¶ææï¼æ°´å¹³åèçº¿æ¯ y è½´å»åº¦å¨æ°æ®è§å¾æ¡éçå»¶ä¼¸ã
     * @param {Object} setting.xReferenceLineStyle - æ°´å¹³åèçº¿æ ·å¼ï¼æ­¤æ ·å¼å¯¹è±¡å¯¹è±¡å¯è®¾å±æ§ï¼<SuperMap.Feature.ShapeParameters.Line#style>ã
     * @param {number} [setting.axis3DParameter=0] - 3D åæ è½´åæ°ï¼æ­¤å±æ§å¼å¨å¤§äºç­äº 15 æ¶ææã
     * @param {Object} xShapeInfo - X æ¹åä¸çå¾å½¢ä¿¡æ¯å¯¹è±¡ï¼åå«ä¸¤ä¸ªå±æ§ã
     * @param {Array.<number>} xShapeInfo.xPositions - å¾å½¢å¨ x è½´æ¹åä¸çåç´ åæ å¼ï¼æ¯ä¸ä¸ªä¸ç»´æ°ç»ï¼å¦æå¾å½¢å¨ x æ¹åä¸æä¸å®å®½åº¦ï¼éå¸¸åå¾å½¢å¨ x æ¹åä¸çä¸­å¿ç¹ä¸ºå¾å½¢å¨ x æ¹åä¸çåæ å¼ã
     * @param {number} xShapeInfo.width - å¾å½¢çå®½åº¦ï¼ç¹å«æ³¨æï¼ç¹çå®½åº¦å§ç»ä¸º 0ï¼èä¸æ¯å¶ç´å¾ï¼ã
     * @returns {Array.<Object>} ç»è®¡å¾è¡¨åæ è½´å¾å½¢å¯¹è±¡æ°ç»ã
     */

  }, {
    key: "GraphAxis",
    value: function GraphAxis(shapeFactory, dataViewBox, setting, xShapeInfo) {
      var dvb = dataViewBox;
      var sets = setting ? setting : {}; // åèçº¿å¾å½¢å¯¹è±¡ç»

      var refLines = []; //åæ è½´ç®­å¤´å¯¹è±¡ç»

      var arrows = []; // æ¯å¦ä½¿ç¨åæ°´å¹³èçº¿ï¼é»è®¤ä¸ä½¿ç¨

      var isAddRefLine = sets.useXReferenceLine ? sets.useXReferenceLine : false; // y è½´ä¸çå»åº¦

      var axisytick = sets.axisYTick && !isNaN(sets.axisYTick) ? sets.axisYTick : 0; // åæ è½´èç¹æ°ç»

      var pois = []; //z è½´ç®­å¤´æ°ç»

      var zArrowPois = []; // x,y è½´ä¸»å¹²èç¹æ°ç»

      var xMainPois = [];

      if (axisytick == 0) {
        xMainPois.push([dvb[0], dvb[3] - 5]);
        xMainPois.push([dvb[0], dvb[1]]); // 3D åæ è½´  ç¬¬ä¸è±¡éå¹³åçº¿

        if (sets.axis3DParameter && !isNaN(sets.axis3DParameter) && sets.axis3DParameter >= 15) {
          var axis3DParameter = parseInt(sets.axis3DParameter);
          var axis3DPoi = [dvb[0] - axis3DParameter, dvb[1] + axis3DParameter]; // æ·»å  3D è½´èç¹

          if (sets.axisUseArrow) {
            // æ·»å  3D è½´ç®­å¤´èç¹åæ 
            //ç®­å¤´åæ 
            zArrowPois.push([axis3DPoi[0] + 1.5, axis3DPoi[1] - 7.5]);
            zArrowPois.push([axis3DPoi[0] - 1, axis3DPoi[1] + 1]);
            zArrowPois.push([axis3DPoi[0] + 7.5, axis3DPoi[1] - 1.5]); //3Dè½´

            xMainPois.push([axis3DPoi[0], axis3DPoi[1]]);
          } else {
            xMainPois.push([axis3DPoi[0], axis3DPoi[1]]);
          }

          xMainPois.push([dvb[0], dvb[1]]);
        }

        xMainPois.push([dvb[2] + 5, dvb[1]]);
      } else {
        // åä½å»åº¦é¿åº¦
        var unitTick = Math.abs(dvb[1] - dvb[3]) / axisytick; // å»åº¦ y åæ 

        var thckY = dvb[3];
        xMainPois.push([dvb[0], thckY - 5]);

        for (var i = 0; i < axisytick; i++) {
          xMainPois.push([dvb[0], thckY]);
          xMainPois.push([dvb[0] - 5, thckY]);
          xMainPois.push([dvb[0], thckY]); // åèçº¿

          if (isAddRefLine) {
            // åèçº¿åæ°å¯¹è±¡
            var refLineSP = new Line_Line([[dvb[0], thckY], [dvb[2], thckY]]); // åèçº¿é»è®¤æ ·å¼å¯¹è±¡

            refLineSP.style = {
              strokeColor: "#cfcfcf",
              strokeLinecap: "butt",
              strokeLineJoin: "round",
              strokeWidth: 1
            }; // ç¦æ­¢äºä»¶

            refLineSP.clickable = false;
            refLineSP.hoverable = false; // ç¨æ·style

            if (sets.xReferenceLineStyle) {
              Util.copyAttributesWithClip(refLineSP.style, sets.xReferenceLineStyle);
            } // çæåèçº¿å¾å½¢å¯¹è±¡


            refLines.push(shapeFactory.createShape(refLineSP));
          } // y å»åº¦å¢é


          thckY += unitTick;
        }

        xMainPois.push([dvb[0], dvb[1]]); // 3D åæ è½´  ç¬¬ä¸è±¡éå¹³åçº¿

        if (sets.axis3DParameter && !isNaN(sets.axis3DParameter) && sets.axis3DParameter >= 15) {
          var _axis3DParameter = parseInt(sets.axis3DParameter);

          var _axis3DPoi = [dvb[0] - _axis3DParameter, dvb[1] + _axis3DParameter];
          /*
           // ç®­å¤´è®¡ç®è¿ç¨
           var axis3DPoiRef = [axis3DPoi[0] + 7, axis3DPoi[1] - 7];  // 7 æ¯ 10 ä¸ºæè¾¹ cosï¼45åº¦ï¼æ¶é»è¾¹çå¼
           var axis3DPoiLT = [axis3DPoiRef[0] - 4, axis3DPoiRef[1] - 4];
           var axis3DPoiRB = [axis3DPoiRef[0] + 4, axis3DPoiRef[1] + 4];
           if(sets.axisUseArrow){
           xMainPois.push([axis3DPoi[0], axis3DPoi[1]]);
           xMainPois.push([axis3DPoiLT[0], axis3DPoiLT[1]]);
           xMainPois.push([axis3DPoi[0], axis3DPoi[1]]);
           xMainPois.push([axis3DPoiRB[0], axis3DPoiRB[1]]);
           xMainPois.push([axis3DPoi[0], axis3DPoi[1]]);
           }
           else{
           xMainPois.push([axis3DPoi[0], axis3DPoi[1]]);
           }
           */
          // æ·»å  3D è½´èç¹

          if (sets.axisUseArrow) {
            // æ·»å  3D è½´åç®­å¤´åæ 
            //ç®­å¤´åæ 
            zArrowPois.push([_axis3DPoi[0] + 1.5, _axis3DPoi[1] - 7.5]);
            zArrowPois.push([_axis3DPoi[0] - 1, _axis3DPoi[1] + 1]);
            zArrowPois.push([_axis3DPoi[0] + 7.5, _axis3DPoi[1] - 1.5]); //3Dè½´

            xMainPois.push([_axis3DPoi[0], _axis3DPoi[1]]);
          } else {
            xMainPois.push([_axis3DPoi[0], _axis3DPoi[1]]);
          }

          xMainPois.push([dvb[0], dvb[1]]);
        }

        xMainPois.push([dvb[2] + 5, dvb[1]]);
      } // åæ è½´ç®­å¤´


      if (sets.axisUseArrow) {
        // x è½´ç®­å¤´èç¹æ°ç»
        var xArrowPois = [[dvb[2] + 5, dvb[1] + 4], [dvb[2] + 13, dvb[1]], [dvb[2] + 5, dvb[1] - 4]]; // y è½´ç®­å¤´èç¹æ°ç»

        var yArrowPois = [[dvb[0] - 4, dvb[3] - 5], [dvb[0], dvb[3] - 13], [dvb[0] + 4, dvb[3] - 5]]; //xè½´ç®­å¤´

        var xSP = new Polygon_Polygon(xArrowPois);
        xSP.style = {
          fillColor: "#008acd"
        };
        Util.copyAttributesWithClip(xSP.style, sets.axisStyle);
        arrows.push(shapeFactory.createShape(xSP)); //yè½´ç®­å¤´

        var ySP = new Polygon_Polygon(yArrowPois);
        ySP.style = {
          fillColor: "#008acd"
        };
        Util.copyAttributesWithClip(ySP.style, sets.axisStyle);
        arrows.push(shapeFactory.createShape(ySP)); // zè½´ç®­å¤´ åæ è½´ç®­å¤´æ¯å¦è¦ä½¿ç¨

        if (sets.axis3DParameter && !isNaN(sets.axis3DParameter) && sets.axis3DParameter >= 15) {
          var zSP = new Polygon_Polygon(zArrowPois);
          zSP.style = {
            fillColor: "#008acd"
          };
          Util.copyAttributesWithClip(zSP.style, sets.axisStyle);
          arrows.push(shapeFactory.createShape(zSP));
        }
      } //ä¸å¸¦ç®­å¤´çåæ è½´


      pois = xMainPois; // åæ è½´åæ°å¯¹è±¡

      var axisSP = new Line_Line(pois); // åæ è½´é»è®¤style

      axisSP.style = {
        strokeLinecap: "butt",
        strokeLineJoin: "round",
        strokeColor: "#008acd",
        strokeWidth: 1
      }; // ç¨æ· style

      if (sets.axisStyle) {
        Util.copyAttributesWithClip(axisSP.style, sets.axisStyle);
      } // ç¦æ­¢äºä»¶


      axisSP.clickable = false;
      axisSP.hoverable = false; // åå»ºåæ è½´å¾å½¢å¯¹è±¡

      var axisMain = [shapeFactory.createShape(axisSP)]; // Y è½´æ ç­¾

      var yLabels = [];

      if (sets.axisYLabels && sets.axisYLabels.length && sets.axisYLabels.length > 0) {
        var axisYLabels = sets.axisYLabels;
        var len = axisYLabels.length; // æ ç­¾åç§»é

        var ylOffset = [0, 0];

        if (sets.axisYLabelsOffset && sets.axisYLabelsOffset.length) {
          ylOffset = sets.axisYLabelsOffset;
        }

        if (len == 1) {
          // æ ç­¾åæ°å¯¹è±¡
          var labelYSP = new Label(dvb[0] - 5 + ylOffset[0], dvb[3] + ylOffset[1], axisYLabels[0]);
          labelYSP.style = {
            labelAlign: "right"
          }; // ç¨æ· style

          if (sets.axisYLabelsStyle) {
            Util.copyAttributesWithClip(labelYSP.style, sets.axisYLabelsStyle);
          } // ç¦æ­¢äºä»¶


          labelYSP.clickable = false;
          labelYSP.hoverable = false; // å¶ä½æ ç­¾

          yLabels.push(shapeFactory.createShape(labelYSP));
        } else {
          var labelY = dvb[3]; // y è½´æ ç­¾åä½è·ç¦»

          var yUnit = Math.abs(dvb[1] - dvb[3]) / (len - 1);

          for (var j = 0; j < len; j++) {
            // æ ç­¾åæ°å¯¹è±¡
            var _labelYSP = new Label(dvb[0] - 5 + ylOffset[0], labelY + ylOffset[1], axisYLabels[j]);

            _labelYSP.style = {
              labelAlign: "right"
            }; // ç¨æ· style

            if (sets.axisYLabelsStyle) {
              Util.copyAttributesWithClip(_labelYSP.style, sets.axisYLabelsStyle);
            } // ç¦æ­¢äºä»¶


            _labelYSP.clickable = false;
            _labelYSP.hoverable = false; // å¶ä½æ ç­¾

            yLabels.push(shapeFactory.createShape(_labelYSP)); // y è½´æ ç­¾ y æ¹åå¢é

            labelY += yUnit;
          }
        }
      } // X è½´æ ç­¾


      var xLabels = [];

      if (sets.axisXLabels && sets.axisXLabels.length && sets.axisXLabels.length > 0) {
        var axisXLabels = sets.axisXLabels;
        var _len = axisXLabels.length; // æ ç­¾åç§»é

        var xlOffset = [0, 0];

        if (sets.axisXLabelsOffset && sets.axisXLabelsOffset.length) {
          xlOffset = sets.axisXLabelsOffset;
        } // æ ç­¾ä¸ªæ°ä¸æ°æ®å­æ®µä¸ªæ°ç¸ç­ç­æ¶ï¼æ ç­¾å¨ x è½´ååæå


        if (xShapeInfo && xShapeInfo.xPositions && xShapeInfo.xPositions.length && xShapeInfo.xPositions.length == _len) {
          var xsCenter = xShapeInfo.xPositions;

          for (var K = 0; K < _len; K++) {
            // æ ç­¾åæ°å¯¹è±¡
            var labelXSP = new Label(xsCenter[K] + xlOffset[0], dvb[1] + xlOffset[1], axisXLabels[K]); // é»è®¤ style

            labelXSP.style = {
              labelAlign: "center",
              labelBaseline: "top"
            }; // ç¨æ· style

            if (sets.axisXLabelsStyle) {
              Util.copyAttributesWithClip(labelXSP.style, sets.axisXLabelsStyle);
            } // ç¦æ­¢äºä»¶


            labelXSP.clickable = false;
            labelXSP.hoverable = false; // åå»ºæ ç­¾å¯¹è±¡

            xLabels.push(shapeFactory.createShape(labelXSP));
          }
        } else {
          if (_len == 1) {
            // æ ç­¾åæ°å¯¹è±¡
            var _labelXSP = new Label(dvb[0] - 5 + xlOffset[0], dvb[1] + xlOffset[0], axisXLabels[0]); // é»è®¤ style


            _labelXSP.style = {
              labelAlign: "center",
              labelBaseline: "top"
            }; // ç¨æ· style

            if (sets.axisXLabelsStyle) {
              Util.copyAttributesWithClip(_labelXSP.style, sets.axisXLabelsStyle);
            } // ç¦æ­¢äºä»¶


            _labelXSP.clickable = false;
            _labelXSP.hoverable = false; // åå»ºæ ç­¾å¯¹è±¡

            xLabels.push(shapeFactory.createShape(_labelXSP));
          } else {
            var labelX = dvb[0]; // x è½´æ ç­¾åä½è·ç¦»

            var xUnit = Math.abs(dvb[2] - dvb[0]) / (_len - 1);

            for (var m = 0; m < _len; m++) {
              // æ ç­¾åæ°å¯¹è±¡
              var _labelXSP2 = new Label(labelX + xlOffset[0], dvb[1] + xlOffset[1], axisXLabels[m]); // é»è®¤ style


              _labelXSP2.style = {
                labelAlign: "center",
                labelBaseline: "top"
              }; // ç¨æ· style

              if (sets.axisXLabelsStyle) {
                Util.copyAttributesWithClip(_labelXSP2.style, sets.axisXLabelsStyle);
              } // ç¦æ­¢äºä»¶


              _labelXSP2.clickable = false;
              _labelXSP2.hoverable = false; // åå»ºæ ç­¾å¯¹è±¡

              xLabels.push(shapeFactory.createShape(_labelXSP2)); // x è½´æ ç­¾ x æ¹åå¢é

              labelX += xUnit;
            }
          }
        }
      } // ç»è£å¹¶è¿åææåæ è½´çå¾å½¢


      return refLines.concat(axisMain).concat(yLabels).concat(xLabels).concat(arrows);
    }
    /**
     * @function  SuperMap.Feature.ShapeParameters.prototype.ShapeStyleTool
     * @description ä¸ä¸ªå¾å½¢ style å¤çå·¥å·ãæ­¤å·¥å·å°æå®çé»è®¤ styleï¼éç¨ styleï¼æ styleGroup åå¾ç style åææ°æ®å¼ value èå´åå¾ç style è¿è¡åå¹¶ï¼å¾å°å¾å½¢æç»ç styleã
     * @param {Object} defaultStyle - é»è®¤styleï¼æ­¤æ ·å¼å¯¹è±¡å¯è®¾å±æ§æ ¹æ®å¾å½¢ç±»ååè <{@link SuperMap.Feature.ShapeParameters}> å­ç±»å¯¹è±¡ç style å±æ§ã
     * @param {Object} style - å¾å½¢å¯¹è±¡åºç¡ styleï¼æ­¤åæ°æ§å¶å¾å½¢çåºç¡æ ·å¼ï¼å¯è®¾å±æ§æ ¹æ®å¾å½¢ç±»ååè <{@link SuperMap.Feature.ShapeParameters}> å­ç±»å¯¹è±¡ç style å±æ§ãä¼åçº§ä½äº styleGroupï¼styleByCodomainã
     * @param {Array.<Object>} styleGroup - ä¸ä¸ª style æ°ç»ï¼ä¼åçº§ä½äº styleByCodomainï¼é«äº styleãæ­¤æ°ç»æ¯ä¸ªåç´ æ¯æ ·å¼å¯¹è±¡ï¼
     * å¶å¯è®¾å±æ§æ ¹æ®å¾å½¢ç±»ååè <{@link SuperMap.Feature.ShapeParameters}> å­ç±»å¯¹è±¡ç style å±æ§ãéè¿ index åæ°ä» styleGroup ä¸­å styleã
     * @param {Array.<Object>} styleByCodomain - ææ°æ®ï¼åæ° valueï¼æå¨å¼åèå´æ§å¶æ°æ®çå¯è§åå¯¹è±¡æ ·å¼ã
     * (start code)
     * // styleByCodomain çæ¯ä¸ªåç´ æ¯ä¸ªåå«å¼åä¿¡æ¯åä¸å¼åå¯¹åºæ ·å¼ä¿¡æ¯çå¯¹è±¡ï¼è¯¥å¯¹è±¡ï¼å¿é¡»ï¼æä¸ä¸ªå±æ§ï¼
     * // start: å¼åå¼ä¸éï¼åå«ï¼;
     * // end: å¼åå¼ä¸éï¼ä¸åå«ï¼;
     * // style: æ°æ®å¯è§åå¾å½¢ç styleï¼å¶å¯è®¾å±æ§æ ¹æ®å¾å½¢ç±»ååè <SuperMap.Feature.ShapeParameters> å­ç±»å¯¹è±¡ç style å±æ§ãã
     * // dataStyleByCodomain æ°ç»å½¢å¦ï¼
     * [
     *   {
    *     start:0,
    *     end:250,
    *     style:{
    *          fillColor:"#00CD00"
    *      }
    *  },
     *   {
    *     start:250,
    *     end:500,
    *     style:{
    *          fillColor:"#00EE00"
    *      }
    *  },
     *   {
    *     start:500,
    *     end:750,
    *     style:{
    *          fillColor:"#00FF7F"
    *      }
    *  },
     *   {
    *     start:750,
    *     end:1500,
    *     style:{
    *          fillColor:"#00FF00"
    *      }
    *  }
     * ]
     * (end)
     * @param {number} index - styleGroup çç´¢å¼å¼ï¼ç¨äºååº styleGroup æå®ç styleã
     * @param {number} value - æ°æ®å¼ï¼ç¨äºååº styleByCodomain æå®ç styleã
     * @returns {Object} åå¹¶åçæ ·å¼ ï¼styleï¼ å¯¹è±¡ã
     */

  }, {
    key: "ShapeStyleTool",
    value: function ShapeStyleTool(defaultStyle, style, styleGroup, styleByCodomain, index, value) {
      // ç¨ defaultStyle åå§å style å¯¹è±¡
      var finalStyle = defaultStyle ? defaultStyle : {}; // åºç¡ style

      if (style) {
        Util.copyAttributesWithClip(finalStyle, style);
      } // æç´¢å¼èµ style


      if (styleGroup && styleGroup.length && typeof index !== "undefined" && !isNaN(index) && index >= 0) {
        if (styleGroup[index]) {
          Util.copyAttributesWithClip(finalStyle, styleGroup[index]);
        }
      } // æå¼åèµ style


      if (styleByCodomain && styleByCodomain.length && typeof value !== "undefined") {
        var dsc = styleByCodomain;
        var dscLen = dsc.length;
        var v = parseFloat(value);

        for (var i = 0; i < dscLen; i++) {
          if (dsc[i].start <= v && v < dsc[i].end) {
            Util.copyAttributesWithClip(finalStyle, dsc[i].style);
            break;
          }
        }
      }

      return finalStyle;
    }
  }]);

  return ShapeFactory;
}();
SuperMap.Feature = SuperMap.Feature || {};
SuperMap.Feature.ShapeFactory = ShapeFactory;
// CONCATENATED MODULE: ./src/common/overlay/feature/Theme.js
function feature_Theme_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function feature_Theme_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function feature_Theme_createClass(Constructor, protoProps, staticProps) { if (protoProps) feature_Theme_defineProperties(Constructor.prototype, protoProps); if (staticProps) feature_Theme_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class  SuperMap.Feature.Theme
 * @category Visualization Theme
 * @classdesc ä¸é¢è¦ç´ åºç±»ï¼æ­¤ç±»ä¸å¯å®ä¾åã
 */

var Theme_Theme = /*#__PURE__*/function () {
  /**
   * @function SuperMap.Feature.Theme.prototype.constructor
   * @description æé å½æ°ã
   * @param {Object} data - ç¨æ·æ°æ®ï¼ç¨äºçæå¯è§å shapeï¼å¿è®¾åæ°ã
   * @param {SuperMap.Layer.Theme} layer - æ­¤ä¸é¢è¦ç´ æå¨å¾å±ï¼å¿è®¾åæ°ã
   * @returns {SuperMap.Feature.Theme} è¿åä¸ä¸ªä¸é¢è¦ç´ ã
   */
  function Theme(data, layer) {
    feature_Theme_classCallCheck(this, Theme);

    if (!data) {
      return;
    } // layer å¿é¡»å·²ç»æ·»å å°å°å¾, ä¸å·²åå§åæ¸²æå¨


    if (!layer || !layer.map || !layer.renderer) {
      return;
    }
    /**
     * @member {string} SuperMap.Feature.Theme.prototype.id
     * @description ä¸é¢è¦ç´ å¯ä¸æ è¯ã
     */


    this.id = Util.createUniqueID(this.CLASS_NAME + "_");
    /**
     * @member {SuperMap.LonLat} SuperMap.Feature.Theme.prototype.lonlat
     * @description ä¸é¢è¦ç´ å°çåèä½ç½®ãå­ç±»ä¸­å¿é¡»æ ¹æ®ç¨æ·æ°æ®ï¼æå°çä½ç½®åæ°ï¼å¯¹å¶èµå¼ã
     */

    this.lonlat = null;
    /**
     * @member {Array} SuperMap.Feature.Theme.prototype.location
     * @description ä¸é¢è¦ç´ åç´ åèä½ç½®ãéå¸¸ç±å°çåèä½ç½®å³å®ãé¿åº¦ä¸º 2 çæ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤º x åæ ï¼ç¬¬äºä¸ªåç´ è¡¨ç¤º y åæ ã
     */

    this.location = [];
    /**
     * @readonly
     * @member {Object} SuperMap.Feature.Theme.prototype.data
     * @description ç¨æ·æ°æ®ï¼ç¨äºçæå¯è§å shapeï¼å¯å¨å­ç±»ä¸­è§å®æ°æ®æ ¼å¼æç±»åï¼å¦ï¼<SuperMap.Feature.Vector>ã
     */

    this.data = data;
    /**
     * @readonly
     * @member {Array} SuperMap.Feature.Theme.prototype.shapes
     * @description æææ­¤ä¸é¢è¦ç´ çå¯è§åå¾å½¢å¯¹è±¡æ°ç»ï¼æ°ç»é¡ºåºæ§å¶æ¸²æã
     */

    this.shapes = [];
    /**
     * @readonly
     * @member {SuperMap.Layer.Theme} SuperMap.Feature.Theme.prototype.layer
     * @description æ­¤ä¸é¢è¦ç´ æå¨ä¸é¢å¾å±ã
     */

    this.layer = layer;
    this.CLASS_NAME = "SuperMap.Feature.Theme";
  }
  /**
   * @function SuperMap.Feature.Theme.prototype.destroy
   * @description éæ¯ä¸é¢è¦ç´ ã
   */


  feature_Theme_createClass(Theme, [{
    key: "destroy",
    value: function destroy() {
      this.data = null;
      this.id = null;
      this.lonlat = null;
      this.location = null;
      this.shapes = null;
      this.layer = null;
    }
    /**
     * @function SuperMap.Feature.Theme.prototype.getLocalXY
     * @description å°çåæ è½¬ä¸ºåç´ åæ ã
     * @param {(SuperMap.Geometry.Point|SuperMap.Geometry.GeoText|SuperMap.LonLat)} coordinate - å°çåæ ç¹ã
     * @returns {Array} é¿åº¦ä¸º 2 çæ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤º x åæ ï¼ç¬¬äºä¸ªåç´ è¡¨ç¤º y åæ ã
     */

  }, {
    key: "getLocalXY",
    value: function getLocalXY(coordinate) {
      var resolution = this.layer.map.getResolution();
      var extent = this.layer.map.getExtent();

      if (coordinate instanceof Point || coordinate instanceof GeoText) {
        var x = coordinate.x / resolution + -extent.left / resolution;
        var y = extent.top / resolution - coordinate.y / resolution;
        return [x, y];
      } else if (coordinate instanceof LonLat) {
        var _x = coordinate.lon / resolution + -extent.left / resolution;

        var _y = extent.top / resolution - coordinate.lat / resolution;

        return [_x, _y];
      } else {
        return null;
      }
    }
  }]);

  return Theme;
}();
SuperMap.Feature = SuperMap.Feature || {};
SuperMap.Feature.Theme = Theme_Theme;
// CONCATENATED MODULE: ./src/common/overlay/Graph.js
function Graph_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Graph_typeof = function _typeof(obj) { return typeof obj; }; } else { Graph_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Graph_typeof(obj); }

function Graph_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Graph_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Graph_createClass(Constructor, protoProps, staticProps) { if (protoProps) Graph_defineProperties(Constructor.prototype, protoProps); if (staticProps) Graph_defineProperties(Constructor, staticProps); return Constructor; }

function Graph_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { Graph_get = Reflect.get; } else { Graph_get = function _get(target, property, receiver) { var base = Graph_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return Graph_get(target, property, receiver || target); }

function Graph_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = Graph_getPrototypeOf(object); if (object === null) break; } return object; }

function Graph_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Graph_setPrototypeOf(subClass, superClass); }

function Graph_setPrototypeOf(o, p) { Graph_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Graph_setPrototypeOf(o, p); }

function Graph_createSuper(Derived) { var hasNativeReflectConstruct = Graph_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Graph_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Graph_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Graph_possibleConstructorReturn(this, result); }; }

function Graph_possibleConstructorReturn(self, call) { if (call && (Graph_typeof(call) === "object" || typeof call === "function")) { return call; } return Graph_assertThisInitialized(self); }

function Graph_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Graph_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Graph_getPrototypeOf(o) { Graph_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Graph_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.Feature.Theme.Graph
 * @classdesc ç»è®¡ä¸é¢è¦ç´ åºç±»ã
 * @category Visualization Theme
 * @description æ­¤ç±»å®ä¹äºç»è®¡ä¸é¢è¦ç´ åºç¡æ¨¡åï¼å·ä½çå¾è¡¨æ¨¡åéè¿ç»§æ¿æ­¤ç±»ï¼å¨å­ç±»ä¸­å®ç° assembleShapes æ¹æ³ã
 *              ç»è®¡ä¸é¢è¦ç´ æ¨¡åéç¨äºå¯è§åå¾å½¢å¤§å°èªéåºç­ç¥ï¼ç¨è¾å°çåæ°æ§å¶çå¾è¡¨è¯¸å¤å¾å½¢ï¼å¾è¡¨éç½®å¯¹è±¡ <SuperMap.Feature.Theme.Graph.setting> çåºç¡å±æ§åªæ 7 ä¸ªï¼
 *              å®ä»¬æ§å¶çå¾è¡¨ç»æãå¼åèå´ãæ°æ®å°æ°ä½ç­åºç¡å¾è¡¨å½¢æãææå¾è¡¨çå¾å½¢å¿é¡»å¨å¾è¡¨ç»æéèªéåºå¤§å°ã
 *              æ­¤ç±»ä¸å¯å®ä¾åï¼æ­¤ç±»çå¯å®ä¾åå­ç±»å¿é¡»å®ç° assembleShapes() æ¹æ³ã
 * @extends SuperMap.Feature.Theme
 * @param {SuperMap.Feature.Vector} data - ç¨æ·æ°æ®ã
 * @param {SuperMap.Layer.Theme} layer - æ­¤ä¸é¢è¦ç´ æå¨å¾å±ã
 * @param {Array.<string>} fields - data ä¸­çåä¸æ­¤å¾è¡¨çæçå­æ®µåç§°ã
 * @param {Object} setting - å¾è¡¨éç½®å¯¹è±¡ã
 * @param {SuperMap.LonLat} [lonlat] - ä¸é¢è¦ç´ å°çä½ç½®ãé»è®¤ä¸º data æä»£çå°çè¦ç´  Bounds ä¸­å¿ã
 */

var Graph = /*#__PURE__*/function (_Theme) {
  Graph_inherits(Graph, _Theme);

  var _super = Graph_createSuper(Graph);

  function Graph(data, layer, fields, setting, lonlat, options) {
    var _this;

    Graph_classCallCheck(this, Graph);

    _this = _super.call(this, data, layer, fields, setting, lonlat, options);
    /**
     * @member {SuperMap.Feature.ShapeFactory} SuperMap.Feature.Theme.Graph.prototype.shapeFactory
     * @description åç½®çå¾å½¢å·¥åå¯¹è±¡ï¼è°ç¨å¶ createShape æ¹æ³åå»ºå¾å½¢ã
     */

    _this.shapeFactory = new ShapeFactory();
    /**
     * @member {Object} SuperMap.Feature.Theme.Graph.prototype.shapeParameters
     * @description å½åå¾å½¢åæ°å¯¹è±¡ï¼<SuperMap.Feature.ShapeParameters> çå­ç±»å¯¹è±¡ã
     */

    _this.shapeParameters = null;
    /**
     * @member {boolean} [SuperMap.Feature.Theme.Graph.prototype.RelativeCoordinate]
     * @description å¾å½¢æ¯å¦å·²ç»è®¡ç®äºç¸å¯¹åæ ã
     */

    _this.RelativeCoordinate = false;
    /**
     * @member {Object} SuperMap.Feature.Theme.Graph.prototype.setting
     * @description å¾è¡¨éç½®å¯¹è±¡ï¼è¯¥å¯¹è±¡æ§å¶çå¾è¡¨çå¯è§åæ¾ç¤ºã
     * @param {number} width - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å®½åº¦ã
     * @param {number} height - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼é«åº¦ã
     * @param {Array.<number>} codomain - å¼åï¼é¿åº¦ä¸º 2 çä¸ç»´æ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºå¼åä¸éï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºå¼åä¸éã
     * @param {number} [XOffset] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ X æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
     * @param {number} [YOffset] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ Y æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
     * @param {Array.<number>} [dataViewBoxParameter] - æ°æ®è§å¾æ¡ dataViewBox åæ°ï¼å®æ¯æå¾è¡¨æ¡ chartBox
     *                                                    ï¼ç±å¾è¡¨ä½ç½®ãå¾è¡¨å®½åº¦ãå¾è¡¨é«åº¦ææçå¾è¡¨èå´æ¡ï¼å¨å·¦ãä¸ï¼å³ï¼ä¸åä¸ªæ¹åä¸çååè·å¼ã
     * @param {number} [decimalNumber] - æ°æ®å¼æ°ç» dataValues åç´ å¼å°æ°ä½æ°ï¼æ°æ®çå°æ°ä½å¤çåæ°ï¼åå¼èå´ï¼[0, 16]ã
     *                                       å¦æä¸è®¾ç½®æ­¤åæ°ï¼å¨åæ°æ®å¼æ¶ä¸å¯¹æ°æ®åå°æ°ä½å¤çã
     *             
     */

    _this.setting = null;
    /**
     * @readonly
     * @member {Array.<number>} SuperMap.Feature.Theme.Graph.prototype.origonPoint 
     * @description ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼åç¹ï¼å¾è¡¨å·¦ä¸è§ç¹åç´ åæ ï¼æ¯é¿åº¦ä¸º 2 çä¸ç»´æ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤º x åæ ï¼ç¬¬äºä¸ªåç´ è¡¨ç¤º y åæ ã
     */

    _this.origonPoint = null;
    /**
     * @readonly
     * @member {Array.<number>} SuperMap.Feature.Theme.Graph.prototype.chartBox
     * @description ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼åºåï¼å³å¾è¡¨æ¡ï¼é¿åº¦ä¸º 4 çä¸ç»´æ°ç»ï¼æ°ç»ç 4 ä¸ªåç´ ä¾æ¬¡è¡¨ç¤ºå¾è¡¨æ¡å·¦ç«¯ x åæ å¼ã
     *              ä¸ç«¯ yåæ å¼ã å³ç«¯ xåæ å¼ã ä¸ç«¯ y åæ å¼ï¼[left, bottom, right, top]ã
     */

    _this.chartBox = null;
    /**
     * @readonly
     * @member {SuperMap.Bounds} SuperMap.Feature.Theme.Graph.prototype.chartBounds
     * @description å¾è¡¨ Bounds éç lonlatãXOffsetãYOffset æ´æ°ï¼æ³¨æ chartBounds æ¯å¾è¡¨åç´ èå´ï¼ä¸æ¯å°çèå´ã
     */

    _this.chartBounds = null;
    /**
     * @readonly
     * @member {number} SuperMap.Feature.Theme.Graph.prototype.width 
     * @description ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å®½åº¦ ã
     */

    _this.width = null;
    /**
     * @readonly
     * @member {number} SuperMap.Feature.Theme.Graph.prototype.height
     * @description ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼é«åº¦ ã
     */

    _this.height = null;
    /**
     * @readonly
     * @member {number} SuperMap.Feature.Theme.Graph.prototype.XOffset
     * @description ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ X æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
     */

    _this.XOffset = 0;
    /**
     * @readonly
     * @member {number} SuperMap.Feature.Theme.Graph.prototype.YOffset
     * @description ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ Y æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
     */

    _this.YOffset = 0;
    /**
     * @readonly
     * @member {Array.<number>} SuperMap.Feature.Theme.Graph.prototype.DVBParameter
     * @description æ°æ®è§å¾æ¡åæ°ï¼é¿åº¦ä¸º 4 çä¸ç»´æ°ç»ï¼æ°ç»åç´ å¼ >= 0ï¼ï¼[leftOffset, bottomOffset, rightOffset, topOffset]ï¼chartBox ååè·å¼ã
     *               æ­¤å±æ§ç¨äºæå®æ°æ®è§å¾æ¡ dataViewBox çèå´ã
     */

    _this.DVBParameter = null;
    /**
     * @readonly
     * @member {Array.<number>} SuperMap.Feature.Theme.Graph.prototype.dataViewBox 
     * @description æ°æ®è§å¾æ¡ï¼é¿åº¦ä¸º 4 çä¸ç»´æ°ç»ï¼[left, bottom, right, top]ã
     *              dataViewBox æ¯ç»è®¡ä¸é¢è¦ç´ ææ ¸å¿çåå®¹ï¼å®è´è´£è§£éæ°æ®å¨ä¸ä¸ªåç´ åºåéçæ°æ®å¯è§åå«ä¹ï¼
     *              è¿ç§å«ä¹ç¨å¯è§åå¾å½¢è¡¨è¾¾åºæ¥ï¼è¿äºè¡¨ç¤ºæ°æ®çå¾å½¢åä¸äºè¾å©å¾å½¢ç»åå¨ä¸èµ·ææç»è®¡ä¸é¢å¾è¡¨ã
     */

    _this.dataViewBox = null;
    /**
     * @readonly
     * @member {Array.<number>} SuperMap.Feature.Theme.Graph.prototype.DVBCodomain 
     * @description æ°æ®è§å¾æ¡çååè®¸å±ç¤ºçæ°æ®å¼åï¼é¿åº¦ä¸º 2 çä¸ç»´æ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºå¼åä¸éï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºå¼åä¸éã
     *              dataViewBox ä¸­åè®¸çæ°æ®èå´ï¼å¯¹æ°æ®æº¢åºå¼åèå´æåµçå¤çéè¦å¨ assembleShapes ä¸­è¿è¡ã
     */

    _this.DVBCodomain = null;
    /**
     * @readonly
     * @member {Array.<number>} SuperMap.Feature.Theme.Graph.prototype.DVBCenterPoint 
     * @description æ°æ®è§å¾æ¡ä¸­å¿ç¹ï¼é¿åº¦ä¸º 2 çä¸ç»´æ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤º x åæ ï¼ç¬¬äºä¸ªåç´ è¡¨ç¤º y åæ ã
     */

    _this.DVBCenterPoint = null;
    /**
     * @readonly
     * @member {string} SuperMap.Feature.Theme.Graph.prototype.DVBUnitValue 
     * @description åä½å¼ãå¨ assembleShapes() ä¸­åå§åå¶å·ä½æä¹ï¼ä¾å¦ï¼é¥¼å¾ç DVBUnitValue å¯ä»¥å®ä¹ä¸º"360/æ°æ®æ»å"ï¼
     *              æçº¿å¾ç DVBUnitValue å¯ä»¥å®ä¹ä¸º "DVBCodomain/DVBHeight"ã
     */

    _this.DVBUnitValue = null;
    /**
     * @readonly
     * @member {Array.<number>} SuperMap.Feature.Theme.Graph.prototype.DVBOrigonPoint 
     * @description æ°æ®è§å¾æ¡åç¹ï¼æ°æ®è§å¾æ¡å·¦ä¸è§ç¹ï¼é¿åº¦ä¸º 2 çä¸ç»´æ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤º x åæ ï¼ç¬¬äºä¸ªåç´ è¡¨ç¤º y åæ ã
     */

    _this.DVBOrigonPoint = null;
    /**
     * @readonly
     * @member {number} SuperMap.Feature.Theme.Graph.prototype.DVBWidth 
     * @description æ°æ®è§å¾æ¡å®½åº¦ã
     */

    _this.DVBWidth = null;
    /**
     * @readonly
     * @member {number} SuperMap.Feature.Theme.Graph.prototype.DVBHeight 
     * @description æ°æ®è§å¾æ¡é«åº¦ã
     */

    _this.DVBHeight = null;
    /**
     * @readonly
     * @member {Array.<number>} SuperMap.Feature.Theme.Graph.prototype.origonPointOffset
     * @description æ°æ®è§å¾æ¡åç¹ç¸å¯¹äºå¾è¡¨æ¡çåç¹åç§»éï¼é¿åº¦ä¸º 2 çä¸ç»´æ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤º x åç§»éï¼ç¬¬äºä¸ªåç´ è¡¨ç¤º y åç§»éã
     */

    _this.origonPointOffset = null;
    /**
     * @readonly
     * @member {Array.<string>} SuperMap.Feature.Theme.Graph.prototype.fields 
     * @description æ°æ®{SuperMap.Feature.Vector}å±æ§å­æ®µã
     */

    _this.fields = fields || [];
    /**
     * @readonly
     * @member {Array.<number>} SuperMap.Feature.Theme.Graph.prototype.dataValues
     * @description å¾è¡¨å±ç¤ºçæ°æ®å¼ï¼éè¿ fields ä»æ°æ® feature å±æ§ä¸­è·å¾ã
     */

    _this.dataValues = null; // å¾è¡¨ä½ç½®

    if (lonlat) {
      _this.lonlat = lonlat;
    } else {
      // é»è®¤ä½¿ç¨ bounds ä¸­å¿
      _this.lonlat = _this.data.geometry.getBounds().getCenterLonLat();
    } // éç½®é¡¹æ£æµä¸èµå¼


    if (setting && setting.width && setting.height && setting.codomain) {
      _this.setting = setting;
    }

    _this.CLASS_NAME = "SuperMap.Feature.Theme.Graph";
    return _this;
  }
  /**
   * @function SuperMap.Feature.Theme.Graph.prototype.destroy
   * @description éæ¯ä¸é¢è¦ç´ ã
   */


  Graph_createClass(Graph, [{
    key: "destroy",
    value: function destroy() {
      this.shapeFactory = null;
      this.shapeParameters = null;
      this.width = null;
      this.height = null;
      this.origonPoint = null;
      this.chartBox = null;
      this.dataViewBox = null;
      this.chartBounds = null;
      this.DVBParameter = null;
      this.DVBOrigonPoint = null;
      this.DVBCenterPoint = null;
      this.DVBWidth = null;
      this.DVBHeight = null;
      this.DVBCodomain = null;
      this.DVBUnitValue = null;
      this.origonPointOffset = null;
      this.XOffset = null;
      this.YOffset = null;
      this.fields = null;
      this.dataValues = null;
      this.setting = null;

      Graph_get(Graph_getPrototypeOf(Graph.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.Feature.Theme.Graph.prototype.initBaseParameter
     * @description åå§åä¸é¢è¦ç´ ï¼å¾è¡¨ï¼åºç¡åæ°ãå¨è°ç¨æ­¤æ¹æ³åï¼æ­¤ç±»çå¾è¡¨æ¨¡åç¸å³å±æ§é½æ¯ä¸å¯ç¨ç ï¼æ­¤æ¹æ³å¨ assembleShapes å½æ°ä¸­è°ç¨ã
     *              è°ç¨æ­¤å½æ°å³ç³»å° setting å¯¹è±¡çä»¥ä¸å±æ§ã
     * @param {number} width - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å®½åº¦ã
     * @param {number} height - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼é«åº¦ã
     * @param {Array.<number>} codomain - å¼åï¼é¿åº¦ä¸º 2 çä¸ç»´æ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºå¼åä¸éï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºå¼åä¸éã
     * @param {number} [XOffset] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ X æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
     * @param {number} [YOffset] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ Y æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
     * @param {Array.<number>} [dataViewBoxParameter] - æ°æ®è§å¾æ¡ dataViewBox åæ°ï¼å®æ¯æå¾è¡¨æ¡ chartBoxã
     *                                     ï¼ç±å¾è¡¨ä½ç½®ãå¾è¡¨å®½åº¦ãå¾è¡¨é«åº¦ææçå¾è¡¨èå´æ¡ï¼å¨å·¦ãä¸ï¼å³ï¼ä¸åä¸ªæ¹åä¸çååè·å¼ã
     * @param {number} [decimalNumber] - æ°æ®å¼æ°ç» dataValues åç´ å¼å°æ°ä½æ°ï¼æ°æ®çå°æ°ä½å¤çåæ°ï¼åå¼èå´ï¼[0, 16]ãå¦æä¸è®¾ç½®æ­¤åæ°ï¼å¨åæ°æ®å¼æ¶ä¸å¯¹æ°æ®åå°æ°ä½å¤çã
     * @returns {boolean} åå§ååæ°æ¯å¦æåã
     */

  }, {
    key: "initBaseParameter",
    value: function initBaseParameter() {
      // åæ°åå§åæ¯å¦æå
      var isSuccess = true; // setting å±æ§æ¯å¦å·²æåèµå¼

      if (!this.setting) {
        return false;
      }

      var sets = this.setting; // æ£æµ setting çå¿è®¾åæ°

      if (!(sets.width && sets.height && sets.codomain)) {
        return false;
      } // æ°æ®


      var decimalNumber = typeof sets.decimalNumber !== "undefined" && !isNaN(sets.decimalNumber) ? sets.decimalNumber : -1;
      var dataEffective = Theme_Theme.getDataValues(this.data, this.fields, decimalNumber);
      this.dataValues = dataEffective ? dataEffective : []; // åºç¡åæ°  width, height, codomain

      this.width = parseFloat(sets.width);
      this.height = parseFloat(sets.height);
      this.DVBCodomain = sets.codomain; // å¾è¡¨åç§»
      // if(sets.XOffset) {this.XOffset = sets.XOffset};
      // if(sets.YOffset) {this.YOffset = sets.YOffset};

      this.XOffset = sets.XOffset ? sets.XOffset : 0;
      this.YOffset = sets.YOffset ? sets.YOffset : 0; // å¶ä»é»è®¤å¼

      this.origonPoint = [];
      this.chartBox = [];
      this.dataViewBox = [];
      this.DVBParameter = sets.dataViewBoxParameter ? sets.dataViewBoxParameter : [0, 0, 0, 0];
      this.DVBOrigonPoint = [];
      this.DVBCenterPoint = [];
      this.origonPointOffset = []; // å¾è¡¨ä½ç½®

      this.resetLocation(); // ä¸é¢è¦ç´ å®½åº¦ w

      var w = this.width; // ä¸é¢è¦ç´ é«åº¦ h

      var h = this.height; // ä¸é¢è¦ç´ åç´ ä½ç½® loc

      var loc = this.location; // ä¸é¢è¦ç´ åç´ ä½ç½® loc

      this.origonPoint = [loc[0] - w / 2, loc[1] - h / 2]; // ä¸é¢è¦ç´ åç¹ï¼å·¦ä¸è§ï¼

      var op = this.origonPoint; // å¾è¡¨æ¡ï¼[left, bottom, right, top]ï¼

      this.chartBox = [op[0], op[1] + h, op[0] + w, op[1]]; // å¾è¡¨æ¡

      var cb = this.chartBox; // æ°æ®è§å¾æ¡åæ°ï¼å®æ¯å¾è¡¨æ¡åæ¹åå¯¹åºçååè·

      var dbbP = this.DVBParameter; // æ°æ®è§å¾æ¡ ï¼[left, bottom, right, top]ï¼

      this.dataViewBox = [cb[0] + dbbP[0], cb[1] - dbbP[1], cb[2] - dbbP[2], cb[3] + dbbP[3]]; // æ°æ®è§å¾æ¡

      var dvb = this.dataViewBox; //æ£æ¥æ°æ®è§å¾æ¡æ¯å¦åæ³

      if (dvb[0] >= dvb[2] || dvb[1] <= dvb[3]) {
        return false;
      } // æ°æ®è§å¾æ¡åç¹


      this.DVBOrigonPoint = [dvb[0], dvb[3]]; // æ°æ®è§å¾æ¡å®½åº¦

      this.DVBWidth = Math.abs(dvb[2] - dvb[0]); // æ°æ®è§å¾æ¡é«åº¦

      this.DVBHeight = Math.abs(dvb[1] - dvb[3]); // æ°æ®è§å¾æ¡ä¸­å¿ç¹

      this.DVBCenterPoint = [this.DVBOrigonPoint[0] + this.DVBWidth / 2, this.DVBOrigonPoint[1] + this.DVBHeight / 2]; // æ°æ®è§å¾æ¡åç¹ä¸å¾è¡¨æ¡çåç¹åç§»é

      this.origonPointOffset = [this.DVBOrigonPoint[0] - op[0], this.DVBOrigonPoint[1] - op[1]];
      return isSuccess;
    }
    /**
     * @function SuperMap.Feature.Theme.Graph.prototype.resetLocation
     * @description æ ¹æ®å°çä½ç½® lonlat éç½®ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼ä½ç½®ã
     * @param {SuperMap.LonLat} lonlat - ä¸é¢è¦ç´ æ°çåç´ ä¸­å¿ä½ç½®ã
     * @returns {Array.<number>} - æ°ä¸é¢è¦ç´ åç´ åèä½ç½®ãé¿åº¦ä¸º 2 çæ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤º x åæ ï¼ç¬¬äºä¸ªåç´ è¡¨ç¤º y åæ ã
     */

  }, {
    key: "resetLocation",
    value: function resetLocation(lonlat) {
      if (lonlat) {
        this.lonlat = lonlat;
      } // è·åå°çä½ç½®å¯¹åºçåç´ åæ  newLocalLX


      var newLocalLX = this.getLocalXY(this.lonlat); // å¤çåç§»é XOffset, YOffset

      newLocalLX[0] += this.XOffset;
      newLocalLX[1] += this.YOffset; // å°å¾å½¢ä½ç½®èµäº  location å±æ§ï¼æ³¨æ location å±æ§è¡¨ç¤ºçæ¯ä¸é¢è¦ç´ ä¸­å¿ä½ç½®ï¼

      this.location = newLocalLX; // æ´æ°å¾è¡¨åç´  Bounds

      var w = this.width;
      var h = this.height;
      var loc = this.location;
      this.chartBounds = new Bounds(loc[0] - w / 2, loc[1] + h / 2, loc[0] + w / 2, loc[1] - h / 2); //éæ°è®¡ç®å½åæ¸åè²

      this.resetLinearGradient();
      return loc;
    }
    /**
     * @function SuperMap.Feature.Theme.Graph.prototype.resetLinearGradient
     * @description resetLocation ä¸­è°ç¨ å¾è¡¨çç¸å¯¹åæ å­å¨çæ¶åï¼éæ°è®¡ç®æ¸åçé¢è²ï¼ç®åç¨äºäºç»´æ±ç¶å¾æ¸åè² æä»¥å­ç±»å®ç°æ­¤æ¹æ³ï¼ã
     */

  }, {
    key: "resetLinearGradient",
    value: function resetLinearGradient() {//å­ç±»å®ç°æ­¤æ¹æ³
    }
    /**
     * @function SuperMap.Feature.Theme.Graph.prototype.shapesConvertToRelativeCoordinate
     * @description å°ï¼ææå¾è¡¨ï¼å¾å½¢çèç¹è½¬ä¸ºç¸å¯¹åæ è¡¨ç¤ºï¼æ­¤å½æ°å¿é¡»ä¸åªè½å¨ assembleShapes() ç»ææ¶è°ç¨ã
     */

  }, {
    key: "shapesConvertToRelativeCoordinate",
    value: function shapesConvertToRelativeCoordinate() {
      var shapes = this.shapes;
      var shapeROP = this.location;

      for (var i = 0, len = shapes.length; i < len; i++) {
        shapes[i].refOriginalPosition = shapeROP;
        var style = shapes[i].style;

        for (var sty in style) {
          switch (sty) {
            case "pointList":
              var pl = style[sty];

              for (var j = 0, len2 = pl.length; j < len2; j++) {
                pl[j][0] -= shapeROP[0];
                pl[j][1] -= shapeROP[1];
              }

              break;

            case "x":
              style[sty] -= shapeROP[0];
              break;

            case "y":
              style[sty] -= shapeROP[1];
              break;

            default:
              break;
          }
        }
      }

      this.RelativeCoordinate = true;
    }
    /**
     * @function SuperMap.Feature.Theme.Graph.prototype.assembleShapes
     * @description å¾å½¢è£éå½æ°ãæ½è±¡æ¹æ³ï¼å¯è§åå­ç±»å¿é¡»å®ç°æ­¤æ¹æ³ã<br>
     *              éåæ­¤æ¹æ³çæ­¥éª¤ï¼<br>
     *              1. å¾è¡¨çæäºç¹æ®éç½®é¡¹ï¼settingï¼å¤çï¼ä¾å¦å¤æ°å¾è¡¨æ¨¡åéè¦éæ°æå® dataViewBoxParameter çé»è®¤å¼ã<br>
     *              2. è°ç¨ initBaseParameter() æ¹æ³åå§åæ¨¡åå±æ§å¼ï¼æ­¤æ­¥éª¤å¿é¡»æ§è¡ï¼åªæå½ initBaseParameter è¿å true æ¶æå¯ä»¥åè®¸è¿è¡åç»­æ­¥éª¤ã<br>
     *              3. è®¡ç®å¾å½¢åæ°ï¼å¶ä½å¾å½¢ï¼å¾å½¢ç»åãå¨ç»è£å¾è¡¨è¿ç¨ä¸­ï¼åºè¯¥ç¹å«æ³¨ææ°æ®è§å¾æ¡åä½å¼çå®ä¹ãæ°æ®å¼æº¢åºå¼åèå´çå¤çåå¾å½¢å¤§å°èªéåºã<br>
     *              4. è°ç¨ shapesConvertToRelativeCoordinate() æ¹æ³ï¼å°å¾å½¢çåæ å¼è½¬ä¸ºç¸å¯¹åæ ï¼æ­¤æ­¥éª¤å¿é¡»æ§è¡ã
     * @example
     *  //å­ç±»å®ç° assembleShapes() æ¥å£çæ­¥éª¤ç¤ºä¾ï¼
     *  assembleShapes: function(){
     *    // ç¬¬ä¸æ­¥ï¼å¾è¡¨çæäºç¹æ®éç½®é¡¹ï¼settingï¼å¤çï¼ä¾å¦å¤æ°å¾è¡¨æ¨¡åéè¦éæ°æå® dataViewBoxParameter çé»è®¤å¼ãæ­¤æ­¥éª¤æ¯éå¿é¡»è¿ç¨ã
     *
     *    // å¾è¡¨éç½®å¯¹è±¡
     *    var sets = this.setting;
     *    // é»è®¤æ°æ®è§å¾æ¡ï¼è¿éå±ç¤ºå¨ä½¿ç¨åæ è½´åä¸ä½¿ç¨åæ è½´æåµä¸å¯¹æ°æ®è§å¾æ¡åæ°èµäºä¸åçé»è®¤å¼
     *    if(!sets.dataViewBoxParameter){
     *          if(typeof(sets.useAxis) === "undefined" || sets.useAxis){
     *              sets.dataViewBoxParameter = [45, 15, 15, 15];
     *          }
     *          else{
     *                  sets.dataViewBoxParameter = [5, 5, 5, 5];
     *          }
     *    }
     *
     *    // ç¬¬äºæ­¥ï¼åå§åå¾è¡¨æ¨¡ååºæ¬åæ°ï¼åªæå¨å¾è¡¨æ¨¡ååºæ¬åæ°åå§åæåæ¶æå¯æ¨¡åç¸å³å±æ§ï¼å¦ this.dataViewBoxã this.DVBCodomainç­ãæ­¤æ­¥éª¤æ¯å¿é¡»è¿ç¨ã
     *    if(!this.initBaseParameter()) return;
     *
     *    // ç¬¬ä¸æ­¥ï¼ç¨å¾å½¢ç»è£å¾è¡¨ï¼å¨ç»è£å¾è¡¨è¿ç¨ä¸­ï¼åºè¯¥ç¹å«æ³¨ææ°æ®è§å¾æ¡åä½å¼çå®ä¹ãæ°æ®å¼æº¢åºå¼åèå´çå¤çåå¾å½¢å¤§å°èªéåºã
     *    // å®ä¹å¾è¡¨æ°æ®è§å¾æ¡ä¸­åä½å¼çå«ä¹ï¼ä¸é¢è¡ä»£ç è¡¨ç¤ºå°æ°æ®è§å¾æ¡åä½å¼å®ä¹ä¸ºæ°æ®è§å¾æ¡é«åº¦ä¸æ¯åç´ ä»£è¡¨çæ°æ®å¼
     *    this.DVBUnitValue =  (this.codomain[1] - this.codomain[0])/this.DVBHeight;
     *    var uv = this.DVBUnitValue;
     *
     *    // å¾å½¢åæ°è®¡ç®ä»£ç ......
     *
     *    // å³äºå¾å½¢è£éï¼å®éä¸å°±æ¯å©ç¨å¾å½¢å·¥ç¨å¯¹è±¡ this.shapeFactory ç createShape() æ¹æ³éè¿å¾å½¢åæ°å¯¹è±¡åå»ºå¯è§åçå¾å½¢å¯¹è±¡ï¼å¹¶æè¿äºå¾å½¢å¯¹è±¡æåºæ·»å å°æ¨¡åçå¾å½¢åºï¼his.shapesï¼ä¸­ãä¸é¢çä»£ç æ¼ç¤ºåå»ºä¸ä¸ªé¢å¾å½¢åæ°å¯¹è±¡ï¼å¹¶åè®¸éè¿å¾å½¢éç½®å¯¹è±¡è®¾ç½®å¾å½¢ç style å highlightStyleï¼
     *    var barParams = new SuperMap.Feature.ShapeParameters.Polygon(poiLists);
     *    barParams.style = sets.barStyle? sets.barStyle:{fillColor: "lightblue"};
     *    barParams.highlightStyle = sets.barHoverStyle? sets.barHoverStyle:{fillColor: "blue"};
     *    // å¾å½¢æºå¸¦æ°æ®IDä¿¡æ¯
     *    barParams.refDataID = this.data.id;
     *    // åå»ºå¾å½¢å¹¶æ·»å å°å¾è¡¨å¾å½¢æ°ç»ä¸­
     *    this.shapes.push(this.shapeFactory.createShape(barParams));
     *
     *    // ç¬¬åæ­¥ï¼è°ç¨ shapesConvertToRelativeCoordinate() æ¹æ³ï¼å°å¾å½¢åºï¼his.shapesï¼ä¸­çå¾å½¢è½¬ä¸ºç±ç¸å¯¹åæ è¡¨ç¤ºçå¾å½¢ï¼å®¢æ·ç«¯ç»è®¡ä¸é¢å¾æ¨¡åä»ç»æä¸è¦æ±å¯è§åå¾å½¢ä½¿ç¨ç¸å¯¹åæ ï¼assembleShapes() å½æ°å¿é¡»å¨å¾å½¢è£éå®æåè°ç¨ shapesConvertToRelativeCoordinate() å½æ°ãæ­¤æ­¥éª¤æ¯å¿é¡»è¿ç¨ã
     *    this.shapesConvertToRelativeCoordinate();
     * },
     */

  }, {
    key: "assembleShapes",
    value: function assembleShapes() {//å­ç±»å¿é¡»å®ç°æ­¤æ¹æ³
    }
    /**
     * @function SuperMap.Feature.Theme.Graph.prototype.getLocalXY
     * @description å°çåæ è½¬ä¸ºåç´ åæ ã
     * @param {SuperMap.Lonlat} lonlat - å¸¦è½¬æ¢çå°çåæ ã
     * @returns å±å¹åç´ åæ ã
     */

  }, {
    key: "getLocalXY",
    value: function getLocalXY(lonlat) {
      return this.layer.getLocalXY(lonlat);
    }
  }]);

  return Graph;
}(Theme_Theme);
/**
 * @function SuperMap.Feature.Theme.getDataValues
 * @description æ ¹æ®å­æ®µåæ°ç»è·åæå®æ°æ®ï¼featureï¼çå±æ§å¼æ°ç»ãå±æ§å¼ç±»åå¿é¡»ä¸º Numberã
 * @param {SuperMap.Feature.Vector} data - æ°æ®ã
 * @param {Array.<string>} [fields] - å­æ®µåæ°ç»ã
 * @param {number} [decimalNumber] - å°æ°ä½å¤çåæ°ï¼å¯¹è·åå°çå±æ§æ°æ®å¼è¿è¡å°æ°ä½å¤çã
 * @returns {Array.<string>} å­æ®µåæ°ç»å¯¹åºçå±æ§æ°æ®å¼æ°ç»ã
 */

Theme_Theme.getDataValues = function (data, fields, decimalNumber) {
  if (!data.attributes) {
    return false;
  }

  var fieldsValue = [];
  var attrs = data.attributes;

  for (var i = 0; i < fields.length; i++) {
    for (var field in attrs) {
      if (field !== fields[i]) {
        continue;
      } // æ°å­è½¬æ¢å¤æ­


      try {
        if (!isNaN(decimalNumber) && decimalNumber >= 0) {
          fieldsValue.push(parseFloat(attrs[field].toString()).toFixed(decimalNumber));
        } else {
          fieldsValue.push(parseFloat(attrs[field].toString()));
        }
      } catch (e) {
        throw new Error("not a number");
      }
    }
  }

  if (fieldsValue.length === fields.length) {
    return fieldsValue;
  } else {
    return false;
  }
};

SuperMap.Feature.Theme.Graph = Graph;
// CONCATENATED MODULE: ./src/common/overlay/Bar.js
function Bar_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Bar_typeof = function _typeof(obj) { return typeof obj; }; } else { Bar_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Bar_typeof(obj); }

function Bar_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Bar_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Bar_createClass(Constructor, protoProps, staticProps) { if (protoProps) Bar_defineProperties(Constructor.prototype, protoProps); if (staticProps) Bar_defineProperties(Constructor, staticProps); return Constructor; }

function Bar_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { Bar_get = Reflect.get; } else { Bar_get = function _get(target, property, receiver) { var base = Bar_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return Bar_get(target, property, receiver || target); }

function Bar_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = Bar_getPrototypeOf(object); if (object === null) break; } return object; }

function Bar_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Bar_setPrototypeOf(subClass, superClass); }

function Bar_setPrototypeOf(o, p) { Bar_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Bar_setPrototypeOf(o, p); }

function Bar_createSuper(Derived) { var hasNativeReflectConstruct = Bar_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Bar_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Bar_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Bar_possibleConstructorReturn(this, result); }; }

function Bar_possibleConstructorReturn(self, call) { if (call && (Bar_typeof(call) === "object" || typeof call === "function")) { return call; } return Bar_assertThisInitialized(self); }

function Bar_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Bar_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Bar_getPrototypeOf(o) { Bar_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Bar_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/








/**
 * @class SuperMap.Feature.Theme.Bar
 * @classdesc æ±ç¶å¾ ã
 * @category Visualization Theme
 * @example
 * // barStyleByCodomainåæ°ç¨æ³å¦ä¸ï¼
 * // barStyleByCodomain çæ¯ä¸ªåç´ æ¯ä¸ªåå«å¼åä¿¡æ¯åä¸å¼åå¯¹åºæ ·å¼ä¿¡æ¯çå¯¹è±¡ï¼è¯¥å¯¹è±¡ï¼å¿é¡»ï¼æä¸ä¸ªå±æ§ï¼
 * // start: å¼åå¼ä¸éï¼åå«ï¼;
 * // end: å¼åå¼ä¸éï¼ä¸åå«ï¼;
 * // style: æ°æ®å¯è§åå¾å½¢ç styleï¼è¿ä¸ªæ ·å¼å¯¹è±¡çå¯è®¾å±æ§ï¼ <SuperMap.Feature.ShapeParameters.Polygon.style> ã
 * // barStyleByCodomain æ°ç»å½¢å¦ï¼
 * [
 *   {
 *     start:0,
 *     end:250,
 *     style:{
 *          fillColor:"#00CD00"
 *      }
 *  },
 *   {
 *     start:250,
 *     end:500,
 *     style:{
 *          fillColor:"#00EE00"
 *      }
 *  },
 *   {
 *     start:500,
 *     end:750,
 *     style:{
 *          fillColor:"#00FF7F"
 *      }
 *  },
 *   {
 *     start:750,
 *     end:1500,
 *     style:{
 *          fillColor:"#00FF00"
 *      }
 *  }
 * ]
 * @extends SuperMap.Feature.Theme.Graph
 * @param {SuperMap.Feature.Vector} data - ç¨æ·æ°æ®ã
 * @param {SuperMap.Layer.Graph} layer - æ­¤ä¸é¢è¦ç´ æå¨å¾å±ã
 * @param {Array.<string>} fields - data å±æ§ä¸­çåä¸æ­¤å¾è¡¨çæçå±æ§å­æ®µåç§°ã
 * @param {SuperMap.Feature.Theme.Bar.setting} setting - å¾è¡¨éç½®å¯¹è±¡ã
 * @param {SuperMap.LonLat} [lonlat] - ä¸é¢è¦ç´ å°çä½ç½®ãé»è®¤ä¸º data æä»£çå°çè¦ç´  Bounds ä¸­å¿ã
 */

var Bar = /*#__PURE__*/function (_Graph) {
  Bar_inherits(Bar, _Graph);

  var _super = Bar_createSuper(Bar);

  function Bar(data, layer, fields, setting, lonlat) {
    var _this;

    Bar_classCallCheck(this, Bar);

    _this = _super.call(this, data, layer, fields, setting, lonlat);
    _this.CLASS_NAME = "SuperMap.Feature.Theme.Bar";
    return _this;
  }
  /**
   * @function SuperMap.Feature.Theme.Bar.prototype.destroy
   * @override
   */


  Bar_createClass(Bar, [{
    key: "destroy",
    value: function destroy() {
      Bar_get(Bar_getPrototypeOf(Bar.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.Feature.Theme.Bar.prototype.assembleShapes
     * @description å¾è¡¨å¾å½¢è£éå½æ°ã
     */

  }, {
    key: "assembleShapes",
    value: function assembleShapes() {
      //é»è®¤æ¸åé¢è²æ°ç»
      var deafaultColors = [["#00FF00", "#00CD00"], ["#00CCFF", "#5E87A2"], ["#00FF66", "#669985"], ["#CCFF00", "#94A25E"], ["#FF9900", "#A2945E"]]; //é»è®¤é´å½±

      var deafaultShawdow = {
        showShadow: true,
        shadowBlur: 8,
        shadowColor: "rgba(100,100,100,0.8)",
        shadowOffsetX: 2,
        shadowOffsetY: 2
      }; // å¾è¡¨éç½®å¯¹è±¡

      var sets = this.setting;

      if (!sets.barLinearGradient) {
        sets.barLinearGradient = deafaultColors;
      } // é»è®¤æ°æ®è§å¾æ¡


      if (!sets.dataViewBoxParameter) {
        if (typeof sets.useAxis === "undefined" || sets.useAxis) {
          sets.dataViewBoxParameter = [45, 15, 15, 15];
        } else {
          sets.dataViewBoxParameter = [5, 5, 5, 5];
        }
      } // éè¦æ­¥éª¤ï¼åå§ååæ°


      if (!this.initBaseParameter()) {
        return;
      } // å¼å


      var codomain = this.DVBCodomain; // éè¦æ­¥éª¤ï¼å®ä¹å¾è¡¨ Bar æ°æ®è§å¾æ¡ä¸­åä½å¼çå«ä¹

      this.DVBUnitValue = (codomain[1] - codomain[0]) / this.DVBHeight; // æ°æ®è§å¾å

      var dvb = this.dataViewBox; // ç¨æ·æ°æ®å¼

      var fv = this.dataValues;

      if (fv.length < 1) {
        return;
      } // æ²¡ææ°æ®
      // æ°æ®æº¢åºå¼åèå´å¤ç


      for (var _i = 0, fvLen = fv.length; _i < fvLen; _i++) {
        if (fv[_i] < codomain[0] || fv[_i] > codomain[1]) {
          return;
        }
      } // è·å x è½´ä¸çå¾å½¢ä¿¡æ¯


      var xShapeInfo = this.calculateXShapeInfo();

      if (!xShapeInfo) {
        return;
      } // æ¯ä¸ªæ±æ¡ x ä½ç½®


      var xsLoc = xShapeInfo.xPositions; // æ±æ¡å®½åº¦

      var xsWdith = xShapeInfo.width; // èæ¯æ¡ï¼é»è®¤å¯ç¨

      if (typeof sets.useBackground === "undefined" || sets.useBackground) {
        // å°èæ¯æ¡å¾å½¢æ·»å å°æ¨¡åç shapes æ°ç»ï¼æ³¨ææ·»å é¡ºåºï¼åæ·»å çå¾å½¢å¨åæ·»å çå¾å½¢ä¹ä¸ã
        this.shapes.push(ShapeFactory.Background(this.shapeFactory, this.chartBox, sets));
      } // åæ è½´, é»è®¤å¯ç¨


      if (typeof sets.useAxis === "undefined" || sets.useAxis) {
        // æ·»å åæ è½´å¾å½¢æ°ç»
        this.shapes = this.shapes.concat(ShapeFactory.GraphAxis(this.shapeFactory, dvb, sets, xShapeInfo));
      }

      for (var i = 0; i < fv.length; i++) {
        // è®¡ç®æ±æ¡ top è¾¹ç y è½´åæ å¼
        var yPx = dvb[1] - (fv[i] - codomain[0]) / this.DVBUnitValue; // æ±æ¡èç¹æ°ç»

        var poiLists = [[xsLoc[i] - xsWdith / 2, dvb[1] - 1], [xsLoc[i] + xsWdith / 2, dvb[1] - 1], [xsLoc[i] + xsWdith / 2, yPx], [xsLoc[i] - xsWdith / 2, yPx]]; // æ±æ¡åæ°å¯¹è±¡ï¼ä¸ä¸ªé¢åæ°å¯¹è±¡ï¼

        var barParams = new Polygon_Polygon(poiLists); // æ±æ¡ é´å½± style

        if (typeof sets.showShadow === "undefined" || sets.showShadow) {
          if (sets.barShadowStyle) {
            var sss = sets.barShadowStyle;

            if (sss.shadowBlur) {
              deafaultShawdow.shadowBlur = sss.shadowBlur;
            }

            if (sss.shadowColor) {
              deafaultShawdow.shadowColor = sss.shadowColor;
            }

            if (sss.shadowOffsetX) {
              deafaultShawdow.shadowOffsetX = sss.shadowOffsetX;
            }

            if (sss.shadowOffsetY) {
              deafaultShawdow.shadowOffsetY = sss.shadowOffsetY;
            }
          }

          barParams.style = {};
          Util.copyAttributesWithClip(barParams.style, deafaultShawdow);
        } // å¾å½¢æºå¸¦çæ°æ®ä¿¡æ¯


        barParams.refDataID = this.data.id;
        barParams.dataInfo = {
          field: this.fields[i],
          value: fv[i]
        }; // æ±æ¡ hover click

        if (typeof sets.barHoverAble !== "undefined") {
          barParams.hoverable = sets.barHoverAble;
        }

        if (typeof sets.barClickAble !== "undefined") {
          barParams.clickable = sets.barClickAble;
        } // åå»ºæ±æ¡å¹¶æ·»å å°å¾è¡¨å¾å½¢æ°ç»ä¸­


        this.shapes.push(this.shapeFactory.createShape(barParams));
      } // éè¦æ­¥éª¤ï¼å°å¾å½¢è½¬ä¸ºç±ç¸å¯¹åæ è¡¨ç¤ºçå¾å½¢ï¼ä»¥ä¾¿å¨å°å¾å¹³ç§»ç¼©æ¾è¿ç¨ä¸­å¿«ééç»å¾å½¢
      // ï¼ç»è®¡ä¸é¢å¾æ¨¡åä»ç»æä¸è¦æ±ä½¿ç¨ç¸å¯¹åæ ï¼assembleShapes() å½æ°å¿é¡»å¨å¾å½¢è£éå®æåè°ç¨ shapesConvertToRelativeCoordinate() å½æ°ï¼


      this.shapesConvertToRelativeCoordinate();
    }
    /**
     * @function SuperMap.Feature.Theme.Bar.prototype.calculateXShapeInfo
     * @description è®¡ç® X è½´æ¹åä¸çå¾å½¢ä¿¡æ¯ï¼æ­¤ä¿¡æ¯æ¯ä¸ä¸ªå¯¹è±¡ï¼åå«ä¸¤ä¸ªå±æ§ï¼
     *              å±æ§ xPositions æ¯ä¸ä¸ªä¸ç»´æ°ç»ï¼è¯¥æ°ç»åç´ è¡¨ç¤ºå¾å½¢å¨ x è½´æ¹åä¸çåç´ åæ å¼ï¼
     *              å¦æå¾å½¢å¨ x æ¹åä¸æä¸å®å®½åº¦ï¼éå¸¸åå¾å½¢å¨ x æ¹åä¸çä¸­å¿ç¹ä¸ºå¾å½¢å¨ x æ¹åä¸çåæ å¼ã
     *              width è¡¨ç¤ºå¾å½¢çå®½åº¦ï¼ç¹å«æ³¨æï¼ç¹çå®½åº¦å§ç»ä¸º 0ï¼èä¸æ¯å¶ç´å¾ï¼ã
     *              æ¬å½æ°ä¸­å¾å½¢éç½®å¯¹è±¡ setting å¯è®¾å±æ§ï¼
     *              xShapeBlank - {Array.<number>} æ°´å¹³æ¹åä¸çå¾å½¢ç©ºç½é´éåæ°ã
     *              é¿åº¦ä¸º 3 çæ°ç»ï¼ç¬¬ä¸åç´ è¡¨ç¤ºç¬¬ä¸ä¸ªå¾å½¢å·¦ç«¯ä¸æ°æ®è§å¾æ¡å·¦ç«¯çç©ºç½é´è·ï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºå¾å½¢é´ç©ºç½é´è·ï¼
     *              ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºæåä¸ä¸ªå¾å½¢å³ç«¯ä¸æ°æ®è§å¾æ¡å³ç«¯ç«¯çç©ºç½é´è· ã
     * @returns {Object} å¦æè®¡ç®å¤±è´¥ï¼è¿å nullï¼å¦æè®¡ç®æåï¼è¿å X è½´æ¹åä¸çå¾å½¢ä¿¡æ¯ï¼æ­¤ä¿¡æ¯æ¯ä¸ä¸ªå¯¹è±¡ï¼åå«ä»¥ä¸ä¸¤ä¸ªå±æ§ï¼
     *         xPositions - {Array.<number>} è¡¨ç¤ºå¾å½¢å¨ x è½´æ¹åä¸çåç´ åæ å¼ï¼å¦æå¾å½¢å¨ x æ¹åä¸æä¸å®å®½åº¦ï¼éå¸¸åå¾å½¢å¨ x æ¹åä¸çä¸­å¿ç¹ä¸ºå¾å½¢å¨ x æ¹åä¸çåæ å¼ã
     *         width - {number} è¡¨ç¤ºå¾å½¢çå®½åº¦ï¼ç¹å«æ³¨æï¼ç¹çå®½åº¦å§ç»ä¸º 0ï¼èä¸æ¯å¶ç´å¾ï¼ã
     *
     */

  }, {
    key: "calculateXShapeInfo",
    value: function calculateXShapeInfo() {
      var dvb = this.dataViewBox; // æ°æ®è§å¾æ¡

      var sets = this.setting; // å¾è¡¨éç½®å¯¹è±¡

      var fvc = this.dataValues.length; // æ°ç»å¼ä¸ªæ°

      if (fvc < 1) {
        return null;
      }

      var xBlank; // x è½´ç©ºç½é´éåæ°

      var xShapePositions = []; // x è½´ä¸å¾å½¢çä½ç½®

      var xShapeWidth = 0; // x è½´ä¸å¾å½¢å®½åº¦(èªéåº)

      var dvbWidth = this.DVBWidth; // æ°æ®è§å¾æ¡å®½åº¦
      //  x è½´ç©ºç½é´éåæ°å¤ç

      if (sets.xShapeBlank && sets.xShapeBlank.length && sets.xShapeBlank.length == 3) {
        xBlank = sets.xShapeBlank;
        var xsLen = dvbWidth - (xBlank[0] + xBlank[2] + (fvc - 1) * xBlank[1]);

        if (xsLen <= fvc) {
          return null;
        }

        xShapeWidth = xsLen / fvc;
      } else {
        // é»è®¤ä½¿ç¨ç­è·ç¦»ç©ºç½é´éï¼ç©ºç½é´éä¸ºå¾å½¢å®½åº¦
        xShapeWidth = dvbWidth / (2 * fvc + 1);
        xBlank = [xShapeWidth, xShapeWidth, xShapeWidth];
      } // å¾å½¢ x è½´ä¸çä½ç½®è®¡ç®


      var xOffset = 0;

      for (var i = 0; i < fvc; i++) {
        if (i == 0) {
          xOffset = xBlank[0] + xShapeWidth / 2;
        } else {
          xOffset += xShapeWidth + xBlank[1];
        }

        xShapePositions.push(dvb[0] + xOffset);
      }

      return {
        "xPositions": xShapePositions,
        "width": xShapeWidth
      };
    }
    /**
     * @function SuperMap.Feature.Theme.Bar.prototype.resetLinearGradient
     * @description å¾è¡¨çç¸å¯¹åæ å­å¨çæ¶åï¼éæ°è®¡ç®æ¸åçé¢è²(ç®åç¨äºäºç»´æ±ç¶å¾ æä»¥å­ç±»å®ç°æ­¤æ¹æ³)ã
     */

  }, {
    key: "resetLinearGradient",
    value: function resetLinearGradient() {
      if (this.RelativeCoordinate) {
        var shpelength = this.shapes.length;
        var barLinearGradient = this.setting.barLinearGradient;
        var index = -1;

        for (var i = 0; i < shpelength; i++) {
          var shape = this.shapes[i];

          if (shape.CLASS_NAME === "SuperMap.LevelRenderer.Shape.SmicPolygon") {
            var style = shape.style; //è®¡ç®åºå½åçç»å¯¹ x y

            var x1 = this.location[0] + style.pointList[0][0];
            var x2 = this.location[0] + style.pointList[1][0]; //æ¸åé¢è²

            index++; //ä»¥é²å®ä¹çé¢è²æ°ç»ä¸å¤ç¨

            if (index >= barLinearGradient.length) {
              index = index % barLinearGradient.length;
            }

            var color1 = barLinearGradient[index][0];
            var color2 = barLinearGradient[index][1]; //é¢è²

            var zcolor = new Color();
            var linearGradient = zcolor.getLinearGradient(x1, 0, x2, 0, [[0, color1], [1, color2]]); //èµå¼

            shape.style.color = linearGradient;
          }
        }
      }
    }
  }]);

  return Bar;
}(Graph);
/**
* @typedef {Object} SuperMap.Feature.Theme.Bar.setting
* @property {number} width - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å®½åº¦ã
* @property {number} height - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼é«åº¦ã
* @property {Array.<number>} codomain - å¾è¡¨åè®¸å±ç¤ºçæ°æ®å¼åï¼é¿åº¦ä¸º 2 çä¸ç»´æ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºå¼åä¸éï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºå¼åä¸éã
* @property {number} [XOffset] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ X æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
* @property {number} [YOffset] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ Y æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
* @property {Array.<number>} [dataViewBoxParameter] - æ°æ®è§å¾æ¡ dataViewBox åæ°ï¼å®æ¯æå¾è¡¨æ¡ chartBox ï¼ç±å¾è¡¨ä½ç½®ãå¾è¡¨å®½åº¦ãå¾è¡¨é«åº¦ææçå¾è¡¨èå´æ¡ï¼
*                                                     å¨å·¦ãä¸ï¼å³ï¼ä¸åä¸ªæ¹åä¸çååè·å¼ãå½ä½¿ç¨åæ è½´æ¶ dataViewBoxParameter çé»è®¤å¼ä¸ºï¼[45, 15, 15, 15]ï¼
*                                                     ä¸ä½¿ç¨åæ è½´æ¶ dataViewBoxParameter çé»è®¤å¼ä¸ºï¼[5, 5, 5, 5]ã
* @property {number} [decimalNumber] - æ°æ®å¼æ°ç» dataValues åç´ å¼å°æ°ä½æ°ï¼æ°æ®çå°æ°ä½å¤çåæ°ï¼åå¼èå´ï¼[0, 16]ãå¦æä¸è®¾ç½®æ­¤åæ°ï¼å¨åæ°æ®å¼æ¶ä¸å¯¹æ°æ®åå°æ°ä½å¤çã
* @property {boolean} [useBackground=true] - æ¯å¦ä½¿ç¨å¾è¡¨èæ¯æ¡ã
* @property {SuperMap.Feature.ShapeParameters.Rectangle.style} [backgroundStyle] - èæ¯æ ·å¼ã
* @property {Array.<number>} [backgroundRadius=[0, 0, 0, 0]] - èæ¯æ¡ç©å½¢åè§åå¾ï¼å¯ä»¥ç¨æ°ç»åå«æå®åä¸ªè§çåè§åå¾ï¼è®¾ï¼å·¦ä¸ãå³ä¸ãå³ä¸ãå·¦ä¸è§çåå¾ä¾æ¬¡ä¸º r1ãr2ãr3ãr4 ,
*                                         å backgroundRadius ä¸º [r1ãr2ãr3ãr4]ã
* @property {Array.<number>} xShapeBlank - æ°´å¹³æ¹åä¸çå¾å½¢ç©ºç½é´éåæ°ãé¿åº¦ä¸º 3 çæ°ç»ï¼ç¬¬ä¸åç´ è¡¨ç¤ºç¬¬ä¸ä¸ªå¾å½¢å·¦ç«¯ä¸æ°æ®è§å¾æ¡å·¦ç«¯çç©ºç½é´è·ï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºå¾å½¢é´ç©ºç½é´è·ï¼
*                                            ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºæåä¸ä¸ªå¾å½¢å³ç«¯ä¸æ°æ®è§å¾æ¡å³ç«¯ç«¯çç©ºç½é´è· ã
* @property {boolean} [showShadow=true] - é´å½±å¼å³ã
* @property {Object} [barShadowStyle] - é´å½±æ ·å¼,å¦ï¼{shadowBlur : 8, shadowOffsetX: 2 , shadowOffsetY : 2,shadowColor : "rgba(100,100,100,0.8)"}
* @property {Array.<string>} [barLinearGradient] - æå­æ®µè®¾ç½®æ±æ¡æ ·å¼[æ¸åå¼å§é¢è²,æ¸åç»æ­¢é¢è²]  ä¸ themeLayer.themeFields ä¸­çå­æ®µä¸ä¸å¯¹åºï¼ï¼
*                                                  å¦ï¼[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]
* @property {boolean} [useAxis=true] - æ¯å¦ä½¿ç¨åæ è½´ã</br>
* @property {SuperMap.Feature.ShapeParameters.Line.style} [axisStyle] - åæ è½´æ ·å¼ã
* @property {boolean} [axisUseArrow=false] - åæ è½´æ¯å¦ä½¿ç¨ç®­å¤´ã
* @property {number} [axisYTick=0] - y è½´å»åº¦æ°éã
* @property {Array.<string>}  [axisYLabels] - y è½´ä¸çæ ç­¾ç»åå®¹ï¼æ ç­¾é¡ºåºæ²¿çæ°æ®è§å¾æ¡å·¦é¢æ¡è¾¹èªä¸èä¸ï¼ç­è·æå¸ãä¾å¦ï¼["1000", "750", "500", "250", "0"]ã
* @property {SuperMap.Feature.ShapeParameters.Label.style} [axisYLabelsStyle] - y è½´ä¸çæ ç­¾ç»æ ·å¼ã
* @property {Array.<number>} [axisYLabelsOffset=[0,0]] - y è½´ä¸çæ ç­¾ç»åç§»éãé¿åº¦ä¸º 2 çæ°ç»ï¼æ°ç»ç¬¬ä¸é¡¹è¡¨ç¤º y è½´æ ç­¾ç»æ¨ªåä¸çåç§»éï¼åå·¦ä¸ºæ­£ï¼æ°ç»ç¬¬äºé¡¹è¡¨ç¤º y è½´æ ç­¾ç»çºµåä¸çåç§»éï¼åä¸ä¸ºæ­£ã
* @property {Array.<string>}  [axisXLabels] - x è½´ä¸çæ ç­¾ç»åå®¹ï¼æ ç­¾é¡ºåºæ²¿çæ°æ®è§å¾æ¡ä¸é¢æ¡è¾¹èªå·¦åå³æå¸ï¼ä¾å¦ï¼["92å¹´", "95å¹´", "99å¹´"]ãæ ç­¾æå¸è§åï¼å½æ ç­¾æ°éä¸ xShapeInfo ä¸­çå±æ§ xShapeCenter æ°éç¸åï¼å³æ ç­¾ä¸ªæ°ä¸æ°æ®ä¸ªæ°ç¸ç­æ¶ï¼, æç§ xShapeCenter æä¾çä½ç½®æå¸æ ç­¾,å¦åæ²¿æ°æ®è§å¾æ¡ä¸é¢æ¡è¾¹ç­è·æå¸æ ç­¾ã
* @property {SuperMap.Feature.ShapeParameters.Label.style} [axisXLabelsStyle] - x è½´ä¸çæ ç­¾ç»æ ·å¼ã
* @property {Array.<number>} [axisXLabelsOffset=[0,0]] - x è½´ä¸çæ ç­¾ç»åç§»éãé¿åº¦ä¸º 2 çæ°ç»ï¼æ°ç»ç¬¬ä¸é¡¹è¡¨ç¤º x è½´æ ç­¾ç»æ¨ªåä¸çåç§»éï¼åå·¦ä¸ºæ­£ï¼æ°ç»ç¬¬äºé¡¹è¡¨ç¤º x è½´æ ç­¾ç»çºµåä¸çåç§»éï¼åä¸ä¸ºæ­£ã
* @property {boolean} [useXReferenceLine] - æ¯å¦ä½¿ç¨æ°´å¹³åèçº¿ï¼å¦æä¸º trueï¼å¨ axisYTick å¤§äº 0 æ¶ææï¼æ°´å¹³åèçº¿æ¯ y è½´å»åº¦å¨æ°æ®è§å¾æ¡éçå»¶ä¼¸ã
* @property {SuperMap.Feature.ShapeParameters.Line.style} xReferenceLineStyle - æ°´å¹³åèçº¿æ ·å¼ã
* @property {Object} barStyle - æ±ç¶å¾æ±æ¡åºç¡ styleï¼æ­¤åæ°æ§å¶æ±æ¡åºç¡æ ·å¼ï¼ä¼åçº§ä½äº barStyleByFields å barStyleByCodomainã
* @property {Array.<SuperMap.Feature.ShapeParameters.Polygon.style>} barStyleByFields - æä¸é¢å­æ®µ themeFieldsï¼<SuperMap.Layer.Graph.themeFields|L.supermap.graphThemeLayer.themeFields|ol.source.Graph.themeFields|mapboxgl.supermap.GraphThemeLayer.themeFields>ï¼ä¸ºæ±æ¡èµ styleï¼æ­¤åæ°æå­æ®µæ§å¶æ±æ¡æ ·å¼ï¼ä¼åçº§ä½äº barStyleByCodomainï¼é«äº barStyleãæ­¤æ°ç»ä¸­çåç´ æ¯æ ·å¼å¯¹è±¡ãæ­¤åæ°ä¸­ç style ä¸ themeFields ä¸­çå­æ®µä¸ä¸å¯¹åº ãä¾å¦ï¼ themeFieldsï¼<SuperMap.Layer.Graph.themeFields>ï¼ ä¸º ["POP_1992", "POP_1995", "POP_1999"],barStyleByFields ä¸º[style1, style2, style3]ï¼åå¨å¾è¡¨ä¸­ï¼å­æ®µ POP_1992 å¯¹åºçæ±æ¡ä½¿ç¨ style1ï¼å­æ®µ POP_1995 å¯¹åºçæ±æ¡ä½¿ç¨ style2 ï¼å­æ®µ POP_1999 å¯¹åºçæ±æ¡ä½¿ç¨ style3ã
* @property {Array.<SuperMap.Feature.ShapeParameters.Polygon.style>} barStyleByCodomain - ææ±æ¡ä»£è¡¨çæ°æ®å¼æå¨å¼åèå´æ§å¶æ±æ¡æ ·å¼ï¼ä¼åçº§é«äº barStyle å barStyleByFieldsã
* @property {Object} [barHoverStyle] - æ±æ¡ hover ç¶ææ¶çæ ·å¼ï¼barHoverAble ä¸º true æ¶ææã
* @property {Object} [barHoverAble] - æ¯å¦åè®¸æ±æ¡ä½¿ç¨ hover ç¶æï¼é»è®¤åè®¸ãåæ¶è®¾ç½® barHoverAble å barClickAble ä¸º falseï¼å¯ä»¥ç´æ¥å±è½æ±æ¡å¯¹ä¸é¢å¾å±äºä»¶çååºã
* @property {Object} [barClickAble] - æ¯å¦åè®¸æ±æ¡è¢«ç¹å»ï¼é»è®¤åè®¸ãåæ¶è®¾ç½® barHoverAble å barClickAble ä¸º falseï¼å¯ä»¥ç´æ¥å±è½æ±æ¡å¯¹ä¸é¢å¾å±äºä»¶çååºã
*/

SuperMap.Feature.Theme.Bar = Bar;
// CONCATENATED MODULE: ./src/common/overlay/Bar3D.js
function Bar3D_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Bar3D_typeof = function _typeof(obj) { return typeof obj; }; } else { Bar3D_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Bar3D_typeof(obj); }

function Bar3D_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Bar3D_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Bar3D_createClass(Constructor, protoProps, staticProps) { if (protoProps) Bar3D_defineProperties(Constructor.prototype, protoProps); if (staticProps) Bar3D_defineProperties(Constructor, staticProps); return Constructor; }

function Bar3D_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { Bar3D_get = Reflect.get; } else { Bar3D_get = function _get(target, property, receiver) { var base = Bar3D_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return Bar3D_get(target, property, receiver || target); }

function Bar3D_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = Bar3D_getPrototypeOf(object); if (object === null) break; } return object; }

function Bar3D_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Bar3D_setPrototypeOf(subClass, superClass); }

function Bar3D_setPrototypeOf(o, p) { Bar3D_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Bar3D_setPrototypeOf(o, p); }

function Bar3D_createSuper(Derived) { var hasNativeReflectConstruct = Bar3D_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Bar3D_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Bar3D_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Bar3D_possibleConstructorReturn(this, result); }; }

function Bar3D_possibleConstructorReturn(self, call) { if (call && (Bar3D_typeof(call) === "object" || typeof call === "function")) { return call; } return Bar3D_assertThisInitialized(self); }

function Bar3D_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Bar3D_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Bar3D_getPrototypeOf(o) { Bar3D_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Bar3D_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.Feature.Theme.Bar3D
 * @classdesc ä¸ç»´æ±ç¶å¾ ã
 * @category Visualization Theme
 * @extends SuperMap.Feature.Theme.Graph
 * @param {SuperMap.Feature.Vector} data - ç¨æ·æ°æ®ã
 * @param {SuperMap.Layer.Graph} layer - æ­¤ä¸é¢è¦ç´ æå¨å¾å±ã
 * @param {Array.<string>} fields - data ä¸­çåä¸æ­¤å¾è¡¨çæçå­æ®µåç§°ã
 * @param {SuperMap.Feature.Theme.Bar3D.setting} setting - å¾è¡¨éç½®å¯¹è±¡ã
 * @param {SuperMap.LonLat} [lonlat] - ä¸é¢è¦ç´ å°çä½ç½®ï¼é»è®¤ä¸º data æä»£çå°çè¦ç´  Bounds ä¸­å¿ã
 *
 
 *
 * @example
 * // barFaceStyleByCodomain ç¨æ³ç¤ºä¾å¦ä¸ï¼
 * // barFaceStyleByCodomain çæ¯ä¸ªåç´ æ¯ä¸ªåå«å¼åä¿¡æ¯åä¸å¼åå¯¹åºæ ·å¼ä¿¡æ¯çå¯¹è±¡ï¼è¯¥å¯¹è±¡ï¼å¿é¡»ï¼æä¸ä¸ªå±æ§ï¼
 * // start: å¼åå¼ä¸éï¼åå«ï¼;
 * // end: å¼åå¼ä¸éï¼ä¸åå«ï¼;
 * // style: æ°æ®å¯è§åå¾å½¢ç styleï¼è¿ä¸ªæ ·å¼å¯¹è±¡çå¯è®¾å±æ§ï¼ <SuperMap.Feature.ShapeParameters.Polygon.style> ã
 * // barFaceStyleByCodomain æ°ç»å½¢å¦ï¼
 * [
 *   {
 *     start:0,
 *     end:250,
 *     style:{
 *          fillColor:"#00CD00"
 *      }
 *  },
 *   {
 *     start:250,
 *     end:500,
 *     style:{
 *          fillColor:"#00EE00"
 *      }
 *  },
 *   {
 *     start:500,
 *     end:750,
 *     style:{
 *          fillColor:"#00FF7F"
 *      }
 *  },
 *   {
 *     start:750,
 *     end:1500,
 *     style:{
 *          fillColor:"#00FF00"
 *      }
 *  }
 * ]
 *
 * @example
 * // barSideStyleByCodomain ç¨æ³ç¤ºä¾å¦ä¸ï¼
 * // barSideStyleByCodomain çæ¯ä¸ªåç´ æ¯ä¸ªåå«å¼åä¿¡æ¯åä¸å¼åå¯¹åºæ ·å¼ä¿¡æ¯çå¯¹è±¡ï¼è¯¥å¯¹è±¡ï¼å¿é¡»ï¼æä¸ä¸ªå±æ§ï¼
 * // start: å¼åå¼ä¸éï¼åå«ï¼;
 * // end: å¼åå¼ä¸éï¼ä¸åå«ï¼;
 * // style: æ°æ®å¯è§åå¾å½¢ç styleï¼è¿ä¸ªæ ·å¼å¯¹è±¡çå¯è®¾å±æ§ï¼ <SuperMap.Feature.ShapeParameters.Polygon.style> ã
 * // barSideStyleByCodomain æ°ç»å½¢å¦ï¼
 * [
 *   {
 *     start:0,
 *     end:250,
 *     style:{
 *          fillColor:"#00CD00"
 *      }
 *  },
 *   {
 *     start:250,
 *     end:500,
 *     style:{
 *          fillColor:"#00EE00"
 *      }
 *  },
 *   {
 *     start:500,
 *     end:750,
 *     style:{
 *          fillColor:"#00FF7F"
 *      }
 *  },
 *   {
 *     start:750,
 *     end:1500,
 *     style:{
 *          fillColor:"#00FF00"
 *      }
 *  }
 * ]
 *
 * @example
 * // barTopStyleByCodomain ç¨æ³ç¤ºä¾å¦ä¸ï¼
 * // barTopStyleByCodomain çæ¯ä¸ªåç´ æ¯ä¸ªåå«å¼åä¿¡æ¯åä¸å¼åå¯¹åºæ ·å¼ä¿¡æ¯çå¯¹è±¡ï¼è¯¥å¯¹è±¡ï¼å¿é¡»ï¼æä¸ä¸ªå±æ§ï¼
 * // start: å¼åå¼ä¸éï¼åå«ï¼;
 * // end: å¼åå¼ä¸éï¼ä¸åå«ï¼;
 * // style: æ°æ®å¯è§åå¾å½¢ç styleï¼è¿ä¸ªæ ·å¼å¯¹è±¡çå¯è®¾å±æ§ï¼<SuperMap.Feature.ShapeParameters.Polygon.style> ã
 * // barTopStyleByCodomain æ°ç»å½¢å¦ï¼
 * [
 *   {
 *     start:0,
 *     end:250,
 *     style:{
 *          fillColor:"#00CD00"
 *      }
 *  },
 *   {
 *     start:250,
 *     end:500,
 *     style:{
 *          fillColor:"#00EE00"
 *      }
 *  },
 *   {
 *     start:500,
 *     end:750,
 *     style:{
 *          fillColor:"#00FF7F"
 *      }
 *  },
 *   {
 *     start:750,
 *     end:1500,
 *     style:{
 *          fillColor:"#00FF00"
 *      }
 *  }
 * ]
 */

var Bar3D = /*#__PURE__*/function (_Graph) {
  Bar3D_inherits(Bar3D, _Graph);

  var _super = Bar3D_createSuper(Bar3D);

  function Bar3D(data, layer, fields, setting, lonlat) {
    var _this;

    Bar3D_classCallCheck(this, Bar3D);

    _this = _super.call(this, data, layer, fields, setting, lonlat);
    _this.CLASS_NAME = "SuperMap.Feature.Theme.Bar3D";
    return _this;
  }
  /**
   * @function SuperMap.Feature.Theme.Bar3D.prototype.destroy
   * @override
   */


  Bar3D_createClass(Bar3D, [{
    key: "destroy",
    value: function destroy() {
      Bar3D_get(Bar3D_getPrototypeOf(Bar3D.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.Feature.Theme.Bar3D.prototype.assembleShapes
     * @description å¾å½¢è£éå®ç°ï¼æ©å±æ¥å£ï¼ã
     */

  }, {
    key: "assembleShapes",
    value: function assembleShapes() {
      // å¾è¡¨éç½®å¯¹è±¡
      var sets = this.setting; // é»è®¤æ°æ®è§å¾æ¡

      if (!sets.dataViewBoxParameter) {
        if (typeof sets.useAxis === "undefined" || sets.useAxis) {
          sets.dataViewBoxParameter = [45, 25, 20, 20];
        } else {
          sets.dataViewBoxParameter = [5, 5, 5, 5];
        }
      } // 3d æ±å¾çåæ è½´é»è®¤ä½¿ç¨åæ è½´ç®­å¤´


      sets.axisUseArrow = typeof sets.axisUseArrow !== "undefined" ? sets.axisUseArrow : true;
      sets.axisXLabelsOffset = typeof sets.axisXLabelsOffset !== "undefined" ? sets.axisXLabelsOffset : [-10, 10]; // éè¦æ­¥éª¤ï¼åå§ååæ°

      if (!this.initBaseParameter()) {
        return;
      } // å¼å


      var codomain = this.DVBCodomain; // éè¦æ­¥éª¤ï¼å®ä¹å¾è¡¨ Bar æ°æ®è§å¾æ¡ä¸­åä½å¼çå«ä¹

      this.DVBUnitValue = (codomain[1] - codomain[0]) / this.DVBHeight; // æ°æ®è§å¾å

      var dvb = this.dataViewBox; // ç¨æ·æ°æ®å¼

      var fv = this.dataValues;

      if (fv.length < 1) {
        return;
      } // æ²¡ææ°æ®
      // æ°æ®æº¢åºå¼åèå´å¤ç


      for (var i = 0, fvLen = fv.length; i < fvLen; i++) {
        if (fv[i] < codomain[0] || fv[i] > codomain[1]) {
          return;
        }
      } // è·å x è½´ä¸çå¾å½¢ä¿¡æ¯


      var xShapeInfo = this.calculateXShapeInfo();

      if (!xShapeInfo) {
        return;
      } // æ¯ä¸ªæ±æ¡ x ä½ç½®


      var xsLoc = xShapeInfo.xPositions; // æ±æ¡å®½åº¦

      var xsWdith = xShapeInfo.width; // åæ è½´, é»è®¤å¯ç¨

      if (typeof sets.useBackground === "undefined" || sets.useBackground) {
        this.shapes.push(ShapeFactory.Background(this.shapeFactory, this.chartBox, sets));
      } // åæ è½´


      if (!sets.axis3DParameter || isNaN(sets.axis3DParameter) || sets.axis3DParameter < 15) {
        sets.axis3DParameter = 20;
      }

      if (typeof sets.useAxis === "undefined" || sets.useAxis) {
        this.shapes = this.shapes.concat(ShapeFactory.GraphAxis(this.shapeFactory, dvb, sets, xShapeInfo));
      } // 3d åç§»é, é»è®¤å¼ 10;


      var offset3d = sets.bar3DParameter && !isNaN(sets.bar3DParameter) ? sets.bar3DParameter : 10;

      for (var _i = 0; _i < fv.length; _i++) {
        // æ  3d åç§»éæ¶çæ±é¢é¡¶é¨ y åæ 
        var yPx = dvb[1] - (fv[_i] - codomain[0]) / this.DVBUnitValue; // æ  3d åç§»éæ¶çæ±é¢çå·¦ãå³ç«¯ x åæ 

        var iPoiL = xsLoc[_i] - xsWdith / 2;
        var iPoiR = xsLoc[_i] + xsWdith / 2; // 3d æ±é¡¶é¢èç¹

        var bar3DTopPois = [[iPoiL, yPx], [iPoiR, yPx], [iPoiR - offset3d, yPx + offset3d], [iPoiL - offset3d, yPx + offset3d]]; // 3d æ±ä¾§é¢èç¹

        var bar3DSidePois = [[iPoiR, yPx], [iPoiR - offset3d, yPx + offset3d], [iPoiR - offset3d, dvb[1] + offset3d], [iPoiR, dvb[1]]]; // 3d æ±æ­£é¢èç¹

        var bar3DFacePois = [[iPoiL - offset3d, dvb[1] + offset3d], [iPoiR - offset3d, dvb[1] + offset3d], [iPoiR - offset3d, yPx + offset3d], [iPoiL - offset3d, yPx + offset3d]];

        if (offset3d <= 0) {
          // offset3d <= 0 æ¶æ­£é¢ä¸åç§»
          bar3DFacePois = [[iPoiL, dvb[1]], [iPoiR, dvb[1]], [iPoiR, yPx], [iPoiL, yPx]];
        } // æ°å»º 3d æ±é¢é¡¶é¢ãä¾§é¢ãæ­£é¢å¾å½¢åæ°å¯¹è±¡


        var polyTopSP = new Polygon_Polygon(bar3DTopPois);
        var polySideSP = new Polygon_Polygon(bar3DSidePois);
        var polyFaceSP = new Polygon_Polygon(bar3DFacePois); // ä¾§é¢ãæ­£é¢å¾å½¢ style é»è®¤å¼

        sets.barSideStyle = sets.barSideStyle ? sets.barSideStyle : sets.barFaceStyle;
        sets.barSideStyleByFields = sets.barSideStyleByFields ? sets.barSideStyleByFields : sets.barFaceStyleByFields;
        sets.barSideStyleByCodomain = sets.barSideStyleByCodomain ? sets.barSideStyleByCodomain : sets.barFaceStyleByCodomain;
        sets.barTopStyle = sets.barTopStyle ? sets.barTopStyle : sets.barFaceStyle;
        sets.barTopStyleByFields = sets.barTopStyleByFields ? sets.barTopStyleByFields : sets.barFaceStyleByFields;
        sets.barTopStyleByCodomain = sets.barTopStyleByCodomain ? sets.barTopStyleByCodomain : sets.barFaceStyleByCodomain; // é¡¶é¢ãä¾§é¢ãæ­£é¢å¾å½¢ style

        polyFaceSP.style = ShapeFactory.ShapeStyleTool({
          stroke: true,
          strokeColor: "#ffffff",
          fillColor: "#ee9900"
        }, sets.barFaceStyle, sets.barFaceStyleByFields, sets.barFaceStyleByCodomain, _i, fv[_i]);
        polySideSP.style = ShapeFactory.ShapeStyleTool({
          stroke: true,
          strokeColor: "#ffffff",
          fillColor: "#ee9900"
        }, sets.barSideStyle, sets.barSideStyleByFields, sets.barSideStyleByCodomain, _i, fv[_i]);
        polyTopSP.style = ShapeFactory.ShapeStyleTool({
          stroke: true,
          strokeColor: "#ffffff",
          fillColor: "#ee9900"
        }, sets.barTopStyle, sets.barTopStyleByFields, sets.barTopStyleByCodomain, _i, fv[_i]); // 3d æ±æ¡é«äº®æ ·å¼

        sets.barSideHoverStyle = sets.barSideHoverStyle ? sets.barSideHoverStyle : sets.barFaceHoverStyle;
        sets.barTopHoverStyle = sets.barTopHoverStyle ? sets.barTopHoverStyle : sets.barFaceHoverStyle;
        polyFaceSP.highlightStyle = ShapeFactory.ShapeStyleTool({
          stroke: true
        }, sets.barFaceHoverStyle);
        polySideSP.highlightStyle = ShapeFactory.ShapeStyleTool({
          stroke: true
        }, sets.barSideHoverStyle);
        polyTopSP.highlightStyle = ShapeFactory.ShapeStyleTool({
          stroke: true
        }, sets.barTopHoverStyle); // å¾å½¢æºå¸¦çæ°æ® id ä¿¡æ¯ & é«äº®æ¨¡å¼

        polyTopSP.refDataID = polySideSP.refDataID = polyFaceSP.refDataID = this.data.id; // hover æ¨¡å¼ï¼ç»åï¼

        polyTopSP.isHoverByRefDataID = polySideSP.isHoverByRefDataID = polyFaceSP.isHoverByRefDataID = true; // é«äº®ç»(å½é¼ æ  hover å°ç»åä»»ä½ä¸ä¸ªå¾å½¢ï¼æ´ä¸ªç»çå¾å½¢é½ä¼é«äº®ãrefDataHoverGroup å¨ isHoverByRefDataID ä¸º true æ¶ææ)

        polyTopSP.refDataHoverGroup = polySideSP.refDataHoverGroup = polyFaceSP.refDataHoverGroup = Util.createUniqueID("lr_shg"); // å¾å½¢æºå¸¦çæ°æ®ä¿¡æ¯

        polyTopSP.dataInfo = polySideSP.dataInfo = polyFaceSP.dataInfo = {
          field: this.fields[_i],
          value: fv[_i]
        }; // 3d æ±æ¡é¡¶é¢ãä¾§é¢ãæ­£é¢å¾å½¢ hover click è®¾ç½®

        if (typeof sets.barHoverAble !== "undefined") {
          polyTopSP.hoverable = polySideSP.hoverable = polyFaceSP.hoverable = sets.barHoverAble;
        }

        if (typeof sets.barClickAble !== "undefined") {
          polyTopSP.clickable = polySideSP.clickable = polyFaceSP.clickable = sets.barClickAble;
        } // åå»º3d æ±æ¡çé¡¶é¢ãä¾§é¢ãæ­£é¢å¾å½¢å¹¶æ·»å å°å¾è¡¨çå¾å½¢åè¡¨æ°ç»


        this.shapes.push(this.shapeFactory.createShape(polySideSP));
        this.shapes.push(this.shapeFactory.createShape(polyTopSP));
        this.shapes.push(this.shapeFactory.createShape(polyFaceSP));
      } // éè¦æ­¥éª¤ï¼å°å¾å½¢è½¬ä¸ºç±ç¸å¯¹åæ è¡¨ç¤ºçå¾å½¢ï¼ä»¥ä¾¿å¨å°å¾å¹³ç§»ç¼©æ¾è¿ç¨ä¸­å¿«ééç»å¾å½¢
      // ï¼ç»è®¡ä¸é¢å¾æ¨¡åä»ç»æä¸è¦æ±ä½¿ç¨ç¸å¯¹åæ ï¼assembleShapes() å½æ°å¿é¡»å¨å¾å½¢è£éå®æåè°ç¨ shapesConvertToRelativeCoordinate() å½æ°ï¼


      this.shapesConvertToRelativeCoordinate();
    }
    /**
     * @function SuperMap.Feature.Theme.Bar3D.prototype.calculateXShapeInfo
     * @description è®¡ç® X è½´æ¹åä¸çå¾å½¢ä¿¡æ¯ï¼æ­¤ä¿¡æ¯æ¯ä¸ä¸ªå¯¹è±¡ï¼åå«ä¸¤ä¸ªå±æ§ï¼
     *              å±æ§ xPositions æ¯ä¸ä¸ªä¸ç»´æ°ç»ï¼è¯¥æ°ç»åç´ è¡¨ç¤ºå¾å½¢å¨ x è½´æ¹åä¸çåç´ åæ å¼ï¼
     *              å¦æå¾å½¢å¨ x æ¹åä¸æä¸å®å®½åº¦ï¼éå¸¸åå¾å½¢å¨ x æ¹åä¸çä¸­å¿ç¹ä¸ºå¾å½¢å¨ x æ¹åä¸çåæ å¼ã
     *              width è¡¨ç¤ºå¾å½¢çå®½åº¦ï¼ç¹å«æ³¨æï¼ç¹çå®½åº¦å§ç»ä¸º 0ï¼èä¸æ¯å¶ç´å¾ï¼ã
     *              æ¬å½æ°ä¸­å¾å½¢éç½®å¯¹è±¡ setting å¯è®¾å±æ§:
     *              xShapeBlank - {Array.<number>} æ°´å¹³æ¹åä¸çå¾å½¢ç©ºç½é´éåæ°ã
     *              é¿åº¦ä¸º 3 çæ°ç»ï¼ç¬¬ä¸åç´ è¡¨ç¤ºç¬¬ä¸ä¸ªå¾å½¢å·¦ç«¯ä¸æ°æ®è§å¾æ¡å·¦ç«¯çç©ºç½é´è·ï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºå¾å½¢é´ç©ºç½é´è·ï¼
     *              ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºæåä¸ä¸ªå¾å½¢å³ç«¯ä¸æ°æ®è§å¾æ¡å³ç«¯ç«¯çç©ºç½é´è· ã
     * @returns {Object} å¦æè®¡ç®å¤±è´¥ï¼è¿å nullï¼å¦æè®¡ç®æåï¼è¿å X è½´æ¹åä¸çå¾å½¢ä¿¡æ¯ï¼æ­¤ä¿¡æ¯æ¯ä¸ä¸ªå¯¹è±¡ï¼åå«ä»¥ä¸ä¸¤ä¸ªå±æ§:
     *                  xPositions - {Array.<number>} è¡¨ç¤ºå¾å½¢å¨ x è½´æ¹åä¸çåç´ åæ å¼ï¼å¦æå¾å½¢å¨ x æ¹åä¸æä¸å®å®½åº¦ï¼éå¸¸åå¾å½¢å¨ x æ¹åä¸çä¸­å¿ç¹ä¸ºå¾å½¢å¨ x æ¹åä¸çåæ å¼ã
     *                  width - {number} è¡¨ç¤ºå¾å½¢çå®½åº¦ï¼ç¹å«æ³¨æï¼ç¹çå®½åº¦å§ç»ä¸º 0ï¼èä¸æ¯å¶ç´å¾ï¼ã
     */

  }, {
    key: "calculateXShapeInfo",
    value: function calculateXShapeInfo() {
      var dvb = this.dataViewBox; // æ°æ®è§å¾æ¡

      var sets = this.setting; // å¾è¡¨éç½®å¯¹è±¡

      var fvc = this.dataValues.length; // æ°ç»å¼ä¸ªæ°

      if (fvc < 1) {
        return null;
      }

      var xBlank; // x è½´ç©ºç½é´éåæ°

      var xShapePositions = []; // x è½´ä¸å¾å½¢çä½ç½®

      var xShapeWidth = 0; // x è½´ä¸å¾å½¢å®½åº¦(èªéåº)

      var dvbWidth = this.DVBWidth; // æ°æ®è§å¾æ¡å®½åº¦
      //  x è½´ç©ºç½é´éåæ°å¤ç

      if (sets.xShapeBlank && sets.xShapeBlank.length && sets.xShapeBlank.length == 3) {
        xBlank = sets.xShapeBlank;
        var xsLen = dvbWidth - (xBlank[0] + xBlank[2] + (fvc - 1) * xBlank[1]);

        if (xsLen <= fvc) {
          return null;
        }

        xShapeWidth = xsLen / fvc;
      } else {
        // é»è®¤ä½¿ç¨ç­è·ç¦»ç©ºç½é´éï¼ç©ºç½é´éä¸ºå¾å½¢å®½åº¦
        xShapeWidth = dvbWidth / (2 * fvc + 1);
        xBlank = [xShapeWidth, xShapeWidth, xShapeWidth];
      } // å¾å½¢ x è½´ä¸çä½ç½®è®¡ç®


      var xOffset = 0;

      for (var i = 0; i < fvc; i++) {
        if (i == 0) {
          xOffset = xBlank[0] + xShapeWidth / 2;
        } else {
          xOffset += xShapeWidth + xBlank[1];
        }

        xShapePositions.push(dvb[0] + xOffset);
      }

      return {
        "xPositions": xShapePositions,
        "width": xShapeWidth
      };
    }
  }]);

  return Bar3D;
}(Graph);
/**
 * @typedef {Object} SuperMap.Feature.Theme.Bar3D.setting
 * @property {number} width - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å®½åº¦ã
 * @property {number} height - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼é«åº¦ã
 * @property {Array.<number>} codomain - å¾è¡¨åè®¸å±ç¤ºçæ°æ®å¼åï¼é¿åº¦ä¸º 2 çä¸ç»´æ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºå¼åä¸éï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºå¼åä¸éã
 * @property {number} [XOffset] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ X æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
 * @property {number} [YOffset] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ Y æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
 * @property {Array.<number>} [dataViewBoxParameter] - æ°æ®è§å¾æ¡ dataViewBox åæ°ï¼å®æ¯æå¾è¡¨æ¡ chartBox ï¼ç±å¾è¡¨ä½ç½®ãå¾è¡¨å®½åº¦ãå¾è¡¨é«åº¦ææçå¾è¡¨èå´æ¡ï¼å¨å·¦ãä¸ï¼å³ï¼ä¸åä¸ªæ¹åä¸çååè·å¼ãå½ä½¿ç¨åæ è½´æ¶ dataViewBoxParameter çé»è®¤å¼ä¸ºï¼[45, 25, 20, 20]ï¼ä¸ä½¿ç¨åæ è½´æ¶ dataViewBoxParameter çé»è®¤å¼ä¸ºï¼[5, 5, 5, 5]ã
 * @property {number} [decimalNumber] - æ°æ®å¼æ°ç» dataValues åç´ å¼å°æ°ä½æ°ï¼æ°æ®çå°æ°ä½å¤çåæ°ï¼åå¼èå´ï¼[0, 16]ãå¦æä¸è®¾ç½®æ­¤åæ°ï¼å¨åæ°æ®å¼æ¶ä¸å¯¹æ°æ®åå°æ°ä½å¤çã
 * @property {boolean} [useBackground=true] - æ¯å¦ä½¿ç¨å¾è¡¨èæ¯æ¡ã
 * @property {SuperMap.Feature.ShapeParameters.Rectangle.style} [backgroundStyle] - èæ¯æ ·å¼ã
 * @property {Array.<number>} [backgroundRadius=[0, 0, 0, 0]] - èæ¯æ¡ç©å½¢åè§åå¾ï¼å¯ä»¥ç¨æ°ç»åå«æå®åä¸ªè§çåè§åå¾ï¼è®¾ï¼å·¦ä¸ãå³ä¸ãå³ä¸ãå·¦ä¸è§çåå¾ä¾æ¬¡ä¸º r1ãr2ãr3ãr4 ,å backgroundRadius ä¸º [r1ãr2ãr3ãr4 ]ã
 * @property {Array.<number>} [xShapeBlank] - æ°´å¹³æ¹åä¸çå¾å½¢ç©ºç½é´éåæ°ãé¿åº¦ä¸º 3 çæ°ç»ï¼ç¬¬ä¸åç´ è¡¨ç¤ºç¬¬ä¸ä¸ªå¾å½¢å·¦ç«¯ä¸æ°æ®è§å¾æ¡å·¦ç«¯çç©ºç½é´è·ï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºå¾å½¢é´ç©ºç½é´è·ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºæåä¸ä¸ªå¾å½¢å³ç«¯ä¸æ°æ®è§å¾æ¡å³ç«¯ç«¯çç©ºç½é´è· ã
 * @property {number} [bar3DParameter=10] - 3D æ±ç¶åæ°ï¼3dæ±å½¢æ­£é¢ç¸å¯¹äºèé¢å x è½´å y è½´è´æ¹ååç§»çç»å¯¹å¼ã
 * @property {boolean} [useAxis=true] - æ¯å¦ä½¿ç¨åæ è½´ã
 * @property {SuperMap.Feature.ShapeParameters.Line.style} [axisStyle] - åæ è½´æ ·å¼ã
 * @property {boolean} [axisUseArrow=true] -åæ è½´æ¯å¦ä½¿ç¨ç®­å¤´ã
 * @property {number} [axisYTick=0] - y è½´å»åº¦æ°éã
 * @property {Array.<string>}  [axisYLabels] - y è½´ä¸çæ ç­¾ç»åå®¹ï¼æ ç­¾é¡ºåºæ²¿çæ°æ®è§å¾æ¡å·¦é¢æ¡è¾¹èªä¸èä¸ï¼ç­è·æå¸ãä¾å¦ï¼["1000", "750", "500", "250", "0"]ã
 * @property {SuperMap.Feature.ShapeParameters.Label.style} [axisYLabelsStyle] - y è½´ä¸çæ ç­¾ç»æ ·å¼ã
 * @property {Array.<number>} [axisYLabelsOffset=0] - y è½´ä¸çæ ç­¾ç»åç§»éãé¿åº¦ä¸º 2 çæ°ç»ï¼æ°ç»ç¬¬ä¸é¡¹è¡¨ç¤º y è½´æ ç­¾ç»æ¨ªåä¸çåç§»éï¼åå·¦ä¸ºæ­£ï¼é»è®¤å¼ï¼0ï¼æ°ç»ç¬¬äºé¡¹è¡¨ç¤º y è½´æ ç­¾ç»çºµåä¸çåç§»éï¼åä¸ä¸ºæ­£ã
 * @property {Array.<string>}  [axisXLabels] - x è½´ä¸çæ ç­¾ç»åå®¹ï¼æ ç­¾é¡ºåºæ²¿çæ°æ®è§å¾æ¡ä¸é¢æ¡è¾¹èªå·¦åå³æå¸ï¼ä¾å¦ï¼["92å¹´", "95å¹´", "99å¹´"]ãæ ç­¾æå¸è§åï¼å½æ ç­¾æ°éä¸ xShapeInfo ä¸­çå±æ§ xShapeCenter æ°éç¸åï¼å³æ ç­¾ä¸ªæ°ä¸æ°æ®ä¸ªæ°ç¸ç­æ¶ï¼, æç§ xShapeCenter æä¾çä½ç½®æå¸æ ç­¾ï¼å¦åæ²¿æ°æ®è§å¾æ¡ä¸é¢æ¡è¾¹ç­è·æå¸æ ç­¾ã
 * @property {SuperMap.Feature.ShapeParameters.Label.style} axisXLabelsStyle - x è½´ä¸çæ ç­¾ç»æ ·å¼ã
 * @property {Array.<number>} axisXLabelsOffset - x è½´ä¸çæ ç­¾ç»åç§»éãé¿åº¦ä¸º 2 çæ°ç»ï¼æ°ç»ç¬¬ä¸é¡¹è¡¨ç¤º x è½´æ ç­¾ç»æ¨ªåä¸çåç§»éï¼åå·¦ä¸ºæ­£ï¼é»è®¤å¼ï¼-10ï¼æ°ç»ç¬¬äºé¡¹è¡¨ç¤º x è½´æ ç­¾ç»çºµåä¸çåç§»éï¼åä¸ä¸ºæ­£ï¼é»è®¤å¼ï¼10ã
 * @property {boolean} [useXReferenceLine] - æ¯å¦ä½¿ç¨æ°´å¹³åèçº¿ï¼å¦æä¸º trueï¼å¨ axisYTick å¤§äº 0 æ¶ææï¼æ°´å¹³åèçº¿æ¯ y è½´å»åº¦å¨æ°æ®è§å¾æ¡éçå»¶ä¼¸ã
 * @property {SuperMap.Feature.ShapeParameters.Line.style} [xReferenceLineStyle] - æ°´å¹³åèçº¿æ ·å¼ã
 * @property {number} [axis3DParameter=20] - 3D åæ è½´åæ°ï¼æ­¤å±æ§å¼å¨å¤§äºç­äº 15 æ¶ææã
 * @property {SuperMap.Feature.ShapeParameters.Polygon.style} barFaceStyle - 3d æ±ç¶å¾æ±æ¡æ­£é¢åºç¡ styleï¼æ­¤åæ°æ§å¶æ±æ¡æ­£é¢åºç¡æ ·å¼ï¼ä¼åçº§ä½äº barFaceStyleByFields å barFaceStyleByCodomainã
 * @property {Array.<SuperMap.Feature.ShapeParameters.Polygon.style>} [barFaceStyleByFields] - æä¸é¢å­æ®µ themeFieldsï¼<SuperMap.Layer.Graph.themeFields>ï¼ä¸ºæ±æ¡æ­£é¢èµ styleï¼æ­¤åæ°æå­æ®µæ§å¶æ±æ¡æ­£é¢æ ·å¼ï¼ä¼åçº§ä½äº barFaceStyleByCodomainï¼é«äº barFaceStyleãæ­¤æ°ç»ä¸­çåç´ æ¯æ ·å¼å¯¹è±¡ãæ­¤åæ°ä¸­ç style ä¸ themeFields ä¸­çå­æ®µä¸ä¸å¯¹åº ãä¾å¦ï¼ themeFieldsï¼<SuperMap.Layer.Graph.themeFields>ï¼ ä¸º ["POP_1992", "POP_1995", "POP_1999"],barFaceStyleByFields ä¸º[style1, style2, style3]ï¼åå¨å¾è¡¨ä¸­ï¼å­æ®µ POP_1992 å¯¹åºçæ±æ¡æ­£é¢ä½¿ç¨ style1ï¼å­æ®µ POP_1995 å¯¹åºçæ±æ¡æ­£é¢ä½¿ç¨ style2 ï¼å­æ®µ POP_1999 å¯¹åºçæ±æ¡æ­£é¢ä½¿ç¨ style3ã
 * @property {Array.<Object>} [barFaceStyleByCodomain] - ææ±æ¡æ­£é¢ä»£è¡¨çæ°æ®å¼æå¨å¼åèå´æ§å¶æ±æ¡æ­£é¢æ ·å¼ï¼ä¼åçº§é«äº barFaceStyle å barFaceStyleByFieldsã
 * @property {SuperMap.Feature.ShapeParameters.Polygon.style} [barSideStyle=barFaceStyle] - 3d æ±ç¶å¾æ±æ¡ä¾§é¢åºç¡ styleï¼æ­¤åæ°æ§å¶æ±æ¡ä¾§é¢åºç¡æ ·å¼ï¼ä¼åçº§ä½äº barSideStyleByFields å barSideStyleByCodomainã
 * @property {Array.<SuperMap.Feature.ShapeParameters.Polygon.style>} [barSideStyleByFields] - æä¸é¢å­æ®µ themeFieldsï¼<SuperMap.Layer.Graph.themeFields>ï¼ä¸ºæ±æ¡ä¾§é¢èµstyleï¼æ­¤æ°æå­æ®µæ§å¶æ±æ¡ä¾§é¢æ ·å¼ï¼ä¼åçº§ä½äº barSideStyleByCodomainï¼é«äº barSideStyleãæ­¤æ°ç»ä¸­çåç´ æ¯æ ·å¼å¯¹è±¡ãæ­¤åæ°ä¸­ç style ä¸ themeFields ä¸­çå­æ®µä¸ä¸å¯¹åº ãä¾å¦ï¼ themeFieldsï¼<SuperMap.Layer.Graph.themeFields>ï¼ ä¸º ["POP_1992", "POP_1995", "POP_1999"],barSideStyleByFields ä¸º[style1, style2, style3]ï¼åå¨å¾è¡¨ä¸­ï¼å­æ®µ POP_1992 å¯¹åºçæ±æ¡ä¾§é¢ä½¿ç¨ style1ï¼å­æ®µ POP_1995å¯¹åºçæ±æ¡ä¾§é¢ä½¿ç¨style2ï¼å­æ®µPOP_1999å¯¹åºçæ±æ¡ä¾§é¢ä½¿ç¨style3ãé»è®¤å¼ï¼barFaceStyleByFieldsã
 * @property {Array.<Object>} [barSideStyleByCodomain=barFaceStyleByCodomain] - ææ±æ¡ä¾§é¢ä»£è¡¨çæ°æ®å¼æå¨å¼åèå´æ§å¶æ±æ¡ä¾§é¢æ ·å¼ï¼ä¼åçº§é«äº barSideStyle å barSideStyleByFieldsã
 * @property {Object} [barFaceHoverStyle] - 3d æ±æ¡æ­£é¢ hover ç¶ææ¶çæ ·å¼ï¼barHoverAble ä¸º true æ¶ææã
 * @property {Object} [barSideHoverStyle=barFaceHoverStyle] - 3d æ±æ¡ä¾§é¢ hover ç¶ææ¶çæ ·å¼ï¼barHoverAble ä¸º true æ¶ææã
 * @property {Object}  [barTopHoverStyle=barFaceHoverStyle] - 3d æ±æ¡é¡¶é¢ hover ç¶ææ¶çæ ·å¼ï¼barHoverAble ä¸º true æ¶ææã
 * @property {boolean} [barHoverAble=true] - æ¯å¦åè®¸æ±æ¡ä½¿ç¨ hover ç¶æãåæ¶è®¾ç½® barHoverAble å barClickAble ä¸º falseï¼å¯ä»¥ç´æ¥å±è½æ±æ¡å¯¹ä¸é¢å¾å±äºä»¶çååºã
 * @property {boolean} [barClickAble=true] - æ¯å¦åè®¸æ±æ¡è¢«ç¹å»ãåæ¶è®¾ç½® barHoverAble å barClickAble ä¸º falseï¼å¯ä»¥ç´æ¥å±è½æ±æ¡å¯¹ä¸é¢å¾å±äºä»¶çååºã
 * @property {SuperMap.Feature.ShapeParameters.Polygon.style} [barTopStyle=barFaceStyle] - 3d æ±ç¶å¾æ±æ¡é¡¶é¢åºç¡ styleï¼æ­¤åæ°æ§å¶æ±æ¡é¡¶é¢åºç¡æ ·å¼ï¼ä¼åçº§ä½äº barTopStyleByFields å barTopStyleByCodomainã
 * @property {Array.<SuperMap.Feature.ShapeParameters.Polygon.style>} [barTopStyleByFields=barFaceStyleByFields] - æä¸é¢å­æ®µ themeFieldsï¼<SuperMap.Layer.Graph.themeFields>ï¼ä¸ºæ±æ¡é¡¶é¢èµ styleï¼æ­¤åæ°æå­æ®µæ§å¶æ±æ¡é¡¶é¢æ ·å¼ï¼ä¼åçº§ä½äº barTopStyleByCodomainï¼é«äº barTopStyleãæ­¤æ°ç»ä¸­çåç´ æ¯æ ·å¼å¯¹è±¡ãæ­¤åæ°ä¸­ç style ä¸ themeFields ä¸­çå­æ®µä¸ä¸å¯¹åº ãä¾å¦ï¼ themeFieldsï¼<SuperMap.Layer.Graph.themeFields>ï¼ ä¸º ["POP_1992", "POP_1995", "POP_1999"],barTopStyleByFields ä¸º[style1, style2, style3]ï¼åå¨å¾è¡¨ä¸­ï¼å­æ®µ POP_1992 å¯¹åºçæ±æ¡é¡¶é¢ä½¿ç¨ style1ï¼å­æ®µ POP_1995 å¯¹åºçæ±æ¡é¡¶é¢ä½¿ç¨ style2 ï¼å­æ®µ POP_1999 å¯¹åºçæ±æ¡é¡¶é¢ä½¿ç¨ style3ã
 * @property {Array.<Object>} [barTopStyleByCodomain=barFaceStyleByCodomain] - ææ±æ¡é¡¶é¢ä»£è¡¨çæ°æ®å¼æå¨å¼åèå´æ§å¶æ±æ¡é¡¶é¢æ ·å¼ï¼ä¼åçº§é«äº barTopStyle å barTopStyleByFieldsã
 */

SuperMap.Feature.Theme.Bar3D = Bar3D;
// CONCATENATED MODULE: ./src/common/overlay/RankSymbol.js
function RankSymbol_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { RankSymbol_typeof = function _typeof(obj) { return typeof obj; }; } else { RankSymbol_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return RankSymbol_typeof(obj); }

function RankSymbol_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function RankSymbol_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function RankSymbol_createClass(Constructor, protoProps, staticProps) { if (protoProps) RankSymbol_defineProperties(Constructor.prototype, protoProps); if (staticProps) RankSymbol_defineProperties(Constructor, staticProps); return Constructor; }

function RankSymbol_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { RankSymbol_get = Reflect.get; } else { RankSymbol_get = function _get(target, property, receiver) { var base = RankSymbol_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return RankSymbol_get(target, property, receiver || target); }

function RankSymbol_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = RankSymbol_getPrototypeOf(object); if (object === null) break; } return object; }

function RankSymbol_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) RankSymbol_setPrototypeOf(subClass, superClass); }

function RankSymbol_setPrototypeOf(o, p) { RankSymbol_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return RankSymbol_setPrototypeOf(o, p); }

function RankSymbol_createSuper(Derived) { var hasNativeReflectConstruct = RankSymbol_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = RankSymbol_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = RankSymbol_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return RankSymbol_possibleConstructorReturn(this, result); }; }

function RankSymbol_possibleConstructorReturn(self, call) { if (call && (RankSymbol_typeof(call) === "object" || typeof call === "function")) { return call; } return RankSymbol_assertThisInitialized(self); }

function RankSymbol_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function RankSymbol_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function RankSymbol_getPrototypeOf(o) { RankSymbol_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return RankSymbol_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.Feature.Theme.RankSymbol
 * @classdesc ç¬¦å·ä¸é¢è¦ç´ åºç±»ã
 * @category Visualization Theme
 * @description æ­¤ç±»å®ä¹äºç¬¦å·ä¸é¢è¦ç´ åºç¡æ¨¡åï¼å·ä½çå¾è¡¨æ¨¡åéè¿ç»§æ¿æ­¤ç±»ï¼å¨å­ç±»ä¸­å®ç° assembleShapes æ¹æ³ã
 * ç¬¦å·ä¸é¢è¦ç´ æ¨¡åéç¨äºå¯è§åå¾å½¢å¤§å°èªéåºç­ç¥ï¼ç¨è¾å°çåæ°æ§å¶çå¾è¡¨è¯¸å¤å¾å½¢ï¼å¾è¡¨éç½®å¯¹è±¡ <SuperMap.Feature.Theme.RankSymbol.setting> çåºç¡å±æ§åªæ 5 ä¸ªï¼
 * å®ä»¬æ§å¶çå¾è¡¨ç»æãå¼åèå´ãæ°æ®å°æ°ä½ç­åºç¡å¾è¡¨å½¢æãææå¾è¡¨çå¾å½¢å¿é¡»å¨å¾è¡¨ç»æéèªéåºå¤§å°ã
 * æ­¤ç±»ä¸å¯å®ä¾åï¼æ­¤ç±»çå¯å®ä¾åå­ç±»å¿é¡»å®ç° assembleShapes() æ¹æ³ã
 * @param {SuperMap.Feature.Vector} data - ç¨æ·æ°æ®ã
 * @param {SuperMap.Layer.RankSymbol} layer - æ­¤ä¸é¢è¦ç´ æå¨å¾å±ã
 * @param {Array.<string>} fields - data ä¸­çåä¸æ­¤å¾è¡¨çæçå­æ®µåç§°ã
 * @param {Object} setting - å¾è¡¨éç½®å¯¹è±¡ã
 * @param {SuperMap.LonLat} [lonlat] - ä¸é¢è¦ç´ å°çä½ç½®ãé»è®¤ä¸º data æä»£çå°çè¦ç´  Bounds ä¸­å¿ã
 *
 * @extends SuperMap.Feature.Theme.Graph
 *
 */

var RankSymbol = /*#__PURE__*/function (_Graph) {
  RankSymbol_inherits(RankSymbol, _Graph);

  var _super = RankSymbol_createSuper(RankSymbol);

  function RankSymbol(data, layer, fields, setting, lonlat, options) {
    var _this;

    RankSymbol_classCallCheck(this, RankSymbol);

    _this = _super.call(this, data, layer, fields, setting, lonlat, options);
    /**
     * @member SuperMap.Feature.Theme.RankSymbol.prototype.setting -{Object}
     * @description ç¬¦å·éç½®å¯¹è±¡ï¼è¯¥å¯¹è±¡æ§å¶çå¾è¡¨çå¯è§åæ¾ç¤ºã
     * ä¸é¢æ¯æ­¤éç½®å¯¹è±¡ç 5 ä¸ªåºç¡å¯è®¾å±æ§ï¼<br>
     * @param {Array.<number>} codomain - å¼åï¼é¿åº¦ä¸º 2 çä¸ç»´æ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºå¼åä¸éï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºå¼åä¸éã
     * @param {number} [XOffset] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ X æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
     * @param {number} [YOffset] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ Y æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
     * @param {Array.<number>} [dataViewBoxParameter] - æ°æ®è§å¾æ¡ dataViewBox åæ°ï¼å®æ¯æå¾è¡¨æ¡ chartBox ï¼ç±å¾è¡¨ä½ç½®ãå¾è¡¨å®½åº¦ãå¾è¡¨é«åº¦ææçå¾è¡¨èå´æ¡ï¼å¨å·¦ãä¸ï¼å³ï¼ä¸åä¸ªæ¹åä¸çååè·å¼ã
     * @param {number} [decimalNumber] - æ°æ®å¼æ°ç» dataValues åç´ å¼å°æ°ä½æ°ï¼æ°æ®çå°æ°ä½å¤çåæ°ï¼åå¼èå´ï¼[0, 16]ãå¦æä¸è®¾ç½®æ­¤åæ°ï¼å¨åæ°æ®å¼æ¶ä¸å¯¹æ°æ®åå°æ°ä½å¤çã
     * é¤äºä»¥ä¸ 5 ä¸ªåºç¡å±æ§ï¼æ­¤å¯¹è±¡çå¯è®¾å±æ§å¨ä¸åå­ç±»ä¸­æè¾å¤§å·®å¼ï¼ä¸åå­ç±»ä¸­å¯¹åä¸å±æ§çè§£éä¹å¯è½ä¸åã
     * è¯·å¨æ­¤ç±»çå­ç±»ä¸­æ¥ç setting å¯¹è±¡çå¯è®¾å±æ§åå±æ§å«ä¹ã
     */

    _this.setting = null; // éç½®é¡¹æ£æµä¸èµå¼

    if (setting && setting.codomain) {
      _this.setting = setting;
      _this.DVBCodomain = _this.setting.codomain;
    }

    _this.CLASS_NAME = "SuperMap.Feature.Theme.RankSymbol";
    return _this;
  }
  /**
   * @function SuperMap.Feature.Theme.RankSymbol.prototype.destroy
   * @description éæ¯ä¸é¢è¦ç´ ã
   */


  RankSymbol_createClass(RankSymbol, [{
    key: "destroy",
    value: function destroy() {
      this.setting = null;

      RankSymbol_get(RankSymbol_getPrototypeOf(RankSymbol.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.Feature.Theme.RankSymbol.prototype.initBaseParameter
     * @description åå§åä¸é¢è¦ç´ ï¼å¾å½¢ï¼åºç¡åæ°ã
     * å¨è°ç¨æ­¤æ¹æ³åï¼æ­¤ç±»çå¾è¡¨æ¨¡åç¸å³å±æ§é½æ¯ä¸å¯ç¨ç ï¼æ­¤æ¹æ³å¨ assembleShapes å½æ°ä¸­è°ç¨ã
     * è°ç¨æ­¤å½æ°å³ç³»å° setting å¯¹è±¡çä»¥ä¸å±æ§ã
     * @param {Array.<number>} codomain - å¼åï¼é¿åº¦ä¸º 2 çä¸ç»´æ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºå¼åä¸éï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºå¼åä¸éã
     * @param {number} [XOffset] - ä¸é¢è¦ç´ ï¼å¾å½¢ï¼å¨ X æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
     * @param {number} [YOffset] - ä¸é¢è¦ç´ ï¼å¾å½¢ï¼å¨ Y æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
     * @param {Array.<number>} [dataViewBoxParameter] - æ°æ®è§å¾æ¡ dataViewBox åæ°ï¼å®æ¯æå¾å½¢æ¡ chartBox ï¼ç±å¾è¡¨ä½ç½®ãå¾è¡¨å®½åº¦ãå¾è¡¨é«åº¦ææçå¾è¡¨èå´æ¡ï¼å¨å·¦ãä¸ï¼å³ï¼ä¸åä¸ªæ¹åä¸çååè·å¼ã
     * @param {number} [decimalNumber] - æ°æ®å¼æ°ç» dataValues åç´ å¼å°æ°ä½æ°ï¼æ°æ®çå°æ°ä½å¤çåæ°ï¼åå¼èå´ï¼[0, 16]ãå¦æä¸è®¾ç½®æ­¤åæ°ï¼å¨åæ°æ®å¼æ¶ä¸å¯¹æ°æ®åå°æ°ä½å¤çã
     * @returns {boolean} åå§ååæ°æ¯å¦æåã
     */

  }, {
    key: "initBaseParameter",
    value: function initBaseParameter() {
      // åæ°åå§åæ¯å¦æå
      var isSuccess = true; // setting å±æ§æ¯å¦å·²æåèµå¼

      if (!this.setting) {
        return false;
      }

      var sets = this.setting; // å¾è¡¨åç§»

      if (sets.XOffset) {
        this.XOffset = sets.XOffset;
      }

      if (sets.YOffset) {
        this.YOffset = sets.YOffset;
      }

      this.XOffset = sets.XOffset ? sets.XOffset : 0;
      this.YOffset = sets.YOffset ? sets.YOffset : 0; // å¶ä»é»è®¤å¼

      this.origonPoint = [];
      this.chartBox = [];
      this.dataViewBox = [];
      this.DVBParameter = sets.dataViewBoxParameter ? sets.dataViewBoxParameter : [0, 0, 0, 0];
      this.DVBOrigonPoint = [];
      this.DVBCenterPoint = [];
      this.origonPointOffset = []; // å¾è¡¨ä½ç½®

      this.resetLocation(); // ä¸é¢è¦ç´ å®½åº¦ w

      var w = this.width; // ä¸é¢è¦ç´ é«åº¦ h

      var h = this.height; // ä¸é¢è¦ç´ åç´ ä½ç½® loc

      var loc = this.location; // ä¸é¢è¦ç´ åç´ ä½ç½® loc

      this.origonPoint = [loc[0] - w / 2, loc[1] - h / 2]; // ä¸é¢è¦ç´ åç¹ï¼å·¦ä¸è§ï¼

      var op = this.origonPoint; // å¾è¡¨æ¡ï¼[left, bottom, right, top]ï¼

      this.chartBox = [op[0], op[1] + h, op[0] + w, op[1]]; // å¾è¡¨æ¡

      var cb = this.chartBox; // æ°æ®è§å¾æ¡åæ°ï¼å®æ¯å¾è¡¨æ¡åæ¹åå¯¹åºçååè·

      var dbbP = this.DVBParameter; // æ°æ®è§å¾æ¡ ï¼[left, bottom, right, top]ï¼

      this.dataViewBox = [cb[0] + dbbP[0], cb[1] - dbbP[1], cb[2] - dbbP[2], cb[3] + dbbP[3]]; // æ°æ®è§å¾æ¡

      var dvb = this.dataViewBox; //æ£æ¥æ°æ®è§å¾æ¡æ¯å¦åæ³

      if (dvb[0] >= dvb[2] || dvb[1] <= dvb[3]) {
        return false;
      } // æ°æ®è§å¾æ¡åç¹


      this.DVBOrigonPoint = [dvb[0], dvb[3]]; // æ°æ®è§å¾æ¡å®½åº¦

      this.DVBWidth = Math.abs(dvb[2] - dvb[0]); // æ°æ®è§å¾æ¡é«åº¦

      this.DVBHeight = Math.abs(dvb[1] - dvb[3]); // æ°æ®è§å¾æ¡ä¸­å¿ç¹

      this.DVBCenterPoint = [this.DVBOrigonPoint[0] + this.DVBWidth / 2, this.DVBOrigonPoint[1] + this.DVBHeight / 2]; // æ°æ®è§å¾æ¡åç¹ä¸å¾è¡¨æ¡çåç¹åç§»é

      this.origonPointOffset = [this.DVBOrigonPoint[0] - op[0], this.DVBOrigonPoint[1] - op[1]];
      return isSuccess;
    }
  }]);

  return RankSymbol;
}(Graph);
SuperMap.Feature.Theme.RankSymbol = RankSymbol;
// CONCATENATED MODULE: ./src/common/overlay/Circle.js
function overlay_Circle_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { overlay_Circle_typeof = function _typeof(obj) { return typeof obj; }; } else { overlay_Circle_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return overlay_Circle_typeof(obj); }

function overlay_Circle_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function overlay_Circle_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function overlay_Circle_createClass(Constructor, protoProps, staticProps) { if (protoProps) overlay_Circle_defineProperties(Constructor.prototype, protoProps); if (staticProps) overlay_Circle_defineProperties(Constructor, staticProps); return Constructor; }

function overlay_Circle_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { overlay_Circle_get = Reflect.get; } else { overlay_Circle_get = function _get(target, property, receiver) { var base = overlay_Circle_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return overlay_Circle_get(target, property, receiver || target); }

function overlay_Circle_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = overlay_Circle_getPrototypeOf(object); if (object === null) break; } return object; }

function overlay_Circle_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) overlay_Circle_setPrototypeOf(subClass, superClass); }

function overlay_Circle_setPrototypeOf(o, p) { overlay_Circle_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return overlay_Circle_setPrototypeOf(o, p); }

function overlay_Circle_createSuper(Derived) { var hasNativeReflectConstruct = overlay_Circle_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = overlay_Circle_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = overlay_Circle_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return overlay_Circle_possibleConstructorReturn(this, result); }; }

function overlay_Circle_possibleConstructorReturn(self, call) { if (call && (overlay_Circle_typeof(call) === "object" || typeof call === "function")) { return call; } return overlay_Circle_assertThisInitialized(self); }

function overlay_Circle_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function overlay_Circle_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function overlay_Circle_getPrototypeOf(o) { overlay_Circle_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return overlay_Circle_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.Feature.Theme.Circle
 * @classdesc åç±»ã
 * @category Visualization Theme
 * @extends SuperMap.Feature.Theme.RankSymbol
 * @param {SuperMap.Feature.Vector} data - ç¨æ·æ°æ®ã
 * @param {SuperMap.Layer.RankSymbol} layer - æ­¤ä¸é¢è¦ç´ æå¨å¾å±ã
 * @param {Array.<string>} fields - data ä¸­çåä¸æ­¤å¾è¡¨çæçå­æ®µåç§°ã
 * @param {SuperMap.Feature.Theme.Circle.setting} setting - å¾è¡¨éç½®å¯¹è±¡ã
 * @param {SuperMap.LonLat} [lonlat] - ä¸é¢è¦ç´ å°çä½ç½®ï¼é»è®¤ä¸º data æä»£çå°çè¦ç´  Bounds ä¸­å¿ã
 */

var Circle = /*#__PURE__*/function (_RankSymbol) {
  overlay_Circle_inherits(Circle, _RankSymbol);

  var _super = overlay_Circle_createSuper(Circle);

  function Circle(data, layer, fields, setting, lonlat) {
    var _this;

    overlay_Circle_classCallCheck(this, Circle);

    _this = _super.call(this, data, layer, fields, setting, lonlat);
    _this.CLASS_NAME = "SuperMap.Feature.Theme.Circle";
    return _this;
  }
  /**
   * @function SuperMap.Feature.Theme.Circle.prototype.destroy
   * @override
   */


  overlay_Circle_createClass(Circle, [{
    key: "destroy",
    value: function destroy() {
      overlay_Circle_get(overlay_Circle_getPrototypeOf(Circle.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.Feature.Theme.Circle.prototype.assembleShapes
     * @description è£éå¾å½¢ï¼æ©å±æ¥å£ï¼ã
     */

  }, {
    key: "assembleShapes",
    value: function assembleShapes() {
      //é»è®¤å¡«åé¢è²
      var defaultFillColor = "#ff9277"; // setting å±æ§æ¯å¦å·²æåèµå¼

      if (!this.setting) {
        return false;
      }

      var sets = this.setting; // æ£æµ setting çå¿è®¾åæ°

      if (!sets.codomain) {
        return false;
      } // æ°æ®


      var decimalNumber = typeof sets.decimalNumber !== "undefined" && !isNaN(sets.decimalNumber) ? sets.decimalNumber : -1;
      var dataEffective = Theme_Theme.getDataValues(this.data, this.fields, decimalNumber);
      this.dataValues = dataEffective ? dataEffective : []; // æ°æ®å¼æ°ç»

      var fv = this.dataValues; //if(fv.length != 1) return;       // æ²¡ææ°æ® æèæ°æ®ä¸å¯ä¸
      //if(fv[0] < 0) return;            //æ°æ®ä¸ºè´å¼
      //ç¨æ·åºè¯¥å®ä¹æå¤§ æå°åå¾  é»è®¤æå¤§åå¾MaxR:100 æå°åå¾MinR:0;

      if (!sets.maxR) {
        sets.maxR = 100;
      }

      if (!sets.minR) {
        sets.minR = 0;
      } // å¼åèå´


      var codomain = this.DVBCodomain; // éè¦æ­¥éª¤ï¼å®ä¹Circleæ°æ®è§å¾æ¡ä¸­åä½å¼çå«ä¹ï¼åä½å¼ï¼1æä»£è¡¨çé¿åº¦
      // ç¨æ·å®ä¹äºå¼åèå´

      if (codomain && codomain[1] - codomain[0] > 0) {
        this.DVBUnitValue = sets.maxR / (codomain[1] - codomain[0]);
      } else {
        //this.DVBUnitValue = sets.maxR / maxValue;
        this.DVBUnitValue = sets.maxR;
      }

      var uv = this.DVBUnitValue; //ååå¾

      var r = fv[0] * uv + sets.minR;
      this.width = 2 * r;
      this.height = 2 * r; // éè¦æ­¥éª¤ï¼åå§ååæ°

      if (!this.initBaseParameter()) {
        return;
      } //åå¦ç¨æ·è®¾ç½®äºå¼åèå´ æ²¡æå¨å¼åèå´ç´æ¥è¿å


      if (codomain) {
        if (fv[0] < codomain[0] || fv[0] > codomain[1]) {
          return;
        }
      }

      var dvbCenter = this.DVBCenterPoint; // æ°æ®è§å¾æ¡ä¸­å¿ä½ä¸ºåå¿
      //åå½¢å¯¹è±¡åæ°

      var circleSP = new Circle_Circle(dvbCenter[0], dvbCenter[1], r); //circleSP.sytle åå§å

      circleSP.style = ShapeFactory.ShapeStyleTool(null, sets.circleStyle, null, null, 0); //å¾å½¢çå¡«åé¢è²

      if (typeof sets.fillColor !== "undefined") {
        //ç¨æ·èªå®ä¹
        circleSP.style.fillColor = sets.fillColor;
      } else {
        //å½åé»è®¤
        circleSP.style.fillColor = defaultFillColor;
      } //åå½¢ Hoveræ ·å¼


      circleSP.highlightStyle = ShapeFactory.ShapeStyleTool(null, sets.circleHoverStyle); //åå½¢ Hover ä¸ click è®¾ç½®

      if (typeof sets.circleHoverAble !== "undefined") {
        circleSP.hoverable = sets.circleHoverAble;
      }

      if (typeof sets.circleClickAble !== "undefined") {
        circleSP.clickable = sets.circleClickAble;
      } //å¾å½¢æºå¸¦çæ°æ®ä¿¡æ¯


      circleSP.refDataID = this.data.id;
      circleSP.dataInfo = {
        field: this.fields[0],
        r: r,
        value: fv[0]
      }; // åå»ºæå½¢å¹¶ææ­¤æå½¢æ·»å å°å¾è¡¨å¾å½¢æ°ç»

      this.shapes.push(this.shapeFactory.createShape(circleSP)); // éè¦æ­¥éª¤ï¼å°å¾å½¢è½¬ä¸ºç±ç¸å¯¹åæ è¡¨ç¤ºçå¾å½¢ï¼ä»¥ä¾¿å¨å°å¾å¹³ç§»ç¼©æ¾è¿ç¨ä¸­å¿«ééç»å¾å½¢
      // ï¼ç»è®¡ä¸é¢å¾æ¨¡åä»ç»æä¸è¦æ±ä½¿ç¨ç¸å¯¹åæ ï¼assembleShapes() å½æ°å¿é¡»å¨å¾å½¢è£éå®æåè°ç¨ shapesConvertToRelativeCoordinate() å½æ°ï¼

      this.shapesConvertToRelativeCoordinate();
    }
  }]);

  return Circle;
}(RankSymbol);
/**
 * @typedef {Object} SuperMap.Feature.Theme.Circle.setting
 * @property {Array.<number>} codomain - å¾è¡¨åè®¸å±ç¤ºçæ°æ®å¼åï¼é¿åº¦ä¸º 2 çä¸ç»´æ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºå¼åä¸éï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºå¼åä¸éã
 * @property {number} [maxR] - åå½¢çæå¤§åå¾ã
 * @property {number} [minR] - åå½¢çæå°åå¾ã
 * @property {string} [fillColor] - åå½¢çå¡«åè²ï¼å¦ï¼fillColor: "#FFB980"ã
 * @property {Object} [circleStyle] - åå½¢çåºç¡ styleï¼æ­¤åæ°æ§å¶åå½¢åºç¡æ ·å¼ï¼ä¼åçº§ä½äº circleStyleByFields å circleStyleByCodomainã
 * @property {number} [decimalNumber] - æ°æ®å¼æ°ç» dataValues åç´ å¼å°æ°ä½æ°ï¼æ°æ®çå°æ°ä½å¤çåæ°ï¼åå¼èå´ï¼[0, 16]ãå¦æä¸è®¾ç½®æ­¤åæ°ï¼å¨åæ°æ®å¼æ¶ä¸å¯¹æ°æ®åå°æ°ä½å¤çã
 * @property {Object} [circleHoverStyle] - åå½¢ hover ç¶ææ¶çæ ·å¼ï¼circleHoverAble ä¸º true æ¶ææã
 * @property {boolean} [circleHoverAble=true] - æ¯å¦åè®¸åå½¢ä½¿ç¨ hover ç¶æãåæ¶è®¾ç½® circleHoverAble å circleClickAble ä¸º falseï¼å¯ä»¥ç´æ¥å±è½å¾å½¢å¯¹ä¸é¢å¾å±äºä»¶çååºã
 * @property {boolean} [circleClickAble=true] - æ¯å¦åè®¸åå½¢è¢«ç¹å»ãåæ¶è®¾ç½® circleHoverAble å circleClickAble ä¸º falseï¼å¯ä»¥ç´æ¥å±è½å¾å½¢å¯¹ä¸é¢å¾å±äºä»¶çååºã
 * 
 */

SuperMap.Feature.Theme.Circle = Circle;
// CONCATENATED MODULE: ./src/common/overlay/Line.js
function overlay_Line_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { overlay_Line_typeof = function _typeof(obj) { return typeof obj; }; } else { overlay_Line_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return overlay_Line_typeof(obj); }

function overlay_Line_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function overlay_Line_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function overlay_Line_createClass(Constructor, protoProps, staticProps) { if (protoProps) overlay_Line_defineProperties(Constructor.prototype, protoProps); if (staticProps) overlay_Line_defineProperties(Constructor, staticProps); return Constructor; }

function overlay_Line_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { overlay_Line_get = Reflect.get; } else { overlay_Line_get = function _get(target, property, receiver) { var base = overlay_Line_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return overlay_Line_get(target, property, receiver || target); }

function overlay_Line_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = overlay_Line_getPrototypeOf(object); if (object === null) break; } return object; }

function overlay_Line_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) overlay_Line_setPrototypeOf(subClass, superClass); }

function overlay_Line_setPrototypeOf(o, p) { overlay_Line_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return overlay_Line_setPrototypeOf(o, p); }

function overlay_Line_createSuper(Derived) { var hasNativeReflectConstruct = overlay_Line_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = overlay_Line_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = overlay_Line_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return overlay_Line_possibleConstructorReturn(this, result); }; }

function overlay_Line_possibleConstructorReturn(self, call) { if (call && (overlay_Line_typeof(call) === "object" || typeof call === "function")) { return call; } return overlay_Line_assertThisInitialized(self); }

function overlay_Line_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function overlay_Line_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function overlay_Line_getPrototypeOf(o) { overlay_Line_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return overlay_Line_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.Feature.Theme.Line
 * @classdesc æçº¿å¾ã
 * @category Visualization Theme
 * @example
 * // pointStyleByCodomain åæ°ç¨æ³ç¤ºä¾
 * // pointStyleByCodomain çæ¯ä¸ªåç´ æ¯ä¸ªåå«å¼åä¿¡æ¯åä¸å¼åå¯¹åºæ ·å¼ä¿¡æ¯çå¯¹è±¡ï¼è¯¥å¯¹è±¡ï¼å¿é¡»ï¼æä¸ä¸ªå±æ§ï¼
 * // start: å¼åå¼ä¸éï¼åå«ï¼;
 * // end: å¼åå¼ä¸éï¼ä¸åå«ï¼;
 * // style: æ°æ®å¯è§åå¾å½¢ç styleï¼è¿ä¸ªæ ·å¼å¯¹è±¡çå¯è®¾å±æ§ï¼ <SuperMap.Feature.ShapeParameters.Point.style> ã
 * // pointStyleByCodomain æ°ç»å½¢å¦ï¼
 * [
 *   {
 *     start:0,
 *     end:250,
 *     style:{
 *          fillColor:"#00CD00"
 *      }
 *  },
 *   {
 *     start:250,
 *     end:500,
 *     style:{
 *          fillColor:"#00EE00"
 *      }
 *  },
 *   {
 *     start:500,
 *     end:750,
 *     style:{
 *          fillColor:"#00FF7F"
 *      }
 *  },
 *   {
 *     start:750,
 *     end:1500,
 *     style:{
 *          fillColor:"#00FF00"
 *      }
 *  }
 * ]
 *
 * @extends SuperMap.Feature.Theme.Graph
 * @param {SuperMap.Feature.Vector} data - ç¨æ·æ°æ®ã
 * @param {SuperMap.Layer.Graph} layer - æ­¤ä¸é¢è¦ç´ æå¨å¾å±ã
 * @param {Array.<string>} fields - data ä¸­çåä¸æ­¤å¾è¡¨çæçå­æ®µåç§°ã
 * @param {SuperMap.Feature.Theme.Line.setting} setting - å¾è¡¨éç½®å¯¹è±¡ã
 * @param {SuperMap.LonLat} [lonlat] - ä¸é¢è¦ç´ å°çä½ç½®ãé»è®¤ä¸º data æä»£çå°çè¦ç´  Bounds ä¸­å¿ã
 */

var Line = /*#__PURE__*/function (_Graph) {
  overlay_Line_inherits(Line, _Graph);

  var _super = overlay_Line_createSuper(Line);

  function Line(data, layer, fields, setting, lonlat, options) {
    var _this;

    overlay_Line_classCallCheck(this, Line);

    _this = _super.call(this, data, layer, fields, setting, lonlat, options);
    _this.CLASS_NAME = "SuperMap.Feature.Theme.Line";
    return _this;
  }
  /**
   * @function SuperMap.Feature.Theme.Line.prototype.destroy
   * @override
   */


  overlay_Line_createClass(Line, [{
    key: "destroy",
    value: function destroy() {
      overlay_Line_get(overlay_Line_getPrototypeOf(Line.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.Feature.Theme.Line.prototype.assembleShapes
     * @description è£éå¾å½¢ï¼æ©å±æ¥å£ï¼ã
     */

  }, {
    key: "assembleShapes",
    value: function assembleShapes() {
      // å¾è¡¨éç½®å¯¹è±¡
      var sets = this.setting; // é»è®¤æ°æ®è§å¾æ¡

      if (!sets.dataViewBoxParameter) {
        if (typeof sets.useAxis === "undefined" || sets.useAxis) {
          sets.dataViewBoxParameter = [45, 15, 15, 15];
        } else {
          sets.dataViewBoxParameter = [5, 5, 5, 5];
        }
      } // éè¦æ­¥éª¤ï¼åå§ååæ°


      if (!this.initBaseParameter()) {
        return;
      }

      var dvb = this.dataViewBox; // å¼å

      var codomain = this.DVBCodomain; // éè¦æ­¥éª¤ï¼å®ä¹å¾è¡¨ Bar æ°æ®è§å¾æ¡ä¸­åä½å¼çå«ä¹

      this.DVBUnitValue = (codomain[1] - codomain[0]) / this.DVBHeight;
      var uv = this.DVBUnitValue; // æ°æ®å¼æ°ç»

      var fv = this.dataValues;

      if (fv.length < 1) {
        return;
      } // æ²¡ææ°æ®
      // è·å x è½´ä¸çå¾å½¢ä¿¡æ¯


      var xShapeInfo = this.calculateXShapeInfo();

      if (!xShapeInfo) {
        return;
      } // æçº¿æ¯ä¸ªèç¹ç x ä½ç½®


      var xsLoc = xShapeInfo.xPositions; // èæ¯æ¡ï¼é»è®¤å¯ç¨

      if (typeof sets.useBackground === "undefined" || sets.useBackground) {
        // å°èæ¯æ¡å¾å½¢æ·»å å°æ¨¡åç shapes æ°ç»ï¼æ³¨ææ·»å é¡ºåºï¼åæ·»å çå¾å½¢å¨åæ·»å çå¾å½¢ä¹ä¸ã
        this.shapes.push(ShapeFactory.Background(this.shapeFactory, this.chartBox, sets));
      } // æçº¿å¾å¿é¡»ä½¿ç¨åæ è½´


      this.shapes = this.shapes.concat(ShapeFactory.GraphAxis(this.shapeFactory, dvb, sets, xShapeInfo)); // var isDataEffective = true;

      var xPx; // æçº¿èç¹ x åæ 

      var yPx; // æçº¿èç¹ y åæ 

      var poiLists = []; // æçº¿èç¹æ°ç»

      var shapePois = []; // æçº¿èç¹å¾å½¢æ°ç»

      for (var i = 0, len = fv.length; i < len; i++) {
        // æ°æ®æº¢åºå¼åæ£æ¥
        if (fv[i] < codomain[0] || fv[i] > codomain[1]) {
          // isDataEffective = false;
          return null;
        }

        xPx = xsLoc[i];
        yPx = dvb[1] - (fv[i] - codomain[0]) / uv; // æçº¿èç¹åæ°å¯¹è±¡

        var poiSP = new Point_Point(xPx, yPx); // æçº¿èç¹ style

        poiSP.style = ShapeFactory.ShapeStyleTool({
          fillColor: "#ee9900"
        }, sets.pointStyle, sets.pointStyleByFields, sets.pointStyleByCodomain, i, fv[i]); // æçº¿èç¹ hover æ ·å¼

        poiSP.highlightStyle = ShapeFactory.ShapeStyleTool(null, sets.pointHoverStyle); // æçº¿èç¹ hover click

        if (typeof sets.pointHoverAble !== "undefined") {
          poiSP.hoverable = sets.pointHoverAble;
        }

        if (typeof sets.pointClickAble !== "undefined") {
          poiSP.clickable = sets.pointClickAble;
        } // å¾å½¢æºå¸¦çæ°æ®ä¿¡æ¯


        poiSP.refDataID = this.data.id;
        poiSP.dataInfo = {
          field: this.fields[i],
          value: fv[i]
        }; // åå»ºå¾å½¢å¹¶ææ­¤å¾å½¢æ·»å å°æçº¿èç¹å¾å½¢æ°ç»

        shapePois.push(this.shapeFactory.createShape(poiSP)); // æ·»å æçº¿èç¹å°æçº¿èç¹æ°ç»

        var poi = [xPx, yPx];
        poiLists.push(poi);
      } // æçº¿åæ°å¯¹è±¡


      var lineSP = new Line_Line(poiLists);
      lineSP.style = ShapeFactory.ShapeStyleTool({
        strokeColor: "#ee9900"
      }, sets.lineStyle); // ç¦æ­¢äºä»¶ååº

      lineSP.clickable = false;
      lineSP.hoverable = false;
      var shapeLine = this.shapeFactory.createShape(lineSP);
      this.shapes.push(shapeLine); // æ·»å èç¹å°å¾è¡¨å¾å½¢æ°ç»

      this.shapes = this.shapes.concat(shapePois); // // æ°æ®èå´æ£æµæªéè¿ï¼æ¸ç©ºå¾å½¢
      // if (isDataEffective === false) {
      //     this.shapes = [];
      // }
      // éè¦æ­¥éª¤ï¼å°å¾å½¢è½¬ä¸ºç±ç¸å¯¹åæ è¡¨ç¤ºçå¾å½¢ï¼ä»¥ä¾¿å¨å°å¾å¹³ç§»ç¼©æ¾è¿ç¨ä¸­å¿«ééç»å¾å½¢
      // ï¼ç»è®¡ä¸é¢å¾æ¨¡åä»ç»æä¸è¦æ±ä½¿ç¨ç¸å¯¹åæ ï¼assembleShapes() å½æ°å¿é¡»å¨å¾å½¢è£éå®æåè°ç¨ shapesConvertToRelativeCoordinate() å½æ°ï¼

      this.shapesConvertToRelativeCoordinate();
    }
    /**
     * @function SuperMap.Feature.Theme.Line.prototype.calculateXShapeInfo
     * @description è®¡ç® X è½´æ¹åä¸çå¾å½¢ä¿¡æ¯ï¼æ­¤ä¿¡æ¯æ¯ä¸ä¸ªå¯¹è±¡ï¼åå«ä¸¤ä¸ªå±æ§ï¼
     *              å±æ§ xPositions æ¯ä¸ä¸ªä¸ç»´æ°ç»ï¼è¯¥æ°ç»åç´ è¡¨ç¤ºå¾å½¢å¨ x è½´æ¹åä¸çåç´ åæ å¼ï¼
     *              å¦æå¾å½¢å¨ x æ¹åä¸æä¸å®å®½åº¦ï¼éå¸¸åå¾å½¢å¨ x æ¹åä¸çä¸­å¿ç¹ä¸ºå¾å½¢å¨ x æ¹åä¸çåæ å¼ã
     *              width è¡¨ç¤ºå¾å½¢çå®½åº¦ï¼ç¹å«æ³¨æï¼ç¹çå®½åº¦å§ç»ä¸º 0ï¼èä¸æ¯å¶ç´å¾ï¼ã
     *              æ¬å½æ°ä¸­å¾å½¢éç½®å¯¹è±¡ setting å¯è®¾å±æ§ï¼<br>
     *              xShapeBlank - {Array.<number>} æ°´å¹³æ¹åä¸çå¾å½¢ç©ºç½é´éåæ°ã
     *              é¿åº¦ä¸º 2 çæ°ç»ï¼ç¬¬ä¸åç´ è¡¨ç¤ºç¬¬æçº¿å·¦ç«¯ç¹ä¸æ°æ®è§å¾æ¡å·¦ç«¯çç©ºç½é´è·ï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºæçº¿å³ç«¯ç¹å³ç«¯ä¸æ°æ®è§å¾æ¡å³ç«¯ç«¯çç©ºç½é´è· ã
     * @returns {Object} å¦æè®¡ç®å¤±è´¥ï¼è¿å nullï¼å¦æè®¡ç®æåï¼è¿å X è½´æ¹åä¸çå¾å½¢ä¿¡æ¯ï¼æ­¤ä¿¡æ¯æ¯ä¸ä¸ªå¯¹è±¡ï¼åå«ä»¥ä¸ä¸¤ä¸ªå±æ§ï¼<br>
     *         xPositions - {Array.<number>} è¡¨ç¤ºå¾å½¢å¨ x è½´æ¹åä¸çåç´ åæ å¼ï¼å¦æå¾å½¢å¨ x æ¹åä¸æä¸å®å®½åº¦ï¼éå¸¸åå¾å½¢å¨ x æ¹åä¸çä¸­å¿ç¹ä¸ºå¾å½¢å¨ x æ¹åä¸çåæ å¼ã<br>
     *         width - {number} è¡¨ç¤ºå¾å½¢çå®½åº¦ï¼ç¹å«æ³¨æï¼ç¹çå®½åº¦å§ç»ä¸º 0ï¼èä¸æ¯å¶ç´å¾ï¼ã
     */

  }, {
    key: "calculateXShapeInfo",
    value: function calculateXShapeInfo() {
      var dvb = this.dataViewBox; // æ°æ®è§å¾æ¡

      var sets = this.setting; // å¾è¡¨éç½®å¯¹è±¡

      var fvc = this.dataValues.length; // æ°ç»å¼ä¸ªæ°

      if (fvc < 1) {
        return null;
      }

      var xBlank; // x è½´ç©ºç½é´éåæ°

      var xShapePositions = []; // x è½´ä¸å¾å½¢çä½ç½®

      var xShapeWidth = 0; // x è½´ä¸å¾å½¢å®½åº¦(èªéåº)

      var dvbWidth = this.DVBWidth; // æ°æ®è§å¾æ¡å®½åº¦

      var unitOffset = 0; // åä½åç§»é
      //  x è½´ç©ºç½é´éåæ°å¤ç

      if (sets.xShapeBlank && sets.xShapeBlank.length && sets.xShapeBlank.length == 2) {
        xBlank = sets.xShapeBlank;
        var xsLen = dvbWidth - (xBlank[0] + xBlank[1]);

        if (xsLen <= fvc) {
          return null;
        }

        unitOffset = xsLen / (fvc - 1);
      } else {
        // é»è®¤ä½¿ç¨ç­è·ç¦»ç©ºç½é´éï¼ç©ºç½é´éä¸ºå¾å½¢å®½åº¦
        unitOffset = dvbWidth / (fvc + 1);
        xBlank = [unitOffset, unitOffset, unitOffset];
      } // å¾å½¢ x è½´ä¸çä½ç½®è®¡ç®


      var xOffset = 0;

      for (var i = 0; i < fvc; i++) {
        if (i == 0) {
          xOffset = xBlank[0];
        } else {
          xOffset += unitOffset;
        }

        xShapePositions.push(dvb[0] + xOffset);
      }

      return {
        "xPositions": xShapePositions,
        "width": xShapeWidth
      };
    }
  }]);

  return Line;
}(Graph);
/**
 * @typedef {Object} SuperMap.Feature.Theme.Line.setting
 * @property {number} width - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å®½åº¦ã
 * @property {number} height - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼é«åº¦ã
 * @property {Array.<number>} codomain - å¾è¡¨åè®¸å±ç¤ºçæ°æ®å¼åï¼é¿åº¦ä¸º 2 çä¸ç»´æ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºå¼åä¸éï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºå¼åä¸éã
 * @property {number} [XOffset] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ X æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
 * @property {number} [YOffset] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ Y æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
 * @property {Array.<number>} [dataViewBoxParameter] - {Array.<number>} æ°æ®è§å¾æ¡ dataViewBox åæ°ï¼
 *                      å®æ¯æå¾è¡¨æ¡ chartBox ï¼ç±å¾è¡¨ä½ç½®ãå¾è¡¨å®½åº¦ãå¾è¡¨é«åº¦ææçå¾è¡¨èå´æ¡ï¼å¨å·¦ãä¸ï¼å³ï¼ä¸åä¸ªæ¹åä¸çååè·å¼ã
 *                      å½ä½¿ç¨åæ è½´æ¶ dataViewBoxParameter çé»è®¤å¼ä¸ºï¼[45, 15, 15, 15]ï¼ä¸ä½¿ç¨åæ è½´æ¶ dataViewBoxParameter çé»è®¤å¼ä¸ºï¼[5, 5, 5, 5]ã
 * @property {number} [decimalNumber] - æ°æ®å¼æ°ç» dataValues åç´ å¼å°æ°ä½æ°ï¼æ°æ®çå°æ°ä½å¤çåæ°ï¼åå¼èå´ï¼[0, 16]ãå¦æä¸è®¾ç½®æ­¤åæ°ï¼å¨åæ°æ®å¼æ¶ä¸å¯¹æ°æ®åå°æ°ä½å¤çã
 * @property {boolean} [useBackground] - æ¯å¦ä½¿ç¨å¾è¡¨èæ¯æ¡ã
 * @property {SuperMap.Feature.ShapeParameters.Rectangle.style} backgroundStyle - èæ¯æ ·å¼ã
 * @property {Array.<number>} [backgroundRadius=[0, 0, 0, 0]] - èæ¯æ¡ç©å½¢åè§åå¾ï¼å¯ä»¥ç¨æ°ç»åå«æå®åä¸ªè§çåè§åå¾ï¼è®¾ï¼å·¦ä¸ãå³ä¸ãå³ä¸ãå·¦ä¸è§çåå¾ä¾æ¬¡ä¸º r1ãr2ãr3ãr4 ,
 *                      å backgroundRadius ä¸º [r1ãr2ãr3ãr4 ]ã
 * @property {Array.<number>} xShapeBlank - æ°´å¹³æ¹åä¸çå¾å½¢ç©ºç½é´éåæ°ãé¿åº¦ä¸º 2 çæ°ç»ï¼ç¬¬ä¸åç´ è¡¨ç¤ºæçº¿å·¦ç«¯ç¹ä¸æ°æ®è§å¾æ¡å·¦ç«¯çç©ºç½é´è·ï¼
 *                       ç¬¬äºä¸ªåç´ è¡¨ç¤ºæçº¿å³ç«¯ç¹å³ç«¯ä¸æ°æ®è§å¾æ¡å³ç«¯ç«¯çç©ºç½é´è·ã
 * @property {SuperMap.Feature.ShapeParameters.Line.style} [axisStyle] - åæ è½´æ ·å¼ã
 * @property {boolean} [axisUseArrow=false] - åæ è½´æ¯å¦ä½¿ç¨ç®­å¤´ã
 * @property {number} [axisYTick=0] - y è½´å»åº¦æ°éã
 * @property {Array.<string>}  [axisYLabels] - y è½´ä¸çæ ç­¾ç»åå®¹ï¼æ ç­¾é¡ºåºæ²¿çæ°æ®è§å¾æ¡å·¦é¢æ¡è¾¹èªä¸èä¸ï¼ç­è·æå¸ãä¾å¦ï¼["1000", "750", "500", "250", "0"]ã
 * @property {SuperMap.Feature.ShapeParameters.Label.style} [axisYLabelsStyle] - y è½´ä¸çæ ç­¾ç»æ ·å¼ã
 * @property {Array.<number>} [axisYLabelsOffset=0] - y è½´ä¸çæ ç­¾ç»åç§»éãé¿åº¦ä¸º 2 çæ°ç»ï¼æ°ç»ç¬¬ä¸é¡¹è¡¨ç¤º y è½´æ ç­¾ç»æ¨ªåä¸çåç§»éï¼åå·¦ä¸ºæ­£ã
 *                       æ°ç»ç¬¬äºé¡¹è¡¨ç¤º y è½´æ ç­¾ç»çºµåä¸çåç§»éï¼åä¸ä¸ºæ­£ã
 * @property {Array.<string>} [axisXLabels] - x è½´ä¸çæ ç­¾ç»åå®¹ï¼æ ç­¾é¡ºåºæ²¿çæ°æ®è§å¾æ¡ä¸é¢æ¡è¾¹èªå·¦åå³æå¸ï¼ä¾å¦ï¼["92å¹´", "95å¹´", "99å¹´"]ã
 *                       æ ç­¾æå¸è§åï¼å½æ ç­¾æ°éä¸ xShapeInfo ä¸­çå±æ§ xShapeCenter æ°éç¸åï¼å³æ ç­¾ä¸ªæ°ä¸æ°æ®ä¸ªæ°ç¸ç­æ¶ï¼, æç§ xShapeCenter æä¾çä½ç½®æå¸æ ç­¾ï¼
 *                       å¦åæ²¿æ°æ®è§å¾æ¡ä¸é¢æ¡è¾¹ç­è·æå¸æ ç­¾ã
 * @property {SuperMap.Feature.ShapeParameters.Label.style} [axisXLabelsStyle] - x è½´ä¸çæ ç­¾ç»æ ·å¼ã
 * @property {Array.<number>} [axisXLabelsOffset=0] - x è½´ä¸çæ ç­¾ç»åç§»éãé¿åº¦ä¸º 2 çæ°ç»ï¼æ°ç»ç¬¬ä¸é¡¹è¡¨ç¤º x è½´æ ç­¾ç»æ¨ªåä¸çåç§»éï¼åå·¦ä¸ºæ­£;
 *                       æ°ç»ç¬¬äºé¡¹è¡¨ç¤º x è½´æ ç­¾ç»çºµåä¸çåç§»éï¼åä¸ä¸ºæ­£;
 * @property {boolean} [useXReferenceLine=true] - æ¯å¦ä½¿ç¨æ°´å¹³åèçº¿ï¼å¦æä¸º trueï¼å¨ axisYTick å¤§äº 0 æ¶ææï¼æ°´å¹³åèçº¿æ¯ y è½´å»åº¦å¨æ°æ®è§å¾æ¡éçå»¶ä¼¸ã
 * @property {SuperMap.Feature.ShapeParameters.Line.style} ]xReferenceLineStyle] - æ°´å¹³åèçº¿æ ·å¼ã
 * @property {SuperMap.Feature.ShapeParameters.Line.style} [lineStyle] - æçº¿å¾ä¸­æçº¿ styleã
 * @property {SuperMap.Feature.ShapeParameters.Point.style} [pointStyle] - æçº¿å¾ä¸­æçº¿èç¹åºç¡ styleï¼æ­¤åæ°æ§å¶æçº¿èç¹åºç¡æ ·å¼ï¼ä¼åçº§ä½äº pointStyleByFields å pointStyleByCodomainã
 * @property {SuperMap.Feature.ShapeParameters.Point.style} [pointStyleByFields] - æä¸é¢å­æ®µ themeFieldsï¼<SuperMap.Layer.Graph.themeFields>ï¼ä¸ºæçº¿èç¹èµ styleï¼æ­¤åæ°æå­æ®µæ§å¶æçº¿èç¹æ ·å¼ï¼
 *                       ä¼åçº§ä½äº pointStyleByCodomainï¼é«äº pointStyleãæ­¤æ°ç»ä¸­çåç´ æ¯æ ·å¼å¯¹è±¡ã
 *                       æ­¤åæ°ä¸­ç style ä¸ themeFields ä¸­çå­æ®µä¸ä¸å¯¹åº ãä¾å¦ï¼ themeFieldsï¼<SuperMap.Layer.Graph.themeFields|L.supermap.graphThemeLayer.themeFields|ol.source.Graph.themeFields|mapboxgl.supermap.GraphThemeLayer.themeFields>ï¼ ä¸º ["POP_1992", "POP_1995", "POP_1999"],
 *                       pointStyleByFields ä¸º[style1, style2, style3]ï¼åå¨å¾è¡¨ä¸­ï¼å­æ®µ POP_1992 å¯¹åºçæçº¿èç¹ä½¿ç¨ style1ï¼å­æ®µ POP_1995 å¯¹åºçæçº¿èç¹ä½¿ç¨ style2 ï¼å­æ®µ POP_1999 å¯¹åºçæçº¿èç¹ä½¿ç¨ style3ã
 * @property {Array.<Object>} pointStyleByCodomain - ææçº¿èç¹ä»£è¡¨çæ°æ®å¼æå¨å¼åèå´æ§å¶æçº¿èç¹æ ·å¼ï¼ä¼åçº§é«äº pointStyle å pointStyleByFieldsã
 * @property {Object} [pointHoverStyle=true] - æçº¿èç¹ hover ç¶ææ¶çæ ·å¼ï¼pointHoverAble ä¸º true æ¶ææã
 * @property {boolean} [pointHoverAble=true] - æ¯å¦åè®¸æçº¿èç¹ä½¿ç¨ hover ç¶æãåæ¶è®¾ç½® pointHoverAble å pointClickAble ä¸º falseï¼å¯ä»¥ç´æ¥å±è½æçº¿èç¹å¯¹ä¸é¢å¾å±äºä»¶çååºã
 * @property {boolean} [pointClickAble=true] - æ¯å¦åè®¸æçº¿èç¹è¢«ç¹å»ãåæ¶è®¾ç½® pointHoverAble å pointClickAble ä¸º falseï¼å¯ä»¥ç´æ¥å±è½æçº¿èç¹å¯¹ä¸é¢å¾å±äºä»¶çååºã
 
 */

SuperMap.Feature.Theme.Line = Line;
// CONCATENATED MODULE: ./src/common/overlay/Pie.js
function Pie_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Pie_typeof = function _typeof(obj) { return typeof obj; }; } else { Pie_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Pie_typeof(obj); }

function Pie_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Pie_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Pie_createClass(Constructor, protoProps, staticProps) { if (protoProps) Pie_defineProperties(Constructor.prototype, protoProps); if (staticProps) Pie_defineProperties(Constructor, staticProps); return Constructor; }

function Pie_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { Pie_get = Reflect.get; } else { Pie_get = function _get(target, property, receiver) { var base = Pie_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return Pie_get(target, property, receiver || target); }

function Pie_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = Pie_getPrototypeOf(object); if (object === null) break; } return object; }

function Pie_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Pie_setPrototypeOf(subClass, superClass); }

function Pie_setPrototypeOf(o, p) { Pie_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Pie_setPrototypeOf(o, p); }

function Pie_createSuper(Derived) { var hasNativeReflectConstruct = Pie_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Pie_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Pie_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Pie_possibleConstructorReturn(this, result); }; }

function Pie_possibleConstructorReturn(self, call) { if (call && (Pie_typeof(call) === "object" || typeof call === "function")) { return call; } return Pie_assertThisInitialized(self); }

function Pie_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Pie_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Pie_getPrototypeOf(o) { Pie_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Pie_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.Feature.Theme.Pie
 * @classdesc é¥¼å¾ã
 * @category Visualization Theme
 * @param {SuperMap.Feature.Vector} data - ç¨æ·æ°æ®ã
 * @param {SuperMap.Layer.Graph} layer - æ­¤ä¸é¢è¦ç´ æå¨å¾å±ã
 * @param {Array.<string>} fields - data ä¸­çåä¸æ­¤å¾è¡¨çæçå­æ®µåç§°ã
 * @param {SuperMap.Feature.Theme.Point.setting} setting - å¾è¡¨éç½®å¯¹è±¡ã
 * @param {SuperMap.LonLat} [lonlat] - ä¸é¢è¦ç´ å°çä½ç½®ãé»è®¤ä¸º data æä»£çå°çè¦ç´  Bounds ä¸­å¿ã
 * @extends SuperMap.Feature.Theme.Graph
 * @example
 * // sectorStyleByCodomain çæ¯ä¸ªåç´ æ¯ä¸ªåå«å¼åä¿¡æ¯åä¸å¼åå¯¹åºæ ·å¼ä¿¡æ¯çå¯¹è±¡ï¼è¯¥å¯¹è±¡ï¼å¿é¡»ï¼æä¸ä¸ªå±æ§ï¼
 * // start: å¼åå¼ä¸éï¼åå«ï¼;
 * // end: å¼åå¼ä¸éï¼ä¸åå«ï¼;
 * // style: æ°æ®å¯è§åå¾å½¢ç styleï¼è¿ä¸ªæ ·å¼å¯¹è±¡çå¯è®¾å±æ§ï¼ <SuperMap.Feature.ShapeParameters.Sector.style> ã
 * // sectorStyleByCodomain æ°ç»å½¢å¦ï¼
 * [
 *   {
 *     start:0,
 *     end:250,
 *     style:{
 *          fillColor:"#00CD00"
 *      }
 *  },
 *   {
 *     start:250,
 *     end:500,
 *     style:{
 *          fillColor:"#00EE00"
 *      }
 *  },
 *   {
 *     start:500,
 *     end:750,
 *     style:{
 *          fillColor:"#00FF7F"
 *      }
 *  },
 *   {
 *     start:750,
 *     end:1500,
 *     style:{
 *          fillColor:"#00FF00"
 *      }
 *  }
 * ]
 * @extends {SuperMap.Feature.Theme.Graph}
 */

var Pie = /*#__PURE__*/function (_Graph) {
  Pie_inherits(Pie, _Graph);

  var _super = Pie_createSuper(Pie);

  function Pie(data, layer, fields, setting, lonlat) {
    var _this;

    Pie_classCallCheck(this, Pie);

    _this = _super.call(this, data, layer, fields, setting, lonlat);
    _this.CLASS_NAME = "SuperMap.Feature.Theme.Pie";
    return _this;
  }
  /**
   * @function SuperMap.Feature.Theme.Pie.prototype.destroy
   * @description éæ¯æ­¤ä¸é¢è¦ç´ ãè°ç¨ destroy åæ­¤å¯¹è±¡æä»¥å±æ§ç½®ä¸º nullã
   */


  Pie_createClass(Pie, [{
    key: "destroy",
    value: function destroy() {
      Pie_get(Pie_getPrototypeOf(Pie.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.Feature.Theme.Pie.prototype.assembleShapes
     * @description è£éå¾å½¢ï¼æ©å±æ¥å£ï¼ã
     */

  }, {
    key: "assembleShapes",
    value: function assembleShapes() {
      // å¾è¡¨éç½®å¯¹è±¡
      var sets = this.setting; // ä¸ä¸ªé»è®¤ style ç»

      var defaultStyleGroup = [{
        fillColor: "#ff9277"
      }, {
        fillColor: "#dddd00"
      }, {
        fillColor: "#ffc877"
      }, {
        fillColor: "#bbe3ff"
      }, {
        fillColor: "#d5ffbb"
      }, {
        fillColor: "#bbbbff"
      }, {
        fillColor: "#ddb000"
      }, {
        fillColor: "#b0dd00"
      }, {
        fillColor: "#e2bbff"
      }, {
        fillColor: "#ffbbe3"
      }, {
        fillColor: "#ff7777"
      }, {
        fillColor: "#ff9900"
      }, {
        fillColor: "#83dd00"
      }, {
        fillColor: "#77e3ff"
      }, {
        fillColor: "#778fff"
      }, {
        fillColor: "#c877ff"
      }, {
        fillColor: "#ff77ab"
      }, {
        fillColor: "#ff6600"
      }, {
        fillColor: "#aa8800"
      }, {
        fillColor: "#77c7ff"
      }, {
        fillColor: "#ad77ff"
      }, {
        fillColor: "#ff77ff"
      }, {
        fillColor: "#dd0083"
      }, {
        fillColor: "#777700"
      }, {
        fillColor: "#00aa00"
      }, {
        fillColor: "#0088aa"
      }, {
        fillColor: "#8400dd"
      }, {
        fillColor: "#aa0088"
      }, {
        fillColor: "#dd0000"
      }, {
        fillColor: "#772e00"
      }]; // éè¦æ­¥éª¤ï¼åå§ååæ°

      if (!this.initBaseParameter()) {
        return;
      } // èæ¯æ¡ï¼é»è®¤ä¸å¯ç¨


      if (sets.useBackground) {
        this.shapes.push(ShapeFactory.Background(this.shapeFactory, this.chartBox, sets));
      } // æ°æ®å¼æ°ç»


      var fv = this.dataValues;

      if (fv.length < 1) {
        return;
      } // æ²¡ææ°æ®
      // å¼åèå´


      var codomain = this.DVBCodomain; // å¼åèå´æ£æµ

      for (var _i = 0; _i < fv.length; _i++) {
        if (fv[_i] < codomain[0] || fv[_i] > codomain[1]) {
          return;
        }
      } // å¼çç»å¯¹å¼æ»å


      var valueSum = 0;

      for (var _i2 = 0; _i2 < fv.length; _i2++) {
        valueSum += Math.abs(fv[_i2]);
      } // éè¦æ­¥éª¤ï¼å®ä¹å¾è¡¨ Pie æ°æ®è§å¾æ¡ä¸­åä½å¼çå«ä¹ï¼åä½å¼ï¼æ¯åº¦ä»£è¡¨çæ°å¼


      this.DVBUnitValue = 360 / valueSum;
      var uv = this.DVBUnitValue;
      var dvbCenter = this.DVBCenterPoint; // æ°æ®è§å¾æ¡ä¸­å¿ä½ä¸ºæå¿

      var startAngle = 0; // æå½¢èµ·å§è¾¹è§åº¦

      var endAngle = 0; // æå½¢ç»æ­¢è¾¹è§åº¦

      var startAngleTmp = startAngle; // æå½¢ä¸´æ¶èµ·å§è¾¹è§åº¦
      // æå½¢ï¼èªéåºï¼åå¾

      var r = this.DVBHeight < this.DVBWidth ? this.DVBHeight / 2 : this.DVBWidth / 2;

      for (var i = 0; i < fv.length; i++) {
        var fvi = Math.abs(fv[i]); //è®¡ç®ç»æ­¢è§

        if (i === 0) {
          endAngle = startAngle + fvi * uv;
        } else if (i === fvi.length - 1) {
          endAngle = startAngleTmp;
        } else {
          endAngle = startAngle + fvi * uv;
        } //ç«æ­£è¯¯å·®è®¡ç®


        if (endAngle - startAngle >= 360) {
          endAngle = 359.9999999;
        } // æå½¢åæ°å¯¹è±¡


        var sectorSP = new Sector(dvbCenter[0], dvbCenter[1], r, startAngle, endAngle); // æå½¢æ ·å¼

        if (typeof sets.sectorStyleByFields === "undefined") {
          // ä½¿ç¨é»è®¤ style ç»
          var colorIndex = i % defaultStyleGroup.length;
          sectorSP.style = ShapeFactory.ShapeStyleTool(null, sets.sectorStyle, defaultStyleGroup, null, colorIndex);
        } else {
          sectorSP.style = ShapeFactory.ShapeStyleTool(null, sets.sectorStyle, sets.sectorStyleByFields, sets.sectorStyleByCodomain, i, fv[i]);
        } // æå½¢ hover æ ·å¼


        sectorSP.highlightStyle = ShapeFactory.ShapeStyleTool(null, sets.sectorHoverStyle); // æå½¢ hover ä¸ click è®¾ç½®

        if (typeof sets.sectorHoverAble !== "undefined") {
          sectorSP.hoverable = sets.sectorHoverAble;
        }

        if (typeof sets.sectorClickAble !== "undefined") {
          sectorSP.clickable = sets.sectorClickAble;
        } // å¾å½¢æºå¸¦çæ°æ®ä¿¡æ¯


        sectorSP.refDataID = this.data.id;
        sectorSP.dataInfo = {
          field: this.fields[i],
          value: fv[i]
        }; // åå»ºæå½¢å¹¶ææ­¤æå½¢æ·»å å°å¾è¡¨å¾å½¢æ°ç»

        this.shapes.push(this.shapeFactory.createShape(sectorSP)); // æä¸ä¸æ¬¡çç»æè§åº¦ä½ä¸ºä¸ä¸æ¬¡çèµ·å§è§åº¦

        startAngle = endAngle;
      } // éè¦æ­¥éª¤ï¼å°å¾å½¢è½¬ä¸ºç±ç¸å¯¹åæ è¡¨ç¤ºçå¾å½¢ï¼ä»¥ä¾¿å¨å°å¾å¹³ç§»ç¼©æ¾è¿ç¨ä¸­å¿«ééç»å¾å½¢
      // ï¼ç»è®¡ä¸é¢å¾æ¨¡åä»ç»æä¸è¦æ±ä½¿ç¨ç¸å¯¹åæ ï¼assembleShapes() å½æ°å¿é¡»å¨å¾å½¢è£éå®æåè°ç¨ shapesConvertToRelativeCoordinate() å½æ°ï¼


      this.shapesConvertToRelativeCoordinate();
    }
  }]);

  return Pie;
}(Graph);
/**
 * @typedef {Object} SuperMap.Feature.Theme.Pie.setting
 * @property {number} width - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å®½åº¦ã
 * @property {number} height - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼é«åº¦ã
 * @property {Array.<number>} codomain - å¾è¡¨åè®¸å±ç¤ºçæ°æ®å¼åï¼é¿åº¦ä¸º 2 çä¸ç»´æ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºå¼åä¸éï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºå¼åä¸éã
 * @property {number} [XOffset] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ X æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
 * @property {number} [YOffset] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ Y æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
 * @property {Array.<number>} [dataViewBoxParameter=[0, 0, 0, 0]] - æ°æ®è§å¾æ¡ dataViewBox åæ°ï¼
 * å®æ¯æå¾è¡¨æ¡ chartBox ï¼ç±å¾è¡¨ä½ç½®ãå¾è¡¨å®½åº¦ãå¾è¡¨é«åº¦ææçå¾è¡¨èå´æ¡ï¼å¨å·¦ãä¸ï¼å³ï¼ä¸åä¸ªæ¹åä¸çååè·å¼ã
 * @property {Array.<number>} decimalNumber - æ°æ®å¼æ°ç» dataValues åç´ å¼å°æ°ä½æ°ï¼æ°æ®çå°æ°ä½å¤çåæ°ï¼åå¼èå´ï¼[0, 16]ãå¦æä¸è®¾ç½®æ­¤åæ°ï¼å¨åæ°æ®å¼æ¶ä¸å¯¹æ°æ®åå°æ°ä½å¤çã
 * @property {boolean} [useBackground=false] - æ¯å¦ä½¿ç¨å¾è¡¨èæ¯æ¡ã
 * @property {SuperMap.Feature.ShapeParameters.Rectangle.style} backgroundStyle - èæ¯æ ·å¼ã
 * @property {Array.<number>} [backgroundRadius=[0, 0, 0, 0]] - èæ¯æ¡ç©å½¢åè§åå¾ï¼å¯ä»¥ç¨æ°ç»åå«æå®åä¸ªè§çåè§åå¾ï¼è®¾ï¼å·¦ä¸ãå³ä¸ãå³ä¸ãå·¦ä¸è§çåå¾ä¾æ¬¡ä¸º r1ãr2ãr3ãr4 ï¼å backgroundRadius ä¸º [r1ãr2ãr3ãr4 ]ã
 * @property {SuperMap.Feature.ShapeParameters.Sector.style} sectorStyle - é¥¼å¾ä¸­æå½¢çåºç¡ styleï¼æ­¤åæ°æ§å¶é¥¼å¾æå½¢åºç¡æ ·å¼ï¼ä¼åçº§ä½äº sectorStyleByFields å sectorStyleByCodomainã
 * @property {Array.<SuperMap.Feature.ShapeParameters.Sector.style>} sectorStyleByFields - æä¸é¢å­æ®µ themeFieldsï¼<SuperMap.Layer.Graph.themeFields>ï¼ä¸ºé¥¼å¾æå½¢èµ styleï¼æ­¤åæ°æå­æ®µæ§å¶é¥¼å¾æå½¢æ ·å¼ï¼ä¼åçº§ä½äº sectorStyleByCodomainï¼é«äº sectorStyleãæ­¤åæ°ä¸­ç style ä¸ themeFields ä¸­çå­æ®µä¸ä¸å¯¹åº ãä¾å¦ï¼ themeFieldsï¼<SuperMap.Layer.Graph.themeFields>ï¼ ä¸º ["POP_1992", "POP_1995", "POP_1999"],
 * sectorStyleByFields ä¸º[style1, style2, style3]ï¼åå¨å¾è¡¨ä¸­ï¼å­æ®µ POP_1992 å¯¹åºçé¥¼å¾æå½¢ä½¿ç¨ style1ï¼å­æ®µ POP_1995 å¯¹åºçé¥¼å¾æå½¢ä½¿ç¨ style2 ï¼å­æ®µ POP_1999 å¯¹åºçé¥¼å¾æå½¢ä½¿ç¨ style3ã
 * @property {Array.<Object>} sectorStyleByCodomain - æé¥¼å¾æå½¢ä»£è¡¨çæ°æ®å¼æå¨å¼åèå´æ§å¶é¥¼å¾æå½¢æ ·å¼ï¼ä¼åçº§é«äº sectorStyle å sectorStyleByFieldsã
 * @property {Object} [sectorHoverStyle] é¥¼å¾æå½¢ hover ç¶ææ¶çæ ·å¼ï¼sectorHoverAble ä¸º true æ¶ææã
 * @property {boolean} [sectorHoverAble=true] æ¯å¦åè®¸é¥¼å¾æå½¢ä½¿ç¨ hover ç¶æãåæ¶è®¾ç½® sectorHoverAble å sectorClickAble ä¸º falseï¼å¯ä»¥ç´æ¥å±è½é¥¼å¾æå½¢å¯¹ä¸é¢å¾å±äºä»¶çååºã
 * @property {boolean} [sectorClickAble=true] æ¯å¦åè®¸é¥¼å¾æå½¢è¢«ç¹å»ãåæ¶è®¾ç½® sectorHoverAble å sectorClickAble ä¸º falseï¼å¯ä»¥ç´æ¥å±è½é¥¼å¾æå½¢å¯¹ä¸é¢å¾å±äºä»¶çååºã
 */

SuperMap.Feature.Theme.Pie = Pie;
// CONCATENATED MODULE: ./src/common/overlay/Point.js
function overlay_Point_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { overlay_Point_typeof = function _typeof(obj) { return typeof obj; }; } else { overlay_Point_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return overlay_Point_typeof(obj); }

function overlay_Point_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function overlay_Point_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function overlay_Point_createClass(Constructor, protoProps, staticProps) { if (protoProps) overlay_Point_defineProperties(Constructor.prototype, protoProps); if (staticProps) overlay_Point_defineProperties(Constructor, staticProps); return Constructor; }

function overlay_Point_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { overlay_Point_get = Reflect.get; } else { overlay_Point_get = function _get(target, property, receiver) { var base = overlay_Point_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return overlay_Point_get(target, property, receiver || target); }

function overlay_Point_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = overlay_Point_getPrototypeOf(object); if (object === null) break; } return object; }

function overlay_Point_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) overlay_Point_setPrototypeOf(subClass, superClass); }

function overlay_Point_setPrototypeOf(o, p) { overlay_Point_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return overlay_Point_setPrototypeOf(o, p); }

function overlay_Point_createSuper(Derived) { var hasNativeReflectConstruct = overlay_Point_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = overlay_Point_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = overlay_Point_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return overlay_Point_possibleConstructorReturn(this, result); }; }

function overlay_Point_possibleConstructorReturn(self, call) { if (call && (overlay_Point_typeof(call) === "object" || typeof call === "function")) { return call; } return overlay_Point_assertThisInitialized(self); }

function overlay_Point_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function overlay_Point_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function overlay_Point_getPrototypeOf(o) { overlay_Point_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return overlay_Point_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.Feature.Theme.Point
 * @classdesc ç¹ç¶å¾ã
 * @category Visualization Theme
 * @param {SuperMap.Feature.Vector} data - ç¨æ·æ°æ®ã
 * @param {SuperMap.Layer.Graph} layer - æ­¤ä¸é¢è¦ç´ æå¨å¾å±ã
 * @param {Array.<string>} fields - data ä¸­çåä¸æ­¤å¾è¡¨çæçå­æ®µåç§°ã
 * @param {SuperMap.Feature.Theme.Point.setting} setting - å¾è¡¨éç½®å¯¹è±¡ã
 * @param {SuperMap.LonLat} [lonlat] - ä¸é¢è¦ç´ å°çä½ç½®ãé»è®¤ä¸º data æä»£çå°çè¦ç´  Bounds ä¸­å¿ã
 * @example
 * // pointStyleByCodomain çæ¯ä¸ªåç´ æ¯ä¸ªåå«å¼åä¿¡æ¯åä¸å¼åå¯¹åºæ ·å¼ä¿¡æ¯çå¯¹è±¡ï¼è¯¥å¯¹è±¡ï¼å¿é¡»ï¼æä¸ä¸ªå±æ§ï¼
 * // start: å¼åå¼ä¸éï¼åå«ï¼;
 * // end: å¼åå¼ä¸éï¼ä¸åå«ï¼;
 * // style: æ°æ®å¯è§åå¾å½¢ç styleï¼è¿ä¸ªæ ·å¼å¯¹è±¡çå¯è®¾å±æ§ï¼ <SuperMap.Feature.ShapeParameters.Point.style> ã
 * // pointStyleByCodomain æ°ç»å½¢å¦ï¼
 * [
 *   {
 *     start:0,
 *     end:250,
 *     style:{
 *          fillColor:"#00CD00"
 *      }
 *  },
 *   {
 *     start:250,
 *     end:500,
 *     style:{
 *          fillColor:"#00EE00"
 *      }
 *  },
 *   {
 *     start:500,
 *     end:750,
 *     style:{
 *          fillColor:"#00FF7F"
 *      }
 *  },
 *   {
 *     start:750,
 *     end:1500,
 *     style:{
 *          fillColor:"#00FF00"
 *      }
 *  }
 * ]
 *@extends {SuperMap.Feature.Theme.Graph}

 */

var overlay_Point_Point = /*#__PURE__*/function (_Graph) {
  overlay_Point_inherits(Point, _Graph);

  var _super = overlay_Point_createSuper(Point);

  function Point(data, layer, fields, setting, lonlat, options) {
    var _this;

    overlay_Point_classCallCheck(this, Point);

    _this = _super.call(this, data, layer, fields, setting, lonlat, options);
    _this.CLASS_NAME = "SuperMap.Feature.Theme.Point";
    return _this;
  }
  /**
   * @function SuperMap.Feature.Theme.Point.prototype.destroy
   * @description éæ¯æ­¤ä¸é¢è¦ç´ ãè°ç¨ destroy åæ­¤å¯¹è±¡æä»¥å±æ§ç½®ä¸º nullã
   */


  overlay_Point_createClass(Point, [{
    key: "destroy",
    value: function destroy() {
      overlay_Point_get(overlay_Point_getPrototypeOf(Point.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.Feature.Theme.prototype.Point.assembleShapes
     * @description è£éå¾å½¢ï¼æ©å±æ¥å£ï¼ã
     */

  }, {
    key: "assembleShapes",
    value: function assembleShapes() {
      // å¾è¡¨éç½®å¯¹è±¡
      var sets = this.setting; // é»è®¤æ°æ®è§å¾æ¡

      if (!sets.dataViewBoxParameter) {
        if (typeof sets.useAxis === "undefined" || sets.useAxis) {
          sets.dataViewBoxParameter = [45, 15, 15, 15];
        } else {
          sets.dataViewBoxParameter = [5, 5, 5, 5];
        }
      } // éè¦æ­¥éª¤ï¼åå§ååæ°


      if (!this.initBaseParameter()) {
        return;
      }

      var dvb = this.dataViewBox; // å¼å

      var codomain = this.DVBCodomain; // éè¦æ­¥éª¤ï¼å®ä¹å¾è¡¨ Bar æ°æ®è§å¾æ¡ä¸­åä½å¼çå«ä¹

      this.DVBUnitValue = (codomain[1] - codomain[0]) / this.DVBHeight;
      var uv = this.DVBUnitValue;
      var fv = this.dataValues; // è·å x è½´ä¸çå¾å½¢ä¿¡æ¯

      var xShapeInfo = this.calculateXShapeInfo();

      if (!xShapeInfo) {
        return;
      } // æçº¿æ¯ä¸ªèç¹ç x ä½ç½®


      var xsLoc = xShapeInfo.xPositions; // èæ¯æ¡ï¼é»è®¤å¯ç¨

      if (typeof sets.useBackground === "undefined" || sets.useBackground) {
        // å°èæ¯æ¡å¾å½¢æ·»å å°æ¨¡åç shapes æ°ç»ï¼æ³¨ææ·»å é¡ºåºï¼åæ·»å çå¾å½¢å¨åæ·»å çå¾å½¢ä¹ä¸ã
        this.shapes.push(ShapeFactory.Background(this.shapeFactory, this.chartBox, sets));
      } // ç¹ç¶å¾å¿é¡»ä½¿ç¨åæ è½´


      this.shapes = this.shapes.concat(ShapeFactory.GraphAxis(this.shapeFactory, dvb, sets, xShapeInfo));
      var xPx; // å¾å½¢ç¹ x åæ 

      var yPx; // å¾å½¢ç¹ y åæ 

      for (var i = 0, len = fv.length; i < len; i++) {
        // æ°æ®æº¢åºå¼åæ£æ¥
        if (fv[i] < codomain[0] || fv[i] > codomain[1]) {
          //isDataEffective = false;
          return null;
        }

        xPx = xsLoc[i];
        yPx = dvb[1] - (fv[i] - codomain[0]) / uv; // å¾å½¢ç¹åæ°å¯¹è±¡

        var poiSP = new Point_Point(xPx, yPx); // å¾å½¢ç¹ style

        poiSP.style = ShapeFactory.ShapeStyleTool({
          fillColor: "#ee9900"
        }, sets.pointStyle, sets.pointStyleByFields, sets.pointStyleByCodomain, i, fv[i]); // å¾å½¢ç¹ hover æ ·å¼

        poiSP.highlightStyle = ShapeFactory.ShapeStyleTool(null, sets.pointHoverStyle); // å¾å½¢ç¹ hover click

        if (typeof sets.pointHoverAble !== "undefined") {
          poiSP.hoverable = sets.pointHoverAble;
        }

        if (typeof sets.pointClickAble !== "undefined") {
          poiSP.clickable = sets.pointClickAble;
        } // å¾å½¢æºå¸¦çæ°æ®ä¿¡æ¯


        poiSP.refDataID = this.data.id;
        poiSP.dataInfo = {
          field: this.fields[i],
          value: fv[i]
        }; // åå»ºå¾å½¢ç¹å¹¶ææ­¤å¾å½¢æ·»å å°å¾è¡¨å¾å½¢æ°ç»

        this.shapes.push(this.shapeFactory.createShape(poiSP));
      } // æ°æ®èå´æ£æµæªéè¿ï¼æ¸ç©ºå¾å½¢
      // if (isDataEffective === false) {
      //     this.shapes = [];
      // }
      // éè¦æ­¥éª¤ï¼å°å¾å½¢è½¬ä¸ºç±ç¸å¯¹åæ è¡¨ç¤ºçå¾å½¢ï¼ä»¥ä¾¿å¨å°å¾å¹³ç§»ç¼©æ¾è¿ç¨ä¸­å¿«ééç»å¾å½¢
      // ï¼ç»è®¡ä¸é¢å¾æ¨¡åä»ç»æä¸è¦æ±ä½¿ç¨ç¸å¯¹åæ ï¼assembleShapes() å½æ°å¿é¡»å¨å¾å½¢è£éå®æåè°ç¨ shapesConvertToRelativeCoordinate() å½æ°ï¼


      this.shapesConvertToRelativeCoordinate();
    }
    /**
     * @function SuperMap.Feature.Theme.Point.prototype.calculateXShapeInfo
     * @description è®¡ç® X è½´æ¹åä¸çå¾å½¢ä¿¡æ¯ï¼æ­¤ä¿¡æ¯æ¯ä¸ä¸ªå¯¹è±¡ï¼åå«ä¸¤ä¸ªå±æ§ï¼
     *              å±æ§ xPositions æ¯ä¸ä¸ªä¸ç»´æ°ç»ï¼è¯¥æ°ç»åç´ è¡¨ç¤ºå¾å½¢å¨ x è½´æ¹åä¸çåç´ åæ å¼ï¼
     *              å¦æå¾å½¢å¨ x æ¹åä¸æä¸å®å®½åº¦ï¼éå¸¸åå¾å½¢å¨ x æ¹åä¸çä¸­å¿ç¹ä¸ºå¾å½¢å¨ x æ¹åä¸çåæ å¼ã
     *              width è¡¨ç¤ºå¾å½¢çå®½åº¦ï¼ç¹å«æ³¨æï¼ç¹çå®½åº¦å§ç»ä¸º 0ï¼èä¸æ¯å¶ç´å¾ï¼ã
     *              æ¬å½æ°ä¸­å¾å½¢éç½®å¯¹è±¡ setting å¯è®¾å±æ§ï¼<br>
     *              xShapeBlank - {Array.<number>} æ°´å¹³æ¹åä¸çå¾å½¢ç©ºç½é´éåæ°ã
     *              é¿åº¦ä¸º 2 çæ°ç»ï¼ç¬¬ä¸åç´ è¡¨ç¤ºç¬¬æçº¿å·¦ç«¯ç¹ä¸æ°æ®è§å¾æ¡å·¦ç«¯çç©ºç½é´è·ï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºæçº¿å³ç«¯ç¹å³ç«¯ä¸æ°æ®è§å¾æ¡å³ç«¯ç«¯çç©ºç½é´è· ã
     * @returns {Object} å¦æè®¡ç®å¤±è´¥ï¼è¿å nullï¼å¦æè®¡ç®æåï¼è¿å X è½´æ¹åä¸çå¾å½¢ä¿¡æ¯ï¼æ­¤ä¿¡æ¯æ¯ä¸ä¸ªå¯¹è±¡ï¼åå«ä»¥ä¸ä¸¤ä¸ªå±æ§ï¼<br>
     *         xPositions - {Array.<number>} è¡¨ç¤ºå¾å½¢å¨ x è½´æ¹åä¸çåç´ åæ å¼ï¼å¦æå¾å½¢å¨ x æ¹åä¸æä¸å®å®½åº¦ï¼éå¸¸åå¾å½¢å¨ x æ¹åä¸çä¸­å¿ç¹ä¸ºå¾å½¢å¨ x æ¹åä¸çåæ å¼ã
     *         width - {number}è¡¨ç¤ºå¾å½¢çå®½åº¦ï¼ç¹å«æ³¨æï¼ç¹çå®½åº¦å§ç»ä¸º 0ï¼èä¸æ¯å¶ç´å¾ï¼ã
     */

  }, {
    key: "calculateXShapeInfo",
    value: function calculateXShapeInfo() {
      var dvb = this.dataViewBox; // æ°æ®è§å¾æ¡

      var sets = this.setting; // å¾è¡¨éç½®å¯¹è±¡

      var fvc = this.dataValues.length; // æ°ç»å¼ä¸ªæ°

      if (fvc < 1) {
        return null;
      }

      var xBlank; // x è½´ç©ºç½é´éåæ°

      var xShapePositions = []; // x è½´ä¸å¾å½¢çä½ç½®

      var xShapeWidth = 0; // x è½´ä¸å¾å½¢å®½åº¦(èªéåº)

      var dvbWidth = this.DVBWidth; // æ°æ®è§å¾æ¡å®½åº¦

      var unitOffset = 0; // åä½åç§»é
      //  x è½´ç©ºç½é´éåæ°å¤ç

      if (sets.xShapeBlank && sets.xShapeBlank.length && sets.xShapeBlank.length == 2) {
        xBlank = sets.xShapeBlank;
        var xsLen = dvbWidth - (xBlank[0] + xBlank[1]);

        if (xsLen <= fvc) {
          return null;
        }

        unitOffset = xsLen / (fvc - 1);
      } else {
        // é»è®¤ä½¿ç¨ç­è·ç¦»ç©ºç½é´éï¼ç©ºç½é´éä¸ºå¾å½¢å®½åº¦
        unitOffset = dvbWidth / (fvc + 1);
        xBlank = [unitOffset, unitOffset, unitOffset];
      } // å¾å½¢ x è½´ä¸çä½ç½®è®¡ç®


      var xOffset = 0;

      for (var i = 0; i < fvc; i++) {
        if (i == 0) {
          xOffset = xBlank[0];
        } else {
          xOffset += unitOffset;
        }

        xShapePositions.push(dvb[0] + xOffset);
      }

      return {
        "xPositions": xShapePositions,
        "width": xShapeWidth
      };
    }
  }]);

  return Point;
}(Graph);
/**
 * @typedef {Object} SuperMap.Feature.Theme.Point.setting
 * @property {number} width - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å®½åº¦ã
 * @property {number} height - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼é«åº¦ã
 * @property {Array.<number>} codomain - å¾è¡¨åè®¸å±ç¤ºçæ°æ®å¼åï¼é¿åº¦ä¸º 2 çä¸ç»´æ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºå¼åä¸éï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºå¼åä¸éã
 * @property {number} [XOffset] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ X æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
 * @property {number} [YOffset] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ Y æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
 * @property {Array.<number>} [dataViewBoxParameter] - æ°æ®è§å¾æ¡ dataViewBox åæ°ï¼
 *                     å®æ¯æå¾è¡¨æ¡ chartBox ï¼ç±å¾è¡¨ä½ç½®ãå¾è¡¨å®½åº¦ãå¾è¡¨é«åº¦ææçå¾è¡¨èå´æ¡ï¼å¨å·¦ãä¸ï¼å³ï¼ä¸åä¸ªæ¹åä¸çååè·å¼ã
 *                     å½ä½¿ç¨åæ è½´æ¶ dataViewBoxParameter çé»è®¤å¼ä¸ºï¼[45, 15, 15, 15]ï¼ä¸ä½¿ç¨åæ è½´æ¶ dataViewBoxParameter çé»è®¤å¼ä¸ºï¼[5, 5, 5, 5]ã
 * @property {number} [decimalNumber] - æ°æ®å¼æ°ç» dataValues åç´ å¼å°æ°ä½æ°ï¼æ°æ®çå°æ°ä½å¤çåæ°ï¼åå¼èå´ï¼[0, 16]ãå¦æä¸è®¾ç½®æ­¤åæ°ï¼å¨åæ°æ®å¼æ¶ä¸å¯¹æ°æ®åå°æ°ä½å¤çã
 * @property {boolean} [useBackground] - æ¯å¦ä½¿ç¨å¾è¡¨èæ¯æ¡ã
 * @property {SuperMap.Feature.ShapeParameters.Rectangle.style} backgroundStyle - èæ¯æ ·å¼ã
 * @property {Array.<number>} [backgroundRadius=[0, 0, 0, 0]] - èæ¯æ¡ç©å½¢åè§åå¾ï¼å¯ä»¥ç¨æ°ç»åå«æå®åä¸ªè§çåè§åå¾ï¼è®¾ï¼å·¦ä¸ãå³ä¸ãå³ä¸ãå·¦ä¸è§çåå¾ä¾æ¬¡ä¸º r1ãr2ãr3ãr4 ,
 *                 å backgroundRadius ä¸º [r1ãr2ãr3ãr4 ]ã
 * @property {Array.<number>} xShapeBlank - æ°´å¹³æ¹åä¸çå¾å½¢ç©ºç½é´éåæ°ã
 *                 é¿åº¦ä¸º 2 çæ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºç¬¬ä¸ä¸ªï¼æ²¿ x è½´æ¹åï¼å¾å½¢ç¹ä¸æ°æ®è§å¾æ¡å·¦ç«¯çç©ºç½é´è·ï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºæåä¸ä¸ªï¼æ²¿ x è½´æ¹åï¼å¾å½¢ç¹ä¸æ°æ®è§å¾æ¡å³ç«¯ç«¯çç©ºç½é´è· ã
 * @property {Object} axisStyle - åæ è½´æ ·å¼ã
 * @property {boolean} [axisUseArrow=false] - åæ è½´æ¯å¦ä½¿ç¨ç®­å¤´ã
 * @property {number} [axisYTick=0] - y è½´å»åº¦æ°éã
 * @property {Array.<string>} [axisYLabels] - y è½´ä¸çæ ç­¾ç»åå®¹ï¼æ ç­¾é¡ºåºæ²¿çæ°æ®è§å¾æ¡å·¦é¢æ¡è¾¹èªä¸èä¸ï¼ç­è·æå¸ãä¾å¦ï¼["1000", "750", "500", "250", "0"]ã
 * @property {SuperMap.Feature.ShapeParameters.Label.style} [axisYLabelsStyle] - y è½´ä¸çæ ç­¾ç»æ ·å¼ã
 * @property {Array.<number>} [axisYLabelsOffset=0] - y è½´ä¸çæ ç­¾ç»åç§»éãé¿åº¦ä¸º 2 çæ°ç»ï¼æ°ç»ç¬¬ä¸é¡¹è¡¨ç¤º y è½´æ ç­¾ç»æ¨ªåä¸çåç§»éï¼åå·¦ä¸ºæ­£ï¼
 *                 æ°ç»ç¬¬äºé¡¹è¡¨ç¤º y è½´æ ç­¾ç»çºµåä¸çåç§»éï¼åä¸ä¸ºæ­£ã
 * @property {Array.<string>} [axisXLabels] - x è½´ä¸çæ ç­¾ç»åå®¹ï¼æ ç­¾é¡ºåºæ²¿çæ°æ®è§å¾æ¡ä¸é¢æ¡è¾¹èªå·¦åå³æå¸ï¼ä¾å¦ï¼["92å¹´", "95å¹´", "99å¹´"]ã
 *                 æ ç­¾æå¸è§åï¼å½æ ç­¾æ°éä¸ xShapeInfo ä¸­çå±æ§ xShapeCenter æ°éç¸åï¼å³æ ç­¾ä¸ªæ°ä¸æ°æ®ä¸ªæ°ç¸ç­æ¶ï¼, æç§ xShapeCenter æä¾çä½ç½®æå¸æ ç­¾ï¼
 *                 å¦åæ²¿æ°æ®è§å¾æ¡ä¸é¢æ¡è¾¹ç­è·æå¸æ ç­¾ã
 * @property {SuperMap.Feature.ShapeParameters.Label.style} [axisXLabelsStyle] - x è½´ä¸çæ ç­¾ç»æ ·å¼ã
 * @property {Array.<number>} [axisXLabelsOffset=0] - x è½´ä¸çæ ç­¾ç»åç§»éãé¿åº¦ä¸º 2 çæ°ç»ï¼æ°ç»ç¬¬ä¸é¡¹è¡¨ç¤º x è½´æ ç­¾ç»æ¨ªåä¸çåç§»éï¼åå·¦ä¸ºæ­£ï¼
 *                 æ°ç»ç¬¬äºé¡¹è¡¨ç¤º x è½´æ ç­¾ç»çºµåä¸çåç§»éï¼åä¸ä¸ºæ­£ã
 * @property {boolean} [useXReferenceLine=true] - æ¯å¦ä½¿ç¨æ°´å¹³åèçº¿ï¼å¦æä¸º trueï¼å¨ axisYTick å¤§äº 0 æ¶ææï¼æ°´å¹³åèçº¿æ¯ y è½´å»åº¦å¨æ°æ®è§å¾æ¡éçå»¶ä¼¸ã
 * @property {SuperMap.Feature.ShapeParameters.Line.style} [xReferenceLineStyle] - æ°´å¹³åèçº¿æ ·å¼ã
 * @property {SuperMap.Feature.ShapeParameters.Point.style} [pointStyle] - ç¹ç¶å¾ä¸­å¾å½¢ç¹åºç¡ styleï¼æ­¤åæ°æ§å¶å¾å½¢ç¹åºç¡æ ·å¼ï¼ä¼åçº§ä½äº pointStyleByFields å pointStyleByCodomainã
 * @property {Array.<SuperMap.Feature.ShapeParameters.Point.style>} [pointStyleByFields] - æä¸é¢å­æ®µ themeFieldsï¼<SuperMap.Layer.Graph.themeFields>ï¼ä¸ºå¾å½¢ç¹èµ styleï¼æ­¤åæ°æå­æ®µæ§å¶å¾å½¢ç¹æ ·å¼ï¼
 *               ä¼åçº§ä½äº pointStyleByCodomainï¼é«äº pointStyleãæ­¤æ°ç»ä¸­çåç´ æ¯æ ·å¼å¯¹è±¡ã
 *               æ­¤åæ°ä¸­ç style ä¸ themeFields ä¸­çå­æ®µä¸ä¸å¯¹åº ãä¾å¦ï¼ themeFieldsï¼<SuperMap.Layer.Graph.themeFields>ï¼ ä¸º ["POP_1992", "POP_1995", "POP_1999"],
 * pointStyleByFields ä¸º[style1, style2, style3]ï¼åå¨å¾è¡¨ä¸­ï¼å­æ®µ POP_1992 å¯¹åºçå¾å½¢ç¹ä½¿ç¨ style1ï¼å­æ®µ POP_1995 å¯¹åºçå¾å½¢ç¹ä½¿ç¨ style2 ï¼å­æ®µ POP_1999 å¯¹åºçå¾å½¢ç¹ä½¿ç¨ style3ã
 * @property {Array.<Object>} pointStyleByCodomain - æå¾å½¢ç¹ä»£è¡¨çæ°æ®å¼æå¨å¼åèå´æ§å¶å¾å½¢ç¹æ ·å¼ï¼ä¼åçº§é«äº pointStyle å pointStyleByFieldsã
 * @property {Object} [pointHoverStyle] - å¾å½¢ç¹ hover ç¶ææ¶çæ ·å¼ï¼pointHoverAble ä¸º true æ¶ææã
 * @property {Object} [pointHoverAble=true] - æ¯å¦åè®¸å¾å½¢ç¹ä½¿ç¨ hover ç¶æãåæ¶è®¾ç½® pointHoverAble å pointClickAble ä¸º falseï¼å¯ä»¥ç´æ¥å±è½å¾å½¢ç¹å¯¹ä¸é¢å¾å±äºä»¶çååºã
 * @property {Object} [pointClickAble=true] - æ¯å¦åè®¸å¾å½¢ç¹è¢«ç¹å»ãåæ¶è®¾ç½® pointHoverAble å pointClickAble ä¸º falseï¼å¯ä»¥ç´æ¥å±è½å¾å½¢ç¹å¯¹ä¸é¢å¾å±äºä»¶çååºã
 */

SuperMap.Feature.Theme.Point = overlay_Point_Point;
// CONCATENATED MODULE: ./src/common/overlay/Ring.js
function Ring_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Ring_typeof = function _typeof(obj) { return typeof obj; }; } else { Ring_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Ring_typeof(obj); }

function Ring_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Ring_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Ring_createClass(Constructor, protoProps, staticProps) { if (protoProps) Ring_defineProperties(Constructor.prototype, protoProps); if (staticProps) Ring_defineProperties(Constructor, staticProps); return Constructor; }

function Ring_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { Ring_get = Reflect.get; } else { Ring_get = function _get(target, property, receiver) { var base = Ring_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return Ring_get(target, property, receiver || target); }

function Ring_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = Ring_getPrototypeOf(object); if (object === null) break; } return object; }

function Ring_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Ring_setPrototypeOf(subClass, superClass); }

function Ring_setPrototypeOf(o, p) { Ring_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Ring_setPrototypeOf(o, p); }

function Ring_createSuper(Derived) { var hasNativeReflectConstruct = Ring_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Ring_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Ring_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Ring_possibleConstructorReturn(this, result); }; }

function Ring_possibleConstructorReturn(self, call) { if (call && (Ring_typeof(call) === "object" || typeof call === "function")) { return call; } return Ring_assertThisInitialized(self); }

function Ring_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Ring_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Ring_getPrototypeOf(o) { Ring_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Ring_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.Feature.Theme.Ring
 * @classdesc ç¯ç¶å¾ã
 * @category Visualization Theme
 * @description åºäºè·¯ç±å¯¹è±¡è®¡ç®æå®ç¹ M å¼æä½çåæ°ç±»ãéè¿è¯¥ç±»æä¾åæ°ä¿¡æ¯ã
 
 * @param {SuperMap.Feature.Vector} data - ç¨æ·æ°æ®ã
 * @param {SuperMap.Layer.Graph} layer - æ­¤ä¸é¢è¦ç´ æå¨å¾å±ã
 * @param {Array.<string>} fields - data ä¸­çåä¸æ­¤å¾è¡¨çæçå­æ®µåç§°ã
 * @param {SuperMap.Feature.Theme.Ring.setting} setting - å¾è¡¨éç½®å¯¹è±¡ã
 * @param {SuperMap.LonLat} [lonlat] - ä¸é¢è¦ç´ å°çä½ç½®ãé»è®¤ä¸º data æä»£çå°çè¦ç´  Bounds ä¸­å¿ã
 * @example
 * // sectorStyleByCodomain çæ¯ä¸ªåç´ æ¯ä¸ªåå«å¼åä¿¡æ¯åä¸å¼åå¯¹åºæ ·å¼ä¿¡æ¯çå¯¹è±¡ï¼è¯¥å¯¹è±¡ï¼å¿é¡»ï¼æä¸ä¸ªå±æ§ï¼
 * // start: å¼åå¼ä¸éï¼åå«ï¼;
 * // end: å¼åå¼ä¸éï¼ä¸åå«ï¼;
 * // style: æ°æ®å¯è§åå¾å½¢ç styleï¼è¿ä¸ªæ ·å¼å¯¹è±¡çå¯è®¾å±æ§ï¼ <SuperMap.Feature.ShapeParameters.Sector.style> ã
 * // sectorStyleByCodomain æ°ç»å½¢å¦ï¼
 * [
 *   {
 *     start:0,
 *     end:250,
 *     style:{
 *          fillColor:"#00CD00"
 *      }
 *  },
 *   {
 *     start:250,
 *     end:500,
 *     style:{
 *          fillColor:"#00EE00"
 *      }
 *  },
 *   {
 *     start:500,
 *     end:750,
 *     style:{
 *          fillColor:"#00FF7F"
 *      }
 *  },
 *   {
 *     start:750,
 *     end:1500,
 *     style:{
 *          fillColor:"#00FF00"
 *      }
 *  }
 * ]
 * @param {Object} [sectorHoverStyle=true] - ç¯ç¶å¾æå½¢ hover ç¶ææ¶çæ ·å¼ï¼sectorHoverAble ä¸º true æ¶ææã
 * @param {boolean} [sectorHoverAble=true] - æ¯å¦åè®¸ç¯ç¶å¾æå½¢ä½¿ç¨ hover ç¶æãåæ¶è®¾ç½® sectorHoverAble å sectorClickAble ä¸º falseï¼å¯ä»¥ç´æ¥å±è½ç¯ç¶å¾æå½¢å¯¹ä¸é¢å¾å±äºä»¶çååºã
 * @param {boolean} [sectorClickAble=true] - æ¯å¦åè®¸ç¯ç¶å¾æå½¢è¢«ç¹å»ãåæ¶è®¾ç½® sectorHoverAble å sectorClickAble ä¸º falseï¼å¯ä»¥ç´æ¥å±è½ç¯ç¶å¾æå½¢å¯¹ä¸é¢å¾å±äºä»¶çååºã
 *
 * @extends {SuperMap.Feature.Theme.Graph}
 */

var Ring = /*#__PURE__*/function (_Graph) {
  Ring_inherits(Ring, _Graph);

  var _super = Ring_createSuper(Ring);

  function Ring(data, layer, fields, setting, lonlat) {
    var _this;

    Ring_classCallCheck(this, Ring);

    _this = _super.call(this, data, layer, fields, setting, lonlat);
    _this.CLASS_NAME = "SuperMap.Feature.Theme.Ring";
    return _this;
  }
  /**
   * @function SuperMap.Feature.Theme.Ring.prototype.destroy
   * @description éæ¯æ­¤ä¸é¢è¦ç´ ãè°ç¨ destroy åæ­¤å¯¹è±¡æä»¥å±æ§ç½®ä¸º nullã
   */


  Ring_createClass(Ring, [{
    key: "destroy",
    value: function destroy() {
      Ring_get(Ring_getPrototypeOf(Ring.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.Feature.Theme.Ring.prototype.assembleShapes
     * @description è£éå¾å½¢ï¼æ©å±æ¥å£ï¼ã
     */

  }, {
    key: "assembleShapes",
    value: function assembleShapes() {
      // éè¦æ­¥éª¤ï¼åå§ååæ°
      if (!this.initBaseParameter()) {
        return;
      } // ä¸ä¸ªé»è®¤ style ç»


      var defaultStyleGroup = [{
        fillColor: "#ff9277"
      }, {
        fillColor: "#dddd00"
      }, {
        fillColor: "#ffc877"
      }, {
        fillColor: "#bbe3ff"
      }, {
        fillColor: "#d5ffbb"
      }, {
        fillColor: "#bbbbff"
      }, {
        fillColor: "#ddb000"
      }, {
        fillColor: "#b0dd00"
      }, {
        fillColor: "#e2bbff"
      }, {
        fillColor: "#ffbbe3"
      }, {
        fillColor: "#ff7777"
      }, {
        fillColor: "#ff9900"
      }, {
        fillColor: "#83dd00"
      }, {
        fillColor: "#77e3ff"
      }, {
        fillColor: "#778fff"
      }, {
        fillColor: "#c877ff"
      }, {
        fillColor: "#ff77ab"
      }, {
        fillColor: "#ff6600"
      }, {
        fillColor: "#aa8800"
      }, {
        fillColor: "#77c7ff"
      }, {
        fillColor: "#ad77ff"
      }, {
        fillColor: "#ff77ff"
      }, {
        fillColor: "#dd0083"
      }, {
        fillColor: "#777700"
      }, {
        fillColor: "#00aa00"
      }, {
        fillColor: "#0088aa"
      }, {
        fillColor: "#8400dd"
      }, {
        fillColor: "#aa0088"
      }, {
        fillColor: "#dd0000"
      }, {
        fillColor: "#772e00"
      }]; // å¾è¡¨éç½®å¯¹è±¡

      var sets = this.setting; // èæ¯æ¡ï¼é»è®¤ä¸å¯ç¨

      if (sets.useBackground) {
        this.shapes.push(ShapeFactory.Background(this.shapeFactory, this.chartBox, sets));
      } // æ°æ®å¼æ°ç»


      var fv = this.dataValues;

      if (fv.length < 1) {
        return;
      } // æ²¡ææ°æ®
      // å¼åèå´


      var codomain = this.DVBCodomain; // å¼åèå´æ£æµ

      for (var _i = 0; _i < fv.length; _i++) {
        if (fv[_i] < codomain[0] || fv[_i] > codomain[1]) {
          return;
        }
      } // å¼çç»å¯¹å¼æ»å


      var valueSum = 0;

      for (var _i2 = 0; _i2 < fv.length; _i2++) {
        valueSum += Math.abs(fv[_i2]);
      } // éè¦æ­¥éª¤ï¼å®ä¹å¾è¡¨ Ring æ°æ®è§å¾æ¡ä¸­åä½å¼çå«ä¹ï¼åä½å¼ï¼æ¯åº¦ä»£è¡¨çæ°å¼


      this.DVBUnitValue = 360 / valueSum;
      var uv = this.DVBUnitValue;
      var dvbCenter = this.DVBCenterPoint; // æ°æ®è§å¾æ¡ä¸­å¿ä½ä¸ºæå¿

      var startAngle = 0; // æå½¢èµ·å§è¾¹è§åº¦

      var endAngle = 0; // æå½¢ç»æ­¢è¾¹è§åº¦

      var startAngleTmp = startAngle; // æå½¢ä¸´æ¶èµ·å§è¾¹è§åº¦
      // æå½¢å¤ç¯ï¼èªéåºï¼åå¾

      var r = this.DVBHeight < this.DVBWidth ? this.DVBHeight / 2 : this.DVBWidth / 2; // æå½¢åç¯ï¼èªéåºï¼åå¾

      var isInRange = sets.innerRingRadius >= 0 && sets.innerRingRadius < r;
      var r0 = typeof sets.innerRingRadius !== "undefined" && !isNaN(sets.innerRingRadius) && isInRange ? sets.innerRingRadius : 0;

      for (var i = 0; i < fv.length; i++) {
        var fvi = Math.abs(fv[i]); // è®¡ç®ç»æè§åº¦

        if (i === 0) {
          endAngle = startAngle + fvi * uv;
        } else if (i === fvi.length - 1) {
          endAngle = startAngleTmp;
        } else {
          endAngle = startAngle + fvi * uv;
        } // æå½¢åæ°å¯¹è±¡


        var sectorSP = new Sector(dvbCenter[0], dvbCenter[1], r, startAngle, endAngle, r0); // æå½¢æ ·å¼

        if (typeof sets.sectorStyleByFields === "undefined") {
          // ä½¿ç¨é»è®¤ style ç»
          var colorIndex = i % defaultStyleGroup.length;
          sectorSP.style = ShapeFactory.ShapeStyleTool(null, sets.sectorStyle, defaultStyleGroup, null, colorIndex);
        } else {
          sectorSP.style = ShapeFactory.ShapeStyleTool(null, sets.sectorStyle, sets.sectorStyleByFields, sets.sectorStyleByCodomain, i, fv[i]);
        } // æå½¢ hover æ ·å¼


        sectorSP.highlightStyle = ShapeFactory.ShapeStyleTool(null, sets.sectorHoverStyle); // æå½¢ hover ä¸ click è®¾ç½®

        if (typeof sets.sectorHoverAble !== "undefined") {
          sectorSP.hoverable = sets.sectorHoverAble;
        }

        if (typeof sets.sectorClickAble !== "undefined") {
          sectorSP.clickable = sets.sectorClickAble;
        } // å¾å½¢æºå¸¦çæ°æ®ä¿¡æ¯


        sectorSP.refDataID = this.data.id;
        sectorSP.dataInfo = {
          field: this.fields[i],
          value: fv[i]
        }; // åå»ºæå½¢å¹¶ææ­¤æå½¢æ·»å å°å¾è¡¨å¾å½¢æ°ç»

        this.shapes.push(this.shapeFactory.createShape(sectorSP)); // æä¸ä¸æ¬¡çç»æè§åº¦ä½ä¸ºä¸ä¸æ¬¡çèµ·å§è§åº¦

        startAngle = endAngle;
      } // éè¦æ­¥éª¤ï¼å°å¾å½¢è½¬ä¸ºç±ç¸å¯¹åæ è¡¨ç¤ºçå¾å½¢ï¼ä»¥ä¾¿å¨å°å¾å¹³ç§»ç¼©æ¾è¿ç¨ä¸­å¿«ééç»å¾å½¢
      // ï¼ç»è®¡ä¸é¢å¾æ¨¡åä»ç»æä¸è¦æ±ä½¿ç¨ç¸å¯¹åæ ï¼assembleShapes() å½æ°å¿é¡»å¨å¾å½¢è£éå®æåè°ç¨ shapesConvertToRelativeCoordinate() å½æ°ï¼


      this.shapesConvertToRelativeCoordinate();
    }
  }]);

  return Ring;
}(Graph);
/**
 * @typedef {Object} SuperMap.Feature.Theme.Ring.setting
 * @property {number} width - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å®½åº¦ã
 * @property {number} height - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼é«åº¦ã
 * @property {Array.<number>} codomain - å¾è¡¨åè®¸å±ç¤ºçæ°æ®å¼åï¼é¿åº¦ä¸º 2 çä¸ç»´æ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºå¼åä¸éï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºå¼åä¸éã
 * @property {number} [XOffset] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ X æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
 * @property {number} [YOffset] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ Y æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
 * @property {Array.<number>} [dataViewBoxParameter=[0, 0, 0, 0]] - æ°æ®è§å¾æ¡ dataViewBox åæ°ï¼å®æ¯æå¾è¡¨æ¡ chartBox ï¼ç±å¾è¡¨ä½ç½®ãå¾è¡¨å®½åº¦ãå¾è¡¨é«åº¦ææçå¾è¡¨èå´æ¡ï¼å¨å·¦ãä¸ï¼å³ï¼ä¸åä¸ªæ¹åä¸çååè·å¼ã
 * @property {number} [decimalNumber] - æ°æ®å¼æ°ç» dataValues åç´ å¼å°æ°ä½æ°ï¼æ°æ®çå°æ°ä½å¤çåæ°ï¼åå¼èå´ï¼[0, 16]ãå¦æä¸è®¾ç½®æ­¤åæ°ï¼å¨åæ°æ®å¼æ¶ä¸å¯¹æ°æ®åå°æ°ä½å¤çã
 * @property {boolean} [useBackground=false] - æ¯å¦ä½¿ç¨å¾è¡¨èæ¯æ¡ã
 * @property {SuperMap.Feature.ShapeParameters.Rectangle.style} [backgroundStyle] - èæ¯æ ·å¼ï¼æ­¤æ ·å¼å¯¹è±¡å¯¹è±¡å¯è®¾å±æ§ã
 * @property {Array.<number>} [backgroundRadius=[0, 0, 0, 0]] - èæ¯æ¡ç©å½¢åè§åå¾ï¼å¯ä»¥ç¨æ°ç»åå«æå®åä¸ªè§çåè§åå¾ï¼è®¾ï¼å·¦ä¸ãå³ä¸ãå³ä¸ãå·¦ä¸è§çåå¾ä¾æ¬¡ä¸º r1ãr2ãr3ãr4 ,å backgroundRadius ä¸º [r1ãr2ãr3ãr4 ]ã
 * @property {number} [innerRingRadius=0] - ç¯ç¶å¾åç¯åå¾ï¼åå¼èå´å¤§äº 0ï¼å°äºå¤ç¯åå¾ï¼å¤ç¯åå¾ï¼æ°æ®è§å¾æ¡é¿åå®½ä¸­è¾å°å¼çäºåä¹ä¸ï¼ã
 * @property {SuperMap.Feature.ShapeParameters.Sector.style} [sectorStyle] - ç¯ç¶å¾ä¸­æå½¢çåºç¡ styleï¼æ­¤åæ°æ§å¶ç¯ç¶å¾æå½¢åºç¡æ ·å¼ï¼ä¼åçº§ä½äº sectorStyleByFields å sectorStyleByCodomainã
 * @property {Array.<SuperMap.Feature.ShapeParameters.Sector.style>} [sectorStyleByFields] - æä¸é¢å­æ®µ themeFieldsï¼{@link SuperMap.Layer.Graph.themeFields}|{@link L.supermap.graphThemeLayer.themeFields}|{@link ol.source.Graph.themeFields}|{@link mapboxgl.supermap.GraphThemeLayer.themeFields}ï¼ä¸ºç¯ç¶å¾æå½¢èµ styleï¼æ­¤åæ°æå­æ®µæ§å¶ç¯ç¶å¾æå½¢æ ·å¼ï¼ä¼åçº§ä½äº sectorStyleByCodomainï¼é«äº sectorStyleãæ­¤æ°ç»ä¸­çåç´ æ¯æ ·å¼å¯¹è±¡ãæ­¤åæ°ä¸­ç style ä¸ themeFields ä¸­çå­æ®µä¸ä¸å¯¹åº ãä¾å¦ï¼ themeFieldsï¼<SuperMap.Layer.Graph.themeFields>ï¼ ä¸º ["POP_1992", "POP_1995", "POP_1999"],sectorStyleByFields ä¸º[style1, style2, style3]ï¼åå¨å¾è¡¨ä¸­ï¼å­æ®µ POP_1992 å¯¹åºçç¯ç¶å¾æå½¢ä½¿ç¨ style1ï¼å­æ®µ POP_1995 å¯¹åºçç¯ç¶å¾æå½¢ä½¿ç¨ style2 ï¼å­æ®µ POP_1999 å¯¹åºçç¯ç¶å¾æå½¢ä½¿ç¨ style3ã
 * @property {Array.<SuperMap.Feature.ShapeParameters.Sector.style>} [sectorStyleByCodomain] - æç¯ç¶å¾æå½¢ä»£è¡¨çæ°æ®å¼æå¨å¼åèå´æ§å¶ç¯ç¶å¾æå½¢æ ·å¼ï¼ä¼åçº§é«äº sectorStyle å sectorStyleByFieldsã
 
 */

SuperMap.Feature.Theme.Ring = Ring;
// CONCATENATED MODULE: ./src/common/overlay/ThemeVector.js
function ThemeVector_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { ThemeVector_typeof = function _typeof(obj) { return typeof obj; }; } else { ThemeVector_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return ThemeVector_typeof(obj); }

function ThemeVector_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeVector_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeVector_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeVector_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeVector_defineProperties(Constructor, staticProps); return Constructor; }

function ThemeVector_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { ThemeVector_get = Reflect.get; } else { ThemeVector_get = function _get(target, property, receiver) { var base = ThemeVector_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return ThemeVector_get(target, property, receiver || target); }

function ThemeVector_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = ThemeVector_getPrototypeOf(object); if (object === null) break; } return object; }

function ThemeVector_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) ThemeVector_setPrototypeOf(subClass, superClass); }

function ThemeVector_setPrototypeOf(o, p) { ThemeVector_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return ThemeVector_setPrototypeOf(o, p); }

function ThemeVector_createSuper(Derived) { var hasNativeReflectConstruct = ThemeVector_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = ThemeVector_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = ThemeVector_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return ThemeVector_possibleConstructorReturn(this, result); }; }

function ThemeVector_possibleConstructorReturn(self, call) { if (call && (ThemeVector_typeof(call) === "object" || typeof call === "function")) { return call; } return ThemeVector_assertThisInitialized(self); }

function ThemeVector_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function ThemeVector_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ThemeVector_getPrototypeOf(o) { ThemeVector_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return ThemeVector_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





















/**
 * @class SuperMap.Feature.Theme.Vector
 * @classdesc ç¢éä¸é¢è¦ç´ ç±»ã
 * @category Visualization Theme
 * @extends SuperMap.Feature.Theme
 * @param {SuperMap.Feature.Vector} data - ç¨æ·æ°æ®ï¼çç±»åä¸ºç¢éæ°æ® featureã
 * @param {SuperMap.Layer} layer - æ­¤ä¸é¢è¦ç´ æå¨å¾å±ã
 * @param {Object} style - æ ·å¼ã
 * @param {Object} options - åå»ºä¸é¢è¦ç´ æ¶çå¯éåæ°ã
 * @param {number} [options.nodesClipPixel=2] - èç¹æ½ç¨åç´ è·ç¦», åä½ï¼åç´ ã
 * @param {boolean} [options.isHoverAble=true] - å¾å½¢æ¯å¦å¯ hoverã
 * @param {boolean} [options.isMultiHover=true] - æ¯å¦ä½¿ç¨å¤å¾å½¢é«äº®ï¼isHoverAble ä¸º true æ¶çæã
 * @param {boolean} [options.isClickAble=true] - å¾å½¢æ¯å¦å¯ç¹å»ã
 * @param {Object} [options.highlightStyle] - é«äº®æ ·å¼ã
 */

var ThemeVector = /*#__PURE__*/function (_Theme) {
  ThemeVector_inherits(ThemeVector, _Theme);

  var _super = ThemeVector_createSuper(ThemeVector);

  function ThemeVector(data, layer, style, options, shapeOptions) {
    var _this;

    ThemeVector_classCallCheck(this, ThemeVector);

    _this = _super.call(this, data, layer); //æ°æ®ç geometry å±æ§å¿é¡»å­å¨ä¸ç±»åæ¯ SuperMap.Geometry æå¶å­ç±»çç±»å

    if (!data.geometry) {
      return ThemeVector_possibleConstructorReturn(_this);
    }

    if (!(data.geometry instanceof Geometry)) {
      return ThemeVector_possibleConstructorReturn(_this);
    }
    /**
     * @member {SuperMap.Bounds} [SuperMap.Feature.Theme.Vector.prototype.dataBounds]
     * @description ç¨æ·æ°æ®çï¼feature.geometryï¼å°çèå´ã
     */


    _this.dataBounds = data.geometry.getBounds();
    /**
     * @member {number} [SuperMap.Feature.Theme.Vector.prototype.nodesClipPixel=2]
     * @description èç¹æ½ç¨åç´ è·ç¦»ã
     */

    _this.nodesClipPixel = 2;
    /**
     * @member {boolean} [SuperMap.Feature.Theme.Vector.prototype.isHoverAble=true]
     * @description å¾å½¢æ¯å¦å¯ hoverã
     */

    _this.isHoverAble = true;
    /**
     * @member {boolean} [SuperMap.Feature.Theme.Vector.prototype.isMultiHover=true]
     * @description æ¯å¦ä½¿ç¨å¤å¾å½¢é«äº®ï¼isHoverAble ä¸º true æ¶çæã
     */

    _this.isMultiHover = true;
    /**
     * @member {boolean} [SuperMap.Feature.Theme.Vector.prototype.isClickAble=true]
     * @description å¾å½¢æ¯å¦å¯ç¹å»ã
     */

    _this.isClickAble = true;
    /**
     * @member {Object} [SuperMap.Feature.Theme.Vector.prototype.highlightStyle]
     * @description é«äº®æ ·å¼ã
     */

    _this.highlightStyle = null;
    /**
     * @member {Object} [SuperMap.Feature.Theme.Vector.prototype.shapeOptions]
     * @description æ·»å å°æ¸²æå¨åä¿®æ¹ shape çä¸äºå±æ§ï¼éç¹æ®æåµéå¸¸ä¸åè®¸è¿ä¹åã
     */

    _this.shapeOptions = {};
    /**
     * @member {Object} [SuperMap.Feature.Theme.Vector.prototype.style]
     * @description å¯è§åå¾å½¢ç styleãå¨å­ç±»ä¸­è§å®å¶å¯¹è±¡ç»æåé»è®¤å±æ§å¼ã
     */

    _this.style = style || {};
    _this.CLASS_NAME = "SuperMap.Feature.Theme.Vector";
    _this.style = style ? style : {};

    if (options) {
      Util.copyAttributesWithClip(ThemeVector_assertThisInitialized(_this), options, ["shapeOptions", "dataBounds"]);
    }

    if (shapeOptions) {
      Util.copyAttributesWithClip(_this.shapeOptions, shapeOptions);
    } //è®¾ç½®åºç¡åæ° dataBoundsãlonlatãlocation


    var geometry = data.geometry;
    _this.lonlat = _this.dataBounds.getCenterLonLat();
    _this.location = _this.getLocalXY(_this.lonlat); //å°å°çè¦ç´ è½¬ä¸ºä¸é¢è¦ç´ 

    if (geometry instanceof LinearRing) {
      _this.lineToTF(geometry);
    } else if (geometry instanceof LineString) {
      _this.lineToTF(geometry);
    } else if (geometry instanceof Curve) {//ç¬ç«å ä½ä½
    } else if (geometry instanceof MultiPoint) {
      _this.multiPointToTF(geometry);
    } else if (geometry instanceof MultiLineString) {
      _this.multiLineStringToTF(geometry);
    } else if (geometry instanceof MultiPolygon) {
      _this.multiPolygonToTF(geometry);
    } else if (geometry instanceof Polygon) {
      _this.polygonToTF(geometry);
    } else if (geometry instanceof Collection) {//ç¬ç«å ä½ä½
    } else if (geometry instanceof Point) {
      _this.pointToTF(geometry);
    } else if (geometry instanceof Rectangle) {
      _this.rectangleToTF(geometry);
    } else if (geometry instanceof GeoText) {
      _this.geoTextToTF(geometry);
    }

    return _this;
  }
  /**
   * @function SuperMap.Feature.Theme.Vector.prototype.destroy
   * @override
   */


  ThemeVector_createClass(ThemeVector, [{
    key: "destroy",
    value: function destroy() {
      this.style = null;
      this.dataBounds = null;
      this.nodesClipPixel = null;
      this.isHoverAble = null;
      this.isMultiHover = null;
      this.isClickAble = null;
      this.highlightStyle = null;
      this.shapeOptions = null;

      ThemeVector_get(ThemeVector_getPrototypeOf(ThemeVector.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.Feature.Theme.Vector.prototype.lineToTF
     * @description è½¬æ¢çº¿åçº¿ç¯è¦ç´ ã
     * @param {SuperMap.Geometry} geometry - ç¨æ·æ°æ®å ä½å°çä¿¡æ¯ï¼è¿éå¿é¡»æ¯ LineString æ LineRingã
     */

  }, {
    key: "lineToTF",
    value: function lineToTF(geometry) {
      var components = geometry.components; //èç¹åç´ åæ 

      var localLX = []; //åèä½ç½®ï¼åèä¸­å¿ä¸º

      var refLocal = [];
      var location = this.location;
      var pointList = []; //èç¹æ½ç¨è·ç¦»

      var nCPx = this.nodesClipPixel;

      for (var i = 0; i < components.length; i++) {
        var components_i = components[i];
        refLocal = [];
        localLX = this.getLocalXY(components_i);
        refLocal[0] = localLX[0] - location[0];
        refLocal[1] = localLX[1] - location[1]; //æ½ç¨ - 2 px

        if (pointList.length > 0) {
          var lastLocalXY = pointList[pointList.length - 1];

          if (Math.abs(lastLocalXY[0] - refLocal[0]) <= nCPx && Math.abs(lastLocalXY[1] - refLocal[1]) <= nCPx) {
            continue;
          }
        } //ä½¿ç¨åèç¹


        pointList.push(refLocal);
      }

      if (pointList.length < 2) {
        return null;
      } //èµ style


      var style = new Object();
      style = Util.copyAttributesWithClip(style, this.style, ['pointList']);
      style.pointList = pointList; //åå»ºå¾å½¢

      var shape = new SmicBrokenLine({
        style: style,
        clickable: this.isClickAble,
        hoverable: this.isHoverAble
      }); //è®¾ç½®é«äº®æ ·å¼

      if (this.highlightStyle) {
        shape.highlightStyle = this.highlightStyle;
      } //è®¾ç½®åèä¸­å¿ï¼æå®å¾å½¢ä½ç½®


      shape.refOriginalPosition = this.location; //å¨å­æ°æ® id å±æ§ï¼ç¨äºäºä»¶

      shape.refDataID = this.data.id; //å¨å­æ°æ® id å±æ§ï¼ç¨äºäºä»¶-å¤å¾å½¢åæ¶é«äº®

      shape.isHoverByRefDataID = this.isMultiHover; //æ·»å å°æ¸²æå¨åä¿®æ¹ shape çä¸äºå±æ§ï¼éç¹æ®æåµéå¸¸ä¸åè®¸è¿ä¹å

      if (this.shapeOptions) {
        Util.copyAttributesWithClip(shape, this.shapeOptions);
      }

      this.shapes.push(shape);
    }
    /**
     * @function SuperMap.Feature.Theme.Vector.prototype.multiPointToTF
     * @description è½¬å¤ç¹è¦ç´ ã
     * @param {SuperMap.Geometry} geometry - ç¨æ·æ°æ®å ä½å°çä¿¡æ¯ï¼è¿éå¿é¡»æ¯ MultiPointã
     */

  }, {
    key: "multiPointToTF",
    value: function multiPointToTF(geometry) {
      /*   //-- ä¸æ½ç¨
       var components = geometry.components;
         for(var i = 0; i < components.length; i++){
       var components_i = components[i];
       this.pointToTF(components_i);
       }
       */
      var components = geometry.components; //èç¹åç´ åæ 

      var localLX = []; //åèä½ç½®ï¼åèä¸­å¿ä¸º

      var refLocal = [];
      var location = this.location;
      var pointList = []; //èç¹æ½ç¨è·ç¦»

      var nCPx = this.nodesClipPixel;

      for (var i = 0; i < components.length; i++) {
        var components_i = components[i];
        refLocal = [];
        localLX = this.getLocalXY(components_i);
        refLocal[0] = localLX[0] - location[0];
        refLocal[1] = localLX[1] - location[1]; //æ½ç¨

        if (pointList.length > 0) {
          var lastLocalXY = pointList[pointList.length - 1];

          if (Math.abs(lastLocalXY[0] - refLocal[0]) <= nCPx && Math.abs(lastLocalXY[1] - refLocal[1]) <= nCPx) {
            continue;
          }
        } //ä½¿ç¨åèç¹


        pointList.push(refLocal); //èµ style

        var style = new Object();
        style.r = 6; //é²æ­¢æ¼è®¾æ­¤åæ°ï¼é»è®¤ 6 åç´ 

        style = Util.copyAttributesWithClip(style, this.style);
        style.x = refLocal[0];
        style.y = refLocal[1]; //åå»ºå¾å½¢

        var shape = new SmicPoint({
          style: style,
          clickable: this.isClickAble,
          hoverable: this.isHoverAble
        }); //è®¾ç½®é«äº®æ ·å¼

        if (this.highlightStyle) {
          shape.highlightStyle = this.highlightStyle;
        } //è®¾ç½®åèä¸­å¿ï¼æå®å¾å½¢ä½ç½®


        shape.refOriginalPosition = location; //å¨å­æ°æ® id å±æ§ï¼ç¨äºäºä»¶

        shape.refDataID = this.data.id; //å¨å­æ°æ® id å±æ§ï¼ç¨äºäºä»¶-å¤å¾å½¢åæ¶é«äº®

        shape.isHoverByRefDataID = this.isMultiHover; //ä¿®æ¹ä¸äº shape å¯éå±æ§ï¼éå¸¸ä¸éè¦è¿ä¹å

        if (this.shapeOptions) {
          Util.copyAttributesWithClip(shape, this.shapeOptions);
        }

        this.shapes.push(shape);
      }
    }
    /**
     * @function SuperMap.Feature.Theme.Vector.prototype.multiLineStringToTF
     * @description è½¬æ¢å¤çº¿è¦ç´ ã
     * @param {SuperMap.Geometry} geometry - ç¨æ·æ°æ®å ä½å°çä¿¡æ¯ï¼è¿éå¿é¡»æ¯ MultiLineStringã
     */

  }, {
    key: "multiLineStringToTF",
    value: function multiLineStringToTF(geometry) {
      var components = geometry.components;

      for (var i = 0; i < components.length; i++) {
        var components_i = components[i];
        this.lineToTF(components_i);
      }
    }
    /**
     * @function SuperMap.Feature.Theme.Vector.prototype.multiPolygonToTF
     * @description è½¬æ¢å¤é¢è¦ç´ ã
     * @param {SuperMap.Geometry} geometry - ç¨æ·æ°æ®å ä½å°çä¿¡æ¯ï¼è¿éå¿é¡»æ¯ MultiPolygonã
     */

  }, {
    key: "multiPolygonToTF",
    value: function multiPolygonToTF(geometry) {
      var components = geometry.components;

      for (var i = 0; i < components.length; i++) {
        var components_i = components[i];
        this.polygonToTF(components_i);
      }
    }
    /**
     * @function SuperMap.Feature.Theme.Vector.prototype.pointToTF
     * @description è½¬æ¢ç¹è¦ç´ ã
     * @param {SuperMap.Geometry} geometry - ç¨æ·æ°æ®å ä½å°çä¿¡æ¯ï¼è¿éå¿é¡»æ¯ Pointã
     */

  }, {
    key: "pointToTF",
    value: function pointToTF(geometry) {
      //åèä½ç½®ï¼åèä¸­å¿ä¸º
      var location = this.location; //geometry åç´ åæ 

      var localLX = this.getLocalXY(geometry); //èµ style

      var style = new Object();
      style.r = 6; //é²æ­¢æ¼è®¾æ­¤åæ°ï¼é»è®¤ 6 åç´ 

      style = Util.copyAttributesWithClip(style, this.style);
      style.x = localLX[0] - location[0];
      style.y = localLX[1] - location[1]; //åå»ºå¾å½¢

      var shape = new SmicPoint({
        style: style,
        clickable: this.isClickAble,
        hoverable: this.isHoverAble
      }); //è®¾ç½®é«äº®æ ·å¼

      if (this.highlightStyle) {
        shape.highlightStyle = this.highlightStyle;
      } //è®¾ç½®åèä¸­å¿ï¼æå®å¾å½¢ä½ç½®


      shape.refOriginalPosition = location; //å¨å­æ°æ® id å±æ§ï¼ç¨äºäºä»¶

      shape.refDataID = this.data.id; //å¨å­æ°æ® id å±æ§ï¼ç¨äºäºä»¶-å¤å¾å½¢åæ¶é«äº®

      shape.isHoverByRefDataID = this.isMultiHover; //ä¿®æ¹ä¸äº shape å¯éå±æ§ï¼éå¸¸ä¸éè¦è¿ä¹å

      if (this.shapeOptions) {
        Util.copyAttributesWithClip(shape, this.shapeOptions);
      }

      this.shapes.push(shape);
    }
    /**
     * @function SuperMap.Feature.Theme.Vector.prototype.polygonToThemeFeature
     * @description è½¬æ¢é¢è¦ç´ ã
     * @param {SuperMap.Geometry} geometry - ç¨æ·æ°æ®å ä½å°çä¿¡æ¯ï¼è¿éå¿é¡»æ¯ Polygonã
     */

  }, {
    key: "polygonToTF",
    value: function polygonToTF(geometry) {
      var components = geometry.components; //èç¹åç´ åæ 

      var localLX = []; //åèä½ç½®ï¼åèä¸­å¿ä¸º

      var refLocal = [];
      var location = this.location;
      var pointList = []; //å²æ´

      var holePolygonPointList = [];
      var holePolygonPointLists = []; //èç¹æ½ç¨è·ç¦»

      var nCPx = this.nodesClipPixel;

      for (var i = 0; i < components.length; i++) {
        var components_i = components[i].components;

        if (i === 0) {
          // ç¬¬ä¸ä¸ª component æ­£å¸¸ç»å¶
          pointList = [];

          for (var j = 0; j < components_i.length; j++) {
            refLocal = [];
            localLX = this.getLocalXY(components_i[j]);
            refLocal[0] = localLX[0] - location[0];
            refLocal[1] = localLX[1] - location[1]; //æ½ç¨ - 2 px

            if (pointList.length > 0) {
              var lastLocalXY = pointList[pointList.length - 1];

              if (Math.abs(lastLocalXY[0] - refLocal[0]) <= nCPx && Math.abs(lastLocalXY[1] - refLocal[1]) <= nCPx) {
                continue;
              }
            } //ä½¿ç¨åèç¹


            pointList.push(refLocal);
          }
        } else {
          // å¶å® component ä½ä¸ºå²æ´
          holePolygonPointList = [];

          for (var k = 0; k < components_i.length; k++) {
            refLocal = [];
            localLX = this.getLocalXY(components_i[k]);
            refLocal[0] = localLX[0] - location[0];
            refLocal[1] = localLX[1] - location[1]; //æ½ç¨ - 2 px

            if (holePolygonPointList.length > 0) {
              var lastXY = holePolygonPointList[holePolygonPointList.length - 1];

              if (Math.abs(lastXY[0] - refLocal[0]) <= nCPx && Math.abs(lastXY[1] - refLocal[1]) <= nCPx) {
                continue;
              }
            } //ä½¿ç¨åèç¹


            holePolygonPointList.push(refLocal);
          }
        }

        if (holePolygonPointList.length < 2) {
          continue;
        }

        holePolygonPointLists.push(holePolygonPointList);
      }

      if (pointList.length < 2) {
        return;
      } //èµ style


      var style = {};
      style = Util.copyAttributesWithClip(style, this.style, ['pointList']);
      style.pointList = pointList; //åå»ºå¾å½¢

      var shape = new SmicPolygon({
        style: style,
        clickable: this.isClickAble,
        hoverable: this.isHoverAble
      }); //è®¾ç½®é«äº®æ ·å¼

      if (this.highlightStyle) {
        shape.highlightStyle = this.highlightStyle;
      } //è®¾ç½®åèä¸­å¿ï¼æå®å¾å½¢ä½ç½®


      shape.refOriginalPosition = this.location; //å¨å­æ°æ® id å±æ§ï¼ç¨äºäºä»¶

      shape.refDataID = this.data.id; //å¨å­æ°æ® id å±æ§ï¼ç¨äºäºä»¶-å¤å¾å½¢åæ¶é«äº®

      shape.isHoverByRefDataID = this.isMultiHover; //å²æ´é¢

      if (holePolygonPointLists.length > 0) {
        shape.holePolygonPointLists = holePolygonPointLists;
      } //ä¿®æ¹ä¸äº shape å¯éå±æ§ï¼éå¸¸ä¸éè¦è¿ä¹å


      if (this.shapeOptions) {
        Util.copyAttributesWithClip(shape, this.shapeOptions);
      }

      this.shapes.push(shape);
    }
    /**
     * @function SuperMap.Feature.Theme.Vector.prototype.rectangleToTF
     * @description è½¬æ¢ç©å½¢è¦ç´ ã
     * @param {SuperMap.Geometry} geometry - ç¨æ·æ°æ®å ä½å°çä¿¡æ¯ï¼è¿éå¿é¡»æ¯ Rectangleã
     */

  }, {
    key: "rectangleToTF",
    value: function rectangleToTF(geometry) {
      //åèä½ç½®ï¼åèä¸­å¿ä¸º
      var location = this.location;
      var ll = new LonLat(geometry.x, geometry.y); //å°å¾åè¾¨ç

      var res = this.layer.map.getResolution(); //geometry åç´ åæ 

      var localLX = this.getLocalXY(ll); //èµ style

      var style = new Object();
      style.r = 6; //é²æ­¢æ¼è®¾æ­¤åæ°ï¼é»è®¤ 6 åç´ 

      style = Util.copyAttributesWithClip(style, this.style);
      style.x = localLX[0] - location[0]; // SuperMap.Geometry.Rectangle ä½¿ç¨å·¦ä¸è§å®ä½ï¼ SmicRectangle ä½¿ç¨å·¦ä¸è§å®ä½ï¼éè¦è½¬æ¢

      style.y = localLX[1] - location[1] - 2 * geometry.width / res;
      style.width = geometry.width / res;
      style.height = geometry.height / res; //åå»ºå¾å½¢

      var shape = new SmicRectangle({
        style: style,
        clickable: this.isClickAble,
        hoverable: this.isHoverAble
      }); //è®¾ç½®é«äº®æ ·å¼

      if (this.highlightStyle) {
        shape.highlightStyle = this.highlightStyle;
      } //è®¾ç½®åèä¸­å¿ï¼æå®å¾å½¢ä½ç½®


      shape.refOriginalPosition = location; //å¨å­æ°æ® id å±æ§ï¼ç¨äºäºä»¶

      shape.refDataID = this.data.id; //å¨å­æ°æ® id å±æ§ï¼ç¨äºäºä»¶-å¤å¾å½¢åæ¶é«äº®

      shape.isHoverByRefDataID = this.isMultiHover; //ä¿®æ¹ä¸äº shape å¯éå±æ§ï¼éå¸¸ä¸éè¦è¿ä¹å

      if (this.shapeOptions) {
        Util.copyAttributesWithClip(shape, this.shapeOptions);
      }

      this.shapes.push(shape);
    }
    /**
     * @function SuperMap.Feature.Theme.Vector.prototype.geoTextToTF
     * @description è½¬æ¢ææ¬è¦ç´ ã
     * @param {SuperMap.Geometry} geometry - ç¨æ·æ°æ®å ä½å°çä¿¡æ¯ï¼è¿éå¿é¡»æ¯ GeoTextã
     */

  }, {
    key: "geoTextToTF",
    value: function geoTextToTF(geometry) {
      //åèä½ç½®ï¼åèä¸­å¿ä¸º
      var location = this.location; //geometry åç´ åæ 

      var localLX = this.getLocalXY(geometry); //èµ style

      var style = new Object();
      style.r = 6; //é²æ­¢æ¼è®¾æ­¤åæ°ï¼é»è®¤ 6 åç´ 

      style = Util.copyAttributesWithClip(style, this.style, ["x", "y", "text"]);
      style.x = localLX[0] - location[0];
      style.y = localLX[1] - location[1];
      style.text = geometry.text; //åå»ºå¾å½¢

      var shape = new SmicText({
        style: style,
        clickable: this.isClickAble,
        hoverable: this.isHoverAble
      }); //è®¾ç½®é«äº®æ ·å¼

      if (this.highlightStyle) {
        shape.highlightStyle = this.highlightStyle;
      } //è®¾ç½®åèä¸­å¿ï¼æå®å¾å½¢ä½ç½®


      shape.refOriginalPosition = location; //å¨å­æ°æ® id å±æ§ï¼ç¨äºäºä»¶

      shape.refDataID = this.data.id; //å¨å­æ°æ® id å±æ§ï¼ç¨äºäºä»¶-å¤å¾å½¢åæ¶é«äº®

      shape.isHoverByRefDataID = this.isMultiHover; //ä¿®æ¹ä¸äº shape å¯éå±æ§ï¼éå¸¸ä¸éè¦è¿ä¹å

      if (this.shapeOptions) {
        Util.copyAttributesWithClip(shape, this.shapeOptions);
      }

      this.shapes.push(shape);
    }
    /**
     * @function SuperMap.Feature.Theme.Vector.prototype.updateAndAddShapes
     * @description ä¿®æ¹ä½ç½®ï¼éå¯¹å°å¾å¹³ç§»æä½ï¼å°å¾æ¼«æ¸¸æä½åè°ç¨æ­¤å½æ°ã
     */

  }, {
    key: "updateAndAddShapes",
    value: function updateAndAddShapes() {
      var newLocalLX = this.getLocalXY(this.lonlat);
      this.location = newLocalLX;
      var render = this.layer.renderer;

      for (var i = 0, len = this.shapes.length; i < len; i++) {
        var shape = this.shapes[i]; //è®¾ç½®åèä¸­å¿ï¼æå®å¾å½¢ä½ç½®

        shape.refOriginalPosition = newLocalLX;
        render.addShape(shape);
      }
    }
    /**
     * @function SuperMap.Feature.Theme.Vector.prototype.getShapesCount
     * @description è·å¾ä¸é¢è¦ç´ ä¸­å¯è§åå¾å½¢çæ°éã
     * @returns {number} å¯è§åå¾å½¢çæ°éã
     */

  }, {
    key: "getShapesCount",
    value: function getShapesCount() {
      return this.shapes.length;
    }
    /**
     * @function SuperMap.Feature.Theme.Vector.prototype.getLocalXY
     * @description å°çåæ è½¬ä¸ºåç´ åæ ã
     * @param {SuperMap.LonLat} lonlat - ä¸é¢è¦ç´ å°çä½ç½®ã
     */

  }, {
    key: "getLocalXY",
    value: function getLocalXY(lonlat) {
      return this.layer.getLocalXY(lonlat);
    }
  }]);

  return ThemeVector;
}(Theme_Theme);
SuperMap.Feature.Theme.ThemeVector = ThemeVector;
// CONCATENATED MODULE: ./src/common/overlay/feature/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/






















// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Group.js
function Group_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Group_typeof = function _typeof(obj) { return typeof obj; }; } else { Group_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Group_typeof(obj); }

function Group_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Group_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Group_createClass(Constructor, protoProps, staticProps) { if (protoProps) Group_defineProperties(Constructor.prototype, protoProps); if (staticProps) Group_defineProperties(Constructor, staticProps); return Constructor; }

function Group_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { Group_get = Reflect.get; } else { Group_get = function _get(target, property, receiver) { var base = Group_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return Group_get(target, property, receiver || target); }

function Group_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = Group_getPrototypeOf(object); if (object === null) break; } return object; }

function Group_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Group_setPrototypeOf(subClass, superClass); }

function Group_setPrototypeOf(o, p) { Group_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Group_setPrototypeOf(o, p); }

function Group_createSuper(Derived) { var hasNativeReflectConstruct = Group_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Group_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Group_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Group_possibleConstructorReturn(this, result); }; }

function Group_possibleConstructorReturn(self, call) { if (call && (Group_typeof(call) === "object" || typeof call === "function")) { return call; } return Group_assertThisInitialized(self); }

function Group_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Group_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Group_getPrototypeOf(o) { Group_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Group_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class  SuperMap.LevelRenderer.Group
 * @category Visualization Theme
 * @private 
 * @classdesc Group æ¯ä¸ä¸ªå®¹å¨ï¼å¯ä»¥æå¥å­èç¹ï¼Group çåæ¢ä¹ä¼è¢«åºç¨å°å­èç¹ä¸ã
 * @extends {SuperMap.LevelRenderer.Transformable}
 * (code)
 *     var g = new SuperMap.LevelRenderer.Group();
 *     var Circle = new SuperMap.LevelRenderer.Shape.Circle();
 *     g.position[0] = 100;
 *     g.position[1] = 100;
 *     g.addChild(new Circle({
 *         style: {
 *             x: 100,
 *             y: 100,
 *             r: 20,
 *             brushType: 'fill'
 *         }
 *     }));
 *     LR.addGroup(g);
 * (end)
 */

var Group = /*#__PURE__*/function (_SuperMap$mixin) {
  Group_inherits(Group, _SuperMap$mixin);

  var _super = Group_createSuper(Group);

  /**
   * @function SuperMap.LevelRenderer.Group.prototype.constructor
   * @description æé å½æ°ã
   * @param {Array} options - Group çéç½®ï¼optionsï¼é¡¹ï¼å¯ä»¥æ¯ Group çèªæå±æ§ï¼ä¹å¯ä»¥æ¯èªå®ä¹çå±æ§ã
   */
  function Group(options) {
    var _this;

    Group_classCallCheck(this, Group);

    _this = _super.call(this, options);
    options = options || {};
    /**
     * @member {string} SuperMap.LevelRenderer.Group.prototype.id
     * @description Group çå¯ä¸æ è¯ã
     */

    _this.id = null;
    /**
     * @readonly
     * @member {string} [SuperMap.LevelRenderer.Group.prototype.type='group']
     * @description ç±»åã
     */

    _this.type = 'group'; //http://www.w3.org/TR/2dcontext/#clipping-region

    /**
     * @member {string} SuperMap.LevelRenderer.Group.prototype.clipShape
     * @description ç¨äºè£åªçå¾å½¢(shape)ï¼ææ Group åçå¾å½¢å¨ç»å¶æ¶é½ä¼è¢«è¿ä¸ªå¾å½¢è£åªï¼è¯¥å¾å½¢ä¼ç»§æ¿ Group çåæ¢ã
     */

    _this.clipShape = null;
    /**
     * @member {Array} SuperMap.LevelRenderer.Group.prototype._children
     * @description _childrenã
     */

    _this._children = [];
    /**
     * @member {Array} SuperMap.LevelRenderer.Group.prototype._storage
     * @description _storageã
     */

    _this._storage = null;
    /**
     * @member {boolean} [SuperMap.LevelRenderer.Group.prototype.__dirty=true]
     * @description __dirtyã
     */

    _this.__dirty = true;
    /**
     * @member {boolean} [SuperMap.LevelRenderer.Group.prototype.ignore=false]
     * @description æ¯å¦å¿½ç¥è¯¥ Group åå¶ææå­èç¹ã
     */

    _this.ignore = false;
    Util.extend(Group_assertThisInitialized(_this), options);
    _this.id = _this.id || Util.createUniqueID("smShapeGroup_");
    _this.CLASS_NAME = "SuperMap.LevelRenderer.Group";
    return _this;
  }
  /**
   * @function SuperMap.LevelRenderer.Group.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  Group_createClass(Group, [{
    key: "destroy",
    value: function destroy() {
      this.id = null;
      this.type = null;
      this.clipShape = null;
      this._children = null;
      this._storage = null;
      this.__dirty = null;
      this.ignore = null;

      Group_get(Group_getPrototypeOf(Group.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.LevelRenderer.Group.prototype.children
     * @description å¤å¶å¹¶è¿åä¸ä»½æ°çåå«ææå¿å­èç¹çæ°ç»ã
     * @returns {Array.<SuperMap.LevelRenderer.Shape>} å¾å½¢æ°ç»ã
     */

  }, {
    key: "children",
    value: function children() {
      return this._children.slice();
    }
    /**
     * @function SuperMap.LevelRenderer.Group.prototype.childAt
     * @description è·åæå® index çå¿å­èç¹
     * @param {number} idx - èç¹ç´¢å¼ã
     * @returns {SuperMap.LevelRenderer.Shape} å¾å½¢ã
     */

  }, {
    key: "childAt",
    value: function childAt(idx) {
      return this._children[idx];
    }
    /**
     * @function SuperMap.LevelRenderer.Group.prototype.addChild
     * @description æ·»å å­èç¹ï¼å¯ä»¥æ¯ Shape æè Groupã
     * @param {(SuperMap.LevelRenderer.Shape|SuperMap.LevelRenderer.Group)} child - èç¹å¾å½¢ã
     */
    // TODO Type Check

  }, {
    key: "addChild",
    value: function addChild(child) {
      if (child == this) {
        return;
      }

      if (child.parent == this) {
        return;
      }

      if (child.parent) {
        child.parent.removeChild(child);
      }

      this._children.push(child);

      child.parent = this;

      if (this._storage && this._storage !== child._storage) {
        this._storage.addToMap(child);

        if (child instanceof Group) {
          child.addChildrenToStorage(this._storage);
        }
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Group.prototype.removeChild
     * @description ç§»é¤å­èç¹ã
     * @param {SuperMap.LevelRenderer.Shape} child - éè¦ç§»é¤çå­èç¹å¾å½¢ã
     */

  }, {
    key: "removeChild",
    value: function removeChild(child) {
      var idx = Util.indexOf(this._children, child);

      this._children.splice(idx, 1);

      child.parent = null;

      if (this._storage) {
        this._storage.delFromMap(child.id);

        if (child instanceof Group) {
          child.delChildrenFromStorage(this._storage);
        }
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Group.prototype.eachChild
     * @description éåææå­èç¹ã
     * @param {function} cb - åè°å½æ°ã
     * @param {Object} context - ä¸ä¸æã
     */

  }, {
    key: "eachChild",
    value: function eachChild(cb, context) {
      var haveContext = !!context;

      for (var i = 0; i < this._children.length; i++) {
        var child = this._children[i];

        if (haveContext) {
          cb.call(context, child);
        } else {
          cb(child);
        }
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Group.prototype.traverse
     * @description æ·±åº¦ä¼åéåææå­å­èç¹ã
     * @param {function} cb - åè°å½æ°ã
     * @param {Object} context - ä¸ä¸æã
     */

  }, {
    key: "traverse",
    value: function traverse(cb, context) {
      var haveContext = !!context;

      for (var i = 0; i < this._children.length; i++) {
        var child = this._children[i];

        if (haveContext) {
          cb.call(context, child);
        } else {
          cb(child);
        }

        if (child.type === 'group') {
          child.traverse(cb, context);
        }
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Group.prototype.addChildrenToStorage
     * @description æå­å¾å½¢æ·»å å°ä»åºã
     * @param {SuperMap.LevelRenderer.Storage} storage - å¾å½¢ä»åºã
     */

  }, {
    key: "addChildrenToStorage",
    value: function addChildrenToStorage(storage) {
      for (var i = 0; i < this._children.length; i++) {
        var child = this._children[i];
        storage.addToMap(child);

        if (child.type === 'group') {
          child.addChildrenToStorage(storage);
        }
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Group.prototype.delChildrenFromStorage
     * @description ä»ä»åºæå­å¾å½¢å é¤ã
     * @param {SuperMap.LevelRenderer.Storage} storage - å¾å½¢ä»åºã
     */

  }, {
    key: "delChildrenFromStorage",
    value: function delChildrenFromStorage(storage) {
      for (var i = 0; i < this._children.length; i++) {
        var child = this._children[i];
        storage.delFromMap(child.id);

        if (child.type === 'group') {
          child.delChildrenFromStorage(storage);
        }
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Group.prototype.modSelf
     * @description æ¯å¦ä¿®æ¹ã
     */

  }, {
    key: "modSelf",
    value: function modSelf() {
      this.__dirty = true;
    }
  }]);

  return Group;
}(SuperMap.mixin(Eventful, Transformable));
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Storage.js
function Storage_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Storage_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Storage_createClass(Constructor, protoProps, staticProps) { if (protoProps) Storage_defineProperties(Constructor.prototype, protoProps); if (staticProps) Storage_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @private
 * @class  SuperMap.LevelRenderer.Storage
 * @category Visualization Theme
 * @classdesc åå®¹ï¼å¾åï¼ä»åº (M) ã
 */

var Storage = /*#__PURE__*/function () {
  /**
   * @function SuperMap.LevelRenderer.Storage.constructor
   * @description æé å½æ°ã
   */
  function Storage() {
    Storage_classCallCheck(this, Storage);

    /**
     * @member {Object} SuperMap.LevelRenderer.Storage.prototype._elements
     * @description ææå¸¸è§å½¢ç¶ï¼id ç´¢å¼ç mapã
     */
    this._elements = {};
    /**
     * @member {Array} SuperMap.LevelRenderer.Storage.prototype._hoverElements
     * @description é«äº®å±å½¢ç¶ï¼ä¸ç¨³å®ï¼å¨æå¢å ï¼æ°ç»ä½ç½®ä¹æ¯ z è½´æ¹åï¼é åæ¾ç¤ºå¨ä¸æ¹ã
     *
     */

    this._hoverElements = [];
    /**
     * @member {Array} SuperMap.LevelRenderer.Storage.prototype._roots
     * @description _rootsã
     *
     */

    this._roots = [];
    /**
     * @member {Array} SuperMap.LevelRenderer.Storage.prototype._shapeList
     * @description _shapeListã
     *
     */

    this._shapeList = [];
    /**
     * @member {number} SuperMap.LevelRenderer.Storage.prototype._shapeListOffset
     * @description _shapeListOffsetãé»è®¤å¼ï¼0ã
     *
     */

    this._shapeListOffset = 0;
    this.CLASS_NAME = "SuperMap.LevelRenderer.Storage";
  }
  /**
   * @function SuperMap.LevelRenderer.Storage.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  Storage_createClass(Storage, [{
    key: "destroy",
    value: function destroy() {
      this.dispose();
      this._shapeList = null;
      this._shapeListOffset = null;
    }
    /**
     * @function SuperMap.LevelRenderer.Storage.prototype.iterShape
     * @description éåè¿­ä»£å¨ã
     * 
     * @param {Function} fun - è¿­ä»£åè°å½æ°ï¼return trueç»æ­¢è¿­ä»£ã
     * @param {Object} option - è¿­ä»£åæ°ï¼ç¼ºçä¸ºä»éåºéåæ®éå±å¾å½¢ã
     * @param {boolean} [hover=true] - æ¯å¦æ¯é«äº®å±å¾å½¢ã
     * @param {string} [normal='down'] - æ¯å¦æ¯æ®éå±å¾å½¢ï¼è¿­ä»£æ¶æ¯å¦æå®åzè½´é¡ºåºãå¯è®¾å¼ï¼'down' ï¼'up'ã
     * @param {boolean} [update=false] - æ¯å¦å¨è¿­ä»£åæ´æ°å½¢ç¶åè¡¨ã
     * @return {SuperMap.LevelRenderer.Storage} thisã
     */

  }, {
    key: "iterShape",
    value: function iterShape(fun, option) {
      if (!option) {
        var defaultIterateOption = {
          hover: false,
          normal: 'down',
          update: false
        };
        option = defaultIterateOption;
      }

      if (option.hover) {
        // é«äº®å±æ°æ®éå
        for (var i = 0, l = this._hoverElements.length; i < l; i++) {
          var el = this._hoverElements[i];
          el.updateTransform();

          if (fun(el)) {
            return this;
          }
        }
      }

      if (option.update) {
        this.updateShapeList();
      } // éå: 'down' | 'up'


      switch (option.normal) {
        case 'down':
          {
            // éåºéåï¼é«å±ä¼å
            var _l = this._shapeList.length;

            while (_l--) {
              if (fun(this._shapeList[_l])) {
                return this;
              }
            }

            break;
          }
        // case 'up':

        default:
          {
            // ååºéåï¼åºå±ä¼å
            for (var _i = 0, _l2 = this._shapeList.length; _i < _l2; _i++) {
              if (fun(this._shapeList[_i])) {
                return this;
              }
            }

            break;
          }
      }

      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Storage.prototype.getHoverShapes
     * @param {boolean} [update=false] - æ¯å¦å¨è¿ååæ´æ°å¾å½¢çåæ¢ã
     * @return {Array.<SuperMap.LevelRenderer.Shape>} å¾å½¢æ°ç»ã
     */

  }, {
    key: "getHoverShapes",
    value: function getHoverShapes(update) {
      // hoverConnect
      var hoverElements = [],
          len = this._hoverElements.length;

      for (var i = 0; i < len; i++) {
        hoverElements.push(this._hoverElements[i]);
        var target = this._hoverElements[i].hoverConnect;

        if (target) {
          var shape;
          target = target instanceof Array ? target : [target];

          for (var j = 0, k = target.length; j < k; j++) {
            shape = target[j].id ? target[j] : this.get(target[j]);

            if (shape) {
              hoverElements.push(shape);
            }
          }
        }
      }

      hoverElements.sort(Storage.shapeCompareFunc);

      if (update) {
        for (var _i2 = 0, l = hoverElements.length; _i2 < l; _i2++) {
          hoverElements[_i2].updateTransform();
        }
      }

      return hoverElements;
    }
    /**
     * @function SuperMap.LevelRenderer.Storage.prototype.getShapeList
     * @description è¿åææå¾å½¢çç»å¶éåã
     *
     * @param {boolean} [update=false] - æ¯å¦å¨è¿ååæ´æ°è¯¥æ°ç»ã  è¯¦è§ï¼<SuperMap.LevelRenderer.Shape> updateShapeListã
     * @return {SuperMap.LevelRenderer.Shape} å¾å½¢ã
     */

  }, {
    key: "getShapeList",
    value: function getShapeList(update) {
      if (update) {
        this.updateShapeList();
      }

      return this._shapeList;
    }
    /**
     * @function SuperMap.LevelRenderer.Storage.prototype.updateShapeList
     * @description æ´æ°å¾å½¢çç»å¶éåãæ¯æ¬¡ç»å¶åé½ä¼è°ç¨ï¼è¯¥æ¹æ³ä¼åæ·±åº¦ä¼åéåæ´ä¸ªæ ï¼æ´æ°ææGroupåShapeçåæ¢å¹¶ä¸æææå¯è§çShapeä¿å­å°æ°ç»ä¸­ï¼æåæ ¹æ®ç»å¶çä¼åçº§ï¼zlevel > z > æå¥é¡ºåºï¼æåºå¾å°ç»å¶éåã 
     */

  }, {
    key: "updateShapeList",
    value: function updateShapeList() {
      this._shapeListOffset = 0;
      var rootsLen = this._roots.length;

      for (var i = 0; i < rootsLen; i++) {
        var root = this._roots[i];

        this._updateAndAddShape(root);
      }

      this._shapeList.length = this._shapeListOffset;
      var shapeListLen = this._shapeList.length;

      for (var _i3 = 0; _i3 < shapeListLen; _i3++) {
        this._shapeList[_i3].__renderidx = _i3;
      }

      this._shapeList.sort(Storage.shapeCompareFunc);
    }
    /**
     * @function SuperMap.LevelRenderer.Storage.prototype._updateAndAddShape
     * @description æ´æ°å¹¶æ·»å å¾å½¢ã
     * 
     */

  }, {
    key: "_updateAndAddShape",
    value: function _updateAndAddShape(el, clipShapes) {
      if (el.ignore) {
        return;
      }

      el.updateTransform();

      if (el.type == 'group') {
        if (el.clipShape) {
          // clipShape çåæ¢æ¯åºäº group çåæ¢
          el.clipShape.parent = el;
          el.clipShape.updateTransform(); // PENDING æçå½±å

          if (clipShapes) {
            clipShapes = clipShapes.slice();
            clipShapes.push(el.clipShape);
          } else {
            clipShapes = [el.clipShape];
          }
        }

        for (var i = 0; i < el._children.length; i++) {
          var child = el._children[i]; // Force to mark as dirty if group is dirty

          child.__dirty = el.__dirty || child.__dirty;

          this._updateAndAddShape(child, clipShapes);
        } // Mark group clean here


        el.__dirty = false;
      } else {
        el.__clipShapes = clipShapes;
        this._shapeList[this._shapeListOffset++] = el;
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Storage.prototype.mod
     * @description ä¿®æ¹å¾å½¢(Shape)æèç»(Group)ã
     * 
     * @param {string} elId - å¯ä¸æ è¯ã
     * @param {Object} params - åæ°ã
     * @return {SuperMap.LevelRenderer.Storage} thisã
     */

  }, {
    key: "mod",
    value: function mod(elId, params) {
      var el = this._elements[elId];

      if (el) {
        el.modSelf();

        if (params) {
          // å¦æç¬¬äºä¸ªåæ°ç´æ¥ä½¿ç¨ shape
          // parent, _storage, __startClip ä¸ä¸ªå±æ§ä¼æå¾ªç¯å¼ç¨
          // ä¸»è¦ä¸ºäºå 1.x çæ¬å¼å®¹ï¼2.x çæ¬ä¸å»ºè®®ä½¿ç¨ç¬¬äºä¸ªåæ°
          if (params.parent || params._storage || params.__startClip) {
            var target = {};

            for (var name in params) {
              if (name == 'parent' || name == '_storage' || name == '__startClip') {
                continue;
              }

              if (params.hasOwnProperty(name)) {
                target[name] = params[name];
              }
            }

            new Util_Util().merge(el, target, true);
          } else {
            new Util_Util().merge(el, params, true);
          }
        }
      }

      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Storage.prototype.drift
     * @description ç§»å¨æå®çå¾å½¢(Shape)çä½ç½®ã
     * @param {string} shapeId - å¯ä¸æ è¯ã
     * @param {number} dx 
     * @param {number} dy 
     * @return {SuperMap.LevelRenderer.Storage} thisã
     */

  }, {
    key: "drift",
    value: function drift(shapeId, dx, dy) {
      var shape = this._elements[shapeId];

      if (shape) {
        shape.needTransform = true;

        if (shape.draggable === 'horizontal') {
          dy = 0;
        } else if (shape.draggable === 'vertical') {
          dx = 0;
        }

        if (!shape.ondrift // ondrift
        // æonbrushå¹¶ä¸è°ç¨æ§è¡è¿åfalseæundefinedåç»§ç»­
        || shape.ondrift && !shape.ondrift(dx, dy)) {
          shape.drift(dx, dy);
        }
      }

      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Storage.prototype.addHover
     * @description æ·»å é«äº®å±æ°æ®ã
     * @param {SuperMap.LevelRenderer.Shape} shape - å¾å½¢ã
     * @return {SuperMap.LevelRenderer.Storage} thisã
     */

  }, {
    key: "addHover",
    value: function addHover(shape) {
      shape.updateNeedTransform();

      this._hoverElements.push(shape);

      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Storage.prototype.delHover
     * @description æ¸ç©ºé«äº®å±æ°æ®ã
     * @return {SuperMap.LevelRenderer.Storage} thisã 
     */

  }, {
    key: "delHover",
    value: function delHover() {
      this._hoverElements = [];
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Storage.prototype.hasHoverShape
     * @description æ¯å¦æå¾å½¢å¨é«äº®å±éã
     * @return {boolean} æ¯å¦æå¾å½¢å¨é«äº®å±éã
     */

  }, {
    key: "hasHoverShape",
    value: function hasHoverShape() {
      return this._hoverElements.length > 0;
    }
    /**
     * @function SuperMap.LevelRenderer.Storage.prototype.addRoot
     * @description æ·»å å¾å½¢(Shape)æèç»(Group)å°æ ¹èç¹ã
     * 
     * @param {(SuperMap.LevelRenderer.Shape/SuperMap.LevelRenderer.Group)} el - å¾å½¢ã
     *
     */

  }, {
    key: "addRoot",
    value: function addRoot(el) {
      if (el instanceof Group) {
        el.addChildrenToStorage(this);
      }

      this.addToMap(el);

      this._roots.push(el);
    }
    /**
     * @function SuperMap.LevelRenderer.Storage.prototype.delRoot
     * @description å é¤æå®çå¾å½¢(Shape)æèç»(Group)ã
     *
     * @param {Array.<string>} elId - å é¤å¾å½¢(Shape)æèç»(Group)ç id æ°ç»ãå¦æä¸ºç©ºæ¸ç©ºæ´ä¸ªStorageã
     *
     */

  }, {
    key: "delRoot",
    value: function delRoot(elId) {
      if (typeof elId == 'undefined') {
        // ä¸æå®elIdæ¸ç©º
        for (var i = 0; i < this._roots.length; i++) {
          var root = this._roots[i];

          if (root instanceof Group) {
            root.delChildrenFromStorage(this);
          }
        }

        this._elements = {};
        this._hoverElements = [];
        this._roots = [];
        return;
      }

      if (elId instanceof Array) {
        var elIdLen = elId.length;

        for (var _i4 = 0; _i4 < elIdLen; _i4++) {
          this.delRoot(elId[_i4]);
        }

        return;
      }

      var el;

      if (typeof elId == 'string') {
        el = this._elements[elId];
      } else {
        el = elId;
      }

      var idx = new Util_Util().indexOf(this._roots, el);

      if (idx >= 0) {
        this.delFromMap(el.id);

        this._roots.splice(idx, 1);

        if (el instanceof Group) {
          el.delChildrenFromStorage(this);
        }
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Storage.prototype.addToMap
     * @description æ·»å å¾å½¢å° mapã
     *
     * @param {SuperMap.LevelRenderer.Shape} el - å¾å½¢ã
     * @return {SuperMap.LevelRenderer.Storage} thisã
     */

  }, {
    key: "addToMap",
    value: function addToMap(el) {
      if (el instanceof Group) {
        el._storage = this;
      }

      el.modSelf();
      this._elements[el.id] = el;
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Storage.prototype.get
     * @description è·åæå®å¾å½¢ã
     *
     * @param {string} elId - å¾å½¢ idã
     * @return {SuperMap.LevelRenderer.Shape} å¾å½¢ã
     */

  }, {
    key: "get",
    value: function get(elId) {
      return this._elements[elId];
    }
    /**
     * @function SuperMap.LevelRenderer.Storage.prototype.delFromMap
     * @description ä» map ä¸­å é¤æå®å¾å½¢ã
     * 
     * @param {string} elId - å¾å½¢idã
     * @return {SuperMap.LevelRenderer.Storage} thisã
     */

  }, {
    key: "delFromMap",
    value: function delFromMap(elId) {
      var el = this._elements[elId];

      if (el) {
        delete this._elements[elId];

        if (el instanceof Group) {
          el._storage = null;
        }
      }

      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Storage.prototype.dispose
     * @description æ¸ç©ºå¹¶ä¸éæ¾ Storageã
     */

  }, {
    key: "dispose",
    value: function dispose() {
      this._elements = null; // this._renderList = null;

      this._roots = null;
      this._hoverElements = null;
    }
  }], [{
    key: "shapeCompareFunc",
    value: function shapeCompareFunc(a, b) {
      if (a.zlevel == b.zlevel) {
        if (a.z == b.z) {
          return a.__renderidx - b.__renderidx;
        }

        return a.z - b.z;
      }

      return a.zlevel - b.zlevel;
    }
  }]);

  return Storage;
}();
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Painter.js
function Painter_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Painter_typeof = function _typeof(obj) { return typeof obj; }; } else { Painter_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Painter_typeof(obj); }

function Painter_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Painter_setPrototypeOf(subClass, superClass); }

function Painter_setPrototypeOf(o, p) { Painter_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Painter_setPrototypeOf(o, p); }

function Painter_createSuper(Derived) { var hasNativeReflectConstruct = Painter_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Painter_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Painter_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Painter_possibleConstructorReturn(this, result); }; }

function Painter_possibleConstructorReturn(self, call) { if (call && (Painter_typeof(call) === "object" || typeof call === "function")) { return call; } return Painter_assertThisInitialized(self); }

function Painter_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Painter_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Painter_getPrototypeOf(o) { Painter_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Painter_getPrototypeOf(o); }

function Painter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Painter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Painter_createClass(Constructor, protoProps, staticProps) { if (protoProps) Painter_defineProperties(Constructor.prototype, protoProps); if (staticProps) Painter_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/






/**
 * @private
 * @class  SuperMap.LevelRenderer.Painter
 * @category Visualization Theme
 * @classdesc Painter ç»å¾æ¨¡åã
 */

var Painter = /*#__PURE__*/function () {
  /**
   * @function SuperMap.LevelRenderer.Painter.constructor
   * @description æé å½æ°ã
   *
   * @param {HTMLElement} root - ç»å¾åºåï¼DIVï¼ã
   * @param {SuperMap.LevelRenderer.Storage} storage - Storage å®ä¾ã
   *
   */
  function Painter(root, storage) {
    Painter_classCallCheck(this, Painter);

    /**
     * @member {HTMLElement} SuperMap.LevelRenderer.Painter.prototype.root
     * @description  ç»å¾å®¹å¨ã
     *
     */
    this.root = root;
    /**
     * @member {Array} SuperMap.LevelRenderer.Painter.prototype.storage
     * @description å¾å½¢ä»åºã
     *
     */

    this.storage = storage;
    /**
     * @member {HTMLElement} SuperMap.LevelRenderer.Painter.prototype._domRoot
     * @description å®¹å¨æ ¹ dom å¯¹è±¡ã
     *
     */

    this._domRoot = null;
    /**
     * @member {Object} SuperMap.LevelRenderer.Painter.prototype._layers
     * @description ç»å¶å±å¯¹è±¡ã
     *
     */

    this._layers = {};
    /**
     * @member {Array} SuperMap.LevelRenderer.Painter.prototype._zlevelList
     * @description  å±åè¡¨ã
     *
     */

    this._zlevelList = [];
    /**
     * @member {Object} SuperMap.LevelRenderer.Painter.prototype._layerConfig
     * @description ç»å¶å±éç½®å¯¹è±¡ã
     *
     */

    this._layerConfig = {};
    /**
     * @member {Object} SuperMap.LevelRenderer.Painter.prototype._bgDom
     * @description èæ¯å± Canvas ï¼Domï¼ã
     *
     */

    this._bgDom = null;
    /**
     * @member {Function} SuperMap.LevelRenderer.Painter.prototype.shapeToImage
     * @description å½¢ç¶è½¬å¾åå½æ°ã
     *
     */

    this.shapeToImage = null; // retina å±å¹ä¼å

    Painter.devicePixelRatio = Math.max(window.devicePixelRatio || 1, 1);
    this.CLASS_NAME = "SuperMap.LevelRenderer.Painter";
    this.root.innerHTML = '';
    this._width = this._getWidth(); // å®½ï¼ç¼å­è®°å½

    this._height = this._getHeight(); // é«ï¼ç¼å­è®°å½

    var domRoot = document.createElement('div');
    this._domRoot = domRoot; // domRoot.onselectstart = returnFalse; // é¿åé¡µé¢éä¸­çå°´å°¬

    domRoot.style.position = 'relative';
    domRoot.style.overflow = 'hidden';
    domRoot.style.width = this._width + 'px';
    domRoot.style.height = this._height + 'px';
    this.root.appendChild(domRoot);
    this.shapeToImage = this._createShapeToImageProcessor(); // åå»ºåå±canvas
    // èæ¯
    //this._bgDom = Painter.createDom('bg', 'div', this);

    this._bgDom = Painter.createDom(Util.createUniqueID("SuperMap.Theme_background_"), 'div', this);
    domRoot.appendChild(this._bgDom);
    this._bgDom.onselectstart = returnFalse;
    this._bgDom.style['-webkit-user-select'] = 'none';
    this._bgDom.style['user-select'] = 'none';
    this._bgDom.style['-webkit-touch-callout'] = 'none'; // é«äº®
    //var hoverLayer = new PaintLayer('_hoverLayer_', this);

    var hoverLayer = new PaintLayer(Util.createUniqueID("_highLightLayer_"), this);
    this._layers['hover'] = hoverLayer;
    domRoot.appendChild(hoverLayer.dom);
    hoverLayer.initContext();
    hoverLayer.dom.onselectstart = returnFalse;
    hoverLayer.dom.style['-webkit-user-select'] = 'none';
    hoverLayer.dom.style['user-select'] = 'none';
    hoverLayer.dom.style['-webkit-touch-callout'] = 'none';
    var me = this;

    this.updatePainter = function (shapeList, callback) {
      me.refreshShapes(shapeList, callback);
    }; // è¿åfalseçæ¹æ³ï¼ç¨äºé¿åé¡µé¢è¢«éä¸­


    function returnFalse() {
      return false;
    }
    /* eslint-disable */
    // ä»ä¹é½ä¸å¹²çç©ºæ¹æ³


    function doNothing() {//NOSONAR
    }
    /* eslint-enable */

  }
  /**
   * @function SuperMap.LevelRenderer.Painter.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  Painter_createClass(Painter, [{
    key: "destroy",
    value: function destroy() {
      this.dispose();
      this._zlevelList = null;
      this._layerConfig = null;
      this._bgDom = null;
      this.shapeToImage = null;
    }
    /**
     * @function SuperMap.LevelRenderer.Painter.prototype.render
     * @description æ¸²æãé¦æ¬¡ç»å¾ï¼åå»ºåç§ dom å contextã
     *
     * @param {Function} callback - ç»ç»ç»æåçåè°å½æ°ã
     * @return {SuperMap.LevelRenderer.Painter} thisã
     */

  }, {
    key: "render",
    value: function render(callback) {
      // TODO
      this.refresh(callback, true);
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Painter.prototype.refresh
     * @description å·æ°ã
     *
     * @param {Function} callback - å·æ°ç»æåçåè°å½æ°ã
     * @param {boolean} paintAll - å¼ºå¶ç»å¶ææ shapeã
     * @return {SuperMap.LevelRenderer.Painter} thisã
     */

  }, {
    key: "refresh",
    value: function refresh(callback, paintAll) {
      var list = this.storage.getShapeList(true);

      this._paintList(list, paintAll);

      if (typeof callback == 'function') {
        callback();
      }

      return this;
    }
    /**
     * Method: _paintList
     * æåè¡¨ç»å¶å¾å½¢ã
     */

  }, {
    key: "_paintList",
    value: function _paintList(list, paintAll) {
      if (typeof paintAll == 'undefined') {
        paintAll = false;
      }

      this._updateLayerStatus(list);

      var currentLayer;
      var currentZLevel;
      var ctx;

      for (var id in this._layers) {
        if (id !== 'hover') {
          this._layers[id].unusedCount++;

          this._layers[id].updateTransform();
        }
      }

      var invTransform = [];

      for (var i = 0, l = list.length; i < l; i++) {
        var shape = list[i];

        if (currentZLevel !== shape.zlevel) {
          if (currentLayer && currentLayer.needTransform) {
            ctx.restore();
          }

          currentLayer = this.getLayer(shape.zlevel);
          ctx = currentLayer.ctx;
          currentZLevel = shape.zlevel; // Reset the count

          currentLayer.unusedCount = 0;

          if (currentLayer.dirty || paintAll) {
            currentLayer.clear();
          }

          if (currentLayer.needTransform) {
            ctx.save();
            currentLayer.setTransform(ctx);
          }
        } // Start group clipping


        if (ctx && shape.__startClip) {
          var clipShape = shape.__startClip;
          ctx.save(); // Set transform

          if (clipShape.needTransform) {
            var m = clipShape.transform;
            SUtil_SUtil.Util_matrix.invert(invTransform, m);
            ctx.transform(m[0], m[1], m[2], m[3], m[4], m[5]);
          }

          ctx.beginPath();
          clipShape.buildPath(ctx, clipShape.style);
          ctx.clip(); // Transform back

          if (clipShape.needTransform) {
            var _m = invTransform;
            ctx.transform(_m[0], _m[1], _m[2], _m[3], _m[4], _m[5]);
          }
        }

        if ((currentLayer && currentLayer.dirty || paintAll) && !shape.invisible) {
          if (!shape.onbrush || shape.onbrush && !shape.onbrush(ctx, false)) {
            if (Config.catchBrushException) {
              try {
                shape.brush(ctx, false, this.updatePainter);
              } catch (error) {
                SUtil_SUtil.Util_log(error, 'brush error of ' + shape.type, shape);
              }
            } else {
              shape.brush(ctx, false, this.updatePainter);
            }
          }
        } // Stop group clipping


        if (ctx && shape.__stopClip) {
          ctx.restore();
        }

        shape.__dirty = false;
      }

      if (ctx && currentLayer && currentLayer.needTransform) {
        ctx.restore();
      }

      for (var _id in this._layers) {
        if (_id !== 'hover') {
          var layer = this._layers[_id];
          layer.dirty = false; // å é¤è¿æçå±
          // PENDING
          // if (layer.unusedCount >= 500) {
          //     this.delLayer(id);
          // }

          if (layer.unusedCount == 1) {
            layer.clear();
          }
        }
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Painter.prototype.getLayer
     * @description è·å zlevel æå¨å±ï¼å¦æä¸å­å¨åä¼åå»ºä¸ä¸ªæ°çå±ã
     *
     * @param {number} zlevel - zlevelã
     * @return {SuperMap.LevelRenderer.Painter} thisã
     */

  }, {
    key: "getLayer",
    value: function getLayer(zlevel) {
      // Change draw layer
      var currentLayer = this._layers[zlevel];

      if (!currentLayer) {
        var len = this._zlevelList.length;
        var prevLayer = null;
        var i = -1;

        if (len > 0 && zlevel > this._zlevelList[0]) {
          for (i = 0; i < len - 1; i++) {
            if (this._zlevelList[i] < zlevel && this._zlevelList[i + 1] > zlevel) {
              break;
            }
          }

          prevLayer = this._layers[this._zlevelList[i]];
        }

        this._zlevelList.splice(i + 1, 0, zlevel); // Create a new layer
        //currentLayer = new PaintLayer(zlevel, this);


        currentLayer = new PaintLayer(Util.createUniqueID("_levelLayer_" + zlevel), this);
        var prevDom = prevLayer ? prevLayer.dom : this._bgDom;

        if (prevDom.nextSibling) {
          prevDom.parentNode.insertBefore(currentLayer.dom, prevDom.nextSibling);
        } else {
          prevDom.parentNode.appendChild(currentLayer.dom);
        }

        currentLayer.initContext();
        this._layers[zlevel] = currentLayer;

        if (this._layerConfig[zlevel]) {
          new Util_Util().merge(currentLayer, this._layerConfig[zlevel], true);
        }

        currentLayer.updateTransform();
      }

      return currentLayer;
    }
    /**
     * @function SuperMap.LevelRenderer.Painter.prototype.getLayers
     * @description è·åææå·²åå»ºçå±ã
     * @return {Array.<Painter.Layer>} å·²åå»ºçå±
     */

  }, {
    key: "getLayers",
    value: function getLayers() {
      return this._layers;
    }
    /**
     * Method: _updateLayerStatus
     * æ´æ°ç»å¶å±ç¶æã
     */

  }, {
    key: "_updateLayerStatus",
    value: function _updateLayerStatus(list) {
      var layers = this._layers;
      var elCounts = {};

      for (var z in layers) {
        if (z !== 'hover') {
          elCounts[z] = layers[z].elCount;
          layers[z].elCount = 0;
        }
      }

      for (var i = 0; i < list.length; i++) {
        var shape = list[i];
        var zlevel = shape.zlevel;
        var layer = layers[zlevel];

        if (layer) {
          layer.elCount++; // å·²ç»è¢«æ è®°ä¸ºéè¦å·æ°

          if (layer.dirty) {
            continue;
          }

          layer.dirty = shape.__dirty;
        }
      } // å±ä¸­çåç´ æ°éæåçåå


      for (var _z in layers) {
        if (_z !== 'hover') {
          if (elCounts[_z] !== layers[_z].elCount) {
            layers[_z].dirty = true;
          }
        }
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Painter.prototype.refreshShapes
     * @description æ´æ°çå¾å½¢åç´ åè¡¨ã
     *
     * @param {number} shapeList - éè¦æ´æ°çå¾å½¢åç´ åè¡¨ã
     * @param {number} callback - è§å¾æ´æ°ååè°å½æ°ã
     * @return {SuperMap.LevelRenderer.Painter} thisã
     */

  }, {
    key: "refreshShapes",
    value: function refreshShapes(shapeList, callback) {
      for (var i = 0, l = shapeList.length; i < l; i++) {
        var shape = shapeList[i];
        this.storage.mod(shape.id);
      }

      this.refresh(callback);
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Painter.prototype.clear
     * @description æ¸é¤ hover å±å¤ææåå®¹ã
     * @return {SuperMap.LevelRenderer.Painter} thisã
     */

  }, {
    key: "clear",
    value: function clear() {
      for (var k in this._layers) {
        if (k == 'hover') {
          continue;
        }

        this._layers[k].clear();
      }

      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Painter.prototype.modLayer
     * @description ä¿®æ¹æå® zlevel çç»å¶åæ°ã
     *
     * @param {string} zlevel - zlevelã
     * @param {Object} config - éç½®å¯¹è±¡ã
     * @param {string} [config.clearColor=0] - æ¯æ¬¡æ¸ç©ºç»å¸çé¢è²ã
     * @param {boolean} [config.motionBlur=false] - æ¯å¦å¼å¯å¨ææ¨¡ç³ã
     * @param {number} [config.lastFrameAlpha=0.7] - å¨å¼å¯å¨ææ¨¡ç³çæ¶åä½¿ç¨ï¼ä¸ä¸ä¸å¸§æ··åçalphaå¼ï¼å¼è¶å¤§å°¾è¿¹è¶ææ¾ãé»è®¤å¼ï¼0.7ã
     * @param {Array.<number>} config.position - å±çå¹³ç§»ã
     * @param {Array.<number>} config.rotation - å±çæè½¬ã
     * @param {Array.<number>} config.scale - å±çç¼©æ¾ã
     * @param {boolean} config.zoomable - å±æ¯å¦æ¯æé¼ æ ç¼©æ¾æä½ãé»è®¤å¼ï¼falseã
     * @param {boolean} config.panable - å±æ¯å¦æ¯æé¼ æ å¹³ç§»æä½ãé»è®¤å¼ï¼falseã
     *
     */

  }, {
    key: "modLayer",
    value: function modLayer(zlevel, config) {
      if (config) {
        if (!this._layerConfig[zlevel]) {
          this._layerConfig[zlevel] = config;
        } else {
          new Util_Util().merge(this._layerConfig[zlevel], config, true);
        }

        var layer = this._layers[zlevel];

        if (layer) {
          new Util_Util().merge(layer, this._layerConfig[zlevel], true);
        }
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Painter.prototype.delLayer
     * @description å é¤æå®å±ã
     *
     * @param {string} zlevel - å±æå¨ç zlevelã
     */

  }, {
    key: "delLayer",
    value: function delLayer(zlevel) {
      var layer = this._layers[zlevel];

      if (!layer) {
        return;
      } // Save config


      this.modLayer(zlevel, {
        position: layer.position,
        rotation: layer.rotation,
        scale: layer.scale
      });
      layer.dom.parentNode.removeChild(layer.dom);
      delete this._layers[zlevel];

      this._zlevelList.splice(new Util_Util().indexOf(this._zlevelList, zlevel), 1);
    }
    /**
     * @function SuperMap.LevelRenderer.Painter.prototype.refreshHover
     * @description å·æ° hover å±ã
     * @return {SuperMap.LevelRenderer.Painter} thisã
     */

  }, {
    key: "refreshHover",
    value: function refreshHover() {
      this.clearHover();
      var list = this.storage.getHoverShapes(true);

      for (var i = 0, l = list.length; i < l; i++) {
        this._brushHover(list[i]);
      }

      this.storage.delHover();
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Painter.prototype.clearHover
     * @description æ¸é¤ hover å±ææåå®¹ã
     * @return {SuperMap.LevelRenderer.Painter} thisã
     */

  }, {
    key: "clearHover",
    value: function clearHover() {
      var hover = this._layers.hover;
      hover && hover.clear();
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Painter.prototype.resize
     * @description åºåå¤§å°åååéç»ã
     * @return {SuperMap.LevelRenderer.Painter} thisã
     */

  }, {
    key: "resize",
    value: function resize() {
      var domRoot = this._domRoot;
      domRoot.style.display = 'none';

      var width = this._getWidth();

      var height = this._getHeight();

      domRoot.style.display = ''; // ä¼åæ²¡æå®éæ¹åçresize

      if (this._width != width || height != this._height) {
        this._width = width;
        this._height = height;
        domRoot.style.width = width + 'px';
        domRoot.style.height = height + 'px';

        for (var id in this._layers) {
          this._layers[id].resize(width, height);
        }

        this.refresh(null, true);
      }

      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Painter.prototype.clearLayer
     * @description æ¸é¤æå®çä¸ä¸ªå±ã
     * @param {number} zLevel - å±ã
     */

  }, {
    key: "clearLayer",
    value: function clearLayer(zLevel) {
      var layer = this._layers[zLevel];

      if (layer) {
        layer.clear();
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Painter.prototype.dispose
     * @description éæ¾ã
     *
     */

  }, {
    key: "dispose",
    value: function dispose() {
      this.root.innerHTML = '';
      this.root = null;
      this.storage = null;
      this._domRoot = null;
      this._layers = null;
    }
    /**
     * @function SuperMap.LevelRenderer.Painter.prototype.getDomHover
     * @description è·å Hover å±ç Domã
     */

  }, {
    key: "getDomHover",
    value: function getDomHover() {
      return this._layers.hover.dom;
    }
    /**
     * @function SuperMap.LevelRenderer.Painter.prototype.toDataURL
     * @description å¾åå¯¼åºã
     * @param {string} type - å¾çç±»åã
     * @param {string} backgroundColor - èæ¯è²ãé»è®¤å¼ï¼'#fff'ã
     * @param {Object} args
     * @return {string} å¾ççBase64 urlã
     */

  }, {
    key: "toDataURL",
    value: function toDataURL(type, backgroundColor, args) {
      //var imageDom = Painter.createDom('image', 'canvas', this);
      var imageDom = Painter.createDom(Util.createUniqueID("SuperMap.Theme.image_"), 'canvas', this);

      this._bgDom.appendChild(imageDom);

      var ctx = imageDom.getContext('2d');
      Painter.devicePixelRatio != 1 && ctx.scale(Painter.devicePixelRatio, Painter.devicePixelRatio);
      ctx.fillStyle = backgroundColor || '#fff';
      ctx.rect(0, 0, this._width * Painter.devicePixelRatio, this._height * Painter.devicePixelRatio);
      ctx.fill();
      var self = this; // ååºéåï¼shapeä¸çzlevelæå®ç»ç»å¾å±çzè½´å±å 

      this.storage.iterShape(function (shape) {
        if (!shape.invisible) {
          if (!shape.onbrush // æ²¡æonbrush
          // æonbrushå¹¶ä¸è°ç¨æ§è¡è¿åfalseæundefinedåç»§ç»­ç²å·
          || shape.onbrush && !shape.onbrush(ctx, false)) {
            if (Config.catchBrushException) {
              try {
                shape.brush(ctx, false, self.updatePainter);
              } catch (error) {
                SUtil_SUtil.Util_log(error, 'brush error of ' + shape.type, shape);
              }
            } else {
              shape.brush(ctx, false, self.updatePainter);
            }
          }
        }
      }, {
        normal: 'up',
        update: true
      });
      var image = imageDom.toDataURL(type, args);
      ctx = null;

      this._bgDom.removeChild(imageDom);

      return image;
    }
    /**
     * @function SuperMap.LevelRenderer.Painter.prototype.getWidth
     * @description  è·åç»å¾åºåå®½åº¦ã
     * @return {number} ç»å¾åºåå®½åº¦ã
     */

  }, {
    key: "getWidth",
    value: function getWidth() {
      return this._width;
    }
    /**
     * @function SuperMap.LevelRenderer.Painter.prototype.getHeight
     * @description è·åç»å¾åºåé«åº¦ã
     * @return {number} ç»å¾åºåé«åº¦ã
     */

  }, {
    key: "getHeight",
    value: function getHeight() {
      return this._height;
    }
    /**
     * Method: _getWidth
     *
     */

  }, {
    key: "_getWidth",
    value: function _getWidth() {
      var root = this.root;
      var stl = root.currentStyle || document.defaultView.getComputedStyle(root);
      return ((root.clientWidth || parseInt(stl.width, 10)) - parseInt(stl.paddingLeft, 10) // è¯·åè°æè¿æ¯è¾ç²æ´
      - parseInt(stl.paddingRight, 10)).toFixed(0) - 0;
    }
    /**
     * Method: _getHeight
     *
     */

  }, {
    key: "_getHeight",
    value: function _getHeight() {
      var root = this.root;
      var stl = root.currentStyle || document.defaultView.getComputedStyle(root);
      return ((root.clientHeight || parseInt(stl.height, 10)) - parseInt(stl.paddingTop, 10) // è¯·åè°æè¿æ¯è¾ç²æ´
      - parseInt(stl.paddingBottom, 10)).toFixed(0) - 0;
    }
    /**
     * Method: _brushHover
     *
     */

  }, {
    key: "_brushHover",
    value: function _brushHover(shape) {
      var ctx = this._layers.hover.ctx;

      if (!shape.onbrush // æ²¡æonbrush
      // æonbrushå¹¶ä¸è°ç¨æ§è¡è¿åfalseæundefinedåç»§ç»­ç²å·
      || shape.onbrush && !shape.onbrush(ctx, true)) {
        var layer = this.getLayer(shape.zlevel);

        if (layer.needTransform) {
          ctx.save();
          layer.setTransform(ctx);
        } // Retina ä¼å


        if (Config.catchBrushException) {
          try {
            shape.brush(ctx, true, this.updatePainter);
          } catch (error) {
            SUtil_SUtil.Util_log(error, 'hoverBrush error of ' + shape.type, shape);
          }
        } else {
          shape.brush(ctx, true, this.updatePainter);
        }

        if (layer.needTransform) {
          ctx.restore();
        }
      }
    }
    /**
     * Method: _shapeToImage
     *
     */

  }, {
    key: "_shapeToImage",
    value: function _shapeToImage(id, shape, width, height, devicePixelRatio) {
      var canvas = document.createElement('canvas');
      var ctx = canvas.getContext('2d');

      var _devicePixelRatio = devicePixelRatio || window.devicePixelRatio || 1;

      canvas.style.width = width + 'px';
      canvas.style.height = height + 'px';
      canvas.setAttribute('width', width * _devicePixelRatio);
      canvas.setAttribute('height', height * _devicePixelRatio);
      ctx.clearRect(0, 0, width * _devicePixelRatio, height * _devicePixelRatio);
      var shapeTransform = {
        position: shape.position,
        rotation: shape.rotation,
        scale: shape.scale
      };
      shape.position = [0, 0, 0];
      shape.rotation = 0;
      shape.scale = [1, 1];

      if (shape) {
        shape.brush(ctx, false);
      }

      var imgShape = new SmicImage({
        id: id,
        style: {
          x: 0,
          y: 0,
          image: canvas
        }
      });

      if (shapeTransform.position != null) {
        imgShape.position = shape.position = shapeTransform.position;
      }

      if (shapeTransform.rotation != null) {
        imgShape.rotation = shape.rotation = shapeTransform.rotation;
      }

      if (shapeTransform.scale != null) {
        imgShape.scale = shape.scale = shapeTransform.scale;
      }

      return imgShape;
    }
    /**
     * Method: _createShapeToImageProcessor
     *
     */

  }, {
    key: "_createShapeToImageProcessor",
    value: function _createShapeToImageProcessor() {
      var me = this;
      return function (id, e, width, height) {
        return me._shapeToImage(id, e, width, height, Painter.devicePixelRatio);
      };
    } // SMIC-æ¹æ³æ©å± - start

    /**
     * @function SuperMap.LevelRenderer.Painter.prototype.updateHoverLayer
     * @description æ´æ°è®¾ç½®æ¾ç¤ºé«äº®å¾å±ã
     * @param {Array} shapes - å¾å½¢æ°ç»ã
     */

  }, {
    key: "updateHoverLayer",
    value: function updateHoverLayer(shapes) {
      if (!(shapes instanceof Array)) {
        return this;
      } //æ¸é¤é«äº®


      this.clearHover();
      this.storage.delHover();

      for (var i = 0; i < shapes.length; i++) {
        this.storage.addHover(shapes[i]);

        this._brushHover(shapes[i]);
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Painter.prototype.createDom
     * @description åå»º Domã
     *
     * @param {string} id - Dom id
     * @param {string} type - Dom type
     * @param {SuperMap.LevelRenderer.Painter} painter - Painter å®ä¾ã
     * @return {Object} Dom
     */

  }], [{
    key: "createDom",
    value: function createDom(id, type, painter) {
      var newDom = document.createElement(type);
      var width = painter._width;
      var height = painter._height; // æ²¡appendå¢ï¼è¯·åè°æè¿æ ·åï¼æ¸æ°~

      newDom.style.position = 'absolute';
      newDom.style.left = 0;
      newDom.style.top = 0;
      newDom.style.width = width + 'px';
      newDom.style.height = height + 'px';
      newDom.setAttribute('width', width * Painter.devicePixelRatio);
      newDom.setAttribute('height', height * Painter.devicePixelRatio); // idä¸ä½ä¸ºç´¢å¼ç¨ï¼é¿åå¯è½é æçéåï¼å®ä¹ä¸ºç§æå±æ§
      //newDom.setAttribute('data-zr-dom-id', id);

      newDom.setAttribute('id', id);
      return newDom;
    }
  }]);

  return Painter;
}();
/**
 * @private
 * @class Painter.Layer
 * @classdesc ç»å¶å±ç±»ã
 * @extends SuperMap.LevelRenderer.Transformable
 */

var PaintLayer = /*#__PURE__*/function (_Transformable) {
  Painter_inherits(PaintLayer, _Transformable);

  var _super = Painter_createSuper(PaintLayer);

  /**
   * @function Painter.Layer.constructor
   * @description æé å½æ°ã
   *
   * @param {string} id - idã
   * @param {SuperMap.LevelRenderer.Painter} painter - Painter å®ä¾ã
   *
   */
  function PaintLayer(id, painter) {
    var _this;

    Painter_classCallCheck(this, PaintLayer);

    _this = _super.call(this, id, painter);
    /**
     * @member {Object} Painter.Layer.prototype.dom
     * @description  domã
     */

    _this.dom = null;
    /**
     * @member {Object} Painter.Layer.prototype.domBack
     * @description domBackã
     */

    _this.domBack = null;
    /**
     * @member {Object} Painter.Layer.prototype.ctxBack
     * @description ctxBackã
     */

    _this.ctxBack = null;
    /**
     * @member {SuperMap.LevelRenderer.Painter} Painter.Layer.prototype.painter
     * @description painterã
     */

    _this.painter = painter;
    /**
     * @member {number} Painter.Layer.prototype.unusedCount
     * @description unusedCountã
     */

    _this.unusedCount = 0;
    /**
     * @member {Object} Painter.Layer.prototype.config
     * @description  configã
     */

    _this.config = null;
    /**
     * @member {boolean} Painter.Layer.prototype.dirty
     * @description dirtyã
     */

    _this.dirty = true;
    /**
     * @member {number} Painter.Layer.prototype.elCount
     * @description elCountã
     */

    _this.elCount = 0; // Configs

    /**
     * @member {string} Painter.Layer.prototype.clearColor
     * @description æ¯æ¬¡æ¸ç©ºç»å¸çé¢è²ãé»è®¤å¼ï¼0ï¼
     */

    _this.clearColor = 0;
    /**
     * @member {boolean} Painter.Layer.prototype.motionBlur
     * @description æ¯å¦å¼å¯å¨ææ¨¡ç³ãé»è®¤å¼ï¼falseï¼
     */

    _this.motionBlur = false;
    /**
     * @member {number} Painter.Layer.prototype.lastFrameAlpha
     * @description å¨å¼å¯å¨ææ¨¡ç³çæ¶åä½¿ç¨ï¼ä¸ä¸ä¸å¸§æ··åçalphaå¼ï¼å¼è¶å¤§å°¾è¿¹è¶ææ¾
     */

    _this.lastFrameAlpha = 0.7;
    /**
     * @member {boolean} Painter.Layer.prototype.zoomable
     * @description å±æ¯å¦æ¯æé¼ æ å¹³ç§»æä½ãé»è®¤å¼ï¼falseï¼
     */

    _this.zoomable = false;
    /**
     * @member {boolean} Painter.Layer.prototype.panable
     * @description å±æ¯å¦æ¯æé¼ æ ç¼©æ¾æä½ãé»è®¤å¼ï¼falseï¼
     */

    _this.panable = false;
    /**
     * @member {number} Painter.Layer.prototype.maxZoom
     * @description maxZoomãé»è®¤å¼ï¼Infinityã
     */

    _this.maxZoom = Infinity;
    /**
     * @member {number} Painter.Layer.prototype.minZoom
     * @description minZoomãé»è®¤å¼ï¼0ã
     */

    _this.minZoom = 0;
    /**
     * @member {number} Painter.Layer.prototype.ctx
     * @description Canvas ä¸ä¸æã
     */

    _this.ctx = null;
    _this.dom = Painter.createDom(Util.createUniqueID("SuperMap.Theme" + id), 'canvas', painter);
    _this.dom.onselectstart = returnFalse; // é¿åé¡µé¢éä¸­çå°´å°¬

    _this.dom.style['-webkit-user-select'] = 'none';
    _this.dom.style['user-select'] = 'none';
    _this.dom.style['-webkit-touch-callout'] = 'none'; // Function
    // è¿åfalseçæ¹æ³ï¼ç¨äºé¿åé¡µé¢è¢«éä¸­

    function returnFalse() {
      return false;
    }

    _this.CLASS_NAME = "SuperMap.LevelRenderer.Painter.Layer";
    return _this;
  }
  /**
   * @function Painter.Layer.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  Painter_createClass(PaintLayer, [{
    key: "destroy",
    value: function destroy() {
      this.dom = null;
      this.domBack = null;
      this.ctxBack = null;
      this.painter = null;
      this.unusedCount = null;
      this.config = null;
      this.dirty = null;
      this.elCount = null;
      this.clearColor = null;
      this.motionBlur = null;
      this.lastFrameAlpha = null;
      this.zoomable = null;
      this.panable = null;
      this.maxZoom = null;
      this.minZoom = null;
      this.ctx = null;
      Transformable.destroy.apply(this, arguments);
    }
    /**
     * @function Painter.Layer.prototype.initContext
     * @description åå§å Canvan 2D ä¸ä¸æã
     */

  }, {
    key: "initContext",
    value: function initContext() {
      this.ctx = this.dom.getContext('2d');

      if (Painter.devicePixelRatio != 1) {
        this.ctx.scale(Painter.devicePixelRatio, Painter.devicePixelRatio);
      }
    }
    /**
     * @function Painter.Layer.prototype.createBackBuffer
     * @description  åå»ºå¤ä»½ç¼å²ã
     */

  }, {
    key: "createBackBuffer",
    value: function createBackBuffer() {
      this.domBack = Painter.createDom(Util.createUniqueID("SuperMap.Theme.back-" + this.id), 'canvas', this.painter);
      this.ctxBack = this.domBack.getContext('2d');

      if (Painter.devicePixelRatio != 1) {
        this.ctxBack.scale(Painter.devicePixelRatio, Painter.devicePixelRatio);
      }
    }
    /**
     * @function Painter.Layer.prototype.resize
     * @description æ¹åå¤§å°ã
     *
     * @param {number} width - å®½ã
     * @param {number} height - é«ã
     */

  }, {
    key: "resize",
    value: function resize(width, height) {
      this.dom.style.width = width + 'px';
      this.dom.style.height = height + 'px';
      this.dom.setAttribute('width', width * Painter.devicePixelRatio);
      this.dom.setAttribute('height', height * Painter.devicePixelRatio);

      if (Painter.devicePixelRatio != 1) {
        this.ctx.scale(Painter.devicePixelRatio, Painter.devicePixelRatio);
      }

      if (this.domBack) {
        this.domBack.setAttribute('width', width * Painter.devicePixelRatio);
        this.domBack.setAttribute('height', height * Painter.devicePixelRatio);

        if (Painter.devicePixelRatio != 1) {
          this.ctxBack.scale(Painter.devicePixelRatio, Painter.devicePixelRatio);
        }
      }
    }
    /**
     * @function Painter.Layer.prototype.clear
     * @description æ¸ç©ºè¯¥å±ç»å¸ã
     */

  }, {
    key: "clear",
    value: function clear() {
      var dom = this.dom;
      var ctx = this.ctx;
      var width = dom.width;
      var height = dom.height;
      var haveClearColor = this.clearColor;
      var haveMotionBLur = this.motionBlur;
      var lastFrameAlpha = this.lastFrameAlpha;

      if (haveMotionBLur) {
        if (!this.domBack) {
          this.createBackBuffer();
        }

        this.ctxBack.globalCompositeOperation = 'copy';
        this.ctxBack.drawImage(dom, 0, 0, width / Painter.devicePixelRatio, height / Painter.devicePixelRatio);
      }

      if (haveClearColor) {
        ctx.save();
        ctx.fillStyle = this.config.clearColor;
        ctx.fillRect(0, 0, width / Painter.devicePixelRatio, height / Painter.devicePixelRatio);
        ctx.restore();
      } else {
        ctx.clearRect(0, 0, width / Painter.devicePixelRatio, height / Painter.devicePixelRatio);
      }

      if (haveMotionBLur) {
        var domBack = this.domBack;
        ctx.save();
        ctx.globalAlpha = lastFrameAlpha;
        ctx.drawImage(domBack, 0, 0, width / Painter.devicePixelRatio, height / Painter.devicePixelRatio);
        ctx.restore();
      }
    }
  }]);

  return PaintLayer;
}(Transformable);
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Handler.js
function Handler_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Handler_typeof = function _typeof(obj) { return typeof obj; }; } else { Handler_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Handler_typeof(obj); }

function Handler_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Handler_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Handler_createClass(Constructor, protoProps, staticProps) { if (protoProps) Handler_defineProperties(Constructor.prototype, protoProps); if (staticProps) Handler_defineProperties(Constructor, staticProps); return Constructor; }

function Handler_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Handler_setPrototypeOf(subClass, superClass); }

function Handler_setPrototypeOf(o, p) { Handler_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Handler_setPrototypeOf(o, p); }

function Handler_createSuper(Derived) { var hasNativeReflectConstruct = Handler_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Handler_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Handler_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Handler_possibleConstructorReturn(this, result); }; }

function Handler_possibleConstructorReturn(self, call) { if (call && (Handler_typeof(call) === "object" || typeof call === "function")) { return call; } return Handler_assertThisInitialized(self); }

function Handler_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Handler_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Handler_getPrototypeOf(o) { Handler_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Handler_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @private
 * @class  SuperMap.LevelRenderer.Handler
 * @category Visualization Theme
 * @classdesc Handleræ§å¶æ¨¡åã
 * @extends {SuperMap.LevelRenderer.Eventful}
 */

var Handler = /*#__PURE__*/function (_Eventful) {
  Handler_inherits(Handler, _Eventful);

  var _super = Handler_createSuper(Handler);

  /**
   * @function SuperMap.LevelRenderer.Handler.constructor
   * @description æé å½æ°ã
   * @param {HTMLElement} root - ç»å¾åºåã
   * @param {SuperMap.LevelRenderer.Storage} storage - Storage å®ä¾ã
   * @param {SuperMap.LevelRenderer.Painter} painter - Painter å®ä¾ã
   */
  function Handler(root, storage, painter) {
    var _this;

    Handler_classCallCheck(this, Handler);

    _this = _super.call(this, root, storage, painter);
    /**
     * @member {HTMLElement} SuperMap.LevelRenderer.Handler.prototype.root
     * @description ç»å¾åºå
     */

    _this.root = root;
    /**
     * @member {SuperMap.LevelRenderer.Storage} SuperMap.LevelRenderer.Handler.prototype.storage
     * @description Storage å®ä¾
     */

    _this.storage = storage;
    /**
     * @member {SuperMap.LevelRenderer.Painter} SuperMap.LevelRenderer.Handler.prototype.Painter
     * @description Painter å®ä¾
     */

    _this.painter = painter;
    /**
     * @member {number} [SuperMap.LevelRenderer.Handler.prototype._lastX=0]
     * @description ä¸ä¸æ¬¡é¼ æ ä½ç½®xåæ å¼
     */

    _this._lastX = 0;
    /**
     * @member {number} [SuperMap.LevelRenderer.Handler.prototype._lastY=0]
     * @description ä¸ä¸æ¬¡é¼ æ ä½ç½®yåæ å¼
     */

    _this._lastY = 0;
    /**
     * @member {number} [SuperMap.LevelRenderer.Handler.prototype._mouseX=0]
     * @description å½åé¼ æ ä½ç½®xåæ å¼
     */

    _this._mouseX = 0;
    /**
     * @member {number} [SuperMap.LevelRenderer.Handler.prototype._mouseY=0]
     * @description å½åé¼ æ ä½ç½®yåæ å¼
     */

    _this._mouseY = 0;
    /**
     * @member {Function} SuperMap.LevelRenderer.Handler.prototype._findHover
     * @description æ¥æ¾ Hover å¾å½¢
     */

    _this._findHover = null;
    /**
     * @member {Object} SuperMap.LevelRenderer.Handler.prototype._domHover
     * @description é«äº® DOM
     */

    _this._domHover = null; // åç§äºä»¶æ è¯çç§æåé
    // this._hasfound = false;              // æ¯å¦æ¾å° hover å¾å½¢åç´ 
    // this._lastHover = null;              // æåä¸ä¸ª hover å¾å½¢åç´ 
    // this._mouseDownTarget = null;
    // this._draggingTarget = null;         // å½åè¢«ææ½çå¾å½¢åç´ 
    // this._isMouseDown = false;
    // this._isDragging = false;
    // this._lastMouseDownMoment;
    // this._lastTouchMoment;
    // this._lastDownButton;

    _this._findHover = bind3Arg(findHover, Handler_assertThisInitialized(_this));
    _this._domHover = painter.getDomHover();
    _this.CLASS_NAME = "SuperMap.LevelRenderer.Handler";
    var domHandlers = {
      /**
       * Method: resize
       * çªå£å¤§å°æ¹åååºå½æ°ã
       *
       * Parameters:
       * event - {Event} eventã
       *
       */
      resize: function resize(event) {
        event = event || window.event;
        this._lastHover = null;
        this._isMouseDown = 0; // ååSuperMap.LevelRenderer.Config.EVENT.RESIZEäºä»¶ï¼global

        this.dispatch(Config.EVENT.RESIZE, event);
      },

      /**
       * Method: click
       * ç¹å»ååºå½æ°ã
       *
       * Parameters:
       * event - {Event} eventã
       *
       */
      click: function click(event) {
        event = this._zrenderEventFixed(event); // ååSuperMap.LevelRenderer.Config.EVENT.CLICKäºä»¶

        var _lastHover = this._lastHover;

        if (_lastHover && _lastHover.clickable || !_lastHover) {
          // å¤æ­æ²¡æåçææ½æè§¦åclickäºä»¶
          if (this._clickThreshold < 10) {
            this._dispatchAgency(_lastHover, Config.EVENT.CLICK, event);
          }
        }

        this._mousemoveHandler(event);
      },

      /**
       * Method: dblclick
       * åå»ååºå½æ°ã
       *
       * Parameters:
       * event - {Event} eventã
       *
       */
      dblclick: function dblclick(event) {
        event = event || window.event;
        event = this._zrenderEventFixed(event); // ååSuperMap.LevelRenderer.Config.EVENT.DBLCLICKäºä»¶

        var _lastHover = this._lastHover;

        if (_lastHover && _lastHover.clickable || !_lastHover) {
          // å¤æ­æ²¡æåçææ½æè§¦ådblclickäºä»¶
          if (this._clickThreshold < 5) {
            this._dispatchAgency(_lastHover, Config.EVENT.DBLCLICK, event);
          }
        }

        this._mousemoveHandler(event);
      },

      /**
       * Method: mousewheel
       * é¼ æ æ»è½®ååºå½æ°ã
       *
       * Parameters:
       * event - {Event} eventã
       *
       */
      mousewheel: function mousewheel(event) {
        event = this._zrenderEventFixed(event); // http://www.sitepoint.com/html5-javascript-mouse-wheel/
        // https://developer.mozilla.org/en-US/docs/DOM/DOM_event_reference/mousewheel

        var delta = event.wheelDelta // Webkit
        || -event.detail; // Firefox

        var scale = delta > 0 ? 1.1 : 1 / 1.1;
        var layers = this.painter.getLayers();
        var needsRefresh = false;

        for (var z in layers) {
          if (z !== 'hover') {
            var layer = layers[z];
            var pos = layer.position;

            if (layer.zoomable) {
              layer.__zoom = layer.__zoom || 1;
              var newZoom = layer.__zoom;
              newZoom *= scale;
              newZoom = Math.max(Math.min(layer.maxZoom, newZoom), layer.minZoom);
              scale = newZoom / layer.__zoom;
              layer.__zoom = newZoom; // Keep the mouse center when scaling

              pos[0] -= (this._mouseX - pos[0]) * (scale - 1);
              pos[1] -= (this._mouseY - pos[1]) * (scale - 1);
              layer.scale[0] *= scale;
              layer.scale[1] *= scale;
              layer.dirty = true;
              needsRefresh = true;
            }
          }
        }

        if (needsRefresh) {
          this.painter.refresh();
        } // ååSuperMap.LevelRenderer.Config.EVENT.MOUSEWHEELäºä»¶


        this._dispatchAgency(this._lastHover, Config.EVENT.MOUSEWHEEL, event);

        this._mousemoveHandler(event);
      },

      /**
       * Method: mousemove
       * é¼ æ ï¼ææï¼ç§»å¨ååºå½æ°ã
       *
       * Parameters:
       * event - {Event} eventã
       *
       */
      mousemove: function mousemove(event) {
        // ææ½ä¸è§¦åclickäºä»¶
        this._clickThreshold++;
        event = this._zrenderEventFixed(event);
        this._lastX = this._mouseX;
        this._lastY = this._mouseY;
        this._mouseX = SUtil_SUtil.Util_event.getX(event);
        this._mouseY = SUtil_SUtil.Util_event.getY(event);
        var dx = this._mouseX - this._lastX;
        var dy = this._mouseY - this._lastY; // å¯è½åºç°SuperMap.LevelRenderer.Config.EVENT.DRAGSTARTäºä»¶
        // é¿åææç¹å»è¯¯è®¤ä¸ºææ½
        // if (this._mouseX - this._lastX > 1 || this._mouseY - this._lastY > 1) {

        this._processDragStart(event); // }


        this._hasfound = 0;
        this._event = event;

        this._iterateAndFindHover(); // æ¾å°çå¨è¿­ä»£å½æ°éåäºå¤çï¼æ²¡æ¾å°å¾å¨è¿­ä»£å®åå¤ç


        if (!this._hasfound) {
          // è¿æ»¤é¦æ¬¡ææ½äº§ççmouseoutådragLeave
          if (!this._draggingTarget || this._lastHover && this._lastHover != this._draggingTarget) {
            // å¯è½åºç°SuperMap.LevelRenderer.Config.EVENT.MOUSEOUTäºä»¶
            this._processOutShape(event); // å¯è½åºç°SuperMap.LevelRenderer.Config.EVENT.DRAGLEAVEäºä»¶


            this._processDragLeave(event);
          }

          this._lastHover = null;
          this.storage.delHover();
          this.painter.clearHover();
        } // set cursor for root element


        var cursor = ''; // å¦æå­å¨ææ½ä¸­åç´ ï¼è¢«ææ½çå¾å½¢åç´ æåaddHover

        if (this._draggingTarget) {
          this.storage.drift(this._draggingTarget.id, dx, dy);

          this._draggingTarget.modSelf();

          this.storage.addHover(this._draggingTarget);
        } else if (this._isMouseDown) {
          // Layer dragging
          var layers = this.painter.getLayers();
          var needsRefresh = false;

          for (var z in layers) {
            if (z !== 'hover') {
              var layer = layers[z];

              if (layer.panable) {
                // PENDING
                cursor = 'move'; // Keep the mouse center when scaling

                layer.position[0] += dx;
                layer.position[1] += dy;
                needsRefresh = true;
                layer.dirty = true;
              }
            }
          }

          if (needsRefresh) {
            this.painter.refresh();
          }
        }

        if (this._draggingTarget || this._hasfound && this._lastHover.draggable) {
          cursor = 'move';
        } else if (this._hasfound && this._lastHover.clickable) {
          cursor = 'pointer';
        }

        this.root.style.cursor = cursor; // ååSuperMap.LevelRenderer.Config.EVENT.MOUSEMOVEäºä»¶

        this._dispatchAgency(this._lastHover, Config.EVENT.MOUSEMOVE, event);

        if (this._draggingTarget || this._hasfound || this.storage.hasHoverShape()) {
          this.painter.refreshHover();
        }
      },

      /**
       * Method: mouseout
       * é¼ æ ï¼ææï¼ç¦»å¼ååºå½æ°ã
       *
       * Parameters:
       * event - {Event} eventã
       *
       */
      mouseout: function mouseout(event) {
        event = this._zrenderEventFixed(event);
        var element = event.toElement || event.relatedTarget;

        if (element != this.root) {
          while (element && element.nodeType != 9) {
            // å¿½ç¥åå«å¨rootä¸­çdomå¼èµ·çmouseOut
            if (element == this.root) {
              this._mousemoveHandler(event);

              return;
            }

            element = element.parentNode;
          }
        }

        event.zrenderX = this._lastX;
        event.zrenderY = this._lastY;
        this.root.style.cursor = '';
        this._isMouseDown = 0;

        this._processOutShape(event);

        this._processDrop(event);

        this._processDragEnd(event);

        this.painter.refreshHover();
        this.dispatch(Config.EVENT.GLOBALOUT, event);
      },

      /**
       * Method: mousedown
       * é¼ æ ï¼ææï¼æä¸ååºå½æ°ã
       *
       * Parameters:
       * event - {Event} eventã
       *
       */
      mousedown: function mousedown(event) {
        // éç½® clickThreshold
        this._clickThreshold = 0;

        if (this._lastDownButton == 2) {
          this._lastDownButton = event.button;
          this._mouseDownTarget = null; // ä»ä½ä¸ºå³é­å³é®èåä½¿ç¨

          return;
        }

        this._lastMouseDownMoment = new Date();
        event = this._zrenderEventFixed(event);
        this._isMouseDown = 1; // ååSuperMap.LevelRenderer.Config.EVENT.MOUSEDOWNäºä»¶

        this._mouseDownTarget = this._lastHover;

        this._dispatchAgency(this._lastHover, Config.EVENT.MOUSEDOWN, event);

        this._lastDownButton = event.button;
      },

      /**
       * Method: mouseup
       * é¼ æ ï¼ææï¼æ¬èµ·ååºå½æ°ã
       *
       * Parameters:
       * event - {Event} eventã
       *
       */
      mouseup: function mouseup(event) {
        event = this._zrenderEventFixed(event);
        this.root.style.cursor = '';
        this._isMouseDown = 0;
        this._mouseDownTarget = null; // ååSuperMap.LevelRenderer.Config.EVENT.MOUSEUPäºä»¶

        this._dispatchAgency(this._lastHover, Config.EVENT.MOUSEUP, event);

        this._processDrop(event);

        this._processDragEnd(event);
      },

      /**
       * Method: touchstart
       * Touch å¼å§ååºå½æ°ã
       *
       * Parameters:
       * event - {Event} eventã
       *
       */
      touchstart: function touchstart(event) {
        // SUtil.Util_event.stop(event);// é»æ­¢æµè§å¨é»è®¤äºä»¶ï¼éè¦
        event = this._zrenderEventFixed(event, true);
        this._lastTouchMoment = new Date(); // å¹³æ¿è¡¥åä¸æ¬¡findHover

        this._mobildFindFixed(event);

        this._mousedownHandler(event);
      },

      /**
       * Method: touchmove
       * Touch ç§»å¨ååºå½æ°ã
       *
       * Parameters:
       * event - {Event} eventã
       *
       */
      touchmove: function touchmove(event) {
        event = this._zrenderEventFixed(event, true);

        this._mousemoveHandler(event);

        if (this._isDragging) {
          SUtil_SUtil.Util_event.stop(event); // é»æ­¢æµè§å¨é»è®¤äºä»¶ï¼éè¦
        }
      },

      /**
       * Method: touchend
       * Touch ç»æååºå½æ°ã
       *
       * Parameters:
       * event - {Event} eventã
       *
       */
      touchend: function touchend(event) {
        // SUtil.Util_event.stop(event);// é»æ­¢æµè§å¨é»è®¤äºä»¶ï¼éè¦
        event = this._zrenderEventFixed(event, true);

        this._mouseupHandler(event);

        var now = new Date();

        if (now - this._lastTouchMoment < Config.EVENT.touchClickDelay) {
          this._mobildFindFixed(event);

          this._clickHandler(event);

          if (now - this._lastClickMoment < Config.EVENT.touchClickDelay / 2) {
            this._dblclickHandler(event);

            if (this._lastHover && this._lastHover.clickable) {
              SUtil_SUtil.Util_event.stop(event); // é»æ­¢æµè§å¨é»è®¤äºä»¶ï¼éè¦
            }
          }

          this._lastClickMoment = now;
        }

        this.painter.clearHover();
      }
    };
    initDomHandler(Handler_assertThisInitialized(_this)); // åå§åï¼äºä»¶ç»å®ï¼æ¯æçææäºä»¶é½ç±å¦ä¸åçäºä»¶è®¡ç®å¾æ¥

    if (window.addEventListener) {
      window.addEventListener('resize', _this._resizeHandler);

      if (SUtil_SUtil.Util_env.os.tablet || SUtil_SUtil.Util_env.os.phone) {
        // mobileæ¯æ
        root.addEventListener('touchstart', _this._touchstartHandler);
        root.addEventListener('touchmove', _this._touchmoveHandler);
        root.addEventListener('touchend', _this._touchendHandler);
      } else {
        // mobileçclick/move/up/downèªå·±æ¨¡æ
        root.addEventListener('click', _this._clickHandler);
        root.addEventListener('dblclick', _this._dblclickHandler);
        root.addEventListener('mousewheel', _this._mousewheelHandler);
        root.addEventListener('mousemove', _this._mousemoveHandler);
        root.addEventListener('mousedown', _this._mousedownHandler);
        root.addEventListener('mouseup', _this._mouseupHandler);
      }

      root.addEventListener('DOMMouseScroll', _this._mousewheelHandler);
      root.addEventListener('mouseout', _this._mouseoutHandler);
    } else {
      window.attachEvent('onresize', _this._resizeHandler);
      root.attachEvent('onclick', _this._clickHandler); //root.attachEvent('ondblclick ', this._dblclickHandler);

      root.ondblclick = _this._dblclickHandler;
      root.attachEvent('onmousewheel', _this._mousewheelHandler);
      root.attachEvent('onmousemove', _this._mousemoveHandler);
      root.attachEvent('onmouseout', _this._mouseoutHandler);
      root.attachEvent('onmousedown', _this._mousedownHandler);
      root.attachEvent('onmouseup', _this._mouseupHandler);
    } // è¾å©å½æ° start

    /**
     * Method: bind1Arg
     * bind ä¸ä¸ªåæ°ç functionã
     *
     * Parameters:
     * handler - {Function} è¦ bind ç functionã
     * context - {Object} è¿è¡æ¶ this ç¯å¢ã
     *
     * Returns:
     * {Function}
     */


    function bind1Arg(handler, context) {
      return function (e) {
        return handler.call(context, e);
      };
    }
    /*
     // bind ä¸¤ä¸ªåæ°ç function
     function bind2Arg(handler, context) {
     return function (arg1, arg2) {
     return handler.call(context, arg1, arg2);
     };
     }
     */
    // bind ä¸ä¸ªåæ°ç function


    function bind3Arg(handler, context) {
      return function (arg1, arg2, arg3) {
        return handler.call(context, arg1, arg2, arg3);
      };
    }
    /**
     * Method: initDomHandler
     * ä¸ºæ§å¶ç±»å®ä¾åå§å dom äºä»¶å¤çå½æ°ã
     *
     * Parameters:
     * instance - {<SuperMap.LevelRenderer.Handler>} æ§å¶ç±»å®ä¾ ã
     *
     * Returns:
     * {Function}
     */


    function initDomHandler(instance) {
      var domHandlerNames = ['resize', 'click', 'dblclick', 'mousewheel', 'mousemove', 'mouseout', 'mouseup', 'mousedown', 'touchstart', 'touchend', 'touchmove'];
      var len = domHandlerNames.length;

      while (len--) {
        var name = domHandlerNames[len];
        instance['_' + name + 'Handler'] = bind1Arg(domHandlers[name], instance);
      }
    }
    /**
     * Method: findHover
     * è¿­ä»£å½æ°ï¼æ¥æ¾ hover å°çå¾å½¢åç´ å¹¶å³æ¶åäºäºä»¶ååã
     *
     * Parameters:
     * shape - {Object} å¾å½¢ã
     * x - {number} é¼ æ  xã
     * y - {number} é¼ æ  yã
     *
     * Returns:
     * {boolean} æ¯å¦æ¾å°å¾å½¢ã
     *
     */


    function findHover(shape, x, y) {
      var me = this;

      if (me._draggingTarget && me._draggingTarget.id == shape.id || // è¿­ä»£å°å½åææ½çå¾å½¢ä¸
      shape.isSilent() // æé±æ²¹çè·¯è¿ï¼å¥é½ä¸ååºçshape~
      ) {
          return false;
        }

      var event = me._event;

      if (shape.isCover(x, y)) {
        if (shape.hoverable) {
          // SMIC-ä¿®æ¹ - start
          if (shape.isHoverByRefDataID && shape.isHoverByRefDataID === true) {
            if (shape.refDataID) {
              var fid = shape.refDataID; //me.painter.clearHover();
              //me.storage.delHover();

              var hoverGroup = null;

              if (shape.refDataHoverGroup) {
                hoverGroup = shape.refDataHoverGroup;
              } //æ¥æ¾åä¸ä¸ªç¨æ·æ°æ® feature çææå¾å½¢


              var shapeList = me.storage._shapeList;

              for (var i = 0, len = shapeList.length; i < len; i++) {
                var si = shapeList[i];

                if (si.refDataID && fid === si.refDataID) {
                  if (hoverGroup) {
                    if (si.refDataHoverGroup && hoverGroup === si.refDataHoverGroup) {
                      me.storage.addHover(si);
                    }
                  } else {
                    me.storage.addHover(si);
                  }
                }
              }
            }
          } else {
            me.storage.addHover(shape);
          } //åå§ä»£ç ï¼
          //  me.storage.addHover(shape);
          // SMIC-ä¿®æ¹ - end

        } // æ¥æ¾æ¯å¦å¨ clipShape ä¸­


        var p = shape.parent;

        while (p) {
          if (p.clipShape && !p.clipShape.isCover(me._mouseX, me._mouseY)) {
            // å·²ç»è¢«ç¥å clip æäº
            return false;
          }

          p = p.parent;
        }

        if (me._lastHover != shape) {
          me._processOutShape(event); // å¯è½åºç°SuperMap.LevelRenderer.Config.EVENT.DRAGLEAVEäºä»¶


          me._processDragLeave(event);

          me._lastHover = shape; // å¯è½åºç°SuperMap.LevelRenderer.Config.EVENT.DRAGENTERäºä»¶

          me._processDragEnter(event);
        }

        me._processOverShape(event); // å¯è½åºç°SuperMap.LevelRenderer.Config.EVENT.DRAGOVER


        me._processDragOver(event);

        me._hasfound = 1;
        return true; // æ¾å°åä¸­æ­è¿­ä»£æ¥æ¾
      }

      return false;
    } // è¾å©å½æ° end


    return _this;
  }
  /**
   * @function SuperMap.LevelRenderer.Handler.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸ºnullã
   */


  Handler_createClass(Handler, [{
    key: "destroy",
    value: function destroy() {
      this.dispose();
      this._lastX = null;
      this._lastY = null;
      this._mouseX = null;
      this._mouseY = null;
      this._findHover = null;
      Eventful.prototype.destroy.apply(this, arguments);
    }
    /**
     * @function SuperMap.LevelRenderer.Handler.prototype.on
     * @description èªå®ä¹äºä»¶ç»å®ã
     * @param {string} eventName - äºä»¶åç§°ï¼resizeãhoverãdragç­ã
     * @param {function} handler - ååºå½æ°ã
     * @returns {SuperMap.LevelRenderer.Handler} thisã
     */

  }, {
    key: "on",
    value: function on(eventName, handler) {
      this.bind(eventName, handler);
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Handler.prototype.un
     * @description èªå®ä¹äºä»¶è§£é¤ç»å®ã
     * @param {string} eventName - äºä»¶åç§°ï¼resizeãhoverãdragç­ã
     * @param {function} handler - ååºå½æ°ã
     * @returns {SuperMap.LevelRenderer.Handler} thisã
     */

  }, {
    key: "un",
    value: function un(eventName, handler) {
      this.unbind(eventName, handler);
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Handler.prototype.trigger
     * @description äºä»¶è§¦åã
     * @param {string} eventName - äºä»¶åç§°ï¼resizeãhoverãdragç­ã
     * @param {event} eventArgs - domäºä»¶å¯¹è±¡ã
     */

  }, {
    key: "trigger",
    value: function trigger(eventName, eventArgs) {
      var EVENT = Config.EVENT;

      switch (eventName) {
        case EVENT.RESIZE:
        case EVENT.CLICK:
        case EVENT.DBLCLICK:
        case EVENT.MOUSEWHEEL:
        case EVENT.MOUSEMOVE:
        case EVENT.MOUSEDOWN:
        case EVENT.MOUSEUP:
        case EVENT.MOUSEOUT:
          this['_' + eventName + 'Handler'](eventArgs);
          break;
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Handler.prototype.dispose
     * @description éæ¾ï¼è§£ç»ææäºä»¶ã
     */

  }, {
    key: "dispose",
    value: function dispose() {
      var root = this.root;

      if (window.removeEventListener) {
        window.removeEventListener('resize', this._resizeHandler);

        if (SUtil_SUtil.Util_env.os.tablet || SUtil_SUtil.Util_env.os.phone) {
          // mobileæ¯æ
          root.removeEventListener('touchstart', this._touchstartHandler);
          root.removeEventListener('touchmove', this._touchmoveHandler);
          root.removeEventListener('touchend', this._touchendHandler);
        } else {
          // mobileçclickèªå·±æ¨¡æ
          root.removeEventListener('click', this._clickHandler);
          root.removeEventListener('dblclick', this._dblclickHandler);
          root.removeEventListener('mousewheel', this._mousewheelHandler);
          root.removeEventListener('mousemove', this._mousemoveHandler);
          root.removeEventListener('mousedown', this._mousedownHandler);
          root.removeEventListener('mouseup', this._mouseupHandler);
        }

        root.removeEventListener('DOMMouseScroll', this._mousewheelHandler);
        root.removeEventListener('mouseout', this._mouseoutHandler);
      } else {
        window.detachEvent('onresize', this._resizeHandler);
        root.detachEvent('onclick', this._clickHandler);
        root.detachEvent('dblclick', this._dblclickHandler);
        root.detachEvent('onmousewheel', this._mousewheelHandler);
        root.detachEvent('onmousemove', this._mousemoveHandler);
        root.detachEvent('onmouseout', this._mouseoutHandler);
        root.detachEvent('onmousedown', this._mousedownHandler);
        root.detachEvent('onmouseup', this._mouseupHandler);
      }

      this.root = null;
      this._domHover = null;
      this.storage = null;
      this.painter = null;
      this.un();
    }
    /**
     * Method: _processDragStart
     * ææ½å¼å§ã
     *
     * Parameters:
     * event - {Object} äºä»¶å¯¹è±¡ã
     *
     */

  }, {
    key: "_processDragStart",
    value: function _processDragStart(event) {
      var _lastHover = this._lastHover;

      if (this._isMouseDown && _lastHover && _lastHover.draggable && !this._draggingTarget && this._mouseDownTarget == _lastHover) {
        // ææ½ç¹å»çææ¶é¿éé¨ï¼æäºåºæ¯éè¦éä½ææ½ææåº¦
        if (_lastHover.dragEnableTime && new Date() - this._lastMouseDownMoment < _lastHover.dragEnableTime) {
          return;
        }

        var _draggingTarget = _lastHover;
        this._draggingTarget = _draggingTarget;
        this._isDragging = 1;
        _draggingTarget.invisible = true;
        this.storage.mod(_draggingTarget.id); // åå Config.EVENT.DRAGSTARTäºä»¶

        this._dispatchAgency(_draggingTarget, Config.EVENT.DRAGSTART, event);

        this.painter.refresh();
      }
    }
    /**
     * Method: _processDragEnter
     * ææ½è¿å¥ç®æ åç´ ã
     *
     * Parameters:
     * event - {Object} äºä»¶å¯¹è±¡ã
     *
     */

  }, {
    key: "_processDragEnter",
    value: function _processDragEnter(event) {
      if (this._draggingTarget) {
        // ååSuperMap.LevelRenderer.Config.EVENT.DRAGENTERäºä»¶
        this._dispatchAgency(this._lastHover, Config.EVENT.DRAGENTER, event, this._draggingTarget);
      }
    }
    /**
     * Method: _processDragOver
     * ææ½å¨ç®æ åç´ ä¸ç§»å¨ã
     *
     * Parameters:
     * event - {Object} äºä»¶å¯¹è±¡ã
     *
     */

  }, {
    key: "_processDragOver",
    value: function _processDragOver(event) {
      if (this._draggingTarget) {
        // ååSuperMap.LevelRenderer.Config.EVENT.DRAGOVERäºä»¶
        this._dispatchAgency(this._lastHover, Config.EVENT.DRAGOVER, event, this._draggingTarget);
      }
    }
    /**
     * Method: _processDragLeave
     * ææ½ç¦»å¼ç®æ åç´ ã
     *
     * Parameters:
     * event - {Object} äºä»¶å¯¹è±¡ã
     *
     */

  }, {
    key: "_processDragLeave",
    value: function _processDragLeave(event) {
      if (this._draggingTarget) {
        // ååSuperMap.LevelRenderer.Config.EVENT.DRAGLEAVEäºä»¶
        this._dispatchAgency(this._lastHover, Config.EVENT.DRAGLEAVE, event, this._draggingTarget);
      }
    }
    /**
     * Method: _processDrop
     * ææ½å¨ç®æ åç´ ä¸å®æã
     *
     * Parameters:
     * event - {Object} äºä»¶å¯¹è±¡ã
     *
     */

  }, {
    key: "_processDrop",
    value: function _processDrop(event) {
      if (this._draggingTarget) {
        this._draggingTarget.invisible = false;
        this.storage.mod(this._draggingTarget.id);
        this.painter.refresh(); // ååSuperMap.LevelRenderer.Config.EVENT.DROPäºä»¶

        this._dispatchAgency(this._lastHover, Config.EVENT.DROP, event, this._draggingTarget);
      }
    }
    /**
     * Method: _processDragEnd
     * ææ½ç»æã
     *
     * Parameters:
     * event - {Object} äºä»¶å¯¹è±¡ã
     *
     */

  }, {
    key: "_processDragEnd",
    value: function _processDragEnd(event) {
      if (this._draggingTarget) {
        // ååSuperMap.LevelRenderer.Config.EVENT.DRAGENDäºä»¶
        this._dispatchAgency(this._draggingTarget, Config.EVENT.DRAGEND, event);

        this._lastHover = null;
      }

      this._isDragging = 0;
      this._draggingTarget = null;
    }
    /**
     * Method: _processOverShape
     * é¼ æ å¨æä¸ªå¾å½¢åç´ ä¸ç§»å¨ã
     *
     * Parameters:
     * event - {Object} äºä»¶å¯¹è±¡ã
     *
     */

  }, {
    key: "_processOverShape",
    value: function _processOverShape(event) {
      // ååSuperMap.LevelRenderer.Config.EVENT.MOUSEOVERäºä»¶
      this._dispatchAgency(this._lastHover, Config.EVENT.MOUSEOVER, event);
    }
    /**
     * Method: _processOutShape
     * é¼ æ ç¦»å¼æä¸ªå¾å½¢åç´ ã
     *
     * Parameters:
     * event - {Object} äºä»¶å¯¹è±¡ã
     *
     */

  }, {
    key: "_processOutShape",
    value: function _processOutShape(event) {
      // ååSuperMap.LevelRenderer.Config.EVENT.MOUSEOUTäºä»¶
      this._dispatchAgency(this._lastHover, Config.EVENT.MOUSEOUT, event);
    }
    /**
     * Method: _dispatchAgency
     * é¼ æ ç¦»å¼æä¸ªå¾å½¢åç´ ã
     *
     * Parameters:
     * targetShape - {Object} ç®æ å¾å½¢åç´ ã
     * eventName - {Object} äºä»¶åç§°ã
     * event - {Object} äºä»¶å¯¹è±¡ã
     * draggedShape - {Object} ææ½äºä»¶ç¹æï¼å½åè¢«ææ½å¾å½¢åç´ ã
     *
     */

  }, {
    key: "_dispatchAgency",
    value: function _dispatchAgency(targetShape, eventName, event, draggedShape) {
      var eventHandler = 'on' + eventName;
      var eventPacket = {
        type: eventName,
        event: event,
        target: targetShape,
        cancelBubble: false
      };
      var el = targetShape;

      if (draggedShape) {
        eventPacket.dragged = draggedShape;
      }

      while (el) {
        el[eventHandler] && (eventPacket.cancelBubble = el[eventHandler](eventPacket));
        el.dispatch(eventName, eventPacket);
        el = el.parent;

        if (eventPacket.cancelBubble) {
          break;
        }
      }

      if (targetShape) {
        // åæ³¡å°é¡¶çº§ zrender å¯¹è±¡
        if (!eventPacket.cancelBubble) {
          this.dispatch(eventName, eventPacket);
        }
      } else if (!draggedShape) {
        // æ hoverç®æ ï¼æ ææ½å¯¹è±¡ï¼åçäºä»¶åå
        this.dispatch(eventName, {
          type: eventName,
          event: event
        });
      }
    }
    /**
     * Method: _iterateAndFindHover
     * è¿­ä»£å¯»æ¾ hover shapeã
     *
     */

  }, {
    key: "_iterateAndFindHover",
    value: function _iterateAndFindHover() {
      var invTransform = SUtil_SUtil.Util_matrix.create();
      var list = this.storage.getShapeList();
      var currentZLevel;
      var currentLayer;
      var tmp = [0, 0];

      for (var i = list.length - 1; i >= 0; i--) {
        var shape = list[i];

        if (currentZLevel !== shape.zlevel) {
          currentLayer = this.painter.getLayer(shape.zlevel, currentLayer);
          tmp[0] = this._mouseX;
          tmp[1] = this._mouseY;

          if (currentLayer.needTransform) {
            SUtil_SUtil.Util_matrix.invert(invTransform, currentLayer.transform);
            SUtil_SUtil.Util_vector.applyTransform(tmp, tmp, invTransform);
          }
        }

        if (this._findHover(shape, tmp[0], tmp[1])) {
          break;
        }
      }
    }
    /**
     * Method: _mobildFindFixed
     * touch ææå°éè§ï¼ååå°è¯ï¼è®©touchä¸çç¹å»æ´å¥½è§¦åäºä»¶ã
     *
     * Parameters:
     * event - {Object} äºä»¶å¯¹è±¡ã
     *
     */

  }, {
    key: "_mobildFindFixed",
    value: function _mobildFindFixed(event) {
      // touchæå°éè§çå°è¯åç§»ééç½®
      var MOBILE_TOUCH_OFFSETS = [{
        x: 10
      }, {
        x: -20
      }, {
        x: 10,
        y: 10
      }, {
        y: -20
      }];
      this._lastHover = null;
      this._mouseX = event.zrenderX;
      this._mouseY = event.zrenderY;
      this._event = event;

      this._iterateAndFindHover();

      for (var i = 0; !this._lastHover && i < MOBILE_TOUCH_OFFSETS.length; i++) {
        var offset = MOBILE_TOUCH_OFFSETS[i];
        offset.x && (this._mouseX += offset.x);
        offset.y && (this._mouseX += offset.y);

        this._iterateAndFindHover();
      }

      if (this._lastHover) {
        event.zrenderX = this._mouseX;
        event.zrenderY = this._mouseY;
      }
    }
    /**
     * Method: _zrenderEventFixed
     * å¦æå­å¨ç¬¬ä¸æ¹åµå¥çä¸äºdomè§¦åçäºä»¶ï¼ætouchäºä»¶ï¼éè¦è½¬æ¢ä¸ä¸äºä»¶åæ  ã
     *
     * Parameters:
     * event - {Object} äºä»¶ã
     * isTouch - {boolean} æ¯å¦è§¦æ¸ã
     *
     */

  }, {
    key: "_zrenderEventFixed",
    value: function _zrenderEventFixed(event, isTouch) {
      if (event.zrenderFixed) {
        return event;
      }

      if (!isTouch) {
        event = event || window.event; // è¿å¥å¯¹è±¡ä¼å~

        var target = event.toElement || event.relatedTarget || event.srcElement || event.target;

        if (target && target != this._domHover) {
          event.zrenderX = (typeof event.offsetX != 'undefined' ? event.offsetX : event.layerX) + target.offsetLeft;
          event.zrenderY = (typeof event.offsetY != 'undefined' ? event.offsetY : event.layerY) + target.offsetTop;
        }
      } else {
        var touch = event.type != 'touchend' ? event.targetTouches[0] : event.changedTouches[0];

        if (touch) {
          var rBounding = this.root.getBoundingClientRect(); // touchäºä»¶åæ æ¯å¨å±ç~

          event.zrenderX = touch.clientX - rBounding.left;
          event.zrenderY = touch.clientY - rBounding.top;
        }
      }

      event.zrenderFixed = 1;
      return event;
    } // SMIC-æ¹æ³æ©å± - start

    /**
     * @function SuperMap.LevelRenderer.Handler.prototype.getLastHoverOne
     * @description è·ååä¸ªé«äº®å¾å½¢
     */

  }, {
    key: "getLastHoverOne",
    value: function getLastHoverOne() {
      if (this._lastHover) {
        return this._lastHover;
      }

      return null;
    } // SMIC-æ¹æ³æ©å± - end

  }]);

  return Handler;
}(Eventful);
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Easing.js
function Easing_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Easing_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Easing_createClass(Constructor, protoProps, staticProps) { if (protoProps) Easing_defineProperties(Constructor.prototype, protoProps); if (staticProps) Easing_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @class  SuperMap.LevelRenderer.Animation.easing
 * @category Visualization Theme
 * @classdesc ç¼å¨
 * @private 
 */
// ç¼å¨ä»£ç æ¥èª https://github.com/sole/tween.js/blob/master/src/Tween.js
// http://sole.github.io/tween.js/examples/03_graphs.html
var Easing = /*#__PURE__*/function () {
  /**
   * @function SuperMap.LevelRenderer.Animation.easing.constructor
   * @description æé å½æ°ã
   */
  function Easing() {
    Easing_classCallCheck(this, Easing);

    this.CLASS_NAME = "SuperMap.LevelRenderer.Animation.easing";
  }
  /**
   * @function SuperMap.LevelRenderer.Animation.easing.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  Easing_createClass(Easing, [{
    key: "destroy",
    value: function destroy() {}
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.Linear
     * @description çº¿æ§ç¼å¨
     * @param {number} k - åæ°
     * @return {number} è¾å¥å¼
     */

  }, {
    key: "Linear",
    value: function Linear(k) {
      return k;
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.QuadraticIn
     * @description äºæ¬¡æ¹çç¼å¨ï¼t^2ï¼
     * @param {number} k - åæ°
     * @return {number} äºæ¬¡æ¹çç¼å¨çå¼
     */

  }, {
    key: "QuadraticIn",
    value: function QuadraticIn(k) {
      return k * k;
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.QuadraticOut
     * @description è¿åæäºæ¬¡æ¹ç¼å¨éåºçå¼
     * @param {number} k - åæ°
     * @return {number} æäºæ¬¡æ¹ç¼å¨éåºçå¼
     */

  }, {
    key: "QuadraticOut",
    value: function QuadraticOut(k) {
      return k * (2 - k);
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.QuadraticInOut
     * @description è¿åæäºæ¬¡æ¹ç¼å¨è¿å¥åéåºçå¼
     * @param {number} k - åæ°
     * @return {number} æäºæ¬¡æ¹ç¼å¨è¿å¥åéåºçå¼
     */

  }, {
    key: "QuadraticInOut",
    value: function QuadraticInOut(k) {
      if ((k *= 2) < 1) {
        return 0.5 * k * k;
      }

      return -0.5 * (--k * (k - 2) - 1);
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.CubicIn
     * @description ä¸æ¬¡æ¹çç¼å¨ï¼t^3ï¼
     * @param {number} k - åæ°
     * @return {number} æä¸æ¬¡æ¹ç¼å¨çå¼
     */

  }, {
    key: "CubicIn",
    value: function CubicIn(k) {
      return k * k * k;
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.CubicOut
     * @description è¿åæä¸æ¬¡æ¹ç¼å¨éåºçå¼
     * @param {number} k - åæ°
     * @return {number} æä¸æ¬¡æ¹ç¼å¨éåºçå¼
     */

  }, {
    key: "CubicOut",
    value: function CubicOut(k) {
      return --k * k * k + 1;
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.CubicInOut
     * @description è¿åæä¸æ¬¡æ¹ç¼å¨è¿å¥éåºçå¼
     * @param {number} k - åæ°
     * @return {number} æä¸æ¬¡æ¹ç¼å¨è¿å¥éåºçå¼
     */

  }, {
    key: "CubicInOut",
    value: function CubicInOut(k) {
      if ((k *= 2) < 1) {
        return 0.5 * k * k * k;
      }

      return 0.5 * ((k -= 2) * k * k + 2);
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.QuarticIn
     * @description  è¿åæåæ¬¡æ¹ç¼å¨è¿å¥çå¼
     * @param {number} k - åæ°
     * @return {number}  æåæ¬¡æ¹ç¼å¨è¿å¥çå¼
     */

  }, {
    key: "QuarticIn",
    value: function QuarticIn(k) {
      return k * k * k * k;
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.QuarticOut
     * @description  è¿åæåæ¬¡æ¹ç¼å¨éåºçå¼
     * @param {number} k - åæ°
     * @return {number}  æåæ¬¡æ¹ç¼å¨éåºçå¼
     */

  }, {
    key: "QuarticOut",
    value: function QuarticOut(k) {
      return 1 - --k * k * k * k;
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.QuarticInOut
     * @description  è¿åæåæ¬¡æ¹ç¼å¨è¿å¥éåºçå¼
     * @param {number} k - åæ°
     * @return {number}  æåæ¬¡æ¹ç¼å¨è¿å¥éåºçå¼
     */

  }, {
    key: "QuarticInOut",
    value: function QuarticInOut(k) {
      if ((k *= 2) < 1) {
        return 0.5 * k * k * k * k;
      }

      return -0.5 * ((k -= 2) * k * k * k - 2);
    } // äºæ¬¡æ¹çç¼å¨ï¼t^5ï¼

    /**
     * @function SuperMap.LevelRenderer.Animation.easing.QuinticIn
     * @description  è¿åæäºæ¬¡æ¹ç¼å¨çå¼
     * @param {number} k - åæ°
     * @return {number}  æäºæ¬¡æ¹ç¼å¨çå¼
     */

  }, {
    key: "QuinticIn",
    value: function QuinticIn(k) {
      return k * k * k * k * k;
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.QuinticOut
     * @description  è¿åæäºæ¬¡æ¹ç¼å¨éåºçå¼
     * @param {number} k - åæ°
     * @return {number}  æäºæ¬¡æ¹ç¼å¨éåºçå¼
     */

  }, {
    key: "QuinticOut",
    value: function QuinticOut(k) {
      return --k * k * k * k * k + 1;
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.QuinticInOut
     * @description è¿åæäºæ¬¡æ¹ç¼å¨è¿å¥éåºçå¼
     * @param {number} k - åæ°
     * @return {number} æäºæ¬¡æ¹ç¼å¨è¿å¥éåºçå¼
     */

  }, {
    key: "QuinticInOut",
    value: function QuinticInOut(k) {
      if ((k *= 2) < 1) {
        return 0.5 * k * k * k * k * k;
      }

      return 0.5 * ((k -= 2) * k * k * k * k + 2);
    } // æ­£å¼¦æ²çº¿çç¼å¨ï¼sin(t)ï¼

    /**
     * @function SuperMap.LevelRenderer.Animation.easing.SinusoidalIn
     * @description è¿åææ­£å¼¦æ²çº¿çç¼å¨è¿å¥çå¼
     * @param {number} k - åæ°
     * @return {number} ææ­£å¼¦æ²çº¿çç¼å¨è¿å¥çå¼
     */

  }, {
    key: "SinusoidalIn",
    value: function SinusoidalIn(k) {
      return 1 - Math.cos(k * Math.PI / 2);
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.SinusoidalOut
     * @description è¿åææ­£å¼¦æ²çº¿çç¼å¨éåºçå¼
     * @param {number} k - åæ°
     * @return {number} ææ­£å¼¦æ²çº¿çç¼å¨éåºçå¼
     */

  }, {
    key: "SinusoidalOut",
    value: function SinusoidalOut(k) {
      return Math.sin(k * Math.PI / 2);
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.SinusoidalInOut
     * @description è¿åææ­£å¼¦æ²çº¿çç¼å¨è¿å¥éåºçå¼
     * @param {number} k - åæ°
     * @return {number} ææ­£å¼¦æ²çº¿çç¼å¨è¿å¥éåºçå¼
     */

  }, {
    key: "SinusoidalInOut",
    value: function SinusoidalInOut(k) {
      return 0.5 * (1 - Math.cos(Math.PI * k));
    } // ææ°æ²çº¿çç¼å¨ï¼2^tï¼

    /**
     * @function SuperMap.LevelRenderer.Animation.easing.ExponentialIn
     * @description è¿åæææ°æ²çº¿çç¼å¨è¿å¥çå¼
     * @param {number} k - åæ°
     * @return {number} æææ°æ²çº¿çç¼å¨è¿å¥çå¼
     */

  }, {
    key: "ExponentialIn",
    value: function ExponentialIn(k) {
      return k === 0 ? 0 : Math.pow(1024, k - 1);
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.ExponentialOut
     * @description è¿åæææ°æ²çº¿çç¼å¨éåºçå¼
     * @param {number} k - åæ°
     * @return {number} æææ°æ²çº¿çç¼å¨éåºçå¼
     */

  }, {
    key: "ExponentialOut",
    value: function ExponentialOut(k) {
      return k === 1 ? 1 : 1 - Math.pow(2, -10 * k);
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.ExponentialInOut
     * @description è¿åæææ°æ²çº¿çç¼å¨è¿å¥éåºçå¼
     * @param {number} k - åæ°
     * @return {number} æææ°æ²çº¿çç¼å¨è¿å¥éåºçå¼
     */

  }, {
    key: "ExponentialInOut",
    value: function ExponentialInOut(k) {
      if (k === 0) {
        return 0;
      }

      if (k === 1) {
        return 1;
      }

      if ((k *= 2) < 1) {
        return 0.5 * Math.pow(1024, k - 1);
      }

      return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2);
    } // åå½¢æ²çº¿çç¼å¨ï¼sqrt(1-t^2)ï¼

    /**
     * @function SuperMap.LevelRenderer.Animation.easing.CircularIn
     * @description è¿åæåå½¢æ²çº¿çç¼å¨è¿å¥çå¼
     * @param {number} k - åæ°
     * @return {number} æåå½¢æ²çº¿çç¼å¨è¿å¥çå¼
     */

  }, {
    key: "CircularIn",
    value: function CircularIn(k) {
      return 1 - Math.sqrt(1 - k * k);
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.CircularOut
     * @description è¿åæåå½¢æ²çº¿çç¼å¨éåºçå¼
     * @param {number} k - åæ°
     * @return {number} æåå½¢æ²çº¿çç¼å¨éåºçå¼
     */

  }, {
    key: "CircularOut",
    value: function CircularOut(k) {
      return Math.sqrt(1 - --k * k);
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.CircularInOut
     * @description è¿åæåå½¢æ²çº¿çç¼å¨è¿å¥éåºçå¼
     * @param {number} k - åæ°
     * @return {number} æåå½¢æ²çº¿çç¼å¨è¿å¥éåºçå¼
     */

  }, {
    key: "CircularInOut",
    value: function CircularInOut(k) {
      if ((k *= 2) < 1) {
        return -0.5 * (Math.sqrt(1 - k * k) - 1);
      }

      return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);
    } // åå»ºç±»ä¼¼äºå¼¹ç°§å¨åæ­¢åæ¥åæ¯è¡çå¨ç»

    /**
     * @function SuperMap.LevelRenderer.Animation.easing.ElasticIn
     * @description è¿åæç±»ä¼¼äºå¼¹ç°§å¨åæ­¢åæ¥åæ¯è¡çå¨ç»çç¼å¨è¿å¥çå¼
     * @param {number} k - åæ°
     * @return {number} æç±»ä¼¼äºå¼¹ç°§å¨åæ­¢åæ¥åæ¯è¡çå¨ç»çç¼å¨è¿å¥çå¼
     */

  }, {
    key: "ElasticIn",
    value: function ElasticIn(k) {
      var s;
      var a = 0.1;
      var p = 0.4;

      if (k === 0) {
        return 0;
      }

      if (k === 1) {
        return 1;
      }

      if (a < 1) {
        a = 1;
        s = p / 4;
      } else {
        s = p * Math.asin(1 / a) / (2 * Math.PI);
      }

      return -(a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.ElasticOut
     * @description è¿åæç±»ä¼¼äºå¼¹ç°§å¨åæ­¢åæ¥åæ¯è¡çå¨ç»çç¼å¨éåºçå¼
     * @param {number} k - åæ°
     * @return {number} æç±»ä¼¼äºå¼¹ç°§å¨åæ­¢åæ¥åæ¯è¡çå¨ç»çç¼å¨éåºçå¼
     */

  }, {
    key: "ElasticOut",
    value: function ElasticOut(k) {
      var s;
      var a = 0.1;
      var p = 0.4;

      if (k === 0) {
        return 0;
      }

      if (k === 1) {
        return 1;
      }

      if (a < 1) {
        a = 1;
        s = p / 4;
      } else {
        s = p * Math.asin(1 / a) / (2 * Math.PI);
      }

      return a * Math.pow(2, -10 * k) * Math.sin((k - s) * (2 * Math.PI) / p) + 1;
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.ElasticInOut
     * @description è¿åæç±»ä¼¼äºå¼¹ç°§å¨åæ­¢åæ¥åæ¯è¡çå¨ç»çç¼å¨è¿å¥éåºçå¼
     * @param {number} k - åæ°
     * @return {number} æç±»ä¼¼äºå¼¹ç°§å¨åæ­¢åæ¥åæ¯è¡çå¨ç»çç¼å¨è¿å¥éåºçå¼
     */

  }, {
    key: "ElasticInOut",
    value: function ElasticInOut(k) {
      var s;
      var a = 0.1;
      var p = 0.4;

      if (k === 0) {
        return 0;
      }

      if (k === 1) {
        return 1;
      }

      if (a < 1) {
        a = 1;
        s = p / 4;
      } else {
        s = p * Math.asin(1 / a) / (2 * Math.PI);
      }

      if ((k *= 2) < 1) {
        return -0.5 * (a * Math.pow(2, 10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p));
      }

      return a * Math.pow(2, -10 * (k -= 1)) * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;
    } // å¨æä¸å¨ç»å¼å§æ²¿æç¤ºçè·¯å¾è¿è¡å¨ç»å¤çåç¨ç¨æ¶åè¯¥å¨ç»çç§»å¨

    /**
     * @function SuperMap.LevelRenderer.Animation.easing.BackIn
     * @description è¿åæå¨æä¸å¨ç»å¼å§æ²¿æç¤ºçè·¯å¾è¿è¡å¨ç»å¤çåç¨ç¨æ¶åè¯¥å¨ç»çç§»å¨çç¼å¨è¿å¥çå¼
     * @param {number} k - åæ°
     * @return {number} æå¨æä¸å¨ç»å¼å§æ²¿æç¤ºçè·¯å¾è¿è¡å¨ç»å¤çåç¨ç¨æ¶åè¯¥å¨ç»çç§»å¨çç¼å¨è¿å¥çå¼
     */

  }, {
    key: "BackIn",
    value: function BackIn(k) {
      var s = 1.70158;
      return k * k * ((s + 1) * k - s);
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.BackOut
     * @description è¿åæå¨æä¸å¨ç»å¼å§æ²¿æç¤ºçè·¯å¾è¿è¡å¨ç»å¤çåç¨ç¨æ¶åè¯¥å¨ç»çç§»å¨çç¼å¨éåºçå¼
     * @param {number} k - åæ°
     * @return {number} æå¨æä¸å¨ç»å¼å§æ²¿æç¤ºçè·¯å¾è¿è¡å¨ç»å¤çåç¨ç¨æ¶åè¯¥å¨ç»çç§»å¨çç¼å¨éåºçå¼
     */

  }, {
    key: "BackOut",
    value: function BackOut(k) {
      var s = 1.70158;
      return --k * k * ((s + 1) * k + s) + 1;
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.BackInOut
     * @description è¿åæå¨æä¸å¨ç»å¼å§æ²¿æç¤ºçè·¯å¾è¿è¡å¨ç»å¤çåç¨ç¨æ¶åè¯¥å¨ç»çç§»å¨çç¼å¨è¿å¥éåºçå¼
     * @param {number} k - åæ°
     * @return {number} æå¨æä¸å¨ç»å¼å§æ²¿æç¤ºçè·¯å¾è¿è¡å¨ç»å¤çåç¨ç¨æ¶åè¯¥å¨ç»çç§»å¨çç¼å¨è¿å¥éåºçå¼
     */

  }, {
    key: "BackInOut",
    value: function BackInOut(k) {
      var s = 1.70158 * 1.525;

      if ((k *= 2) < 1) {
        return 0.5 * (k * k * ((s + 1) * k - s));
      }

      return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);
    } // åå»ºå¼¹è·³ææ

    /**
     * @function SuperMap.LevelRenderer.Animation.easing.BounceIn
     * @description è¿åæå¼¹è·³ææçç¼å¨è¿å¥çå¼
     * @param {number} k - åæ°
     * @return {number} æå¼¹è·³ææçç¼å¨è¿å¥çå¼
     */

  }, {
    key: "BounceIn",
    value: function BounceIn(k) {
      return 1 - this.BounceOut(1 - k);
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.BounceOut
     * @description è¿åæå¼¹è·³ææçç¼å¨éåºçå¼
     * @param {number} k - åæ°
     * @return {number} æå¼¹è·³ææçç¼å¨éåºçå¼
     */

  }, {
    key: "BounceOut",
    value: function BounceOut(k) {
      if (k < 1 / 2.75) {
        return 7.5625 * k * k;
      } else if (k < 2 / 2.75) {
        return 7.5625 * (k -= 1.5 / 2.75) * k + 0.75;
      } else if (k < 2.5 / 2.75) {
        return 7.5625 * (k -= 2.25 / 2.75) * k + 0.9375;
      } else {
        return 7.5625 * (k -= 2.625 / 2.75) * k + 0.984375;
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.easing.BounceInOut
     * @description è¿åæå¼¹è·³ææçç¼å¨è¿å¥éåºçå¼
     * @param {number} k - åæ°
     * @return {number} æå¼¹è·³ææçç¼å¨è¿å¥éåºçå¼
     */

  }, {
    key: "BounceInOut",
    value: function BounceInOut(k) {
      if (k < 0.5) {
        return this.BounceIn(k * 2) * 0.5;
      }

      return this.BounceOut(k * 2 - 1) * 0.5 + 0.5;
    }
  }]);

  return Easing;
}();
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Clip.js
function Clip_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Clip_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Clip_createClass(Constructor, protoProps, staticProps) { if (protoProps) Clip_defineProperties(Constructor.prototype, protoProps); if (staticProps) Clip_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @class  SuperMap.LevelRenderer.Animation.Clip
 * @category Visualization Theme
 * @classdec å¨ç»çæ®µ
 * @private 
 */

var Clip = /*#__PURE__*/function () {
  /**
   * @function SuperMap.LevelRenderer.Animation.Clip.prototype.constructor
   * @description æé å½æ°ã
   * @param {Object} options - åæ°ã
   * @param {Object} options.target - å¨ç»å¯¹è±¡ï¼å¯ä»¥æ¯æ°ç»ï¼å¦ææ¯æ°ç»çè¯ä¼æ¹éåå onframe ç­äºä»¶ã
   * @param {number} [options.life=1000] - å¨ç»æ¶é¿ã
   * @param {number} [options.delay=0] - å¨ç»å»¶è¿æ¶é´ã
   * @param {boolean} [options.loop=true] - æ¯å¦å¾ªç¯ã
   * @param {number} [options.gap=0] - å¾ªç¯çé´éæ¶é´ã
   * @param {Object} options.onframe -  å¸§ã
   * @param {boolean} options.easing - æ¯å¦æ¶é¤ã
   * @param {boolean} options.ondestroy - æ¯å¦éæ¯ã
   * @param {boolean} options.onrestart - æ¯å¦éæ­ã
   */
  function Clip(options) {
    Clip_classCallCheck(this, Clip);

    this._targetPool = options.target || {};

    if (!(this._targetPool instanceof Array)) {
      this._targetPool = [this._targetPool];
    } // çå½å¨æ


    this._life = options.life || 1000; // å»¶æ¶

    this._delay = options.delay || 0; // å¼å§æ¶é´

    this._startTime = new Date().getTime() + this._delay; // åä½æ¯«ç§
    // ç»ææ¶é´

    this._endTime = this._startTime + this._life * 1000; // æ¯å¦å¾ªç¯

    this.loop = typeof options.loop == 'undefined' ? false : options.loop;
    this.gap = options.gap || 0;
    this.easing = options.easing || 'Linear';
    this.onframe = options.onframe;
    this.ondestroy = options.ondestroy;
    this.onrestart = options.onrestart;
    this.CLASS_NAME = "SuperMap.LevelRenderer.Animation.Clip";
  }
  /**
   * @function SuperMap.LevelRenderer.Animation.Clip.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  Clip_createClass(Clip, [{
    key: "destroy",
    value: function destroy() {}
  }, {
    key: "step",
    value: function step(time) {
      var easing = new Easing();
      var percent = (time - this._startTime) / this._life; // è¿æ²¡å¼å§

      if (percent < 0) {
        return;
      }

      percent = Math.min(percent, 1);
      var easingFunc = typeof this.easing == 'string' ? easing[this.easing] : this.easing;
      var schedule = typeof easingFunc === 'function' ? easingFunc(percent) : percent;
      this.fire('frame', schedule); // ç»æ

      if (percent == 1) {
        if (this.loop) {
          this.restart(); // éæ°å¼å§å¨æ
          // æåºèä¸æ¯ç´æ¥è°ç¨äºä»¶ç´å° stage.update ååç»ä¸è°ç¨è¿äºäºä»¶

          return 'restart';
        } // å¨ç»å®æå°è¿ä¸ªæ§å¶å¨æ è¯ä¸ºå¾å é¤
        // å¨Animation.updateä¸­è¿è¡æ¹éå é¤


        this._needsRemove = true;
        return 'destroy';
      }

      return null;
    }
  }, {
    key: "restart",
    value: function restart() {
      var time = new Date().getTime();
      var remainder = (time - this._startTime) % this._life;
      this._startTime = new Date().getTime() - remainder + this.gap;
    }
  }, {
    key: "fire",
    value: function fire(eventType, arg) {
      for (var i = 0, len = this._targetPool.length; i < len; i++) {
        if (this['on' + eventType]) {
          this['on' + eventType](this._targetPool[i], arg);
        }
      }
    }
  }]);

  return Clip;
}();
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Animation.js
function Animation_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Animation_typeof = function _typeof(obj) { return typeof obj; }; } else { Animation_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Animation_typeof(obj); }

function Animation_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Animation_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Animation_createClass(Constructor, protoProps, staticProps) { if (protoProps) Animation_defineProperties(Constructor.prototype, protoProps); if (staticProps) Animation_defineProperties(Constructor, staticProps); return Constructor; }

function Animation_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Animation_setPrototypeOf(subClass, superClass); }

function Animation_setPrototypeOf(o, p) { Animation_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Animation_setPrototypeOf(o, p); }

function Animation_createSuper(Derived) { var hasNativeReflectConstruct = Animation_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Animation_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Animation_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Animation_possibleConstructorReturn(this, result); }; }

function Animation_possibleConstructorReturn(self, call) { if (call && (Animation_typeof(call) === "object" || typeof call === "function")) { return call; } return Animation_assertThisInitialized(self); }

function Animation_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Animation_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Animation_getPrototypeOf(o) { Animation_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Animation_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class SuperMap.LevelRenderer.Animation
 * @classdesc å¨ç»ä¸»ç±», è°åº¦åç®¡çææå¨ç»æ§å¶å¨
 * @category Visualization Theme
 * @extends {SuperMap.LevelRenderer.Eventful}
 * @private 
 */

var Animation = /*#__PURE__*/function (_Eventful) {
  Animation_inherits(Animation, _Eventful);

  var _super = Animation_createSuper(Animation);

  /**
   * @function SuperMap.LevelRenderer.Animation.prototype.constructor
   * @description æé å½æ°ã
   * @param {Object} options - å¨ç»åæ°ã
   * @param {Object} options.onframe - onframeã
   * @param {Object} options.stage - stageã
   * (start code)
   *     var animation = new SuperMap.LevelRenderer.Animation();
   *     var obj = {
   *         x: 100,
   *         y: 100
   *     };
   *     animation.animate(node.position)
   *         .when(1000, {
   *             x: 500,
   *             y: 500
   *         })
   *         .when(2000, {
   *             x: 100,
   *             y: 100
   *         })
   *         .start('spline');
   * (end)
   */
  function Animation(options) {
    var _this;

    Animation_classCallCheck(this, Animation);

    _this = _super.call(this, options);
    options = options || {};
    /**
     * @member {Object} SuperMap.LevelRenderer.Animation.prototype.stage
     * @description stageã
     */

    _this.stage = {};
    /**
     * @member {Object} SuperMap.LevelRenderer.Animation.prototype.onframe
     * @description onframeã
     */

    _this.onframe = function () {};
    /**
     * @member {Array} SuperMap.LevelRenderer.Animation.prototype._clips
     * @description _clipsã
     */


    _this._clips = [];
    /**
     * @member {boolean} SuperMap.LevelRenderer.Animation.prototype._running
     * @description _runningã
     */

    _this._running = false;
    /**
     * @member {number} SuperMap.LevelRenderer.Animation.prototype._time
     * @description _timeã
     */

    _this._time = 0;
    Util.extend(Animation_assertThisInitialized(_this), options);
    _this.CLASS_NAME = "SuperMap.LevelRenderer.Animation";
    return _this;
  }
  /**
   * @function SuperMap.LevelRenderer.Animation.prototype.add
   * @description æ·»å å¨ç»çæ®µã
   * @param {SuperMap.LevelRenderer.Animation.Clip} clip - å¨ç»çæ®µã
   */


  Animation_createClass(Animation, [{
    key: "add",
    value: function add(clip) {
      this._clips.push(clip);
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.prototype.remove
     * @description å é¤å¨ç»çæ®µã
     * @param {SuperMap.LevelRenderer.Animation.Clip} clip - å¨ç»çæ®µã
     */

  }, {
    key: "remove",
    value: function remove(clip) {
      var idx = new Util_Util().indexOf(this._clips, clip);

      if (idx >= 0) {
        this._clips.splice(idx, 1);
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.prototype.update
     * @description æ´æ°å¨ç»çæ®µã
     */

  }, {
    key: "_update",
    value: function _update() {
      var time = new Date().getTime();
      var delta = time - this._time;
      var clips = this._clips;
      var len = clips.length;
      var deferredEvents = [];
      var deferredClips = [];

      for (var i = 0; i < len; i++) {
        var clip = clips[i];
        var e = clip.step(time); // Throw out the events need to be called after
        // stage.update, like destroy

        if (e) {
          deferredEvents.push(e);
          deferredClips.push(clip);
        }
      }

      if (this.stage.update) {
        this.stage.update();
      } // Remove the finished clip


      for (var _i = 0; _i < len;) {
        if (clips[_i]._needsRemove) {
          clips[_i] = clips[len - 1];
          clips.pop();
          len--;
        } else {
          _i++;
        }
      }

      len = deferredEvents.length;

      for (var _i2 = 0; _i2 < len; _i2++) {
        deferredClips[_i2].fire(deferredEvents[_i2]);
      }

      this._time = time;
      this.onframe(delta);
      this.dispatch('frame', delta);
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.prototype.start
     * @description å¼å§è¿è¡å¨ç»ã
     */

  }, {
    key: "start",
    value: function start() {
      var requestAnimationFrame = window.requestAnimationFrame || window.msRequestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || function (func) {
        setTimeout(func, 16);
      };

      var self = this;
      this._running = true;

      function step() {
        if (self._running) {
          self._update();

          requestAnimationFrame(step);
        }
      }

      this._time = new Date().getTime();
      requestAnimationFrame(step);
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.prototype.stop
     * @description åæ­¢è¿è¡å¨ç»ã
     */

  }, {
    key: "stop",
    value: function stop() {
      this._running = false;
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.prototype.clear
     * @description æ¸é¤ææå¨ç»çæ®µã
     */

  }, {
    key: "clear",
    value: function clear() {
      this._clips = [];
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.prototype.animate
     * @description å¯¹ä¸ä¸ªç®æ åå»ºä¸ä¸ªanimatorå¯¹è±¡ï¼å¯ä»¥æå®ç®æ ä¸­çå±æ§ä½¿ç¨å¨ç»ã
     * @param {Object} target - ç®æ å¯¹è±¡ã
     * @param {Object} options - å¨ç»åæ°éé¡¹ã
     * @param {boolean} [options.loop=false] - æ¯å¦å¾ªç¯æ­æ¾å¨ç»ã
     * @param {function} [options.getter] - å¦ææå®getterå½æ°ï¼ä¼éè¿getterå½æ°åå±æ§å¼ã
     * @param {function} [options.setter] - å¦ææå®setterå½æ°ï¼ä¼éè¿setterå½æ°è®¾ç½®å±æ§å¼ã
     * @returns {SuperMap.LevelRenderer.Animation.Animator} Animatorã
     */

  }, {
    key: "animate",
    value: function animate(target, options) {
      options = options || {};
      var deferred = new Animator(target, options.loop, options.getter, options.setter);
      deferred.animation = this;
      return deferred;
    }
  }], [{
    key: "_interpolateNumber",
    value: function _interpolateNumber(p0, p1, percent) {
      return (p1 - p0) * percent + p0;
    }
  }, {
    key: "_interpolateArray",
    value: function _interpolateArray(p0, p1, percent, out, arrDim) {
      var len = p0.length;

      if (arrDim == 1) {
        for (var i = 0; i < len; i++) {
          out[i] = Animation._interpolateNumber(p0[i], p1[i], percent);
        }
      } else {
        var len2 = p0[0].length;

        for (var _i3 = 0; _i3 < len; _i3++) {
          for (var j = 0; j < len2; j++) {
            out[_i3][j] = Animation._interpolateNumber(p0[_i3][j], p1[_i3][j], percent);
          }
        }
      }
    }
  }, {
    key: "_isArrayLike",
    value: function _isArrayLike(data) {
      switch (Animation_typeof(data)) {
        case 'undefined':
        case 'string':
          return false;
      }

      return typeof data.length !== 'undefined';
    }
  }, {
    key: "_catmullRomInterpolateArray",
    value: function _catmullRomInterpolateArray(p0, p1, p2, p3, t, t2, t3, out, arrDim) {
      var len = p0.length;

      if (arrDim == 1) {
        for (var i = 0; i < len; i++) {
          out[i] = Animation._catmullRomInterpolate(p0[i], p1[i], p2[i], p3[i], t, t2, t3);
        }
      } else {
        var len2 = p0[0].length;

        for (var _i4 = 0; _i4 < len; _i4++) {
          for (var j = 0; j < len2; j++) {
            out[_i4][j] = Animation._catmullRomInterpolate(p0[_i4][j], p1[_i4][j], p2[_i4][j], p3[_i4][j], t, t2, t3);
          }
        }
      }
    }
  }, {
    key: "_catmullRomInterpolate",
    value: function _catmullRomInterpolate(p0, p1, p2, p3, t, t2, t3) {
      var v0 = (p2 - p0) * 0.5;
      var v1 = (p3 - p1) * 0.5;
      return (2 * (p1 - p2) + v0 + v1) * t3 + (-3 * (p1 - p2) - 2 * v0 - v1) * t2 + v0 * t + p1;
    }
  }, {
    key: "_cloneValue",
    value: function _cloneValue(value) {
      var arraySlice = Array.prototype.slice;

      if (Animation._isArrayLike(value)) {
        var len = value.length;

        if (Animation._isArrayLike(value[0])) {
          var ret = [];

          for (var i = 0; i < len; i++) {
            ret.push(arraySlice.call(value[i]));
          }

          return ret;
        } else {
          return arraySlice.call(value);
        }
      } else {
        return value;
      }
    }
  }, {
    key: "rgba2String",
    value: function rgba2String(rgba) {
      rgba[0] = Math.floor(rgba[0]);
      rgba[1] = Math.floor(rgba[1]);
      rgba[2] = Math.floor(rgba[2]);
      return 'rgba(' + rgba.join(',') + ')';
    }
  }]);

  return Animation;
}(Eventful);
/**
 * @class SuperMap.LevelRenderer.Animation.Animator
 */

var Animator = /*#__PURE__*/function () {
  /**
   * @function SuperMap.LevelRenderer.Animation.Animator.prototype.animate
   * @description æé å½æ°
   * @param {Object} target - ç®æ å¯¹è±¡ã
   * @param {Object} options - å¨ç»åæ°éé¡¹ã
   * @param {boolean} [loop=false] - æ¯å¦å¾ªç¯æ­æ¾å¨ç»ã
   * @param {function} [getterl] - å¦ææå®getterå½æ°ï¼ä¼éè¿getterå½æ°åå±æ§å¼ã
   * @param {function} [setter] - å¦ææå®setterå½æ°ï¼ä¼éè¿setterå½æ°è®¾ç½®å±æ§å¼ã
   */
  function Animator(target, loop, getter, setter) {
    Animation_classCallCheck(this, Animator);

    /**
     * @member {Object} SuperMap.LevelRenderer.Animation.Animator.prototype._tracks
     * @description _tracksã
     */
    this._tracks = {};
    /**
     * @member {Object} SuperMap.LevelRenderer.Animation.Animator.prototype._target
     * @description _targetã
     */

    this._target = target;
    /**
     * @member {boolean} SuperMap.LevelRenderer.Animation.Animator.prototype._loop
     * @description _loopã
     */

    this._loop = loop || false;
    /**
     * @member {function} SuperMap.LevelRenderer.Animation.Animator.prototype._getter
     * @description _getterã
     */

    this._getter = getter || _defaultGetter;
    /**
     * @member {function} SuperMap.LevelRenderer.Animation.Animator.prototype._setter
     * @description _setterã
     */

    this._setter = setter || _defaultSetter;
    /**
     * @member {number} SuperMap.LevelRenderer.Animation.Animator.prototype._clipCount
     * @description _clipCountã
     */

    this._clipCount = 0;
    /**
     * @member {number} SuperMap.LevelRenderer.Animation.Animator.prototype._delay
     * @description _delayã
     */

    this._delay = 0;
    /**
     * @member {Array} SuperMap.LevelRenderer.Animation.Animator.prototype._doneList
     * @description _doneListã
     */

    this._doneList = [];
    /**
     * @member {Array} SuperMap.LevelRenderer.Animation.Animator.prototype._onframeList
     * @description _onframeListã
     */

    this._onframeList = [];
    /**
     * @member {Array} SuperMap.LevelRenderer.Animation.Animator.prototype._clipList
     * @description _clipListã
     */

    this._clipList = [];
    this.CLASS_NAME = "SuperMap.LevelRenderer.Animation.Animator"; //Function

    function _defaultGetter(target, key) {
      return target[key];
    }

    function _defaultSetter(target, key, value) {
      target[key] = value;
    }
  }
  /**
   * @function SuperMap.LevelRenderer.Animation.Animator.prototype.when
   * @description è®¾ç½®å¨ç»å³é®å¸§
   * @param {number} time - å³é®å¸§æ¶é´ï¼åä½æ¯ms
   * @param {Object} props - å³é®å¸§çå±æ§å¼ï¼key-valueè¡¨ç¤º
   * @returns {SuperMap.LevelRenderer.Animation.Animator} Animator
   */


  Animation_createClass(Animator, [{
    key: "when",
    value: function when(time
    /* ms */
    , props) {
      for (var propName in props) {
        if (!this._tracks[propName]) {
          this._tracks[propName] = []; // If time is 0
          //  Then props is given initialize value
          // Else
          //  Initialize value from current prop value

          if (time !== 0) {
            this._tracks[propName].push({
              time: 0,
              value: Animation._cloneValue(this._getter(this._target, propName))
            });
          }
        }

        this._tracks[propName].push({
          time: parseInt(time, 10),
          value: props[propName]
        });
      }

      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.Animator.prototype.during
     * @description æ·»å å¨ç»æ¯ä¸å¸§çåè°å½æ°
     * @param {RequestCallback} callback - åè°å½æ°
     * @returns {SuperMap.LevelRenderer.Animation.Animator} Animator
     */

  }, {
    key: "during",
    value: function during(callback) {
      this._onframeList.push(callback);

      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.Animator.prototype.start
     * @description å¼å§æ§è¡å¨ç»
     * @param {(string|function)} easing - å¨ç»ç¼å¨å½æ°ãè¯¦è§ï¼<{@link SuperMap.LevelRenderer.Animation.easing}>ã
     * @returns {SuperMap.LevelRenderer.Animation.Animator} Animator
     */

  }, {
    key: "start",
    value: function start(easing) {
      var self = this;
      var setter = this._setter;
      var getter = this._getter;
      var onFrameListLen = self._onframeList.length;
      var useSpline = easing === 'spline';

      var ondestroy = function ondestroy() {
        self._clipCount--;

        if (self._clipCount === 0) {
          // Clear all tracks
          self._tracks = {};
          var len = self._doneList.length;

          for (var i = 0; i < len; i++) {
            self._doneList[i].call(self);
          }
        }
      };

      var createTrackClip = function createTrackClip(keyframes, propName) {
        var trackLen = keyframes.length;

        if (!trackLen) {
          return;
        } // Guess data type


        var firstVal = keyframes[0].value;

        var isValueArray = Animation._isArrayLike(firstVal);

        var isValueColor = false; // For vertices morphing

        var arrDim = isValueArray && Animation._isArrayLike(firstVal[0]) ? 2 : 1; // Sort keyframe as ascending

        keyframes.sort(function (a, b) {
          return a.time - b.time;
        });
        var trackMaxTime = keyframes[trackLen - 1].time; // Percents of each keyframe

        var kfPercents = []; // Value of each keyframe

        var kfValues = [];

        for (var _i5 = 0; _i5 < trackLen; _i5++) {
          kfPercents.push(keyframes[_i5].time / trackMaxTime); // Assume value is a color when it is a string

          var value = keyframes[_i5].value;

          if (typeof value == 'string') {
            value = SUtil_SUtil.Util_color.toArray(value);

            if (value.length === 0) {
              // Invalid color
              value[0] = value[1] = value[2] = 0;
              value[3] = 1;
            }

            isValueColor = true;
          }

          kfValues.push(value);
        } // Cache the key of last frame to speed up when
        // animation playback is sequency


        var cacheKey = 0;
        var cachePercent = 0;
        var start;
        var i;
        var w;
        var p0;
        var p1;
        var p2;
        var p3;

        if (isValueColor) {
          var rgba = [0, 0, 0, 0];
        }

        var onframe = function onframe(target, percent) {
          // Find the range keyframes
          // kf1-----kf2---------current--------kf3
          // find kf2 and kf3 and do interpolation
          if (percent < cachePercent) {
            // Start from next key
            start = Math.min(cacheKey + 1, trackLen - 1);

            for (i = start; i >= 0; i--) {
              if (kfPercents[i] <= percent) {
                break;
              }
            }

            i = Math.min(i, trackLen - 2);
          } else {
            for (i = cacheKey; i < trackLen; i++) {
              if (kfPercents[i] > percent) {
                break;
              }
            }

            i = Math.min(i - 1, trackLen - 2);
          }

          cacheKey = i;
          cachePercent = percent;
          var range = kfPercents[i + 1] - kfPercents[i];

          if (range === 0) {
            return;
          } else {
            w = (percent - kfPercents[i]) / range;
          }

          if (useSpline) {
            p1 = kfValues[i];
            p0 = kfValues[i === 0 ? i : i - 1];
            p2 = kfValues[i > trackLen - 2 ? trackLen - 1 : i + 1];
            p3 = kfValues[i > trackLen - 3 ? trackLen - 1 : i + 2];

            if (isValueArray) {
              Animation._catmullRomInterpolateArray(p0, p1, p2, p3, w, w * w, w * w * w, getter(target, propName), arrDim);
            } else {
              var _value;

              if (isValueColor) {
                // value = SuperMap.LevelRenderer.Animation._catmullRomInterpolateArray(
                //     p0, p1, p2, p3, w, w * w, w * w * w,
                //     rgba, 1
                // );
                _value = Animation.rgba2String(rgba);
              } else {
                _value = Animation._catmullRomInterpolate(p0, p1, p2, p3, w, w * w, w * w * w);
              }

              setter(target, propName, _value);
            }
          } else {
            if (isValueArray) {
              Animation._interpolateArray(kfValues[i], kfValues[i + 1], w, getter(target, propName), arrDim);
            } else {
              var _value2;

              if (isValueColor) {
                Animation._interpolateArray(kfValues[i], kfValues[i + 1], w, rgba, 1);

                _value2 = Animation.rgba2String(rgba);
              } else {
                _value2 = Animation._interpolateNumber(kfValues[i], kfValues[i + 1], w);
              }

              setter(target, propName, _value2);
            }
          }

          for (i = 0; i < onFrameListLen; i++) {
            self._onframeList[i](target, percent);
          }
        };

        var clip = new Clip({
          target: self._target,
          life: trackMaxTime,
          loop: self._loop,
          delay: self._delay,
          onframe: onframe,
          ondestroy: ondestroy
        });

        if (easing && easing !== 'spline') {
          clip.easing = easing;
        }

        self._clipList.push(clip);

        self._clipCount++;
        self.animation.add(clip);
      };

      for (var propName in this._tracks) {
        createTrackClip(this._tracks[propName], propName);
      }

      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.Animator.prototype.stop
     * @description åæ­¢å¨ç»
     */

  }, {
    key: "stop",
    value: function stop() {
      for (var i = 0; i < this._clipList.length; i++) {
        var clip = this._clipList[i];
        this.animation.remove(clip);
      }

      this._clipList = [];
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.Animator.prototype.delay
     * @description è®¾ç½®å¨ç»å»¶è¿å¼å§çæ¶é´
     * @param {number} time - æ¶é´ï¼åä½ms
     * @returns {SuperMap.LevelRenderer.Animation.Animator} Animator
     */

  }, {
    key: "delay",
    value: function delay(time) {
      this._delay = time;
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Animation.Animator.prototype.done
     * @description æ·»å å¨ç»ç»æçåè°
     * @param {function} cb - Function
     * @returns {SuperMap.LevelRenderer.Animation.Animator} Animator
     */

  }, {
    key: "done",
    value: function done(cb) {
      if (cb) {
        this._doneList.push(cb);
      }

      return this;
    }
  }]);

  return Animator;
}();
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/Render.js
function Render_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Render_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Render_createClass(Constructor, protoProps, staticProps) { if (protoProps) Render_defineProperties(Constructor.prototype, protoProps); if (staticProps) Render_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @private
 * @class SuperMap.LevelRenderer.Render
 * @category Visualization Theme
 * @classdesc Render æ¥å£ç±»ï¼å¯¹å¤å¯ç¨çæææ¥å£é½å¨è¿éãåé¨ä½¿ç¨é get æ¥å£ç»ä¸è¿å this å¯¹è±¡ï¼æ¯æé¾å¼è°ç¨ã
 */







var Render = /*#__PURE__*/function () {
  /**
   * @function SuperMap.LevelRenderer.Render.constructor
   * @description æé å½æ°ã
   *
   * @param {string} id - å¯ä¸æ è¯ã
   * @param {HTMLElement} dom - Dom å¯¹è±¡ã
   */
  function Render(id, dom) {
    Render_classCallCheck(this, Render);

    /**
     * @member {string} SuperMap.LevelRenderer.Render.prototype.id
     * @description å¯ä¸æ è¯ã
     */
    this.id = id;
    /**
     * @member {SuperMap.LevelRenderer.Storage} SuperMap.LevelRenderer.Render.prototype.storage
     * @description å¾å½¢ä»åºå¯¹è±¡ã
     */

    this.storage = new Storage();
    /**
     * @member {SuperMap.LevelRenderer.Painter} SuperMap.LevelRenderer.Render.prototype.painter
     * @description ç»å¶å¨å¯¹è±¡ã
     *
     */

    this.painter = new Painter(dom, this.storage);
    /**
     * @member {SuperMap.LevelRenderer.Handler} SuperMap.LevelRenderer.Render.prototype.handler
     * @description äºä»¶å¤çå¯¹è±¡ã
     *
     */

    this.handler = new Handler(dom, this.storage, this.painter);
    /**
     * @member {Array} SuperMap.LevelRenderer.Render.prototype.animatingElements
     * @description å¨ç»æ§å¶æ°ç»ã
     *
     */

    this.animatingElements = [];
    /**
     * @member {SuperMap.LevelRenderer.animation.Animation} SuperMap.LevelRenderer.Render.prototype.animation
     * @description å¨ç»å¯¹è±¡ã
     *
     */

    this.animation = new Animation({
      stage: {
        update: Render.getFrameCallback(this)
      }
    });
    /**
     * @member {boolean} SuperMap.LevelRenderer.Render.prototype._needsRefreshNextFrame
     * @description æ¯å¦éè¦å·æ°ä¸ä¸å¸§ã
     *
     */

    this._needsRefreshNextFrame = false;
    this.animation.start();
    this.CLASS_NAME = "SuperMap.LevelRenderer.Render";
  }
  /**
   * @function SuperMap.LevelRenderer.Render.prototype.destory
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  Render_createClass(Render, [{
    key: "destroy",
    value: function destroy() {
      this.id = null;
      this.storage = null;
      this.painter = null;
      this.handler = null;
      this.animatingElements = null;
      this.animation = null;
      this._needsRefreshNextFrame = null;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.getId
     * @description è·åå®ä¾å¯ä¸æ è¯ã
     * @return {string} å®ä¾å¯ä¸æ è¯ã
     */

  }, {
    key: "getId",
    value: function getId() {
      return this.id;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.addShape
     * @description æ·»å å¾å½¢å½¢ç¶å°æ ¹èç¹ã
     *
     * @param {SuperMap.LevelRenderer.Shape} shape - å¾å½¢å¯¹è±¡ï¼å¯ç¨å±æ§å¨éï¼è¯¦è§å shapeã
     * @return {SuperMap.LevelRenderer.Render} thisã
     */

  }, {
    key: "addShape",
    value: function addShape(shape) {
      this.storage.addRoot(shape);
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.addGroup
     * @description æ·»å ç»å°æ ¹èç¹ã
     *
     * (code)
     * //æ·»å ç»å°æ ¹èç¹ä¾å­
     * var render = new SuperMap.LevelRenderer.Render("Render",document.getElementById('lRendertest'));
     * render.clear();
     * var g = new SuperMap.LevelRenderer.Group();
     * g.addChild(new SuperMap.LevelRenderer.Shape.Circle({
     *     style: {
     *         x: 100,
     *         y: 100,
     *         r: 20,
     *         brushType: 'fill'
     *     }
     * }));
     * render.addGroup(g);
     * render.render();
     * (end)
     *
     * @param {SuperMap.LevelRenderer.Group} group - ç»å¯¹è±¡ã
     * @return {SuperMap.LevelRenderer.Render} thisã
     */

  }, {
    key: "addGroup",
    value: function addGroup(group) {
      this.storage.addRoot(group);
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.delShape
     * @description ä»æ ¹èç¹å é¤å¾å½¢å½¢ç¶ã
     *
     * @param {string} shapeId - å¾å½¢å¯¹è±¡å¯ä¸æ è¯ã
     * @return {SuperMap.LevelRenderer.Render} thisã
     */

  }, {
    key: "delShape",
    value: function delShape(shapeId) {
      this.storage.delRoot(shapeId);
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.delGroup
     * @description ä»æ ¹èç¹å é¤ç»ã
     *
     * @param {string} groupId - ç»å¯¹è±¡å¯ä¸æ è¯ã
     * @return {SuperMap.LevelRenderer.Render} thisã
     */

  }, {
    key: "delGroup",
    value: function delGroup(groupId) {
      this.storage.delRoot(groupId);
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.modShape
     * @description ä¿®æ¹å¾å½¢å½¢ç¶ã
     *
     * @param {string} shapeId - å¾å½¢å¯¹è±¡å¯ä¸æ è¯ã
     * @param {SuperMap.LevelRenderer.Shape} shape - å¾å½¢å¯¹è±¡ã
     * @return {SuperMap.LevelRenderer.Render} thisã
     */

  }, {
    key: "modShape",
    value: function modShape(shapeId, shape) {
      this.storage.mod(shapeId, shape);
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.modGroup
     * @description ä¿®æ¹ç»ã
     *
     * @param {string} groupId - ç»å¯¹è±¡å¯ä¸æ è¯ã
     * @param {SuperMap.LevelRenderer.Group} group - ç»å¯¹è±¡ã
     * @return {SuperMap.LevelRenderer.Render} thisã
     */

  }, {
    key: "modGroup",
    value: function modGroup(groupId, group) {
      this.storage.mod(groupId, group);
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.modLayer
     * @description ä¿®æ¹æå® zlevel çç»å¶éç½®é¡¹ã
     *
     * @param {string} zLevel - ç»å¯¹è±¡å¯ä¸æ è¯ã
     * @param {Object} config - éç½®å¯¹è±¡ã
     * @param {string} clearColor - æ¯æ¬¡æ¸ç©ºç»å¸çé¢è²ãé»è®¤å¼ï¼0ã
     * @param {noolean} motionBlur - æ¯å¦å¼å¯å¨ææ¨¡ç³ãé»è®¤å¼ï¼falseã
     * @param {number}  lastFrameAlpha - å¨å¼å¯å¨ææ¨¡ç³çæ¶åä½¿ç¨ï¼ä¸ä¸ä¸å¸§æ··åçalphaå¼ï¼å¼è¶å¤§å°¾è¿¹è¶ææ¾ãé»è®¤å¼ï¼0.7ã
     * @param {Array.<number>} position - å±çå¹³ç§»ã
     * @param {Array.<number>} rotation - å±çæè½¬ã
     * @param {Array.<number>} scale - å±çç¼©æ¾ã
     * @param {boolean} zoomable - å±æ¯å¦æ¯æé¼ æ ç¼©æ¾æä½ãé»è®¤å¼ï¼falseã
     * @param {boolean} panable - å±æ¯å¦æ¯æé¼ æ å¹³ç§»æä½ãé»è®¤å¼ï¼falseã
     * @return {SuperMap.LevelRenderer.Render} thisã
     */

  }, {
    key: "modLayer",
    value: function modLayer(zLevel, config) {
      this.painter.modLayer(zLevel, config);
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.addHoverShape
     * @description æ·»å é¢å¤é«äº®å±æ¾ç¤ºï¼ä»æä¾æ·»å æ¹æ³ï¼æ¯æ¬¡å·æ°åé«äº®å±å¾å½¢åè¢«æ¸ç©ºã
     *
     * @param {SuperMap.LevelRenderer.Shape} shape - å¾å½¢å¯¹è±¡ã
     * @return {SuperMap.LevelRenderer.Render} thisã
     */

  }, {
    key: "addHoverShape",
    value: function addHoverShape(shape) {
      this.storage.addHover(shape);
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.render
     * @description æ¸²æã
     *
     * @callback {Function} callback - æ¸²æç»æååè°å½æ°ã
     * @return {SuperMap.LevelRenderer.Render} thisã
     */

  }, {
    key: "render",
    value: function render(callback) {
      this.painter.render(callback);
      this._needsRefreshNextFrame = false;
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.refresh
     * @description è§å¾æ´æ°ã
     *
     * @callback {Function} callback - è§å¾æ´æ°ååè°å½æ°ã
     * @return {SuperMap.LevelRenderer.Render} thisã
     */

  }, {
    key: "refresh",
    value: function refresh(callback) {
      this.painter.refresh(callback);
      this._needsRefreshNextFrame = false;
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.refreshNextFrame
     * @description æ è®°è§å¾å¨æµè§å¨ä¸ä¸å¸§éè¦ç»å¶ã
     * @return {SuperMap.LevelRenderer.Render} thisã
     */

  }, {
    key: "refreshNextFrame",
    value: function refreshNextFrame() {
      this._needsRefreshNextFrame = true;
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.refreshHover
     * @description ç»å¶ï¼è§å¾æ´æ°ï¼é«äº®å±ã
     * @callback {Function} callback - è§å¾æ´æ°ååè°å½æ°ã
     * @return {SuperMap.LevelRenderer.Render} thisã
     */

  }, {
    key: "refreshHover",
    value: function refreshHover(callback) {
      this.painter.refreshHover(callback);
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.refreshShapes
     * @description è§å¾æ´æ°ã
     *
     * @param {Array.<SuperMap.LevelRenderer.Shape>} shapeList - éè¦æ´æ°çå¾å½¢åè¡¨ã
     * @callback {Function} callback - è§å¾æ´æ°ååè°å½æ°ã
     * @return {SuperMap.LevelRenderer.Render} thisã
     */

  }, {
    key: "refreshShapes",
    value: function refreshShapes(shapeList, callback) {
      this.painter.refreshShapes(shapeList, callback);
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.resize
     * @description è°æ´è§å¾å¤§å°ã
     * @return {SuperMap.LevelRenderer.Render} thisã
     */

  }, {
    key: "resize",
    value: function resize() {
      this.painter.resize();
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.animate
     * @description å¨ç»ã
     *
     * @example
     *     zr.animate(circle.id, 'style', false)
     *         .when(1000, {x: 10} )
     *         .done(function(){ // Animation done })
     *         .start()
     * 
     *
     * @param {Array.<(SuperMap.LevelRenderer.Shape/SuperMap.LevelRenderer.Group)>} el - å¨ç»å¯¹è±¡ã
     * @param {string} path - éè¦æ·»å å¨ç»çå±æ§è·åè·¯å¾ï¼å¯ä»¥éè¿ a.b.c æ¥è·åæ·±å±çå±æ§ãè¥ä¼ å¥å¯¹è±¡ä¸º<SuperMap.LevelRenderer.Group>,pathéä¸ºç©ºå­ç¬¦ä¸²ã
     * @param {Function} loop - å¨ç»æ¯å¦å¾ªç¯ã
     * @return {SuperMap.LevelRenderer.animation.Animator} Animatorã
     */

  }, {
    key: "animate",
    value: function animate(el, path, loop) {
      if (typeof el === 'string') {
        el = this.storage.get(el);
      }

      if (el) {
        var target;

        if (path) {
          var pathSplitted = path.split('.');
          var prop = el;

          for (var i = 0, l = pathSplitted.length; i < l; i++) {
            if (!prop) {
              continue;
            }

            prop = prop[pathSplitted[i]];
          }

          if (prop) {
            target = prop;
          }
        } else {
          target = el;
        }

        if (!target) {
          SUtil_SUtil.Util_log('Property "' + path + '" is not existed in element ' + el.id);
          return;
        }

        var animatingElements = this.animatingElements;

        if (typeof el.__aniCount === 'undefined') {
          // æ­£å¨è¿è¡çå¨ç»è®°æ°
          el.__aniCount = 0;
        }

        if (el.__aniCount === 0) {
          animatingElements.push(el);
        }

        el.__aniCount++;
        return this.animation.animate(target, {
          loop: loop
        }).done(function () {
          el.__aniCount--;

          if (el.__aniCount === 0) {
            // ä»animatingElementséç§»é¤
            var idx = new Util_Util().indexOf(animatingElements, el);
            animatingElements.splice(idx, 1);
          }
        });
      } else {
        SUtil_SUtil.Util_log('Element not existed');
      }
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.clearAnimation
     * @description åæ­¢ææå¨ç»ã
     *
     */

  }, {
    key: "clearAnimation",
    value: function clearAnimation() {
      this.animation.clear();
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.getWidth
     * @description è·åè§å¾å®½åº¦ã
     * @return {number} è§å¾å®½åº¦ã
     */

  }, {
    key: "getWidth",
    value: function getWidth() {
      return this.painter.getWidth();
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.getHeight
     * @description è·åè§å¾é«åº¦ã
     * @return {number} è§å¾é«åº¦ã
     */

  }, {
    key: "getHeight",
    value: function getHeight() {
      return this.painter.getHeight();
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.toDataURL
     * @description å¾åå¯¼åºã
     *
     * @param {string} type - ç±»åã
     * @param {string} backgroundColor - èæ¯è²ï¼é»è®¤å¼ï¼"#FFFFFF"ã
     * @param {string} args - åæ°ã
     * @return {string} å¾çç Base64 urlã
     */

  }, {
    key: "toDataURL",
    value: function toDataURL(type, backgroundColor, args) {
      return this.painter.toDataURL(type, backgroundColor, args);
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.shapeToImage
     * @description å°å¸¸è§ shape è½¬æ image shapeã
     *
     * @param {SuperMap.LevelRenderer.Shape} e - å¾å½¢ã
     * @param {number} width - å®½åº¦ã
     * @param {number} height - é«åº¦ã
     * @return {Object} image shapeã
     */

  }, {
    key: "shapeToImage",
    value: function shapeToImage(e, width, height) {
      var id = Util.createUniqueID("SuperMap.LevelRenderer.ToImage_");
      return this.painter.shapeToImage(id, e, width, height);
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.on
     * @description äºä»¶ç»å®ã
     *
     * @param {string} eventName - äºä»¶åç§°ã
     * @param {Function} eventHandler - ååºå½æ°ã
     * @return {SuperMap.LevelRenderer.Render} thisã
     */

  }, {
    key: "on",
    value: function on(eventName, eventHandler) {
      this.handler.on(eventName, eventHandler);
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.un
     * @description äºä»¶è§£ç»å®ï¼åæ°ä¸ºç©ºåè§£ç»ææèªå®ä¹äºä»¶ã
     *
     * @param {string} eventName - äºä»¶åç§°ã
     * @param {Function} eventHandler - ååºå½æ°ã
     * @return {SuperMap.LevelRenderer.Render} thisã
     */

  }, {
    key: "un",
    value: function un(eventName, eventHandler) {
      this.handler.un(eventName, eventHandler);
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.trigger
     * @description  äºä»¶è§¦åã
     *
     * @param {string} eventName - äºä»¶åç§°ï¼resizeï¼hoverï¼dragï¼etcã
     * @param {event} event - event domäºä»¶å¯¹è±¡ã
     * @return {SuperMap.LevelRenderer.Render} thisã
     */

  }, {
    key: "trigger",
    value: function trigger(eventName, event) {
      this.handler.trigger(eventName, event);
      this.handler.dispatch(eventName, event);
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.clear
     * @description æ¸é¤å½å Render ä¸ææç±»å¾çæ°æ®åæ¾ç¤ºï¼clear å MVC åå·²ç»å®äºä»¶åè¿å­å¨å¨ï¼Render å¯ç¨ã
     * @return {SuperMap.LevelRenderer.Render} thisã
     */

  }, {
    key: "clear",
    value: function clear() {
      this.storage.delRoot();
      this.painter.clear();
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.dispose
     * @description éæ¾å½å Render å®ä¾ï¼å é¤åæ¬ domï¼æ°æ®ãæ¾ç¤ºåäºä»¶ç»å®ï¼ï¼disposeå Render ä¸å¯ç¨ã
     */

  }, {
    key: "dispose",
    value: function dispose() {
      this.animation.stop();
      this.clear();
      this.storage.dispose();
      this.painter.dispose();
      this.handler.dispose();
      this.animation = null;
      this.animatingElements = null;
      this.storage = null;
      this.painter = null;
      this.handler = null; // éæ¾ååè¯å¨å±å é¤å¯¹èªå·±çç´¢å¼ï¼æ²¡æ³å°å¥å¥½æ¹æ³
      // zrender.delInstance(this.id);
    } // SMIC-æ¹æ³æ©å± - start

    /**
     * @function SuperMap.LevelRenderer.Render.prototype.updateHoverShapes
     * @description æ´æ°è®¾ç½®æ¾ç¤ºé«äº®å¾å±ã
     *
     * @param {Array.<SuperMap.LevelRenderer.Shape>} shapes - å¾å½¢æ°ç»ã
     * @return {SuperMap.LevelRenderer.Render} thisã
     */

  }, {
    key: "updateHoverShapes",
    value: function updateHoverShapes(shapes) {
      this.painter.updateHoverLayer(shapes);
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.getAllShapes
     * @description è·åææå¾å½¢ã
     * @return {Array.<SuperMap.LevelRenderer.Shape>} å¾å½¢æ°ç»ã
     */

  }, {
    key: "getAllShapes",
    value: function getAllShapes() {
      return this.storage._shapeList;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.clearAll
     * @description æ¸é¤é«äº®åå¾å½¢å¾å±ã
     * @return {SuperMap.LevelRenderer.Render} thisã
     */

  }, {
    key: "clearAll",
    value: function clearAll() {
      this.clear();
      this.painter.clearHover();
      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.Render.prototype.getHoverOne
     * @description è·ååä¸ªé«äº®å¾å½¢ï¼å½åé¼ æ å¯¹åºã
     * @return {SuperMap.LevelRenderer.Shape} é«äº®å¾å½¢ã
     */

  }, {
    key: "getHoverOne",
    value: function getHoverOne() {
      return this.handler.getLastHoverOne();
    }
  }], [{
    key: "getFrameCallback",
    value: function getFrameCallback(renderInstance) {
      return function () {
        var animatingElements = renderInstance.animatingElements; //animatingElements instanceof Array ä¸´æ¶è§£å³ destory æ¥é

        if (animatingElements instanceof Array) {
          for (var i = 0, l = animatingElements.length; i < l; i++) {
            renderInstance.storage.mod(animatingElements[i].id);
          }

          if (animatingElements.length || renderInstance._needsRefreshNextFrame) {
            renderInstance.refresh();
          }
        }
      };
    } // SMIC-æ¹æ³æ©å± - end

  }]);

  return Render;
}();
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/LevelRenderer.js
function LevelRenderer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function LevelRenderer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function LevelRenderer_createClass(Constructor, protoProps, staticProps) { if (protoProps) LevelRenderer_defineProperties(Constructor.prototype, protoProps); if (staticProps) LevelRenderer_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class  SuperMap.LevelRenderer
 * @category Visualization Theme
 * @classdesc LevelRenderer æ¸²æå¨
 * @private 
 */

var LevelRenderer = /*#__PURE__*/function () {
  /**
   * @function SuperMap.LevelRenderer.constructor
   * @description æé å½æ°ã
   * @example 
   * //å¨æ¸²æå¨ä¸å ä¸å¾å½¢
   * var levelRenderer = new SuperMap.LevelRenderer();
   * var zr = levelRenderer.init(document.getElementById('lRendertest'));
   * zr.clear();
   * zr.addShape(new SuperMap.LevelRenderer.Shape.Circle({
   *     style:{
   *         x : 100,
   *         y : 100,
   *         r : 50,
   *         brushType: 'fill'
   *     }
   * }));
   * zr.render();
   */
  function LevelRenderer() {
    LevelRenderer_classCallCheck(this, LevelRenderer);

    /**
     * @member {Object} SuperMap.LevelRenderer.prototype._instances
     * @description LevelRenderer å®ä¾ map ç´¢å¼
     */
    LevelRenderer._instances = {}; // å·¥å·

    LevelRenderer.Tool = {};
    /**
     * @member {string} SuperMap.LevelRenderer.prototype.version
     * @description çæ¬ãzRenderï¼Baiduï¼ççæ¬å·
     *              è®°å½å½å LevelRenderer æ¯å¨ zRender çé£ä¸ªçæ¬ä¸æå»ºèæ¥ã
     *              å¨æ¯æ¬¡å®æ´è¯å¤åå®æ½ç± zRenderï¼Baiduï¼åçº§å¸¦æ¥ç LevelRenderer åçº§åä¿®æ¹ã
     */

    this.version = '2.0.4';
    this.CLASS_NAME = "SuperMap.LevelRenderer";
  }
  /**
   * @function SuperMap.LevelRenderer.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸ºnullã
   */


  LevelRenderer_createClass(LevelRenderer, [{
    key: "destroy",
    value: function destroy() {
      this.dispose();
      this.version = null;
    }
    /**
     * @function SuperMap.LevelRenderer.prototype.init
     * @description åå»º LevelRenderer å®ä¾ã
     * @param {HTMLElement} dom - ç»å¾å®¹å¨ã
     * @returns {SuperMap.LevelRenderer} LevelRenderer å®ä¾ã
     */

  }, {
    key: "init",
    value: function init(dom) {
      var zr = new Render(Util.createUniqueID("LRenderer_"), dom);
      LevelRenderer._instances[zr.id] = zr;
      return zr;
    }
    /**
     * @function SuperMap.LevelRenderer.prototype.dispose
     * @description LevelRenderer å®ä¾éæ¯ã
     *              å¯ä»¥éè¿ zrender.dispose(zr) éæ¯æå® SuperMap.LevelRenderer.Render å®ä¾ã
     *              ä¹å¯ä»¥éè¿ zr.dispose() ç´æ¥éæ¯
     * @param {SuperMap.LevelRenderer.Render} zr - ZRenderå¯¹è±¡ï¼ä¸ä¼ æ­¤åæ°åéæ¯å¨é¨ã
     * @returns {SuperMap.LevelRenderer} thisã
     */

  }, {
    key: "dispose",
    value: function dispose(zr) {
      if (zr) {
        zr.dispose();
        this.delInstance(zr.id);
      } else {
        for (var key in LevelRenderer._instances) {
          LevelRenderer._instances[key].dispose();
        }

        LevelRenderer._instances = {};
      }

      return this;
    }
    /**
     * @function SuperMap.LevelRenderer.prototype.getInstance
     * @description è·å SuperMap.LevelRenderer.Render å®ä¾ã
     * @param {string} id - ZRenderå¯¹è±¡ç´¢å¼ã
     * @returns {SuperMap.LevelRenderer.Render} SuperMap.LevelRenderer.Render å®ä¾ã
     */

  }, {
    key: "getInstance",
    value: function getInstance(id) {
      return LevelRenderer._instances[id];
    }
    /**
     * @function SuperMap.LevelRenderer.prototype.delInstance
     * @description å é¤ zrender å®ä¾ï¼SuperMap.LevelRenderer.Render å®ä¾ dispose æ¶ä¼è°ç¨ï¼å é¤å getInstance åè¿å undefined
     * @param {string} id - ZRenderå¯¹è±¡ç´¢å¼ã
     * @param {string} id - SuperMap.LevelRenderer.Render å¯¹è±¡ç´¢å¼ã
     * @returns {SuperMap.LevelRenderer} thisã
     */

  }, {
    key: "delInstance",
    value: function delInstance(id) {
      delete LevelRenderer._instances[id];
      return this;
    }
  }]);

  return LevelRenderer;
}();
SuperMap.LevelRenderer = LevelRenderer;
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/SmicEllipse.js
function SmicEllipse_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SmicEllipse_typeof = function _typeof(obj) { return typeof obj; }; } else { SmicEllipse_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SmicEllipse_typeof(obj); }

function SmicEllipse_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SmicEllipse_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SmicEllipse_createClass(Constructor, protoProps, staticProps) { if (protoProps) SmicEllipse_defineProperties(Constructor.prototype, protoProps); if (staticProps) SmicEllipse_defineProperties(Constructor, staticProps); return Constructor; }

function SmicEllipse_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SmicEllipse_get = Reflect.get; } else { SmicEllipse_get = function _get(target, property, receiver) { var base = SmicEllipse_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SmicEllipse_get(target, property, receiver || target); }

function SmicEllipse_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SmicEllipse_getPrototypeOf(object); if (object === null) break; } return object; }

function SmicEllipse_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SmicEllipse_setPrototypeOf(subClass, superClass); }

function SmicEllipse_setPrototypeOf(o, p) { SmicEllipse_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SmicEllipse_setPrototypeOf(o, p); }

function SmicEllipse_createSuper(Derived) { var hasNativeReflectConstruct = SmicEllipse_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SmicEllipse_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SmicEllipse_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SmicEllipse_possibleConstructorReturn(this, result); }; }

function SmicEllipse_possibleConstructorReturn(self, call) { if (call && (SmicEllipse_typeof(call) === "object" || typeof call === "function")) { return call; } return SmicEllipse_assertThisInitialized(self); }

function SmicEllipse_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SmicEllipse_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SmicEllipse_getPrototypeOf(o) { SmicEllipse_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SmicEllipse_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @private
 * @class  SuperMap.LevelRenderer.Shape.SmicEllipse
 * @category Visualization Theme
 * @classdesc æ¤­åã
 * @extends SuperMap.LevelRenderer.Shape
 * @example  
 *   var shape = new SuperMap.LevelRenderer.Shape.SmicEllipse({
 *       style: {
 *           x: 100,
 *           y: 100,
 *           a: 40,
 *           b: 20,
 *           brushType: 'both',
 *           color: 'blue',
 *           strokeColor: 'red',
 *           lineWidth: 3,
 *           text: 'SmicEllipse'
 *       }
 *   });
 *   levelRenderer.addShape(shape);
 * 
 *
 */

var SmicEllipse = /*#__PURE__*/(/* unused pure expression or super */ null && (function (_Shape) {
  SmicEllipse_inherits(SmicEllipse, _Shape);

  var _super = SmicEllipse_createSuper(SmicEllipse);

  /**
   * @member {Object} SuperMap.LevelRenderer.Shape.SmicEllipse.style
   * @description ç»å¶æ ·å¼ã
   *
   * @param {number} style.x - åå¿ x åæ ï¼å¿è®¾åæ°ã
   * @param {number} style.y - åå¿ y åæ ï¼å¿è®¾åæ°ã
   * @param {number} style.a - æ¨ªè½´åå¾ï¼å¿è®¾åæ°ã
   * @param {number} style.b - çºµè½´åå¾ï¼å¿è®¾åæ°ã
   * @param {string} style.brushType - ç»ç¬ç±»åãå¯è®¾å¼ï¼"fill", "stroke", "both"ãé»è®¤å¼ï¼"fill"ã
   * @param {string} style.color - å¡«åé¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} style.strokeColor - æè¾¹é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} style.lineCape - çº¿å¸½æ ·å¼ãå¯è®¾å¼ï¼"butt", "round", "square"ãé»è®¤å¼ï¼"butt"ã
   * @param {number} style.lineWidth - æè¾¹å®½åº¦ãé»è®¤å¼ï¼1ã
   * @param {number} style.opacity - ç»å¶éæåº¦ãé»è®¤å¼ï¼1ã
   * @param {number} style.shadowBlur - é´å½±æ¨¡ç³åº¦ï¼å¤§äº0ææãé»è®¤å¼ï¼0ã
   * @param {number} style.shadowColor - é´å½±é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {number} style.shadowOffsetX - é´å½±æ¨ªååç§»ãé»è®¤å¼ï¼0ã
   * @param {number} style.shadowOffsetY - é´å½±çºµååç§»ãé»è®¤å¼ï¼0ã
   * @param {string} style.text - å¾å½¢ä¸­çéå ææ¬ãé»è®¤å¼ï¼""ã
   * @param {string} style.textColor - ææ¬é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} style.textFont - éå ææ¬æ ·å¼ãç¤ºä¾:'bold 18px verdana'ã
   * @param {string} style.textPosition - éå ææ¬ä½ç½®ãå¯è®¾å¼ï¼"inside", "left", "right", top", "bottom", "end"ãé»è®¤å¼ï¼"end"ã
   * @param {string} style.textAlign - éå ææ¬æ°´å¹³å¯¹é½ãå¯è®¾å¼ï¼"start", "end", "left", "right", "center"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   * @param {string} style.textBaseline - éå ææ¬åç´å¯¹é½ãå¯è®¾å¼ï¼"top", "bottom", "middle", "alphabetic", "hanging", "ideographic"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   */
  //æå¼æ¥å£ style

  /**
   * @function SuperMap.LevelRenderer.Shape.SmicEllipse.constructor
   * @description æé å½æ°ã
   *
   * @param {Array} options - shape çéç½®ï¼optionsï¼é¡¹ï¼å¯ä»¥æ¯ shape çèªæå±æ§ï¼ä¹å¯ä»¥æ¯èªå®ä¹çå±æ§ã
   *
   */
  function SmicEllipse(options) {
    var _this;

    SmicEllipse_classCallCheck(this, SmicEllipse);

    _this = _super.call(this, options);
    /**
     * @member {string} SuperMap.LevelRenderer.Shape.SmicEllipse.prototype.type
     * @description å¾å½¢ç±»åã
     */

    _this.type = 'smicellipse';

    if (!_this.refOriginalPosition || _this.refOriginalPosition.length !== 2) {
      _this.refOriginalPosition = [0, 0];
    }

    _this.CLASS_NAME = "SuperMap.LevelRenderer.Shape.SmicEllipse";
    return _this;
  }
  /**
   * @function SuperMap.LevelRenderer.Shape.SmicEllipse.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  SmicEllipse_createClass(SmicEllipse, [{
    key: "destroy",
    value: function destroy() {
      this.type = null;

      SmicEllipse_get(SmicEllipse_getPrototypeOf(SmicEllipse.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicEllipse.prototype.buildPath
     * @description æå»ºæ¤­åç Pathã
     *
     * @param {CanvasRenderingContext2D} ctx - Context2D ä¸ä¸æã
     * @param {Object} style - styleã
     *
     */

  }, {
    key: "buildPath",
    value: function buildPath(ctx, style) {
      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;
      var k = 0.5522848;
      var x = style.x + __OP[0];
      var y = style.y + __OP[1];
      var a = style.a;
      var b = style.b;
      var ox = a * k; // æ°´å¹³æ§å¶ç¹åç§»é

      var oy = b * k; // åç´æ§å¶ç¹åç§»é
      // ä»æ¤­åçå·¦ç«¯ç¹å¼å§é¡ºæ¶éç»å¶åæ¡ä¸æ¬¡è´å¡å°æ²çº¿

      ctx.moveTo(x - a, y);
      ctx.bezierCurveTo(x - a, y - oy, x - ox, y - b, x, y - b);
      ctx.bezierCurveTo(x + ox, y - b, x + a, y - oy, x + a, y);
      ctx.bezierCurveTo(x + a, y + oy, x + ox, y + b, x, y + b);
      ctx.bezierCurveTo(x - ox, y + b, x - a, y + oy, x - a, y);
      ctx.closePath();
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicEllipse.prototype.getRect
     * @description è®¡ç®è¿åæ¤­ååå´çç©å½¢
     *
     * @param {Object} style - style
     * @return {Object} è¾¹æ¡å¯¹è±¡ãåå«å±æ§ï¼xï¼yï¼widthï¼heightã
     * 
     */

  }, {
    key: "getRect",
    value: function getRect(style) {
      if (style.__rect) {
        return style.__rect;
      }

      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;
      var lineWidth;

      if (style.brushType == 'stroke' || style.brushType == 'fill') {
        lineWidth = style.lineWidth || 1;
      } else {
        lineWidth = 0;
      }

      style.__rect = {
        x: Math.round(style.x + __OP[0] - style.a - lineWidth / 2),
        y: Math.round(style.x + __OP[1] - style.b - lineWidth / 2),
        width: style.a * 2 + lineWidth,
        height: style.b * 2 + lineWidth
      };
      return style.__rect;
    }
  }]);

  return SmicEllipse;
}(Shape)));
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/SmicIsogon.js
function SmicIsogon_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SmicIsogon_typeof = function _typeof(obj) { return typeof obj; }; } else { SmicIsogon_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SmicIsogon_typeof(obj); }

function SmicIsogon_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SmicIsogon_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SmicIsogon_createClass(Constructor, protoProps, staticProps) { if (protoProps) SmicIsogon_defineProperties(Constructor.prototype, protoProps); if (staticProps) SmicIsogon_defineProperties(Constructor, staticProps); return Constructor; }

function SmicIsogon_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SmicIsogon_get = Reflect.get; } else { SmicIsogon_get = function _get(target, property, receiver) { var base = SmicIsogon_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SmicIsogon_get(target, property, receiver || target); }

function SmicIsogon_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SmicIsogon_getPrototypeOf(object); if (object === null) break; } return object; }

function SmicIsogon_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SmicIsogon_setPrototypeOf(subClass, superClass); }

function SmicIsogon_setPrototypeOf(o, p) { SmicIsogon_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SmicIsogon_setPrototypeOf(o, p); }

function SmicIsogon_createSuper(Derived) { var hasNativeReflectConstruct = SmicIsogon_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SmicIsogon_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SmicIsogon_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SmicIsogon_possibleConstructorReturn(this, result); }; }

function SmicIsogon_possibleConstructorReturn(self, call) { if (call && (SmicIsogon_typeof(call) === "object" || typeof call === "function")) { return call; } return SmicIsogon_assertThisInitialized(self); }

function SmicIsogon_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SmicIsogon_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SmicIsogon_getPrototypeOf(o) { SmicIsogon_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SmicIsogon_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @private
 * @class  SuperMap.LevelRenderer.Shape.SmicIsogon
 * @category Visualization Theme
 * @classdesc æ­£å¤è¾¹å½¢ã
 * @extends SuperMap.LevelRenderer.Shape
 */

var SmicIsogon = /*#__PURE__*/(/* unused pure expression or super */ null && (function (_Shape) {
  SmicIsogon_inherits(SmicIsogon, _Shape);

  var _super = SmicIsogon_createSuper(SmicIsogon);

  /**
   * @member {Object} SuperMap.LevelRenderer.Shape.SmicIsogon.prototype.style
   * @description ç»å¶æ ·å¼ã
   *
   * @param {number} x - æ­£ n è¾¹å½¢å¤æ¥åå¿ x åæ ï¼å¿è®¾åæ°ã
   * @param {number} y - æ­£ n è¾¹å½¢å¤æ¥åå¿ y åæ ï¼å¿è®¾åæ°ã
   * @param {number} r - æ­£nè¾¹å½¢å¤æ¥ååå¾ï¼å¿è®¾åæ°ã
   * @param {number} ï½ - æææ­£å è¾¹å½¢ï¼å¿è®¾åæ°ï¼n>=3ï¼ã
   * @param {string} brushType - ç»ç¬ç±»åãå¯è®¾å¼ï¼"fill", "stroke", "both"ãé»è®¤å¼ï¼"fill"ã
   * @param {string} color -  å¡«åé¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} strokeColor - æè¾¹é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} lineCape - çº¿å¸½æ ·å¼ãå¯è®¾å¼ï¼"butt", "round", "square"ãé»è®¤å¼ï¼"butt"ã
   * @param {number} lineWidth - æè¾¹å®½åº¦ãé»è®¤å¼ï¼1ã
   * @param {number} opacity - ç»å¶éæåº¦ãé»è®¤å¼ï¼1ã
   * @param {number} shadowBlur - é´å½±æ¨¡ç³åº¦ï¼å¤§äº0ææãé»è®¤å¼ï¼0ã
   * @param {number} shadowColor - é´å½±é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {number} shadowOffsetX - é´å½±æ¨ªååç§»ãé»è®¤å¼ï¼0ã
   * @param {number} shadowOffsetY - é´å½±çºµååç§»ãé»è®¤å¼ï¼0ã
   * @param {string} text - å¾å½¢ä¸­çéå ææ¬ãé»è®¤å¼ï¼""ã
   * @param {string} textColor -ææ¬é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} textFont - éå ææ¬æ ·å¼ãç¤ºä¾:'bold 18px verdana'ã
   * @param {string} textPosition - éå ææ¬ä½ç½®ãå¯è®¾å¼ï¼"inside", "left", "right", top", "bottom", "end"ãé»è®¤å¼ï¼"end"ã
   * @param {string} textAlign - éå ææ¬æ°´å¹³å¯¹é½ãå¯è®¾å¼ï¼"start", "end", "left", "right", "center"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   * @param {string} textBaseline - éå ææ¬åç´å¯¹é½ãå¯è®¾å¼ï¼"top", "bottom", "middle", "alphabetic", "hanging", "ideographic"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   */
  //æå¼æ¥å£ style

  /**
   * @function SuperMap.LevelRenderer.Shape.SmicIsogon.constructor
   * @description æé å½æ°ã
   *
   * @param {Array} options - shape çéç½®ï¼optionsï¼é¡¹ï¼å¯ä»¥æ¯ shape çèªæå±æ§ï¼ä¹å¯ä»¥æ¯èªå®ä¹çå±æ§ã
   *
   */
  function SmicIsogon(options) {
    var _this;

    SmicIsogon_classCallCheck(this, SmicIsogon);

    _this = _super.call(this, options);
    /**
     * @member {string} SuperMap.LevelRenderer.Shape.SmicIsogon.prototype.type
     * @description å¾å½¢ç±»åã
     */

    _this.type = 'smicisogon';

    if (!_this.refOriginalPosition || _this.refOriginalPosition.length !== 2) {
      _this.refOriginalPosition = [0, 0];
    }

    _this.CLASS_NAME = "SuperMap.LevelRenderer.Shape.SmicIsogon";
    return _this;
  }
  /**
   * @function SuperMap.LevelRenderer.Shape.SmicIsogon.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  SmicIsogon_createClass(SmicIsogon, [{
    key: "destroy",
    value: function destroy() {
      this.type = null;

      SmicIsogon_get(SmicIsogon_getPrototypeOf(SmicIsogon.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicIsogon.prototype.buildPath
     * @description åå»ºnè§æï¼n>=3ï¼è·¯å¾ã
     *
     * @param {CanvasRenderingContext2D} ctx - Context2D ä¸ä¸æã
     * @param {Object} style - styleã
     *
     */

  }, {
    key: "buildPath",
    value: function buildPath(ctx, style) {
      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;
      var sin = SUtil.Util_math.sin;
      var cos = SUtil.Util_math.cos;
      var PI = Math.PI;
      var n = style.n;

      if (!n || n < 2) {
        return;
      }

      var x = style.x + __OP[0];
      var y = style.y + __OP[1];
      var r = style.r;
      var dStep = 2 * PI / n;
      var deg = -PI / 2;
      var xStart = x + r * cos(deg);
      var yStart = y + r * sin(deg);
      deg += dStep; // è®°å½è¾¹çç¹ï¼ç¨äºå¤æ­insight

      var pointList = style.pointList = [];
      pointList.push([xStart, yStart]);

      for (var i = 0, end = n - 1; i < end; i++) {
        pointList.push([x + r * cos(deg), y + r * sin(deg)]);
        deg += dStep;
      }

      pointList.push([xStart, yStart]); // ç»å¶

      ctx.moveTo(pointList[0][0], pointList[0][1]);

      for (var _i = 0; _i < pointList.length; _i++) {
        ctx.lineTo(pointList[_i][0], pointList[_i][1]);
      }

      ctx.closePath();
      return;
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicIsogon.prototype.getRect
     * @description è®¡ç®è¿åæ­£å¤è¾¹å½¢çåå´çç©å½¢ã
     *
     * @param {Object} style - style
     * @return {Object} è¾¹æ¡å¯¹è±¡ãåå«å±æ§ï¼xï¼yï¼widthï¼heightã
     */

  }, {
    key: "getRect",
    value: function getRect(style) {
      if (style.__rect) {
        return style.__rect;
      }

      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;
      var lineWidth;

      if (style.brushType == 'stroke' || style.brushType == 'fill') {
        lineWidth = style.lineWidth || 1;
      } else {
        lineWidth = 0;
      }

      style.__rect = {
        x: Math.round(style.x + __OP[0] - style.r - lineWidth / 2),
        y: Math.round(style.y + __OP[1] - style.r - lineWidth / 2),
        width: style.r * 2 + lineWidth,
        height: style.r * 2 + lineWidth
      };
      return style.__rect;
    }
  }]);

  return SmicIsogon;
}(Shape)));
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/SmicRing.js
function SmicRing_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SmicRing_typeof = function _typeof(obj) { return typeof obj; }; } else { SmicRing_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SmicRing_typeof(obj); }

function SmicRing_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SmicRing_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SmicRing_createClass(Constructor, protoProps, staticProps) { if (protoProps) SmicRing_defineProperties(Constructor.prototype, protoProps); if (staticProps) SmicRing_defineProperties(Constructor, staticProps); return Constructor; }

function SmicRing_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SmicRing_get = Reflect.get; } else { SmicRing_get = function _get(target, property, receiver) { var base = SmicRing_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SmicRing_get(target, property, receiver || target); }

function SmicRing_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SmicRing_getPrototypeOf(object); if (object === null) break; } return object; }

function SmicRing_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SmicRing_setPrototypeOf(subClass, superClass); }

function SmicRing_setPrototypeOf(o, p) { SmicRing_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SmicRing_setPrototypeOf(o, p); }

function SmicRing_createSuper(Derived) { var hasNativeReflectConstruct = SmicRing_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SmicRing_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SmicRing_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SmicRing_possibleConstructorReturn(this, result); }; }

function SmicRing_possibleConstructorReturn(self, call) { if (call && (SmicRing_typeof(call) === "object" || typeof call === "function")) { return call; } return SmicRing_assertThisInitialized(self); }

function SmicRing_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SmicRing_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SmicRing_getPrototypeOf(o) { SmicRing_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SmicRing_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @private
 * @class  SuperMap.LevelRenderer.Shape.SmicRing
 * @category Visualization Theme
 * @classdesc åç¯ã
 * @extends SuperMap.LevelRenderer.Shape
 * @example
 *   var shape = new SuperMap.LevelRenderer.Shape.SmicRing({
 *         style: {
 *             x: 100,
 *             y: 100,
 *             r0: 30,
 *             r: 50
 *         }
 *     });
 *   levelRenderer.addShape(shape);
 *
 */

var SmicRing = /*#__PURE__*/(/* unused pure expression or super */ null && (function (_Shape) {
  SmicRing_inherits(SmicRing, _Shape);

  var _super = SmicRing_createSuper(SmicRing);

  /**
   * @member {Object} SuperMap.LevelRenderer.Shape.SmicRing.prototype.style
   * @description ç»å¶æ ·å¼ã
   *
   * @param {number} x - åå¿ x åæ ï¼å¿è®¾åæ°ã
   * @param {number} y - åå¿ y åæ ï¼å¿è®¾åæ°ã
   * @param {number} r - å¤ååå¾ï¼å¿è®¾åæ°ã
   * @param {number} r0 - åååå¾ï¼å¿è®¾åæ°ã
   * @param {string} brushType - ç»ç¬ç±»åãå¯è®¾å¼ï¼"fill", "stroke", "both"ãé»è®¤å¼ï¼"fill"ã
   * @param {string} color - å¡«åé¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} strokeColor - æè¾¹é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} lineCape - çº¿å¸½æ ·å¼ãå¯è®¾å¼ï¼"butt", "round", "square"ãé»è®¤å¼ï¼"butt"ã
   * @param {number} lineWidth -æè¾¹å®½åº¦ãé»è®¤å¼ï¼1ã
   * @param {number} opacity - ç»å¶éæåº¦ãé»è®¤å¼ï¼1ã
   * @param {number} shadowBlur - é´å½±æ¨¡ç³åº¦ï¼å¤§äº0ææãé»è®¤å¼ï¼0ã
   * @param {number} shadowColor - é´å½±é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {number} shadowOffsetX - é´å½±æ¨ªååç§»ãé»è®¤å¼ï¼0ã
   * @param {number} shadowOffsetY - é´å½±çºµååç§»ãé»è®¤å¼ï¼0ã
   * @param {string} text -å¾å½¢ä¸­çéå ææ¬ãé»è®¤å¼ï¼""ã
   * @param {string} textColor - ææ¬é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} textFont - éå ææ¬æ ·å¼ãç¤ºä¾:'bold 18px verdana'ã
   * @param {string} textPosition - éå ææ¬ä½ç½®ãå¯è®¾å¼ï¼"inside", "left", "right", top", "bottom", "end"ãé»è®¤å¼ï¼"end"ã
   * @param {string} textAlign - éå ææ¬æ°´å¹³å¯¹é½ãå¯è®¾å¼ï¼"start", "end", "left", "right", "center"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   * @param {string} textBaseline - éå ææ¬åç´å¯¹é½ãå¯è®¾å¼ï¼"top", "bottom", "middle", "alphabetic", "hanging", "ideographic"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   */
  //æå¼æ¥å£ style

  /**
   * @function SuperMap.LevelRenderer.Shape.SmicRing.constructor
   * @description æé å½æ°ã
   *
   * @param {Array} options - shape çéç½®ï¼optionsï¼é¡¹ï¼å¯ä»¥æ¯ shape çèªæå±æ§ï¼ä¹å¯ä»¥æ¯èªå®ä¹çå±æ§ã
   */
  function SmicRing(options) {
    var _this;

    SmicRing_classCallCheck(this, SmicRing);

    _this = _super.call(this, options);
    /**
     * @member {string} SuperMap.LevelRenderer.Shape.SmicRing.prototype.type
     * @description å¾å½¢ç±»åã
     */

    _this.type = 'smicring';

    if (!_this.refOriginalPosition || _this.refOriginalPosition.length !== 2) {
      _this.refOriginalPosition = [0, 0];
    }

    _this.CLASS_NAME = "SuperMap.LevelRenderer.Shape.SmicRing";
    return _this;
  }
  /**
   * @function SuperMap.LevelRenderer.Shape.SmicRing.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  SmicRing_createClass(SmicRing, [{
    key: "destroy",
    value: function destroy() {
      this.type = null;

      SmicRing_get(SmicRing_getPrototypeOf(SmicRing.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicRing.prototype.buildPath
     * @description åå»ºåç¯è·¯å¾ã
     *
     * @param {CanvasRenderingContext2D} ctx - Context2D ä¸ä¸æã
     * @param {Object} style - styleã
     *
     */

  }, {
    key: "buildPath",
    value: function buildPath(ctx, style) {
      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition; // éé¶ç¯ç»å¡«åä¼å

      ctx.arc(style.x + __OP[0], style.y + __OP[1], style.r, 0, Math.PI * 2, false);
      ctx.moveTo(style.x + __OP[0] + style.r0, style.y + __OP[1]);
      ctx.arc(style.x + __OP[0], style.y + __OP[1], style.r0, 0, Math.PI * 2, true);
      return;
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicRing.prototype.getRect
     * @description è®¡ç®è¿ååç¯åå´çç©éµ
     *
     * @param {Object} style - style
     * @return {Object} è¾¹æ¡å¯¹è±¡ãåå«å±æ§ï¼xï¼yï¼widthï¼heightã
     */

  }, {
    key: "getRect",
    value: function getRect(style) {
      if (style.__rect) {
        return style.__rect;
      }

      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;
      var lineWidth;

      if (style.brushType == 'stroke' || style.brushType == 'fill') {
        lineWidth = style.lineWidth || 1;
      } else {
        lineWidth = 0;
      }

      style.__rect = {
        x: Math.round(style.x + __OP[0] - style.r - lineWidth / 2),
        y: Math.round(style.y + __OP[1] - style.r - lineWidth / 2),
        width: style.r * 2 + lineWidth,
        height: style.r * 2 + lineWidth
      };
      return style.__rect;
    }
  }]);

  return SmicRing;
}(Shape)));
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/SmicStar.js
function SmicStar_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SmicStar_typeof = function _typeof(obj) { return typeof obj; }; } else { SmicStar_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SmicStar_typeof(obj); }

function SmicStar_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SmicStar_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SmicStar_createClass(Constructor, protoProps, staticProps) { if (protoProps) SmicStar_defineProperties(Constructor.prototype, protoProps); if (staticProps) SmicStar_defineProperties(Constructor, staticProps); return Constructor; }

function SmicStar_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { SmicStar_get = Reflect.get; } else { SmicStar_get = function _get(target, property, receiver) { var base = SmicStar_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return SmicStar_get(target, property, receiver || target); }

function SmicStar_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = SmicStar_getPrototypeOf(object); if (object === null) break; } return object; }

function SmicStar_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SmicStar_setPrototypeOf(subClass, superClass); }

function SmicStar_setPrototypeOf(o, p) { SmicStar_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SmicStar_setPrototypeOf(o, p); }

function SmicStar_createSuper(Derived) { var hasNativeReflectConstruct = SmicStar_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SmicStar_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SmicStar_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SmicStar_possibleConstructorReturn(this, result); }; }

function SmicStar_possibleConstructorReturn(self, call) { if (call && (SmicStar_typeof(call) === "object" || typeof call === "function")) { return call; } return SmicStar_assertThisInitialized(self); }

function SmicStar_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SmicStar_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SmicStar_getPrototypeOf(o) { SmicStar_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SmicStar_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @private
 * @class  SuperMap.LevelRenderer.Shape.SmicStar
 * @category Visualization Theme
 * @classdesc n è§æï¼n>3ï¼ã
 * @extends SuperMap.LevelRenderer.Shape
 * @example 
 *   var shape = new SuperMap.LevelRenderer.Shape.SmicStar({
 *         style: {
 *             x: 200,
 *             y: 100,
 *             r: 150,
 *             n: 5,
 *             text: 'äºè§æ'
 *         }
 *   });
 *   levelRenderer.addShape(shape);
 * 
 *
 */

var SmicStar = /*#__PURE__*/(/* unused pure expression or super */ null && (function (_Shape) {
  SmicStar_inherits(SmicStar, _Shape);

  var _super = SmicStar_createSuper(SmicStar);

  /**
   * @member {Object} SuperMap.LevelRenderer.Shape.SmicStar.prototype.style
   * @description ç»å¶æ ·å¼ã
   *
   * @param {number} style.x - n è§æå¤æ¥åå¿ x åæ ï¼å¿è®¾åæ°ã
   * @param {number} style.y - n è§æå¤æ¥åå¿ y åæ ï¼å¿è®¾åæ°ã
   * @param {number} style.r - n è§æå¤æ¥ååå¾ï¼å¿è®¾åæ°ã
   * @param {number} style.r0 - n è§æåé¨é¡¶ç¹ï¼å¹ç¹ï¼çå¤æ¥ååå¾ãå¦æä¸æå®æ­¤åæ°ï¼åèªå¨è®¡ç®ï¼åç¸éå¤é¨é¡¶ç¹è¿çº¿çäº¤ç¹ä½åé¨é¡¶ç¹ã
   * @param {number} style.n -ææå è§æï¼å¿è®¾åæ°ã
   * @param {string} style.brushType - ç»ç¬ç±»åãå¯è®¾å¼ï¼"fill", "stroke", "both"ãé»è®¤å¼ï¼"fill"ã
   * @param {string} style.color - å¡«åé¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} style.strokeColor - æè¾¹é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} style.lineCape - çº¿å¸½æ ·å¼ãå¯è®¾å¼ï¼"butt", "round", "square"ãé»è®¤å¼ï¼"butt"ã
   * @param {number} style.lineWidth - æè¾¹å®½åº¦ãé»è®¤å¼ï¼1ã
   * @param {number} style.opacity - ç»å¶éæåº¦ãé»è®¤å¼ï¼1ã
   * @param {number} style.shadowBlur - é´å½±æ¨¡ç³åº¦ï¼å¤§äº0ææãé»è®¤å¼ï¼0ã
   * @param {number} style.shadowColor - é´å½±é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {number} style.shadowOffsetX - é´å½±æ¨ªååç§»ãé»è®¤å¼ï¼0ã
   * @param {number} style.shadowOffsetY - é´å½±çºµååç§»ãé»è®¤å¼ï¼0ã
   * @param {string} style.text - å¾å½¢ä¸­çéå ææ¬ãé»è®¤å¼ï¼""ã
   * @param {string} style.textColor - ææ¬é¢è²ãé»è®¤å¼ï¼"#000000'"ã
   * @param {string} style.textFont - éå ææ¬æ ·å¼ãç¤ºä¾:'bold 18px verdana'ã
   * @param {string} style.textPosition - éå ææ¬ä½ç½®ãå¯è®¾å¼ï¼"inside", "left", "right", top", "bottom", "end"ãé»è®¤å¼ï¼"end"ã
   * @param {string} style.textAlign - éå ææ¬æ°´å¹³å¯¹é½ãå¯è®¾å¼ï¼"start", "end", "left", "right", "center"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   * @param {string} style.textBaseline - éå ææ¬åç´å¯¹é½ãå¯è®¾å¼ï¼"top", "bottom", "middle", "alphabetic", "hanging", "ideographic"ãé»è®¤æ ¹æ® textPosition èªå¨è®¾ç½®ã
   */
  //æå¼æ¥å£ style

  /**
   * @function SuperMap.LevelRenderer.Shape.SmicStar.constructor
   * @description æé å½æ°ã
   * 
   * @param {Array} options - shape çéç½®ï¼optionsï¼é¡¹ï¼å¯ä»¥æ¯ shape çèªæå±æ§ï¼ä¹å¯ä»¥æ¯èªå®ä¹çå±æ§ã
   *
   */
  function SmicStar(options) {
    var _this;

    SmicStar_classCallCheck(this, SmicStar);

    _this = _super.call(this, options);
    /**
     * @member {string} SuperMap.LevelRenderer.Shape.SmicStar.prototype.type
     * @description å¾å½¢ç±»åã  
     */

    _this.type = 'smicstar';

    if (!_this.refOriginalPosition || _this.refOriginalPosition.length !== 2) {
      _this.refOriginalPosition = [0, 0];
    }

    _this.CLASS_NAME = "SuperMap.LevelRenderer.Shape.SmicStar";
    return _this;
  }
  /**
   * @function SuperMap.LevelRenderer.Shape.SmicStar.prototype.destroy
   * @description éæ¯å¯¹è±¡ï¼éæ¾èµæºãè°ç¨æ­¤å½æ°åææå±æ§å°è¢«ç½®ä¸º nullã
   */


  SmicStar_createClass(SmicStar, [{
    key: "destroy",
    value: function destroy() {
      this.type = null;

      SmicStar_get(SmicStar_getPrototypeOf(SmicStar.prototype), "destroy", this).call(this);
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicStar.prototype.buildPath
     * @description åå»ºn  è§æï¼n>3ï¼è·¯å¾ã
     *
     * @param {CanvasRenderingContext2D} ctx - Context2D ä¸ä¸æã
     * @param {Object} style - styleã
     *
     */

  }, {
    key: "buildPath",
    value: function buildPath(ctx, style) {
      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;
      var n = style.n;

      if (!n || n < 2) {
        return;
      }

      var sin = SUtil.Util_math.sin;
      var cos = SUtil.Util_math.cos;
      var PI = Math.PI;
      var x = style.x + __OP[0];
      var y = style.y + __OP[1];
      var r = style.r;
      var r0 = style.r0; // å¦ææªæå®åé¨é¡¶ç¹å¤æ¥ååå¾ï¼åèªå¨è®¡ç®

      if (r0 == null) {
        r0 = n > 4 // ç¸éçå¤é¨é¡¶ç¹çè¿çº¿çäº¤ç¹ï¼
        // è¢«åä¸ºåé¨äº¤ç¹ï¼ä»¥æ­¤è®¡ç®r0
        ? r * cos(2 * PI / n) / cos(PI / n) // äºä¸åè§æçç¹æ®å¤ç
        : r / 3;
      }

      var dStep = PI / n;
      var deg = -PI / 2;
      var xStart = x + r * cos(deg);
      var yStart = y + r * sin(deg);
      deg += dStep; // è®°å½è¾¹çç¹ï¼ç¨äºå¤æ­inside

      var pointList = style.pointList = [];
      pointList.push([xStart, yStart]);

      for (var i = 0, end = n * 2 - 1, ri; i < end; i++) {
        ri = i % 2 === 0 ? r0 : r;
        pointList.push([x + ri * cos(deg), y + ri * sin(deg)]);
        deg += dStep;
      }

      pointList.push([xStart, yStart]); // ç»å¶

      ctx.moveTo(pointList[0][0], pointList[0][1]);

      for (var _i = 0; _i < pointList.length; _i++) {
        ctx.lineTo(pointList[_i][0], pointList[_i][1]);
      }

      ctx.closePath();
      return;
    }
    /**
     * @function SuperMap.LevelRenderer.Shape.SmicStar.prototype.getRect
     * @description è¿å n è§æåå´çç©å½¢ã
     *
     * @param {Object} style - style
     * @return {Object} è¾¹æ¡å¯¹è±¡ãåå«å±æ§ï¼xï¼yï¼widthï¼heightã
     */

  }, {
    key: "getRect",
    value: function getRect(style) {
      if (style.__rect) {
        return style.__rect;
      }

      if (!this.refOriginalPosition || this.refOriginalPosition.length !== 2) {
        this.refOriginalPosition = [0, 0];
      }

      var __OP = this.refOriginalPosition;
      var lineWidth;

      if (style.brushType == 'stroke' || style.brushType == 'fill') {
        lineWidth = style.lineWidth || 1;
      } else {
        lineWidth = 0;
      }

      style.__rect = {
        x: Math.round(style.x + __OP[0] - style.r - lineWidth / 2),
        y: Math.round(style.y + __OP[1] - style.r - lineWidth / 2),
        width: style.r * 2 + lineWidth,
        height: style.r * 2 + lineWidth
      };
      return style.__rect;
    }
  }]);

  return SmicStar;
}(Shape)));
// CONCATENATED MODULE: ./src/common/overlay/levelRenderer/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/












































































// CONCATENATED MODULE: ./src/common/overlay/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
























// CONCATENATED MODULE: ./src/common/components/CommonTypes.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * è¯¥æä»¶ç¨äºå­å¨ä¸äºå¬ç¨å¸¸é
 *
 */
var CommonTypes_FileTypes = {
  EXCEL: "EXCEL",
  CSV: "CSV",
  ISERVER: "ISERVER",
  GEOJSON: "GEOJSON",
  JSON: 'JSON'
};
var CommonTypes_FileConfig = {
  fileMaxSize: 10 * 1024 * 1024
};
// CONCATENATED MODULE: ./src/common/components/openfile/FileModel.js
function FileModel_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FileModel_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FileModel_createClass(Constructor, protoProps, staticProps) { if (protoProps) FileModel_defineProperties(Constructor.prototype, protoProps); if (staticProps) FileModel_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @class SuperMap.FileModel
 * @description æä»¶æ°æ®ç»ä»¶æ°æ®æ¨¡åï¼ç¨äºå­å¨ä¸äºæä»¶æ°æ®æç¶æï¼todo ç»æå¾å®å
 * @category Components OpenFile
 * @private
 */

var FileModel = /*#__PURE__*/(/* unused pure expression or super */ null && (function () {
  function FileModel(options) {
    FileModel_classCallCheck(this, FileModel);

    this.FileTypes = FileTypes;
    this.FileConfig = FileConfig;
    this.loadFileObject = options && options.loadFileObject ? options.loadFileObject : [];
  }
  /**
   * @function SuperMap.FileModel.prototype.set
   * @description è®¾ç½®å±æ§å¼
   * @param {string} key - å±æ§åç§°
   * @param {string|Object} value - å±æ§å¼
   */


  FileModel_createClass(FileModel, [{
    key: "set",
    value: function set(key, value) {
      this[key] = value;
    }
    /**
     * @function SuperMap.FileModel.prototype.get
     * @description è·åæ°æ®å¼
     * @param {string} key - å±æ§åç§°
     * @returns {string|Object} value - è¿åå±æ§å¼
     */

  }, {
    key: "get",
    value: function get(key) {
      return this[key];
    }
  }]);

  return FileModel;
}()));
// CONCATENATED MODULE: ./src/common/components/messagebox/MessageBox.js
function MessageBox_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function MessageBox_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function MessageBox_createClass(Constructor, protoProps, staticProps) { if (protoProps) MessageBox_defineProperties(Constructor.prototype, protoProps); if (staticProps) MessageBox_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @class SuperMap.Components.MessageBox
 * @version 9.1.1
 * @classdesc ç»ä»¶ä¿¡æ¯æç¤ºæ¡ã
 * @category Components Common
 */

var MessageBox = /*#__PURE__*/function () {
  function MessageBox() {
    MessageBox_classCallCheck(this, MessageBox);

    this._initView();
  }

  MessageBox_createClass(MessageBox, [{
    key: "_initView",
    value: function _initView() {
      //åçjså½¢å¼
      var messageBoxContainer = document.createElement("div");
      messageBoxContainer.hidden = true;
      messageBoxContainer.setAttribute("class", "component-messageboxcontainer component-border-bottom-orange"); //å¾æ 

      var iconContainer = document.createElement("div");
      iconContainer.setAttribute("class", "icon");
      this.icon = document.createElement("span");
      this.icon.setAttribute("class", "supermapol-icons-message-warning");
      iconContainer.appendChild(this.icon);
      messageBoxContainer.appendChild(iconContainer); //åå®¹ï¼

      var messageBox = document.createElement("div");
      messageBox.setAttribute("class", "component-messagebox");
      messageBox.innerHTML = "";
      messageBoxContainer.appendChild(messageBox);
      this.messageBox = messageBox; //å³é­æé®

      var cancelContainer = document.createElement("div");
      cancelContainer.setAttribute("class", "component-messagebox__cancelbtncontainer");
      var cancelBtn = document.createElement("button");
      cancelBtn.setAttribute("class", "component-messagebox__cancelBtn");
      cancelBtn.innerHTML = "x";
      cancelBtn.onclick = this.closeView.bind(this);
      cancelContainer.appendChild(cancelBtn);
      messageBoxContainer.appendChild(cancelContainer);
      this.messageBoxContainer = messageBoxContainer;
      document.body.appendChild(this.messageBoxContainer);
    }
    /**
     * @function SuperMap.Components.MessageBox.prototype.closeView
     * @description å³é­æç¤ºæ¡ã
     */

  }, {
    key: "closeView",
    value: function closeView() {
      this.messageBoxContainer.hidden = true;
    }
    /**
     * @function SuperMap.Components.MessageBox.prototype.showView
     * @description æ¾ç¤ºæç¤ºæ¡ã
     * @param {string} message - æç¤ºæ¡æ¾ç¤ºåå®¹ã
     * @param {string}[type="warring"] æç¤ºæ¡ç±»åï¼å¦ "warring", "failure", "success"ã
     */

  }, {
    key: "showView",
    value: function showView(message) {
      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'warring';

      //è®¾ç½®æç¤ºæ¡çæ ·å¼ï¼
      if (type === "success") {
        this.icon.setAttribute("class", "supermapol-icons-message-success");
        this.messageBoxContainer.setAttribute("class", "component-messageboxcontainer component-border-bottom-green");
      } else if (type === "failure") {
        this.icon.setAttribute("class", "supermapol-icons-message-failure");
        this.messageBoxContainer.setAttribute("class", "component-messageboxcontainer component-border-bottom-red");
      } else if (type === "warring") {
        this.icon.setAttribute("class", "supermapol-icons-message-warning");
        this.messageBoxContainer.setAttribute("class", "component-messageboxcontainer component-border-bottom-orange");
      }

      this.messageBox.innerHTML = message;
      this.messageBoxContainer.hidden = false;
    }
  }]);

  return MessageBox;
}();
SuperMap.Components.MessageBox = MessageBox;
// CONCATENATED MODULE: external "function(){try{return echarts}catch(e){return {}}}()"
var external_function_try_return_echarts_catch_e_return_namespaceObject = function(){try{return echarts}catch(e){return {}}}();
var external_function_try_return_echarts_catch_e_return_default = /*#__PURE__*/__webpack_require__.n(external_function_try_return_echarts_catch_e_return_namespaceObject);

// CONCATENATED MODULE: ./src/common/lang/Lang.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @name Lang
 * @memberOf SuperMap
 * @namespace
 * @category BaseTypes
 * @description å½éåçå½åç©ºé´ï¼åå«å¤ç§è¯­è¨åæ¹æ³åºæ¥è®¾ç½®åè·åå½åçè¯­è¨ã
 */

var Lang = {
  /**
   * @member {string} SuperMap.Lang.code
   * @description å½åæä½¿ç¨çè¯­è¨ç±»åã
   */
  code: null,

  /**
   * @member {string} [SuperMap.Lang.defaultCode='en-US']
   * @description é»è®¤ä½¿ç¨çè¯­è¨ç±»åã
   */
  defaultCode: "en-US",

  /**
   * @function SuperMap.Lang.getCode
   * @description è·åå½åçè¯­è¨ä»£ç ã
   * @returns {string} å½åçè¯­è¨ä»£ç ã
   */
  getCode: function getCode() {
    if (!SuperMap.Lang.code) {
      SuperMap.Lang.setCode();
    }

    return SuperMap.Lang.code;
  },

  /**
   * @function SuperMap.Lang.setCode
   * @description è®¾ç½®è¯­è¨ä»£ç ã
   * @param {string} code - æ­¤åæ°éµå¾ªIETFè§èã
   */
  setCode: function setCode() {
    var lang = this.getLanguageFromCookie();

    if (lang) {
      SuperMap.Lang.code = lang;
      return;
    }

    lang = SuperMap.Lang.defaultCode;

    if (navigator.appName === 'Netscape') {
      lang = navigator.language;
    } else {
      lang = navigator.browserLanguage;
    }

    if (lang.indexOf('zh') === 0) {
      lang = 'zh-CN';
    }

    if (lang.indexOf('en') === 0) {
      lang = 'en-US';
    }

    SuperMap.Lang.code = lang;
  },

  /**
   * @function SuperMap.Lang.getLanguageFromCookie
   * @description ä» cookie ä¸­è·åè¯­è¨ç±»åã
   */
  getLanguageFromCookie: function getLanguageFromCookie() {
    var name = 'language=';
    var ca = document.cookie.split(';');

    for (var i = 0; i < ca.length; i++) {
      var c = ca[i];

      while (c.charAt(0) === ' ') {
        c = c.substring(1);
      }

      if (c.indexOf(name) !== -1) {
        return c.substring(name.length, c.length);
      }
    }

    return "";
  },

  /**
   * @function SuperMap.Lang.i18n
   * @description ä»å½åè¯­è¨å­ç¬¦ä¸²çå­å¸æ¥æ¾ keyã
   * @param {string} key - å­å¸ä¸­ i18n å­ç¬¦ä¸²å¼çå³é®å­ã
   * @returns {string} å½éåçå­ç¬¦ä¸²ã
   */
  i18n: function i18n(key) {
    var dictionary = SuperMap.Lang[SuperMap.Lang.getCode()];
    var message = dictionary && dictionary[key];

    if (!message) {
      // Message not found, fall back to message key
      message = key;
    }

    return message;
  }
};

SuperMap.Lang = Lang;
SuperMap.i18n = SuperMap.Lang.i18n;
// CONCATENATED MODULE: external "function(){try{return XLSX}catch(e){return {}}}()"
var external_function_try_return_XLSX_catch_e_return_namespaceObject = function(){try{return XLSX}catch(e){return {}}}();
var external_function_try_return_XLSX_catch_e_return_default = /*#__PURE__*/__webpack_require__.n(external_function_try_return_XLSX_catch_e_return_namespaceObject);

// CONCATENATED MODULE: ./src/common/components/util/FileReaderUtil.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.Components.FileReaderUtil
 * @classdesc ç»ä»¶è¯»åæä»¶å·¥å·ç±»ã
 * @version 9.1.1
 * @type {{rABS: (boolean|*), rABF: (boolean|*), rAT: (boolean|*), readFile: (function(*, *=, *=, *=, *=)), readTextFile: (function(*, *=, *=, *=)), readXLSXFile: (function(*, *=, *=, *=)), processDataToGeoJson: (function(string, Object): GeoJSONObject), processExcelDataToGeoJson: (function(Object): GeoJSONObject), isXField: (function(*)), isYField: (function(*)), string2Csv: (function(*, *=))}}
 */

var FileReaderUtil = {
  rABS: typeof FileReader !== 'undefined' && FileReader.prototype && FileReader.prototype.readAsBinaryString,
  rABF: typeof FileReader !== 'undefined' && FileReader.prototype && FileReader.prototype.readAsArrayBuffer,
  rAT: typeof FileReader !== 'undefined' && FileReader.prototype && FileReader.prototype.readAsText,

  /**
   * @function SuperMap.Components.FileReaderUtil.prototype.readFile
   * @description è¯»åæä»¶
   * @param {string} fileType - å½åè¯»åçæä»¶ç±»å
   *
   * @param {Object} file - è¯»ååæ¥çæä»¶åå®¹å¯¹è±¡
   * @param {function} success - è¯»åæä»¶æååè°å½æ°
   * @param {function} failed - è¯»åæä»¶å¤±è´¥åè°å½æ°
   * @param {Object} context - åè°éå®åå¯¹è±¡
   */
  readFile: function readFile(fileType, file, success, failed, context) {
    if (CommonTypes_FileTypes.JSON === fileType || CommonTypes_FileTypes.GEOJSON === fileType) {
      this.readTextFile(file, success, failed, context);
    } else if (CommonTypes_FileTypes.EXCEL === fileType || CommonTypes_FileTypes.CSV === fileType) {
      this.readXLSXFile(file, success, failed, context);
    }
  },

  /**
   * è¯»åææ¬æä»¶
   * @param file
   * @param success
   * @param failed
   * @param {Object} context - åè°éå®åå¯¹è±¡
   */
  readTextFile: function readTextFile(file, success, failed, context) {
    var reader = new FileReader();

    reader.onloadend = function (evt) {
      success && success.call(context, evt.target.result);
    };

    reader.onerror = function (error) {
      failed && failed.call(context, error);
    };

    this.rAT ? reader.readAsText(file.file, 'utf-8') : reader.readAsBinaryString(file.file);
  },

  /**
   * è¯»åexcelæcsvæä»¶
   * @param file
   * @param success
   * @param failed
   * @param {Object} context - åè°éå®åå¯¹è±¡
   */
  readXLSXFile: function readXLSXFile(file, success, failed, context) {
    var reader = new FileReader();

    reader.onloadend = function (evt) {
      var xLSXData = new Uint8Array(evt.target.result);
      var workbook = external_function_try_return_XLSX_catch_e_return_default().read(xLSXData, {
        type: "array"
      });

      try {
        if (workbook && workbook.SheetNames && workbook.SheetNames.length > 0) {
          //ææ¶åªè¯»åç¬¬ä¸ä¸ªsheetsçåå®¹
          var sheetName = workbook.SheetNames[0];
          var xLSXCSVString = external_function_try_return_XLSX_catch_e_return_default().utils.sheet_to_csv(workbook.Sheets[sheetName]);
          success && success.call(context, xLSXCSVString);
        }
      } catch (error) {
        failed && failed.call(context, error);
      }
    };

    reader.onerror = function (error) {
      failed && failed.call(context, error);
    };

    this.rABF && reader.readAsArrayBuffer(file.file);
  },

  /**
   * @function SuperMap.Components.FileReaderUtil.prototype.processDataToGeoJson
   * @description å°è¯»ååæ¥å¾æ°æ®ç»ä¸å¤çä¸º GeoJSON æ ¼å¼
   * @param {string} type - æä»¶ç±»å
   * @param {Object} data - è¯»åè¿åçæ°æ®å¯¹è±¡
   * @param {function} success - æ°æ®å¤çæåçåè°
   * @param {function} failed - æ°æ®å¤çå¤±è´¥çåè°
   * @param {Object} context - åè°éå®åå¯¹è±¡
   * @returns {GeoJSONObject} è¿åæ å GeoJSON è§èæ ¼å¼æ°æ®
   * @private
   */
  processDataToGeoJson: function processDataToGeoJson(type, data, success, failed, context) {
    var geojson = null;

    if (type === "EXCEL" || type === "CSV") {
      geojson = this.processExcelDataToGeoJson(data);
      success && success.call(context, geojson);
    } else if (type === 'JSON' || type === 'GEOJSON') {
      var result = data; //geojsonãjsonæªç¥ï¼éè¿ç±»å®¹æ¥å¤æ­

      if (typeof result === "string") {
        result = JSON.parse(result);
      }

      if (result.type === 'ISERVER') {
        geojson = result.data.recordsets[0].features;
      } else if (result.type === 'FeatureCollection') {
        //geojson
        geojson = result;
      } else {
        //ä¸æ¯ææ°æ®
        failed && failed.call(context, Lang.i18n('msg_dataInWrongGeoJSONFormat'));
      }

      success && success.call(context, geojson);
    } else {
      failed && failed.call(context, Lang.i18n('msg_dataInWrongFormat'));
    }
  },

  /**
   * @function SuperMap.Components.FileReaderUtil.prototype.processExcelDataToGeoJson
   * @description è¡¨æ ¼æä»¶æ°æ®å¤ç
   * @param {Object} data - è¯»åçè¡¨æ ¼æä»¶æ°æ®
   * @returns {GeoJSONObject} è¿åæ å GeoJSON è§èæ ¼å¼æ°æ®
   * @private
   */
  processExcelDataToGeoJson: function processExcelDataToGeoJson(data) {
    //å¤çä¸ºå¯¹è±¡æ ¼å¼è½¬å
    var dataContent = this.string2Csv(data);
    var fieldCaptions = dataContent.colTitles; //ä½ç½®å±æ§å¤ç

    var xfieldIndex = -1,
        yfieldIndex = -1;

    for (var i = 0, len = fieldCaptions.length; i < len; i++) {
      if (this.isXField(fieldCaptions[i])) {
        xfieldIndex = i;
      }

      if (this.isYField(fieldCaptions[i])) {
        yfieldIndex = i;
      }
    } // feature æå»ºåææ¯æåæ ç³» 4326/3857


    var features = [];

    for (var _i = 0, _len = dataContent.rows.length; _i < _len; _i++) {
      var row = dataContent.rows[_i]; //if (featureFrom === "LonLat") {

      var x = Number(row[xfieldIndex]),
          y = Number(row[yfieldIndex]); //å±æ§ä¿¡æ¯

      var attributes = {};

      for (var index in dataContent.colTitles) {
        var key = dataContent.colTitles[index];
        attributes[key] = dataContent.rows[_i][index];
      } //ç®åcsv åªæ¯æå¤çç¹ï¼æä»¥åçæç¹ç±»åç geojson


      var feature = {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [x, y]
        },
        "properties": attributes
      };
      features.push(feature);
    }

    return features;
  },

  /**
   * å¤æ­æ¯å¦å°çXåæ 
   * @param data
   */
  isXField: function isXField(data) {
    var lowerdata = data.toLowerCase();
    return lowerdata === "x" || lowerdata === "smx" || lowerdata === "jd" || lowerdata === "ç»åº¦" || lowerdata === "ä¸ç»" || lowerdata === "longitude" || lowerdata === "lot" || lowerdata === "lon" || lowerdata === "lng" || lowerdata === "xåæ ";
  },

  /**
   * å¤æ­æ¯å¦å°çYåæ 
   * @param data
   */
  isYField: function isYField(data) {
    var lowerdata = data.toLowerCase();
    return lowerdata === "y" || lowerdata === "smy" || lowerdata === "wd" || lowerdata === "çº¬åº¦" || lowerdata === "åçº¬" || lowerdata === "latitude" || lowerdata === "lat" || lowerdata === "yåæ ";
  },

  /**
   * å­ç¬¦ä¸²è½¬ä¸ºdataEditor æ¯æçcsvæ ¼å¼æ°æ®
   * @param string
   * @param withoutTitle
   */
  string2Csv: function string2Csv(string, withoutTitle) {
    // let rows = string.split('\r\n');
    var rows = string.split('\n');
    var result = {};

    if (!withoutTitle) {
      result["colTitles"] = rows[0].split(',');
    } else {
      result["colTitles"] = [];
    }

    result['rows'] = [];

    for (var i = withoutTitle ? 0 : 1; i < rows.length; i++) {
      rows[i] && result['rows'].push(rows[i].split(','));
    }

    return result;
  }
};
SuperMap.Components.FileReaderUtil = FileReaderUtil;
// CONCATENATED MODULE: ./src/common/components/chart/ChartModel.js
function ChartModel_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ChartModel_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ChartModel_createClass(Constructor, protoProps, staticProps) { if (protoProps) ChartModel_defineProperties(Constructor.prototype, protoProps); if (staticProps) ChartModel_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/











/**
 * @class SuperMap.Components.ChartModel
 * @classdesc å¾è¡¨ç»ä»¶æ°æ®æ¨¡å
 * @private
 * @param {Object} datasets - æ°æ®æ¥æºã
 * @category Components Chart
 * @fires SuperMap.Components.ChartModel#getdatafailed
 */

var ChartModel = /*#__PURE__*/function () {
  function ChartModel(datasets) {
    ChartModel_classCallCheck(this, ChartModel);

    this.datasets = datasets;
    this.EVENT_TYPES = ['getdatafailed'];
    this.events = new Events(this, null, this.EVENT_TYPES);
  }
  /**
   * @private
   * @function SuperMap.Components.ChartModel.prototype.getDatasetInfo
   * @description è·å¾æ°æ®éæ°æ®ã
   * @param {string} datasetUrl - æ°æ®éèµæºå°åã
   */


  ChartModel_createClass(ChartModel, [{
    key: "getDatasetInfo",
    value: function getDatasetInfo(success) {
      var datasetUrl = this.datasets.url;
      var me = this;
      FetchRequest.get(datasetUrl).then(function (response) {
        return response.json();
      }).then(function (results) {
        if (results.datasetInfo) {
          var datasetInfo = results.datasetInfo;
          me.datasetsInfo = {
            dataSourceName: datasetInfo.dataSourceName,
            datasetName: datasetInfo.name,
            mapName: results.name
          };
          success({
            result: me.datasetsInfo
          });
        }
      })["catch"](function (error) {
        console.log(error);

        me._fireFailedEvent(error);
      });
    }
    /**
     * @private
     * @function SuperMap.Components.ChartModel.prototype.getDataFeatures
     * @description è¯·æ±æ°æ®éçæ°æ®ä¿¡æ¯
     * @param {Object} results - æ°æ®éä¿¡æ¯ã
     * @param {function} success - æååè°å½æ°ã
     */

  }, {
    key: "getDataFeatures",
    value: function getDataFeatures(results, success) {
      var datasetsInfo = results.result;
      var getFeatureParam, getFeatureBySQLParams, getFeatureBySQLService;
      var params = {
        name: datasetsInfo.datasetName + '@' + datasetsInfo.dataSourceName
      };
      Object.assign(params, this.datasets.queryInfo);
      getFeatureParam = new SuperMap.FilterParameter(params);
      getFeatureBySQLParams = new SuperMap.GetFeaturesBySQLParameters({
        queryParameter: getFeatureParam,
        datasetNames: [datasetsInfo.dataSourceName + ':' + datasetsInfo.datasetName],
        fromIndex: 0,
        toIndex: 100000
      });
      getFeatureBySQLService = new SuperMap.GetFeaturesBySQLService(datasetsInfo.dataUrl, {
        eventListeners: {
          processCompleted: success,
          processFailed: function processFailed() {}
        }
      });
      getFeatureBySQLService.processAsync(getFeatureBySQLParams);
    }
    /**
     * @private
     * @function SuperMap.Components.ChartModel.prototype.getLayerFeatures
     * @description è¯·æ±å¾å±è¦ç´ çæ°æ®ä¿¡æ¯
     * @param {Object} results - æ°æ®éä¿¡æ¯ã
     * @param {Callbacks} success - æååè°å½æ°ã
     */

  }, {
    key: "getLayerFeatures",
    value: function getLayerFeatures(results, success) {
      var datasetsInfo = results.result;
      var queryParam, queryBySQLParams, queryBySQLService;
      var params = {
        name: datasetsInfo.mapName
      };
      Object.assign(params, this.datasets.queryInfo);
      queryParam = new SuperMap.FilterParameter(params);
      queryBySQLParams = new SuperMap.QueryBySQLParameters({
        queryParams: [queryParam],
        expectCount: 100000
      });
      queryBySQLService = new SuperMap.QueryBySQLService(datasetsInfo.dataUrl, {
        eventListeners: {
          processCompleted: success,
          processFailed: function processFailed() {}
        }
      });
      queryBySQLService.processAsync(queryBySQLParams);
    }
    /**
     * @private
     * @function SuperMap.Components.ChartModel.prototype.getDataInfoByIptl
     * @description ç¨dataIdè·åiportalçæ°æ®ã
     * @param {Callbacks} success - getdatachartã
     *
     */

  }, {
    key: "getDataInfoByIptl",
    value: function getDataInfoByIptl(success) {
      // successæ¯chartçåè°
      this.getServiceInfo(this.datasets.url, success);
    }
    /**
     * @private
     * @function SuperMap.Components.ChartModel.prototype.getServiceInfo
     * @description ç¨iportalè·ådataItemServicesã
     * @param {String} url
     * @param {Callbacks} success - getdatachartã
     * */

  }, {
    key: "getServiceInfo",
    value: function getServiceInfo(url, success) {
      var me = this;
      FetchRequest.get(url, null, {
        withCredentials: this.datasets.withCredentials
      }).then(function (response) {
        return response.json();
      }).then(function (data) {
        if (data.succeed === false) {
          //è¯·æ±å¤±è´¥
          me._fireFailedEvent(data);

          return;
        } // æ¯å¦ærestæå¡


        if (data.dataItemServices && data.dataItemServices.length > 0) {
          var dataItemServices = data.dataItemServices,
              resultData;
          dataItemServices.forEach(function (item) {
            // å¦æærestdataå¹¶ä¸åå¸æåï¼å°±è¯·æ±restdataæå¡
            // å¦æærestmapå¹¶ä¸åå¸æåï¼å°±è¯·æ±restmapæå¡
            // å¶ä»æåµå°±è¯·æ±iportal/content.json
            if (item.serviceType === 'RESTDATA' && item.serviceStatus === 'PUBLISHED') {
              resultData = item;
            } else if (item.serviceType === 'RESTMAP' && item.serviceStatus === 'PUBLISHED') {
              resultData = item;
            } else {
              me.getDatafromContent(url, success);
              return;
            }
          }); // å¦æææå¡ï¼è·åæ°æ®æºåæ°æ®é, ç¶åè¯·æ±restæå¡

          resultData && me.getDatafromRest(resultData.serviceType, resultData.address, success);
        } else {
          me.getDatafromContent(url, success);
          return;
        }
      })["catch"](function (error) {
        console.log(error);

        me._fireFailedEvent(error);
      });
    }
    /**
     * @private
     * @function SuperMap.Components.ChartModel.prototype.getDatafromURL
     * @description ç¨iportalè·åæ°æ®ãï¼éè¿åºå®çurlæ¥è¯·æ±ï¼ä½æ¯ä¸è½è¯·æ±å·¥ä½ç©ºé´çæ°æ®ï¼
     * @param {String} url
     * @param {Callbacks} success - getdatachartã
     */

  }, {
    key: "getDatafromContent",
    value: function getDatafromContent(url, success) {
      var _this = this;

      // æååè°ä¼ å¥çresults
      var results = {
        result: {}
      },
          me = this;
      url += '/content.json?pageSize=9999999&currentPage=1'; // è·åå¾å±æ°æ®

      FetchRequest.get(url, null, {
        withCredentials: this.datasets.withCredentials
      }).then(function (response) {
        return response.json();
      }).then(function (data) {
        if (data.succeed === false) {
          //è¯·æ±å¤±è´¥
          me._fireFailedEvent(data);

          return;
        }

        if (data.type) {
          if (data.type === 'JSON' || data.type === 'GEOJSON') {
            // å°å­ç¬¦ä¸²è½¬æ¢æjson
            data.content = JSON.parse(data.content.trim()); // å¦ææ¯jsonæä»¶ data.content = {type:'fco', features},æ ¼å¼ä¸åºå®

            if (!data.content.features) {
              //jsonæ ¼å¼è§£æå¤±è´¥
              console.log(Lang.i18n('msg_jsonResolveFiled'));
              return;
            }

            var features = _this._formatGeoJSON(data.content);

            results.result.features = {
              type: data.content.type,
              features: features
            };
          } else if (data.type === 'EXCEL' || data.type === 'CSV') {
            var _features = _this._excelData2Feature(data.content);

            results.result.features = {
              type: 'FeatureCollection',
              features: _features
            };
          }

          success(results, 'content');
        }
      }, this)["catch"](function (error) {
        console.log(error);

        me._fireFailedEvent(error);
      });
    }
    /**
     * @private
     * @function SuperMap.Components.ChartModel.prototype._getDataSource
     * @description è·åæ°æ®æºååæ°æ®éåã
     * @param {string} serviceType æå¡ç±»å
     * @param {string} address å°å
     * @param {Callbacks} success - getdatachartã
     * @return{array} [æ°æ®æºå:æ°æ®éå]
     * @return{string} å¾å±å
     */

  }, {
    key: "getDatafromRest",
    value: function getDatafromRest(serviceType, address, success) {
      var me = this,
          withCredentials = this.datasets.withCredentials;

      if (serviceType === 'RESTDATA') {
        var url = "".concat(address, "/data/datasources"),
            sourceName,
            datasetName; // è¯·æ±è·åæ°æ®æºå

        FetchRequest.get(url, null, {
          withCredentials: withCredentials
        }).then(function (response) {
          return response.json();
        }).then(function (data) {
          sourceName = data.datasourceNames[0];
          url = "".concat(address, "/data/datasources/").concat(sourceName, "/datasets"); // è¯·æ±è·åæ°æ®éå

          FetchRequest.get(url, null, {
            withCredentials: withCredentials
          }).then(function (response) {
            return response.json();
          }).then(function (data) {
            datasetName = data.datasetNames[0]; // è¯·æ±restdataæå¡

            me.getDatafromRestData("".concat(address, "/data"), [sourceName + ':' + datasetName], success);
            return [sourceName + ':' + datasetName];
          })["catch"](function (error) {
            me._fireFailedEvent(error);
          });
        })["catch"](function (error) {
          me._fireFailedEvent(error);
        });
      } else {
        // å¦ææ¯å°å¾æå¡
        var _url = "".concat(address, "/maps"),
            mapName,
            layerName,
            path; // è¯·æ±è·åå°å¾å


        FetchRequest.get(_url, null, {
          withCredentials: withCredentials
        }).then(function (response) {
          return response.json();
        }).then(function (data) {
          mapName = data[0].name;
          path = data[0].path;
          _url = _url = "".concat(address, "/maps/").concat(mapName, "/layers"); // è¯·æ±è·åå¾å±å

          FetchRequest.get(_url, null, {
            withCredentials: withCredentials
          }).then(function (response) {
            return response.json();
          }).then(function (data) {
            layerName = data[0].subLayers.layers[0].caption; // è¯·æ±restmapæå¡

            me.getDatafromRestMap(layerName, path, success);
            return layerName;
          })["catch"](function (error) {
            me._fireFailedEvent(error);
          });
        })["catch"](function (error) {
          me._fireFailedEvent(error);
        });
      }
    }
    /**
     * @private
     * @function SuperMap.Components.ChartModel.prototype.getDatafromRestData
     * @description è¯·æ±restdataæå¡
     * @param {String} url
     * @param {Array<string>} dataSource [æ°æ®æºå:æ°æ®éå]
     * @param {Callbacks} success - getdatachartã
     */

  }, {
    key: "getDatafromRestData",
    value: function getDatafromRestData(url, dataSource, success) {
      var me = this;
      this.datasets.queryInfo.attributeFilter = this.datasets.queryInfo.attributeFilter || 'SmID>0';

      this._getFeatureBySQL(url, dataSource, this.datasets.queryInfo, function (results) {
        // æ­¤æ¶çfeatureså·²ç»å¤çægeojsonäº
        success(results, 'RESTDATA');
      }, function (error) {
        console.log(error);

        me._fireFailedEvent(error);
      });
    }
    /**
     * @private
     * @function SuperMap.Components.ChartModel.prototype.getDatafromRestMap
     * @description è¯·æ±restmapæå¡
     * @param {String} dataSource layerName
     * @param {String} path - mapæå¡å°åã
     * @param {Callbacks} success - getdatachartã
     */

  }, {
    key: "getDatafromRestMap",
    value: function getDatafromRestMap(dataSource, path, success) {
      var me = this;
      this.datasets.queryInfo.attributeFilter = this.datasets.queryInfo.attributeFilter || 'smid=1';

      this._queryFeatureBySQL(path, dataSource, this.datasets.queryInfo, null, null, function (results) {
        // let features = result.result.recordsets[0].features;
        success(results, 'RESTMAP');
      }, function (error) {
        console.log(error);

        me._fireFailedEvent(error);
      });
    }
    /**
     * @private
     * @function SuperMap.Components.ChartModel.prototype._getFeatureBySQL
     * @description éè¿ sql æ¹å¼æ¥è¯¢æ°æ®ã
     */

  }, {
    key: "_getFeatureBySQL",
    value: function _getFeatureBySQL(url, datasetNames, queryInfo, _processCompleted, processFaild) {
      var getFeatureParam, getFeatureBySQLService, getFeatureBySQLParams;
      var params = {
        name: datasetNames.join().replace(':', '@')
      };
      Object.assign(params, queryInfo);
      getFeatureParam = new FilterParameter(params);
      getFeatureBySQLParams = new GetFeaturesBySQLParameters({
        queryParameter: getFeatureParam,
        datasetNames: datasetNames,
        fromIndex: 0,
        toIndex: 100000,
        returnContent: true
      });
      var options = {
        eventListeners: {
          processCompleted: function processCompleted(getFeaturesEventArgs) {
            _processCompleted && _processCompleted(getFeaturesEventArgs);
          },
          processFailed: function processFailed(e) {
            processFaild && processFaild(e);
          }
        }
      };
      getFeatureBySQLService = new GetFeaturesBySQLService(url, options);
      getFeatureBySQLService.processAsync(getFeatureBySQLParams);
    }
    /**
     * @private
     * @function SuperMap.Components.ChartModel.prototype._queryFeatureBySQL
     * @description éè¿ sql æ¹å¼æ¥è¯¢æ°æ®ã
     */

  }, {
    key: "_queryFeatureBySQL",
    value: function _queryFeatureBySQL(url, layerName, queryInfo, fields, epsgCode, processCompleted, processFaild, startRecord, recordLength, onlyAttribute) {
      var queryParam, queryBySQLParams;
      var filterParams = {
        name: layerName
      };
      Object.assign(filterParams, queryInfo);
      queryParam = new FilterParameter(filterParams);

      if (fields) {
        queryParam.fields = fields;
      }

      var params = {
        queryParams: [queryParam]
      };

      if (onlyAttribute) {
        params.queryOption = QueryOption.ATTRIBUTE;
      }

      startRecord && (params.startRecord = startRecord);
      recordLength && (params.expectCount = recordLength);

      if (epsgCode) {
        params.prjCoordSys = {
          epsgCode: epsgCode
        };
      }

      queryBySQLParams = new QueryBySQLParameters(params);

      this._queryBySQL(url, queryBySQLParams, function (data) {
        data.type === 'processCompleted' ? processCompleted(data) : processFaild(data);
      });
    }
    /**
     * @function SuperMap.Components.ChartModel.prototype._queryBySQL
     * @description  SQL æ¥è¯¢æå¡ã
     * @param {SuperMap.QueryBySQLParameters} params - SQL æ¥è¯¢ç¸å³åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åç»æç±»åã
     */

  }, {
    key: "_queryBySQL",
    value: function _queryBySQL(url, params, callback, resultFormat) {
      var me = this;
      var queryBySQLService = new QueryBySQLService(url, {
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      queryBySQLService.processAsync(params);
    }
    /**
     * @function SuperMap.Components.ChartModel.prototype._processFormat
     * @description å°æ°æ®è½¬æ¢ægeojsonã
     * @param {object} resultFormat - è¿åç»æéã
     * @return {object} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åç»æç±»åã
     */

  }, {
    key: "_processFormat",
    value: function _processFormat(resultFormat) {
      return resultFormat ? resultFormat : DataFormat.GEOJSON;
    }
    /**
     * @private
     * @function SuperMap.Components.ChartModel.prototype._formatGeoJSON
     * @description æ ¼å¼ GeoJSONã
     * @param {GeoJSON} data - GeoJSON æ°æ®ã
     */

  }, {
    key: "_formatGeoJSON",
    value: function _formatGeoJSON(data) {
      var features = data.features;
      features.forEach(function (row, index) {
        row.properties['index'] = index;
      });
      return features;
    }
    /**
     * @private
     * @description å° csv å xls æä»¶åå®¹è½¬æ¢æ geojson
     * @function SuperMap.Components.ChartModel.prototype._excelData2Feature
     * @param content  æä»¶åå®¹
     * @param layerInfo  å¾å±ä¿¡æ¯
     * @returns {Array}  featureçæ°ç»éå
     */

  }, {
    key: "_excelData2Feature",
    value: function _excelData2Feature(dataContent) {
      var fieldCaptions = dataContent.colTitles; //ä½ç½®å±æ§å¤ç

      var xfieldIndex = -1,
          yfieldIndex = -1;

      for (var i = 0, len = fieldCaptions.length; i < len; i++) {
        if (FileReaderUtil.isXField(fieldCaptions[i])) {
          xfieldIndex = i;
        }

        if (FileReaderUtil.isYField(fieldCaptions[i])) {
          yfieldIndex = i;
        }
      } // feature æå»ºåææ¯æåæ ç³» 4326/3857


      var features = [];

      for (var _i = 0, _len = dataContent.rows.length; _i < _len; _i++) {
        var row = dataContent.rows[_i];
        var x = Number(row[xfieldIndex]),
            y = Number(row[yfieldIndex]); //å±æ§ä¿¡æ¯

        var attributes = {};

        for (var index in dataContent.colTitles) {
          var key = dataContent.colTitles[index];
          attributes[key] = dataContent.rows[_i][index];
        }

        attributes['index'] = _i + ''; //ç®åcsv åªæ¯æå¤çç¹ï¼æä»¥åçæç¹ç±»åç geojson

        var feature = {
          type: 'Feature',
          geometry: {
            type: 'Point',
            coordinates: [x, y]
          },
          properties: attributes
        };
        features.push(feature);
      }

      return features;
    }
    /**
     * @private
     * @description è¯·æ±æ°æ®å¤±è´¥çäºä»¶
     * @function SuperMap.Components.ChartModel.prototype._fireFailedEvent
     * @param {object} error  éè¯¯ä¿¡æ¯
     */

  }, {
    key: "_fireFailedEvent",
    value: function _fireFailedEvent(error) {
      var errorData = error ? {
        error: error,
        message: Lang.i18n('msg_getdatafailed')
      } : {
        message: Lang.i18n('msg_getdatafailed')
      };
      /**
       * @event SuperMap.Components.Chart#getdatafailed
       * @description çå¬å°è·åæ°æ®å¤±è´¥äºä»¶åè§¦å
       * @property {Object} error  - äºä»¶å¯¹è±¡ã
       */

      this.events.triggerEvent('getdatafailed', errorData);
    }
  }]);

  return ChartModel;
}();
// CONCATENATED MODULE: ./src/common/components/chart/ChartViewModel.js
function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === "undefined" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it["return"] != null) it["return"](); } finally { if (didErr) throw err; } } }; }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function ChartViewModel_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ChartViewModel_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ChartViewModel_createClass(Constructor, protoProps, staticProps) { if (protoProps) ChartViewModel_defineProperties(Constructor.prototype, protoProps); if (staticProps) ChartViewModel_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.Components.ChartViewModel
 * @classdesc å¾è¡¨ç»ä»¶åè½ç±»
 * @category Components Chart
 * @version 10.0.0
 * @param {Object} options - å¯éåæ°ã
 * @param {string} options.type - å¾è¡¨ç±»åã
 * @param {SuperMap.Components.Chart.Datasets} options.datasets - æ°æ®æ¥æºã
 * @param {Array.<Object>} options.chartOptions - å¾è¡¨å¯éåæ°ã
 * @param {Array.<Object>} options.chartOptions.xAxis - å¾è¡¨Xè½´ã
 * @param {string} options.chartOptions.xAxis.field - å¾è¡¨Xè½´å­æ®µåã
 * @param {string} options.chartOptions.xAxis.name - å¾è¡¨Xè½´åç§°ã
 * @param {Array.<Object>} options.chartOptions.yAxis - å¾è¡¨Yè½´ã
 * @param {string} options.chartOptions.yAxis.field - å¾è¡¨Yè½´å­æ®µåã
 * @param {string} options.chartOptions.yAxis.name - å¾è¡¨Yè½´åç§°ã
 * @fires SuperMap.Components.ChartViewModel#getdatafailed
 */

var ChartViewModel = /*#__PURE__*/function () {
  function ChartViewModel(options) {
    ChartViewModel_classCallCheck(this, ChartViewModel);

    this.datasets = options.datasets;
    this.xField = [];
    this.yField = [];
    this.grid = {
      top: "50px",
      bottom: "50px",
      left: "50px",
      right: "60px"
    };
    this.chartType = options.type || "bar";

    this._initXYField(options.chartOptions);

    this.EVENT_TYPES = ["getdatafailed"];
    this.events = new Events(this, null, this.EVENT_TYPES);
  }
  /**
   * @function SuperMap.Components.ChartViewModel.prototype._initXYField
   * @description åå§åXYå­æ®µã
   * @private
   * @param {Object} chartOptions - optionséçå¾è¡¨åæ°
   */


  ChartViewModel_createClass(ChartViewModel, [{
    key: "_initXYField",
    value: function _initXYField(chartOptions) {
      var me = this;

      if (chartOptions && chartOptions.length > 0) {
        chartOptions.forEach(function (option) {
          if (option.xAxis) {
            me.xField.push({
              field: option.xAxis.field,
              name: option.xAxis.name
            });
          }

          if (option.yAxis) {
            me.yField.push({
              field: option.yAxis.field,
              name: option.yAxis.name
            });
          }
        });
      }
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype.getDatasetInfo
     * @description è·å¾æ°æ®éæ°æ®ã
     * @param {function} success - æååè°å½æ°
     */

  }, {
    key: "getDatasetInfo",
    value: function getDatasetInfo(success) {
      var _this = this;

      this.createChart = success;

      if (this.datasets && this._checkUrl(this.datasets.url)) {
        this.chartModel = new ChartModel(this.datasets);

        if (this.datasets.type === 'iServer') {
          this.chartModel.getDatasetInfo(this._getDatasetInfoSuccess.bind(this));
        } else if (this.datasets.type === 'iPortal') {
          this.chartModel.getDataInfoByIptl(this._getDataInfoSuccess.bind(this));
        }
        /**
         * @event SuperMap.Components.ChartViewModel#getdatafailed
         * @description çå¬å°è·åæ°æ®å¤±è´¥äºä»¶åè§¦å
         * @property {Object} error  - äºä»¶å¯¹è±¡ã
         */


        this.chartModel.events.on({
          "getdatafailed": function getdatafailed(error) {
            _this.events.triggerEvent("getdatafailed", error);
          }
        });
      }
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype._getDatasetInfoSuccess
     * @description æååè°å½æ°ã
     * @private
     * @param {Object} results - æ°æ®éä¿¡æ¯
     */

  }, {
    key: "_getDatasetInfoSuccess",
    value: function _getDatasetInfoSuccess(results) {
      var datasetUrl = this.datasets.url; //å¤æ­æå¡ä¸ºå°å¾æå¡ æè æ°æ®æå¡

      var restIndex = datasetUrl.indexOf("rest");

      if (restIndex > 0) {
        var index = datasetUrl.indexOf("/", restIndex + 5);
        var type = datasetUrl.substring(restIndex + 5, index);
        var dataUrl = datasetUrl.substring(0, restIndex + 4) + "/data";

        if (type === "maps") {
          var mapIndex = datasetUrl.indexOf("/", index + 1);
          var mapName = datasetUrl.substring(index + 1, mapIndex);
          dataUrl = datasetUrl.substring(0, restIndex + 4) + "/maps/" + mapName;
          results.result.dataUrl = dataUrl;

          this._getLayerFeatures(results);
        } else if (type === "data") {
          results.result.dataUrl = dataUrl;

          this._getDataFeatures(results);
        }
      }
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype._getDataInfoSuccess
     * @description è¯·æ±iportalæ°æ®æåä¹åçåè°
     * @private
     */

  }, {
    key: "_getDataInfoSuccess",
    value: function _getDataInfoSuccess(results, type) {
      var me = this;

      if (type === 'RESTMAP') {
        me._getChartDatasFromLayer(results);
      } else {
        me._getChartDatas(results);
      }
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype._getDataFeatures
     * @description è¯·æ±æ°æ®éçæ°æ®ä¿¡æ¯
     * @private
     * @param {Object} results - æ°æ®éä¿¡æ¯
     */

  }, {
    key: "_getDataFeatures",
    value: function _getDataFeatures(results) {
      this.chartModel.getDataFeatures(results, this._getChartDatas.bind(this));
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype._getLayerFeatures
     * @description è¯·æ±å¾å±çæ°æ®ä¿¡æ¯
     * @private
     * @param {Object} results - æ°æ®éä¿¡æ¯
     */

  }, {
    key: "_getLayerFeatures",
    value: function _getLayerFeatures(results) {
      this.chartModel.getLayerFeatures(results, this._getChartDatasFromLayer.bind(this));
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype._getChartDatas
     * @description å°è¯·æ±åæ¥çæ°æ®è½¬æ¢ä¸ºå¾è¡¨æéçæ°æ®æ ¼å¼
     * @private
     * @param {Object} results - æ°æ®è¦ç´ ä¿¡æ¯
     */

  }, {
    key: "_getChartDatas",
    value: function _getChartDatas(results) {
      if (results) {
        // æ°æ®æ¥èªrestdata---results.result.features
        this.features = results.result.features;
        var features = this.features.features;
        var data = {};

        if (features.length) {
          var feature = features[0];
          var attrFields = [],
              itemTypes = [];

          for (var attr in feature.properties) {
            attrFields.push(attr);
            itemTypes.push(this._getDataType(feature.properties[attr]));
          }

          data = {
            features: features,
            fieldCaptions: attrFields,
            fieldTypes: itemTypes,
            fieldValues: []
          };

          for (var m in itemTypes) {
            var fieldValue = [];

            for (var j in features) {
              var _feature = features[j];
              var caption = data.fieldCaptions[m];
              var value = _feature.properties[caption];
              fieldValue.push(value);
            }

            data.fieldValues.push(fieldValue);
          }

          this.createChart(data);
        }
      }
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype._getChartDatasFromLayer
     * @description å°è¯·æ±åæ¥çæ°æ®è½¬æ¢ä¸ºå¾è¡¨æéçæ°æ®æ ¼å¼
     * @private
     * @param {Object} results - å¾å±æ°æ®è¦ç´ ä¿¡æ¯
     */

  }, {
    key: "_getChartDatasFromLayer",
    value: function _getChartDatasFromLayer(results) {
      if (results.result.recordsets) {
        var recordsets = results.result.recordsets[0];
        var features = recordsets.features.features;
        this.features = recordsets.features;
        var data = {};

        if (features.length) {
          data = {
            features: recordsets.features,
            fieldCaptions: recordsets.fieldCaptions,
            fieldTypes: recordsets.fieldTypes,
            fieldValues: []
          };

          for (var m in data.fieldCaptions) {
            var fieldValue = [];

            for (var j in features) {
              var feature = features[j];
              var caption = data.fieldCaptions[m];
              var value = feature.properties[caption];
              fieldValue.push(value);
            }

            data.fieldValues.push(fieldValue);
          }

          this.createChart(data);
        }
      }
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype._createChartOptions
     * @description åå»ºå¾è¡¨æéåæ°
     * @private
     * @param {Object} data - å¾è¡¨æ°æ®
     */

  }, {
    key: "_createChartOptions",
    value: function _createChartOptions(data) {
      this.calculatedData = this._createChartDatas(data);
      return this.updateChartOptions(this.chartType);
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype.changeType
     * @description æ¹åå¾è¡¨ç±»å
     * @param {string} type - å¾è¡¨ç±»å
     */

  }, {
    key: "changeType",
    value: function changeType(type) {
      if (type !== this.chartType) {
        this.chartType = type;
        return this.updateChartOptions(this.chartType);
      }
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype.updateData
     * @description æ¹åå¾è¡¨ç±»å
     * @param {SuperMap.Components.Chart.Datasets} datasets - æ°æ®æ¥æº
     * @param {function} success æååè°å½æ°
     */

  }, {
    key: "updateData",
    value: function updateData(datasets, chartOption, success) {
      this.updateChart = success;
      this.xField = [];
      this.yField = [];

      this._initXYField(chartOption); // typeçè®¾ç½®é»è®¤å¼


      datasets.type = datasets.type || 'iServer'; // withCredentialsçè®¾ç½®é»è®¤å¼

      datasets.withCredentials = datasets.withCredentials || false;
      this.datasets = datasets;
      this.getDatasetInfo(this._updateDataSuccess.bind(this));
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype._updateDataSuccess
     * @description æ¹åå¾è¡¨ç±»å
     * @private
     * @param {Object} data - å¾è¡¨æ°æ®
     */

  }, {
    key: "_updateDataSuccess",
    value: function _updateDataSuccess(data) {
      var options = this._createChartOptions(data);

      this.updateChart(options);
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype.updateChartOptions
     * @description æ´æ°å¾è¡¨æéåæ°
     * @param {string} type - å¾è¡¨ç±»å
     * @param {Object} style - å¾è¡¨æ ·å¼
     */

  }, {
    key: "updateChartOptions",
    value: function updateChartOptions(type, style) {
      if (this.calculatedData) {
        var grid = this.grid;

        var series = this._createChartSeries(this.calculatedData, type);

        var datas = [];

        for (var i in this.calculatedData.XData) {
          datas.push({
            value: this.calculatedData.XData[i].fieldsData
          });
        }

        var xAxis = {
          type: "category",
          name: this.xField[0].name || "X",
          data: datas,
          nameTextStyle: {
            color: '#fff',
            fontSize: 14
          },
          splitLine: {
            show: false
          },
          axisLine: {
            lineStyle: {
              color: '#eee'
            }
          }
        };
        var yAxis = {
          type: "value",
          name: this.yFieldName || "Y",
          data: {},
          nameTextStyle: {
            color: '#fff',
            fontSize: 14
          },
          splitLine: {
            show: false
          },
          axisLine: {
            lineStyle: {
              color: '#eee'
            }
          }
        };
        var tooltip = {
          formatter: '{b0}: {c0}'
        };
        var backgroundColor = '#404a59';

        if (style) {
          if (style.grid) {
            grid = style.grid;
          }

          if (style.tooltip) {
            tooltip = style.tooltip;
          }

          if (style.backgroundColor) {
            backgroundColor = style.backgroundColor;
          }
        }

        return {
          backgroundColor: backgroundColor,
          grid: grid,
          series: series,
          xAxis: xAxis,
          yAxis: yAxis,
          tooltip: tooltip
        };
      }
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype._createChartDatas
     * @description æå»ºå¾è¡¨æ°æ®
     * @private
     * @param {Object} data - æºæ°æ®
     */

  }, {
    key: "_createChartDatas",
    value: function _createChartDatas(data) {
      var fieldIndex = 0,
          yfieldIndexs = [];
      var fieldCaptions = data.fieldCaptions;
      var me = this; //X

      fieldCaptions.forEach(function (field, index) {
        if (me.xField[0] && field === me.xField[0].field) {
          fieldIndex = index;
        }
      }); //Y

      this.yFieldName = "";
      this.yField.forEach(function (value, index) {
        if (index !== 0) {
          me.yFieldName = me.yFieldName + ",";
        }

        me.yFieldName = me.yFieldName + value.name;
        fieldCaptions.forEach(function (field, index) {
          if (field === value.field) {
            yfieldIndexs.push(index);
          }
        });
      });

      var datas = this._getAttrData(data, fieldIndex);

      var yDatas = [];

      if (yfieldIndexs.length > 0) {
        yfieldIndexs.forEach(function (yfieldIndex) {
          var yData = [];

          for (var i in data.fieldValues[yfieldIndex]) {
            yData.push({
              value: data.fieldValues[yfieldIndex][i]
            });
          }

          yDatas.push(yData);
        });
      } else {
        //æªæå®Yå­æ®µæ¶ï¼yè½´è®¡æ°
        var YData = [],
            XData = [],
            len = datas.length; //è®¡ç®Xè½´ï¼Yè½´æ°æ®ï¼å¹¶å»é

        for (var i = 0; i < len; i++) {
          var isSame = false;

          for (var j = 0, leng = XData.length; j < leng; j++) {
            if (datas[i].fieldsData === XData[j].fieldsData) {
              YData[j].value++;
              XData[j].recordIndexs.push(i);
              isSame = true;
              break;
            }
          }

          if (!isSame) {
            if (datas[i].fieldsData) {
              XData.push({
                fieldsData: datas[i].fieldsData,
                recordIndexs: [i]
              });
              YData.push({
                value: 1
              });
            }
          }
        }

        datas = XData;
        yDatas = [YData];
      }

      return {
        XData: datas,
        YData: yDatas
      };
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype._getAttrData
     * @description éä¸­å­æ®µæ°æ®
     * @private
     * @param {Object} datacontent - å¾è¡¨æ°æ®
     * @param {number} index - å­æ®µç´¢å¼
     */

  }, {
    key: "_getAttrData",
    value: function _getAttrData(datacontent, index) {
      if (index === 0) {
        this.xField = [{
          field: datacontent.fieldCaptions[index],
          name: datacontent.fieldCaptions[index]
        }];
      }

      var fieldsDatas = [];

      for (var i = 0, len = datacontent.fieldValues[index].length; i < len; i++) {
        var value = datacontent.fieldValues[index][i];
        fieldsDatas.push({
          recordIndexs: i,
          fieldsData: value
        });
      }

      return fieldsDatas;
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype._createChartSeries
     * @description å¾è¡¨æ°æ®
     * @private
     * @param {Object} calculatedData - å¾è¡¨æ°æ®
     * @param {string} chartType - å¾è¡¨ç±»å
     */

  }, {
    key: "_createChartSeries",
    value: function _createChartSeries(calculatedData, chartType) {
      var series = [];
      var yDatas = calculatedData.YData;
      yDatas.forEach(function (yData) {
        var value = 0;
        var serieData = [];

        var _iterator = _createForOfIteratorHelper(yData),
            _step;

        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var data = _step.value;
            value = data.value;
            serieData.push({
              value: value
            });
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }

        var serie = {
          type: chartType,
          data: serieData,
          name: "y"
        };
        series.push(serie);
      });
      return series;
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype._isDate
     * @description å¤æ­æ¯å¦ä¸ºæ¥æ
     * @private
     * @param {string} data - å­ç¬¦ä¸²
     */

  }, {
    key: "_isDate",
    value: function _isDate(data) {
      var reg = /((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/ig;
      return reg.test(data);
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype._isNumber
     * @description å¤æ­æ¯å¦ä¸ºæ°å¼
     * @private
     * @param {string} data - å­ç¬¦ä¸²
     */

  }, {
    key: "_isNumber",
    value: function _isNumber(data) {
      var mdata = Number(data);

      if (mdata === 0) {
        return true;
      }

      return !isNaN(mdata);
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype._getDataType
     * @description å¤æ­æ°æ®çç±»å
     * @private
     * @param {string} data - å­ç¬¦ä¸²
     */

  }, {
    key: "_getDataType",
    value: function _getDataType(data) {
      if (data !== null && data !== undefined && data !== '') {
        if (this._isDate(data)) {
          return "DATE";
        }

        if (this._isNumber(data)) {
          return "NUMBER";
        }
      }

      return "STRING";
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype._checkUrl
     * @description æ£æ¥urlæ¯å¦ç¬¦åè¦æ±
     * @private
     * @param {string} url
     */

  }, {
    key: "_checkUrl",
    value: function _checkUrl(url) {
      var match;

      if (url === '' || !this._isMatchUrl(url)) {
        match = false;
      } else if (/^http[s]?:\/\/localhost/.test(url) || /^http[s]?:\/\/127.0.0.1/.test(url)) {
        //ä¸æ¯å®éåå
        match = false;
      } else {
        match = true;
      }

      return match;
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype._isMatchUrl
     * @description å¤æ­è¾å¥çå°åæ¯å¦ç¬¦åå°åæ ¼å¼
     * @private
     * @param {string} str - url
     */

  }, {
    key: "_isMatchUrl",
    value: function _isMatchUrl(str) {
      var reg = new RegExp('(https?|http|file|ftp)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]');
      return reg.test(str);
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype.getStyle
     * @description è·åå¾è¡¨æ ·å¼ã
     */

  }, {
    key: "getStyle",
    value: function getStyle() {
      var style = {
        grid: this.grid,
        tooltip: this.tooltip,
        backgroundColor: this.backgroundColor
      };
      return style;
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype.getFeatures
     * @description è·åå°å¾æå¡ï¼æ°æ®æå¡è¯·æ±è¿åçæ°æ®ã
     */

  }, {
    key: "getFeatures",
    value: function getFeatures() {
      return this.features;
    }
    /**
     * @function SuperMap.Components.ChartViewModel.prototype.setStyle
     * @description è®¾ç½®å¾è¡¨æ ·å¼ã
     * @param {Object} style - å¾è¡¨æ ·å¼
     */

  }, {
    key: "setStyle",
    value: function setStyle(style) {
      return this.updateChartOptions(this.chartType, style);
    }
  }]);

  return ChartViewModel;
}();
SuperMap.Components.ChartViewModel = ChartViewModel;
// CONCATENATED MODULE: ./src/common/components/chart/ChartView.js
function ChartView_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ChartView_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ChartView_createClass(Constructor, protoProps, staticProps) { if (protoProps) ChartView_defineProperties(Constructor.prototype, protoProps); if (staticProps) ChartView_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class SuperMap.Components.Chart
 * @classdesc å¾è¡¨ç»ä»¶
 * @version 9.1.2
 * @param {string} domID - å¾è¡¨domåç´ IDã
 * @param {Object} options - å¯éåæ°ã
 * @param {string} options.type - å¾è¡¨ç±»åã
 * @param {SuperMap.Components.Chart.Datasets} options.datasets - æ°æ®æ¥æº
 * @param {Array.<Object>} options.chartOptions - å¾è¡¨å¯éåæ°ã
 * @param {Array.<Object>} options.chartOptions.xAxis - å¾è¡¨Xè½´ã
 * @param {string} options.chartOptions.xAxis.field - å¾è¡¨Xè½´å­æ®µåã
 * @param {string} options.chartOptions.xAxis.name - å¾è¡¨Xè½´åç§°ã
 * @param {Array.<Object>} options.chartOptions.yAxis - å¾è¡¨Yè½´ã
 * @param {string} options.chartOptions.yAxis.field - å¾è¡¨Yè½´å­æ®µåã
 * @param {string} options.chartOptions.yAxis.name - å¾è¡¨Yè½´åç§°ã
 * @category Components Chart
 */

/**
 * @typedef {Object} SuperMap.Components.Chart.Datasets  - æ°æ®æ¥æº
 * @property {string} [type = 'iServer'] - æå¡ç±»å iServer, iPortalã
 * @property {string} url - æå¡urlå°åã
 * @property {boolean} [withCredentials = false] - è®¾ç½®è¯·æ±æ¯å¦å¸¦cookie
 * @property {SuperMap.FilterParameter} queryInfo - æ¥è¯¢æ¡ä»¶
 */

var ChartView = /*#__PURE__*/function () {
  function ChartView(domID, options) {
    ChartView_classCallCheck(this, ChartView);

    this.domID = domID;
    this.chartType = options.type || "bar"; // è®¾ç½®options.datasets.typeçé»è®¤å¼æ¯iServer

    options.datasets.type = options.datasets.type || 'iServer'; // è®¾ç½®withCredentialsçé»è®¤å¼ä¸ºfalse

    options.datasets.withCredentials = options.datasets.withCredentials || false;
    this.viewModel = new ChartViewModel(options); //æ·»å æ§ä»¶ã

    this._fillDataToView();
  }
  /**
   * @function SuperMap.Components.Chart.prototype.onAdd
   * @description åå»ºå¾è¡¨ä¹åæååè°
   * @param {function} addChart - åè°å½æ°
   */


  ChartView_createClass(ChartView, [{
    key: "onAdd",
    value: function onAdd(addChart) {
      this.addChart = addChart;
    }
    /**
     * @function SuperMap.Components.Chart.prototype._fillDataToView
     * @description å¡«åæ°æ®å° viewã
     * @private
     */

  }, {
    key: "_fillDataToView",
    value: function _fillDataToView() {
      var messageboxs = new MessageBox(); //iclient ç»å®createChartäºä»¶æååè°

      this.viewModel.getDatasetInfo(this._createChart.bind(this));
      this.viewModel.events.on({
        "getdatafailed": function getdatafailed(error) {
          messageboxs.showView(error.message);
        }
      });
    }
    /**
     * @function SuperMap.Components.Chart.prototype.getStyle
     * @description è·åå¾è¡¨æ ·å¼ã
     */

  }, {
    key: "getStyle",
    value: function getStyle() {
      return this.viewModel.getStyle();
    }
    /**
     * @function SuperMap.Components.Chart.prototype.getFeatures
     * @description è·åå°å¾æå¡ï¼æ°æ®æå¡è¯·æ±è¿åçæ°æ®ã
     */

  }, {
    key: "getFeatures",
    value: function getFeatures() {
      return this.viewModel.getFeatures();
    }
    /**
     * @function SuperMap.Components.Chart.prototype.setStyle
     * @description è®¾ç½®å¾è¡¨æ ·å¼ã
     * @param {Object} style - å¾è¡¨æ ·å¼ åèEcharts-optionsæ ·å¼è®¾ç½®
     */

  }, {
    key: "setStyle",
    value: function setStyle(style) {
      var newOptions = this.viewModel.setStyle(style);

      this._updateChart(newOptions);
    }
    /**
     * @function SuperMap.Components.Chart.prototype.changeType
     * @description æ¹åå¾è¡¨ç±»å
     * @param {string} type - å¾è¡¨ç±»å
     */

  }, {
    key: "changeType",
    value: function changeType(type) {
      if (this.chartType !== type) {
        this.chartType = type;
        var newOptions = this.viewModel.changeType(type);

        this._updateChart(newOptions);
      }
    }
    /**
     * @function SuperMap.Components.Chart.prototype.updateData
     * @description æ´æ°å¾è¡¨æ°æ®
     * @param {SuperMap.Components.Chart.Datasets} datasets - æ°æ®æ¥æº
     * @param {Object} chartOption - X,Yè½´ä¿¡æ¯
     */

  }, {
    key: "updateData",
    value: function updateData(datasets, chartOption) {
      var me = this;
      this.viewModel.updateData(datasets, chartOption, function (options) {
        me._updateChart(options);

        if (me.addChart) {
          me.addChart();
        }
      });
    }
    /**
     * @function SuperMap.Components.Chart.prototype._createChart
     * @description åå»ºå¾è¡¨
     * @private
     * @param {Object} data - å¾è¡¨æ°æ®
     */

  }, {
    key: "_createChart",
    value: function _createChart(data) {
      this.echart = external_function_try_return_echarts_catch_e_return_default().init(document.getElementById(this.domID), null, {
        renderer: "canvas"
      });

      var options = this.viewModel._createChartOptions(data);

      this.echart.setOption(options);

      if (this.addChart) {
        this.addChart();
      }
    }
    /**
     * @function SuperMap.Components.Chart.prototype._updateChart
     * @description æ´æ°å¾è¡¨
     * @private
     * @param {Object} options - å¾è¡¨åæ°
     */

  }, {
    key: "_updateChart",
    value: function _updateChart(options) {
      if (this.echart) {
        this.echart.clear();
        this.echart.setOption(options);
      }
    }
  }]);

  return ChartView;
}();
SuperMap.Components.Chart = ChartView;
// CONCATENATED MODULE: ./src/common/components/templates/TemplateBase.js
function TemplateBase_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function TemplateBase_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function TemplateBase_createClass(Constructor, protoProps, staticProps) { if (protoProps) TemplateBase_defineProperties(Constructor.prototype, protoProps); if (staticProps) TemplateBase_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * @class SuperMap.Components.TemplateBase
 * @classdesc ç»ä»¶å¬ç¨ç»ä»¶ç¶ç±»ï¼ç¨äºçº¦æç»ä¸å°è£çå¬ç¨ç»ä»¶ç»æã
 * @version 9.1.1
 * @param {Object} options - ç»ä»¶éç½®åæ°ã
 * @param {string} options.id - ç»ä»¶ dom åç´  idã
 * @category Components Common
 */

var TemplateBase = /*#__PURE__*/function () {
  function TemplateBase(options) {
    TemplateBase_classCallCheck(this, TemplateBase);

    options = options ? options : {};
    /**
     * @member {string} [SuperMap.Components.TemplateBase.prototype.id=null]
     * @description  ç»ä»¶ dom åç´  idã
     */

    this.id = options.id ? options.id : null;
    /**
     * @member {Element} [SuperMap.Components.TemplateBase.prototype.rootContainer=null]
     * @description  ç»ä»¶ dom åç´ å¯¹è±¡ã
     */

    this.rootContainer = null;
  }
  /**
   * @function SuperMap.Components.TemplateBase.prototype.getElement
   * @description è·åå½åç»ä»¶åç´ å¯¹è±¡ã
   * @return {Element}
   */


  TemplateBase_createClass(TemplateBase, [{
    key: "getElement",
    value: function getElement() {
      //todo å¶å®æè§åè¿éç»ç»ä»¶è®¾ç½®ä¸å¤ªåç
      if (this.id) {
        this.rootContainer.id = this.id;
      }

      return this.rootContainer;
    }
    /**
     * @function SuperMap.Components.TemplateBase.prototype._initView
     * @private
     * @description åå§åæ¨¡æ¿ã
     */

  }, {
    key: "_initView",
    value: function _initView() {//å­ç±»å®ç°æ­¤æ¹æ³
    }
    /**
     * @function SuperMap.Components.TemplateBase.prototype.showView
     * @description æ¾ç¤ºç»ä»¶ã
     */

  }, {
    key: "showView",
    value: function showView() {
      this.rootContainer.hidden = false;
    }
    /**
     * @function SuperMap.Components.TemplateBase.prototype.closeView
     * @description éèç»ä»¶ã
     */

  }, {
    key: "closeView",
    value: function closeView() {
      this.rootContainer.hidden = true;
    }
  }]);

  return TemplateBase;
}();
SuperMap.Components.TemplateBase = TemplateBase;
// CONCATENATED MODULE: ./src/common/components/templates/CommonContainer.js
function CommonContainer_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { CommonContainer_typeof = function _typeof(obj) { return typeof obj; }; } else { CommonContainer_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return CommonContainer_typeof(obj); }

function CommonContainer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function CommonContainer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function CommonContainer_createClass(Constructor, protoProps, staticProps) { if (protoProps) CommonContainer_defineProperties(Constructor.prototype, protoProps); if (staticProps) CommonContainer_defineProperties(Constructor, staticProps); return Constructor; }

function CommonContainer_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) CommonContainer_setPrototypeOf(subClass, superClass); }

function CommonContainer_setPrototypeOf(o, p) { CommonContainer_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return CommonContainer_setPrototypeOf(o, p); }

function CommonContainer_createSuper(Derived) { var hasNativeReflectConstruct = CommonContainer_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = CommonContainer_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = CommonContainer_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return CommonContainer_possibleConstructorReturn(this, result); }; }

function CommonContainer_possibleConstructorReturn(self, call) { if (call && (CommonContainer_typeof(call) === "object" || typeof call === "function")) { return call; } return CommonContainer_assertThisInitialized(self); }

function CommonContainer_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function CommonContainer_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function CommonContainer_getPrototypeOf(o) { CommonContainer_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return CommonContainer_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.Components.CommonContainer
 * @classdesc ç»ä»¶ç»ä¸å¤æ¡ã
 * @version 9.1.1
 * @param {Object} options - ç»ä»¶å¯éåæ°ã
 * @param {string} options.id - ç»ä»¶ dom åç´  idã
 * @param {string} options.title - æ é¢ã
 * @category Components Common
 * @extends {SuperMap.Components.TemplateBase}
 */

var CommonContainer = /*#__PURE__*/function (_TemplateBase) {
  CommonContainer_inherits(CommonContainer, _TemplateBase);

  var _super = CommonContainer_createSuper(CommonContainer);

  function CommonContainer(options) {
    var _this;

    CommonContainer_classCallCheck(this, CommonContainer);

    _this = _super.call(this, options);
    var title = options.title ? options.title : "";

    _this._initView(title);

    return _this;
  }
  /**
   * @private
   * @override
   */


  CommonContainer_createClass(CommonContainer, [{
    key: "_initView",
    value: function _initView(title) {
      var container = document.createElement("div");
      container.setAttribute("class", "component-container"); //title

      var titleContainer = document.createElement("div");
      titleContainer.setAttribute("class", "component-title");
      var titleContent = document.createElement("div");
      titleContent.innerHTML = title;
      titleContainer.appendChild(titleContent);
      container.appendChild(titleContainer); //container

      var componentContent = document.createElement("div");
      componentContent.setAttribute("class", "component-content");
      container.appendChild(componentContent);
      this.content = componentContent;
      this.rootContainer = container;
      return container;
    }
    /**
     * @function SuperMap.Components.CommonContainer.prototype.getContentElement
     * @description è·ååå®¹åç´ å®¹å¨
     */

  }, {
    key: "getContentElement",
    value: function getContentElement() {
      return this.content;
    }
    /**
     * @function SuperMap.Components.CommonContainer.prototype.appendContent
     * @description å¡«ååå®¹åç´ 
     */

  }, {
    key: "appendContent",
    value: function appendContent(element) {
      this.content.appendChild(element);
    }
  }]);

  return CommonContainer;
}(TemplateBase);
SuperMap.Components.CommonContainer = CommonContainer;
// CONCATENATED MODULE: ./src/common/components/templates/Select.js
function Select_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { Select_typeof = function _typeof(obj) { return typeof obj; }; } else { Select_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return Select_typeof(obj); }

function Select_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Select_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Select_createClass(Constructor, protoProps, staticProps) { if (protoProps) Select_defineProperties(Constructor.prototype, protoProps); if (staticProps) Select_defineProperties(Constructor, staticProps); return Constructor; }

function Select_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) Select_setPrototypeOf(subClass, superClass); }

function Select_setPrototypeOf(o, p) { Select_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return Select_setPrototypeOf(o, p); }

function Select_createSuper(Derived) { var hasNativeReflectConstruct = Select_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = Select_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = Select_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return Select_possibleConstructorReturn(this, result); }; }

function Select_possibleConstructorReturn(self, call) { if (call && (Select_typeof(call) === "object" || typeof call === "function")) { return call; } return Select_assertThisInitialized(self); }

function Select_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function Select_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function Select_getPrototypeOf(o) { Select_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return Select_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.Components.Select
 * @classdesc ç»ä»¶ç»ä¸çæå­ä¸ææ¡ã
 * @version 9.1.1
 * @param {Array.<string|Array>} options - éè¦åå»ºç Select æ°æ®æ°ç»ã
 * @param {string} options.id - ç»ä»¶ dom åç´  idã
 * @param {string} [options.labelName] - label åç§°ã
 * @param {Array.<string>} options.optionsArr - éè¦åå»ºç option æ°æ®æ°ç»ã
 * @param {Function} [options.optionsClickCb] - option ç¹å»äºä»¶åè°å½æ°ã
 * @extends {SuperMap.Components.TemplateBase}
 * @category Components Common
 */

var Select = /*#__PURE__*/function (_TemplateBase) {
  Select_inherits(Select, _TemplateBase);

  var _super = Select_createSuper(Select);

  function Select(options) {
    var _this;

    Select_classCallCheck(this, Select);

    _this = _super.call(this, options);

    _this._initView(options);

    return _this;
  }

  Select_createClass(Select, [{
    key: "_initView",
    value: function _initView(options) {
      var selectTool = this._createElement('div', "component-selecttool");

      if (options.labelName) {
        var label = this._createElement('label', 'component-selecttool__lable--describe', selectTool);

        label.innerHTML = options.labelName;
      }

      var chartSelect = this._createElement('div', 'component-selecttool--chart', selectTool);

      chartSelect.setAttribute('tabindex', '1');

      var selectName = this._createElement('div', "component-selecttool__name", chartSelect);

      selectName.title = options.optionsArr[0];
      selectName.innerHTML = options.optionsArr[0];

      var chartTriangleBtn = this._createElement('div', 'component-selecttool__trianglebtn--chart', chartSelect);

      var triangleBtn = this._createElement('div', 'component-triangle-down-img', chartTriangleBtn);

      var selectContent = this._createElement('div', 'component-selecttool__content', chartSelect);

      var scrollarea = this._createElement('div', 'component-selecttool__content--chart', selectContent);

      var scrollareaContent = this._createElement('div', 'component-selecttool__scrollarea__content', scrollarea);

      scrollareaContent.setAttribute('tabindex', '1');
      this.createOptions(scrollareaContent, options.optionsArr);
      this.optionClickEvent(scrollareaContent, selectName, options.optionsClickCb); // ä¸ææ¡æ¾ç¤º & éèäºä»¶

      this._selectClickEvent(chartSelect, selectContent, triangleBtn);

      this.rootContainer = selectTool;
    }
    /**
     * @function SuperMap.Components.Select.prototype.createOptions
     * @description åå»ºæå±ä¸ææ¡éé¡¹ã
     */

  }, {
    key: "createOptions",
    value: function createOptions(container, optionsArr) {
      for (var i in optionsArr) {
        var option = this._createElement('div', 'component-selecttool__option', container);

        option.title = optionsArr[i];
        option.innerHTML = optionsArr[i];
      }
    }
    /**
     * @function SuperMap.Components.Select.prototype._selectClickEvent
     * @description select ç¹å»æ¾ç¤º&éèäºä»¶ã
     * @private
     */

  }, {
    key: "_selectClickEvent",
    value: function _selectClickEvent(eventElement, contentElement, triangleBtn) {
      eventElement.onclick = function (e) {
        if (contentElement.style.display === "block") {
          contentElement.style.display = "none";
          triangleBtn.className = "component-triangle-down-img";
        } else {
          contentElement.style.display = "block";
          triangleBtn.className = "triangle-up-img";
        }

        e.preventDefault();
        e.stopPropagation();
      };

      eventElement.onmousedown = function (evt) {
        //console.log('dropdownbox onmousedown '+evt.target.className);
        if (evt.target !== this) {
          this.focus();
          evt.preventDefault();
          evt.stopPropagation();
        }
      };

      eventElement.onblur = function () {
        contentElement.style.display = "none";
        triangleBtn.className = "component-triangle-down-img";
      };
    }
    /**
     * @function Select.prototype._createElement
     * @description éç¨åå»ºåç´ ã
     * @private
     */

  }, {
    key: "_createElement",
    value: function _createElement(tagName, className, parentEle) {
      var ele = document.createElement(tagName || 'div');
      className && (ele.className = className);
      parentEle && parentEle.appendChild(ele);
      return ele;
    }
    /**
     * @function SuperMap.Components.Select.prototype.optionClickEvent
     * @description ä¸ææ¡ç option çç¹å»äºä»¶ã
     */

  }, {
    key: "optionClickEvent",
    value: function optionClickEvent(optionEleArr, selectNameEle, optionsClickCb) {
      var _loop = function _loop(i) {
        var childEle = optionEleArr.children[i];

        childEle.onclick = function () {
          selectNameEle.innerHTML = childEle.innerHTML;
          selectNameEle.title = childEle.title;

          if (childEle.getAttribute('data-value')) {
            selectNameEle.setAttribute('data-value', childEle.getAttribute('data-value'));
          }

          optionsClickCb && optionsClickCb(childEle);
        };
      };

      for (var i = 0; i < optionEleArr.children.length; i++) {
        _loop(i);
      }
    }
  }]);

  return Select;
}(TemplateBase);
SuperMap.Components.Select = Select;
// CONCATENATED MODULE: ./src/common/components/templates/DropDownBox.js
function DropDownBox_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { DropDownBox_typeof = function _typeof(obj) { return typeof obj; }; } else { DropDownBox_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return DropDownBox_typeof(obj); }

function DropDownBox_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function DropDownBox_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function DropDownBox_createClass(Constructor, protoProps, staticProps) { if (protoProps) DropDownBox_defineProperties(Constructor.prototype, protoProps); if (staticProps) DropDownBox_defineProperties(Constructor, staticProps); return Constructor; }

function DropDownBox_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) DropDownBox_setPrototypeOf(subClass, superClass); }

function DropDownBox_setPrototypeOf(o, p) { DropDownBox_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return DropDownBox_setPrototypeOf(o, p); }

function DropDownBox_createSuper(Derived) { var hasNativeReflectConstruct = DropDownBox_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = DropDownBox_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = DropDownBox_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return DropDownBox_possibleConstructorReturn(this, result); }; }

function DropDownBox_possibleConstructorReturn(self, call) { if (call && (DropDownBox_typeof(call) === "object" || typeof call === "function")) { return call; } return DropDownBox_assertThisInitialized(self); }

function DropDownBox_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function DropDownBox_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function DropDownBox_getPrototypeOf(o) { DropDownBox_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return DropDownBox_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.Components.DropDownBox
 * @classdesc ç»ä»¶ç»ä¸çå¾çä¸ææ¡ã
 * @version 9.1.1
 * @param {Array.<Object>} optionsArr - éè¦åå»ºç option æ°æ®æ°ç»ã
 * @param {string} optionsArr.id - ç»ä»¶ dom åç´  idã
 * @param {string} optionsArr.title - ä¸ææ¡ titleã
 * @param {string} optionsArr.remark - ä¸ææ¡è§£éæ è®°ææ¬ã
 * @param {string} optionsArr.icon - ä¸ææ¡å¾æ ã
 * @param {string} [optionsArr.dataValue] - ä¸ææ¡ attribute åä¸º data-value çå¼ ã
 * @param {string} [optionsArr.icon.className] - ä¸ææ¡å¾æ ç±»åã
 * @param {string} [optionsArr.icon.background] - ä¸ææ¡å¾æ èæ¯ urlã
 * @category Components Common
 * @extends {SuperMap.Components.TemplateBase}
 */

var DropDownBox = /*#__PURE__*/function (_TemplateBase) {
  DropDownBox_inherits(DropDownBox, _TemplateBase);

  var _super = DropDownBox_createSuper(DropDownBox);

  function DropDownBox(optionsArr) {
    var _this;

    DropDownBox_classCallCheck(this, DropDownBox);

    _this = _super.call(this, optionsArr);

    _this._initView(optionsArr);

    return _this;
  }
  /**
   * @function SuperMap.Components.DropDownBox.prototype._initView
   * @description åå§åä¸ææ¡ã
   * @private
   * @override
   */


  DropDownBox_createClass(DropDownBox, [{
    key: "_initView",
    value: function _initView(optionsArr) {
      var dropDownContainer = document.createElement('div');
      dropDownContainer.className = 'component-dropdownbox--container';
      var dropDownBox = document.createElement('div');
      dropDownBox.setAttribute('tabindex', '1');
      dropDownBox.className = "component-dropdownbox";
      dropDownContainer.appendChild(dropDownBox);
      var dropDownTopContainer = document.createElement('div');
      dropDownBox.appendChild(dropDownTopContainer);

      this._createDropDownOption(optionsArr[0], dropDownTopContainer);

      var triangleBtnContainer = document.createElement('div');
      triangleBtnContainer.className = 'component-dropdownbox__triangle-btn';
      dropDownBox.appendChild(triangleBtnContainer);
      var triangleBtn = document.createElement('div');
      triangleBtn.className = 'component-triangle-down-img';
      triangleBtnContainer.appendChild(triangleBtn);
      var createDropDownBoxParam = {
        "parentEle": dropDownBox,
        "dropDownContent": ['component-dropdownbox__content component-dropdownbox__content--chart', 'dropDownContent'],
        "scrollareaContent": 'component-selecttool__scrollarea__content',
        "optionsArr": optionsArr,
        "triangleBtn": triangleBtn,
        "dropDownTopContainer": dropDownTopContainer
      };

      this._createDropDownBox(createDropDownBoxParam);

      this.rootContainer = dropDownContainer;
    }
    /**
     * @function SuperMap.Components.DropDownBox.prototype._createDropDownBox
     * @description åå»ºä¸ææ¡ã
     * @private
     */

  }, {
    key: "_createDropDownBox",
    value: function _createDropDownBox(createDropDownBoxParam) {
      var dropDownBox = createDropDownBoxParam.parentEle;
      var dropDownTopContainer = createDropDownBoxParam.dropDownTopContainer;
      var dropDownContent = document.createElement('div');
      dropDownContent.className = createDropDownBoxParam.dropDownContent[0];
      dropDownBox.appendChild(dropDownContent);
      var scrollareaContent = document.createElement('div');
      scrollareaContent.className = createDropDownBoxParam.scrollareaContent;
      dropDownContent.appendChild(scrollareaContent);
      var optionsArr = createDropDownBoxParam.optionsArr;

      for (var i = 0; i < optionsArr.length; i++) {
        this._createDropDownOption(optionsArr[i], scrollareaContent);
      } // ä¸ææ¡æ¾ç¤º & éèäºä»¶


      var triangleBtn = createDropDownBoxParam.triangleBtn;

      this._dropDownClickEvent(dropDownBox, dropDownContent, triangleBtn);

      this._eleOnblur(dropDownBox, dropDownContent, triangleBtn); // ä¸ææ¡ options ç¹å»äºä»¶


      var scrollareaOptions = scrollareaContent.children;

      var _loop = function _loop(_i) {
        scrollareaOptions[_i].onclick = function () {
          dropDownTopContainer.innerHTML = scrollareaOptions[_i].outerHTML; //evt.stopPropagation();
        };
      };

      for (var _i = 0; _i < scrollareaOptions.length; _i++) {
        _loop(_i);
      }
    }
    /**
     * @function SuperMap.Components.DropDownBox.prototype._createDropDownOption
     * @description åå»ºä¸ææ¡å­åç´ ã
     * @private
     */

  }, {
    key: "_createDropDownOption",
    value: function _createDropDownOption(data, parentElement) {
      var ele = document.createElement('div');
      ele.className = 'component-dropdownbox__item';
      var dataItem = data;

      if (dataItem['dataValue']) {
        ele.setAttribute('data-value', dataItem['dataValue']);
      }

      parentElement.appendChild(ele);
      var imgContainer = document.createElement('div');
      imgContainer.className = 'component-dropdownbox__item__img';
      ele.appendChild(imgContainer);
      var img = document.createElement('div');

      if (dataItem.icon.className) {
        img.className = dataItem.icon.className;
      }

      if (dataItem.icon.background) {
        img.style.background = dataItem.icon.background;
      }

      imgContainer.appendChild(img);
      var title = document.createElement('div');
      title.className = 'component-dropdownbox__item__title';
      title.title = dataItem.title;
      title.innerHTML = dataItem.title;
      ele.appendChild(title);
      var remark = document.createElement('div');
      remark.className = 'component-dropdownbox__item__remark';
      remark.title = dataItem.remark;
      remark.innerHTML = dataItem.remark;
      ele.appendChild(remark);
    }
    /**
     * @function SuperMap.Components.DropDownBox.prototype._dropDownClickEvent
     * @description ä¸ææ¡ç¹å»äºä»¶ã
     * @private
     */

  }, {
    key: "_dropDownClickEvent",
    value: function _dropDownClickEvent(eventElement, contentElement, triangleBtn) {
      eventElement.onclick = function (e) {
        if (contentElement.style.display === "block") {
          contentElement.style.display = "none";
          triangleBtn.className = "component-triangle-down-img";
        } else {
          contentElement.style.display = "block";
          triangleBtn.className = "triangle-up-img";
        }

        e.preventDefault();
        e.stopPropagation();
      };

      eventElement.onmousedown = function (evt) {
        //console.log('dropdownbox onmousedown '+evt.target.className);
        if (evt.target !== this) {
          this.focus();
          evt.preventDefault();
          evt.stopPropagation();
        }
      };
    }
    /**
     * @function SuperMap.Components.DropDownBox.prototype._eleOnblur
     * @description ä¸ææ¡å¤±ç¦äºä»¶ã
     * @private
     */

  }, {
    key: "_eleOnblur",
    value: function _eleOnblur(eventElement, contentElement, triangleBtn) {
      eventElement.onblur = function () {
        contentElement.style.display = "none";
        triangleBtn.className = "component-triangle-down-img";
      };
    }
    /**
     * @function SuperMap.Components.DropDownBox.prototype._createElement
     * @description éç¨åå»ºåç´ ã
     * @private
     */

  }, {
    key: "_createElement",
    value: function _createElement(tagName, className, parentEle) {
      var ele = document.createElement(tagName || 'div');
      className && (ele.className = className);
      parentEle && parentEle.appendChild(ele);
      return ele;
    }
  }]);

  return DropDownBox;
}(TemplateBase);
SuperMap.Components.DropDownBox = DropDownBox;
// CONCATENATED MODULE: ./src/common/components/templates/PopContainer.js
function PopContainer_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { PopContainer_typeof = function _typeof(obj) { return typeof obj; }; } else { PopContainer_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return PopContainer_typeof(obj); }

function PopContainer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function PopContainer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function PopContainer_createClass(Constructor, protoProps, staticProps) { if (protoProps) PopContainer_defineProperties(Constructor.prototype, protoProps); if (staticProps) PopContainer_defineProperties(Constructor, staticProps); return Constructor; }

function PopContainer_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) PopContainer_setPrototypeOf(subClass, superClass); }

function PopContainer_setPrototypeOf(o, p) { PopContainer_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return PopContainer_setPrototypeOf(o, p); }

function PopContainer_createSuper(Derived) { var hasNativeReflectConstruct = PopContainer_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = PopContainer_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = PopContainer_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return PopContainer_possibleConstructorReturn(this, result); }; }

function PopContainer_possibleConstructorReturn(self, call) { if (call && (PopContainer_typeof(call) === "object" || typeof call === "function")) { return call; } return PopContainer_assertThisInitialized(self); }

function PopContainer_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function PopContainer_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function PopContainer_getPrototypeOf(o) { PopContainer_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return PopContainer_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.Components.PopContainer
 * @classdesc å¼¹æ¡ç»ä»¶ã
 * @version 9.1.1
 * @param {Object} options - ç»ä»¶éç½®åæ°ã
 * @param {string} options.id - ç»ä»¶ dom åç´  idã
 * @param {string} options.title - å¼¹æ¡ç»ä»¶åç§°ã
 * @extends {SuperMap.Components.TemplateBase}
 * @category Components Common
 */

var PopContainer = /*#__PURE__*/function (_TemplateBase) {
  PopContainer_inherits(PopContainer, _TemplateBase);

  var _super = PopContainer_createSuper(PopContainer);

  function PopContainer(options) {
    var _this;

    PopContainer_classCallCheck(this, PopContainer);

    options = options ? options : {};
    _this = _super.call(this, options);
    options.title = options.title ? options.title : "";

    _this._initView(options.title);

    return _this;
  }
  /**
   * @private
   * @override
   */


  PopContainer_createClass(PopContainer, [{
    key: "_initView",
    value: function _initView(titile) {
      var container = document.createElement("div");
      container.setAttribute("class", "component-popcontainer"); //header

      var header = document.createElement("div");
      header.setAttribute("class", "component-popcontainer__header");
      var title = document.createElement("label");
      title.setAttribute("class", "component-popcontainer__header__title");
      title.innerHTML = titile;
      header.appendChild(title);
      var closeBtn = document.createElement("span");
      closeBtn.setAttribute("class", "supermapol-icons-clear component-popcontainer__header__close");
      closeBtn.onclick = this.closeView.bind(this);
      container.appendChild(closeBtn);
      container.appendChild(header); //content

      var content = document.createElement("div");
      content.setAttribute("class", "component-popcontainer__content");
      this.content = content;
      container.appendChild(content);
      this.rootContainer = container;
    }
    /**
     * @function SuperMap.Components.PopContainer.prototype.appendContent
     * @description è¿½å åå®¹ã
     * @param {Element} dom - åå®¹åç´ ã
     */

  }, {
    key: "appendContent",
    value: function appendContent(dom) {
      this.content.appendChild(dom);
    }
  }]);

  return PopContainer;
}(TemplateBase);
SuperMap.Components.PopContainer = PopContainer;
// CONCATENATED MODULE: ./src/common/components/templates/AttributesPopContainer.js
function AttributesPopContainer_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { AttributesPopContainer_typeof = function _typeof(obj) { return typeof obj; }; } else { AttributesPopContainer_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return AttributesPopContainer_typeof(obj); }

function AttributesPopContainer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function AttributesPopContainer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function AttributesPopContainer_createClass(Constructor, protoProps, staticProps) { if (protoProps) AttributesPopContainer_defineProperties(Constructor.prototype, protoProps); if (staticProps) AttributesPopContainer_defineProperties(Constructor, staticProps); return Constructor; }

function AttributesPopContainer_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) AttributesPopContainer_setPrototypeOf(subClass, superClass); }

function AttributesPopContainer_setPrototypeOf(o, p) { AttributesPopContainer_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return AttributesPopContainer_setPrototypeOf(o, p); }

function AttributesPopContainer_createSuper(Derived) { var hasNativeReflectConstruct = AttributesPopContainer_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = AttributesPopContainer_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = AttributesPopContainer_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return AttributesPopContainer_possibleConstructorReturn(this, result); }; }

function AttributesPopContainer_possibleConstructorReturn(self, call) { if (call && (AttributesPopContainer_typeof(call) === "object" || typeof call === "function")) { return call; } return AttributesPopContainer_assertThisInitialized(self); }

function AttributesPopContainer_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function AttributesPopContainer_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function AttributesPopContainer_getPrototypeOf(o) { AttributesPopContainer_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return AttributesPopContainer_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.Components.AttributesPopContainer
 * @classdesc å±æ§å¼¹æ¡ç»ä»¶
 * @version 9.1.1
 * @param {Object} options - ç»ä»¶éç½®åæ°ã
 * @param {string} options.id - ç»ä»¶ dom åç´  idã
 * @param {Object} options.title - å±æ§å¼¹æ¡ç»ä»¶åç§°ã
 * @param {Object} options.attributes - ç»ä»¶éè¦æ¾ç¤ºçå±æ§åå®¹ã
 * @extends {SuperMap.Components.PopContainer}
 * @category Components Common
 */

var AttributesPopContainer = /*#__PURE__*/function (_PopContainer) {
  AttributesPopContainer_inherits(AttributesPopContainer, _PopContainer);

  var _super = AttributesPopContainer_createSuper(AttributesPopContainer);

  function AttributesPopContainer(options) {
    var _this;

    AttributesPopContainer_classCallCheck(this, AttributesPopContainer);

    //é»è®¤ä¸ºå±æ§ï¼
    options.title = options.title ? options.title : "å±æ§";
    _this = _super.call(this, options);
    _this.rootContainer.firstChild.hidden = true;
    options.attributes = options.attributes ? options.attributes : [];

    _this._createAttributesTable(options.attributes);

    return _this;
  }

  AttributesPopContainer_createClass(AttributesPopContainer, [{
    key: "_createAttributesTable",
    value: function _createAttributesTable(attributes) {
      var table = document.createElement("table");
      table.setAttribute("class", "component-popcontainer__content__table");
      var tbody = document.createElement("tbody");
      var single = true;

      for (var name in attributes) {
        var tr = document.createElement("tr");

        if (single) {
          tr.setAttribute("class", "component-popcontainer__content__td--color");
        }

        var title = document.createElement("td");
        var titleSpan = document.createElement("Span");
        titleSpan.innerHTML = name;
        title.appendChild(titleSpan);
        var value = document.createElement("td");
        value.innerHTML = attributes[name];
        tr.appendChild(title);
        tr.appendChild(value);
        tbody.appendChild(tr);
        single = !single;
      }

      table.appendChild(tbody);
      this.appendContent(table);
    }
  }]);

  return AttributesPopContainer;
}(PopContainer);
SuperMap.Components.AttributesPopContainer = AttributesPopContainer;
// CONCATENATED MODULE: ./src/common/components/templates/IndexTabsPageContainer.js
function IndexTabsPageContainer_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { IndexTabsPageContainer_typeof = function _typeof(obj) { return typeof obj; }; } else { IndexTabsPageContainer_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return IndexTabsPageContainer_typeof(obj); }

function IndexTabsPageContainer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function IndexTabsPageContainer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function IndexTabsPageContainer_createClass(Constructor, protoProps, staticProps) { if (protoProps) IndexTabsPageContainer_defineProperties(Constructor.prototype, protoProps); if (staticProps) IndexTabsPageContainer_defineProperties(Constructor, staticProps); return Constructor; }

function IndexTabsPageContainer_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) IndexTabsPageContainer_setPrototypeOf(subClass, superClass); }

function IndexTabsPageContainer_setPrototypeOf(o, p) { IndexTabsPageContainer_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return IndexTabsPageContainer_setPrototypeOf(o, p); }

function IndexTabsPageContainer_createSuper(Derived) { var hasNativeReflectConstruct = IndexTabsPageContainer_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = IndexTabsPageContainer_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = IndexTabsPageContainer_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return IndexTabsPageContainer_possibleConstructorReturn(this, result); }; }

function IndexTabsPageContainer_possibleConstructorReturn(self, call) { if (call && (IndexTabsPageContainer_typeof(call) === "object" || typeof call === "function")) { return call; } return IndexTabsPageContainer_assertThisInitialized(self); }

function IndexTabsPageContainer_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function IndexTabsPageContainer_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function IndexTabsPageContainer_getPrototypeOf(o) { IndexTabsPageContainer_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return IndexTabsPageContainer_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.Components.IndexTabsPageContainer
 * @description æ ç­¾ç´¢å¼ç»ä»¶ã
 * @version 9.1.1
 * @param {Object} options - å¯éåæ°ã
 * @param {string} options.id - ç»ä»¶ dom åç´  idã
 * @category Components Common
 * @extends {SuperMap.Components.TemplateBase}
 */

var IndexTabsPageContainer = /*#__PURE__*/function (_TemplateBase) {
  IndexTabsPageContainer_inherits(IndexTabsPageContainer, _TemplateBase);

  var _super = IndexTabsPageContainer_createSuper(IndexTabsPageContainer);

  function IndexTabsPageContainer(options) {
    var _this;

    IndexTabsPageContainer_classCallCheck(this, IndexTabsPageContainer);

    _this = _super.call(this, options);

    _this._initView();

    return _this;
  }
  /**
   * @private
   * @override
   */


  IndexTabsPageContainer_createClass(IndexTabsPageContainer, [{
    key: "_initView",
    value: function _initView() {
      var container = document.createElement("div");
      container.setAttribute("class", "component-tabpage");
      var header = document.createElement("ul");
      this.header = header;
      var content = document.createElement("div");
      content.setAttribute("class", "component-tabpage__content");
      this.content = content;
      container.appendChild(header);
      container.appendChild(content);
      this.rootContainer = container;
    }
    /**
     * @function SuperMap.Components.IndexTabsPageContainer.prototype.setTabs
     * @description è®¾ç½®æ ç­¾åç´ ã
     * @param {Array.<Element>} tabs
     */

  }, {
    key: "setTabs",
    value: function setTabs(tabs) {
      this.removeAllTabs();
      this.appendTabs(tabs);
    }
    /**
     * @function SuperMap.Components.IndexTabsPageContainer.prototype.appendTabs
     * @description è¿½å æ ç­¾åç´ ã
     * @param {Array.<Element>} tabs
     */

  }, {
    key: "appendTabs",
    value: function appendTabs(tabs) {
      for (var i = 0; i < tabs.length; i++) {
        var title = document.createElement("span");
        title.index = i;
        title.appendChild(document.createTextNode(tabs[i].title)); //ç»å®æ ç­¾åæ¢å¯¹åºé¡µé¢ï¼

        title.onclick = this._changeTabsPage.bind(this);
        var content = tabs[i].content;
        content.index = i;
        content.hidden = true;
        this.header.appendChild(title);
        this.content.appendChild(content);
      } //todo ç¡®è®¤æ¯å¦ä¸¤ä¸ªå­åç´ ç index ç¸äºå¯¹åº
      //é»è®¤æ¾ç¤ºç¬¬ä¸ä¸ªæ ç­¾å¯¹è±¡


      this.header.firstChild.setAttribute("class", "on");
      this.content.firstChild.hidden = false;
    }
    /**
     * @function SuperMap.Components.IndexTabsPageContainer.prototype.removeTab
     * @description å é¤æä¸ªæ ç­¾é¡µé¢ã
     * @param {number} index - æ ç­¾ç´¢å¼å·ã
     */

  }, {
    key: "removeTab",
    value: function removeTab(index) {
      this.header.removeChild(this.header.children[index]);
      this.content.removeChild(this.content.children[index]);
    }
    /**
     * @function SuperMap.Components.IndexTabsPageContainer.prototype.removeAllTabs
     * @description å é¤æææ ç­¾ã
     */

  }, {
    key: "removeAllTabs",
    value: function removeAllTabs() {
      for (var i = this.header.children.length; i > 0; i--) {
        this.header.removeChild(this.header.children[i]);
        this.content.removeChild(this.content.children[i]);
      }
    }
  }, {
    key: "_changeTabsPage",
    value: function _changeTabsPage(e) {
      var index = e.target.index;

      for (var i = 0; i < this.header.children.length; i++) {
        this.header.children[i].setAttribute("class", "");
        this.content.children[i].hidden = true;

        if (i === index) {
          this.header.children[i].setAttribute("class", "on");
          this.content.children[i].hidden = false;
        }
      }
    }
  }]);

  return IndexTabsPageContainer;
}(TemplateBase);
SuperMap.Components.IndexTabsPageContainer = IndexTabsPageContainer;
// CONCATENATED MODULE: ./src/common/components/templates/CityTabsPage.js
function CityTabsPage_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { CityTabsPage_typeof = function _typeof(obj) { return typeof obj; }; } else { CityTabsPage_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return CityTabsPage_typeof(obj); }

function CityTabsPage_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function CityTabsPage_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function CityTabsPage_createClass(Constructor, protoProps, staticProps) { if (protoProps) CityTabsPage_defineProperties(Constructor.prototype, protoProps); if (staticProps) CityTabsPage_defineProperties(Constructor, staticProps); return Constructor; }

function CityTabsPage_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) CityTabsPage_setPrototypeOf(subClass, superClass); }

function CityTabsPage_setPrototypeOf(o, p) { CityTabsPage_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return CityTabsPage_setPrototypeOf(o, p); }

function CityTabsPage_createSuper(Derived) { var hasNativeReflectConstruct = CityTabsPage_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = CityTabsPage_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = CityTabsPage_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return CityTabsPage_possibleConstructorReturn(this, result); }; }

function CityTabsPage_possibleConstructorReturn(self, call) { if (call && (CityTabsPage_typeof(call) === "object" || typeof call === "function")) { return call; } return CityTabsPage_assertThisInitialized(self); }

function CityTabsPage_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function CityTabsPage_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function CityTabsPage_getPrototypeOf(o) { CityTabsPage_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return CityTabsPage_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class SuperMap.Components.CityTabsPage
 * @classdesc åå¸å°åå¹éç»ä»¶æ¨¡æ¿
 * @version 9.1.1
 * @param {Object} options - ç»ä»¶éç½®åæ°ã
 * @param {string} options.id - ç»ä»¶ dom åç´  idã
 * @param {Object|Array.<string>} options.config - åå¸åç§°éç½®åè¡¨ï¼æ¯æä¸¤ç§æ ¼å¼ï¼{key1:{A:[],B:[]}, key2:{C:[],D:[]}} æ
 *                               ["æé½å¸","åäº¬å¸"]ï¼ç¨æ·å¯æ ¹æ®èªå·±çé¡¹ç®éæ±è¿è¡éç½®
 * @extends {SuperMap.Components.IndexTabsPageContainer}
 * @category Components Common
 */

var CityTabsPage = /*#__PURE__*/function (_IndexTabsPageContain) {
  CityTabsPage_inherits(CityTabsPage, _IndexTabsPageContain);

  var _super = CityTabsPage_createSuper(CityTabsPage);

  function CityTabsPage(options) {
    var _this;

    CityTabsPage_classCallCheck(this, CityTabsPage);

    _this = _super.call(this, options); //å»æé»è®¤çè¾¹æ¡é´å½±æ ·å¼ï¼

    _this.rootContainer.classList.add("component-citytabpage--noneBoxShadow");

    _this.config = options.config; //headerï¼è¥ configä¸ºåå¸åç§°æ°ç»ï¼åç´æ¥å è½½åå®¹

    if (Util.isArray(_this.config)) {
      _this.header.hidden = true;

      _this._createCityItem("åå¸", _this.config);

      _this.content.style.border = "none";
    } else {
      _this._createTabs();

      _this.header.onclick = function (e) {
        //å³é­ææåç´  æ¯å¦ææ´ç®åçåæ³ï¼
        for (var i = 0; i < _this.header.children.length; i++) {
          _this.header.children[i].setAttribute("class", "");
        } //æå¼ç¹å»åå®¹åç´ 


        e.target.setAttribute("class", "on");

        _this._createCityContent(e.target.innerHTML);
      };
    }

    return _this;
  }
  /**
   * @function SuperMap.Components.CityTabsPage.prototype._createTabs
   * @description åå»º Tabs
   * @private
   */


  CityTabsPage_createClass(CityTabsPage, [{
    key: "_createTabs",
    value: function _createTabs() {
      //header
      if (Util.isArray(this.config)) {
        for (var i = 0; i < this.config.length; i++) {
          var innerHTML = "";

          for (var key in this.config[i]) {
            innerHTML += key;
          }

          var li = document.createElement("li");
          li.innerHTML = innerHTML;
          this.header.appendChild(li);
        }
      } else {
        for (var _key in this.config) {
          var _li = document.createElement("li");

          _li.innerHTML = _key;
          this.header.appendChild(_li);
        }
      }

      this.header.firstChild.setAttribute("class", "on");

      this._createCityContent(this.header.firstChild.innerHTML);
    }
    /**
     * @function SuperMap.Components.CityTabsPage.prototype._createCityContent
     * @description åå»ºåè¡¨å®¹å¨
     * @private
     */

  }, {
    key: "_createCityContent",
    value: function _createCityContent(keyName) {
      //æ¸é¤åç´ ï¼
      for (var i = this.content.children.length; i > 0; i--) {
        this.content.removeChild(this.content.children[i - 1]);
      } //åå»ºå¯¹åºåç´ 


      var cities = this.config[keyName];

      for (var key in cities) {
        this._createCityItem(key, cities[key]);
      }
    }
    /**
     * @function SuperMap.Components.CityTabsPage.prototype._createCityContent
     * @description åå»ºåè¡¨å®¹å¨
     * @private
     */

  }, {
    key: "_createCityItem",
    value: function _createCityItem(key, cities) {
      var city = document.createElement("div");
      var cityClass = document.createElement("div");
      cityClass.setAttribute("class", "component-citytabpag__py-key");
      cityClass.innerHTML = key;
      city.appendChild(cityClass);
      var cityContent = document.createElement("div");
      cityContent.setAttribute("class", "component-citytabpag__content");

      for (var i = 0; i < cities.length; i++) {
        var span = document.createElement("span");
        span.innerHTML = cities[i];
        cityContent.appendChild(span);
      } //HOT åç´ é¿åº¦åç¬å¾®è°ï¼


      if (key === "HOT") {
        cityContent.style.width = "428px";
      }

      city.appendChild(cityContent);
      this.content.appendChild(city);
    }
  }]);

  return CityTabsPage;
}(IndexTabsPageContainer);
SuperMap.Components.CityTabsPage = CityTabsPage;
// CONCATENATED MODULE: ./src/common/components/templates/NavTabsPage.js
function NavTabsPage_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { NavTabsPage_typeof = function _typeof(obj) { return typeof obj; }; } else { NavTabsPage_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return NavTabsPage_typeof(obj); }

function NavTabsPage_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function NavTabsPage_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function NavTabsPage_createClass(Constructor, protoProps, staticProps) { if (protoProps) NavTabsPage_defineProperties(Constructor.prototype, protoProps); if (staticProps) NavTabsPage_defineProperties(Constructor, staticProps); return Constructor; }

function NavTabsPage_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) NavTabsPage_setPrototypeOf(subClass, superClass); }

function NavTabsPage_setPrototypeOf(o, p) { NavTabsPage_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return NavTabsPage_setPrototypeOf(o, p); }

function NavTabsPage_createSuper(Derived) { var hasNativeReflectConstruct = NavTabsPage_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = NavTabsPage_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = NavTabsPage_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return NavTabsPage_possibleConstructorReturn(this, result); }; }

function NavTabsPage_possibleConstructorReturn(self, call) { if (call && (NavTabsPage_typeof(call) === "object" || typeof call === "function")) { return call; } return NavTabsPage_assertThisInitialized(self); }

function NavTabsPage_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function NavTabsPage_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function NavTabsPage_getPrototypeOf(o) { NavTabsPage_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return NavTabsPage_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.Components.NavTabsPage
 * @classdesc æ ç­¾é¡µé¢ç»ä»¶ã
 * @version 9.1.1
 * @param {Object} options - ç»ä»¶éç½®åæ°ã
 * @param {string} optionsArr.id - ç»ä»¶ dom åç´  idã
 * @param {Array.<Object>} [options.tabs=[]] - æ ç­¾å¯¹è±¡æ°ç»ï¼å½¢å¦ï¼[{title: "",content: HTMLElement}]ï¼åå§æ¶ï¼ä¼ å¥ååå»ºé¡µé¢ã
 * @extends {SuperMap.Components.TemplateBase}
 * @category Components Common
 */
//  todo æèæåçæ§ä»¶åºè¯¥ä»¥åªç§æ¹å¼ä½¿ç¨

var NavTabsPage = /*#__PURE__*/function (_TemplateBase) {
  NavTabsPage_inherits(NavTabsPage, _TemplateBase);

  var _super = NavTabsPage_createSuper(NavTabsPage);

  function NavTabsPage(options) {
    var _this;

    NavTabsPage_classCallCheck(this, NavTabsPage);

    _this = _super.call(this, options);
    _this.navTabsTitle = null;
    _this.navTabsContent = null;
    options.tabs = options.tabs ? options.tabs : [];

    _this._initView(options.tabs);

    return _this;
  }
  /**
   * @override
   * @private
   */


  NavTabsPage_createClass(NavTabsPage, [{
    key: "_initView",
    value: function _initView(tabs) {
      var navTabsPage = document.createElement("div");
      navTabsPage.setAttribute("class", "component-navtabspage"); //å³é­æé®

      var closeBtn = document.createElement("span");
      closeBtn.setAttribute("class", "supermapol-icons-close");
      closeBtn.onclick = this.closeView.bind(this);
      navTabsPage.appendChild(closeBtn); //æ ç­¾

      var navTabsTitle = document.createElement("div");
      this.navTabsTitle = navTabsTitle;
      navTabsTitle.setAttribute("class", "component-navtabspage__title");
      navTabsPage.appendChild(navTabsTitle); //åå®¹

      var navTabsContent = document.createElement("div");
      this.navTabsContent = navTabsContent;
      navTabsContent.setAttribute("class", "component-navtabspage__content");
      navTabsPage.appendChild(navTabsContent); //è¥ tabs åå§ä¼ å¥å¼ï¼å

      if (tabs.length > 0) {
        this.appendTabs(tabs);
      }

      this.rootContainer = navTabsPage;
    }
    /**
     * @function SuperMap.Components.NavTabsPage.prototype.setTabs
     * @description è®¾ç½®æ ç­¾ã
     * @param {Array.<Object>} tabs - æ ç­¾å¯¹è±¡æ°ç»ï¼å½¢å¦ï¼[{title: "",content: {}}]ã
     */

  }, {
    key: "setTabs",
    value: function setTabs(tabs) {
      this.removeAllTabs();
      this.appendTabs(tabs);
    }
    /**
     * @function SuperMap.Components.NavTabsPage.prototype.appendTabs
     * @description æ·»å æ ç­¾é¡µé¢ã
     * @param {Array.<Object>} tabs - æ ç­¾å¯¹è±¡æ°ç»ï¼å½¢å¦ï¼[{title: "",content: {}}]ã
     */

  }, {
    key: "appendTabs",
    value: function appendTabs(tabs) {
      for (var i = 0; i < tabs.length; i++) {
        var title = document.createElement("span");
        title.index = i;
        title.appendChild(document.createTextNode(tabs[i].title)); //ç»å®æ ç­¾åæ¢å¯¹åºé¡µé¢ï¼

        title.onclick = this._changeTabsPage.bind(this);
        var content = tabs[i].content;
        content.index = i;
        content.hidden = true;
        this.navTabsTitle.appendChild(title);
        this.navTabsContent.appendChild(content);
      } //todo ç¡®è®¤æ¯å¦ä¸¤ä¸ªå­åç´ ç index ç¸äºå¯¹åº
      //é»è®¤æ¾ç¤ºç¬¬ä¸ä¸ªæ ç­¾å¯¹è±¡


      this.navTabsTitle.firstChild.setAttribute("class", "component-navtabspage__tabs--select");
      this.navTabsContent.firstChild.hidden = false;
    }
    /**
     * @function SuperMap.Components.NavTabsPage.prototype.removeTab
     * @description å é¤æä¸ªæ ç­¾é¡µé¢ã
     * @param {number} index - æ ç­¾ç´¢å¼å·ã
     */

  }, {
    key: "removeTab",
    value: function removeTab(index) {
      this.navTabsTitle.removeChild(this.navTabsTitle.children[index]);
      this.navTabsContent.removeChild(this.navTabsContent.children[index]);
    }
    /**
     * @function SuperMap.Components.NavTabsPage.prototype.removeAllTabs
     * @description å é¤æææ ç­¾ã
     */

  }, {
    key: "removeAllTabs",
    value: function removeAllTabs() {
      for (var i = this.navTabsTitle.children.length; i > 0; i--) {
        this.navTabsTitle.removeChild(this.navTabsTitle.children[i]);
        this.navTabsContent.removeChild(this.navTabsContent.children[i]);
      }
    }
  }, {
    key: "_changeTabsPage",
    value: function _changeTabsPage(e) {
      var index = e.target.index;

      for (var i = 0; i < this.navTabsTitle.children.length; i++) {
        this.navTabsTitle.children[i].setAttribute("class", "");
        this.navTabsContent.children[i].hidden = true;

        if (i === index) {
          this.navTabsTitle.children[i].setAttribute("class", "component-navtabspage__tabs--select");
          this.navTabsContent.children[i].hidden = false;
        }
      }
    }
  }]);

  return NavTabsPage;
}(TemplateBase);
SuperMap.Components.NavTabsPage = NavTabsPage;
// CONCATENATED MODULE: ./src/common/components/templates/PaginationContainer.js
function PaginationContainer_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { PaginationContainer_typeof = function _typeof(obj) { return typeof obj; }; } else { PaginationContainer_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return PaginationContainer_typeof(obj); }

function PaginationContainer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function PaginationContainer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function PaginationContainer_createClass(Constructor, protoProps, staticProps) { if (protoProps) PaginationContainer_defineProperties(Constructor.prototype, protoProps); if (staticProps) PaginationContainer_defineProperties(Constructor, staticProps); return Constructor; }

function PaginationContainer_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) PaginationContainer_setPrototypeOf(subClass, superClass); }

function PaginationContainer_setPrototypeOf(o, p) { PaginationContainer_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return PaginationContainer_setPrototypeOf(o, p); }

function PaginationContainer_createSuper(Derived) { var hasNativeReflectConstruct = PaginationContainer_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = PaginationContainer_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = PaginationContainer_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return PaginationContainer_possibleConstructorReturn(this, result); }; }

function PaginationContainer_possibleConstructorReturn(self, call) { if (call && (PaginationContainer_typeof(call) === "object" || typeof call === "function")) { return call; } return PaginationContainer_assertThisInitialized(self); }

function PaginationContainer_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function PaginationContainer_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function PaginationContainer_getPrototypeOf(o) { PaginationContainer_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return PaginationContainer_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class SuperMap.Components.PaginationContainer
 * @classdesc åé¡µç»ä»¶æ¨¡æ¿ã
 * @version 9.1.1
 * @param {Object} options - ç»ä»¶éç½®åæ°ã
 * @param {string} optionsArr.id - ç»ä»¶ dom åç´  idã
 * @param {HTMLElement} options.contents - é¡µé¢å¡«åç DOM åç´ å¯¹è±¡ã
 * @param {number} options.pageCounts - é¡µæ°ã
 * @extends {SuperMap.Components.TemplateBase}
 * @category Components Common
 */

var PaginationContainer = /*#__PURE__*/function (_TemplateBase) {
  PaginationContainer_inherits(PaginationContainer, _TemplateBase);

  var _super = PaginationContainer_createSuper(PaginationContainer);

  function PaginationContainer(options) {
    var _this;

    PaginationContainer_classCallCheck(this, PaginationContainer);

    options = options ? options : {};
    _this = _super.call(this, options);
    _this.currentPage = 0;
    _this.pageNumberLis = [];
    _this.currentPageNumberLis = [];
    _this.linkageEvent = null;
    options.contents = options.contents ? options.contents : null;
    options.pageCounts = options.pageCounts ? options.pageCounts : 0;

    _this._initView(options.contents, options.pageCounts);

    return _this;
  }
  /**
   * @function SuperMap.Components.PaginationContainer.prototype.setLinkageEvent
   * @description è®¾ç½®é¡µé¢èå¨æ¹æ³ã
   * @param {function} linkageEvent - èå¨æ¹æ³ï¼å®ç°æå®åè½ã
   */


  PaginationContainer_createClass(PaginationContainer, [{
    key: "setLinkageEvent",
    value: function setLinkageEvent(linkageEvent) {
      this.linkageEvent = linkageEvent;
    }
    /**
     * @private
     * @override
     */

  }, {
    key: "_initView",
    value: function _initView(contents, pageCounts) {
      var container = document.createElement("div");
      container.setAttribute("class", "component-pagination"); //content

      var content = document.createElement("div");
      content.setAttribute("class", "component-pagination__content");
      container.appendChild(content);
      this.content = content; //link

      var link = document.createElement("ul");
      link.setAttribute("class", "component-pagination__link");
      link.onclick = this._changePageEvent.bind(this);
      container.appendChild(link);

      this._createLink(link);

      this.link = link; //å¡«ååå®¹ï¼

      if (contents) {
        this.setContent(contents);
      }

      if (pageCounts !== 0) {
        this.setPageLink(pageCounts);
      }

      this.rootContainer = container;
    }
    /**---------ä»¥ä¸æ¯é¡µé¢ç¸å³æä½ **/

    /**
     * @function SuperMap.Components.PaginationContainer.prototype.setContent
     * @description è®¾ç½®é¡µé¢åå®¹ã
     * @param {Element} element - é¡µé¢åå®¹åç´ ã
     */

  }, {
    key: "setContent",
    value: function setContent(element) {
      this.clearContent();
      this.appendContent(element);
    }
    /**
     * @function SuperMap.Components.PaginationContainer.prototype.appendContent
     * @description è¿½å åå®¹ã
     * @param {Element} element - é¡µé¢åå®¹åç´ ã
     */

  }, {
    key: "appendContent",
    value: function appendContent(element) {
      this.content.appendChild(element);
    }
    /**
     * @function SuperMap.Components.PaginationContainer.prototype.clearContent
     * @description æ¸ç©ºåå®¹åç´ ã
     */

  }, {
    key: "clearContent",
    value: function clearContent() {
      for (var i = this.content.children.length - 1; i >= 0; i--) {
        this.content.removeChild(this.content.children[i]);
      }
    }
    /** -----ä»¥ä¸æ¯é¡µç ç¸å³çæä½ï¼**/

    /**
     * @function SuperMap.Components.PaginationContainer.prototype.setPageLink
     * @description è®¾ç½®é¡µç æ°ã
     * @param {number} pageNumber - é¡µç æ°ã
     */

  }, {
    key: "setPageLink",
    value: function setPageLink(pageNumber) {
      //æ¸ç©ºå½åé¡µç 
      this.pageNumberLis = [];
      this.currentPageNumberLis = [];
      this.clearPageLink(); //åå»ºé¡µç 

      this._createPageLi(pageNumber); //æ·»å é¡µç å°é¡µç åè¡¨


      this._appendPageLink();
    }
    /**
     * @description åå»ºé¡µç ã
     * @param pageNumber
     * @private
     */

  }, {
    key: "_createPageLi",
    value: function _createPageLi(pageNumber) {
      for (var i = 0; i < pageNumber; i++) {
        var pageLi = document.createElement("li");
        pageLi.innerHTML = i + 1;
        /*const liContent = document.createElement("span");
        liContent.innerHTML = i + 1;*/
        // pageLi.appendChild(liContent);

        this.pageNumberLis.push(pageLi);
      }

      this.pageNumberLis[0].setAttribute("class", "active");
      this.currentPage = 1;

      if (pageNumber < 5) {
        this.currentPageNumberLis = this.pageNumberLis;
      } else {
        for (var _i = 0; _i < 5; _i++) {
          this.currentPageNumberLis.push(this.pageNumberLis[_i]);
        }
      }
    }
    /**
     * @description æ·»å é¡µç å°é¡µç åè¡¨ã
     * @private
     */

  }, {
    key: "_appendPageLink",
    value: function _appendPageLink() {
      //todo å¦ä½æå¥ä¸­é´
      for (var i = 0; i < this.currentPageNumberLis.length; i++) {
        this.link.insertBefore(this.currentPageNumberLis[i], this.link.childNodes[this.link.children.length - 2]);
      }

      for (var _i2 = 0; _i2 < this.currentPageNumberLis.length; _i2++) {
        //æ¸ç©º active ç¶æ
        this.currentPageNumberLis[_i2].setAttribute("class", ""); //ç»å½åéä¸­ç li èµå¼  active ç¶æ


        if (Number(this.currentPageNumberLis[_i2].innerHTML) === this.currentPage) {
          this.currentPageNumberLis[_i2].setAttribute("class", "active");
        }
      } //æ ¹æ® currentPage æ¹åæé®ç¶æ


      this._changeDisableState();

      if (this.linkageEvent) {
        this.linkageEvent(this.currentPage);
      }
    }
    /**
     * @function SuperMap.Components.PaginationContainer.prototype.clearPageLink
     * @description æ¸é¤é¡µç åè¡¨ã
     */

  }, {
    key: "clearPageLink",
    value: function clearPageLink() {
      for (var i = this.link.children.length - 3; i > 1; i--) {
        this.link.removeChild(this.link.children[i]);
      }
    }
    /**
     * @description åå»ºé¡µç æé®ã
     * @param ul
     * @private
     */

  }, {
    key: "_createLink",
    value: function _createLink(ul) {
      for (var i = 0; i < 4; i++) {
        var li = document.createElement("li");
        li.setAttribute("class", "disable");
        var liContent = document.createElement("span");
        li.appendChild(liContent);

        if (i === 0) {
          liContent.id = "first";
          liContent.setAttribute("class", "supermapol-icons-first");
        } else if (i === 1) {
          liContent.id = "prev";
          liContent.setAttribute("class", "supermapol-icons-prev");
        } else if (i === 2) {
          liContent.id = "next";
          liContent.setAttribute("class", "supermapol-icons-next");
        } else if (i === 3) {
          liContent.id = "last";
          liContent.setAttribute("class", "supermapol-icons-last");
        }

        ul.appendChild(li);
      }
    }
    /**
     * @description ç¹å»é¡µç äºä»¶ã
     * @param e
     * @private
     */

  }, {
    key: "_changePageEvent",
    value: function _changePageEvent(e) {
      //todo
      var trigger = e.target; //è¥åè¡¨ç¦ç¨ï¼ç¹å»æ æ

      if (trigger.parentElement.classList[0] === "disable") {
        return;
      }

      var targetLi;

      if (trigger.id) {
        targetLi = trigger.id;
      } else if (Number(trigger.innerHTML)) {
        targetLi = Number(trigger.innerHTML);
      } else {
        return;
      } //é¡µç é¢å¤çï¼


      this._prePageNum(targetLi); //æ ¹æ® currentPageNumberLis åå»ºé¡µç åè¡¨


      this.clearPageLink();

      this._appendPageLink();
    }
    /**
     * @description æ ¹æ® currentPage æ¹åæé®ç¶æã
     * @private
     */

  }, {
    key: "_changeDisableState",
    value: function _changeDisableState() {
      this.link.children[0].setAttribute("class", "");
      this.link.children[1].setAttribute("class", "");
      this.link.children[this.link.children.length - 1].setAttribute("class", "");
      this.link.children[this.link.children.length - 2].setAttribute("class", "");

      if (this.currentPage === 1) {
        this.link.children[0].setAttribute("class", "disable");
        this.link.children[1].setAttribute("class", "disable");
      }

      if (this.currentPage === this.pageNumberLis.length) {
        this.link.children[this.link.children.length - 1].setAttribute("class", "disable");
        this.link.children[this.link.children.length - 2].setAttribute("class", "disable");
      }
    }
    /**
     * @description æ ¹æ®ç¹å»é¡µç åè¡¨äºä»¶åå¤éå±ç°çé¡µç åè¡¨ã
     * @param {string|number} targetLi - è¢«ç¹å»çåè¡¨å¯¹è±¡ id æ è¢«ç¹å»çé¡µç å¼ã
     * @private
     */

  }, {
    key: "_prePageNum",
    value: function _prePageNum(targetLi) {
      var currentPageNumberLis = [];

      if (targetLi === "first") {
        this.currentPage = 1;
      } else if (targetLi === "last") {
        this.currentPage = this.pageNumberLis.length;
      } else if (targetLi === "prev") {
        this.currentPage = this.currentPage - 1;
      } else if (targetLi === "next") {
        this.currentPage = this.currentPage + 1;
      } else {
        this.currentPage = targetLi;
      }

      if (this.pageNumberLis.length <= 5) {
        for (var i = 0; i < this.pageNumberLis.length; i++) {
          currentPageNumberLis.push(this.pageNumberLis[i]);
        }
      } else {
        //å½åç¹å»åä¸ï¼é½ååäº
        if (this.currentPage <= 3) {
          for (var _i3 = 0; _i3 < 5; _i3++) {
            currentPageNumberLis.push(this.pageNumberLis[_i3]);
          }
        } else if (this.currentPage >= this.pageNumberLis.length - 3) {
          //ç¹å»åä¸ï¼é½åå5
          for (var _i4 = this.pageNumberLis.length - 5; _i4 < this.pageNumberLis.length; _i4++) {
            currentPageNumberLis.push(this.pageNumberLis[_i4]);
          }
        } else {
          //å¶ä»ï¼åä¸­é´ï¼
          for (var _i5 = this.currentPage - 3; _i5 <= this.currentPage + 1; _i5++) {
            currentPageNumberLis.push(this.pageNumberLis[_i5]);
          }
        }
      }

      if (currentPageNumberLis.length > 0) {
        this.currentPageNumberLis = currentPageNumberLis;
      }
    }
  }]);

  return PaginationContainer;
}(TemplateBase);
SuperMap.Components.PaginationContainer = PaginationContainer;
// CONCATENATED MODULE: ./src/common/components/util/Util.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

var ComponentsUtil = {
  /**
   * è·åä¸ä¼ æä»¶ç±»å
   * @param fileName
   */
  getFileType: function getFileType(fileName) {
    var regCSV = /^.*\.(?:csv)$/i;
    var regExcel = /^.*\.(?:xls|xlsx)$/i; //æä»¶åå¯ä»¥å¸¦ç©ºæ ¼

    var regGeojson = /^.*\.(?:geojson|json)$/i;

    if (regExcel.test(fileName)) {
      //æ ¡éªä¸éè¿
      return CommonTypes_FileTypes.EXCEL;
    } else if (regCSV.test(fileName)) {
      return CommonTypes_FileTypes.CSV;
    } else if (regGeojson.test(fileName)) {
      return CommonTypes_FileTypes.GEOJSON;
    }

    return null;
  }
};
// CONCATENATED MODULE: ./src/common/components/util/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




// CONCATENATED MODULE: ./src/common/components/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
//æ°æ®
 //ç»ä»¶

 //æç¤ºæ¡ç»ä»¶

 //å¾è¡¨ç»ä»¶


 //å¬ç¨æ¨¡æ¿ï¼









 //å·¥å·ç±»

















// CONCATENATED MODULE: ./src/common/lang/locales/en-US.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * Namespace: SuperMap.Lang["en"]
 * Dictionary for English.  Keys for entries are used in calls to
 *     <SuperMap.Lang.translate>.  Entry bodies are normal strings or
 *     strings formatted for use with <SuperMap.String.format> calls.
 */

var en = {
  'title_dataFlowService': 'Data Flow Service',
  'title_distributedAnalysis': 'Distributed Analysis',
  'title_clientComputing': 'Client Computing',
  'title_dataServiceQuery': 'Data Service Query',
  'title_searchCity': 'Search city',
  'title_searchLayer': ' Search layer',
  'text_input_value_inputDataFlowUrl': 'Please enter the data stream service address such as: ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe',
  'text_displayFeaturesInfo': 'Display feature information',
  'text_subscribe': 'subscribe',
  'text_cancelSubscribe': 'unsubscribe',
  'text_densityAnalysis': 'Density Analysis',
  'text_CalculateTheValuePerUnitArea': 'Calculate the value per unit area within the neighborhood shape',
  'text_option_selectDataset': 'Please select a dataset',
  'text_label_dataset': 'Dataset',
  'text_option_simplePointDensityAnalysis': 'Simple point density analysis',
  'text_option_nuclearDensityAnalysis': 'Nuclear density analysis',
  'text_label_analyticalMethod': 'Analytical method',
  'text_option_quadrilateral': 'Quadrilateral',
  'text_option_hexagon': 'hexagon',
  'text_label_meshType': 'Mesh type',
  'text_option_notSet': 'Not set',
  'text_label_weightField': 'Weight field',
  'text_label_gridSizeInMeters': 'Grid size',
  'text_label_searchRadius': 'Search radius',
  'text_label_queryRange': 'Scope of analysis',
  'text_label_areaUnit': 'Area unit',
  'text_option_equidistantSegmentation': 'Equidistant segmentation',
  'text_option_logarithm': 'Logarithm',
  'text_option_equalCountingSegment': 'Equal counting segment',
  'text_option_squareRootSegmentation': 'Square root segmentation',
  'text_label_thematicMapSegmentationMode': 'Thematic map segmentation mode',
  'text_label_thematicMapSegmentationParameters': 'Thematic map segmentation parameters',
  'text_option_greenOrangePurpleGradient': 'Green orange purple gradient',
  'text_option_greenOrangeRedGradient': 'Green orange red gradient',
  'text_option_rainbowGradient': 'Rainbow gradient',
  'text_option_spectralGradient': 'Spectral gradient',
  'text_option_terrainGradient': 'Terrain gradient',
  'text_label_thematicMapColorGradientMode': 'Thematic map color gradient mode',
  'text_label_resultLayerName': 'Result layer name',
  'text_chooseFile': 'Open File',
  'text_isoline': 'Isoline',
  'text_extractDiscreteValue': 'Extract discrete value generation curve',
  'text_buffer': 'Buffer',
  'text_specifyTheDistance': 'Specify the distance to create the surrounding area',
  'text_label_analysisLayer': 'Analysis layer',
  'text_label_extractField': 'Extract field',
  'text_label_extractedValue': 'Extracted value',
  'text_label_distanceAttenuation': 'Distance attenuation',
  'text_label_gridSize': 'gridSize',
  'text_label_bufferRadius': 'Buffer radius',
  'text_label_defaultkilometers': 'Default 10 kilometers',
  'text_label_kilometer': 'kilometer',
  'text_label_unit': 'unit',
  'text_retainOriginal': 'Retain original object field',
  'text_mergeBuffer': 'Merge buffer',
  'text_label_color': 'Color',
  'text_label_buffer': '[Buffer]',
  'text_label_isolines': '[Isolines]',
  'text_label_queryRangeTips': 'The default is the full range of input data. Example: -74.050, 40.650, -73.850, 40.850',
  'text_label_queryModel': 'Query mode',
  'text_label_IDArrayOfFeatures': 'ID array of features',
  'text_label_maxFeatures': 'The maximum number of features that can be returned',
  'text_label_bufferDistance': 'Buffer distance',
  'text_label_queryRange1': 'Query range',
  'text_label_spatialQueryMode': 'Spatial query mode',
  'text_label_featureFilter': 'Feature filter',
  'text_label_geometricObject': 'Geometric object',
  'text_label_queryMode': 'Query mode',
  'text_label_searchTips': 'Search for city locations or layer features',
  'text_label_chooseSearchLayers': 'Select a query layer',
  'text_loadSearchCriteria': 'Load search criteria',
  'text_saveSearchCriteria': 'Save search criteria',
  "btn_analyze": "Analyze",
  "btn_analyzing": "Analyzing",
  "btn_emptyTheAnalysisLayer": "Empty the analysis layer",
  "btn_cancelAnalysis": "Cancel",
  "btn_query": "Query",
  "btn_querying": "Querying",
  "btn_emptyTheRresultLayer": "Clear all result layers",
  'msg_dataReturnedIsEmpty.': 'The request is successful and the data returned by the query is empty.',
  'msg_dataFlowServiceHasBeenSubscribed': 'The data stream service has been subscribed to.',
  'msg_inputDataFlowUrlFirst': 'Please enter the data stream service address first.',
  'msg_datasetOrMethodUnsupport': 'This dataset does not support this analysis type. Please reselect the dataset.',
  'msg_selectDataset': 'Please select a data set!',
  'msg_setTheWeightField': 'Please set the weight field!',
  'msg_theFieldNotSupportAnalysis': 'The field you currently select does not support analysis!',
  'msg_resultIsEmpty': 'The result of the analysis is empty!',
  'msg_openFileFail': 'Failed to open file!',
  'msg_fileTypeUnsupported': 'File format is not supported!',
  'msg_fileSizeExceeded': 'File size exceeded! The file size should not exceed 10M!',
  'msg_dataInWrongGeoJSONFormat': 'Wrong data format! Non standard GEOJSON format data!',
  'msg_dataInWrongFormat': 'Wrong data format! Non standard EXCEL, CSV or GEOJSON format data!',
  'msg_searchKeywords': "Search keywords cannot be empty. Please enter your search criteria.",
  'msg_searchGeocodeField': "Did not match the address matching service data!",
  'msg_cityGeocodeField': "The address matching service of the current city is not configured.",
  'msg_getFeatureField': "No related vector features found!",
  'msg_dataflowservicesubscribed': 'The data stream service has been subscribed to.',
  'msg_subscribesucceeded': 'The data stream service subscription was successful.',
  'msg_crsunsupport': 'Does not support the coordinate system of the current map',
  'msg_tilematrixsetunsupport': 'Incoming TileMatrixSet is not supported',
  'msg_jsonResolveFiled': 'JSON format parsing failureï¼',
  'msg_requestContentFiled': 'Failed to request data through iportal!',
  'msg_getdatafailed': 'Failed to get data!'
};

SuperMap.Lang["en-US"] = en;
// CONCATENATED MODULE: ./src/common/lang/locales/zh-CN.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * Namespace: SuperMap.Lang["zh-CN"]
 * Dictionary for Simplified Chinese.  Keys for entries are used in calls to
 *     <SuperMap.Lang.translate>.  Entry bodies are normal strings or
 *     strings formatted for use with <SuperMap.String.format> calls.
 */

var zh = {
  'title_dataFlowService': 'æ°æ®æµæå¡',
  'title_distributedAnalysis': 'åå¸å¼åæ',
  'title_clientComputing': 'å®¢æ·ç«¯è®¡ç®',
  'title_dataServiceQuery': 'æ°æ®æå¡æ¥è¯¢',
  'title_searchCity': 'æç´¢åå¸',
  'title_searchLayer': 'æç´¢å¾å±',
  'text_input_value_inputDataFlowUrl': 'è¯·è¾å¥æ°æ®æµæå¡å°åå¦:ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe',
  'text_displayFeaturesInfo': 'æ¾ç¤ºè¦ç´ ä¿¡æ¯',
  'text_subscribe': 'è®¢é',
  'text_cancelSubscribe': 'åæ¶è®¢é',
  'text_densityAnalysis': 'å¯åº¦åæ',
  'text_CalculateTheValuePerUnitArea': 'è®¡ç®ç¹æå®é»åå½¢ç¶åçæ¯åä½é¢ç§¯éå¼',
  'text_option_selectDataset': 'è¯·éæ©æ°æ®é',
  'text_label_dataset': 'æ°æ®é',
  'text_option_simplePointDensityAnalysis': 'ç®åç¹å¯åº¦åæ',
  'text_option_nuclearDensityAnalysis': 'æ ¸å¯åº¦åæ',
  'text_label_analyticalMethod': 'åææ¹æ³',
  'text_option_quadrilateral': 'åè¾¹å½¢',
  'text_option_hexagon': 'å­è¾¹å½¢',
  'text_label_meshType': 'ç½æ ¼é¢ç±»å',
  'text_option_notSet': 'æªè®¾ç½®',
  'text_label_weightField': 'æéå­æ®µ',
  'text_label_gridSizeInMeters': 'ç½æ ¼å¤§å°',
  'text_label_searchRadius': 'æç´¢åå¾',
  'text_label_queryRange': 'åæèå´',
  'text_label_areaUnit': 'é¢ç§¯åä½',
  'text_option_equidistantSegmentation': 'ç­è·ç¦»åæ®µ',
  'text_option_logarithm': 'å¯¹æ°',
  'text_option_equalCountingSegment': 'ç­è®¡æ°åæ®µ',
  'text_option_squareRootSegmentation': 'å¹³æ¹æ ¹åæ®µ',
  'text_label_thematicMapSegmentationMode': 'ä¸é¢å¾åæ®µæ¨¡å¼',
  'text_label_thematicMapSegmentationParameters': 'ä¸é¢å¾åæ®µåæ°',
  'text_option_greenOrangePurpleGradient': 'ç»¿æ©ç´«æ¸å',
  'text_option_greenOrangeRedGradient': 'ç»¿æ©çº¢æ¸å',
  'text_option_rainbowGradient': 'å½©è¹æ¸å',
  'text_option_spectralGradient': 'åè°±æ¸å',
  'text_option_terrainGradient': 'å°å½¢æ¸å',
  'text_label_thematicMapColorGradientMode': 'ä¸é¢å¾é¢è²æ¸åæ¨¡å¼',
  'text_label_resultLayerName': 'ç»æå¾å±åç§°',
  'text_chooseFile': 'éæ©æä»¶',
  'text_isoline': 'ç­å¼çº¿',
  'text_extractDiscreteValue': 'æåç¦»æ£å¼çææ²çº¿',
  'text_buffer': 'ç¼å²åº',
  'text_specifyTheDistance': 'æå®è·ç¦»åå»ºå¨è¾¹åºå',
  'text_label_analysisLayer': 'åæå¾å±',
  'text_label_extractField': 'æåå­æ®µ',
  'text_label_extractedValue': 'æåå¼',
  'text_label_distanceAttenuation': 'è·ç¦»è¡°å',
  'text_label_gridSize': 'æ æ ¼å¤§å°',
  'text_label_bufferRadius': 'ç¼å²åå¾',
  'text_label_defaultkilometers': 'é»è®¤10åç±³',
  'text_option_kilometer': 'åç±³',
  'text_label_unit': 'åä½',
  'text_retainOriginal': 'ä¿çåå¯¹è±¡å­æ®µå±æ§',
  'text_mergeBuffer': 'åå¹¶ç¼å²åº',
  'text_label_color': 'é¢è²',
  'text_label_buffer': '[ç¼å²åº]',
  'text_label_isolines': '[ç­å¼çº¿]',
  'text_label_queryRangeTips': 'é»è®¤ä¸ºè¾å¥æ°æ®çå¨å¹èå´ãèä¾ï¼-74.050,40.650,-73.850,40.850',
  'text_label_IDArrayOfFeatures': 'è¦ç´  ID æ°ç»',
  'text_label_maxFeatures': 'æå¤å¯è¿åçè¦ç´ æ°é',
  'text_label_bufferDistance': 'ç¼å²åºè·ç¦»',
  'text_label_queryRange1': 'æ¥è¯¢èå´',
  'text_label_spatialQueryMode': 'ç©ºé´æ¥è¯¢æ¨¡å¼',
  'text_label_featureFilter': 'è¦ç´ è¿æ»¤å¨',
  'text_label_geometricObject': 'å ä½å¯¹è±¡',
  'text_label_queryMode': 'æ¥è¯¢æ¨¡å¼',
  'text_label_searchTips': 'æç´¢åå¸å°ç¹æå¾å±è¦ç´ ',
  'text_label_chooseSearchLayers': 'éæ©æ¥è¯¢å¾å±',
  'text_loadSearchCriteria': 'å è½½æç´¢æ¡ä»¶',
  'text_saveSearchCriteria': 'ä¿å­æç´¢æ¡ä»¶',
  "btn_analyze": "åæ",
  "btn_analyzing": "åæä¸­",
  "btn_emptyTheAnalysisLayer": "æ¸ç©ºåæå¾å±",
  "btn_cancelAnalysis": "åæ¶",
  "btn_query": "æ¥è¯¢",
  "btn_querying": "æ¥è¯¢ä¸­",
  "btn_emptyTheRresultLayer": "æ¸é¤ææç»æå¾å±",
  'msg_dataFlowServiceHasBeenSubscribed': 'å·²è®¢éè¯¥æ°æ®æµæå¡ã',
  'msg_inputDataFlowUrlFirst': 'è¯·åè¾å¥æ°æ®æµæå¡å°åã',
  'msg_datasetOrMethodUnsupport': 'è¯¥æ°æ®éä¸æ¯ææ¬åæç±»åï¼è¯·éæ°éæ©æ°æ®é',
  'msg_selectDataset': 'è¯·éæ©æ°æ®éï¼',
  'msg_setTheWeightField': 'è¯·è®¾ç½®æéå­æ®µï¼',
  'msg_theFieldNotSupportAnalysis': 'æ¨å½åéæ©çå­æ®µä¸æ¯æåæï¼',
  'msg_resultIsEmpty': 'åæçç»æä¸ºç©ºï¼',
  'msg_dataReturnedIsEmpty': 'è¯·æ±æåï¼æ¥è¯¢è¿åçæ°æ®ä¸ºç©ºã',
  'msg_openFileFail': 'æå¼æä»¶å¤±è´¥ï¼',
  'msg_fileTypeUnsupported': 'ä¸æ¯æè¯¥æä»¶æ ¼å¼ï¼',
  'msg_fileSizeExceeded': 'æä»¶å¤§å°è¶éï¼æä»¶å¤§å°ä¸å¾è¶è¿ 10Mï¼',
  'msg_dataInWrongGeoJSONFormat': 'æ°æ®æ ¼å¼éè¯¯ï¼éæ åç GEOJSON æ ¼å¼æ°æ®ï¼',
  'msg_dataInWrongFormat': 'æ°æ®æ ¼å¼éè¯¯ï¼éæ åç EXCEL, CSV æ GEOJSON æ ¼å¼æ°æ®ï¼',
  'msg_searchKeywords': "æç´¢å³é®å­ä¸è½ä¸ºç©ºï¼è¯·è¾å¥æç´¢æ¡ä»¶ã",
  'msg_searchGeocodeField': "æªå¹éå°å°åå¹éæå¡æ°æ®ï¼",
  'msg_cityGeocodeField': "æªéç½®å½ååå¸çå°åå¹éæå¡ã",
  'msg_getFeatureField': "æªæ¥æ¾å°ç¸å³ç¢éè¦ç´ ï¼",
  'msg_dataflowservicesubscribed': 'å·²è®¢éè¯¥æ°æ®æµæå¡ã',
  'msg_subscribesucceeded': 'æ°æ®æµæå¡è®¢éæåã',
  'msg_crsunsupport': 'ä¸æ¯æå½åå°å¾çåæ ç³»',
  'msg_tilematrixsetunsupport': 'ä¸æ¯æä¼ å¥çTileMatrixSet',
  'msg_jsonResolveFiled': 'jsonæ ¼å¼è§£æå¤±è´¥ï¼',
  'msg_requestContentFiled': 'éè¿iportalè¯·æ±æ°æ®å¤±è´¥ï¼',
  'msg_getdatafailed': 'è·åæ°æ®å¤±è´¥ï¼'
};

SuperMap.Lang["zh-CN"] = zh;
// CONCATENATED MODULE: ./src/common/lang/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/






// CONCATENATED MODULE: ./src/common/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
































// CONCATENATED MODULE: external "mapboxgl"
var external_mapboxgl_namespaceObject = mapboxgl;
var external_mapboxgl_default = /*#__PURE__*/__webpack_require__.n(external_mapboxgl_namespaceObject);

// CONCATENATED MODULE: ./src/mapboxgl/core/MapExtend.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @function mapboxgl.supermap.MapExtend
 * @description  æ©å±äº mapboxgl.Map å¯¹å¾å±ç¸å³çæä½ã
 * @private
 */

var MapExtend = function () {
  (external_mapboxgl_default()).Map.prototype.overlayLayersManager = {};

  if ((external_mapboxgl_default()).Map.prototype.addLayerBak === undefined) {
    (external_mapboxgl_default()).Map.prototype.addLayerBak = (external_mapboxgl_default()).Map.prototype.addLayer;

    (external_mapboxgl_default()).Map.prototype.addLayer = function (layer, before) {
      if (layer.source || layer.type === 'custom' || layer.type === 'background') {
        this.addLayerBak(layer, before);
        return this;
      }

      if (this.overlayLayersManager[layer.id] || this.style._layers[layer.id]) {
        this.fire('error', {
          error: new Error('A layer with this id already exists.')
        });
        return;
      }

      addLayer(layer, this);
      this.overlayLayersManager[layer.id] = layer;
      return this;
    };
  }

  (external_mapboxgl_default()).Map.prototype.getLayer = function (id) {
    if (this.overlayLayersManager[id]) {
      return this.overlayLayersManager[id];
    }

    return this.style.getLayer(id);
  };

  (external_mapboxgl_default()).Map.prototype.moveLayer = function (id, beforeId) {
    if (this.overlayLayersManager[id]) {
      moveLayer(id, beforeId);
      return this;
    }

    if (this.style._layers[id]) {
      this.style.moveLayer(id, beforeId);

      this._update(true);

      return this;
    }
  };

  (external_mapboxgl_default()).Map.prototype.removeLayer = function (id) {
    if (this.overlayLayersManager[id]) {
      removeLayer(this.overlayLayersManager[id]);
      delete this.overlayLayersManager[id];
      return this;
    }

    this.style.removeLayer(id);

    this._update(true);

    return this;
  }; //ç®åæ©å±çoverlayerï¼åªæ¯ææ¾ç¤ºæéèå¾å±æä½


  (external_mapboxgl_default()).Map.prototype.setLayoutProperty = function (layerID, name, value) {
    if (this.overlayLayersManager[layerID]) {
      if (name === "visibility") {
        if (value === "visible") {
          value = true;
        } else {
          value = false;
        }

        setVisibility(this.overlayLayersManager[layerID], value);
        this.style.fire('data', {
          dataType: 'style'
        });
      }

      return this;
    }

    this.style.setLayoutProperty(layerID, name, value);

    this._update(true);

    return this;
  };

  (external_mapboxgl_default()).Map.prototype.updateTransform = function (units, originX, originY, centerX, centerY, width, height) {
    this.transform.units = units;
    var mercatorZfromAltitude = this.mercatorZfromAltitude;

    (external_mapboxgl_default()).MercatorCoordinate.fromLngLat = function (lngLatLike, altitude) {
      altitude = altitude || 0;
      var lngLat = external_mapboxgl_default().LngLat.convert(lngLatLike);
      return new (external_mapboxgl_default()).MercatorCoordinate((lngLat.lng - originX) / width, (originY - lngLat.lat) / height, mercatorZfromAltitude(altitude, lngLat.lat));
    };

    (external_mapboxgl_default()).MercatorCoordinate.prototype.toLngLat = function () {
      return new (external_mapboxgl_default()).LngLat(this.x * width + originX, originY - this.y * height);
    };

    this.customConvertPoint = window.URL.createObjectURL(new Blob(['customConvertPoint = {projectX:function(x){return (x - ' + centerX + ') / ' + width + ' + 0.5},projectY:function(y){y = 0.5 - ((y - ' + centerY + ') / ' + height + ');return y < 0 ? 0 : y > 1 ? 1 : y;},toY:function(y){return (0.5-y)*' + height + '+' + centerY + ';}}'], {
      type: "text/javascript"
    }));
  };

  function addLayer(layer, map) {
    layer.onAdd && layer.onAdd(map);
  }
  /**
   * @function mapboxgl.supermap.MapExtend.prototype.removeFromMap
   * @description  ç§»é¤äºä»¶ã
   */


  function removeLayer(layer) {
    layer.removeFromMap && layer.removeFromMap();
  }
  /**
   * @function mapboxgl.supermap.MapExtend.prototype.setVisibility
   * @description  è®¾ç½®å¾å±å¯è§æ§ï¼è®¾ç½®å¾å±çéèï¼æ¾ç¤ºï¼éç»çç¸åºçå¯è§æ è®°ã
   * @param {boolean} [visibility] - æ¯å¦æ¾ç¤ºå¾å±ï¼å½åå°å¾ç resolution å¨æå¤§æå° resolution ä¹é´ï¼ã
   */


  function setVisibility(layer, visibility) {
    layer.setVisibility && layer.setVisibility(visibility);
  }
  /**
   * @function mapboxgl.supermap.MapExtend.prototype.moveTo
   * @description å°å¾å±ç§»å¨å°æä¸ªå¾å±ä¹åã
   * @param {string} layerID -å¾æå¥çå¾å± IDã
   * @param {boolean} [beforeLayerID] - æ¯å¦å°æ¬å¾å±æå¥å°å¾å± id ä¸º layerID çå¾å±ä¹å(å¦æä¸º false åå°æ¬å¾å±æå¥å°å¾å± id ä¸º layerID çå¾å±ä¹å)ã
   */


  function moveLayer(layerID, beforeLayerID) {
    var layer = document.getElementById(layerID); // var beforeLayer;

    if (beforeLayerID) {
      var beforeLayer = document.getElementById(beforeLayerID);

      if (!beforeLayer) {
        external_mapboxgl_default().Evented.prototype.fire("error", {
          error: new Error("Layer with id \"".concat(beforeLayerID, "\" does not exist on this document."))
        });
      }
    }

    if (layer && beforeLayer) {
      beforeLayer.parentNode.insertBefore(layer, beforeLayer);
    } else {
      //å½æ²¡æä¼ å¥beforeLayerID ï¼åé»è®¤å°å¾å±ç§»å¨å°æä¸é¢
      layer.parentNode.appendChild(layer);
    }
  }
}();
// CONCATENATED MODULE: ./src/mapboxgl/core/Base.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * SuperMap mapboxglåºç±»
 * å®ä¹å½åç©ºé´
 */

/**
 * @namespace mapboxgl
 * @category BaseTypes Namespace
 */

/**
 * @namespace mapboxgl.supermap
 * @category BaseTypes Namespace
 */


(external_mapboxgl_default()).supermap = (external_mapboxgl_default()).supermap || {};
// CONCATENATED MODULE: ./src/common/control/img/Logo.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var LogoBase64 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAdCAYAAAAjHtusAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozYWZlOGIwMi01MWE3LTRiZjYtYWVkYS05MGQ2ZTQ4YjZiMmUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODg0NkFBQUE3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODg0NkFBQTk3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MWI3NzdhNC1lZmEyLTQ1MzUtOGQzNi03MmRjNDkyODMzN2UiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjYTYzODVjMi1jNDQ1LTExN2EtYTc0ZC1lM2I5MzJlMGE4Y2QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5q1HM0AAAF/ElEQVR42tSabYhUVRjHZ7W01C1uaCRW4F3oi9SXCUnwQ9gsGUFvOEtQH1bLu5VS9sbYh5KicjYt29qiGQwVg2xWWKgocob91AvC+CWsoJqB3qHMSdTMpZyeU/+Df07n3pk7997Z6cBv99z7nHvOvf/z/pxJNZvNVI/jCKXmv6EquAmVkxPSlvtp2GItr0/96fFQForChJAWDiVYTkMYMu4XBFcYjLOwWS3sNwmn8NGzZ0h4Flv/zwIdchAnh/slCGmmKUNIBzYPaXOUr0vPuEjD71JAPh7l61embzinhV3V8nnCGmGT8LwlzSL8/yUh4Tfjo9T/CgnCIYNKycA2Qq21AcHU/VHE80Idoo3Qs0W6p0UtUnkZvEMDeVcCyqxEafF7hL8Qf0oYsIj+lfC9cH1CwhchWAGCtZO+AooQOkdC1Km1VtCb63StW73uFSzgKFUkNwBbmZGGmqowhvg8ZNpH9oXChcIcYRdeNomgxLkaH+S1SGubAxyIpFv+Zp+0DYjrAS00j/dem2VGEl6FJ4Qa4quEu8j2hTCJ+GJhe4JjfQMf6JCYPPbysMPxBlp0BUKOogEF9Rg9/heNvNKYfM0KsZUZaYxX4STGrzJa+zbhPeFH2DcK10KItcI+pI0rVElwXl1ULaKnIJhDw0oRQpTQc1zcbwRU8ATy4DR6yMlTzwkqMziEWHvubJ4Nk4ZtHdnqwvwY17xq3Z4FjrG+z2Kdrdf2ZSGD+xlLPh6t1R0jP9fI22ZzKI92yvQl7EbmBxI4S7Y+vIAOL87QZqsc5uNnssxZIcfYjXT9snCR7jjobidp+FkxA2v+Cq1QervMDmp4P7Xs3YZtE9kOC3P/By6JGaETl8ElwueYTNTDq4UDsKnd7YfCNbT239LF1udS72xYJt1UWxNfN4IIP4bWuTpEja01JtMFZFsm/AHbtHBlDE6yasA4moYTrUbvdBTXHqUrAH4uSadbyzF+vbBM2IsNkS3MNa5305JxqfA02T4TnkX8XOH1mPw8ruVejpxbI9hZD2Cz1U7LdrrUvjP/WfZinNZhr6V27hP+FPZh9aLvLxVO4DllX0G2OcKnlO/DCblxaz6uXBtmi+8mBaP3/SP8IuEIiTRoPPQm2TaEmEyXo0JU+F0YiPFD0hhOsiE/vqeEVwyTgF8L51OilcIZ2I4Ll5NttvAJPfukUeB2sk0ZPSbKIUUJpCII7+DasWy08uhNNazT0wGHI7mAtB7KqMKm38HhDdAUibTVKGicbB8YAqrJ9DRsp43JdB4qUof1HQrPE6XTQWu3Ce/inVzjXhXpMiTwUYugNVQ+p80jrUsV5EH0POKeuXO9QjhFq5GryNYvfEMCDhsftYVsB9ETtG0V9ZjfhCURhbcJFpfwVZ9jvhxsLHwTYtp2svlWQw3vXL8UnqHVSIG8l8ex+tHhBXgjddgqHEZ8ufAA2aaEnYgrF/KrPXrEmMUqZ9THLW06xhoBaVueQpkug+ewOUphE3Qv2Q5gGamXYa+QbVq4O+DQ5FHyZqrjxNt7UHh9uuRa0F7HjCF8o9PCTOGnscM7g2u1Hl9C9oeEnxC/1ajZg8JLiM9Hj9GHJseMShwL2DO0G5yEWn3Zh1QUods5CPkIoqlwAZxhXMsb6HrcEPBxchhdJ6wj29vCW4hfLOzo8J3rltYX50nXQAATSf/K4DEaGlTLvplsk/QCpoD60EQ7gLYZc8H9wq+I3yncEOEcNhuz6HWf3XEiwU/4Y8YEqVp2P10rt+8REvBGw026i4aDcbL9jF8r8Blmf4fCOzhViiscskygXRdehf3CO4hfigmTBXyQrl8TFtD1IzQX3CbcQrY3hPcRv4z8OmHPXwchVNln2MmE7BX6VwIFi/he6uxvb6JM3m0fdqvx/ATidxg2JeC7VDErAw5NzGfvwRJVheEIQ8Mg/pdwIM+UOmi9Q8ivCsrIy0tF+wVbEcLrd3Pb2XisEb4Tdlhsi4WP4RBbaLGrHfC3PrvMIezy9rTpGm5lz9LOMG15xvFxD/j5gjzjjDbMOzk+9zzt3v5bgAEAibzFeFHVgYkAAAAASUVORK5CYII=";
// CONCATENATED MODULE: ./src/mapboxgl/control/Logo.js
function Logo_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Logo_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Logo_createClass(Constructor, protoProps, staticProps) { if (protoProps) Logo_defineProperties(Constructor.prototype, protoProps); if (staticProps) Logo_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class mapboxgl.supermap.LogoControl
 * @category  Control
 * @classdesc Logo æ§ä»¶ãé»è®¤ä¸æ¾ç¤ºã
 *
 * @example
 * (start code)
 *  map.addControl(new mapboxgl.supermap.LogoControl(),'bottom-right');
 * (end)
 * @param {Object} options - logo æ§ä»¶éç½®é¡¹ã
 * @param {string} [options.imageUrl] - logo å¾çå°åã
 * @param {string} [options.width] - logo å¾çå®½ã
 * @param {string} [options.height] - logo å¾çé«ã
 * @param {string} [options.link] - logo å¾çè·³è½¬é¾æ¥ã
 * @param {string} [options.alt='SuperMap iClient'] - logo å¾çå¤±ææ¶æ¾ç¤ºææ¬ã
 */

var Logo = /*#__PURE__*/function () {
  function Logo(options) {
    Logo_classCallCheck(this, Logo);

    //logoå¾çå°å
    this.imageUrl = null; //è·³è½¬é¾æ¥

    this.link = null; //logoå¾çå®½

    this.width = null; //logoå¾çé«

    this.height = null; //logoå¾çå¤±ææ¶æ¾ç¤ºææ¬

    this.alt = "SuperMap iClient";

    this._extend(this, options);
  }
  /**
   * @function mapboxgl.supermap.LogoControl.prototype.onAdd
   * @description æ·»å ä¸ä¸ª logoã
   * @returns {HTMLElement} è¿ååå»ºç logo åç´ ã
   */


  Logo_createClass(Logo, [{
    key: "onAdd",
    value: function onAdd(map) {
      this._map = map;
      this._container = document.createElement('div');
      this._container.className = 'mapboxgl-ctrl iclient-logo';
      this._container.style.marginTop = 0;
      this._container.style.marginBottom = 0;
      this._container.style.marginLeft = 0;
      this._container.style.marginRight = 0;
      var imgSrc = LogoBase64;

      if (this.imageUrl) {
        imgSrc = this.imageUrl;
      }

      var alt = this.alt;
      var imageWidth = "94px";
      var imageHeight = "29px";
      var styleSize = "width:" + imageWidth + ";height:" + imageHeight + ";";

      if (this.imageUrl) {
        imageWidth = this.width;
        imageHeight = this.height;
        styleSize = "width:" + imageWidth + ";height:" + imageHeight + ";";

        if (!imageWidth || !imageHeight) {
          styleSize = "";
        }
      }

      var link = this.link || "https://iclient.supermap.io";
      this._container.innerHTML = "<a href='" + link + "' target='_blank'>" + "<img src=" + imgSrc + " alt='" + alt + "' style='" + styleSize + "margin-bottom: 2px'></a>";

      this._createStyleSheet();

      return this._container;
    }
  }, {
    key: "_createStyleSheet",
    value: function _createStyleSheet() {
      var style = document.createElement('style');
      style.type = 'text/css';
      style.innerHTML = ".iclient-logo{" + "margin:0 !important;" + "}" + ".iclient-logo a{" + "border: none;" + "display: block;" + "height:31px;" + "}" + ".iclient-logo img{" + "border: none;" + "white-space: nowrap" + "}";
      document.getElementsByTagName('head')[0].appendChild(style);
    }
  }, {
    key: "_extend",
    value: function _extend(dest) {
      for (var index = 0; index < Object.getOwnPropertyNames(arguments).length; index++) {
        var arg = Object.getOwnPropertyNames(arguments)[index];

        if (arg == "caller" || arg == "callee" || arg == "length" || arg == "arguments") {
          continue;
        }

        var obj = arguments[arg];

        if (obj) {
          for (var j = 0; j < Object.getOwnPropertyNames(obj).length; j++) {
            var key = Object.getOwnPropertyNames(obj)[j];

            if (arg == "caller" || arg == "callee" || arg == "length" || arg == "arguments") {
              continue;
            }

            dest[key] = obj[key];
          }
        }
      }

      return dest;
    }
  }]);

  return Logo;
}();
(external_mapboxgl_default()).supermap.LogoControl = Logo;
// CONCATENATED MODULE: ./src/mapboxgl/control/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

// CONCATENATED MODULE: ./src/mapboxgl/core/Util.js
function core_Util_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function core_Util_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function core_Util_createClass(Constructor, protoProps, staticProps) { if (protoProps) core_Util_defineProperties(Constructor.prototype, protoProps); if (staticProps) core_Util_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class mapboxgl.supermap.Util
 * @category BaseTypes Util
 * @classdesc å·¥å·ç±»ã
 */

var core_Util_Util = /*#__PURE__*/function () {
  function Util() {
    core_Util_classCallCheck(this, Util);
  }

  core_Util_createClass(Util, null, [{
    key: "toSuperMapGeometry",

    /**
     * @function mapboxgl.supermap.Util.toSuperMapGeometry
     * @description å° GeoJSON å¯¹è±¡è½¬ä¸º SuperMap å ä½å¾å½¢ã
     * @param {GeoJSONObject} geoJSON - GeoJSON å¯¹è±¡ã
     * @returns {SuperMap.Geometry}
     */
    value: function toSuperMapGeometry(geoJSON) {
      if (geoJSON && geoJSON.type) {
        var format = new GeoJSON();
        var result = format.read(geoJSON, "FeatureCollection");
        return result[0].geometry;
      }
    }
  }, {
    key: "toSuperMapBounds",
    value: function toSuperMapBounds(bounds) {
      if (this.isArray(bounds)) {
        //å·¦ä¸å³ä¸
        return new Bounds(bounds[0], bounds[1], bounds[2], bounds[3]);
      }

      return new Bounds(bounds.getWest(), bounds.getSouth(), bounds.getEast(), bounds.getNorth());
    }
  }, {
    key: "toSuperMapPoint",
    value: function toSuperMapPoint(lnglat) {
      //å®¢æ·ç«¯å¯ä¼ å¥ geojson å¯¹è±¡ æè mapboxgl lnglat ç¹å¯¹è±¡,æèæ¯ç¹æ°ç»
      if (this.isArray(lnglat)) {
        return new Point(lnglat[0], lnglat[1]);
      } else if (lnglat.lng && lnglat.lat) {
        return new Point(lnglat.lng, lnglat.lat);
      }

      return new Point(lnglat.geometry.coordinates[0], lnglat.geometry.coordinates[1]);
    }
    /**
     * @function mapboxgl.supermap.Util.toSuperMapPolygon
     * @description å° Mapbox GL LngLatbounds å¯¹è±¡è½¬ä¸º SuperMap å ä½å¾å½¢ã
     * @param {Mapboxgl.LngLatBounds} lnglatBounds - Mapbox GL LngLatboundså¯¹è±¡ã
     * @returns {SuperMap.Geometry.Polygon}
     */

  }, {
    key: "toSuperMapPolygon",
    value: function toSuperMapPolygon(lnglatBounds) {
      var west = lnglatBounds.getWest();
      var east = lnglatBounds.getEast();
      var sourth = lnglatBounds.getSouth();
      var north = lnglatBounds.getNorth();
      return new Polygon([new LinearRing([new Point(west, sourth), new Point(east, sourth), new Point(east, north), new Point(west, north)])]);
    }
    /**
     * @function mapboxgl.supermap.Util.isArray
     * @description å¤æ­æ¯å¦ä¸ºæ°ç»æ ¼å¼ã
     * @param {Object} obj - å¾å¤æ­å¯¹è±¡ã
     * @returns {boolean} æ¯å¦æ¯æ°ç»ã
     */

  }, {
    key: "isArray",
    value: function isArray(obj) {
      return Object.prototype.toString.call(obj) == "[object Array]";
    }
    /**
     * @function mapboxgl.supermap.Util.toGeoJSON
     * @description å°ä¼ å¥å¯¹è±¡è½¬ä¸º GeoJSON æ ¼å¼ã
     * @param {Object} smObj - å¾è½¬åæ°ã
     */

  }, {
    key: "toGeoJSON",
    value: function toGeoJSON(smObj) {
      if (smObj) {
        var format = new GeoJSON();
        return format.toGeoJSON(smObj);
      }
    }
    /**
     * @function mapboxgl.supermap.Util.toProcessingParam
     * @description å° Region èç¹æ°ç»è½¬ä¸º Processing æå¡éè¦çåæåæ°ã
     * @param {Array} points - Region åä¸ªèç¹æ°ç»ã
     * @returns {Object} processing æå¡è£åªãæ¥è¯¢åæçåæåæ°ã
     */

  }, {
    key: "toProcessingParam",
    value: function toProcessingParam(points) {
      var geometryParam = {};

      if (points.length < 1) {
        geometryParam = "";
      } else {
        var results = [];

        for (var i = 0; i < points.length; i++) {
          var point = {};
          point.x = points[i][0];
          point.y = points[i][1];
          results.push(point);
        }

        geometryParam.type = "REGION";
        geometryParam.points = results;
      }

      return geometryParam;
    }
    /**
     * @function mapboxgl.supermap.Util.extend
     * @description å¯¹è±¡æ·è´èµå¼ã
     * @param {Object} dest - ç®æ å¯¹è±¡ã
     * @param {Object} arguments - å¾æ·è´çå¯¹è±¡ã
     * @returns {Object} èµå¼åçç®æ å¯¹è±¡ã
     */

  }, {
    key: "extend",
    value: function extend(dest) {
      for (var index = 0; index < Object.getOwnPropertyNames(arguments).length; index++) {
        var arg = Object.getOwnPropertyNames(arguments)[index];

        if (arg == "caller" || arg == "callee" || arg == "length" || arg == "arguments") {
          continue;
        }

        var obj = arguments[arg];

        if (obj) {
          for (var j = 0; j < Object.getOwnPropertyNames(obj).length; j++) {
            var key = Object.getOwnPropertyNames(obj)[j];

            if (arg == "caller" || arg == "callee" || arg == "length" || arg == "arguments") {
              continue;
            }

            dest[key] = obj[key];
          }
        }
      }

      return dest;
    }
    /**
     * æ£æµæ°æ®æ¯å¦ä¸ºnumber
     * @param value å¼ï¼æªç¥æ°æ®ç±»å
     * @returns {boolean}
     */

  }, {
    key: "isNumber",
    value: function isNumber(value) {
      if (value === "") {
        return false;
      }

      var mdata = Number(value);

      if (mdata === 0) {
        return true;
      }

      return !isNaN(mdata);
    }
  }, {
    key: "isString",
    value: function isString(str) {
      return typeof str === 'string' && str.constructor === String;
    }
    /**
     * éæºçæid
     * @param attr
     * @returns {string}
     */

  }, {
    key: "newGuid",
    value: function newGuid(attr) {
      var len = attr || 32;
      var guid = "";

      for (var i = 1; i < len; i++) {
        var n = Math.floor(Math.random() * 16.0).toString(16);
        guid += n;
      }

      return guid;
    }
    /**
     * @description åå­è¿å¶è½¬ RGBA æ ¼å¼ã
     * @param {Object} hex - åå­è¿å¶æ ¼å¼åæ°ã
     * @param {number} opacity -Alpha åæ°ã
     * @returns {string} çæç RGBA æ ¼å¼ã
     */

  }, {
    key: "hexToRgba",
    value: function hexToRgba(hex, opacity) {
      var color = [],
          rgba = [];
      hex = hex.replace(/#/, "");

      if (hex.length == 3) {
        var tmp = [];

        for (var i = 0; i < 3; i++) {
          tmp.push(hex.charAt(i) + hex.charAt(i));
        }

        hex = tmp.join("");
      }

      for (var _i = 0; _i < 6; _i += 2) {
        color[_i] = "0x" + hex.substr(_i, 2);
        rgba.push(parseInt(Number(color[_i])));
      }

      rgba.push(opacity);
      return "rgba(" + rgba.join(",") + ")";
    }
    /**
     * @param {string} featureName åå§æ°æ®ä¸­çå°å
     * @param {string} fieldName éè¦å¹éçå°å
     * @returns {boolean} æ¯å¦å¹é
     */

  }, {
    key: "isMatchAdministrativeName",
    value: function isMatchAdministrativeName(featureName, fieldName) {
      if (this.isString(fieldName)) {
        var shortName = featureName.substr(0, 2); // å¼ å®¶å£å¸åå¼ å®¶çå¸ ç¹æ®å¤ç

        if (shortName === 'å¼ å®¶') {
          shortName = featureName.substr(0, 3);
        }

        return !!fieldName.match(new RegExp(shortName));
      }

      return false;
    }
  }]);

  return Util;
}();
(external_mapboxgl_default()).supermap.Util = core_Util_Util;
// CONCATENATED MODULE: ./src/mapboxgl/core/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


// CONCATENATED MODULE: ./src/mapboxgl/overlay/theme/ThemeFeature.js
function ThemeFeature_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeFeature_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeFeature_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeFeature_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeFeature_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class mapboxgl.supermap.ThemeFeature
 * @category  Visualization Theme
 * @classdesc ä¸é¢å¾è¦ç´ ç±»ã
 * @param {GeoJSONObject} geometry - ä¸é¢å¾è¦ç´ å ä½å¯¹è±¡ã
 * @param {Object} [attributes] - å ä½å¯¹è±¡å±æ§ã
 */

var ThemeFeature = /*#__PURE__*/function () {
  function ThemeFeature(geometry, attributes) {
    ThemeFeature_classCallCheck(this, ThemeFeature);

    this.geometry = geometry;
    this.attributes = attributes;
  }
  /**
   * @function mapboxgl.supermap.ThemeFeature.prototype.toFeature
   * @description è½¬ä¸ºç¢éè¦ç´ ã
   */


  ThemeFeature_createClass(ThemeFeature, [{
    key: "toFeature",
    value: function toFeature() {
      var geometry = core_Util_Util.toSuperMapGeometry(this.geometry);
      var points = [];

      if (this.geometry instanceof (external_mapboxgl_default()).LngLat) {
        points = [this.geometry.lng, this.geometry.lat];
      } else if (this.geometry instanceof (external_mapboxgl_default()).Point) {
        points = [this.geometry.x, this.geometry.y];
      } else if (this.geometry.length === 3) {
        geometry = new GeoText(this.geometry[0], this.geometry[1], this.geometry[2]);
      }

      if (points.length > 1) {
        geometry = new Point(points[0], points[1]);
      }

      return new Vector(geometry, this.attributes);
    }
  }]);

  return ThemeFeature;
}();
(external_mapboxgl_default()).supermap.ThemeFeature = ThemeFeature;
// CONCATENATED MODULE: ./src/mapboxgl/overlay/theme/ThemeLayer.js
function ThemeLayer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThemeLayer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThemeLayer_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThemeLayer_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThemeLayer_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class mapboxgl.supermap.ThemeLayer
 * @category Visualization Theme
 * @classdesc ä¸é¢å¾åºç±»ã
 * @param {string} name - ä¸é¢å¾å¾å±åã
 * @param {Object} options -å¯éåæ°ã
 * @param {mapboxgl.Map} options.map - å½å mapboxgl map å¯¹è±¡ï¼å°å¨ä¸ä¸ªçæ¬å¼ç¨ï¼è¯·ç¨ map.addLayer()æ¹æ³æ·»å å¾å±ã
 * @param {string} [options.id] - ä¸é¢å¾å± IDãé»è®¤ä½¿ç¨ CommonUtil.createUniqueID("themeLayer_") åå»ºä¸é¢å¾å± IDã
 * @param {boolean} [options.loadWhileAnimating=true] - æ¯å¦å®æ¶éç»ã
 * @param {boolean} [options.visibility=true] - å¾å±æ¯å¦å¯è§ã
 * @param {number} [options.opacity=1] - å¾å±éæåº¦ã
 * @fires mapboxgl.supermap.ThemeLayer#changelayer
 * @fires mapboxgl.supermap.ThemeLayer#featuresremoved
 */

var ThemeLayer_Theme = /*#__PURE__*/function () {
  function Theme(name, opt_options) {
    ThemeLayer_classCallCheck(this, Theme);

    var options = opt_options ? opt_options : {};
    /**
     * @member {string} mapboxgl.supermap.ThemeLayer.prototype.name
     * @description ä¸é¢å¾å¾å±åç§°ã
     */

    this.name = name;
    /**
     * @member {string} [mapboxgl.supermap.ThemeLayer.prototype.id]
     * @description ä¸é¢å¾å¾å± idã
     */

    this.id = options.id ? options.id : Util.createUniqueID("themeLayer_");
    /**
     * @member {float} [mapboxgl.supermap.ThemeLayer.prototype.opacity=1]
     * @description å¾å±éæåº¦ã
     */

    this.opacity = options.opacity ? options.opacity : 1;
    /**
     * @member {boolean} [mapboxgl.supermap.ThemeLayer.prototype.visibility=true]
     * @description å¾å±æ¯å¦å¯è§ã
     */

    this.visibility = true;
    /**
     * @member {boolean} [mapboxgl.supermap.ThemeLayer.prototype.loadWhileAnimating=true]
     * @description æ¯å¦å®æ¶éç»ã(å½ç»å¶å¤§æ°æ®éè¦ç´ çæåµä¸ä¼åºç°å¡é¡¿ï¼å»ºè®®æè¯¥åæ°è®¾ä¸º false)ã
     */

    this.loadWhileAnimating = options.loadWhileAnimating === undefined ? true : options.loadWhileAnimating;
    /**
     * @member {mapboxgl.Map} mapboxgl.supermap.ThemeLayer.prototype.map
     * @description map å¯¹è±¡ã
     */

    this.map = options.map ? options.map : null;
    this.features = [];
    this.TFEvents = []; //todo ä¿çä¹ååå»ºå¾å±åæ¶æ·»å å°å¾å±çç¨æ³ï¼å¨ä¸ä¸ªçæ¬éå¼

    if (this.map) {
      this.map.addLayer(this);
    }
  }
  /**
   * @function mapboxgl.supermap.ThemeLayer.prototype.onAdd
   * @description ååºå¾æ·»å è¯¥å¾å±ã
   */


  ThemeLayer_createClass(Theme, [{
    key: "onAdd",
    value: function onAdd(map) {
      this.map = map;

      this._createCanvasContainer(); //å¤çç¨æ·é¢åï¼å¨å¾å±æ·»å å° map åï¼çå¬çäºä»¶


      this.addTFEvents();
      this.map.on('resize', this.resizeEvent.bind(this));
      this.map.on('zoomstart', this.zoomStartEvent.bind(this));
      this.map.on('zoomend', this.zoomEndEvent.bind(this));
      this.map.on('rotatestart', this.rotateStartEvent.bind(this));
      this.map.on('rotate', this.rotateEvent.bind(this));
      this.map.on('rotateend', this.rotateEndEvent.bind(this));
      this.map.on('dragend', this.dragEndEvent.bind(this));
      this.map.on('movestart', this.moveStartEvent.bind(this));
      this.map.on('move', this.moveEvent.bind(this));
      this.map.on('moveend', this.moveEndEvent.bind(this));
      this.map.on('remove', this.removeFromMap.bind(this));
      this.refresh();
    }
    /**
     * @function mapboxgl.supermap.HeatMapLayer.prototype.refresh
     * @description å¼ºå¶å·æ°å½åç­ç¹æ¾ç¤ºï¼å¨å¾å±ç­ç¹æ°ç»åçåååè°ç¨ï¼æ´æ°æ¾ç¤ºã
     */

  }, {
    key: "refresh",
    value: function refresh() {
      if (this.features.length === 0) {
        return;
      }

      if (this.map) {
        this.redrawThematicFeatures(this.map.getBounds());
      }
    }
  }, {
    key: "_createCanvasContainer",
    value: function _createCanvasContainer() {
      this.movingOffset = [0, 0];
      this.mapContainer = this.map.getCanvasContainer();
      this.div = document.createElement('div');
      this.div.id = this.id;
      this.div.style.position = 'absolute';
      var container = this.map.getCanvasContainer();
      var canvas = this.map.getCanvas();
      this.mapContainer.style.perspective = this.map.transform.cameraToCenterDistance + 'px';
      this.div.style.width = canvas.style.width;
      this.div.style.height = canvas.style.height;
      this.div.className = "themeLayer";
      this.div.width = parseInt(canvas.width);
      this.div.height = parseInt(canvas.height);
      container.appendChild(this.div);
      this.setOpacity(this.opacity);
      this.levelRenderer = new LevelRenderer();
      this.renderer = this.levelRenderer.init(this.div);
      this.renderer.clear();
    }
    /**
     * @function mapboxgl.supermap.ThemeLayer.prototype.destroyFeatures
     * @description éæ¯æä¸ªè¦ç´ ã
     * @param {SuperMap.Feature.Vector} features - å°è¢«éæ¯çè¦ç´ ã
     */

  }, {
    key: "destroyFeatures",
    value: function destroyFeatures(features) {
      var all = features == undefined;

      if (all) {
        features = this.features;
      }

      if (features) {
        this.removeFeatures(features);

        for (var i = features.length - 1; i >= 0; i--) {
          features[i].destroy();
        }
      }
    }
    /**
     * @function mapboxgl.supermap.ThemeLayer.prototype.setVisibility
     * @description è®¾ç½®å¾å±å¯è§æ§ï¼è®¾ç½®å¾å±çéèï¼æ¾ç¤ºï¼éç»çç¸åºçå¯è§æ è®°ã
     * @param {boolean} [visibility] - æ¯å¦æ¾ç¤ºå¾å±ï¼å½åå°å¾ç resolution å¨æå¤§æå° resolution ä¹é´ï¼ã
     */

  }, {
    key: "setVisibility",
    value: function setVisibility(visibility) {
      if (visibility !== this.visibility) {
        this.visibility = visibility;
        this.display(visibility);
        this.redrawThematicFeatures(this.map.getBounds());
      }
    }
    /**
     * @function mapboxgl.supermap.ThemeLayer.prototype.display
     * @description ä¸´æ¶éèæèæ¾ç¤ºå¾å±ãéè¿å¯¹ CSS æ§å¶äº§çå³æ¶ææï¼éæ°æ¸²æå¤±æãä¸è¬ç¨ setVisibility æ¹æ³æ¥å¨ææ§å¶å¾å±çæ¾ç¤ºåéèã
     * @param {boolean} [display] - æ¯å¦æ¾ç¤ºå¾å±ã
     */

  }, {
    key: "display",
    value: function display(_display) {
      this.div.style.display = _display ? "block" : "none";
    }
    /**
     * @function mapboxgl.supermap.ThemeLayer.prototype.setOpacity
     * @description è®¾ç½®å¾å±çä¸éæåº¦,åå¼[0-1]ä¹é´ã
     * @param {number} [opacity] - ä¸éæåº¦ã
     */

  }, {
    key: "setOpacity",
    value: function setOpacity(opacity) {
      if (opacity !== this.opacity) {
        this.opacity = opacity;
        var element = this.div;
        Util.modifyDOMElement(element, null, null, null, null, null, null, opacity);

        if (this.map !== null) {
          /**
          * @event mapboxgl.supermap.ThemeLayer#changelayer
          * @description å¾å±å±æ§æ¹åä¹åè§¦åã
          * @property {Object} layer - å¾å±ã
          * @property {string} property - è¢«æ¹åçå±æ§ã
          */
          external_mapboxgl_default().Evented.prototype.fire('changelayer', {
            layer: this,
            property: "opacity"
          });
        }
      }
    }
    /**
     * @function mapboxgl.supermap.ThemeLayer.prototype.addFeatures
     * @param {mapboxgl.supermap.ThemeFeature|SuperMap.ServerFeature|GeoJSONObject} features - å¾æ·»å è¦ç´ ã
     * @description æ½è±¡æ¹æ³ï¼å¯å®ä¾åå­ç±»å¿é¡»å®ç°æ­¤æ¹æ³ãåä¸é¢å¾å¾å±ä¸­æ·»å æ°æ® ,
     */

  }, {
    key: "addFeatures",
    value: function addFeatures(features) {// eslint-disable-line no-unused-vars
    }
    /**
     * @function mapboxgl.supermap.ThemeLayer.prototype.removeFeatures
     * @param {Array.<SuperMap.Feature.Vector>} features - è¦å é¤ feature çæ°ç»ã
     * @description ä»ä¸é¢å¾ä¸­å é¤ featureãè¿ä¸ªå½æ°å é¤ææä¼ éè¿æ¥çç¢éè¦ç´ ã
     *              åæ°ä¸­ç features æ°ç»ä¸­çæ¯ä¸é¡¹ï¼å¿é¡»æ¯å·²ç»æ·»å å°å½åå¾å±ä¸­ç featureï¼
     *              å¦ææ æ³ç¡®å® feature æ°ç»ï¼åå¯ä»¥è°ç¨ removeAllFeatures æ¥å é¤ææ featureã
     *              å¦æè¦å é¤ç feature æ°ç»ä¸­çåç´ ç¹å«å¤ï¼æ¨èä½¿ç¨ removeAllFeaturesï¼
     *              å é¤ææ feature ååéæ°æ·»å ãè¿æ ·æçä¼æ´é«ã
     */

  }, {
    key: "removeFeatures",
    value: function removeFeatures(features) {
      if (!features || features.length === 0) {
        return;
      }

      if (features === this.features) {
        return this.removeAllFeatures();
      }

      if (!Util.isArray(features)) {
        features = [features];
      }

      var featuresFailRemoved = [];

      for (var i = features.length - 1; i >= 0; i--) {
        var feature = features[i]; //å¦ææä»¬ä¼ å¥çfeatureå¨featuresæ°ç»ä¸­æ²¡æçè¯ï¼åä¸è¿è¡å é¤ï¼
        //å¹¶å°å¶æ¾å¥æªå é¤çæ°ç»ä¸­ã

        var findex = Util.indexOf(this.features, feature);

        if (findex === -1) {
          featuresFailRemoved.push(feature);
          continue;
        }

        this.features.splice(findex, 1);
      }

      var drawFeatures = [];

      for (var hex = 0, len = this.features.length; hex < len; hex++) {
        feature = this.features[hex];
        drawFeatures.push(feature);
      }

      this.features = [];
      this.addFeatures(drawFeatures); //ç»å¶ä¸é¢è¦ç´ 

      if (this.renderer) {
        this.redrawThematicFeatures(this.map.getBounds());
      }

      var succeed = featuresFailRemoved.length == 0 ? true : false;
      /**
       * @event mapboxgl.supermap.ThemeLayer#featuresremoved
       * @description è¦ç´ å é¤ä¹åè§¦åã
       * @property {Array.<SuperMap.Feature.Vector>} features - æªè¢«æåå é¤çè¦ç´ ã
       * @property {boolean} succeed - å é¤æåä¸å¦ã
       */

      external_mapboxgl_default().Evented.prototype.fire("featuresremoved", {
        features: featuresFailRemoved,
        succeed: succeed
      });
    }
    /**
     * @function mapboxgl.supermap.ThemeLayer.prototype.removeAllFeatures
     * @description æ¸é¤å½åå¾å±ææçç¢éè¦ç´ ã
     */

  }, {
    key: "removeAllFeatures",
    value: function removeAllFeatures() {
      if (this.renderer) {
        this.renderer.clear();
      }

      this.features = [];
      external_mapboxgl_default().Evented.prototype.fire('featuresremoved', {
        features: [],
        succeed: true
      });
    }
    /**
     * @function mapboxgl.supermap.ThemeLayer.prototype.getFeatures
     * @description æ¥çå½åå¾å±ä¸­çæææ°æ®ã
     * @returns {SuperMap.Feature.Vector} ç¨æ·å å¥å¾å±çæææ°æ®ã
     */

  }, {
    key: "getFeatures",
    value: function getFeatures() {
      var len = this.features.length;
      var clonedFeatures = new Array(len);

      for (var i = 0; i < len; ++i) {
        clonedFeatures[i] = this.features[i];
      }

      return clonedFeatures;
    }
    /**
     * @function mapboxgl.supermap.ThemeLayer.prototype.getFeatureBy
     * @description å¨ä¸é¢å¾çè¦ç´ æ°ç» features éé¢éåæ¯ä¸ä¸ª featureï¼å½ feature[property] === value æ¶ï¼
     *              è¿åæ­¤ featureï¼å¹¶ä¸åªè¿åç¬¬ä¸ä¸ªï¼ã
     * @param {string} property - feature çæä¸ªå±æ§åç§°ã
     * @param {string} value - property æå¯¹åºçå¼ã
     * @returns {SuperMap.Feature.Vector} ç¬¬ä¸ä¸ªå¹éå±æ§åå¼çç¢éè¦ç´ ã
     */

  }, {
    key: "getFeatureBy",
    value: function getFeatureBy(property, value) {
      var feature = null;

      for (var id in this.features) {
        if (this.features[id][property] === value) {
          feature = this.features[id];
          break;
        }
      }

      return feature;
    }
    /**
     * @function mapboxgl.supermap.ThemeLayer.prototype.getFeatureById
     * @description éè¿ç»å®ä¸ä¸ª idï¼è¿åå¯¹åºçç¢éè¦ç´ ã
     * @param {string} featureId - ç¢éè¦ç´ çå±æ§ idã
     * @returns {SuperMap.Feature.Vector} å¯¹åº id ç featureï¼å¦æä¸å­å¨åè¿å nullã
     */

  }, {
    key: "getFeatureById",
    value: function getFeatureById(featureId) {
      return this.getFeatureBy('id', featureId);
    }
    /**
     * @function mapboxgl.supermap.ThemeLayer.prototype.getFeaturesByAttribute
     * @description éè¿ç»å®ä¸ä¸ªå±æ§ç key å¼å value å¼ï¼è¿åææå¹éçè¦ç´ æ°ç»ã
     * @param {string} attrName - å±æ§ç keyã
     * @param {string} attrValue - ç¢éè¦ç´ çå±æ§ idã
     * @returns {Array.<SuperMap.Feature.Vector>} ä¸ä¸ªå¹éç feature æ°ç»ã
     */

  }, {
    key: "getFeaturesByAttribute",
    value: function getFeaturesByAttribute(attrName, attrValue) {
      var feature,
          foundFeatures = [];

      for (var id in this.features) {
        feature = this.features[id];

        if (feature && feature.attributes) {
          if (feature.attributes[attrName] === attrValue) {
            foundFeatures.push(feature);
          }
        }
      }

      return foundFeatures;
    }
    /**
     * @function mapboxgl.supermap.ThemeLayer.prototype.redrawThematicFeatures
     * @description æ½è±¡æ¹æ³ï¼å¯å®ä¾åå­ç±»å¿é¡»å®ç°æ­¤æ¹æ³ãéç»ä¸é¢è¦ç´ ã
     * @param {mapboxgl.LngLatBounds} extent - éç»çèå´ã
     */

  }, {
    key: "redrawThematicFeatures",
    value: function redrawThematicFeatures(extent) {// eslint-disable-line no-unused-vars
    }
    /**
     * @function mapboxgl.supermap.ThemeLayer.prototype.on
     * @description æ·»å ä¸é¢è¦ç´ äºä»¶çå¬ãæ·»å ä¸é¢è¦ç´ äºä»¶çå¬ã
     * @param {Event} event - çå¬äºä»¶ã
     * @param {function} callback - åè°å½æ°ã
     * @param {string} context - ä¿¡æ¯ã
     */

  }, {
    key: "on",
    value: function on(event, callback, context) {
      // eslint-disable-line no-unused-vars
      if (this.renderer) {
        this.renderer.on(event, callback);
      } else {
        this.map.on(event, callback);
      }

      return this;
    }
    /**
     * @function mapboxgl.supermap.ThemeLayer.prototype.off
     * @description ç§»é¤ä¸é¢è¦ç´ äºä»¶çå¬ã
     * @param {Event} event - çå¬äºä»¶ã
     * @param {function} callback - åè°å½æ°ã
     * @param {string} context - ä¿¡æ¯ã
     */

  }, {
    key: "off",
    value: function off(event, callback, context) {
      // eslint-disable-line no-unused-vars
      var me = this;

      if (me.renderer) {
        me.renderer.off(event, callback);
      } else {
        this.map.off(event, callback);
      }

      return this;
    }
    /**
     * @function mapboxgl.supermap.ThemeLayer.prototype.addTFEvents
     * @description å°å¾å±æ·»å å°å°å¾ä¸ä¹åç¨æ·è¦æ±æ·»å çäºä»¶çå¬æ·»å å°å¾å±ã
     * @private
     */

  }, {
    key: "addTFEvents",
    value: function addTFEvents() {
      var tfEs = this.TFEvents;
      var len = tfEs.length;

      for (var i = 0; i < len; i++) {
        this.renderer.on(tfEs[i][0], tfEs[i][1]);
      }
    }
    /**
     * @function mapboxgl.supermap.ThemeLayer.prototype.getLocalXY
     * @description å°çåæ è½¬ä¸ºåç´ åæ ã
     * @param {Object} [coordinate] - åæ ä½ç½®ã
     */

  }, {
    key: "getLocalXY",
    value: function getLocalXY(coordinate) {
      var pixelP,
          map = this.map;

      if (coordinate instanceof Point || coordinate instanceof GeoText) {
        var tempPoint = map.project(new (external_mapboxgl_default()).LngLat(coordinate.x, coordinate.y));
        pixelP = [tempPoint.x, tempPoint.y];
      }

      if (coordinate instanceof LonLat) {
        var _tempPoint = map.project(new (external_mapboxgl_default()).LngLat(coordinate.lon, coordinate.lat));

        pixelP = [_tempPoint.x, _tempPoint.y];
      }

      return pixelP;
    }
    /**
     * @function mapboxgl.supermap.ThemeLayer.prototype.toFeature
     * @description è½¬ä¸º iClient è¦ç´ ã
     * @param {mapboxgl.supermap.ThemeFeature|GeoJSONObject} features - å¾è½¬è¦ç´ ã
     * @returns {SuperMap.Feature.Vector} è½¬æ¢åç iClient è¦ç´ ã
     */

  }, {
    key: "toiClientFeature",
    value: function toiClientFeature(features) {
      if (!Util.isArray(features)) {
        features = [features];
      }

      var featuresTemp = [];

      for (var i = 0; i < features.length; i++) {
        //mapboxgl.supermap.ThemeFeature ç±»å
        if (features[i] instanceof ThemeFeature) {
          featuresTemp.push(features[i].toFeature());
        } else if (features[i] instanceof Vector) {
          // è¥æ¯ GeometryVector ç´æ¥è¿å
          featuresTemp.push(features[i]);
        } else if (["FeatureCollection", "Feature", "Geometry"].indexOf(features[i].type) != -1) {
          //GeoJSON è§èæ°æ®ç±»å
          var format = new GeoJSON();
          featuresTemp = featuresTemp.concat(format.read(features[i]));
        } else if (features[i].geometry && features[i].geometry.parts) {
          //iServeræå¡å¨è¿åæ°æ®æ ¼å¼
          featuresTemp.push(ServerFeature.fromJson(features[i]).toFeature());
        } else {
          throw new Error("features's type is not be supported.");
        }
      }

      return featuresTemp;
    }
    /**
     * @function mapboxgl.supermap.ThemeLayer.prototype.toFeature
     * @deprecated
     * @description è½¬ä¸º iClient è¦ç´ ï¼è¯¥æ¹æ³å°è¢«å¼ç¨ï¼ç± {@link mapboxgl.supermap.ThemeLayer#toiClientFeature} ä»£æ¿ã
     * @param {mapboxgl.supermap.ThemeFeature|GeoJSONObject} features - å¾è½¬è¦ç´ ã
     * @returns {SuperMap.Feature.Vector} è½¬æ¢åç iClient è¦ç´ ã
     */

  }, {
    key: "toFeature",
    value: function toFeature(features) {
      return this.toiClientFeature(features);
    }
  }, {
    key: "moveEndEvent",
    value: function moveEndEvent() {
      if (this.loadWhileAnimating || !this.visibility) {
        return;
      }

      this.div.style.transform = '';
      this.redrawThematicFeatures(this.map.getBounds());

      this._show();
    }
  }, {
    key: "moveStartEvent",
    value: function moveStartEvent() {
      if (this.loadWhileAnimating || !this.visibility) {
        return;
      }

      this.startPitch = this.map.getPitch();
      this.startBearing = this.map.getBearing();
      var startMovePoint = this.map.project(new (external_mapboxgl_default()).LngLat(0, 0));
      this.startMoveX = startMovePoint.x;
      this.startMoveY = startMovePoint.y;
    }
  }, {
    key: "moveEvent",
    value: function moveEvent() {
      if (this.loadWhileAnimating || !this.visibility) {
        this.redrawThematicFeatures(this.map.getBounds());
        return;
      }

      if (this.rotating || this.zooming) {
        return;
      }

      if (this.map.getPitch() !== 0) {
        this._hide();
      }

      this.mapContainer.style.perspective = this.map.transform.cameraToCenterDistance + 'px';
      var tPitch = this.map.getPitch() - this.startPitch;
      var tBearing = -this.map.getBearing() + this.startBearing;
      var endMovePoint = this.map.project(new (external_mapboxgl_default()).LngLat(0, 0));
      var tMoveX = endMovePoint.x - this.startMoveX;
      var tMoveY = endMovePoint.y - this.startMoveY;
      this.div.style.transform = 'rotateX(' + tPitch + 'deg)' + ' rotateZ(' + tBearing + 'deg)' + ' translate3d(' + tMoveX + 'px, ' + tMoveY + 'px, 0px)';
    }
  }, {
    key: "zoomStartEvent",
    value: function zoomStartEvent() {
      if (this.loadWhileAnimating || !this.visibility) {
        return;
      }

      this.zooming = true;

      this._hide();
    }
  }, {
    key: "zoomEndEvent",
    value: function zoomEndEvent() {
      if (this.loadWhileAnimating || !this.visibility) {
        return;
      }

      this.zooming = false;

      this._show();
    }
  }, {
    key: "rotateStartEvent",
    value: function rotateStartEvent() {
      if (this.loadWhileAnimating || !this.visibility) {
        return;
      }

      this.rotating = true;
    }
  }, {
    key: "rotateEvent",
    value: function rotateEvent() {
      if (this.loadWhileAnimating || !this.visibility) {
        return;
      }

      if (this.map.getPitch() !== 0) {
        this._hide();
      }

      this.mapContainer.style.perspective = this.map.transform.cameraToCenterDistance + 'px';
      var tPitch = this.map.getPitch() - this.startPitch;
      var tBearing = -this.map.getBearing() + this.startBearing;
      this.div.style.transform = 'rotateX(' + tPitch + 'deg)' + ' rotateZ(' + tBearing + 'deg)';
    }
  }, {
    key: "rotateEndEvent",
    value: function rotateEndEvent() {
      if (this.loadWhileAnimating || !this.visibility) {
        return;
      }

      this.rotating = false;

      this._show();
    }
  }, {
    key: "dragEndEvent",
    value: function dragEndEvent() {
      if (this.loadWhileAnimating || !this.visibility) {
        return;
      }

      this._hide();
    }
  }, {
    key: "resizeEvent",
    value: function resizeEvent() {
      this.mapContainer.style.perspective = this.map.transform.cameraToCenterDistance + 'px';
      var canvas = this.map.getCanvas();
      this.div.style.width = canvas.style.width;
      this.div.style.height = canvas.style.height;
      this.div.width = parseInt(canvas.width);
      this.div.height = parseInt(canvas.height);
      this.renderer.resize();
    }
    /**
     * @function mapboxgl.supermap.ThemeLayer.prototype.removeFromMap
     * @description ç§»é¤å¾å±ã
     */

  }, {
    key: "removeFromMap",
    value: function removeFromMap() {
      this.mapContainer.removeChild(this.div);
      this.removeAllFeatures();
    }
    /**
     * @function mapboxgl.supermap.ThemeLayer.prototype.moveTo
     * @description å°å¾å±ç§»å¨å°æä¸ªå¾å±ä¹åã
     * @param {string} layerID - å¾æå¥çå¾å± IDã
     * @param {boolean} [before=true] - æ¯å¦å°æ¬å¾å±æå¥å°å¾å± id ä¸º layerID çå¾å±ä¹å(å¦æä¸º false åå°æ¬å¾å±æå¥å°å¾å± id ä¸º layerID çå¾å±ä¹å)ã
     */

  }, {
    key: "moveTo",
    value: function moveTo(layerID, before) {
      var layer = document.getElementById(this.div.id);
      before = before !== undefined ? before : true;

      if (before) {
        var beforeLayer = document.getElementById(layerID);

        if (layer && beforeLayer) {
          beforeLayer.parentNode.insertBefore(layer, beforeLayer);
        }

        return;
      }

      var nextLayer = document.getElementById(layerID);

      if (layer) {
        if (nextLayer.nextSibling) {
          nextLayer.parentNode.insertBefore(layer, nextLayer.nextSibling);
          return;
        }

        nextLayer.parentNode.appendChild(layer);
      }
    }
  }, {
    key: "_hide",
    value: function _hide() {
      this.renderer.painter.root.style.display = 'none';
    }
  }, {
    key: "_show",
    value: function _show() {
      this.renderer.painter.root.style.display = 'block';
    }
  }]);

  return Theme;
}();
(external_mapboxgl_default()).supermap.ThemeLayer = ThemeLayer_Theme;
// CONCATENATED MODULE: ./src/mapboxgl/overlay/GraphThemeLayer.js
function GraphThemeLayer_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GraphThemeLayer_typeof = function _typeof(obj) { return typeof obj; }; } else { GraphThemeLayer_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GraphThemeLayer_typeof(obj); }

function GraphThemeLayer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GraphThemeLayer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GraphThemeLayer_createClass(Constructor, protoProps, staticProps) { if (protoProps) GraphThemeLayer_defineProperties(Constructor.prototype, protoProps); if (staticProps) GraphThemeLayer_defineProperties(Constructor, staticProps); return Constructor; }

function GraphThemeLayer_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { GraphThemeLayer_get = Reflect.get; } else { GraphThemeLayer_get = function _get(target, property, receiver) { var base = GraphThemeLayer_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return GraphThemeLayer_get(target, property, receiver || target); }

function GraphThemeLayer_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = GraphThemeLayer_getPrototypeOf(object); if (object === null) break; } return object; }

function GraphThemeLayer_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GraphThemeLayer_setPrototypeOf(subClass, superClass); }

function GraphThemeLayer_setPrototypeOf(o, p) { GraphThemeLayer_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GraphThemeLayer_setPrototypeOf(o, p); }

function GraphThemeLayer_createSuper(Derived) { var hasNativeReflectConstruct = GraphThemeLayer_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GraphThemeLayer_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GraphThemeLayer_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GraphThemeLayer_possibleConstructorReturn(this, result); }; }

function GraphThemeLayer_possibleConstructorReturn(self, call) { if (call && (GraphThemeLayer_typeof(call) === "object" || typeof call === "function")) { return call; } return GraphThemeLayer_assertThisInitialized(self); }

function GraphThemeLayer_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GraphThemeLayer_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GraphThemeLayer_getPrototypeOf(o) { GraphThemeLayer_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GraphThemeLayer_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class mapboxgl.supermap.GraphThemeLayer
 * @category  Visualization Theme
 * @classdesc ç»è®¡ä¸é¢å¾å±ã
 * @param {string} name - å¾å±åã
 * @param {string} chartsType - å¾è¡¨ç±»å«ã
 * @param {Object} opt_options - åæ°ã
 * @param {string} [opt_options.id] - ä¸é¢å¾å± IDãé»è®¤ä½¿ç¨ CommonUtil.createUniqueID("themeLayer_") åå»ºä¸é¢å¾å± IDã
 * @param {boolean} [opt_options.loadWhileAnimating=true] - æ¯å¦å®æ¶éç»ã
 * @param {mapboxgl.Map} opt_options.map - å½åmapboxgl mapå¯¹è±¡ã
 * @param {number} [opt_options.opacity=1] - å¾å±éæåº¦ã
 * @param {string} opt_options.themeFields - æå®åå»ºä¸é¢å¾å­æ®µã
 * @param {boolean} [opt_options.isOverLay=true] - æ¯å¦è¿è¡åçå¤çï¼å¦æè®¾ä¸º trueï¼å¾è¡¨ç»å¶è¿ç¨ä¸­å°éèå¯¹å·²å¨å¾å±ä¸­ç»å¶çå¾è¡¨äº§çåççå¾è¡¨ã
 * @param {string} [opt_options.chartsType] - å¾è¡¨ç±»åãç®åå¯ç¨ï¼"Bar", "Line", "Pie"ã
 * @param {Object} opt_options.chartsSetting - ç¬¦å· Circle éç½®å¯¹è±¡ã
 * @param {Array.<number>} opt_options.chartsSetting.codomain - å¾è¡¨åè®¸å±ç¤ºçæ°æ®å¼åï¼é¿åº¦ä¸º 2 çä¸ç»´æ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºå¼åä¸éï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºå¼åä¸éã
 * @param {number} [opt_options.chartsSetting.maxR] - åå½¢çæå¤§åå¾ã
 * @param {number} [opt_options.chartsSetting.minR] - åå½¢çæå°åå¾ã
 * @param {string} opt_options.chartsSetting.fillColor - åå½¢çå¡«åè²ï¼å¦ï¼fillColor: "#FFB980"ã
 * @param {Object} opt_options.chartsSetting.circleStyle - åå½¢çåºç¡ styleï¼æ­¤åæ°æ§å¶åå½¢åºç¡æ ·å¼ï¼ä¼åçº§ä½äº circleStyleByFields å circleStyleByCodomainã
 * @param {number} opt_options.chartsSetting.decimalNumber - æ°æ®å¼æ°ç» dataValues åç´ å¼å°æ°ä½æ°ï¼æ°æ®çå°æ°ä½å¤çåæ°ï¼åå¼èå´ï¼[0, 16]ãå¦æä¸è®¾ç½®æ­¤åæ°ï¼å¨åæ°æ®å¼æ¶ä¸å¯¹æ°æ®åå°æ°ä½å¤çã
 * @param {Object} opt_options.chartsSetting.circleHoverStyle - åå½¢ hover ç¶ææ¶çæ ·å¼ï¼circleHoverAble ä¸º true æ¶ææã
 * @param {boolean} [opt_options.chartsSetting.circleHoverAble=true] - æ¯å¦åè®¸åå½¢ä½¿ç¨ hover ç¶æãåæ¶è®¾ç½® circleHoverAble å circleClickAble ä¸º falseï¼å¯ä»¥ç´æ¥å±è½å¾å½¢å¯¹ä¸é¢å¾å±äºä»¶çååºã
 * @param {boolean} [opt_options.chartsSetting.circleClickAble=true] - æ¯å¦åè®¸åå½¢è¢«ç¹å»ãåæ¶è®¾ç½® circleHoverAble å circleClickAble ä¸º falseï¼å¯ä»¥ç´æ¥å±è½å¾å½¢å¯¹ä¸é¢å¾å±äºä»¶çååºã
 * @extends {mapboxgl.supermap.ThemeLayer}
 * @fires mapboxgl.supermap.GraphThemeLayer#beforefeaturesadded
 */

var GraphThemeLayer_Graph = /*#__PURE__*/function (_Theme) {
  GraphThemeLayer_inherits(Graph, _Theme);

  var _super = GraphThemeLayer_createSuper(Graph);

  function Graph(name, chartsType, opt_options) {
    var _this;

    GraphThemeLayer_classCallCheck(this, Graph);

    _this = _super.call(this, name, opt_options);
    _this.chartsSetting = opt_options.chartsSetting || {};
    _this.themeFields = opt_options.themeFields || null;
    _this.overlayWeightField = opt_options.overlayWeightField || null;
    _this.isOverLay = opt_options.isOverLay === undefined ? true : opt_options.isOverLay;
    _this.charts = opt_options.charts || [];
    _this.cache = opt_options.cache || {};
    _this.chartsType = chartsType;
    return _this;
  }
  /**
   * @function mapboxgl.supermap.GraphThemeLayer.prototype.setChartsType
   * @description è®¾ç½®å¾è¡¨ç±»åï¼æ­¤å½æ°å¯å¨ææ¹åå¾è¡¨ç±»åãå¨è°ç¨æ­¤å½æ°åè¯·éè¿ chartsSetting ä¸ºæ°ç±»åçå¾è¡¨åç¸å³éç½®ã
   * @param {string} [chartsType] - å¾è¡¨ç±»åãç®åå¯ç¨ï¼"Bar", "Line", "Pie"ã
   */


  GraphThemeLayer_createClass(Graph, [{
    key: "setChartsType",
    value: function setChartsType(chartsType) {
      this.chartsType = chartsType;
      this.redraw();
    }
    /**
     * @function mapboxgl.supermap.GraphThemeLayer.prototype.addFeatures
     * @description åä¸é¢å¾å¾å±ä¸­æ·»å æ°æ®ï¼æ¯æç feature ç±»åä¸ºï¼iServer è¿åç feature JSON å¯¹è±¡ã
     * @param {SuperMap.ServerFeature} features - å¾æ·»å çè¦ç´ ã
     */

  }, {
    key: "addFeatures",
    value: function addFeatures(features) {
      /**
       * @event mapboxgl.supermap.GraphThemeLayer#beforefeaturesadded
       * @description è¦ç´ æ·»å ä¹åè§¦åã
       * @property {SuperMap.ServerFeature} features - è¦è¢«æ·»å çè¦ç´ ã
       */
      var ret = external_mapboxgl_default().Evented.prototype.fire('beforefeaturesadded', {
        features: features
      });

      if (ret === false) {
        return;
      } //è½¬æ¢ features å½¢å¼


      this.features = this.toiClientFeature(features); //ç»å¶ä¸é¢è¦ç´ 

      if (this.renderer) {
        this.redrawThematicFeatures(this.map.getBounds());
      }
    }
    /**
     * @function mapboxgl.supermap.GraphThemeLayer.prototype.redrawThematicFeatures
     * @description éç»ææä¸é¢è¦ç´ ã
     *              æ­¤æ¹æ³åå«ç»å¶ä¸é¢è¦ç´ çæææ­¥éª¤ï¼åå«ç¨æ·æ°æ®å°ä¸é¢è¦ç´ çè½¬æ¢ï¼æ½ç¨ï¼ç¼å­ç­æ­¥éª¤ã
     *              å°å¾æ¼«æ¸¸æ¶è°ç¨æ­¤æ¹æ³è¿è¡å¾å±å·æ°ã
     * @param {mapboxgl.LngLatBounds} extent - éç»çèå´ã
     */

  }, {
    key: "redrawThematicFeatures",
    value: function redrawThematicFeatures(extent) {
      // eslint-disable-line no-unused-vars
      this.clearCache(); //æ¸é¤å½åææå¯è§åç´ 

      this.renderer.clearAll();
      var features = this.features;

      for (var i = 0, len = features.length; i < len; i++) {
        var feature = features[i]; // // è¦ç´ èå´å¤æ­
        // var feaBounds = feature.geometry.getBounds();
        // //åé¤å½åè§å¾ï¼å°çï¼èå´ä»¥å¤çæ°æ®
        // if (extent) {
        //     var bounds = new SuperMap.Bounds(extent.getWest(), extent.getSouth(), extent.getEast(), extent.getNorth());
        //     // if (!bounds.intersectsBounds(feaBounds)) continue;
        // }

        var cache = this.cache; // ç¨ feature id åç¼å­æ è¯

        var cacheField = feature.id; // æ°æ®å¯¹åºçå¾è¡¨æ¯å¦å·²ç¼å­ï¼æ²¡ç¼å­åéæ°åå»ºå¾è¡¨

        if (cache[cacheField]) {
          continue;
        }

        cache[cacheField] = cacheField;
        var chart = this.createThematicFeature(feature); // åçå¤çæéå¼

        if (chart && this.overlayWeightField) {
          if (feature.attributes[this.overlayWeightField] && !isNaN(feature.attributes[this.overlayWeightField])) {
            chart["__overlayWeight"] = feature.attributes[this.overlayWeightField];
          }
        }

        if (chart) {
          this.charts.push(chart);
        }
      }

      this.drawCharts();
    }
    /**
     * @function mapboxgl.supermap.GraphThemeLayer.prototype.createThematicFeature
     * @description  åä¸é¢å¾å¾å±ä¸­æ·»å æ°æ®, æ¯æç feature ç±»åä¸º:iServer è¿åç feature json å¯¹è±¡ã
     * @param {Object} feature - å¾æ·»å çè¦ç´ ã
     *
     */

  }, {
    key: "createThematicFeature",
    value: function createThematicFeature(feature) {
      var thematicFeature; // æ£æ¥å¾è¡¨åå»ºæ¡ä»¶å¹¶åå»ºå¾å½¢

      if (Theme_Theme[this.chartsType] && this.themeFields && this.chartsSetting) {
        thematicFeature = new Theme_Theme[this.chartsType](feature, this, this.themeFields, this.chartsSetting);
      } // thematicFeature æ¯å¦åå»ºæå


      if (!thematicFeature) {
        return false;
      } // å¯¹ä¸é¢è¦ç´ æ§è¡å¾å½¢è£è½½


      thematicFeature.assembleShapes();
      return thematicFeature;
    }
    /**
     * @function mapboxgl.supermap.GraphThemeLayer.prototype.drawCharts
     * @description ç»å¶å¾è¡¨ãåå«åçå¤çã
     *
     */

  }, {
    key: "drawCharts",
    value: function drawCharts() {
      // å¤æ­ rendere rå°±ç»ª
      if (!this.renderer) {
        return;
      }

      var charts = this.charts; // å¾è¡¨æéå¼å¤çdes

      if (this.overlayWeightField) {
        charts.sort(function (cs, ce) {
          if (typeof cs["__overlayWeight"] == "undefined" && typeof ce["__overlayWeight"] == "undefined") {
            return 0;
          } else if (typeof cs["__overlayWeight"] != "undefined" && typeof ce["__overlayWeight"] == "undefined") {
            return -1;
          } else if (typeof cs["__overlayWeight"] == "undefined" && typeof ce["__overlayWeight"] != "undefined") {
            return 1;
          } else if (typeof cs["__overlayWeight"] != "undefined" && typeof ce["__overlayWeight"] != "undefined") {
            if (parseFloat(cs["__overlayWeight"]) < parseFloat(ce["__overlayWeight"])) {
              return 1;
            } else {
              return -1;
            }
          }

          return 0;
        });
      } // ä¸è¿è¡é¿è®©


      if (!this.isOverLay) {
        for (var m = 0, len_m = charts.length; m < len_m; m++) {
          var chart_m = charts[m]; // å¾å½¢åèä½ç½®  (reSetLocation ä¼æ´æ° chartBounds)

          var shapeROP_m = chart_m.resetLocation(); // æ·»å å¾å½¢

          var shapes_m = chart_m.shapes;

          for (var n = 0, slen_n = shapes_m.length; n < slen_n; n++) {
            shapes_m[n].refOriginalPosition = shapeROP_m;
            this.renderer.addShape(shapes_m[n]);
          }
        }
      } else {
        // åçå¤æ­æé chartsBounds éå
        var chartsBounds = []; //var extent = this.map.getBounds();
        //var mapBounds = new Bounds(extent.getWest(), extent.getSouth(), extent.getEast(), extent.getNorth());
        // è·åå°å¾åç´  bounds
        //var mapPxLT = this.getLocalXY(new LonLat(mapBounds.left, mapBounds.top));
        //var mapPxRB = this.getLocalXY(new LonLat(mapBounds.right, mapBounds.bottom));
        //var mBounds = new Bounds(mapPxLT[0], mapPxRB[1], mapPxRB[0], mapPxLT[1]);
        // åçå¤ç & æ·»å å¾å½¢

        for (var i = 0, len = charts.length; i < len; i++) {
          var chart = charts[i]; // å¾å½¢åèä½ç½®  (reSetLocation ä¼æ´æ° chartBounds)

          var shapeROP = chart.resetLocation(); // å¾è¡¨æ¡

          var cbs = chart.chartBounds;
          var cBounds = [{
            "x": cbs.left,
            "y": cbs.top
          }, {
            "x": cbs.left,
            "y": cbs.bottom
          }, {
            "x": cbs.right,
            "y": cbs.bottom
          }, {
            "x": cbs.right,
            "y": cbs.top
          }, {
            "x": cbs.left,
            "y": cbs.top
          }]; // // å°å¾èå´å¤ä¸ç»å¶
          // if (mBounds) {
          //     // if (!this.isChartInMap(mBounds, cBounds)) continue;
          // }
          // æ¯å¦åç

          var isOL = false;

          if (i !== 0) {
            for (var j = 0; j < chartsBounds.length; j++) {
              //åçå¤æ­
              if (this.isQuadrilateralOverLap(cBounds, chartsBounds[j])) {
                isOL = true;
                break;
              }
            }
          }

          if (isOL) {
            continue;
          } else {
            chartsBounds.push(cBounds);
          } // æ·»å å¾å½¢


          var shapes = chart.shapes;

          for (var _j = 0, slen = shapes.length; _j < slen; _j++) {
            shapes[_j].refOriginalPosition = shapeROP;
            this.renderer.addShape(shapes[_j]);
          }
        }
      } // ç»å¶å¾å½¢


      this.renderer.render();
    }
    /**
     * @function mapboxgl.supermap.GraphThemeLayer.prototype.getShapesByFeatureID
     * @description  éè¿ FeatureID è·å feature å³èçææå¾å½¢ãå¦æä¸ä¼ å¥æ­¤åæ°ï¼å½æ°å°è¿åææå¾å½¢ã
     * @param {number} featureID - è¦ç´  IDã
     */

  }, {
    key: "getShapesByFeatureID",
    value: function getShapesByFeatureID(featureID) {
      var list = [];
      var shapeList = this.renderer.getAllShapes();

      if (!featureID) {
        return shapeList;
      }

      for (var i = 0, len = shapeList.length; i < len; i++) {
        var si = shapeList[i];

        if (si.refDataID && featureID === si.refDataID) {
          list.push(si);
        }
      }

      return list;
    }
    /**
     * @function mapboxgl.supermap.GraphThemeLayer.prototype.isQuadrilateralOverLap
     * @description  å¤æ­ä¸¤ä¸ªåè¾¹å½¢æ¯å¦æåçã
     * @param {Array.<Object>} quadrilateral - åè¾¹å½¢èç¹æ°ç»ã
     * @param {Array.<Object>} quadrilateral2 - ç¬¬äºä¸ªåè¾¹å½¢èç¹æ°ç»ã
     */

  }, {
    key: "isQuadrilateralOverLap",
    value: function isQuadrilateralOverLap(quadrilateral, quadrilateral2) {
      var quadLen = quadrilateral.length,
          quad2Len = quadrilateral2.length;

      if (quadLen !== 5 || quad2Len !== 5) {
        return null;
      } //ä¸æ¯åè¾¹å½¢


      var OverLap = false; //å¦æä¸¤åè¾¹å½¢äºä¸åå«å¯¹æ¹çèç¹ï¼åä¸¤ä¸ªåè¾¹å½¢ä¸ç¸äº¤

      for (var i = 0; i < quadLen; i++) {
        if (this.isPointInPoly(quadrilateral[i], quadrilateral2)) {
          OverLap = true;
          break;
        }
      }

      for (var _i = 0; _i < quad2Len; _i++) {
        if (this.isPointInPoly(quadrilateral2[_i], quadrilateral)) {
          OverLap = true;
          break;
        }
      } //å ä¸ä¸¤ç©å½¢åå­ç¸äº¤çæåµ


      for (var _i2 = 0; _i2 < quadLen - 1; _i2++) {
        if (OverLap) {
          break;
        }

        for (var j = 0; j < quad2Len - 1; j++) {
          var isLineIn = Util.lineIntersection(quadrilateral[_i2], quadrilateral[_i2 + 1], quadrilateral2[j], quadrilateral2[j + 1]);

          if (isLineIn.CLASS_NAME === "SuperMap.Geometry.Point") {
            OverLap = true;
            break;
          }
        }
      }

      return OverLap;
    }
    /**
     * @function mapboxgl.supermap.GraphThemeLayer.prototype.isPointInPoly
     * @description  å¤æ­ä¸ä¸ªç¹æ¯å¦å¨å¤è¾¹å½¢éé¢ã(å°çº¿æ³)
     * @param {Object} pt - éè¦å¤å®çç¹å¯¹è±¡ï¼è¯¥å¯¹è±¡å«æå±æ§ x (æ¨ªåæ )ï¼å±æ§ y (çºµåæ )ã
     * @param {Array.<Object>} poly - å¤è¾¹å½¢èç¹æ°ç»ã
     */

  }, {
    key: "isPointInPoly",
    value: function isPointInPoly(pt, poly) {
      for (var isIn = false, i = -1, l = poly.length, j = l - 1; ++i < l; j = i) {
        (poly[i].y <= pt.y && pt.y < poly[j].y || poly[j].y <= pt.y && pt.y < poly[i].y) && pt.x < (poly[j].x - poly[i].x) * (pt.y - poly[i].y) / (poly[j].y - poly[i].y) + poly[i].x && (isIn = !isIn);
      }

      return isIn;
    }
    /**
     * @function mapboxgl.supermap.GraphThemeLayer.prototype.isChartInMap
     * @description  å¤æ­å¾è¡¨æ¯å¦å¨å°å¾éã
     * @param {SuperMap.Bounds} mapPxBounds - å°å¾åç´ èå´ã
     * @param {Array.<Object>} chartPxBounds - å¾è¡¨èå´çåè¾¹å½¢èç¹æ°ç»ã
     */

  }, {
    key: "isChartInMap",
    value: function isChartInMap(mapPxBounds, chartPxBounds) {
      var mb = mapPxBounds;
      var isIn = false;

      for (var i = 0, len = chartPxBounds.length; i < len; i++) {
        var cb = chartPxBounds[i];

        if (cb.x >= mb.left && cb.x <= mb.right && cb.y >= mb.top && cb.y <= mb.bottom) {
          isIn = true;
          break;
        }
      }

      return isIn;
    }
    /**
     * @function mapboxgl.supermap.GraphThemeLayer.prototype.clearCache
     * @description  æ¸é¤ç¼å­
     */

  }, {
    key: "clearCache",
    value: function clearCache() {
      this.cache = {};
      this.charts = [];
    }
    /**
     * @function mapboxgl.supermap.GraphThemeLayer.prototype.removeFeatures
     * @description  ä»ä¸é¢å¾ä¸­å é¤ featureãè¿ä¸ªå½æ°å é¤ææä¼ éè¿æ¥çç¢éè¦ç´ ãåæ°ä¸­ç features æ°ç»ä¸­çæ¯ä¸é¡¹ï¼å¿é¡»æ¯å·²ç»æ·»å å°å½åå¾å±ä¸­ç featureã
     * @param {SuperMap.Feature.Vector} features - è¦å é¤çè¦ç´ ã
     */

  }, {
    key: "removeFeatures",
    value: function removeFeatures(features) {
      this.clearCache();

      GraphThemeLayer_get(GraphThemeLayer_getPrototypeOf(Graph.prototype), "removeFeatures", this).call(this, features);
    }
    /**
     * @function mapboxgl.supermap.GraphThemeLayer.prototype.removeAllFeatures
     * @description  ç§»é¤ææçè¦ç´ ã
     */

  }, {
    key: "removeAllFeatures",
    value: function removeAllFeatures() {
      this.clearCache();

      GraphThemeLayer_get(GraphThemeLayer_getPrototypeOf(Graph.prototype), "removeAllFeatures", this).call(this);
    }
    /**
     * @function mapboxgl.supermap.GraphThemeLayer.prototype.redraw
     * @description  éç»è¯¥å¾å±ã
     */

  }, {
    key: "redraw",
    value: function redraw() {
      this.clearCache();

      if (this.renderer) {
        this.redrawThematicFeatures(this.map.getBounds());
        return true;
      }

      return false;
    }
    /**
     * @function mapboxgl.supermap.GraphThemeLayer.prototype.clear
     * @description  æ¸é¤çåå®¹åæ¬æ°æ®ï¼featuresï¼ ãä¸é¢è¦ç´ ãç¼å­ã
     */

  }, {
    key: "clear",
    value: function clear() {
      if (this.renderer) {
        this.renderer.clearAll();
        this.renderer.refresh();
      }

      this.removeAllFeatures();
      this.clearCache();
    }
  }]);

  return Graph;
}(ThemeLayer_Theme);
(external_mapboxgl_default()).supermap.GraphThemeLayer = GraphThemeLayer_Graph;
// CONCATENATED MODULE: ./src/mapboxgl/overlay/theme/GeoFeatureThemeLayer.js
function GeoFeatureThemeLayer_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GeoFeatureThemeLayer_typeof = function _typeof(obj) { return typeof obj; }; } else { GeoFeatureThemeLayer_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GeoFeatureThemeLayer_typeof(obj); }

function GeoFeatureThemeLayer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GeoFeatureThemeLayer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GeoFeatureThemeLayer_createClass(Constructor, protoProps, staticProps) { if (protoProps) GeoFeatureThemeLayer_defineProperties(Constructor.prototype, protoProps); if (staticProps) GeoFeatureThemeLayer_defineProperties(Constructor, staticProps); return Constructor; }

function GeoFeatureThemeLayer_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GeoFeatureThemeLayer_setPrototypeOf(subClass, superClass); }

function GeoFeatureThemeLayer_setPrototypeOf(o, p) { GeoFeatureThemeLayer_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GeoFeatureThemeLayer_setPrototypeOf(o, p); }

function GeoFeatureThemeLayer_createSuper(Derived) { var hasNativeReflectConstruct = GeoFeatureThemeLayer_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GeoFeatureThemeLayer_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GeoFeatureThemeLayer_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GeoFeatureThemeLayer_possibleConstructorReturn(this, result); }; }

function GeoFeatureThemeLayer_possibleConstructorReturn(self, call) { if (call && (GeoFeatureThemeLayer_typeof(call) === "object" || typeof call === "function")) { return call; } return GeoFeatureThemeLayer_assertThisInitialized(self); }

function GeoFeatureThemeLayer_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GeoFeatureThemeLayer_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GeoFeatureThemeLayer_getPrototypeOf(o) { GeoFeatureThemeLayer_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GeoFeatureThemeLayer_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class mapboxgl.supermap.GeoFeatureThemeLayer
 * @category Visualization Theme
 * @classdesc å°çå ä½ä¸é¢è¦ç´ åä¸é¢å¾å±ã
 * @param {string} name - å¾å±åã
 * @param {Object} opt_options - åæ°ã
 * @param {mapboxgl.Map} opt_options.map - å½å mapboxgl map å¯¹è±¡ã
 * @param {string} [opt_options.id] - ä¸é¢å¾å± IDãé»è®¤ä½¿ç¨ CommonUtil.createUniqueID("themeLayer_") åå»ºä¸é¢å¾å± IDã
 * @param {boolean} [opt_options.loadWhileAnimating=true] - æ¯å¦å®æ¶éç»ã
 * @param {number} [opt_options.nodesClipPixel=2] - èç¹æ½ç¨åç´ è·ç¦»ã
 * @param {boolean} [opt_options.isHoverAble=false] - å¾å½¢æ¯å¦å¨ hover æ¶é«äº®ã
 * @param {boolean} [opt_options.isMultiHover=false] - æ¯å¦å¤å¾å½¢åæ¶é«äº®ï¼ç¨äºé«äº®åä¸ä¸ªæ°æ®å¯¹åºçææå¾å½¢ï¼å¦ï¼å¤é¢ï¼ã
 * @param {boolean} [opt_options.isClickAble=true] - å¾å½¢æ¯å¦å¯ç¹å»ã
 * @param {boolean} [opt_options.isAllowFeatureStyle=false] -  æ¯å¦åè®¸ feature æ ·å¼ï¼styleï¼ ä¸­çææå±æ§åºç¨å°ä¸é¢å¾å±ã
 *                                        ç¦æ­¢å¯¹ä¸é¢è¦ç´ ä½¿ç¨æ°æ®ï¼featureï¼ç styleã
 *                                        æ­¤å±æ§å¯å¼ºå¶å°æ°æ® feature ç style ä¸­ææå±æ§åºç¨å°ä¸é¢è¦ç´ ä¸ï¼ä¸æ¥ææ¯å¾å± style å styleGroups æ´é«çä¼åçº§ï¼ä½¿ä¸é¢è¦ç´ 
 *                                        çæ ·å¼è±ç¦»ä¸é¢å¾å±çæ§å¶ãå¯ä»¥éè¿æ­¤æ¹å¼å®ç°å¯¹ç¹æ®æ°æ®ï¼featureï¼ å¯¹åºä¸é¢è¦ç´ èµäºç¬ç« styleã
 * @param {number} [opt_options.opacity=1] - å¾å±éæåº¦ã
 * @extends {mapboxgl.supermap.ThemeLayer}
 * @fires mapboxgl.supermap.GeoFeatureThemeLayer#beforefeaturesadded
 */

var GeoFeature = /*#__PURE__*/function (_Theme) {
  GeoFeatureThemeLayer_inherits(GeoFeature, _Theme);

  var _super = GeoFeatureThemeLayer_createSuper(GeoFeature);

  function GeoFeature(name, opt_options) {
    var _this;

    GeoFeatureThemeLayer_classCallCheck(this, GeoFeature);

    _this = _super.call(this, name, opt_options);
    /**
     * @member {string} mapboxgl.supermap.GeoFeatureThemeLayer.prototype.name 
     * @description ä¸é¢å¾å¾å±åç§°ã
     */

    _this.name = null;
    /**
     * @member {SuperMap.ThemeStyle} mapboxgl.supermap.GeoFeatureThemeLayer.prototype.style 
     * @description ä¸é¢å¾å¾å±å¨å±æ ·å¼ã
     */

    _this.style = null;
    /**
     * @member {SuperMap.ThemeStyle} mapboxgl.supermap.GeoFeatureThemeLayer.prototype.highlightStyle 
     * @description ä¸é¢å¾å¾å±é«äº®æ ·å¼ã
     */

    _this.highlightStyle = null;
    /**
     * @member {number} [mapboxgl.supermap.GeoFeatureThemeLayer.prototype.nodesClipPixel=2]
     * @description èç¹æ½ç¨åç´ è·ç¦»ã
     */

    _this.nodesClipPixel = 2;
    /**
     * @member {boolean} [mapboxgl.supermap.GeoFeatureThemeLayer.prototype.isHoverAble=false]
     * @description å¾å½¢æ¯å¦å¨ hover æ¶é«äº®ã
     */

    _this.isHoverAble = false;
    /**
     * @member {boolean} [mapboxgl.supermap.GeoFeatureThemeLayer.prototype.isMultiHover=false]
     * @description æ¯å¦å¤å¾å½¢åæ¶é«äº®ï¼ç¨äºé«äº®åä¸ä¸ªæ°æ®å¯¹åºçææå¾å½¢ï¼å¦ï¼å¤é¢ï¼ã
     */

    _this.isMultiHover = false;
    /**
     * @member {boolean} [mapboxgl.supermap.GeoFeatureThemeLayer.prototype.isClickAble=true] 
     * @description  å¾å½¢æ¯å¦å¯ç¹å»ã
     */

    _this.isClickAble = true;
    /**
     * @member {boolean} [mapboxgl.supermap.GeoFeatureThemeLayer.prototype.isAllowFeatureStyle=false]
     * @description  æ¯å¦åè®¸ feature æ ·å¼ï¼styleï¼ ä¸­çææå±æ§åºç¨å°ä¸é¢å¾å±ã</br>
     *               ç¦æ­¢å¯¹ä¸é¢è¦ç´ ä½¿ç¨æ°æ®ï¼featureï¼ç styleãæ­¤å±æ§å¯å¼ºå¶å°æ°æ® feature ç style ä¸­ææå±æ§åºç¨å°ä¸é¢è¦ç´ ä¸ï¼ä¸æ¥ææ¯å¾å± style å styleGroups æ´é«çä¼åçº§ï¼ä½¿ä¸é¢è¦ç´ 
     *               çæ ·å¼è±ç¦»ä¸é¢å¾å±çæ§å¶ãå¯ä»¥éè¿æ­¤æ¹å¼å®ç°å¯¹ç¹æ®æ°æ®ï¼featureï¼ å¯¹åºä¸é¢è¦ç´ èµäºç¬ç« styleã
     */

    _this.isAllowFeatureStyle = false;
    Util.extend(GeoFeatureThemeLayer_assertThisInitialized(_this), opt_options);
    _this.cache = opt_options.cache || {};
    _this.cacheFields = opt_options.cacheFields || [];
    _this.maxCacheCount = opt_options.maxCacheCount || 0;
    _this.isCustomSetMaxCacheCount = opt_options.isCustomSetMaxCacheCount === undefined ? false : opt_options.isCustomSetMaxCacheCount;
    return _this;
  }
  /**
   * @function mapboxgl.supermap.GeoFeatureThemeLayer.prototype.addFeatures
   * @description æ·»å è¦ç´ ã
   * @param {mapboxgl.supermap.ThemeFeature|SuperMap.ServerFeature} features - è¦ç´ å¯¹è±¡ã
   */


  GeoFeatureThemeLayer_createClass(GeoFeature, [{
    key: "addFeatures",
    value: function addFeatures(features) {
      /**
       * @event mapboxgl.supermap.GeoFeatureThemeLayer#beforefeaturesadded
       * @description è¦ç´ æ·»å ä¹åè§¦åã
       * @property {mapboxgl.supermap.ThemeFeature|SuperMap.ServerFeature} features - è¢«æ·»å çè¦ç´ ã
       */
      external_mapboxgl_default().Evented.prototype.fire('beforefeaturesadded', {
        features: features
      }); //è½¬æ¢ features å½¢å¼

      this.features = this.toiClientFeature(features);

      if (!this.isCustomSetMaxCacheCount) {
        this.maxCacheCount = this.features.length * 5;
      } //ç»å¶ä¸é¢è¦ç´ 


      if (this.renderer) {
        this.redrawThematicFeatures(this.map.getBounds());
      }
    }
    /**
     * @function mapboxgl.supermap.GeoFeatureThemeLayer.prototype.removeFeatures
     * @description ä»ä¸é¢å¾ä¸­å é¤ featureãè¿ä¸ªå½æ°å é¤ææä¼ éè¿æ¥çç¢éè¦ç´ ã
     * @param {SuperMap.Feature.Vector} features - è¦å é¤çè¦ç´ å¯¹è±¡ã
     */

  }, {
    key: "removeFeatures",
    value: function removeFeatures(features) {
      // eslint-disable-line no-unused-vars
      this.clearCache();
      ThemeLayer_Theme.prototype.removeFeatures.apply(this, arguments);
    }
    /**
     * @function mapboxgl.supermap.GeoFeatureThemeLayer.prototype.removeAllFeatures
     * @description æ¸é¤å½åå¾å±ææçç¢éè¦ç´ ã
     */

  }, {
    key: "removeAllFeatures",
    value: function removeAllFeatures() {
      this.clearCache();
      ThemeLayer_Theme.prototype.removeAllFeatures.apply(this, arguments);
    }
    /**
     * @function mapboxgl.supermap.GeoFeatureThemeLayer.prototype.redrawThematicFeatures
     * @description éç»ææä¸é¢è¦ç´ ã
     * @param {mapboxgl.LngLatBounds} extent - éç»çèå´ã
     */

  }, {
    key: "redrawThematicFeatures",
    value: function redrawThematicFeatures(extent) {
      // eslint-disable-line no-unused-vars
      this.clearCache(); //è·åé«äº®ä¸é¢è¦ç´ å¯¹åºçç¨æ· id

      var hoverone = this.renderer.getHoverOne();
      var hoverFid = null;

      if (hoverone && hoverone.refDataID) {
        hoverFid = hoverone.refDataID;
      } //æ¸é¤å½åææå¯è§åç´ 


      this.renderer.clearAll();
      var features = this.features;
      var cache = this.cache;
      var cacheFields = this.cacheFields;
      var cmZoom = this.map.getZoom();
      var maxCC = this.maxCacheCount;

      for (var i = 0, len = features.length; i < len; i++) {
        var feature = features[i]; // var feaBounds = feature.geometry.getBounds();
        //
        // //åé¤å½åè§å¾ï¼å°çï¼èå´ä»¥å¤çæ°æ®
        // if (extent) {
        //     var bounds = new SuperMap.Bounds(extent.getWest(), extent.getSouth(), extent.getEast(), extent.getNorth());
        //     // if (!bounds.intersectsBounds(feaBounds)) continue;
        // }
        //ç¼å­å­æ®µ

        var fields = feature.id + "_zoom_" + cmZoom.toString();
        var thematicFeature; //å¤æ­ä¸é¢è¦ç´ ç¼å­æ¯å¦å­å¨

        if (cache[fields]) {
          cache[fields].updateAndAddShapes();
        } else {
          //å¦æä¸é¢è¦ç´ ç¼å­ä¸å­å¨ï¼åå»ºä¸é¢è¦ç´ 
          thematicFeature = this.createThematicFeature(features[i]); //æ£æ¥ thematicFeature æ¯å¦æå¯è§åå¾å½¢

          if (thematicFeature.getShapesCount() < 1) {
            continue;
          } //å å¥ç¼å­


          cache[fields] = thematicFeature;
          cacheFields.push(fields); //ç¼å­æ°ééå¶

          if (cacheFields.length > maxCC) {
            var fieldsTemp = cacheFields[0];
            cacheFields.splice(0, 1);
            delete cache[fieldsTemp];
          }
        }
      }

      this.renderer.render(); //å°å¾æ¼«æ¸¸åï¼éæ°é«äº®å¾å½¢

      if (hoverFid && this.isHoverAble && this.isMultiHover) {
        var hShapes = this.getShapesByFeatureID(hoverFid);
        this.renderer.updateHoverShapes(hShapes);
      }
    }
    /**
     * @function mapboxgl.supermap.GeoFeatureThemeLayer.prototype.createThematicFeature
     * @description åå»ºä¸é¢è¦ç´ ã
     * @param {SuperMap.Feature.Vector} feature - è¦ç´ å¯¹è±¡ã
     */

  }, {
    key: "createThematicFeature",
    value: function createThematicFeature(feature) {
      var style = Util.copyAttributesWithClip(this.style);

      if (feature.style && this.isAllowFeatureStyle === true) {
        style = Util.copyAttributesWithClip(feature.style);
      } //åå»ºä¸é¢è¦ç´ æ¶çå¯éåæ°


      var options = {};
      options.nodesClipPixel = this.nodesClipPixel;
      options.isHoverAble = this.isHoverAble;
      options.isMultiHover = this.isMultiHover;
      options.isClickAble = this.isClickAble;
      options.highlightStyle = ShapeFactory.transformStyle(this.highlightStyle); //å°æ°æ®è½¬ä¸ºä¸é¢è¦ç´ ï¼Vectorï¼

      var thematicFeature = new ThemeVector(feature, this, ShapeFactory.transformStyle(style), options); //ç´æ¥æ·»å å¾å½¢å°æ¸²æå¨

      for (var m = 0; m < thematicFeature.shapes.length; m++) {
        this.renderer.addShape(thematicFeature.shapes[m]);
      }

      return thematicFeature;
    }
    /**
     * @function mapboxgl.supermap.GeoFeatureThemeLayer.prototype.clearCache
     * @description æ¸é¤ç¼å­ã
     */

  }, {
    key: "clearCache",
    value: function clearCache() {
      this.cache = {};
      this.cacheFields = [];
    }
    /**
     * @function mapboxgl.supermap.GeoFeatureThemeLayer.prototype.clear
     * @description  æ¸é¤çåå®¹åæ¬æ°æ®ï¼featuresï¼ãä¸é¢è¦ç´ åç¼å­ã
     */

  }, {
    key: "clear",
    value: function clear() {
      this.renderer.clearAll();
      this.renderer.refresh();
      this.removeAllFeatures();
      this.clearCache();
    }
    /**
     * @function mapboxgl.supermap.GeoFeatureThemeLayer.prototype.getCacheCount
     * @description è·åå½åç¼å­æ°éã
     * @returns {number} å½åç¼å­æ°éã
     */

  }, {
    key: "getCacheCount",
    value: function getCacheCount() {
      return this.cacheFields.length;
    }
    /**
     * @function mapboxgl.supermap.GeoFeatureThemeLayer.prototype.setMaxCacheCount
     * @param {number} [cacheCount] - ç¼å­æ»æ°ã
     * @description è®¾ç½®æå¤§ç¼å­æ¡æ°ã
     */

  }, {
    key: "setMaxCacheCount",
    value: function setMaxCacheCount(cacheCount) {
      if (!isNaN(cacheCount)) {
        this.maxCacheCount = cacheCount;
        this.isCustomSetMaxCacheCount = true;
      }
    }
    /**
     * @function mapboxgl.supermap.GeoFeatureThemeLayer.prototype.setMaxCacheCount
     * @param {number} [featureID=si.refDataID] - è¦ç´  IDã
     * @description éè¿ FeatureID è·å feature å³èçææå¾å½¢ãå¦æä¸ä¼ å¥æ­¤åæ°ï¼å½æ°å°è¿åææå¾å½¢ã
     */

  }, {
    key: "getShapesByFeatureID",
    value: function getShapesByFeatureID(featureID) {
      var list = [];
      var shapeList = this.renderer.getAllShapes();

      if (!featureID) {
        return shapeList;
      }

      for (var i = 0, len = shapeList.length; i < len; i++) {
        var si = shapeList[i];

        if (si.refDataID && featureID === si.refDataID) {
          list.push(si);
        }
      }

      return list;
    }
  }]);

  return GeoFeature;
}(ThemeLayer_Theme);
(external_mapboxgl_default()).supermap.GeoFeatureThemeLayer = GeoFeature;
// CONCATENATED MODULE: ./src/mapboxgl/overlay/LabelThemeLayer.js
function LabelThemeLayer_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { LabelThemeLayer_typeof = function _typeof(obj) { return typeof obj; }; } else { LabelThemeLayer_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return LabelThemeLayer_typeof(obj); }

function LabelThemeLayer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function LabelThemeLayer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function LabelThemeLayer_createClass(Constructor, protoProps, staticProps) { if (protoProps) LabelThemeLayer_defineProperties(Constructor.prototype, protoProps); if (staticProps) LabelThemeLayer_defineProperties(Constructor, staticProps); return Constructor; }

function LabelThemeLayer_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { LabelThemeLayer_get = Reflect.get; } else { LabelThemeLayer_get = function _get(target, property, receiver) { var base = LabelThemeLayer_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return LabelThemeLayer_get(target, property, receiver || target); }

function LabelThemeLayer_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = LabelThemeLayer_getPrototypeOf(object); if (object === null) break; } return object; }

function LabelThemeLayer_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) LabelThemeLayer_setPrototypeOf(subClass, superClass); }

function LabelThemeLayer_setPrototypeOf(o, p) { LabelThemeLayer_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return LabelThemeLayer_setPrototypeOf(o, p); }

function LabelThemeLayer_createSuper(Derived) { var hasNativeReflectConstruct = LabelThemeLayer_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = LabelThemeLayer_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = LabelThemeLayer_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return LabelThemeLayer_possibleConstructorReturn(this, result); }; }

function LabelThemeLayer_possibleConstructorReturn(self, call) { if (call && (LabelThemeLayer_typeof(call) === "object" || typeof call === "function")) { return call; } return LabelThemeLayer_assertThisInitialized(self); }

function LabelThemeLayer_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function LabelThemeLayer_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function LabelThemeLayer_getPrototypeOf(o) { LabelThemeLayer_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return LabelThemeLayer_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class mapboxgl.supermap.LabelThemeLayer
 * @category  Visualization Theme
 * @classdesc  æ ç­¾ä¸é¢å¾å±ã
 * @param {string} name - å¾å±åã
 * @param {Object} opt_options - åæ°ã
 * @param {mapboxgl.Map} opt_options.map - å½åmapboxgl map å¯¹è±¡ã
 * @param {string} opt_options.themeField - æå®åå»ºä¸é¢å¾å­æ®µã
 * @param {Object} opt_options.style - ä¸é¢å¾æ ·å¼ã
 * @param {Object} opt_options.styleGroups - åä¸é¢ç±»åæ ·å¼ç»ã
 * @param {Object} [opt_options.highlightStyle] - å¼å¯ hover äºä»¶åï¼è§¦åçæ ·å¼é£æ ¼ã
 * @param {string} [opt_options.id] - ä¸é¢å¾å± IDãä¸é¢å¾å± IDãé»è®¤ä½¿ç¨ CommonUtil.createUniqueID("themeLayer_") åå»ºä¸é¢å¾å± IDã
 * @param {boolean} [opt_options.loadWhileAnimating=true] - æ¯å¦å®æ¶éç»ã
 * @param {number} [opt_options.opacity=1] - å¾å±éæåº¦ã
 * @param {boolean} [options.isAvoid=true] - æ¯å¦è¿è¡å°å¾è¾¹ç¼çé¿è®©å¤çã
 * @param {boolean} [options.isOverLay=true] - æ¯å¦è¿è¡åçå¤çï¼å¦æè®¾ä¸º trueï¼å¾è¡¨ç»å¶è¿ç¨ä¸­å°éèå¯¹å·²å¨å¾å±ä¸­ç»å¶çå¾è¡¨äº§çåççå¾è¡¨ã
 * @param {boolean} [opt_options.isHoverAble] - æ¯å¦å¼å¯ hover äºä»¶ã
 * @extends {mapboxgl.supermap.GeoFeatureThemeLayer}
 */

var LabelThemeLayer_Label = /*#__PURE__*/function (_GeoFeature) {
  LabelThemeLayer_inherits(Label, _GeoFeature);

  var _super = LabelThemeLayer_createSuper(Label);

  function Label(name, opt_options) {
    var _this;

    LabelThemeLayer_classCallCheck(this, Label);

    _this = _super.call(this, name, opt_options);
    /**
     * @member {boolean} [mapboxgl.supermap.LabelThemeLayer.prototype.isOverLay=true] 
     * @description æ¯å¦è¿è¡åçå¤çï¼å¦æè®¾ä¸º trueï¼å°éèè¢«åççæ ç­¾ã
     */

    _this.isOverLay = true;
    /**
     * @member {boolean} [mapboxgl.supermap.LabelThemeLayer.prototype.isAvoid=true] 
     * @description æ¯å¦è¿è¡å°å¾è¾¹ç¼çé¿è®©å¤çï¼å¦æè®¾ä¸º trueï¼å°æä¸å°å¾è¾¹ç¼ç¸äº¤çæ ç­¾ç§»å°å°å¾èå´åï¼å¨å°å¾è¾¹ç¼å¤åé¿è®©å¤çã
     */

    _this.isAvoid = true;
    /**
     * @member {string} mapboxgl.supermap.LabelThemeLayer.prototype.themeField 
     * @description  ç¨äºæå®ä¸é¢è¦ç´ æ ·å¼çå±æ§å­æ®µåç§°ã</br>
     *               æ­¤å±æ§å­æ®µæ¯è¦ç¨æ·æ°æ®ï¼featureï¼ attributes ä¸­åå«çå­æ®µï¼ä¸å­æ®µå¯¹åºçå¼çç±»åå¿é¡»æ¯æ°å¼åã</br>
     *               ä½¿ç¨æ ç­¾åç»æ¾ç¤ºè¿éè¦è®¾ç½® styleGroups å±æ§ã
     */

    _this.themeField = null;
    /**
     * @member {Array.<Object>} mapboxgl.supermap.LabelThemeLayer.prototype.styleGroups 
     * @description åç»æ ·å¼ãä½¿ç¨æ­¤å±æ§éè¦è®¾ç½® themeField å±æ§ã</br>
     *              1.æ²¡æåæ¶è®¾ç½® themeField å styleGroupsï¼åææä¸é¢è¦ç´ é½ä½¿ç¨æ¬å¾å±ç style è¿è¡æ¸²æï¼</br>
     *              2.åæ¶è®¾ç½® themeField å styleGroupsï¼åæç§ themeField æå®çå­æ®µåç§°è·åç¨æ·æ°æ®ï¼featureï¼attributes ä¸­å¯¹åºçå±æ§å¼ï¼</br>
     *               &nbsp;&nbsp;a.å¦æå±æ§å¼ç­äº styleGroups æ°ç»éæä¸ªåç´ å®ä¹ç value å¼ï¼åæ­¤ä¸é¢è¦ç´ å styleGroups æ°ç»ä¸­è¯¥åç´ å®ä¹ç style è¿è¡æ¸²æã</br>
     *               &nbsp;&nbsp;b.å¦æå±æ§å¼ä¸ç­äº styleGroups æ°ç»éä»»ä½åç´ å®ä¹ç value å¼ï¼åæ­¤ä¸é¢è¦ç´ æç§æ¬å¾å±ç style è¿è¡æ¸²æã</br>
     *              æ­¤æ°ç»æ¯ä¸ªåç´ å¯¹è±¡å¿é¡»æä¸¤ä¸ªå±æ§ï¼value : ä¸å­æ®µ themeField ç¸å¯¹åºçå±æ§å¼ï¼styleï¼ä¸é¢è¦ç´  styleã
     */

    _this.styleGroups = null;
    Util.extend(LabelThemeLayer_assertThisInitialized(_this), opt_options);
    _this.defaultStyle = {
      //é»è®¤ææ¬æ ·å¼
      fontColor: "#000000",
      fontOpacity: 1,
      fontSize: "12px",
      fontStyle: "normal",
      fontWeight: "normal",
      labelAlign: "cm",
      labelXOffset: 0,
      labelYOffset: 0,
      labelRotation: 0,
      //é»è®¤æ ·å¼
      fill: false,
      fillColor: "#ee9900",
      fillOpacity: 0.4,
      stroke: false,
      strokeColor: "#ee9900",
      strokeOpacity: 1,
      strokeWidth: 1,
      strokeLinecap: "round",
      strokeDashstyle: "solid",
      //é»è®¤æ¾ç¤ºèæ¯æ¡
      labelRect: true,
      //å¯¹ç¨æ·éèä½å¿é¡»ä¿ææ­¤å¼çå±æ§
      //cursor: "pointer",
      labelSelect: true,
      //ç¨  _isGeoTextStrategyStyle æ è®°æ­¤styleï¼æºå¸¦æ­¤ç±»styleçè¦ç´ ç¹æGeoTextç­ç¥ä¸­çæ ç­¾è¦ç´ 
      _isGeoTextStrategyStyle: true
    }; //è·åæ ç­¾åç´  bounds çæ¹å¼ã0 - è¡¨ç¤ºéè¿ææ¬ç±»å®¹åææ¬é£æ ¼è®¡ç®è·ååç´ èå´ï¼ç°å¨æ¯æä¸­æãè±æ; 1 - è¡¨ç¤ºéè¿ç»å¶çææ¬æ ç­¾è·ååç´ èå´ï¼æ¯æåä¸ªè¯­ç§çæå­èå´è·åï¼ä½æ§è½æ¶èè¾å¤§ï¼å°¤å¶æ¯éç¨SVGæ¸²æï¼ãé»è®¤å¼ä¸º0ã

    _this.getPxBoundsMode = 0;
    _this.labelFeatures = [];
    return _this;
  }
  /**
   * @function mapboxgl.supermap.LabelThemeLayer.prototype.redrawThematicFeatures
   * @description éç»ææä¸é¢è¦ç´ ã</br>
   *              æ­¤æ¹æ³åå«ç»å¶ä¸é¢è¦ç´ çæææ­¥éª¤ï¼åå«ç¨æ·æ°æ®å°ä¸é¢è¦ç´ çè½¬æ¢ï¼æ½ç¨ï¼ç¼å­ç­æ­¥éª¤ã</br>
   *              å°å¾æ¼«æ¸¸æ¶è°ç¨æ­¤æ¹æ³è¿è¡å¾å±å·æ°ã
   * @param {mapboxgl.LngLatBounds} bounds - éç»èå´ã
   */


  LabelThemeLayer_createClass(Label, [{
    key: "redrawThematicFeatures",
    value: function redrawThematicFeatures(bounds) {
      if (this.features.length > 0 && this.labelFeatures.length == 0) {
        var feats = this.setLabelsStyle(this.features);

        for (var i = 0, len = feats.length; i < len; i++) {
          this.labelFeatures.push(feats[i]);
        }
      }

      this.features = this.getDrawnLabels(this.labelFeatures);

      LabelThemeLayer_get(LabelThemeLayer_getPrototypeOf(Label.prototype), "redrawThematicFeatures", this).call(this, bounds);
    }
    /**
     * @function mapboxgl.supermap.LabelThemeLayer.prototype.removeFeatures
     * @description ä»ä¸é¢å¾ä¸­å é¤ featureãè¿ä¸ªå½æ°å é¤ææä¼ éè¿æ¥çç¢éè¦ç´ ã
     * @param {SuperMap.Feature.Vector} features - è¦å é¤çè¦ç´ å¯¹è±¡ã
     */

  }, {
    key: "removeFeatures",
    value: function removeFeatures(features) {
      // eslint-disable-line no-unused-vars
      this.labelFeatures = [];

      LabelThemeLayer_get(LabelThemeLayer_getPrototypeOf(Label.prototype), "removeFeatures", this).call(this, arguments);
    }
    /**
     * @function mapboxgl.supermap.LabelThemeLayer.prototype.removeAllFeatures
     * @description æ¸é¤å½åå¾å±ææçç¢éè¦ç´ ã
     */

  }, {
    key: "removeAllFeatures",
    value: function removeAllFeatures() {
      this.labelFeatures = [];

      LabelThemeLayer_get(LabelThemeLayer_getPrototypeOf(Label.prototype), "removeAllFeatures", this).call(this, arguments);
    }
    /**
     * @function mapboxgl.supermap.LabelThemeLayer.prototype.createThematicFeature
     * @description åå»ºä¸é¢å¾è¦ç´ ã
     * @param {Object} feature - è¦åå»ºçä¸é¢å¾å½¢è¦ç´ ã
     */

  }, {
    key: "createThematicFeature",
    value: function createThematicFeature(feature) {
      //èµ style
      var style = this.getStyleByData(feature); //åå»ºä¸é¢è¦ç´ æ¶çå¯éåæ°

      var options = {};
      options.nodesClipPixel = this.nodesClipPixel;
      options.isHoverAble = this.isHoverAble;
      options.isMultiHover = this.isMultiHover;
      options.isClickAble = this.isClickAble;
      options.highlightStyle = ShapeFactory.transformStyle(this.highlightStyle); //å°æ°æ®è½¬ä¸ºä¸é¢è¦ç´ ï¼Vectorï¼

      var thematicFeature = new ThemeVector(feature, this, ShapeFactory.transformStyle(style), options); //ç´æ¥æ·»å å¾å½¢å°æ¸²æå¨

      for (var m = 0; m < thematicFeature.shapes.length; m++) {
        this.renderer.addShape(thematicFeature.shapes[m]);
      }

      return thematicFeature;
    }
    /**
     * @function mapboxgl.supermap.LabelThemeLayer.prototype.getDrawnLabels
     * @description è·åç»ï¼åçï¼å¤çåå°è¦ç»å¶å¨å¾å±ä¸çæ ç­¾è¦ç´ ã
     * @param {Array.<SuperMap.Feature.Vector>} labelFeatures - æææ ç­¾è¦ç´ çæ°ç»ã
     * @returns {Array.<SuperMap.Feature.Vector>} æç»è¦ç»å¶çæ ç­¾è¦ç´ æ°ç»ã
     */

  }, {
    key: "getDrawnLabels",
    value: function getDrawnLabels(labelFeatures) {
      var feas = [],
          //æç»è¦ç»å¶çæ ç­¾è¦ç´ é
      fea,
          //æç»è¦ç»å¶çæ ç­¾è¦ç´ 
      fi,
          //ä¸´æ¶æ ç­¾è¦ç´ ï¼ç¨æ·çç¬¬iä¸ªæ ç­¾
      labelsB = [],
          //ä¸äº§çåççæ ç­¾è¦ç´ èå´é
      styTmp,
          //ç¨äºä¸´æ¶å­å¨è¦ç´ styleçåé
      feaSty,
          //æ ç­¾è¦ç´ æç»çstyle
      // styleTempç¨äºå±è½ææ¬styleä¸­å¸¦æåç§»æ§è´¨styleå±æ§ï¼åç§»å·²ç»å¨è®¡ç®boundsçè¿ç¨ä¸­åä¸äºè¿ç®ï¼
      // æä»¥å¨æç»æç§boundsæ¥ç»å¶æ ç­¾æ¶ï¼éå±è½styleä¸­å¸¦æåç§»æ§è´¨å±æ§ï¼å¦åææ¬çåç§»éå°æ©å¤§ä¸åã
      styleTemp = {
        labelAlign: "cm",
        labelXOffset: 0,
        labelYOffset: 0
      };
      var map = this.map;
      var zoom = map.getZoom();
      var canvas = map.getCanvas();
      var mapSize = {
        x: parseFloat(canvas.style.width),
        y: parseFloat(canvas.style.height)
      }; //å¯¹ç¨æ·çæ¯ä¸ªæ ç­¾è¦ç´ è¿è¡å¤çä¸å¤æ­

      for (var i = 0, len = labelFeatures.length; i < len; i++) {
        fi = labelFeatures[i]; //æ£æ¥fiçstyleå¨é¿è®©ä¸­æ¯å¦è¢«æ¹åï¼å¦ææ¹åï¼éæ°è®¾ç½®è¦ç´ çstyle

        if (fi.isStyleChange || fi.isStyleChange === undefined) {
          fi = this.setStyle(fi);
        } //æ ç­¾æç»çä¸­å¿ç¹åç´ ä½ç½® ï¼åç§»åï¼


        var loc = this.getLabelPxLocation(fi); //è¿æ»¤æå°å¾èå´å¤çæ ç­¾ ï¼åç§»åï¼

        if (loc.x >= 0 && loc.x <= mapSize.x && loc.y >= 0 && loc.y <= mapSize.y) {
          //æ ¹æ®å½åå°å¾ç¼©æ¾çº§å«è¿æ»¤æ ç­¾
          if (fi.style.minZoomLevel > -1) {
            if (zoom <= fi.style.minZoomLevel) {
              continue;
            }
          }

          if (fi.style.maxZoomLevel > -1) {
            if (zoom > fi.style.maxZoomLevel) {
              continue;
            }
          } //è®¡ç®æ ç­¾bounds


          var boundsQuad = null;

          if (fi.isStyleChange) {
            fi.isStyleChange = null;
            boundsQuad = this.calculateLabelBounds(fi, loc);
          } else {
            if (fi.geometry.bsInfo.w && fi.geometry.bsInfo.h) {
              //ä½¿ç¨calculateLabelBounds2å¯ä»¥æé«boundsçè®¡ç®æçï¼å°¤å¶æ¯å¨getPxBoundsMode = 1æ¶
              boundsQuad = this.calculateLabelBounds2(fi, loc);
            } else {
              boundsQuad = this.calculateLabelBounds(fi, loc);
            }
          } //é¿è®©å¤ç -start


          var mapViewBounds = new Bounds(0, mapSize.y, mapSize.x, 0),
              //å°å¾åç´ èå´
          quadlen = boundsQuad.length;

          if (this.isAvoid) {
            var avoidInfo = this.getAvoidInfo(mapViewBounds, boundsQuad); //é¿è®©ä¿¡æ¯

            if (avoidInfo) {
              //æ¨ªåï¼xæ¹åï¼ä¸çé¿è®©
              if (avoidInfo.aspectW === "left") {
                fi.style.labelXOffset += avoidInfo.offsetX;

                for (var j = 0; j < quadlen; j++) {
                  boundsQuad[j].x += avoidInfo.offsetX;
                }
              } else if (avoidInfo.aspectW === "right") {
                fi.style.labelXOffset += -avoidInfo.offsetX;

                for (var _j = 0; _j < quadlen; _j++) {
                  boundsQuad[_j].x += -avoidInfo.offsetX;
                }
              } //çºµåï¼yæ¹åï¼ä¸çé¿è®©


              if (avoidInfo.aspectH === "top") {
                fi.style.labelYOffset += avoidInfo.offsetY;

                for (var _j2 = 0; _j2 < quadlen; _j2++) {
                  boundsQuad[_j2].y += avoidInfo.offsetY;
                }
              } else if (avoidInfo.aspectH === "bottom") {
                fi.style.labelYOffset += -avoidInfo.offsetY;

                for (var _j3 = 0; _j3 < quadlen; _j3++) {
                  boundsQuad[_j3].y += -avoidInfo.offsetY;
                }
              } //å¦æstyleåçååï¼è®°å½ä¸æ¥


              fi.isStyleChange = true;
            }
          } //é¿è®©å¤ç -end
          //åçå¤ç -start


          if (this.isOverLay) {
            //æ¯å¦åç
            var isOL = false;

            if (i != 0) {
              for (var _j4 = 0; _j4 < labelsB.length; _j4++) {
                //åçå¤æ­
                if (this.isQuadrilateralOverLap(boundsQuad, labelsB[_j4])) {
                  isOL = true;
                  break;
                }
              }
            }

            if (isOL) {
              continue;
            } else {
              labelsB.push(boundsQuad);
            }
          } //åçå¤ç -end
          //èæ¯ï¼äºä»¶ï¼-start
          //å°æ ç­¾åç´ èå´è½¬ä¸ºå°çèå´


          var geoBs = [];

          for (var _j5 = 0; _j5 < quadlen - 1; _j5++) {
            geoBs.push(map.unproject(boundsQuad[_j5]));
          } //å±è½æåç§»æ§è´¨çstyleå±æ§,åç§»éå¨ç®boundsæ¶å·²ç»å å¥è®¡ç®


          var leftBottom = geoBs[3];
          var rightTop = geoBs[1];
          var bounds = new Bounds(leftBottom.lng, leftBottom.lat, rightTop.lng, rightTop.lat);
          var center = bounds.getCenterLonLat();
          var label = new GeoText(center.lon, center.lat, fi.attributes[this.themeField]);
          label.calculateBounds();
          styTmp = Util.cloneObject(fi.style);
          feaSty = Util.cloneObject(Util.copyAttributes(styTmp, styleTemp));
          fea = new Vector(label, fi.attributes, feaSty); //èµäºid

          fea.id = fi.id;
          fea.fid = fi.fid;
          feas.push(fea);
        }
      } //è¿åæç»è¦ç»å¶çæ ç­¾è¦ç´ 


      return feas;
    }
    /**
     * @function mapboxgl.supermap.LabelThemeLayer.prototype.getStyleByData
     * @description æ ¹æ®ç¨æ·æ°æ®ï¼featureï¼è®¾ç½®ä¸é¢è¦ç´ ç Styleã
     * @param {SuperMap.Feature.Vector} feat - ç¢éè¦ç´ å¯¹è±¡ã
     * @returns {Array.<SuperMap.ThemeStyle>} ä¸é¢è¦ç´ ç Styleã
     */

  }, {
    key: "getStyleByData",
    value: function getStyleByData(feat) {
      var feature = feat;
      feature.style = Util.copyAttributes(feature.style, this.defaultStyle); //å°styleèµç»æ ç­¾

      if (this.style && this.style.fontSize && parseFloat(this.style.fontSize) < 12) {
        this.style.fontSize = "12px";
      }

      feature.style = Util.copyAttributes(feature.style, this.style);

      if (this.themeField && this.styleGroups && feature.attributes) {
        var Sf = this.themeField;
        var attributes = feature.attributes;
        var groups = this.styleGroups;
        var isSfInAttrs = false; //æå®ç groupField æ¯å¦æ¯geotextçå±æ§å­æ®µä¹ä¸

        var attr = null; //å±æ§å¼

        for (var property in attributes) {
          if (Sf === property) {
            isSfInAttrs = true;
            attr = attributes[property];
            break;
          }
        } //å¤æ­å±æ§å¼æ¯å¦å±äºstyleGroupsçæä¸ä¸ªèå´ï¼ä»¥ä¾¿å¯¹æ ç­¾åç»


        if (isSfInAttrs) {
          for (var i = 0, len = groups.length; i < len; i++) {
            if (attr >= groups[i].start && attr < groups[i].end) {
              var sty1 = groups[i].style;

              if (sty1 && sty1.fontSize && parseFloat(sty1.fontSize) < 12) {
                sty1.fontSize = "12px";
              }

              feature.style = Util.copyAttributes(feature.style, sty1);
            }
          }
        }

        feature.style.label = feature.attributes[this.themeField];
      }

      return feature.style;
    }
    /**
     * @function mapboxgl.supermap.LabelThemeLayer.prototype.setLabelsStyle
     * @description è®¾ç½®æ ç­¾è¦ç´ ç Styleã
     * @param {Array.<SuperMap.Feature.Vector>} labelFeatures - éè¦è®¾ç½® Style çæ ç­¾è¦ç´ æ°ç»ã
     * @returns {Array.<SuperMap.Feature.Vector>} èµäº Style åçæ ç­¾è¦ç´ æ°ç»ã
     */

  }, {
    key: "setLabelsStyle",
    value: function setLabelsStyle(labelFeatures) {
      var fea,
          labelFeas = [];

      for (var i = 0, len = labelFeatures.length; i < len; i++) {
        var feature = labelFeatures[i];

        if (feature.geometry.CLASS_NAME === "SuperMap.Geometry.GeoText") {
          //è®¾ç½®æ ç­¾çStyle
          if (feature.geometry.bsInfo.w || feature.geometry.bsInfo.h) {
            feature.geometry.bsInfo.w = null;
            feature.geometry.bsInfo.h = null;
            feature.geometry.labelWTmp = null;
          }

          fea = this.setStyle(feature); //ä¸ºæ ç­¾è¦ç´ æå®å¾å±

          fea.layer = this.layer;
          labelFeas.push(fea);
        } else {
          return labelFeatures;
        }
      }

      return labelFeas;
    }
    /**
     * @function mapboxgl.supermap.LabelThemeLayer.prototype.setStyle
     * @description è®¾ç½®æ ç­¾è¦ç´ çStyleã
     * @param {SuperMap.Feature.Vector} feat - éè¦èµäº style çè¦ç´ ã
     */

  }, {
    key: "setStyle",
    value: function setStyle(feat) {
      var feature = feat;
      feature.style = Util.copyAttributes(feature.style, this.defaultStyle); //å°styleèµç»æ ç­¾

      if (this.style && this.style.fontSize && parseFloat(this.style.fontSize) < 12) {
        this.style.fontSize = "12px";
      }

      feature.style = Util.copyAttributes(feature.style, this.style);

      if (this.groupField && this.styleGroups && feature.attributes) {
        var Sf = this.groupField;
        var Attrs = feature.attributes;
        var Gro = this.styleGroups;
        var isSfInAttrs = false; //æå®ç groupField æ¯å¦æ¯geotextçå±æ§å­æ®µä¹ä¸

        var attr = null; //å±æ§å¼

        for (var property in Attrs) {
          if (Sf === property) {
            isSfInAttrs = true;
            attr = Attrs[property];
            break;
          }
        } //å¤æ­å±æ§å¼æ¯å¦å±äºstyleGroupsçæä¸ä¸ªèå´ï¼ä»¥ä¾¿å¯¹æ ç­¾åç»


        if (isSfInAttrs) {
          for (var i = 0, len = Gro.length; i < len; i++) {
            if (attr >= Gro[i].start && attr < Gro[i].end) {
              //feature.style = Util.copyAttributes(feature.style, this.defaultStyle);
              var sty1 = Gro[i].style;

              if (sty1 && sty1.fontSize && parseFloat(sty1.fontSize) < 12) {
                sty1.fontSize = "12px";
              }

              feature.style = Util.copyAttributes(feature.style, sty1);
            }
          }
        }
      } //å°ææ¬åå®¹èµå°æ ç­¾è¦ç´ çstyleä¸


      feature.style.label = feature.geometry.text;
      return feature;
    }
    /**
     * @function mapboxgl.supermap.LabelThemeLayer.prototype.getLabelPxLocation
     * @description è·åæ ç­¾è¦ç´ çåç´ åæ ã
     * @param {SuperMap.Feature.Vector} feature - æ ç­¾è¦ç´ ã
     * @returns {mapboxgl.Point} æ ç­¾ä½ç½®ã
     */

  }, {
    key: "getLabelPxLocation",
    value: function getLabelPxLocation(feature) {
      var geoText = feature.geometry;
      var styleTmp = feature.style; //å°æ ç­¾çå°çä½ç½®è½¬ä¸ºåç´ ä½ç½®

      var locationTmp = geoText.getCentroid();
      var locTmp = this.map.project(new (external_mapboxgl_default()).LngLat(locationTmp.x, locationTmp.y));
      var loc = new (external_mapboxgl_default()).Point(locTmp.x, locTmp.y); //åç§»å¤ç

      if (styleTmp.labelXOffset || styleTmp.labelYOffset) {
        var xOffset = isNaN(styleTmp.labelXOffset) ? 0 : styleTmp.labelXOffset;
        var yOffset = isNaN(styleTmp.labelYOffset) ? 0 : styleTmp.labelYOffset;
        var point = loc.add(new (external_mapboxgl_default()).Point(xOffset, -yOffset));
        return new (external_mapboxgl_default()).Point(point.x, point.y);
      } else {
        return new (external_mapboxgl_default()).Point(loc.x, loc.y);
      }
    }
    /**
     * @function mapboxgl.supermap.LabelThemeLayer.prototype.calculateLabelBounds
     * @description è·å¾æ ç­¾è¦ç´ çæç»èå´ã
     *
     * @param {SuperMap.Feature.Vector} feature - éè¦è®¡ç® bounds çæ ç­¾è¦ç´ æ°ã 
     * @param {mapboxgl.Point} loc - æ ç­¾ä½ç½®ã
     *
     * @returns {Array.<Object>}  åè¾¹å½¢èç¹æ°ç»ãä¾å¦ï¼[{"x":1,"y":1},{"x":3,"y":1},{"x":6,"y":4},{"x":2,"y":10},{"x":1,"y":1}]ã
     */

  }, {
    key: "calculateLabelBounds",
    value: function calculateLabelBounds(feature, loc) {
      var geoText = feature.geometry; //æ ç­¾èå´ï¼æªæè½¬åï¼

      var labB = null;
      var labelInfo = null; //è·åboundsçæ¹å¼

      if (this.getPxBoundsMode == 0) {
        labB = geoText.getLabelPxBoundsByText(loc, feature.style);
      } else if (this.getPxBoundsMode === 1) {
        //canvas
        labelInfo = this.getLabelInfo(feature.geometry.getCentroid(), feature.style);
        labB = geoText.getLabelPxBoundsByLabel(loc, labelInfo.w, labelInfo.h, feature.style);
      } else {
        return null;
      } //æè½¬Bounds


      var boundsQuad = [];

      if (feature.style.labelRotation % 180 == 0) {
        boundsQuad = [{
          "x": labB.left,
          "y": labB.top
        }, {
          "x": labB.right,
          "y": labB.top
        }, {
          "x": labB.right,
          "y": labB.bottom
        }, {
          "x": labB.left,
          "y": labB.bottom
        }, {
          "x": labB.left,
          "y": labB.top
        }];
      } else {
        boundsQuad = this.rotationBounds(labB, loc, feature.style.labelRotation);
      } //éç½®GeoTextçbounds


      geoText.bounds = new Bounds(boundsQuad[1].x, boundsQuad[3].y, boundsQuad[2].x, boundsQuad[4].y);
      return boundsQuad;
    }
    /**
     * @function mapboxgl.supermap.LabelThemeLayer.prototype.calculateLabelBounds2
     * @description è·å¾æ ç­¾è¦ç´ çæç»èå´çå¦ä¸ç§ç®æ³ï¼éè¿è®°å½ä¸çæ ç­¾å®½é«ï¼ï¼æé«è®¡ç® bounds çæçã
     *
     * @param {SuperMap.Feature.Vector} feature - éè¦è®¡ç® bounds çæ ç­¾è¦ç´ æ°ã
     * @param {mapboxgl.Point} loc - æ ç­¾ä½ç½®ã
     *
     * @returns {Array.<Object>}  åè¾¹å½¢èç¹æ°ç»ãä¾å¦ï¼[{"x":1,"y":1},{"x":3,"y":1},{"x":6,"y":4},{"x":2,"y":10},{"x":1,"y":1}]ã
     */

  }, {
    key: "calculateLabelBounds2",
    value: function calculateLabelBounds2(feature, loc) {
      var labB, left, bottom, top, right;
      var labelSize = feature.geometry.bsInfo;
      var style = feature.style;
      var locationPx = Util.cloneObject(loc); //å¤çæå­å¯¹é½

      if (style.labelAlign && style.labelAlign !== "cm") {
        switch (style.labelAlign) {
          case "lt":
            locationPx.x += labelSize.w / 2;
            locationPx.y += labelSize.h / 2;
            break;

          case "lm":
            locationPx.x += labelSize.w / 2;
            break;

          case "lb":
            locationPx.x += labelSize.w / 2;
            locationPx.y -= labelSize.h / 2;
            break;

          case "ct":
            locationPx.y += labelSize.h / 2;
            break;

          case "cb":
            locationPx.y -= labelSize.h / 2;
            break;

          case "rt":
            locationPx.x -= labelSize.w / 2;
            locationPx.y += labelSize.h / 2;
            break;

          case "rm":
            locationPx.x -= labelSize.w / 2;
            break;

          case "rb":
            locationPx.x -= labelSize.w / 2;
            locationPx.y -= labelSize.h / 2;
            break;

          default:
            break;
        }
      }

      left = locationPx.x - labelSize.w / 2;
      bottom = locationPx.y + labelSize.h / 2; //å¤çæä½å­

      if (style.fontStyle && style.fontStyle === "italic") {
        right = locationPx.x + labelSize.w / 2 + parseInt(parseFloat(style.fontSize) / 2);
      } else {
        right = locationPx.x + labelSize.w / 2;
      }

      top = locationPx.y - labelSize.h / 2;
      labB = new Bounds(left, bottom, right, top); //æè½¬Bounds

      var boundsQuad = [];

      if (style.labelRotation % 180 == 0) {
        boundsQuad = [{
          "x": labB.left,
          "y": labB.top
        }, {
          "x": labB.right,
          "y": labB.top
        }, {
          "x": labB.right,
          "y": labB.bottom
        }, {
          "x": labB.left,
          "y": labB.bottom
        }, {
          "x": labB.left,
          "y": labB.top
        }];
      } else {
        boundsQuad = this.rotationBounds(labB, loc, style.labelRotation);
      } //éç½®GeoTextçbounds


      feature.geometry.bounds = new Bounds(boundsQuad[1].x, boundsQuad[3].y, boundsQuad[2].x, boundsQuad[4].y);
      return boundsQuad;
    }
    /**
     * @function mapboxgl.supermap.LabelThemeLayer.prototype.getLabelInfo
     * @description æ ¹æ®å½åä½ç½®è·åç»å¶åçæ ç­¾ä¿¡æ¯ï¼åæ¬æ ç­¾çå®½ï¼é«åè¡æ°ç­ã
     * @returns {Object} ç»å¶åçæ ç­¾ä¿¡æ¯ã
     */

  }, {
    key: "getLabelInfo",
    value: function getLabelInfo(location, style) {
      var LABEL_ALIGN = {
        "l": "left",
        "r": "right",
        "t": "top",
        "b": "bottom"
      },
          LABEL_FACTOR = {
        "l": 0,
        "r": -1,
        "t": 0,
        "b": -1
      };
      style = Util.extend({
        fontColor: "#000000",
        labelAlign: "cm"
      }, style);
      var pt = this.getLocalXY(location);
      var labelWidth = 0;

      if (style.labelXOffset || style.labelYOffset) {
        var xOffset = isNaN(style.labelXOffset) ? 0 : style.labelXOffset;
        var yOffset = isNaN(style.labelYOffset) ? 0 : style.labelYOffset;
        pt[0] += xOffset;
        pt[1] -= yOffset;
      }

      var canvas = document.createElement('canvas');
      canvas.globalAlpha = 0;
      canvas.lineWidth = 1;
      var ctx = canvas.getContext("2d");
      ctx.fillStyle = style.fontColor;
      ctx.globalAlpha = style.fontOpacity || 1.0;
      var fontStyle = [style.fontStyle ? style.fontStyle : "normal", "normal", style.fontWeight ? style.fontWeight : "normal", style.fontSize ? style.fontSize : "1em", style.fontFamily ? style.fontFamily : "sans-serif"].join(" ");
      var labelRows = style.label.split('\n');
      var numRows = labelRows.length;
      var vfactor, lineHeight, labelWidthTmp;

      if (ctx.fillText) {
        // HTML5
        ctx.font = fontStyle;
        ctx.textAlign = LABEL_ALIGN[style.labelAlign[0]] || "center";
        ctx.textBaseline = LABEL_ALIGN[style.labelAlign[1]] || "middle";
        vfactor = LABEL_FACTOR[style.labelAlign[1]];

        if (vfactor == null) {
          vfactor = -.5;
        }

        lineHeight = ctx.measureText('Mg').height || ctx.measureText('xx').width;
        pt[1] += lineHeight * vfactor * (numRows - 1);

        for (var i = 0; i < numRows; i++) {
          labelWidthTmp = ctx.measureText(labelRows[i]).width;

          if (labelWidth < labelWidthTmp) {
            labelWidth = labelWidthTmp;
          }
        }
      } else if (ctx.mozDrawText) {
        // Mozilla pre-Gecko1.9.1 (<FF3.1)
        ctx.mozTextStyle = fontStyle;
        vfactor = LABEL_FACTOR[style.labelAlign[1]];

        if (vfactor == null) {
          vfactor = -.5;
        }

        lineHeight = ctx.mozMeasureText('xx');
        pt[1] += lineHeight * (1 + vfactor * numRows);

        for (var _i = 0; _i < numRows; _i++) {
          labelWidthTmp = ctx.measureText(labelRows[_i]).width;

          if (labelWidth < labelWidthTmp) {
            labelWidth = labelWidthTmp;
          }
        }
      }

      var labelInfo = {}; //æ ç­¾ä¿¡æ¯

      if (labelWidth) {
        labelInfo.w = labelWidth; //æ ç­¾çå®½
      } else {
        return null;
      }

      labelInfo.h = style.fontSize; //ä¸è¡æ ç­¾çé«

      labelInfo.rows = labelRows.length; //æ ç­¾çè¡æ°

      return labelInfo;
    }
    /**
     * @function mapboxgl.supermap.LabelThemeLayer.prototype.rotationBounds
     * @description æè½¬ boundsã
     *
     * @param {SuperMap.Bounds} bounds - è¦æè½¬ç boundsã
     * @param {Object} rotationCenterPoi - æè½¬ä¸­å¿ç¹å¯¹è±¡ï¼æ­¤å¯¹è±¡å«æå±æ§Xï¼æ¨ªåæ ï¼ï¼å±æ§Yï¼çºµåæ ï¼ã
     * @param {number} angle - æè½¬è§åº¦ï¼é¡ºæ¶éï¼ã
     *
     * @returns {Array.<Object>} bounds æè½¬åå½¢æçå¤è¾¹å½¢èç¹æ°ç»ãæ¯ä¸ä¸ªåè¾¹å½¢ï¼å½¢å¦ï¼[{"x":1,"y":1},{"x":3,"y":1},{"x":6,"y":4},{"x":2,"y":10},{"x":1,"y":1}]
     */

  }, {
    key: "rotationBounds",
    value: function rotationBounds(bounds, rotationCenterPoi, angle) {
      var ltPoi = new (external_mapboxgl_default()).Point(bounds.left, bounds.top);
      var rtPoi = new (external_mapboxgl_default()).Point(bounds.right, bounds.top);
      var rbPoi = new (external_mapboxgl_default()).Point(bounds.right, bounds.bottom);
      var lbPoi = new (external_mapboxgl_default()).Point(bounds.left, bounds.bottom);
      var ver = [];
      ver.push(this.getRotatedLocation(ltPoi.x, ltPoi.y, rotationCenterPoi.x, rotationCenterPoi.y, angle));
      ver.push(this.getRotatedLocation(rtPoi.x, rtPoi.y, rotationCenterPoi.x, rotationCenterPoi.y, angle));
      ver.push(this.getRotatedLocation(rbPoi.x, rbPoi.y, rotationCenterPoi.x, rotationCenterPoi.y, angle));
      ver.push(this.getRotatedLocation(lbPoi.x, lbPoi.y, rotationCenterPoi.x, rotationCenterPoi.y, angle)); //boundsæè½¬åå½¢æçå¤è¾¹å½¢èç¹æ°ç»

      var quad = [];

      for (var i = 0; i < ver.length; i++) {
        quad.push({
          "x": ver[i].x,
          "y": ver[i].y
        });
      }

      quad.push({
        "x": ver[0].x,
        "y": ver[0].y
      });
      return quad;
    }
    /**
     * @function mapboxgl.supermap.LabelThemeLayer.prototype.getRotatedLocation
     * @description è·åä¸ä¸ªç¹ç»æè½¬ä¸­å¿é¡ºæ¶éæè½¬åçä½ç½®ï¼æ­¤æ¹æ³ç¨äºå±å¹åæ ï¼ã
     *
     * @param {number} x - æè½¬ç¹æ¨ªåæ ã
     * @param {number} y - æè½¬ç¹çºµåæ ã
     * @param {number} rx - æè½¬ä¸­å¿ç¹æ¨ªåæ ã
     * @param {number} ry - æè½¬ä¸­å¿ç¹çºµåæ ã
     * @param {number} angle - æè½¬è§åº¦ã
     *
     * @returns {Object} æè½¬åçåæ ä½ç½®å¯¹è±¡ï¼è¯¥å¯¹è±¡å«æå±æ§Xï¼æ¨ªåæ ï¼ï¼å±æ§Yï¼çºµåæ ï¼ã
     */

  }, {
    key: "getRotatedLocation",
    value: function getRotatedLocation(x, y, rx, ry, angle) {
      var loc = {},
          x0,
          y0;
      y = -y;
      ry = -ry;
      angle = -angle; //é¡ºæ¶éæè½¬

      x0 = (x - rx) * Math.cos(angle / 180 * Math.PI) - (y - ry) * Math.sin(angle / 180 * Math.PI) + rx;
      y0 = (x - rx) * Math.sin(angle / 180 * Math.PI) + (y - ry) * Math.cos(angle / 180 * Math.PI) + ry;
      loc.x = x0;
      loc.y = -y0;
      return loc;
    }
    /**
     * @function mapboxgl.supermap.LabelThemeLayer.prototype.getAvoidInfo
     * @description è·åé¿è®©çä¿¡æ¯ã
     *
     * @param {SuperMap.Bounds} bounds - å°å¾åç´ èå´ã
     * @param {Array.<Object>} quadrilateral - åè¾¹å½¢èç¹æ°ç»ãä¾å¦ï¼[{"x":1,"y":1},{"x":3,"y":1},{"x":6,"y":4},{"x":2,"y":10},{"x":1,"y":1}]ã
     *
     * @returns {Object} é¿è®©çä¿¡æ¯ã
     */

  }, {
    key: "getAvoidInfo",
    value: function getAvoidInfo(bounds, quadrilateral) {
      if (quadrilateral.length !== 5) {
        return null;
      } //ä¸æ¯åè¾¹å½¢
      //å°boundåºååä¸ºç¹æ°ç»å½¢å¼


      var bounddQuad = [{
        "x": bounds.left,
        "y": bounds.top
      }, {
        "x": bounds.right,
        "y": bounds.top
      }, {
        "x": bounds.right,
        "y": bounds.bottom
      }, {
        "x": bounds.left,
        "y": bounds.bottom
      }, {
        "x": bounds.left,
        "y": bounds.top
      }];
      var isIntersection = false,
          bqLen = bounddQuad.length,
          quadLen = quadrilateral.length;
      var offsetX = 0,
          offsetY = 0,
          aspectH = "",
          aspectW = "";

      for (var i = 0; i < bqLen - 1; i++) {
        for (var j = 0; j < quadLen - 1; j++) {
          var isLineIn = Util.lineIntersection(bounddQuad[i], bounddQuad[i + 1], quadrilateral[j], quadrilateral[j + 1]);

          if (isLineIn.CLASS_NAME === "SuperMap.Geometry.Point") {
            //è®¾ç½®é¿è®©ä¿¡æ¯
            setInfo(quadrilateral[j]);
            setInfo(quadrilateral[j + 1]);
            isIntersection = true;
          }
        }
      }

      if (isIntersection) {
        //ç»ç»é¿è®©æä½æéçä¿¡æ¯
        return {
          "aspectW": aspectW,
          "aspectH": aspectH,
          "offsetX": offsetX,
          "offsetY": offsetY
        };
      } else {
        return null;
      } //åé¨å½æ°ï¼è®¾ç½®é¿è®©ä¿¡æ¯
      //åæ°ï¼{Object} vec- quadrilateralåè¾¹å½¢åä¸ªèç¹ãå¦ï¼{"x":1,"y":1}ã


      function setInfo(vec) {
        //åè¾¹å½¢ä¸å¨boundsåçèç¹
        if (!bounds.contains(vec.x, vec.y)) {
          //boundsçTopè¾¹
          if (vec.y < bounds.top) {
            var oY = Math.abs(bounds.top - vec.y);

            if (oY > offsetY) {
              offsetY = oY;
              aspectH = "top";
            }
          } //boundsçBottomè¾¹


          if (vec.y > bounds.bottom) {
            var _oY = Math.abs(vec.y - bounds.bottom);

            if (_oY > offsetY) {
              offsetY = _oY;
              aspectH = "bottom";
            }
          } //boundsçleftè¾¹


          if (vec.x < bounds.left) {
            var oX = Math.abs(bounds.left - vec.x);

            if (oX > offsetX) {
              offsetX = oX;
              aspectW = "left";
            }
          } //boundsçrightè¾¹


          if (vec.x > bounds.right) {
            var _oX = Math.abs(vec.x - bounds.right);

            if (_oX > offsetX) {
              offsetX = _oX;
              aspectW = "right";
            }
          }
        }
      }
    }
    /**
     * @function mapboxgl.supermap.LabelThemeLayer.prototype.isQuadrilateralOverLap
     * @description å¤æ­ä¸¤ä¸ªåè¾¹å½¢æ¯å¦æåçã
     * @param {Array.<Object>} quadrilateral - åè¾¹å½¢èç¹æ°ç»ãä¾å¦ï¼[{"x":1,"y":1},{"x":3,"y":1},{"x":6,"y":4},{"x":2,"y":10},{"x":1,"y":1}]ã
     * @param {Array.<Object>} quadrilateral2 - ç¬¬äºä¸ªåè¾¹å½¢èç¹æ°ç»ã
     * @returns {boolean} æ¯å¦åçï¼true è¡¨ç¤ºåçã
     */

  }, {
    key: "isQuadrilateralOverLap",
    value: function isQuadrilateralOverLap(quadrilateral, quadrilateral2) {
      var quadLen = quadrilateral.length,
          quad2Len = quadrilateral2.length;

      if (quadLen !== 5 || quad2Len !== 5) {
        return null;
      } //ä¸æ¯åè¾¹å½¢


      var OverLap = false; //å¦æä¸¤åè¾¹å½¢äºä¸åå«å¯¹æ¹çèç¹ï¼åä¸¤ä¸ªåè¾¹å½¢ä¸ç¸äº¤

      for (var i = 0; i < quadLen; i++) {
        if (this.isPointInPoly(quadrilateral[i], quadrilateral2)) {
          OverLap = true;
          break;
        }
      }

      for (var _i2 = 0; _i2 < quad2Len; _i2++) {
        if (this.isPointInPoly(quadrilateral2[_i2], quadrilateral)) {
          OverLap = true;
          break;
        }
      } //å ä¸ä¸¤ç©å½¢åå­ç¸äº¤çæåµ


      for (var _i3 = 0; _i3 < quadLen - 1; _i3++) {
        if (OverLap) {
          break;
        }

        for (var j = 0; j < quad2Len - 1; j++) {
          var isLineIn = Util.lineIntersection(quadrilateral[_i3], quadrilateral[_i3 + 1], quadrilateral2[j], quadrilateral2[j + 1]);

          if (isLineIn.CLASS_NAME === "SuperMap.Geometry.Point") {
            OverLap = true;
            break;
          }
        }
      }

      return OverLap;
    }
    /**
     * @function mapboxgl.supermap.LabelThemeLayer.prototype.isPointInPoly
     * @description å¤æ­ä¸ä¸ªç¹æ¯å¦å¨å¤è¾¹å½¢éé¢ã(å°çº¿æ³)
     *
     * @param {Object} pt - éè¦å¤å®çç¹å¯¹è±¡ï¼è¯¥å¯¹è±¡å«æå±æ§x(æ¨ªåæ )ï¼å±æ§y(çºµåæ )ã
     * @param {Array.<Object>} poly - å¤è¾¹å½¢èç¹æ°ç»ãä¾å¦ä¸ä¸ªåè¾¹å½¢ï¼[{"x":1,"y":1},{"x":3,"y":1},{"x":6,"y":4},{"x":2,"y":10},{"x":1,"y":1}]
     * @returns {boolean} ç¹æ¯å¦å¨å¤è¾¹å½¢åã
     */

  }, {
    key: "isPointInPoly",
    value: function isPointInPoly(pt, poly) {
      for (var isIn = false, i = -1, l = poly.length, j = l - 1; ++i < l; j = i) {
        (poly[i].y <= pt.y && pt.y < poly[j].y || poly[j].y <= pt.y && pt.y < poly[i].y) && pt.x < (poly[j].x - poly[i].x) * (pt.y - poly[i].y) / (poly[j].y - poly[i].y) + poly[i].x && (isIn = !isIn);
      }

      return isIn;
    }
  }]);

  return Label;
}(GeoFeature);
(external_mapboxgl_default()).supermap.LabelThemeLayer = LabelThemeLayer_Label;
// CONCATENATED MODULE: external "function(){try{return mapv}catch(e){return {}}}()"
var external_function_try_return_mapv_catch_e_return_namespaceObject = function(){try{return mapv}catch(e){return {}}}();
// CONCATENATED MODULE: ./src/mapboxgl/overlay/mapv/MapvRenderer.js
function MapvRenderer_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { MapvRenderer_typeof = function _typeof(obj) { return typeof obj; }; } else { MapvRenderer_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return MapvRenderer_typeof(obj); }

function MapvRenderer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function MapvRenderer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function MapvRenderer_createClass(Constructor, protoProps, staticProps) { if (protoProps) MapvRenderer_defineProperties(Constructor.prototype, protoProps); if (staticProps) MapvRenderer_defineProperties(Constructor, staticProps); return Constructor; }

function MapvRenderer_get(target, property, receiver) { if (typeof Reflect !== "undefined" && Reflect.get) { MapvRenderer_get = Reflect.get; } else { MapvRenderer_get = function _get(target, property, receiver) { var base = MapvRenderer_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return MapvRenderer_get(target, property, receiver || target); }

function MapvRenderer_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = MapvRenderer_getPrototypeOf(object); if (object === null) break; } return object; }

function MapvRenderer_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) MapvRenderer_setPrototypeOf(subClass, superClass); }

function MapvRenderer_setPrototypeOf(o, p) { MapvRenderer_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return MapvRenderer_setPrototypeOf(o, p); }

function MapvRenderer_createSuper(Derived) { var hasNativeReflectConstruct = MapvRenderer_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = MapvRenderer_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = MapvRenderer_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return MapvRenderer_possibleConstructorReturn(this, result); }; }

function MapvRenderer_possibleConstructorReturn(self, call) { if (call && (MapvRenderer_typeof(call) === "object" || typeof call === "function")) { return call; } return MapvRenderer_assertThisInitialized(self); }

function MapvRenderer_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function MapvRenderer_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function MapvRenderer_getPrototypeOf(o) { MapvRenderer_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return MapvRenderer_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



var BaseLayer = external_function_try_return_mapv_catch_e_return_namespaceObject.baiduMapLayer ? external_function_try_return_mapv_catch_e_return_namespaceObject.baiduMapLayer.__proto__ : Function;
/**
 * @private
 * @class MapvRenderer
 * @classdesc MapVå¾å±æ¸²æã
 * @param {Object} map - å°å¾ã
 * @param {Object} layer - å¾å±ã
 * @param {MapV.DataSet} dataSet - æ°æ®éã
 * @param {Object} options - äº¤äºæ¶æéå¯éåæ°ã
 * @extends {MapV.BaseLayer}
 *
 */

var MapvRenderer = /*#__PURE__*/function (_BaseLayer) {
  MapvRenderer_inherits(MapvRenderer, _BaseLayer);

  var _super = MapvRenderer_createSuper(MapvRenderer);

  function MapvRenderer(map, layer, dataSet, options) {
    var _this;

    MapvRenderer_classCallCheck(this, MapvRenderer);

    _this = _super.call(this, map, dataSet, options);

    if (!BaseLayer) {
      return MapvRenderer_possibleConstructorReturn(_this);
    }

    _this.map = map;

    var self = MapvRenderer_assertThisInitialized(_this);

    options = options || {};
    self.init(options);
    self.argCheck(options);
    _this.canvasLayer = layer;
    _this.stopAniamation = false;
    _this.animation = options.animation;
    _this.clickEvent = _this.clickEvent.bind(MapvRenderer_assertThisInitialized(_this));
    _this.mousemoveEvent = _this.mousemoveEvent.bind(MapvRenderer_assertThisInitialized(_this));

    _this.bindMapEvent();

    _this.bindEvent();

    _this._expectShow = true;
    return _this;
  }
  /**
   * @function MapvRenderer.prototype.clickEvent
   * @description  ç¹å»ç»å®äºä»¶ã
   * @param {Object} e - äºä»¶ã
   */


  MapvRenderer_createClass(MapvRenderer, [{
    key: "clickEvent",
    value: function clickEvent(e) {
      var pixel = e.point;

      MapvRenderer_get(MapvRenderer_getPrototypeOf(MapvRenderer.prototype), "clickEvent", this).call(this, pixel, e);
    }
    /**
     * @function MapvRenderer.prototype.mousemoveEvent
     * @description  é¼ æ ç§»å¨äºä»¶ã
     * @param {Object} e - äºä»¶ã
     */

  }, {
    key: "mousemoveEvent",
    value: function mousemoveEvent(e) {
      var pixel = e.point;

      MapvRenderer_get(MapvRenderer_getPrototypeOf(MapvRenderer.prototype), "mousemoveEvent", this).call(this, pixel, e);
    }
    /**
     * @function MapvRenderer.prototype.bindEvent
     * @description ç»å®äºä»¶ã
     */

  }, {
    key: "bindEvent",
    value: function bindEvent() {
      var map = this.map;

      if (this.options.methods) {
        if (this.options.methods.click) {
          map.on('click', this.clickEvent);
        }

        if (this.options.methods.mousemove) {
          map.on('mousemove', this.mousemoveEvent);
        }
      }
    }
    /**
     * @function MapvRenderer.prototype.unbindEvent
     * @description è§£ç»äºä»¶ã
     */

  }, {
    key: "unbindEvent",
    value: function unbindEvent() {
      var map = this.map;

      if (this.options.methods) {
        if (this.options.methods.click) {
          map.off('click', this.clickEvent);
        }

        if (this.options.methods.mousemove) {
          map.off('mousemove', this.mousemoveEvent);
        }
      }
    }
    /**
     * @function MapvRenderer.prototype.getContext
     * @description è·åä¿¡æ¯ã
     */

  }, {
    key: "getContext",
    value: function getContext() {
      return this.canvasLayer.canvas.getContext(this.context);
    }
    /**
     * @function MapvRenderer.prototype.addData
     * @description æ·»å æ°æ®ã
     * @param {oject} data - å¾æ·»å çæ°æ®ã
     * @param {oject} options - å¾æ·»å çæ°æ®ä¿¡æ¯ã
     */

  }, {
    key: "addData",
    value: function addData(data, options) {
      var _data = data;

      if (data && data.get) {
        _data = data.get();
      }

      this.dataSet.add(_data);
      this.update({
        options: options
      });
    }
    /**
     * @function MapvRenderer.prototype.update
     * @description æ´æ°å¾å±ã
     * @param {Object} opt - å¾æ´æ°çæ°æ®ã
     * @param {Object} opt.data - mapv æ°æ®éã
     * @param {Object} opt.options - mapv ç»å¶åæ°ã
     */

  }, {
    key: "update",
    value: function update(opt) {
      var update = opt || {};
      var _data = update.data;

      if (_data && _data.get) {
        _data = _data.get();
      }

      if (_data != undefined) {
        this.dataSet.set(_data);
      }

      MapvRenderer_get(MapvRenderer_getPrototypeOf(MapvRenderer.prototype), "update", this).call(this, {
        options: update.options
      });
    }
    /**
     * @function MapvRenderer.prototype.getData
     * @description è·åæ°æ®ã
     */

  }, {
    key: "getData",
    value: function getData() {
      return this.dataSet;
    }
    /**
     * @function MapvRenderer.prototype.removeData
     * @description å é¤ç¬¦åè¿æ»¤æ¡ä»¶çæ°æ®ã
     * @param {function} [filter] - è¿æ»¤æ¡ä»¶ãæ¡ä»¶åæ°ä¸ºæ°æ®é¡¹ï¼è¿åå¼ä¸ºtrue,è¡¨ç¤ºå é¤è¯¥åç´ ï¼å¦åè¡¨ç¤ºä¸å é¤ã
     */

  }, {
    key: "removeData",
    value: function removeData(_filter) {
      if (!this.dataSet) {
        return;
      }

      var newData = this.dataSet.get({
        filter: function filter(data) {
          return _filter != null && typeof _filter === 'function' ? !_filter(data) : true;
        }
      });
      this.dataSet.set(newData);
      this.update({
        options: null
      });
    }
    /**
     * @function MapVRenderer.prototype.clearData
     * @description æ¸é¤æ°æ®ã
     */

  }, {
    key: "clearData",
    value: function clearData() {
      this.dataSet && this.dataSet.clear();
      this.update({
        options: null
      });
    }
    /**
     * @function MapVRenderer.prototype.updateData
     * @param {Object} dataSet - æ°æ®éã
     * @param {Object} options - æ°æ®é¡¹éç½®ã
     * @description  æ´æ°æ°æ®ã
     */

  }, {
    key: "updateData",
    value: function updateData(dataSet, options) {
      if (dataSet && dataSet.get) {
        this.dataSet.set(dataSet.get());
      }

      this.update({
        options: options
      });
    }
  }, {
    key: "_canvasUpdate",
    value: function _canvasUpdate(time) {
      var map = this.map;

      if (!this.canvasLayer || this.stopAniamation) {
        return;
      }

      var self = this;
      var animationOptions = self.options.animation;
      var context = this.getContext();

      if (self.isEnabledTime()) {
        if (time === undefined) {
          this.clear(context);
          return;
        }

        if (this.context === '2d') {
          context.save();
          context.globalCompositeOperation = 'destination-out';
          context.fillStyle = 'rgba(0, 0, 0, .1)';
          context.fillRect(0, 0, context.canvas.width, context.canvas.height);
          context.restore();
        }
      } else {
        this.clear(context);
      }

      if (this.context === '2d') {
        for (var key in self.options) {
          context[key] = self.options[key];
        }
      } else {
        context.clear(context.COLOR_BUFFER_BIT);
      }

      if (self.options.minZoom && map.getZoom() < self.options.minZoom || self.options.maxZoom && map.getZoom() > self.options.maxZoom) {
        return;
      }

      var bounds = map.getBounds(),
          dw = bounds.getEast() - bounds.getWest(),
          dh = bounds.getNorth() - bounds.getSouth();
      var resolutionX = dw / this.canvasLayer.canvas.width,
          resolutionY = dh / this.canvasLayer.canvas.height; // ä¸ä¸ªåç´ æ¯å¤å°ç±³

      var zoomUnit = getMeterPerMapUnit('DEGREE') * resolutionX;
      var center = map.getCenter();
      var centerPx = map.project(center);
      var dataGetOptions = {
        transferCoordinate: function transferCoordinate(coordinate) {
          if (map.transform.rotationMatrix || self.context === '2d') {
            var worldPoint = map.project(new (external_mapboxgl_default()).LngLat(coordinate[0], coordinate[1]));
            return [worldPoint.x, worldPoint.y];
          }

          var pixel = [(coordinate[0] - center.lng) / resolutionX, (center.lat - coordinate[1]) / resolutionY];
          return [pixel[0] + centerPx.x, pixel[1] + centerPx.y];
        }
      };

      if (time !== undefined) {
        dataGetOptions.filter = function (item) {
          var trails = animationOptions.trails || 10;
          return time && item.time > time - trails && item.time < time;
        };
      }

      var data = self.dataSet.get(dataGetOptions);
      this.processData(data); // å¼å®¹unitä¸º'm'çæåµ

      if (self.options.unit === 'm') {
        if (self.options.size) {
          self.options._size = self.options.size / zoomUnit;
        }

        if (self.options.width) {
          self.options._width = self.options.width / zoomUnit;
        }

        if (self.options.height) {
          self.options._height = self.options.height / zoomUnit;
        }
      } else {
        self.options._size = self.options.size;
        self.options._height = self.options.height;
        self.options._width = self.options.width;
      }

      var worldPoint = map.project(new (external_mapboxgl_default()).LngLat(0, 0));
      this.drawContext(context, data, self.options, worldPoint);
      self.options.updateCallback && self.options.updateCallback(time);
    }
  }, {
    key: "init",
    value: function init(options) {
      var self = this;
      self.options = options;
      this.initDataRange(options);
      this.context = self.options.context || '2d';

      if (self.options.zIndex) {
        this.canvasLayer && this.canvasLayer.setZIndex(self.options.zIndex);
      }

      this.initAnimator();
    }
    /**
     * @function L.supermap.MapVRenderer.prototype.bindMapEvent
     * @description ç»å®é¼ æ ç§»å¨äºä»¶ã
     */

  }, {
    key: "bindMapEvent",
    value: function bindMapEvent() {
      this.mapEvent = {
        resizeEvent: this.resizeEvent.bind(this),
        zoomStartEvent: this.zoomStartEvent.bind(this),
        zoomEndEvent: this.zoomEndEvent.bind(this),
        rotateStartEvent: this.rotateStartEvent.bind(this),
        rotateEvent: this.rotateEvent.bind(this),
        moveStartEvent: this.moveStartEvent.bind(this),
        rotateEndEvent: this.rotateEndEvent.bind(this),
        moveEvent: this.moveEvent.bind(this),
        moveEndEvent: this.moveEndEvent.bind(this),
        removeEvent: this.removeEvent.bind(this)
      };
      this.map.on('resize', this.mapEvent.resizeEvent);
      this.map.on('zoomstart', this.mapEvent.zoomStartEvent);
      this.map.on('zoomend', this.mapEvent.zoomEndEvent);
      this.map.on('rotatestart', this.mapEvent.rotateStartEvent);
      this.map.on('rotate', this.mapEvent.rotateEvent);
      this.map.on('rotateend', this.mapEvent.rotateEndEvent); // this.map.on('dragend', this.dragEndEvent.bind(this));

      this.map.on('movestart', this.mapEvent.moveStartEvent);
      this.map.on('move', this.mapEvent.moveEvent);
      this.map.on('moveend', this.mapEvent.moveEndEvent);
      this.map.on('remove', this.mapEvent.removeEvent);
    }
    /**
     * @function L.supermap.MapVRenderer.prototype.unbindMapEvent
     * @description è§£ç»é¼ æ ç§»å¨äºä»¶ã
     */

  }, {
    key: "unbindMapEvent",
    value: function unbindMapEvent() {
      this.map.off('resize', this.mapEvent.resizeEvent);
      this.map.off('zoomstart', this.mapEvent.zoomStartEvent);
      this.map.off('zoomend', this.mapEvent.zoomEndEvent);
      this.map.off('rotatestart', this.mapEvent.rotateStartEvent);
      this.map.off('rotate', this.mapEvent.rotateEvent);
      this.map.off('rotateend', this.mapEvent.rotateEndEvent);
      this.map.off('movestart', this.mapEvent.moveStartEvent);
      this.map.off('move', this.mapEvent.moveEvent);
      this.map.off('moveend', this.mapEvent.moveEndEvent);
      this.map.off('remove', this.mapEvent.removeEvent);
    }
    /**
     * @function L.supermap.MapVRenderer.prototype.destroy
     * @description éæ¾èµæºã
     */

  }, {
    key: "destroy",
    value: function destroy() {
      this.unbindMapEvent();
      this.unbindEvent();
      this.clearData();
      this.animator && this.animator.stop();
      this.animator = null;
      this.canvasLayer = null;
    }
    /**
     * @function MapvRenderer.prototype.addAnimatorEvent
     * @description æ·»å å¨ç»äºä»¶ã
     */

  }, {
    key: "addAnimatorEvent",
    value: function addAnimatorEvent() {}
    /**
     * @function MapvRenderer.prototype.removeEvent
     * @description ç§»é¤äºä»¶ã
     */

  }, {
    key: "removeEvent",
    value: function removeEvent() {
      this.canvasLayer.mapContainer.removeChild(this.canvasLayer.canvas);
    }
    /**
     * @function MapvRenderer.prototype.resizeEvent
     * @description è°æ´äºä»¶ã
     */

  }, {
    key: "resizeEvent",
    value: function resizeEvent() {
      this.canvasLayer.mapContainer.style.perspective = this.map.transform.cameraToCenterDistance + 'px';
      var canvas = this.canvasLayer.canvas;
      canvas.style.position = 'absolute';
      canvas.style.top = 0 + 'px';
      canvas.style.left = 0 + 'px';
      var global$2 = typeof window === 'undefined' ? {} : window;
      var devicePixelRatio = this.canvasLayer.devicePixelRatio = global$2.devicePixelRatio || 1;
      canvas.width = parseInt(this.map.getCanvas().style.width) * devicePixelRatio;
      canvas.height = parseInt(this.map.getCanvas().style.height) * devicePixelRatio;

      if (!this.canvasLayer.mapVOptions.context || this.canvasLayer.mapVOptions.context == '2d') {
        canvas.getContext('2d').scale(devicePixelRatio, devicePixelRatio);
      }

      canvas.style.width = this.map.getCanvas().style.width;
      canvas.style.height = this.map.getCanvas().style.height;
    }
  }, {
    key: "moveEndEvent",
    value: function moveEndEvent() {
      this.stopAniamation = false;
      var canvas = this.getContext().canvas;
      canvas.style.transform = '';

      this._canvasUpdate();

      if (this._expectShow === true) {
        this._show();
      }
    }
  }, {
    key: "moveStartEvent",
    value: function moveStartEvent() {
      this.startPitch = this.map.getPitch();
      this.startBearing = this.map.getBearing();
      var startMovePoint = this.map.project(new (external_mapboxgl_default()).LngLat(0, 0));
      this.startMoveX = startMovePoint.x;
      this.startMoveY = startMovePoint.y;

      if (this.animation) {
        this.stopAniamation = true;
      }

      if (this.rotating || this.zooming) {
        return;
      }

      this._expectShow = this.canvasLayer.canvas.style.display !== 'none';

      if (this.map.getPitch() !== 0) {
        this._hide();
      }
    }
  }, {
    key: "moveEvent",
    value: function moveEvent() {
      this.canvasLayer.mapContainer.style.perspective = this.map.transform.cameraToCenterDistance + 'px';
      var tPitch = this.map.getPitch() - this.startPitch;
      var tBearing = -this.map.getBearing() + this.startBearing;
      var endMovePoint = this.map.project(new (external_mapboxgl_default()).LngLat(0, 0));
      var tMoveX = endMovePoint.x - this.startMoveX;
      var tMoveY = endMovePoint.y - this.startMoveY;
      var canvas = this.getContext().canvas;
      canvas.style.transform = 'rotateX(' + tPitch + 'deg)' + ' rotateZ(' + tBearing + 'deg)' + ' translate3d(' + tMoveX + 'px, ' + tMoveY + 'px, 0px)';
    }
  }, {
    key: "zoomStartEvent",
    value: function zoomStartEvent() {
      this.zooming = true;

      this._hide();
    }
  }, {
    key: "zoomEndEvent",
    value: function zoomEndEvent() {
      this.zooming = false;
    }
  }, {
    key: "rotateStartEvent",
    value: function rotateStartEvent() {
      this.rotating = true;

      if (this.map.getPitch() !== 0) {
        this._hide();
      }
    }
  }, {
    key: "rotateEvent",
    value: function rotateEvent() {
      this.canvasLayer.mapContainer.style.perspective = this.map.transform.cameraToCenterDistance + 'px';
      var tPitch = this.map.getPitch() - this.startPitch;
      var tBearing = -this.map.getBearing() + this.startBearing;
      var canvas = this.getContext().canvas;
      canvas.style.transform = 'rotateX(' + tPitch + 'deg)' + ' rotateZ(' + tBearing + 'deg)';
    }
  }, {
    key: "rotateEndEvent",
    value: function rotateEndEvent() {
      this.rotating = false;
    }
    /**
     * @function MapvRenderer.prototype.clear
     * @param {Object} context - å½åç¯å¢ã
     * @description æ¸é¤ç¯å¢ã
     */

  }, {
    key: "clear",
    value: function clear(context) {
      context && context.clearRect && context.clearRect(0, 0, parseInt(this.map.getCanvas().style.width), parseInt(this.map.getCanvas().style.height));
    }
    /**
     * @function MapvRenderer.prototype.draw
     * @description æ¸²æç»å¶ã
     */

  }, {
    key: "draw",
    value: function draw() {
      this._canvasUpdate();
    }
  }, {
    key: "_hide",
    value: function _hide() {
      this.canvasLayer.canvas.style.display = 'none';
    }
  }, {
    key: "_show",
    value: function _show() {
      this.canvasLayer.canvas.style.display = 'block';
    }
  }]);

  return MapvRenderer;
}(BaseLayer);
// CONCATENATED MODULE: ./src/mapboxgl/overlay/MapvLayer.js
function MapvLayer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function MapvLayer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function MapvLayer_createClass(Constructor, protoProps, staticProps) { if (protoProps) MapvLayer_defineProperties(Constructor.prototype, protoProps); if (staticProps) MapvLayer_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class mapboxgl.supermap.MapvLayer
 * @category  Visualization MapV
 * @classdesc Mapv å¾å±ã
 * @param {mapboxgl.Map} map - mapboxgl å°å¾å¯¹è±¡ï¼å°å¨ä¸ä¸ªçæ¬å¼ç¨ï¼è¯·ç¨ map.addLayer() æ¹æ³æ·»å å¾å±ã
 * @param {Mapv.DataSet} dataSet - MapV å¾å±æ°æ®éã
 * @param {Object} mapVOptions - Mapv åæ°ã
 * @param {string} [mapVOptions.layerID] - å¾å± IDãé»è®¤ä½¿ç¨ CommonUtil.createUniqueID("mapvLayer_") åå»ºä¸é¢å¾å± IDã
 */

var MapvLayer = /*#__PURE__*/function () {
  function MapvLayer(map, dataSet, mapVOptions) {
    MapvLayer_classCallCheck(this, MapvLayer);

    this.map = map;
    this.id = mapVOptions.layerID ? mapVOptions.layerID : Util.createUniqueID('mapvLayer_');
    delete mapVOptions['layerID'];
    this.mapVOptions = mapVOptions;
    this.dataSet = dataSet;
    this.visibility = true; //ä¿çä¹åçç¨æ³

    if (this.map) {
      this.map.addLayer(this);
    }
  }

  MapvLayer_createClass(MapvLayer, [{
    key: "onAdd",
    value: function onAdd(map) {
      this.map = map;
      this.renderer = new MapvRenderer(this.map, this, this.dataSet, this.mapVOptions);
      this.canvas = this._createCanvas();

      this.renderer._canvasUpdate();

      this.mapContainer = map.getCanvasContainer();
      this.mapContainer.appendChild(this.canvas);
      this.mapContainer.style.perspective = this.map.transform.cameraToCenterDistance + 'px';
    }
    /**
     * @function mapboxgl.supermap.MapvLayer.prototype.removeFromMap
     * @description ç§»é¤å¾å±ã
     */

  }, {
    key: "removeFromMap",
    value: function removeFromMap() {
      this.mapContainer.removeChild(this.canvas);
      this.renderer.destroy();
    }
    /**
     * @function mapboxgl.supermap.MapvLayer.prototype.setVisibility
     * @description è®¾ç½®å¾å±å¯è§æ§ï¼è®¾ç½®å¾å±çéèï¼æ¾ç¤ºï¼éç»çç¸åºçå¯è§æ è®°ã
     * @param {boolean} [visibility] - æ¯å¦æ¾ç¤ºå¾å±ï¼å½åå°å¾ç resolution å¨æå¤§æå° resolution ä¹é´ï¼ã
     */

  }, {
    key: "setVisibility",
    value: function setVisibility(visibility) {
      if (visibility !== this.visibility) {
        this.visibility = visibility;

        if (visibility) {
          this.show();
        } else {
          this.hide();
        }
      }
    }
    /**
     * @function mapboxgl.supermap.MapvLayer.prototype.moveTo
     * @description å°å¾å±ç§»å¨å°æä¸ªå¾å±ä¹åã
     * @param {string} layerID - å¾æå¥çå¾å± IDã
     * @param {boolean} [before=true] - æ¯å¦å°æ¬å¾å±æå¥å°å¾å± id ä¸º layerID çå¾å±ä¹å(å¦æä¸º false åå°æ¬å¾å±æå¥å°å¾å± id ä¸º layerID çå¾å±ä¹å)ã
     */

  }, {
    key: "moveTo",
    value: function moveTo(layerID, before) {
      var layer = document.getElementById(this.canvas.id);
      before = before !== undefined ? before : true;

      if (before) {
        var beforeLayer = document.getElementById(layerID);

        if (layer && beforeLayer) {
          beforeLayer.parentNode.insertBefore(layer, beforeLayer);
        }

        return;
      }

      var nextLayer = document.getElementById(layerID);

      if (layer) {
        if (nextLayer.nextSibling) {
          nextLayer.parentNode.insertBefore(layer, nextLayer.nextSibling);
          return;
        }

        nextLayer.parentNode.appendChild(layer);
      }
    }
    /**
     * @function mapboxgl.supermap.MapvLayer.prototype.getTopLeft
     * @description è·åå·¦ä¸çè·ç¦»ã
     */

  }, {
    key: "getTopLeft",
    value: function getTopLeft() {
      var map = this.map;
      var topLeft;

      if (map) {
        var bounds = map.getBounds();
        topLeft = bounds.getNorthWest();
      }

      return topLeft;
    }
    /**
     * @function mapboxgl.supermap.MapvLayer.prototype.addData
     * @description è¿½å æ°æ®ã
     * @param {Object} data - è¦è¿½å çæ°æ®ã
     * @param {Object} options - è¦è¿½å çå¼ã
     */

  }, {
    key: "addData",
    value: function addData(data, options) {
      this.renderer.addData(data, options);
    }
    /**
     * @function mapboxgl.supermap.MapvLayer.prototype.update
     * @description æ´æ°å¾å±ã
     * @param {Object} opt - å¾æ´æ°çæ°æ®ã
     * @param {Object} opt.data - mapv æ°æ®éã
     * @param {Object} opt.options - mapv ç»å¶åæ°ã
     */

  }, {
    key: "update",
    value: function update(opt) {
      this.renderer.update(opt);
    }
    /**
     * @function mapboxgl.supermap.MapvLayer.prototype.getData
     * @description è·åæ°æ®ã
     * @returns {mapv.DataSet} mapv æ°æ®éã
     */

  }, {
    key: "getData",
    value: function getData() {
      if (this.renderer) {
        this.dataSet = this.renderer.getData();
      }

      return this.dataSet;
    }
    /**
     * @function mapboxgl.supermap.MapvLayer.prototype.removeData
     * @description å é¤ç¬¦åè¿æ»¤æ¡ä»¶çæ°æ®ã
     * @param {function} [filter] - è¿æ»¤æ¡ä»¶ãæ¡ä»¶åæ°ä¸ºæ°æ®é¡¹ï¼è¿åå¼ä¸º true,è¡¨ç¤ºå é¤è¯¥åç´ ï¼å¦åè¡¨ç¤ºä¸å é¤ã
     * @example
     * filter=function(data){
     *    if(data.id=="1"){
     *      return true
     *    }
     *    return false;
     * }
     */

  }, {
    key: "removeData",
    value: function removeData(filter) {
      this.renderer && this.renderer.removeData(filter);
    }
    /**
     * @function mapboxgl.supermap.MapvLayer.prototype.clearData
     * @description æ¸é¤æ°æ®ã
     */

  }, {
    key: "clearData",
    value: function clearData() {
      this.renderer.clearData();
    }
  }, {
    key: "show",
    value: function show() {
      if (this.renderer) {
        this.renderer._show();
      }

      return this;
    }
  }, {
    key: "hide",
    value: function hide() {
      if (this.renderer) {
        this.renderer._hide();
      }

      return this;
    }
  }, {
    key: "_createCanvas",
    value: function _createCanvas() {
      var canvas = document.createElement('canvas');
      canvas.id = this.id;
      canvas.style.position = 'absolute';
      canvas.style.top = 0 + 'px';
      canvas.style.left = 0 + 'px';
      var global$2 = typeof window === 'undefined' ? {} : window;
      var devicePixelRatio = this.devicePixelRatio = global$2.devicePixelRatio || 1;
      canvas.width = parseInt(this.map.getCanvas().style.width) * devicePixelRatio;
      canvas.height = parseInt(this.map.getCanvas().style.height) * devicePixelRatio;

      if (!this.mapVOptions.context || this.mapVOptions.context == '2d') {
        canvas.getContext('2d').scale(devicePixelRatio, devicePixelRatio);
      }

      canvas.style.width = this.map.getCanvas().style.width;
      canvas.style.height = this.map.getCanvas().style.height;
      return canvas;
    }
    /**
     * @function mapboxgl.supermap.MapvLayer.prototype.setZIndex
     * @description è®¾ç½® canvas å±çº§ã
     * @param {number} zIndex - canvas å±çº§ã
     */

  }, {
    key: "setZIndex",
    value: function setZIndex(z) {
      this.canvas.style.zIndex = z;
    }
  }]);

  return MapvLayer;
}();
(external_mapboxgl_default()).supermap.MapvLayer = MapvLayer;
// CONCATENATED MODULE: ./src/mapboxgl/overlay/theme/Theme3DLayer.js
function Theme3DLayer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Theme3DLayer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Theme3DLayer_createClass(Constructor, protoProps, staticProps) { if (protoProps) Theme3DLayer_defineProperties(Constructor.prototype, protoProps); if (staticProps) Theme3DLayer_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class mapboxgl.supermap.Theme3DLayer
 * @category  Visualization Theme
 * @classdesc ä¸ç»´ä¸é¢å¾åºç±»,ä¸è½ç´æ¥å®ä¾åã
 * @param  {string} [id] - ä¸é¢å¾å¾å± idãé»è®¤ä½¿ç¨ CommonUtil.createUniqueID("theme3DLayer") åå»ºä¸é¢å¾å± IDã
 * @param  {Object} layerOptions -ä¸é¢å¾å¾å±éç½®é¡¹ã
 * @param  {number} [layerOptions.opacity=1] - å¾å±éæåº¦ã
 * @param  {boolean} [layerOptions.parseNumber=fasle] - æ¯å¦é¢å¤çæ°æ®ï¼å°æ°æ®è½¬æ¢ä¸º numberã
 * @param  {boolean} [layerOptions.enableHighlight=false] - æ¯å¦å¼å¯é«äº®ã
 * @param  {string} [layerOptions.highlight="#ADA91E"] - é«äº®é¢è²ã
 * @param  {string} [layerOptions.baseHeightField] - æ°æ®ä¸­è¡¨ç¤ºåºç¡é«åº¦çå­æ®µã
 * @param  {number} [layerOptions.height] - é«åº¦ãå¦ææ°æ®æå®ç heightField (ä¸ºheight)æ²¡æå¯ä»¥è¡¨ç¤ºé«åº¦çå­æ®µï¼å¯ä»¥ä¸ºæææ°æ®ç»ä¸è®¾ç½®ä¸ä¸ªé«åº¦ã
 * @param  {string} [layerOptions.heightField] - æ°æ®ä¸­è¡¨ç¤ºé«åº¦çå­æ®µã
 * @param  {string} [layerOptions.themeField] - ä¸é¢å±ç¤ºçå­æ®µã
 * @param  {boolean} [playerOptions.showLegend=true] - æ¯å¦æ¾ç¤ºå¾ä¾ã
 * @param  {string} [layerOptions.legendTitle] - å¾ä¾æ é¢ã
 * @param  {string} [layerOptions.legendTheme='light'] - å¾ä¾ä¸»é¢ï¼åå¼ï¼'light','dark'ã
 * @param  {string} [layerOptions.legendOrientation='horizontal'] - å¾ä¾æ¹åï¼åå¼ï¼'horizontal','vertical'ã
 * @param  {string} [layerOptions.legendPosition] - å¾ä¾ä½ç½®ï¼åå¼ï¼'top-right'|'top-left'|'bottom-left'|'bottom-right'ã
 */

var Theme3DLayer = /*#__PURE__*/function () {
  function Theme3DLayer(id, layerOptions) {
    Theme3DLayer_classCallCheck(this, Theme3DLayer);

    /**
     * @member {string} mapboxgl.supermap.Theme3DLayer.prototype.id 
     * @description Mapbox GL å¾å± idã
     */
    this.id = id;
    /**
     * @member {Object} mapboxgl.supermap.Theme3DLayer.prototype.map 
     * @description Mapbox GL å°å¾å¯¹è±¡ã
     */

    this.map = null;
    /**
     * @member {number} [mapboxgl.supermap.Theme3DLayer.prototype.opacity=1] 
     * @description å¾å±éæåº¦ã
     */

    this.opacity = 1;
    /**
     * @member {boolean} [mapboxgl.supermap.Theme3DLayer.prototype.parseNumber=false]
     * @description æ¯å¦è¿è¡æ°æ®é¢å¤ç,æäºå­æ®µæ¯ string ç±»åï¼éè¦è½¬æ¢ä¸º numberã
     */

    this.parseNumber = false;
    /**
     * @member {boolean} [mapboxgl.supermap.Theme3DLayer.prototype.enableHighlight=false]
     * @description æ¯å¦å¼å¯é«äº®ã
     */

    this.enableHighlight = false;
    /**
     * @member {Object} [mapboxgl.supermap.Theme3DLayer.prototype.highlight={color: "#ADA91E"}]
     * @description é«äº®ç¸å³éç½®ã
     */

    this.highlight = {
      color: "#ADA91E"
    };
    /**
     * @member {string} mapboxgl.supermap.Theme3DLayer.prototype.baseHeightField 
     * @description æ°æ®ä¸­è¡¨ç¤ºåºç¡é«åº¦çå­æ®µã
     */

    this.baseHeightField = null;
    /**
     * @member {number} mapboxgl.supermap.Theme3DLayer.prototype.height 
     * @description é«åº¦ãå¦ææ°æ®æå®ç heightField (é»è®¤ height) æ²¡æå¯ä»¥è¡¨ç¤ºé«åº¦çå­æ®µï¼å¯ä»¥ä¸ºæææ°æ®ç»ä¸è®¾ç½®ä¸ä¸ªé«åº¦ã
     */

    this.height = null;
    /**
     * @member {string} mapboxgl.supermap.Theme3DLayer.prototype.heightField 
     * @description æ°æ®ä¸­è¡¨ç¤ºé«åº¦çå­æ®µã
     */

    this.heightField = 'height';
    /**
     * @member {string} [mapboxgl.supermap.Theme3DLayer.prototype.themeField]
     * @description ä¸é¢å±ç¤ºçå­æ®µã
     */

    this.themeField = this.heightField;
    /**
     * @member {boolean} [mapboxgl.supermap.Theme3DLayer.prototype.showLegend=true]
     * @description æ¯å¦æ¾ç¤ºå¾ä¾ã
     */

    this.showLegend = true;
    /**
     * @member {string} [mapboxgl.supermap.Theme3DLayer.prototype.legendTitle]
     * @description å¾ä¾æ é¢ã
     */

    this.legendTitle = null;
    /**
     * @member {string} [mapboxgl.supermap.Theme3DLayer.prototype.legendTheme='light']
     * @description å¾ä¾ä¸»é¢ï¼åå¼ï¼'light','dark'ã
     * @default 'light'
     */

    this.legendTheme = 'light';
    /**
     * @member {string} [mapboxgl.supermap.Theme3DLayer.prototype.legendOrientation='horizontal']
     * @description å¾ä¾æ¹åï¼åå¼ï¼'horizontal','vertical'ã
     * @default 'horizontal'
     */

    this.legendOrientation = 'horizontal';
    /**
     * @member {string} mapboxgl.supermap.Theme3DLayer.prototype.legendPosition 
     * @description å¾ä¾ä½ç½®ï¼åå¼ï¼'top-right'|'top-left'|'bottom-left'|'bottom-right'ã
     * @default 'bottom-right'
     */

    this.legendPosition = 'bottom-right';
    this._highlightLayerId = "".concat(this.id, "-highlightLayer");

    this._extend(this, layerOptions);
  }
  /**
   * @function mapboxgl.supermap.Theme3DLayer.prototype.setLayerOptions
   * @description è®¾ç½®å¾å±ç¸å³åæ°ã
   * @param {Object} layerOptions - è¯¥ä¸é¢å¾å¾å±ç¸å³åæ°ã
   * @param {number} [layerOptions.opacity=1] - å¾å±éæåº¦ã
   * @param {boolean} [layerOptions.parseNumber=false] - æ¯å¦é¢å¤çæ°æ®ï¼å°æ°æ®è½¬æ¢ä¸º numberã
   * @param {string} [layerOptions.baseHeightField] - æ°æ®ä¸­è¡¨ç¤ºåºç¡é«åº¦çå­æ®µ
   * @param {number} [layerOptions.height] - é«åº¦ãå¦ææ°æ®æå®çheightField(é»è®¤height)æ²¡æå¯ä»¥è¡¨ç¤ºé«åº¦çå­æ®µï¼å¯ä»¥ä¸ºæææ°æ®ç»ä¸è®¾ç½®ä¸ä¸ªé«åº¦ã
   * @param {string} [layerOptions.heightField] - æ°æ®ä¸­è¡¨ç¤ºé«åº¦çå­æ®µã
   * @param {string} [layerOptions.themeField] - ä¸é¢å±ç¤ºçå­æ®µã
   * @param {boolean} [layerOptions.showLegend=true] - æ¯å¦æ¾ç¤ºå¾ä¾ã
   * @param {string} layerOptions.legendTitle - å¾ä¾æ é¢ã
   * @param {string} [layerOptions.legendTheme='light'] - å¾ä¾ä¸»é¢ï¼åå¼ï¼'light','dark'ã
   * @param {string} [layerOptions.legendOrientation='horizontal'] - å¾ä¾æ¹åï¼åå¼ï¼'horizontal','vertical'ã
   * @param {string} [layerOptions.legendPosition] - å¾ä¾ä½ç½®ï¼åå¼ï¼'top-right'|'top-left'|'bottom-left'|'bottom-right'ã
   * @returns {this}
   */


  Theme3DLayer_createClass(Theme3DLayer, [{
    key: "setLayerOptions",
    value: function setLayerOptions(layerOptions) {
      this._extend(this, layerOptions);

      return this;
    }
    /**
     * @function mapboxgl.supermap.Theme3DLayer.prototype.setHighlightStyleOptions
     * @description è®¾ç½®å¾å±é«äº®ç¸å³åæ°ã
     * @param {Object} highlightOptions - è¯¥ä¸é¢å¾å¾å±é«äº®ç¸å³åæ°ã
     * @param {string} [highlightOptions.color] - é¢è²ã
     * @param {function} highlightOptions.callback - åè°,è¿åæ°æ®åæ°ï¼data,eventï¼ã
     * @returns {this}
     */

  }, {
    key: "setHighlightStyleOptions",
    value: function setHighlightStyleOptions(highlightOptions) {
      this._extend(this.highlight, highlightOptions);

      return this;
    }
    /**
     * @function mapboxgl.supermap.Theme3DLayer.prototype.setData
     * @description è®¾ç½®æ°æ®ï¼æ°æ®æ ¼å¼å¿é¡»ä¸º GeoJSON æ ¼å¼ã
     * @param {GeoJSONObject} data - GeoJSON æ ¼å¼æ°æ®ã
     * @param {boolean} [parseNumber=false] - æ¯å¦è¿è¡æ°æ®é¢å¤ç,æäºå­æ®µæ¯ string ç±»åï¼éè¦è½¬æ¢ä¸º numberã
     */

  }, {
    key: "setData",
    value: function setData(data, parseNumber) {
      var me = this;
      me.data = data;

      if (parseNumber != null) {
        me.parseNumber = parseNumber;
      }

      me.parseNumber && me.data && me.data.features && me.data.features.map(function (val) {
        if (me.baseHeightField && val.properties[me.baseHeightField]) {
          val.properties[me.baseHeightField] = parseFloat(val.properties[me.baseHeightField]);
        }

        if (me.heightField && val.properties[me.heightField]) {
          val.properties[me.heightField] = parseFloat(val.properties[me.heightField]);
        }

        return val;
      });
      return this;
    }
    /**
     * @function mapboxgl.supermap.Theme3DLayer.prototype.getData
     * @description è·åæ°æ®ã
     * @returns {GeoJSONObject} è·åçæ°æ®ã
     */

  }, {
    key: "getData",
    value: function getData() {
      return this.data;
    }
    /**
     * @function mapboxgl.supermap.Theme3DLayer.prototype.addTo
     * @description æ·»å å¾å±å°å°å¾ä¸ã
     * @param {mapboxgl.Map} map - Mapbox GL å°å¾å¯¹è±¡ã
     * @returns {this} this å¯¹è±¡ã
     */

  }, {
    key: "addTo",
    value: function addTo(map) {
      this.map = map;

      if (!this.map) {
        return this;
      }

      this.show();
      return this;
    }
    /**
     * @function mapboxgl.supermap.Theme3DLayer.prototype.show
     * @description æ¾ç¤ºå¾å±ã
     * @param {Object} options - å¾å±éç½®é¡¹ã
     * @returns {this} this å¯¹è±¡ã
     */

  }, {
    key: "show",
    value: function show(options) {
      this._extend(this, options);

      this._addLayer();

      if (this.enableHighlight) {
        this._addHighLightLayer();
      }

      if (this.showLegend) {
        if (!this.legend) {
          this.legend = this._createLegendControl();
        }

        this.map.addControl(this.legend, this.legendPosition);
      }

      return this;
    }
    /**
     * @function mapboxgl.supermap.Theme3DLayer.prototype.remove
     * @description ä»å°å¾ä¸ç§»é¤å¾å±ã
     * @returns {this} this å¯¹è±¡ã
     */

  }, {
    key: "remove",
    value: function remove() {
      if (!this.map) {
        return this;
      } //ç§»é¤å¾å±


      var layerId = this.id ? this.id : "theme3DLayer";

      if (this.map.getLayer(layerId)) {
        this.map.off('mousemove', layerId, this._onMouseMove.bind(this));
        this.map.on('mouseout', layerId, this._onMouseMove.bind(this));
        this.map.removeLayer(layerId);
      } //ç§»é¤é«äº®å¾å±


      if (this.map.getLayer(this._highlightLayerId)) {
        this._selectFeatureId = null;
        this.map.removeLayer(this._highlightLayerId);
      } //ç§»é¤å¾ä¾


      if (this.legend) {
        this.map.removeControl(this.legend);
      }

      return this;
    }
    /**
     * @function  mapboxgl.supermap.Theme3DLayer.prototype.getLayerStyleOptions
     * @description è·åå¾å±æ ·å¼ã
     * @returns {Object} Mapbox GL æ ·å¼å¯¹è±¡ã
     */

  }, {
    key: "getLayerStyleOptions",
    value: function getLayerStyleOptions() {//å­ç±»éåå®ç°
    }
    /**
     * @function mapboxgl.supermap.Theme3DLayer.prototype.getHighlightStyleOptions
     * @description è·åé«äº®æ ·å¼,å­ç±»éåå®ç°ã
     * @returns {Object} Mapbox GL æ ·å¼å¯¹è±¡ã
     */

  }, {
    key: "getHighlightStyleOptions",
    value: function getHighlightStyleOptions() {//å­ç±»éåå®ç°
    }
  }, {
    key: "_createLegendControl",
    value: function _createLegendControl(html) {
      var me = this;

      function LegendControl() {}

      LegendControl.prototype.onAdd = function (map) {
        this._map = map;
        this._container = document.createElement('div');
        var className = 'mapboxgl-ctrl legend ';
        var theme = 'legend-light';

        if (me.legendTheme === 'dark') {
          theme = 'legend-dark';
        }

        var orientation = ' legend-horizontal';

        if (me.legendOrientation === 'vertical') {
          orientation = ' legend-vertical';
        }

        this._container.className = className + theme + orientation;

        if (html) {
          this._container.innerHTML = html;
        } else {
          var legendTitle = me.legendTitle || "";
          var titleElement = " <div class='legend-title'>" + legendTitle + "</div>";
          var content = me._createLegendElement.call(me) || "";
          var contentElement = "<div class='legend-content'>" + content + "</div>";
          this._container.innerHTML = titleElement + contentElement;
        }

        me._appendLegendCSSStyle();

        return this._container;
      };

      LegendControl.prototype.onRemove = function () {
        this._container.parentNode.removeChild(this._container);

        this._map = undefined;
      };

      return new LegendControl();
    }
  }, {
    key: "_createLegendElement",
    value: function _createLegendElement() {//å­ç±»å®ç°
    }
  }, {
    key: "_addLayer",
    value: function _addLayer() {
      var paintOptions = this.getLayerStyleOptions();
      var id = this.id ? this.id : "theme3DLayer";
      var sourceId = this.sourceId = id + 'Source';

      if (!this.map.getSource(sourceId)) {
        this.map.addSource(sourceId, {
          'type': 'geojson',
          'data': this.data
        });
      } else {
        this.map.removeSource(sourceId);
        this.map.addSource(sourceId, {
          'type': 'geojson',
          'data': this.data
        });
      }

      this.map.addLayer({
        'id': id,
        'type': 'fill-extrusion',
        'source': sourceId,
        'paint': paintOptions
      });
      this.map.moveLayer(id);
    } //æ·»å é«äº®å¾å±

  }, {
    key: "_addHighLightLayer",
    value: function _addHighLightLayer() {
      if (!this.map) {
        return;
      }

      var map = this.map;
      map.addLayer({
        'id': this._highlightLayerId,
        'type': 'fill-extrusion',
        'source': this.sourceId,
        'paint': this.getHighlightStyleOptions(),
        "filter": ["in", "$id", ""]
      });
      this._selectFeatureId = null;
      map.on('mousemove', this.id, this._onMouseMove.bind(this));
      map.on('mouseout', this.id, this._onMouseMove.bind(this));
    }
  }, {
    key: "_onMouseMove",
    value: function _onMouseMove(e) {
      var me = this,
          map = this.map;
      var features = map.queryRenderedFeatures(e.point, {
        layers: [me.id]
      });

      if (me.highlight && me.highlight.callback) {
        me.highlight.callback(features, e);
      }

      if (!features || features.length < 1) {
        me._clearHighlight.call(me);

        me._selectFeatureId = null;
        return;
      }

      var id = features[0].id;

      if (me._selectFeatureId === id) {
        return;
      }

      me._selectFeatureId = id;
      map.setFilter(me._highlightLayerId, ['==', '$id', me._selectFeatureId]);
    }
  }, {
    key: "_clearHighlight",
    value: function _clearHighlight() {
      if (this.map) {
        this.map.setFilter(this._highlightLayerId, ["in", "$id", ""]);
      }
    }
  }, {
    key: "_appendLegendCSSStyle",
    value: function _appendLegendCSSStyle() {
      var legendStyle = document.createElement('style');
      legendStyle.type = 'text/css';
      var baseStyle = "\n        .legend {\n            display: inline-block;\n            border-radius: 2px;\n            -moz-border-radius: 2px;\n            -webkit-border-radius: 2px;\n            font-size: 12px;\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n        }\n        .legend-light {\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n            box-shadow: 0px 0px 6px #bbbbbb;\n            -moz-box-shadow: 0px 6px 10px #bbbbbb;\n            -webkit-box-shadow: 0px 0px 6px #bbbbbb;\n        }\n        .legend-dark {\n            color: rgba(255, 255, 255, 0.8);\n            background-color: rgb(64, 64, 64);\n        }\n        .legend .legend-title {\n            min-height: 14px;\n            max-width: 500px;\n            padding:6px 10px;\n        }\n        .legend-light .legend-title {\n            color: rgba(0, 0, 0, 0.8);\n        }\n        .legend-dark .legend-title {\n            color: rgba(255, 255, 255, 0.8);\n        }\n        .legend-content{\n            padding:6px 10px;\n        }\n        ";
      legendStyle.innerHTML = baseStyle + this._legendCSSStyle();
      document.getElementsByTagName('head')[0].appendChild(legendStyle);
    } //åç§å¾å±å¯¹åºçèªå·±çå¾ä¾çæ ·å¼

  }, {
    key: "_legendCSSStyle",
    value: function _legendCSSStyle() {
      //å­ç±»å¯éåå®ç°
      return "\n        .legend ul {\n            padding: 0;\n            margin: 0 16px;\n            height: 100%;\n            display: block;\n            list-style: none;\n        }\n\n        .legend li {\n            vertical-align: middle;\n        }\n\n        .legend li span:first-child {\n            vertical-align: middle;\n        }\n\n        .legend li span:last-child {\n            line-height: 28px;\n            max-width: 200px;\n            vertical-align: middle;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            -ms-text-overflow: ellipsis;\n        }\n\n        .legend-vertical li {\n            height: 28px;\n        }\n\n        .legend-vertical li span:first-child {\n            display: inline-block;\n            width: 60px;\n            height: 100%;\n        }\n\n        .legend-vertical li span:last-child {\n            display: inline-block;\n            margin-left: 16px;\n            height: 100%;\n        }\n\n        .legend-horizontal li {\n            height: 56px;\n            float: left;\n        }\n\n        .legend-horizontal li span:first-child {\n            display: block;\n            width: 100%;\n            height: 50%;\n        }\n\n        .legend-horizontal li span:last-child {\n            display: block;\n            vertical-align: middle;\n            width: 60px;\n            height: 50%;\n            text-align: center;\n        }\n        ";
    }
  }, {
    key: "_extend",
    value: function _extend(dest) {
      for (var index = 0; index < Object.getOwnPropertyNames(arguments).length; index++) {
        var arg = Object.getOwnPropertyNames(arguments)[index];

        if (arg == "caller" || arg == "callee" || arg == "length" || arg == "arguments") {
          continue;
        }

        var obj = arguments[arg];

        if (obj) {
          for (var j = 0; j < Object.getOwnPropertyNames(obj).length; j++) {
            var key = Object.getOwnPropertyNames(obj)[j];

            if (arg == "caller" || arg == "callee" || arg == "length" || arg == "arguments") {
              continue;
            }

            dest[key] = obj[key];
          }
        }
      }

      return dest;
    }
  }]);

  return Theme3DLayer;
}();
(external_mapboxgl_default()).supermap.Theme3DLayer = Theme3DLayer;
// CONCATENATED MODULE: ./src/mapboxgl/overlay/RangeTheme3DLayer.js
function RangeTheme3DLayer_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { RangeTheme3DLayer_typeof = function _typeof(obj) { return typeof obj; }; } else { RangeTheme3DLayer_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return RangeTheme3DLayer_typeof(obj); }

function RangeTheme3DLayer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function RangeTheme3DLayer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function RangeTheme3DLayer_createClass(Constructor, protoProps, staticProps) { if (protoProps) RangeTheme3DLayer_defineProperties(Constructor.prototype, protoProps); if (staticProps) RangeTheme3DLayer_defineProperties(Constructor, staticProps); return Constructor; }

function RangeTheme3DLayer_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) RangeTheme3DLayer_setPrototypeOf(subClass, superClass); }

function RangeTheme3DLayer_setPrototypeOf(o, p) { RangeTheme3DLayer_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return RangeTheme3DLayer_setPrototypeOf(o, p); }

function RangeTheme3DLayer_createSuper(Derived) { var hasNativeReflectConstruct = RangeTheme3DLayer_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = RangeTheme3DLayer_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = RangeTheme3DLayer_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return RangeTheme3DLayer_possibleConstructorReturn(this, result); }; }

function RangeTheme3DLayer_possibleConstructorReturn(self, call) { if (call && (RangeTheme3DLayer_typeof(call) === "object" || typeof call === "function")) { return call; } return RangeTheme3DLayer_assertThisInitialized(self); }

function RangeTheme3DLayer_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function RangeTheme3DLayer_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function RangeTheme3DLayer_getPrototypeOf(o) { RangeTheme3DLayer_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return RangeTheme3DLayer_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class mapboxgl.supermap.RangeTheme3DLayer
 * @category  Visualization Theme
 * @classdesc ä¸ç»´åæ®µä¸é¢å¾ã
 * @param  {string} [id] - ä¸é¢å¾å¾å± idãé»è®¤ä½¿ç¨ CommonUtil.createUniqueID("theme3DLayer") åå»ºä¸é¢å¾å± IDã
 * @param  {Object} layerOptions - ä¸é¢å¾å¾å±éç½®é¡¹,åæ°ç»§æ¿èª Theme3DLayerã
 * @param  {Array} [layerOptions.heightStops] - æ°å¢åæ°ï¼æ°æ®é«åº¦åæ®µæ°ç»ã
 * @param  {Array} layerOptions.colorStops - æ°å¢åæ°ï¼æ°æ®é¢è²åæ®µæ°ç»ã
 * @param  {number} [layerOptions.base] - æ°å¢åæ°ï¼æ°æ®åæ®µçº¿æ§å¢éã
 * @param  {number} [layerOptions.legendRatio=1] - æ°å¢åæ°ï¼å¾ä¾æ°å¼æ©å¤§ç³»æ°ã
 * @example
 * new mapboxgl.supermap.RangeTheme3DLayer(layerId, map, {
 *      enableHighlight:true,
 *      // è®¾ç½®åæ®µ
 *      heightField: "floor",
 *      heightStops: [[1, 10], [10, 100]],
 *      colorStops: [[0, 'rgba(33, 41, 52, 0.8)'], [20, 'rgba(69,117,180, 0.7)'], [50, 'rgba(116,173,209, 0.7)'], [100, 'rgba(171,217,233, 0.7)']],
 *      // æ¾ç¤ºå¾ä¾
 *      showLegend: true,
 *      legendTheme: 'dark',
 *      legendTitle: "å¾ä¾"
 * });
 */

var RangeTheme3DLayer = /*#__PURE__*/function (_Theme3DLayer) {
  RangeTheme3DLayer_inherits(RangeTheme3DLayer, _Theme3DLayer);

  var _super = RangeTheme3DLayer_createSuper(RangeTheme3DLayer);

  function RangeTheme3DLayer(id, layerOptions) {
    var _this;

    RangeTheme3DLayer_classCallCheck(this, RangeTheme3DLayer);

    _this = _super.call(this, id, layerOptions);
    /**
     * @member  {Array} mapboxgl.supermap.RangeTheme3DLayer.prototype.heightStops 
     * @description æ°æ®é«åº¦åæ®µæ°ç»ã
     */

    _this.heightStops = null;
    /**
     * @member  {Array} mapboxgl.supermap.RangeTheme3DLayer.prototype.colorStops 
     * @description æ°æ®é¢è²åæ®µæ°ç»ã
     */

    _this.colorStops = null;
    /**
     * @member  {number} mapboxgl.supermap.RangeTheme3DLayer.prototype.base 
     * @description æ°æ®åæ®µçº¿æ§å¢éã
     */

    _this.base = null;
    /**
     * @member  {number} [mapboxgl.supermap.RangeTheme3DLayer.prototype.legendRatio=1]
     * @description å¾ä¾æ°å¼æ©å¤§ç³»æ°ã
     */

    _this.legendRatio = 1;

    _this._extend(RangeTheme3DLayer_assertThisInitialized(_this), layerOptions);

    return _this;
  }
  /**
   * @function  mapboxgl.supermap.RangeTheme3DLayer.prototype.getLayerStyleOptions
   * @description è·åå¾å±æ ·å¼ã
   * @returns {Object} Mapbox GL æ ·å¼å¯¹è±¡ã
   */


  RangeTheme3DLayer_createClass(RangeTheme3DLayer, [{
    key: "getLayerStyleOptions",
    value: function getLayerStyleOptions() {
      var opacity = this.opacity == null ? 1 : this.opacity;
      opacity = isNaN(parseFloat(opacity)) ? 1 : parseFloat(opacity);
      var reg = /^[0-9]+.?[0-9]*$/;
      var options = {
        'fill-extrusion-color': {
          'stops': this.colorStops,
          'property': this.themeField || this.heightField,
          'type': 'interval',
          'base': reg.test(this.base) ? this.base : 1
        },
        'fill-extrusion-opacity': opacity
      };

      if (this.heightStops) {
        options['fill-extrusion-height'] = {
          'stops': this.heightStops,
          'property': this.heightField || 'height',
          'base': reg.test(this.base) ? this.base : 1
        };
      } else if (this.height) {
        options['fill-extrusion-height'] = this.height;
      } else {
        options['fill-extrusion-height'] = {
          'property': this.heightField || 'height',
          'type': 'identity'
        };
      }

      if (this.baseHeightField) {
        options['fill-extrusion-base'] = {
          'property': this.baseHeightField,
          'type': 'identity'
        };
      }

      return options;
    }
    /**
     * @function mapboxgl.supermap.RangeTheme3DLayer.prototype.getHighlightStyleOptions
     * @description è·åé«äº®æ ·å¼ã
     * @returns {Object} mapboxgl æ ·å¼å¯¹è±¡ã
     */

  }, {
    key: "getHighlightStyleOptions",
    value: function getHighlightStyleOptions() {
      var color = this.highlight && this.highlight.color != null ? this.highlight.color : '#ADA91E';
      return {
        'fill-extrusion-color': color,
        'fill-extrusion-height': {
          "stops": this.heightStops,
          "property": this.heightField
        },
        'fill-extrusion-opacity': this.highlight && this.highlight.opacity || 0.6
      };
    }
  }, {
    key: "_createLegendElement",
    value: function _createLegendElement() {
      var len = this.colorStops && this.colorStops.length || 0; //é¢è²åæ®µå¯¹åºæ è¯

      var legendListElement = "<ul>";
      var i;

      for (i = 0; i < len; i++) {
        var value = this.colorStops[i][0];

        var text = this._getWrapperText(value);

        if (i === len - 1) {
          text = "> " + text;
        } else {
          var next = this._getWrapperText(this.colorStops[i + 1][0]);

          text = text + "-" + next;
        }

        var color = this.colorStops[i][1];
        legendListElement += "<li><span style='background-color:" + color + ";'></span><span>" + text + "</span></li>";
      }

      legendListElement += "</ul>";
      return legendListElement;
    }
  }, {
    key: "_getWrapperText",
    value: function _getWrapperText(number) {
      var value = number * (this.legendRatio == null ? 1 : parseFloat(this.legendRatio)); //åä¸ªé¢è²å¼å®½åº¦ä¸º60px,æå¤§åªè½å®å¨æ¾ç¤º1000000ï¼å¦åå°±è¶åºå®½åº¦ï¼åæ¾ç¤ºä»¥ä¸ºkè®¡æ°åä½çå¼

      var num = parseFloat(value);

      if (num % 1000000 <= 1000000) {
        return num.toString();
      }

      return parseInt(num / 1000) + 'k';
    }
  }]);

  return RangeTheme3DLayer;
}(Theme3DLayer);
(external_mapboxgl_default()).supermap.RangeTheme3DLayer = RangeTheme3DLayer;
// CONCATENATED MODULE: ./src/mapboxgl/overlay/RangeThemeLayer.js
function RangeThemeLayer_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { RangeThemeLayer_typeof = function _typeof(obj) { return typeof obj; }; } else { RangeThemeLayer_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return RangeThemeLayer_typeof(obj); }

function RangeThemeLayer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function RangeThemeLayer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function RangeThemeLayer_createClass(Constructor, protoProps, staticProps) { if (protoProps) RangeThemeLayer_defineProperties(Constructor.prototype, protoProps); if (staticProps) RangeThemeLayer_defineProperties(Constructor, staticProps); return Constructor; }

function RangeThemeLayer_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) RangeThemeLayer_setPrototypeOf(subClass, superClass); }

function RangeThemeLayer_setPrototypeOf(o, p) { RangeThemeLayer_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return RangeThemeLayer_setPrototypeOf(o, p); }

function RangeThemeLayer_createSuper(Derived) { var hasNativeReflectConstruct = RangeThemeLayer_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = RangeThemeLayer_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = RangeThemeLayer_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return RangeThemeLayer_possibleConstructorReturn(this, result); }; }

function RangeThemeLayer_possibleConstructorReturn(self, call) { if (call && (RangeThemeLayer_typeof(call) === "object" || typeof call === "function")) { return call; } return RangeThemeLayer_assertThisInitialized(self); }

function RangeThemeLayer_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function RangeThemeLayer_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function RangeThemeLayer_getPrototypeOf(o) { RangeThemeLayer_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return RangeThemeLayer_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class mapboxgl.supermap.RangeThemeLayer
 * @category  Visualization Theme
 * @classdesc åæ®µä¸é¢å¾å±ã
 * @param {string} name - å¾å±åã
 * @param {Object} options - åæ°ã
 * @param {string} [options.id] - ä¸é¢å¾å± IDãé»è®¤ä½¿ç¨ CommonUtil.createUniqueID("themeLayer_") åå»ºä¸é¢å¾å± IDã
 * @param {boolean} [options.loadWhileAnimating=true] - æ¯å¦å®æ¶éç»ã
 * @param {mapboxgl.Map} options.map - å½å Mapbox GL map å¯¹è±¡ã
 * @param {number} [options.opacity=1] - å¾å±éæåº¦ã
 * @param {string} options.themeField - æå®åå»ºä¸é¢å¾å­æ®µã
 * @param {Object} options.style - ä¸é¢å¾æ ·å¼ã
 * @param {Object} options.styleGroups - åä¸é¢ç±»åæ ·å¼ç»ã
 * @param {boolean} [options.isHoverAble=false] - æ¯å¦å¼å¯ hover äºä»¶ã
 * @param {Object} [options.highlightStyle] - å¼å¯ hover äºä»¶åï¼è§¦åçæ ·å¼é£æ ¼ã
 * @extends {mapboxgl.supermap.GeoFeatureThemeLayer}
 */

var Range = /*#__PURE__*/function (_GeoFeature) {
  RangeThemeLayer_inherits(Range, _GeoFeature);

  var _super = RangeThemeLayer_createSuper(Range);

  function Range(name, opt_options) {
    var _this;

    RangeThemeLayer_classCallCheck(this, Range);

    _this = _super.call(this, name, opt_options);
    _this.style = opt_options.style;
    _this.isHoverAble = opt_options.isHoverAble;
    _this.highlightStyle = opt_options.highlightStyle;
    _this.themeField = opt_options.themeField;
    _this.styleGroups = opt_options.styleGroups;
    return _this;
  }
  /**
   * @function mapboxgl.supermap.RangeThemeLayer.prototype.createThematicFeature
   * @description åå»ºä¸é¢å¾è¦ç´ ã
   * @param {Object} feature - è¦åå»ºçä¸é¢å¾å½¢è¦ç´ ã
   */


  RangeThemeLayer_createClass(Range, [{
    key: "createThematicFeature",
    value: function createThematicFeature(feature) {
      //èµ style
      var style = this.getStyleByData(feature); //åå»ºä¸é¢è¦ç´ æ¶çå¯éåæ°

      var options = {};
      options.nodesClipPixel = this.nodesClipPixel;
      options.isHoverAble = this.isHoverAble;
      options.isMultiHover = this.isMultiHover;
      options.isClickAble = this.isClickAble;
      options.highlightStyle = ShapeFactory.transformStyle(this.highlightStyle); //å°æ°æ®è½¬ä¸ºä¸é¢è¦ç´ ï¼Vectorï¼

      var thematicFeature = new ThemeVector(feature, this, ShapeFactory.transformStyle(style), options); //ç´æ¥æ·»å å¾å½¢å°æ¸²æå¨

      for (var m = 0; m < thematicFeature.shapes.length; m++) {
        this.renderer.addShape(thematicFeature.shapes[m]);
      }

      return thematicFeature;
    }
    /**
     * @private
     * @function mapboxgl.supermap.RangeThemeLayer.prototype.getStyleByData
     * @description éè¿æ°æ®è·å styleã
     * @param {Object} fea - è¦ç´ æ°æ®ã
     */

  }, {
    key: "getStyleByData",
    value: function getStyleByData(fea) {
      var style = {};
      var feature = fea;
      style = Util.copyAttributesWithClip(style, this.style);

      if (this.themeField && this.styleGroups && this.styleGroups.length > 0 && feature.attributes) {
        var Sf = this.themeField;
        var Attrs = feature.attributes;
        var Gro = this.styleGroups;
        var isSfInAttrs = false; //æå®ç themeField æ¯å¦æ¯ feature çå±æ§å­æ®µä¹ä¸

        var attr = null; //å±æ§å¼

        for (var property in Attrs) {
          if (Sf === property) {
            isSfInAttrs = true;
            attr = Attrs[property];
            break;
          }
        } //å¤æ­å±æ§å¼æ¯å¦å±äºstyleGroupsçæä¸ä¸ªèå´ï¼ä»¥ä¾¿å¯¹è·ååç» style


        if (isSfInAttrs) {
          for (var i = 0, len = Gro.length; i < len; i++) {
            if (attr >= Gro[i].start && attr < Gro[i].end) {
              //feature.style = CommonUtil.copyAttributes(feature.style, this.defaultStyle);
              var sty1 = Gro[i].style;
              style = Util.copyAttributesWithClip(style, sty1);
            }
          }
        }
      }

      if (feature.style && this.isAllowFeatureStyle === true) {
        style = Util.copyAttributesWithClip(feature.style);
      }

      return style;
    }
  }]);

  return Range;
}(GeoFeature);
(external_mapboxgl_default()).supermap.RangeThemeLayer = Range;
// CONCATENATED MODULE: ./src/mapboxgl/overlay/RankSymbolThemeLayer.js
function RankSymbolThemeLayer_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { RankSymbolThemeLayer_typeof = function _typeof(obj) { return typeof obj; }; } else { RankSymbolThemeLayer_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return RankSymbolThemeLayer_typeof(obj); }

function RankSymbolThemeLayer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function RankSymbolThemeLayer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function RankSymbolThemeLayer_createClass(Constructor, protoProps, staticProps) { if (protoProps) RankSymbolThemeLayer_defineProperties(Constructor.prototype, protoProps); if (staticProps) RankSymbolThemeLayer_defineProperties(Constructor, staticProps); return Constructor; }

function RankSymbolThemeLayer_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) RankSymbolThemeLayer_setPrototypeOf(subClass, superClass); }

function RankSymbolThemeLayer_setPrototypeOf(o, p) { RankSymbolThemeLayer_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return RankSymbolThemeLayer_setPrototypeOf(o, p); }

function RankSymbolThemeLayer_createSuper(Derived) { var hasNativeReflectConstruct = RankSymbolThemeLayer_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = RankSymbolThemeLayer_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = RankSymbolThemeLayer_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return RankSymbolThemeLayer_possibleConstructorReturn(this, result); }; }

function RankSymbolThemeLayer_possibleConstructorReturn(self, call) { if (call && (RankSymbolThemeLayer_typeof(call) === "object" || typeof call === "function")) { return call; } return RankSymbolThemeLayer_assertThisInitialized(self); }

function RankSymbolThemeLayer_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function RankSymbolThemeLayer_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function RankSymbolThemeLayer_getPrototypeOf(o) { RankSymbolThemeLayer_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return RankSymbolThemeLayer_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class mapboxgl.supermap.RankSymbolThemeLayer
 * @category  Visualization Theme
 * @classdesc ç­çº§ç¬¦å·ä¸é¢å¾å±ã
 * @param {string} name - å¾å±åã
 * @param {string} symbolType - ç¬¦å·ç±»åã
 * @param {Object} opt_options - åæ°ã
 * @param {string} [opt_options.id] - ä¸é¢å¾å± IDãé»è®¤ä½¿ç¨ CommonUtil.createUniqueID("themeLayer_") åå»ºä¸é¢å¾å± IDã
 * @param {boolean} [opt_options.loadWhileAnimating=true] - æ¯å¦å®æ¶éç»ã
 * @param {mapboxgl.Map} opt_options.map - å½å mapboxgl map å¯¹è±¡ã
 * @param {number} [opt_options.opacity=1] - å¾å±éæåº¦ã
 * @param {string} opt_options.themeFields - æå®åå»ºä¸é¢å¾å­æ®µã
 * @param {boolean} [opt_options.isOverLay=true] - æ¯å¦è¿è¡åçå¤çï¼å¦æè®¾ä¸º trueï¼å¾è¡¨ç»å¶è¿ç¨ä¸­å°éèå¯¹å·²å¨å¾å±ä¸­ç»å¶çå¾è¡¨äº§çåççå¾è¡¨ã
 * @param {string} [opt_options.chartsType] - å¾è¡¨ç±»åãç®åå¯ç¨ï¼"Bar", "Line", "Pie"ã
 * @param {Object} [opt_options.symbolSetting] - åç±»åå¾è¡¨ç symbolSetting å¯¹è±¡å¯è®¾å±æ§è¯·åèå·ä½å¾è¡¨æ¨¡åç±»çæ³¨éä¸­å¯¹ symbolSetting å¯¹è±¡å¯è®¾å±æ§çæè¿°ãsymbolSetting å¯¹è±¡éå¸¸é½å·æä»¥ä¸ 5 ä¸ªåºç¡å¯è®¾å±æ§:
 * @param {number} [opt_options.symbolSetting.width] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å®½åº¦ã
 * @param {number} [opt_options.symbolSetting.height] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼é«åº¦ã
 * @param {Array.<number>} opt_options.symbolSetting.codomain - å¼åï¼é¿åº¦ä¸º 2 çä¸ç»´æ°ç»ï¼ç¬¬ä¸ä¸ªåç´ è¡¨ç¤ºå¼åä¸éï¼ç¬¬äºä¸ªåç´ è¡¨ç¤ºå¼åä¸éã
 * @param {number} [opt_options.symbolSetting.XOffset] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ X æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
 * @param {number} [opt_options.symbolSetting.YOffset] - ä¸é¢è¦ç´ ï¼å¾è¡¨ï¼å¨ Y æ¹åä¸çåç§»å¼ï¼åä½åç´ ã
 * @param {Array.<number>} opt_options.symbolSetting.dataViewBoxParameter - æ°æ®è§å¾æ¡ dataViewBox åæ°ï¼å®æ¯æå¾è¡¨æ¡ chartBox ï¼ç±å¾è¡¨ä½ç½®ãå¾è¡¨å®½åº¦ãå¾è¡¨é«åº¦ææçå¾è¡¨èå´æ¡ï¼å¨å·¦ãä¸ï¼å³ï¼ä¸åä¸ªæ¹åä¸çååè·å¼ï¼é¿åº¦ä¸º 4 çä¸ç»´æ°ç»ã
 * @param {number} opt_options.symbolSetting.decimalNumber - æ°æ®å¼æ°ç» dataValues åç´ å¼å°æ°ä½æ°ï¼æ°æ®çå°æ°ä½å¤çåæ°ï¼åå¼èå´ï¼[0, 16]ãå¦æä¸è®¾ç½®æ­¤åæ°ï¼å¨åæ°æ®å¼æ¶ä¸å¯¹æ°æ®åå°æ°ä½å¤çã
 * @extends {mapboxgl.supermap.GraphThemeLayer}
 */

var RankSymbolThemeLayer_RankSymbol = /*#__PURE__*/function (_Graph) {
  RankSymbolThemeLayer_inherits(RankSymbol, _Graph);

  var _super = RankSymbolThemeLayer_createSuper(RankSymbol);

  function RankSymbol(name, symbolType, opt_options) {
    var _this;

    RankSymbolThemeLayer_classCallCheck(this, RankSymbol);

    _this = _super.call(this, name, symbolType, opt_options);
    _this.symbolType = symbolType;
    _this.symbolSetting = opt_options.symbolSetting;
    _this.themeField = opt_options.themeField;
    return _this;
  }
  /**
   * @function mapboxgl.supermap.RankSymbolThemeLayer.prototype.setSymbolType
   * @description è®¾ç½®æ å¿ç¬¦å·ã
   * @param {string} [symbolType] - ç¬¦å·ç±»åã
   */


  RankSymbolThemeLayer_createClass(RankSymbol, [{
    key: "setSymbolType",
    value: function setSymbolType(symbolType) {
      this.symbolType = symbolType;
      this.redraw();
    }
    /**
     * @function mapboxgl.supermap.RankSymbolThemeLayer.prototype.createThematicFeature
     * @description åå»ºä¸é¢å¾å½¢è¦ç´ ã
     * @param {Object} feature - è¦åå»ºçä¸é¢å¾å½¢è¦ç´ ã
     */

  }, {
    key: "createThematicFeature",
    value: function createThematicFeature(feature) {
      var thematicFeature; // æ£æ¥å¾å½¢åå»ºæ¡ä»¶å¹¶åå»ºå¾å½¢

      if (Theme_Theme[this.symbolType] && this.themeField && this.symbolSetting) {
        thematicFeature = new Theme_Theme[this.symbolType](feature, this, [this.themeField], this.symbolSetting);
      } // thematicFeature æ¯å¦åå»ºæå


      if (!thematicFeature) {
        return false;
      } // å¯¹ä¸é¢è¦ç´ æ§è¡å¾å½¢è£è½½


      thematicFeature.assembleShapes();
      return thematicFeature;
    }
  }]);

  return RankSymbol;
}(GraphThemeLayer_Graph);
(external_mapboxgl_default()).supermap.RankSymbolThemeLayer = RankSymbolThemeLayer_RankSymbol;
// CONCATENATED MODULE: ./src/mapboxgl/overlay/UniqueTheme3DLayer.js
function UniqueTheme3DLayer_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { UniqueTheme3DLayer_typeof = function _typeof(obj) { return typeof obj; }; } else { UniqueTheme3DLayer_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return UniqueTheme3DLayer_typeof(obj); }

function UniqueTheme3DLayer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function UniqueTheme3DLayer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function UniqueTheme3DLayer_createClass(Constructor, protoProps, staticProps) { if (protoProps) UniqueTheme3DLayer_defineProperties(Constructor.prototype, protoProps); if (staticProps) UniqueTheme3DLayer_defineProperties(Constructor, staticProps); return Constructor; }

function UniqueTheme3DLayer_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) UniqueTheme3DLayer_setPrototypeOf(subClass, superClass); }

function UniqueTheme3DLayer_setPrototypeOf(o, p) { UniqueTheme3DLayer_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return UniqueTheme3DLayer_setPrototypeOf(o, p); }

function UniqueTheme3DLayer_createSuper(Derived) { var hasNativeReflectConstruct = UniqueTheme3DLayer_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = UniqueTheme3DLayer_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = UniqueTheme3DLayer_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return UniqueTheme3DLayer_possibleConstructorReturn(this, result); }; }

function UniqueTheme3DLayer_possibleConstructorReturn(self, call) { if (call && (UniqueTheme3DLayer_typeof(call) === "object" || typeof call === "function")) { return call; } return UniqueTheme3DLayer_assertThisInitialized(self); }

function UniqueTheme3DLayer_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function UniqueTheme3DLayer_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function UniqueTheme3DLayer_getPrototypeOf(o) { UniqueTheme3DLayer_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return UniqueTheme3DLayer_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class mapboxgl.supermap.UniqueTheme3DLayer
 * @category  Visualization Theme
 * @classdesc ä¸ç»´åå¼ä¸é¢å¾ã
 * @param {string} [id] - ä¸é¢å¾å¾å± idãé»è®¤ä½¿ç¨ CommonUtil.createUniqueID("theme3DLayer") åå»ºä¸é¢å¾å± IDã
 * @param {Object} layerOptions - ä¸é¢å¾å¾å±éç½®é¡¹,åæ°ç»§æ¿èª Theme3DLayerã
 * @param {number} [layerOptions.height] - æ°å¢åæ°ï¼å¦ææ°æ®æå®ç heightField (é»è®¤ä¸º height )æ²¡æå¯ä»¥è¡¨ç¤ºé«åº¦çå­æ®µï¼å¯ä»¥ä¸ºæææ°æ®ç»ä¸è®¾ç½®ä¸ä¸ªé«åº¦ã
 * @param {Array} layerOptions.colorStops - æ°å¢åæ°ï¼æ°æ®é¢è²åæ®µæ°ç»ã
 */

var UniqueTheme3DLayer = /*#__PURE__*/function (_Theme3DLayer) {
  UniqueTheme3DLayer_inherits(UniqueTheme3DLayer, _Theme3DLayer);

  var _super = UniqueTheme3DLayer_createSuper(UniqueTheme3DLayer);

  function UniqueTheme3DLayer(id, layerOptions) {
    var _this;

    UniqueTheme3DLayer_classCallCheck(this, UniqueTheme3DLayer);

    _this = _super.call(this, id, layerOptions);
    /**
     * @member  mapboxgl.supermap.UniqueTheme3DLayer.prototype.colorStops -{Array}
     * @description æ°æ®é¢è²æ°ç»ï¼å¦[["ç»¿å°","#CD7054"],["éè·¯","#AD1283"]]ã
     */

    _this.colorStops = null;

    _this._extend(UniqueTheme3DLayer_assertThisInitialized(_this), layerOptions);

    return _this;
  }
  /**
   * @function  mapboxgl.supermap.UniqueTheme3DLayer.prototype.getLayerStyleOptions
   * @description è·åå¾å±æ ·å¼ã
   * @returns {Object} Mapbox GL æ ·å¼å¯¹è±¡ã
   */


  UniqueTheme3DLayer_createClass(UniqueTheme3DLayer, [{
    key: "getLayerStyleOptions",
    value: function getLayerStyleOptions() {
      var opacity = this.opacity == null ? 1 : this.opacity;
      opacity = isNaN(parseFloat(opacity)) ? 1 : parseFloat(opacity);
      var options = {
        'fill-extrusion-color': {
          'stops': this.colorStops,
          'property': this.themeField,
          'type': 'categorical'
        },
        'fill-extrusion-opacity': opacity
      };

      if (this.height != null) {
        options['fill-extrusion-height'] = this.height;
      } else {
        options['fill-extrusion-height'] = {
          'property': this.heightField || 'height',
          'type': 'categorical'
        };
      }

      if (this.baseHeightField) {
        options['fill-extrusion-base'] = {
          'property': this.baseHeightField,
          'type': 'identity'
        };
      }

      return options;
    }
    /**
     * @function mapboxgl.supermap.UniqueTheme3DLayer.prototype.getHighlightStyleOptions
     * @description è·åé«äº®æ ·å¼ã
     * @returns {Object} Mapbox GL æ ·å¼å¯¹è±¡ã
     */

  }, {
    key: "getHighlightStyleOptions",
    value: function getHighlightStyleOptions() {
      var color = this.highlight && this.highlight.color != null ? this.highlight.color : '#ADA91E';
      var paint = {
        'fill-extrusion-color': color,
        'fill-extrusion-height': {
          "stops": this.heightStops,
          "property": this.heightField,
          'type': 'categorical'
        },
        'fill-extrusion-opacity': this.highlight && this.highlight.opacity || 0.6
      };

      if (this.height != null) {
        paint['fill-extrusion-height'] = this.height || 0;
      }

      return paint;
    }
  }, {
    key: "_createLegendElement",
    value: function _createLegendElement() {
      var legendListElement = "<ul>";
      var len = this.colorStops && this.colorStops.length || 0;

      for (var i = 0; i < len; i++) {
        var text = this.colorStops[i][0];
        var color = this.colorStops[i][1];
        legendListElement += "<li><span style='background-color:" + color + ";'></span><span>" + text + "</span></li>";
      }

      legendListElement += "</ul>";
      return legendListElement;
    }
  }]);

  return UniqueTheme3DLayer;
}(Theme3DLayer);
(external_mapboxgl_default()).supermap.UniqueTheme3DLayer = UniqueTheme3DLayer;
// CONCATENATED MODULE: ./src/mapboxgl/overlay/UniqueThemeLayer.js
function UniqueThemeLayer_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { UniqueThemeLayer_typeof = function _typeof(obj) { return typeof obj; }; } else { UniqueThemeLayer_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return UniqueThemeLayer_typeof(obj); }

function UniqueThemeLayer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function UniqueThemeLayer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function UniqueThemeLayer_createClass(Constructor, protoProps, staticProps) { if (protoProps) UniqueThemeLayer_defineProperties(Constructor.prototype, protoProps); if (staticProps) UniqueThemeLayer_defineProperties(Constructor, staticProps); return Constructor; }

function UniqueThemeLayer_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) UniqueThemeLayer_setPrototypeOf(subClass, superClass); }

function UniqueThemeLayer_setPrototypeOf(o, p) { UniqueThemeLayer_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return UniqueThemeLayer_setPrototypeOf(o, p); }

function UniqueThemeLayer_createSuper(Derived) { var hasNativeReflectConstruct = UniqueThemeLayer_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = UniqueThemeLayer_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = UniqueThemeLayer_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return UniqueThemeLayer_possibleConstructorReturn(this, result); }; }

function UniqueThemeLayer_possibleConstructorReturn(self, call) { if (call && (UniqueThemeLayer_typeof(call) === "object" || typeof call === "function")) { return call; } return UniqueThemeLayer_assertThisInitialized(self); }

function UniqueThemeLayer_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function UniqueThemeLayer_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function UniqueThemeLayer_getPrototypeOf(o) { UniqueThemeLayer_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return UniqueThemeLayer_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class mapboxgl.supermap.UniqueThemeLayer
 * @category  Visualization Theme
 * @classdesc  åå¼ä¸é¢å¾å±ã
 * @param {string} name - å¾å±åã
 * @param {Object} opt_options - åæ°ã
 * @param {string} opt_options.themeField - æå®åå»ºä¸é¢å¾å­æ®µã
 * @param {Object} opt_options.style - ä¸é¢å¾æ ·å¼ã
 * @param {Object} opt_options.styleGroups - åä¸é¢ç±»åæ ·å¼ç»ã
 * @param {mapboxgl.Map} opt_options.map - å½å mapboxgl map å¯¹è±¡ã
 * @param {string} [opt_options.id] - ä¸é¢å¾å± IDãé»è®¤ä½¿ç¨ CommonUtil.createUniqueID("themeLayer_") åå»ºä¸é¢å¾å± IDã
 * @param {boolean} [opt_options.loadWhileAnimating=true] - æ¯å¦å®æ¶éç»ã
 * @param {number} [opt_options.opacity=1] - å¾å±éæåº¦ã
 * @param {boolean} [opt_options.isHoverAble=false] - æ¯å¦å¼å¯ hover äºä»¶ã
 * @param {Object} [opt_options.highlightStyle] - å¼å¯ hover äºä»¶åï¼è§¦åçæ ·å¼é£æ ¼ã
 * @extends {mapboxgl.supermap.GeoFeatureThemeLayer}
 */

var Unique = /*#__PURE__*/function (_GeoFeature) {
  UniqueThemeLayer_inherits(Unique, _GeoFeature);

  var _super = UniqueThemeLayer_createSuper(Unique);

  function Unique(name, opt_options) {
    var _this;

    UniqueThemeLayer_classCallCheck(this, Unique);

    _this = _super.call(this, name, opt_options);
    _this.themeField = opt_options.themeField;
    _this.style = opt_options.style;
    _this.styleGroups = opt_options.styleGroups;
    _this.isHoverAble = opt_options.isHoverAble;
    _this.highlightStyle = opt_options.highlightStyle;
    return _this;
  }
  /**
   * @private
   * @function mapboxgl.supermap.UniqueThemeLayer.prototype.createThematicFeature
   * @description åå»ºä¸é¢å¾è¦ç´ ã
   * @param {Object} feature - è¦åå»ºçä¸é¢å¾å½¢è¦ç´ ã
   */


  UniqueThemeLayer_createClass(Unique, [{
    key: "createThematicFeature",
    value: function createThematicFeature(feature) {
      //èµ style
      var style = this.getStyleByData(feature); //åå»ºä¸é¢è¦ç´ æ¶çå¯éåæ°

      var options = {};
      options.nodesClipPixel = this.nodesClipPixel;
      options.isHoverAble = this.isHoverAble;
      options.isMultiHover = this.isMultiHover;
      options.isClickAble = this.isClickAble;
      options.highlightStyle = ShapeFactory.transformStyle(this.highlightStyle); //å°æ°æ®è½¬ä¸ºä¸é¢è¦ç´ ï¼Vectorï¼

      var thematicFeature = new ThemeVector(feature, this, ShapeFactory.transformStyle(style), options); //ç´æ¥æ·»å å¾å½¢å°æ¸²æå¨

      for (var m = 0; m < thematicFeature.shapes.length; m++) {
        this.renderer.addShape(thematicFeature.shapes[m]);
      }

      return thematicFeature;
    }
    /**
     * @private
     * @function mapboxgl.supermap.UniqueThemeLayer.prototype.getStyleByData
     * @description éè¿æ°æ®è·å styleã
     * @param {Object} fea - è¦ç´ æ°æ®ã
     */

  }, {
    key: "getStyleByData",
    value: function getStyleByData(fea) {
      var style = {};
      var feature = fea;
      style = Util.copyAttributesWithClip(style, this.style);

      if (this.themeField && this.styleGroups && this.styleGroups.length > 0 && feature.attributes) {
        var tf = this.themeField;
        var Attrs = feature.attributes;
        var Gro = this.styleGroups;
        var isSfInAttrs = false; //æå®ç themeField æ¯å¦æ¯ feature çå±æ§å­æ®µä¹ä¸

        var attr = null; //å±æ§å¼

        for (var property in Attrs) {
          if (tf === property) {
            isSfInAttrs = true;
            attr = Attrs[property];
            break;
          }
        } //å¤æ­å±æ§å¼æ¯å¦å±äºstyleGroupsçæä¸ä¸ªèå´ï¼ä»¥ä¾¿å¯¹è·ååç» style


        if (isSfInAttrs) {
          for (var i = 0, len = Gro.length; i < len; i++) {
            if (attr.toString() === Gro[i].value.toString()) {
              //feature.style = CommonUtil.copyAttributes(feature.style, this.defaultStyle);
              var sty1 = Gro[i].style;
              style = Util.copyAttributesWithClip(style, sty1);
            }
          }
        }
      }

      if (feature.style && this.isAllowFeatureStyle === true) {
        style = Util.copyAttributesWithClip(feature.style);
      }

      return style;
    }
  }]);

  return Unique;
}(GeoFeature);
(external_mapboxgl_default()).supermap.UniqueThemeLayer = Unique;
// CONCATENATED MODULE: ./src/mapboxgl/overlay/graphic/Graphic.js
function Graphic_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Graphic_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function Graphic_createClass(Constructor, protoProps, staticProps) { if (protoProps) Graphic_defineProperties(Constructor.prototype, protoProps); if (staticProps) Graphic_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class mapboxgl.supermap.Graphic
 * @classdesc é«æçç¹å¾å±ç¹è¦ç´ ç±»ã
 * @category  Visualization Graphic
 * @param {(Object|Array.<number>)} lngLat - åæ ãæ ¼å¼ï¼ç»çº¬åº¦æ°ç»æåå«{lng,lat}æ ¼å¼å¯¹è±¡ã
 * @param {Object} style - å¾å½¢åæ°ã
 * @param {Array.<number>} [style.color] - ç¹é¢è²ãç®ååªæ¯æ rgba æ°ç»ã
 * @param {Object} [style.radius] - ç¹åå¾ã
 * @param {Object} [attributes] - å±æ§ä¿¡æ¯ã
 * @example
 * var graphic = new mapboxgl.supermap.Graphic(
 *    {
 *         lng:116,
 *         lat:39
 *    },{
 *         color:[255,0,0],
 *         radius:30
 *    }
 * });
 */

var Graphic = /*#__PURE__*/function () {
  function Graphic(lngLat, style, attributes) {
    Graphic_classCallCheck(this, Graphic);

    this.lngLat = core_Util_Util.isArray(lngLat) ? {
      lng: lngLat[0],
      lat: lngLat[1]
    } : lngLat;
    this.style = core_Util_Util.extend({}, style);
    this.attributes = attributes;
  }
  /**
   * @function mapboxgl.supermap.Graphic.prototype.getId
   * @description è·åå½å IDã
   * @returns {string} id
   */


  Graphic_createClass(Graphic, [{
    key: "getId",
    value: function getId() {
      return this.id;
    }
    /**
     * @function mapboxgl.supermap.Graphic.prototype.setId
     * @description è®¾ç½®å½åè¦ç´  IDã
     * @param {string} id - è¦ç´  IDã
     */

  }, {
    key: "setId",
    value: function setId(id) {
      this.id = id;
    }
    /**
     * @function mapboxgl.supermap.Graphic.prototype.getLngLat
     * @description è·åç»çº¬åº¦åæ ã
     * @returns {Object} ç»çº¬åº¦åæ ,æ°æ®æ ¼å¼{lng,lat}ã
     */

  }, {
    key: "getLngLat",
    value: function getLngLat() {
      return this.lngLat;
    }
    /**
     * @function mapboxgl.supermap.Graphic.prototype.setLngLat
     * @description è®¾ç½®ç»çº¬åº¦åæ ã
     * @param {Object} lngLat - ç»çº¬åº¦åæ ,æ°æ®æ ¼å¼{lng,lat}ã
     */

  }, {
    key: "setLngLat",
    value: function setLngLat(lngLat) {
      this.lngLat = core_Util_Util.isArray(lngLat) ? {
        lng: lngLat[0],
        lat: lngLat[1]
      } : lngLat;
    }
    /**
     * @function mapboxgl.supermap.Graphic.prototype.setStyle
     * @description è®¾ç½®ç¹æ ·å¼ã
     * @param {Object} style -æ ·å¼éé¡¹ã
     * @param {Array} [style.color] - é¢è²ã
     * @param {number} [style.radius] - åå¾ã
     */

  }, {
    key: "setStyle",
    value: function setStyle(style) {
      this.style = core_Util_Util.extend(this.style, style);
    }
    /**
     * @function mapboxgl.supermap.Graphic.prototype.getStyle
     * @description è·åæ ·å¼ã
     * @returns {Object} ç¹æ ·å¼ã
     */

  }, {
    key: "getStyle",
    value: function getStyle() {
      return this.style;
    }
    /**
     * @function mapboxgl.supermap.Graphic.prototype.setAttributes
     * @description è®¾ç½®å±æ§ä¿¡æ¯ã
     * @param {Object} [attributes] - å±æ§ä¿¡æ¯ã
     */

  }, {
    key: "setAttributes",
    value: function setAttributes(attributes) {
      this.attributes = core_Util_Util.extend({}, this.attributes, attributes);
    }
    /**
     * @function mapboxgl.supermap.Graphic.prototype.getAttributes
     * @description è·åå±æ§ä¿¡æ¯ã
     * @returns {Object} å±æ§ä¿¡æ¯ã
     */

  }, {
    key: "getAttributes",
    value: function getAttributes() {
      return this.attributes;
    }
  }]);

  return Graphic;
}();
(external_mapboxgl_default()).supermap.Graphic = Graphic;
// CONCATENATED MODULE: ./src/mapboxgl/overlay/graphic/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

// CONCATENATED MODULE: ./src/mapboxgl/overlay/GraphicLayer.js
function GraphicLayer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GraphicLayer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GraphicLayer_createClass(Constructor, protoProps, staticProps) { if (protoProps) GraphicLayer_defineProperties(Constructor.prototype, protoProps); if (staticProps) GraphicLayer_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





var defaultProps = {
  color: [0, 0, 0, 255],
  opacity: 0.8,
  radius: 10,
  radiusScale: 1,
  radiusMinPixels: 0,
  radiusMaxPixels: Number.MAX_SAFE_INTEGER,
  strokeWidth: 1,
  outline: false
};
/**
 * @class mapboxgl.supermap.GraphicLayer
 * @category  Visualization Graphic
 * @classdesc é«æçç¹å¾å±ã
 * @param {string} [id] - å¾å±idãé»è®¤ä½¿ç¨ CommonUtil.createUniqueID("graphicLayer_") åå»ºä¸é¢å¾å± IDã
 * @param {Object} options -  å¾å±éç½®é¡¹ã
 * @param {Array.<mapboxgl.supermap.Graphic>} options.graphics - ç¹è¦ç´ å¯¹è±¡æ°ç» ã
 * @param {Array.<number>} [options.color=[0, 0, 0, 255]] - é¢è²,ç®ååªæ¯æ rgba æ°ç»ã
 * @param {number} [options.radius=10] - åå¾ã
 * @param {number} [options.opacity=0.8] - ä¸éæåº¦ã
 * @param {Array.<number>} [options.highlightColor=[0, 0, 128, 128]] - é«äº®é¢è²ï¼ç®ååªæ¯æ rgba æ°ç»ã
 * @param {number} [options.radiusScale=1] - ç¹æ¾å¤§åæ°ã
 * @param {number} [options.radiusMinPixels=0] - åå¾æå°å¼(åç´ )ã
 * @param {number} [options.radiusMaxPixels=Number.MAX_SAFE_INTEGER] - åå¾æå¤§å¼(åç´ )ã
 * @param {number} [options.strokeWidth=1] - è¾¹æ¡å¤§å°ã
 * @param {boolean} [options.outline=false] - æ¯å¦æ¾ç¤ºè¾¹æ¡ã
 */

var GraphicLayer = /*#__PURE__*/function () {
  function GraphicLayer(id, options) {
    GraphicLayer_classCallCheck(this, GraphicLayer);

    var opt = core_Util_Util.extend(this, defaultProps, options);
    /**
     * @member {string} mapboxgl.supermap.GraphicLayer.prototype.id
     * @description é«æçç¹å¾å± idã
     */

    this.id = id || Util.createUniqueID("graphicLayer_");
    /**
     * @member {Array.<mapboxgl.supermap.Graphic>} mapboxgl.supermap.GraphicLayer.prototype.graphics
     * @description ç¹è¦ç´ å¯¹è±¡æ°ç»ã
     */

    this.graphics = [].concat(opt.graphics);
    /**
     * @member {boolean} [mapboxgl.supermap.GraphicLayer.prototype.visibility=true]
     * @description å¾å±æ¾ç¤ºç¶æå±æ§ã
     */

    this.visibility = true;
  }
  /**
   * @function mapboxgl.supermap.GraphicLayer.prototype.addTo
   * @description å¾å±æ·»å å°å°å¾ï¼å°å¨ä¸ä¸ªçæ¬åºå¼ï¼è¯·ä½¿ç¨ onAdd() ä»£æ¿ã
   * @param {mapboxgl.Map} map - Mapbox GL å°å¾å¯¹è±¡ã
   * @returns this
   */


  GraphicLayer_createClass(GraphicLayer, [{
    key: "addTo",
    value: function addTo(map) {
      this.onAdd(map);
    }
    /**
     * @function mapboxgl.supermap.GraphicLayer.prototype.onAdd
     * @description å¾å±æ·»å å°å°å¾ã
     * @param {mapboxgl.Map} map - Mapbox GL å°å¾å¯¹è±¡ã
     * @returns {mapboxgl.supermap.GraphicLayer}
     */

  }, {
    key: "onAdd",
    value: function onAdd(map) {
      this.map = map;

      if (this.canvas) {
        this.mapContainer = this.map.getCanvasContainer();
        this.mapContainer.appendChild(this.canvas);
        return this;
      }

      this._initContainer(); //å½ä½¿ç¨æ©å±çmapboxglä»£ç æ¶ææ


      if (map.getCRS && map.getCRS() !== (external_mapboxgl_default()).CRS.EPSG3857) {
        this.coordinateSystem = 3;
        this.isGeographicCoordinateSystem = true;
      }

      var mapState = this.getState();
      var data = mapState.data,
          color = mapState.color,
          radius = mapState.radius,
          opacity = mapState.opacity,
          highlightColor = mapState.highlightColor,
          radiusScale = mapState.radiusScale,
          radiusMinPixels = mapState.radiusMinPixels,
          radiusMaxPixels = mapState.radiusMaxPixels,
          strokeWidth = mapState.strokeWidth,
          outline = mapState.outline;
      var me = this;
      var layerOptions = {
        id: 'scatter-plot',
        data: data,
        pickable: Boolean(this.onClick) || Boolean(this.onHover),
        autoHighlight: true,
        color: color,
        opacity: opacity,
        radius: radius,
        radiusScale: radiusScale,
        highlightColor: highlightColor,
        radiusMinPixels: radiusMinPixels,
        radiusMaxPixels: radiusMaxPixels,
        strokeWidth: strokeWidth,
        outline: outline,
        isGeographicCoordinateSystem: this.isGeographicCoordinateSystem,
        coordinateSystem: this.coordinateSystem,
        getPosition: function getPosition(point) {
          if (!point) {
            return [0, 0, 0];
          }

          var lngLat = point.getLngLat();
          return lngLat && [lngLat.lng, lngLat.lat, 0];
        },
        getColor: function getColor(point) {
          var style = point && point.getStyle();
          return style && style.color || me.color;
        },
        getRadius: function getRadius(point) {
          var style = point && point.getStyle();
          return style && style.radius || me.radius;
        },
        updateTriggers: {
          getColor: [color],
          getRadius: [radius]
        }
      };

      if (this.onClick) {
        layerOptions.onClick = this.onClick;
      }

      if (this.onHover) {
        layerOptions.onHover = this.onHover;
      }

      this.layer = new window.DeckGL.ScatterplotLayer(layerOptions);
      var deckOptions = {};

      for (var key in mapState) {
        deckOptions[key] = mapState[key];
      }

      deckOptions.layers = [this.layer];
      deckOptions.canvas = this.canvas;
      this.deckGL = new window.DeckGL.experimental.DeckGLJS(deckOptions);
      this.map.on('render', this._moveEvent.bind(this));
      this.map.on('resize', this._resizeEvent.bind(this));
      this.draw();
      return this;
    }
    /**
     * @function mapboxgl.supermap.GraphicLayer.prototype.setStyle
     * @description è®¾ç½®å¾å±æ´ä½æ ·å¼ã
     * @param {Object} styleOptions - æ ·å¼å¯¹è±¡ã
     * @param {Array.<number>} [styleOptions.color=[0, 0, 0, 255]] - ç¹é¢è²ã
     * @param {number} [styleOptions.radius=10] - ç¹åå¾ã
     * @param {number} [styleOptions.opacity=0.8] - ä¸éæåº¦ã
     * @param {Array}  [styleOptions.highlightColor=[0, 0, 128, 128]] - é«äº®é¢è²ï¼ç®ååªæ¯æ rgba æ°ç»ã
     * @param {number} [styleOptions.radiusScale=1] - ç¹æ¾å¤§åæ°ã
     * @param {number} [styleOptions.radiusMinPixels=0] - åå¾æå°å¼(åç´ )ã
     * @param {number} [styleOptions.radiusMaxPixels=Number.MAX_SAFE_INTEGER] - åå¾æå¤§å¼(åç´ )ã
     * @param {number} [styleOptions.strokeWidth=1] - è¾¹æ¡å¤§å°ã
     * @param {boolean} [styleOptions.outline=false] - æ¯å¦æ¾ç¤ºè¾¹æ¡ã
     */

  }, {
    key: "setStyle",
    value: function setStyle(styleOptions) {
      var styleOpt = {
        color: this.color,
        radius: this.radius,
        opacity: this.opacity,
        highlightColor: this.highlightColor,
        radiusScale: this.radiusScale,
        radiusMinPixels: this.radiusMinPixels,
        radiusMaxPixels: this.radiusMaxPixels,
        strokeWidth: this.strokeWidth,
        outline: this.outline
      };
      core_Util_Util.extend(this, styleOpt, styleOptions);
      this.update();
    }
    /**
     * @function mapboxgl.supermap.GraphicLayer.prototype.setGraphics
     * @description è®¾ç½®ç»å¶çç¹è¦ç´ æ°æ®ï¼ä¼è¦çä¹åçææè¦ç´ ã
     * @param {Array.<mapboxgl.supermap.Graphic>} graphics - ç¹è¦ç´ å¯¹è±¡æ°ç»ã
     */

  }, {
    key: "setGraphics",
    value: function setGraphics(graphics) {
      this.graphics = this.graphics || [];
      this.graphics.length = 0;
      var sGraphics = !core_Util_Util.isArray(graphics) ? [graphics] : [].concat(graphics); //this.layer.props.dataä¸è½è¢«éæ°èµå¼ï¼åªè½å¨åæ°ç»ä¸è¿è¡æä½

      if (!this.layer.props.data) {
        this.layer.props.data = [];
      }

      this.layer.props.data.length = 0;

      for (var i = 0; i < sGraphics.length; i++) {
        this.layer.props.data.push(sGraphics[i]);
      }

      this.update();
    }
    /**
     * @function mapboxgl.supermap.GraphicLayer.prototype.addGraphics
     * @description æ·»å ç¹è¦ç´ ï¼ä¸ä¼è¦çä¹åçè¦ç´ ã
     * @param {Array.<mapboxgl.supermap.Graphic>} graphics - ç¹è¦ç´ å¯¹è±¡æ°ç»ã
     */

  }, {
    key: "addGraphics",
    value: function addGraphics(graphics) {
      this.graphics = this.graphics || [];
      var sGraphics = !core_Util_Util.isArray(graphics) ? [graphics] : [].concat(graphics); //this.layer.props.dataä¸è½è¢«éæ°èµå¼ï¼åªè½å¨åæ°ç»ä¸è¿è¡æä½

      if (!this.layer.props.data) {
        this.layer.props.data = [];
      }

      for (var i = 0; i < sGraphics.length; i++) {
        this.layer.props.data.push(sGraphics[i]);
      }

      this.update();
    }
    /**
     * @function mapboxgl.supermap.GraphicLayer.prototype.getGraphicBy
     * @description å¨ Vector çè¦ç´ æ°ç» graphics éé¢éåæ¯ä¸ä¸ª graphicï¼å½ graphic[property]===value æ¶ï¼è¿åæ­¤ graphicï¼å¹¶ä¸åªè¿åç¬¬ä¸ä¸ªï¼ã
     * @param {string} property - graphic çæä¸ªå±æ§åç§°ã
     * @param {string} value - property æå¯¹åºçå¼ã
     * @returns {ol.Graphic} ä¸ä¸ªå¹éç graphicã
     */

  }, {
    key: "getGraphicBy",
    value: function getGraphicBy(property, value) {
      var graphic = null;

      for (var index in this.graphics) {
        if (this.graphics[index][property] === value) {
          graphic = this.graphics[index];
          break;
        }
      }

      return graphic;
    }
    /**
     * @function mapboxgl.supermap.GraphicLayer.prototype.getGraphicById
     * @description éè¿ç»å®ä¸ä¸ª idï¼è¿åå¯¹åºçç¢éè¦ç´ ã
     * @param {string} graphicId - ç¢éè¦ç´ çå±æ§ id
     * @returns {ol.Graphic} ä¸ä¸ªå¹éç graphicã
     */

  }, {
    key: "getGraphicById",
    value: function getGraphicById(graphicId) {
      return this.getGraphicBy("id", graphicId);
    }
    /**
     * @function mapboxgl.supermap.GraphicLayer.prototype.getGraphicsByAttribute
     * @description éè¿ç»å®ä¸ä¸ªå±æ§ç key å¼å value å¼ï¼è¿åææå¹éçè¦ç´ æ°ç»ã
     * @param {string} attrName - graphic çæä¸ªå±æ§åç§°ã
     * @param {string} attrValue - property æå¯¹åºçå¼ã
     * @returns {Array.<ol.Graphic>} ä¸ä¸ªå¹éç graphic æ°ç»ã
     */

  }, {
    key: "getGraphicsByAttribute",
    value: function getGraphicsByAttribute(attrName, attrValue) {
      var graphic,
          foundgraphics = [];

      for (var index in this.graphics) {
        graphic = this.graphics[index];

        if (graphic && graphic.attributes) {
          if (graphic.attributes[attrName] === attrValue) {
            foundgraphics.push(graphic);
          }
        }
      }

      return foundgraphics;
    }
    /**
     * @function mapboxgl.supermap.GraphicLayer.prototype.removeGraphics
     * @description å é¤è¦ç´ æ°ç»ï¼é»è®¤å°å é¤ææè¦ç´ 
     * @param {Array.<ol.Graphic>} [graphics=null] - å é¤ç graphics æ°ç»
     */

  }, {
    key: "removeGraphics",
    value: function removeGraphics() {
      var graphics = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;

      //å½ graphics ä¸º null ãä¸ºç©ºæ°ç»ï¼æ === this.graphicsï¼åæ¸é¤ææè¦ç´ 
      if (!graphics || graphics.length === 0 || graphics === this.graphics) {
        this.graphics.length = 0;

        if (this.layer.props.data) {
          this.layer.props.data.length = 0;
        }

        this.update();
        return;
      }

      if (!Util.isArray(graphics)) {
        graphics = [graphics];
      }

      for (var i = graphics.length - 1; i >= 0; i--) {
        var graphic = graphics[i]; //å¦ææä»¬ä¼ å¥çgrapchicå¨graphicsæ°ç»ä¸­æ²¡æçè¯ï¼åä¸è¿è¡å é¤ï¼
        //å¹¶å°å¶æ¾å¥æªå é¤çæ°ç»ä¸­ã

        var findex = Util.indexOf(this.graphics, graphic);

        if (findex === -1) {
          continue;
        }

        this.graphics.splice(findex, 1);
      } //å é¤å®æåéæ°è®¾ç½® setGraphicsï¼ä»¥æ´æ°


      this.update();
    }
    /**
     * @function mapboxgl.supermap.GraphicLayer.prototype.update
     * @description æ´æ°å¾å±ã
     */

  }, {
    key: "update",
    value: function update() {
      if (this.layer.lifecycle !== 'Awaiting state') {
        this.layer.setChangeFlags({
          dataChanged: true,
          propsChanged: true,
          viewportChanged: true,
          updateTriggersChanged: true
        });
        var state = this.getState();
        this.layer.setState(state);
      }
    }
    /**
     * @function mapboxgl.supermap.GraphicLayer.prototype.clear
     * @description éæ¾å¾å±èµæºã
     */

  }, {
    key: "clear",
    value: function clear() {
      this.removeGraphics();
      this.deckGL.finalize();
    }
    /**
     * @function mapboxgl.supermap.GraphicLayer.prototype.remove
     * @description å é¤è¯¥å¾å±ã
     */

  }, {
    key: "remove",
    value: function remove() {
      this.map.off('render', this._moveEvent.bind(this));
      this.map.off('resize', this._resizeEvent.bind(this));
      this.map.getCanvasContainer().removeChild(this.canvas);
    }
    /**
     * @function mapboxgl.supermap.GraphicLayer.prototype.removeFromMap
     * @deprecated
     * @description å é¤è¯¥å¾å±ã
     */

  }, {
    key: "removeFromMap",
    value: function removeFromMap() {
      this.remove();
      this.clear();
    }
    /**
     * @function mapboxgl.supermap.GraphicLayer.prototype.moveTo
     * @description å°å¾å±ç§»å¨å°æä¸ªå¾å±ä¹åã
     * @param {string} layerID - å¾æå¥çå¾å± IDã
     * @param {boolean} [before=true] - æ¯å¦å°æ¬å¾å±æå¥å°å¾å± id ä¸º layerID çå¾å±ä¹å(å¦æä¸º false åå°æ¬å¾å±æå¥å°å¾å± id ä¸º layerID çå¾å±ä¹å)ã
     */

  }, {
    key: "moveTo",
    value: function moveTo(layerID, before) {
      var layer = document.getElementById(this.id);
      before = before !== undefined ? before : true;

      if (before) {
        var beforeLayer = document.getElementById(layerID);

        if (layer && beforeLayer) {
          beforeLayer.parentNode.insertBefore(layer, beforeLayer);
        }

        return;
      }

      var nextLayer = document.getElementById(layerID);

      if (layer) {
        if (nextLayer.nextSibling) {
          nextLayer.parentNode.insertBefore(layer, nextLayer.nextSibling);
          return;
        }

        nextLayer.parentNode.appendChild(layer);
      }
    }
    /**
     * @function mapboxgl.supermap.GraphicLayer.prototype.setVisibility
     * @description è®¾ç½®å¾å±å¯è§æ§ï¼è®¾ç½®å¾å±çéèï¼æ¾ç¤ºï¼éç»çç¸åºçå¯è§æ è®°ã
     * @param {boolean} [visibility] - æ¯å¦æ¾ç¤ºå¾å±ï¼å½åå°å¾ç resolution å¨æå¤§æå° resolution ä¹é´ï¼ã
     */

  }, {
    key: "setVisibility",
    value: function setVisibility(visibility) {
      if (this.canvas && visibility !== this.visibility) {
        this.visibility = visibility;
        this.canvas.style.display = visibility ? "block" : "none";
      }
    }
    /**
     * @function mapboxgl.supermap.GraphicLayer.prototype.getState
     * @description è·åå½åå°å¾åå¾å±ç¶æã
     * @returns {Object} å°å¾åå¾å±ç¶æï¼åå«å°å¾ç¶æä¿¡æ¯åæ¬å¾å±ç¸å³ç¶æã
     */

  }, {
    key: "getState",
    value: function getState() {
      var map = this.map;
      var width = parseInt(this.canvas.style.width);
      var height = parseInt(this.canvas.style.height);
      var center = map.getCenter();
      var longitude = center.lng;
      var latitude = center.lat;
      var zoom = map.getZoom();
      var maxZoom = map.getMaxZoom();
      var pitch = map.getPitch();
      var bearing = map.getBearing();
      var mapViewport = {
        longitude: longitude,
        latitude: latitude,
        zoom: zoom,
        maxZoom: maxZoom,
        pitch: pitch,
        bearing: bearing
      };
      var state = {};

      for (var key in mapViewport) {
        state[key] = mapViewport[key];
      }

      state.width = width;
      state.height = height;
      state.data = this.graphics;
      state.color = this.color;
      state.radius = this.radius;
      state.opacity = this.opacity;
      state.highlightColor = this.highlightColor;
      state.radiusScale = this.radiusScale;
      state.radiusMinPixels = this.radiusMinPixels;
      state.radiusMaxPixels = this.radiusMaxPixels;
      state.strokeWidth = this.strokeWidth;
      state.outline = this.outline; //å½ä½¿ç¨æ©å±çmapboxglä»£ç æ¶ææ

      if (map.getCRS && map.getCRS() !== (external_mapboxgl_default()).CRS.EPSG3857) {
        state.coordinateSystem = this.coordinateSystem;
        state.isGeographicCoordinateSystem = this.isGeographicCoordinateSystem;
      }

      return state;
    }
    /**
     * @function mapboxgl.supermap.GraphicLayer.prototype.draw
     * @description ç»å¶å¾å±ã
     */

  }, {
    key: "draw",
    value: function draw() {
      var mapState = this.getState();
      var deckOptions = {};

      for (var key in mapState) {
        deckOptions[key] = mapState[key];
      }

      deckOptions.layers = [this.layer];
      deckOptions.canvas = this.canvas;
      this.deckGL.setProps(deckOptions);
    }
  }, {
    key: "_moveEvent",
    value: function _moveEvent() {
      this.draw();
    }
  }, {
    key: "_resizeEvent",
    value: function _resizeEvent() {
      var canvas = this.canvas;
      var map = this.map;
      canvas.width = parseInt(map.getCanvas().style.width);
      canvas.height = parseInt(map.getCanvas().style.height);
      canvas.style.width = map.getCanvas().style.width;
      canvas.style.height = map.getCanvas().style.height;
      this.draw();
    }
  }, {
    key: "_initContainer",
    value: function _initContainer() {
      this.canvas = this._createCanvas();
      this.mapContainer = this.map.getCanvasContainer();
      this.mapContainer.appendChild(this.canvas);
    }
  }, {
    key: "_createCanvas",
    value: function _createCanvas() {
      var canvas = document.createElement('canvas');

      if (this.id) {
        canvas.id = this.id;
      }

      canvas.style.position = 'absolute';
      canvas.style.top = 0 + "px";
      canvas.style.left = 0 + "px";
      canvas.style.cursor = "";
      var map = this.map;
      canvas.width = parseInt(map.getCanvas().style.width);
      canvas.height = parseInt(map.getCanvas().style.height);
      canvas.style.width = map.getCanvas().style.width;
      canvas.style.height = map.getCanvas().style.height;
      return canvas;
    }
  }]);

  return GraphicLayer;
}();
(external_mapboxgl_default()).supermap.GraphicLayer = GraphicLayer;
// CONCATENATED MODULE: external "function(){try{return THREE}catch(e){return {}}}()"
var external_function_try_return_THREE_catch_e_return_namespaceObject = function(){try{return THREE}catch(e){return {}}}();
// CONCATENATED MODULE: ./src/mapboxgl/overlay/threejs/Transform.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



function wrap(source, min, max) {
  if (source === max || source === min) {
    return source;
  }

  var len = max - min;
  return ((source - min) % len + len) % len + min;
}

function rad(angle) {
  return angle * Math.PI / 180;
}

var Projection = {
  R: 6378137,
  minZoom: 0,
  maxZoom: 22,
  nativeMaxZoom: 19,
  RAD: Math.PI / 180,
  METERS_PER_DEGREE: 6378137 * Math.PI / 180,
  MAX_LATITUDE: 85.0511287798,
  project: function project(lngLat) {
    var rad = this.RAD,
        metersPerDegree = this.METERS_PER_DEGREE,
        max = this.MAX_LATITUDE;
    var ll = lngLat instanceof Array ? {
      lng: lngLat[0],
      lat: lngLat[1]
    } : {
      lng: lngLat.lng,
      lat: lngLat.lat
    };
    var lng = ll.lng,
        lat = Math.max(Math.min(max, ll.lat), -max);
    var c;

    if (lat === 0) {
      c = 0;
    } else {
      c = Math.log(Math.tan((90 + lat) * rad / 2)) / rad;
    }

    return {
      x: lng * metersPerDegree,
      y: c * metersPerDegree
    };
  },
  unproject: function unproject(point) {
    var x = point.x,
        y = point.y;
    var rad = this.RAD,
        metersPerDegree = this.METERS_PER_DEGREE;
    var c;

    if (y === 0) {
      c = 0;
    } else {
      c = y / metersPerDegree;
      c = (2 * Math.atan(Math.exp(c * rad)) - Math.PI / 2) / rad;
    }

    return {
      lng: wrap(x / metersPerDegree, -180, 180),
      lat: wrap(c, -this.MAX_LATITUDE, this.MAX_LATITUDE)
    };
  },
  locate: function locate(lngLat, dx, dy) {
    if (!lngLat) {
      return null;
    }

    dx = !dx ? 0 : dx;
    dy = !dy ? 0 : dy;

    if (!dx && !dy) {
      return lngLat;
    }

    var lng = lngLat.lng;

    if (dx !== 0) {
      var ndx = Math.abs(dx),
          radLng = rad(lngLat.lng);
      var sLng = 2 * Math.sqrt(Math.pow(Math.sin(ndx / (2 * this.R)), 2) / Math.pow(Math.cos(radLng), 2));
      radLng = radLng + sLng * (ndx > 0 ? 1 : -1);
      lng = wrap(radLng * 180 / Math.PI, -180, 180);
    }

    var lat = lngLat.lat;

    if (dy !== 0) {
      var ndy = Math.abs(dy),
          radLat = rad(lngLat.lat);
      var sLat = Math.sin(ndy / (2 * this.R)) * 2;
      radLat = radLat + sLat * (ndy > 0 ? 1 : -1);
      lat = wrap(radLat * 180 / Math.PI, -90, 90);
    }

    return {
      lng: lng,
      lat: lat
    };
  },
  getResolution: function getResolution(zoom) {
    if (!this.resolutions) {
      var resolutions = [];
      var d = 2 * 6378137 * Math.PI;

      for (var i = 0; i <= this.maxZoom; i++) {
        resolutions[i] = d / (256 * Math.pow(2, i));
      }

      this.resolutions = resolutions;
    }

    var z = zoom | 0,
        length = this.resolutions.length;
    z = z < 0 ? 0 : z > length - 1 ? length - 1 : z;
    var res = this.resolutions[z];

    if ((zoom | 0) !== zoom && z !== length - 1) {
      var next = this.resolutions[z + 1];
      return res + (next - res) * (zoom - z);
    }

    return res;
  }
};
var Transform = {
  matrix: [1, -1, 0, 0],
  projection: Projection,
  project: function project(lngLat) {
    return this.projection.project(lngLat);
  },
  unproject: function unproject(point) {
    return this.projection.unproject(point);
  },
  lngLatToPoint: function lngLatToPoint(lngLat, zoom) {
    var pt = this.project(lngLat);
    return this.transform(pt, this.projection.getResolution(zoom));
  },
  locate: function locate(lngLat, dx, dy) {
    return this.projection.locate(lngLat, dx, dy);
  },
  transform: function transform(point, scale) {
    return {
      x: this.matrix[0] * (point.x - this.matrix[2]) / scale,
      y: this.matrix[1] * (point.y - this.matrix[3]) / scale
    };
  }
};
(external_mapboxgl_default()).supermap.Transform = Transform;
// CONCATENATED MODULE: ./src/mapboxgl/overlay/threejs/ThreeLayerRenderer.js
function ThreeLayerRenderer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThreeLayerRenderer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThreeLayerRenderer_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThreeLayerRenderer_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThreeLayerRenderer_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * reference and modification
 * maptalks.three
 * (https://github.com/maptalks/maptalks.three)
 * Apache Licene 2.0
 * thanks maptalks
 */



var projection = Transform.projection;
var ThreeLayerRenderer_Color = external_function_try_return_THREE_catch_e_return_namespaceObject.Color,
    Scene = external_function_try_return_THREE_catch_e_return_namespaceObject.Scene,
    WebGLRenderer = external_function_try_return_THREE_catch_e_return_namespaceObject.WebGLRenderer,
    CanvasRenderer = external_function_try_return_THREE_catch_e_return_namespaceObject.CanvasRenderer,
    PerspectiveCamera = external_function_try_return_THREE_catch_e_return_namespaceObject.PerspectiveCamera;
var RADIAN = Math.PI / 180;
var ThreeLayerRenderer_frame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
var cancel = window.cancelAnimationFrame || window.mozCancelAnimationFrame || window.webkitCancelAnimationFrame || window.msCancelAnimationFrame;
/**
 * @private
 * @class ThreeLayerRenderer
 * @category  Visualization Three
 * @classdesc Threeå¾å±æ¸²æå¨
 * @param {mapboxgl.supermap.ThreeLayer} layer - ThreeJså¾å±ã</br>
 * @param {string} [renderer="gl"] - å¾å±æ¸²ææ¹å¼(canvasæWebGL)ãåå¼ï¼"gl","canvas"ã</br>
 * @param {Object} options - threejsæ¸²æå¨åå§ååæ°å¯¹è±¡ãåæ°åå®¹è¯¦è§:
 *          [WebGLRenderer]{@link https://threejs.org/docs/index.html#api/renderers/WebGLRenderer}/
 *          [CanvasRenderer]{@link https://threejs.org/docs/index.html#examples/renderers/CanvasRenderer}
 *
 * @extends {mapboxgl.Evented}
 * @fires mapboxgl.supermap.ThreeLayer#initialized
 * @fires mapboxgl.supermap.ThreeLayer#draw
 * @fires mapboxgl.supermap.ThreeLayer#rendererinitialized
 */

var ThreeLayerRenderer = /*#__PURE__*/function () {
  function ThreeLayerRenderer(layer, renderer, options) {
    ThreeLayerRenderer_classCallCheck(this, ThreeLayerRenderer);

    this._layer = layer;
    this.renderer = renderer || "gl";
    this.options = options;
  }

  ThreeLayerRenderer_createClass(ThreeLayerRenderer, [{
    key: "setMap",
    value: function setMap(map) {
      this.map = map;
    } //å¼å§æ¸²æ

  }, {
    key: "render",
    value: function render() {
      if (!this._layer) {
        return;
      }

      this.prepare();
      /**
       * @event mapboxgl.supermap.ThreeLayer#initialized
       * @description three åå§åä¹ååè§¦åã
       */

      this._layer.fire("initialized");

      this._layer && this._layer.draw(this.context, this.scene, this.camera);
      /**
       * @event mapboxgl.supermap.ThreeLayer#draw
       * @description draw ç»å¶äºä»¶, è°ç¨æä¾ç»å¤é¨ç»å¶çæ¥å£åè§¦å
       */

      this._layer.fire("draw");

      this.renderScene();
    }
  }, {
    key: "update",
    value: function update() {
      this.remove();
      this.render();
    } //æ¸²æåºæ¯ï¼æ¨¡åå·²ç»æ·»å å°å¾å±ï¼

  }, {
    key: "renderScene",
    value: function renderScene() {
      this.locationCamera();
      this.animationFrame = this.renderFrame(function () {
        this.animationFrame = null;
        this.context && this.context.render(this.scene, this.camera);
      }.bind(this));
    }
  }, {
    key: "renderFrame",
    value: function renderFrame(fn) {
      var render = function render() {
        fn && typeof fn === "function" && fn();
      };

      return ThreeLayerRenderer_frame(render);
    }
  }, {
    key: "resize",
    value: function resize() {
      this._resetElementSize(this.container);

      this._resetElementSize(this.canvas);

      var width = this.canvas.width,
          height = this.canvas.height;
      var size = this.getMapSize();
      this.camera.aspect = width / height;
      this.camera.updateProjectionMatrix();
      this.context.setSize(size.width, size.height);
      this.renderScene();
    } //åå»ºç»å¸ãåå§åæ¸²æå¨ãåå§åç¸æºç­

  }, {
    key: "prepare",
    value: function prepare() {
      if (!this.map) {
        return new Error("map object is necessary");
      }

      if (!this.canvas) {
        this._initContainer();

        this._initThreeRenderer();
        /**
         * @event mapboxgl.supermap.ThreeLayer#rendererinitialized
         * @description rendererinitialized äºä»¶ï¼åå§å three æ¸²æå¨åè§¦å
         */


        this._layer.fire("rendererinitialized");
      } else {
        this.clear(this.context);
      }
    }
  }, {
    key: "getMapSize",
    value: function getMapSize() {
      var container = this.map.getContainer();
      return {
        width: container.clientWidth,
        height: container.clientHeight
      };
    }
  }, {
    key: "cancelFrame",
    value: function cancelFrame() {
      if (this.animationFrame != null) {
        cancel(this.animationFrame);
      }
    }
  }, {
    key: "remove",
    value: function remove() {
      if (this.animationFrame != null) {
        cancel(this.animationFrame);
      }

      this.container.removeChild(this.canvas);
      this.container.parentNode.removeChild(this.container);
      this.context = null;
      this.canvas = null;
      this.container = null;
    } //æ¸çç»å¸åå®¹

  }, {
    key: "clear",
    value: function clear(context) {
      context && context.clear && context.clear();
      context && context.clearRect && context.clearRect(0, 0, context.canvas.width, context.canvas.height);
    } //è®¡ç®ç¼©æ¾æ¯ä¾

  }, {
    key: "getScale",
    value: function getScale(zoom) {
      var map = this.map;
      var z = zoom == null ? map.getZoom() : zoom;
      var max = projection.getResolution(projection.nativeMaxZoom),
          res = projection.getResolution(z);
      return res / max;
    }
  }, {
    key: "getCanvasContainer",
    value: function getCanvasContainer() {
      return this.container;
    }
  }, {
    key: "getCanvas",
    value: function getCanvas() {
      return this.canvas;
    } //éæ°è®¾ç½®ç¸æºä½ç½®

  }, {
    key: "locationCamera",
    value: function locationCamera() {
      var map = this.map;
      var size = this.getMapSize();
      var scale = map.transform.zoomScale(projection.nativeMaxZoom - map.getZoom() - 1);
      var fovRatio = Math.tan(map.transform.fov / 2 * RADIAN);
      var camera = this.camera; //å¾ææ¶ï¼ç¸æºä½ç½®ä½äºZè½´

      var pitch = map.getPitch() * RADIAN;
      var pZ = -scale * size.height / 2 / fovRatio;
      camera.position.z = pZ * Math.cos(pitch);
      var centerPoint = Transform.lngLatToPoint(map.getCenter(), projection.nativeMaxZoom);
      var distance = Math.sin(pitch) * pZ;
      var bearing = map.getBearing() * RADIAN;
      camera.position.x = centerPoint.x + distance * Math.sin(bearing);
      camera.position.y = centerPoint.y - distance * Math.cos(bearing);
      camera.up.set(Math.sin(bearing), -Math.cos(bearing), 0);
      camera.lookAt(new external_function_try_return_THREE_catch_e_return_namespaceObject.Vector3(centerPoint.x, centerPoint.y, 0));
      camera.updateProjectionMatrix();
    }
  }, {
    key: "_initContainer",
    value: function _initContainer() {
      var canvas = this._createCanvas();

      var container = this.container = document.createElement("div");

      if (this._layer._layerId) {
        container.id = this._layer._layerId;
      }

      container.className = "threejs-wrapper";
      container.style.position = "absolute";
      container.style.left = "0px";
      container.style.top = "0px";
      container.style.overflow = "hidden";

      this._resetElementSize(container);

      container.appendChild(canvas);
      var mapContainer = this.map.getCanvasContainer();
      mapContainer.appendChild(container);
    }
  }, {
    key: "_createCanvas",
    value: function _createCanvas() {
      if (this.canvas) {
        return;
      }

      var canvas = this.canvas = document.createElement('canvas');
      canvas.className = "threejs-overlay";
      canvas.style.outline = "none";

      this._resetElementSize(canvas);

      return canvas;
    }
  }, {
    key: "_resetElementSize",
    value: function _resetElementSize(element) {
      if (!element) {
        return;
      }

      var size = this.getMapSize();
      var dpr = window.devicePixelRatio ? window.devicePixelRatio : 1;
      var width = dpr * size.width;
      var height = dpr * size.height;
      element.width = width;
      element.height = height;
      element.style.width = size.width + 'px';
      element.style.height = size.height + 'px';
    }
  }, {
    key: "_initThreeRenderer",
    value: function _initThreeRenderer() {
      var map = this.map;
      var size = this.getMapSize();
      var renderer = this.renderer || 'gl';
      var context;

      if (renderer === 'gl') {
        context = new WebGLRenderer({
          'canvas': this.canvas,
          'alpha': true,
          'antialias': true,
          'preserveDrawingBuffer': true
        }, this.options);
        context.autoClear = true;
        context.clear();
      } else {
        context = new CanvasRenderer(Util.extend({
          'canvas': this.canvas,
          'alpha': true
        }, this.options));
      }

      context.setClearColor(new ThreeLayerRenderer_Color(1, 1, 1), 0);
      context.canvas = this.canvas;
      this.context = context;
      var fov = map.transform.fov;
      var fovRatio = Math.tan(fov / 2 * RADIAN);
      var maxScale = this.getScale(projection.minZoom) / this.getScale(projection.nativeMaxZoom);
      var far = maxScale * size.height / 2 / fovRatio;
      this.camera = new PerspectiveCamera(fov, size.width / size.height, 1, far);
      this.scene = new Scene();
      this.scene.add(this.camera);
    }
  }]);

  return ThreeLayerRenderer;
}();
// CONCATENATED MODULE: ./src/mapboxgl/overlay/threejs/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


// CONCATENATED MODULE: ./src/mapboxgl/overlay/ThreeLayer.js
function ThreeLayer_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { ThreeLayer_typeof = function _typeof(obj) { return typeof obj; }; } else { ThreeLayer_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return ThreeLayer_typeof(obj); }

function ThreeLayer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ThreeLayer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ThreeLayer_createClass(Constructor, protoProps, staticProps) { if (protoProps) ThreeLayer_defineProperties(Constructor.prototype, protoProps); if (staticProps) ThreeLayer_defineProperties(Constructor, staticProps); return Constructor; }

function ThreeLayer_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) ThreeLayer_setPrototypeOf(subClass, superClass); }

function ThreeLayer_setPrototypeOf(o, p) { ThreeLayer_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return ThreeLayer_setPrototypeOf(o, p); }

function ThreeLayer_createSuper(Derived) { var hasNativeReflectConstruct = ThreeLayer_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = ThreeLayer_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = ThreeLayer_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return ThreeLayer_possibleConstructorReturn(this, result); }; }

function ThreeLayer_possibleConstructorReturn(self, call) { if (call && (ThreeLayer_typeof(call) === "object" || typeof call === "function")) { return call; } return ThreeLayer_assertThisInitialized(self); }

function ThreeLayer_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function ThreeLayer_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ThreeLayer_getPrototypeOf(o) { ThreeLayer_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return ThreeLayer_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * reference and modification
 * maptalks.three
 * (https://github.com/maptalks/maptalks.three)
 * Apache Licene 2.0
 * thanks maptalks
 */



var Vector3 = external_function_try_return_THREE_catch_e_return_namespaceObject.Vector3,
    ThreeLayer_Shape = external_function_try_return_THREE_catch_e_return_namespaceObject.Shape,
    Mesh = external_function_try_return_THREE_catch_e_return_namespaceObject.Mesh,
    BufferGeometry = external_function_try_return_THREE_catch_e_return_namespaceObject.BufferGeometry,
    ExtrudeGeometry = external_function_try_return_THREE_catch_e_return_namespaceObject.ExtrudeGeometry;
/**
 * @class mapboxgl.supermap.ThreeLayer
 * @category  Visualization Three
 * @classdesc Three å¾å±ã
 * @param {string} id - å¾å± IDã
 * @param {string} [renderer="gl"] - å¾å±æ¸²ææ¹å¼( canvas æ WebGL )ãåå¼ï¼"gl","canvas"ã
 * @param {Object} options - åå§ååæ°ã
 * @param {Object} options.threeOptions - threejs æ¸²æå¨åå§ååæ°å¯¹è±¡ãåæ°åå®¹è¯¦è§:
 *          [WebGLRenderer]{@link https://threejs.org/docs/index.html#api/renderers/WebGLRenderer}
 *          [CanvasRenderer]{@link https://threejs.org/docs/index.html#examples/renderers/CanvasRenderer}
 *
 * @extends {mapboxgl.Evented}
 * @fires mapboxgl.supermap.ThreeLayer#render
 * @fires mapboxgl.supermap.ThreeLayer#renderscene
 * @example
 * var threeLayer = new mapboxgl.supermap.ThreeLayer('three');
 * //æ¨¡åç»å¶
 * threeLayer.on("initialized", draw);
 * threeLayer.addTo(map);
 *
 * function draw() {
 *    var scene=threeLayer.getScene();
 *    camera=threeLayer.getCamera();
 *    var light = new THREE.PointLight(0xffffff);
 *    camera.add(light);
 *    var material = new THREE.MeshPhongMaterial({color: 0xff0000});
 *    //æ ¹æ®åæ ç¹è½¬æ¢ææ¨¡å
 *    var mesh = this.toThreeMesh(feature.geometry.coordinates, 10, material, true);
 *    //æ¨¡åæ·»å å°3Dåºæ¯
 *    scene.add(mesh);
 * }
 *
 * å å æ¨¡åå¯ä»¥éè¿ä¸¤ç§æ¹å¼ï¼</br>
 *     1.è°ç¨ threeLayer.toThreeMesh ç´æ¥å°å°çåæ è½¬æ¢æ threejs 3D æ¨¡åï¼éç¨äºæ¤åæ¨¡åï¼å¦åå¸å»ºç­ï¼ï¼ç¶åæ·»å å° 3D åºæ¯
 *     2.ä½¿ç¨ ThreeJS çæ¥å£åå»ºå¥½ Mesh,ç¶åè°ç¨ threeLayer.setPosition è®¾ç½®å°çä½ç½®ï¼ç¶åæ·»å å° 3D åºæ¯
 *
 */

var ThreeLayer = /*#__PURE__*/function (_mapboxgl$Evented) {
  ThreeLayer_inherits(ThreeLayer, _mapboxgl$Evented);

  var _super = ThreeLayer_createSuper(ThreeLayer);

  //options.threeOptionsæ¯åå§åthreejs rendererçåæ°å¯¹è±¡
  function ThreeLayer(id, renderer, options) {
    var _this;

    ThreeLayer_classCallCheck(this, ThreeLayer);

    _this = _super.call(this);
    _this._layerId = id;
    _this.options = options;
    var threeOptions = options && options.threeOptions;
    _this.renderer = new ThreeLayerRenderer(ThreeLayer_assertThisInitialized(_this), renderer, threeOptions);
    return _this;
  }
  /**
   * @function mapboxgl.supermap.ThreeLayer.prototype.toThreeShape
   * @description  åå»º threejs shape å¯¹è±¡ã
   * @param {Array} coordinates - åæ ç¹æ°ç»ã
   * @returns THREE.Shape{@link https://threejs.org/docs/index.html#api/extras/core/Shape} threejs shape å¯¹è±¡ã
   */


  ThreeLayer_createClass(ThreeLayer, [{
    key: "toThreeShape",
    value: function toThreeShape(coordinates) {
      var _this2 = this;

      if (!coordinates) {
        return null;
      }

      var center = this.getCoordinatesCenter(coordinates);
      var centerPoint = this.lngLatToPosition(center);
      var outer = coordinates.map(function (coords) {
        return _this2.lngLatToPosition({
          lng: coords[0],
          lat: coords[1]
        }).sub(centerPoint);
      });
      return new ThreeLayer_Shape(outer);
    }
    /**
     * @function mapboxgl.supermap.ThreeLayer.prototype.toThreeMesh
     * @description åå»º threejs Mesh å¯¹è±¡ãå°å°çåæ è½¬æ¢æ threejs 3D æ¨¡åï¼éç¨äºæ¤åæ¨¡åï¼å¦åå¸å»ºç­ï¼ã
     * @param {Array.<Object>} coordinates - åæ ç¹æ°ç»ã
     * @param {number} amount - é«åº¦ã
     * @param {THREE.Material} material - Threejs æè´¨å¯¹è±¡ãåèï¼[THREE.Material]{@link https://threejs.org/docs/index.html#api/extras/core/Material}
     * @param {boolean} [removeDuplicated] - æ¯å¦ç§»é¤éå¤çåæ ç¹ã
     * @returns {THREE.Mesh} threejs Mesh å¯¹è±¡ãåèï¼[THREE.Mesh]{@link https://threejs.org/docs/index.html#api/objects/Mesh}
     */

  }, {
    key: "toThreeMesh",
    value: function toThreeMesh(coordinates, amount, material, removeDuplicated) {
      if (!coordinates) {
        return null;
      }

      var coords = coordinates;

      if (removeDuplicated) {
        coords = this.removeDuplicatedCoordinates(coordinates);
      }

      var targetAmount = this.distanceToThreeVector3(amount, amount).x;
      var shape = this.toThreeShape(coords);
      var geometry = new ExtrudeGeometry(shape, {
        'amount': targetAmount,
        'bevelEnabled': true
      });
      var bufferGeometry = new BufferGeometry().fromGeometry(geometry);
      var mesh = new Mesh(bufferGeometry, material);
      var center = this.lngLatToPosition(this.getCoordinatesCenter(coords));
      mesh.position.set(center.x, center.y, -targetAmount);
      return mesh;
    }
    /**
     * @function mapboxgl.supermap.ThreeLayer.prototype.addObject
     * @description è®¾ç½®threejs 3D å¯¹è±¡çåæ ï¼ç»çº¬åº¦ï¼ã
     * @param {THREE.Object3D} object3D - threejs 3D å¯¹è±¡ãåèï¼[THREE.Object3D]{@link https://threejs.org/docs/index.html#api/core/Object3D}åå­ç±»å¯¹è±¡ã
     * @param {(Array.<number>|Object)} coordinate - æ·»å ç three å¯¹è±¡åæ ï¼ç»çº¬åº¦ï¼ã
     * @returns {this} this
     */

  }, {
    key: "addObject",
    value: function addObject(object3D, coordinate) {
      if (coordinate && object3D) {
        this.setPosition(object3D, coordinate);
      }

      this.renderer && this.renderer.scene.add(object3D);
    }
    /**
     * @function mapboxgl.supermap.ThreeLayer.prototype.getScene
     * @description è·åthreejs åºæ¯å¯¹è±¡
     * @returns {THREE.Scene} threejs åºæ¯å¯¹è±¡,åèï¼[THREE.Scene]{@link https://threejs.org/docs/index.html#api/scenes/Scene}
     */

  }, {
    key: "getScene",
    value: function getScene() {
      return this.renderer.scene;
    }
    /**
     * @function mapboxgl.supermap.ThreeLayer.prototype.getCamera
     * @description è·åthreejs ç¸æºã
     * @returns {THREE.Camera} threejs ç¸æºãåèï¼[THREE.Camera]{@link https://threejs.org/docs/index.html#api/cameras/Camera}
     */

  }, {
    key: "getCamera",
    value: function getCamera() {
      return this.renderer.camera;
    }
    /**
     * @function mapboxgl.supermap.ThreeLayer.prototype.getThreeRenderer
     * @description è·å threejs rendererã
     * @returns {THREE.WebGLRenderer|THREE.CanvasRenderer} threejs rendererãåèï¼
     *                      [THREE.WebGLRenderer]{@link https://threejs.org/docs/index.html#api/renderers/WebGLRenderer}/
     *                      [THREE.CanvasRenderer]{@link https://threejs.org/docs/index.html#examples/renderers/CanvasRenderer}
     */

  }, {
    key: "getThreeRenderer",
    value: function getThreeRenderer() {
      return this.renderer.context;
    } // /**
    //  * @function mapboxgl.supermap.ThreeLayer.prototype.getObject
    //  * @description æ ¹æ®æ¡ä»¶è·åæ·»å å°åºæ¯ä¸­çå¯¹è±¡
    //  * @return {THREE.Object3D} threejs 3Då¯¹è±¡ãåèï¼[THREE.Object3D]{@link https://threejs.org/docs/index.html#api/core/Object3D}åå­ç±»å¯¹è±¡
    //  */
    // getObject(conditions) {
    //     if(!conditions){
    //         return;
    //     }
    //     var scene = this.getScene();
    //     var objects = scene.children;
    //     for(let obj of objects ){
    //         for(let condition of conditions ){
    //                 obj[condition]
    //         }
    //     }
    // }

    /**
     * @function mapboxgl.supermap.ThreeLayer.prototype.clearMesh
     * @description æ¸é¤ææ threejs mesh å¯¹è±¡ã
     * @returns {this} this å¯¹è±¡ã
     */

  }, {
    key: "clearMesh",
    value: function clearMesh() {
      var scene = this.renderer.scene;

      if (!scene) {
        return this;
      }

      for (var i = scene.children.length - 1; i >= 0; i--) {
        if (scene.children[i] instanceof external_function_try_return_THREE_catch_e_return_namespaceObject.Mesh) {
          scene.remove(scene.children[i]);
        }
      }

      return this;
    }
    /**
     * @function mapboxgl.supermap.ThreeLayer.prototype.clearAll
     * @description æ¸é¤ææ threejs å¯¹è±¡ã
     * @param {boolean} clearCamera - æ¯å¦åæ¶æ¸é¤ç¸æºã
     * @returns {this} this å¯¹è±¡ã
     */

  }, {
    key: "clearAll",
    value: function clearAll(clearCamera) {
      var scene = this.renderer.scene;

      if (!scene) {
        return this;
      }

      for (var i = scene.children.length - 1; i >= 0; i--) {
        if (!clearCamera && scene.children[i] instanceof external_function_try_return_THREE_catch_e_return_namespaceObject.Camera) {
          continue;
        }

        scene.remove(scene.children[i]);
      }

      return this;
    }
    /**
     * @function mapboxgl.supermap.ThreeLayer.prototype.setPosition
     * @description è®¾ç½® threejs 3D å¯¹è±¡çåæ ï¼ç»çº¬åº¦ï¼ã
     * @param {THREE.Object3D} object3D - threejs 3D å¯¹è±¡ï¼åèï¼[THREE.Object3D]{@link https://threejs.org/docs/index.html#api/core/Object3D}åå­ç±»å¯¹è±¡ã
     * @param {(Array.<number>|Object)} coordinate - æ·»å ç three å¯¹è±¡åæ ï¼ç»çº¬åº¦ï¼ã
     * @returns {this} this å¯¹è±¡ã
     */

  }, {
    key: "setPosition",
    value: function setPosition(object3D, coordinate) {
      if (!object3D || !coordinate) {
        return this;
      }

      var pos = this.lngLatToPosition(coordinate);
      object3D.position.set(pos.x, pos.y, pos.z);
      return this;
    }
    /**
     * @function mapboxgl.supermap.ThreeLayer.prototype.lngLatToPosition
     * @description ç»çº¬åº¦è½¬threejs 3D å¤±éå¯¹è±¡ã
     * @param {(Array.<number>|Object)} lngLat - ç»çº¬åº¦åæ ã
     * @returns {THREE.Vector3} threejs 3D å¤±éå¯¹è±¡ãåèï¼[THREE.Vector3]{@link https://threejs.org/docs/index.html#api/math/Vector3}
     */

  }, {
    key: "lngLatToPosition",
    value: function lngLatToPosition(lngLat) {
      var zoom = Transform.projection.nativeMaxZoom;
      var point = Transform.lngLatToPoint(lngLat, zoom);
      return new Vector3(point.x, point.y, -0);
    }
    /**
     * @function mapboxgl.supermap.ThreeLayer.prototype.distanceToThreeVector3
     * @description è®¡ç®è·ç¦»æå®åæ ç»å®è·ç¦»çæ°åæ ç threejs 3D å¤±éå¯¹è±¡ã
     * @param {number} x - x è½´è·ç¦»,åä½ç±³ã
     * @param {number} y - y è½´è·ç¦»,åä½ç±³ã
     * @param {(Array.<number>|Object)} lngLat - æºåæ ã
     * @returns {THREE.Vector3} ç®æ ç¹ç threejs 3D å¤±éå¯¹è±¡ãåèï¼[THREE.Vector3]{@link https://threejs.org/docs/index.html#api/math/Vector3}
     */

  }, {
    key: "distanceToThreeVector3",
    value: function distanceToThreeVector3(x, y, lngLat) {
      var map = this._map;
      var center = lngLat || map.getCenter(),
          maxZoom = Transform.projection.nativeMaxZoom,
          targetLngLat = Transform.locate(center, x, y);
      var point1 = Transform.lngLatToPoint(center, maxZoom),
          point2 = Transform.lngLatToPoint(targetLngLat, maxZoom);
      var targetX = Math.abs(point2.x - point1.x) * Math.sign(x);
      var targetY = Math.abs(point2.y - point1.y) * Math.sign(y);
      return new Vector3(targetX, targetY, 0);
    }
    /**
     * @function mapboxgl.supermap.ThreeLayer.prototype.removeDuplicatedCoordinates
     * @description ç§»é¤æ°ç»ä¸­çéå¤åæ ã
     * @param {(Array.<Array.<number>>)} coordinates - åæ æ°ç»ã
     * @returns {(Array.<Array.<number>>)} æ°çåæ æ°ç»ã
     */

  }, {
    key: "removeDuplicatedCoordinates",
    value: function removeDuplicatedCoordinates(coordinates) {
      function equals(point1, point2) {
        return point1[0] === point2[0] && point1[1] === point2[1];
      }

      var coords = [].concat(coordinates);
      var length = coords.length;

      for (var i = length - 1; i >= 1; i--) {
        if (equals(coords[i], coords[i - 1])) {
          coords.splice(i, 1);
        }
      }

      var isClose = equals(coords[0], coords[coords.length - 1]);
      isClose && coords.splice(coords.length - 1, 1);
      return coords;
    }
    /**
     * @function mapboxgl.supermap.ThreeLayer.prototype.getCoordinatesCenter
     * @description è·åç»å®åæ æ°ç»çä¸­å¿åæ ã
     * @param {(Array.<Array.<number>>)} coordinates - åæ æ°ç»ã
     * @returns {Object} åå«ç»çº¬åº¦çåæ å¯¹è±¡ã
     */

  }, {
    key: "getCoordinatesCenter",
    value: function getCoordinatesCenter(coordinates) {
      var sumX = 0,
          sumY = 0,
          count = 0;
      var i = 0,
          len = coordinates.length;

      for (; i < len; i++) {
        if (coordinates[i]) {
          sumX += coordinates[i][0];
          sumY += coordinates[i][1];
          count++;
        }
      }

      return {
        lng: sumX / count,
        lat: sumY / count
      };
    }
    /**
     * @function mapboxgl.supermap.ThreeLayer.prototype.addTo
     * @description æ·»å å¾å±å°å°å¾ã
     * @param {Object} map - å°å¾å¯¹è±¡ã
     * @returns {this} this å¯¹è±¡ã
     */

  }, {
    key: "addTo",
    value: function addTo(map) {
      var me = this;
      me._map = map;
      me.renderer.setMap(map);
      me.renderer.render(); //three mbgl èå¨(ä»èå¨ç¸æº,ä¸æ§è¡éç»æä½)

      me._map.on('render', this._update.bind(me));

      me._map.on('resize', this._resize.bind(me));

      me.on('render', function () {
        this.context && this.context.render(this.scene, this.camera);
      }.bind(me.renderer));
      return this;
    }
    /**
     * @function mapboxgl.supermap.ThreeLayer.prototype.getCanvasContainer
     * @description è·å three å¾å±å®¹å¨ã
     * @returns {HTMLElement} three å¾å±çå®¹å¨ã
     */

  }, {
    key: "getCanvasContainer",
    value: function getCanvasContainer() {
      return this.renderer.getCanvasContainer();
    }
    /**
     * @function mapboxgl.supermap.ThreeLayer.prototype.getCanvas
     * @description è·å three å¾å±ç»å¸ã
     * @returns {HTMLCanvasElement} three å¾å±ç»å¸ã
     */

  }, {
    key: "getCanvas",
    value: function getCanvas() {
      return this.renderer.getCanvas();
    }
    /**
     * @function mapboxgl.supermap.ThreeLayer.prototype.remove
     * @description ç§»é¤å¾å±ã
     */

  }, {
    key: "remove",
    value: function remove() {
      var map = this._map,
          me = this;
      map.off('render', me._update.bind(me));
      map.off('resize', me._resize.bind(me));
      me.renderer.remove();
      me._map = null;
    }
    /**
     * @function mapboxgl.supermap.ThreeLayer.prototype.draw
     * @description æä¾ç»å¤é¨ç threejs æ¨¡åç»å¶æ¥å£ã
     * @param {THREE.WebGLRenderer|THREE.CanvasRenderer} gl - threejs æ¸²æå¨ä¸ä¸æ ãè¯¦æè¯·åèï¼</br>
     *          [WebGLRenderer]{@link https://threejs.org/docs/index.html#api/renderers/WebGLRenderer}/
     *          [CanvasRenderer]{@link https://threejs.org/docs/index.html#examples/renderers/CanvasRenderer}
     * @param {THREE.Scene} scene - threejs åºæ¯å¯¹è±¡ãè¯¦æè¯·åèï¼[THREE.Scene]{@link https://threejs.org/docs/index.html#api/scenes/Scene}
     * @param {THREE.Camera} camera - threejs ç¸æºå¯¹è±¡ãè¯¦æè¯·åèï¼[THREE.Camera]{@link https://threejs.org/docs/index.html#api/cameras/Camera}
     * @returns {this} thiså¯¹è±¡ã
     * @example
     * var threeLayer = new mapboxgl.supermap.ThreeLayer('three');
     * //å¯ä»¥éè¿éå draw å®ç°æ¨¡åç»å¶
     * threeLayer.draw = function (gl, scene, camera) {
     *     //TODO ç»å¶æä½
     * }
     * threeLayer.addTo(map);
     */

  }, {
    key: "draw",
    value: function draw(gl, scene, camera) {
      // eslint-disable-line no-unused-vars
      return this;
    }
    /**
     * @function mapboxgl.supermap.ThreeLayer.prototype.renderScene
     * @description æ¸²æåºæ¯ã
     * @returns {this} this
     */

  }, {
    key: "renderScene",
    value: function renderScene() {
      this.renderer.renderScene();
      /**
       * @event mapboxgl.supermap.ThreeLayer#renderscene
       * @description renderScene äºä»¶ï¼åºæ¯æ¸²æåè§¦åã
       */

      this.fire("renderscene");
      return this;
    }
  }, {
    key: "_resize",
    value: function _resize() {
      this.renderer.resize();
    }
  }, {
    key: "_update",
    value: function _update() {
      /**
       * @event mapboxgl.supermap.ThreeLayer#render
       * @description render äºä»¶ï¼å°å¾æ¸²ææ¶(å°å¾ç¶ææ¹åæ¶)è§¦åã
       */
      this.renderScene();
      this.fire('render');
      return this;
    }
  }]);

  return ThreeLayer;
}((external_mapboxgl_default()).Evented);
(external_mapboxgl_default()).supermap.ThreeLayer = ThreeLayer;
// CONCATENATED MODULE: ./src/mapboxgl/overlay/HeatMapLayer.js
function HeatMapLayer_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { HeatMapLayer_typeof = function _typeof(obj) { return typeof obj; }; } else { HeatMapLayer_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return HeatMapLayer_typeof(obj); }

function HeatMapLayer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function HeatMapLayer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function HeatMapLayer_createClass(Constructor, protoProps, staticProps) { if (protoProps) HeatMapLayer_defineProperties(Constructor.prototype, protoProps); if (staticProps) HeatMapLayer_defineProperties(Constructor, staticProps); return Constructor; }

function HeatMapLayer_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) HeatMapLayer_setPrototypeOf(subClass, superClass); }

function HeatMapLayer_setPrototypeOf(o, p) { HeatMapLayer_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return HeatMapLayer_setPrototypeOf(o, p); }

function HeatMapLayer_createSuper(Derived) { var hasNativeReflectConstruct = HeatMapLayer_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = HeatMapLayer_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = HeatMapLayer_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return HeatMapLayer_possibleConstructorReturn(this, result); }; }

function HeatMapLayer_possibleConstructorReturn(self, call) { if (call && (HeatMapLayer_typeof(call) === "object" || typeof call === "function")) { return call; } return HeatMapLayer_assertThisInitialized(self); }

function HeatMapLayer_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function HeatMapLayer_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function HeatMapLayer_getPrototypeOf(o) { HeatMapLayer_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return HeatMapLayer_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



/**
 * @class mapboxgl.supermap.HeatMapLayer
 * @classdesc ç­åå¾å±ç±»ã
 * @category  Visualization HeatMap
 * @param {string} name - å¾å±åç§°ã
 * @param {Object} options - æé åæ°ã
 * @param {mapboxgl.Map} options.map - mapboxgl map å¯¹è±¡ã
 * @param {string} options.featureWeight - å¯¹åº feature å±æ§ä¸­çç­ç¹æéå­æ®µåç§°ï¼æéå¼ç±»åä¸º floatã
 * @param {string} [options.id] - ä¸é¢å¾å±IDãé»è®¤ä½¿ç¨ CommonUtil.createUniqueID("HeatMapLayer_") åå»ºä¸é¢å¾å± IDã
 * @param {number} [options.radius=50] - ç­ç¹æ¸²æçæå¤§åå¾ï¼ç­ç¹åç´ åå¾ï¼ï¼åä½ä¸º px,å½ useGeoUnitåæ° ä¸º true æ¶ï¼åä½ä½¿ç¨å½åå¾å±å°çåæ åä½ãç­ç¹æ¾ç¤ºçæ¶åä»¥ç²¾ç¡®ç¹ä¸ºä¸­å¿ç¹å¼å§å¾åå¨è¾å°è¡°åï¼å¶è¡°ååå¾åæéå¼ææ¯åã
 * @param {boolean} [options.loadWhileAnimating=true] - æ¯å¦å®æ¶éç»ã(å½ç»å¶å¤§æ°æ®éè¦ç´ çæåµä¸ä¼åºç°å¡é¡¿ï¼å»ºè®®æè¯¥åæ°è®¾ä¸ºfalse)ã
 * @param {number} [options.opacity=1] - å¾å±éæåº¦ã
 * @param {Array.<string>} [options.colors=['blue','cyan','lime','yellow','red']] - é¢è²çº¿æ§æ¸åæ°ç»,é¢è²å¼å¿é¡»ä¸ºcanvasææ¯ã
 * @param {boolean} [options.useGeoUnit=false] - ä½¿ç¨å°çåä½ï¼å³é»è®¤ç­ç¹åå¾é»è®¤ä½¿ç¨åç´ åä½ã å½è®¾ç½®ä¸º true æ¶ï¼ç­ç¹åå¾åå¾å±å°çåæ ä¿æä¸è´ã
 * @extends {mapboxgl.Evented}
 * @fires mapboxgl.supermap.HeatMapLayer#featuresadded
 * @fires mapboxgl.supermap.HeatMapLayer#changelayer
 * @fires mapboxgl.supermap.HeatMapLayer#featuresremoved
 *
 */

var HeatMapLayer = /*#__PURE__*/function (_mapboxgl$Evented) {
  HeatMapLayer_inherits(HeatMapLayer, _mapboxgl$Evented);

  var _super = HeatMapLayer_createSuper(HeatMapLayer);

  function HeatMapLayer(name, options) {
    var _this;

    HeatMapLayer_classCallCheck(this, HeatMapLayer);

    _this = _super.call(this);

    var _options = options ? options : {};
    /**
     * @member {string} mapboxgl.supermap.HeatMapLayer.prototype.name
     * @description å¾å±åå­ã
     */


    _this.name = name;
    /**
     * @member {string} mapboxgl.supermap.HeatMapLayer.prototype.id
     * @description ç­åå¾å¾å± idã
     */

    _this.id = _options.id ? _options.id : Util.createUniqueID("HeatMapLayer_");
    /**
     * @member {mapboxgl.Map} mapboxgl.supermap.HeatMapLayer.prototype.map
     * @description ç­åå¾å¾å± mapã
     */

    _this.map = _options.map ? _options.map : null;
    /**
     * @member {boolean} [mapboxgl.supermap.HeatMapLayer.prototype.loadWhileAnimating=true]
     * @description æ¯å¦å®æ¶éç»ã(å½ç»å¶å¤§æ°æ®éè¦ç´ çæåµä¸ä¼åºç°å¡é¡¿ï¼å»ºè®®æè¯¥åæ°è®¾ä¸ºfalse)ã
     */

    _this.loadWhileAnimating = _options.loadWhileAnimating === undefined ? true : _options.loadWhileAnimating;
    /**
     * @member {boolean} [mapboxgl.supermap.HeatMapLayer.prototype.visibility=true]
     * @description å¾å±æ¾ç¤ºç¶æå±æ§ã
     */

    _this.visibility = true;
    /**
     * @member {number} [mapboxgl.supermap.HeatMapLayer.prototype.opacity=1]
     * @description å¾å±éæåº¦ï¼åå¼èå´[0,1]ã
     */

    _this.opacity = _options.opacity ? _options.opacity : 1;
    /**
     * @member {Array.<string>} [mapboxgl.supermap.HeatMapLayer.prototype.colors=['blue','cyan','lime','yellow','red']]
     * @description é¢è²çº¿æ§æ¸åæ°ç»,é¢è²å¼å¿é¡»ä¸º canvas ææ¯ã
     */

    _this.colors = _options.colors ? _options.colors : ['blue', 'cyan', 'lime', 'yellow', 'red'];
    /**
     * @member {boolean} [mapboxgl.supermap.HeatMapLayer.prototype.useGeoUnit=false]
     * @description ä½¿ç¨å°çåä½ï¼å³é»è®¤ç­ç¹åå¾é»è®¤ä½¿ç¨åç´ åä½ã å½è®¾ç½®ä¸º true æ¶ï¼ç­ç¹åå¾åå¾å±å°çåæ ä¿æä¸è´ã
     */

    _this.useGeoUnit = _options.useGeoUnit ? _options.useGeoUnit : false;
    /**
     * @member {number} [mapboxgl.supermap.HeatMapLayer.prototype.radius=50]
     * @description ç­ç¹æ¸²æçæå¤§åå¾ï¼ç­ç¹åç´ åå¾ï¼,
     *              ç­ç¹æ¾ç¤ºçæ¶åä»¥ç²¾ç¡®ç¹ä¸ºä¸­å¿ç¹å¼å§å¾åå¨è¾å°è¡°åï¼
     *              å¶è¡°ååå¾åæéå¼ææ¯åã
     */

    _this.radius = _options.radius ? _options.radius : 50;
    /**
     * @member {string} mapboxgl.supermap.HeatMapLayer.prototype.featureWeight
     * @description å¯¹åº feature å±æ§ä¸­çç­ç¹æéå­æ®µåç§°ï¼æéå¼ç±»åä¸º floatã
     * @example
     * //feature.attributesä¸­è¡¨ç¤ºæéçå­æ®µä¸º height,åå¨ HeatMapLayer ç featureWeight åæ°èµå¼ä¸º "height"ã
     * feature1.attributes.height = 7.0;
     * feature2.attributes.height = 6.0;
     * var heatMapLayer = new mapboxgl.supermap.HeatMapLayer("heatmaplayer",{"featureWeight":"height"});
     * heatMapLayer.addFeatures([feature1,feature2]);
     */

    _this.featureWeight = _options.featureWeight ? _options.featureWeight : null;
    /**
     * @member {Array.<SuperMap.Feature.Vector>} mapboxgl.supermap.HeatMapLayer.prototype.features
     * @description ç­ç¹ä¿¡æ¯æ°ç»ï¼è®°å½å­å¨å¾å±ä¸æ·»å çææç­ç¹ä¿¡æ¯ã
     */

    _this.features = [];
    /**
     * @member {number} mapboxgl.supermap.HeatMapLayer.prototype.maxWeight
     * @description è®¾ç½®æéæå¤§å¼ãå¦æä¸è®¾ç½®æ­¤å±æ§ï¼å°æç§å½åå±å¹èå´åç­ç¹ææ¥æçæéæå¤§å¼ç»å¶ç­ç¹å¾ã
     */

    _this.maxWeight = null;
    /**
     * @member {number} mapboxgl.supermap.HeatMapLayer.prototype.minWeight
     * @description è®¾ç½®æéæå°å¼ãå¦æä¸è®¾ç½®æ­¤å±æ§ï¼å°æç§å½åå±å¹èå´åç­ç¹ææ¥æçæéæå°å¼ç»å¶ç­ç¹å¾ã
     */

    _this.minWeight = null;
    /**
     * @member mapboxgl.supermap.HeatMapLayer.prototype.EVENT_TYPES
     * @description çå¬ä¸ä¸ªèªå®ä¹äºä»¶å¯ç¨å¦ä¸æ¹å¼:
     *              ç­ç¹å¾èªå®ä¹äºä»¶ä¿¡æ¯ï¼äºä»¶è°ç¨æ¶çå±æ§ä¸å·ä½äºä»¶ç±»åç¸å¯¹åºã
     *
     * All event objects have at least the following properties:
     * {Object} object - A reference to layer.events.object.
     * {DOMElement} element - A reference to layer.events.element.
     *
     * æ¯æçäºä»¶å¦ä¸ (å¦å¤åå« <SuperMap.Layer ä¸­å®ä¹çå¶ä»äºä»¶>):
     * featuresadded - ç­ç¹æ·»å å®ææ¶è§¦åãä¼ éåæ°ä¸ºæ·»å çç­ç¹ä¿¡æ¯æ°ç»åæä½æåä¸å¦ä¿¡æ¯ã
     * åæ°ç±»åï¼{features: features, succeed: succeed}
     * featuresremoved - ç­ç¹è¢«å é¤æ¶è§¦åãä¼ éåæ°ä¸ºå é¤çç­ç¹ä¿¡æ¯æ°ç»åæä½æåä¸å¦ä¿¡æ¯ã
     * åæ°ç±»åï¼{features: features, succeed: succeed}
     * featuresdrawcompleted - ç­ç¹å¾æ¸²æå®ææ¶è§¦åï¼æ²¡æé¢å¤å±æ§ã
     */

    _this.EVENT_TYPES = ["featuresadded", "featuresremoved", "featuresdrawcompleted"];
    /**
     * @member {boolean} [mapboxgl.supermap.HeatMapLayer.prototype.supported=false]
     * @description å½åæµè§å¨æ¯å¦æ¯æ canvas ç»å¶ï¼
     *              å³å®äºç­ç¹å¾æ¯å¦å¯ç¨ï¼åé¨å¤æ­ä½¿ç¨ã
     */

    _this.supported = false;
    /**
     * @member {Object} mapboxgl.supermap.HeatMapLayer.prototype.rootCanvas
     * @description ç­ç¹å¾ä¸»ç»å¶é¢æ¿ã
     */

    _this.rootCanvas = null;
    /**
     * @member {Object} mapboxgl.supermap.HeatMapLayer.prototype.canvasContext
     * @description ç­ç¹å¾ä¸»ç»å¶å¯¹è±¡ã
     */

    _this.canvasContext = null;
    /**
     * @member {number} mapboxgl.supermap.HeatMapLayer.prototype.maxWidth
     * @description å½åç»å¶é¢æ¿å®½åº¦ãåå½å map çªå£å®½åº¦ä¸è´ã
     */

    _this.maxWidth = null;
    /**
     * @member {number} mapboxgl.supermap.HeatMapLayer.prototype.maxHeight
     * @description å½åç»å¶é¢æ¿å®½åº¦ãåå½å map çªå£é«åº¦ä¸è´ã
     */

    _this.maxHeight = null;
    return _this;
  }
  /**
   * @function mapboxgl.supermap.HeatMapLayer.prototype.onAdd
   * @description ååºå¾æ·»å è¯¥å¾å±
   */


  HeatMapLayer_createClass(HeatMapLayer, [{
    key: "onAdd",
    value: function onAdd(map) {
      this.map = map;

      if (this.features.length === 0) {
        return;
      } //åå»ºç­åå¾ç»å¶å®¹å¨


      this._createCanvasContainer(); //ç»å®å¾å±äºä»¶ä¸Mapåæ­¥


      this.map.on('resize', this._resizeEvent.bind(this));
      this.map.on('zoomstart', this._zoomStartEvent.bind(this));
      this.map.on('zoomend', this._zoomEndEvent.bind(this));
      this.map.on('rotatestart', this._rotateStartEvent.bind(this));
      this.map.on('rotate', this._rotateEvent.bind(this));
      this.map.on('rotateend', this._rotateEndEvent.bind(this));
      this.map.on('dragend', this._dragEndEvent.bind(this));
      this.map.on('movestart', this._moveStartEvent.bind(this));
      this.map.on('move', this._moveEvent.bind(this));
      this.map.on('moveend', this._moveEndEvent.bind(this));
      this.map.on('remove', this.removeFromMap.bind(this));
      this.refresh();
    }
    /**
     * @function mapboxgl.supermap.HeatMapLayer.prototype.removeFromMap
     * @description ä»åºå¾å é¤è¯¥å¾å±ã
     */

  }, {
    key: "removeFromMap",
    value: function removeFromMap() {
      this.removeAllFeatures();
      this.map.getCanvasContainer().removeChild(this.rootCanvas);
    }
    /**
     * @function mapboxgl.supermap.HeatMapLayer.prototype._createCanvasContainer
     * @description åå»ºç­åå¾ç»å¶å®¹å¨ã
     * @private
     */

  }, {
    key: "_createCanvasContainer",
    value: function _createCanvasContainer() {
      this.supported = true; //æå»ºç»å¾é¢æ¿

      this.mapContainer = this.map.getCanvasContainer(); //ç­ç¹å¾è¦æ±ä½¿ç¨canvasç»å¶ï¼å¤æ­æ¯å¦æ¯æ

      this.rootCanvas = document.createElement("canvas");
      this.rootCanvas.id = this.id;
      var mapCanvas = this.map.getCanvas();
      this.rootCanvas.width = this.maxWidth = parseInt(mapCanvas.width);
      this.rootCanvas.height = this.maxHeight = parseInt(mapCanvas.height);
      Util.modifyDOMElement(this.rootCanvas, null, null, null, "absolute", null, null, this.opacity);
      this.canvasContext = this.rootCanvas.getContext('2d');
      this.mapContainer.appendChild(this.rootCanvas);
    }
    /**
     * @function mapboxgl.supermap.HeatMapLayer.prototype.addFeatures
     * @description æ·»å ç­ç¹ä¿¡æ¯ã
     * @param {GeoJSONObject} features - å¾æ·»å çè¦ç´ æ°ç»ã
     *
     * @example
     * var geojson = {
     *      "type": "FeatureCollection",
     *      "features": [
     *          {
     *              "type": "feature",
     *              "geometry": {
     *                  "type": "Point",  //åªæ¯æpointç±»å
     *                  "coordinates": [0, 0]
     *              },
     *              "properties": {
     *                  "height": Math.random()*9,
     *                  "geoRadius": useGeoRadius?radius:null
     *              }
     *          }
     *      ]
     *   };
     * var heatMapLayer = new mapboxgl.supermap.HeatMapLayer("heatmaplayer",{"featureWeight":"height"});                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   pLayer = new mapboxgl.supermap.HeatMapLayer("heatmaplayer",{"featureWeight":"height"});
     * heatMapLayer.addFeatures(geojson);
     * map.addLayer(heatMapLayer);
     */

  }, {
    key: "addFeatures",
    value: function addFeatures(features) {
      this.features = this.toiClientFeature(features);
      /**
       * @event mapboxgl.supermap.HeatMapLayer#featuresadded
       * @description è¦ç´ æ·»å å®æä¹åè§¦åã
       * @property {GeoJSONObject} features - è¢«æ·»å çè¦ç´ ã
       * @property {boolean} succeed - è¦ç´ æ¯å¦æåæ·»å ã
       */

      this.fire(this.EVENT_TYPES[0], {
        features: features,
        succeed: true
      }); //æ¯ææ´æ°featuresï¼å·æ°åºå¾

      this.refresh();
    }
    /**
     * @function mapboxgl.supermap.HeatMapLayer.prototype.refresh
     * @description å¼ºå¶å·æ°å½åç­ç¹æ¾ç¤ºï¼å¨å¾å±ç­ç¹æ°ç»åçåååè°ç¨ï¼æ´æ°æ¾ç¤ºã
     */

  }, {
    key: "refresh",
    value: function refresh() {
      if (this.features.length === 0) {
        return;
      }

      if (this.map) {
        var extent = this.map.getBounds();
        this.updateHeatPoints(extent);
      }
    }
    /**
     * @function mapboxgl.supermap.HeatMapLayer.prototype.setOpacity
     * @description è®¾ç½®å¾å±çä¸éæåº¦ï¼åå¼[0-1]ä¹é´ã
     * @param {number} [opacity] - éæåº¦ã
     */

  }, {
    key: "setOpacity",
    value: function setOpacity(opacity) {
      if (opacity !== this.opacity) {
        this.opacity = opacity;
        Util.modifyDOMElement(this.rootCanvas, null, null, null, null, null, null, opacity);

        if (this.map !== null) {
          /**
           * @event mapboxgl.supermap.HeatMapLayer#changelayer
           * @description å¾å±å±æ§æ¹åä¹åè§¦åã
           * @property {Object} layer - å¾å±ã
           * @property {string} property - è¢«æ¹åçå¾å±å±æ§ã
           */
          this.fire('changelayer', {
            layer: this,
            property: "opacity"
          });
        }
      }
    }
    /**
     * @function mapboxgl.supermap.HeatMapLayer.prototype.updateHeatPoints
     * @description å·æ°ç­ç¹å¾æ¾ç¤ºã
     * @param {mapboxgl.LngLatBounds} bounds - å½åæ¾ç¤ºèå´ã
     */

  }, {
    key: "updateHeatPoints",
    value: function updateHeatPoints(bounds) {
      if (this.features && this.features.length > 0) {
        this.convertFastToPixelPoints(bounds);
      } else {
        this.canvasContext.clearRect(0, 0, this.maxWidth, this.maxWidth);
      }
    }
    /**
     * @function mapboxgl.supermap.HeatMapLayer.prototype.convertFastToPixelPoints
     * @description è¿æ»¤ä½äºå½åæ¾ç¤ºèå´åçç­ç¹ï¼å¹¶è½¬æ¢å¶ä¸ºå½ååè¾¨çä¸çåç´ åæ ã
     * @param {mapboxgl.LngLatBounds} bounds - å½åæ¾ç¤ºèå´ã
     * @private
     */

  }, {
    key: "convertFastToPixelPoints",
    value: function convertFastToPixelPoints(bounds) {
      var data = [],
          x,
          y,
          k,
          resolution,
          maxTemp,
          minTemp,
          maxWeightTemp; //è·åå½ååç´ ä¸çå°çèå´

      var dw = bounds.getEast() - bounds.getWest();
      var dh = bounds.getNorth() - bounds.getSouth();
      var mapCanvas = this.map.getCanvas();

      if (dw / mapCanvas.width > dh / mapCanvas.height) {
        resolution = dw / mapCanvas.width;
      } else {
        resolution = dh / mapCanvas.height;
      } //ç­ç¹åå¾


      this.useRadius = this.useGeoUnit ? parseInt(this.radius / resolution) : this.radius;

      for (var i = 0; i < this.features.length; i++) {
        var feature = this.features[i];
        var point = feature.geometry; //å¯éè¿boundsè¿æ»¤éç»å¶çfeaturesä»¥ä¼åæ§è½ï¼ä½mapboxglæè½¬è·åå¾boundsä¸é

        var pixelPoint = this.getPixelXY(new LonLat(point.x, point.y));

        if (this.featureWeight) {
          pixelPoint.weight = feature.attributes[this.featureWeight]; //point.value;

          if (!this.maxWeight) {
            //æ¾åºæå¤§æå°æéå¼
            maxTemp = maxTemp ? maxTemp : pixelPoint.weight;
            minTemp = minTemp ? minTemp : pixelPoint.weight;
            maxTemp = Math.max(maxTemp, pixelPoint.weight);
            minTemp = Math.min(minTemp, pixelPoint.weight);
          }
        } else {
          pixelPoint.weight = 1;
        }

        x = Math.floor(pixelPoint.x);
        y = Math.floor(pixelPoint.y);
        k = pixelPoint.weight;
        data.push([x, y, k]);
      } //æ æå¤§æéè®¾ç½®


      if (!this.maxWeight) {
        if (maxTemp && minTemp) {
          maxWeightTemp = (maxTemp + minTemp) / 2;
        } else {
          maxWeightTemp = 1;
        }

        this.draw(data, maxWeightTemp);
      } else {
        this.draw(data, this.maxWeight);
      }
    }
    /**
     * @function mapboxgl.supermap.HeatMapLayer.prototype.draw
     * @description ç»å¶ç­ç¹å¾ã
     * @param {Array} data - convertToPixelPointsæ¹æ³è®¡ç®åºçç¹ã
     * @private
     */

  }, {
    key: "draw",
    value: function draw(data, maxWeight) {
      if (this.maxHeight > 0 && this.maxWidth > 0) {
        //æ¸ç©º
        var ctx = this.canvasContext;
        this.canvasContext.clearRect(0, 0, this.maxWidth, this.maxHeight);
        this.drawCircle(this.useRadius);
        this.createGradient();

        for (var i = 0; i < data.length; i++) {
          var p = data[i];
          this.canvasContext.globalAlpha = Math.max(p[2] / maxWeight, 0.05);
          this.canvasContext.drawImage(this.circle, p[0] - this.useRadius, p[1] - this.useRadius);
        }

        var colored = ctx.getImageData(0, 0, this.maxWidth, this.maxHeight);
        this.colorize(colored.data, this.grad);
        ctx.putImageData(colored, 0, 0);
      } else {
        return false;
      }
    }
    /**
     * @function mapboxgl.supermap.HeatMapLayer.prototype.colorize
     * @description æ ¹æ®æ¸åè²éç½®ç­ç¹å¾rgbå¼ã
     * @param {Array} pixels - åç´  RGBA å¼ã
     * @param {Array} gradient - æ¸å canvas.getImageData.dataã
     * @private
     */

  }, {
    key: "colorize",
    value: function colorize(pixels, gradient) {
      for (var i = 0, j; i < pixels.length; i += 4) {
        j = pixels[i + 3] * 4;

        if (j) {
          pixels[i] = gradient[j];
          pixels[i + 1] = gradient[j + 1];
          pixels[i + 2] = gradient[j + 2];
        }
      }
    }
    /**
     * @function mapboxgl.supermap.HeatMapLayer.drawCircle
     * @description ç»å¶ç­ç¹åå¾åã
     * @param {number} r - ç­ç¹åå¾ã
     * @private
     */

  }, {
    key: "drawCircle",
    value: function drawCircle(r) {
      var blur = r / 2;
      var circle = this.circle = document.createElement('canvas'),
          ctx = circle.getContext("2d");
      circle.height = 2 * r;
      circle.width = 2 * r;
      ctx.shadowOffsetX = ctx.shadowOffsetY = 2 * r;
      ctx.shadowBlur = blur;
      ctx.shadowColor = "#000000";
      ctx.beginPath();
      ctx.arc(-r, -r, r / 2, 0, Math.PI * 2, true);
      ctx.closePath();
      ctx.fill();
    }
    /**
     * @function mapboxgl.supermap.HeatMapLayer.createGradient
     * @description æ ¹æ® this.colors è®¾ç½®æ¸åå¹¶ getImageDataã
     * @private
     */

  }, {
    key: "createGradient",
    value: function createGradient() {
      var colors = this.colors;
      var canvas = document.createElement('canvas'),
          ctx = canvas.getContext("2d"),
          gradient = ctx.createLinearGradient(0, 0, 0, 256);
      canvas.height = 256;
      canvas.width = 1;
      var index = 1;

      for (var i = 0, len = colors.length; i < len; i++) {
        gradient.addColorStop(index / len, colors[i]);
        index++;
      }

      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, 1, 256);
      this.grad = ctx.getImageData(0, 0, 1, 256).data;
    }
    /**
     * @function mapboxgl.supermap.HeatMapLayer.prototype.getPixelXY
     * @description è½¬æ¢å°çåæ ä¸ºç¸å¯¹äºå½åçªå£å·¦ä¸è§çåç´ åæ ã
     * @param {number} x - ç­ç¹çåç´  x åæ ã
     * @param {number} y - ç­ç¹çåç´  y åæ ã
     */

  }, {
    key: "getPixelXY",
    value: function getPixelXY(coordinate) {
      var pixelP,
          map = this.map;

      if (coordinate instanceof Point || coordinate instanceof GeoText) {
        var tempPoint = map.project(new (external_mapboxgl_default()).LngLat(coordinate.x, coordinate.y));
        pixelP = {
          x: parseInt(tempPoint.x),
          y: parseInt(tempPoint.y)
        };
      }

      if (coordinate instanceof LonLat) {
        var _tempPoint = map.project(new (external_mapboxgl_default()).LngLat(coordinate.lon, coordinate.lat));

        pixelP = {
          x: parseInt(_tempPoint.x),
          y: parseInt(_tempPoint.y)
        };
      }

      return pixelP;
    }
    /**
     * @function mapboxgl.supermap.HeatMapLayer.prototype.toiClientFeature
     * @description è½¬ä¸º iClient è¦ç´ ã
     * @param {GeoJSONObject} features - å¾æ·»å çè¦ç´ æ°ç»ã
     */

  }, {
    key: "toiClientFeature",
    value: function toiClientFeature(features) {
      if (!Util.isArray(features)) {
        features = [features];
      }

      var featuresTemp = [];

      for (var i = 0; i < features.length; i++) {
        if (features[i] instanceof Vector) {
          // è¥æ¯ GeometryVector ç´æ¥è¿å
          featuresTemp.push(features[i]);
        } else if (["FeatureCollection", "Feature", "Geometry"].indexOf(features[i].type) != -1) {
          //GeoJSON è§èæ°æ®ç±»å
          var format = new GeoJSON();
          featuresTemp = featuresTemp.concat(format.read(features[i]));
        } else if (features[i].geometry && features[i].geometry.parts) {
          //iServeræå¡å¨è¿åæ°æ®æ ¼å¼
          featuresTemp.push(ServerFeature.fromJson(features[i]).toFeature());
        } else {
          throw new Error("Features[".concat(i, "]'s type does not match, please check."));
        }
      }

      return featuresTemp;
    }
    /**
     * @function mapboxgl.supermap.HeatMapLayer.prototype.removeFeatures
     * @description ç§»é¤æå®çç­ç¹ä¿¡æ¯ã
     * @param {Array.<SuperMap.Feature.Vector>} features - ç­ç¹ä¿¡æ¯æ°ç»ã
     */

  }, {
    key: "removeFeatures",
    value: function removeFeatures(features) {
      if (!features || features.length === 0 || !this.features || this.features.length === 0) {
        return;
      }

      if (features === this.features) {
        return this.removeAllFeatures();
      }

      if (!Util.isArray(features)) {
        features = [features];
      }

      var heatPoint,
          index,
          heatPointsFailedRemoved = [];

      for (var i = 0, len = features.length; i < len; i++) {
        heatPoint = features[i];
        index = Util.indexOf(this.features, heatPoint); //æ¾ä¸å°è§ä¸ºå é¤å¤±è´¥

        if (index === -1) {
          heatPointsFailedRemoved.push(heatPoint);
          continue;
        } //å é¤ç­ç¹


        this.features.splice(index, 1);
      }

      var succeed = heatPointsFailedRemoved.length == 0 ? true : false; //æ´¾åå é¤featuresæåçäºä»¶

      /**
       * @event mapboxgl.supermap.HeatMapLayer#featuresremoved
       * @description è¦ç´ å é¤ä¹åè§¦åã
       * @property {Array.<SuperMap.Feature.Vector>} features - éè¦è¢«å é¤çè¦ç´ ã
       * @property {boolean} succeed - è¦ç´ å é¤æåä¸å¦ã
       */

      this.fire(this.EVENT_TYPES[1], {
        features: heatPointsFailedRemoved,
        succeed: succeed
      });
      this.refresh();
    }
    /**
     * @function mapboxgl.supermap.HeatMapLayer.prototype.removeAllFeatures
     * @description ç§»é¤å¨é¨çç­ç¹ä¿¡æ¯ã
     */

  }, {
    key: "removeAllFeatures",
    value: function removeAllFeatures() {
      this.features = [];
      this.refresh();
    }
    /**
     * @function mapboxgl.supermap.HeatMapLayer.prototype.moveTo
     * @description å°å¾å±ç§»å¨å°æä¸ªå¾å±ä¹åã
     * @param {string} layerID - å¾æå¥çå¾å±IDã
     * @param {boolean} [before=true] - æ¯å¦å°æ¬å¾å±æå¥å°å¾å± id ä¸º layerID çå¾å±ä¹å(å¦æä¸º false åå°æ¬å¾å±æå¥å°å¾å± id ä¸º layerID çå¾å±ä¹å)ã
     */

  }, {
    key: "moveTo",
    value: function moveTo(layerID, before) {
      var layer = document.getElementById(this.rootCanvas.id);
      before = before !== undefined ? before : true;

      if (before) {
        var beforeLayer = document.getElementById(layerID);

        if (layer && beforeLayer) {
          beforeLayer.parentNode.insertBefore(layer, beforeLayer);
        }

        return;
      }

      var nextLayer = document.getElementById(layerID);

      if (layer) {
        if (nextLayer.nextSibling) {
          nextLayer.parentNode.insertBefore(layer, nextLayer.nextSibling);
          return;
        }

        nextLayer.parentNode.appendChild(layer);
      }
    }
    /**
     * @function mapboxgl.supermap.HeatMapLayer.prototype.setVisibility
     * @description è®¾ç½®å¾å±å¯è§æ§ï¼è®¾ç½®å¾å±çéèï¼æ¾ç¤ºï¼éç»çç¸åºçå¯è§æ è®°ã
     * @param {boolean} [visibility] - æ¯å¦æ¾ç¤ºå¾å±ï¼å½åå°å¾çresolutionå¨æå¤§æå°resolutionä¹é´ï¼ã
     */

  }, {
    key: "setVisibility",
    value: function setVisibility(visibility) {
      if (this.rootCanvas && visibility !== this.visibility) {
        this.visibility = visibility;
        this.rootCanvas.style.display = visibility ? "block" : "none";
      }
    } //äºä»¶ç»å®

  }, {
    key: "_resizeEvent",
    value: function _resizeEvent() {
      this.mapContainer.style.perspective = this.map.transform.cameraToCenterDistance + 'px';
      var canvas = this.map.getCanvas();
      this.rootCanvas.style.width = canvas.style.width;
      this.rootCanvas.style.height = canvas.style.height;
      this.rootCanvas.width = this.maxWidth = parseInt(canvas.width);
      this.rootCanvas.height = this.maxHeight = parseInt(canvas.height);
      var devicePixelRatio = window.devicePixelRatio || 1;
      devicePixelRatio !== 1 && this.canvasContext && this.canvasContext.scale(devicePixelRatio, devicePixelRatio);
      this.refresh();
    }
  }, {
    key: "_zoomStartEvent",
    value: function _zoomStartEvent() {
      if (this.loadWhileAnimating || !this.visibility) {
        return;
      }

      this.zooming = true;

      this._hide();
    }
  }, {
    key: "_zoomEndEvent",
    value: function _zoomEndEvent() {
      if (this.loadWhileAnimating || !this.visibility) {
        return;
      }

      this.zooming = false;

      this._show();
    }
  }, {
    key: "_rotateStartEvent",
    value: function _rotateStartEvent() {
      if (this.loadWhileAnimating || !this.visibility) {
        return;
      }

      this.rotating = true;
    }
  }, {
    key: "_rotateEvent",
    value: function _rotateEvent() {
      if (this.loadWhileAnimating || !this.visibility) {
        return;
      }

      if (this.map.getPitch() !== 0) {
        this._hide();
      }

      this.mapContainer.style.perspective = this.map.transform.cameraToCenterDistance + 'px';
      var tPitch = this.map.getPitch() - this.startPitch;
      var tBearing = -this.map.getBearing() + this.startBearing;
      this.rootCanvas.style.transform = 'rotateX(' + tPitch + 'deg)' + ' rotateZ(' + tBearing + 'deg)';
    }
  }, {
    key: "_rotateEndEvent",
    value: function _rotateEndEvent() {
      if (this.loadWhileAnimating || !this.visibility) {
        return;
      }

      this.rotating = false;

      this._show();
    }
  }, {
    key: "_dragEndEvent",
    value: function _dragEndEvent() {
      if (this.loadWhileAnimating || !this.visibility) {
        return;
      }

      this._hide();
    }
  }, {
    key: "_moveEndEvent",
    value: function _moveEndEvent() {
      if (this.loadWhileAnimating || !this.visibility) {
        return;
      }

      this.rootCanvas.style.transform = '';
      this.refresh();

      this._show();
    }
  }, {
    key: "_moveStartEvent",
    value: function _moveStartEvent() {
      if (this.loadWhileAnimating || !this.visibility) {
        return;
      }

      this.startPitch = this.map.getPitch();
      this.startBearing = this.map.getBearing();
      var startMovePoint = this.map.project(new (external_mapboxgl_default()).LngLat(0, 0));
      this.startMoveX = startMovePoint.x;
      this.startMoveY = startMovePoint.y;
    }
  }, {
    key: "_moveEvent",
    value: function _moveEvent() {
      if (this.loadWhileAnimating || !this.visibility) {
        this.refresh();
        return;
      }

      if (this.rotating || this.zooming) {
        return;
      }

      if (this.map.getPitch() !== 0) {
        this._hide();
      }

      this.mapContainer.style.perspective = this.map.transform.cameraToCenterDistance + 'px';
      var tPitch = this.map.getPitch() - this.startPitch;
      var tBearing = -this.map.getBearing() + this.startBearing;
      var endMovePoint = this.map.project(new (external_mapboxgl_default()).LngLat(0, 0));
      var tMoveX = endMovePoint.x - this.startMoveX;
      var tMoveY = endMovePoint.y - this.startMoveY;
      this.rootCanvas.style.transform = 'rotateX(' + tPitch + 'deg)' + ' rotateZ(' + tBearing + 'deg)' + ' translate3d(' + tMoveX + 'px, ' + tMoveY + 'px, 0px)';
    }
  }, {
    key: "_hide",
    value: function _hide() {
      this.rootCanvas.style.display = 'none';
    }
  }, {
    key: "_show",
    value: function _show() {
      this.rootCanvas.style.display = 'block';
    }
  }]);

  return HeatMapLayer;
}((external_mapboxgl_default()).Evented);
(external_mapboxgl_default()).supermap.HeatMapLayer = HeatMapLayer;
// CONCATENATED MODULE: ./src/mapboxgl/overlay/DeckglLayer.js
function DeckglLayer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function DeckglLayer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function DeckglLayer_createClass(Constructor, protoProps, staticProps) { if (protoProps) DeckglLayer_defineProperties(Constructor.prototype, protoProps); if (staticProps) DeckglLayer_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class mapboxgl.supermap.DeckglLayer
 * @category  Visualization DeckGL
 * @classdesc Deckgl é«æçå¾å±ï¼è¯¥å¾å¾å±ä¸ºç»¼åå¾å±ï¼éè¿è¯¥å¾å±å¯åå»º é«æçç¹å¾å±ãè·¯å¾å¾å±ï¼çº¿å¾å±ï¼ãé«æçé¢å¾å±ãæ²çº¿å¾å±ã
 *            æ­£å­è¾¹å½¢å¾å±ï¼èå·¢å¾å±ï¼ãç½æ ¼å¾å±ï¼åªéç»å®ç¸ä¾éç½®ï¼å æ­¤ï¼å¨åå»ºå¾å±ä¹åï¼è¯·ä»ç»éè¯»åæ°éç½®ã
 * @param {string} layerTypeID - é«æçå¾å±ç±»å IDï¼åæ¬ "scatter-plot" é«æçç¹å¾å±ã"path-layer" è·¯å¾å¾å±ï¼çº¿å¾å±ï¼ã
 *                 "polygon-layer" é«æçé¢å¾å±ã "arc-layer" æ²çº¿å¾å±ã"hexagon-layer" æ­£å­è¾¹å½¢å¾å±ï¼èå·¢å¾å±ï¼ã"screen-grid-layer" ç½æ ¼å¾å±ã
 * @param {Object} options -  å¾å±éç½®é¡¹ï¼åæ¬ä»¥ä¸åæ°ï¼
 * @param {Array.<GeoJSONObject>} options.data - å¾å±æ°æ®,æ¯æ GeoJSON è§èæ°æ®ç±»åã
 * @param {Object} options.callback - deckgl å¾å±åè°å½æ°éç½®é¡¹ã
 * @param {Object} options.props - deckgl å¾å±éç½®é¡¹, å¨è¯¥åæ°ä¸éç½®å¾å±éç½®é¡¹ï¼
 * @param {boolean} options.props.coverage - "hexagon-layer" éç½®é¡¹ï¼å­è¾¹å½¢åå¾ä¹æ°ï¼ä»äº0 - 1ä¹é´ãå­è¾¹å½¢çæç»åå¾éè¿è¦çåå¾è®¡ç®ã æ³¨æï¼è¦çèå´ä¸ä¼å½±ååæ°çåéæ¹å¼ã åéæ¹å¼çåå¾ä»ç±åå¾å±æ§ç¡®å®ï¼
 * @param {boolean} options.props.hexagonAggregator  - "hexagon-layer" éç½®é¡¹ï¼* @param {boolean}
 * options.props.lightSettings - å¬å±éç½®é¡¹ï¼åç§ï¼åå«ä»¥ä¸å ä¸ªéç½®ï¼
 * @param {Array} options.props.lightSettings.lightsPosition - åç§éç½®é¡¹ï¼æå®ä¸º`[xï¼yï¼z]`çåå¨å¹³é¢éµåä¸­çä½ç½®`, å¨ä¸ä¸ªå¹³é¢éµåã é¿åº¦åºè¯¥æ¯ `3 x numberOfLights`ã
 * @param {Array} options.props.lightSettings.lightsStrength - åç§éç½®é¡¹ï¼å¹³é¢éµåä¸­æå®ä¸ºâ[xï¼y]`çç¯çå¼ºåº¦ã é¿åº¦åºè¯¥æ¯`2 x numberOfLights`ã
 * @param {number} [options.props.lightSettings.numberOfLights=1]  - åç§éç½®é¡¹ï¼åç§å¼,æå¤§å¼ä¸º `5`ã
 * @param {number} [options.props.lightSettings.coordinateSystem=COORDINATE_SYSTEM.LNGLAT]  - åç§éç½®é¡¹ï¼æå®ç¯ä½ç½®çåæ ç³»ã
 * @param {number} [options.props.lightSettings.coordinateOrigin=[0, 0, 0]] - åç§éç½®é¡¹ï¼æå®ç¯ä½ç½®çåæ åç¹ã
 * @param {number} [options.props.lightSettings.modelMatrix] - åç§éç½®é¡¹ï¼åä½ç½®çåæ¢ç©éµã
 * @param {number} [options.props.lightSettings.ambientRatio=0.4] - åç§éç½®é¡¹ï¼åç§çç¯å¢æ¯ä¾ã
 * @param {number} [options.props.lightSettings.diffuseRatio=0.6] - åç§éç½®é¡¹ï¼åçæ¼«åå°çã
 * @param {number} [options.props.lightSettings.specularRatio=0.8] - åç§éç½®é¡¹ï¼åçéé¢åå°çã
 * @param {Object} [options.layerId] - DeckglLayer å¾å± Dom åç´  IDãé»è®¤ä½¿ç¨ CommonUtil.createUniqueID("graphicLayer_" + this.layerTypeID + "_") åå»ºä¸é¢å¾å± IDã
 * @param {number} [options.props.opacity=1] - å¬å±éç½®é¡¹ï¼å¾å±éæåº¦ã
 * @param {boolean} [options.props.pickable=false] - å¬å±éç½®é¡¹ï¼æ¯å¦ååºé¼ æ äºä»¶ï¼é¼ æ ç¹å»ï¼é¼ æ æ»å¨)ã
 * @param {function} [options.props.autoHighlight=false] - å¬å±éç½®é¡¹ï¼é¼ æ æ»å¨é«äº®è¦ç´ ã
 * @param {function} [options.props.highlightColor=[0, 0, 128, 128]] - å¬å±éç½®é¡¹ï¼é¼ æ æ»å¨é«äº®é¢è²ã
 * @param {function} [options.props.onClick] - å¬å±éç½®é¡¹ï¼é¼ æ ç¹å»äºä»¶ã
 * @param {function} [options.props.onHover] - å¬å±éç½®é¡¹ï¼é¼ æ æ»å¨äºä»¶ã
 * @param {number} [options.props.radiusScale=1] - "scatter-plot" éç½®é¡¹ï¼æ£ç¹åå¾æ¯ä¾ã
 * @param {boolean} [options.props.outline=false] - "scatter-plot" éç½®é¡¹ï¼æ¯å¦è¾¹çº¿æ¾ç¤ºã
 * @param {number} [options.props.strokeWidth=1]  - "scatter-plot" éç½®é¡¹ï¼è¾¹çº¿å®½åº¦ã
 * @param {number} [options.props.radiusMinPixels=0] - "scatter-plot" éç½®é¡¹ï¼åå¾æå°åç´ å¼ã
 * @param {number} [options.props.radiusMaxPixels=Number.MAX_SAFE_INTEGER]  - "scatter-plot" éç½®é¡¹ï¼åå¾æå¤§åç´ å¼ã
 * @param {boolean} [options.props.fp64=false] - "scatter-plot" éç½®é¡¹ï¼å¦åºä»¥é«ç²¾åº¦64ä½æ¨¡å¼åç°å¾å±ã
 * @param {number} [options.props.widthScale=1] - "path-layer" éç½®é¡¹ï¼çº¿å®½æ¯ä¾ã
 * @param {number} [options.props.widthMinPixels=0] - "path-layer" éç½®é¡¹ï¼çº¿å®½æå°åç´ å¼ã
 * @param {number} [options.props.widthMaxPixels=Number.MAX_SAFE_INTEGER] - "path-layer" éç½®é¡¹ï¼çº¿å®½æå¤§åç´ å¼ã
 * @param {boolean} [options.props.rounded=false] - "path-layer" éç½®é¡¹ï¼èç¹æ¯å¦ç»å¶ä¸ºå¼§å½¢ã
 * @param {number} [options.props.miterLimit=4] - "path-layer" éç½®é¡¹ï¼èç¹ç¸å¯¹äºçº¿å®½çæå¤§èå´,ä»å¨ rounded ä¸º false æ¶ææï¼
 * @param {boolean} [options.props.fp64=false] - "path-layer" éç½®é¡¹ï¼å¦åºä»¥é«ç²¾åº¦64ä½æ¨¡å¼åç°å¾å±ã
 * @param {boolean} [options.props.dashJustified=false] - "path-layer" éç½®é¡¹ï¼æ¯å¦èçº¿å½¢å¼æ¾ç¤ºï¼ä»å¨ getDashArray() åè°å½æ°è¢«æå®æ¶ææã
 * @param {boolean} [options.props.filled=true] - "polygon-layer" éç½®é¡¹ï¼æ¯å¦å¡«åé¢ã
 * @param {boolean} [options.props.stroked=true] - "polygon-layer" éç½®é¡¹ï¼æ¯å¦ç»å¶è¾¹çº¿ã
 * @param {boolean} [options.props.extruded=false] - "polygon-layer" éç½®é¡¹ï¼æ¯å¦æä¼¸å»ºç­ã
 * @param {boolean} [options.props.wireframe=false] - "polygon-layer" éç½®é¡¹ï¼å½é¢è¢«æä¼¸ä¸ºå»ºç­æ¶ï¼æ¯å¦æç»å»ºç­ç©è¾¹çº¿ã
 * @param {boolean} [options.props.elevationScale=1] - "polygon-layer" éç½®é¡¹ï¼æµ·ææ¯ä¾ã
 * @param {boolean} [options.props.lineWidthScale=1] - "polygon-layer" éç½®é¡¹ï¼çº¿å®½æ¯ä¾ã
 * @param {boolean} [options.props.lineWidthMinPixels=0] - "polygon-layer" éç½®é¡¹ï¼çº¿å®½æå°åç´ å¼ã
 * @param {boolean} [options.props.lineWidthMaxPixels=Number.MAX_SAFE_INTEGER] - "polygon-layer" éç½®é¡¹ï¼çº¿å®½æå¤§åç´ å¼ã
 * @param {boolean} [options.props.lineJointRounded=false] - "polygon-layer" éç½®é¡¹ï¼èç¹æ¯å¦ç»å¶ä¸ºå¼§å½¢ã
 * @param {boolean} [options.props.lineMiterLimit=4] - "polygon-layer" éç½®é¡¹ï¼èç¹ç¸å¯¹äºçº¿å®½çæå¤§èå´ï¼ä»å¨ lineJointRounded ä¸º false æ¶ææã
 * @param {boolean} [options.props.lineDashJustified=false] - "polygon-layer" éç½®é¡¹ï¼æ¯å¦èçº¿å½¢å¼æ¾ç¤ºï¼ä»å¨ getLineDashArray() åè°å½æ°è¢«æå®æ¶ææã
 * @param {boolean} [options.props.fp64=false] - "polygon-layer" éç½®é¡¹ï¼å¦åºä»¥é«ç²¾åº¦64ä½æ¨¡å¼åç°å¾å±ã
 * @param {boolean} [options.props.fp64=false] - "arc-layer" éç½®é¡¹ï¼å¦åºä»¥é«ç²¾åº¦64ä½æ¨¡å¼åç°å¾å±ã
 * @param {boolean} [options.props.strokeWidth=1] - "arc-layer" éç½®é¡¹ï¼çº¿å®½ã
 * @param {boolean} [options.props.radius=1000] - "hexagon-layer" éç½®é¡¹ï¼å­è¾¹å½¢åå¾å¼ã
 * @param {boolean} [options.props.extruded=false] - "hexagon-layer" éç½®é¡¹ï¼æ¯å¦æä¼¸è¦ç´ ã
 * @param {boolean} [options.props.upperPercentile=100] - "hexagon-layer" éç½®é¡¹ï¼ç­éç®±å¹¶éè¿upperPercentileéæ°è®¡ç®é¢è²ã é¢è²å¼å¤§äºupperPercentileçå­è¾¹å½¢å°è¢«éèã
 * @param {boolean} [options.props.elevationScale=1] - "hexagon-layer" éç½®é¡¹ï¼é«ç¨ä¹æ°ï¼å®éæµ·æé«åº¦ç± elevationScale * getElevationï¼dï¼è®¡ç®ã elevationScaleæ¯ä¸ä¸ªæ¹ä¾¿çå±æ§ï¼å¯ä»¥å¨ä¸æ´æ°æ°æ®çæåµä¸ç¼©æ¾ææå­è¾¹å½¢ã
 * @param {boolean} [options.props.colorDomain=false]  - "hexagon-layer" éç½®é¡¹ï¼è²é¶ã
 * @param {boolean} [options.props.colorRange=[[255,255,178,255],[254,217,118,255],[254,178,76,255],[253,141,60,255],[240,59,32,255],[189,0,38,255]]]   - "hexagon-layer" éç½®é¡¹ï¼è²å¸¦ã
 */

var DeckglLayer = /*#__PURE__*/function () {
  function DeckglLayer(layerTypeID, options) {
    DeckglLayer_classCallCheck(this, DeckglLayer);

    // Util.extend(defaultProps, options);

    /**
     * @member {string} mapboxgl.supermap.DeckglLayer.prototype.id
     * @description é«æçç¹å¾å± idã
     */
    this.layerTypeID = layerTypeID;
    /**
     * @member {Array.<mapboxgl.supermap.Graphic>} mapboxgl.supermap.DeckglLayer.prototype.graphics
     * @description ç¹è¦ç´ å¯¹è±¡æ°ç»ã
     */

    this.data = [].concat(options.data);
    this.props = options.props ? options.props : {};
    this.callback = options.callback ? options.callback : {};
    this.id = options.layerId ? options.layerId : Util.createUniqueID('graphicLayer_' + this.layerTypeID + '_');
    /**
     * @member {boolean} [mapboxgl.supermap.DeckglLayer.prototype.visibility=true]
     * @description å¾å±æ¾ç¤ºç¶æå±æ§ã
     */

    this.visibility = true;
  }
  /**
   * @function mapboxgl.supermap.DeckglLayer.prototype.onAdd
   * @param {mapboxgl.Map} map - Mapbox GL å°å¾å¯¹è±¡ã
   * @returns {mapboxgl.supermap.DeckglLayer}
   */


  DeckglLayer_createClass(DeckglLayer, [{
    key: "onAdd",
    value: function onAdd(map) {
      this.map = map;

      if (this.canvas) {
        this.mapContainer = this.map.getCanvasContainer();
        this.mapContainer.appendChild(this.canvas);
        return this;
      } //å½ä½¿ç¨æ©å±çmapboxglä»£ç æ¶ææ


      if (map.getCRS && map.getCRS() !== (external_mapboxgl_default()).CRS.EPSG3857) {
        this.coordinateSystem = 3;
        this.isGeographicCoordinateSystem = true;
      } //åå»ºå¾å±å®¹å¨


      this._initContainer(); //åå»º deckgl å¾å±


      this._createLayerByLayerTypeID();

      var mapState = this._getState();

      var deckOptions = {};

      for (var key in mapState) {
        deckOptions[key] = mapState[key];
      }

      deckOptions.layers = [this.layer];
      deckOptions.canvas = this.canvas;
      this.deckGL = new window.DeckGL.experimental.DeckGLJS(deckOptions);
      this.map.on('render', this._moveEvent.bind(this));
      this.map.on('resize', this._resizeEvent.bind(this));

      this._draw();

      return this;
    }
    /**
     * @function mapboxgl.supermap.DeckglLayer.prototype.remove
     * @description å é¤è¯¥å¾å±ã
     */

  }, {
    key: "remove",
    value: function remove() {
      this.map.off('render', this._moveEvent.bind(this));
      this.map.off('resize', this._resizeEvent.bind(this));
      this.map.getCanvasContainer().removeChild(this.canvas);
    }
    /**
     * @function mapboxgl.supermap.DeckglLayer.prototype.removeFromMap
     * @deprecated
     * @description å é¤è¯¥å¾å±ã
     */

  }, {
    key: "removeFromMap",
    value: function removeFromMap() {
      this.remove();
      this.clear();
    }
    /**
     * @function mapboxgl.supermap.DeckglLayer.prototype.moveTo
     * @description å°å¾å±ç§»å¨å°æä¸ªå¾å±ä¹åã
     * @param {string} layerID - å¾æå¥çå¾å± IDã
     * @param {boolean} [before=true] - æ¯å¦å°æ¬å¾å±æå¥å°å¾å± id ä¸º layerID çå¾å±ä¹åï¼å¦æä¸º false åå°æ¬å¾å±æå¥å°å¾å± id ä¸º layerID çå¾å±ä¹åï¼ã
     */

  }, {
    key: "moveTo",
    value: function moveTo(layerID, before) {
      var layer = document.getElementById(this.id);
      before = before !== undefined ? before : true;

      if (before) {
        var beforeLayer = document.getElementById(layerID);

        if (layer && beforeLayer) {
          beforeLayer.parentNode.insertBefore(layer, beforeLayer);
        }

        return;
      }

      var nextLayer = document.getElementById(layerID);

      if (layer) {
        if (nextLayer.nextSibling) {
          nextLayer.parentNode.insertBefore(layer, nextLayer.nextSibling);
          return;
        }

        nextLayer.parentNode.appendChild(layer);
      }
    }
    /**
     * @function mapboxgl.supermap.DeckglLayer.prototype.setVisibility
     * @description è®¾ç½®å¾å±å¯è§æ§ï¼è®¾ç½®å¾å±çéèï¼æ¾ç¤ºï¼éç»çç¸åºçå¯è§æ è®°ã
     * @param {boolean} [visibility] - æ¯å¦æ¾ç¤ºå¾å±ï¼å½åå°å¾ç resolution å¨æå¤§æå° resolution ä¹é´ï¼ã
     */

  }, {
    key: "setVisibility",
    value: function setVisibility(visibility) {
      if (this.canvas && visibility !== this.visibility) {
        this.visibility = visibility;
        this.canvas.style.display = visibility ? 'block' : 'none';
      }
    }
    /**
     * @function mapboxgl.supermap.DeckglLayer.prototype.setStyle
     * @description è®¾ç½®å¾å±æ´ä½æ ·å¼ã
     * @param {Object} styleOptions - æ ·å¼å¯¹è±¡ã
     * @param {Array.<number>} [styleOptions.color=[0, 0, 0, 255]] - ç¹é¢è²ã
     * @param {number} [styleOptions.radius=10] - ç¹åå¾ã
     * @param {number} [styleOptions.opacity=0.8] - ä¸éæåº¦ã
     * @param {Array}  [styleOptions.highlightColor] - é«äº®é¢è²ï¼ç®ååªæ¯æ rgba æ°ç»ã
     * @param {number} [styleOptions.radiusScale=1] - ç¹æ¾å¤§åæ°ã
     * @param {number} [styleOptions.radiusMinPixels=0] - åå¾æå°å¼ï¼åç´ ï¼ã
     * @param {number} [styleOptions.radiusMaxPixels=Number.MAX_SAFE_INTEGER] - åå¾æå¤§å¼ï¼åç´ ï¼ã
     * @param {number} [styleOptions.strokeWidth=12] - è¾¹æ¡å¤§å°ã
     * @param {boolean} [styleOptions.outline=false] - æ¯å¦æ¾ç¤ºè¾¹æ¡ã
     */

  }, {
    key: "setStyle",
    value: function setStyle(styleOptions) {
      core_Util_Util.extend(this.props, styleOptions);

      this._createLayerByLayerTypeID();

      this.update();
    }
    /**
     * @function mapboxgl.supermap.DeckglLayer.prototype.setData
     * @description è®¾ç½®ç»å¶çç¹è¦ç´ æ°æ®ï¼ä¼è¦çä¹åçææè¦ç´ ã
     * @param {Array.<Object>}  data - ç¹è¦ç´ å¯¹è±¡æ°ç»ã
     */

  }, {
    key: "setData",
    value: function setData(data) {
      this.data = this.data || [];
      this.data.length = 0;
      var dataTemp = !core_Util_Util.isArray(data) ? [data] : [].concat(data); //this.layer.props.dataä¸è½è¢«éæ°èµå¼ï¼åªè½å¨åæ°ç»ä¸è¿è¡æä½

      if (!this.layer.props.data) {
        this.layer.props.data = [];
      }

      this.layer.props.data.length = 0;

      for (var i = 0; i < dataTemp.length; i++) {
        this.layer.props.data.push(dataTemp[i]);
      }

      this.data = this.layer.props.data;
      this.update();
    }
    /**
     * @function mapboxgl.supermap.DeckglLayer.prototype.addData
     * @description æ·»å ç¹è¦ç´ ï¼ä¸ä¼è¦çä¹åçè¦ç´ ã
     * @param {Array.<Object>}  data - ç¹è¦ç´ å¯¹è±¡æ°ç»ã
     */

  }, {
    key: "addData",
    value: function addData(data) {
      this.data = this.data || [];
      var dataTemp = !core_Util_Util.isArray(data) ? [data] : [].concat(data); //this.layer.props.dataä¸è½è¢«éæ°èµå¼ï¼åªè½å¨åæ°ç»ä¸è¿è¡æä½

      if (!this.layer.props.data) {
        this.layer.props.data = [];
      }

      for (var i = 0; i < dataTemp.length; i++) {
        this.layer.props.data.push(dataTemp[i]);
      }

      this.update();
    }
    /**
     * @function mapboxgl.supermap.DeckglLayer.prototype.update
     * @description æ´æ°å¾å±ã
     */

  }, {
    key: "update",
    value: function update() {
      if (this.layer.lifecycle !== 'Awaiting state') {
        var changeFlags = {
          dataChanged: true,
          propsChanged: true,
          viewportChanged: true,
          updateTriggersChanged: true
        };
        this.layer.setChangeFlags(changeFlags);
      }

      this._draw();
    }
    /**
     * @function mapboxgl.supermap.DeckglLayer.prototype.clear
     * @description éæ¾å¾å±èµæºã
     */
    // todo è¿æåªäºèµæºåºè¯¥è¢«éæ¾ï¼

  }, {
    key: "clear",
    value: function clear() {
      this.removeData();
      this.deckGL.finalize();
    }
    /**
     * @function mapboxgl.supermap.DeckglLayer.prototype.removeData
     * @description ç§»é¤ææè¦ç´ ã
     */

  }, {
    key: "removeData",
    value: function removeData() {
      this.data.length = 0;

      if (this.layer.props.data) {
        this.layer.props.data.length = 0;
      }

      this.update();
    }
  }, {
    key: "_draw",
    value: function _draw() {
      var deckOptions = this._getState();

      deckOptions.layers = [this.layer];
      deckOptions.canvas = this.canvas; // this.deckGL.updateLayers();

      this.deckGL.setProps(deckOptions);
    }
  }, {
    key: "_getState",
    value: function _getState() {
      //è·åå°å¾ä¿¡æ¯æå»ºstate
      var map = this.map;
      var width = parseInt(this.canvas.style.width);
      var height = parseInt(this.canvas.style.height);
      var center = map.getCenter();
      var longitude = center.lng;
      var latitude = center.lat;
      var zoom = map.getZoom();
      var maxZoom = map.getMaxZoom();
      var pitch = map.getPitch();
      var bearing = map.getBearing();
      var mapViewport = {
        width: width,
        height: height,
        longitude: longitude,
        latitude: latitude,
        zoom: zoom,
        maxZoom: maxZoom,
        pitch: pitch,
        bearing: bearing
      };
      var state = {}; //åé mapViewport

      for (var key in mapViewport) {
        state[key] = mapViewport[key];
      } //åé props


      for (var _key in this.props) {
        state[_key] = this.props[_key];
      } //å½ä½¿ç¨æ©å±çmapboxglä»£ç æ¶ææ


      if (map.getCRS && map.getCRS() !== (external_mapboxgl_default()).CRS.EPSG3857) {
        state.coordinateSystem = this.coordinateSystem;
        state.isGeographicCoordinateSystem = this.isGeographicCoordinateSystem;
      } //æ´è¡æ°æ®


      state.data = this.data;
      return state;
    }
    /**
     * @function mapboxgl.supermap.DeckglLayer.prototype._createLayerByLayerTypeID
     * @description å¤å«å½ååå»ºå¾å±ç±»åã
     * @private
     */

  }, {
    key: "_createLayerByLayerTypeID",
    value: function _createLayerByLayerTypeID() {
      //ç»ä¸å¤çå¬å±å±æ§ï¼
      this.props.data = this.data;
      this.props.isGeographicCoordinateSystem = this.isGeographicCoordinateSystem;
      this.props.coordinateSystem = this.coordinateSystem; //æ·»å äºä»¶çå¬

      this.props.pickable = Boolean(this.props.onClick) || Boolean(this.props.onHover); //åç±»ååèªä» defaultProps ååºç¸å½¢çåæ°ï¼

      if (this.layerTypeID === 'scatter-plot') {
        this.props.id = 'scatter-plot';

        this._createScatterPlotLayer();
      } else if (this.layerTypeID === 'path-layer') {
        this.props.id = 'path-layer';

        this._createPathLayer();
      } else if (this.layerTypeID === 'polygon-layer') {
        this.props.id = 'polygon-layer';

        this._createPolygonLayer();
      } else if (this.layerTypeID === 'arc-layer') {
        this.props.id = 'arc-layer';

        this._createArcLineLayer();
      } else if (this.layerTypeID === 'hexagon-layer') {
        this.props.id = 'hexagon-layer';

        this._createHexagonLayer();
      } else {
        throw new Error(this.layerTypeID + ' does not support');
      }
    }
    /**
     * @description scatter-plot
     * @private
     */

  }, {
    key: "_createScatterPlotLayer",
    value: function _createScatterPlotLayer() {
      //å¤çåè°

      /*  this.props.getPosition = this.callback.getPosition ? this.callback.getPosition : function (point) {
            if (!point) {
                return [0, 0, 0];
            }
            return point.geometry.coordinates;
        };*/
      var me = this;
      this.props.getPosition = this.callback.getPosition ? this.callback.getPosition : function (point) {
        if (!point) {
          return [0, 0, 0];
        }

        var lngLat = point.getLngLat();
        return lngLat && [lngLat.lng, lngLat.lat, 0];
      };

      if (this.callback.getColor) {
        this.props.getColor = this.callback.getColor ? this.callback.getColor : function (point) {
          var style = point && point.getStyle();
          return style && style.color || me.props.color;
        };
      }

      if (this.callback.getRadius) {
        this.props.getRadius = this.callback.getRadius ? this.callback.getRadius : function (point) {
          var style = point && point.getStyle();
          return style && style.radius || me.props.radius;
        };
      }

      if (this.props.color || this.props.radius) {
        this.props.updateTriggers = {};

        if (this.props.radius) {
          this.props.updateTriggers.getRadius = [this.props.radius];
        }

        if (this.props.color) {
          this.props.updateTriggers.getColor = [this.props.color];
        }
      }

      this.layer = new window.DeckGL.ScatterplotLayer(this.props);
    }
    /**
     * @description path-layer
     * @private
     */

  }, {
    key: "_createPathLayer",
    value: function _createPathLayer() {
      this.props.getPath = this.callback.getPath ? this.callback.getPath : function (feature) {
        return feature.geometry.coordinates;
      }; //ä»¥ä¸å ä¸ªå½æ°ä¹å¯èµ°é»è®¤å¼

      if (this.callback.getColor) {
        this.props.getColor = this.callback.getColor;
      }

      if (this.callback.getWidth) {
        this.props.getWidth = this.callback.getWidth;
      }

      if (this.callback.getDashArray) {
        this.props.getDashArray = this.callback.getDashArray;
      }

      this.layer = new window.DeckGL.PathLayer(this.props);
    }
    /**
     * @description polygon-layer
     * @private
     */

  }, {
    key: "_createPolygonLayer",
    value: function _createPolygonLayer() {
      this.props.getPolygon = this.callback.getPolygon ? this.callback.getPolygon : function (feature) {
        return feature.geometry.coordinates;
      }; //todo æèä¸ççè®©ç¨æ·éè¿ä¹å¤åè°ä¹ï¼æèåå¤æ­ä¸æ°æ®å±æ§éé¢ææ²¡æéç½®çå±æ§å¼ï¼

      if (this.callback.getElevation) {
        this.props.getElevation = this.callback.getElevation;
      }

      if (this.callback.getFillColor) {
        this.props.getFillColor = this.callback.getFillColor;
      }

      if (this.callback.getLineColor) {
        this.props.getLineColor = this.callback.getLineColor;
      }

      if (this.callback.getLineWidth) {
        this.props.getLineWidth = this.callback.getLineWidth;
      }

      this.props.updateTriggers = {};
      this.props.updateTriggers.getColor = this.props.color ? this.props.color : [0, 0, 128, 128];
      this.layer = new window.DeckGL.PolygonLayer(this.props);
    }
    /**
     * @description arc-layer
     * @private
     */

  }, {
    key: "_createArcLineLayer",
    value: function _createArcLineLayer() {
      //todo ArcLineLayer geojson coordinatesæ°ç»ä¸­åªè½æä¸ä¸ªçº¿æ®µ
      this.props.getSourcePosition = this.callback.getSourcePosition ? this.callback.getSourcePosition : function (feature) {
        if (!feature) {
          return [0, 0, 0];
        }

        return feature.geometry.coordinates[0];
      };
      this.props.getTargetPosition = this.callback.getTargetPosition ? this.callback.getTargetPosition : function (feature) {
        if (!feature) {
          return [0, 0, 0];
        }

        return feature.geometry.coordinates[1];
      };

      if (this.callback.getStrokeWidth) {
        this.props.getStrokeWidth = this.callback.getStrokeWidth;
      }

      if (this.callback.getSourceColor) {
        this.props.getSourceColor = this.callback.getSourceColor;
      }

      if (this.callback.getTargetColor) {
        this.props.getTargetColor = this.callback.getTargetColor;
      }

      this.layer = new window.DeckGL.ArcLayer(this.props);
    }
    /**
     * @description hexagon-layer
     * @private
     */

  }, {
    key: "_createHexagonLayer",
    value: function _createHexagonLayer() {
      this.props.getPosition = this.callback.getPosition ? this.callback.getPosition : function (feature) {
        if (!feature) {
          return [0, 0, 0];
        }

        return feature.geometry.coordinates;
      };

      if (this.callback.getColorValue) {
        this.props.getColorValue = this.callback.getColorValue;
      }

      if (this.callback.getElevationValue) {
        this.props.getElevationValue = this.callback.getElevationValue;
      }

      this.layer = new window.DeckGL.HexagonLayer(this.props);
    }
  }, {
    key: "_initContainer",
    value: function _initContainer() {
      this.canvas = this._createCanvas();
      this.mapContainer = this.map.getCanvasContainer();
      this.mapContainer.appendChild(this.canvas);
    }
  }, {
    key: "_createCanvas",
    value: function _createCanvas() {
      var canvas = document.createElement('canvas');
      canvas.id = this.id;
      canvas.style.position = 'absolute';
      canvas.style.top = 0 + 'px';
      canvas.style.left = 0 + 'px';
      canvas.style.cursor = '';
      var map = this.map;
      canvas.width = parseInt(map.getCanvas().style.width);
      canvas.height = parseInt(map.getCanvas().style.height);
      canvas.style.width = map.getCanvas().style.width;
      canvas.style.height = map.getCanvas().style.height;
      return canvas;
    }
  }, {
    key: "_moveEvent",
    value: function _moveEvent() {
      this._draw();
    }
  }, {
    key: "_resizeEvent",
    value: function _resizeEvent() {
      var canvas = this.canvas;
      var map = this.map;
      canvas.width = parseInt(map.getCanvas().style.width);
      canvas.height = parseInt(map.getCanvas().style.height);
      canvas.style.width = map.getCanvas().style.width;
      canvas.style.height = map.getCanvas().style.height;

      this._draw();
    }
  }]);

  return DeckglLayer;
}();
(external_mapboxgl_default()).supermap.DeckglLayer = DeckglLayer;
// CONCATENATED MODULE: ./src/mapboxgl/overlay/GraticuleLayer.js
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || GraticuleLayer_unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function GraticuleLayer_unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return GraticuleLayer_arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return GraticuleLayer_arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return GraticuleLayer_arrayLikeToArray(arr); }

function GraticuleLayer_arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function GraticuleLayer_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GraticuleLayer_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GraticuleLayer_createClass(Constructor, protoProps, staticProps) { if (protoProps) GraticuleLayer_defineProperties(Constructor.prototype, protoProps); if (staticProps) GraticuleLayer_defineProperties(Constructor, staticProps); return Constructor; }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

/**
 * reference and modification
 * dereklieu/cool-grid, cloudybay/leaflet.latlng-graticule
 * (https://github.com/dereklieu/cool-grid, https://github.com/cloudybay/leaflet.latlng-graticule)
 * Apache Licene 2.0
 * thanks dereklieu, cloudybay
 */


/**
 * @class mapboxgl.supermap.GraticuleLayer
 * @category Visualization GraticuleLayer
 * @classdesc ç»çº¬ç½ã
 * @version 10.1.1
 * @param {Object} options -ç»çº¬ç½åæ°ã
 * @param {string} [options.layerID] - å¾å± IDãé»è®¤ä½¿ç¨ CommonUtil.createUniqueID("graticuleLayer_") åå»ºå¾å± IDã
 * @param {boolean} [options.visible=true] - æ¯å¦æ¾ç¤ºç»çº¬ç½ã
 * @param {boolean} [options.showLabel=true] - æ¯å¦æ¾ç¤ºæ ç­¾ã
 * @param {number} [options.opacity=1] - ç»å¸éæåº¦ã
 * @param {number|Function} [options.interval = 10] - ç»çº¬åº¦çé´éï¼ä»¥åº¦ä¸ºåä½ï¼ï¼å¯ä»¥æ¯æ°å­ï¼ä¹å¯ä»¥æ¯å½æ°ï¼åæ°æ¯mapã
 * @param {mapboxgl.LngLatBounds} [options.extent] - ç»çº¬ç½æ¸²æçè¾¹çèå´ï¼[minx, miny, maxx, maxy]ï¼ï¼ä¸ä¼ ä¸ºæ´ä¸ªå°å¾èå´ã
 * @param {number} [options.minZoom] - æå°è§å¾ç¼©æ¾çº§å«ï¼ä¸åæ¬æ­¤çº§å«ï¼ï¼å¨è¯¥çº§å«ä¹ä¸ï¼è¯¥å±å°å¯è§ã
 * @param {number} [options.maxZoom] - è¯¥å¾å±å¯è§çæå¤§è§å¾ç¼©æ¾çº§å«ï¼å«ï¼ã
 * @param {Function} [options.lngLabelFormatter = null] - ç»åº¦æ ç­¾è½¬æ¢å½æ°ã
 * @param {Function} [options.latLabelFormatter = null] - çº¬åº¦æ ç­¾è½¬æ¢å½æ°ã
 * @param {mapboxgl.supermap.GraticuleLayer.LabelStyle} [options.lngLabelStyle] - ç»åº¦æ ç­¾æ ·å¼ã
 * @param {mapboxgl.supermap.GraticuleLayer.LabelStyle} [options.latLabelStyle] - çº¬åº¦æ ç­¾æ ·å¼ã
 * @param {mapboxgl.supermap.GraticuleLayer.StrokeStyle} [options.strokeStyle] - ç»å¶ç»çº¬çº¿çæ ·å¼ã
 */

/**
 * @typedef {Object} mapboxgl.supermap.GraticuleLayer.LabelStyle - æ ç­¾æ ·å¼
 * @property {Array.<string>} [textFont = ['Calibri','sans-serif']] - å­ä½æ ·å¼ã
 * @property {string} [textSize = '12px'] - å­ä½å¤§å°ã
 * @property {string} [textColor ='rgba(0,0,0,1)'] - å­ä½é¢è²
 * @property {string} [textHaloColor ='rgba(255,255,255,1)'] - æè¾¹é¢è²
 * @property {number} [textHaloWidth = 1] - æè¾¹å®½åº¦
 * @property {string} [textAnchor = 'bottom'] - å­ä½åºçº¿: "center", "left", "right", "top", "bottom", "top-left", "top-right", "bottom-left", "bottom-right"
 */

/**
 * @typedef {Object} mapboxgl.supermap.GraticuleLayer.StrokeStyle - çº¿æ ·å¼
 * @property {string} [lineColor = 'red'] - çº¿é¢è²ã
 * @property {string} [lineCap = 'round'] - çº¿ç«¯ç¹é£æ ¼ï¼butt, round, squareã
 * @property {string} [lineJoin = round] - çº¿è¿æ¥æ ·å¼ï¼bevel, round, miterã
 * @property {Array.<number>} [lindDasharray = [0.5,4]] - èçº¿æ ·å¼ã
 * @property {number} [lineWidth = 1] - çº¿å®½ã
 */

var defaultTextStyle = {
  textSize: '12px',
  textFont: ['12px Calibri', 'sans-serif'],
  textAnchor: 'bottom',
  textColor: 'rgba(0,0,0,1)',
  textHaloColor: 'rgba(255,255,255,1)',
  textHaloWidth: 1
};
var defaultStrokeStyle = {
  lineColor: 'red',
  lineCap: 'round',
  // butt, round, square
  lineJoin: 'round',
  // bevel, round, miter
  lindDasharray: [0.4, 5],
  // æ°ç»|function
  lineDashOffset: 0,
  lineWidth: 1 // æ°å­|function

};
var defaultOptions = {
  showLabel: true,
  opacity: 1,
  visible: true,
  interval: 10,
  // function|number
  extent: null,
  minZoom: 0,
  maxZoom: 50,
  wrapX: true,
  strokeStyle: defaultStrokeStyle,
  lngLabelFormatter: null,
  latLabelFormatter: null,
  lngLabelStyle: defaultTextStyle,
  latLabelStyle: defaultTextStyle
};
var GraticuleLayer = /*#__PURE__*/function () {
  function GraticuleLayer(options) {
    GraticuleLayer_classCallCheck(this, GraticuleLayer);

    this.id = options && options.layerID ? options.layerID : Util.createUniqueID('graticuleLayer_');
    this.sourceId = this.id + '_line';
    this.canvasId = this.id;
    this.options = options;
    this.resetEvent = this._reset.bind(this);
    this.styleDataEevent = this._setLayerTop.bind(this);
    this.resizeEvent = this._resizeCallback.bind(this);
    this.zoomendEvent = this.setVisibility.bind(this);
  }

  GraticuleLayer_createClass(GraticuleLayer, [{
    key: "onAdd",
    value: function onAdd() {
      var map = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.map;
      this.map = map;

      this._initialize();

      this._createCanvas();

      this._bindEvent();

      this._drawCanvas();

      this._addGraticuleLayer();

      this.setVisibility();
    }
    /**
     * @function mapboxgl.supermap.GraticuleLayer.prototype.removeFromMap
     * @description ç§»é¤å¾å±ã
     */

  }, {
    key: "removeFromMap",
    value: function removeFromMap() {
      this.mapContainer.removeChild(this.canvas);
      this.canvas = null;

      this._unbindEvent();
    }
    /**
     * @function mapboxgl.supermap.GraticuleLayer.prototype.setVisibility
     * @description è®¾ç½®æ¯å¦å¯è§ã
     * @param {boolean} visible - æ¯å¦å¯è§ã
     */

  }, {
    key: "setVisibility",
    value: function setVisibility(visible) {
      var zoom = this.map && this.map.getZoom();
      this.options.visible = typeof visible === 'boolean' ? visible : this.options.visible;
      this.visible = typeof visible === 'boolean' ? visible : this.options.visible && zoom >= this.options.minZoom && zoom <= this.options.maxZoom;

      if (this.map.getLayer(this.sourceId)) {
        this.map.setLayoutProperty(this.sourceId, 'visibility', this.visible ? 'visible' : 'none');
      }

      this._drawLabel();
    }
    /**
     * @function mapboxgl.supermap.GraticuleLayer.prototype.setMinZoom
     * @description è®¾ç½®æå°è§å¾ç¼©æ¾çº§å«ã
     * @param {number} minZoom - æå°è§å¾ç¼©æ¾çº§å«ï¼ä¸åæ¬æ­¤çº§å«ï¼ï¼å¨è¯¥çº§å«ä¹ä¸ï¼è¯¥å±å°å¯è§ã
     */

  }, {
    key: "setMinZoom",
    value: function setMinZoom(minZoom) {
      this.options.minZoom = minZoom;
      this.setVisibility();
    }
    /**
     * @function mapboxgl.supermap.GraticuleLayer.prototype.setMaxZoom
     * @description è¯¥å¾å±å¯è§çæå¤§è§å¾ç¼©æ¾çº§å«ã
     * @param {number} maxZoom - è¯¥å¾å±å¯è§çæå¤§è§å¾ç¼©æ¾çº§å«ï¼å«ï¼ã
     */

  }, {
    key: "setMaxZoom",
    value: function setMaxZoom(maxZoom) {
      this.options.maxZoom = maxZoom;
      this.setVisibility();
    }
    /**
     * @function mapboxgl.supermap.GraticuleLayer.prototype.setShowLabel
     * @description è®¾ç½®æ¾ç¤ºæ ç­¾ã
     * @param {boolean} showLabel - æ¯å¦æ¾ç¤ºæ ç­¾ã
     */

  }, {
    key: "setShowLabel",
    value: function setShowLabel(showLabel) {
      this.options.showLabel = showLabel;

      this._drawLabel();
    }
    /**
     * @function mapboxgl.supermap.GraticuleLayer.prototype.setExtent
     * @description è®¾ç½®ç»çº¬ç½æ¸²æçè¾¹çèå´ã
     * @param {mapboxgl.LngLatBounds} extent - ç»çº¬ç½æ¸²æçè¾¹çèå´ã
     */

  }, {
    key: "setExtent",
    value: function setExtent(extent) {
      this.options.extent = this._getDefaultExtent(extent, this.map);
      this.features = this._getGraticuleFeatures();

      this._updateGraticuleLayer();

      this._drawLabel();
    }
    /**
     * @function mapboxgl.supermap.GraticuleLayer.prototype.setStrokeStyle
     * @description è®¾ç½®ç»çº¬çº¿æ ·å¼ã
     * @param {mapboxgl.supermap.GraticuleLayer.StrokeStyle} strokeStyle - ç»çº¬çº¿æ ·å¼ã
     */

  }, {
    key: "setStrokeStyle",
    value: function setStrokeStyle(strokeStyle) {
      if (!this.map || !this.map.getLayer(this.sourceId)) {
        return;
      }

      this.options.strokeStyle = strokeStyle;

      var _this$_transformStrok = this._transformStrokeStyle(strokeStyle),
          layout = _this$_transformStrok.layout,
          paint = _this$_transformStrok.paint;

      for (var key in layout) {
        this.map.setLayoutProperty(this.sourceId, key, layout[key]);
      }

      for (var _key in paint) {
        this.map.setPaintProperty(this.sourceId, _key, paint[_key]);
      }
    }
    /**
     * @function mapboxgl.supermap.GraticuleLayer.prototype.setLngLabelStyle
     * @description è®¾ç½®ç»åº¦æ ç­¾æ ·å¼ã
     * @param {mapboxgl.supermap.GraticuleLayer.LabelStyle} labelStyle - æ ç­¾æ ·å¼ã
     */

  }, {
    key: "setLngLabelStyle",
    value: function setLngLabelStyle(labelStyle) {
      this.options.lngLabelStyle = labelStyle;

      this._drawLabel();
    }
    /**
     * @function mapboxgl.supermap.GraticuleLayer.prototype.setLatLabelStyle
     * @description è®¾ç½®çº¬åº¦æ ç­¾æ ·å¼ã
     * @param {mapboxgl.supermap.GraticuleLayer.LabelStyle} labelStyle - æ ç­¾æ ·å¼ã
     */

  }, {
    key: "setLatLabelStyle",
    value: function setLatLabelStyle(labelStyle) {
      this.options.latLabelStyle = labelStyle;

      this._drawLabel();
    }
    /**
     * @function mapboxgl.supermap.GraticuleLayer.prototype.setIntervals
     * @description è®¾ç½®ç»çº¬åº¦çé´éï¼ä»¥åº¦ä¸ºåä½)
     * @param {number|Function} interval - ç»çº¬åº¦çé´éï¼ä»¥åº¦ä¸ºåä½ï¼ï¼å¯ä»¥æ¯æ°å­ï¼ä¹å¯ä»¥æ¯å½æ°ï¼åæ°æ¯mapã
     */

  }, {
    key: "setIntervals",
    value: function setIntervals(interval) {
      this.options.interval = interval;

      this._calcInterval();

      this.features = this._getGraticuleFeatures();

      this._updateGraticuleLayer();

      this._drawLabel();
    }
  }, {
    key: "_bindEvent",
    value: function _bindEvent() {
      this.map.on('move', this.resetEvent);
      this.map.on('moveend', this.resetEvent);
      this.map.on('styledata', this.styleDataEevent);
      this.map.on('resize', this.resizeEvent);
      this.map.on('zoomend', this.zoomendEvent);
    }
  }, {
    key: "_unbindEvent",
    value: function _unbindEvent() {
      this.map.off('move', this.resetEvent);
      this.map.off('moveend', this.resetEvent);
      this.map.off('styledata', this.styleDataEevent);
      this.map.off('resize', this.resizeEvent);
      this.map.off('zoomend', this.zoomendEvent);
    }
  }, {
    key: "_initialize",
    value: function _initialize() {
      var map = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.map;
      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.options;
      options = options || {};
      options.strokeStyle = _objectSpread(_objectSpread({}, defaultStrokeStyle), options.strokeStyle || {});
      options.lngLabelStyle = _objectSpread(_objectSpread({}, defaultTextStyle), options.lngLabelStyle || {});
      options.latLabelStyle = _objectSpread(_objectSpread({}, defaultTextStyle), options.latLabelStyle || {});
      this.options = _objectSpread(_objectSpread(_objectSpread({}, defaultOptions), options), {}, {
        extent: this._getDefaultExtent(options.extent, map),
        wrapX: typeof options.wrapX === 'boolean' ? options.wrapX : map.getRenderWorldCopies()
      });
      this.oldExtent = this.options.extent;

      this._calcInterval();

      this.isRotate = false;
      this.visible = true;
      this.features = this._getGraticuleFeatures();
    }
  }, {
    key: "_createCanvas",
    value: function _createCanvas() {
      if (this.canvas) {
        return;
      }

      this.canvas = document.createElement('canvas');
      this.canvas.id = this.canvasId;
      this.canvas.style.position = 'absolute';
      this.canvas.style.top = 0 + 'px';
      this.canvas.style.left = 0 + 'px';
      var global$2 = typeof window === 'undefined' ? {} : window;
      var devicePixelRatio = global$2.devicePixelRatio || 1;
      this.canvas.width = parseInt(this.map.getCanvas().style.width) * devicePixelRatio;
      this.canvas.height = parseInt(this.map.getCanvas().style.height) * devicePixelRatio;
      this.canvas.style.width = this.map.getCanvas().style.width;
      this.canvas.style.height = this.map.getCanvas().style.height;
      this.canvas.globalAlpha = this.options.opacity;
      this.mapContainer = this.map.getCanvasContainer();
      this.mapContainer.appendChild(this.canvas);
    }
  }, {
    key: "_drawCanvas",
    value: function _drawCanvas() {
      if (!this.canvas) {
        this._createCanvas();
      }

      this.setVisibility();

      this._reset();
    }
  }, {
    key: "_resizeCallback",
    value: function _resizeCallback() {
      this.mapContainer && this.mapContainer.removeChild(this.canvas);
      this.canvas = null;

      this._drawCanvas();
    }
  }, {
    key: "_reset",
    value: function _reset() {
      this._updateRotate();

      this._updateExtent();

      this._calcInterval();

      this._drawLabel();
    }
  }, {
    key: "_setLayerTop",
    value: function _setLayerTop() {
      var _this = this;

      var map = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.map;

      if (!map) {
        return;
      }

      var layersOnMap = map.getStyle && map.getStyle().layers;

      if (layersOnMap && layersOnMap.length && layersOnMap.findIndex(function (item) {
        return item.id === _this.sourceId;
      }) !== layersOnMap.length - 1) {
        if (map.getLayer(this.sourceId)) {
          map.removeLayer(this.sourceId);

          this._addGraticuleLayer();
        }
      }
    }
  }, {
    key: "_getDefaultExtent",
    value: function _getDefaultExtent(extent) {
      var map = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.map;
      var crs = map.getCRS && map.getCRS() || {};
      var crsExtent = crs.extent;

      if (!crsExtent) {
        crsExtent = [-180, -85.05119, 180, 85.05119];
      }

      if (!extent || extent.length === 0) {
        return crsExtent;
      }

      var _mapboxgl$LngLatBound = external_mapboxgl_default().LngLatBounds.convert(extent),
          _sw = _mapboxgl$LngLatBound._sw,
          _ne = _mapboxgl$LngLatBound._ne;

      extent = [_sw.lng, _sw.lat, _ne.lng, _ne.lat];
      extent = [Math.max(crsExtent[0], extent[0]), Math.max(crsExtent[1], extent[1]), Math.min(crsExtent[2], extent[2]), Math.min(crsExtent[3], extent[3])];
      return extent;
    }
  }, {
    key: "_updateRotate",
    value: function _updateRotate() {
      var bearing = this.map.getBearing();
      this.isRotate = bearing > -180 && bearing <= -90 || bearing >= 90 && bearing < 180;
    }
  }, {
    key: "_updateExtent",
    value: function _updateExtent() {
      if (this.options.wrapX && !this.oldExtent) {
        var _this$map$getBounds = this.map.getBounds(),
            _ne = _this$map$getBounds._ne,
            _sw = _this$map$getBounds._sw;

        this.options.extent = [_sw.lng, _sw.lat, _ne.lng, _ne.lat];
      }
    }
  }, {
    key: "_calcInterval",
    value: function _calcInterval() {
      var interval = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.options.interval;

      if (typeof interval === 'function') {
        interval = interval(this.map);
        this._currLngInterval = interval;
        this._currLatInterval = interval;
      } else {
        this._currLngInterval = interval;
        this._currLatInterval = interval;
      }
    }
  }, {
    key: "_formatLat",
    value: function _formatLat(lat) {
      if (this.options.latFormatTickLabel) {
        return this.options.latLabelFormatter(lat);
      }

      if (lat < 0) {
        return '' + conversionDegree(lat * -1) + 'S';
      } else if (lat > 0) {
        return '' + conversionDegree(lat) + 'N';
      }

      return '' + conversionDegree(lat);
    }
  }, {
    key: "_formatLng",
    value: function _formatLng(lng) {
      if (this.options.lngLabelFormatter) {
        return this.options.lngLabelFormatter(lng);
      }

      lng = getWrapNum(lng);

      if (lng > 0 && lng <= 180) {
        return '' + conversionDegree(lng) + 'E';
      } else if (lng < 0 && lng >= -180) {
        return '' + conversionDegree(lng * -1) + 'W';
      }

      return '' + conversionDegree(lng);
    }
  }, {
    key: "_parsePxToInt",
    value: function _parsePxToInt(txt) {
      if (txt.length > 2) {
        if (txt.charAt(txt.length - 2) === 'p') {
          txt = txt.substr(0, txt.length - 2);
        }
      }

      try {
        return parseInt(txt, 10);
      } catch (e) {
        console.log(e);
      }

      return 0;
    }
  }, {
    key: "_drawLabel",
    value: function _drawLabel() {
      var _this2 = this;

      var visible = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.visible;
      var canvas = this.canvas;
      var ctx = canvas.getContext('2d');

      if (!visible || !this.options.showLabel) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        return;
      }

      if (this.map) {
        if (!this._currLngInterval || !this._currLatInterval) {
          this._calcInterval();
        }

        ctx.clearRect(0, 0, canvas.width, canvas.height);
        var _this$options = this.options,
            lngLabelStyle = _this$options.lngLabelStyle,
            latLabelStyle = _this$options.latLabelStyle;

        var _this$_getGridiculePo = this._getGridiculePoints(),
            lngPoints = _this$_getGridiculePo.lngPoints,
            latPonits = _this$_getGridiculePo.latPonits;

        lngPoints.forEach(function (point) {
          _this2._drawLng(ctx, point[0], point[1], point[2], lngLabelStyle);
        });
        latPonits.forEach(function (point) {
          _this2._drawLat(ctx, point[0], point[1], point[2], latLabelStyle);
        });
      }
    }
  }, {
    key: "_drawLat",
    value: function _drawLat(ctx, latTick, bb, isIntersect, latLabelStyle) {
      ctx = this._setLabelStyle(ctx, latLabelStyle);
      var ww = this.canvas.width;
      var txtHeight = 12;

      try {
        var fontSize = ctx.font.split(' ')[0];
        txtHeight = this._parsePxToInt(fontSize);
      } catch (e) {
        console.log(e);
      }

      if (!isIntersect) {
        var lngR = latTick;
        latTick = bb;
        bb = this.map.project([lngR, latTick]);
      }

      var latstr = this._formatLat(latTick);

      var txtWidth = ctx.measureText(latstr).width;
      ctx.strokeText(latstr, (isIntersect ? ww : bb.x) - txtWidth, (isIntersect ? bb : bb.y) + txtHeight / 2);
      ctx.fillText(latstr, (isIntersect ? ww : bb.x) - txtWidth, (isIntersect ? bb : bb.y) + txtHeight / 2);
    }
  }, {
    key: "_drawLng",
    value: function _drawLng(ctx, lngTick, bb, isIntersect, lngLabelStyle) {
      ctx = this._setLabelStyle(ctx, lngLabelStyle);
      var hh = this.canvas.height;

      if (!isIntersect) {
        var latTick = bb;
        bb = this.map.project([lngTick, latTick]);
      }

      var lngstr = this._formatLng(lngTick);

      var txtWidth = ctx.measureText(lngstr).width;
      ctx.strokeText(lngstr, (isIntersect ? bb : bb.x) - txtWidth / 2, isIntersect ? hh : bb.y);
      ctx.fillText(lngstr, (isIntersect ? bb : bb.x) - txtWidth / 2, isIntersect ? hh : bb.y);
    }
  }, {
    key: "_getLatPoints",
    value: function _getLatPoints() {
      var _this3 = this;

      var lngRange = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-180, 180];
      var firstLng = arguments.length > 1 ? arguments[1] : undefined;
      var lastLng = arguments.length > 2 ? arguments[2] : undefined;
      var features = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.features;

      if (!features) {
        return;
      }

      if (this.options.wrapX && lngRange[0] === -180 && lngRange[1] === 180) {
        return [];
      }

      var points = [];
      features.forEach(function (feature) {
        var lat = feature.geometry.coordinates[0][1];
        var isLatFeature = feature.geometry.coordinates[1][1] === lat;

        if (isLatFeature) {
          var lng = typeof lastLng === 'number' ? lastLng : lngRange[1];

          if (_this3.isRotate) {
            lng = typeof firstLng === 'number' ? firstLng : lngRange[0];
          }

          if (_this3.options.wrapX) {
            points = points.concat(_this3._getWrapPoints(lng, lat, [lng, lng]));
          }

          points.push([lng, lat]);
        }
      });
      return points;
    }
  }, {
    key: "_getLngPoints",
    value: function _getLngPoints() {
      var _this4 = this;

      var latRange = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [-90, 90];
      var firstLat = arguments.length > 1 ? arguments[1] : undefined;
      var lastLat = arguments.length > 2 ? arguments[2] : undefined;
      var features = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.features;

      if (!features) {
        return;
      }

      var lat = typeof firstLat === 'number' ? firstLat : latRange[0];

      if (this.isRotate) {
        lat = typeof lastLat === 'number' ? lastLat : latRange[1];
      }

      var points = [];
      features.forEach(function (feature) {
        var lng = feature.geometry.coordinates[0][0];
        var isLngFeature = feature.geometry.coordinates[1][0] === lng;

        if (isLngFeature) {
          points.push([lng, lat]);

          if (_this4.options.wrapX) {
            points = points.concat(_this4._getWrapPoints(lng, lat));
          }
        }
      });
      return points;
    }
  }, {
    key: "_getWrapPoints",
    value: function _getWrapPoints(lng, lat) {
      var extent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.oldExtent;
      var points = [];

      var _this$map$getBounds2 = this.map.getBounds(),
          _ne = _this$map$getBounds2._ne,
          _sw = _this$map$getBounds2._sw;

      var lastLng = extent.length > 2 ? extent[2] : extent[1];

      while (lng >= _sw.lng) {
        var wrapNum = getWrapNum(lng, lastLng === 180, extent[0] === -180);

        if (!extent || wrapNum >= extent[0] && wrapNum <= lastLng) {
          points.push([lng, lat]);
        }

        lng -= 360;
      }

      while (lng <= _ne.lng) {
        var _wrapNum = getWrapNum(lng, lastLng === 180, extent[0] === -180);

        if (!extent || _wrapNum >= extent[0] && _wrapNum <= lastLng) {
          points.push([lng, lat]);
        }

        lng += 360;
      }

      return points;
    }
  }, {
    key: "_getGridiculePoints",
    value: function _getGridiculePoints() {
      var intersectLatPoints = this._getEdgeLat();

      var intersectLngPoints = this._getEdgeLng();

      var _this$_getRange = this._getRange(),
          latRange = _this$_getRange.latRange,
          lngRange = _this$_getRange.lngRange,
          firstLat = _this$_getRange.firstLat,
          firstLng = _this$_getRange.firstLng,
          lastLat = _this$_getRange.lastLat,
          lastLng = _this$_getRange.lastLng;

      var latPonits = this._getUniquePoint(this._getLatPoints(lngRange, firstLng, lastLng), intersectLatPoints, 1);

      var lngPoints = this._getUniquePoint(this._getLngPoints(latRange, firstLat, lastLat), intersectLngPoints, 0);

      return {
        latPonits: latPonits,
        lngPoints: lngPoints
      };
    }
  }, {
    key: "_getEdgeLat",
    value: function _getEdgeLat() {
      var _currLatInterval = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._currLatInterval;

      var map = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.map;
      var latPoints = [];
      var latCoordinates = [];
      var firstLat;
      var ww = this.canvas.width;
      var hh = this.canvas.height;

      var _this$_getRange2 = this._getRange(),
          extent = _this$_getRange2.extent;

      var _this$map$getBounds3 = this.map.getBounds(),
          _ne = _this$map$getBounds3._ne;

      if (this.options.wrapX && getWrapNum(_ne.lng) > extent[2]) {
        return [];
      }

      var countDecimals = this._countDecimals(_currLatInterval);

      for (var i = 0; i <= hh; i++) {
        var point = map.unproject([ww, i]);
        var wrapNum = getWrapNum(point.lng);
        var lngEdge = this.options.wrapX ? wrapNum >= extent[0] && wrapNum <= extent[2] : point.lng >= extent[0] && point.lng <= extent[2];

        if (lngEdge && point.lat >= extent[1] && point.lat <= extent[3]) {
          latPoints.push([point.lat, i]);
          latCoordinates.push(point.lat);

          if (firstLat === undefined && point.lat.toFixed(countDecimals) % _currLatInterval === 0) {
            firstLat = Number(point.lat.toFixed(countDecimals));
          }
        }
      }

      var _this$_getIntersectRa = this._getIntersectRange(firstLat, latCoordinates, latPoints, _currLatInterval),
          first = _this$_getIntersectRa.first,
          last = _this$_getIntersectRa.last,
          coordinates = _this$_getIntersectRa.coordinates,
          points = _this$_getIntersectRa.points;

      firstLat = Math.min(Math.max(first, -90), 90);
      var lastLat = Math.max(Math.min(Math.round(last), 90), -90);

      if (firstLat !== -90 || lastLat !== -90) {
        return this._getClosestCoordinate(firstLat, lastLat, coordinates, points, _currLatInterval);
      }

      return [];
    }
  }, {
    key: "_getEdgeLng",
    value: function _getEdgeLng() {
      var _currLngInterval = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._currLngInterval;

      var map = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.map;
      var lngPoints = [];
      var lngCoordinates = [];
      var firstLng;
      var ww = this.canvas.width;
      var hh = this.canvas.height;
      var extent = this.options.extent;

      var countDecimals = this._countDecimals(_currLngInterval);

      var _this$map$getBounds4 = this.map.getBounds(),
          _sw = _this$map$getBounds4._sw;

      if (this.options.wrapX && getWrapNum(_sw.lat) > extent[3]) {
        return [];
      }

      for (var i = 0; i <= ww; i++) {
        var point = map.unproject([i, hh]);
        var wrapNum = getWrapNum(point.lng);
        var lngEdge = this.options.wrapX ? wrapNum >= extent[0] && wrapNum <= extent[2] : point.lng >= extent[0] && point.lng <= extent[2];

        if (lngEdge && point.lat >= extent[1] && point.lat <= extent[3]) {
          lngPoints.push([point.lng, i]);
          lngCoordinates.push(point.lng);

          if (firstLng === undefined && point.lng.toFixed(countDecimals) % _currLngInterval === 0) {
            firstLng = Number(point.lng.toFixed(countDecimals));
          }
        }
      }

      var _this$_getIntersectRa2 = this._getIntersectRange(firstLng, lngCoordinates, lngPoints, _currLngInterval),
          first = _this$_getIntersectRa2.first,
          lastLng = _this$_getIntersectRa2.last,
          coordinates = _this$_getIntersectRa2.coordinates,
          points = _this$_getIntersectRa2.points;

      firstLng = first;
      return this._getClosestCoordinate(firstLng, lastLng, coordinates, points, _currLngInterval);
    }
  }, {
    key: "_getIntersectRange",
    value: function _getIntersectRange(first, coordinates, points, interval) {
      var last = coordinates[coordinates.length - 1];

      if (first > last) {
        last = first;
        coordinates.reverse();
        points.reverse();

        var countDecimals = this._countDecimals(interval);

        for (var i = 0; i <= coordinates.length; i++) {
          var point = coordinates[i];

          if (point.toFixed(countDecimals) % interval === 0) {
            first = Number(point.toFixed(countDecimals));
            break;
          }
        }
      }

      return {
        first: first,
        last: last,
        coordinates: coordinates,
        points: points
      };
    }
  }, {
    key: "_getClosestCoordinate",
    value: function _getClosestCoordinate(first, last, coordinates, points, interval) {
      var result = [];
      var graticule = first;

      while (graticule <= last) {
        var index = this._getClosestNumberIndex(graticule, coordinates);

        var point = points[index];
        result.push([Math.round(point[0]), point[1], true]);
        graticule += interval;
        coordinates = coordinates.slice(index);
        points = points.slice(index);
      }

      return result;
    }
  }, {
    key: "_getClosestNumberIndex",
    value: function _getClosestNumberIndex(num, arr) {
      var index = 0;
      var diffValue = Number.MAX_VALUE;

      for (var i = 0; i < arr.length; i++) {
        var newDiffValue = Math.abs(arr[i] - num);

        if (newDiffValue <= diffValue) {
          if (newDiffValue === diffValue && arr[i] < arr[index]) {
            continue;
          }

          index = i;
          diffValue = newDiffValue;
        }
      }

      return index;
    }
  }, {
    key: "_getUniquePoint",
    value: function _getUniquePoint(points, intersectPoints) {
      var index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;

      if (this.options.wrapX) {
        return points.concat(intersectPoints);
      }

      if (!intersectPoints || intersectPoints.length === 0) {
        return points;
      }

      var tmp = intersectPoints;
      var width = this.canvas.width;
      var height = this.canvas.height;

      for (var i in points) {
        var edgePoint = this.map.project(points[i]);
        var intersetIndex = tmp.findIndex(function (item) {
          return item[0] === points[i][index];
        });

        if (intersetIndex <= -1) {
          tmp.push(points[i]);
        } else if (edgePoint && edgePoint.x >= 0 && edgePoint.x <= width && edgePoint.y >= 0 && edgePoint.y <= height) {
          tmp[intersetIndex] = points[i];
        }
      }

      return tmp;
    }
  }, {
    key: "_countDecimals",
    value: function _countDecimals(value) {
      if (Math.floor(value) !== value) {
        return value.toString().split('.')[1].length || 0;
      }

      return 0;
    }
  }, {
    key: "_addGraticuleLayer",
    value: function _addGraticuleLayer() {
      var features = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.features;

      if (!this.map.getSource(this.sourceId)) {
        var source = {
          type: 'geojson',
          data: {
            type: 'FeatureCollection',
            features: features
          }
        };
        this.map.addSource(this.sourceId, source);
      }

      if (!this.map.getLayer(this.sourceId)) {
        this.map.addLayer(_objectSpread({
          id: this.sourceId,
          type: 'line',
          source: this.sourceId
        }, this._transformStrokeStyle()));
      }
    }
  }, {
    key: "_updateGraticuleLayer",
    value: function _updateGraticuleLayer() {
      var features = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.features;

      if (this.map.getSource(this.sourceId)) {
        var geoJSONData = {
          type: 'FeatureCollection',
          features: features
        };
        this.map.getSource(this.sourceId).setData(geoJSONData);
      }

      this._addGraticuleLayer();
    }
  }, {
    key: "_getGraticuleFeatures",
    value: function _getGraticuleFeatures() {
      var _currLngInterval = this._currLngInterval || 10;

      var _currLatInterval = this._currLatInterval || 10;

      var features = [];

      var _this$_getRange3 = this._getRange(),
          latRange = _this$_getRange3.latRange,
          lngRange = _this$_getRange3.lngRange,
          firstLat = _this$_getRange3.firstLat,
          firstLng = _this$_getRange3.firstLng,
          lastLat = _this$_getRange3.lastLat,
          lastLng = _this$_getRange3.lastLng;

      if (this.options.wrapX && !this.oldExtent) {
        latRange = [-90, 90];
        lngRange = [-180, 180];
        firstLat = firstLng = lastLat = lastLng = null;
      }

      if (typeof firstLng === 'number') {
        features.unshift(this._makeLineFeature(this._makeLineCoords(firstLng, latRange, firstLat, lastLat)));
      }

      if (typeof lastLng === 'number') {
        features.unshift(this._makeLineFeature(this._makeLineCoords(lastLng, latRange, firstLat, lastLat)));
      }

      for (var lng = lngRange[0]; lng <= lngRange[1]; lng += _currLngInterval) {
        features.unshift(this._makeLineFeature(this._makeLineCoords(lng, latRange, firstLat, lastLat)));
      }

      if (typeof firstLat === 'number') {
        features.unshift(this._makeLineFeature(this._makeLineCoords(firstLat, lngRange, firstLng, lastLng, 'lat')));
      }

      if (typeof lastLat === 'number') {
        features.unshift(this._makeLineFeature(this._makeLineCoords(lastLat, lngRange, firstLng, lastLng, 'lat')));
      }

      for (var lat = latRange[0]; lat <= latRange[1]; lat += _currLatInterval) {
        features.unshift(this._makeLineFeature(this._makeLineCoords(lat, lngRange, firstLng, lastLng, 'lat')));
      }

      return features;
    }
  }, {
    key: "_getRange",
    value: function _getRange() {
      var extent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.options.extent && _toConsumableArray(this.options.extent);

      if (!extent || extent.length === 0) {
        extent = this._getDefaultExtent();
      }

      extent = extent.map(function (item) {
        return Number(item.toFixed(6));
      });
      var realExtent = {};

      if (extent[1] % this._currLatInterval !== 0) {
        realExtent.firstLat = extent[1];
        var intNumber = Math.ceil(extent[1] / this._currLatInterval);
        extent[1] = intNumber * this._currLatInterval;
      }

      if (extent[3] % this._currLatInterval !== 0) {
        realExtent.lastLat = extent[3];

        var _intNumber = Math.floor(extent[3] / this._currLatInterval);

        extent[3] = _intNumber * this._currLatInterval;
      }

      if (extent[0] % this._currLngInterval !== 0) {
        realExtent.firstLng = extent[0];

        var _intNumber2 = Math.ceil(extent[0] / this._currLngInterval);

        extent[0] = _intNumber2 * this._currLngInterval;
      }

      if (extent[2] % this._currLngInterval !== 0) {
        realExtent.lastLng = extent[2];

        var _intNumber3 = Math.floor(extent[2] / this._currLngInterval);

        extent[2] = _intNumber3 * this._currLngInterval;
      }

      return _objectSpread({
        latRange: [extent[1], extent[3]],
        lngRange: [extent[0], extent[2]],
        extent: extent
      }, realExtent);
    }
  }, {
    key: "_makeLineCoords",
    value: function _makeLineCoords(fixedDegree) {
      var range = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [-90, 90];
      var first = arguments.length > 2 ? arguments[2] : undefined;
      var last = arguments.length > 3 ? arguments[3] : undefined;
      var type = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 'lng';
      fixedDegree = type === 'lng' ? this._lngFix(fixedDegree) : fixedDegree;
      first = typeof first === 'number' ? first : range[0];
      last = typeof last === 'number' ? last : range[1];
      var interval = Math.abs(first - last);
      var coords = [];

      for (var changedDegree = first; changedDegree <= last; changedDegree += interval) {
        if (type === 'lng') {
          coords.push([fixedDegree, changedDegree]);
        } else {
          coords.push([changedDegree, fixedDegree]);
        }
      }

      return coords;
    }
  }, {
    key: "_makeLineFeature",
    value: function _makeLineFeature(coordinates) {
      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'LineString';
      return {
        type: 'Feature',
        geometry: {
          type: type,
          coordinates: coordinates
        }
      };
    }
  }, {
    key: "_lngFix",
    value: function _lngFix(lng) {
      if (lng >= 180) {
        return 180;
      }

      if (lng <= -180) {
        return -180;
      }

      return lng;
    }
  }, {
    key: "_transformStrokeStyle",
    value: function _transformStrokeStyle() {
      var strokeStyle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.options.strokeStyle;

      if (!strokeStyle || typeof strokeStyle === 'string') {
        return {
          paint: {
            'line-color': strokeStyle || 'rgba(0,0,0,0.2)'
          }
        };
      }

      var layout = {
        visibility: this.visible ? 'visible' : 'none',
        'line-join': strokeStyle.lineJoin || 'round',
        'line-cap': strokeStyle.lineCap || 'round'
      };
      var paint = {
        'line-color': strokeStyle.lineColor || 'rgba(0,0,0,0.2)',
        'line-width': strokeStyle.lineWidth || 1,
        'line-offset': strokeStyle.lineDashOffset || 0,
        'line-translate-anchor': 'viewport'
      };

      if (strokeStyle.lineWidth) {
        if (typeof strokeStyle.lineWidth === 'function') {
          paint['line-width'] = strokeStyle.lineWidth(this.map);
        } else {
          paint['line-width'] = strokeStyle.lineWidth;
        }
      }

      if (strokeStyle.lindDasharray) {
        if (typeof strokeStyle.lindDasharray === 'function') {
          paint['line-dasharray'] = strokeStyle.lindDasharray(this.map);
        } else {
          paint['line-dasharray'] = strokeStyle.lindDasharray;
        }
      }

      return {
        layout: layout,
        paint: paint
      };
    }
  }, {
    key: "_setLabelStyle",
    value: function _setLabelStyle(ctx, labelStyle) {
      if (labelStyle.textColor) {
        ctx.fillStyle = labelStyle.textColor;
      }

      if (labelStyle.textSize) {
        ctx.font = labelStyle.textSize + ' ' + (labelStyle.textFont || ['Calibri', 'sans-serif']).join(',');
      }

      if (labelStyle.textHaloColor) {
        ctx.strokeStyle = labelStyle.textHaloColor;
        ctx.lineWidth = labelStyle.textHaloWidth || 1;
      }

      if (labelStyle.textAnchor) {
        ctx.textBaseline = this._getTxetBaseline(labelStyle.textAnchor);
        ctx.textAligin = this._getTxetAlign(labelStyle.textAligin);
      }

      return ctx;
    }
  }, {
    key: "_getTxetBaseline",
    value: function _getTxetBaseline(textAnchor) {
      if (!textAnchor) {
        return 'bottom';
      }

      var textStyle = textAnchor.split('-');

      if (textStyle.includes('bottom')) {
        return 'bottom';
      }

      if (textStyle.includes('top')) {
        return 'top';
      }

      if (textStyle.includes('center')) {
        return 'middle';
      }
    }
  }, {
    key: "_getTxetAlign",
    value: function _getTxetAlign(textAnchor) {
      if (!textAnchor) {
        return 'center';
      }

      var textStyle = textAnchor.split('-');

      if (textStyle.includes('left')) {
        return 'left';
      }

      if (textStyle.includes('right')) {
        return 'right';
      }

      if (textStyle.includes('center')) {
        return 'center';
      }
    }
  }]);

  return GraticuleLayer;
}();
(external_mapboxgl_default()).supermap.GraticuleLayer = GraticuleLayer;
// CONCATENATED MODULE: ./src/mapboxgl/overlay/mapv/MapvDataSet.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



var MapvDataSet = {
  /**
   * è¿åmapvç¹æ°æ®é
   */
  getPoint: function getPoint(center) {
    if (center && center instanceof Array) {
      return new external_function_try_return_mapv_catch_e_return_namespaceObject.DataSet([{
        geometry: {
          type: 'Point',
          coordinates: center
        }
      }]);
    }
  },

  /**
   * è¿åmapvå¤ç¹æ°æ®é
   */
  getPoints: function getPoints(points) {
    if (points && points instanceof Array) {
      var mPoints = [];
      points.map(function (data) {
        mPoints.push({
          geometry: {
            type: 'Point',
            coordinates: data.geometry.coordinates
          }
        });
        return data;
      });
      return new external_function_try_return_mapv_catch_e_return_namespaceObject.DataSet(mPoints);
    }
  },

  /**
   * è¿åmapvå¼§å½¢çº¿æ°æ®é
   */
  getCurveLines: function getCurveLines(startPoint, LinePoints) {
    if (startPoint && startPoint instanceof Array && LinePoints && LinePoints instanceof Array) {
      var lineData = [];
      LinePoints.map(function (data) {
        var coords = data.geometry && data.geometry.coordinates;
        var toCenter = {
          lng: coords[0],
          lat: coords[1]
        };
        var fromCenter = {
          lng: startPoint[0],
          lat: startPoint[1]
        };
        var cv = external_function_try_return_mapv_catch_e_return_namespaceObject.utilCurve.getPoints([fromCenter, toCenter]);
        lineData.push({
          geometry: {
            type: 'LineString',
            coordinates: cv
          }
        });
        return data;
      });
      return new external_function_try_return_mapv_catch_e_return_namespaceObject.DataSet(lineData);
    }
  },

  /**
   * è¿åmapvå¼§å½¢å¨æç¹æ°æ®é
   */
  getCurveDynamicPoints: function getCurveDynamicPoints(center, endPoints) {
    if (center && center instanceof Array && endPoints && endPoints instanceof Array) {
      var timeData = [];
      endPoints.map(function (data) {
        var coords = data.geometry && data.geometry.coordinates;
        var toCenter = {
          lng: coords[0],
          lat: coords[1]
        };
        var fromCenter = {
          lng: center[0],
          lat: center[1]
        };
        var cv = external_function_try_return_mapv_catch_e_return_namespaceObject.utilCurve.getPoints([fromCenter, toCenter]);

        for (var j = 0; j < cv.length; j++) {
          timeData.push({
            geometry: {
              type: 'Point',
              coordinates: cv[j]
            },
            time: j
          });
        }

        return data;
      });
      return new external_function_try_return_mapv_catch_e_return_namespaceObject.DataSet(timeData);
    }
  }
};
(external_mapboxgl_default()).supermap.MapvDataSet = MapvDataSet;
// CONCATENATED MODULE: ./src/mapboxgl/overlay/mapv/MapExtend.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

(external_mapboxgl_default()).supermap = (external_mapboxgl_default()).supermap || {};
(external_mapboxgl_default()).supermap.map = (external_mapboxgl_default()).supermap.map || {};
var getDefaultVectorTileStyle = function getDefaultVectorTileStyle(urlTemplate, options) {
  options = options || {};
  var defaultOptions = {};
  defaultOptions.version = options.version || 8;
  defaultOptions.layers = options.layers || [];
  defaultOptions.light = options.light || {
    "anchor": "viewport",
    "color": "#fcf6ef",
    "intensity": 0.5,
    "position": [1.15, 201, 20]
  };
  var style = {
    "version": defaultOptions.version,
    "sources": {
      "vector-tiles": {
        "type": "vector",
        "tiles": [urlTemplate]
      }
    },
    "layers": defaultOptions.layers,
    "light": defaultOptions.light
  };

  if (options.sprite != null) {
    style.sprite = options.sprite;
  }

  if (options.glyphs != null) {
    style.glyphs = options.glyphs;
  }

  return style;
};
var setBackground = function setBackground(map, color) {
  if (color && map) {
    map.addLayer({
      "id": "background",
      "type": "background",
      "paint": {
        "background-color": color
      }
    }, "background");
  }
};
var setPaintProperty = function setPaintProperty(map, layerIds, type, paint, source, sourceLayers) {
  if (layerIds && map) {
    if (Object.prototype.toString.call(layerIds) !== '[object Array]') {
      layerIds = [layerIds];
    }

    for (var i = 0; i < layerIds.length; i++) {
      var sourceLayer = sourceLayers ? sourceLayers[i] : null;
      var layer = getLayer(layerIds[i], type, source, sourceLayer, paint);
      map.addLayer(layer, layerIds[i]);
      map.moveLayer(layerIds[i]);
    }
  }
};

function getLayer(id, type, source, sourceLayer, paint) {
  var sourceType = source || "vector-tiles";
  var sLayer = sourceLayer || id;
  var layer = {
    "id": id,
    "type": type,
    "source": sourceType,
    "source-layer": sLayer,
    "paint": paint
  };
  return layer;
}

(external_mapboxgl_default()).supermap.map.getDefaultVectorTileStyle = getDefaultVectorTileStyle;
(external_mapboxgl_default()).supermap.map.setBackground = setBackground;
(external_mapboxgl_default()).supermap.map.setPaintProperty = setPaintProperty;
// CONCATENATED MODULE: ./src/mapboxgl/overlay/mapv/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



// CONCATENATED MODULE: ./src/mapboxgl/overlay/theme/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




// CONCATENATED MODULE: ./src/mapboxgl/overlay/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/

















// CONCATENATED MODULE: ./src/mapboxgl/services/ServiceBase.js
function ServiceBase_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { ServiceBase_typeof = function _typeof(obj) { return typeof obj; }; } else { ServiceBase_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return ServiceBase_typeof(obj); }

function ServiceBase_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ServiceBase_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) ServiceBase_setPrototypeOf(subClass, superClass); }

function ServiceBase_setPrototypeOf(o, p) { ServiceBase_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return ServiceBase_setPrototypeOf(o, p); }

function ServiceBase_createSuper(Derived) { var hasNativeReflectConstruct = ServiceBase_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = ServiceBase_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = ServiceBase_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return ServiceBase_possibleConstructorReturn(this, result); }; }

function ServiceBase_possibleConstructorReturn(self, call) { if (call && (ServiceBase_typeof(call) === "object" || typeof call === "function")) { return call; } return ServiceBase_assertThisInitialized(self); }

function ServiceBase_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function ServiceBase_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ServiceBase_getPrototypeOf(o) { ServiceBase_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return ServiceBase_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/


/**
 * @class mapboxgl.supermap.ServiceBase
 * @category  iServer
 * @description mapboxgl.supermap æå¡åºç±»ã
 * @param {string} url - ä¸å®¢æ·ç«¯äº¤äºçæå¡å°åã 
 * @param {Object} options - å¯éåæ°ã
 * @param {string} [options.proxy] - æå¡ä»£çå°åã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡æ¥æº ISERVER|IPORTAL|ONLINEã
 * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦ cookieã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @fires mapboxgl.supermap.ServiceBase#initialized
 */

var ServiceBase = /*#__PURE__*/function (_mapboxgl$Evented) {
  ServiceBase_inherits(ServiceBase, _mapboxgl$Evented);

  var _super = ServiceBase_createSuper(ServiceBase);

  function ServiceBase(url, options) {
    var _this;

    ServiceBase_classCallCheck(this, ServiceBase);

    _this = _super.call(this);
    _this.options = options || {};
    _this.url = url;
    /**
     * @event mapboxgl.supermap.ServiceBase#initialized
     * @description æé å½æ°æé æåä¹åè§¦åã
     * @property {Object} this - this å¯¹è±¡ã
     */

    _this.fire('initialized', ServiceBase_assertThisInitialized(_this));

    return _this;
  }

  return ServiceBase;
}((external_mapboxgl_default()).Evented);
(external_mapboxgl_default()).supermap.ServiceBase = ServiceBase;
// CONCATENATED MODULE: ./src/mapboxgl/services/AddressMatchService.js
function services_AddressMatchService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { services_AddressMatchService_typeof = function _typeof(obj) { return typeof obj; }; } else { services_AddressMatchService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return services_AddressMatchService_typeof(obj); }

function services_AddressMatchService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function services_AddressMatchService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function services_AddressMatchService_createClass(Constructor, protoProps, staticProps) { if (protoProps) services_AddressMatchService_defineProperties(Constructor.prototype, protoProps); if (staticProps) services_AddressMatchService_defineProperties(Constructor, staticProps); return Constructor; }

function services_AddressMatchService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) services_AddressMatchService_setPrototypeOf(subClass, superClass); }

function services_AddressMatchService_setPrototypeOf(o, p) { services_AddressMatchService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return services_AddressMatchService_setPrototypeOf(o, p); }

function services_AddressMatchService_createSuper(Derived) { var hasNativeReflectConstruct = services_AddressMatchService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = services_AddressMatchService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = services_AddressMatchService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return services_AddressMatchService_possibleConstructorReturn(this, result); }; }

function services_AddressMatchService_possibleConstructorReturn(self, call) { if (call && (services_AddressMatchService_typeof(call) === "object" || typeof call === "function")) { return call; } return services_AddressMatchService_assertThisInitialized(self); }

function services_AddressMatchService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function services_AddressMatchService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function services_AddressMatchService_getPrototypeOf(o) { services_AddressMatchService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return services_AddressMatchService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class mapboxgl.supermap.AddressMatchService
 * @category  iServer AddressMatch
 * @classdesc å°åå¹éæå¡ã
 * @example
 * new mapboxgl.supermap.AddressMatchService(url,options)
 * .code(function(result){
 *     //doSomething
 * })
 * @param {string} url - ä¸å®¢æ·ç«¯äº¤äºçæå¡å°åã
 * @param {Object} options - äº¤äºæ¶æéå¯éåæ°ã
 * @param {string} [options.proxy] - æå¡ä»£çå°åã
 * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦ cookieã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡æ¥æº ISERVER|IPORTAL|ONLINEã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @extends {mapboxgl.supermap.ServiceBase}
 */

var AddressMatchService = /*#__PURE__*/function (_ServiceBase) {
  services_AddressMatchService_inherits(AddressMatchService, _ServiceBase);

  var _super = services_AddressMatchService_createSuper(AddressMatchService);

  function AddressMatchService(url, options) {
    services_AddressMatchService_classCallCheck(this, AddressMatchService);

    return _super.call(this, url, options);
  }
  /**
   * @function mapboxgl.supermap.AddressMatchService.prototype.code
   * @description è·åæ­£åå°åå¹éç»æã
   * @param {Object} params - æ­£åå¹éåæ°ã
   * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã
   */


  services_AddressMatchService_createClass(AddressMatchService, [{
    key: "code",
    value: function code(params, callback) {
      var me = this;
      var addressMatchService = new AddressMatchService_AddressMatchService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      addressMatchService.code(Util.urlPathAppend(me.url, 'geocoding'), params);
    }
    /**
     * @function mapboxgl.supermap.AddressMatchService.prototype.decode
     * @description è·åååå°åå¹éç»æã
     * @param {Object} params -ååå¹éåæ°ã
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã
     */

  }, {
    key: "decode",
    value: function decode(params, callback) {
      var me = this;
      var addressMatchService = new AddressMatchService_AddressMatchService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      addressMatchService.decode(Util.urlPathAppend(me.url, 'geodecoding'), params);
    }
  }]);

  return AddressMatchService;
}(ServiceBase);
(external_mapboxgl_default()).supermap.AddressMatchService = AddressMatchService;
// CONCATENATED MODULE: ./src/mapboxgl/services/ChartService.js
function ChartService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { ChartService_typeof = function _typeof(obj) { return typeof obj; }; } else { ChartService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return ChartService_typeof(obj); }

function ChartService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ChartService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ChartService_createClass(Constructor, protoProps, staticProps) { if (protoProps) ChartService_defineProperties(Constructor.prototype, protoProps); if (staticProps) ChartService_defineProperties(Constructor, staticProps); return Constructor; }

function ChartService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) ChartService_setPrototypeOf(subClass, superClass); }

function ChartService_setPrototypeOf(o, p) { ChartService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return ChartService_setPrototypeOf(o, p); }

function ChartService_createSuper(Derived) { var hasNativeReflectConstruct = ChartService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = ChartService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = ChartService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return ChartService_possibleConstructorReturn(this, result); }; }

function ChartService_possibleConstructorReturn(self, call) { if (call && (ChartService_typeof(call) === "object" || typeof call === "function")) { return call; } return ChartService_assertThisInitialized(self); }

function ChartService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function ChartService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ChartService_getPrototypeOf(o) { ChartService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return ChartService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class mapboxgl.supermap.ChartService
 * @category  iServer Map Chart
 * @classdesc æµ·å¾æå¡ã
 * @extends {mapboxgl.supermap.ServiceBase}
 * @example
 * new mapboxgl.supermap.ChartService(url)
 *  .queryChart(param,function(result){
 *     //doSomething
 * })
 * @param {string} url - ä¸å®¢æ·ç«¯äº¤äºçæµ·å¾æå¡å°åã
 * @param {Object} options - äº¤äºæ¶æéå¯éåæ°ã
 * @param {string} [options.proxy] - æå¡ä»£çå°åã
 * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦ cookieã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡æ¥æº ISERVER|IPORTAL|ONLINEã
 */

var ChartService = /*#__PURE__*/function (_ServiceBase) {
  ChartService_inherits(ChartService, _ServiceBase);

  var _super = ChartService_createSuper(ChartService);

  function ChartService(url, options) {
    ChartService_classCallCheck(this, ChartService);

    return _super.call(this, url, options);
  }
  /**
   * @function mapboxgl.supermap.ChartService.prototype.queryChart
   * @description æ¥è¯¢æµ·å¾æå¡ã
   * @param {SuperMap.ChartQueryParameters} params - æµ·å¾æ¥è¯¢æéåæ°ç±»ã
   * @param {RequestCallback} callback åè°å½æ°ã
   * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»ææ ¼å¼ç±»åã
   */


  ChartService_createClass(ChartService, [{
    key: "queryChart",
    value: function queryChart(params, callback, resultFormat) {
      var me = this,
          param = me._processParams(params),
          format = me._processFormat(resultFormat);

      var chartQueryService = new ChartQueryService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: format
      });
      chartQueryService.processAsync(param);
    }
    /**
     * @function mapboxgl.supermap.ChartService.prototype.getChartFeatureInfo
     * @description è·åæµ·å¾ç©æ ä¿¡æ¯æå¡ã
     * @param {RequestCallback} callback åè°å½æ°ã
     */

  }, {
    key: "getChartFeatureInfo",
    value: function getChartFeatureInfo(callback) {
      var me = this,
          url = me.url.concat();
      url = Util.urlPathAppend(url, 'chartFeatureInfoSpecs');
      var chartFeatureInfoSpecsService = new ChartFeatureInfoSpecsService(url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      chartFeatureInfoSpecsService.processAsync();
    }
  }, {
    key: "_processParams",
    value: function _processParams(params) {
      if (!params) {
        return {};
      }

      params.returnContent = params.returnContent == null ? true : params.returnContent;

      if (params.filter) {
        params.chartQueryFilterParameters = core_Util_Util.isArray(params.filter) ? params.filter : [params.filter];
      }

      if (params.bounds) {
        if (params.bounds instanceof Array) {
          params.bounds = new Bounds(params.bounds[0], params.bounds[1], params.bounds[2], params.bounds[3]);
        }

        if (params.bounds instanceof (external_mapboxgl_default()).LngLatBounds) {
          params.bounds = new Bounds(params.bounds.getSouthWest().lng, params.bounds.getSouthWest().lat, params.bounds.getNorthEast().lng, params.bounds.getNorthEast().lat);
        }
      }
    }
  }, {
    key: "_processFormat",
    value: function _processFormat(resultFormat) {
      return resultFormat ? resultFormat : DataFormat.GEOJSON;
    }
  }]);

  return ChartService;
}(ServiceBase);
(external_mapboxgl_default()).supermap.ChartService = ChartService;
// CONCATENATED MODULE: ./src/mapboxgl/services/DataFlowService.js
function services_DataFlowService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { services_DataFlowService_typeof = function _typeof(obj) { return typeof obj; }; } else { services_DataFlowService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return services_DataFlowService_typeof(obj); }

function services_DataFlowService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function services_DataFlowService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function services_DataFlowService_createClass(Constructor, protoProps, staticProps) { if (protoProps) services_DataFlowService_defineProperties(Constructor.prototype, protoProps); if (staticProps) services_DataFlowService_defineProperties(Constructor, staticProps); return Constructor; }

function services_DataFlowService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) services_DataFlowService_setPrototypeOf(subClass, superClass); }

function services_DataFlowService_setPrototypeOf(o, p) { services_DataFlowService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return services_DataFlowService_setPrototypeOf(o, p); }

function services_DataFlowService_createSuper(Derived) { var hasNativeReflectConstruct = services_DataFlowService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = services_DataFlowService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = services_DataFlowService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return services_DataFlowService_possibleConstructorReturn(this, result); }; }

function services_DataFlowService_possibleConstructorReturn(self, call) { if (call && (services_DataFlowService_typeof(call) === "object" || typeof call === "function")) { return call; } return services_DataFlowService_assertThisInitialized(self); }

function services_DataFlowService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function services_DataFlowService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function services_DataFlowService_getPrototypeOf(o) { services_DataFlowService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return services_DataFlowService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class mapboxgl.supermap.DataFlowService
 * @category  iServer DataFlow
 * @classdesc æ°æ®æµæå¡ã
 * @extends {mapboxgl.supermap.ServiceBase}
 * @example
 * new mapboxgl.supermap.DataFlowService(url)
 *  .queryChart(param,function(result){
 *     //doSomething
 * })
 * @param {string} url - ä¸å®¢æ·ç«¯äº¤äºçå®æ¶æ°æ®æå¡å°åã
 * @param {Object} options - å è½½å®æ¶æ°æ®å¯éåæ°ã
 * @param {GeoJSONObject} [options.geometry] - æå®å ä½èå´ï¼è¯¥èå´åçè¦ç´ æè½è¢«è®¢éã
 * @param {Object} [options.excludeField] - æé¤å­æ®µã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @fires mapboxgl.supermap.DataFlowService#broadcastSocketConnected
 * @fires mapboxgl.supermap.DataFlowService#broadcastSocketError
 * @fires mapboxgl.supermap.DataFlowService#broadcastFailed
 * @fires mapboxgl.supermap.DataFlowService#broadcastSucceeded
 * @fires mapboxgl.supermap.DataFlowService#subscribeSocketError
 * @fires mapboxgl.supermap.DataFlowService#messageSucceeded
 * @fires mapboxgl.supermap.DataFlowService#setFilterParamSucceeded
 */

var DataFlowService = /*#__PURE__*/function (_ServiceBase) {
  services_DataFlowService_inherits(DataFlowService, _ServiceBase);

  var _super = services_DataFlowService_createSuper(DataFlowService);

  function DataFlowService(url, options) {
    var _this;

    services_DataFlowService_classCallCheck(this, DataFlowService);

    options = options || {};

    if (options.projection) {
      options.prjCoordSys = options.projection;
    }

    _this = _super.call(this, url, options);
    _this.dataFlow = new DataFlowService_DataFlowService(url, options);
    /**
     * @event mapboxgl.supermap.DataFlowService#broadcastSocketConnected
     * @description broadcast Socket è¿æ¥æåã
     */

    /**
     * @event mapboxgl.supermap.DataFlowService#broadcastSocketError
     * @description broadcast Socket è¿æ¥å¤±è´¥ã
     */

    /**
     * @event mapboxgl.supermap.DataFlowService#broadcastFailed
     * @description å¹¿æ­å¤±è´¥ã
     */

    /**
     * @event mapboxgl.supermap.DataFlowService#broadcastSucceeded
     * @description å¹¿æ­æåã
     */

    /**
     * @event mapboxgl.supermap.DataFlowService#subscribeSocketConnected
     * @description è®¢éæ°æ®è¿æ¥æåã
     */

    /**
     * @event mapboxgl.supermap.DataFlowService#subscribeSocketError
     * @description è®¢éæ°æ®è¿æ¥å¤±è´¥ã
     */

    /**
     * @event mapboxgl.supermap.DataFlowService#messageSucceeded
     * @description è·åä¿¡æ¯æåã
     */

    /**
     * @event mapboxgl.supermap.DataFlowService#setFilterParamSucceeded
     * @description è®¾ç½®è¿æ»¤åæ°æåã
     */

    _this.dataFlow.events.on({
      "broadcastSocketConnected": _this._defaultEvent,
      "broadcastSocketError": _this._defaultEvent,
      "broadcastFailed": _this._defaultEvent,
      "broadcastSucceeded": _this._defaultEvent,
      "subscribeSocketConnected": _this._defaultEvent,
      "subscribeSocketError": _this._defaultEvent,
      "messageSucceeded": _this._defaultEvent,
      "setFilterParamSucceeded": _this._defaultEvent,
      scope: services_DataFlowService_assertThisInitialized(_this)
    });

    var me = services_DataFlowService_assertThisInitialized(_this);

    me.on('subscribeSocketConnected', function (e) {
      /**
       * @event mapboxgl.supermap.DataFlowService#subscribesucceeded
       * @description æ°æ®æµæå¡è®¢éæååè§¦åã
       * @property {Object} e - äºä»¶å¯¹è±¡ã
       */
      me.fire('subscribesucceeded', e);
    });
    return _this;
  }
  /**
   * @function mapboxgl.supermap.DataFlowService.prototype.initBroadcast
   * @description åå§åå¹¿æ­ã
   * @returns {mapboxgl.supermap.DataFlowService}
   */


  services_DataFlowService_createClass(DataFlowService, [{
    key: "initBroadcast",
    value: function initBroadcast() {
      this.dataFlow.initBroadcast();
      return this;
    }
    /**
     * @function mapboxgl.supermap.DataFlowService.prototype.broadcast
     * @description å è½½å¹¿æ­æ°æ®ã
     * @param {JSON} obj - JSON æ ¼å¼çè¦ç´ æ°æ®ã
     */

  }, {
    key: "broadcast",
    value: function broadcast(obj) {
      this.dataFlow.broadcast(obj);
    }
    /**
     * @function mapboxgl.supermap.DataFlowService.prototype.initSubscribe
     * @description åå§åè®¢éæ°æ®ã
     */

  }, {
    key: "initSubscribe",
    value: function initSubscribe() {
      this.dataFlow.initSubscribe();
      return this;
    }
    /**
     * @function mapboxgl.supermap.DataFlowService.prototype.setExcludeField
     * @description è®¾ç½®æé¤å­æ®µã
     * @param {Object} excludeField - æé¤å­æ®µã
     */

  }, {
    key: "setExcludeField",
    value: function setExcludeField(excludeField) {
      this.dataFlow.setExcludeField(excludeField);
      this.options.excludeField = excludeField;
      return this;
    }
    /**
     * @function mapboxgl.supermap.DataFlowService.prototype.setGeometry
     * @description è®¾ç½®æ·»å çå ä½è¦ç´ æ°æ®ã
     * @param {GeoJSONObject} geometry - æå®å ä½èå´ï¼è¯¥èå´åçè¦ç´ æè½è¢«è®¢éã
     */

  }, {
    key: "setGeometry",
    value: function setGeometry(geometry) {
      this.dataFlow.setGeometry(geometry);
      this.options.geometry = geometry;
      return this;
    }
    /**
     * @function mapboxgl.supermap.DataFlowService.prototype.unSubscribe
     * @description ç»æè®¢éæ°æ®ã
     */

  }, {
    key: "unSubscribe",
    value: function unSubscribe() {
      this.dataFlow.unSubscribe();
    }
    /**
     * @function mapboxgl.supermap.DataFlowService.prototype.unBroadcast
     * @description ç»æå è½½å¹¿æ­ã
     */

  }, {
    key: "unBroadcast",
    value: function unBroadcast() {
      this.dataFlow.unBroadcast();
    }
  }, {
    key: "_defaultEvent",
    value: function _defaultEvent(e) {
      this.fire(e.eventType || e.type, e);
    }
  }]);

  return DataFlowService;
}(ServiceBase);
(external_mapboxgl_default()).supermap.DataFlowService = DataFlowService;
// CONCATENATED MODULE: ./src/mapboxgl/services/FeatureService.js
function FeatureService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FeatureService_typeof = function _typeof(obj) { return typeof obj; }; } else { FeatureService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FeatureService_typeof(obj); }

function FeatureService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FeatureService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FeatureService_createClass(Constructor, protoProps, staticProps) { if (protoProps) FeatureService_defineProperties(Constructor.prototype, protoProps); if (staticProps) FeatureService_defineProperties(Constructor, staticProps); return Constructor; }

function FeatureService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FeatureService_setPrototypeOf(subClass, superClass); }

function FeatureService_setPrototypeOf(o, p) { FeatureService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FeatureService_setPrototypeOf(o, p); }

function FeatureService_createSuper(Derived) { var hasNativeReflectConstruct = FeatureService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FeatureService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FeatureService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FeatureService_possibleConstructorReturn(this, result); }; }

function FeatureService_possibleConstructorReturn(self, call) { if (call && (FeatureService_typeof(call) === "object" || typeof call === "function")) { return call; } return FeatureService_assertThisInitialized(self); }

function FeatureService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FeatureService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FeatureService_getPrototypeOf(o) { FeatureService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FeatureService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class mapboxgl.supermap.FeatureService
 * @category  iServer Data Feature
 * @classdesc è¦ç´ æ°æ®éç±»ãæä¾ï¼ID æ¥è¯¢ï¼èå´æ¥è¯¢ï¼SQL æ¥è¯¢ï¼å ä½æ¥è¯¢ï¼bounds æ¥è¯¢ï¼ç¼å²åºæ¥è¯¢ï¼å°ç©ç¼è¾ã
 * @example
 * new mapboxgl.supermap.FeatureService(url)
 *  .getFeaturesByIDs(param,function(result){
 *     //doSomething
 * })
 * @extends {mapboxgl.supermap.ServiceBase}
 * @param {string} url - è¦ç´ æ°æ®éæå¡å°åã
 * @param {Object} options - åå»ºè¦ç´ æ°æ®éæå¡ç±»å¯éåæ°ã
 * @param {string} [options.proxy] - æå¡ä»£çå°åã
 * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦ cookieã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡æ¥æº ISERVER|IPORTAL|ONLINEã
 */

var FeatureService = /*#__PURE__*/function (_ServiceBase) {
  FeatureService_inherits(FeatureService, _ServiceBase);

  var _super = FeatureService_createSuper(FeatureService);

  function FeatureService(url, options) {
    FeatureService_classCallCheck(this, FeatureService);

    return _super.call(this, url, options);
  }
  /**
   * @function mapboxgl.supermap.FeatureService.prototype.getFeaturesByIDs
   * @description æ°æ®é ID æ¥è¯¢æå¡ã
   * @param {SuperMap.GetFeaturesByIDsParameters} params - æ¥è¯¢æéåæ°ç±»ã
   * @param {RequestCallback} callback - åè°å½æ°ã
   * @param {SuperMap.DataFormat} [resultFormat=DataFormat.GEOJSON] - è¿åçæ°æ®æ ¼å¼ã
   */


  FeatureService_createClass(FeatureService, [{
    key: "getFeaturesByIDs",
    value: function getFeaturesByIDs(params, callback, resultFormat) {
      var me = this;
      var getFeaturesByIDsService = new GetFeaturesByIDsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      getFeaturesByIDsService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.FeatureService.prototype.getFeaturesByBounds
     * @description æ°æ®é Bounds æ¥è¯¢æå¡ã
     * @param {SuperMap.GetFeaturesByBoundsParameters} params - æ¥è¯¢æéåæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat} [resultFormat=DataFormat.GEOJSON] - è¿åçæ°æ®æ ¼å¼ã
     */

  }, {
    key: "getFeaturesByBounds",
    value: function getFeaturesByBounds(params, callback, resultFormat) {
      var me = this;
      var getFeaturesByBoundsService = new GetFeaturesByBoundsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      getFeaturesByBoundsService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.FeatureService.prototype.getFeaturesByBuffer
     * @description æ°æ®é Buffer æ¥è¯¢æå¡ã
     * @param {SuperMap.GetFeaturesByBufferParameters} params - æ¥è¯¢æéåæ°ç±»ã
     * @param {RequestCallback} callback åè°å½æ°ã
     * @param {SuperMap.DataFormat} [resultFormat=DataFormat.GEOJSON] - è¿åçæ°æ®æ ¼å¼ã
     */

  }, {
    key: "getFeaturesByBuffer",
    value: function getFeaturesByBuffer(params, callback, resultFormat) {
      var me = this;
      var getFeatureService = new GetFeaturesByBufferService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      getFeatureService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.FeatureService.prototype.getFeaturesBySQL
     * @description æ°æ®é SQL æ¥è¯¢æå¡ã
     * @param {SuperMap.GetFeaturesBySQLParameters} params - æ¥è¯¢æéåæ°ç±»ã
     * @param {RequestCallback} callback åè°å½æ°ã
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçæ°æ®æ ¼å¼ã
     */

  }, {
    key: "getFeaturesBySQL",
    value: function getFeaturesBySQL(params, callback, resultFormat) {
      var me = this;
      var getFeatureBySQLService = new GetFeaturesBySQLService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      getFeatureBySQLService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.FeatureService.prototype.getFeaturesByGeometry
     * @description æ°æ®éå ä½æ¥è¯¢æå¡ç±»ã
     * @param {SuperMap.GetFeaturesByGeometryParameters} params - æ¥è¯¢æéåæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat} [resultFormat=DataFormat.GEOJSON] - è¿åçæ°æ®æ ¼å¼ã
     */

  }, {
    key: "getFeaturesByGeometry",
    value: function getFeaturesByGeometry(params, callback, resultFormat) {
      var me = this;
      var getFeaturesByGeometryService = new GetFeaturesByGeometryService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      getFeaturesByGeometryService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.FeatureService.prototype.editFeatures
     * @description å°ç©ç¼è¾æå¡ã
     * @param {SuperMap.EditFeaturesParameters} params - æ¥è¯¢æéåæ°ç±»ã
     * @param {RequestCallback} callback åè°å½æ°ã
     */

  }, {
    key: "editFeatures",
    value: function editFeatures(params, callback) {
      if (!params || !params.dataSourceName || !params.dataSetName) {
        return;
      }

      var me = this,
          url = me.url,
          dataSourceName = params.dataSourceName,
          dataSetName = params.dataSetName;
      url = Util.urlPathAppend(url, "datasources/" + dataSourceName + "/datasets/" + dataSetName);
      var editFeatureService = new EditFeaturesService(url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          processCompleted: callback,
          processFailed: callback
        }
      });
      editFeatureService.processAsync(me._processParams(params));
    }
    /**
     * @private
     * @description åæ°ç±»åè½¬æ¢ã
     * @param {Object} params - æå¡åæ° ã
     * @returns {Object} params - è½¬æ¢åçå¯¹æ¥ SuperMap æå¡çåæ°ã
     */

  }, {
    key: "_processParams",
    value: function _processParams(params) {
      if (!params) {
        return {};
      }

      var me = this;
      params.returnContent = params.returnContent == null ? true : params.returnContent;
      params.fromIndex = params.fromIndex ? params.fromIndex : 0;
      params.toIndex = params.toIndex === 0 ? 0 : params.toIndex ? params.toIndex : -1;

      if (params.bounds) {
        params.bounds = core_Util_Util.toSuperMapBounds(params.bounds);
      }

      if (params.editType) {
        params.editType = params.editType.toLowerCase();
      } //mapboxgl geojsonè¦ç´ å¯¹è±¡è½¬ SuperMap Geometry å¯¹è±¡


      if (params.geometry) {
        if (params.geometry instanceof (external_mapboxgl_default()).LngLatBounds) {
          params.geometry = core_Util_Util.toSuperMapPolygon(params.geometry);
        } else {
          params.geometry = core_Util_Util.toSuperMapGeometry(params.geometry);
        }
      } //editFeatureæå¡åæ°è½¬æ¢,ä¼ å¥åç¬å¾å¯¹è±¡æå¯¹è±¡æ°ç»


      if (params.features) {
        var features = [];

        if (core_Util_Util.isArray(params.features)) {
          params.features.map(function (feature) {
            features.push(me._createServerFeature(feature));
            return features;
          });
        } else {
          features.push(me._createServerFeature(params.features));
        }

        params.features = features;
      }

      return params;
    } //geoFeatureä¸¥æ ¼æç§ mapboxgl geojsonçç»æ

  }, {
    key: "_createServerFeature",
    value: function _createServerFeature(geoFeature) {
      var feature = {},
          fieldNames = [],
          fieldValues = [];
      var properties = geoFeature.properties;

      for (var key in properties) {
        fieldNames.push(key);
        fieldValues.push(properties[key]);
      }

      feature.fieldNames = fieldNames;
      feature.fieldValues = fieldValues;

      if (geoFeature.id) {
        feature.id = geoFeature.id;
      }

      feature.geometry = core_Util_Util.toSuperMapGeometry(geoFeature);
      return feature;
    }
  }, {
    key: "_processFormat",
    value: function _processFormat(resultFormat) {
      return resultFormat ? resultFormat : DataFormat.GEOJSON;
    }
  }]);

  return FeatureService;
}(ServiceBase);
(external_mapboxgl_default()).supermap.FeatureService = FeatureService;
// CONCATENATED MODULE: ./src/mapboxgl/services/FieldService.js
function FieldService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { FieldService_typeof = function _typeof(obj) { return typeof obj; }; } else { FieldService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return FieldService_typeof(obj); }

function FieldService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function FieldService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function FieldService_createClass(Constructor, protoProps, staticProps) { if (protoProps) FieldService_defineProperties(Constructor.prototype, protoProps); if (staticProps) FieldService_defineProperties(Constructor, staticProps); return Constructor; }

function FieldService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) FieldService_setPrototypeOf(subClass, superClass); }

function FieldService_setPrototypeOf(o, p) { FieldService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return FieldService_setPrototypeOf(o, p); }

function FieldService_createSuper(Derived) { var hasNativeReflectConstruct = FieldService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = FieldService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = FieldService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return FieldService_possibleConstructorReturn(this, result); }; }

function FieldService_possibleConstructorReturn(self, call) { if (call && (FieldService_typeof(call) === "object" || typeof call === "function")) { return call; } return FieldService_assertThisInitialized(self); }

function FieldService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function FieldService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function FieldService_getPrototypeOf(o) { FieldService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return FieldService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class mapboxgl.supermap.FieldService
 * @category  iServer Data Field
 * @classdesc å­æ®µæå¡ç±»ã
 * @example
 * new mapboxgl.supermap.FieldService(url).getFields(function(result){
 *     //doSomething
 * });
 * @param {string} url - ä¸å®¢æ·ç«¯äº¤äºçæå¡å°åã
 * @param {Object} options - åæ°ã
 * @param {string} [options.proxy] - æå¡ä»£çå°åã
 * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦ cookieã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡æ¥æº ISERVER|IPORTAL|ONLINEã
 * @extends {mapboxgl.supermap.ServiceBase}
 */

var FieldService = /*#__PURE__*/function (_ServiceBase) {
  FieldService_inherits(FieldService, _ServiceBase);

  var _super = FieldService_createSuper(FieldService);

  function FieldService(url, options) {
    FieldService_classCallCheck(this, FieldService);

    return _super.call(this, url, options);
  }
  /**
   * @function mapboxgl.supermap.FieldService.prototype.getFields
   * @description å­æ®µæ¥è¯¢æå¡ã
   * @param {SuperMap.FieldParameters} params - å­æ®µä¿¡æ¯æ¥è¯¢åæ°ç±»ã
   * @param {RequestCallback} callback åè°å½æ°ã
   */


  FieldService_createClass(FieldService, [{
    key: "getFields",
    value: function getFields(params, callback) {
      var me = this;
      var getFieldsService = new GetFieldsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        datasource: params.datasource,
        dataset: params.dataset
      });
      getFieldsService.processAsync();
    }
    /**
     * @function mapboxgl.supermap.FieldService.prototype.getFieldStatisticsInfo
     * @description å­æ®µç»è®¡æå¡ã
     * @param {SuperMap.FieldStatisticsParameters} params - æ¥è¯¢æéåæ°ç±»ã
     * @param {RequestCallback} callback åè°å½æ°ã
     */

  }, {
    key: "getFieldStatisticsInfo",
    value: function getFieldStatisticsInfo(params, callback) {
      var me = this,
          fieldName = params.fieldName,
          modes = params.statisticMode;

      if (modes && !core_Util_Util.isArray(modes)) {
        modes = [modes];
      }

      me.currentStatisticResult = {
        fieldName: fieldName
      };
      me._statisticsCallback = callback; //éå¯¹æ¯ç§ç»è®¡æ¹å¼åå«è¿è¡è¯·æ±

      modes.forEach(function (mode) {
        me.currentStatisticResult[mode] = null;

        me._fieldStatisticRequest(params.datasource, params.dataset, fieldName, mode);
      });
    }
  }, {
    key: "_fieldStatisticRequest",
    value: function _fieldStatisticRequest(datasource, dataset, fieldName, statisticMode) {
      var me = this;
      var statisticService = new FieldStatisticService(me.url, {
        eventListeners: {
          scope: me,
          processCompleted: me._processCompleted,
          processFailed: me._statisticsCallback
        },
        datasource: datasource,
        dataset: dataset,
        field: fieldName,
        statisticMode: statisticMode,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers
      });
      statisticService.processAsync();
    }
  }, {
    key: "_processCompleted",
    value: function _processCompleted(fieldStatisticResult) {
      var me = this;
      var getAll = true,
          result = fieldStatisticResult.result;

      if (this.currentStatisticResult) {
        if (null == me.currentStatisticResult[result.mode]) {
          this.currentStatisticResult[result.mode] = result.result;
        }
      }

      for (var mode in me.currentStatisticResult) {
        if (null == me.currentStatisticResult[mode]) {
          getAll = false;
          break;
        }
      }

      if (getAll) {
        me._statisticsCallback({
          result: me.currentStatisticResult
        });
      }
    }
  }]);

  return FieldService;
}(ServiceBase);
(external_mapboxgl_default()).supermap.FieldService = FieldService;
// CONCATENATED MODULE: ./src/mapboxgl/services/GridCellInfosService.js
function GridCellInfosService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { GridCellInfosService_typeof = function _typeof(obj) { return typeof obj; }; } else { GridCellInfosService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return GridCellInfosService_typeof(obj); }

function GridCellInfosService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function GridCellInfosService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function GridCellInfosService_createClass(Constructor, protoProps, staticProps) { if (protoProps) GridCellInfosService_defineProperties(Constructor.prototype, protoProps); if (staticProps) GridCellInfosService_defineProperties(Constructor, staticProps); return Constructor; }

function GridCellInfosService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) GridCellInfosService_setPrototypeOf(subClass, superClass); }

function GridCellInfosService_setPrototypeOf(o, p) { GridCellInfosService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return GridCellInfosService_setPrototypeOf(o, p); }

function GridCellInfosService_createSuper(Derived) { var hasNativeReflectConstruct = GridCellInfosService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = GridCellInfosService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = GridCellInfosService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return GridCellInfosService_possibleConstructorReturn(this, result); }; }

function GridCellInfosService_possibleConstructorReturn(self, call) { if (call && (GridCellInfosService_typeof(call) === "object" || typeof call === "function")) { return call; } return GridCellInfosService_assertThisInitialized(self); }

function GridCellInfosService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function GridCellInfosService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function GridCellInfosService_getPrototypeOf(o) { GridCellInfosService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return GridCellInfosService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class mapboxgl.supermap.GridCellInfosService
 * @category  iServer Data Grid
 * @classdesc æ°æ®æ æ ¼æ¥è¯¢æå¡ã
 * @extends {mapboxgl.supermap.ServiceBase}
 * @example
 * new mapboxgl.supermap.GridCellInfosService(url)
 *  .getGridCellInfos(param,function(result){
 *     //doSomething
 * })
 * @param {string} url - ä¸å®¢æ·ç«¯äº¤äºçå°å¾æå¡å°åãè¯·æ±å°å¾æå¡ï¼URL åºä¸ºï¼</br>
 *                       http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{å°å¾æå¡å}/rest/maps/{å°å¾å}/tempLayersSet/{tempLayerID}/Rivers@World@@World"ã
 * @param {Object} options - æå¡æéå¯éåæ°ã
 * @param {string} [options.proxy] - æå¡ä»£çå°åã
 * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦ cookieã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡æ¥æº ISERVER|IPORTAL|ONLINEã
 */

var GridCellInfosService = /*#__PURE__*/function (_ServiceBase) {
  GridCellInfosService_inherits(GridCellInfosService, _ServiceBase);

  var _super = GridCellInfosService_createSuper(GridCellInfosService);

  function GridCellInfosService(url, options) {
    GridCellInfosService_classCallCheck(this, GridCellInfosService);

    return _super.call(this, url, options);
  }
  /**
   * @function mapboxgl.supermap.GridCellInfosService.prototype.getGridCellInfos
   * @param {SuperMap.GetGridCellInfosParameters} params - æ¥è¯¢æéåæ°ç±»ã
   * @param {RequestCallback} callback åè°å½æ°ã
   */


  GridCellInfosService_createClass(GridCellInfosService, [{
    key: "getGridCellInfos",
    value: function getGridCellInfos(params, callback) {
      if (!params) {
        return null;
      }

      var me = this;
      var gridCellQueryService = new GetGridCellInfosService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      gridCellQueryService.processAsync(params);
    }
  }]);

  return GridCellInfosService;
}(ServiceBase);
(external_mapboxgl_default()).supermap.GridCellInfosService = GridCellInfosService;
// CONCATENATED MODULE: ./src/mapboxgl/services/GeoprocessingService.js
function services_GeoprocessingService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { services_GeoprocessingService_typeof = function _typeof(obj) { return typeof obj; }; } else { services_GeoprocessingService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return services_GeoprocessingService_typeof(obj); }

function services_GeoprocessingService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function services_GeoprocessingService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function services_GeoprocessingService_createClass(Constructor, protoProps, staticProps) { if (protoProps) services_GeoprocessingService_defineProperties(Constructor.prototype, protoProps); if (staticProps) services_GeoprocessingService_defineProperties(Constructor, staticProps); return Constructor; }

function services_GeoprocessingService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) services_GeoprocessingService_setPrototypeOf(subClass, superClass); }

function services_GeoprocessingService_setPrototypeOf(o, p) { services_GeoprocessingService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return services_GeoprocessingService_setPrototypeOf(o, p); }

function services_GeoprocessingService_createSuper(Derived) { var hasNativeReflectConstruct = services_GeoprocessingService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = services_GeoprocessingService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = services_GeoprocessingService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return services_GeoprocessingService_possibleConstructorReturn(this, result); }; }

function services_GeoprocessingService_possibleConstructorReturn(self, call) { if (call && (services_GeoprocessingService_typeof(call) === "object" || typeof call === "function")) { return call; } return services_GeoprocessingService_assertThisInitialized(self); }

function services_GeoprocessingService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function services_GeoprocessingService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function services_GeoprocessingService_getPrototypeOf(o) { services_GeoprocessingService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return services_GeoprocessingService_getPrototypeOf(o); }





/**
 * @class mapboxgl.supermap.GeoprocessingService
 * @classdesc å°çå¤çæå¡æ¥å£ç±»ã
 * @version 10.1.0
 * @category  iServer GeoprocessingService
 * @extends  {mapboxgl.supermap.ServiceBase}
 * @example
 *  //ä¸ºäºå®å¨è®¿é®åä¿æ¤çå°çå¤çæå¡ï¼å¿é¡»éè¿ä¼ éiserverä»¤ç(token)ï¼æè½æ­£ç¡®è®¿é®ç¸å³èµæºã
 * SuperMap.SecurityManager.registerToken(serviceUrl, token);
 *  var geoprocessingService = new L.supermap.geoprocessingService("http://localhost:8090/iserver/services/geoprocessing/restjsr/gp/v2")
        geoprocessingService.submitJob(identifier,params, environments, function(serverResult) {
            console.log(serverResult.result);
            var jobID = serverResult.result.jobID;
            var options = {
                interval: 5000,
                statusCallback: function(state) {
                console.log("Job Status: ", state);
                }
            };
            geoprocessingService.waitForJobCompletion(jobID, identifier, options, function(serverResult) {
                console.log(serverResult);
            })
        })
 * @param {string} url - æå¡å°åã
 * @param {Object} options - åæ°ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡æ¥æº iServer|iPortal|onlineã
 */

var GeoprocessingService = /*#__PURE__*/function (_ServiceBase) {
  services_GeoprocessingService_inherits(GeoprocessingService, _ServiceBase);

  var _super = services_GeoprocessingService_createSuper(GeoprocessingService);

  function GeoprocessingService(url, options) {
    var _this;

    services_GeoprocessingService_classCallCheck(this, GeoprocessingService);

    _this = _super.call(this, url, options);
    _this.headers = {};
    _this.crossOrigin = true;
    _this.withCredentials = true;
    _this.proxy = true;
    return _this;
  }
  /**
   * @function mapboxgl.supermap.GeoprocessingService.prototype.getTools
   * @description è·åå°çå¤çå·¥å·åè¡¨ã
   * @param {RequestCallback} callback è¯·æ±ç»æçåè°å½æ°ã
   */


  services_GeoprocessingService_createClass(GeoprocessingService, [{
    key: "getTools",
    value: function getTools(callback) {
      var geoprocessingJobsService = new GeoprocessingService_GeoprocessingService(this.url, {
        proxy: this.options.proxy,
        withCredentials: this.options.withCredentials,
        crossOrigin: this.options.crossOrigin,
        headers: this.options.headers,
        serverType: this.options.serverType,
        eventListeners: {
          scope: this,
          processCompleted: callback,
          processFailed: callback
        }
      });
      geoprocessingJobsService.getTools();
    }
    /**
     * @function mapboxgl.supermap.GeoprocessingService.prototype.getTool
     * @description è·åå°çå¤çå·¥å·çIDãåç§°ãæè¿°ãè¾å¥åæ°ãç¯å¢åæ°åè¾åºç»æç­ç¸å³åæ°ã
     * @param {string} identifier - å°çå¤çå·¥å·IDã
     * @param {RequestCallback} callback è¯·æ±ç»æçåè°å½æ°ã
     */

  }, {
    key: "getTool",
    value: function getTool(identifier, callback) {
      var geoprocessingJobsService = new GeoprocessingService_GeoprocessingService(this.url, {
        proxy: this.options.proxy,
        withCredentials: this.options.withCredentials,
        crossOrigin: this.options.crossOrigin,
        headers: this.options.headers,
        serverType: this.options.serverType,
        eventListeners: {
          scope: this,
          processCompleted: callback,
          processFailed: callback
        }
      });
      geoprocessingJobsService.getTool(identifier);
    }
    /**
     * @function mapboxgl.supermap.GeoprocessingService.prototype.execute
     * @description åæ­¥æ§è¡å°çå¤çå·¥å·ã
     * @param {string} identifier - å°çå¤çå·¥å·IDã
     * @param {Object} parameter - å°çå¤çå·¥å·çè¾å¥åæ°ã
     * @param {Object} environment - å°çå¤çå·¥å·çç¯å¢åæ°ã
     * @param {RequestCallback} callback åè°å½æ°ã
     */

  }, {
    key: "execute",
    value: function execute(identifier, parameter, environment, callback) {
      var geoprocessingJobsService = new GeoprocessingService_GeoprocessingService(this.url, {
        proxy: this.options.proxy,
        withCredentials: this.options.withCredentials,
        crossOrigin: this.options.crossOrigin,
        headers: this.options.headers,
        serverType: this.options.serverType,
        eventListeners: {
          scope: this,
          processCompleted: callback,
          processFailed: callback
        }
      });
      geoprocessingJobsService.execute(identifier, parameter, environment);
    }
    /**
     * @function mapboxgl.supermap.GeoprocessingService.prototype.submitJob
     * @description å¼æ­¥æ§è¡å°çå¤çå·¥å·ã
     * @param {string} identifier - å°çå¤çå·¥å·IDã
     * @param {Object} parameter - å°çå¤çå·¥å·çè¾å¥åæ°ã
     * @param {Object} environment - å°çå¤çå·¥å·çç¯å¢åæ°ã
     * @param {RequestCallback} callback åè°å½æ°ã
     */

  }, {
    key: "submitJob",
    value: function submitJob(identifier, parameter, environment, callback) {
      var geoprocessingJobsService = new GeoprocessingService_GeoprocessingService(this.url, {
        proxy: this.options.proxy,
        withCredentials: this.options.withCredentials,
        crossOrigin: this.options.crossOrigin,
        headers: this.options.headers,
        serverType: this.options.serverType,
        eventListeners: {
          scope: this,
          processCompleted: callback,
          processFailed: callback
        }
      });
      geoprocessingJobsService.submitJob(identifier, parameter, environment);
    }
    /**
     * @function mapboxgl.supermap.GeoprocessingService.prototype.waitForJobCompletion
     * @description è·åå°çå¤çå¼æ­¥æ§è¡ç¶æä¿¡æ¯ã
     * @param {string} jobId - å°çå¤çä»»å¡IDã
     * @param {string} identifier - å°çå¤çå·¥å·IDã
     * @param {Object} options - ç¶æä¿¡æ¯åæ°ã
     * @param {number} options.interval - å®æ¶å¨æ¶é´é´éã
     * @param {Callback} options.statusCallback - ä»»å¡ç¶æçåè°å½æ°ã
     * @param {RequestCallback} callback åè°å½æ°ã
     */

  }, {
    key: "waitForJobCompletion",
    value: function waitForJobCompletion(jobId, identifier, options, callback) {
      var geoprocessingJobsService = new GeoprocessingService_GeoprocessingService(this.url, {
        proxy: this.options.proxy,
        withCredentials: this.options.withCredentials,
        crossOrigin: this.options.crossOrigin,
        headers: this.options.headers,
        serverType: this.options.serverType,
        eventListeners: {
          scope: this,
          processCompleted: callback,
          processFailed: callback
        }
      });
      geoprocessingJobsService.waitForJobCompletion(jobId, identifier, options);
    }
    /**
     * @function mapboxgl.supermap.GeoprocessingService.prototype.getJobInfo
     * @description è·åå°çå¤çä»»å¡çæ§è¡ä¿¡æ¯ã
     * @param {string} identifier - å°çå¤çå·¥å·IDã
     * @param {string} jobId - å°çå¤çä»»å¡IDã
     * @param {RequestCallback} callback åè°å½æ°ã
     */

  }, {
    key: "getJobInfo",
    value: function getJobInfo(identifier, jobId, callback) {
      var geoprocessingJobsService = new GeoprocessingService_GeoprocessingService(this.url, {
        proxy: this.options.proxy,
        withCredentials: this.options.withCredentials,
        crossOrigin: this.options.crossOrigin,
        headers: this.options.headers,
        serverType: this.options.serverType,
        eventListeners: {
          scope: this,
          processCompleted: callback,
          processFailed: callback
        }
      });
      geoprocessingJobsService.getJobInfo(identifier, jobId);
    }
    /**
     * @function mapboxgl.supermap.GeoprocessingService.prototype.cancelJob
     * @description åæ¶å°çå¤çä»»å¡çå¼æ­¥æ§è¡ã
     * @param {string} identifier - å°çå¤çå·¥å·IDã
     * @param {string} jobId - å°çå¤çä»»å¡IDã
     * @param {RequestCallback} callback åè°å½æ°ã
     */

  }, {
    key: "cancelJob",
    value: function cancelJob(identifier, jobId, callback) {
      var geoprocessingJobsService = new GeoprocessingService_GeoprocessingService(this.url, {
        proxy: this.options.proxy,
        withCredentials: this.options.withCredentials,
        crossOrigin: this.options.crossOrigin,
        headers: this.options.headers,
        serverType: this.options.serverType,
        eventListeners: {
          scope: this,
          processCompleted: callback,
          processFailed: callback
        }
      });
      geoprocessingJobsService.cancelJob(identifier, jobId);
    }
    /**
     * @function mapboxgl.supermap.GeoprocessingService.prototype.getJobs
     * @description è·åå°çå¤çæå¡ä»»å¡åè¡¨ã
     * @param {string} identifier - å°çå¤çå·¥å·IDã(å¯éï¼ä¼ åä»£è¡¨identifierç®å­çä»»å¡åè¡¨ï¼ä¸ä¼ åä»£è¡¨ææä»»å¡çåè¡¨)
     * @param {RequestCallback} callback åè°å½æ°ã
     */

  }, {
    key: "getJobs",
    value: function getJobs(identifier, callback) {
      var geoprocessingJobsService = new GeoprocessingService_GeoprocessingService(this.url, {
        proxy: this.options.proxy,
        withCredentials: this.options.withCredentials,
        crossOrigin: this.options.crossOrigin,
        headers: this.options.headers,
        serverType: this.options.serverType,
        eventListeners: {
          scope: this,
          processCompleted: callback,
          processFailed: callback
        }
      });
      geoprocessingJobsService.getJobs(identifier);
    }
    /**
     * @function mapboxgl.supermap.GeoprocessingService.prototype.getResults
     * @description å°çå¤çå·¥å·å¼æ­¥æ§è¡çç»æ,æ¯æç»æè¿æ»¤ã
     * @param {string} identifier - å°çå¤çå·¥å·IDã
     * @param {string} jobId - å°çå¤çä»»å¡IDã
     * @param {string} filter - è¾åºå¼æ­¥ç»æçidã(å¯éï¼ä¼ å¥filteråæ°æ¶å¯¹è¯¥å°çå¤çå·¥å·æ§è¡çç»æè¿è¡è¿æ»¤è·åï¼ä¸å¡«åæ¶æ¾ç¤ºææçæ§è¡ç»æ)
     * @param {RequestCallback} callback è¯·æ±ç»æçåè°å½æ°ã
     */

  }, {
    key: "getResults",
    value: function getResults(identifier, jobId, filter, callback) {
      var geoprocessingJobsService = new GeoprocessingService_GeoprocessingService(this.url, {
        proxy: this.options.proxy,
        withCredentials: this.options.withCredentials,
        crossOrigin: this.options.crossOrigin,
        headers: this.options.headers,
        serverType: this.options.serverType,
        eventListeners: {
          scope: this,
          processCompleted: callback,
          processFailed: callback
        }
      });
      geoprocessingJobsService.getResults(identifier, jobId, filter);
    }
  }]);

  return GeoprocessingService;
}(ServiceBase);
(external_mapboxgl_default()).supermap.GeoprocessingService = GeoprocessingService;
// CONCATENATED MODULE: ./src/mapboxgl/services/LayerInfoService.js
function LayerInfoService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { LayerInfoService_typeof = function _typeof(obj) { return typeof obj; }; } else { LayerInfoService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return LayerInfoService_typeof(obj); }

function LayerInfoService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function LayerInfoService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function LayerInfoService_createClass(Constructor, protoProps, staticProps) { if (protoProps) LayerInfoService_defineProperties(Constructor.prototype, protoProps); if (staticProps) LayerInfoService_defineProperties(Constructor, staticProps); return Constructor; }

function LayerInfoService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) LayerInfoService_setPrototypeOf(subClass, superClass); }

function LayerInfoService_setPrototypeOf(o, p) { LayerInfoService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return LayerInfoService_setPrototypeOf(o, p); }

function LayerInfoService_createSuper(Derived) { var hasNativeReflectConstruct = LayerInfoService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = LayerInfoService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = LayerInfoService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return LayerInfoService_possibleConstructorReturn(this, result); }; }

function LayerInfoService_possibleConstructorReturn(self, call) { if (call && (LayerInfoService_typeof(call) === "object" || typeof call === "function")) { return call; } return LayerInfoService_assertThisInitialized(self); }

function LayerInfoService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function LayerInfoService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function LayerInfoService_getPrototypeOf(o) { LayerInfoService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return LayerInfoService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class mapboxgl.supermap.LayerInfoService
 * @category  iServer Map Layer
 * @classdesc å¾å±ä¿¡æ¯æå¡ç±» ã
 * @extends {mapboxgl.supermap.ServiceBase}
 * @example
 * new mapboxgl.supermap.LayerInfoService(url).getLayersInfo(function(result){
 *     //doSomething
 * })
 * @param {string} url - ä¸å®¢æ·ç«¯äº¤äºçå°å¾æå¡å°åãè¯·æ±å°å¾æå¡,URL åºä¸ºï¼</br>
 *                       http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{å°å¾æå¡å}/rest/maps/{å°å¾å}/tempLayersSet/{tempLayerID}/Rivers@World@@World"ã
 * @param {Object} options - æå¡æéå¯éåæ°ã
 * @param {string} [options.proxy] - æå¡ä»£çå°åã
 * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦ cookieã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡æ¥æº ISERVER|IPORTAL|ONLINEã
 */

var LayerInfoService = /*#__PURE__*/function (_ServiceBase) {
  LayerInfoService_inherits(LayerInfoService, _ServiceBase);

  var _super = LayerInfoService_createSuper(LayerInfoService);

  function LayerInfoService(url, options) {
    LayerInfoService_classCallCheck(this, LayerInfoService);

    return _super.call(this, url, options);
  }
  /**
   * @function mapboxgl.supermap.LayerInfoService.prototype.getLayersInfo
   * @description è·åå¾å±ä¿¡æ¯æå¡ã
   * @param {RequestCallback} callback - åè°å½æ°ã
   * @returns {mapboxgl.supermap.LayerInfoService} è¿åå¾å±ä¿¡æ¯ç±»ã
   */


  LayerInfoService_createClass(LayerInfoService, [{
    key: "getLayersInfo",
    value: function getLayersInfo(callback) {
      var me = this;
      var getLayersInfoService = new GetLayersInfoService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          processCompleted: callback,
          processFailed: callback
        }
      });
      getLayersInfoService.processAsync();
    }
    /**
     * @function mapboxgl.supermap.LayerInfoService.prototype.setLayerInfo
     * @description è®¾ç½®å¾å±ä¿¡æ¯æå¡ãå¯ä»¥å®ç°ä¸´æ¶å¾å±ä¸­å­å¾å±çä¿®æ¹ã
     * @param {SuperMap.SetLayerInfoParameters} params - è®¾ç½®å¾å±ä¿¡æ¯åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     */

  }, {
    key: "setLayerInfo",
    value: function setLayerInfo(params, callback) {
      if (!params) {
        return;
      }

      var me = this,
          resourceID = params.resourceID,
          tempLayerName = params.tempLayerName,
          layerInfoParams = params.layerInfo;

      if (!resourceID || !tempLayerName) {
        return;
      }

      var url = Util.urlPathAppend(me.url, "tempLayersSet/" + resourceID + "/" + tempLayerName);
      var setLayerInfoService = new SetLayerInfoService(url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          processCompleted: callback,
          processFailed: callback
        }
      });
      setLayerInfoService.processAsync(layerInfoParams);
    }
    /**
     * @function mapboxgl.supermap.LayerInfoService.prototype.setLayersInfo
     * @description è®¾ç½®å¾å±ä¿¡æ¯æå¡ãå¯ä»¥å®ç°åå»ºæ°çä¸´æ¶å¾å±åå¯¹ç°æä¸´æ¶å¾å±çä¿®æ¹ã
     * @param {SuperMap.SetLayersInfoParameters} params - è®¾ç½®å¾å±ä¿¡æ¯åæ°ç±»,åæ¬ä¸´æ¶å¾å±ã 
     * @param {RequestCallback} callback - åè°å½æ°ã
     */

  }, {
    key: "setLayersInfo",
    value: function setLayersInfo(params, callback) {
      if (!params) {
        return;
      }

      var me = this,
          resourceID = params.resourceID,
          isTempLayers = params.isTempLayers ? params.isTempLayers : false,
          layersInfo = params.layersInfo;

      if (isTempLayers && !resourceID || !layersInfo) {
        return;
      }

      var setLayersInfoService = new SetLayersInfoService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          processCompleted: callback,
          processFailed: callback
        },
        resourceID: resourceID,
        isTempLayers: isTempLayers
      });
      setLayersInfoService.processAsync(layersInfo);
    }
    /**
     * @function mapboxgl.supermap.LayerInfoService.prototype.setLayerStatus
     * @description å­å¾å±æ¾ç¤ºæ§å¶æå¡ãè´è´£å°å­å¾å±æ¾ç¤ºæ§å¶åæ°ä¼ éå°æå¡ç«¯ï¼å¹¶è·åæå¡ç«¯è¿åçå¾å±æ¾ç¤ºç¶æã
     * @param {SuperMap.SetLayerStatusParameters} params - å­å¾å±æ¾ç¤ºæ§å¶åæ°ç±»ã
     * @param {RequestCallback} callback åè°å½æ°ã
     */

  }, {
    key: "setLayerStatus",
    value: function setLayerStatus(params, callback) {
      if (!params) {
        return;
      }

      var me = this;
      var setLayerStatusService = new SetLayerStatusService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          processCompleted: callback,
          processFailed: callback
        }
      });
      setLayerStatusService.processAsync(params);
    }
  }]);

  return LayerInfoService;
}(ServiceBase);
(external_mapboxgl_default()).supermap.LayerInfoService = LayerInfoService;
// CONCATENATED MODULE: ./src/mapboxgl/services/MapService.js
function services_MapService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { services_MapService_typeof = function _typeof(obj) { return typeof obj; }; } else { services_MapService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return services_MapService_typeof(obj); }

function services_MapService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function services_MapService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function services_MapService_createClass(Constructor, protoProps, staticProps) { if (protoProps) services_MapService_defineProperties(Constructor.prototype, protoProps); if (staticProps) services_MapService_defineProperties(Constructor, staticProps); return Constructor; }

function services_MapService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) services_MapService_setPrototypeOf(subClass, superClass); }

function services_MapService_setPrototypeOf(o, p) { services_MapService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return services_MapService_setPrototypeOf(o, p); }

function services_MapService_createSuper(Derived) { var hasNativeReflectConstruct = services_MapService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = services_MapService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = services_MapService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return services_MapService_possibleConstructorReturn(this, result); }; }

function services_MapService_possibleConstructorReturn(self, call) { if (call && (services_MapService_typeof(call) === "object" || typeof call === "function")) { return call; } return services_MapService_assertThisInitialized(self); }

function services_MapService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function services_MapService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function services_MapService_getPrototypeOf(o) { services_MapService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return services_MapService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class mapboxgl.supermap.MapService
 * @category  iServer Map
 * @classdesc å°å¾ä¿¡æ¯æå¡ç±»ã
 * @extends {mapboxgl.supermap.ServiceBase}
 * @param {string} url - å°å¾æå¡å°åã
 * @param {Object} options - å°å¾æå¡ä¿¡æ¯ç¸å³åæ°ã 
 * @param {string} [options.proxy] - æå¡ä»£çå°åã
 * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦ cookieã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡æ¥æº ISERVER|IPORTAL|ONLINEã
 * @example
 * new mapboxgl.supermap.MapService(url)
 *  .getMapInfo(function(result){
 *     //doSomething
 * })
 */

var MapService = /*#__PURE__*/function (_ServiceBase) {
  services_MapService_inherits(MapService, _ServiceBase);

  var _super = services_MapService_createSuper(MapService);

  function MapService(url, options) {
    services_MapService_classCallCheck(this, MapService);

    return _super.call(this, url, options);
  }
  /**
   * @function mapboxgl.supermap.MapService.prototype.getMapInfo
   * @description å°å¾ä¿¡æ¯æ¥è¯¢æå¡ã
   * @param {RequestCallback} callback åè°å½æ°ã
   * @returns {mapboxgl.supermap.MapService} è·åæå¡ä¿¡æ¯ã
   */


  services_MapService_createClass(MapService, [{
    key: "getMapInfo",
    value: function getMapInfo(callback) {
      var me = this;
      var getMapStatusService = new MapService_MapService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        projection: me.options.projection
      });
      getMapStatusService.processAsync();
    }
    /**
     * @function mapboxgl.supermap.MapService.prototype.getTilesets
     * @description åçåè¡¨ä¿¡æ¯æ¥è¯¢æå¡ã
     * @param {RequestCallback} callback - åè°å½æ° ã
     * @returns {mapboxgl.supermap.MapService} è·åæå¡ä¿¡æ¯ã
     */

  }, {
    key: "getTilesets",
    value: function getTilesets(callback) {
      var me = this;
      var tilesetsService = new TilesetsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      tilesetsService.processAsync();
    }
  }]);

  return MapService;
}(ServiceBase);
(external_mapboxgl_default()).supermap.MapService = MapService;
// CONCATENATED MODULE: ./src/mapboxgl/services/MeasureService.js
function services_MeasureService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { services_MeasureService_typeof = function _typeof(obj) { return typeof obj; }; } else { services_MeasureService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return services_MeasureService_typeof(obj); }

function services_MeasureService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function services_MeasureService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function services_MeasureService_createClass(Constructor, protoProps, staticProps) { if (protoProps) services_MeasureService_defineProperties(Constructor.prototype, protoProps); if (staticProps) services_MeasureService_defineProperties(Constructor, staticProps); return Constructor; }

function services_MeasureService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) services_MeasureService_setPrototypeOf(subClass, superClass); }

function services_MeasureService_setPrototypeOf(o, p) { services_MeasureService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return services_MeasureService_setPrototypeOf(o, p); }

function services_MeasureService_createSuper(Derived) { var hasNativeReflectConstruct = services_MeasureService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = services_MeasureService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = services_MeasureService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return services_MeasureService_possibleConstructorReturn(this, result); }; }

function services_MeasureService_possibleConstructorReturn(self, call) { if (call && (services_MeasureService_typeof(call) === "object" || typeof call === "function")) { return call; } return services_MeasureService_assertThisInitialized(self); }

function services_MeasureService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function services_MeasureService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function services_MeasureService_getPrototypeOf(o) { services_MeasureService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return services_MeasureService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class mapboxgl.supermap.MeasureService
 * @category  iServer Map Measure
 * @classdesc æµéæå¡ã
 * @extends {mapboxgl.supermap.ServiceBase}
 * @param {string} url - æå¡è®¿é®çå°åãå¦ï¼http://localhost:8090/iserver/services/map-world/rest/maps/World+Mapã
 * @param {Object} options - äº¤äºæå¡æ¶æéå¯éåæ°ã 
 * @param {string} [options.proxy] - æå¡ä»£çå°åã
 * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦ cookieã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡æ¥æº ISERVER|IPORTAL|ONLINEã
 * @param {SuperMap.MeasureMode} [options.measureMode=SuperMap.MeasureMode.DISTANCE] - éç®æ¨¡å¼ï¼åæ¬è·ç¦»éç®æ¨¡å¼åé¢ç§¯éç®æ¨¡å¼ã
 */

var MeasureService = /*#__PURE__*/function (_ServiceBase) {
  services_MeasureService_inherits(MeasureService, _ServiceBase);

  var _super = services_MeasureService_createSuper(MeasureService);

  function MeasureService(url, options) {
    services_MeasureService_classCallCheck(this, MeasureService);

    return _super.call(this, url, options);
  }
  /**
   * @function mapboxgl.supermap.MeasureService.prototype.measureDistance
   * @description è·ç¦»æµéã
   * @param {SuperMap.MeasureParameters} params - æµéç¸å³åæ°ç±»ã
   * @param {RequestCallback} callback åè°å½æ°ã
   */


  services_MeasureService_createClass(MeasureService, [{
    key: "measureDistance",
    value: function measureDistance(params, callback) {
      this.measure(params, 'DISTANCE', callback);
    }
    /**
     * @function mapboxgl.supermap.MeasureService.prototype.measureArea
     * @description é¢ç§¯æµéã
     * @param {SuperMap.MeasureParameters} params - æµéç¸å³åæ°ç±»ã
     * @param {RequestCallback} callback åè°å½æ°ã
     */

  }, {
    key: "measureArea",
    value: function measureArea(params, callback) {
      this.measure(params, 'AREA', callback);
    }
    /**
     * @function mapboxgl.supermap.MeasureService.prototype.measure
     * @description æµéã
     * @param {SuperMap.MeasureParameters} params - æµéç¸å³åæ°ç±»ã
     * @param {string} type - æµéç±»åã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @returns {mapboxgl.supermap.MeasureService} æµéæå¡ã
     */

  }, {
    key: "measure",
    value: function measure(params, type, callback) {
      var me = this;
      var measureService = new MeasureService_MeasureService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        measureMode: type,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      measureService.processAsync(me._processParam(params));
    }
  }, {
    key: "_processParam",
    value: function _processParam(params) {
      if (params && !(params.geometry instanceof Geometry)) {
        params.geometry = core_Util_Util.toSuperMapGeometry(params.geometry);
      }

      return params;
    }
  }]);

  return MeasureService;
}(ServiceBase);
(external_mapboxgl_default()).supermap.MeasureService = MeasureService;
// CONCATENATED MODULE: ./src/mapboxgl/services/NetworkAnalystService.js
function NetworkAnalystService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { NetworkAnalystService_typeof = function _typeof(obj) { return typeof obj; }; } else { NetworkAnalystService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return NetworkAnalystService_typeof(obj); }

function NetworkAnalystService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function NetworkAnalystService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function NetworkAnalystService_createClass(Constructor, protoProps, staticProps) { if (protoProps) NetworkAnalystService_defineProperties(Constructor.prototype, protoProps); if (staticProps) NetworkAnalystService_defineProperties(Constructor, staticProps); return Constructor; }

function NetworkAnalystService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) NetworkAnalystService_setPrototypeOf(subClass, superClass); }

function NetworkAnalystService_setPrototypeOf(o, p) { NetworkAnalystService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return NetworkAnalystService_setPrototypeOf(o, p); }

function NetworkAnalystService_createSuper(Derived) { var hasNativeReflectConstruct = NetworkAnalystService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = NetworkAnalystService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = NetworkAnalystService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return NetworkAnalystService_possibleConstructorReturn(this, result); }; }

function NetworkAnalystService_possibleConstructorReturn(self, call) { if (call && (NetworkAnalystService_typeof(call) === "object" || typeof call === "function")) { return call; } return NetworkAnalystService_assertThisInitialized(self); }

function NetworkAnalystService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function NetworkAnalystService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function NetworkAnalystService_getPrototypeOf(o) { NetworkAnalystService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return NetworkAnalystService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class mapboxgl.supermap.NetworkAnalystService
 * @category  iServer NetworkAnalyst
 * @classdesc ç½ç»åææå¡ç±»ã
 * @extends {mapboxgl.supermap.ServiceBase}
 * @example
 * new mapboxgl.supermap.NetworkAnalystService(url)
 *  .findPath(params,function(result){
 *     //doSomething
 * })
 * @param {string} url - ç½ç»åææå¡å°åãè¯·æ±ç½ç»åææå¡ï¼URLåºä¸ºï¼</br>
 *                       http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{ç½ç»åææå¡å}/rest/networkanalyst/{ç½ç»æ°æ®é@æ°æ®æº}ã
 *                       ä¾å¦: "http://localhost:8090/iserver/services/test/rest/networkanalyst/WaterNet@FacilityNet"ã
 * @param {Object} options - æå¡æéå¯éåæ°ã 
 * @param {string} [options.proxy] - æå¡ä»£çå°åã
 * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦ cookieã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡æ¥æº ISERVER|IPORTAL|ONLINEã
 */

var NetworkAnalystService = /*#__PURE__*/function (_ServiceBase) {
  NetworkAnalystService_inherits(NetworkAnalystService, _ServiceBase);

  var _super = NetworkAnalystService_createSuper(NetworkAnalystService);

  function NetworkAnalystService(url, options) {
    NetworkAnalystService_classCallCheck(this, NetworkAnalystService);

    return _super.call(this, url, options);
  }
  /**
   * @function mapboxgl.supermap.NetworkAnalystService.prototype.burstPipelineAnalyst
   * @description çç®¡åææå¡:å³å°ç»å®å¼§æ®µæèç¹ä½ä¸ºçç®¡ç¹æ¥è¿è¡åæï¼è¿åå³é®ç»ç¹ ID æ°ç»ï¼æ®éç»ç¹ ID æ°ç»åå¶ä¸ä¸æ¸¸å¼§æ®µ ID æ°ç»ã
   * @param {SuperMap.BurstPipelineAnalystParameters} params - çç®¡åææå¡åæ°ç±»ã
   * @param {RequestCallback} callback åè°å½æ°ã
   */


  NetworkAnalystService_createClass(NetworkAnalystService, [{
    key: "burstPipelineAnalyst",
    value: function burstPipelineAnalyst(params, callback) {
      var me = this;
      var burstPipelineAnalystService = new BurstPipelineAnalystService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      burstPipelineAnalystService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.NetworkAnalystService.prototype.computeWeightMatrix
     * @description èè´¹ç©éµåææå¡:æ ¹æ®äº¤éç½ç»åæåæ°ä¸­çèè´¹å­æ®µè¿åä¸ä¸ªèè´¹ç©éµãè¯¥ç©éµæ¯ä¸ä¸ªäºç»´æ°ç»ï¼ç¨æ¥å­å¨ä»»æä¸¤ç¹é´çèµæºæ¶èã
     * @param {SuperMap.ComputeWeightMatrixParameters} params - èè´¹ç©éµåææå¡åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     */

  }, {
    key: "computeWeightMatrix",
    value: function computeWeightMatrix(params, callback) {
      var me = this;
      var computeWeightMatrixService = new ComputeWeightMatrixService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      computeWeightMatrixService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.NetworkAnalystService.prototype.findClosestFacilities
     * @description æè¿è®¾æ½åææå¡:æå¨ç½ç»ä¸ç»å®ä¸ä¸ªäºä»¶ç¹åä¸ç»è®¾æ½ç¹ï¼æ¥æ¾ä»äºä»¶ç¹å°è®¾æ½ç¹(æä»è®¾æ½ç¹å°äºä»¶ç¹)ä»¥æå°èè´¹è½å°è¾¾çæä½³è·¯å¾ã
     * @param {SuperMap.FindClosestFacilitiesParameters} params - æè¿è®¾æ½åææå¡åæ°ç±»ã
     * @param {RequestCallback} callback åè°å½æ°ã
     * @param {SuperMap.DataFormat} [resultFormat=DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "findClosestFacilities",
    value: function findClosestFacilities(params, callback, resultFormat) {
      var me = this;
      var findClosestFacilitiesService = new FindClosestFacilitiesService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      findClosestFacilitiesService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.NetworkAnalystService.prototype.streamFacilityAnalyst
     * @description ä¸æ¸¸/ä¸æ¸¸ å³é®è®¾æ½æ¥æ¾èµæºæå¡:æ¥æ¾ç»å®å¼§æ®µæèç¹çä¸æ¸¸/ä¸æ¸¸ä¸­çå³é®è®¾æ½ç»ç¹ï¼è¿åå³é®ç»ç¹ ID æ°ç»åå¶ä¸æ¸¸å¼§æ®µ ID æ°ç»ã
     * @param {SuperMap.FacilityAnalystStreamParameters} params - ä¸æ¸¸/ä¸æ¸¸ å³é®è®¾æ½æ¥æ¾èµæºæå¡åæ°ç±»ã
     * @param {RequestCallback} callback åè°å½æ°ã
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "streamFacilityAnalyst",
    value: function streamFacilityAnalyst(params, callback, resultFormat) {
      var me = this;
      var facilityAnalystStreamService = new FacilityAnalystStreamService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      facilityAnalystStreamService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.NetworkAnalystService.prototype.findLocation
     * @description éåååºåææå¡ï¼ç¡®å®ä¸ä¸ªæå¤ä¸ªå¾å»ºè®¾æ½çæä½³ææä¼ä½ç½®ã
     * @param {SuperMap.FindLocationParameters} params - éåååºåææå¡åæ°ç±»ã
     * @param {RequestCallback} callback åè°å½æ°ã
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "findLocation",
    value: function findLocation(params, callback, resultFormat) {
      var me = this;
      var findLocationService = new FindLocationService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      findLocationService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.NetworkAnalystService.prototype.findPath
     * @description æä½³è·¯å¾åææå¡:å¨ç½ç»æ°æ®éä¸­æå®ä¸äºèç¹ï¼æç§èç¹çéæ©é¡ºåºï¼é¡ºåºè®¿é®è¿äºèç¹ä»èæ±è§£èµ·æ­¢ç¹ä¹é´é»ææå°çè·¯ç»ã
     * @param {SuperMap.FindPathParameters} params - æä½³è·¯å¾åææå¡åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "findPath",
    value: function findPath(params, callback, resultFormat) {
      var me = this;
      var findPathService = new FindPathService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      findPathService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.NetworkAnalystService.prototype.findTSPPaths
     * @description æè¡ååææå¡:è·¯å¾åæçä¸ç§ï¼å®ä»èµ·ç¹å¼å§ï¼é»è®¤ä¸ºç¨æ·æå®çç¬¬ä¸ç¹ï¼æ¥æ¾è½å¤éåææéç»ç¹ä¸è±è´¹æå°çè·¯å¾ã
     * @param {SuperMap.SuperMap.FindTSPPathsParameters} params - æè¡ååææå¡åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "findTSPPaths",
    value: function findTSPPaths(params, callback, resultFormat) {
      var me = this;
      var findTSPPathsService = new FindTSPPathsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      findTSPPathsService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.NetworkAnalystService.prototype.findMTSPPaths
     * @description å¤æè¡ååææå¡:ä¹ç§°ä¸ºç©æµééï¼æ¯æå¨ç½ç»æ°æ®éä¸­ï¼ç»å® M ä¸ªééä¸­å¿ç¹å N ä¸ªééç®çå°ï¼Mï¼N ä¸ºå¤§äºé¶çæ´æ°ï¼ãæ¥æ¾ç»æµææçééè·¯å¾ï¼å¹¶ç»åºç¸åºçè¡èµ°è·¯çº¿ã
     * @param {SuperMap.FindMTSPPathsParameters} params - å¤æè¡ååææå¡åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "findMTSPPaths",
    value: function findMTSPPaths(params, callback, resultFormat) {
      var me = this;
      var findMTSPPathsService = new FindMTSPPathsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      findMTSPPathsService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.NetworkAnalystService.prototype.findServiceAreas
     * @description æå¡åºåææå¡ï¼ä»¥æå®æå¡ç«ç¹ä¸ºä¸­å¿ï¼å¨ä¸å®æå¡èå´åæ¥æ¾ç½ç»ä¸æå¡ç«ç¹è½å¤æä¾æå¡çåºåèå´ã
     * @param {SuperMap.FindServiceAreasParameters} params - æå¡åºåææå¡åæ°ç±»ã
     * @param {RequestCallback} callback åè°å½æ°ã
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "findServiceAreas",
    value: function findServiceAreas(params, callback, resultFormat) {
      var me = this;
      var findServiceAreasService = new FindServiceAreasService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      findServiceAreasService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.NetworkAnalystService.prototype.updateEdgeWeight
     * @description æ´æ°è¾¹çèè´¹æéæå¡ã
     * @param {SuperMap.UpdateEdgeWeightParameters} params - æ´æ°è¾¹çèè´¹æéæå¡åæ°ç±»ã
     * @param {RequestCallback} callback åè°å½æ°ã
     */

  }, {
    key: "updateEdgeWeight",
    value: function updateEdgeWeight(params, callback) {
      var me = this;
      var updateEdgeWeightService = new UpdateEdgeWeightService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      updateEdgeWeightService.processAsync(params);
    }
    /**
     * @function mapboxgl.supermap.NetworkAnalystService.prototype.updateTurnNodeWeight
     * @description è½¬åèè´¹æéæ´æ°æå¡ã
     * @param {SuperMap.UpdateTurnNodeWeightParameters} params - è½¬åèè´¹æéæ´æ°æå¡åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     */

  }, {
    key: "updateTurnNodeWeight",
    value: function updateTurnNodeWeight(params, callback) {
      var me = this;
      var updateTurnNodeWeightService = new UpdateTurnNodeWeightService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      updateTurnNodeWeightService.processAsync(params);
    }
    /**
     * @description ææ Point èè mapboxgl.lnglatãmapboxgl.Pointã[]ä¸ç§å½¢å¼ã
     * @param {Object} params - å¾è½¬æ¢åæ°ã
     * @returns {Object}  
     * @private
     */

  }, {
    key: "_processParams",
    value: function _processParams(params) {
      if (!params) {
        return {};
      }

      var me = this;

      if (params.centers && core_Util_Util.isArray(params.centers)) {
        params.centers.map(function (point, key) {
          params.centers[key] = me._toPointObject(point);
          return params.centers[key];
        });
      }

      if (params.nodes && core_Util_Util.isArray(params.nodes)) {
        params.nodes.map(function (point, key) {
          params.nodes[key] = me._toPointObject(point);
          return params.nodes[key];
        });
      }

      if (params.event) {
        params.event = me._toPointObject(params.event);
      }

      if (params.facilities && core_Util_Util.isArray(params.facilities)) {
        params.facilities.map(function (point, key) {
          params.facilities[key] = me._toPointObject(point);
          return params.facilities[key];
        });
      }

      if (params.parameter && params.parameter.barrierPoints) {
        var barrierPoints = params.parameter.barrierPoints;

        if (core_Util_Util.isArray(barrierPoints)) {
          barrierPoints.map(function (point, key) {
            params.parameter[key] = me._toPointObject(point);
            return params.parameter.barrierPoints[key];
          });
        } else {
          params.parameter.barrierPoints = [barrierPoints instanceof (external_mapboxgl_default()).LngLat ? {
            x: barrierPoints.lng,
            y: barrierPoints.lat
          } : barrierPoints];
        }
      }

      return params;
    }
  }, {
    key: "_toPointObject",
    value: function _toPointObject(point) {
      if (core_Util_Util.isArray(point)) {
        return {
          x: point[0],
          y: point[1]
        };
      }

      if (point instanceof (external_mapboxgl_default()).LngLat) {
        return {
          x: point.lng,
          y: point.lat
        };
      }

      return point instanceof (external_mapboxgl_default()).Point ? {
        x: point.x,
        y: point.y
      } : point;
    }
  }, {
    key: "_processFormat",
    value: function _processFormat(resultFormat) {
      return resultFormat ? resultFormat : DataFormat.GEOJSON;
    }
  }]);

  return NetworkAnalystService;
}(ServiceBase);
(external_mapboxgl_default()).supermap.NetworkAnalystService = NetworkAnalystService;
// CONCATENATED MODULE: ./src/mapboxgl/services/NetworkAnalyst3DService.js
function NetworkAnalyst3DService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { NetworkAnalyst3DService_typeof = function _typeof(obj) { return typeof obj; }; } else { NetworkAnalyst3DService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return NetworkAnalyst3DService_typeof(obj); }

function NetworkAnalyst3DService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function NetworkAnalyst3DService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function NetworkAnalyst3DService_createClass(Constructor, protoProps, staticProps) { if (protoProps) NetworkAnalyst3DService_defineProperties(Constructor.prototype, protoProps); if (staticProps) NetworkAnalyst3DService_defineProperties(Constructor, staticProps); return Constructor; }

function NetworkAnalyst3DService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) NetworkAnalyst3DService_setPrototypeOf(subClass, superClass); }

function NetworkAnalyst3DService_setPrototypeOf(o, p) { NetworkAnalyst3DService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return NetworkAnalyst3DService_setPrototypeOf(o, p); }

function NetworkAnalyst3DService_createSuper(Derived) { var hasNativeReflectConstruct = NetworkAnalyst3DService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = NetworkAnalyst3DService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = NetworkAnalyst3DService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return NetworkAnalyst3DService_possibleConstructorReturn(this, result); }; }

function NetworkAnalyst3DService_possibleConstructorReturn(self, call) { if (call && (NetworkAnalyst3DService_typeof(call) === "object" || typeof call === "function")) { return call; } return NetworkAnalyst3DService_assertThisInitialized(self); }

function NetworkAnalyst3DService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function NetworkAnalyst3DService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function NetworkAnalyst3DService_getPrototypeOf(o) { NetworkAnalyst3DService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return NetworkAnalyst3DService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class mapboxgl.supermap.NetworkAnalyst3DService
 * @category  iServer FacilityAnalyst3D
 * @classdesc 3D ç½ç»åææå¡ç±»ã
 * @extends {mapboxgl.supermap.ServiceBase}
 * @example
 * new mapboxgl.supermap.NetworkAnalyst3DService(url)
 *  .sinksFacilityAnalyst(params,function(result){
 *     //doSomething
 * })
 * @param {string} url - ç½ç»åææå¡å°åãè¯·æ±ç½ç»åææå¡ï¼URLåºä¸ºï¼</br>
 *                        http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/{ç½ç»åææå¡å}/rest/networkanalyst/{ç½ç»æ°æ®é@æ°æ®æº}ã
 *                        ä¾å¦:"http://localhost:8090/iserver/services/components-rest/rest/networkanalyst/RoadNet@Changchun"ã
 * @param {Object} options - æå¡æéå¯éåæ°ã
 * @param {string} [options.proxy] - æå¡ä»£çå°åã
 * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦ cookieã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡æ¥æº ISERVER|IPORTAL|ONLINEã
 */

var NetworkAnalyst3DService = /*#__PURE__*/function (_ServiceBase) {
  NetworkAnalyst3DService_inherits(NetworkAnalyst3DService, _ServiceBase);

  var _super = NetworkAnalyst3DService_createSuper(NetworkAnalyst3DService);

  function NetworkAnalyst3DService(url, options) {
    NetworkAnalyst3DService_classCallCheck(this, NetworkAnalyst3DService);

    return _super.call(this, url, options);
  }
  /**
   * @function mapboxgl.supermap.NetworkAnalyst3DService.prototype.sinksFacilityAnalyst
   * @description æ±æ¥æ¾æå¡ã
   * @param {SuperMap.FacilityAnalystSinks3DParameters} params - æè¿è®¾æ½åæåæ°ç±»ï¼æ±æ¥æ¾èµæºï¼ã
   * @param {RequestCallback} callback - åè°å½æ°ã
   * @returns {mapboxgl.supermap.NetworkAnalyst3DService} 3D ç½ç»åææå¡ã
   */


  NetworkAnalyst3DService_createClass(NetworkAnalyst3DService, [{
    key: "sinksFacilityAnalyst",
    value: function sinksFacilityAnalyst(params, callback) {
      var me = this;
      var facilityAnalystSinks3DService = new FacilityAnalystSinks3DService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      facilityAnalystSinks3DService.processAsync(params);
    }
    /**
     * @function mapboxgl.supermap.NetworkAnalyst3DService.prototype.sourcesFacilityAnalyst
     * @description æºæ¥æ¾æå¡ã
     * @param {SuperMap.FacilityAnalystSources3DParameters} params - æè¿è®¾æ½åæåæ°ç±»ï¼æºæ¥æ¾æå¡ï¼ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @returns {mapboxgl.supermap.NetworkAnalyst3DService} 3D ç½ç»åææå¡ã
     */

  }, {
    key: "sourcesFacilityAnalyst",
    value: function sourcesFacilityAnalyst(params, callback) {
      var me = this;
      var facilityAnalystSources3DService = new FacilityAnalystSources3DService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      facilityAnalystSources3DService.processAsync(params);
    }
    /**
     * @function mapboxgl.supermap.NetworkAnalyst3DService.prototype.traceUpFacilityAnalyst
     * @description ä¸æ¸¸è¿½è¸ªèµæºæå¡ã
     * @param {SuperMap.FacilityAnalystTraceup3DParameters} params - ä¸æ¸¸è¿½è¸ªèµæºåæ°ç±»ã
     * @param {RequestCallback} callback åè°å½æ°ã
     * @returns {mapboxgl.supermap.NetworkAnalyst3DService} 3D ç½ç»åææå¡ã
     */

  }, {
    key: "traceUpFacilityAnalyst",
    value: function traceUpFacilityAnalyst(params, callback) {
      var me = this;
      var facilityAnalystTraceup3DService = new FacilityAnalystTraceup3DService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      facilityAnalystTraceup3DService.processAsync(params);
    }
    /**
     * @function mapboxgl.supermap.NetworkAnalyst3DService.prototype.traceDownFacilityAnalyst
     * @description ä¸æ¸¸è¿½è¸ªèµæºæå¡ã
     * @param {SuperMap.FacilityAnalystTracedown3DParameters} params - ä¸æ¸¸è¿½è¸ªèµæºæå¡åæ°ç±»ã
     * @param {RequestCallback} callback åè°å½æ°ã
     * @returns {mapboxgl.supermap.NetworkAnalyst3DService} 3D ç½ç»åææå¡ã
     */

  }, {
    key: "traceDownFacilityAnalyst",
    value: function traceDownFacilityAnalyst(params, callback) {
      var me = this;
      var facilityAnalystTracedown3DService = new FacilityAnalystTracedown3DService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      facilityAnalystTracedown3DService.processAsync(params);
    }
    /**
     * @function mapboxgl.supermap.NetworkAnalyst3DService.prototype.upstreamFacilityAnalyst
     * @description ä¸æ¸¸å³é®è®¾æ½æ¥æ¾æå¡ã
     * @param {SuperMap.FacilityAnalystUpstream3DParameters} params - ä¸æ¸¸å³é®è®¾æ½æ¥æ¾æå¡åæ°ç±»ã
     * @param {RequestCallback} callback åè°å½æ°ã
     * @returns {mapboxgl.supermap.NetworkAnalyst3DService} 3D ç½ç»åææå¡ã
     */

  }, {
    key: "upstreamFacilityAnalyst",
    value: function upstreamFacilityAnalyst(params, callback) {
      var me = this;
      var facilityAnalystUpstream3DService = new FacilityAnalystUpstream3DService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      facilityAnalystUpstream3DService.processAsync(params);
    }
  }]);

  return NetworkAnalyst3DService;
}(ServiceBase);
(external_mapboxgl_default()).supermap.NetworkAnalyst3DService = NetworkAnalyst3DService;
// CONCATENATED MODULE: ./src/mapboxgl/services/ProcessingService.js
function ProcessingService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { ProcessingService_typeof = function _typeof(obj) { return typeof obj; }; } else { ProcessingService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return ProcessingService_typeof(obj); }

function ProcessingService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function ProcessingService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function ProcessingService_createClass(Constructor, protoProps, staticProps) { if (protoProps) ProcessingService_defineProperties(Constructor.prototype, protoProps); if (staticProps) ProcessingService_defineProperties(Constructor, staticProps); return Constructor; }

function ProcessingService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) ProcessingService_setPrototypeOf(subClass, superClass); }

function ProcessingService_setPrototypeOf(o, p) { ProcessingService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return ProcessingService_setPrototypeOf(o, p); }

function ProcessingService_createSuper(Derived) { var hasNativeReflectConstruct = ProcessingService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = ProcessingService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = ProcessingService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return ProcessingService_possibleConstructorReturn(this, result); }; }

function ProcessingService_possibleConstructorReturn(self, call) { if (call && (ProcessingService_typeof(call) === "object" || typeof call === "function")) { return call; } return ProcessingService_assertThisInitialized(self); }

function ProcessingService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function ProcessingService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function ProcessingService_getPrototypeOf(o) { ProcessingService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return ProcessingService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class mapboxgl.supermap.ProcessingService
 * @category  iServer ProcessingService
 * @classdesc åå¸å¼åæç¸å³æå¡ç±»ã
 * @extends {mapboxgl.supermap.ServiceBase}
 * @example
 * new mapboxgl.supermap.ProcessingService(url,options)
 *  .getKernelDensityJobs(function(result){
 *     //doSomething
 * })
 * @param {string} url - åå¸å¼åææå¡å°åã 
 * @param {Object} options - äº¤äºæå¡æ¶æéå¯éåæ°ã
 * @param {string} [options.proxy] - æå¡ä»£çå°åã
 * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦cookieã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡æ¥æº ISERVER|IPORTAL|ONLINEã
 */

var ProcessingService = /*#__PURE__*/function (_ServiceBase) {
  ProcessingService_inherits(ProcessingService, _ServiceBase);

  var _super = ProcessingService_createSuper(ProcessingService);

  function ProcessingService(url, options) {
    var _this;

    ProcessingService_classCallCheck(this, ProcessingService);

    _this = _super.call(this, url, options);
    _this.kernelDensityJobs = {};
    _this.summaryMeshJobs = {};
    _this.queryJobs = {};
    _this.summaryRegionJobs = {};
    _this.vectorClipJobs = {};
    _this.overlayGeoJobs = {};
    _this.buffersJobs = {};
    _this.topologyValidatorJobs = {};
    _this.summaryAttributesJobs = {};
    return _this;
  }
  /**
   * @function mapboxgl.supermap.ProcessingService.prototype.getKernelDensityJobs
   * @description è·åå¯åº¦åæçåè¡¨ã
   * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã 
   * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
   */


  ProcessingService_createClass(ProcessingService, [{
    key: "getKernelDensityJobs",
    value: function getKernelDensityJobs(callback, resultFormat) {
      var me = this,
          format = me._processFormat(resultFormat);

      var kernelDensityJobsService = new KernelDensityJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: format
      });
      kernelDensityJobsService.getKernelDensityJobs();
    }
    /**
     * @function mapboxgl.supermap.ProcessingService.prototype.getKernelDensityJob
     * @description è·åæä¸ä¸ªå¯åº¦åæã
     * @param {string} id - ç©ºé´åæçidã 
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã 
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "getKernelDensityJob",
    value: function getKernelDensityJob(id, callback, resultFormat) {
      var me = this,
          format = me._processFormat(resultFormat);

      var kernelDensityJobsService = new KernelDensityJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: format
      });
      kernelDensityJobsService.getKernelDensityJob(id);
    }
    /**
     * @function mapboxgl.supermap.ProcessingService.prototype.addKernelDensityJob
     * @description æ°å»ºä¸ä¸ªå¯åº¦åæã
     * @param {SuperMap.KernelDensityJobParameter} params -åå»ºä¸ä¸ªç©ºé´åæçè¯·æ±åæ°ã 
     * @param {RequestCallback} callback è¯·æ±ç»æçåè°å½æ°ã 
     * @param {number} [seconds=1000] - å¼å§åå»ºåï¼è·ååå»ºæåç»æçæ¶é´é´éã 
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "addKernelDensityJob",
    value: function addKernelDensityJob(params, callback, seconds, resultFormat) {
      var me = this,
          param = me._processParams(params),
          format = me._processFormat(resultFormat);

      var kernelDensityJobsService = new KernelDensityJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback,
          processRunning: function processRunning(job) {
            me.kernelDensityJobs[job.id] = job.state;
          }
        },
        format: format
      });
      kernelDensityJobsService.addKernelDensityJob(param, seconds);
    }
    /**
     * @function mapboxgl.supermap.ProcessingService.prototype.getKernelDensityJobState
     * @description è·åå¯åº¦åæçç¶æã
     * @param {string} id - å¯åº¦åæçidã
     * @returns {Object} å¯åº¦åæçç¶æã
     */

  }, {
    key: "getKernelDensityJobState",
    value: function getKernelDensityJobState(id) {
      return this.kernelDensityJobs[id];
    }
    /**
     * @function mapboxgl.supermap.ProcessingService.prototype.getSummaryMeshJobs
     * @description è·åç¹èååæçåè¡¨ã
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã 
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "getSummaryMeshJobs",
    value: function getSummaryMeshJobs(callback, resultFormat) {
      var me = this,
          format = me._processFormat(resultFormat);

      var summaryMeshJobsService = new SummaryMeshJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: format
      });
      summaryMeshJobsService.getSummaryMeshJobs();
    }
    /**
     * @function mapboxgl.supermap.ProcessingService.prototype.getSummaryMeshJob
     * @description è·åæä¸ä¸ªç¹èååæã
     * @param {string} id - ç©ºé´åæç idã 
     * @param {function} callback - è¯·æ±ç»æçåè°å½æ°ã 
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "getSummaryMeshJob",
    value: function getSummaryMeshJob(id, callback, resultFormat) {
      var me = this,
          format = me._processFormat(resultFormat);

      var summaryMeshJobsService = new SummaryMeshJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: format
      });
      summaryMeshJobsService.getSummaryMeshJob(id);
    }
    /**
     * @function mapboxgl.supermap.ProcessingService.prototype.addSummaryMeshJob
     * @description æ°å»ºä¸ä¸ªç¹èååæã
     * @param {SuperMap.SummaryMeshJobParameter} params - ç¹èååæä»»å¡åæ°ç±»ã 
     * @param {RequestCallback} callback è¯·æ±ç»æçåè°å½æ°ã 
     * @param {number} [seconds=1000] - å¼å§åå»ºåï¼è·ååå»ºæåç»æçæ¶é´é´éã
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "addSummaryMeshJob",
    value: function addSummaryMeshJob(params, callback, seconds, resultFormat) {
      var me = this,
          param = me._processParams(params),
          format = me._processFormat(resultFormat);

      var summaryMeshJobsService = new SummaryMeshJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback,
          processRunning: function processRunning(job) {
            me.summaryMeshJobs[job.id] = job.state;
          }
        },
        format: format
      });
      summaryMeshJobsService.addSummaryMeshJob(param, seconds);
    }
    /**
     * @function mapboxgl.supermap.ProcessingService.prototype.getSummaryMeshJobState
     * @description è·åç¹èååæçç¶æã
     * @param {string} id - ç¹èååæç IDã
     * @returns {Object} ç¹èååæçç¶æã
     */

  }, {
    key: "getSummaryMeshJobState",
    value: function getSummaryMeshJobState(id) {
      return this.summaryMeshJobs[id];
    }
    /**
     * @function mapboxgl.supermap.ProcessingService.prototype.getQueryJobs
     * @description è·ååå¯¹è±¡æ¥è¯¢åæçåè¡¨ã
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã 
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "getQueryJobs",
    value: function getQueryJobs(callback, resultFormat) {
      var me = this,
          format = me._processFormat(resultFormat);

      var singleObjectQueryJobsService = new SingleObjectQueryJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        serverType: me.options.serverType,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: format
      });
      singleObjectQueryJobsService.getQueryJobs();
    }
    /**
     * @function mapboxgl.supermap.ProcessingService.prototype.getQueryJob
     * @description è·åæä¸ä¸ªåå¯¹è±¡æ¥è¯¢åæã
     * @param {string} id - ç©ºé´åæç idã 
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã 
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "getQueryJob",
    value: function getQueryJob(id, callback, resultFormat) {
      var me = this,
          format = me._processFormat(resultFormat);

      var singleObjectQueryJobsService = new SingleObjectQueryJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: format
      });
      singleObjectQueryJobsService.getQueryJob(id);
    }
    /**
     * @function mapboxgl.supermap.ProcessingService.prototype.addQueryJob
     * @description æ°å»ºä¸ä¸ªåå¯¹è±¡æ¥è¯¢åæã
     * @param {SuperMap.SingleObjectQueryJobsParameter} params -åå»ºä¸ä¸ªç©ºé´åæçè¯·æ±åæ°ã 
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã
     * @param {number} [seconds=1000] - å¼å§åå»ºåï¼è·ååå»ºæåç»æçæ¶é´é´éã 
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "addQueryJob",
    value: function addQueryJob(params, callback, seconds, resultFormat) {
      var me = this,
          param = me._processParams(params),
          format = me._processFormat(resultFormat);

      var singleObjectQueryJobsService = new SingleObjectQueryJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback,
          processRunning: function processRunning(job) {
            me.queryJobs[job.id] = job.state;
          }
        },
        format: format
      });
      singleObjectQueryJobsService.addQueryJob(param, seconds);
    }
    /**
     * @function mapboxgl.supermap.ProcessingService.prototype.getQueryJobState
     * @description è·ååå¯¹è±¡æ¥è¯¢åæçç¶æã
     * @param {string} id - åå¯¹è±¡æ¥è¯¢åæç IDã
     * @returns {Object} åå¯¹è±¡æ¥è¯¢åæçç¶æã
     */

  }, {
    key: "getQueryJobState",
    value: function getQueryJobState(id) {
      return this.queryJobs[id];
    }
    /**
     * @function mapboxgl.supermap.ProcessingService.prototype.getSummaryRegionJobs
     * @description è·ååºåæ±æ»åæçåè¡¨ã
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã 
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "getSummaryRegionJobs",
    value: function getSummaryRegionJobs(callback, resultFormat) {
      var me = this,
          format = me._processFormat(resultFormat);

      var summaryRegionJobsService = new SummaryRegionJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: format
      });
      summaryRegionJobsService.getSummaryRegionJobs();
    }
    /**
     * @function mapboxgl.supermap.ProcessingService.prototype.getSummaryRegionJob
     * @description è·åæä¸ä¸ªåºåæ±æ»åæã
     * @param {string} id - åºåæ±æ»åæç idã 
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã 
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "getSummaryRegionJob",
    value: function getSummaryRegionJob(id, callback, resultFormat) {
      var me = this,
          format = me._processFormat(resultFormat);

      var summaryRegionJobsService = new SummaryRegionJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: format
      });
      summaryRegionJobsService.getSummaryRegionJob(id);
    }
    /**
     * @function mapboxgl.supermap.ProcessingService.prototype.addSummaryRegionJob
     * @description æ°å»ºä¸ä¸ªåºåæ±æ»åæã
     * @param {SuperMap.SummaryRegionJobParameter} params - åºåæ±æ»åæåæ°ç±»ã
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã
     * @param {number} [seconds=1000] - å¼å§åå»ºåï¼è·ååå»ºæåç»æçæ¶é´é´éã
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "addSummaryRegionJob",
    value: function addSummaryRegionJob(params, callback, seconds, resultFormat) {
      var me = this,
          param = me._processParams(params),
          format = me._processFormat(resultFormat);

      var summaryRegionJobsService = new SummaryRegionJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback,
          processRunning: function processRunning(job) {
            me.summaryRegionJobs[job.id] = job.state;
          }
        },
        format: format
      });
      summaryRegionJobsService.addSummaryRegionJob(param, seconds);
    }
    /**
     * @function mapboxgl.supermap.ProcessingService.prototype.getSummaryRegionJobState
     * @description è·ååºåæ±æ»åæçç¶æã
     * @param {string} id - çæåºåæ±æ»åæç idã
     * @returns {Object} åºåæ±æ»åæçç¶æã
     */

  }, {
    key: "getSummaryRegionJobState",
    value: function getSummaryRegionJobState(id) {
      return this.summaryRegionJobs[id];
    }
    /**
     * @function mapboxgl.supermap.ProcessingService.prototype.getVectorClipJobs
     * @description è·åç¢éè£åªåæçåè¡¨ã
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã 
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "getVectorClipJobs",
    value: function getVectorClipJobs(callback, resultFormat) {
      var me = this,
          format = me._processFormat(resultFormat);

      var vectorClipJobsService = new VectorClipJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: format
      });
      vectorClipJobsService.getVectorClipJobs();
    }
    /**
     * @function mapboxgl.supermap.ProcessingService.prototype.getVectorClipJob
     * @description è·åæä¸ä¸ªç¢éè£åªåæã
     * @param {string} id - ç©ºé´åæç idã 
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã 
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "getVectorClipJob",
    value: function getVectorClipJob(id, callback, resultFormat) {
      var me = this,
          format = me._processFormat(resultFormat);

      var vectorClipJobsService = new VectorClipJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        serverType: me.options.serverType,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: format
      });
      vectorClipJobsService.getVectorClipJob(id);
    }
    /**
     * @function mapboxgl.supermap.ProcessingService.prototype.addVectorClipJob
     * @description æ°å»ºä¸ä¸ªç¢éè£åªåæã
     * @param {SuperMap.VectorClipJobsParameter} params - åå»ºä¸ä¸ªç©ºé´åæçè¯·æ±åæ°ã 
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã 
     * @param {number} [seconds=1000] - å¼å§åå»ºåï¼è·ååå»ºæåç»æçæ¶é´é´éã 
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "addVectorClipJob",
    value: function addVectorClipJob(params, callback, seconds, resultFormat) {
      var me = this,
          param = me._processParams(params),
          format = me._processFormat(resultFormat);

      var vectorClipJobsService = new VectorClipJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        serverType: me.options.serverType,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback,
          processRunning: function processRunning(job) {
            me.vectorClipJobs[job.id] = job.state;
          }
        },
        format: format
      });
      vectorClipJobsService.addVectorClipJob(param, seconds);
    }
    /**
     * @function mapboxgl.supermap.ProcessingService.prototype.getVectorClipJobState
     * @description è·åç¢éè£åªåæçç¶æã
     * @param {number} id - ç¢éè£åªåæçidã
     * @returns {Object} ç¢éè£åªåæçç¶æã
     */

  }, {
    key: "getVectorClipJobState",
    value: function getVectorClipJobState(id) {
      return this.vectorClipJobs[id];
    }
    /**
     * @function mapboxgl.supermap.processingService.prototype.getOverlayGeoJobs
     * @description è·åå å åæçåè¡¨ã
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã 
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "getOverlayGeoJobs",
    value: function getOverlayGeoJobs(callback, resultFormat) {
      var me = this,
          format = me._processFormat(resultFormat);

      var overlayGeoJobsService = new OverlayGeoJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        serverType: me.options.serverType,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: format
      });
      overlayGeoJobsService.getOverlayGeoJobs();
    }
    /**
     * @function mapboxgl.supermap.processingService.prototype.getOverlayGeoJob
     * @description è·åæä¸ä¸ªå å åæã
     * @param {string} id - ç©ºé´åæç IDã
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã 
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "getOverlayGeoJob",
    value: function getOverlayGeoJob(id, callback, resultFormat) {
      var me = this,
          format = me._processFormat(resultFormat);

      var overlayGeoJobsService = new OverlayGeoJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        serverType: me.options.serverType,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: format
      });
      overlayGeoJobsService.getOverlayGeoJob(id);
    }
    /**
     * @function mapboxgl.supermap.processingService.prototype.addOverlayGeoJob
     * @description æ°å»ºä¸ä¸ªå å åæã
     * @param {SuperMap.OverlayGeoJobParameter} params - åå»ºä¸ä¸ªç©ºé´åæçè¯·æ±åæ°ã 
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã 
     * @param {number} [seconds=1000] - å¼å§åå»ºåï¼è·ååå»ºæåç»æçæ¶é´é´éã 
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "addOverlayGeoJob",
    value: function addOverlayGeoJob(params, callback, seconds, resultFormat) {
      var me = this,
          param = me._processParams(params),
          format = me._processFormat(resultFormat);

      var overlayGeoJobsService = new OverlayGeoJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        serverType: me.options.serverType,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback,
          processRunning: function processRunning(job) {
            me.overlayGeoJobs[job.id] = job.state;
          }
        },
        format: format
      });
      overlayGeoJobsService.addOverlayGeoJob(param, seconds);
    }
    /**
     * @function mapboxgl.supermap.processingService.prototype.getoverlayGeoJobState
     * @description è·åå å åæçç¶æã
     * @param {string} id - å å åæçidã
     * @returns {Object} å å åæçç¶æ
     */

  }, {
    key: "getoverlayGeoJobState",
    value: function getoverlayGeoJobState(id) {
      return this.overlayGeoJobs[id];
    }
    /**
     * @function mapboxgl.supermap.processingService.prototype.getBuffersJobs
     * @description è·åç¼å²åºåæçåè¡¨ã
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã 
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "getBuffersJobs",
    value: function getBuffersJobs(callback, resultFormat) {
      var me = this,
          format = me._processFormat(resultFormat);

      var buffersAnalystJobsService = new BuffersAnalystJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        serverType: me.options.serverType,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: format
      });
      buffersAnalystJobsService.getBuffersJobs();
    }
    /**
     * @function mapboxgl.supermap.processingService.prototype.getBuffersJob
     * @description è·åæä¸ä¸ªç¼å²åºåæã
     * @param {string} id - ç©ºé´åæç IDã 
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã 
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "getBuffersJob",
    value: function getBuffersJob(id, callback, resultFormat) {
      var me = this,
          format = me._processFormat(resultFormat);

      var buffersAnalystJobsService = new BuffersAnalystJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        serverType: me.options.serverType,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: format
      });
      buffersAnalystJobsService.getBuffersJob(id);
    }
    /**
     * @function mapboxgl.supermap.processingService.prototype.addBuffersJob
     * @description æ°å»ºä¸ä¸ªç¼å²åºåæã
     * @param {SuperMap.BuffersAnalystJobsParameter} params - åå»ºä¸ä¸ªç©ºé´åæçè¯·æ±åæ°ã 
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã 
     * @param {number} seconds - å¼å§åå»ºåï¼è·ååå»ºæåç»æçæ¶é´é´éã 
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "addBuffersJob",
    value: function addBuffersJob(params, callback, seconds, resultFormat) {
      var me = this,
          param = me._processParams(params),
          format = me._processFormat(resultFormat);

      var buffersAnalystJobsService = new BuffersAnalystJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        serverType: me.options.serverType,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback,
          processRunning: function processRunning(job) {
            me.buffersJobs[job.id] = job.state;
          }
        },
        format: format
      });
      buffersAnalystJobsService.addBuffersJob(param, seconds);
    }
    /**
     * @function mapboxgl.supermap.processingService.prototype.getBuffersJobState
     * @description è·åç¼å²åºåæçç¶æã
     * @param {string} id - ç¼å²åºåæç IDã
     * @returns {Object} ç¼å²åºåæçç¶æã
     */

  }, {
    key: "getBuffersJobState",
    value: function getBuffersJobState(id) {
      return this.buffersJobs[id];
    }
    /**
     * @function mapboxgl.supermap.processingService.prototype.getTopologyValidatorJobs
     * @description è·åæææ£æ¥åæçåè¡¨ã
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã 
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "getTopologyValidatorJobs",
    value: function getTopologyValidatorJobs(callback, resultFormat) {
      var me = this,
          format = me._processFormat(resultFormat);

      var topologyValidatorJobsService = new TopologyValidatorJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        serverType: me.options.serverType,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: format
      });
      topologyValidatorJobsService.getTopologyValidatorJobs();
    }
    /**
     * @function mapboxgl.supermap.processingService.prototype.getTopologyValidatorJob
     * @description è·åæä¸ä¸ªæææ£æ¥åæã
     * @param {string} id - ç©ºé´åæç IDã 
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã 
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "getTopologyValidatorJob",
    value: function getTopologyValidatorJob(id, callback, resultFormat) {
      var me = this,
          format = me._processFormat(resultFormat);

      var topologyValidatorJobsService = new TopologyValidatorJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        serverType: me.options.serverType,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: format
      });
      topologyValidatorJobsService.getTopologyValidatorJob(id);
    }
    /**
     * @function mapboxgl.supermap.processingService.prototype.addTopologyValidatorJob
     * @description æ°å»ºä¸ä¸ªæææ£æ¥åæã
     * @param {SuperMap.TopologyValidatorJobsParameter} params - åå»ºä¸ä¸ªç©ºé´åæçè¯·æ±åæ°ã 
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã 
     * @param {number} [seconds=1000] - å¼å§åå»ºåï¼è·ååå»ºæåç»æçæ¶é´é´éã 
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "addTopologyValidatorJob",
    value: function addTopologyValidatorJob(params, callback, seconds, resultFormat) {
      var me = this,
          param = me._processParams(params),
          format = me._processFormat(resultFormat);

      var topologyValidatorJobsService = new TopologyValidatorJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        serverType: me.options.serverType,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback,
          processRunning: function processRunning(job) {
            me.topologyValidatorJobs[job.id] = job.state;
          }
        },
        format: format
      });
      topologyValidatorJobsService.addTopologyValidatorJob(param, seconds);
    }
    /**
     * @function mapboxgl.supermap.processingService.prototype.getTopologyValidatorJobState
     * @description è·åæææ£æ¥åæçç¶æã
     * @param {string} id - æææ£æ¥åæç IDã
     * @returns {Object} æææ£æ¥åæçç¶æã
     */

  }, {
    key: "getTopologyValidatorJobState",
    value: function getTopologyValidatorJobState(id) {
      return this.topologyValidatorJobs[id];
    }
    /**
     * @function mapboxgl.supermap.processingService.prototype.getSummaryAttributesJobs
     * @description è·åå±æ§æ±æ»åæçåè¡¨ã
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "getSummaryAttributesJobs",
    value: function getSummaryAttributesJobs(callback, resultFormat) {
      var me = this,
          format = me._processFormat(resultFormat);

      var summaryAttributesJobsService = new SummaryAttributesJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        serverType: me.options.serverType,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: format
      });
      summaryAttributesJobsService.getSummaryAttributesJobs();
    }
    /**
     * @function mapboxgl.supermap.processingService.prototype.getSummaryAttributesJob
     * @description è·åæä¸ä¸ªå±æ§æ±æ»åæã
     * @param {string} id - ç©ºé´åæç IDã
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "getSummaryAttributesJob",
    value: function getSummaryAttributesJob(id, callback, resultFormat) {
      var me = this,
          format = me._processFormat(resultFormat);

      var summaryAttributesJobsService = new SummaryAttributesJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        serverType: me.options.serverType,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: format
      });
      summaryAttributesJobsService.getSummaryAttributesJob(id);
    }
    /**
     * @function mapboxgl.supermap.processingService.prototype.addSummaryAttributesJob
     * @description æ°å»ºä¸ä¸ªå±æ§æ±æ»åæã
     * @param {SuperMap.SummaryAttributesJobsParameter} params - åå»ºä¸ä¸ªç©ºé´åæçè¯·æ±åæ°ã 
     * @param {RequestCallback} callback - è¯·æ±ç»æçåè°å½æ°ã
     * @param {number} [seconds=1000] - å¼å§åå»ºåï¼è·ååå»ºæåç»æçæ¶é´é´éã
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åçç»æç±»åã
     */

  }, {
    key: "addSummaryAttributesJob",
    value: function addSummaryAttributesJob(params, callback, seconds, resultFormat) {
      var me = this,
          param = me._processParams(params),
          format = me._processFormat(resultFormat);

      var summaryAttributesJobsService = new SummaryAttributesJobsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        serverType: me.options.serverType,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback,
          processRunning: function processRunning(job) {
            me.summaryAttributesJobs[job.id] = job.state;
          }
        },
        format: format
      });
      summaryAttributesJobsService.addSummaryAttributesJob(param, seconds);
    }
    /**
     * @function mapboxgl.supermap.processingService.prototype.getSummaryAttributesJobState
     * @description è·åå±æ§æ±æ»åæçç¶æã
     * @param {string} id - å±æ§æ±æ»åæç IDã 
     * @returns {Object} å±æ§æ±æ»åæçç¶æ
     */

  }, {
    key: "getSummaryAttributesJobState",
    value: function getSummaryAttributesJobState(id) {
      return this.summaryAttributesJobs[id];
    }
  }, {
    key: "_processFormat",
    value: function _processFormat(resultFormat) {
      return resultFormat ? resultFormat : DataFormat.GEOJSON;
    }
  }, {
    key: "_processParams",
    value: function _processParams(params) {
      if (!params) {
        return {};
      }

      if (params.bounds) {
        params.bounds = core_Util_Util.toSuperMapBounds(params.bounds);
      } //è¿éåªåè®¸ä¼ ç«¯çbounds


      if (params.query) {
        params.query = core_Util_Util.toSuperMapBounds(params.query);
      }

      if (params.geometryQuery) {
        params.geometryQuery = core_Util_Util.toProcessingParam(params.geometryQuery);
      }

      if (params.geometryClip) {
        params.geometryClip = core_Util_Util.toProcessingParam(params.geometryClip);
      }

      return params;
    }
  }]);

  return ProcessingService;
}(ServiceBase);
(external_mapboxgl_default()).supermap.ProcessingService = ProcessingService;
// CONCATENATED MODULE: ./src/mapboxgl/services/QueryService.js
function services_QueryService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { services_QueryService_typeof = function _typeof(obj) { return typeof obj; }; } else { services_QueryService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return services_QueryService_typeof(obj); }

function services_QueryService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function services_QueryService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function services_QueryService_createClass(Constructor, protoProps, staticProps) { if (protoProps) services_QueryService_defineProperties(Constructor.prototype, protoProps); if (staticProps) services_QueryService_defineProperties(Constructor, staticProps); return Constructor; }

function services_QueryService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) services_QueryService_setPrototypeOf(subClass, superClass); }

function services_QueryService_setPrototypeOf(o, p) { services_QueryService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return services_QueryService_setPrototypeOf(o, p); }

function services_QueryService_createSuper(Derived) { var hasNativeReflectConstruct = services_QueryService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = services_QueryService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = services_QueryService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return services_QueryService_possibleConstructorReturn(this, result); }; }

function services_QueryService_possibleConstructorReturn(self, call) { if (call && (services_QueryService_typeof(call) === "object" || typeof call === "function")) { return call; } return services_QueryService_assertThisInitialized(self); }

function services_QueryService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function services_QueryService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function services_QueryService_getPrototypeOf(o) { services_QueryService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return services_QueryService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class mapboxgl.supermap.QueryService
 * @category  iServer Map QueryResults
 * @classdesc å°å¾æ¥è¯¢æå¡ç±»ã
 *            æä¾ï¼èå´æ¥è¯¢ï¼SQL æ¥è¯¢ï¼å ä½æ¥è¯¢ï¼è·ç¦»æ¥è¯¢ã
 * @extends {mapboxgl.supermap.ServiceBase}
 * @param {string} url - å°å¾æ¥è¯¢æå¡è®¿é®å°åã
 * @param {Object} options - æå¡äº¤äºæ¶æéçå¯éåæ°ã
 * @param {string} [options.proxy] - æå¡ä»£çå°åã
 * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦ cookieã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡æ¥æº ISERVER|IPORTAL|ONLINEã
 * @example
 * new mapboxgl.supermap.QueryService(url)
 * .queryByBounds(param,function(result){
 *     //doSomething
 * })
 */

var QueryService_QueryService = /*#__PURE__*/function (_ServiceBase) {
  services_QueryService_inherits(QueryService, _ServiceBase);

  var _super = services_QueryService_createSuper(QueryService);

  function QueryService(url, options) {
    services_QueryService_classCallCheck(this, QueryService);

    return _super.call(this, url, options);
  }
  /**
   * @function mapboxgl.supermap.QueryService.prototype.queryByBounds
   * @description Bounds æ¥è¯¢å°å¾æå¡ã
   * @param {SuperMap.QueryByBoundsParameters} params - éè¿ Bounds æ¥è¯¢çç¸å³åæ°ç±»ã
   * @param {RequestCallback} callback - åè°å½æ°ã
   * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åç»æç±»åã
   */


  services_QueryService_createClass(QueryService, [{
    key: "queryByBounds",
    value: function queryByBounds(params, callback, resultFormat) {
      var me = this;
      var queryService = new QueryByBoundsService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      queryService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.QueryService.prototype.queryByDistance
     * @description å°å¾è·ç¦»æ¥è¯¢æå¡ã
     * @param {SuperMap.QueryByDistanceParameters} params - Distance æ¥è¯¢ç¸å³åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åç»æç±»å
     */

  }, {
    key: "queryByDistance",
    value: function queryByDistance(params, callback, resultFormat) {
      var me = this;
      var queryByDistanceService = new QueryByDistanceService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      queryByDistanceService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.QueryService.prototype.queryBySQL
     * @description å°å¾ SQL æ¥è¯¢æå¡ã
     * @param {SuperMap.QueryBySQLParameters} params - SQL æ¥è¯¢ç¸å³åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åç»æç±»åã
     */

  }, {
    key: "queryBySQL",
    value: function queryBySQL(params, callback, resultFormat) {
      var me = this;
      var queryBySQLService = new QueryBySQLService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      queryBySQLService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.QueryService.prototype.queryByGeometry
     * @description å°å¾å ä½æ¥è¯¢æå¡ã
     * @param {SuperMap.QueryByGeometryParameters} params - Geometry æ¥è¯¢ç¸å³åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat} [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åç»æç±»åã
     */

  }, {
    key: "queryByGeometry",
    value: function queryByGeometry(params, callback, resultFormat) {
      var me = this;
      var queryByGeometryService = new QueryByGeometryService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      queryByGeometryService.processAsync(me._processParams(params));
    }
  }, {
    key: "_processParams",
    value: function _processParams(params) {
      if (!params) {
        return {};
      }

      params.returnContent = params.returnContent == null ? true : params.returnContent;

      if (params.queryParams && !core_Util_Util.isArray(params.queryParams)) {
        params.queryParams = [params.queryParams];
      }

      if (params.bounds) {
        if (params.bounds instanceof Array) {
          params.bounds = new Bounds(params.bounds[0], params.bounds[1], params.bounds[2], params.bounds[3]);
        }

        if (params.bounds instanceof (external_mapboxgl_default()).LngLatBounds) {
          params.bounds = new Bounds(params.bounds.getSouthWest().lng, params.bounds.getSouthWest().lat, params.bounds.getNorthEast().lng, params.bounds.getNorthEast().lat);
        }
      }

      if (params.geometry) {
        if (params.geometry instanceof (external_mapboxgl_default()).LngLat) {
          params.geometry = new Point(params.geometry.lng, params.geometry.lat);
        }

        if (params.geometry instanceof (external_mapboxgl_default()).Point) {
          params.geometry = new Point(params.geometry.x, params.geometry.y);
        }

        if (params.geometry instanceof (external_mapboxgl_default()).LngLatBounds) {
          params.geometry = core_Util_Util.toSuperMapPolygon(params.geometry);
        }

        if (!(params.geometry instanceof Geometry)) {
          params.geometry = core_Util_Util.toSuperMapGeometry(params.geometry);
        }
      }

      return params;
    }
  }, {
    key: "_processFormat",
    value: function _processFormat(resultFormat) {
      return resultFormat ? resultFormat : DataFormat.GEOJSON;
    }
  }]);

  return QueryService;
}(ServiceBase);
(external_mapboxgl_default()).supermap.QueryService = QueryService_QueryService;
// CONCATENATED MODULE: ./src/mapboxgl/services/SpatialAnalystService.js
function SpatialAnalystService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SpatialAnalystService_typeof = function _typeof(obj) { return typeof obj; }; } else { SpatialAnalystService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SpatialAnalystService_typeof(obj); }

function SpatialAnalystService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function SpatialAnalystService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function SpatialAnalystService_createClass(Constructor, protoProps, staticProps) { if (protoProps) SpatialAnalystService_defineProperties(Constructor.prototype, protoProps); if (staticProps) SpatialAnalystService_defineProperties(Constructor, staticProps); return Constructor; }

function SpatialAnalystService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SpatialAnalystService_setPrototypeOf(subClass, superClass); }

function SpatialAnalystService_setPrototypeOf(o, p) { SpatialAnalystService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SpatialAnalystService_setPrototypeOf(o, p); }

function SpatialAnalystService_createSuper(Derived) { var hasNativeReflectConstruct = SpatialAnalystService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = SpatialAnalystService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = SpatialAnalystService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return SpatialAnalystService_possibleConstructorReturn(this, result); }; }

function SpatialAnalystService_possibleConstructorReturn(self, call) { if (call && (SpatialAnalystService_typeof(call) === "object" || typeof call === "function")) { return call; } return SpatialAnalystService_assertThisInitialized(self); }

function SpatialAnalystService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function SpatialAnalystService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function SpatialAnalystService_getPrototypeOf(o) { SpatialAnalystService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SpatialAnalystService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class mapboxgl.supermap.SpatialAnalystService
 * @extends {mapboxgl.supermap.ServiceBase}
 * @category  iServer SpatialAnalyst
 * @classdesc ç©ºé´åææå¡ç±»ãæä¾ï¼å°åºå¤ªé³è¾å°ãç¼å²åºåæãç¹å¯åº¦åæãå¨æåæ®µåæãç©ºé´å³ç³»åæãæå¼åæãæ æ ¼ä»£æ°è¿ç®ãå å åæãè·¯ç±å®ä½ãè·¯ç±æµéè®¡ç®ãè¡¨é¢åæãå°å½¢æ²çè®¡ç®ãæ³°æ£®å¤è¾¹å½¢åæã
 * @example
 * new mapboxgl.supermap.SpatialAnalystService(url)
 *  .bufferAnalysis(params,function(result){
 *    //doSomething
 * })
 * @param {string} url - æå¡çè®¿é®å°åã
 * @param {Object} options - äº¤äºæå¡æ¶æéå¯éåæ°ã
 * @param {string} [options.proxy] - æå¡ä»£çå°åã
 * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦ cookieã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡æ¥æº ISERVER|IPORTAL|ONLINEã
 */

var SpatialAnalystService = /*#__PURE__*/function (_ServiceBase) {
  SpatialAnalystService_inherits(SpatialAnalystService, _ServiceBase);

  var _super = SpatialAnalystService_createSuper(SpatialAnalystService);

  function SpatialAnalystService(url, options) {
    SpatialAnalystService_classCallCheck(this, SpatialAnalystService);

    return _super.call(this, url, options);
  }
  /**
   * @function mapboxgl.supermap.SpatialAnalystService.prototype.getAreaSolarRadiationResult
   * @description å°åºå¤ªé³è¾å°ã
   * @param {SuperMap.mapboxgl} params -æ¥è¯¢ç¸å³åæ°ç±»ã
   * @param {RequestCallback} callback - åè°å½æ°ã
   * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åç»æç±»åã
   */


  SpatialAnalystService_createClass(SpatialAnalystService, [{
    key: "getAreaSolarRadiationResult",
    value: function getAreaSolarRadiationResult(params, callback, resultFormat) {
      var me = this;
      var areaSolarRadiationService = new AreaSolarRadiationService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      areaSolarRadiationService.processAsync(params);
    }
    /**
     * @function mapboxgl.supermap.SpatialAnalystService.prototype.bufferAnalysis
     * @description ç¼å²åºåæã
     * @param {SuperMap.DatasetBufferAnalystParameters} params - æ¥è¯¢ç¸å³åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åç»æç±»åã
     */

  }, {
    key: "bufferAnalysis",
    value: function bufferAnalysis(params, callback, resultFormat) {
      var me = this;
      var bufferAnalystService = new BufferAnalystService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      bufferAnalystService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.SpatialAnalystService.prototype.densityAnalysis
     * @description ç¹å¯åº¦åæã
     * @param {SuperMap.DensityKernelAnalystParameters} params - æ¥è¯¢ç¸å³åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åç»æç±»åã
     */

  }, {
    key: "densityAnalysis",
    value: function densityAnalysis(params, callback, resultFormat) {
      var me = this;
      var densityAnalystService = new DensityAnalystService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      densityAnalystService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.SpatialAnalystService.prototype.generateSpatialData
     * @description å¨æåæ®µåæã
     * @param {SuperMap.GenerateSpatialDataParameters} params - æ¥è¯¢ç¸å³åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åç»æç±»åã
     */

  }, {
    key: "generateSpatialData",
    value: function generateSpatialData(params, callback, resultFormat) {
      var me = this;
      var generateSpatialDataService = new GenerateSpatialDataService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      generateSpatialDataService.processAsync(params);
    }
    /**
     * @function mapboxgl.supermap.SpatialAnalystService.prototype.geoRelationAnalysis
     * @description ç©ºé´å³ç³»åæã
     * @param {SuperMap.GeoRelationAnalystParameters} params - æ¥è¯¢ç¸å³åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åç»æç±»åã
     */

  }, {
    key: "geoRelationAnalysis",
    value: function geoRelationAnalysis(params, callback, resultFormat) {
      var me = this;
      var geoRelationAnalystService = new GeoRelationAnalystService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      geoRelationAnalystService.processAsync(params);
    }
    /**
     * @function mapboxgl.supermap.SpatialAnalystService.prototype.interpolationAnalysis
     * @description æå¼åæã
     * @param {SuperMap.InterpolationRBFAnalystParameters} params - æ¥è¯¢ç¸å³åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åç»æç±»åã
     */

  }, {
    key: "interpolationAnalysis",
    value: function interpolationAnalysis(params, callback, resultFormat) {
      var me = this;
      var interpolationAnalystService = new InterpolationAnalystService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      interpolationAnalystService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.SpatialAnalystService.prototype.mathExpressionAnalysis
     * @description æ æ ¼ä»£æ°è¿ç®ã
     * @param {SuperMap.MathExpressionAnalysisParameters} params - æ¥è¯¢ç¸å³åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åç»æç±»åã
     */

  }, {
    key: "mathExpressionAnalysis",
    value: function mathExpressionAnalysis(params, callback, resultFormat) {
      var me = this;
      var mathExpressionAnalysisService = new MathExpressionAnalysisService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      mathExpressionAnalysisService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.SpatialAnalystService.prototype.overlayAnalysis
     * @description å å åæã
     * @param {(SuperMap.DatasetOverlayAnalystParameters|SuperMap.GeometryOverlayAnalystParameters)} params - å å åæåæ°ç±»ï¼æ¯ææ¹éå ä½è¦ç´ å å åæã 
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åç»æç±»åã
     */

  }, {
    key: "overlayAnalysis",
    value: function overlayAnalysis(params, callback, resultFormat) {
      var me = this;
      var overlayAnalystService = new OverlayAnalystService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      overlayAnalystService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.SpatialAnalystService.prototype.routeCalculateMeasure
     * @description è·¯ç±æµéè®¡ç®ã
     * @param {SuperMap.RouteCalculateMeasureParameters} params - æ¥è¯¢ç¸å³åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åç»æç±»åã
     */

  }, {
    key: "routeCalculateMeasure",
    value: function routeCalculateMeasure(params, callback, resultFormat) {
      var me = this;
      var routeCalculateMeasureService = new RouteCalculateMeasureService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      routeCalculateMeasureService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.SpatialAnalystService.prototype.routeLocate
     * @description è·¯ç±å®ä½ã
     * @param {SuperMap.RouteLocatorParameters} params - æ¥è¯¢ç¸å³åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åç»æç±»åã
     */

  }, {
    key: "routeLocate",
    value: function routeLocate(params, callback, resultFormat) {
      var me = this;
      var routeLocatorService = new RouteLocatorService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      routeLocatorService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.SpatialAnalystService.prototype.surfaceAnalysis
     * @description è¡¨é¢åæã
     * @param {SuperMap.SurfaceAnalystParameters} params - è¡¨é¢åæåæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åç»æç±»åã
     */

  }, {
    key: "surfaceAnalysis",
    value: function surfaceAnalysis(params, callback, resultFormat) {
      var me = this;
      var surfaceAnalystService = new SurfaceAnalystService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      surfaceAnalystService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.SpatialAnalystService.prototype.terrainCurvatureCalculate
     * @description å°å½¢æ²çè®¡ç®ã
     * @param {SuperMap.TerrainCurvatureCalculationParameters} params - æ¥è¯¢ç¸å³åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åç»æç±»åã
     */

  }, {
    key: "terrainCurvatureCalculate",
    value: function terrainCurvatureCalculate(params, callback, resultFormat) {
      var me = this;
      var terrainCurvatureCalculationService = new TerrainCurvatureCalculationService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      terrainCurvatureCalculationService.processAsync(params);
    }
    /**
     * @function mapboxgl.supermap.SpatialAnalystService.prototype.thiessenAnalysis
     * @description æ³°æ£®å¤è¾¹å½¢åæã
     * @param {SuperMap.DatasetThiessenAnalystParameters} params - æ¥è¯¢ç¸å³åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åç»æç±»åã
     */

  }, {
    key: "thiessenAnalysis",
    value: function thiessenAnalysis(params, callback, resultFormat) {
      var me = this;
      var thiessenAnalystService = new ThiessenAnalystService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      });
      thiessenAnalystService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.SpatialAnalystService.prototype.geometrybatchAnalysis
     * @description æ¹éç©ºé´åæã
     * @param {Array} params - æ¹éåæåæ°å¯¹è±¡æ°ç»ï¼åæ¬ï¼
     * @param {string} params.analystName - ç©ºé´åææ¹æ³çåç§°ãåæ¬ï¼</br>
     *                                      "buffer"ï¼"overlay"ï¼"interpolationDensity"ï¼"interpolationidw"ï¼"interpolationRBF"ï¼"interpolationKriging"ï¼"isoregion"ï¼"isoline"ã
     * @param {Object} params.param - ç©ºé´åæç±»åå¯¹åºçè¯·æ±åæ°ï¼åæ¬ï¼</br>
     *                                {SuperMap.GeometryBufferAnalystParameters} ç¼å²åºåæåæ°ç±»ã</br>
     *                                {SuperMap.GeometryOverlayAnalystParameters} å å åæåæ°ç±»ã</br>
     *                                {SuperMap.InterpolationAnalystParameters} æå¼åæåæ°ç±»ã</br>
     *                                {SuperMap.SurfaceAnalystParameters} è¡¨é¢åæåæ°ç±»ã</br>
     * @param {RequestCallback} callback - åè°å½æ°ã
     * @param {SuperMap.DataFormat}  [resultFormat=SuperMap.DataFormat.GEOJSON] - è¿åç»æç±»åã
     */

  }, {
    key: "geometrybatchAnalysis",
    value: function geometrybatchAnalysis(params, callback, resultFormat) {
      var me = this;
      var geometryBatchAnalystService = new GeometryBatchAnalystService(me.url, {
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        },
        format: me._processFormat(resultFormat)
      }); //å¤çæ¹éåæä¸­åä¸ªåç±»ç±»åçåæ°ï¼

      var analystParameters = [];

      for (var i = 0; i < params.length; i++) {
        var tempParameter = params[i];
        analystParameters.push({
          analystName: tempParameter.analystName,
          param: me._processParams(tempParameter.param)
        });
      }

      geometryBatchAnalystService.processAsync(analystParameters);
    }
  }, {
    key: "_processParams",
    value: function _processParams(params) {
      if (!params) {
        return {};
      }

      if (params.bounds) {
        params.bounds = core_Util_Util.toSuperMapBounds(params.bounds);
      } //æå¼åæç¹æ°ç»è½¬æ¢


      if (params.inputPoints) {
        for (var i = 0; i < params.inputPoints.length; i++) {
          var inputPoint = params.inputPoints[i];

          if (core_Util_Util.isArray(inputPoint)) {
            params.inputPoints[i] = {
              x: inputPoint[0],
              y: inputPoint[1],
              tag: inputPoint[2]
            };
          }
        }
      } //ç¹æ°ç»è½¬æ¢


      if (params.points) {
        for (var _i = 0; _i < params.points.length; _i++) {
          var point = params.points[_i];
          params.points[_i] = core_Util_Util.toSuperMapPoint(point);
        }
      } //mapboxglç¹å¯¹è±¡è½¬SuperMapç¹å¯¹è±¡


      if (params.point) {
        params.point = core_Util_Util.toSuperMapPoint(params.point);
      } //åæ­¥å¤æ­mapboxæ°æ®å°±ä¸ºgeojsonæ ¼å¼ ï¼è¿è¡è½¬jsonæ ¼å¼å³å¯
      //æ æ ¼ä»£æ°è¿ç®çèå´


      if (params.extractRegion) {
        params.extractRegion = core_Util_Util.toSuperMapGeometry(params.extractRegion);
      } //è·åæè®¾ç½®è¡¨é¢åæåæ°


      if (params.extractParameter && params.extractParameter.clipRegion) {
        params.extractParameter.clipRegion = core_Util_Util.toSuperMapGeometry(params.extractParameter.clipRegion);
      }

      if (params.clipParam && params.clipParam.clipRegion) {
        params.clipParam.clipRegion = core_Util_Util.toSuperMapGeometry(params.clipParam.clipRegion);
      } //sourceRoute è·¯ç±å¯¹è±¡ãç¨äºéç¨åæï¼è¯¥å¯¹è±¡å¯ä»¥æ¯ç¨æ·èªå·±ç ææå¨æ°æ®æºä¸­æ¥è¯¢å¾å°çç¬¦åæ åçè·¯ç±å¯¹è±¡ï¼geojsonæ ¼å¼


      if (params.sourceRoute) {
        if (params.sourceRoute) {
          var target = {};
          target.type = "LINEM";
          target.parts = [params.sourceRoute.geometry.coordinates.length];
          target.points = [];

          for (var _i2 = 0; _i2 < params.sourceRoute.geometry.coordinates.length; _i2++) {
            var lnglat = params.sourceRoute.geometry.coordinates[_i2]; //measure åºè¯¥å¨ä¼ å¼æ¶è®¾ç½®,

            target.points = target.points.concat({
              x: lnglat[0],
              y: lnglat[1],
              measure: lnglat[2]
            });
          }

          params.sourceRoute = target;
        }
      } //operateRegions æä½é¢å¯¹è±¡éåï¼æ°æ®éå å åæ,è¡¨ç¤ºä¸è¿äºé¢å¯¹è±¡è¿è¡å å åæ


      if (params.operateRegions && core_Util_Util.isArray(params.operateRegions)) {
        params.operateRegions.map(function (geometry, key) {
          params.operateRegions[key] = core_Util_Util.toSuperMapGeometry(geometry);
          return params.operateRegions[key];
        });
      } //å å åæï¼å ä½æ°æ®æº æ¯ææ ¼å¼:GeoJson


      if (params.sourceGeometry) {
        var SRID = null;

        if (params.sourceGeometrySRID) {
          SRID = params.sourceGeometrySRID;
        }

        params.sourceGeometry = core_Util_Util.toSuperMapGeometry(params.sourceGeometry);

        if (SRID) {
          params.sourceGeometry.SRID = SRID;
        }

        delete params.sourceGeometry.sourceGeometrySRID;
      }

      if (params.operateGeometry) {
        params.operateGeometry = core_Util_Util.toSuperMapGeometry(params.operateGeometry);
      } //æ¯æä¼ å¥å¤ä¸ªå ä½è¦ç´ è¿è¡å å åæï¼


      if (params.sourceGeometries) {
        var sourceGeometries = [];

        for (var k = 0; k < params.sourceGeometries.length; k++) {
          sourceGeometries.push(core_Util_Util.toSuperMapGeometry(params.sourceGeometries[k]));
        }

        params.sourceGeometries = sourceGeometries;
      } //æ¯æä¼ å¥å¤ä¸ªå ä½è¦ç´ è¿è¡å å åæï¼


      if (params.operateGeometries) {
        var operateGeometries = [];

        for (var j = 0; j < params.operateGeometries.length; j++) {
          operateGeometries.push(core_Util_Util.toSuperMapGeometry(params.operateGeometries[j]));
        }

        params.operateGeometries = operateGeometries;
      } //components å ä½å¯¹è±¡æ°ç»


      if (params.sourceRoute && params.sourceRoute.components && core_Util_Util.isArray(params.sourceRoute.components)) {
        params.sourceRoute.components.map(function (geometry, key) {
          params.sourceRoute.components[key] = core_Util_Util.toSuperMapGeometry(geometry);
          return params.sourceRoute.components[key];
        });
      }

      return params;
    }
  }, {
    key: "_processFormat",
    value: function _processFormat(resultFormat) {
      return resultFormat ? resultFormat : DataFormat.GEOJSON;
    }
  }]);

  return SpatialAnalystService;
}(ServiceBase);
(external_mapboxgl_default()).supermap.SpatialAnalystService = SpatialAnalystService;
// CONCATENATED MODULE: ./src/mapboxgl/services/ThemeService.js
function services_ThemeService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { services_ThemeService_typeof = function _typeof(obj) { return typeof obj; }; } else { services_ThemeService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return services_ThemeService_typeof(obj); }

function services_ThemeService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function services_ThemeService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function services_ThemeService_createClass(Constructor, protoProps, staticProps) { if (protoProps) services_ThemeService_defineProperties(Constructor.prototype, protoProps); if (staticProps) services_ThemeService_defineProperties(Constructor, staticProps); return Constructor; }

function services_ThemeService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) services_ThemeService_setPrototypeOf(subClass, superClass); }

function services_ThemeService_setPrototypeOf(o, p) { services_ThemeService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return services_ThemeService_setPrototypeOf(o, p); }

function services_ThemeService_createSuper(Derived) { var hasNativeReflectConstruct = services_ThemeService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = services_ThemeService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = services_ThemeService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return services_ThemeService_possibleConstructorReturn(this, result); }; }

function services_ThemeService_possibleConstructorReturn(self, call) { if (call && (services_ThemeService_typeof(call) === "object" || typeof call === "function")) { return call; } return services_ThemeService_assertThisInitialized(self); }

function services_ThemeService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function services_ThemeService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function services_ThemeService_getPrototypeOf(o) { services_ThemeService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return services_ThemeService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/




/**
 * @class mapboxgl.supermap.ThemeService
 * @category  iServer Map Theme
 * @classdesc ä¸é¢å¾æå¡ç±»ã
 * @extends {mapboxgl.supermap.ServiceBase}
 * @example
 * new mapboxgl.supermap.ThemeService(url,{
 *      projection:projection
 * }).getThemeInfo(params,function(result){
 *      //doSomething
 * });
 * @param {string} url - æå¡çè®¿é®å°åã 
 * @param {Object} options - äº¤äºæå¡æ¶æéå¯éåæ°ã
 * @param {string} [options.proxy] - æå¡ä»£çå°åã
 * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦ cookieã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡æ¥æº ISERVER|IPORTAL|ONLINEã
 */

var ThemeService = /*#__PURE__*/function (_ServiceBase) {
  services_ThemeService_inherits(ThemeService, _ServiceBase);

  var _super = services_ThemeService_createSuper(ThemeService);

  function ThemeService(url, options) {
    services_ThemeService_classCallCheck(this, ThemeService);

    return _super.call(this, url, options);
  }
  /**
   * @function mapboxgl.supermap.ThemeService.prototype.getThemeInfo
   * @description è·åä¸é¢å¾ä¿¡æ¯ã
   * @param {SuperMap.ThemeParameters} params - ä¸é¢å¾åæ°ç±»ã
   * @param {RequestCallback} callback - åè°å½æ°ã
   */


  services_ThemeService_createClass(ThemeService, [{
    key: "getThemeInfo",
    value: function getThemeInfo(params, callback) {
      var me = this;
      var themeService = new ThemeService_ThemeService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      themeService.processAsync(params);
    }
  }]);

  return ThemeService;
}(ServiceBase);
(external_mapboxgl_default()).supermap.ThemeService = ThemeService;
// CONCATENATED MODULE: ./src/mapboxgl/services/TrafficTransferAnalystService.js
function TrafficTransferAnalystService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { TrafficTransferAnalystService_typeof = function _typeof(obj) { return typeof obj; }; } else { TrafficTransferAnalystService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return TrafficTransferAnalystService_typeof(obj); }

function TrafficTransferAnalystService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function TrafficTransferAnalystService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function TrafficTransferAnalystService_createClass(Constructor, protoProps, staticProps) { if (protoProps) TrafficTransferAnalystService_defineProperties(Constructor.prototype, protoProps); if (staticProps) TrafficTransferAnalystService_defineProperties(Constructor, staticProps); return Constructor; }

function TrafficTransferAnalystService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) TrafficTransferAnalystService_setPrototypeOf(subClass, superClass); }

function TrafficTransferAnalystService_setPrototypeOf(o, p) { TrafficTransferAnalystService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return TrafficTransferAnalystService_setPrototypeOf(o, p); }

function TrafficTransferAnalystService_createSuper(Derived) { var hasNativeReflectConstruct = TrafficTransferAnalystService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = TrafficTransferAnalystService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = TrafficTransferAnalystService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return TrafficTransferAnalystService_possibleConstructorReturn(this, result); }; }

function TrafficTransferAnalystService_possibleConstructorReturn(self, call) { if (call && (TrafficTransferAnalystService_typeof(call) === "object" || typeof call === "function")) { return call; } return TrafficTransferAnalystService_assertThisInitialized(self); }

function TrafficTransferAnalystService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function TrafficTransferAnalystService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function TrafficTransferAnalystService_getPrototypeOf(o) { TrafficTransferAnalystService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return TrafficTransferAnalystService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class mapboxgl.supermap.TrafficTransferAnalystService
 * @extends mapboxgl.supermap.ServiceBase
 * @category  iServer TrafficTransferAnalyst
 * @classdesc äº¤éæ¢ä¹åææå¡ç±»ã
 * @example
 * new mapboxgl.supermap.TrafficTransferAnalystService(url)
 *  .queryStop(params,function(result){
 *      //doSomething
 * })
 * @param {string} url - æå¡å°åã
 * @param {Object} option - åæ°ã
 * @param {string} [options.proxy] - æå¡ä»£çå°åã
 * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦ cookieã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @param {SuperMap.ServerType} [options.serverType=SuperMap.ServerType.ISERVER] - æå¡æ¥æº ISERVER|IPORTAL|ONLINEã
 */

var TrafficTransferAnalystService = /*#__PURE__*/function (_ServiceBase) {
  TrafficTransferAnalystService_inherits(TrafficTransferAnalystService, _ServiceBase);

  var _super = TrafficTransferAnalystService_createSuper(TrafficTransferAnalystService);

  function TrafficTransferAnalystService(url, options) {
    TrafficTransferAnalystService_classCallCheck(this, TrafficTransferAnalystService);

    return _super.call(this, url, options);
  }
  /**
   * @function mapboxgl.supermap.TrafficTransferAnalystService.prototype.queryStop
   * @description ç«ç¹æ¥è¯¢æå¡ã
   * @param {SuperMap.StopQueryParameters} params - æ¥è¯¢ç¸å³åæ°ç±»ã
   * @param {RequestCallback} callback - åè°å½æ°ã
   */


  TrafficTransferAnalystService_createClass(TrafficTransferAnalystService, [{
    key: "queryStop",
    value: function queryStop(params, callback) {
      var me = this;
      var stopQueryService = new StopQueryService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      stopQueryService.processAsync(params);
    }
    /**
     * @function mapboxgl.supermap.TrafficTransferAnalystService.prototype.analysisTransferPath
     * @description äº¤éæ¢ä¹çº¿è·¯æ¥è¯¢æå¡ã
     * @param {SuperMap.TransferPathParameters} params - æ¥è¯¢ç¸å³åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     */

  }, {
    key: "analysisTransferPath",
    value: function analysisTransferPath(params, callback) {
      var me = this;
      var transferPathService = new TransferPathService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      transferPathService.processAsync(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.TrafficTransferAnalystService.prototype.analysisTransferSolution
     * @description äº¤éæ¢ä¹æ¹æ¡æ¥è¯¢æå¡ã
     * @param {SuperMap.TransferSolutionParameters} params - æ¥è¯¢ç¸å³åæ°ç±»ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     */

  }, {
    key: "analysisTransferSolution",
    value: function analysisTransferSolution(params, callback) {
      var me = this;
      var transferSolutionService = new TransferSolutionService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      transferSolutionService.processAsync(me._processParams(params));
    }
  }, {
    key: "_processParams",
    value: function _processParams(params) {
      if (!params) {
        return {};
      }

      if (params.transferLines && !core_Util_Util.isArray(params.transferLines)) {
        params.transferLines = [params.transferLines];
      }

      if (params.points && core_Util_Util.isArray(params.points)) {
        params.points.map(function (point, key) {
          params.points[key] = point instanceof (external_mapboxgl_default()).LngLat ? {
            x: point.lng,
            y: point.lat
          } : point;
          return params.points[key];
        });
      }

      return params;
    }
  }]);

  return TrafficTransferAnalystService;
}(ServiceBase);
(external_mapboxgl_default()).supermap.TrafficTransferAnalystService = TrafficTransferAnalystService;
// CONCATENATED MODULE: ./src/mapboxgl/services/WebPrintingJobService.js
function WebPrintingJobService_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { WebPrintingJobService_typeof = function _typeof(obj) { return typeof obj; }; } else { WebPrintingJobService_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return WebPrintingJobService_typeof(obj); }

function WebPrintingJobService_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function WebPrintingJobService_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function WebPrintingJobService_createClass(Constructor, protoProps, staticProps) { if (protoProps) WebPrintingJobService_defineProperties(Constructor.prototype, protoProps); if (staticProps) WebPrintingJobService_defineProperties(Constructor, staticProps); return Constructor; }

function WebPrintingJobService_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) WebPrintingJobService_setPrototypeOf(subClass, superClass); }

function WebPrintingJobService_setPrototypeOf(o, p) { WebPrintingJobService_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return WebPrintingJobService_setPrototypeOf(o, p); }

function WebPrintingJobService_createSuper(Derived) { var hasNativeReflectConstruct = WebPrintingJobService_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = WebPrintingJobService_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = WebPrintingJobService_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return WebPrintingJobService_possibleConstructorReturn(this, result); }; }

function WebPrintingJobService_possibleConstructorReturn(self, call) { if (call && (WebPrintingJobService_typeof(call) === "object" || typeof call === "function")) { return call; } return WebPrintingJobService_assertThisInitialized(self); }

function WebPrintingJobService_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function WebPrintingJobService_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function WebPrintingJobService_getPrototypeOf(o) { WebPrintingJobService_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return WebPrintingJobService_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





/**
 * @class mapboxgl.supermap.WebPrintingJobService
 * @category  iServer WebPrintingJob
 * @version 10.1.0
 * @classdesc Web æå°æå¡ç±»ã
 *            æä¾ï¼åå»º Web æå°ä»»å¡ï¼è·å Web æå°ä»»å¡åå®¹ï¼è·å Web æå°è¾åºææ¡£æµï¼è·å Web æå°æå¡çå¸å±æ¨¡æ¿ä¿¡æ¯ã
 * @extends {mapboxgl.supermap.ServiceBase}
 * @param {string} url - èµæºæ ¹å°åãè¯·æ±æå°å°å¾æå¡ç URL åºä¸ºï¼http://{æå¡å¨å°å}:{æå¡ç«¯å£å·}/iserver/services/webprinting/rest/webprinting/v1ã
 * @param {Object} options - æå¡äº¤äºæ¶æéçå¯éåæ°ã
 * @param {string} [options.proxy] - æå¡ä»£çå°åã
 * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦ cookieã
 * @param {boolean} [options.crossOrigin] - æ¯å¦åè®¸è·¨åè¯·æ±ã
 * @param {Object} [options.headers] - è¯·æ±å¤´ã
 * @example
 * new mapboxgl.supermap.WebPrintingJobService(url)
 * .createWebPrintingJob(param,function(result){
 *     //doSomething
 * })
 */

var WebPrintingJobService = /*#__PURE__*/function (_ServiceBase) {
  WebPrintingJobService_inherits(WebPrintingJobService, _ServiceBase);

  var _super = WebPrintingJobService_createSuper(WebPrintingJobService);

  function WebPrintingJobService(url, options) {
    WebPrintingJobService_classCallCheck(this, WebPrintingJobService);

    return _super.call(this, url, options);
  }
  /**
   * @function mapboxgl.supermap.WebPrintingJobService.prototype.createWebPrintingJob
   * @description åå»º Web æå°ä»»å¡ã
   * @param {SuperMap.WebPrintingJobParameters} params - æå°çè¯·æ±åæ°ã
   * @param {RequestCallback} callback - åè°å½æ°ã
   */


  WebPrintingJobService_createClass(WebPrintingJobService, [{
    key: "createWebPrintingJob",
    value: function createWebPrintingJob(params, callback) {
      if (!params) {
        return;
      }

      var me = this;
      var webPrintingService = new WebPrintingService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      webPrintingService.createWebPrintingJob(me._processParams(params));
    }
    /**
     * @function mapboxgl.supermap.WebPrintingJobService.prototype.getPrintingJob
     * @description è·å Web æå°è¾åºææ¡£ä»»å¡ã
     * @param {String} jobId - Web æå°è¾å¥ææ¡£ä»»å¡ Idã
     * @param {RequestCallback} callback - åè°å½æ°ã
     */

  }, {
    key: "getPrintingJob",
    value: function getPrintingJob(jobId, callback) {
      var me = this;
      var webPrintingService = new WebPrintingService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      webPrintingService.getPrintingJob(jobId);
    }
    /**
     * @function mapboxgl.supermap.WebPrintingJobService.prototype.getPrintingJobResult
     * @description è·å Web æå°ä»»å¡çè¾åºææ¡£ã
     * @param {String} jobId - Web æå°è¾å¥ææ¡£ä»»å¡ Idã
     * @param {RequestCallback} callback - åè°å½æ°ã
     */

  }, {
    key: "getPrintingJobResult",
    value: function getPrintingJobResult(jobId, callback) {
      var me = this;
      var webPrintingService = new WebPrintingService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      webPrintingService.getPrintingJobResult(jobId);
    }
    /**
     * @function mapboxgl.supermap.WebPrintingJobService.prototype.getLayoutTemplates
     * @description æ¥è¯¢ Web æå°æå¡ææå¯ç¨çæ¨¡æ¿ä¿¡æ¯ã
     * @param {RequestCallback} callback - åè°å½æ°ã
     */

  }, {
    key: "getLayoutTemplates",
    value: function getLayoutTemplates(callback) {
      var me = this;
      var webPrintingService = new WebPrintingService(me.url, {
        proxy: me.options.proxy,
        withCredentials: me.options.withCredentials,
        crossOrigin: me.options.crossOrigin,
        headers: me.options.headers,
        serverType: me.options.serverType,
        eventListeners: {
          scope: me,
          processCompleted: callback,
          processFailed: callback
        }
      });
      webPrintingService.getLayoutTemplates();
    }
  }, {
    key: "_processParams",
    value: function _processParams(params) {
      if (params.layoutOptions && params.layoutOptions.littleMapOptions) {
        params.layoutOptions.littleMapOptions.center = this._toPointObject(params.layoutOptions.littleMapOptions.center);
      }

      if (params.exportOptions) {
        params.exportOptions.center = this._toPointObject(params.exportOptions.center);
      }

      return params;
    }
  }, {
    key: "_toPointObject",
    value: function _toPointObject(point) {
      if (core_Util_Util.isArray(point)) {
        return {
          x: point[0],
          y: point[1]
        };
      } else if (point instanceof SuperMap.Geometry.Point || point instanceof (external_mapboxgl_default()).Point) {
        return {
          x: point.x,
          y: point.y
        };
      } else if (point instanceof (external_mapboxgl_default()).LngLat) {
        return {
          x: point.lng,
          y: point.lat
        };
      }

      return point;
    }
  }]);

  return WebPrintingJobService;
}(ServiceBase);
(external_mapboxgl_default()).supermap.WebPrintingJobService = WebPrintingJobService;
// CONCATENATED MODULE: ./src/mapboxgl/services/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/



















// CONCATENATED MODULE: external "function(){try{return convert}catch(e){return {}}}()"
var external_function_try_return_convert_catch_e_return_namespaceObject = function(){try{return convert}catch(e){return {}}}();
var external_function_try_return_convert_catch_e_return_default = /*#__PURE__*/__webpack_require__.n(external_function_try_return_convert_catch_e_return_namespaceObject);

// CONCATENATED MODULE: external "function(){try{return canvg}catch(e){return {}}}()"
var external_function_try_return_canvg_catch_e_return_namespaceObject = function(){try{return canvg}catch(e){return {}}}();
var external_function_try_return_canvg_catch_e_return_default = /*#__PURE__*/__webpack_require__.n(external_function_try_return_canvg_catch_e_return_namespaceObject);

// CONCATENATED MODULE: ./src/mapboxgl/mapping/WebMap.js
function WebMap_typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { WebMap_typeof = function _typeof(obj) { return typeof obj; }; } else { WebMap_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return WebMap_typeof(obj); }

function WebMap_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function WebMap_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function WebMap_createClass(Constructor, protoProps, staticProps) { if (protoProps) WebMap_defineProperties(Constructor.prototype, protoProps); if (staticProps) WebMap_defineProperties(Constructor, staticProps); return Constructor; }

function WebMap_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) WebMap_setPrototypeOf(subClass, superClass); }

function WebMap_setPrototypeOf(o, p) { WebMap_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return WebMap_setPrototypeOf(o, p); }

function WebMap_createSuper(Derived) { var hasNativeReflectConstruct = WebMap_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = WebMap_getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = WebMap_getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return WebMap_possibleConstructorReturn(this, result); }; }

function WebMap_possibleConstructorReturn(self, call) { if (call && (WebMap_typeof(call) === "object" || typeof call === "function")) { return call; } return WebMap_assertThisInitialized(self); }

function WebMap_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function WebMap_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }

function WebMap_getPrototypeOf(o) { WebMap_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return WebMap_getPrototypeOf(o); }

/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/





(external_mapboxgl_default()).supermap = (external_mapboxgl_default()).supermap || {};
var MB_SCALEDENOMINATOR_3857 = ['559082264.0287178', '279541132.0143589', '139770566.0071794', '69885283.00358972', '34942641.50179486', '17471320.75089743', '8735660.375448715', '4367830.1877224357', '2183915.093862179', '1091957.546931089', '545978.7734655447', '272989.7734655447', '272989.3867327723', '136494.6933663862', '68247.34668319309', '34123.67334159654', '17061.83667079827', '8530.918335399136', '4265.459167699568', '2132.729583849784'];
var MB_SCALEDENOMINATOR_4326 = ['5.590822640287176E8', '2.795411320143588E8', '1.397705660071794E8', '6.98852830035897E7', '3.494264150179485E7', '1.7471320750897426E7', '8735660.375448713', '4367830.187724357', '2183915.0938621783', '1091957.5469310891', '545978.7734655446', '272989.3867327723', '136494.69336638614', '68247.34668319307', '34123.673341596535', '17061.836670798268', '8530.918335399134'];
var DEFAULT_WELLKNOWNSCALESET = ['GoogleCRS84Quad', 'GoogleMapsCompatible'];
/**
 * @class mapboxgl.supermap.WebMap
 * @version 9.1.2
 * @category  iPortal/Online
 * @classdesc å¯¹æ¥ iPortal/Online å°å¾ç±»ãç®åæ¯æå°å¾åæ ç³»åæ¬ï¼'EPSG:3857'ï¼'EPSG:4326'ï¼'EPSG:4490'ï¼'EPSG:4214'ï¼'EPSG:4610'ã
 * <div style="padding: 20px;border: 1px solid #eee;border-left-width: 5px;border-radius: 3px;border-left-color: #ce4844;">
 *      <p style="color: #ce4844">Notice</p>
 *      <p style="font-size: 13px">è¯¥åè½ä¾èµ <a href='https://iclient.supermap.io/web/libs/geostats/geostats.js'>geostats</a> å <a href='https://iclient.supermap.io/web/libs/jsonsql/jsonsql.js'>JsonSql</a> æä»¶ï¼è¯·ç¡®è®¤å¼å¥è¯¥æä»¶ã</p>
 *      `<script type="text/javascript" src="https://iclient.supermap.io/web/libs/geostats/geostats.js"></script>`</br>
 *      `<script type="text/javascript" src="https://iclient.supermap.io/web/libs/jsonsql/jsonsql.js"></script>`
 * </div>
 * @param {number} id - iPortal|Online å°å¾ IDã
 * @param {Object} options - åæ°ã
 * @param {string} [options.target='map'] - å°å¾å®¹å¨ IDã
 * @param {string} [options.server="https://www.supermapol.com"] - å°å¾çå°åã
 * @param {string} [options.credentialKey] - å­è¯å¯é¥ã
 * @param {string} [options.credentialValue] - å­è¯å¼ã
 * @param {boolean} [options.withCredentials=false] - è¯·æ±æ¯å¦æºå¸¦ cookieã
 * @param {boolean} [options.excludePortalProxyUrl] - server ä¼ éè¿æ¥ç URL æ¯å¦å¸¦æä»£çã
 * @fires mapboxgl.supermap.WebMap#getmapfailed
 * @fires mapboxgl.supermap.WebMap#getwmtsfailed
 * @fires mapboxgl.supermap.WebMap#getlayersfailed
 * @fires mapboxgl.supermap.WebMap#getfeaturesfailed
 * @fires mapboxgl.supermap.WebMap#addlayerssucceeded
 * @extends {mapboxgl.Evented}
 */

var WebMap = /*#__PURE__*/function (_mapboxgl$Evented) {
  WebMap_inherits(WebMap, _mapboxgl$Evented);

  var _super = WebMap_createSuper(WebMap);

  /**
   * @constructs
   * @version 9.1.2
   */
  function WebMap(id, options) {
    var _this2;

    WebMap_classCallCheck(this, WebMap);

    _this2 = _super.call(this);
    _this2.mapId = id;
    options = options || {};
    _this2.server = options.server || 'https://www.supermapol.com';
    _this2.credentialKey = options.credentialKey;
    _this2.credentialValue = options.credentialValue;
    _this2.withCredentials = options.withCredentials || false;
    _this2.target = options.target || 'map';

    _this2._createWebMap();

    return _this2;
  }
  /**
   * @function mapboxgl.supermap.WebMap.prototype.resize
   * @description map resizeã
    * @version 9.1.2
   */


  WebMap_createClass(WebMap, [{
    key: "resize",
    value: function resize() {
      this.map.resize();
    }
    /**
     * @function mapboxgl.supermap.WebMap.prototype.setMapId
     * @param {string} mapId - webMap å°å¾ IDã
     * @description è®¾ç½® WebMap IDã
      * @version 9.1.2
     */

  }, {
    key: "setMapId",
    value: function setMapId(mapId) {
      this.mapId = mapId;

      this._createWebMap();
    }
    /**
    * @function mapboxgl.supermap.WebMap.prototype.setWebMapOptions
    * @param {Object} webMapOptions - webMap åæ°ã
    * @description è®¾ç½® webMap åæ°ã
     * @version 9.1.2
    */

  }, {
    key: "setWebMapOptions",
    value: function setWebMapOptions(webMapOptions) {
      this.server = webMapOptions.server;

      this._createWebMap();
    }
    /**
    * @function mapboxgl.supermap.WebMap.prototype.setMapOptions
    * @param {Object} mapOptions - map åæ°ã
    * @description è®¾ç½® map åæ°ã
     * @version 9.1.2
    */

  }, {
    key: "setMapOptions",
    value: function setMapOptions(mapOptions) {
      var center = mapOptions.center,
          zoom = mapOptions.zoom,
          maxBounds = mapOptions.maxBounds,
          minZoom = mapOptions.minZoom,
          maxZoom = mapOptions.maxZoom,
          isWorldCopy = mapOptions.isWorldCopy,
          bearing = mapOptions.bearing,
          pitch = mapOptions.pitch;
      center && center.length && this.map.setCenter(center);
      zoom && this.map.setZoom(zoom);
      maxBounds && this.map.setMaxBounds(maxBounds);
      minZoom && this.map.setMinZoom(minZoom);
      maxZoom && this.map.setMaxZoom(maxZoom);
      isWorldCopy && this.map.setRenderWorldCopies(isWorldCopy);
      bearing && this.map.setBearing(bearing);
      pitch && this.map.setPitch(pitch);
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._createWebMap
     * @description ç»éçªå£åæ·»å å°å¾å¾å±ã
     */

  }, {
    key: "_createWebMap",
    value: function _createWebMap() {
      var urlArr = this.server.split('');

      if (urlArr[urlArr.length - 1] !== '/') {
        this.server += '/';
      }

      var mapUrl = this.server + 'web/maps/' + this.mapId + '/map';

      if (this.credentialValue && this.credentialKey) {
        mapUrl += '?' + this.credentialKey + '=' + this.credentialValue;
      }

      var filter = 'getUrlResource.json?url=';

      if (this.excludePortalProxyUrl && this.server.indexOf(filter) > -1) {
        //å¤§å±éæ±,æèæå ä¸ä»£çç
        var urlArray = this.server.split(filter);

        if (urlArray.length > 1) {
          mapUrl = urlArray[0] + filter + this.server + 'web/maps/' + this.mapId + '/map.json';
        }
      }

      this._getMapInfo(mapUrl);
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._createMap
     * @description åå»ºå°å¾ã
     */

  }, {
    key: "_createMap",
    value: function _createMap(mapInfo) {
      // è·åå­ä½æ ·å¼
      var fonts = [];
      var layers = mapInfo.layers; // è·å label å¾å±å­ä½ç±»å

      if (layers && layers.length > 0) {
        layers.forEach(function (layer) {
          layer.labelStyle && fonts.push(layer.labelStyle.fontFamily);
        }, this);
      }

      fonts.push("'supermapol-icons'");
      var fontFamilys = fonts.join(','); // zoom center

      var oldcenter = mapInfo.center,
          zoom = mapInfo.level || 0,
          center,
          zoomBase = 0; // zoom = zoom === 0 ? 0 : zoom - 1;

      if (mapInfo.minScale && mapInfo.maxScale) {
        zoomBase = this._transformScaleToZoom(mapInfo.minScale, (external_mapboxgl_default()).CRS ? external_mapboxgl_default().CRS.get(this.baseProjection) : 'EPSG:3857');
      } else {
        var e = this._getResolution((external_mapboxgl_default()).CRS ? external_mapboxgl_default().CRS.get(this.baseProjection).getExtent() : [-20037508.3427892, -20037508.3427892, 20037508.3427892, 20037508.3427892]) / this._getResolution(mapInfo.extent);

        zoomBase = +Math.log(e) / Math.LN2.toFixed(2);
      }

      zoom += zoomBase;
      center = oldcenter ? this._unproject([oldcenter.x, oldcenter.y]) : new (external_mapboxgl_default()).LngLat(0, 0); // åå§å map

      this.map = new (external_mapboxgl_default()).Map({
        container: this.target,
        center: center,
        zoom: zoom,
        style: {
          version: 8,
          sources: {},
          // "glyphs": 'https://iclient.supermap.io/iserver/services/map-beijing/rest/maps/beijingMap/tileFeature/sdffonts/{fontstack}/{range}.pbf',
          layers: []
        },
        crs: this.baseProjection,
        localIdeographFontFamily: fontFamilys || ''
      });
      this.fire('mapinitialized');
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._getMapInfo
     * @description è·åå°å¾ç JSON ä¿¡æ¯ã
     * @param {string} url - è¯·æ±å°å¾ç urlã
     */

  }, {
    key: "_getMapInfo",
    value: function _getMapInfo(url) {
      var _this3 = this;

      var mapUrl = url.indexOf('.json') === -1 ? "".concat(url, ".json") : url;
      FetchRequest.get(mapUrl, null, {
        withCredentials: this.withCredentials
      }).then(function (response) {
        return response.json();
      }).then(function (mapInfo) {
        _this3.baseProjection = mapInfo.projection; //å­å¨å°å¾çåç§°ä»¥åæè¿°ç­ä¿¡æ¯ï¼è¿åç»ç¨æ·

        _this3.mapParams = {
          title: mapInfo.title,
          description: mapInfo.description
        };
        var projectionMap = {
          'EPSG:4490': 'EPSG:4490',
          'EPSG:4214': 'EPSG:4214',
          'EPSG:4610': 'EPSG:4610',
          'EPSG:3857': 'EPSG:3857',
          'EPSG:4326': 'EPSG:4326'
        }; // åæ ç³»å¼å¸¸å¤ç

        if (_this3.baseProjection in projectionMap) {
          _this3._createMap(mapInfo, _this3.mapSetting);

          var layers = mapInfo.layers;

          _this3.map.on('load', function () {
            _this3._addBaseMap(mapInfo);

            if (!layers || layers.length === 0) {
              _this3._sendMapToUser(0, 0);
            } else {
              _this3._addLayers(layers);
            }
          });
        } else {
          throw Error(Lang.i18n('msg_crsunsupport'));
        }
      })["catch"](function (error) {
        /**
         * @event mapboxgl.supermap.WebMap#getmapfailed
         * @description è·åå°å¾ä¿¡æ¯å¤±è´¥ã
         * @property {Object} error - å¤±è´¥åå ã
         */
        _this3.fire('getmapfailed', {
          error: error
        });
      });
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._addBaseMap
     * @description æ·»å åºå¾ã
     * @param {Object} mapInfo - map ä¿¡æ¯ã
     */

  }, {
    key: "_addBaseMap",
    value: function _addBaseMap(mapInfo) {
      this._createBaseLayer(mapInfo);
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._createBaseLayer
     * @description åå»ºåºå¾ã
     * @param {Object} mapInfo - map ä¿¡æ¯ã
     */

  }, {
    key: "_createBaseLayer",
    value: function _createBaseLayer(mapInfo) {
      var layerInfo = mapInfo.baseLayer || mapInfo;
      var layerType = layerInfo.layerType; //åºå¾årestå°å¾å¼å®¹

      if (layerType.indexOf('TIANDITU_VEC') > -1 || layerType.indexOf('TIANDITU_IMG') > -1 || layerType.indexOf('TIANDITU_TER') > -1) {
        layerType = layerType.substr(0, 12);
      }

      var mapUrls = {
        CLOUD: 'http://t2.dituhui.com/FileService/image?map=quanguo&type=web&x={x}&y={y}&z={z}',
        CLOUD_BLACK: 'http://t3.dituhui.com/MapService/getGdp?x={x}&y={y}&z={z}',
        OSM: 'http://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png',
        GOOGLE: 'https://www.google.cn/maps/vt/pb=!1m4!1m3!1i{z}!2i{x}!3i{y}!2m3!1e0!2sm!3i380072576!3m8!2szh-CN!3scn!5e1105!12m4!1e68!2m2!1sset!2sRoadmap!4e0!5m1!1e0',
        GOOGLE_CN: 'https://mt{0-3}.google.cn/vt/lyrs=m&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}',
        JAPAN_STD: 'https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png',
        JAPAN_PALE: 'https://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png',
        JAPAN_RELIEF: 'https://cyberjapandata.gsi.go.jp/xyz/relief/{z}/{x}/{y}.png',
        JAPAN_ORT: 'https://cyberjapandata.gsi.go.jp/xyz/ort/{z}/{x}/{y}.jpg'
      },
          url;

      switch (layerType) {
        case 'TIANDITU_VEC':
        case 'TIANDITU_IMG':
        case 'TIANDITU_TER':
          this._createTiandituLayer(mapInfo);

          break;

        case 'BING':
          this._createBingLayer(layerInfo.name);

          break;

        case 'WMS':
          this._createWMSLayer(layerInfo);

          break;

        case 'WMTS':
          this._createWMTSLayer(layerInfo);

          break;

        case 'TILE':
        case 'SUPERMAP_REST':
          this._createDynamicTiledLayer(layerInfo);

          break;

        case 'CLOUD':
        case 'CLOUD_BLACK':
        case 'OSM':
        case 'JAPAN_ORT':
        case 'JAPAN_RELIEF':
        case 'JAPAN_PALE':
        case 'JAPAN_STD':
        case 'GOOGLE_CN':
        case 'GOOGLE':
          url = mapUrls[layerType];

          this._createXYZLayer(layerInfo, url);

          break;

        case 'MAPBOXSTYLE':
          this._createMapboxStyle(layerInfo);

          break;

        default:
          break;
      }
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._createMapboxStyle
     * @description åå»º Mapbox æ ·å¼ã
     * @param {Object} mapInfo - map ä¿¡æ¯ã
     */

  }, {
    key: "_createMapboxStyle",
    value: function _createMapboxStyle(mapInfo) {
      var _this = this,
          _mapInfo$dataSource = mapInfo.dataSource,
          dataSource = _mapInfo$dataSource === void 0 ? {} : _mapInfo$dataSource,
          serverId = dataSource.serverId,
          url = dataSource.url,
          styleUrl;

      styleUrl = serverId !== undefined ? "".concat(this.server, "web/datas/").concat(serverId, "/download") : url;
      FetchRequest.get(styleUrl, null, {
        withCredentials: this.withCredentials,
        withoutFormatSuffix: true,
        headers: {
          'Content-Type': 'application/json;chartset=uft-8'
        }
      }).then(function (response) {
        return response.json();
      }).then(function (style) {
        _this._matchStyleObject(style);

        _this.map.setStyle(style);
      });
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._matchStyleObject
     * @description æ¢å¤ style ä¸ºæ åæ ¼å¼ã
     * @param {Object} style - mapbox æ ·å¼ã
     */

  }, {
    key: "_matchStyleObject",
    value: function _matchStyleObject(style) {
      var sprite = style.sprite,
          glyphs = style.glyphs;

      if (sprite && WebMap_typeof(sprite) === 'object') {
        style.sprite = Object.values(sprite)[0];
      }

      if (glyphs && WebMap_typeof(glyphs) === 'object') {
        style.glyphs = Object.values(glyphs)[0];
      }
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._createTiandituLayer
     * @description åå»ºå¤©å°å¾åºå¾ã
     * @param {Object} mapInfo - map ä¿¡æ¯ã
     */

  }, {
    key: "_createTiandituLayer",
    value: function _createTiandituLayer(mapInfo) {
      var tiandituUrls = this._getTiandituUrl(mapInfo);

      var layerType = mapInfo.baseLayer.layerType;
      var isLabel = Boolean(mapInfo.baseLayer.labelLayerVisible);
      var labelUrl = tiandituUrls['labelUrl'];
      var tiandituUrl = tiandituUrls['tiandituUrl'];

      this._addBaselayer(tiandituUrl, 'tianditu-layers-' + layerType);

      isLabel && this._addBaselayer(labelUrl, 'tianditu-label-layers-' + layerType);
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._createWMTSLayer
     * @description åå»º WMTS åºå¾ã
     * @param {Object} mapInfo - map ä¿¡æ¯ã
     */

  }, {
    key: "_createWMTSLayer",
    value: function _createWMTSLayer(layerInfo) {
      var _this4 = this;

      var wmtsUrl = this._getWMTSUrl(layerInfo);

      this._filterWMTSIsMatched(layerInfo, function (isMatched, matchMaxZoom) {
        isMatched && _this4._addBaselayer([wmtsUrl], 'wmts-layers' + layerInfo.name, 0, matchMaxZoom);
      });
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._filterWMTSIsMatched
     * @description è¿æ»¤è½å¤è·mapboxglå¹éçwmtsæå¡ã
     * @param {Object} mapInfo - map ä¿¡æ¯ã
     * @callback matchedCallback
     */

  }, {
    key: "_filterWMTSIsMatched",
    value: function _filterWMTSIsMatched(mapInfo, matchedCallback) {
      var _this5 = this;

      var isMatched = false,
          matchMaxZoom = 22,
          url = mapInfo.url;
      var options = {
        withCredentials: false,
        withoutFormatSuffix: true
      };
      FetchRequest.get(url, null, options).then(function (response) {
        return response.text();
      }).then(function (capabilitiesText) {
        var converts = (external_function_try_return_convert_catch_e_return_default()) ? (external_function_try_return_convert_catch_e_return_default()) : window.convert;
        var tileMatrixSet = JSON.parse(converts.xml2json(capabilitiesText, {
          compact: true,
          spaces: 4
        })).Capabilities.Contents.TileMatrixSet;

        if (!Array.isArray(tileMatrixSet)) {
          tileMatrixSet = [tileMatrixSet];
        }

        for (var i = 0; i < tileMatrixSet.length; i++) {
          if (tileMatrixSet[i]['ows:Identifier'] && tileMatrixSet[i]['ows:Identifier']['_text'] === mapInfo.tileMatrixSet) {
            if (DEFAULT_WELLKNOWNSCALESET.indexOf(tileMatrixSet[i]['WellKnownScaleSet']['_text']) > -1) {
              isMatched = true;
            } else if (tileMatrixSet[i]['WellKnownScaleSet'] && tileMatrixSet[i]['WellKnownScaleSet']['_text'] === 'Custom') {
              var matchedScaleDenominator = []; //åæ ç³»å¤æ­

              var defaultCRSScaleDenominators = _this5.map.crs === 'EPSG:3857' ? MB_SCALEDENOMINATOR_3857 : MB_SCALEDENOMINATOR_4326;

              for (var j = 0, len = defaultCRSScaleDenominators.length; j < len; j++) {
                if (!tileMatrixSet[i].TileMatrix[j]) {
                  break;
                }

                if (defaultCRSScaleDenominators[j] !== tileMatrixSet[i].TileMatrix[j]['ScaleDenominator']['_text']) {
                  break;
                }

                matchedScaleDenominator.push(defaultCRSScaleDenominators[j]);
              }

              matchMaxZoom = matchedScaleDenominator.length - 1;

              if (matchedScaleDenominator.length !== 0) {
                isMatched = true;
              } else {
                throw Error(Lang.i18n('msg_tilematrixsetunsupport'));
              }
            } else {
              throw Error(Lang.i18n('msg_tilematrixsetunsupport'));
            }
          }
        }

        matchedCallback(isMatched, matchMaxZoom);
      })["catch"](function (error) {
        /**
         * @event mapboxgl.supermap.WebMap#getwmtsfailed
         * @description è·å WMTS å¾å±ä¿¡æ¯å¤±è´¥ã
         * @property {Object} error - å¤±è´¥åå ã
         * @property {mapboxgl.Map} map - MapBoxGL Map å¯¹è±¡ã
         */
        _this5.fire('getwmtsfailed', {
          error: error,
          map: _this5.map
        });
      });
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._createBingLayer
     * @description åå»º Bing å¾å±ã
     */

  }, {
    key: "_createBingLayer",
    value: function _createBingLayer(layerName) {
      var bingUrl = 'https://dynamic.t0.tiles.ditu.live.com/comp/ch/{quadkey}?it=G,TW,L,LA&mkt=zh-cn&og=109&cstl=w4c&ur=CN&n=z';
      this.addLayer([bingUrl], 'bing-layers-' + layerName);
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._createXYZLayer
     * @description åå»º XYZ åºå¾ã
     * @param {String} url - url å°åã
     */

  }, {
    key: "_createXYZLayer",
    value: function _createXYZLayer(layerInfo, url) {
      var urlArr = [];

      if (layerInfo.layerType === 'OSM') {
        var res = url.match(/\w\-\w/g)[0];
        var start = res[0];
        var end = res[2];
        var alphabet = '';

        for (var i = 97; i < 123; i++) {
          alphabet += String.fromCharCode(i);
        }

        var alphabetArr = alphabet.split('');
        var startIndex = alphabetArr.indexOf(start);
        var endIndex = alphabetArr.indexOf(end);
        var res3 = alphabetArr.slice(startIndex, endIndex + 1);

        for (var _i = 0; _i < res3.length; _i++) {
          var replaceRes = url.replace(/{\w\-\w}/g, res3[_i]);
          urlArr.push(replaceRes);
        }
      } else if (layerInfo.layerType === 'GOOGLE_CN') {
        var _res = url.match(/\d\-\d/g)[0];
        var _start = _res[0];
        var _end = _res[2];

        for (var _i2 = _start; _i2 <= _end; _i2++) {
          var _replaceRes = url.replace(/{\d\-\d}/g, _i2);

          urlArr.push(_replaceRes);
        }
      } else {
        urlArr = [url];
      }

      this._addBaselayer(urlArr, 'XYZ-layers-' + layerInfo.name);
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._createDynamicTiledLayer
     * @description åå»º iserver åºå¾ã
     * @param {Object} layerInfo - å¾å±ä¿¡æ¯ã
     */

  }, {
    key: "_createDynamicTiledLayer",
    value: function _createDynamicTiledLayer(layerInfo) {
      var url = layerInfo.url;
      var layerId = layerInfo.layerID || layerInfo.name;
      var minzoom = layerInfo.minzoom,
          maxzoom = layerInfo.maxzoom;

      this._addBaselayer([url], layerId, minzoom, maxzoom, true);
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._createWMSLayer
     * @description åå»º WMS å¾å±ã
     * @param {Object} mapInfo - map ä¿¡æ¯ã
     */

  }, {
    key: "_createWMSLayer",
    value: function _createWMSLayer(layerInfo) {
      var WMSUrl = this._getWMSUrl(layerInfo);

      this._addBaselayer([WMSUrl], 'WMS-layers-' + layerInfo.name);
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._createVectorLayer
     * @description åå»º Vector å¾å±ã
     * @param {Object} layerInfo - map ä¿¡æ¯ã
     * @param {Array} features - å±æ§ ä¿¡æ¯ã
     */

  }, {
    key: "_createVectorLayer",
    value: function _createVectorLayer(layerInfo, features) {
      var style = layerInfo.style;
      var type = layerInfo.featureType;
      var layerID = layerInfo.layerID;
      var visible = layerInfo.visible;
      var layerStyle = {};
      layerStyle.style = this._transformStyleToMapBoxGl(style, type);
      layerStyle.layout = {
        visibility: visible
      };
      var source = {
        type: 'geojson',
        data: {
          type: 'FeatureCollection',
          features: features
        }
      };

      this._addOverlayToMap(type, source, layerID, layerStyle); // å¦æé¢æè¾¹æ¡


      type === 'POLYGON' && style.strokeColor && this._addStrokeLineForPoly(style, source, layerID + '-strokeLine', visible);
    }
    /**
     * @function mapboxgl.supermap.WebMap.prototype._getTiandituUrl
     * @private
     * @description åå»ºå¤©å°å¾url;
     * @param {Object} mapInfo - map ä¿¡æ¯ã
     */

  }, {
    key: "_getTiandituUrl",
    value: function _getTiandituUrl(mapInfo) {
      var re = /t0/gi;
      var tiandituUrls = {};
      var layerType = mapInfo.baseLayer.layerType.split('_')[1].toLowerCase();
      var isLabel = Boolean(mapInfo.baseLayer.labelLayerVisible); // let isLabel = true;

      var url = 'https://t0.tianditu.gov.cn/{layer}_{proj}/wmts?';
      var labelUrl = url;
      var layerLabelMap = {
        vec: 'cva',
        ter: 'cta',
        img: 'cia'
      };
      var tilematrixSet = this.baseProjection === 'EPSG:4326' ? 'c' : 'w';
      var options = {
        service: 'WMTS',
        request: 'GetTile',
        style: 'default',
        version: '1.0.0',
        layer: layerType,
        tilematrixSet: tilematrixSet,
        format: 'tiles',
        width: 256,
        height: 256
      };
      url += this._getParamString(options, url) + '&tilematrix={z}&tilerow={y}&tilecol={x}';
      var tiandituUrl = url.replace('{layer}', layerType).replace('{proj}', tilematrixSet);
      var tiandituUrlArr = [];

      for (var i = 0; i < 8; i++) {
        tiandituUrlArr.push(tiandituUrl.replace(re, "t".concat(i)));
      }

      tiandituUrls['tiandituUrl'] = tiandituUrlArr; // å¦ææ label å¾å±

      if (isLabel) {
        var labelLayer = layerLabelMap[layerType];
        options.layer = labelLayer;
        labelUrl += this._getParamString(options, labelUrl) + '&tilematrix={z}&tilerow={y}&tilecol={x}';
        labelUrl = labelUrl.replace('{layer}', labelLayer).replace('{proj}', tilematrixSet);
        var labelUrlArr = [];

        for (var _i3 = 0; _i3 < 8; _i3++) {
          labelUrlArr.push(labelUrl.replace(re, "t".concat(_i3)));
        }

        tiandituUrls['labelUrl'] = labelUrlArr;
      }

      return tiandituUrls;
    }
    /**
     * @function mapboxgl.supermap.WebMap.prototype._getWMSUrl
     * @private
     * @description åå»º WMS url;
     * @param {Object} mapInfo - map ä¿¡æ¯ã
     */

  }, {
    key: "_getWMSUrl",
    value: function _getWMSUrl(mapInfo) {
      var url = mapInfo.url;
      url = url.split('?')[0];
      var strArr = url.split('/');
      var options = {
        service: 'WMS',
        request: 'GetMap',
        layers: strArr[strArr.length - 1],
        styles: '',
        format: 'image/png',
        transparent: 'true',
        version: '1.1.1',
        width: 256,
        height: 256,
        srs: this.baseProjection
      };
      var bbox = this.baseProjection === 'EPSG:4326' ? '{bbox-epsg-4326}' : '{bbox-epsg-3857}';
      url += this._getParamString(options, url) + "&bbox=".concat(bbox);
      return url;
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._addLayers
     * @description æ·»å å å å¾å±ã
     * @param {Object} mapInfo - å¾å±ä¿¡æ¯ã
     */

  }, {
    key: "_addLayers",
    value: function _addLayers(layers) {
      var _this6 = this;

      //å­å¨å°å¾ä¸ææçå¾å±å¯¹è±¡
      this.layers = layers;
      var features,
          layerAdded = 0,
          len = layers.length;
      layers.forEach(function (layer, index) {
        if (layer.dataSource && layer.dataSource.serverId || layer.layerType === 'MARKER') {
          // è·å serverID
          var serverId = layer.dataSource ? layer.dataSource.serverId : layer.serverId;
          var url = "".concat(_this6.server, "web/datas/").concat(serverId, "/content.json?pageSize=9999999&currentPage=1"); // è·åå¾å±æ°æ®

          serverId && FetchRequest.get(url, null, {
            withCredentials: _this6.withCredentials
          }).then(function (response) {
            return response.json();
          }).then(function (data) {
            if (data.succeed === false) {
              //è¯·æ±å¤±è´¥
              layerAdded++;

              _this6._sendMapToUser(layerAdded, len);
              /**
               * @event mapboxgl.supermap.WebMap#getlayersfailed
               * @description è·åå¾å±ä¿¡æ¯å¤±è´¥ã
               * @property {Object} error - å¤±è´¥åå ã
               * @property {mapboxgl.Map} map - MapBoxGL Map å¯¹è±¡ã
               */


              _this6.fire('getlayersfailed', {
                error: data.error,
                map: _this6.map
              });

              return;
            }

            if (data.type) {
              if (data.type === 'JSON' || data.type === 'GEOJSON') {
                data.content = JSON.parse(data.content.trim());
                features = _this6._formatGeoJSON(data.content, layer);
              } else if (data.type === 'EXCEL' || data.type === 'CSV') {
                features = _this6._excelData2Feature(data.content, layer);
              }

              _this6._addLayer(layer, features, index);

              layerAdded++;

              _this6._sendMapToUser(layerAdded, len);
            }
          })["catch"](function (error) {
            layerAdded++;

            _this6._sendMapToUser(layerAdded, len);

            _this6.fire('getlayersfailed', {
              error: error,
              map: _this6.map
            });
          });
        } else if (layer.layerType === 'SUPERMAP_REST' || layer.layerType === 'TILE' || layer.layerType === 'WMS' || layer.layerType === 'WMTS') {
          _this6._createBaseLayer(layer);

          layerAdded++;

          _this6._sendMapToUser(layerAdded, len);
        } else if (layer.dataSource && layer.dataSource.type === 'REST_DATA') {
          var dataSource = layer.dataSource; //ä»restDataè·åæ°æ®

          _this6._getFeatureBySQL(dataSource.url, [dataSource.dataSourseName || layer.name], function (result) {
            features = _this6._parseGeoJsonData2Feature({
              allDatas: {
                features: result.result.features.features
              },
              fileCode: layer.projection,
              featureProjection: _this6.baseProjection
            });

            _this6._addLayer(layer, features, index);

            layerAdded++;

            _this6._sendMapToUser(layerAdded, len);
          }, function (err) {
            layerAdded++;

            _this6._sendMapToUser(layerAdded, len);
            /**
             * @event mapboxgl.supermap.WebMap#getfeaturesfailed
             * @description è·åå¾å±è¦ç´ å¤±è´¥ã
             * @property {Object} error - å¤±è´¥åå ã
             */


            _this6.fire('getfeaturesfailed', {
              error: err
            });
          });
        } else if (layer.dataSource && layer.dataSource.type === 'REST_MAP' && layer.dataSource.url) {
          _this6._queryFeatureBySQL(layer.dataSource.url, layer.dataSource.layerName, 'smid=1', null, null, function (result) {
            var recordsets = result && result.result.recordsets;
            var recordset = recordsets && recordsets[0];
            var attributes = recordset.fields;

            if (recordset && attributes) {
              var fileterAttrs = [];

              for (var i in attributes) {
                var value = attributes[i];

                if (value.indexOf('Sm') !== 0 || value === 'SmID') {
                  fileterAttrs.push(value);
                }
              }

              _this6._getFeatures(fileterAttrs, layer, function (features) {
                _this6._addLayer(layer, features, index);

                layerAdded++;

                _this6._sendMapToUser(layerAdded, len);
              }, function (err) {
                layerAdded++;

                _this6.fire('getfeaturesfailed', {
                  error: err,
                  map: _this6.map
                });
              });
            }
          }, function (err) {
            _this6.fire('getlayersfailed', {
              error: err,
              map: _this6.map
            });
          });
        }
      }, this);
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._getFeatures
     * @description å°åä¸ªå¾å±æ·»å å°å°å¾ä¸ã
     * @param layerInfo  æä¸ªå¾å±çå¾å±ä¿¡æ¯
     * @param {Array.<GeoJSON>} features - featureã
     */

  }, {
    key: "_getFeatures",
    value: function _getFeatures(fields, layerInfo, resolve, reject) {
      var _this7 = this;

      var source = layerInfo.dataSource; //ç¤ºä¾æ°æ®

      var fileCode = layerInfo.projection;

      this._queryFeatureBySQL(source.url, source.layerName, null, fields, null, function (result) {
        var recordsets = result.result.recordsets[0];
        var features = recordsets.features.features;

        var featuresObj = _this7._parseGeoJsonData2Feature({
          allDatas: {
            features: features
          },
          fileCode: fileCode,
          featureProjection: _this7.baseProjection
        }, 'JSON');

        resolve(featuresObj);
      }, function (err) {
        reject(err);
      });
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._addLayer
     * @description å°åä¸ªå¾å±æ·»å å°å°å¾ä¸ã
     * @param layerInfo  æä¸ªå¾å±çå¾å±ä¿¡æ¯
     * @param {Array.<GeoJSON>} features - featureã
     */

  }, {
    key: "_addLayer",
    value: function _addLayer(layerInfo, features, index) {
      var layerType = layerInfo.layerType;
      layerInfo.layerID = layerType + '-' + layerInfo.name + '-' + index;
      layerInfo.visible = layerInfo.visible ? 'visible' : 'none'; // mbgl ç®åä¸è½å¤ç geojson å¤æé¢æåµ
      // mbgl isssue https://github.com/mapbox/mapbox-gl-js/issues/7023

      if (features[0] && features[0].geometry.type === 'Polygon') {
        features = this._handleMultyPolygon(features);
      }

      if (layerInfo.style && layerInfo.filterCondition) {
        //å° feature æ ¹æ®è¿æ»¤æ¡ä»¶è¿è¡è¿æ»¤, åæ®µä¸é¢å¾ååå¼ä¸é¢å¾å ä¸ºè¦è®¡ç® styleGroup æä»¥ææ¶ä¸è¿æ»¤
        if (layerType !== 'RANGE' && layerType !== 'UNIQUE') {
          features = this._getFiterFeatures(layerInfo.filterCondition, features);
        }
      }

      if (layerType === 'VECTOR') {
        if (layerInfo.featureType === 'POINT') {
          if (layerInfo.style.type === 'SYMBOL_POINT') {
            this._createSymbolLayer(layerInfo, features);
          } else {
            this._createGraphicLayer(layerInfo, features);
          }
        } else {
          //çº¿åé¢
          this._createVectorLayer(layerInfo, features);
        }
      } else if (layerType === 'UNIQUE') {
        this._createUniqueLayer(layerInfo, features);
      } else if (layerType === 'RANGE') {
        this._createRangeLayer(layerInfo, features);
      } else if (layerType === 'HEAT') {
        this._createHeatLayer(layerInfo, features);
      } else if (layerType === 'MARKER') {
        this._createMarkerLayer(layerInfo, features);
      }

      if (layerInfo.labelStyle && layerInfo.labelStyle.labelField) {
        // å­å¨æ ç­¾ä¸é¢å¾
        this._addLabelLayer(layerInfo, features);
      }
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._addLabelLayer
     * @description æ·»å æ ç­¾å¾å±ã
     * @param layerInfo  æä¸ªå¾å±çå¾å±ä¿¡æ¯ã
     * @param {Array.<GeoJSON>} features - featureã
     */

  }, {
    key: "_addLabelLayer",
    value: function _addLabelLayer(layerInfo, features) {
      var labelStyle = layerInfo.labelStyle;
      this.map.addLayer({
        id: layerInfo.layerID + 'label',
        type: 'symbol',
        source: {
          type: 'geojson',
          data: {
            type: 'FeatureCollection',
            features: features
          }
        },
        paint: {
          'text-color': labelStyle.fill
        },
        layout: {
          'text-field': "{".concat(labelStyle.labelField, "}"),
          'text-size': parseFloat(labelStyle.fontSize) || 12,
          'text-offset': labelStyle.offsetX ? [labelStyle.offsetX / 10 || 0, labelStyle.offsetY / 10 || 0] : [0, -1.5],
          'text-font': ['DIN Offc Pro Italic', 'Arial Unicode MS Regular'],
          visibility: layerInfo.visible
        }
      });
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._createSymbolLayer
     * @description æ·»å  symbol å¾å±ã
     * @param layerInfo  æä¸ªå¾å±çå¾å±ä¿¡æ¯ã
     * @param {Array.<GeoJSON>} features - featureã
     */

  }, {
    key: "_createSymbolLayer",
    value: function _createSymbolLayer(layerInfo, features) {
      //ç¨æ¥è¯·æ±symbol_pointå­ä½æä»¶
      var target = document.getElementById("".concat(this.target));
      target.classList.add('supermapol-icons-map');
      var style = layerInfo.style;
      var unicode = layerInfo.style.unicode;
      var text = String.fromCharCode(parseInt(unicode.replace(/^&#x/, ''), 16));
      var layerID = layerInfo.layerID;
      this.map.addSource(layerID + '-source', {
        type: 'geojson',
        data: {
          type: 'FeatureCollection',
          features: []
        }
      });
      this.map.addLayer({
        id: layerID,
        type: 'symbol',
        source: layerID + '-source',
        paint: {
          'text-color': style.fillColor
        },
        layout: {
          'text-field': text,
          'text-font': ['DIN Offc Pro Italic', 'Arial Unicode MS Regular'],
          visibility: layerInfo.visible
        }
      });
      this.map.getSource(layerID + '-source').setData({
        type: 'FeatureCollection',
        features: features
      });
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._createGraphicLayer
     * @description åå»º Graphic å¾å±ã
     * @param {Object} layerInfo - map ä¿¡æ¯ã
     * @param {Array} features - å±æ§ ä¿¡æ¯ã
     */

  }, {
    key: "_createGraphicLayer",
    value: function _createGraphicLayer(layerInfo, features) {
      var _this8 = this;

      var style = layerInfo.style;
      var layerStyle = {};
      var layerID = layerInfo.layerID;
      var source = {
        type: 'geojson',
        data: {
          type: 'FeatureCollection',
          features: features
        }
      };

      if (style.type === 'IMAGE_POINT') {
        var imageInfo = style.imageInfo;
        var imgDom = imageInfo.img;

        if (!imgDom || !imgDom.src) {
          //è¦ç»è£æå®æ´çurl
          imageInfo.url = this.server + imageInfo.url;
        }

        this.map.loadImage(imageInfo.url || imgDom.src, function (error, image) {
          if (error) {
            console.log(error);
          }

          var iconSize = Number.parseFloat((style.radius / image.height).toFixed(2)) * 2;

          _this8.map.addImage('imageIcon', image);

          _this8.map.addLayer({
            id: layerID,
            type: 'symbol',
            source: source,
            layout: {
              'icon-image': 'imageIcon',
              'icon-size': iconSize,
              visibility: layerInfo.visible
            }
          });
        });
      } else if (style.type === 'SVG_POINT') {
        var svg_url = style.url;

        if (!this.svgDiv) {
          this.svgDiv = document.createElement('div');
          document.body.appendChild(this.svgDiv);
        }

        this._getCanvasFromSVG(svg_url, this.svgDiv, function (canvas) {
          var imgUrl = canvas.toDataURL('img/png');
          imgUrl && _this8.map.loadImage(imgUrl, function (error, image) {
            if (error) {
              console.log(error);
            }

            var iconSize = Number.parseFloat((style.radius / canvas.width).toFixed(2));

            _this8.map.addImage('imageIcon', image);

            _this8.map.addLayer({
              id: layerID,
              type: 'symbol',
              source: source,
              layout: {
                'icon-image': 'imageIcon',
                'icon-size': iconSize,
                visibility: layerInfo.visible
              }
            });
          }, _this8);
        });
      } else {
        layerStyle.style = this._transformStyleToMapBoxGl(style, layerInfo.featureType);
        layerStyle.layout = {
          visibility: layerInfo.visible
        };

        this._addOverlayToMap('POINT', source, layerID, layerStyle);
      }
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._createUniqueLayer
     * @description åå»ºåå¼å¾å±ã
     * @param layerInfo  æä¸ªå¾å±çå¾å±ä¿¡æ¯
     * @param features   å¾å±ä¸ç feature
     */

  }, {
    key: "_createUniqueLayer",
    value: function _createUniqueLayer(layerInfo, features) {
      var styleGroup = this._getUniqueStyleGroup(layerInfo, features);

      features = this._getFiterFeatures(layerInfo.filterCondition, features);
      var style = layerInfo.style;
      var layerStyle = {};
      var themeField = layerInfo.themeSetting.themeField;
      var type = layerInfo.featureType;
      var expression = ['match', ['get', 'index']];
      var layerID = layerInfo.layerID;
      features.forEach(function (row) {
        styleGroup.forEach(function (item) {
          if (item.value === row.properties[themeField]) {
            expression.push(row.properties['index'], item.color);
          }
        });
      });
      expression.push('#ffffff');
      layerStyle.style = this._transformStyleToMapBoxGl(style, type, expression);
      var visible = layerInfo.visible;
      layerStyle.layout = {
        visibility: visible
      };
      var source = {
        type: 'geojson',
        data: {
          type: 'FeatureCollection',
          features: features
        }
      };

      this._addOverlayToMap(type, source, layerID, layerStyle);

      type === 'POLYGON' && style.strokeColor && this._addStrokeLineForPoly(style, source, layerID + '-strokeLine', visible);
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._getUniqueStyleGroup
     * @description è·ååå¼çç®æ å­æ®µä¸é¢è²çå¯¹åºæ°ç»ã
     * @param layerInfo  æä¸ªå¾å±çå¾å±ä¿¡æ¯
     * @param features   å¾å±ä¸ç feature
     */

  }, {
    key: "_getUniqueStyleGroup",
    value: function _getUniqueStyleGroup(parameters, features) {
      // æ¾åºææçåå¼
      var featureType = parameters.featureType,
          style = parameters.style,
          themeSetting = parameters.themeSetting;
      var fieldName = themeSetting.themeField,
          colors = themeSetting.colors;
      var names = [],
          customSettings = themeSetting.customSettings;

      for (var i in features) {
        var properties = features[i].properties;
        var name = properties[fieldName];
        var isSaved = false;

        for (var j in names) {
          if (names[j] === name) {
            isSaved = true;
            break;
          }
        }

        if (!isSaved) {
          names.push(name);
        }
      } //è·åä¸å®éçé¢è²


      var curentColors = colors || this.defaultParameters.colors;
      curentColors = ColorsPickerUtil.getGradientColors(curentColors, names.length); //çæstyleGroup

      var styleGroup = [];
      names.forEach(function (name, index) {
        var color = curentColors[index];

        if (name in customSettings) {
          color = customSettings[name];
        }

        if (featureType === 'LINE') {
          style.strokeColor = color;
        } else {
          style.fillColor = color;
        }

        styleGroup.push({
          color: color,
          value: name
        });
      }, this);
      return styleGroup;
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._getWMTSUrl
     * @description æ ¹æ®ä¼ å¥çéç½®ä¿¡æ¯æ¼æ¥wmts urlã
     * @param options éç½®å¯¹è±¡
     */

  }, {
    key: "_getWMTSUrl",
    value: function _getWMTSUrl(options) {
      var obj = {
        service: 'WMTS',
        request: 'GetTile',
        version: '1.0.0',
        style: 'default',
        layer: options.layer,
        tilematrixSet: options.tileMatrixSet,
        format: 'image/png'
      };
      var url = options.url;
      url += this._getParamString(obj, url) + '&tilematrix={z}&tilerow={y}&tilecol={x}';
      return url;
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._createMarkerLayer
     * @description æ·»å æ è®°å¾å±ã
     * @param {Array.<GeoJSON>} features - featureã
     */

  }, {
    key: "_createMarkerLayer",
    value: function _createMarkerLayer(layerInfo, features) {
      var _this9 = this;

      features && features.forEach(function (feature) {
        var geomType = feature.geometry.type.toUpperCase();
        var defaultStyle = feature.dv_v5_markerStyle;

        if (geomType === 'POINT' && defaultStyle.text) {
          //è¯´ææ¯æå­çfeatureç±»å
          geomType = 'TEXT';
        }

        var featureInfo = _this9.setFeatureInfo(feature);

        feature.properties['useStyle'] = defaultStyle;
        feature.properties['featureInfo'] = featureInfo;

        if (geomType === 'POINT' && defaultStyle.src && defaultStyle.src.indexOf('http://') === -1 && defaultStyle.src.indexOf('https://') === -1) {
          //è¯´æå°åä¸å®æ´
          defaultStyle.src = _this9.server + defaultStyle.src;
        }

        var source = {
          type: 'geojson',
          data: feature
        };
        var index = feature.properties.index;
        var layerID = geomType + '-' + index; // image-marker

        geomType === 'POINT' && defaultStyle.src && defaultStyle.src.indexOf('svg') <= -1 && _this9.map.loadImage(defaultStyle.src, function (error, image) {
          if (error) {
            console.log(error);
          }

          _this9.map.addImage(index + '', image);

          _this9.map.addLayer({
            id: layerID,
            type: 'symbol',
            source: source,
            layout: {
              'icon-image': index + '',
              'icon-size': defaultStyle.scale,
              visibility: layerInfo.visible
            }
          });
        }, _this9); // svg-marker

        if (geomType === 'POINT' && defaultStyle.src && defaultStyle.src.indexOf('svg') > -1) {
          if (!_this9.svgDiv) {
            _this9.svgDiv = document.createElement('div');
            document.body.appendChild(_this9.svgDiv);
          }

          _this9._getCanvasFromSVG(defaultStyle.src, _this9.svgDiv, function (canvas) {
            var imgUrl = canvas.toDataURL('img/png');
            imgUrl && _this9.map.loadImage(imgUrl, function (error, image) {
              if (error) {
                console.log(error);
              }

              _this9.map.addImage(index + '', image);

              _this9.map.addLayer({
                id: layerID,
                type: 'symbol',
                source: source,
                layout: {
                  'icon-image': index + '',
                  'icon-size': defaultStyle.scale,
                  visibility: layerInfo.visible
                }
              });
            }, _this9);
          });
        } // point-line-polygon-marker


        if (!defaultStyle.src) {
          var layeStyle = {
            layout: {}
          };

          if (geomType === 'LINESTRING' && defaultStyle.lineCap) {
            geomType = 'LINE';
            layeStyle.layout = {
              'line-cap': defaultStyle.lineCap
            };
          }

          var visible = layerInfo.visible;
          layeStyle.layout.visibility = visible; // get style

          layeStyle.style = _this9._transformStyleToMapBoxGl(defaultStyle, geomType);

          _this9._addOverlayToMap(geomType, source, layerID, layeStyle); // è¥é¢æè¾¹æ¡


          geomType === 'POLYGON' && defaultStyle.strokeColor && _this9._addStrokeLineForPoly(defaultStyle, source, layerID + '-strokeLine', visible);
        }
      }, this);
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype.setFeatureInfo
     * @description è®¾ç½® feature ä¿¡æ¯ã
     * @param {Array.<GeoJSON>} features - featureã
     */

  }, {
    key: "setFeatureInfo",
    value: function setFeatureInfo(feature) {
      var featureInfo;
      var info = feature.dv_v5_markerInfo;

      if (info && info.dataViz_title) {
        //æfeatureInfoä¿¡æ¯å°±ä¸éè¦åæ·»å 
        featureInfo = info;
      } else {
        // featureInfo = this.getDefaultAttribute();
        return info;
      }

      var properties = feature.properties;

      for (var key in featureInfo) {
        if (properties[key]) {
          featureInfo[key] = properties[key];
          delete properties[key];
        }
      }

      return featureInfo;
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._createHeatLayer
     * @description æ·»å ç­åå¾ã
     * @param {Array.<GeoJSON>} features - featureã
     */

  }, {
    key: "_createHeatLayer",
    value: function _createHeatLayer(layerInfo, features) {
      var style = layerInfo.themeSetting;
      var layerOption = {};
      layerOption.gradient = style.colors.slice();
      layerOption.radius = parseInt(style.radius); //èªå®ä¹é¢è²

      var customSettings = style.customSettings;

      for (var i in customSettings) {
        layerOption.gradient[i] = customSettings[i];
      } // æéå­æ®µæ¢å¤


      if (style.weight) {
        this._changeWeight(features, style.weight);
      }

      var color = ['interpolate', ['linear'], ['heatmap-density']];
      var length = layerOption.gradient.length;
      var step = (1 / length).toFixed(2);
      layerOption.gradient.forEach(function (item, index) {
        color.push(index * step);

        if (index === 0) {
          item = core_Util_Util.hexToRgba(item, 0);
        }

        color.push(item);
      });
      var paint = {
        'heatmap-color': color,
        'heatmap-radius': style.radius + 15,
        'heatmap-intensity': {
          base: 1,
          stops: [[0, 0.8], [22, 1]]
        }
      };

      if (features[0].weight && features.length >= 4) {
        var weight = [];
        features.forEach(function (item) {
          weight.push(item.weight);
        });
        var max = ArrayStatistic.getMax(weight);
        var min = ArrayStatistic.getMin(weight);
        paint['heatmap-weight'] = ['interpolate', ['linear'], ['get', 'weight'], min, 0, max, 1];
      }

      this.map.addLayer({
        id: layerInfo.layerID,
        type: 'heatmap',
        source: {
          type: 'geojson',
          data: {
            type: 'FeatureCollection',
            features: features
          }
        },
        paint: paint
      });
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._changeWeight
     * @description æ¹åå½åæéå­æ®µ
     * @param {Array.<GeoJSON>} features - featureã
     * @param {String} weightFeild - æéå­æ®µ
     */

  }, {
    key: "_changeWeight",
    value: function _changeWeight(features, weightFeild) {
      this.fieldMaxValue = {};

      this._getMaxValue(features, weightFeild);

      var maxValue = this.fieldMaxValue[weightFeild];
      features.forEach(function (feature) {
        var attributes = feature.properties;
        var value = attributes[weightFeild];
        feature['weight'] = value / maxValue;
      });
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._getMaxValue
     * @description è·åå½åå­æ®µå¯¹åºçæå¤§å¼ï¼ç¨äºè®¡ç®æéã
     * @param {Array.<GeoJSON>} features - featureã
     * @param {String} weightFeild - æéå­æ®µ
     */

  }, {
    key: "_getMaxValue",
    value: function _getMaxValue(features, weightField) {
      var values = [],
          attributes;
      var field = weightField;

      if (this.fieldMaxValue[field]) {
        return;
      }

      features.forEach(function (feature) {
        //æ¶éå½åæéå­æ®µå¯¹åºçææå¼
        attributes = feature.properties;
        attributes && parseFloat(attributes[field]) && values.push(parseFloat(attributes[field]));
      });
      this.fieldMaxValue[field] = ArrayStatistic.getArrayStatistic(values, 'Maximum');
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._createRangeLayer
     * @description æ·»å åæ®µä¸é¢å¾ã
     * @param {Array.<GeoJSON>} features - featureã
     */

  }, {
    key: "_createRangeLayer",
    value: function _createRangeLayer(layerInfo, features) {
      var fieldName = layerInfo.themeSetting.themeField;
      var style = layerInfo.style;
      var featureType = layerInfo.featureType;

      var styleGroups = this._getRangeStyleGroup(layerInfo, features);

      features = this._getFiterFeatures(layerInfo.filterCondition, features);
      var source = {
        type: 'geojson',
        data: {
          type: 'FeatureCollection',
          features: features
        }
      }; // è·å expression

      var expression = ['match', ['get', 'index']];
      features.forEach(function (row) {
        var tartget = parseFloat(row.properties[fieldName]);

        for (var i = 0; i < styleGroups.length; i++) {
          if (styleGroups[i].start <= tartget && tartget < styleGroups[i].end) {
            expression.push(row.properties['index'], styleGroups[i].color); // return;
          }
        }

        !tartget && expression.push(row.properties['index'], 'rgba(0, 0, 0, 0)');
      }, this);
      expression.push('rgba(0, 0, 0, 0)'); // è·åæ ·å¼

      var layerStyle = {
        layout: {}
      };

      if (featureType === 'LINE' && style.lineCap) {
        layerStyle.layout = {
          'line-cap': style.lineCap
        };
      }

      var visible = layerInfo.visible;
      layerStyle.layout.visibility = visible;
      layerStyle.style = this._transformStyleToMapBoxGl(style, featureType, expression); // æ·»å å¾å±

      var layerID = layerInfo.layerID;

      this._addOverlayToMap(featureType, source, layerID, layerStyle); // å¦æé¢æè¾¹æ¡


      featureType === 'POLYGON' && style.strokeColor && this._addStrokeLineForPoly(style, source, layerID + '-strokeline', visible);
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._getFiterFeatures
     * @description éè¿è¿æ»¤æ¡ä»¶æ¥è¯¢æ»¡è¶³ç featureã
     * @param {String} filterCondition - è¿æ»¤æ¡ä»¶ã
     * @param {array} allFeatures - å¾å±ä¸ç feature éå
     */

  }, {
    key: "_getFiterFeatures",
    value: function _getFiterFeatures(filterCondition, allFeatures) {
      if (!filterCondition) {
        return allFeatures;
      }

      var condition = this._replaceFilterCharacter(filterCondition);

      var sql = 'select * from json where (' + condition + ')';
      var filterFeatures = [];

      for (var i = 0; i < allFeatures.length; i++) {
        var feature = allFeatures[i];
        var filterResult = false;

        try {
          filterResult = window.jsonsql.query(sql, {
            properties: feature.properties
          });
        } catch (err) {
          //å¿é¡»æè¦è¿æ»¤å¾åå®¹å°è£æä¸ä¸ªå¯¹è±¡,ä¸»è¦æ¯å¤çjsonsql(line : 62)ä¸­ç±äºwithè¯­å¥éåå¯¹è±¡é æçé®é¢
          continue;
        }

        if (filterResult && filterResult.length > 0) {
          //afterFilterFeatureIdx.push(i);
          filterFeatures.push(feature);
        }
      }

      return filterFeatures;
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._replaceFilterCharacter
     * @description è·åè¿æ»¤å­ç¬¦ä¸²ã
     * @param {String} filterString - è¿æ»¤æ¡ä»¶ã
     */

  }, {
    key: "_replaceFilterCharacter",
    value: function _replaceFilterCharacter(filterString) {
      filterString = filterString.replace(/=/g, '==').replace(/AND|and/g, '&&').replace(/or|OR/g, '||').replace(/<==/g, '<=').replace(/>==/g, '>=');
      return filterString;
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._getRangeStyleGroup
     * @description è·ååæ®µæ ·å¼ã
     * @param {Array.<GeoJSON>} features - featureã
     */

  }, {
    key: "_getRangeStyleGroup",
    value: function _getRangeStyleGroup(layerInfo, features) {
      // æ¾åºåæ®µå¼
      var featureType = layerInfo.featureType;
      var style = layerInfo.style;
      var values = [],
          attributes;
      var themeSetting = layerInfo.themeSetting;
      var customSettings = themeSetting.customSettings;
      var fieldName = themeSetting.themeField;
      var segmentCount = themeSetting.segmentCount;
      features.forEach(function (feature) {
        attributes = feature.properties || feature.get('Properties');

        if (attributes) {
          //è¿æ»¤æéæ°å¼çæ°æ®
          attributes[fieldName] && core_Util_Util.isNumber(attributes[fieldName]) && values.push(parseFloat(attributes[fieldName]));
        } else if (feature.get(fieldName) && core_Util_Util.isNumber(feature.get(fieldName))) {
          feature.get(fieldName) && values.push(parseFloat(feature.get(fieldName)));
        }
      }, this);
      var segements = ArrayStatistic.getArraySegments(values, themeSetting.segmentMethod, segmentCount);

      if (segements) {
        var itemNum = segmentCount;

        if (attributes && segements[0] === segements[attributes.length - 1]) {
          itemNum = 1;
          segements.length = 2;
        } //ä¿çä¸¤ä½æææ°


        for (var key in segements) {
          var value = segements[key];
          value = key == 0 ? Math.floor(value * 100) / 100 : Math.ceil(value * 100) / 100 + 0.1; // å 0.1 è§£å³æå¤§å¼æ²¡ææ ·å¼é®é¢

          segements[key] = Number(value.toFixed(2));
        } //è·åä¸å®éçé¢è²


        var curentColors = themeSetting.colors; // curentColors = ColorsPickerUtil.getGradientColors(curentColors, itemNum, 'RANGE');

        for (var index = 0; index < itemNum; index++) {
          if (index in customSettings) {
            if (customSettings[index]['segment']['start']) {
              segements[index] = customSettings[index]['segment']['start'];
            }

            if (customSettings[index]['segment']['end']) {
              segements[index + 1] = customSettings[index]['segment']['end'];
            }
          }
        } //çæstyleGroup


        var styleGroups = [];

        for (var i = 0; i < itemNum; i++) {
          var color = curentColors[i];

          if (i in customSettings) {
            if (customSettings[i].color) {
              color = customSettings[i].color;
            }
          }

          if (featureType === 'LINE') {
            style.strokeColor = color;
          } else {
            style.fillColor = color;
          }

          var start = segements[i];
          var end = segements[i + 1];
          var styleObj = JSON.parse(JSON.stringify(style));
          styleGroups.push({
            style: styleObj,
            color: color,
            start: start,
            end: end
          });
        }

        return styleGroups;
      }
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._formatGeoJSON
     * @description æ ¼å¼ GeoJSONã
     * @param {GeoJSON} data - GeoJSON æ°æ®ã
     */

  }, {
    key: "_formatGeoJSON",
    value: function _formatGeoJSON(data) {
      var features = data.features;
      features.forEach(function (row, index) {
        row.properties['index'] = index; // TODO å¾ä¼å åæ è½¬æ¢
        // if (fileCode !== 'EPSG:4326') {
        //     if(row.geometry.coordinates[0] instanceof Array){
        //         row.geometry.coordinates.forEach((coords, index) => {
        //             let lnglat = this._unproject(coords);
        //             row.geometry.coordinates[index] = [lnglat.lng, lnglat.lat];
        //         }, this)
        //         return;
        //     }
        //     let lnglat = this._unproject(row.geometry.coordinates);
        //     row.geometry.coordinates = [lnglat.lng, lnglat.lat];
        // }
      });
      return features;
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._excelData2Featureå°
     * @description csv å xls æä»¶åå®¹è½¬æ¢æ geojson
     * @param content  æä»¶åå®¹
     * @param layerInfo  å¾å±ä¿¡æ¯
     * @returns {Array}  featureçæ°ç»éå
     */

  }, {
    key: "_excelData2Feature",
    value: function _excelData2Feature(dataContent) {
      var fieldCaptions = dataContent.colTitles; // let fileCode = layerInfo.projection;
      //ä½ç½®å±æ§å¤ç

      var xfieldIndex = -1,
          yfieldIndex = -1;

      for (var i = 0, len = fieldCaptions.length; i < len; i++) {
        if (this._isXField(fieldCaptions[i])) {
          xfieldIndex = i;
        }

        if (this._isYField(fieldCaptions[i])) {
          yfieldIndex = i;
        }
      } // feature æå»ºåææ¯æåæ ç³» 4326/3857


      var features = [];

      for (var _i4 = 0, _len = dataContent.rows.length; _i4 < _len; _i4++) {
        var row = dataContent.rows[_i4];
        var x = Number(row[xfieldIndex]),
            y = Number(row[yfieldIndex]); // let coordinates = [x, y];
        // TODO å¾ä¼å åæ è½¬æ¢
        // if (fileCode !== 'EPSG:4326') {
        //     if(row.geometry.coordinates[0] instanceof Array){
        //         row.geometry.coordinates.forEach((coords, index) => {
        //             let lnglat = this._unproject(coords);
        //             row.geometry.coordinates[index] = [lnglat.lng, lnglat.lat];
        //         }, this)
        //         return;
        //     }
        //     let lnglat = this._unproject(row.geometry.coordinates);
        //     row.geometry.coordinates = [lnglat.lng, lnglat.lat];
        // }
        //å±æ§ä¿¡æ¯

        var attributes = {};

        for (var index in dataContent.colTitles) {
          var key = dataContent.colTitles[index];
          attributes[key] = dataContent.rows[_i4][index];
        }

        attributes['index'] = _i4 + ''; //ç®åcsv åªæ¯æå¤çç¹ï¼æä»¥åçæç¹ç±»åç geojson

        var feature = {
          type: 'Feature',
          geometry: {
            type: 'Point',
            coordinates: [x, y]
          },
          properties: attributes
        };
        features.push(feature);
      }

      return features;
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._sendMapToUser
     * @description è¿åæç»ç map å¯¹è±¡ç»ç¨æ·ï¼ä¾ä»ä»¬æä½ä½¿ç¨ã
     * @param count
     * @param layersLen
     */

  }, {
    key: "_sendMapToUser",
    value: function _sendMapToUser(count, layersLen) {
      if (count === layersLen) {
        /**
         * @event mapboxgl.supermap.WebMap#addlayerssucceeded
         * @description æ·»å å¾å±æåã
         * @property {mapboxgl.Map} map - MapBoxGL Map å¯¹è±¡ã
         * @property {Object} mapparams - å°å¾ä¿¡æ¯ã
         * @property {string} mapParams.title - å°å¾æ é¢ã
         * @property {string} mapParams.description - å°å¾æè¿°ã
         * @property {Array.<Object>} layers - å°å¾ä¸ææçå¾å±å¯¹è±¡
         */
        this.fire('addlayerssucceeded', {
          map: this.map,
          mapparams: this.mapParams,
          layers: this.layers
        });
      }
    }
    /**
     * @function mapboxgl.supermap.WebMap.prototype._unproject
     * @private
     * @description å¢¨å¡æè½¬ç»çº¬åº¦ã
     * @param {} point - å¾è½¬æ¢çç¹ã
     */

  }, {
    key: "_unproject",
    value: function _unproject(point) {
      var d = 180 / Math.PI,
          r = 6378137,
          ts = Math.exp(-point[1] / r),
          phi = Math.PI / 2 - 2 * Math.atan(ts);

      for (var i = 0, dphi = 0.1, con; i < 15 && Math.abs(dphi) > 1e-7; i++) {
        con = 1;
        dphi = Math.PI / 2 - 2 * Math.atan(ts * con) - phi;
        phi += dphi;
      }

      return new (external_mapboxgl_default()).LngLat(point[0] * d / r, phi * d);
    }
    /**
     * @function mapboxgl.supermap.WebMap.prototype._getParamString
     * @private
     * @param {Object} obj - å¾æ·»å çåæ°ã
     * @param {string} existingUrl - å¾æ·»å åæ°ç urlã
     * @param {Boolean} [uppercase] - åæ°æ¯å¦è½¬æ¢ä¸ºå¤§åã
     */

  }, {
    key: "_getParamString",
    value: function _getParamString(obj, existingUrl, uppercase) {
      var params = [];

      for (var i in obj) {
        params.push((uppercase ? i.toUpperCase() : i) + '=' + obj[i]);
      }

      return (!existingUrl || existingUrl.indexOf('?') === -1 ? '?' : '&') + params.join('&');
    }
    /**
     * @private
     * @description å¤æ­æ¯å¦å°çXåæ 
     * @param data
     */

  }, {
    key: "_isXField",
    value: function _isXField(data) {
      var lowerdata = data.toLowerCase();
      return lowerdata === 'x' || lowerdata === 'smx' || lowerdata === 'jd' || lowerdata === 'ç»åº¦' || lowerdata === 'ä¸ç»' || lowerdata === 'longitude' || lowerdata === 'lot' || lowerdata === 'lon' || lowerdata === 'lng';
    }
    /**
     * @private
     * @description å¤æ­æ¯å¦å°çYåæ 
     * @param data
     */

  }, {
    key: "_isYField",
    value: function _isYField(data) {
      var lowerdata = data.toLowerCase();
      return lowerdata === 'y' || lowerdata === 'smy' || lowerdata === 'wd' || lowerdata === 'çº¬åº¦' || lowerdata === 'åçº¬' || lowerdata === 'latitude' || lowerdata === 'lat';
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._transformStyleToMapBoxGl
     * @description æ ¹æ®å¾å±ç±»åå° layerInfo ä¸­ç style å±æ§æ ¼å¼è½¬æ¢ä¸º mapboxgl ä¸­ç style æ ¼å¼ã
     * @param {Object} style - layerInfoä¸­çstyleå±æ§
     * @param {String} type - å¾å±ç±»å
     * @param {Array} [expression] - å­å¨é¢è²å¼å¾è¡¨è¾¾å¼
     */

  }, {
    key: "_transformStyleToMapBoxGl",
    value: function _transformStyleToMapBoxGl(style, type, expression) {
      var transTable = {};

      if ((style.type === 'POINT' || style.type === 'BASIC_POINT' || type === 'POINT') && type !== 'LINE') {
        transTable = {
          fillColor: 'circle-color',
          strokeWidth: 'circle-stroke-width',
          fillOpacity: 'circle-opacity',
          radius: 'circle-radius',
          strokeColor: 'circle-stroke-color',
          strokeOpacity: 'circle-stroke-opacity'
        };
      } else if (type === 'LINE') {
        transTable = {
          strokeWidth: 'line-width',
          strokeColor: 'line-color',
          strokeOpacity: 'line-opacity'
        };
      } else if (type === 'POLYGON') {
        transTable = {
          fillColor: 'fill-color',
          fillOpacity: 'fill-opacity',
          strokeColor: 'fill-outline-color'
        };
      }

      var newObj = {};

      for (var item in style) {
        if (transTable[item]) {
          newObj[transTable[item]] = style[item];
        }
      }

      if (expression) {
        if (newObj['circle-color']) {
          newObj['circle-color'] = expression;
        } else if (newObj['line-color']) {
          newObj['line-color'] = expression;
        } else {
          newObj['fill-color'] = expression;
        }
      }

      if (style.lineDash && style.lineDash !== 'solid' && type === 'LINE') {
        newObj['line-dasharray'] = this._dashStyle(style);
      }

      return newObj;
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype.._dashStyle
     * @description ç¬¦å·æ ·å¼ã
     * @param {Object} style - æ ·å¼åæ°ã
     * @param {number} widthFactor - å®½åº¦ç³»æ°ã
     */

  }, {
    key: "_dashStyle",
    value: function _dashStyle(style) {
      if (!style) {
        return [];
      } // var w = style.strokeWidth * widthFactor;


      var w = 1;
      var str = style.strokeDashstyle || style.lineDash;

      switch (str) {
        case 'solid':
          return [];

        case 'dot':
          return [1, 4 * w];

        case 'dash':
          return [4 * w, 4 * w];

        case 'dashdot':
          return [4 * w, 4 * w, 1 * w, 4 * w];

        case 'longdash':
          return [8 * w, 4 * w];

        case 'longdashdot':
          return [8 * w, 4 * w, 1, 4 * w];

        default:
          if (!str) {
            return [];
          }

          if (Util.isArray(str)) {
            return str;
          }

          str = StringExt.trim(str).replace(/\s+/g, ',');
          return str.replace(/\[|\]/gi, '').split(',');
      }
    }
    /**
     * @private
     * @description å°SVGè½¬æ¢æCanvas
     * @param svgUrl
     * @param divDom
     * @param callBack
     */

  }, {
    key: "_getCanvasFromSVG",
    value: function _getCanvasFromSVG(svgUrl, divDom, callBack) {
      //ä¸ä¸ªå¾å±å¯¹åºä¸ä¸ªcanvas
      var canvas = document.createElement('canvas');
      canvas.id = 'dataviz-canvas-' + core_Util_Util.newGuid(8);
      canvas.style.display = 'none';
      divDom.appendChild(canvas);
      var canvgs = window.canvg ? window.canvg : (external_function_try_return_canvg_catch_e_return_default());
      canvgs(canvas.id, svgUrl, {
        ignoreMouse: true,
        ignoreAnimation: true,
        renderCallback: function renderCallback() {
          if (canvas.width > 300 || canvas.height > 300) {
            return;
          }

          callBack(canvas);
        },
        forceRedraw: function forceRedraw() {
          return false;
        }
      });
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._addOverlayToMap
     * @description æ·»å åºç¡ç¢éå¾å±å° MAP
     * @param {Object} style - mabgl style
     * @param {String} type - å¾å±ç±»å
     */

  }, {
    key: "_addOverlayToMap",
    value: function _addOverlayToMap(type, source, layerID, layerStyle) {
      var mbglTypeMap = {
        POINT: 'circle',
        LINE: 'line',
        POLYGON: 'fill'
      };
      type = mbglTypeMap[type];

      if (type === 'circle' || type === 'line' || type === 'fill') {
        this.map.addLayer({
          id: layerID,
          type: type,
          source: source,
          paint: layerStyle.style,
          layout: layerStyle.layout || {}
        });
      }
    }
  }, {
    key: "_addBaselayer",
    value: function _addBaselayer(url, layerID) {
      var minzoom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
      var maxzoom = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 22;
      var isIserver = arguments.length > 4 ? arguments[4] : undefined;
      this.map.addLayer({
        id: layerID,
        type: 'raster',
        source: {
          type: 'raster',
          tiles: url,
          tileSize: 256,
          rasterSource: isIserver ? 'iserver' : '',
          prjCoordSys: isIserver ? {
            epsgCode: this.baseProjection.split(':')[1]
          } : ''
        },
        minzoom: minzoom,
        maxzoom: maxzoom
      });
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._addStrokeLineForPoly
     * @description æ·»å é¢çè¾¹æ¡ã
     * @param {Object} style - mabgl style
     */

  }, {
    key: "_addStrokeLineForPoly",
    value: function _addStrokeLineForPoly(style, source, layerID, visible) {
      var lineStyle = {};
      lineStyle.style = this._transformStyleToMapBoxGl(style, 'LINE');
      lineStyle.layout = {
        visibility: visible
      };

      this._addOverlayToMap('LINE', source, layerID, lineStyle);
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._parseGeoJsonData2Feature
     * @description å°ä»restDataå°åä¸è·åçjsonè½¬æ¢æfeatureï¼ä»iserverä¸­è·åçjsonè½¬æ¢æfeatureï¼
     * @param {object} metaData - jsonåå®¹
     * @returns {Array}  ol.featureçæ°ç»éå
     */

  }, {
    key: "_parseGeoJsonData2Feature",
    value: function _parseGeoJsonData2Feature(metaData) {
      var allFeatures = metaData.allDatas.features,
          features = [];

      for (var i = 0, len = allFeatures.length; i < len; i++) {
        // TODO åæ è½¬æ¢
        var feature = allFeatures[i];
        var coordinate = feature.geometry.coordinates;

        if (allFeatures[i].geometry.type === 'Point') {
          // æ æ³¨å¾å± è¿æ²¡æå±æ§å¼æ¶åä¸å 
          if (allFeatures[i].properties) {
            allFeatures[i].properties.lon = coordinate[0];
            allFeatures[i].properties.lat = coordinate[1];
          }
        }

        features.properties['index'] = i + '';
        features.push(feature);
      }

      return features;
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._getFeatureBySQL
     * @description éè¿ sql æ¹å¼æ¥è¯¢æ°æ®ã
     */

  }, {
    key: "_getFeatureBySQL",
    value: function _getFeatureBySQL(url, datasetNames, _processCompleted, processFaild) {
      var getFeatureParam, getFeatureBySQLService, getFeatureBySQLParams;
      getFeatureParam = new FilterParameter({
        name: datasetNames.join().replace(':', '@'),
        attributeFilter: 'SMID > 0'
      });
      getFeatureBySQLParams = new GetFeaturesBySQLParameters({
        queryParameter: getFeatureParam,
        datasetNames: datasetNames,
        fromIndex: 0,
        toIndex: 100000,
        returnContent: true
      });
      var options = {
        eventListeners: {
          processCompleted: function processCompleted(getFeaturesEventArgs) {
            _processCompleted && _processCompleted(getFeaturesEventArgs);
          },
          processFailed: function processFailed(e) {
            processFaild && processFaild(e);
          }
        }
      };
      getFeatureBySQLService = new GetFeaturesBySQLService(url, options);
      getFeatureBySQLService.processAsync(getFeatureBySQLParams);
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._queryFeatureBySQL
     * @description éè¿ sql æ¹å¼æ¥è¯¢æ°æ®ã
     */

  }, {
    key: "_queryFeatureBySQL",
    value: function _queryFeatureBySQL(url, layerName, attributeFilter, fields, epsgCode, processCompleted, processFaild, startRecord, recordLength, onlyAttribute) {
      var queryParam, queryBySQLParams, queryBySQLService;
      queryParam = new FilterParameter({
        name: layerName,
        attributeFilter: attributeFilter
      });

      if (fields) {
        queryParam.fields = fields;
      }

      var params = {
        queryParams: [queryParam]
      };

      if (onlyAttribute) {
        params.queryOption = QueryOption.ATTRIBUTE;
      }

      startRecord && (params.startRecord = startRecord);
      recordLength && (params.expectCount = recordLength);

      if (epsgCode) {
        params.prjCoordSys = {
          epsgCode: epsgCode
        };
      }

      queryBySQLParams = new QueryBySQLParameters(params);
      queryBySQLService = new (external_mapboxgl_default()).supermap.QueryService(url);
      queryBySQLService.queryBySQL(queryBySQLParams, function (data) {
        data.type === 'processCompleted' ? processCompleted(data) : processFaild(data);
      });
    }
    /**
     * @private
     * @function mapboxgl.supermap.WebMap.prototype._handleMultyPolygon
     * @description å¤çå¤æé¢æåµ
     */

  }, {
    key: "_handleMultyPolygon",
    value: function _handleMultyPolygon(features) {
      features.forEach(function (feature) {
        if (feature.geometry.type !== 'Polygon') {
          return;
        }

        var coords = feature.geometry.coordinates;

        if (coords.length > 1) {
          var coordinates = [];
          coords.forEach(function (coord) {
            coordinates.push([coord]);
          });
          feature.geometry.coordinates = coordinates;
          feature.geometry.type = 'MultiPolygon';
        }
      });
      return features;
    }
  }, {
    key: "_transformScaleToZoom",
    value: function _transformScaleToZoom(scale, crs) {
      var scale_0 = 295829515.2024169;

      if ((crs || this.map.getCRS()).epsgCode !== 'EPSG:3857') {
        scale_0 = 295295895;
      }

      var scaleDenominator = scale.split(':')[1];
      return Math.min(24, +Math.log2(scale_0 / +scaleDenominator).toFixed(2));
    }
  }, {
    key: "_getResolution",
    value: function _getResolution(bounds) {
      var tileSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 512.0;

      if (bounds.leftBottom && bounds.rightTop) {
        return Math.max(bounds.rightTop.x - bounds.leftBottom.x, bounds.rightTop.y - bounds.leftBottom.y) / tileSize;
      }

      return Math.max(bounds[2] - bounds[0], bounds[3] - bounds[1]) / tileSize;
    }
  }]);

  return WebMap;
}((external_mapboxgl_default()).Evented);
(external_mapboxgl_default()).supermap.WebMap = WebMap;
// CONCATENATED MODULE: ./src/mapboxgl/mapping/index.js

// CONCATENATED MODULE: ./src/mapboxgl/index.js
/* CopyrightÂ© 2000 - 2021 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/






}();
!function() {
"use strict";


}();
/******/ })()
;