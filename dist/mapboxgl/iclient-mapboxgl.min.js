/*!
 * 
 *          iclient-mapboxgl.(https://iclient.supermap.io)
 *          Copyright© 2000 - 2020 SuperMap Software Co.Ltd
 *          license: Apache-2.0
 *          version: v10.1.0
 *         
 */!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=11)}([function(e,t){e.exports=mapboxgl},function(e,t){e.exports=function(){try{return THREE}catch(e){return{}}}()},function(e,t){e.exports=function(){try{return mapv}catch(e){return{}}}()},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":r(window))&&(n=window)}e.exports=n},function(e,t,r){var n,o,i;o=[t,e],void 0===(i="function"==typeof(n=function(e,t){"use strict";var r={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function n(e){try{delete window[e]}catch(t){window[e]=void 0}}function o(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=e,a=t.timeout||r.timeout,s=t.jsonpCallback||r.jsonpCallback,l=void 0;return new Promise(function(r,u){var c=t.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),f=s+"_"+c;window[c]=function(e){r({ok:!0,json:function(){return Promise.resolve(e)}}),l&&clearTimeout(l),o(f),n(c)},i+=-1===i.indexOf("?")?"?":"&";var p=document.createElement("script");p.setAttribute("src",""+i+s+"="+c),t.charset&&p.setAttribute("charset",t.charset),p.id=f,document.getElementsByTagName("head")[0].appendChild(p),l=setTimeout(function(){u(new Error("JSONP request to "+e+" timed out")),n(c),o(f),window[c]=function(){n(c)}},a),p.onerror=function(){u(new Error("JSONP request to "+e+" failed")),n(c),o(f),l&&clearTimeout(l)}})}})?n.apply(t,o):n)||(e.exports=i)},function(e,t){e.exports=function(){try{return XLSX}catch(e){return{}}}()},function(e,t){e.exports=function(){try{return convert}catch(e){return{}}}()},function(e,t){e.exports=function(){try{return elasticsearch}catch(e){return{}}}()},function(e,t,r){(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n=9007199254740991,o="[object Arguments]",i="[object Function]",a="[object GeneratorFunction]",s="[object Map]",l="[object Set]",u=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,f="object"==(void 0===t?"undefined":r(t))&&t&&t.Object===Object&&t,p="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,h=f||p||Function("return this")();function y(e,t){return function(e,t){for(var r=-1,n=e?e.length:0,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(t,function(t){return[t,e[t]]})}var d,v,m,b=Function.prototype,g=Object.prototype,S=h["__core-js_shared__"],w=(d=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",O=b.toString,_=g.hasOwnProperty,P=g.toString,C=RegExp("^"+O.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),E=g.propertyIsEnumerable,T=(v=Object.keys,m=Object,function(e){return v(m(e))}),k=U(h,"DataView"),x=U(h,"Map"),A=U(h,"Promise"),j=U(h,"Set"),R=U(h,"WeakMap"),L=W(k),M=W(x),N=W(A),I=W(j),D=W(R);function F(e,t){var n=V(e)||function(e){return function(e){return function(e){return!!e&&"object"==r(e)}(e)&&z(e)}(e)&&_.call(e,"callee")&&(!E.call(e,"callee")||P.call(e)==o)}(e)?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],i=n.length,a=!!i;for(var s in e)!t&&!_.call(e,s)||a&&("length"==s||J(s,i))||n.push(s);return n}function B(e){return!(!Y(e)||w&&w in e)&&(q(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?C:u).test(W(e))}function G(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||g,t!==n)return T(e);var t,r,n,o=[];for(var i in Object(e))_.call(e,i)&&"constructor"!=i&&o.push(i);return o}function U(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return B(r)?r:void 0}var H=function(e){return P.call(e)};function J(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||c.test(e))&&e>-1&&e%1==0&&e<t}function W(e){if(null!=e){try{return O.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(k&&"[object DataView]"!=H(new k(new ArrayBuffer(1)))||x&&H(new x)!=s||A&&"[object Promise]"!=H(A.resolve())||j&&H(new j)!=l||R&&"[object WeakMap]"!=H(new R))&&(H=function(e){var t=P.call(e),r="[object Object]"==t?e.constructor:void 0,n=r?W(r):void 0;if(n)switch(n){case L:return"[object DataView]";case M:return s;case N:return"[object Promise]";case I:return l;case D:return"[object WeakMap]"}return t});var V=Array.isArray;function z(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!q(e)}function q(e){var t=Y(e)?P.call(e):"";return t==i||t==a}function Y(e){var t=r(e);return!!e&&("object"==t||"function"==t)}var Q,X=(Q=function(e){return z(e)?F(e):G(e)},function(e){var t,r,n,o=H(e);return o==s?(t=e,r=-1,n=Array(t.size),t.forEach(function(e,t){n[++r]=[t,e]}),n):o==l?function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}(e):y(e,Q(e))});e.exports=X}).call(this,r(3))},function(e,t){e.exports=function(){try{return echarts}catch(e){return{}}}()},function(e,t){e.exports=function(){try{return canvg}catch(e){return{}}}()},function(e,t,r){r(18),e.exports=r(17)},function(e,t,r){(function(n,o){var i,a,s;function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}s=function(){"use strict";function e(e){var t=this.constructor;return this.then(function(r){return t.resolve(e()).then(function(){return r})},function(r){return t.resolve(e()).then(function(){return t.reject(r)})})}var t=setTimeout;function r(e){return Boolean(e&&void 0!==e.length)}function i(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(e,this)}function s(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn(function(){var r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){var n;try{n=r(e._value)}catch(e){return void c(t.promise,e)}u(t.promise,n)}else(1===e._state?u:c)(t.promise,e._value)})):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===l(t)||"function"==typeof t)){var r=t.then;if(t instanceof a)return e._state=3,e._value=t,void f(e);if("function"==typeof r)return void p((n=r,o=t,function(){n.apply(o,arguments)}),e)}e._state=1,e._value=t,f(e)}catch(t){c(e,t)}var n,o}function c(e,t){e._state=2,e._value=t,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&a._immediateFn(function(){e._handled||a._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)s(e,e._deferreds[t]);e._deferreds=null}function p(e,t){var r=!1;try{e(function(e){r||(r=!0,u(t,e))},function(e){r||(r=!0,c(t,e))})}catch(e){if(r)return;r=!0,c(t,e)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var r=new this.constructor(i);return s(this,new function(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}(e,t,r)),r},a.prototype.finally=e,a.all=function(e){return new a(function(t,n){if(!r(e))return n(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);var i=o.length;function a(e,r){try{if(r&&("object"===l(r)||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,function(t){a(e,t)},n)}o[e]=r,0==--i&&t(o)}catch(e){n(e)}}for(var s=0;s<o.length;s++)a(s,o[s])})},a.resolve=function(e){return e&&"object"===l(e)&&e.constructor===a?e:new a(function(t){t(e)})},a.reject=function(e){return new a(function(t,r){r(e)})},a.race=function(e){return new a(function(t,n){if(!r(e))return n(new TypeError("Promise.race accepts an array"));for(var o=0,i=e.length;o<i;o++)a.resolve(e[o]).then(t,n)})},a._immediateFn="function"==typeof n&&function(e){n(e)}||function(e){t(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var h=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==o)return o;throw new Error("unable to locate global object")}();"Promise"in h?h.Promise.prototype.finally||(h.Promise.prototype.finally=e):h.Promise=a},"object"===l(t)&&void 0!==e?s():void 0===(a="function"==typeof(i=s)?i.call(t,r,t,e):i)||(e.exports=a)}).call(this,r(13).setImmediate,r(3))},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(o.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(14),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(3))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,o,i,a,s,l=1,u={},c=!1,f=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick(function(){y(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){y(e.data)},n=function(e){i.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,n=function(e){var t=f.createElement("script");t.onreadystatechange=function(){y(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):n=function(e){setTimeout(y,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&y(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),n=function(t){e.postMessage(a+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var o={callback:e,args:t};return u[l]=o,n(l),l++},p.clearImmediate=h}function h(e){delete u[e]}function y(e){if(c)setTimeout(y,0,e);else{var t=u[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(3),r(15))},function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var l,u=[],c=!1,f=-1;function p(){c&&l&&(c=!1,l.length?u=l.concat(u):f=-1,u.length&&h())}function h(){if(!c){var e=s(p);c=!0;for(var t=u.length;t;){for(l=u,u=[];++f<t;)l&&l[f].run();f=-1,t=u.length}l=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function d(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new y(e,t)),1!==u.length||c||s(h)},y.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=d,o.addListener=d,o.once=d,o.off=d,o.removeListener=d,o.removeAllListeners=d,o.emit=d,o.prependListener=d,o.prependOnceListener=d,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){!function(t){"use strict";if(t.__disableNativeFetch||!t.fetch){s.prototype.append=function(e,t){e=i(e),t=a(t);var r=this.map[e];r||(r=[],this.map[e]=r),r.push(t)},s.prototype.delete=function(e){delete this.map[i(e)]},s.prototype.get=function(e){var t=this.map[i(e)];return t?t[0]:null},s.prototype.getAll=function(e){return this.map[i(e)]||[]},s.prototype.has=function(e){return this.map.hasOwnProperty(i(e))},s.prototype.set=function(e,t){this.map[i(e)]=[a(t)]},s.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){e.call(t,n,r,this)},this)},this)};var r={blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t},n=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this)},f.call(p.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var o=[301,302,303,307,308];y.redirect=function(e,t){if(-1===o.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},t.Headers=s,t.Request=p,t.Response=y,t.fetch=function(e,t){return new Promise(function(n,o){var i;i=p.prototype.isPrototypeOf(e)&&!t?e:new p(e,t);var a=new XMLHttpRequest;var l=!1;function u(){if(4===a.readyState){var e=1223===a.status?204:a.status;if(e<100||e>599){if(l)return;return l=!0,void o(new TypeError("Network request failed"))}var t={status:e,statusText:a.statusText,headers:function(e){var t=new s;return e.getAllResponseHeaders().trim().split("\n").forEach(function(e){var r=e.trim().split(":"),n=r.shift().trim(),o=r.join(":").trim();t.append(n,o)}),t}(a),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},r="response"in a?a.response:a.responseText;l||(l=!0,n(new y(r,t)))}}a.onreadystatechange=u,a.onload=u,a.onerror=function(){l||(l=!0,o(new TypeError("Network request failed")))},a.open(i.method,i.url,!0);try{"include"===i.credentials&&("withCredentials"in a?a.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(e){console&&console.warn&&console.warn("set withCredentials error:"+e)}"responseType"in a&&r.blob&&(a.responseType="blob"),i.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0,e.exports&&(e.exports=t.fetch)}function i(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function a(e){return"string"!=typeof e&&(e=String(e)),e}function s(e){this.map={},e instanceof s?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function u(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function c(e){var t=new FileReader;return t.readAsArrayBuffer(e),u(t)}function f(){return this.bodyUsed=!1,this._initBody=function(e,t){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(r.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e,this._options=t;else if(r.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!r.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText=""},r.blob?(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var e,t,r,n,o,i,a,s=l(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,t=this._options,r=new FileReader,n=t.headers.map["content-type"]?t.headers.map["content-type"].toString():"",o=/charset\=[0-9a-zA-Z\-\_]*;?/,i=e.type.match(o)||n.match(o),a=[e],i&&a.push(i[0].replace(/^charset\=/,"").replace(/;$/,"")),r.readAsText.apply(r,a),u(r);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=l(this);return e||Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function p(e,t){var r,o,i=(t=t||{}).body;if(p.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new s(e.headers)),this.method=e.method,this.mode=e.mode,i||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new s(t.headers)),this.method=(r=t.method||this.method||"GET",o=r.toUpperCase(),n.indexOf(o)>-1?o:r),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i,t)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}}),t}function y(e,t){t||(t={}),this._initBody(e,t),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof s?t.headers:new s(t.headers),this.url=t.url||""}}("undefined"!=typeof self?self:this)},function(e,t,r){"use strict";r.r(t);r(19),r(25)},function(e,t,r){"use strict";r.r(t);
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var n=window.SuperMap=window.SuperMap||{};n.Components=window.SuperMap.Components||{};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var o=n.DataFormat={GEOJSON:"GEOJSON",ISERVER:"ISERVER"},i=n.ServerType={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"},a=n.GeometryType={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",POINTEPS:"POINTEPS",LINEEPS:"LINEEPS",REGIONEPS:"REGIONEPS",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN",GEOCOMPOUND:"GEOCOMPOUND"},s=n.QueryOption={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"},l=n.JoinType={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"},u=n.SpatialQueryMode={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"},c=n.SpatialRelationType={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"},f=n.MeasureMode={DISTANCE:"DISTANCE",AREA:"AREA"},p=n.Unit={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},h=n.BufferRadiusUnit={CENTIMETER:"CENTIMETER",DECIMETER:"DECIMETER",FOOT:"FOOT",INCH:"INCH",KILOMETER:"KILOMETER",METER:"METER",MILE:"MILE",MILLIMETER:"MILLIMETER",YARD:"YARD"},y=n.EngineType={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"},d=n.ThemeGraphTextFormat={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"},v=n.ThemeGraphType={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"},m=n.GraphAxesTextDisplayMode={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"},b=n.GraduatedMode={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"},g=n.RangeMode={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"},S=n.ThemeType={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"},w=n.ColorGradientType={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"},O=n.TextAlignment={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"},_=n.FillGradientMode={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"},P=n.AlongLineDirection={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"},C=n.LabelBackShape={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"},E=n.LabelOverLengthMode={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"},T=n.DirectionType={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"},k=n.SideType={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"},x=n.SupplyCenterType={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"},A=n.TurnType={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"},j=n.BufferEndType={FLAT:"FLAT",ROUND:"ROUND"},R=n.OverlayOperationType={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"},L=n.OutputType={INDEXEDHDFS:"INDEXEDHDFS",UDB:"UDB",MONGODB:"MONGODB",PG:"PG"},M=n.SmoothMethod={BSPLINE:"BSPLINE",POLISH:"POLISH"},N=n.SurfaceAnalystMethod={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"},I=n.DataReturnMode={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"},D=n.EditType={ADD:"add",UPDATE:"update",DELETE:"delete"},F=n.TransferTactic={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"},B=n.TransferPreference={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"},G=n.GridType={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"},U=n.ColorSpaceType={CMYK:"CMYK",RGB:"RGB"},H=n.LayerType={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"},J=n.UGCLayerType={THEME:"THEME",VECTOR:"VECTOR",GRID:"GRID",IMAGE:"IMAGE"},W=n.StatisticMode={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"},V=n.PixelFormat={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"},z=n.SearchMode={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"},q=n.InterpolationAlgorithmType={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"},Y=n.VariogramMode={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"},Q=n.Exponent={EXP1:"EXP1",EXP2:"EXP2"},X=n.ClientType={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"},K=n.ChartType={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"},Z=n.ClipAnalystMode={CLIP:"clip",INTERSECT:"intersect"},$=n.AnalystAreaUnit={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"},ee=n.AnalystSizeUnit={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"},te=n.StatisticAnalystMode={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"},re=n.SummaryType={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"},ne=n.TopologyValidatorRule={REGIONNOOVERLAP:"REGIONNOOVERLAP",REGIONNOOVERLAPWITH:"REGIONNOOVERLAPWITH",REGIONCONTAINEDBYREGION:"REGIONCONTAINEDBYREGION",REGIONCOVEREDBYREGION:"REGIONCOVEREDBYREGION",LINENOOVERLAP:"LINENOOVERLAP",LINENOOVERLAPWITH:"LINENOOVERLAPWITH",POINTNOIDENTICAL:"POINTNOIDENTICAL"},oe=n.AggregationType={GEOHASH_GRID:"geohash_grid",FILTER:"filter"},ie=n.AggregationQueryBuilderType={GEO_BOUNDING_BOX:"geo_bounding_box"},ae=n.GetFeatureMode={BOUNDS:"BOUNDS",BUFFER:"BUFFER",ID:"ID",SPATIAL:"SPATIAL",SQL:"SQL"},se=n.RasterFunctionType={NDVI:"NDVI",HILLSHADE:"HILLSHADE"};n.ResourceType={MAP:"MAP",SERVICE:"SERVICE",SCENE:"SCENE",DATA:"DATA",INSIGHTS_WORKSPACE:"INSIGHTS_WORKSPACE",MAP_DASHBOARD:"MAP_DASHBOARD"},n.OrderBy={UPDATETIME:"UPDATETIME",HEATLEVEL:"HEATLEVEL",RELEVANCE:"RELEVANCE"},n.OrderType={ASC:"ASC",DESC:"DESC"},n.SearchType={PUBLIC:"PUBLIC",MY_RES:"MY_RES",MYGROUP_RES:"MYGROUP_RES",MYDEPARTMENT_RES:"MYDEPARTMENT_RES",SHARETOME_RES:"SHARETOME_RES"},n.AggregationTypes={TAG:"TAG",TYPE:"TYPE"},n.PermissionType={SEARCH:"SEARCH",READ:"READ",READWRITE:"READWRITE",DELETE:"DELETE",DOWNLOAD:"DOWNLOAD"},n.EntityType={DEPARTMENT:"DEPARTMENT",GROUP:"GROUP",IPORTALGROUP:"IPORTALGROUP",ROLE:"ROLE",USER:"USER"},n.DataItemType={WORKSPACE:"WORKSPACE",UDB:"UDB",SHP:"SHP",EXCEL:"EXCEL",CSV:"CSV",GEOJSON:"GEOJSON",SMTILES:"SMTILES",SVTILES:"SVTILES",MBTILES:"MBTILES",TPK:"TPK",UGCV5:"UGCV5",UGCV5_MVT:"UGCV5_MVT",JSON:"JSON"},n.WebExportFormatType={PNG:"PNG",PDF:"PDF"},n.WebScaleOrientationType={HORIZONTALLABELSBELOW:"HORIZONTALLABELSBELOW",HORIZONTALLABELSABOVE:"HORIZONTALLABELSABOVE",VERTICALLABELSLEFT:"VERTICALLABELSLEFT",VERTICALLABELSRIGHT:"VERTICALLABELSRIGHT"},n.WebScaleType={LINE:"LINE",BAR:"BAR",BAR_SUB:"BAR_SUB"},n.WebScaleUnit={METER:"METER",FOOT:"FOOT",DEGREES:"DEGREES"};function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ue=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.w=t?parseFloat(t):0,this.h=t?parseFloat(r):0,this.CLASS_NAME="SuperMap.Size"}var t,r,n;return t=e,(r=[{key:"toString",value:function(){return"w="+this.w+",h="+this.h}},{key:"clone",value:function(){return new e(this.w,this.h)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.w===e.w&&this.h===e.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(e.w)&&isNaN(e.h)),t}},{key:"destroy",value:function(){this.w=null,this.h=null}}])&&le(t.prototype,r),n&&le(t,n),e}();function ce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.Size=ue;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fe=function(){function e(t,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t?parseFloat(t):0,this.y=r?parseFloat(r):0,this.mode=o,this.CLASS_NAME="SuperMap.Pixel",n.Pixel.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"}}var t,r,o;return t=e,(r=[{key:"toString",value:function(){return"x="+this.x+",y="+this.y}},{key:"clone",value:function(){return new e(this.x,this.y,this.mode)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"distanceTo",value:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}},{key:"add",value:function(t,r){if(null==t||null==r)throw new TypeError("Pixel.add cannot receive null values");return new e(this.x+t,this.y+r)}},{key:"offset",value:function(e){var t=this.clone();return e&&(t=this.add(e.x,e.y)),t}},{key:"destroy",value:function(){this.x=null,this.y=null,this.mode=null}}])&&ce(t.prototype,r),o&&ce(t,o),e}();n.Pixel=fe,
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
n.inherit=function(e,t){var r,o,i,a=function(){};for(a.prototype=t.prototype,e.prototype=new a,r=2,o=arguments.length;r<o;r++)"function"==typeof(i=arguments[r])&&(i=i.prototype),n.Util.extend(e.prototype,i)},n.mixin=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(var n=function e(r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var n=0;n<t.length;n++)a(this,new t[n](r))},o=0;o<t.length;o++){var i=t[o];a(n,i),a(n.prototype,i.prototype),a(n.prototype,new i)}return n;function a(e,t){var r=Object.getOwnPropertyNames(t);Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t)));for(var n=0;n<r.length;n++){var o=r[n];if("constructor"!==o&&"prototype"!==o&&"name"!==o&&"length"!==o){var i=Object.getOwnPropertyDescriptor(t,o);window.ActiveXObject?Object.defineProperty(e,o,i||{}):Object.defineProperty(e,o,i)}}}};var pe=n.String={startsWith:function(e,t){return 0==e.indexOf(t)},contains:function(e,t){return-1!=e.indexOf(t)},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(e){for(var t=e.split("-"),r=t[0],n=1,o=t.length;n<o;n++){var i=t[n];r+=i.charAt(0).toUpperCase()+i.substring(1)}return r},format:function(e,t,r){t||(t=window);return e.replace(n.String.tokenRegEx,function(e,n){for(var o,i=n.split(/\.+/),a=0;a<i.length;a++)0==a&&(o=t),o=o[i[a]];return"function"==typeof o&&(o=r?o.apply(null,r):o()),void 0===o?"undefined":o})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(e){return n.String.numberRegEx.test(e)},numericIf:function(e){return n.String.isNumeric(e)?parseFloat(e):e}},he=n.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(e,t){var r=0;return t>0&&(r=parseFloat(e.toPrecision(t))),r},format:function(e,t,r,o){t=void 0!==t?t:0,r=void 0!==r?r:n.Number.thousandsSeparator,o=void 0!==o?o:n.Number.decimalSeparator,null!=t&&(e=parseFloat(e.toFixed(t)));var i=e.toString().split(".");1===i.length&&null==t&&(t=0);var a,s=i[0];if(r)for(var l=/(-?[0-9]+)([0-9]{3})/;l.test(s);)s=s.replace(l,"$1"+r+"$2");if(0==t)a=s;else{var u=i.length>1?i[1]:"0";null!=t&&(u+=new Array(t-u.length+1).join("0")),a=s+o+u}return a}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(e){return he.limitSigDigs(this,e)});var ye=n.Function={bind:function(e,t){var r=Array.prototype.slice.apply(arguments,[2]);return function(){var n=r.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(t,n)}},bindAsEventListener:function(e,t){return function(r){return e.call(t,r||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}};n.Array={filter:function(e,t,r){var n=[];if(Array.prototype.filter)n=e.filter(t,r);else{var o=e.length;if("function"!=typeof t)throw new TypeError;for(var i=0;i<o;i++)if(i in e){var a=e[i];t.call(r,a,i,e)&&n.push(a)}}return n}};function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ve,me,be,ge=n.Util=n.Util||{};function Se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.Util.extend=function(e,t){if(e=e||{},t){for(var r in t){var n=t[r];void 0!==n&&(e[r]=n)}!("function"==typeof window.Event&&t instanceof window.Event)&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(e.toString=t.toString)}return e},n.Util.copy=function(e,t){var r;if(e=e||{},t)for(var n in e)void 0!==(r=t[n])&&(e[n]=r)},n.Util.reset=function(e){for(var t in e=e||{})if(e.hasOwnProperty(t)){if("object"===de(e[t])&&e[t]instanceof Array){for(var r in e[t])e[t][r].destroy&&e[t][r].destroy();e[t].length=0}else"object"===de(e[t])&&e[t]instanceof Object&&e[t].destroy&&e[t].destroy();e[t]=null}},n.Util.getElement=function(){for(var e=[],t=0,r=arguments.length;t<r;t++){var n=arguments[t];if("string"==typeof n&&(n=document.getElementById(n)),1===arguments.length)return n;e.push(n)}return e},n.Util.isElement=function(e){return!(!e||1!==e.nodeType)},n.Util.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.Util.removeItem=function(e,t){for(var r=e.length-1;r>=0;r--)e[r]===t&&e.splice(r,1);return e},n.Util.indexOf=function(e,t){if(null==e)return-1;if("function"==typeof e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},n.Util.modifyDOMElement=function(e,t,r,n,o,i,a,s){t&&(e.id=t),r&&(e.style.left=r.x+"px",e.style.top=r.y+"px"),n&&(e.style.width=n.w+"px",e.style.height=n.h+"px"),o&&(e.style.position=o),i&&(e.style.border=i),a&&(e.style.overflow=a),parseFloat(s)>=0&&parseFloat(s)<1?(e.style.filter="alpha(opacity="+100*s+")",e.style.opacity=s):1===parseFloat(s)&&(e.style.filter="",e.style.opacity="")},n.Util.applyDefaults=function(e,t){e=e||{};var r="function"==typeof window.Event&&t instanceof window.Event;for(var n in t)(void 0===e[n]||!r&&t.hasOwnProperty&&t.hasOwnProperty(n)&&!e.hasOwnProperty(n))&&(e[n]=t[n]);return!r&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")&&(e.toString=t.toString),e},n.Util.getParameterString=function(e){var t=[];for(var r in e){var n,o=e[r];if(null!=o&&"function"!=typeof o)n=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),t.push(encodeURIComponent(r)+"="+n)}return t.join("&")},n.Util.urlAppend=function(e,t){var r=e;if(t){0===t.indexOf("?")&&(t=t.substring(1));var n=(e+" ").split(/[?&]/);r+=" "===n.pop()?t:n.length?"&"+t:"?"+t}return r},n.Util.urlPathAppend=function(e,t){var r=e;if(!t)return r;0===t.indexOf("/")&&(t=t.substring(1));var n=e.split("?");return n[0].indexOf("/",n[0].length-1)<0&&(n[0]+="/"),r="".concat(n[0]).concat(t).concat(n.length>1?"?".concat(n[1]):"")},n.Util.DEFAULT_PRECISION=14,n.Util.toFloat=function(e,t){return null==t&&(t=n.Util.DEFAULT_PRECISION),"number"!=typeof e&&(e=parseFloat(e)),0===t?e:parseFloat(e.toPrecision(t))},n.Util.rad=function(e){return e*Math.PI/180},n.Util.getParameters=function(e){e=null===e||void 0===e?window.location.href:e;var t="";if(n.String.contains(e,"?")){var r=e.indexOf("?")+1,o=n.String.contains(e,"#")?e.indexOf("#"):e.length;t=e.substring(r,o)}for(var i={},a=t.split(/[&;]/),s=0,l=a.length;s<l;++s){var u=a[s].split("=");if(u[0]){var c=u[0];try{c=decodeURIComponent(c)}catch(e){c=unescape(c)}var f=(u[1]||"").replace(/\+/g," ");try{f=decodeURIComponent(f)}catch(e){f=unescape(f)}1==(f=f.split(",")).length&&(f=f[0]),i[c]=f}}return i},n.Util.lastSeqID=0,n.Util.createUniqueID=function(e){return null==e&&(e="id_"),n.Util.lastSeqID+=1,e+n.Util.lastSeqID},n.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36},n.INCHES_PER_UNIT.in=n.INCHES_PER_UNIT.inches,n.INCHES_PER_UNIT.degrees=n.INCHES_PER_UNIT.dd,n.INCHES_PER_UNIT.nmi=1852*n.INCHES_PER_UNIT.m,n.METERS_PER_INCH=.0254000508001016,n.Util.extend(n.INCHES_PER_UNIT,{Inch:n.INCHES_PER_UNIT.inches,Meter:1/n.METERS_PER_INCH,Foot:.3048006096012192/n.METERS_PER_INCH,IFoot:.3048/n.METERS_PER_INCH,ClarkeFoot:.3047972651151/n.METERS_PER_INCH,SearsFoot:.30479947153867626/n.METERS_PER_INCH,GoldCoastFoot:.3047997101815088/n.METERS_PER_INCH,IInch:.0254/n.METERS_PER_INCH,MicroInch:254e-7/n.METERS_PER_INCH,Mil:2.54e-8/n.METERS_PER_INCH,Centimeter:.01/n.METERS_PER_INCH,Kilometer:1e3/n.METERS_PER_INCH,Yard:.9144018288036576/n.METERS_PER_INCH,SearsYard:.914398414616029/n.METERS_PER_INCH,IndianYard:.9143985307444408/n.METERS_PER_INCH,IndianYd37:.91439523/n.METERS_PER_INCH,IndianYd62:.9143988/n.METERS_PER_INCH,IndianYd75:.9143985/n.METERS_PER_INCH,IndianFoot:.30479951/n.METERS_PER_INCH,IndianFt37:.30479841/n.METERS_PER_INCH,IndianFt62:.3047996/n.METERS_PER_INCH,IndianFt75:.3047995/n.METERS_PER_INCH,Mile:1609.3472186944373/n.METERS_PER_INCH,IYard:.9144/n.METERS_PER_INCH,IMile:1609.344/n.METERS_PER_INCH,NautM:1852/n.METERS_PER_INCH,"Lat-66":110943.31648893273/n.METERS_PER_INCH,"Lat-83":110946.25736872235/n.METERS_PER_INCH,Decimeter:.1/n.METERS_PER_INCH,Millimeter:.001/n.METERS_PER_INCH,Dekameter:10/n.METERS_PER_INCH,Decameter:10/n.METERS_PER_INCH,Hectometer:100/n.METERS_PER_INCH,GermanMeter:1.0000135965/n.METERS_PER_INCH,CaGrid:.999738/n.METERS_PER_INCH,ClarkeChain:20.1166194976/n.METERS_PER_INCH,GunterChain:20.11684023368047/n.METERS_PER_INCH,BenoitChain:20.116782494375872/n.METERS_PER_INCH,SearsChain:20.11676512155/n.METERS_PER_INCH,ClarkeLink:.201166194976/n.METERS_PER_INCH,GunterLink:.2011684023368047/n.METERS_PER_INCH,BenoitLink:.20116782494375873/n.METERS_PER_INCH,SearsLink:.2011676512155/n.METERS_PER_INCH,Rod:5.02921005842012/n.METERS_PER_INCH,IntnlChain:20.1168/n.METERS_PER_INCH,IntnlLink:.201168/n.METERS_PER_INCH,Perch:5.02921005842012/n.METERS_PER_INCH,Pole:5.02921005842012/n.METERS_PER_INCH,Furlong:201.1684023368046/n.METERS_PER_INCH,Rood:3.778266898/n.METERS_PER_INCH,CapeFoot:.3047972615/n.METERS_PER_INCH,Brealey:375/n.METERS_PER_INCH,ModAmFt:.304812252984506/n.METERS_PER_INCH,Fathom:1.8288/n.METERS_PER_INCH,"NautM-UK":1853.184/n.METERS_PER_INCH,"50kilometers":5e4/n.METERS_PER_INCH,"150kilometers":15e4/n.METERS_PER_INCH}),n.Util.extend(n.INCHES_PER_UNIT,{mm:n.INCHES_PER_UNIT.Meter/1e3,cm:n.INCHES_PER_UNIT.Meter/100,dm:100*n.INCHES_PER_UNIT.Meter,km:1e3*n.INCHES_PER_UNIT.Meter,kmi:n.INCHES_PER_UNIT.nmi,fath:n.INCHES_PER_UNIT.Fathom,ch:n.INCHES_PER_UNIT.IntnlChain,link:n.INCHES_PER_UNIT.IntnlLink,"us-in":n.INCHES_PER_UNIT.inches,"us-ft":n.INCHES_PER_UNIT.Foot,"us-yd":n.INCHES_PER_UNIT.Yard,"us-ch":n.INCHES_PER_UNIT.GunterChain,"us-mi":n.INCHES_PER_UNIT.Mile,"ind-yd":n.INCHES_PER_UNIT.IndianYd37,"ind-ft":n.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/n.METERS_PER_INCH}),n.DOTS_PER_INCH=96,n.Util.normalizeScale=function(e){return e>1?1/e:e},n.Util.getResolutionFromScale=function(e,t){var r;e&&(null==t&&(t="degrees"),r=1/(n.Util.normalizeScale(e)*n.INCHES_PER_UNIT[t]*n.DOTS_PER_INCH));return r},n.Util.getScaleFromResolution=function(e,t){return null==t&&(t="degrees"),e*n.INCHES_PER_UNIT[t]*n.DOTS_PER_INCH},n.IS_GECKO=-1===(ve=navigator.userAgent.toLowerCase()).indexOf("webkit")&&-1!==ve.indexOf("gecko"),n.Browser=function(){var e,t="",r="",n="pc",o=navigator.userAgent.toLowerCase();return o.indexOf("msie")>-1||o.indexOf("trident")>-1&&o.indexOf("rv")>-1?(t="msie",e=o.match(/msie ([\d.]+)/)||o.match(/rv:([\d.]+)/)):o.indexOf("chrome")>-1?(t="chrome",e=o.match(/chrome\/([\d.]+)/)):o.indexOf("firefox")>-1?(t="firefox",e=o.match(/firefox\/([\d.]+)/)):o.indexOf("opera")>-1?(t="opera",e=o.match(/version\/([\d.]+)/)):o.indexOf("safari")>-1&&(t="safari",e=o.match(/version\/([\d.]+)/)),r=e?e[1]:"",o.indexOf("ipad")>-1||o.indexOf("ipod")>-1||o.indexOf("iphone")>-1?n="apple":o.indexOf("android")>-1&&(r=(e=o.match(/version\/([\d.]+)/))?e[1]:"",n="android"),{name:t,version:r,device:n}}(),n.Util.getBrowser=function(){return n.Browser},n.Util.isSupportCanvas=(me=!0,be=n.Util.getBrowser(),document.createElement("canvas").getContext?("firefox"===be.name&&parseFloat(be.version)<5&&(me=!1),"safari"===be.name&&parseFloat(be.version)<4&&(me=!1),"opera"===be.name&&parseFloat(be.version)<10&&(me=!1),"msie"===be.name&&parseFloat(be.version)<9&&(me=!1)):me=!1,me),n.Util.supportCanvas=function(){return n.Util.isSupportCanvas},n.INCHES_PER_UNIT.degree=n.INCHES_PER_UNIT.dd,n.INCHES_PER_UNIT.meter=n.INCHES_PER_UNIT.m,n.INCHES_PER_UNIT.foot=n.INCHES_PER_UNIT.ft,n.INCHES_PER_UNIT.inch=n.INCHES_PER_UNIT.inches,n.INCHES_PER_UNIT.mile=n.INCHES_PER_UNIT.mi,n.INCHES_PER_UNIT.kilometer=n.INCHES_PER_UNIT.km,n.INCHES_PER_UNIT.yard=n.INCHES_PER_UNIT.yd,n.Util.isInTheSameDomain=function(e){if(!e)return!0;var t=e.indexOf("//"),r=document.location.toString(),n=r.indexOf("//");if(-1===t)return!0;var o,i=o=e.substring(0,t),a=r.substring(n+2);n=a.indexOf("/");var s=a.indexOf(":"),l=a.substring(0,n),u=document.location.protocol;if(-1!==s||(l+=":"+("http:"===u.toLowerCase()?80:443)),u.toLowerCase()!==i.toLowerCase())return!1;var c=(i=e.substring(t+2)).indexOf(":");t=i.indexOf("/");var f,p=i.substring(0,t);return-1!==c?f=i.substring(0,c):(f=i.substring(0,t),p+=":"+("http:"===o.toLowerCase()?80:443)),f===document.domain&&p===l},n.Util.calculateDpi=function(e,t,r,n,o){if(e&&t&&r){var i,a=e.getWidth(),s=e.getHeight(),l=t.w,u=t.h;if(o=o||6378137,"degree"===(n=n||"degrees").toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()){var c=a/l,f=s/u;i=254/(c>f?c:f)/r/(2*Math.PI*o/360)/1e4}else{i=254/(a/l)/r/1e4}return i}},n.Util.toJSON=function(e){var t=e;if(null==t)return null;switch(t.constructor){case String:return t=(t=(t=(t=(t=(t=(t='"'+t.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var r=[],o=0,i=t.length;o<i;o++)r.push(n.Util.toJSON(t[o]));return"["+r.join(",")+"]";case Number:return isFinite(t)?String(t):null;case Boolean:return String(t);case Date:return"{'__type':\"System.DateTime\",'Year':"+t.getFullYear()+",'Month':"+(t.getMonth()+1)+",'Day':"+t.getDate()+",'Hour':"+t.getHours()+",'Minute':"+t.getMinutes()+",'Second':"+t.getSeconds()+",'Millisecond':"+t.getMilliseconds()+",'TimezoneOffset':"+t.getTimezoneOffset()+"}";default:if(null!=t.toJSON&&"function"==typeof t.toJSON)return t.toJSON();if("object"===de(t)){if(t.length){for(var a=[],s=0,l=t.length;s<l;s++)a.push(n.Util.toJSON(t[s]));return"["+a.join(",")+"]"}var u=[];for(var c in t)"function"!=typeof t[c]&&"CLASS_NAME"!==c&&"parent"!==c&&u.push("'"+c+"':"+n.Util.toJSON(t[c]));return u.length>0?"{"+u.join(",")+"}":"{}"}return t.toString()}},n.Util.getResolutionFromScaleDpi=function(e,t,r,o){return o=o||6378137,r=r||"",e>0&&t>0?(e=n.Util.normalizeScale(e),"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/t/e/(2*Math.PI*o/360)/1e4:254/t/e/1e4):-1},n.Util.getScaleFromResolutionDpi=function(e,t,r,n){return n=n||6378137,r=r||"",e>0&&t>0?"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/t/e/(2*Math.PI*n/360)/1e4:254/t/e/1e4:-1},n.Util.transformResult=function(e){return e.responseText&&"string"==typeof e.responseText&&(e=JSON.parse(e.responseText)),e},n.Util.copyAttributes=function(e,t){if(e=e||{},t)for(var r in t){var n=t[r];void 0!==n&&"CLASS_NAME"!==r&&"function"!=typeof n&&(e[r]=n)}return e},n.Util.copyAttributesWithClip=function(e,t,r){if(e=e||{},t)for(var n in t){var o=!1;if(r&&r.length)for(var i=0,a=r.length;i<a;i++)if(n===r[i]){o=!0;break}if(!0!==o){var s=t[n];void 0!==s&&"CLASS_NAME"!==n&&"function"!=typeof s&&(e[n]=s)}}return e},n.Util.cloneObject=function(e){if(null===e||"object"!==de(e))return e;if(e instanceof Date){var t=new Date;return t.setTime(e.getTime()),t}if(e instanceof Array)return e.slice(0);if(e instanceof Object){var r={};for(var o in e)e.hasOwnProperty(o)&&(r[o]=n.Util.cloneObject(e[o]));return r}throw new Error("Unable to copy obj! Its type isn't supported.")},n.Util.lineIntersection=function(e,t,r,o){var i,a,s=null,l=(o.x-r.x)*(e.y-r.y)-(o.y-r.y)*(e.x-r.x),u=(t.x-e.x)*(e.y-r.y)-(t.y-e.y)*(e.x-r.x),c=(o.y-r.y)*(t.x-e.x)-(o.x-r.x)*(t.y-e.y);if(0!=c)a=u/c,s=(i=l/c)>=0&&a<=1&&i<=1&&a>=0?new n.Geometry.Point(e.x+i*(t.x-e.x),e.y+i*(t.y-e.y)):"No Intersection";else if(0==l&&0==u){var f=Math.max(e.y,t.y),p=Math.min(e.y,t.y),h=Math.max(e.x,t.x),y=Math.min(e.x,t.x);s=(r.y>=p&&r.y<=f||o.y>=p&&o.y<=f)&&r.x>=y&&r.x<=h||o.x>=y&&o.x<=h?"Coincident":"Parallel"}else s="Parallel";return s},n.Util.getTextBounds=function(e,t,r){document.body.appendChild(r),r.style.width="auto",r.style.height="auto",e.fontSize&&(r.style.fontSize=e.fontSize),e.fontFamily&&(r.style.fontFamily=e.fontFamily),e.fontWeight&&(r.style.fontWeight=e.fontWeight),r.style.position="relative",r.style.visibility="hidden",r.style.display="inline-block",r.innerHTML=t;var n=r.clientWidth,o=r.clientHeight;return document.body.removeChild(r),{textWidth:n,textHeight:o}};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var we=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ge.isArray(t)&&(r=t[1],t=t[0]),this.lon=t?ge.toFloat(t):0,this.lat=r?ge.toFloat(r):0,this.CLASS_NAME="SuperMap.LonLat"}var t,r,n;return t=e,n=[{key:"fromString",value:function(t){var r=t.split(",");return new e(r[0],r[1])}},{key:"fromArray",value:function(t){var r=ge.isArray(t);return new e(r&&t[0],r&&t[1])}}],(r=[{key:"toString",value:function(){return"lon="+this.lon+",lat="+this.lat}},{key:"toShortString",value:function(){return this.lon+","+this.lat}},{key:"clone",value:function(){return new e(this.lon,this.lat)}},{key:"add",value:function(t,r){if(null==t||null==r)throw new TypeError("LonLat.add cannot receive null values");return new e(this.lon+ge.toFloat(t),this.lat+ge.toFloat(r))}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.lon===e.lon&&this.lat===e.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(e.lon)&&isNaN(e.lat)),t}},{key:"wrapDateLine",value:function(e){var t=this.clone();if(e){for(;t.lon<e.left;)t.lon+=e.getWidth();for(;t.lon>e.right;)t.lon-=e.getWidth()}return t}},{key:"destroy",value:function(){this.lon=null,this.lat=null}}])&&Se(t.prototype,r),n&&Se(t,n),e}();function Oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var _e=function(){function e(t,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ge.isArray(t)&&(o=t[3],n=t[2],r=t[1],t=t[0]),this.left=null!=t?ge.toFloat(t):this.left,this.bottom=null!=r?ge.toFloat(r):this.bottom,this.right=null!=n?ge.toFloat(n):this.right,this.top=null!=o?ge.toFloat(o):this.top,this.centerLonLat=null,this.CLASS_NAME="SuperMap.Bounds"}var t,r,n;return t=e,n=[{key:"fromString",value:function(t,r){var n=t.split(",");return e.fromArray(n,r)}},{key:"fromArray",value:function(t,r){return!0===r?new e(t[1],t[0],t[3],t[2]):new e(t[0],t[1],t[2],t[3])}},{key:"fromSize",value:function(t){return new e(0,t.h,t.w,0)}},{key:"oppositeQuadrant",value:function(e){var t="";return t+="t"===e.charAt(0)?"b":"t",t+="l"===e.charAt(1)?"r":"l"}}],(r=[{key:"clone",value:function(){return new e(this.left,this.bottom,this.right,this.top)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.left===e.left&&this.right===e.right&&this.top===e.top&&this.bottom===e.bottom),t}},{key:"toString",value:function(){return[this.left,this.bottom,this.right,this.top].join(",")}},{key:"toArray",value:function(e){return!0===e?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]}},{key:"toBBOX",value:function(e,t){null==e&&(e=6);var r=Math.pow(10,e),n=Math.round(this.left*r)/r,o=Math.round(this.bottom*r)/r,i=Math.round(this.right*r)/r,a=Math.round(this.top*r)/r;return!0===t?o+","+n+","+a+","+i:n+","+o+","+i+","+a}},{key:"getWidth",value:function(){return this.right-this.left}},{key:"getHeight",value:function(){return this.top-this.bottom}},{key:"getSize",value:function(){return new ue(this.getWidth(),this.getHeight())}},{key:"getCenterPixel",value:function(){return new fe((this.left+this.right)/2,(this.bottom+this.top)/2)}},{key:"getCenterLonLat",value:function(){return this.centerLonLat||(this.centerLonLat=new we((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat}},{key:"scale",value:function(t,r){var n,o;return t=t||1,null==r&&(r=this.getCenterLonLat()),"SuperMap.LonLat"===r.CLASS_NAME?(n=r.lon,o=r.lat):(n=r.x,o=r.y),new e((this.left-n)*t+n,(this.bottom-o)*t+o,(this.right-n)*t+n,(this.top-o)*t+o)}},{key:"add",value:function(t,r){if(null==t||null==r)throw new TypeError("Bounds.add cannot receive null values");return new e(this.left+t,this.bottom+r,this.right+t,this.top+r)}},{key:"extend",value:function(t){var r=null;if(t){switch(t.CLASS_NAME){case"SuperMap.LonLat":r=new e(t.lon,t.lat,t.lon,t.lat);break;case"SuperMap.Geometry.Point":r=new e(t.x,t.y,t.x,t.y);break;case"SuperMap.Bounds":r=t}r&&(this.centerLonLat=null,(null==this.left||r.left<this.left)&&(this.left=r.left),(null==this.bottom||r.bottom<this.bottom)&&(this.bottom=r.bottom),(null==this.right||r.right>this.right)&&(this.right=r.right),(null==this.top||r.top>this.top)&&(this.top=r.top))}}},{key:"containsLonLat",value:function(e,t){"boolean"==typeof t&&(t={inclusive:t}),t=t||{};var r=this.contains(e.lon,e.lat,t.inclusive),n=t.worldBounds;if(n&&!r){var o=n.getWidth(),i=(n.left+n.right)/2,a=Math.round((e.lon-i)/o);r=this.containsLonLat({lon:e.lon-a*o,lat:e.lat},{inclusive:t.inclusive})}return r}},{key:"containsPixel",value:function(e,t){return this.contains(e.x,e.y,t)}},{key:"contains",value:function(e,t,r){if(null==r&&(r=!0),null==e||null==t)return!1;var n=!1;return n=r?e>=this.left&&e<=this.right&&t>=this.bottom&&t<=this.top:e>this.left&&e<this.right&&t>this.bottom&&t<this.top,n}},{key:"intersectsBounds",value:function(e,t){if("boolean"==typeof t&&(t={inclusive:t}),(t=t||{}).worldBounds){var r=this.wrapDateLine(t.worldBounds);e=e.wrapDateLine(t.worldBounds)}else r=this;null==t.inclusive&&(t.inclusive=!0);var n=!1,o=r.left===e.right||r.right===e.left||r.top===e.bottom||r.bottom===e.top;if(t.inclusive||!o){var i=e.bottom>=r.bottom&&e.bottom<=r.top||r.bottom>=e.bottom&&r.bottom<=e.top,a=e.top>=r.bottom&&e.top<=r.top||r.top>e.bottom&&r.top<e.top,s=e.left>=r.left&&e.left<=r.right||r.left>=e.left&&r.left<=e.right,l=e.right>=r.left&&e.right<=r.right||r.right>=e.left&&r.right<=e.right;n=(i||a)&&(s||l)}if(t.worldBounds&&!n){var u=t.worldBounds,c=u.getWidth(),f=!u.containsBounds(r),p=!u.containsBounds(e);f&&!p?(e=e.add(-c,0),n=r.intersectsBounds(e,{inclusive:t.inclusive})):p&&!f&&(r=r.add(-c,0),n=e.intersectsBounds(r,{inclusive:t.inclusive}))}return n}},{key:"containsBounds",value:function(e,t,r){null==t&&(t=!1),null==r&&(r=!0);var n=this.contains(e.left,e.bottom,r),o=this.contains(e.right,e.bottom,r),i=this.contains(e.left,e.top,r),a=this.contains(e.right,e.top,r);return t?n||o||i||a:n&&o&&i&&a}},{key:"determineQuadrant",value:function(e){var t="",r=this.getCenterLonLat();return t+=e.lat<r.lat?"b":"t",t+=e.lon<r.lon?"l":"r"}},{key:"wrapDateLine",value:function(e,t){var r=(t=t||{}).leftTolerance||0,n=t.rightTolerance||0,o=this.clone();if(e){for(var i=e.getWidth();o.left<e.left&&o.right-n<=e.left;)o=o.add(i,0);for(;o.left+r>=e.right&&o.right>e.right;)o=o.add(-i,0);var a=o.left+r;a<e.right&&a>e.left&&o.right-n>e.right&&(o=o.add(-i,0))}return o}},{key:"toServerJSONObject",value:function(){return{rightTop:{x:this.right,y:this.top},leftBottom:{x:this.left,y:this.bottom},left:this.left,right:this.right,top:this.top,bottom:this.bottom}}},{key:"destroy",value:function(){this.left=null,this.right=null,this.top=null,this.bottom=null,this.centerLonLat=null}}])&&Oe(t.prototype,r),n&&Oe(t,n),e}();function Pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.Bounds=_e;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ce=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.Geometry",this.id=ge.createUniqueID(this.CLASS_NAME+"_"),this.parent=null,this.bounds=null,this.SRID=null}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.id=null,this.bounds=null,this.SRID=null}},{key:"clone",value:function(){return new e}},{key:"setBounds",value:function(e){e&&(this.bounds=e.clone())}},{key:"clearBounds",value:function(){this.bounds=null,this.parent&&this.parent.clearBounds()}},{key:"extendBounds",value:function(e){this.getBounds()?this.bounds.extend(e):this.setBounds(e)}},{key:"getBounds",value:function(){return null==this.bounds&&this.calculateBounds(),this.bounds}},{key:"calculateBounds",value:function(){}},{key:"getVertices",value:function(e){}},{key:"getArea",value:function(){return 0}}])&&Pe(t.prototype,r),n&&Pe(t,n),e}();function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ke(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xe(e,t,r){return(xe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ae(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Geometry=Ce;var Re=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ke(this,Ae(t).call(this))).components=[],r.componentTypes=null,null!=e&&r.addComponents(e),r.CLASS_NAME="SuperMap.Geometry.Collection",r.geometryType="Collection",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(t,Ce),r=t,(n=[{key:"destroy",value:function(){this.components.length=0,this.components=null,xe(Ae(t.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){for(var e=new t,r=0,n=this.components.length;r<n;r++)e.addComponent(this.components[r].clone());return ge.applyDefaults(e,this),e}},{key:"getComponentsString",value:function(){for(var e=[],t=0,r=this.components.length;t<r;t++)e.push(this.components[t].toShortString());return e.join(",")}},{key:"calculateBounds",value:function(){this.bounds=null;var e=new _e,t=this.components;if(t)for(var r=0,n=t.length;r<n;r++)e.extend(t[r].getBounds());null!=e.left&&null!=e.bottom&&null!=e.right&&null!=e.top&&this.setBounds(e)}},{key:"addComponents",value:function(e){ge.isArray(e)||(e=[e]);for(var t=0,r=e.length;t<r;t++)this.addComponent(e[t])}},{key:"addComponent",value:function(e,t){var r=!1;if(e&&(null==this.componentTypes||ge.indexOf(this.componentTypes,e.CLASS_NAME)>-1)){if(null!=t&&t<this.components.length){var n=this.components.slice(0,t),o=this.components.slice(t,this.components.length);n.push(e),this.components=n.concat(o)}else this.components.push(e);e.parent=this,this.clearBounds(),r=!0}return r}},{key:"removeComponents",value:function(e){var t=!1;ge.isArray(e)||(e=[e]);for(var r=e.length-1;r>=0;--r)t=this.removeComponent(e[r])||t;return t}},{key:"removeComponent",value:function(e){return ge.removeItem(this.components,e),this.clearBounds(),!0}},{key:"getArea",value:function(){for(var e=0,t=0,r=this.components.length;t<r;t++)e+=this.components[t].getArea();return e}},{key:"equals",value:function(e){var t=!0;if(e&&e.CLASS_NAME&&this.CLASS_NAME===e.CLASS_NAME)if(ge.isArray(e.components)&&e.components.length===this.components.length){for(var r=0,n=this.components.length;r<n;++r)if(!this.components[r].equals(e.components[r])){t=!1;break}}else t=!1;else t=!1;return t}},{key:"getVertices",value:function(e){for(var t=[],r=0,n=this.components.length;r<n;++r)Array.prototype.push.apply(t,this.components[r].getVertices(e));return t}}])&&Te(r.prototype,n),o&&Te(r,o),t}();function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ne(e,t){return!t||"object"!==Le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Geometry.Collection=Re;var Fe=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ne(this,Ie(t).call(this,e))).componentTypes=["SuperMap.Geometry.Point"],r.CLASS_NAME="SuperMap.Geometry.MultiPoint",r.geometryType="MultiPoint",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(t,Re),r=t,(n=[{key:"addPoint",value:function(e,t){this.addComponent(e,t)}},{key:"removePoint",value:function(e){this.removeComponent(e)}}])&&Me(r.prototype,n),o&&Me(r,o),t}();function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){return!t||"object"!==Be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Geometry.MultiPoint=Fe;var Je=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ge(this,Ue(t).call(this,e))).componentTypes=["SuperMap.Geometry.Point","SuperMap.PointWithMeasure"],r.CLASS_NAME="SuperMap.Geometry.Curve",r.geometryType="Curve",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(t,Fe),t}();function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ze(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qe(e,t,r){return(qe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ye(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Geometry.Curve=Je;var Xe=function(e){function t(e,r,n,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=ze(this,Ye(t).call(this,e,r,n,o))).x=parseFloat(e),i.y=parseFloat(r),i.tag=o||0==o?parseFloat(o):null,i.type=n||"Point",i.CLASS_NAME="SuperMap.Geometry.Point",i.geometryType="Point",i}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(t,Ce),r=t,(n=[{key:"clone",value:function(e){return null==e&&(e=new t(this.x,this.y)),ge.applyDefaults(e,this),e}},{key:"calculateBounds",value:function(){this.bounds=new _e(this.x,this.y,this.x,this.y)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x===e.x&&this.y===e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"move",value:function(e,t){this.x=this.x+e,this.y=this.y+t,this.clearBounds()}},{key:"toShortString",value:function(){return this.x+", "+this.y}},{key:"destroy",value:function(){this.x=null,this.y=null,this.tag=null,qe(Ye(t.prototype),"destroy",this).call(this)}},{key:"getVertices",value:function(e){return[this]}}])&&Ve(r.prototype,n),o&&Ve(r,o),t}();function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $e(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function et(e,t,r){return(et="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tt(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function tt(e){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rt(e,t){return(rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Geometry.Point=Xe;var nt=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=$e(this,tt(t).call(this,e))).CLASS_NAME="SuperMap.Geometry.LineString",r.geometryType="LineString",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}(t,Je),r=t,o=[{key:"calculateCircle",value:function(e){if(e.length<3)return e;var t={},r=e[0],n=e[1],o=e[2],i=0,a=0,s=!0,l=0,u=0,c=0,f=[],p=(o.y-r.y)/(o.x-r.x),h=o.y-p*o.x;if(o.x!=r.x&&o.y!=r.y&&n.y==p*n.x+h||o.x==r.x&&n.x==r.x||o.y==r.y&&n.y==r.y||o.x==r.x&&o.y==r.y||o.x==n.x&&o.y==n.y||r.x==n.x&&r.y==n.y)f.push(r),f.push(n),f.push(o);else{var y=(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y))*(2*(o.y-r.y))-(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))*(2*(n.y-r.y)),d=2*(n.x-r.x)*(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))-2*(o.x-r.x)*(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y)),v=4*((n.x-r.x)*(o.y-r.y)-(o.x-r.x)*(n.y-r.y));t.x=y/v,t.y=d/v;var m=(2*(i=Math.sqrt((r.x-t.x)*(r.x-t.x)+(r.y-t.y)*(r.y-t.y)))*i-((r.x-o.x)*(r.x-o.x)+(r.y-o.y)*(r.y-o.y)))/(2*i*i);m=(m=m>=1?1:m)<=-1?-1:m,c=180*Math.acos(m)/Math.PI,a=(c=o.x==r.x?t.x>r.x&&n.x>r.x||t.x<r.x&&n.x<r.x?360-c:c:t.y>p*t.x+h&&n.y>p*n.x+h||t.y<p*t.x+h&&n.y<p*n.x+h?360-c:c)/72,o.y!=r.y?o.x==r.x?o.y>r.y?n.x<r.x&&(s=!1):n.x>r.x&&(s=!1):o.x<r.x?n.y<p*n.x+h&&(s=!1):n.y>p*n.x+h&&(s=!1):o.x>r.x?n.y>r.y&&(s=!1):n.y<r.y&&(s=!1);var b=(r.y-t.y)/(r.x-t.x),g=b>=0?180*Math.atan(b)/Math.PI:Math.abs(180*Math.atan(b)/Math.PI)+90,S=Math.abs(t.y);r.y==S&&S==o.y&&r.x<o.x&&(g+=180);var w=r.y-t.y;f.push(r);for(var O=1;O<72;O++){l=a*O,u=g,s?w>=0?b>=0?u+=l:u=180-(u-90)+l:u=b>0?u-180+l:90-u+l:w>=0?b>=0?u-=l:u=180-(u-90)-l:u=b>=0?u-180-l:90-u-l,u=u*Math.PI/180;var _=t.x+i*Math.cos(u),P=t.y+i*Math.sin(u);f.push(new Xe(_,P))}f.push(o)}return f}},{key:"createLineEPS",value:function(e){var r=[],n=e.length;if(n<2)return e;for(var o=0;o<n;){if("LTypeArc"==e[o].type){var i=t.createLineArc(r,o,n,e);r=i[0],o=i[1]}else r.push(e[o]),o++}return r}},{key:"createLineArc",value:function(e,r,n,o){if(0==r){var i=t.addPointEPS(o,r,n,"LTypeArc");Array.prototype.push.apply(e,i[0]),r=i[1]+1}else if(r==n-1){var a=[o[r-1],o[r]],s=t.calculateCircle(a);Array.prototype.push.apply(e,s),r++}else{var l=t.addPointEPS(o,r,n,"LTypeArc");e.pop(),Array.prototype.push.apply(e,l[0]),r=l[1]+1}return[e,r]}},{key:"addPointEPS",value:function(e,r,n,o){var i,a=[],s=r+1;return 0==r?Array.prototype.push.apply(a,[e[r],e[r+1]]):r==n-1?Array.prototype.push.apply(a,[e[r-1],e[r]]):Array.prototype.push.apply(a,[e[r-1],e[r],e[r+1]]),"LTypeCurve"==o?i=t.calculatePointsFBZN(a):"LTypeArc"==o&&(i=t.calculateCircle(a)),[i,s]}}],(n=[{key:"removeComponent",value:function(e){var r=this.components&&this.components.length>2;return r&&et(tt(t.prototype),"removeComponent",this).apply(this,arguments),r}},{key:"getSortedSegments",value:function(){for(var e,t,r=this.components.length-1,n=new Array(r),o=0;o<r;++o)e=this.components[o],t=this.components[o+1],e.x<t.x?n[o]={x1:e.x,y1:e.y,x2:t.x,y2:t.y}:n[o]={x1:t.x,y1:t.y,x2:e.x,y2:e.y};return n.sort(function(e,t){return e.x1-t.x1})}},{key:"getVertices",value:function(e){return!0===e?[this.components[0],this.components[this.components.length-1]]:!1===e?this.components.slice(1,this.components.length-1):this.components.slice()}}])&&Ze(r.prototype,n),o&&Ze(r,o),t}();function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function at(e,t){return!t||"object"!==ot(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function st(e,t,r){return(st="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lt(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Geometry.LineString=nt;var ct=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=at(this,lt(t).call(this,e,r,n))).x=parseFloat(e),o.y=parseFloat(r),o.text=n.toString(),o.bsInfo={h:null,w:null},o.element=document.createElement("span"),o.CLASS_NAME="SuperMap.Geometry.GeoText",o.geometryType="GeoText",o}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}(t,Ce),r=t,(n=[{key:"destroy",value:function(){st(lt(t.prototype),"destroy",this).call(this),this.x=null,this.y=null,this.text=null}},{key:"getCentroid",value:function(){return new Xe(this.x,this.y)}},{key:"clone",value:function(e){return null==e&&(e=new t(this.x,this.y,this.text)),ge.applyDefaults(e,this),e}},{key:"calculateBounds",value:function(){this.bounds=new _e(this.x,this.y,this.x,this.y)}},{key:"getLabelPxBoundsByLabel",value:function(e,t,r,n){var o,i,a,s,l=ge.cloneObject(e),u=(n.label||this.text).split("\n").length;if(t=parseFloat(t),r=parseFloat(r),u>1&&(r=parseFloat(r)*u),n.labelAlign&&"cm"!==n.labelAlign)switch(n.labelAlign){case"lt":l.x+=t/2,l.y+=r/2;break;case"lm":l.x+=t/2;break;case"lb":l.x+=t/2,l.y-=r/2;break;case"ct":l.y+=r/2;break;case"cb":l.y-=r/2;break;case"rt":l.x-=t/2,l.y+=r/2;break;case"rm":l.x-=t/2;break;case"rb":l.x-=t/2,l.y-=r/2}return this.bsInfo.h=r,this.bsInfo.w=t,o=l.x-parseFloat(t)/2,i=l.y+parseFloat(r)/2,s=l.x+parseFloat(t)/2,a=l.y-parseFloat(r)/2,new _e(o,i,s,a)}},{key:"getLabelPxBoundsByText",value:function(e,t){var r,n,o,i,a=this.getLabelPxSize(t),s=ge.cloneObject(e);if(t.labelAlign&&"cm"!==t.labelAlign)switch(t.labelAlign){case"lt":s.x+=a.w/2,s.y+=a.h/2;break;case"lm":s.x+=a.w/2;break;case"lb":s.x+=a.w/2,s.y-=a.h/2;break;case"ct":s.y+=a.h/2;break;case"cb":s.y-=a.h/2;break;case"rt":s.x-=a.w/2,s.y+=a.h/2;break;case"rm":s.x-=a.w/2;break;case"rb":s.x-=a.w/2,s.y-=a.h/2}return this.bsInfo.h=a.h,this.bsInfo.w=a.w,r=s.x-a.w/2,n=s.y+a.h/2,i=t.fontStyle&&"italic"===t.fontStyle?s.x+a.w/2+parseInt(parseFloat(t.fontSize)/2):s.x+a.w/2,o=s.y-a.h/2,new _e(r,n,i,o)}},{key:"getLabelPxSize",value:function(e){var t,r,n,o,i=parseFloat(e.strokeWidth);t=e.label||this.text,r=e.fontSize?parseFloat(e.fontSize):parseFloat("12px");var a=t.split("\n"),s=a.length;o=s>1?r*s+s+i+.2*r:r+i+.2*r+1,n=0,this.labelWTmp&&n<this.labelWTmp&&(n=this.labelWTmp);for(var l=0;l<s;l++){var u=this.getTextCount(a[l]),c=this.labelWTmp=ge.getTextBounds(e,a[l],this.element).textWidth+1*u.textC+i;n<c&&(n=c)}var f=new Object;return f.h=o,f.w=n,f}},{key:"getTextCount",value:function(e){for(var t={},r=0,n=0,o=0;o<e.length;o++)e.charCodeAt(o)>255?r++:n++;return t.cnC=r,t.enC=n,t.textC=e.length,t}}])&&it(r.prototype,n),o&&it(r,o),t}();function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ht(e,t){return!t||"object"!==ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yt(e,t,r){return(yt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dt(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function dt(e){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Geometry.GeoText=ct;var mt=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ht(this,dt(t).call(this,e))).componentTypes=["SuperMap.Geometry.Point"],r.CLASS_NAME="SuperMap.Geometry.LinearRing",r.geometryType="LinearRing",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(t,nt),r=t,(n=[{key:"addComponent",value:function(e,r){var n=!1,o=this.components.pop();null==r&&e.equals(o)||(n=yt(dt(t.prototype),"addComponent",this).apply(this,arguments));var i=this.components[0];return yt(dt(t.prototype),"addComponent",this).apply(this,[i]),n}},{key:"removeComponent",value:function(e){var r=this.components&&this.components.length>3;if(r){this.components.pop(),yt(dt(t.prototype),"removeComponent",this).apply(this,arguments);var n=this.components[0];yt(dt(t.prototype),"addComponent",this).apply(this,[n])}return r}},{key:"getArea",value:function(){var e=0;if(this.components&&this.components.length>2){for(var t=0,r=0,n=this.components.length;r<n-1;r++){var o=this.components[r],i=this.components[r+1];t+=(o.x+i.x)*(i.y-o.y)}e=-t/2}return e}},{key:"getVertices",value:function(e){return!0===e?[]:this.components.slice(0,this.components.length-1)}}])&&pt(r.prototype,n),o&&pt(r,o),t}();function bt(e){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e,t){return!t||"object"!==bt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function St(e){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wt(e,t){return(wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Geometry.LinearRing=mt;var Ot=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=gt(this,St(t).call(this,e))).componentTypes=["SuperMap.Geometry.LineString"],r.CLASS_NAME="SuperMap.Geometry.MultiLineString",r.geometryType="MultiLineString",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wt(e,t)}(t,Re),t}();function _t(e){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(e,t){return!t||"object"!==_t(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Geometry.MultiLineString=Ot;var Tt=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Pt(this,Ct(t).call(this,e))).componentTypes=["SuperMap.Geometry.Polygon"],r.CLASS_NAME="SuperMap.Geometry.MultiPolygon",r.geometryType="MultiPolygon",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}(t,Re),t}();function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function At(e,t){return!t||"object"!==kt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jt(e){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Geometry.MultiPolygon=Tt;var Lt=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=At(this,jt(t).call(this,e))).componentTypes=["SuperMap.Geometry.LinearRing"],r.CLASS_NAME="SuperMap.Geometry.Polygon",r.geometryType="Polygon",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}(t,Re),r=t,(n=[{key:"getArea",value:function(){var e=0;if(this.components&&this.components.length>0){e+=Math.abs(this.components[0].getArea());for(var t=1,r=this.components.length;t<r;t++)e-=Math.abs(this.components[t].getArea())}return e}}])&&xt(r.prototype,n),o&&xt(r,o),t}();function Mt(e){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function It(e,t){return!t||"object"!==Mt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ft(e,t){return(Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Geometry.Polygon=Lt;var Bt=function(e){function t(e,r,n,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=It(this,Dt(t).call(this,e,r,n,o))).x=e,i.y=r,i.width=n,i.height=o,i.CLASS_NAME="SuperMap.Geometry.Rectangle",i.geometryType="Rectangle",i}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ft(e,t)}(t,Ce),r=t,(n=[{key:"calculateBounds",value:function(){this.bounds=new _e(this.x,this.y,this.x+this.width,this.y+this.height)}},{key:"getArea",value:function(){return this.width*this.height}}])&&Nt(r.prototype,n),o&&Nt(r,o),t}();function Gt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.Geometry.Rectangle=Bt;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ut=function(){function e(t,r){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.value=t||"",this.name=r||"token",this.CLASS_NAME="SuperMap.Credential"}var t,r,n;return t=e,(r=[{key:"getUrlParameters",value:function(){return this.name+"="+this.value}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){this.value=null,this.name=null}}])&&Gt(t.prototype,r),n&&Gt(t,n),e}();Ut.CREDENTIAL=null,n.Credential=Ut;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
n.Date={toISOString:function(){if("toISOString"in Date.prototype)return function(e){return e.toISOString()};var e=function(e,t){for(var r=e+"";r.length<t;)r="0"+r;return r};return function(t){return isNaN(t.getTime())?"Invalid Date":t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1,2)+"-"+e(t.getUTCDate(),2)+"T"+e(t.getUTCHours(),2)+":"+e(t.getUTCMinutes(),2)+":"+e(t.getUTCSeconds(),2)+"."+e(t.getUTCMilliseconds(),3)+"Z"}}(),parse:function(e){var t,r=e.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/);if(r&&(r[1]||r[7])){var n=parseInt(r[1],10)||0,o=parseInt(r[2],10)-1||0,i=parseInt(r[3],10)||1;t=new Date(Date.UTC(n,o,i));var a=r[7];if(a){var s=parseInt(r[4],10),l=parseInt(r[5],10),u=parseFloat(r[6]),c=0|u,f=Math.round(1e3*(u-c));if(t.setUTCHours(s,l,c,f),"Z"!==a){var p=-1e3*(60*parseInt(a,10)*60+60*(parseInt(r[8],10)||0));t=new Date(t.getTime()+p)}}}else t=new Date("invalid");return t}};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Ht=n.Event={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(e){return e.target||e.srcElement},isSingleTouch:function(e){return e.touches&&1===e.touches.length},isMultiTouch:function(e){return e.touches&&e.touches.length>1},isLeftClick:function(e){return e.which&&1===e.which||e.button&&1===e.button},isRightClick:function(e){return e.which&&3===e.which||e.button&&2===e.button},stop:function(e,t){t||(e.preventDefault?e.preventDefault():e.returnValue=!1),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},findElement:function(e,t){for(var r=n.Event.element(e);r.parentNode&&(!r.tagName||r.tagName.toUpperCase()!=t.toUpperCase());)r=r.parentNode;return r},observe:function(e,t,r,n){var o=ge.getElement(e);if(n=n||!1,"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.attachEvent)&&(t="keydown"),this.observers||(this.observers={}),!o._eventCacheID){var i="eventCacheID_";o.id&&(i=o.id+"_"+i),o._eventCacheID=ge.createUniqueID(i)}var a=o._eventCacheID;this.observers[a]||(this.observers[a]=[]),this.observers[a].push({element:o,name:t,observer:r,useCapture:n}),o.addEventListener?"mousewheel"===t?o.addEventListener(t,r,{useCapture:n,passive:!1}):o.addEventListener(t,r,n):o.attachEvent&&o.attachEvent("on"+t,r)},stopObservingElement:function(e){var t=ge.getElement(e)._eventCacheID;this._removeElementObservers(n.Event.observers[t])},_removeElementObservers:function(e){if(e)for(var t=e.length-1;t>=0;t--){var r=e[t],o=new Array(r.element,r.name,r.observer,r.useCapture);n.Event.stopObserving.apply(this,o)}},stopObserving:function(e,t,r,o){o=o||!1;var i=ge.getElement(e),a=i._eventCacheID;"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||i.detachEvent)&&(t="keydown");var s=!1,l=n.Event.observers[a];if(l)for(var u=0;!s&&u<l.length;){var c=l[u];if(c.name===t&&c.observer===r&&c.useCapture===o){l.splice(u,1),0==l.length&&delete n.Event.observers[a],s=!0;break}u++}return s&&(i.removeEventListener?i.removeEventListener(t,r,o):i&&i.detachEvent&&i.detachEvent("on"+t,r)),s},unloadCache:function(){if(n.Event&&n.Event.observers){for(var e in n.Event.observers){var t=n.Event.observers[e];n.Event._removeElementObservers.apply(this,[t])}n.Event.observers=!1}},CLASS_NAME:"SuperMap.Event"};function Jt(e){return(Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.Event=Ht,n.Event.observe(window,"unload",n.Event.unloadCache,!1);
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Vt=function(){function e(t,r,n,o,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners={},this.object=t,this.element=null,this.eventTypes=[],this.eventHandler=null,this.fallThrough=o,this.includeXY=!1,this.extensions={},this.extensionCount={},this.clearMouseListener=null,ge.extend(this,i),null!=n)for(var a=0,s=n.length;a<s;a++)this.addEventType(n[a]);null!=r&&this.attachToElement(r),this.CLASS_NAME="SuperMap.Events"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){for(var e in this.extensions)"boolean"!=typeof this.extensions[e]&&this.extensions[e].destroy();this.extensions=null,this.element&&(Ht.stopObservingElement(this.element),this.element.hasScrollEvent&&Ht.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}},{key:"addEventType",value:function(e){this.listeners[e]||(this.eventTypes.push(e),this.listeners[e]=[])}},{key:"attachToElement",value:function(e){this.element?Ht.stopObservingElement(this.element):(this.eventHandler=ye.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=ye.bind(this.clearMouseCache,this)),this.element=e;for(var t=0,r=this.BROWSER_EVENTS.length;t<r;t++){var n=this.BROWSER_EVENTS[t];this.addEventType(n),Ht.observe(e,n,this.eventHandler)}Ht.observe(e,"dragstart",Ht.stop)}},{key:"on",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.register(t,e.scope,e[t])}},{key:"register",value:function(t,r,n,o){if(t in e&&!this.extensions[t]&&(this.extensions[t]=new e[t](this)),null!=n&&-1!==ge.indexOf(this.eventTypes,t)){null==r&&(r=this.object);var i=this.listeners[t];i||(i=[],this.listeners[t]=i,this.extensionCount[t]=0);var a={obj:r,func:n};o?(i.splice(this.extensionCount[t],0,a),"object"===Jt(o)&&o.extension&&this.extensionCount[t]++):i.push(a)}}},{key:"registerPriority",value:function(e,t,r){this.register(e,t,r,!0)}},{key:"un",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.unregister(t,e.scope,e[t])}},{key:"unregister",value:function(e,t,r){null==t&&(t=this.object);var n=this.listeners[e];if(null!=n)for(var o=0,i=n.length;o<i;o++)if(n[o].obj===t&&n[o].func===r){n.splice(o,1);break}}},{key:"remove",value:function(e){null!=this.listeners[e]&&(this.listeners[e]=[])}},{key:"triggerEvent",value:function(e,t){var r=this.listeners[e];if(r&&0!=r.length){var n;null==t&&(t={}),t.object=this.object,t.element=this.element,t.type||(t.type=e);for(var o=0,i=(r=r.slice()).length;o<i;o++){var a=r[o];if(void 0!=(n=a.func.apply(a.obj,[t]))&&!1===n)break}return this.fallThrough||Ht.stop(t,!0),n}}},{key:"handleBrowserEvent",value:function(e){var t=e.type,r=this.listeners[t];if(r&&0!=r.length){var n=e.touches;if(n&&n[0]){for(var o,i=0,a=0,s=n.length,l=0;l<s;++l)i+=(o=n[l]).clientX,a+=o.clientY;e.clientX=i/s,e.clientY=a/s}this.includeXY&&(e.xy=this.getMousePosition(e)),this.triggerEvent(t,e)}}},{key:"clearMouseCache",value:function(){this.element.scrolls=null,this.element.lefttop=null;var e=document.body;e&&(0==e.scrollTop&&0==e.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}},{key:"getMousePosition",value:function(e){if(this.includeXY?this.element.hasScrollEvent||(Ht.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var t=ge.getViewportElement();this.element.scrolls=[t.scrollLeft,t.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=ge.pagePosition(this.element)),new fe(e.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],e.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}])&&Wt(t.prototype,r),n&&Wt(t,n),e}();function zt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.Events=Vt,n.Events.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"];
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var qt=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.Feature",this.layer=t,this.id=ge.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=r,this.data=null!=n?n:{}}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.id=null,this.lonlat=null,this.data=null}}])&&zt(t.prototype,r),n&&zt(t,n),e}();function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xt(e,t){return!t||"object"!==Yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kt(e,t,r){return(Kt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zt(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $t(e,t){return($t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Feature=qt;var er=function(e){function t(e,r,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=Xt(this,Zt(t).call(this,null,null,r))).fid=null,i.geometry=e||null,i.attributes={},r&&(i.attributes=ge.extend(i.attributes,r)),i.bounds=null,i.state=null,i.style=o||null,i.url=null,i.lonlat=null,i.CLASS_NAME="SuperMap.Feature.Vector",n.State={UNKNOWN:"Unknown",INSERT:"Insert",UPDATE:"Update",DELETE:"Delete"},t.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"default",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}},i}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$t(e,t)}(t,qt),r=t,(o=[{key:"destroy",value:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,Kt(Zt(t.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){return new t(this.geometry?this.geometry.clone():null,this.attributes,this.style)}},{key:"toState",value:function(e){if(e===n.State.UPDATE)switch(this.state){case n.State.UNKNOWN:case n.State.DELETE:this.state=e;break;case n.State.UPDATE:case n.State.INSERT:}else if(e===n.State.INSERT)switch(this.state){case n.State.UNKNOWN:break;default:this.state=e}else if(e===n.State.DELETE)switch(this.state){case n.State.INSERT:case n.State.DELETE:break;case n.State.UNKNOWN:case n.State.UPDATE:this.state=e}else e===n.State.UNKNOWN&&(this.state=e)}}])&&Qt(r.prototype,o),i&&Qt(r,i),t}();function tr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.Feature.Vector=er;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var rr=function(){function e(t){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=null,this.keepData=!1,ge.extend(this,t),this.options=t,this.CLASS_NAME="SuperMap.Format"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){}},{key:"read",value:function(e){}},{key:"write",value:function(e){}}])&&tr(t.prototype,r),n&&tr(t,n),e}();function nr(e){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function or(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ir(e,t){return!t||"object"!==nr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ar(e){return(ar=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sr(e,t){return(sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Format=n.Format||rr;var lr=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ir(this,ar(t).call(this,e))).indent="    ",r.space=" ",r.newline="\n",r.level=0,r.pretty=!1,r.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),r.CLASS_NAME="SuperMap.Format.JSON",r.serialize={object:function(e){if(null==e)return"null";if(e.constructor===Date)return this.serialize.date.apply(this,[e]);if(e.constructor===Array)return this.serialize.array.apply(this,[e]);var t,r,n,o=["{"];this.level+=1;var i=!1;for(t in e)e.hasOwnProperty(t)&&(r=this.write.apply(this,[t,this.pretty]),n=this.write.apply(this,[e[t],this.pretty]),null!=r&&null!=n&&(i&&o.push(","),o.push(this.writeNewline(),this.writeIndent(),r,":",this.writeSpace(),n),i=!0));return this.level-=1,o.push(this.writeNewline(),this.writeIndent(),"}"),o.join("")},array:function(e){var t,r=["["];this.level+=1;for(var n=0,o=e.length;n<o;++n)null!=(t=this.write.apply(this,[e[n],this.pretty]))&&(n>0&&r.push(","),r.push(this.writeNewline(),this.writeIndent(),t));return this.level-=1,r.push(this.writeNewline(),this.writeIndent(),"]"),r.join("")},string:function(e){var t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(e)?'"'+e.replace(/([\x00-\x1f\\"])/g,function(e,r){var n=t[r];return n||(n=r.charCodeAt(),"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16))})+'"':'"'+e+'"'},number:function(e){return isFinite(e)?String(e):"null"},boolean:function(e){return String(e)},date:function(e){function t(e){return e<10?"0"+e:e}return'"'+e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+'"'}},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sr(e,t)}(t,rr),r=t,(n=[{key:"read",value:function(e,t){var r;if(this.nativeJSON)try{r=JSON.parse(e,t)}catch(e){}return this.keepData&&(this.data=r),r}},{key:"write",value:function(e,t){this.pretty=!!t;var r=null,n=nr(e);if(this.serialize[n])try{r=!this.pretty&&this.nativeJSON?JSON.stringify(e):this.serialize[n].apply(this,[e])}catch(e){}return r}},{key:"writeIndent",value:function(){var e=[];if(this.pretty)for(var t=0;t<this.level;++t)e.push(this.indent);return e.join("")}},{key:"writeNewline",value:function(){return this.pretty?this.newline:""}},{key:"writeSpace",value:function(){return this.pretty?this.space:""}}])&&or(r.prototype,n),o&&or(r,o),t}();function ur(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.Format.JSON=lr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var cr=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.red=t||0==t?t:255,this.green=r||0,this.blue=n||0,this.CLASS_NAME="SuperMap.ServerColor"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){if(t){var r=new e,n=255;null!==t.red&&(n=Number(t.red)),r.red=n;var o=0;null!==t.green&&(o=Number(t.green)),r.green=o;var i=0;return null!==t.blue&&(i=Number(t.blue)),r.blue=i,r}}}],(r=[{key:"destroy",value:function(){this.red=null,this.green=null,this.blue=null}}])&&ur(t.prototype,r),n&&ur(t,n),e}();function fr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ServerColor=cr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var pr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fillBackColor=new cr(255,255,255),this.fillBackOpaque=!1,this.fillForeColor=new cr(255,0,0),this.fillGradientMode=null,this.fillGradientAngle=0,this.fillGradientOffsetRatioX=0,this.fillGradientOffsetRatioY=0,this.fillOpaqueRate=100,this.fillSymbolID=0,this.lineColor=new cr(0,0,0),this.lineSymbolID=0,this.lineWidth=1,this.markerAngle=0,this.markerSize=1,this.markerSymbolID=-1,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ServerStyle"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){if(t)return new e({fillBackColor:cr.fromJson(t.fillBackColor),fillBackOpaque:t.fillBackOpaque,fillForeColor:cr.fromJson(t.fillForeColor),fillGradientMode:t.fillGradientMode,fillGradientAngle:t.fillGradientAngle,fillGradientOffsetRatioX:t.fillGradientOffsetRatioX,fillGradientOffsetRatioY:t.fillGradientOffsetRatioY,fillOpaqueRate:t.fillOpaqueRate,fillSymbolID:t.fillSymbolID,lineColor:cr.fromJson(t.lineColor),lineSymbolID:t.lineSymbolID,lineWidth:t.lineWidth,markerAngle:t.markerAngle,markerSize:t.markerSize,markerSymbolID:t.markerSymbolID})}}],(r=[{key:"destroy",value:function(){var e=this;e.fillBackColor&&(e.fillBackColor.destroy(),e.fillBackColor=null),e.fillBackOpaque=null,e.fillForeColor&&(e.fillForeColor.destroy(),e.fillForeColor=null),e.fillGradientMode=null,e.fillGradientAngle=null,e.fillGradientOffsetRatioX=null,e.fillGradientOffsetRatioY=null,e.fillOpaqueRate=null,e.fillSymbolID=null,e.lineColor&&(e.lineColor.destroy(),e.lineColor=null),e.lineSymbolID=null,e.lineWidth=null,e.markerAngle=null,e.markerSize=null,e.markerSymbolID=null}},{key:"toServerJSONObject",value:function(){var e={};return e=ge.copyAttributes(e,this)}}])&&fr(t.prototype,r),n&&fr(t,n),e}();function hr(e){return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dr(e){return(dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mr(e,t){return(mr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.ServerStyle=pr;var br=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=dr(t).call(this,e))||"object"!==hr(o)&&"function"!=typeof o?vr(n):o).measure=null,e&&ge.extend(vr(r),e),r.CLASS_NAME="SuperMap.PointWithMeasure",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mr(e,t)}(t,Xe),r=t,o=[{key:"fromJson",value:function(e){if(e)return new t({x:e.x,y:e.y,measure:e.measure})}}],(n=[{key:"equals",value:function(e){var t=!1;if(null!=e){var r=this.x===e.x&&this.y===e.y&&this.measure===e.measure,n=isNaN(this.x)&&isNaN(this.y)&&isNaN(this.measure),o=isNaN(e.x)&&isNaN(e.y)&&isNaN(e.measure);t=r||n&&o}return t}},{key:"toJson",value:function(){var e="{";return null!=this.measure&&void 0!=this.measure&&(e+='"measure":'+this.measure+","),e+='"x":'+this.x+",",e+='"y":'+this.y,e+="}"}},{key:"destroy",value:function(){this.measure=null,this.x=null,this.y=null}}])&&yr(r.prototype,n),o&&yr(r,o),t}();function gr(e){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wr(e){return(wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Or(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _r(e,t){return(_r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.PointWithMeasure=br;var Pr=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=wr(t).call(this,e,r))||"object"!==gr(i)&&"function"!=typeof i?Or(o):i).id=null,n.center=null,n.style=null,n.length=null,n.maxM=null,n.minM=null,n.parts=null,n.points=null,n.type=null,n.componentTypes=["SuperMap.Geometry.LinearRing","SuperMap.Geometry.LineString"],r&&ge.extend(Or(n),r),n.CLASS_NAME="SuperMap.Route",n.geometryType="LINEM",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_r(e,t)}(t,Re),r=t,o=[{key:"fromJson",value:function(e){if(e){var r=e.parts||[],n=e.points||[],o=r.length,i=[];if(!(o>0))return null;for(var a=0,s=0,l=[];a<o;a++){for(var u=0;u<r[a];u++)l.push(br.fromJson(n[s+u]));s+=r[a],l[0].equals(l[r[a]-1])?i.push(new mt(l)):i.push(new nt(l)),l=[]}return new t(i,{id:e.id,center:e.center,style:e.style,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type,parts:e.parts})}}}],(n=[{key:"toJson",value:function(){var e="{";if(null!=this.id&&void 0!=this.id&&(e+='"id":'+this.id+","),null!=this.center&&void 0!=this.center&&(e+='"center":'+this.center+","),null!=this.style&&void 0!=this.style&&(e+='"style":'+this.style+","),null!=this.length&&void 0!=this.length&&(e+='"length":'+this.length+","),null!=this.maxM&&void 0!=this.maxM&&(e+='"maxM":'+this.maxM+","),null!=this.minM&&void 0!=this.minM&&(e+='"minM":'+this.minM+","),null!=this.type&&void 0!=this.type&&(e+='"type":"'+this.type+'",'),null!=this.parts&&void 0!=this.parts){e+='"parts":['+this.parts[0];for(var t=1;t<this.parts.length;t++)e+=","+this.parts[t];e+="],"}if(null!=this.components&&this.components.length>0){e+='"points":[';for(var r=0,n=this.components.length;r<n;r++)for(var o=0,i=this.components[r].components.length;o<i;o++)e+=this.components[r].components[o].toJson()+",";e=e.replace(/,$/g,""),e+="]"}return e=e.replace(/,$/g,""),e+="}"}},{key:"destroy",value:function(){var e=this;e.id=null,e.center=null,e.style=null,e.length=null,e.maxM=null,e.minM=null,e.type=null,e.parts=null,e.components.length=0,e.components=null,e.componentTypes=null}}])&&Sr(r.prototype,n),o&&Sr(r,o),t}();function Cr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.Route=Pr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Er=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=0,this.style=null,this.parts=null,this.points=null,this.type=null,this.prjCoordSys=null,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ServerGeometry"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){if(t)return new e({id:t.id,style:pr.fromJson(t.style),parts:t.parts,partTopo:t.partTopo,points:t.points,center:t.center,length:t.length,maxM:t.maxM,minM:t.minM,type:t.type})}},{key:"fromGeometry",value:function(t){if(t){var r=0,n=[],o=[],i=null,s=t.components,l=t.CLASS_NAME,u={epsgCode:t.SRID};if(isNaN(t.id)||(r=t.id),"SuperMap.Geometry.LinearRing"!=l&&"SuperMap.Geometry.LineString"!=l&&(t instanceof Fe||t instanceof Ot)){for(var c=s.length,f=0;f<c;f++){var p=s[f].getVertices().length;n.push(p);for(var h=0;h<p;h++)o.push(new Xe(s[f].getVertices()[h].x,s[f].getVertices()[h].y))}i="SuperMap.Geometry.MultiPoint"==l?a.POINT:a.LINE}else if(t instanceof Tt){for(var y=s.length,d=0;d<y;d++)for(var v=s[d].components,m=v.length,b=0;b<m;b++){var g=v[b].getVertices().length+1;n.push(g);for(var S=0;S<g-1;S++)o.push(new Xe(v[b].getVertices()[S].x,v[b].getVertices()[S].y));o.push(new Xe(v[b].getVertices()[0].x,v[b].getVertices()[0].y))}i=a.REGION}else if(t instanceof Lt){for(var w=s.length,O=0;O<w;O++){var _=s[O].getVertices().length+1;n.push(_);for(var P=0;P<_-1;P++)o.push(new Xe(s[O].getVertices()[P].x,s[O].getVertices()[P].y));o.push(new Xe(s[O].getVertices()[0].x,s[O].getVertices()[0].y))}i=a.REGION}else{for(var C=t.getVertices().length,E=0;E<C;E++)o.push(new Xe(t.getVertices()[E].x,t.getVertices()[E].y));t instanceof mt&&(o.push(new Xe(t.getVertices()[0].x,t.getVertices()[0].y)),C++),n.push(C),i=t instanceof Xe?a.POINT:a.LINE}return new e({id:r,style:null,parts:n,points:o,type:i,prjCoordSys:u})}}},{key:"IsClockWise",value:function(e){var t=e.length;if(t<3)return 0;var r=e[0].y*(e[t-1].x-e[1].x);e.push(e[0]);for(var n=1;n<t;n++)r+=e[n].y*(e[n-1].x-e[n+1].x);return.5*r}},{key:"bubbleSort",value:function(e,t,r,n){for(var o=0;o<e.length;o++)for(var i=0;i<e.length;i++)if(e[o]>e[i]){var a=e[i];e[i]=e[o],e[o]=a;var s=t[i];if(t[i]=t[o],t[o]=s,r&&r.length>0){var l=r[i];r[i]=r[o],r[o]=l}if(n&&n.length>0){var u=n[i];n[i]=n[o],n[o]=u}}}}],(r=[{key:"destroy",value:function(){var e=this;e.id=null,e.style=null,e.parts=null,e.partTopo=null,e.points=null,e.type=null,e.prjCoordSys=null}},{key:"toGeometry",value:function(){var e=this;switch(e.type.toUpperCase()){case a.POINT:return e.toGeoPoint();case a.LINE:return e.toGeoLine();case a.LINEM:return e.toGeoLinem();case a.REGION:return e.toGeoRegion();case a.POINTEPS:return e.toGeoPoint();case a.LINEEPS:return e.toGeoLineEPS();case a.REGIONEPS:return e.toGeoRegionEPS();case a.GEOCOMPOUND:return e.transformGeoCompound()}}},{key:"toGeoPoint",value:function(){var e=this.parts||[],t=this.points||[],r=e.length;if(r>0){if(1===r)return new Xe(t[0].x,t[0].y);for(var n=[],o=0;o<r;o++)n.push(new Xe(t[o].x,t[o].y));return new Fe(n)}return null}},{key:"toGeoLine",value:function(){var e=this.parts||[],t=this.points||[],r=e.length;if(r>0){if(1===r){for(var n=[],o=0;o<e[0];o++)n.push(new Xe(t[o].x,t[o].y));return n[0].equals(n[e[0]-1])?new mt(n):new nt(n)}for(var i=[],a=0;a<r;a++){for(var s=[],l=0;l<e[a];l++)s.push(new Xe(t[l].x,t[l].y));i.push(new nt(s)),t.splice(0,e[a])}return new Ot(i)}return null}},{key:"toGeoLineEPS",value:function(){var e,t,r,n,o,i=this.parts||[],a=this.points||[],s=i.length;if(s>0){if(1===s){for(e=0,r=[];e<i[0];e++)r.push(new Xe(a[e].x,a[e].y,a[e].type));return r[0].equals(r[i[0]-1])?(o=nt.createLineEPS(r),new mt(o)):(o=nt.createLineEPS(r),new nt(o))}for(e=0,n=[];e<s;e++){for(t=0,r=[];t<i[e];t++)r.push(new Xe(a[t].x,a[t].y));o=nt.createLineEPS(r),n.push(new nt(o)),a.splice(0,i[e])}return new Ot(n)}return null}},{key:"toGeoLinem",value:function(){return Pr.fromJson(this)}},{key:"toGeoRegion",value:function(){var t=this.parts||[],r=this.partTopo||[],n=this.points||[],o=t.length;if(o<=0)return null;var i=[],a=[];if(1==o){for(var s=0;s<n.length;s++)a.push(new Xe(n[s].x,n[s].y));return i.push(new Lt([new mt(a)])),new Tt(i)}for(var l=[],u=[],c=[],f=[],p=[],h=0,y=0;h<o;h++){for(var d=0;d<t[h];d++)a.push(new Xe(n[y+d].x,n[y+d].y));y+=t[h];var v=new Lt([new mt(a)]);a=[],c.push(v),0===r.length&&f.push(v.getBounds()),p.push(1),u.push(v.getArea())}if(e.bubbleSort(u,c,r,f),0===r.length){for(var m=[],b=1;b<c.length;b++)for(var g=b-1;g>=0;g--)if(m[b]=-1,f[g].containsBounds(f[b])){p[b]=-1*p[g],p[b]<0&&(m[b]=g);break}for(var S=0;S<c.length;S++)p[S]>0?i.push(c[S]):(i[m[S]].components=i[m[S]].components.concat(c[S].components),i.push(""))}else{i=new Array;for(var w=0;w<c.length;w++)if(r[w]&&-1==r[w]?l=l.concat(c[w].components):(l.length>0&&i.length>0&&(i[i.length-1].components=i[i.length-1].components.concat(l),l=[]),i.push(c[w])),w==o-1){var O=i.length;if(O)i[O-1].components=i[O-1].components.concat(l);else for(var _=0,P=l.length;_<P;_++)i.push(new Lt(l))}}return new Tt(i)}},{key:"toGeoRegionEPS",value:function(){var t=this.parts||[],r=this.partTopo||[],n=this.points||[],o=t.length;if(o<=0)return null;var i,a=[],s=[];if(1==o){for(var l=0;l<n.length;l++)s.push(new Xe(n[l].x,n[l].y));return i=nt.createLineEPS(s),a.push(new Lt([new mt(i)])),new Tt(a)}for(var u=[],c=[],f=[],p=[],h=[],y=0,d=0;y<o;y++){for(var v=0;v<t[y];v++)s.push(new Xe(n[d+v].x,n[d+v].y));d+=t[y],i=nt.createLineEPS(s);var m=new Lt([new mt(i)]);s=[],f.push(m),0===r.length&&p.push(m.getBounds()),h.push(1),c.push(m.getArea())}if(e.bubbleSort(c,f,r,p),0===r.length){for(var b=[],g=1;g<f.length;g++)for(var S=g-1;S>=0;S--)if(b[g]=-1,p[S].containsBounds(p[g])){h[g]=-1*h[S],h[g]<0&&(b[g]=S);break}for(var w=0;w<f.length;w++)h[w]>0?a.push(f[w]):(a[b[w]].components=a[b[w]].components.concat(f[w].components),a.push(""))}else{a=new Array;for(var O=0;O<f.length;O++)if(r[O]&&-1==r[O]?u=u.concat(f[O].components):(u.length>0&&a.length>0&&(a[a.length-1].components=a[a.length-1].components.concat(u),u=[]),a.push(f[O])),O==o-1){var _=a.length;if(_)a[_-1].components=a[_-1].components.concat(u);else for(var P=0,C=u.length;P<C;P++)a.push(new Lt(u))}}return new Tt(a)}},{key:"transformGeoCompound",value:function(){var t=this.geoParts||[],r=t.length;if(r<=0)return null;for(var n=[],o=0;o<r;o++){var i=t[o];n.push(new e(i).toGeometry())}return new Re(n)}}])&&Cr(t.prototype,r),n&&Cr(t,n),e}();function Tr(e){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xr(e,t){return!t||"object"!==Tr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ar(e,t,r){return(Ar="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jr(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function jr(e){return(jr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rr(e,t){return(Rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.ServerGeometry=Er;var Lr=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=xr(this,jr(t).call(this,e))).ignoreExtraDims=!0,r.CLASS_NAME="SuperMap.Format.GeoJSON",r.parseCoords={point:function(e){if(!1===this.ignoreExtraDims&&2!=e.length)throw"Only 2D points are supported: "+e;return new Xe(e[0],e[1])},multipoint:function(e){for(var t=[],r=null,n=0,o=e.length;n<o;++n){try{r=this.parseCoords.point.apply(this,[e[n]])}catch(e){throw e}t.push(r)}return new Fe(t)},linestring:function(e){for(var t=[],r=null,n=0,o=e.length;n<o;++n){try{r=this.parseCoords.point.apply(this,[e[n]])}catch(e){throw e}t.push(r)}return new nt(t)},multilinestring:function(e){for(var t=[],r=null,n=0,o=e.length;n<o;++n){try{r=this.parseCoords.linestring.apply(this,[e[n]])}catch(e){throw e}t.push(r)}return new Ot(t)},polygon:function(e){for(var t,r,n=[],o=0,i=e.length;o<i;++o){try{r=this.parseCoords.linestring.apply(this,[e[o]])}catch(e){throw e}t=new mt(r.components),n.push(t)}return new Lt(n)},multipolygon:function(e){for(var t=[],r=null,n=0,o=e.length;n<o;++n){try{r=this.parseCoords.polygon.apply(this,[e[n]])}catch(e){throw e}t.push(r)}return new Tt(t)},box:function(e){if(2!=e.length)throw"GeoJSON box coordinates must have 2 elements";return new Lt([new mt([new Xe(e[0][0],e[0][1]),new Xe(e[1][0],e[0][1]),new Xe(e[1][0],e[1][1]),new Xe(e[0][0],e[1][1]),new Xe(e[0][0],e[0][1])])])}},r.extract={feature:function(e){var t=this.extract.geometry.apply(this,[e.geometry]),r={type:"Feature",properties:this.createAttributes(e),geometry:t};return e.geometry&&"TEXT"===e.geometry.type&&(r.properties.texts=e.geometry.texts,r.properties.textStyle=e.geometry.textStyle),e.fid&&(r.id=e.fid),e.ID&&(r.id=e.ID),r},geometry:function(e){if(null==e)return null;!e.parts&&e.points&&(e.parts=[e.points.length]);var t,r=e.hasOwnProperty("geometryType")?e:new Er(e).toGeometry()||e,n=r.geometryType||r.type;return"LinearRing"===n&&(n="LineString"),"LINEM"===n&&(n="MultiLineString"),t=this.extract[n.toLowerCase()].apply(this,[r]),"Collection"===(n="TEXT"===n?"Point":n)?{type:"GeometryCollection",geometries:t}:{type:n,coordinates:t}},point:function(e){var t=[e.x,e.y];for(var r in e)"x"===r||"y"===r||null===e[r]||isNaN(e[r])||t.push(e[r]);return t},text:function(e){return[e.points[0].x,e.points[0].y]},multipoint:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.point.apply(this,[e.components[r]]));return t},linestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.point.apply(this,[e.components[r]]));return t},multilinestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.linestring.apply(this,[e.components[r]]));return t},polygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.linestring.apply(this,[e.components[r]]));return t},multipolygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.polygon.apply(this,[e.components[r]]));return t},collection:function(e){for(var t=e.components.length,r=new Array(t),n=0;n<t;++n)r[n]=this.extract.geometry.apply(this,[e.components[n]]);return r}},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rr(e,t)}(t,lr),r=t,(n=[{key:"read",value:function(e,r,n){r=r||"FeatureCollection";var o=null,i=null;if(i="string"==typeof e?Ar(jr(t.prototype),"read",this).call(this,e,n):e){if("string"!=typeof i.type);else if(this.isValidType(i,r))switch(r){case"Geometry":try{o=this.parseGeometry(i)}catch(e){}break;case"Feature":try{(o=this.parseFeature(i)).type="Feature"}catch(e){}break;case"FeatureCollection":switch(o=[],i.type){case"Feature":try{o.push(this.parseFeature(i))}catch(e){o=null}break;case"FeatureCollection":for(var a=0,s=i.features.length;a<s;++a)try{o.push(this.parseFeature(i.features[a]))}catch(e){o=null}break;default:try{var l=this.parseGeometry(i);o.push(new er(l))}catch(e){o=null}}}}else;return o}},{key:"write",value:function(e,r){return Ar(jr(t.prototype),"write",this).call(this,this.toGeoJSON(e),r)}},{key:"fromGeoJSON",value:function(e,t,r){var n=this,o=this.read(e,t,r);return ge.isArray(o)?o.map(function(e){return n._toiSevrerFeature(e)}):this._toiSevrerFeature(o)}},{key:"toGeoJSON",value:function(e){var t={type:null};if(ge.isArray(e)){t.type="FeatureCollection";var r=e.length;t.features=new Array(r);for(var n=0;n<r;++n){var o=e[n];if(s(o)){var i={};i.geometry=o,t.features[n]=this.extract.feature.apply(this,[i])}else t.features[n]=this.extract.feature.apply(this,[o])}}else if(s(e)){var a={};a.geometry=e,t=this.extract.feature.apply(this,[a])}else t=this.extract.feature.apply(this,[e]);function s(e){return e.hasOwnProperty("parts")&&e.hasOwnProperty("points")||e.hasOwnProperty("geoParts")}return t}},{key:"isValidType",value:function(e,t){var r=!1;switch(t){case"Geometry":-1==ge.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],e.type)||(r=!0);break;case"FeatureCollection":r=!0;break;default:e.type==t&&(r=!0)}return r}},{key:"parseFeature",value:function(e){var t,r,n,o;n=e.properties?e.properties:{},o=e.geometry&&e.geometry.bbox||e.bbox;try{r=this.parseGeometry(e.geometry)}catch(e){throw e}return t=new er(r,n),o&&(t.bounds=_e.fromArray(o)),e.id&&(t.fid=e.id),t}},{key:"parseGeometry",value:function(e){if(null==e)return null;var t;if("GeometryCollection"==e.type){if(!ge.isArray(e.geometries))throw"GeometryCollection must have geometries array: "+e;for(var r=e.geometries.length,n=new Array(r),o=0;o<r;++o)n[o]=this.parseGeometry.apply(this,[e.geometries[o]]);t=new Re(n)}else{if(!ge.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!this.parseCoords[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{t=this.parseCoords[e.type.toLowerCase()].apply(this,[e.coordinates])}catch(e){throw e}}return t}},{key:"createCRSObject",value:function(e){var t=e.layer.projection.toString(),r={};if(t.match(/epsg:/i)){var n=parseInt(t.substring(t.indexOf(":")+1));r=4326==n?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+n}}}return r}},{key:"_toiSevrerFeature",value:function(e){var t=e.attributes,r=[],n=[];for(var o in t)r.push(o),n.push(t[o]);var i={fieldNames:r,fieldValues:n,geometry:Er.fromGeometry(e.geometry)};return i.geometry.id=e.fid,i}},{key:"createAttributes",value:function(e){if(!e)return null;var t={};!function(e,t){if(!e.hasOwnProperty("fieldNames")||!e.hasOwnProperty("fieldValues"))return;var r=e.fieldNames,n=e.fieldValues;for(var o in r)t[r[o]]=n[o]}(e,t);var r=["fieldNames","fieldValues","geometry","stringID","ID"];for(var n in e)r.indexOf(n)>-1||(t[n]=e[n]);return t}}])&&kr(r.prototype,n),o&&kr(r,o),t}();function Mr(e){return(Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ir(e,t){return!t||"object"!==Mr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dr(e){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fr(e,t){return(Fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Format.GeoJSON=Lr;var Br=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ir(this,Dr(t).call(this,e))).regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},r.CLASS_NAME="SuperMap.Format.WKT",r.extract={point:function(e){return e.x+" "+e.y},multipoint:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.point.apply(this,[e.components[r]])+")");return t.join(",")},linestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extract.point.apply(this,[e.components[r]]));return t.join(",")},multilinestring:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.linestring.apply(this,[e.components[r]])+")");return t.join(",")},polygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.linestring.apply(this,[e.components[r]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push("("+this.extract.polygon.apply(this,[e.components[r]])+")");return t.join(",")},collection:function(e){for(var t=[],r=0,n=e.components.length;r<n;++r)t.push(this.extractGeometry.apply(this,[e.components[r]]));return t.join(",")}},r.parse={point:function(e){var t=pe.trim(e).split(this.regExes.spaces);return new er(new Xe(t[0],t[1]))},multipoint:function(e){for(var t,r=pe.trim(e).split(","),n=[],o=0,i=r.length;o<i;++o)t=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.point.apply(this,[t]).geometry);return new er(new Fe(n))},linestring:function(e){for(var t=pe.trim(e).split(","),r=[],n=0,o=t.length;n<o;++n)r.push(this.parse.point.apply(this,[t[n]]).geometry);return new er(new nt(r))},multilinestring:function(e){for(var t,r=pe.trim(e).split(this.regExes.parenComma),n=[],o=0,i=r.length;o<i;++o)t=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.linestring.apply(this,[t]).geometry);return new er(new Ot(n))},polygon:function(e){for(var t,r,n,o=pe.trim(e).split(this.regExes.parenComma),i=[],a=0,s=o.length;a<s;++a)t=o[a].replace(this.regExes.trimParens,"$1"),r=this.parse.linestring.apply(this,[t]).geometry,n=new mt(r.components),i.push(n);return new er(new Lt(i))},multipolygon:function(e){for(var t,r=pe.trim(e).split(this.regExes.doubleParenComma),n=[],o=0,i=r.length;o<i;++o)t=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.polygon.apply(this,[t]).geometry);return new er(new Tt(n))},geometrycollection:function(e){e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var t=pe.trim(e).split("|"),r=[],n=0,o=t.length;n<o;++n)r.push(this.read(t[n]));return r}},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fr(e,t)}(t,rr),r=t,(n=[{key:"read",value:function(e){var t,r,n;e=e.replace(/[\n\r]/g," ");var o=this.regExes.typeStr.exec(e);return o&&(r=o[1].toLowerCase(),n=o[2],this.parse[r]&&(t=this.parse[r].apply(this,[n]))),t}},{key:"write",value:function(e){var t,r,n;e.constructor===Array?(t=e,n=!0):(t=[e],n=!1);var o=[];n&&o.push("GEOMETRYCOLLECTION(");for(var i=0,a=t.length;i<a;++i)n&&i>0&&o.push(","),r=t[i].geometry,o.push(this.extractGeometry(r));return n&&o.push(")"),o.join("")}},{key:"extractGeometry",value:function(e){var t=e.CLASS_NAME.split(".")[2].toLowerCase();return this.extract[t]?("collection"===t?"GEOMETRYCOLLECTION":t.toUpperCase())+"("+this.extract[t].apply(this,[e])+")":null}}])&&Nr(r.prototype,n),o&&Nr(r,o),t}();n.Format.WKT=Br;function Gr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ur=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=this;t=t||{},this.speed=t.speed&&t.speed>=0?t.speed:1,this.frequency=t.speed&&t.frequency>=0?t.frequency:1e3,this.startTime=t.startTime&&null!=t.startTime?t.startTime:0,this.endTime=t.endTime&&null!=t.endTime&&t.endTime>=r.startTime?t.endTime:+new Date,this.repeat=void 0===t.repeat||t.repeat,this.reverse=void 0!==t.reverse&&t.reverse,this.currentTime=null,this.oldTime=null,this.running=!1,this.EVENT_TYPES=["start","pause","stop"],r.events=new Vt(this,null,this.EVENT_TYPES),r.speed=Number(r.speed),r.frequency=Number(r.frequency),r.startTime=Number(r.startTime),r.endTime=Number(r.endTime),r.startTime=Date.parse(new Date(r.startTime)),r.endTime=Date.parse(new Date(r.endTime)),r.currentTime=r.startTime,this.CLASS_NAME="SuperMap.TimeControlBase"}var t,r,n;return t=e,(r=[{key:"updateOptions",value:function(e){var t=this;(e=e||{}).speed&&e.speed>=0&&(t.speed=e.speed,t.speed=Number(t.speed)),e.speed&&e.frequency>=0&&(t.frequency=e.frequency,t.frequency=Number(t.frequency)),e.startTime&&null!=e.startTime&&(t.startTime=e.startTime,t.startTime=Date.parse(new Date(t.startTime))),e.endTime&&null!=e.endTime&&e.endTime>=t.startTime&&(t.endTime=e.endTime,t.endTime=Date.parse(new Date(t.endTime))),null!=e.repeat&&(t.repeat=e.repeat),null!=e.reverse&&(t.reverse=e.reverse)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.tick(),e.events.triggerEvent("start",e.currentTime))}},{key:"pause",value:function(){this.running=!1,this.events.triggerEvent("pause",this.currentTime)}},{key:"stop",value:function(){var e=this;e.currentTime=e.startTime,e.running&&(e.running=!1),e.events.triggerEvent("stop",e.currentTime)}},{key:"toggle",value:function(){this.running?this.pause():this.start()}},{key:"setSpeed",value:function(e){return e>=0&&(this.speed=e,!0)}},{key:"getSpeed",value:function(){return this.speed}},{key:"setFrequency",value:function(e){return e>=0&&(this.frequency=e,!0)}},{key:"getFrequency",value:function(){return this.frequency}},{key:"setStartTime",value:function(e){var t=this;return!((e=Date.parse(new Date(e)))>t.endTime)&&(t.startTime=e,t.currentTime<t.startTime&&(t.currentTime=t.startTime,t.tick()),!0)}},{key:"getStartTime",value:function(){return this.startTime}},{key:"setEndTime",value:function(e){var t=this;return t.endTime=Date.parse(new Date(t.endTime)),!(e<t.startTime)&&(t.endTime=e,t.currentTime>=t.endTime&&(t.currentTime=t.startTime,t.tick()),!0)}},{key:"getEndTime",value:function(){return this.endTime}},{key:"setCurrentTime",value:function(e){var t=this;return t.currentTime=Date.parse(new Date(t.currentTime)),e>=t.startTime&&e<=t.endTime&&(t.currentTime=e,t.startTime=t.currentTime,t.tick(),!0)}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"setRepeat",value:function(e){this.repeat=e}},{key:"getRepeat",value:function(){return this.repeat}},{key:"setReverse",value:function(e){this.reverse=e}},{key:"getReverse",value:function(){return this.reverse}},{key:"getRunning",value:function(){return this.running}},{key:"destroy",value:function(){var e=this;e.speed=null,e.frequency=null,e.startTime=null,e.endTime=null,e.currentTime=null,e.repeat=null,e.running=!1,e.reverse=null}},{key:"tick",value:function(){}}])&&Gr(t.prototype,r),n&&Gr(t,n),e}();function Hr(e){return(Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vr(e,t,r){return(Vr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zr(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function zr(e){return(zr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qr(e,t){return(qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.TimeControlBase=Ur;var Yr=function(e){function t(e,r){var n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this;var a=Wr(n=!(i=zr(t).call(this,r))||"object"!==Hr(i)&&"function"!=typeof i?Wr(o):i);return a.callback=e,Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),r=this,n=function(){},o=function(){return r.apply(this instanceof n&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o}),a.update=a.update.bind(a),a.oldTime=a.currentTime,a.CLASS_NAME="SuperMap.TimeFlowControl",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qr(e,t)}(t,Ur),r=t,(n=[{key:"updateOptions",value:function(e){e=e||{},Vr(zr(t.prototype),"updateOptions",this).call(this,e)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.reverse?e.currentTime===e.startTime&&(e.oldTime=e.endTime,e.currentTime=e.oldTime):e.oldTime===e.endTime&&(e.currentTime=e.startTime,e.oldTime=e.currentTime),e.tick())}},{key:"stop",value:function(){Vr(zr(t.prototype),"stop",this).call(this);var e=this;e.oldTime=e.currentTime,e.running&&(e.running=!1),e.intervalId&&window.clearTimeout(e.intervalId)}},{key:"destroy",value:function(){Vr(zr(t.prototype),"destroy",this).call(this);this.oldTime=null,this.callback=null}},{key:"tick",value:function(){var e=this;e.intervalId&&window.clearInterval(e.intervalId),e.intervalId=null,e.update(),e.intervalId=window.setInterval(e.update,e.frequency)}},{key:"update",value:function(){var e=this;if(e.running)if(e.callback&&e.callback(e.currentTime),e.reverse){if(e.currentTime===e.startTime){if(!e.repeat)return e.running=!1,null;e.oldTime=e.endTime,e.currentTime=e.oldTime}else e.currentTime=e.oldTime,e.oldTime-=e.speed;e.oldTime<=e.startTime&&(e.oldTime=e.startTime)}else{if(e.currentTime===e.endTime){if(!e.repeat)return e.running=!1,e.stop(),null;e.stop(),e.currentTime=e.startTime,e.oldTime=e.currentTime,e.start()}else e.oldTime=e.currentTime,e.currentTime+=e.speed;e.currentTime>=e.endTime&&(e.currentTime=e.endTime)}}}])&&Jr(r.prototype,n),o&&Jr(r,o),t}();n.TimeFlowControl=Yr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
r(12),r(16);var Qr=r(4),Xr=r.n(Qr),Kr=window.fetch,Zr=(n.setCORS=function(e){n.CORS=e},n.isCORS=function(){return void 0!=n.CORS?n.CORS:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest}),$r=(n.setRequestTimeout=function(e){return n.RequestTimeout=e},n.getRequestTimeout=function(){return n.RequestTimeout||45e3}),en=n.FetchRequest={commit:function(e,t,r,n){switch(e=e?e.toUpperCase():e){case"GET":return this.get(t,r,n);case"POST":return this.post(t,r,n);case"PUT":return this.put(t,r,n);case"DELETE":return this.delete(t,r,n);default:return this.get(t,r,n)}},supportDirectRequest:function(e,t){return!!ge.isInTheSameDomain(e)||(void 0!=t.crossOrigin?t.crossOrigin:Zr()||t.proxy)},get:function(e,t,r){r=r||{};if(e=ge.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,r),!this.supportDirectRequest(e,r)){var o={url:e=e.replace(".json",".jsonp"),data:t};return n.Util.RequestJSONPPromise.GET(o)}return this.urlIsLong(e)?this._postSimulatie("GET",e.substring(0,e.indexOf("?")-1),t,r):this._fetch(e,t,r,"GET")},delete:function(e,t,r){r=r||{};if(e=ge.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,r),!this.supportDirectRequest(e,r)){e=e.replace(".json",".jsonp");var o={url:e+="&_method=DELETE",data:t};return n.Util.RequestJSONPPromise.DELETE(o)}return this.urlIsLong(e)?this._postSimulatie("DELETE",e.substring(0,e.indexOf("?")-1),t,r):this._fetch(e,t,r,"DELETE")},post:function(e,t,r){if(r=r||{},!this.supportDirectRequest(e,r)){e=e.replace(".json",".jsonp");var o={url:e+="&_method=POST",data:t};return n.Util.RequestJSONPPromise.POST(o)}return this._fetch(this._processUrl(e,r),t,r,"POST")},put:function(e,t,r){if(r=r||{},e=this._processUrl(e,r),!this.supportDirectRequest(e,r)){e=e.replace(".json",".jsonp");var o={url:e+="&_method=PUT",data:t};return n.Util.RequestJSONPPromise.PUT(o)}return this._fetch(e,t,r,"PUT")},urlIsLong:function(e){for(var t=0,r=null,n=0,o=e.length;n<o;n++)(r=e.charCodeAt(n))<127?t++:128<=r&&r<=2047?t+=2:2048<=r&&r<=65535&&(t+=3);return!(t<2e3)},_postSimulatie:function(e,t,r,n){return t+=(t.indexOf("?")>-1?"&":"?")+"_method="+e,"string"!=typeof r&&(r=JSON.stringify(r)),this.post(t,r,n)},_processUrl:function(e,t){if(this._isMVTRequest(e))return e;if(-1===e.indexOf(".json")&&!t.withoutFormatSuffix)if(e.indexOf("?")<0)e+=".json";else{var r=e.split("?");2===r.length&&(e=r[0]+".json?"+r[1])}return t&&t.proxy&&("function"==typeof t.proxy?e=t.proxy(e):(e=decodeURIComponent(e),e=t.proxy+encodeURIComponent(e))),e},_fetch:function(e,t,r,n){return(r=r||{}).headers=r.headers||{},r.headers["Content-Type"]||(r.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),r.timeout?this._timeout(r.timeout,Kr(e,{method:n,headers:r.headers,body:"PUT"===n||"POST"===n?t:void 0,credentials:this._getWithCredentials(r),mode:"cors",timeout:$r()}).then(function(e){return e})):Kr(e,{method:n,body:"PUT"===n||"POST"===n?t:void 0,headers:r.headers,credentials:this._getWithCredentials(r),mode:"cors",timeout:$r()}).then(function(e){return e})},_getWithCredentials:function(e){return!0===e.withCredentials?"include":!1===e.withCredentials?"omit":"same-origin"},_fetchJsonp:function(e,t){return t=t||{},Xr()(e,{method:"GET",timeout:t.timeout}).then(function(e){return e})},_timeout:function(e,t){return new Promise(function(r,n){setTimeout(function(){n(new Error("timeout"))},e),t.then(r,n)})},_getParameterString:function(e){var t=[];for(var r in e){var n,o=e[r];if(null!=o&&"function"!=typeof o)n=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),t.push(encodeURIComponent(r)+"="+n)}return t.join("&")},_isMVTRequest:function(e){return e.indexOf(".mvt")>-1||e.indexOf(".pbf")>-1}};function tn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.Util.RequestJSONPPromise={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(e){for(var t in e){this.queryKeys.push(t),"string"!=typeof e[t]&&(e[t]=n.Util.toJSON(e[t]));var r=encodeURIComponent(e[t]);this.queryValues.push(r)}},issue:function(e){for(var t=this,r=t.getUid(),n=e.url,o=[],i=new Promise(function(e){t.supermap_callbacks[r]=function(n){delete t.supermap_callbacks[r],e(n)}}),a=n,s=0,l=t.queryKeys?t.queryKeys.length:0,u=0;u<l;u++)if(a.length+t.queryKeys[u].length+2>=t.limitLength){if(0==s)return!1;o.push(a),a=n,s=0,u--}else if(a.length+t.queryKeys[u].length+2+t.queryValues[u].length>t.limitLength)for(var c=t.queryValues[u];c.length>0;){var f=t.limitLength-a.length-t.queryKeys[u].length-2;a.indexOf("?")>-1?a+="&":a+="?";var p=c.substring(0,f);"%"===p.substring(f-1,f)?(f-=1,p=c.substring(0,f)):"%"===p.substring(f-2,f-1)&&(f-=2,p=c.substring(0,f)),a+=t.queryKeys[u]+"="+p,c=c.substring(f),p.length>0&&(o.push(a),a=n,s=0)}else s++,a.indexOf("?")>-1?a+="&":a+="?",a+=t.queryKeys[u]+"="+t.queryValues[u];return o.push(a),t.send(o,"SuperMap.Util.RequestJSONPPromise.supermap_callbacks["+r+"]",e&&e.proxy),i},getUid:function(){return 1e3*(new Date).getTime()+Math.floor(1e17*Math.random())},send:function(e,t,r){var n=e.length;if(n>0)for(var o=(new Date).getTime(),i=0;i<n;i++){var a=e[i];a.indexOf("?")>-1?a+="&":a+="?",a+="sectionCount="+n,a+="&sectionIndex="+i,a+="&jsonpUserID="+o,r&&(a=decodeURIComponent(a),a=r+encodeURIComponent(a)),Xr()(a,{jsonpCallbackFunction:t,timeout:3e4})}},GET:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings(e.params),this.issue(e)},POST:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},PUT:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},DELETE:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)}};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var rn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"generateToken",value:function(e,t){var r=this.servers[e];if(r)return en.post(r.tokenServiceUrl,JSON.stringify(t.toJSON())).then(function(e){return e.text()})}},{key:"registerServers",value:function(e){this.servers=this.servers||{},ge.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var r=e[t];this.servers[r.server]=r}}},{key:"registerToken",value:function(e,t){if(this.tokens=this.tokens||{},e&&t){var r=this._getTokenStorageKey(e);this.tokens[r]=t}}},{key:"registerKey",value:function(e,t){if(this.keys=this.keys||{},e&&!(e.length<1)&&t){e=ge.isArray(e)?e:[e];for(var r=0;r<e.length;r++){var n=this._getUrlRestString(e[0])||e[0];this.keys[n]=t}}}},{key:"getServerInfo",value:function(e){return this.servers=this.servers||{},this.servers[e]}},{key:"getToken",value:function(e){if(e){this.tokens=this.tokens||{};var t=this._getTokenStorageKey(e);return this.tokens[t]}}},{key:"getKey",value:function(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;return this.keys[t]}},{key:"loginiServer",value:function(e,t,r,n){e=ge.urlPathAppend(e,"services/security/login");var o={username:t&&t.toString(),password:r&&r.toString(),rememberme:n};o=JSON.stringify(o);return en.post(e,o,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){return e.json()})}},{key:"logoutiServer",value:function(e){e=ge.urlPathAppend(e,"services/security/logout");return en.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginOnline",value:function(t,r){var n=e.SSO+"/login?service="+t;this._open(n,r)}},{key:"loginiPortal",value:function(e,t,r){e=ge.urlPathAppend(e,"web/login");var n={username:t&&t.toString(),password:r&&r.toString()};n=JSON.stringify(n);return en.post(e,n,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0}).then(function(e){return e.json()})}},{key:"logoutiPortal",value:function(e){e=ge.urlPathAppend(e,"services/security/logout");return en.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginManager",value:function(e,t,r){if(ge.isInTheSameDomain(e)){var n=ge.urlPathAppend(e,"icloud/security/tokens"),o=t||{},i={username:o.userName&&o.userName.toString(),password:o.password&&o.password.toString()};i=JSON.stringify(i);var a=this;return en.post(n,i,{headers:{Accept:"*/*","Content-Type":"application/json"}}).then(function(e){e.text().then(function(e){return a.imanagerToken=e,e})})}var s=!r||r.isNewTab;this._open(e,s)}},{key:"destroyAllCredentials",value:function(){this.keys=null,this.tokens=null,this.servers=null}},{key:"destroyToken",value:function(e){if(e){var t=this._getTokenStorageKey(e);this.tokens=this.tokens||{},this.tokens[t]&&delete this.tokens[t]}}},{key:"destroyKey",value:function(e){if(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;this.keys[t]&&delete this.keys[t]}}},{key:"_open",value:function(e,t){t=null==t||t;var r=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,n=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,o="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+n+", left="+r+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";t?window.open(e,"login"):window.open(e,"login",o)}},{key:"_getTokenStorageKey",value:function(e){var t=e.match(/(.*?):\/\/([^\/]+)/i);return t?t[0]:e}},{key:"_getUrlRestString",value:function(e){if(!e)return e;var t=e.match(/(http|https):\/\/(.*\/rest)/i);return t?t[0]:e}}],(r=null)&&tn(t.prototype,r),n&&tn(t,n),e}();function nn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}rn.INNER_WINDOW_WIDTH=600,rn.INNER_WINDOW_HEIGHT=600,rn.SSO="https://sso.supermap.com",rn.ONLINE="https://www.supermapol.com",n.SecurityManager=rn;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var on=function(){function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t){var n=t.substr(t.length-1,1);this.serviceUrl="/"===n?t.substr(0,t.length-2):t}this.options=r||{},this.CLASS_NAME="SuperMap.iManagerServiceBase"}var t,r,n;return t=e,(r=[{key:"request",value:function(e,t,r,n){(n=n||{headers:{Accept:"*/*","Content-Type":"application/json"}}).hasOwnProperty("withCredentials")||(n.withCredentials=!0),n.crossOrigin=this.options.crossOrigin,n.headers=this.options.headers;var o=rn.imanagerToken;return o&&(n.headers||(n.headers=[]),n.headers["X-Auth-Token"]=o),r&&(r=JSON.stringify(r)),en.commit(e,t,r,n).then(function(e){return e.json()})}}])&&nn(t.prototype,r),n&&nn(t,n),e}();n.iManagerServiceBase=on;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var an=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.nodeSpec="SMALL",this.nodeCount=1,this.nodeName="",this.password="",this.description="",this.physicalMachineName="",this.ips=[],this.userName="",ge.extend(this,t)};function sn(e){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ln(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function un(e,t){return!t||"object"!==sn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cn(e){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fn(e,t){return(fn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.iManagerCreateNodeParam=an;var pn=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),un(this,cn(t).call(this,e))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fn(e,t)}(t,on),r=t,(n=[{key:"load",value:function(){return this.request("GET",this.serviceUrl+"/web/api/service.json")}},{key:"createIServer",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/server.json",new an(e))}},{key:"createIPortal",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/portal.json",new an(e))}},{key:"iServerList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/server.json")}},{key:"iPortalList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/portal.json")}},{key:"startNodes",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/started.json",e)}},{key:"stopNodes",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/stopped.json",e)}}])&&ln(r.prototype,n),o&&ln(r,o),t}();function hn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.iManager=pn;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var yn=function(){function e(t,r){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=r||{},this.serviceUrl=t,this.serverType=i.iPortal,this.CLASS_NAME="SuperMap.iPortalServiceBase",this.withCredentials=r.withCredentials||!1,this.crossOrigin=r.crossOrigin,this.headers=r.headers}var t,r,n;return t=e,(r=[{key:"request",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{headers:this.headers,crossOrigin:this.crossOrigin,withCredentials:this.withCredentials};return t=this.createCredentialUrl(t),en.commit(e,t,r,n).then(function(e){return e.json()})}},{key:"createCredentialUrl",value:function(e){var t=e,r=this.getCredential();if(r){var n=t.substring(t.length-1,t.length);t.indexOf("?")>-1&&"?"===n?t+=r.getUrlParameters():t.indexOf("?")>-1&&"?"!==n?t+="&"+r.getUrlParameters():t+="?"+r.getUrlParameters()}return t}},{key:"getCredential",value:function(){var e,t=rn.getToken(this.serviceUrl);return(e=t?new Ut(t,"token"):null)||(e=(t=this.getKey())?new Ut(t,"key"):null),e}},{key:"getKey",value:function(){}}])&&hn(t.prototype,r),n&&hn(t,n),e}();n.iPortalServiceBase=yn;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var dn=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.resourceType="",this.pageSize=12,this.currentPage=1,this.orderBy="UPDATETIME",this.orderType="DESC",this.searchType="PUBLIC",this.tags=[],this.dirIds=[],this.resourceSubTypes=[],this.aggregationTypes=[],this.text="",this.groupIds=[],this.departmentIds=[],ge.extend(this,t)};n.iPortalQueryParam=dn;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var vn=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.content=[],this.total=0,this.currentPage=1,this.pageSize=12,this.aggregations=null,ge.extend(this,t)};function mn(e){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gn(e){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wn(e,t){return(wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.iPortalQueryResult=vn;var On=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(i=gn(t).call(this,e))||"object"!==mn(i)&&"function"!=typeof i?Sn(o):i,r=r||{},n.authorizeSetting=[],n.bounds="",n.bounds4326="",n.checkStatus="",n.createTime=0,n.description=null,n.dirId=null,n.epsgCode=0,n.heatLevel=0,n.id=0,n.name="",n.personalDirId=null,n.resourceId=0,n.resourceSubType=null,n.resourceType=null,n.serviceRootUrlId=null,n.tags=null,n.thumbnail=null,n.updateTime=0,n.userName="",n.sourceJSON={},ge.extend(Sn(n),r),n.resourceUrl=e+"/web/"+n.resourceType.replace("_","").toLowerCase()+"s/"+n.resourceId,n.withCredentials&&(n.resourceUrl=e+"/web/mycontent/"+n.resourceType.replace("_","").toLowerCase()+"s/"+n.resourceId),n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wn(e,t)}(t,yn),r=t,(n=[{key:"load",value:function(){var e=this;return e.request("GET",e.resourceUrl+".json").then(function(t){if(t.error)return t;e.sourceJSON=t})}},{key:"update",value:function(){var e=this.resourceType.replace("_","").toLowerCase();"data"===e&&(this.resourceUrl=this.resourceUrl+"/attributes.json");var t=JSON.stringify(this.sourceJSON);if("service"===e){var r={authorizeSetting:this.sourceJSON.authorizeSetting,metadata:this.sourceJSON.metadata,tags:this.sourceJSON.tags,thumbnail:this.sourceJSON.thumbnail,tokenRefreshUrl:this.sourceJSON.tokenRefreshUrl};t=JSON.stringify(r)}return this.request("PUT",this.resourceUrl,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}])&&bn(r.prototype,n),o&&bn(r,o),t}();n.iPortalResource=On;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var _n=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.ids=[],this.entities=[],this.resourceType="",ge.extend(this,t)};function Pn(e){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function En(e,t){return!t||"object"!==Pn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tn(e){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kn(e,t){return(kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.iPortalShareParam=_n;var xn=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=En(this,Tn(t).call(this,e,r))).iportalUrl=e,r=r||{},n.withCredentials=r.withCredentials||!1,n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kn(e,t)}(t,yn),r=t,(n=[{key:"load",value:function(){return en.get(this.iportalUrl+"/web")}},{key:"queryResources",value:function(e){if(!(e instanceof dn))return new Promise(function(e){e("queryParams is not instanceof iPortalQueryParam !")});var t=this,r=this.iportalUrl+"/gateway/catalog/resource/search.json";return e.t=(new Date).getTime(),this.request("GET",r,e).then(function(e){var r=[];e.content.forEach(function(e){r.push(new On(t.iportalUrl,e))});var n=new vn;return n.content=r,n.total=e.total,n.currentPage=e.currentPage,n.pageSize=e.pageSize,n.aggregations=e.aggregations,n})}},{key:"updateResourcesShareSetting",value:function(e){if(!(e instanceof _n))return new Promise(function(e){e("shareParams is not instanceof iPortalShareParam !")});var t=e.resourceType.replace("_","").toLowerCase()+"s";"datas"===t&&(t="mycontent/"+t);var r={ids:e.ids,entities:e.entities},n=this.iportalUrl+"/web/"+t+"/sharesetting.json";return this.request("PUT",n,JSON.stringify(r)).then(function(e){return e})}}])&&Cn(r.prototype,n),o&&Cn(r,o),t}();n.iPortal=xn;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var An=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.permissionType="",this.entityType="",this.entityName="GUEST",this.entityId=null,ge.extend(this,t)};n.iPortalShareEntity=An;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var jn=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.rootUrl="",this.tags=[],this.entities=[],ge.extend(this,t)};n.iPortalAddResourceParam=jn;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Rn=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type="",this.tags=[],this.entities=[],this.metadata={},this.addedMapNames=[],this.addedSceneNames=[],ge.extend(this,t)};n.iPortalRegisterServiceParam=Rn;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ln=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.fileName="",this.type="",this.tags=[],this.dataMetaInfo={},ge.extend(this,t)};n.iPortalAddDataParam=Ln;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Mn=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.xField="",this.yField="",this.fileEncoding="UTF-8",this.xIndex=1,this.yIndex=1,this.fieldTypes=[],this.separator="",this.firstRowIsHead=!0,this.url="",this.dataStoreInfo={},ge.extend(this,t)};n.iPortalDataMetaInfoParam=Mn;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Nn=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type="",this.url="",this.connectionInfo={},ge.extend(this,t)};n.iPortalDataStoreInfoParam=Nn;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var In=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.dataBase="",this.server="",ge.extend(this,t)};function Dn(e){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Bn(e,t){return!t||"object"!==Dn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gn(e){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Un(e,t){return(Un=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.iPortalDataConnectionInfoParam=In;var Hn=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Bn(this,Gn(t).call(this,e))).iportalUrl=e,r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Un(e,t)}(t,yn),r=t,(n=[{key:"deleteResources",value:function(e){var t=e.resourceType.replace("_","").toLowerCase(),r=this.iportalUrl+"/web/"+t+"s.json?ids="+encodeURI(JSON.stringify(e.ids));return"data"===t?(r=this.iportalUrl+"/web/mycontent/datas/delete.json",this.request("POST",r,JSON.stringify(e.ids))):this.request("DELETE",r)}},{key:"addMap",value:function(e){if(!(e instanceof jn))return this.getErrMsgPromise("addMapParams is not instanceof IPortalAddResourceParam !");var t={rootUrl:e.rootUrl,tags:e.tags,authorizeSetting:e.entities},r=this.iportalUrl+"/web/maps/batchaddmaps.json";return this.request("POST",r,JSON.stringify(t)).then(function(e){return e})}},{key:"addScene",value:function(e){if(!(e instanceof jn))return this.getErrMsgPromise("addSceneParams is not instanceof IPortalAddResourceParam !");var t={rootUrl:e.rootUrl,tags:e.tags,authorizeSetting:e.entities},r=this.iportalUrl+"/web/scenes/batchaddscenes.json";return this.request("POST",r,JSON.stringify(t)).then(function(e){return e})}},{key:"registerService",value:function(e){if(!(e instanceof Rn))return this.getErrMsgPromise("registerParams is not instanceof IPortalRegisterServiceParam !");var t={type:e.type,tags:e.tags,authorizeSetting:e.entities,metadata:e.metadata,addedMapNames:e.addedMapNames,addedSceneNames:e.addedSceneNames},r=this.iportalUrl+"/web/services.json";return this.request("POST",r,JSON.stringify(t)).then(function(e){return e})}},{key:"getErrMsgPromise",value:function(e){return new Promise(function(t){t(e)})}},{key:"uploadDataRequest",value:function(e,t){var r=this.iportalUrl+"/web/mycontent/datas/"+e+"/upload.json";return this.request("POST",r,t)}},{key:"addData",value:function(e,t){var r=this;if(!(e instanceof Ln))return this.getErrMsgPromise("params is not instanceof iPortalAddDataParam !");var n,o=this.iportalUrl+"/web/mycontent/datas.json",i={fileName:e.fileName,tags:e.tags,type:e.type},a=e.type.toLowerCase();if("excel"===a||"csv"===a){if(!(e.dataMetaInfo instanceof Mn))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");n={xField:e.dataMetaInfo.xField,yField:e.dataMetaInfo.yField},"csv"===a&&(n.fileEncoding=e.dataMetaInfo.fileEncoding),i.coordType="WGS84",i.dataMetaInfo=n}else if("hdfs"===a||"hbase"===a){if(!(e.dataMetaInfo instanceof Mn))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");if(!(e.dataMetaInfo.dataStoreInfo instanceof Nn))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo is not instanceof iPortalDataStoreInfoParam !");var s={type:e.dataMetaInfo.dataStoreInfo.type};switch(a){case"hdfs":s.url=e.dataMetaInfo.dataStoreInfo.url,n={url:e.dataMetaInfo.url,dataStoreInfo:s};break;case"hbase":if(!(e.dataMetaInfo.dataStoreInfo.connectionInfo instanceof In))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo.connectionInfo is not instanceof iPortalDataConnectionInfoParam !");s.connectionInfo={dataBase:e.dataMetaInfo.dataStoreInfo.connectionInfo.dataBase,server:e.dataMetaInfo.dataStoreInfo.connectionInfo.server,engineType:"HBASE"},s.datastoreType="SPATIAL",n={dataStoreInfo:s}}i.dataMetaInfo=n}return this.request("POST",o,JSON.stringify(i)).then(function(e){return"hdfs"===a||"hbase"===a?e:e.childID?r.uploadDataRequest(e.childID,t):e.customResult})}},{key:"publishOrUnpublish",value:function(e,t){if(!e.dataId||!e.serviceType)return this.getErrMsgPromise("option.dataID and option.serviceType are Required!");var r=e.dataId,n=e.dataServiceId,o=e.serviceType,i=this.iportalUrl+"/web/mycontent/datas/"+r+"/publishstatus.json?serviceType="+o;return n&&(i+="&dataServiceId="+n),this.request("PUT",i,JSON.stringify(t)).then(function(e){return t?(n||(n=e.customResult),n):e})}},{key:"getDataPublishedStatus",value:function(e,t){var r=this.iportalUrl+"/web/mycontent/datas/"+e+"/publishstatus.json?dataServiceId="+t+"&forPublish=true";return this.request("GET",r)}},{key:"unPublishDataService",value:function(e){return this.publishOrUnpublish(e,!1)}},{key:"publishDataService",value:function(e){return this.publishOrUnpublish(e,!0)}}])&&Fn(r.prototype,n),o&&Fn(r,o),t}();function Jn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.iPortalUser=Hn;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Wn=function(){function e(t,r){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.proxy=null,this.serverType=null,this.index=null,this.length=null,this.options=null,this.totalTimes=null,this.POLLING_TIMES=3,this._processSuccess=null,this._processFailed=null,this.isInTheSameDomain=null,this.withCredentials=!1,ge.isArray(t)?(n.urls=t,n.length=t.length,n.totalTimes=n.length,1===n.length?n.url=t[0]:(n.index=parseInt(Math.random()*n.length),n.url=t[n.index])):(n.totalTimes=1,n.url=t),ge.isArray(t)&&!n.isServiceSupportPolling()&&(n.url=t[0],n.totalTimes=1),n.serverType=n.serverType||i.ISERVER,r=r||{},this.crossOrigin=r.crossOrigin,this.headers=r.headers,ge.extend(this,r),n.isInTheSameDomain=ge.isInTheSameDomain(n.url),n.events=new Vt(n,null,n.EVENT_TYPES,!0),n.eventListeners instanceof Object&&n.events.on(n.eventListeners),this.CLASS_NAME="SuperMap.CommonServiceBase"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;ge.isArray(e.urls)&&(e.urls=null,e.index=null,e.length=null,e.totalTimes=null),e.url=null,e.options=null,e._processSuccess=null,e._processFailed=null,e.isInTheSameDomain=null,e.EVENT_TYPES=null,e.events&&(e.events.destroy(),e.events=null),e.eventListeners&&(e.eventListeners=null)}},{key:"request",value:function(e){var t=this;e.url=e.url||t.url,e.proxy=e.proxy||t.proxy,e.withCredentials=void 0!=e.withCredentials?e.withCredentials:t.withCredentials,e.crossOrigin=void 0!=e.crossOrigin?e.crossOrigin:t.crossOrigin,e.headers=e.headers||t.headers,e.isInTheSameDomain=t.isInTheSameDomain;var r=this.getCredential(e.url);r&&(e.url=ge.urlAppend(e.url,r.getUrlParameters())),t.calculatePollingTimes(),t._processSuccess=e.success,t._processFailed=e.failure,e.scope=t,e.success=t.getUrlCompleted,e.failure=t.getUrlFailed,t.options=e,t._commit(t.options)}},{key:"getCredential",value:function(e){var t,r,n=e;switch(this.serverType){case i.IPORTAL:(t=(r=rn.getToken(n))?new Ut(r,"token"):null)||(t=(r=rn.getKey(n))?new Ut(r,"key"):null);break;case i.ONLINE:t=(r=rn.getKey(n))?new Ut(r,"key"):null;break;default:t=(r=rn.getToken(n))?new Ut(r,"token"):null}return t}},{key:"getUrlCompleted",value:function(e){this._processSuccess(e)}},{key:"getUrlFailed",value:function(e){this.totalTimes>0?(this.totalTimes--,this.ajaxPolling()):this._processFailed(e)}},{key:"ajaxPolling",value:function(){var e=this,t=e.options.url,r=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;e.index=parseInt(Math.random()*e.length),e.url=e.urls[e.index],t=t.replace(r,r.exec(e.url)[0]),e.options.url=t,e.options.isInTheSameDomain=ge.isInTheSameDomain(t),e._commit(e.options)}},{key:"calculatePollingTimes",value:function(){var e=this;e.times?e.totalTimes>e.POLLING_TIMES?e.times>e.POLLING_TIMES?e.totalTimes=e.POLLING_TIMES:e.totalTimes=e.times:e.times<e.totalTimes&&(e.totalTimes=e.times):e.totalTimes>e.POLLING_TIMES&&(e.totalTimes=e.POLLING_TIMES),e.totalTimes--}},{key:"isServiceSupportPolling",value:function(){return!("SuperMap.REST.ThemeService"===this.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===this.CLASS_NAME)}},{key:"serviceProcessCompleted",value:function(e){e=ge.transformResult(e),this.events.triggerEvent("processCompleted",{result:e})}},{key:"serviceProcessFailed",value:function(e){var t=(e=ge.transformResult(e)).error||e;this.events.triggerEvent("processFailed",{error:t})}},{key:"_commit",value:function(e){"POST"!==e.method&&"PUT"!==e.method||(e.params&&(e.url=ge.urlAppend(e.url,ge.getParameterString(e.params||{}))),e.params=e.data),en.commit(e.method,e.url,e.params,{headers:e.headers,withCredentials:e.withCredentials,crossOrigin:e.crossOrigin,timeout:e.async?0:null,proxy:e.proxy}).then(function(e){return e.text?e.text():e.json?e.json():e}).then(function(t){var r=t;("string"==typeof t&&(r=(new lr).read(t)),(!r||r.error||r.code>=300&&304!==r.code)&&(r=r&&r.error?{error:r.error}:{error:r}),r.error)?(e.scope?ye.bind(e.failure,e.scope):e.failure)(r):(r.succeed=void 0==r.succeed||r.succeed,(e.scope?ye.bind(e.success,e.scope):e.success)(r))}).catch(function(t){(e.scope?ye.bind(e.failure,e.scope):e.failure)(t)})}}])&&Jn(t.prototype,r),n&&Jn(t,n),e}();function Vn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.CommonServiceBase=Wn;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.filters&&"string"==typeof t.filters&&(t.filters=t.filters.split(",")),this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,ge.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null}}])&&Vn(t.prototype,r),n&&Vn(t,n),e}();function qn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.GeoCodingParameter=zn;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Yn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.filters&&(t.filters=t.filters.split(",")),this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,ge.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null}}])&&qn(t.prototype,r),n&&qn(t,n),e}();function Qn(e){return(Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Kn(e,t){return!t||"object"!==Qn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zn(e,t,r){return(Zn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$n(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function $n(e){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eo(e,t){return(eo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GeoDecodingParameter=Yn;var to=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Kn(this,$n(t).call(this,e,r))).options=r||{},n.CLASS_NAME="SuperMap.AddressMatchService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eo(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Zn($n(t.prototype),"destroy",this).call(this)}},{key:"code",value:function(e,t){t instanceof zn&&this.processAsync(e,t)}},{key:"decode",value:function(e,t){t instanceof Yn&&this.processAsync(e,t)}},{key:"processAsync",value:function(e,t){this.request({method:"GET",url:e,params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e){e.succeed&&delete e.succeed,Zn($n(t.prototype),"serviceProcessCompleted",this).call(this,e)}},{key:"serviceProcessFailed",value:function(e){Zn($n(t.prototype),"serviceProcessFailed",this).call(this,e)}}])&&Xn(r.prototype,n),o&&Xn(r,o),t}();function ro(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.AddressMatchService=to;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var no=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.queryType=null,this.CLASS_NAME="SuperMap.AggQueryBuilderParameter",ge.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.name=null,this.queryType=null}}])&&ro(t.prototype,r),n&&ro(t,n),e}();function oo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.AggQueryBuilderParameter=no;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var io=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.aggName=null,this.aggType=null,this.aggFieldName=null,this.subAgg=null,this.CLASS_NAME="SuperMap.AggregationParameter",ge.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.aggName=null,e.aggFieldName=null,e.aggType=null,e.subAgg&&(e.subAgg=null)}}])&&oo(t.prototype,r),n&&oo(t,n),e}();function ao(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.AggregationParameter=io;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var so=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.targetDatasourceName=null,this.totalGridName=null,this.diffuseDatasetGridName=null,this.durationDatasetGridName=null,this.directDatasetGridName=null,this.latitude=null,this.timeMode="MULTIDAYS",this.dayStart=null,this.dayEnd=null,this.hourStart=null,this.hourEnd=null,this.transmittance=null,this.hourInterval=null,this.dayInterval=null,this.deleteExistResultDataset=!1,ge.extend(this,t),this.CLASS_NAME="SuperMap.AreaSolarRadiationParameters"}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){var r={};for(var n in e){if("dataset"!==n)"latitude"===n||"timeMode"===n||"dayStart"===n||("dayEnd"===n||"hourStart"===n||"hourEnd"===n)||("transmittance"===n||"hourInterval"===n||"dayInterval"===n)?r[n]=e[n]:t[n]=e[n]}t.parameter=r}}],(r=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.zFactor=1,e.averageCurvatureName=null,e.profileCurvatureName=null,e.planCurvatureName=null,e.deleteExistResultDataset=!0}}])&&ao(t.prototype,r),n&&ao(t,n),e}();function lo(e){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function co(e,t){return!t||"object"!==lo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fo(e,t,r){return(fo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=po(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function po(e){return(po=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ho(e,t){return(ho=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.AreaSolarRadiationParameters=so;var yo=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=co(this,po(t).call(this,e,r))).format=o.GEOJSON,n.CLASS_NAME="SuperMap.SpatialAnalystBase",n}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ho(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){fo(po(t.prototype),"destroy",this).call(this),this.format=null}},{key:"serviceProcessCompleted",value:function(e){var t,r=this;if((e=ge.transformResult(e))&&r.format===o.GEOJSON&&"function"==typeof r.toGeoJSONResult)if(ge.isArray(e)){for(var n=0;n<e.length;n++)e[n]=r.toGeoJSONResult(e[n]);t=e}else t=r.toGeoJSONResult(e);t||(t=e),r.events.triggerEvent("processCompleted",{result:t})}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;e.result&&e.result.resultGeometry&&(e=e.result);var t=new Lr;if(e.recordsets)for(var r=0,n=e.recordsets,o=n.length;r<o;r++)n[r].features&&(n[r].features=t.toGeoJSON(n[r].features));else e.recordset&&e.recordset.features&&(e.recordset.features=t.toGeoJSON(e.recordset.features));return e.resultGeometry&&(e.resultGeometry=t.toGeoJSON(e.resultGeometry)),e.regions&&(e.regions=t.toGeoJSON(e.regions)),e}}])&&uo(r.prototype,n),i&&uo(r,i),t}();function vo(e){return(vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bo(e,t){return!t||"object"!==vo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function go(e,t,r){return(go="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=So(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function So(e){return(So=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wo(e,t){return(wo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.SpatialAnalystBase=yo;var Oo=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=bo(this,So(t).call(this,e,r))).CLASS_NAME="SuperMap.AreaSolarRadiationService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wo(e,t)}(t,yo),r=t,(n=[{key:"destroy",value:function(){go(So(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof so){var t=this,r={};e instanceof so&&(t.url=ge.urlPathAppend(t.url,"datasets/".concat(e.dataset,"/solarradiation"))),t.url=ge.urlAppend(t.url,"returnContent=true"),so.toObject(e,r);var n=ge.toJSON(r);t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&mo(r.prototype,n),o&&mo(r,o),t}();function _o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.AreaSolarRadiationService=Oo;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Po=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.exp=null,this.value=100,ge.extend(this,t),this.CLASS_NAME="SuperMap.BufferDistance"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.exp=null,this.value=null}}])&&_o(t.prototype,r),n&&_o(t,n),e}();function Co(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.BufferDistance=Po;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Eo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endType=j.FLAT,this.leftDistance=new Po,this.rightDistance=new Po,this.semicircleLineSegment=4,this.radiusUnit=h.METER,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.BufferSetting"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.endType=null,e.leftDistance&&(e.leftDistance.destroy(),e.leftDistance=null),e.rightDistance&&(e.rightDistance.destroy(),e.rightDistance=null),e.semicircleLineSegment=null,e.radiusUnit=null}}])&&Co(t.prototype,r),n&&Co(t,n),e}();function To(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.BufferSetting=Eo;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ko=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.bufferSetting=new Eo,ge.extend(this,t),this.CLASS_NAME="SuperMap.BufferAnalystParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.bufferSetting&&(this.bufferSetting.destroy(),this.bufferSetting=null)}}])&&To(t.prototype,r),n&&To(t,n),e}();function xo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.BufferAnalystParameters=ko;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ao=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expectCount=1e3,this.dataset=null,this.dataReturnMode=I.RECORDSET_ONLY,this.deleteExistResultDataset=!0,ge.extend(this,t),this.CLASS_NAME="SuperMap.DataReturnOption"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.expectCount=null,this.dataset=null,this.dataReturnMode=null,this.deleteExistResultDataset=null}}])&&xo(t.prototype,r),n&&xo(t,n),e}();function jo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.DataReturnOption=Ao;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ro=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.foreignTableName=null,this.joinFilter=null,this.joinType=null,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.JoinItem"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.foreignTableName=null,this.joinFilter=null,this.joinType=null}},{key:"toServerJSONObject",value:function(){var e={};return e=ge.copyAttributes(e,this)}}])&&jo(t.prototype,r),n&&jo(t,n),e}();function Lo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.JoinItem=Ro;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Mo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.alias=null,this.connect=null,this.dataBase=null,this.driver=null,this.engineType=null,this.exclusive=null,this.OpenLinkTable=null,this.password=null,this.readOnly=null,this.server=null,this.user=null,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.DatasourceConnectionInfo"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.alias=null,e.connect=null,e.dataBase=null,e.driver=null,e.engineType=null,e.exclusive=null,e.OpenLinkTable=null,e.password=null,e.readOnly=null,e.server=null,e.user=null}}])&&Lo(t.prototype,r),n&&Lo(t,n),e}();function No(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.DatasourceConnectionInfo=Mo;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Io=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasourceConnectionInfo=null,this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.LinkItem"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.datasourceConnectionInfo instanceof Mo&&(e.datasourceConnectionInfo.destroy(),e.datasourceConnectionInfo=null),e.foreignKeys=null,e.foreignTable=null,e.linkFields=null,e.linkFilter=null,e.name=null,e.primaryKeys=null}}])&&No(t.prototype,r),n&&No(t,n),e}();function Do(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.LinkItem=Io;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Fo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attributeFilter=null,this.name=null,this.joinItems=null,this.linkItems=null,this.ids=null,this.orderBy=null,this.groupBy=null,this.fields=null,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.FilterParameter"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.attributeFilter=null,e.name=null,e.joinItems){for(var t=0,r=e.joinItems,n=r.length;t<n;t++)r[t].destroy();e.joinItems=null}if(e.linkItems){for(var o=0,i=e.linkItems,a=i.length;o<a;o++)i[o].destroy();e.linkItems=null}e.ids=null,e.orderBy=null,e.groupBy=null,e.fields=null}}])&&Do(t.prototype,r),n&&Do(t,n),e}();function Bo(e){return(Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Go(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Uo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ho(e,t,r){return(Ho="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jo(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Jo(e){return(Jo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wo(e,t){return(Wo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FilterParameter=Fo;var Vo=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Jo(t).call(this,e))||"object"!==Bo(o)&&"function"!=typeof o?Uo(n):o).dataset=null,r.filterQueryParameter=new Fo,r.resultSetting=new Ao,r.isAttributeRetained=!0,r.isUnion=!1,ge.extend(Uo(r),e),r.CLASS_NAME="SuperMap.DatasetBufferAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wo(e,t)}(t,ko),r=t,o=[{key:"toObject",value:function(e,t){for(var r in e)if("bufferSetting"===r)e.bufferSetting.radiusUnit=e.bufferSetting.radiusUnit.toUpperCase(),t.bufferAnalystParameter=e.bufferSetting;else if("resultSetting"===r)t.dataReturnOption=e.resultSetting;else{if("dataset"===r)continue;t[r]=e[r]}}}],(n=[{key:"destroy",value:function(){Ho(Jo(t.prototype),"destroy",this).call(this);var e=this;e.dataset=null,e.filterQueryParameter&&(e.filterQueryParameter.destroy(),e.filterQueryParameter=null),e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.isAttributeRetained=null,e.isUnion=null}}])&&Go(r.prototype,n),o&&Go(r,o),t}();function zo(e){return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qo(e,t,r){return(Qo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xo(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Xo(e){return(Xo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ko(e,t){return(Ko=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.DatasetBufferAnalystParameters=Vo;var Zo=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Xo(t).call(this,e))||"object"!==zo(o)&&"function"!=typeof o?Yo(n):o).sourceGeometry=null,r.sourceGeometrySRID=null,e&&ge.extend(Yo(r),e),r.CLASS_NAME=" SuperMap.GeometryBufferAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ko(e,t)}(t,ko),r=t,o=[{key:"toObject",value:function(e,t){for(var r in e)if("bufferSetting"===r){var n={};for(var o in e.bufferSetting)n[o]=e.bufferSetting[o];t.analystParameter=n}else"sourceGeometry"===r?t.sourceGeometry=Er.fromGeometry(e.sourceGeometry):t[r]=e[r]}}],(n=[{key:"destroy",value:function(){Qo(Xo(t.prototype),"destroy",this).call(this);this.sourceGeometry&&(this.sourceGeometry.destroy(),this.sourceGeometry=null)}}])&&qo(r.prototype,n),o&&qo(r,o),t}();function $o(e){return($o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ei(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ti(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ri(e,t,r){return(ri="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ni(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ni(e){return(ni=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oi(e,t){return(oi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GeometryBufferAnalystParameters=Zo;var ii=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=ni(t).call(this,e,r))||"object"!==$o(i)&&"function"!=typeof i?ti(o):i).mode=null,r&&ge.extend(ti(n),r),n.CLASS_NAME="SuperMap.BufferAnalystService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oi(e,t)}(t,yo),r=t,(n=[{key:"destroy",value:function(){ri(ni(t.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},r=this;e instanceof Vo?(r.mode="datasets",r.url=ge.urlPathAppend(r.url,"datasets/"+e.dataset+"/buffer"),Vo.toObject(e,t)):e instanceof Zo&&(r.mode="geometry",r.url=ge.urlPathAppend(r.url,"geometry/buffer"),Zo.toObject(e,t));var n=ge.toJSON(t);r.url=ge.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:n,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}])&&ei(r.prototype,n),o&&ei(r,o),t}();function ai(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.BufferAnalystService=ii;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var si=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=L.UDB,this.datasetName="analystResult",this.datasourceInfo=null,this.outputPath="",ge.extend(this,t),this.CLASS_NAME="SuperMap.OutputSetting"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.type=null,e.datasetName=null,e.outputPath=null,e.datasourceInfo instanceof Mo&&(e.datasourceInfo.destroy(),e.datasourceInfo=null)}}])&&ai(t.prototype,r),n&&ai(t,n),e}();function li(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.OutputSetting=si;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ui=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=null,this.numericPrecision=1,this.rangeMode=g.EQUALINTERVAL,this.rangeCount="",this.colorGradientType=w.YELLOW_RED,ge.extend(this,t),this.CLASS_NAME="SuperMap.MappingParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.numericPrecision=null,e.rangeMode=null,e.rangeCount=null,e.colorGradientType=null}}])&&li(t.prototype,r),n&&li(t,n),e}();function ci(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.MappingParameters=ui;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fi=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName="",this.bounds="",this.distance="",this.distanceField="",this.distanceUnit=ee.METER,this.dissolveField="",this.output=null,this.mappingParameters=null,!t)return this;ge.extend(this,t),this.CLASS_NAME="SuperMap.BuffersAnalystJobsParameter"}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},"bounds"===r&&e[r]?t.analyst[r]=e[r].toBBOX():t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.bounds=null,this.distance=null,this.distanceField=null,this.distanceUnit=null,this.dissolveField=null,this.output instanceof si&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ui&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&ci(t.prototype,r),n&&ci(t,n),e}();function pi(e){return(pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yi(e,t){return!t||"object"!==pi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function di(e,t,r){return(di="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function vi(e){return(vi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mi(e,t){return(mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.BuffersAnalystJobsParameter=fi;var bi=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=r||{}).EVENT_TYPES=["processCompleted","processFailed","processRunning"],(n=yi(this,vi(t).call(this,e,r))).CLASS_NAME="SuperMap.ProcessingServiceBase",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mi(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){di(vi(t.prototype),"destroy",this).call(this)}},{key:"getJobs",value:function(e){var t=this;en.get(t._processUrl(e),null,{proxy:t.proxy}).then(function(e){return e.json()}).then(function(e){t.events.triggerEvent("processCompleted",{result:e})}).catch(function(e){t.eventListeners.processFailed({error:e})})}},{key:"addJob",value:function(e,t,r,n){var o=this,i=null;t&&t instanceof r&&(i=new Object,r.toObject(t,i));var a=Object.assign({"Content-Type":"application/x-www-form-urlencoded"},o.headers||{}),s={proxy:o.proxy,headers:a,withCredentials:o.withCredentials,crossOrigin:o.crossOrigin,isInTheSameDomain:o.isInTheSameDomain};en.post(o._processUrl(e),JSON.stringify(i),s).then(function(e){return e.json()}).then(function(e){e.succeed?o.serviceProcessCompleted(e,n):o.serviceProcessFailed(e)}).catch(function(e){o.serviceProcessFailed({error:e})})}},{key:"serviceProcessCompleted",value:function(e,t){e=ge.transformResult(e),t=t||1e3;var r=this;if(e)var n=setInterval(function(){en.get(r._processUrl(e.newResourceLocation),{_t:(new Date).getTime()}).then(function(e){return e.json()}).then(function(e){r.events.triggerEvent("processRunning",{id:e.id,state:e.state}),"LOST"!==e.state.runState&&"KILLED"!==e.state.runState&&"FAILED"!==e.state.runState||(clearInterval(n),r.events.triggerEvent("processFailed",{error:e.state.errorMsg,state:e.state.runState})),"FINISHED"===e.state.runState&&e.setting.serviceInfo&&(clearInterval(n),r.events.triggerEvent("processCompleted",{result:e}))}).catch(function(e){clearInterval(n),r.events.triggerEvent("processFailed",{error:e})})},t)}},{key:"serviceProcessFailed",value:function(e){di(vi(t.prototype),"serviceProcessFailed",this).call(this,e)}},{key:"_processUrl",value:function(e){return rn.getToken(e)&&(e=ge.urlAppend(e,"token="+rn.getToken(e))),e}}])&&hi(r.prototype,n),o&&hi(r,o),t}();function gi(e){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Si(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wi(e,t){return!t||"object"!==gi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oi(e,t,r){return(Oi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_i(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function _i(e){return(_i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pi(e,t){return(Pi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.ProcessingServiceBase=bi;var Ci=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=wi(this,_i(t).call(this,e,r))).url=ge.urlPathAppend(n.url,"spatialanalyst/buffers"),n.CLASS_NAME="SuperMap.BuffersAnalystJobsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pi(e,t)}(t,bi),r=t,(n=[{key:"destroy",value:function(){Oi(_i(t.prototype),"destroy",this).call(this)}},{key:"getBuffersJobs",value:function(){Oi(_i(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getBuffersJob",value:function(e){Oi(_i(t.prototype),"getJobs",this).call(this,ge.urlPathAppend(this.url,e))}},{key:"addBuffersJob",value:function(e,r){Oi(_i(t.prototype),"addJob",this).call(this,this.url,e,fi,r)}}])&&Si(r.prototype,n),o&&Si(r,o),t}();function Ei(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.BuffersAnalystJobsService=Ci;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ti=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,ge.extend(this,t),this.CLASS_NAME="SuperMap.BurstPipelineAnalystParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=null}}])&&Ei(t.prototype,r),n&&Ei(t,n),e}();function ki(e){return(ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ai(e,t){return!t||"object"!==ki(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ji(e,t,r){return(ji="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ri(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ri(e){return(Ri=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Li(e,t){return(Li=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.BurstPipelineAnalystParameters=Ti;var Mi=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ai(this,Ri(t).call(this,e,r))).format=o.GEOJSON,n.CLASS_NAME="SuperMap.NetworkAnalystServiceBase",n}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Li(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){ji(Ri(t.prototype),"destroy",this).call(this),this.format=null}},{key:"serviceProcessCompleted",value:function(e){var t;(e=ge.transformResult(e))&&this.format===o.GEOJSON&&"function"==typeof this.toGeoJSONResult&&(t=this.toGeoJSONResult(e)),t||(t=e),this.events.triggerEvent("processCompleted",{result:t})}},{key:"toGeoJSONResult",value:function(e){return null}}])&&xi(r.prototype,n),i&&xi(r,i),t}();function Ni(e){return(Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ii(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Di(e,t){return!t||"object"!==Ni(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fi(e,t,r){return(Fi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Bi(e){return(Bi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gi(e,t){return(Gi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.NetworkAnalystServiceBase=Mi;var Ui=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Di(this,Bi(t).call(this,e,r))).CLASS_NAME="SuperMap.BurstPipelineAnalystService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gi(e,t)}(t,Mi),r=t,(n=[{key:"destroy",value:function(){Fi(Bi(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(!(e instanceof Ti))return null;var t,r=this;if(r.url=ge.urlPathAppend(r.url,"burstAnalyse"),t={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");if(null===e.edgeID&&null===e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");null!==e.edgeID?t.edgeID=e.edgeID:t.nodeID=e.nodeID,r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}])&&Ii(r.prototype,n),o&&Ii(r,o),t}();function Hi(e){return(Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ji(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wi(e,t){return!t||"object"!==Hi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vi(e,t,r){return(Vi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zi(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function zi(e){return(zi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qi(e,t){return(qi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.BurstPipelineAnalystService=Ui;var Yi=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Wi(this,zi(t).call(this,e,r))).CLASS_NAME="SuperMap.ChartFeatureInfoSpecsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qi(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Vi(zi(t.prototype),"destroy",this).call(this),ge.reset(this)}},{key:"processAsync",value:function(){var e=this;e.isTempLayers||ge.urlPathAppend(e.url,"chartFeatureInfoSpecs"),e.request({method:"GET",params:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&Ji(r.prototype,n),o&&Ji(r,o),t}();function Qi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ChartFeatureInfoSpecsService=Yi;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Xi=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.ChartQueryFilterParameter"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.isQueryPoint=null,e.isQueryLine=null,e.isQueryRegion=null,e.attributeFilter=null,e.chartFeatureInfoSpecCode=null}},{key:"toJson",value:function(){var e="";return e+='"isQueryPoint":'+this.isQueryPoint+",",e+='"isQueryLine":'+this.isQueryLine+",",e+='"isQueryRegion":'+this.isQueryRegion+",",this.attributeFilter&&(e+='"attributeFilter": "'+this.attributeFilter+'",'),e="{"+(e+='"chartFeatureInfoSpecCode":'+this.chartFeatureInfoSpecCode)+"}"}}])&&Qi(t.prototype,r),n&&Qi(t,n),e}();function Ki(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ChartQueryFilterParameter=Xi;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Zi=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.ChartQueryParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.queryMode=null,e.bounds=null,e.chartLayerNames=null,e.chartQueryFilterParameters=null,e.returnContent=!0,e.startRecord=0,e.expectCount=null}},{key:"getVariablesJson",value:function(){var e="";if(e+='"queryMode":"'+this.queryMode+'",',this.chartLayerNames&&this.chartLayerNames.length){for(var t=[],r=this.chartLayerNames.length,n=0;n<r;n++)t.push('"'+this.chartLayerNames[n]+'"');e+='"chartLayerNames":'+("["+t.join(",")+"]")+","}if("ChartBoundsQuery"===this.queryMode&&this.bounds&&(e+='"bounds":{"leftBottom":{"x":'+this.bounds.left+',"y":'+this.bounds.bottom+'},"rightTop":{"x":'+this.bounds.right+',"y":'+this.bounds.top+"}},"),this.chartQueryFilterParameters&&this.chartQueryFilterParameters.length){for(var o=[],i=this.chartQueryFilterParameters.length,a=0;a<i;a++){var s=this.chartQueryFilterParameters[a];s instanceof Xi&&o.push(s.toJson())}var l="["+o.join(",")+"]";l='"chartQueryParams":'+l+",",l+='"startRecord":'+this.startRecord+",",e+='"chartQueryParameters":'+(l="{"+(l+='"expectCount":'+this.expectCount)+"}")}return e="{"+e+"}"}}])&&Ki(t.prototype,r),n&&Ki(t,n),e}();function $i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ChartQueryParameters=Zi;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ea=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.customParams=null,this.prjCoordSys=null,this.expectCount=1e5,this.networkType=a.LINE,this.queryOption=s.ATTRIBUTEANDGEOMETRY,this.queryParams=null,this.startRecord=0,this.holdTime=10,this.returnCustomResult=!1,this.returnFeatureWithFieldCaption=!1,ge.extend(this,t),this.CLASS_NAME="SuperMap.QueryParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.customParams=null,e.expectCount=null,e.networkType=null,e.queryOption=null,e.queryParams){for(var t=0,r=e.queryParams,n=r.length;t<n;t++)r[t].destroy();e.queryParams=null}e.startRecord=null,e.holdTime=null,e.returnCustomResult=null,e.prjCoordSys=null}}])&&$i(t.prototype,r),n&&$i(t,n),e}();function ta(e){return(ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ra(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function na(e,t){return!t||"object"!==ta(t)&&"function"!=typeof t?ia(e):t}function oa(e){return(oa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ia(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aa(e,t){return(aa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.QueryParameters=ea;var sa=function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=na(this,oa(t).call(this,e,r)),r=r||{},n.returnContent=null,n.format=o.GEOJSON,ge.extend(ia(n),r);var i=ia(n);return r.format&&(i.format=r.format.toUpperCase()),i.url?(i.url=ge.urlPathAppend(i.url,"queryResults"),n.CLASS_NAME="SuperMap.ChartQueryService",n):na(n)}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aa(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Wn.prototype.destroy.apply(this,arguments),this.returnContent=null,this.format=null}},{key:"processAsync",value:function(e){if(e instanceof Zi){var t,r=this;r.returnContent=e.returnContent,t=e.getVariablesJson(),r.returnContent&&(r.url=ge.urlAppend(r.url,"returnContent=true")),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){if((e=ge.transformResult(e))&&e.recordsets&&this.format===o.GEOJSON)for(var t=0,r=e.recordsets,n=r.length;t<n;t++)if(r[t].features){var i=new Lr;r[t].features=i.toGeoJSON(r[t].features)}this.events.triggerEvent("processCompleted",{result:e})}},{key:"getQueryParameters",value:function(e){return new ea({queryMode:e.queryMode,bounds:e.bounds,chartLayerNames:e.chartLayerNames,chartQueryFilterParameters:e.chartQueryFilterParameters,returnContent:e.returnContent})}}])&&ra(r.prototype,n),i&&ra(r,i),t}();function la(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ChartQueryService=sa;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ua=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=!0,this.isExactClip=null,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ClipParameter"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.clipDatasetName=null,e.clipDatasourceName=null,e.clipRegion=null,e.isClipInRegion=null,e.isExactClip=null}},{key:"toJSON",value:function(){return ge.toJSON({isClipInRegion:this.isClipInRegion,clipDatasetName:this.clipDatasetName,clipDatasourceName:this.clipDatasourceName,isExactClip:this.isExactClip,clipRegion:Er.fromGeometry(this.clipRegion)})}}])&&la(t.prototype,r),n&&la(t,n),e}();function ca(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ClipParameter=ua;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fa=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.elevation=null,this.color=null,ge.extend(this,t);var r=this.color;r&&(this.color=new cr(r.red,r.green,r.blue)),this.CLASS_NAME="SuperMap.ColorDictionary"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){ge.reset(this)}},{key:"toServerJSONObject",value:function(){var e={};return e=ge.copyAttributes(e,this)}}])&&ca(t.prototype,r),n&&ca(t,n),e}();function pa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ColorDictionary=fa;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ha=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.returnEdgeFeatures=!1,this.returnEdgeGeometry=!1,this.returnEdgeIDs=!1,this.returnNodeFeatures=!1,this.returnNodeGeometry=!1,this.returnNodeIDs=!1,this.returnPathGuides=!1,this.returnRoutes=!1,ge.extend(this,t),this.CLASS_NAME="SuperMap.TransportationAnalystResultSetting")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.returnEdgeFeatures=null,e.returnEdgeGeometry=null,e.returnEdgeIDs=null,e.returnNodeFeatures=null,e.returnNodeGeometry=null,e.returnNodeIDs=null,e.returnPathGuides=null,e.returnRoutes=null}}])&&pa(t.prototype,r),n&&pa(t,n),e}();function ya(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.TransportationAnalystResultSetting=ha;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var da=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.barrierEdgeIDs=null,this.barrierNodeIDs=null,this.barrierPoints=null,this.weightFieldName=null,this.turnWeightField=null,this.resultSetting=new ha,ge.extend(this,t),this.CLASS_NAME="SuperMap.TransportationAnalystParameter")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.barrierEdgeIDs=null,e.barrierNodeIDs=null,e.weightFieldName=null,e.turnWeightField=null,e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.barrierPoints&&e.barrierPoints.length)for(var t in e.barrierPoints)e.barrierPoints[t].destroy();e.barrierPoints=null}}])&&ya(t.prototype,r),n&&ya(t,n),e}();function va(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.TransportationAnalystParameter=da;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ma=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.nodes=null,this.parameter=new da,ge.extend(this,t),this.CLASS_NAME="SuperMap.ComputeWeightMatrixParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&va(t.prototype,r),n&&va(t,n),e}();function ba(e){return(ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ga(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Sa(e,t){return!t||"object"!==ba(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wa(e,t,r){return(wa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Oa(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Oa(e){return(Oa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _a(e,t){return(_a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.ComputeWeightMatrixParameters=ma;var Pa=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Sa(this,Oa(t).call(this,e,r))).CLASS_NAME="SuperMap.ComputeWeightMatrixService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_a(e,t)}(t,Mi),r=t,(n=[{key:"destroy",value:function(){wa(Oa(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof ma){var t,r=this;r.url=ge.urlPathAppend(r.url,"weightmatrix"),t={parameter:ge.toJSON(e.parameter),nodes:r.getJson(e.isAnalyzeById,e.nodes)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}}])&&ga(r.prototype,n),o&&ga(r,o),t}();function Ca(e){return(Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ea(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ta(e){return(Ta=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ka(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xa(e,t){return(xa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.ComputeWeightMatrixService=Pa;var Aa=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=r||{}).EVENT_TYPES=["broadcastSocketConnected","broadcastSocketError","broadcastFailed","broadcastSucceeded","subscribeSocketConnected","subscribeSocketError","messageSucceeded","setFilterParamSucceeded"],o=this,(n=!(i=Ta(t).call(this,e,r))||"object"!==Ca(i)&&"function"!=typeof i?ka(o):i).geometry=null,n.prjCoordSys=null,n.excludeField=null,ge.extend(ka(n),r),n.CLASS_NAME="SuperMap.DataFlowService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xa(e,t)}(t,Wn),r=t,(n=[{key:"initBroadcast",value:function(){var e=this;return this.broadcastWebSocket=this._connect(ge.urlPathAppend(e.url,"broadcast")),this.broadcastWebSocket.onopen=function(t){e.broadcastWebSocket.isOpen=!0,t.eventType="broadcastSocketConnected",e.events.triggerEvent("broadcastSocketConnected",t)},this.broadcastWebSocket.onclose=function(t){e.broadcastWebSocket.isOpen=!1,t.eventType="broadcastSocketConnected",e.events.triggerEvent("broadcastSocketConnected",t)},this.broadcastWebSocket.onerror=function(t){t.eventType="broadcastSocketError",e.events.triggerEvent("broadcastSocketError",t)},this}},{key:"broadcast",value:function(e){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen?(this.broadcastWebSocket.send(JSON.stringify(e)),this.events.triggerEvent("broadcastSucceeded")):this.events.triggerEvent("broadcastFailed")}},{key:"initSubscribe",value:function(){var e=this;return this.subscribeWebSocket=this._connect(ge.urlPathAppend(e.url,"subscribe")),this.subscribeWebSocket.onopen=function(t){e.subscribeWebSocket.send(e._getFilterParams()),t.eventType="subscribeSocketConnected",e.events.triggerEvent("subscribeSocketConnected",t)},this.subscribeWebSocket.onerror=function(t){t.eventType="subscribeSocketError",e.events.triggerEvent("subscribeSocketError",t)},this.subscribeWebSocket.onmessage=function(t){e._onMessage(t)},this}},{key:"setExcludeField",value:function(e){return this.excludeField=e,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"setGeometry",value:function(e){return this.geometry=e,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"unSubscribe",value:function(){this.subscribeWebSocket&&(this.subscribeWebSocket.close(),this.subscribeWebSocket=null)}},{key:"unBroadcast",value:function(){this.broadcastWebSocket&&(this.broadcastWebSocket.close(),this.broadcastWebSocket=null)}},{key:"destroy",value:function(){Wn.prototype.destroy.apply(this,arguments);this.geometry=null,this.prjCoordSys=null,this.excludeField=null,this.unBroadcast(),this.unSubscribe()}},{key:"_getFilterParams",value:function(){var e={filterParam:{prjCoordSys:this.prjCoordSys,excludeField:this.excludeField,geometry:this.geometry}};return ge.toJSON(e)}},{key:"_onMessage",value:function(e){if(e.data&&e.data.indexOf("filterParam")>=0){var t=JSON.parse(e.data);return e.filterParam=t,e.eventType="setFilterParamSucceeded",void this.events.triggerEvent("setFilterParamSucceeded",e)}var r=JSON.parse(e.data);e.featureResult=r,e.eventType="messageSucceeded",this.events.triggerEvent("messageSucceeded",e)}},{key:"_connect",value:function(e){return e=this._appendCredentials(e),"WebSocket"in window?new WebSocket(e):"MozWebSocket"in window?new(0,window.MozWebSocket)(e):(console.log("no WebSocket"),null)}},{key:"_appendCredentials",value:function(e){var t=rn.getToken(e);return t&&(e=ge.urlAppend(e,"token="+t)),e}}])&&Ea(r.prototype,n),o&&Ea(r,o),t}();function ja(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.DataFlowService=Aa;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ra=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.bounds=null,this.dataSourceName=null,this.description=null,this.encodeType=null,this.isReadOnly=null,this.name=null,this.prjCoordSys=null,this.tableName=null,this.type=null,ge.extend(this,t);var r=this.bounds;r&&(this.bounds=new _e(r.leftBottom.x,r.leftBottom.y,r.rightTop.x,r.rightTop.y)),this.CLASS_NAME="SuperMap.DatasetInfo"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){ge.reset(this)}},{key:"toServerJSONObject",value:function(){var e={};return(e=ge.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e}}])&&ja(t.prototype,r),n&&ja(t,n),e}();function La(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.DatasetInfo=Ra;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ma=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.operation=R.UNION,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.OverlayAnalystParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.operation=null}}])&&La(t.prototype,r),n&&La(t,n),e}();function Na(e){return(Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ia(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Da(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fa(e,t,r){return(Fa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ba(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ba(e){return(Ba=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ga(e,t){return(Ga=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.OverlayAnalystParameters=Ma;var Ua=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Ba(t).call(this,e))||"object"!==Na(o)&&"function"!=typeof o?Da(n):o).operateDataset=null,r.operateDatasetFields=[],r.operateDatasetFilter=new Fo,r.operateRegions=[],r.sourceDataset=null,r.sourceDatasetFields=[],r.sourceDatasetFilter=new Fo,r.tolerance=0,r.resultSetting=new Ao,ge.extend(Da(r),e),r.CLASS_NAME="SuperMap.DatasetOverlayAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ga(e,t)}(t,Ma),r=t,o=[{key:"toObject",value:function(e,t){for(var r in e)if("sourceDataset"!==r)if("operateRegions"===r){t.operateRegions=[];var n=e.operateRegions;for(var o in n)n.hasOwnProperty(o)&&(t.operateRegions[o]=Er.fromGeometry(n[o]))}else"resultSetting"===r?t.dataReturnOption=e.resultSetting:t[r]=e[r]}}],(n=[{key:"destroy",value:function(){Fa(Ba(t.prototype),"destroy",this).call(this);var e=this;if(e.operateDataset=null,e.operateDatasetFields=null,e.operateDatasetFilter&&(e.operateDatasetFilter.destroy(),e.operateDatasetFilter=null),e.operateRegions){for(var r=0,n=e.operateRegions,o=n.length;r<o;r++)n[r].destroy();e.operateRegions=null}e.sourceDataset=null,e.sourceDatasetFields=null,e.sourceDatasetFilter&&(e.sourceDatasetFilter.destroy(),e.sourceDatasetFilter=null),e.tolerance=null,e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null)}}])&&Ia(r.prototype,n),o&&Ia(r,o),t}();function Ha(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.DatasetOverlayAnalystParameters=Ua;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ja=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clipRegion=null,this.datumValue=0,this.expectedZValues=null,this.interval=0,this.resampleTolerance=0,this.smoothMethod=M.BSPLINE,this.smoothness=0,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.SurfaceAnalystParametersSetting"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.clipRegion&&(e.clipRegion.destroy(),e.clipRegion=null),e.datumValue=null,e.expectedZValues=null,e.interval=null,e.resampleTolerance=null,e.smoothMethod=null,e.smoothness=null}},{key:"toJSON",value:function(){var e="'datumValue':"+ge.toJSON(this.datumValue);if(e+=",'interval':"+ge.toJSON(this.interval),e+=",'resampleTolerance':"+ge.toJSON(this.resampleTolerance),e+=",'smoothMethod':"+ge.toJSON(this.smoothMethod),e+=",'smoothness':"+ge.toJSON(this.smoothness),null!=this.expectedZValues&&(e+=",'expectedZValues':"+ge.toJSON(this.expectedZValues)),null!=this.clipRegion){var t=this.clipRegion;this.clipRegion instanceof Ce&&this.clipRegion.components&&(t=Er.fromGeometry(this.clipRegion)),e+=",'clipRegion':"+ge.toJSON(t)}return"{"+e+"}"}}])&&Ha(t.prototype,r),n&&Ha(t,n),e}();function Wa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.SurfaceAnalystParametersSetting=Ja;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Va=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolution=0,this.extractParameter=new Ja,this.resultSetting=new Ao,this.surfaceAnalystMethod=N.ISOLINE,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.SurfaceAnalystParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.resolution=null,e.extractParameter&&(e.extractParameter.destroy(),e.extractParameter=null),e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.surfaceAnalystMethod=null}}])&&Wa(t.prototype,r),n&&Wa(t,n),e}();function za(e){return(za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ya(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qa(e,t,r){return(Qa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xa(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Xa(e){return(Xa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ka(e,t){return(Ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.SurfaceAnalystParameters=Va;var Za=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Xa(t).call(this,e))||"object"!==za(o)&&"function"!=typeof o?Ya(n):o).dataset=null,r.filterQueryParameter=new Fo,r.zValueFieldName=null,e&&ge.extend(Ya(r),e),r.CLASS_NAME="SuperMap.DatasetSurfaceAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ka(e,t)}(t,Va),r=t,o=[{key:"toObject",value:function(e,t){for(var r in e)if("filterQueryParameter"===r&&(t.filterQueryParameter=e.filterQueryParameter),"extractParameter"===r)e.extractParameter.clipRegion instanceof Ce&&e.extractParameter.clipRegion.components&&(e.extractParameter.clipRegion=Er.fromGeometry(e.extractParameter.clipRegion)),t.extractParameter=e.extractParameter;else{if("dataset"===r)continue;if("surfaceAnalystMethod"===r)continue;t[r]=e[r]}}}],(n=[{key:"destroy",value:function(){Qa(Xa(t.prototype),"destroy",this).call(this);var e=this;e.dataset=null,e.filterQueryParameter&&(e.filterQueryParameter.destroy(),e.filterQueryParameter=null),e.zValueFieldName=null}}])&&qa(r.prototype,n),o&&qa(r,o),t}();function $a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.DatasetSurfaceAnalystParameters=Za;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var es=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.clipRegion=null,this.createResultDataset=!1,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=!0,ge.extend(this,t),this.CLASS_NAME="SuperMap.ThiessenAnalystParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.clipRegion&&(e.clipRegion.destroy(),e.clipRegion=null),e.createResultDataset=null,e.resultDatasetName=null,e.resultDatasourceName=null,e.returnResultRegion=null}}])&&$a(t.prototype,r),n&&$a(t,n),e}();function ts(e){return(ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ns(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function os(e,t,r){return(os="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=is(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function is(e){return(is=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function as(e,t){return(as=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.ThiessenAnalystParameters=es;var ss=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=is(t).call(this,e))||"object"!==ts(o)&&"function"!=typeof o?ns(n):o).filterQueryParameter=null,r.dataset=null,e&&ge.extend(ns(r),e),r.CLASS_NAME="SuperMap.DatasetThiessenAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&as(e,t)}(t,es),r=t,o=[{key:"toObject",value:function(e,t){for(var r in e)"clipRegion"===r?t.clipRegion=Er.fromGeometry(e.clipRegion):t[r]=e[r]}}],(n=[{key:"destroy",value:function(){os(is(t.prototype),"destroy",this).call(this);this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null)}}])&&rs(r.prototype,n),o&&rs(r,o),t}();function ls(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.DatasetThiessenAnalystParameters=ss;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var us=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,ge.extend(this,t),this.CLASS_NAME="SuperMap.DensityKernelAnalystParameters"}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"dataset"!==r&&(t[r]=e[r])}}],(r=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.bounds=null,e.fieldName=null,e.resultGridDatasetResolution=null,e.searchRadius=null,e.targetDatasource=null,e.resultGridName=null,e.deleteExistResultDataset=null}}])&&ls(t.prototype,r),n&&ls(t,n),e}();function cs(e){return(cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ps(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hs(e,t,r){return(hs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ys(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ys(e){return(ys=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ds(e,t){return(ds=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.DensityKernelAnalystParameters=us;var vs=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=ys(t).call(this,e,r))||"object"!==cs(i)&&"function"!=typeof i?ps(o):i).mode=null,r&&ge.extend(ps(n),r),n.CLASS_NAME="SuperMap.DensityAnalystService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ds(e,t)}(t,yo),r=t,(n=[{key:"destroy",value:function(){hs(ys(t.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t=this,r=new Object;e instanceof us&&(t.url=ge.urlPathAppend(t.url,"datasets/"+e.dataset+"/densityanalyst/kernel"),t.mode="kernel"),us.toObject(e,r);var n=ge.toJSON(r);t.url=ge.urlAppend(t.url,"returnContent=true"),t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&fs(r.prototype,n),o&&fs(r,o),t}();function ms(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.DensityAnalystService=vs;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var bs=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=D.ADD,this.IDs=null,this.returnContent=!1,this.isUseBatch=!1,ge.extend(this,t),this.CLASS_NAME="SuperMap.EditFeaturesParameters"}var t,r,n;return t=e,n=[{key:"toJsonParameters",value:function(e){var t,r,n;if(e.editType===D.DELETE){if(null===e.IDs)return;n={ids:e.IDs}}else if(n=[],e.features){r=e.features.length;for(var o=0;o<r;o++)(t=e.features[o]).geometry=Er.fromGeometry(t.geometry),n.push(t)}return ge.toJSON(n)}}],(r=[{key:"destroy",value:function(){var e=this;e.dataSourceName=null,e.dataSetName=null,e.features=null,e.editType=null,e.IDs=null,e.returnContent=null}}])&&ms(t.prototype,r),n&&ms(t,n),e}();function gs(e){return(gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ss(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ws(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Os(e,t,r){return(Os="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_s(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function _s(e){return(_s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ps(e,t){return(Ps=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.EditFeaturesParameters=bs;var Cs=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=_s(t).call(this,e,r))||"object"!==gs(i)&&"function"!=typeof i?ws(o):i).returnContent=!1,n.isUseBatch=!1,r&&ge.extend(ws(n),r),n.url=ge.urlPathAppend(n.url,"features"),n.CLASS_NAME="SuperMap.EditFeaturesService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ps(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Os(_s(t.prototype),"destroy",this).call(this);this.returnContent=null,this.isUseBatch=null,this.fromIndex=null,this.toIndex=null}},{key:"processAsync",value:function(e){if(e instanceof bs){var t=this,r="POST",n="",o=e.editType,i=null;t.returnContent=e.returnContent,t.isUseBatch=e.isUseBatch,i=bs.toJsonParameters(e),o===D.DELETE?(n=ge.toJSON(e.IDs),t.url=ge.urlAppend(t.url,"ids="+n),r="DELETE",i=n):o===D.UPDATE?r="PUT":(t.isUseBatch&&(t.url=ge.urlAppend(t.url,"isUseBatch=".concat(t.isUseBatch)),t.returnContent=!1),t.returnContent&&(t.url=ge.urlAppend(t.url,"returnContent=true"),r="POST")),t.request({method:r,data:i,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&Ss(r.prototype,n),o&&Ss(r,o),t}();function Es(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.EditFeaturesService=Cs;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ts=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=!1,ge.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalyst3DParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=null}}])&&Es(t.prototype,r),n&&Es(t,n),e}();function ks(e){return(ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function As(e,t){return!t||"object"!==ks(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function js(e,t,r){return(js="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rs(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Rs(e){return(Rs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ls(e,t){return(Ls=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FacilityAnalyst3DParameters=Ts;var Ms=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=As(this,Rs(t).call(this,e))).CLASS_NAME="SuperMap.FacilityAnalystSinks3DParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ls(e,t)}(t,Ts),r=t,(n=[{key:"destroy",value:function(){js(Rs(t.prototype),"destroy",this).call(this)}}])&&xs(r.prototype,n),o&&xs(r,o),t}();function Ns(e){return(Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Is(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ds(e,t){return!t||"object"!==Ns(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fs(e){return(Fs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bs(e,t){return(Bs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FacilityAnalystSinks3DParameters=Ms;var Gs=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ds(this,Fs(t).call(this,e,r))).CLASS_NAME="SuperMap.FacilityAnalystSinks3DService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bs(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Wn.prototype.destroy.apply(this,arguments)}},{key:"processAsync",value:function(e){if(e instanceof Ms){var t,r=this;r.url=ge.urlPathAppend(r.url,"sinks"),t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&Is(r.prototype,n),o&&Is(r,o),t}();function Us(e){return(Us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Js(e,t){return!t||"object"!==Us(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ws(e,t,r){return(Ws="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vs(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Vs(e){return(Vs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zs(e,t){return(zs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FacilityAnalystSinks3DService=Gs;var qs=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Js(this,Vs(t).call(this,e))).CLASS_NAME="SuperMap.FacilityAnalystSources3DParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zs(e,t)}(t,Ts),r=t,(n=[{key:"destroy",value:function(){Ws(Vs(t.prototype),"destroy",this).call(this)}}])&&Hs(r.prototype,n),o&&Hs(r,o),t}();function Ys(e){return(Ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xs(e,t){return!t||"object"!==Ys(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ks(e,t,r){return(Ks="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zs(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Zs(e){return(Zs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $s(e,t){return($s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FacilityAnalystSources3DParameters=qs;var el=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Xs(this,Zs(t).call(this,e,r))).CLASS_NAME="SuperMap.FacilityAnalystSources3DService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$s(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Ks(Zs(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof qs){var t,r=this;r.url=ge.urlPathAppend(r.url,"sources"),t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&Qs(r.prototype,n),o&&Qs(r,o),t}();function tl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.FacilityAnalystSources3DService=el;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var rl=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,this.queryType=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalystStreamParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.edgeID=null,e.nodeID=null,e.weightName=null,e.isUncertainDirectionValid=null,e.type=null}}])&&tl(t.prototype,r),n&&tl(t,n),e}();function nl(e){return(nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ol(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function il(e,t){return!t||"object"!==nl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function al(e,t,r){return(al="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function sl(e){return(sl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ll(e,t){return(ll=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FacilityAnalystStreamParameters=rl;var ul=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=il(this,sl(t).call(this,e,r))).CLASS_NAME="SuperMap.FacilityAnalystStreamService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ll(e,t)}(t,Mi),r=t,(n=[{key:"destroy",value:function(){al(sl(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof rl){var t,r=this;if(0===e.queryType)r.url=ge.urlPathAppend(r.url,"upstreamcirticalfaclilities");else{if(1!==e.queryType)return;r.url=ge.urlPathAppend(r.url,"downstreamcirticalfaclilities")}t={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID||null===e.edgeID&&null===e.nodeID||(null!==e.edgeID?t.edgeID=e.edgeID:t.nodeID=e.nodeID,r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed}))}}}])&&ol(r.prototype,n),o&&ol(r,o),t}();function cl(e){return(cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pl(e,t){return!t||"object"!==cl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hl(e,t,r){return(hl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function yl(e){return(yl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dl(e,t){return(dl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FacilityAnalystStreamService=ul;var vl=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=pl(this,yl(t).call(this,e))).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dl(e,t)}(t,Ts),r=t,(n=[{key:"destroy",value:function(){hl(yl(t.prototype),"destroy",this).call(this)}}])&&fl(r.prototype,n),o&&fl(r,o),t}();function ml(e){return(ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gl(e,t){return!t||"object"!==ml(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sl(e,t,r){return(Sl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function wl(e){return(wl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ol(e,t){return(Ol=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FacilityAnalystTracedown3DParameters=vl;var _l=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=gl(this,wl(t).call(this,e,r))).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ol(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Sl(wl(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof vl){var t,r=this;r.url=ge.urlPathAppend(r.url,"tracedownresult"),t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&bl(r.prototype,n),o&&bl(r,o),t}();function Pl(e){return(Pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function El(e,t){return!t||"object"!==Pl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tl(e,t,r){return(Tl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function kl(e){return(kl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xl(e,t){return(xl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FacilityAnalystTracedown3DService=_l;var Al=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=El(this,kl(t).call(this,e))).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xl(e,t)}(t,Ts),r=t,(n=[{key:"destroy",value:function(){Tl(kl(t.prototype),"destroy",this).call(this)}}])&&Cl(r.prototype,n),o&&Cl(r,o),t}();function jl(e){return(jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ll(e,t){return!t||"object"!==jl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ml(e,t,r){return(Ml="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Nl(e){return(Nl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Il(e,t){return(Il=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FacilityAnalystTraceup3DParameters=Al;var Dl=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ll(this,Nl(t).call(this,e,r))).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Il(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Ml(Nl(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Al){var t,r=this;r.url=ge.urlPathAppend(r.url,"traceupresult"),t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&Rl(r.prototype,n),o&&Rl(r,o),t}();function Fl(e){return(Fl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ul(e,t,r){return(Ul="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Hl(e){return(Hl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jl(e,t){return(Jl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FacilityAnalystTraceup3DService=Dl;var Wl=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=Hl(t).call(this,e))||"object"!==Fl(o)&&"function"!=typeof o?Gl(n):o,e=e||{},r.sourceNodeIDs=null,ge.extend(Gl(r),e),r.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jl(e,t)}(t,Ts),r=t,(n=[{key:"destroy",value:function(){Ul(Hl(t.prototype),"destroy",this).call(this),this.sourceNodeIDs=null}}])&&Bl(r.prototype,n),o&&Bl(r,o),t}();function Vl(e){return(Vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ql(e,t){return!t||"object"!==Vl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yl(e,t,r){return(Yl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ql(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ql(e){return(Ql=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xl(e,t){return(Xl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FacilityAnalystUpstream3DParameters=Wl;var Kl=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ql(this,Ql(t).call(this,e,r))).CLASS_NAME="SuperMap.FacilityAnalystUpstream3DService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xl(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Yl(Ql(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Wl){var t,r=this;r.url=ge.urlPathAppend(r.url,"upstreamcirticalfaclilities"),t={sourceNodeIDs:e.sourceNodeIDs,edgeID:e.edgeID,nodeID:e.nodeID,isUncertainDirectionValid:e.isUncertainDirectionValid},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&zl(r.prototype,n),o&&zl(r,o),t}();function Zl(e){return(Zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function eu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tu(e,t,r){return(tu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ru(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ru(e){return(ru=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nu(e,t){return(nu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FacilityAnalystUpstream3DService=Kl;var ou=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=ru(t).call(this,e))||"object"!==Zl(o)&&"function"!=typeof o?eu(n):o).filterParam=null,r.aggType=oe.FILTER,r.CLASS_NAME="SuperMap.FilterAggParameter",ge.extend(eu(r),e),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nu(e,t)}(t,io),r=t,(n=[{key:"destroy",value:function(){tu(ru(t.prototype),"destroy",this).call(this);this.filterParam&&(this.filterParam=null)}}])&&$l(r.prototype,n),o&&$l(r,o),t}();function iu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.FilterAggParameter=ou;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var au=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasource=null,this.dataset=null,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.FieldParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.datasource=null,this.dataset=null}}])&&iu(t.prototype,r),n&&iu(t,n),e}();function su(e){return(su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function uu(e){return(uu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fu(e,t){return(fu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FieldParameters=au;var pu=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=uu(t).call(this,e))||"object"!==su(o)&&"function"!=typeof o?cu(n):o).fieldName=null,r.statisticMode=null,e&&ge.extend(cu(r),e),r.CLASS_NAME="SuperMap.FieldStatisticsParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fu(e,t)}(t,au),r=t,(n=[{key:"destroy",value:function(){this.fieldName=null,this.statisticMode=null}}])&&lu(r.prototype,n),o&&lu(r,o),t}();function hu(e){return(hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function du(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vu(e,t,r){return(vu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mu(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function mu(e){return(mu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bu(e,t){return(bu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FieldStatisticsParameters=pu;var gu=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=mu(t).call(this,e,r))||"object"!==hu(i)&&"function"!=typeof i?du(o):i).datasource=null,n.dataset=null,n.field=null,n.statisticMode=null,r&&ge.extend(du(n),r),n.CLASS_NAME="SuperMap.FieldStatisticService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bu(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){vu(mu(t.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null,this.field=null,this.statisticMode=null}},{key:"processAsync",value:function(){var e=this,t="datasources/"+e.datasource+"/datasets/"+e.dataset+"/fields/"+e.field+"/"+e.statisticMode;e.url=ge.urlPathAppend(e.url,t),e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&yu(r.prototype,n),o&&yu(r,o),t}();function Su(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.FieldStatisticService=gu;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var wu=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.event=null,this.expectFacilityCount=1,this.facilities=null,this.fromEvent=!1,this.isAnalyzeById=!1,this.maxWeight=0,this.parameter=new da,ge.extend(this,t),this.CLASS_NAME="SuperMap.FindClosestFacilitiesParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.event=null,e.expectFacilityCount=null,e.facilities=null,e.fromEvent=null,e.isAnalyzeById=null,e.maxWeight=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&Su(t.prototype,r),n&&Su(t,n),e}();function Ou(e){return(Ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pu(e,t){return!t||"object"!==Ou(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cu(e,t,r){return(Cu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Eu(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Eu(e){return(Eu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tu(e,t){return(Tu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FindClosestFacilitiesParameters=wu;var ku=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Pu(this,Eu(t).call(this,e,r))).CLASS_NAME="SuperMap.FindClosestFacilitiesService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tu(e,t)}(t,Mi),r=t,(n=[{key:"destroy",value:function(){Cu(Eu(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof wu){var t,r=this;r.url=ge.urlPathAppend(r.url,"closestfacility"),t={expectFacilityCount:e.expectFacilityCount,fromEvent:e.fromEvent,maxWeight:e.maxWeight,parameter:ge.toJSON(e.parameter),event:ge.toJSON(e.event),facilities:r.getJson(e.isAnalyzeById,e.facilities)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.facilityPathList)return e;var t=new Lr;return e.facilityPathList.map(function(e){return e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e}),e}}])&&_u(r.prototype,n),o&&_u(r,o),t}();function xu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.FindClosestFacilitiesService=ku;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Au=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expectedSupplyCenterCount=null,this.isFromCenter=!1,this.supplyCenters=null,this.turnWeightField=null,this.weightName=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.FindLocationParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.expectedSupplyCenterCount=null,e.isFromCenter=null,e.turnWeightField=null,e.weightName=null,e.supplyCenters){for(var t=0,r=e.supplyCenters,n=r.length;t<n;t++)r[t].destroy();e.supplyCenters=null}}}])&&xu(t.prototype,r),n&&xu(t,n),e}();function ju(e){return(ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ru(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lu(e,t){return!t||"object"!==ju(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mu(e,t,r){return(Mu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nu(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Nu(e){return(Nu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Iu(e,t){return(Iu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FindLocationParameters=Au;var Du=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Lu(this,Nu(t).call(this,e,r))).CLASS_NAME="SuperMap.FindLocationService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Iu(e,t)}(t,Mi),r=t,(n=[{key:"destroy",value:function(){Mu(Nu(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Au){var t,r=this;r.url=ge.urlPathAppend(r.url,"location"),t={isFromCenter:e.isFromCenter,expectedSupplyCenterCount:e.expectedSupplyCenterCount,weightName:e.weightName,turnWeightField:e.turnWeightField,returnEdgeFeature:!0,returnEdgeGeometry:!0,returnNodeFeature:!0,mapParameter:ge.toJSON(e.mapParameter),supplyCenters:r.getCentersJson(e.supplyCenters)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getCentersJson",value:function(e){for(var t="[",r=e?e.length:0,n=0;n<r;n++)n>0&&(t+=","),t+=ge.toJSON(e[n]);return t+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;var t=new Lr;return e.demandResults&&(e.demandResults=t.toGeoJSON(e.demandResults)),e.supplyResults&&(e.supplyResults=t.toGeoJSON(e.supplyResults)),e}}])&&Ru(r.prototype,n),o&&Ru(r,o),t}();function Fu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.FindLocationService=Du;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Bu=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.centers=null,this.hasLeastTotalCost=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new da,ge.extend(this,t),this.CLASS_NAME="SuperMap.FindMTSPPathsParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.centers=null,e.hasLeastTotalCost=null,e.isAnalyzeById=null,e.nodes=null,e.maxWeight=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&Fu(t.prototype,r),n&&Fu(t,n),e}();function Gu(e){return(Gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hu(e,t){return!t||"object"!==Gu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ju(e,t,r){return(Ju="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wu(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Wu(e){return(Wu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vu(e,t){return(Vu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FindMTSPPathsParameters=Bu;var zu=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Hu(this,Wu(t).call(this,e,r))).CLASS_NAME="SuperMap.FindMTSPPathsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vu(e,t)}(t,Mi),r=t,(n=[{key:"destroy",value:function(){Ju(Wu(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Bu){var t,r=this,n=r.getJson(e.isAnalyzeById,e.centers),o=r.getJson(e.isAnalyzeById,e.nodes);r.url=ge.urlPathAppend(r.url,"mtsppath"),t={centers:n,nodes:o,parameter:ge.toJSON(e.parameter),hasLeastTotalCost:e.hasLeastTotalCost},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.pathList)return null;var t=new Lr;return e.pathList.map(function(e){return e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e}),e}}])&&Uu(r.prototype,n),o&&Uu(r,o),t}();function qu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.FindMTSPPathsService=zu;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Yu=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter=new da,ge.extend(this,t),this.CLASS_NAME="SuperMap.FindPathParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.hasLeastEdgeCount=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&qu(t.prototype,r),n&&qu(t,n),e}();function Qu(e){return(Qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ku(e,t){return!t||"object"!==Qu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zu(e,t,r){return(Zu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$u(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function $u(e){return($u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ec(e,t){return(ec=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FindPathParameters=Yu;var tc=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ku(this,$u(t).call(this,e,r))).CLASS_NAME="SuperMap.FindPathService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ec(e,t)}(t,Mi),r=t,(n=[{key:"destroy",value:function(){Zu($u(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Yu){var t,r=this;r.url=ge.urlPathAppend(r.url,"path"),t={hasLeastEdgeCount:e.hasLeastEdgeCount,parameter:ge.toJSON(e.parameter),nodes:r.getJson(e.isAnalyzeById,e.nodes)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.pathList||e.pathList.length<1)return null;var t=new Lr;return e.pathList.forEach(function(e){e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures))}),e}}])&&Xu(r.prototype,n),o&&Xu(r,o),t}();function rc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.FindPathService=tc;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var nc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.isCenterMutuallyExclusive=!1,this.centers=null,this.isFromCenter=!1,this.weights=null,this.parameter=new da,ge.extend(this,t),this.CLASS_NAME="SuperMap.FindServiceAreasParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.isCenterMutuallyExclusive=null,e.centers=null,e.isFromCenter=null,e.weights=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&rc(t.prototype,r),n&&rc(t,n),e}();function oc(e){return(oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ic(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ac(e,t){return!t||"object"!==oc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sc(e,t,r){return(sc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function lc(e){return(lc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uc(e,t){return(uc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FindServiceAreasParameters=nc;var cc=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ac(this,lc(t).call(this,e,r))).CLASS_NAME="SuperMap.FindServiceAreasService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uc(e,t)}(t,Mi),r=t,(n=[{key:"destroy",value:function(){sc(lc(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof nc){var t,r=this;r.url=ge.urlPathAppend(r.url,"servicearea"),t={isFromCenter:e.isFromCenter,isCenterMutuallyExclusive:e.isCenterMutuallyExclusive,parameter:ge.toJSON(e.parameter),centers:r.getJson(e.isAnalyzeById,e.centers),weights:r.getJson(!0,e.weights)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var r="[",n=t?t.length:0;if(!1===e)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+t[o].x+',"y":'+t[o].y+"}";else if(!0===e)for(var i=0;i<n;i++)i>0&&(r+=","),r+=t[i];return r+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.serviceAreaList)return e;var t=new Lr;return e.serviceAreaList.map(function(e){return e.serviceRegion&&(e.serviceRegion=t.toGeoJSON(e.serviceRegion)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e.routes&&(e.routes=t.toGeoJSON(e.routes)),e}),e}}])&&ic(r.prototype,n),o&&ic(r,o),t}();function fc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.FindServiceAreasService=cc;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var pc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endNodeAssigned=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new da,ge.extend(this,t),this.CLASS_NAME="SuperMap.FindTSPPathsParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.endNodeAssigned=null,e.isAnalyzeById=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&fc(t.prototype,r),n&&fc(t,n),e}();function hc(e){return(hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dc(e,t){return!t||"object"!==hc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vc(e,t,r){return(vc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function mc(e){return(mc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bc(e,t){return(bc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.FindTSPPathsParameters=pc;var gc=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=dc(this,mc(t).call(this,e,r))).CLASS_NAME="SuperMap.FindTSPPathsService",n}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bc(e,t)}(t,Mi),r=t,(o=[{key:"destroy",value:function(){vc(mc(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof pc){var t,r=this;r.url=ge.urlPathAppend(r.url,"tsppath"),t={parameter:n.Util.toJSON(e.parameter),endNodeAssigned:e.endNodeAssigned,nodes:r.getNodesJson(e)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getNodesJson",value:function(e){var t,r,n,o,i="";if(!1===e.isAnalyzeById){for(t="[",r=0,n=(o=e.nodes).length;r<n;r++)r>0&&(t+=","),t+='{"x":'+o[r].x+',"y":'+o[r].y+"}";i+=t+="]"}else if(!0===e.isAnalyzeById){for(var a="[",s=e.nodes,l=s.length,u=0;u<l;u++)u>0&&(a+=","),a+=s[u];i+=a+="]"}return i}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.tspPathList)return null;var t=new Lr;return e.tspPathList.forEach(function(e){e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures))}),e}}])&&yc(r.prototype,o),i&&yc(r,i),t}();function Sc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.FindTSPPathsService=gc;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var wc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.routeTable=null,this.routeIDField=null,this.attributeFilter=null,this.eventTable=null,this.eventRouteIDField=null,this.measureField=null,this.measureStartField=null,this.measureEndField=null,this.measureOffsetField=null,this.errorInfoField=null,this.retainedFields=null,this.dataReturnOption=null,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.GenerateSpatialDataParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.routeTable&&(e.routeTable=null),e.routeIDField=null,e.attributeFilter=null,e.eventTable=null,e.eventRouteIDField=null,e.measureField=null,e.measureStartField=null,e.measureEndField=null,e.measureOffsetField=null,e.errorInfoField=null,e.dataReturnOption&&(e.dataReturnOption.destroy(),e.dataReturnOption=null)}}])&&Sc(t.prototype,r),n&&Sc(t,n),e}();function Oc(e){return(Oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pc(e,t){return!t||"object"!==Oc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cc(e,t,r){return(Cc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ec(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ec(e){return(Ec=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tc(e,t){return(Tc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GenerateSpatialDataParameters=wc;var kc=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Pc(this,Ec(t).call(this,e,r))).CLASS_NAME="SuperMap.GenerateSpatialDataService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tc(e,t)}(t,yo),r=t,(n=[{key:"destroy",value:function(){Cc(Ec(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof wc){var t,r=this;t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t="datasets/"+e.routeTable+"/linearreferencing/generatespatialdata";return this.url=ge.urlPathAppend(this.url,t),this.url=ge.urlAppend(this.url,"returnContent=true"),ge.toJSON(e)}}])&&_c(r.prototype,n),o&&_c(r,o),t}();function xc(e){return(xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ac(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rc(e,t,r){return(Rc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Lc(e){return(Lc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mc(e,t){return(Mc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GenerateSpatialDataService=kc;var Nc=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Lc(t).call(this,e))||"object"!==xc(o)&&"function"!=typeof o?jc(n):o).bounds=null,r.queryType=ie.GEO_BOUNDING_BOX,r.CLASS_NAME="SuperMap.GeoBoundingBoxQueryBuilderParameter",ge.extend(jc(r),e),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mc(e,t)}(t,no),r=t,(n=[{key:"destroy",value:function(){Rc(Lc(t.prototype),"destroy",this).call(this),this.bounds=null,this.queryType=null}}])&&Ac(r.prototype,n),o&&Ac(r,o),t}();function Ic(e){return(Ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bc(e,t,r){return(Bc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Gc(e){return(Gc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uc(e,t){return(Uc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GeoBoundingBoxQueryBuilderParameter=Nc;var Hc=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Gc(t).call(this,e))||"object"!==Ic(o)&&"function"!=typeof o?Fc(n):o).precision=5,r.aggType=oe.GEOHASH_GRID,ge.extend(Fc(r),e),r.CLASS_NAME="SuperMap.GeoHashGridAggParameter",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uc(e,t)}(t,io),r=t,o=[{key:"toJsonParameters",value:function(e){var t={aggName:e.aggName,aggFieldName:e.aggFieldName,aggType:e.aggType,precision:e.precision};return e.subAgg&&(t.subAgg=e.subAgg),ge.toJson(t)}}],(n=[{key:"destroy",value:function(){Bc(Gc(t.prototype),"destroy",this).call(this),this.aggType=null}}])&&Dc(r.prototype,n),o&&Dc(r,o),t}();function Jc(e){return(Jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zc(e,t,r){return(zc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function qc(e){return(qc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yc(e,t){return(Yc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GeoHashGridAggParameter=Hc;var Qc=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=qc(t).call(this,e))||"object"!==Jc(o)&&"function"!=typeof o?Vc(n):o,e&&e.operateGeometry&&(r.operateGeometry=e.operateGeometry),e&&e.sourceGeometry&&(r.sourceGeometry=e.sourceGeometry),e&&e.operateGeometries&&(r.operateGeometries=e.operateGeometries),e&&e.sourceGeometries&&(r.sourceGeometries=e.sourceGeometries),e&&ge.extend(Vc(r),e),r.CLASS_NAME="SuperMap.GeometryOverlayAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yc(e,t)}(t,Ma),r=t,o=[{key:"toObject",value:function(e,t){for(var r in e)if("sourceGeometry"===r)t.sourceGeometry=Er.fromGeometry(e.sourceGeometry);else if("sourceGeometries"===r){for(var n=[],o=0;o<e.sourceGeometries.length;o++)n.push(Er.fromGeometry(e.sourceGeometries[o]));t.sourceGeometries=n}else if("operateGeometry"===r)t.operateGeometry=Er.fromGeometry(e.operateGeometry);else if("operateGeometries"===r){for(var i=[],a=0;a<e.operateGeometries.length;a++)i.push(Er.fromGeometry(e.operateGeometries[a]));t.operateGeometries=i}else t[r]=e[r]}}],(n=[{key:"destroy",value:function(){zc(qc(t.prototype),"destroy",this).call(this);var e=this;e.sourceGeometry&&(e.sourceGeometry.destroy(),e.sourceGeometry=null),e.sourceGeometries&&(e.sourceGeometries.destroy(),e.sourceGeometries=null),e.sourceGeometry&&(e.sourceGeometry.destroy(),e.sourceGeometry=null),e.operateGeometries&&(e.operateGeometries.destroy(),e.operateGeometries=null)}}])&&Wc(r.prototype,n),o&&Wc(r,o),t}();function Xc(e){return(Xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $c(e,t,r){return($c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ef(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ef(e){return(ef=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tf(e,t){return(tf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GeometryOverlayAnalystParameters=Qc;var rf=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=ef(t).call(this,e))||"object"!==Xc(o)&&"function"!=typeof o?Zc(n):o).points=null,r.zValues=null,e&&ge.extend(Zc(r),e),r.CLASS_NAME="SuperMap.GeometrySurfaceAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tf(e,t)}(t,Va),r=t,(n=[{key:"destroy",value:function(){$c(ef(t.prototype),"destroy",this).call(this);if(this.points){for(var e=0,r=this.points,n=r.length;e<n;e++)r[e].destroy();this.points=null}this.zValues=null}}])&&Kc(r.prototype,n),o&&Kc(r,o),t}();function nf(e){return(nf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function of(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function af(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sf(e,t,r){return(sf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function lf(e){return(lf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uf(e,t){return(uf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GeometrySurfaceAnalystParameters=rf;var cf=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=lf(t).call(this,e))||"object"!==nf(o)&&"function"!=typeof o?af(n):o).points=null,e&&ge.extend(af(r),e),r.CLASS_NAME="SuperMap.GeometryThiessenAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uf(e,t)}(t,es),r=t,o=[{key:"toObject",value:function(e,t){for(var r in e)"clipRegion"===r?t.clipRegion=Er.fromGeometry(e.clipRegion):t[r]=e[r]}}],(n=[{key:"destroy",value:function(){sf(lf(t.prototype),"destroy",this).call(this);if(this.points){for(var e=this.points.length-1;e>=0;e--)this.points[e].destroy();this.points=null}}}])&&of(r.prototype,n),o&&of(r,o),t}();function ff(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.GeometryThiessenAnalystParameters=cf;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var pf=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.sourceFilter=null,this.referenceFilter=null,this.spatialRelationType=null,this.isBorderInside=null,this.returnFeature=null,this.returnGeoRelatedOnly=null,this.startRecord=0,this.expectCount=500,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.GeoRelationAnalystParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.sourceFilter&&e.sourceFilter.destroy(),e.sourceFilter=null,e.referenceFilter&&e.referenceFilter.destroy(),e.referenceFilter=null,e.dataset=null,e.spatialRelationType=null,e.isBorderInside=null,e.returnFeature=null,e.returnGeoRelatedOnly=null,e.startRecord=null,e.expectCount=null}}])&&ff(t.prototype,r),n&&ff(t,n),e}();function hf(e){return(hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function df(e,t){return!t||"object"!==hf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vf(e,t,r){return(vf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function mf(e){return(mf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bf(e,t){return(bf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GeoRelationAnalystParameters=pf;var gf=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=df(this,mf(t).call(this,e,r))).CLASS_NAME="SuperMap.GeoRelationAnalystService",n}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bf(e,t)}(t,yo),r=t,(o=[{key:"destroy",value:function(){vf(mf(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof pf){var t=this;t.url=ge.urlPathAppend(t.url,"datasets/"+e.dataset+"/georelation");var r=n.Util.toJSON(e);t.url=ge.urlAppend(t.url,"returnContent=true"),t.request({method:"POST",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&yf(r.prototype,o),i&&yf(r,i),t}();function Sf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.GeoRelationAnalystService=gf;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var wf=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetNames=null,this.targetEpsgCode=null,this.targetPrj=null,this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.returnCountOnly=!1,this.maxFeatures=null,this.aggregations=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.GetFeaturesParametersBase"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.datasetNames=null,e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.maxFeatures=null,e.targetEpsgCode=null,e.targetPrj=null,e.aggregation&&(e.aggregation=null)}}])&&Sf(t.prototype,r),n&&Sf(t,n),e}();function Of(e){return(Of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cf(e,t,r){return(Cf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ef(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ef(e){return(Ef=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tf(e,t){return(Tf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GetFeaturesParametersBase=wf;var kf=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Ef(t).call(this,e))||"object"!==Of(o)&&"function"!=typeof o?Pf(n):o).getFeatureMode=t.getFeatureMode.BOUNDS,r.bounds=null,r.fields=null,r.attributeFilter=null,r.spatialQueryMode=u.CONTAIN,ge.extend(Pf(r),e),r.CLASS_NAME="SuperMap.GetFeaturesByBoundsParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tf(e,t)}(t,wf),r=t,o=[{key:"toJsonParameters",value:function(e){var r,n,o;return n={leftBottom:{x:e.bounds.left,y:e.bounds.bottom},rightTop:{x:e.bounds.right,y:e.bounds.top}},o={datasetNames:e.datasetNames,getFeatureMode:t.getFeatureMode.BOUNDS,bounds:n,spatialQueryMode:e.spatialQueryMode},e.fields&&((r=new Fo).name=e.datasetNames,r.fields=e.fields,o.queryParameter=r),e.attributeFilter&&(o.attributeFilter=e.attributeFilter,o.getFeatureMode=t.getFeatureMode.BOUNDS_ATTRIBUTEFILTER),e.maxFeatures&&!isNaN(e.maxFeatures)&&(o.maxFeatures=e.maxFeatures),e.targetEpsgCode&&(o.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(o.targetPrj=e.targetPrj),ge.toJSON(o)}}],(n=[{key:"destroy",value:function(){Cf(Ef(t.prototype),"destroy",this).call(this);var e=this;if(e.bounds&&(e.bounds.destroy(),e.bounds=null),e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.attributeFilter=null,e.spatialQueryMode=null,e.getFeatureMode=null}}])&&_f(r.prototype,n),o&&_f(r,o),t}();function xf(e){return(xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Af(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rf(e,t,r){return(Rf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Lf(e){return(Lf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mf(e,t){return(Mf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/kf.getFeatureMode={BOUNDS:"BOUNDS",BOUNDS_ATTRIBUTEFILTER:"BOUNDS_ATTRIBUTEFILTER"},n.GetFeaturesByBoundsParameters=kf;var Nf=function(e){function t(e,r){var n,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,n=!(a=Lf(t).call(this,e,r))||"object"!==xf(a)&&"function"!=typeof a?jf(i):a,r=r||{},n.returnContent=!0,n.fromIndex=0,n.toIndex=19,n.maxFeatures=null,n.format=o.GEOJSON,ge.extend(jf(n),r),n.url=ge.urlPathAppend(n.url,"featureResults"),n.CLASS_NAME="SuperMap.GetFeaturesServiceBase",n}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mf(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Rf(Lf(t.prototype),"destroy",this).call(this);var e=this;e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.maxFeatures=null,e.format=null}},{key:"processAsync",value:function(e){if(e){var t,r=this,n=!0;r.returnContent=e.returnContent,r.fromIndex=e.fromIndex,r.toIndex=e.toIndex,r.maxFeatures=e.maxFeatures,r.returnContent&&(r.url=ge.urlAppend(r.url,"returnContent="+r.returnContent),n=!1),null!=r.fromIndex&&null!=r.toIndex&&!isNaN(r.fromIndex)&&!isNaN(r.toIndex)&&r.fromIndex>=0&&r.toIndex>=0&&!n&&(r.url=ge.urlAppend(r.url,"fromIndex=".concat(r.fromIndex,"&toIndex=").concat(r.toIndex))),e.returnCountOnly&&(r.url=ge.urlAppend(r.url,"&returnCountOnly="+e.returnContent)),t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){if(e=ge.transformResult(e),this.format===o.GEOJSON&&e.features){var t=new Lr;e.features=t.toGeoJSON(e.features)}this.events.triggerEvent("processCompleted",{result:e})}}])&&Af(r.prototype,n),i&&Af(r,i),t}();function If(e){return(If="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Df(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ff(e,t){return!t||"object"!==If(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bf(e,t,r){return(Bf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Gf(e){return(Gf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uf(e,t){return(Uf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GetFeaturesServiceBase=Nf;var Hf=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ff(this,Gf(t).call(this,e,r))).CLASS_NAME="SuperMap.GetFeaturesByBoundsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uf(e,t)}(t,Nf),r=t,(n=[{key:"destroy",value:function(){Bf(Gf(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return kf.toJsonParameters(e)}}])&&Df(r.prototype,n),o&&Df(r,o),t}();function Jf(e){return(Jf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zf(e,t,r){return(zf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function qf(e){return(qf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yf(e,t){return(Yf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GetFeaturesByBoundsService=Hf;var Qf=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=qf(t).call(this,e))||"object"!==Jf(o)&&"function"!=typeof o?Vf(n):o).bufferDistance=null,r.attributeFilter=null,r.geometry=null,r.fields=null,ge.extend(Vf(r),e),r.CLASS_NAME="SuperMap.GetFeaturesByBufferParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yf(e,t)}(t,wf),r=t,o=[{key:"toJsonParameters",value:function(e){var t,r,n;return n=Er.fromGeometry(e.geometry),r={datasetNames:e.datasetNames,getFeatureMode:"BUFFER",bufferDistance:e.bufferDistance,geometry:n},e.fields&&((t=new Fo).name=e.datasetNames,t.fields=e.fields,r.queryParameter=t),e.attributeFilter&&(r.attributeFilter=e.attributeFilter,r.getFeatureMode="BUFFER_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(r.maxFeatures=e.maxFeatures),e.targetEpsgCode&&(r.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(r.targetPrj=e.targetPrj),ge.toJSON(r)}}],(n=[{key:"destroy",value:function(){zf(qf(t.prototype),"destroy",this).call(this);var e=this;if(e.bufferDistance=null,e.attributeFilter=null,e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.geometry&&(e.geometry.destroy(),e.geometry=null)}}])&&Wf(r.prototype,n),o&&Wf(r,o),t}();function Xf(e){return(Xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zf(e,t){return!t||"object"!==Xf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $f(e,t,r){return($f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ep(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ep(e){return(ep=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tp(e,t){return(tp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GetFeaturesByBufferParameters=Qf;var rp=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Zf(this,ep(t).call(this,e,r))).CLASS_NAME="SuperMap.GetFeaturesByBufferService",n}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tp(e,t)}(t,Nf),r=t,(o=[{key:"destroy",value:function(){$f(ep(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof Qf)return n.GetFeaturesByBufferParameters.toJsonParameters(e)}}])&&Kf(r.prototype,o),i&&Kf(r,i),t}();function np(e){return(np="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function op(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ip(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ap(e,t,r){return(ap="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sp(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function sp(e){return(sp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lp(e,t){return(lp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GetFeaturesByBufferService=rp;var up=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=sp(t).call(this,e))||"object"!==np(o)&&"function"!=typeof o?ip(n):o).getFeatureMode="SPATIAL",r.geometry=null,r.fields=null,r.attributeFilter=null,r.spatialQueryMode=u.CONTAIN,ge.extend(ip(r),e),r.CLASS_NAME="SuperMap.GetFeaturesByGeometryParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lp(e,t)}(t,wf),r=t,o=[{key:"toJsonParameters",value:function(e){var t,r,n;return r=Er.fromGeometry(e.geometry),n={datasetNames:e.datasetNames,getFeatureMode:"SPATIAL",geometry:r,spatialQueryMode:e.spatialQueryMode},e.fields&&((t=new Fo).name=e.datasetNames,t.fields=e.fields,n.queryParameter=t),e.attributeFilter&&(n.attributeFilter=e.attributeFilter,n.getFeatureMode="SPATIAL_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(n.maxFeatures=e.maxFeatures),e.targetEpsgCode&&(n.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(n.targetPrj=e.targetPrj),ge.toJSON(n)}}],(n=[{key:"destroy",value:function(){ap(sp(t.prototype),"destroy",this).call(this);var e=this;if(e.geometry&&(e.geometry.destroy(),e.geometry=null),e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.attributeFilter=null,e.spatialQueryMode=null,e.getFeatureMode=null}}])&&op(r.prototype,n),o&&op(r,o),t}();function cp(e){return(cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pp(e,t){return!t||"object"!==cp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hp(e,t,r){return(hp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yp(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function yp(e){return(yp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dp(e,t){return(dp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GetFeaturesByGeometryParameters=up;var vp=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=pp(this,yp(t).call(this,e,r))).CLASS_NAME="SuperMap.GetFeaturesByGeometryService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dp(e,t)}(t,Nf),r=t,(n=[{key:"destroy",value:function(){hp(yp(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return up.toJsonParameters(e)}}])&&fp(r.prototype,n),o&&fp(r,o),t}();function mp(e){return(mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sp(e,t,r){return(Sp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wp(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function wp(e){return(wp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Op(e,t){return(Op=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GetFeaturesByGeometryService=vp;var _p=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=wp(t).call(this,e))||"object"!==mp(o)&&"function"!=typeof o?gp(n):o).getFeatureMode="ID",r.IDs=null,r.fields=null,ge.extend(gp(r),e),r.CLASS_NAME="SuperMap.GetFeaturesByIDsParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Op(e,t)}(t,wf),r=t,o=[{key:"toJsonParameters",value:function(e){var t,r;return t={datasetNames:e.datasetNames,getFeatureMode:"ID",ids:e.IDs},e.fields&&((r=new Fo).name=e.datasetNames,r.fields=e.fields,t.queryParameter=r),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),ge.toJSON(t)}}],(n=[{key:"destroy",value:function(){Sp(wp(t.prototype),"destroy",this).call(this);var e=this;if(e.IDs=null,e.getFeatureMode=null,e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}}}])&&bp(r.prototype,n),o&&bp(r,o),t}();function Pp(e){return(Pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ep(e,t){return!t||"object"!==Pp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tp(e,t,r){return(Tp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kp(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function kp(e){return(kp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xp(e,t){return(xp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GetFeaturesByIDsParameters=_p;var Ap=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ep(this,kp(t).call(this,e,r))).CLASS_NAME="SuperMap.GetFeaturesByIDsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xp(e,t)}(t,Nf),r=t,(n=[{key:"destroy",value:function(){Tp(kp(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return _p.toJsonParameters(e)}}])&&Cp(r.prototype,n),o&&Cp(r,o),t}();function jp(e){return(jp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mp(e,t,r){return(Mp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Np(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Np(e){return(Np=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ip(e,t){return(Ip=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GetFeaturesByIDsService=Ap;var Dp=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Np(t).call(this,e))||"object"!==jp(o)&&"function"!=typeof o?Lp(n):o).getFeatureMode="SQL",r.queryParameter=null,ge.extend(Lp(r),e),r.CLASS_NAME="SuperMap.GetFeaturesBySQLParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ip(e,t)}(t,wf),r=t,o=[{key:"toJsonParameters",value:function(e){var t={datasetNames:e.datasetNames,getFeatureMode:"SQL",queryParameter:e.queryParameter};return e.maxFeatures&&!isNaN(e.maxFeatures)&&(t.maxFeatures=e.maxFeatures),e.aggregations&&(t.aggregations=e.aggregations),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),ge.toJSON(t)}}],(n=[{key:"destroy",value:function(){Mp(Np(t.prototype),"destroy",this).call(this);this.getFeatureMode=null,this.queryParameter&&(this.queryParameter.destroy(),this.queryParameter=null)}}])&&Rp(r.prototype,n),o&&Rp(r,o),t}();function Fp(e){return(Fp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gp(e,t){return!t||"object"!==Fp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Up(e,t,r){return(Up="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hp(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Hp(e){return(Hp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jp(e,t){return(Jp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GetFeaturesBySQLParameters=Dp;var Wp=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Gp(this,Hp(t).call(this,e,r))).CLASS_NAME="SuperMap.GetFeaturesBySQLService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jp(e,t)}(t,Nf),r=t,(n=[{key:"destroy",value:function(){Up(Hp(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return Dp.toJsonParameters(e)}}])&&Bp(r.prototype,n),o&&Bp(r,o),t}();function Vp(e){return(Vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yp(e,t,r){return(Yp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qp(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Qp(e){return(Qp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xp(e,t){return(Xp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GetFeaturesBySQLService=Wp;var Kp=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=Qp(t).call(this,e,r))||"object"!==Vp(i)&&"function"!=typeof i?qp(o):i).datasource=null,n.dataset=null,r&&ge.extend(qp(n),r),n.CLASS_NAME="SuperMap.GetFieldsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xp(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Yp(Qp(t.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"processAsync",value:function(){var e=this;e.url=ge.urlPathAppend(e.url,"datasources/".concat(e.datasource,"/datasets/").concat(e.dataset,"/fields")),e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&zp(r.prototype,n),o&&zp(r,o),t}();function Zp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.GetFieldsService=Kp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.GetGridCellInfosParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null}}])&&Zp(t.prototype,r),n&&Zp(t,n),e}();function eh(e){return(eh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function th(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nh(e,t,r){return(nh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oh(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function oh(e){return(oh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ih(e,t){return(ih=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GetGridCellInfosParameters=$p;var ah=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=oh(t).call(this,e,r))||"object"!==eh(i)&&"function"!=typeof i?rh(o):i).datasetName=null,n.dataSourceName=null,n.datasetType=null,n.X=null,n.Y=null,r&&ge.extend(rh(n),r),n.CLASS_NAME="SuperMap.GetGridCellInfosService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ih(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){nh(oh(t.prototype),"destroy",this).call(this);var e=this;e.X=null,e.Y=null,e.datasetName=null,e.dataSourceName=null,e.datasetType=null}},{key:"processAsync",value:function(e){if(e instanceof $p){ge.extend(this,e);var t=this;t.url=ge.urlPathAppend(t.url,"datasources/".concat(t.dataSourceName,"/datasets/").concat(t.datasetName)),t.queryRequest(t.getDatasetInfoCompleted,t.getDatasetInfoFailed)}}},{key:"queryRequest",value:function(e,t){this.request({method:"GET",data:null,scope:this,success:e,failure:t})}},{key:"getDatasetInfoCompleted",value:function(e){e=ge.transformResult(e),this.datasetType=e.datasetInfo.type,this.queryGridInfos()}},{key:"queryGridInfos",value:function(){var e=this;e.url=ge.urlPathAppend(e.url,"GRID"==e.datasetType?"gridValue":"imageValue"),null!=e.X&&null!=e.Y&&(e.url=ge.urlAppend(e.url,"x=".concat(e.X,"&y=").concat(e.Y))),e.queryRequest(e.serviceProcessCompleted,e.serviceProcessFailed)}},{key:"getDatasetInfoFailed",value:function(e){this.serviceProcessFailed(e)}}])&&th(r.prototype,n),o&&th(r,o),t}();function sh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.GetGridCellInfosService=ah;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var lh=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.srcData=t,this.targetData=r,this.CLASS_NAME="SuperMap.ThemeMemoryData"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.srcData=null,this.targetData=null}},{key:"toJSON",value:function(){if(this.srcData&&this.targetData){for(var e="",t=Math.min(this.srcData.length,this.targetData.length),r=0;r<t;r++)e+="'"+this.srcData[r]+"':'"+this.targetData[r]+"',";return r>0&&(e=e.substring(0,e.length-1)),"{"+e+"}"}return null}}])&&sh(t.prototype,r),n&&sh(t,n),e}();function uh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ThemeMemoryData=lh;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ch=function(){function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.memoryData=null,this.type=t,r&&ge.extend(this,r),this.CLASS_NAME="SuperMap.Theme"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.memoryData&&(this.memoryData.destroy(),this.memoryData=null),this.type=null}},{key:"toServerJSONObject",value:function(){}}])&&uh(t.prototype,r),n&&uh(t,n),e}();function fh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.Theme=ch;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ph=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.align=O.BASELINECENTER,this.backColor=new cr(255,255,255),this.foreColor=new cr(0,0,0),this.backOpaque=!1,this.sizeFixed=!0,this.fontHeight=6,this.fontWidth=0,this.fontWeight=400,this.fontName="Times New Roman",this.bold=!1,this.italic=!1,this.italicAngle=0,this.shadow=!1,this.strikeout=!1,this.outline=!1,this.opaqueRate=0,this.underline=!1,this.rotation=0,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ServerTextStyle"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){var r=new e(t);return ge.copy(r,t),r.backColor=cr.fromJson(t.backColor),r.foreColor=cr.fromJson(t.foreColor),r}}],(r=[{key:"destroy",value:function(){var e=this;e.align=null,e.backColor&&(e.backColor.destroy(),e.backColor=null),e.foreColor&&(e.foreColor.destroy(),e.foreColor=null),e.backOpaque=null,e.sizeFixed=null,e.fontHeight=null,e.fontWidth=null,e.fontWeight=null,e.fontName=null,e.bold=null,e.italic=null,e.italicAngle=null,e.shadow=null,e.strikeout=null,e.outline=null,e.opaqueRate=null,e.underline=null,e.rotation=null}}])&&fh(t.prototype,r),n&&fh(t,n),e}();function hh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ServerTextStyle=ph;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var yh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.end=0,this.start=0,this.visible=!0,this.style=new ph,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return ge.copy(r,t),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}}])&&hh(t.prototype,r),n&&hh(t,n),e}();function dh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ThemeLabelItem=yh;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var vh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.style=new pr,this.unique=null,this.visible=!0,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ThemeUniqueItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){var r=new e;return ge.copy(r,t),r.style=pr.fromJson(t.style),r}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.unique=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=ge.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&dh(t.prototype,r),n&&dh(t,n),e}();function mh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ThemeUniqueItem=vh;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var bh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.flowEnabled=!1,this.leaderLineDisplayed=!1,this.leaderLineStyle=new pr,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ThemeFlow"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return ge.copy(r,t),r.leaderLineStyle=pr.fromJson(t.leaderLineStyle),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.flowEnabled=null,e.leaderLineDisplayed=null,e.leaderLineStyle&&(e.leaderLineStyle.destroy(),e.leaderLineStyle=null)}}])&&mh(t.prototype,r),n&&mh(t,n),e}();function gh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ThemeFlow=bh;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Sh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.offsetFixed=!1,this.offsetX="0.0",this.offsetY="0.0",t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ThemeOffset"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return ge.copy(r,t),r}}}],(r=[{key:"destroy",value:function(){this.offsetFixed=null,this.offsetX=null,this.offsetY=null}}])&&gh(t.prototype,r),n&&gh(t,n),e}();function wh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ThemeOffset=Sh;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Oh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultStyle=null,this.separator=null,this.separatorEnabled=!1,this.splitIndexes=null,this.styles=new ph,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.LabelMixedTextStyle"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e,n=t.styles;if(ge.copy(r,t),r.defaultStyle=new ph(t.defaultStyle),n){r.styles=[];for(var o=0,i=n.length;o<i;o++)r.styles.push(new ph(n[o]))}return r}}}],(r=[{key:"destroy",value:function(){var e=this;if(e.defaultStyle&&(e.defaultStyle.destroy(),e.defaultStyle=null),e.separator=null,e.separatorEnabled=null,e.splitIndexes&&(e.splitIndexes=null),e.styles){for(var t=0,r=e.styles,n=r.length;t<n;t++)r[t].destroy();e.styles=null}}}])&&wh(t.prototype,r),n&&wh(t,n),e}();function _h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.LabelMixedTextStyle=Oh;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ph=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxTextHeight=0,this.maxTextWidth=0,this.minTextHeight=0,this.minTextWidth=0,this.uniformStyle=new ph,this.uniformMixedStyle=null,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelText"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return ge.copy(r,t),r.uniformStyle=ph.fromObj(t.uniformStyle),r.uniformMixedStyle=Oh.fromObj(t.uniformMixedStyle),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.maxTextHeight=null,e.maxTextWidth=null,e.minTextHeight=null,e.minTextWidth=null,e.uniformStyle&&(e.uniformStyle.destroy(),e.uniformStyle=null),e.uniformMixedStyle&&(e.uniformMixedStyle.destroy(),e.uniformMixedStyle=null)}}])&&_h(t.prototype,r),n&&_h(t,n),e}();function Ch(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ThemeLabelText=Ph;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Eh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAlongLine=!0,this.alongLineDirection=P.LB_TO_RT,this.angleFixed=!1,this.repeatedLabelAvoided=!1,this.repeatIntervalFixed=!1,this.labelRepeatInterval=0,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelAlongLine"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return ge.copy(r,t),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.isAlongLine=null,e.alongLineDirection=null,e.angleFixed=null,e.repeatedLabelAvoided=null,e.repeatIntervalFixed=null,e.labelRepeatInterval=null}}])&&Ch(t.prototype,r),n&&Ch(t,n),e}();function Th(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ThemeLabelAlongLine=Eh;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var kh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.labelBackShape=C.NONE,this.backStyle=new pr,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelBackground"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return r.labelBackShape=t.labelBackShape,r.backStyle=pr.fromJson(t.backStyle),r}}}],(r=[{key:"destroy",value:function(){this.labelBackShape=null,this.backStyle&&(this.backStyle.destroy(),this.backStyle=null)}}])&&Th(t.prototype,r),n&&Th(t,n),e}();function xh(e){return(xh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ah(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rh(e,t,r){return(Rh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lh(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Lh(e){return(Lh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mh(e,t){return(Mh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.ThemeLabelBackground=kh;var Nh=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Lh(t).call(this,"LABEL",e))||"object"!==xh(o)&&"function"!=typeof o?jh(n):o).alongLine=new Eh,r.background=new kh,r.flow=new bh,r.items=null,r.uniqueItems=null,r.labelExpression=null,r.labelOverLengthMode=E.NONE,r.matrixCells=null,r.maxLabelLength=256,r.numericPrecision=0,r.offset=new Sh,r.overlapAvoided=!0,r.rangeExpression=null,r.uniqueExpression=null,r.smallGeometryLabeled=!1,r.text=new Ph,r.textSpace=0,e&&ge.extend(jh(r),e),r.CLASS_NAME="SuperMap.ThemeLabel",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mh(e,t)}(t,ch),r=t,o=[{key:"fromObj",value:function(e){if(e){var r=new t,n=e.items,o=e.uniqueItems,i=e.matrixCells;if(e.matrixCells=null,ge.copy(r,e),r.alongLine=Eh.fromObj(e),r.background=kh.fromObj(e),r.flow=new bh({flowEnabled:e.flowEnabled,leaderLineDisplayed:e.leaderLineDisplayed,leaderLineStyle:e.leaderLineStyle}),n){r.items=[];for(var a=0,s=n.length;a<s;a++)r.items.push(yh.fromObj(n[a]))}if(o){r.uniqueItems=[];for(var l=0,u=o.length;l<u;l++)r.uniqueItems.push(vh.fromObj(o[l]))}if(i){r.matrixCells=[];for(var c=0,f=i.length;c<f;c++);}return r.offset=Sh.fromObj(e),r.text=Ph.fromObj(e),r}}}],(n=[{key:"destroy",value:function(){Rh(Lh(t.prototype),"destroy",this).call(this);var e=this;if(e.alongLine=null,e.background&&(e.background.destroy(),e.background=null),e.flow=null,e.items){for(var r=0,n=e.items,o=n.length;r<o;r++)n[r].destroy();e.items=null}if(e.uniqueItems){for(var i=0,a=e.uniqueItems,s=a.length;i<s;i++)a[i].destory();e.uniqueItems=null}e.labelExpression=null,e.labelOverLengthMode=null,e.matrixCells=null,e.maxLabelLength=null,e.numericPrecision=null,e.overlapAvoided=null,e.rangeExpression=null,e.uniqueExpression=null,e.offset&&(e.offset.destroy(),e.offset=null),e.overlapAvoided=null,e.smallGeometryLabeled=null,e.text&&(e.text.destroy(),e.text=null),e.textSpace=null}},{key:"toJSON",value:function(){return ge.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,e.memoryData=this.memoryData,this.alongLine&&(e.alongLine=this.alongLine.isAlongLine,e.alongLineDirection=this.alongLine.alongLineDirection,e.angleFixed=this.alongLine.angleFixed,e.isLabelRepeated=this.alongLine.isLabelRepeated,e.labelRepeatInterval=this.alongLine.labelRepeatInterval,e.repeatedLabelAvoided=this.alongLine.repeatedLabelAvoided,e.repeatIntervalFixed=this.alongLine.repeatIntervalFixed),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.flow&&(e.flowEnabled=this.flow.flowEnabled,e.leaderLineDisplayed=this.flow.leaderLineDisplayed,e.leaderLineStyle=this.flow.leaderLineStyle),this.text&&(e.maxTextHeight=this.text.maxTextHeight,e.maxTextWidth=this.text.maxTextWidth,e.minTextHeight=this.text.minTextHeight,e.minTextWidth=this.text.minTextWidth,e.uniformStyle=this.text.uniformStyle,e.uniformMixedStyle=this.text.uniformMixedStyle),this.background&&(e.labelBackShape=this.background.labelBackShape,e.backStyle=this.background.backStyle),e.labelOverLengthMode=this.labelOverLengthMode,e.maxLabelLength=this.maxLabelLength,e.smallGeometryLabeled=this.smallGeometryLabeled,e.rangeExpression=this.rangeExpression,e.uniqueExpression=this.uniqueExpression,e.numericPrecision=this.numericPrecision,e.items=this.items,e.uniqueItems=this.uniqueItems,e.labelExpression=this.labelExpression,e.overlapAvoided=this.overlapAvoided,e.matrixCells=this.matrixCells,e.textSpace=this.textSpace,e}}])&&Ah(r.prototype,n),o&&Ah(r,o),t}();function Ih(e){return(Ih="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bh(e,t,r){return(Bh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gh(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Gh(e){return(Gh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uh(e,t){return(Uh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.ThemeLabel=Nh;var Hh=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Gh(t).call(this,"UNIQUE",e))||"object"!==Ih(o)&&"function"!=typeof o?Fh(n):o).defaultStyle=new pr,r.items=null,r.uniqueExpression=null,r.colorGradientType=w.YELLOW_RED,e&&ge.extend(Fh(r),e),r.CLASS_NAME="SuperMap.ThemeUnique",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uh(e,t)}(t,ch),r=t,o=[{key:"fromObj",value:function(e){var r=new t,n=e.items,o=n?n.length:0;ge.extend(r,e),r.items=[],r.defaultStyle=pr.fromJson(e.defaultStyle);for(var i=0;i<o;i++)r.items.push(vh.fromObj(n[i]));return r}}],(n=[{key:"destroy",value:function(){Bh(Gh(t.prototype),"destroy",this).call(this);var e=this;if(e.uniqueExpression=null,e.colorGradientType=null,e.items){if(e.items.length>0)for(var r in e.items)e.items[r].destroy(),e.items[r]=null;e.items=null}e.defaultStyle&&(e.defaultStyle.destroy(),e.defaultStyle=null)}},{key:"toServerJSONObject",value:function(){var e={};if((e=ge.copyAttributes(e,this)).defaultStyle&&e.defaultStyle.toServerJSONObject&&(e.defaultStyle=e.defaultStyle.toServerJSONObject()),e.items){for(var t=[],r=e.items.length,n=0;n<r;n++)t.push(e.items[n].toServerJSONObject());e.items=t}return e}}])&&Dh(r.prototype,n),o&&Dh(r,o),t}();function Jh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ThemeUnique=Hh;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Wh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.axesColor=new cr(0,0,0),this.axesDisplayed=!1,this.axesGridDisplayed=!1,this.axesTextDisplayed=!1,this.axesTextStyle=new ph,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphAxes"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return ge.copy(r,t),r.axesColor=cr.fromJson(t.axesColor),r.axesTextStyle=ph.fromObj(t.axesTextStyle),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.axesColor&&(e.axesColor.destroy(),e.axesColor=null),e.axesDisplayed=null,e.axesGridDisplayed=null,e.axesTextDisplayed=null,e.axesTextStyle&&(e.axesTextStyle.destroy(),e.axesTextStyle=null)}}])&&Jh(t.prototype,r),n&&Jh(t,n),e}();function Vh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ThemeGraphAxes=Wh;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxGraphSize=0,this.minGraphSize=0,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphSize"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){var r=new e;return ge.copy(r,t),r}}],(r=[{key:"destroy",value:function(){this.maxGraphSize=null,this.minGraphSize=null}}])&&Vh(t.prototype,r),n&&Vh(t,n),e}();function qh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ThemeGraphSize=zh;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Yh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.graphTextDisplayed=!1,this.graphTextFormat=d.CAPTION,this.graphTextStyle=new ph,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphText"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){var r=new e;return ge.copy(r,t),r.graphTextStyle=ph.fromObj(t.graphTextStyle),r}}],(r=[{key:"destroy",value:function(){var e=this;e.graphTextDisplayed=null,e.graphTextFormat=null,e.graphTextStyle&&(e.graphTextStyle.destroy(),e.graphTextStyle=null)}}])&&qh(t.prototype,r),n&&qh(t,n),e}();function Qh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ThemeGraphText=Yh;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Xh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=new pr,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return ge.copy(r,t),r.uniformStyle=pr.fromJson(t.uniformStyle),r}}}],(r=[{key:"destroy",value:function(){this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=null}}])&&Qh(t.prototype,r),n&&Qh(t,n),e}();function Kh(e){return(Kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ey(e,t,r){return(ey="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ty(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ty(e){return(ty=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ry(e,t){return(ry=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.ThemeGraphItem=Xh;var ny=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=ty(t).call(this,"GRAPH",e))||"object"!==Kh(o)&&"function"!=typeof o?$h(n):o).barWidth=0,r.flow=new bh,r.graduatedMode=b.CONSTANT,r.graphAxes=new Wh,r.graphSize=new zh,r.graphSizeFixed=!1,r.graphText=new Yh,r.graphType=v.AREA,r.graphAxesTextDisplayMode=m.NONE,r.items=null,r.memoryKeys=null,r.negativeDisplayed=!1,r.offset=new Sh,r.overlapAvoided=!0,r.roseAngle=0,r.startAngle=0,e&&ge.extend($h(r),e),r.CLASS_NAME="SuperMap.ThemeGraph",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ry(e,t)}(t,ch),r=t,o=[{key:"fromObj",value:function(e){var r=new t,n=e.items,o=n?n.length:0;ge.copy(r,e),r.items=[],r.flow=bh.fromObj(e),r.graphAxes=Wh.fromObj(e),r.graphSize=zh.fromObj(e),r.graphText=Yh.fromObj(e),r.offset=Sh.fromObj(e);for(var i=0;i<o;i++)r.items.push(Xh.fromObj(n[i]));return r}}],(n=[{key:"destroy",value:function(){ey(ty(t.prototype),"destroy",this).call(this);var e=this;if(e.barWidth=null,e.flow&&(e.flow.destroy(),e.flow=null),e.graduatedMode=null,e.graphAxes&&(e.graphAxes.destroy(),e.graphAxes=null),e.graphSize&&(e.graphSize.destroy(),e.graphSize=null),e.graphSizeFixed=null,e.graphText&&(e.graphText.destroy(),e.graphText=null),e.graphType=null,e.items){for(var r=0,n=e.items,o=n.length;r<o;r++)n[r].destroy();e.items=null}e.memoryKeys=null,e.negativeDisplayed=null,e.offset&&(e.offset.destroy(),e.offset=null),e.overlapAvoided=null,e.roseAngle=null,e.startAngle=null,e.graphAxesTextDisplayMode=null}},{key:"toJSON",value:function(){return ge.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,this.graphText&&(e.graphTextDisplayed=this.graphText.graphTextDisplayed,e.graphTextFormat=this.graphText.graphTextFormat,e.graphTextStyle=this.graphText.graphTextStyle),this.flow&&(e.flowEnabled=this.flow.flowEnabled,e.leaderLineDisplayed=this.flow.leaderLineDisplayed,e.leaderLineStyle=this.flow.leaderLineStyle),this.graphAxes&&(e.axesColor=this.graphAxes.axesColor,e.axesDisplayed=this.graphAxes.axesDisplayed,e.axesGridDisplayed=this.graphAxes.axesGridDisplayed,e.axesTextDisplayed=this.graphAxes.axesTextDisplayed,e.axesTextStyle=this.graphAxes.axesTextStyle),this.graphSize&&(e.maxGraphSize=this.graphSize.maxGraphSize,e.minGraphSize=this.graphSize.minGraphSize),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),e.barWidth=this.barWidth,e.graduatedMode=this.graduatedMode,e.graphSizeFixed=this.graphSizeFixed,e.graphType=this.graphType,e.graphAxesTextDisplayMode=this.graphAxesTextDisplayMode,e.items=this.items,e.memoryKeys=this.memoryKeys,e.negativeDisplayed=this.negativeDisplayed,e.overlapAvoided=this.overlapAvoided,e.roseAngle=this.roseAngle,e.startAngle=this.startAngle,e}}])&&Zh(r.prototype,n),o&&Zh(r,o),t}();function oy(e){return(oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ay(e){return(ay=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ly(e,t){return(ly=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.ThemeGraph=ny;var uy=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=ay(t).call(this,"DOTDENSITY",e))||"object"!==oy(o)&&"function"!=typeof o?sy(n):o).dotExpression=null,r.style=new pr,r.value=null,e&&ge.extend(sy(r),e),r.CLASS_NAME="SuperMap.ThemeDotDensity",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ly(e,t)}(t,ch),r=t,o=[{key:"fromObj",value:function(e){if(e){var r=new t;return ge.copy(r,e),r.style=pr.fromJson(e.style),r}}}],(n=[{key:"destroy",value:function(){var e=this;e.dotExpression=null,e.value=null,e.style&&(e.style.destroy(),e.style=null)}},{key:"toServerJSONObject",value:function(){var e={};return(e=ge.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&iy(r.prototype,n),o&&iy(r,o),t}();function cy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ThemeDotDensity=uy;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.negativeDisplayed=!1,this.negativeStyle=new pr,this.positiveStyle=new pr,this.zeroDisplayed=!1,this.zeroStyle=new pr,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraduatedSymbolStyle"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return ge.copy(r,t),r.negativeStyle=pr.fromJson(t.negativeStyle),r.positiveStyle=pr.fromJson(t.positiveStyle),r.zeroStyle=pr.fromJson(t.zeroStyle),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.negativeDisplayed=null,e.negativeStyle=null,e.positiveStyle=null,e.zeroDisplayed=null,e.zeroStyle=null}}])&&cy(t.prototype,r),n&&cy(t,n),e}();function py(e){return(py="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dy(e,t,r){return(dy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vy(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function vy(e){return(vy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function my(e,t){return(my=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.ThemeGraduatedSymbolStyle=fy;var by=function(e){function t(e){var r,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(r=!(i=vy(t).call(this,"GRADUATEDSYMBOL",e))||"object"!==py(i)&&"function"!=typeof i?yy(o):i).baseValue=0,r.expression=null,r.flow=new bh,r.graduatedMode=n.GraduatedMode.CONSTAN,r.offset=new Sh,r.style=new fy,e&&ge.extend(yy(r),e),r.CLASS_NAME="SuperMap.ThemeGraduatedSymbol",r}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&my(e,t)}(t,ch),r=t,i=[{key:"fromObj",value:function(e){if(e){var t=new n.ThemeGraduatedSymbol;return ge.copy(t,e),t.flow=bh.fromObj(e),t.offset=Sh.fromObj(e),t.style=fy.fromObj(e),t}}}],(o=[{key:"destroy",value:function(){dy(vy(t.prototype),"destroy",this).call(this);var e=this;e.expression=null,e.flow&&(e.flow.destroy(),e.flow=null),e.graduatedMode=b.CONSTANT,e.offset&&(e.offset.destroy(),e.offset=null),e.style&&(e.style.destroy(),e.style=null)}},{key:"toJSON",value:function(){return ge.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,e.memoryData=this.memoryData,e.baseValue=this.baseValue,e.expression=this.expression,e.graduatedMode=this.graduatedMode,this.flow&&(e.flowEnabled=this.flow.flowEnabled,e.leaderLineDisplayed=this.flow.leaderLineDisplayed,e.leaderLineStyle=this.flow.leaderLineStyle),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.style&&(e.negativeStyle=this.style.negativeStyle,e.negativeDisplayed=this.style.negativeDisplayed,e.positiveStyle=this.style.positiveStyle,e.zeroDisplayed=this.style.zeroDisplayed,e.zeroStyle=this.style.zeroStyle),e}}])&&hy(r.prototype,o),i&&hy(r,i),t}();function gy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ThemeGraduatedSymbol=by;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Sy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.end=0,this.start=0,this.style=new pr,this.visible=!0,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ThemeRangeItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return ge.copy(r,t),r.style=pr.fromJson(t.style),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=ge.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&gy(t.prototype,r),n&&gy(t,n),e}();function wy(e){return(wy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Py(e,t,r){return(Py="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cy(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Cy(e){return(Cy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ey(e,t){return(Ey=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.ThemeRangeItem=Sy;var Ty=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Cy(t).call(this,"RANGE",e))||"object"!==wy(o)&&"function"!=typeof o?_y(n):o).precision="1.0E-12",r.items=null,r.rangeExpression=null,r.rangeMode=g.EQUALINTERVAL,r.rangeParameter=0,r.colorGradientType=w.YELLOW_RED,e&&ge.extend(_y(r),e),r.CLASS_NAME="SuperMap.ThemeRange",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ey(e,t)}(t,ch),r=t,o=[{key:"fromObj",value:function(e){if(e){var r=new t;ge.copy(r,e);var n=e.items,o=n?n.length:0;r.items=[];for(var i=0;i<o;i++)r.items.push(Sy.fromObj(n[i]));return r}}}],(n=[{key:"destroy",value:function(){Py(Cy(t.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var r in e.items)e.items[r].destroy(),e.items[r]=null;e.items=null}e.rangeExpression=null,e.rangeMode=null,e.rangeParameter=null,e.colorGradientType=null}}])&&Oy(r.prototype,n),o&&Oy(r,o),t}();function ky(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ThemeRange=Ty;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.bounds=null,this.caption=null,this.description=null,this.name=null,this.queryable=null,this.subLayers=null,this.type=null,this.visible=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.UGCLayer"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){ge.reset(this)}},{key:"fromJson",value:function(e){e=e||{},ge.extend(this,e);var t=this.bounds;t&&(this.bounds=new _e(t.leftBottom.x,t.leftBottom.y,t.rightTop.x,t.rightTop.y))}},{key:"toServerJSONObject",value:function(){var e={};return(e=ge.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e}}])&&ky(t.prototype,r),n&&ky(t,n),e}();function Ay(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.UGCLayer=xy;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var jy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.allowPointOverlap=!0,this.allowPointWithTextDisplay=!0,this.allowTextOverlap=!1,this.allowTextAndPointOverlap=!0,this.allowThemeGraduatedSymbolOverlap=!1,this.allowThemeGraphOverlap=!1,this.horizontalOverlappedSpaceSize=0,this.verticalOverlappedSpaceSize=0,ge.extend(this,t),this.ugcLayer=new xy(t),this.CLASS_NAME="SuperMap.OverlapDisplayedOptions"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){ge.reset(this)}},{key:"fromJson",value:function(e){this.ugcLayer.fromJson.apply(this,[e])}},{key:"toServerJSONObject",value:function(){return this.ugcLayer.toServerJSONObject.apply(this,arguments)}},{key:"toString",value:function(){var e=this.ugcLayer.toServerJSONObject.apply(this,arguments),t="{";for(var r in e)e.hasOwnProperty(r)&&(t+="'"+r+"':"+e[r]+",");return t=t.substr(0,t.length-1),t+="}"}}])&&Ay(t.prototype,r),n&&Ay(t,n),e}();function Ry(e){return(Ry="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ly(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function My(e,t){return!t||"object"!==Ry(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ny(e,t,r){return(Ny="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Iy(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Iy(e){return(Iy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dy(e,t){return(Dy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.OverlapDisplayedOptions=jy;var Fy=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(r=My(this,Iy(t).call(this,e))).completeLineSymbolDisplayed=null,r.maxScale=null,r.minScale=null,r.minVisibleGeometrySize=null,r.opaqueRate=null,r.symbolScalable=null,r.symbolScale=null,r.overlapDisplayed=null,r.overlapDisplayedOptions=null,r.CLASS_NAME="SuperMap.UGCMapLayer",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dy(e,t)}(t,xy),r=t,(n=[{key:"destroy",value:function(){Ny(Iy(t.prototype),"destroy",this).call(this),ge.reset(this)}},{key:"fromJson",value:function(e){Ny(Iy(t.prototype),"fromJson",this).call(this,e)}},{key:"toServerJSONObject",value:function(){return Ny(Iy(t.prototype),"toServerJSONObject",this).call(this)}}])&&Ly(r.prototype,n),o&&Ly(r,o),t}();function By(e){return(By="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Uy(e,t){return!t||"object"!==By(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hy(e,t,r){return(Hy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jy(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Jy(e){return(Jy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wy(e,t){return(Wy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.UGCMapLayer=Fy;var Vy=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(r=Uy(this,Jy(t).call(this,e))).datasetInfo=null,r.displayFilter=null,r.joinItems=null,r.representationField=null,r.ugcLayerType=null,r.CLASS_NAME="SuperMap.UGCSubLayer",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wy(e,t)}(t,Fy),r=t,(n=[{key:"fromJson",value:function(e){if(Hy(Jy(t.prototype),"fromJson",this).call(this,e),this.datasetInfo&&(this.datasetInfo=new Ra(this.datasetInfo)),this.joinItems&&this.joinItems.length){for(var r=[],n=0;n<this.joinItems.length;n++)r[n]=new Ro(this.joinItems[n]);this.joinItems=r}}},{key:"destroy",value:function(){Hy(Jy(t.prototype),"destroy",this).call(this),ge.reset(this)}},{key:"toServerJSONObject",value:function(){var e=Hy(Jy(t.prototype),"toServerJSONObject",this).call(this);if(e.joinItems){for(var r=[],n=0;n<e.joinItems.length;n++)e.joinItems[n].toServerJSONObject&&(r[n]=e.joinItems[n].toServerJSONObject());e.joinItems=r}return e.datasetInfo&&e.datasetInfo.toServerJSONObject&&(e.datasetInfo=e.datasetInfo.toServerJSONObject()),e}}])&&Gy(r.prototype,n),o&&Gy(r,o),t}();function zy(e){return(zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qy(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yy(e,t){return!t||"object"!==zy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qy(e,t,r){return(Qy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xy(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Xy(e){return(Xy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ky(e,t){return(Ky=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.UGCSubLayer=Vy;var Zy=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(r=Yy(this,Xy(t).call(this,e))).theme=null,r.themeElementPosition=null,r.CLASS_NAME="SuperMap.ServerTheme",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ky(e,t)}(t,Vy),r=t,(n=[{key:"destroy",value:function(){Qy(Xy(t.prototype),"destroy",this).call(this),ge.reset(this)}},{key:"fromJson",value:function(e){Qy(Xy(t.prototype),"fromJson",this).call(this,e);var r=this.theme;switch(r&&r.type){case"LABEL":this.theme=Nh.fromObj(r);break;case"UNIQUE":this.theme=Hh.fromObj(r);break;case"GRAPH":this.theme=ny.fromObj(r);break;case"DOTDENSITY":this.theme=uy.fromObj(r);break;case"GRADUATEDSYMBOL":this.theme=by.fromObj(r);break;case"RANGE":this.theme=Ty.fromObj(r)}this.themeElementPosition&&(this.themeElementPosition=new we(this.themeElementPosition.x,this.themeElementPosition.y))}},{key:"toServerJSONObject",value:function(){var e=Qy(Xy(t.prototype),"toServerJSONObject",this).call(this);return e.themeElementPosition&&e.themeElementPosition.toServerJSONObject&&(e.themeElementPosition=e.themeElementPosition.toServerJSONObject()),e.theme&&e.theme.toServerJSONObject&&(e.theme=e.theme.toServerJSONObject()),e}}])&&qy(r.prototype,n),o&&qy(r,o),t}();function $y(e){return($y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ed(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function td(e,t){return!t||"object"!==$y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rd(e,t,r){return(rd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nd(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function nd(e){return(nd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function od(e,t){return(od=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.ServerTheme=Zy;var id=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(r=td(this,nd(t).call(this,e))).colorDictionarys=null,r.brightness=null,r.colorGradientType=null,r.colors=null,r.contrast=null,r.dashStyle=null,r.gridType=null,r.horizontalSpacing=null,r.sizeFixed=null,r.solidStyle=null,r.specialColor=null,r.specialValue=null,r.specialValueTransparent=null,r.verticalSpacing=null,r.CLASS_NAME="SuperMap.Grid",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&od(e,t)}(t,Vy),r=t,(n=[{key:"destroy",value:function(){rd(nd(t.prototype),"destroy",this).call(this),ge.reset(this)}},{key:"fromJson",value:function(e){if(rd(nd(t.prototype),"fromJson",this).call(this,e),this.specialColor&&(this.specialColor=new cr(this.specialColor.red,this.specialColor.green,this.specialColor.blue)),this.colors){var r,n=[];for(var o in this.colors)r=this.colors[o],n.push(new cr(r.red,r.green,r.blue));this.colors=n}if(this.dashStyle&&(this.dashStyle=new pr(this.dashStyle)),this.solidStyle&&(this.solidStyle=new pr(this.solidStyle)),this.colorDictionary){var i,a=[];for(var s in this.colorDictionary)i=this.colorDictionary[s],a.push(new fa({elevation:s,color:i}));this.colorDictionarys=a}delete this.colorDictionary}},{key:"toServerJSONObject",value:function(){var e=rd(nd(t.prototype),"toServerJSONObject",this).call(this);return e.dashStyle&&e.dashStyle.toServerJSONObject&&(e.dashStyle=e.dashStyle.toServerJSONObject()),e.solidStyle&&e.solidStyle.toServerJSONObject&&(e.solidStyle=e.solidStyle.toServerJSONObject()),e}}])&&ed(r.prototype,n),o&&ed(r,o),t}();function ad(e){return(ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ld(e,t){return!t||"object"!==ad(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ud(e,t,r){return(ud="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cd(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function cd(e){return(cd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fd(e,t){return(fd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Grid=id;var pd=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(r=ld(this,cd(t).call(this,e))).brightness=null,r.colorSpaceType=null,r.contrast=null,r.displayBandIndexes=null,r.transparent=null,r.transparentColor=null,r.transparentColorTolerance=null,r.CLASS_NAME="SuperMap.Image",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fd(e,t)}(t,Vy),r=t,(n=[{key:"destroy",value:function(){ud(cd(t.prototype),"destroy",this).call(this),ge.reset(this)}},{key:"fromJson",value:function(e){ud(cd(t.prototype),"fromJson",this).call(this,e),this.transparentColor&&(this.transparentColor=new cr(this.transparentColor.red,this.transparentColor.green,this.transparentColor.blue))}},{key:"toServerJSONObject",value:function(){return ud(cd(t.prototype),"toServerJSONObject",this).call(this)}}])&&sd(r.prototype,n),o&&sd(r,o),t}();function hd(e){return(hd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dd(e,t){return!t||"object"!==hd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vd(e,t,r){return(vd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=md(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function md(e){return(md=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bd(e,t){return(bd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Image=pd;var gd=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(r=dd(this,md(t).call(this,e))).style=null,r.CLASS_NAME="SuperMap.Vector",r}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bd(e,t)}(t,Vy),r=t,(o=[{key:"destroy",value:function(){vd(md(t.prototype),"destroy",this).call(this),ge.reset(this)}},{key:"fromJson",value:function(e){vd(md(t.prototype),"fromJson",this).call(this,e);var r=this.style;r&&(this.style=new pr(r))}},{key:"toServerJSONObject",value:function(){var e=n.toServerJSONObject();return e.style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&yd(r.prototype,o),i&&yd(r,i),t}();function Sd(e){return(Sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Od(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _d(e,t,r){return(_d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pd(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Pd(e){return(Pd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cd(e,t){return(Cd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Vector=gd;var Ed=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=Pd(t).call(this,e,r))||"object"!==Sd(i)&&"function"!=typeof i?Od(o):i).isTempLayers=!1,r&&ge.extend(Od(n),r),n.CLASS_NAME="SuperMap.GetLayersInfoService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cd(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){_d(Pd(t.prototype),"destroy",this).call(this),ge.reset(this)}},{key:"processAsync",value:function(){var e=this;e.isTempLayers||(e.url=ge.urlPathAppend(e.url,"layers")),e.request({method:"GET",params:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e){var t,r;r=(t=!!(e=ge.transformResult(e))&&e.length>0?e[0].subLayers.layers:null)?t.length:0,this.handleLayers(r,t),this.events.triggerEvent("processCompleted",{result:e[0]})}},{key:"handleLayers",value:function(e,t){var r;if(e)for(var n=0;n<e;n++){if(t[n].subLayers&&t[n].subLayers.layers&&t[n].subLayers.layers.length>0)this.handleLayers(t[n].subLayers.layers.length,t[n].subLayers.layers);else switch(t[n].ugcLayerType){case"THEME":(r=new Zy).fromJson(t[n]),t[n]=r;break;case"GRID":(r=new id).fromJson(t[n]),t[n]=r;break;case"IMAGE":(r=new pd).fromJson(t[n]),t[n]=r;break;case"VECTOR":(r=new gd).fromJson(t[n]),t[n]=r}}}}])&&wd(r.prototype,n),o&&wd(r,o),t}();function Td(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.GetLayersInfoService=Ed;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var kd=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.bounds=null,this.searchRadius=0,this.zValueFieldName=null,this.zValueScale=1,this.resolution=null,this.filterQueryParameter=null,this.outputDatasetName=null,this.outputDatasourceName=null,this.pixelFormat=null,this.dataset=null,this.inputPoints=null,this.InterpolationAnalystType="dataset",this.clipParam=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.InterpolationAnalystParameters")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)if("inputPoints"===r&&"geometry"===e.InterpolationAnalystType){for(var n=[],o=0;o<e.inputPoints.length;o++){var i=e.inputPoints[o],a={x:i.x,y:i.y,z:i.tag};n.push(a)}t[r]=n}else t[r]=e[r]}}],(r=[{key:"destroy",value:function(){var e=this;e.bounds=null,e.searchRadius=null,e.zValueFieldName=null,e.zValueScale=null,e.resolution=null,e.filterQueryParameter=null,e.outputDatasetName=null,e.pixelFormat=null}}])&&Td(t.prototype,r),n&&Td(t,n),e}();function xd(e){return(xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ad(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rd(e,t,r){return(Rd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ld(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ld(e){return(Ld=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Md(e,t){return(Md=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.InterpolationAnalystParameters=kd;var Nd=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Ld(t).call(this,e))||"object"!==xd(o)&&"function"!=typeof o?jd(n):o).smooth=.1,r.tension=40,r.searchMode=null,r.expectedCount=12,r.maxPointCountForInterpolation=200,r.maxPointCountInNode=50,e&&ge.extend(jd(r),e),r.CLASS_NAME="SuperMap.InterpolationRBFAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Md(e,t)}(t,kd),r=t,o=[{key:"toObject",value:function(e,t){for(var r in e)t[r]=e[r]}}],(n=[{key:"destroy",value:function(){Rd(Ld(t.prototype),"destroy",this).call(this);var e=this;e.smooth=null,e.tension=null,e.searchMode=null,e.expectedCount=null,e.maxPointCountForInterpolation=null,e.maxPointCountInNode=null}}])&&Ad(r.prototype,n),o&&Ad(r,o),t}();function Id(e){return(Id="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bd(e,t,r){return(Bd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gd(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Gd(e){return(Gd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ud(e,t){return(Ud=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.InterpolationRBFAnalystParameters=Nd;var Hd=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=Gd(t).call(this,e))||"object"!==Id(o)&&"function"!=typeof o?Fd(n):o,e&&ge.extend(Fd(r),e),r.CLASS_NAME="SuperMap.InterpolationDensityAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ud(e,t)}(t,kd),r=t,(n=[{key:"destroy",value:function(){Bd(Gd(t.prototype),"destroy",this).call(this)}}])&&Dd(r.prototype,n),o&&Dd(r,o),t}();function Jd(e){return(Jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zd(e,t,r){return(zd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qd(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function qd(e){return(qd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yd(e,t){return(Yd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.InterpolationDensityAnalystParameters=Hd;var Qd=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=qd(t).call(this,e))||"object"!==Jd(o)&&"function"!=typeof o?Vd(n):o).power=2,r.searchMode=null,r.expectedCount=12,e&&ge.extend(Vd(r),e),r.CLASS_NAME="SuperMap.InterpolationIDWAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yd(e,t)}(t,kd),r=t,(n=[{key:"destroy",value:function(){zd(qd(t.prototype),"destroy",this).call(this);this.power=null,this.searchMode=null,this.expectedCount=null}}])&&Wd(r.prototype,n),o&&Wd(r,o),t}();function Xd(e){return(Xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $d(e,t,r){return($d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ev(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ev(e){return(ev=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tv(e,t){return(tv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.InterpolationIDWAnalystParameters=Qd;var rv=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=ev(t).call(this,e))||"object"!==Xd(o)&&"function"!=typeof o?Zd(n):o).type=null,r.mean=null,r.angle=0,r.nugget=0,r.range=0,r.sill=0,r.variogramMode=Y.SPHERICAL,r.exponent=Q.EXP1,r.searchMode=null,r.expectedCount=12,r.maxPointCountForInterpolation=200,r.maxPointCountInNode=50,e&&ge.extend(Zd(r),e),r.CLASS_NAME="SuperMap.InterpolationKrigingAnalystParameters",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tv(e,t)}(t,kd),r=t,(n=[{key:"destroy",value:function(){$d(ev(t.prototype),"destroy",this).call(this);var e=this;e.type=null,e.mean=null,e.angle=null,e.nugget=null,e.range=null,e.sill=null,e.variogramMode=null,e.exponent=null,e.searchMode=null,e.expectedCount=null,e.maxPointCountForInterpolation=null,e.maxPointCountInNode=null}}])&&Kd(r.prototype,n),o&&Kd(r,o),t}();function nv(e){return(nv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ov(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function iv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function av(e,t,r){return(av="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function sv(e){return(sv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lv(e,t){return(lv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.InterpolationKrigingAnalystParameters=rv;var uv=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=sv(t).call(this,e,r))||"object"!==nv(i)&&"function"!=typeof i?iv(o):i).mode=null,r&&ge.extend(iv(n),r),n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lv(e,t)}(t,yo),r=t,(n=[{key:"destroy",value:function(){av(sv(t.prototype),"destroy",this).call(this),this.mode=null,this.CLASS_NAME="SuperMap.InterpolationAnalystService"}},{key:"processAsync",value:function(e){var t={},r=this;e instanceof Hd?(r.mode="Density","geometry"===e.InterpolationAnalystType?r.url=ge.urlPathAppend(r.url,"geometry/interpolation/density"):r.url=ge.urlPathAppend(r.url,"datasets/"+e.dataset+"/interpolation/density")):e instanceof Qd?(r.mode="IDW","geometry"===e.InterpolationAnalystType?r.url=ge.urlPathAppend(r.url,"geometry/interpolation/idw"):r.url=ge.urlPathAppend(r.url,"datasets/"+e.dataset+"/interpolation/idw")):e instanceof Nd?(r.mode="RBF","geometry"===e.InterpolationAnalystType?r.url=ge.urlPathAppend(r.url,"geometry/interpolation/rbf"):r.url=ge.urlPathAppend(r.url,"datasets/"+e.dataset+"/interpolation/rbf")):e instanceof rv&&(r.mode="Kriging","geometry"===e.InterpolationAnalystType?r.url=ge.urlPathAppend(r.url,"geometry/interpolation/kriging"):r.url=ge.urlPathAppend(r.url,"datasets/"+e.dataset+"/interpolation/kriging")),kd.toObject(e,t);var n=ge.toJSON(t);r.url=ge.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:n,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}])&&ov(r.prototype,n),o&&ov(r,o),t}();function cv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.InterpolationAnalystService=uv;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fv=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=ee.METER,this.radiusUnit=ee.METER,this.areaUnit=$.SQUAREMILE,this.output=null,this.mappingParameters=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.KernelDensityJobParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},"query"===r&&e[r]?t.analyst[r]=e[r].toBBOX():t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null,this.output instanceof si&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ui&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&cv(t.prototype,r),n&&cv(t,n),e}();function pv(e){return(pv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yv(e,t){return!t||"object"!==pv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dv(e,t,r){return(dv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function vv(e){return(vv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mv(e,t){return(mv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.KernelDensityJobParameter=fv;var bv=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=yv(this,vv(t).call(this,e,r))).url=ge.urlPathAppend(n.url,"spatialanalyst/density"),n.CLASS_NAME="SuperMap.KernelDensityJobsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mv(e,t)}(t,bi),r=t,(n=[{key:"destroy",value:function(){dv(vv(t.prototype),"destroy",this).call(this)}},{key:"getKernelDensityJobs",value:function(){dv(vv(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getKernelDensityJob",value:function(e){dv(vv(t.prototype),"getJobs",this).call(this,ge.urlPathAppend(this.url,e))}},{key:"addKernelDensityJob",value:function(e,r){dv(vv(t.prototype),"addJob",this).call(this,this.url,e,fv,r)}}])&&hv(r.prototype,n),o&&hv(r,o),t}();n.KernelDensityJobsService=bv;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var gv=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="LabelMatrixCell"};function Sv(e){return(Sv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ov(e){return(Ov=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pv(e,t){return(Pv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.LabelMatrixCell=gv;var Cv=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Ov(t).call(this,e))||"object"!==Sv(o)&&"function"!=typeof o?_v(n):o).height=0,r.pathField=null,r.rotation=0,r.width=0,r.sizeFixed=!1,r.type="IMAGE",e&&ge.extend(_v(r),e),r.CLASS_NAME="SuperMap.LabelImageCell",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pv(e,t)}(t,gv),r=t,(n=[{key:"destroy",value:function(){var e=this;e.height=null,e.pathField=null,e.rotation=null,e.width=null,e.sizeFixed=null}}])&&wv(r.prototype,n),o&&wv(r,o),t}();function Ev(e){return(Ev="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kv(e){return(kv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Av(e,t){return(Av=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.LabelImageCell=Cv;var jv=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=kv(t).call(this,e))||"object"!==Ev(o)&&"function"!=typeof o?xv(n):o).style=new pr,r.symbolIDField=null,r.type="SYMBOL",e&&ge.extend(xv(r),e),r.CLASS_NAME="SuperMap.LabelSymbolCell",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Av(e,t)}(t,gv),r=t,(n=[{key:"destroy",value:function(){this.style&&(this.style.destroy(),this.style=null),this.symbolIDField=null}}])&&Tv(r.prototype,n),o&&Tv(r,o),t}();function Rv(e){return(Rv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mv(e){return(Mv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Iv(e,t){return(Iv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.LabelSymbolCell=jv;var Dv=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=Mv(t).call(this,e))||"object"!==Rv(o)&&"function"!=typeof o?Nv(n):o).themeLabel=new Nh,r.type="THEME",e&&ge.extend(Nv(r),e),r.CLASS_NAME=" SuperMap.LabelThemeCell",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Iv(e,t)}(t,gv),r=t,(n=[{key:"destroy",value:function(){this.themeLabel&&(this.themeLabel.destroy(),this.themeLabel=null)}}])&&Lv(r.prototype,n),o&&Lv(r,o),t}();function Fv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.LabelThemeCell=Dv;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Bv=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerName=null,this.isVisible=null,this.displayFilter=null,this.fieldValuesDisplayFilter=null,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.LayerStatus"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.layerName=null,this.isVisible=null,this.displayFilter=null}},{key:"toJSON",value:function(){var e="{";e+='"type":"UGC",';var t=[];return this.layerName&&(t.push('"name":"'+this.layerName+'"'),t.push('"visible":'+this.isVisible)),this.displayFilter&&t.push('"displayFilter":"'+this.displayFilter+'"'),(this.minScale||0==this.minScale)&&t.push('"minScale":'+this.minScale),(this.maxScale||0==this.maxScale)&&t.push('"maxScale":'+this.maxScale),this.fieldValuesDisplayFilter&&t.push('"fieldValuesDisplayFilter":'+ge.toJSON(this.fieldValuesDisplayFilter)),e+=t,e+="}"}}])&&Fv(t.prototype,r),n&&Fv(t,n),e}();function Gv(e){return(Gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jv(e,t,r){return(Jv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wv(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Wv(e){return(Wv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vv(e,t){return(Vv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.LayerStatus=Bv;var zv=function(e){function t(e,r){var n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=Wv(t).call(this,e,r))||"object"!==Gv(i)&&"function"!=typeof i?Hv(o):i).projection=null,n.CLASS_NAME="SuperMap.MapService",r&&ge.extend(Hv(n),r);var a=Hv(n);if(a.projection){var s=a.projection.split(":");s instanceof Array&&(2===s.length&&(a.url=ge.urlAppend(a.url,'prjCoordSys={"epsgCode":"'.concat(s[1],'"}'))),1===s.length&&(a.url=ge.urlAppend(a.url,'prjCoordSys={"epsgCode":"'.concat(s[0],'"}'))))}return n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vv(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Jv(Wv(t.prototype),"destroy",this).call(this);var e=this;e.events&&(e.events.un(e.eventListeners),e.events.listeners=null,e.events.destroy(),e.events=null,e.eventListeners=null)}},{key:"processAsync",value:function(){this.request({method:"GET",scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e){var t=(e=ge.transformResult(e)).code>=200&&e.code<300||0==e.code||304===e.code,r=e.code&&t;!e.code||r?this.events&&this.events.triggerEvent("processCompleted",{result:e}):this.events.triggerEvent("processFailed",{error:e})}}])&&Uv(r.prototype,n),o&&Uv(r,o),t}();function qv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.MapService=zv;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Yv=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.extractRegion=null,this.expression=null,this.isZip=!1,this.ignoreNoValue=!1,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,ge.extend(this,t),this.CLASS_NAME="SuperMap.MathExpressionAnalysisParameters")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)if("dataset"!==r&&(t[r]=e[r]),"extractRegion"===r&&e[r]){for(var n=e[r].components[0].components,o={},i=[],a=n.length,s=0;s<a-1;s++){var l={};l.x=n[s].x,l.y=n[s].y,i.push(l)}o.points=i,o.type="REGION",t[r]=o}}}],(r=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.bounds=null,e.expression=null,e.isZip=!0,e.ignoreNoValue=!0,e.targetDatasource=null,e.resultGridName=null,e.deleteExistResultDataset=null}}])&&qv(t.prototype,r),n&&qv(t,n),e}();function Qv(e){return(Qv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Kv(e,t){return!t||"object"!==Qv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zv(e,t,r){return(Zv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$v(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function $v(e){return($v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function em(e,t){return(em=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.MathExpressionAnalysisParameters=Yv;var tm=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Kv(this,$v(t).call(this,e,r))).CLASS_NAME="SuperMap.MathExpressionAnalysisService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&em(e,t)}(t,yo),r=t,(n=[{key:"destroy",value:function(){Zv($v(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t=this,r={};e instanceof Yv&&(t.url=ge.urlPathAppend(t.url,"datasets/"+e.dataset+"/mathanalyst")),Yv.toObject(e,r);var n=ge.toJSON(r);t.url=ge.urlAppend(t.url,"returnContent=true"),t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&Xv(r.prototype,n),o&&Xv(r,o),t}();function rm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.MathExpressionAnalysisService=tm;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var nm=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.geometry=t,this.unit=p.METER,this.prjCoordSys=null,this.distanceMode=null,r&&ge.extend(this,r),this.CLASS_NAME="SuperMap.MeasureParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.geometry=null,this.unit=null,this.prjCoordSys=null}}])&&rm(t.prototype,r),n&&rm(t,n),e}();function om(e){return(om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function im(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function am(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sm(e,t,r){return(sm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lm(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function lm(e){return(lm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function um(e,t){return(um=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.MeasureParameters=nm;var cm=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=lm(t).call(this,e,r))||"object"!==om(i)&&"function"!=typeof i?am(o):i).measureMode=f.DISTANCE,r&&ge.extend(am(n),r),n.CLASS_NAME="SuperMap.MeasureService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&um(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){sm(lm(t.prototype),"destroy",this).call(this);this.measureMode=null}},{key:"processAsync",value:function(e){if(e instanceof nm){var t,r,n=this,o=e.geometry;if(o){n.url=ge.urlPathAppend(n.url,n.measureMode===f.AREA?"area":"distance");var i,a,s,l=Er.fromGeometry(o);if(l)t=l.parts[0],r=l.points.splice(0,t),e.prjCoordSys?("object"===om(e.prjCoordSys)?i='{"epsgCode"'+(a=e.prjCoordSys.projCode).substring(a.indexOf(":"),a.length)+"}":"string"==typeof e.prjCoordSys&&(i='{"epsgCode"'+e.prjCoordSys.substring(e.prjCoordSys.indexOf(":"),e.prjCoordSys.length)+"}"),s={point2Ds:ge.toJSON(r),unit:e.unit,prjCoordSys:i}):s={point2Ds:ge.toJSON(r),unit:e.unit},n.request({method:"GET",params:s,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}}])&&im(r.prototype,n),o&&im(r,o),t}();function fm(e){return(fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ym(e,t,r){return(ym="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dm(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function dm(e){return(dm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vm(e,t){return(vm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.MeasureService=cm;var mm=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=dm(t).call(this,e,r))||"object"!==fm(i)&&"function"!=typeof i?hm(o):i).mode=null,r&&ge.extend(hm(n),r),n.CLASS_NAME="SuperMap.OverlayAnalystService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vm(e,t)}(t,yo),r=t,(n=[{key:"destroy",value:function(){ym(dm(t.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},r=this;e instanceof Ua?(r.mode="datasets",r.url=ge.urlPathAppend(r.url,"datasets/"+e.sourceDataset+"/overlay"),Ua.toObject(e,t)):e instanceof Qc&&(r.mode="geometry",e.operateGeometries&&e.sourceGeometries?(r.url=ge.urlPathAppend(r.url,"geometry/overlay/batch"),r.url=ge.urlAppend(r.url,"ignoreAnalystParam=true")):r.url=ge.urlPathAppend(r.url,"geometry/overlay"),Qc.toObject(e,t)),r.url=ge.urlAppend(r.url,"returnContent=true");var n=ge.toJSON(t);r.request({method:"POST",data:n,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}])&&pm(r.prototype,n),o&&pm(r,o),t}();function bm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.OverlayAnalystService=mm;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var gm=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetOverlay="",this.mode="",this.srcFields="",this.overlayFields="",this.output=null,this.mappingParameters=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.OverlayGeoJobParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!=r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetOverlay=null,this.mode=null,this.srcFields=null,this.overlayFields=null,this.output instanceof si&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ui&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&bm(t.prototype,r),n&&bm(t,n),e}();function Sm(e){return(Sm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Om(e,t){return!t||"object"!==Sm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _m(e,t,r){return(_m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pm(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Pm(e){return(Pm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cm(e,t){return(Cm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.OverlayGeoJobParameter=gm;var Em=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Om(this,Pm(t).call(this,e,r))).url=ge.urlPathAppend(n.url,"spatialanalyst/overlay"),n.CLASS_NAME="SuperMap.OverlayGeoJobsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cm(e,t)}(t,bi),r=t,(n=[{key:"destroy",value:function(){_m(Pm(t.prototype),"destroy",this).call(this)}},{key:"getOverlayGeoJobs",value:function(){_m(Pm(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getOverlayGeoJob",value:function(e){_m(Pm(t.prototype),"getJobs",this).call(this,ge.urlPathAppend(this.url,e))}},{key:"addOverlayGeoJob",value:function(e,r){_m(Pm(t.prototype),"addJob",this).call(this,this.url,e,gm,r)}}])&&wm(r.prototype,n),o&&wm(r,o),t}();function Tm(e){return(Tm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function km(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xm(e,t){return!t||"object"!==Tm(t)&&"function"!=typeof t?Am(e):t}function Am(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jm(e,t,r){return(jm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rm(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Rm(e){return(Rm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lm(e,t){return(Lm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.OverlayGeoJobsService=Em;var Mm=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e?((r=xm(this,Rm(t).call(this,e))).returnContent=!0,r.bounds=null,ge.extend(Am(r),e),r.CLASS_NAME="SuperMap.QueryByBoundsParameters",r):xm(r)}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lm(e,t)}(t,ea),r=t,(n=[{key:"destroy",value:function(){jm(Rm(t.prototype),"destroy",this).call(this);this.returnContent=null,this.bounds&&(this.bounds=null)}}])&&km(r.prototype,n),o&&km(r,o),t}();function Nm(e){return(Nm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Im(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Dm(e,t){return!t||"object"!==Nm(t)&&"function"!=typeof t?Fm(e):t}function Fm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bm(e,t,r){return(Bm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gm(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Gm(e){return(Gm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Um(e,t){return(Um=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.QueryByBoundsParameters=Mm;var Hm=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Dm(this,Gm(t).call(this,e,r))).returnContent=!1,n.format=o.GEOJSON,n.returnFeatureWithFieldCaption=!1,r&&ge.extend(Fm(n),r),n.CLASS_NAME="SuperMap.QueryService",n.url?(r&&r.format&&(n.format=r.format.toUpperCase()),n.url=ge.urlPathAppend(n.url,"queryResults"),n):Dm(n)}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Um(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Bm(Gm(t.prototype),"destroy",this).call(this);this.returnContent=null,this.format=null}},{key:"processAsync",value:function(e){if(e instanceof ea){var t,r=this,n=null;r.returnContent=e.returnContent,t=r.getJsonParameters(e),r.returnContent?r.url=ge.urlAppend(r.url,"returnContent="+r.returnContent):(n=e.returnCustomResult)&&(r.url=ge.urlAppend(r.url,"returnCustomResult="+n)),r.returnFeatureWithFieldCaption=e.returnFeatureWithFieldCaption,r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){e=ge.transformResult(e);var t=new Lr;if(e&&e.recordsets)for(var r=0,n=e.recordsets,i=n.length;r<i;r++)n[r].features&&(!0===this.returnFeatureWithFieldCaption&&n[r].features.map(function(e){return e.fieldNames=n[r].fieldCaptions,e}),this.format===o.GEOJSON&&(n[r].features=t.toGeoJSON(n[r].features)));this.events.triggerEvent("processCompleted",{result:e})}},{key:"getQueryParameters",value:function(e){return new ea({customParams:e.customParams,expectCount:e.expectCount,networkType:e.networkType,queryOption:e.queryOption,queryParams:e.queryParams,startRecord:e.startRecord,prjCoordSys:e.prjCoordSys,holdTime:e.holdTime})}}])&&Im(r.prototype,n),i&&Im(r,i),t}();function Jm(e){return(Jm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vm(e,t){return!t||"object"!==Jm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zm(e,t,r){return(zm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qm(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function qm(e){return(qm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ym(e,t){return(Ym=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.QueryService=Hm;var Qm=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Vm(this,qm(t).call(this,e,r))).CLASS_NAME="SuperMap.QueryByBoundsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ym(e,t)}(t,Hm),r=t,(n=[{key:"destroy",value:function(){zm(qm(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(!(e instanceof Mm))return null;var t,r="",n=e.bounds;return t=this.getQueryParameters(e),r+="'queryMode':'BoundsQuery','queryParameters':",r+=ge.toJSON(t),r="{"+(r+=",'bounds': {'rightTop':{'y':"+n.top+",'x':"+n.right+"},'leftBottom':{'y':"+n.bottom+",'x':"+n.left+"}}")+"}"}}])&&Wm(r.prototype,n),o&&Wm(r,o),t}();function Xm(e){return(Xm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Km(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zm(e,t){return!t||"object"!==Xm(t)&&"function"!=typeof t?$m(e):t}function $m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eb(e,t,r){return(eb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tb(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function tb(e){return(tb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rb(e,t){return(rb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.QueryByBoundsService=Qm;var nb=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e?((r=Zm(this,tb(t).call(this,e))).distance=0,r.geometry=null,r.isNearest=null,r.returnContent=!0,ge.extend($m(r),e),r.CLASS_NAME="SuperMap.QueryByDistanceParameters",r):Zm(r)}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rb(e,t)}(t,ea),r=t,(n=[{key:"destroy",value:function(){eb(tb(t.prototype),"destroy",this).call(this);var e=this;e.returnContent=null,e.distance=null,e.isNearest=null,e.geometry&&(e.geometry.destroy(),e.geometry=null)}}])&&Km(r.prototype,n),o&&Km(r,o),t}();function ob(e){return(ob="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ib(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ab(e,t){return!t||"object"!==ob(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sb(e,t,r){return(sb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lb(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function lb(e){return(lb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ub(e,t){return(ub=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.QueryByDistanceParameters=nb;var cb=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ab(this,lb(t).call(this,e,r))).CLASS_NAME="SuperMap.QueryByDistanceService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ub(e,t)}(t,Hm),r=t,(n=[{key:"destroy",value:function(){sb(lb(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof nb){var t="",r=this.getQueryParameters(e),n=Er.fromGeometry(e.geometry);return t+=e.isNearest?"'queryMode':'FindNearest','queryParameters':":"'queryMode':'DistanceQuery','queryParameters':",t+=ge.toJSON(r),t="{"+(t+=",'geometry':"+ge.toJSON(n)+",'distance':"+e.distance)+"}"}}}])&&ib(r.prototype,n),o&&ib(r,o),t}();function fb(e){return(fb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hb(e,t){return!t||"object"!==fb(t)&&"function"!=typeof t?yb(e):t}function yb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function db(e,t,r){return(db="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vb(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function vb(e){return(vb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mb(e,t){return(mb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.QueryByDistanceService=cb;var bb=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e?((r=hb(this,vb(t).call(this,e))).returnContent=!0,r.geometry=null,r.spatialQueryMode=u.INTERSECT,ge.extend(yb(r),e),r.CLASS_NAME="SuperMap.QueryByGeometryParameters",r):hb(r)}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mb(e,t)}(t,ea),r=t,(n=[{key:"destroy",value:function(){db(vb(t.prototype),"destroy",this).call(this);this.returnContent=null,this.geometry=null,this.spatialQueryMode=null}}])&&pb(r.prototype,n),o&&pb(r,o),t}();function gb(e){return(gb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wb(e,t){return!t||"object"!==gb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ob(e,t,r){return(Ob="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_b(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function _b(e){return(_b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pb(e,t){return(Pb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.QueryByGeometryParameters=bb;var Cb=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=wb(this,_b(t).call(this,e,r))).CLASS_NAME="SuperMap.QueryByGeometryService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pb(e,t)}(t,Hm),r=t,(n=[{key:"destroy",value:function(){Ob(_b(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof bb){var t,r="",n=e.geometry,o=Er.fromGeometry(n);return t=this.getQueryParameters(e),r+="'queryMode':'SpatialQuery','queryParameters':",r="{"+(r+=ge.toJSON(t)+",'geometry':"+ge.toJSON(o)+",'spatialQueryMode':"+ge.toJSON(e.spatialQueryMode))+"}"}}}])&&Sb(r.prototype,n),o&&Sb(r,o),t}();function Eb(e){return(Eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kb(e,t){return!t||"object"!==Eb(t)&&"function"!=typeof t?xb(e):t}function xb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ab(e,t,r){return(Ab="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jb(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function jb(e){return(jb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rb(e,t){return(Rb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.QueryByGeometryService=Cb;var Lb=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e?((r=kb(this,jb(t).call(this,e))).returnContent=!0,ge.extend(xb(r),e),r.CLASS_NAME="SuperMap.QueryBySQLParameters",r):kb(r)}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rb(e,t)}(t,ea),r=t,(n=[{key:"destroy",value:function(){Ab(jb(t.prototype),"destroy",this).call(this);this.returnContent=null}}])&&Tb(r.prototype,n),o&&Tb(r,o),t}();function Mb(e){return(Mb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ib(e,t){return!t||"object"!==Mb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Db(e,t,r){return(Db="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fb(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Fb(e){return(Fb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bb(e,t){return(Bb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.QueryBySQLParameters=Lb;var Gb=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ib(this,Fb(t).call(this,e,r))).CLASS_NAME="SuperMap.QueryBySQLService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bb(e,t)}(t,Hm),r=t,(n=[{key:"destroy",value:function(){Db(Fb(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof Lb){var t,r="";return t=this.getQueryParameters(e),r+="'queryMode':'SqlQuery','queryParameters':",r="{"+(r+=ge.toJSON(t))+"}"}}}])&&Nb(r.prototype,n),o&&Nb(r,o),t}();function Ub(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.QueryBySQLService=Gb;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Hb=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.sourceRoute=null,this.point=null,this.tolerance=null,this.isIgnoreGap=!1,ge.extend(this,t),this.CLASS_NAME="SuperMap.RouteCalculateMeasureParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.sourceRoute=null,e.point=null,e.tolerance&&(e.tolerance=null),e.isIgnoreGap&&(e.isIgnoreGap=!1)}}])&&Ub(t.prototype,r),n&&Ub(t,n),e}();function Jb(e){return(Jb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vb(e,t){return!t||"object"!==Jb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zb(e,t,r){return(zb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qb(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function qb(e){return(qb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yb(e,t){return(Yb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.RouteCalculateMeasureParameters=Hb;var Qb=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Vb(this,qb(t).call(this,e,r))).CLASS_NAME="SuperMap.RouteCalculateMeasureService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yb(e,t)}(t,yo),r=t,(n=[{key:"destroy",value:function(){zb(qb(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Hb){var t,r=this;t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){return this.url=ge.urlPathAppend(this.url,"geometry/calculatemeasure"),this.url=ge.urlAppend(this.url,"returnContent=true"),ge.toJSON(e)}}])&&Wb(r.prototype,n),o&&Wb(r,o),t}();function Xb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.RouteCalculateMeasureService=Qb;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Kb=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.sourceRoute=null,this.dataset=null,this.routeIDField=null,this.routeID=null,this.type=null,this.measure=null,this.offset=0,this.isIgnoreGap=!1,this.startMeasure=null,this.endMeasure=null;var r=t.sourceRoute,n={};if(r&&r instanceof Ce&&r.components){n.type=r.type,n.parts=r.parts;for(var o=[],i=0,a=r.components.length;i<a;i++)o=o.concat(r.components[i].components);n.points=o,t.sourceRoute=n}ge.extend(this,t),this.CLASS_NAME="SuperMap.RouteLocatorParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;e.sourceRoute=null,e.type=null,e.measure=null,e.offset=0,e.isIgnoreGap=!1,e.startMeasure=null,e.endMeasure=null,e.dataset=null,e.routeID=null,e.routeIDField=null}}])&&Xb(t.prototype,r),n&&Xb(t,n),e}();function Zb(e){return(Zb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function eg(e,t){return!t||"object"!==Zb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tg(e,t,r){return(tg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rg(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function rg(e){return(rg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ng(e,t){return(ng=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.RouteLocatorParameters=Kb;var og=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=eg(this,rg(t).call(this,e,r))).CLASS_NAME="SuperMap.RouteLocatorService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ng(e,t)}(t,yo),r=t,(n=[{key:"destroy",value:function(){tg(rg(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Kb){var t,r=this;t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t="geometry/routelocator";return e.dataset&&(t="datasets/"+e.dataset+"/linearreferencing/routelocator",e.sourceRoute=null),this.url=ge.urlPathAppend(this.url,t),this.url=ge.urlAppend(this.url,"returnContent=true"),ge.toJSON(e)}}])&&$b(r.prototype,n),o&&$b(r,o),t}();function ig(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.RouteLocatorService=og;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ag=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fieldNames=null,this.fieldValues=null,this.geometry=null,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ServerFeature"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){var r=null;if(t)return(r=t.geometry)&&(r=Er.fromJson(r)),new e({fieldNames:t.fieldNames,fieldValues:t.fieldValues,geometry:r})}}],(r=[{key:"destroy",value:function(){var e=this;e.fieldNames=null,e.fieldValues=null,e.geometry&&(e.geometry.destroy(),e.geometry=null)}},{key:"toFeature",value:function(){var e,t,r,n,o={},i=this;for(var a in e=i.fieldNames,t=i.fieldValues,e)o[e[a]]=t[a];return i.geometry&&(r=i.geometry.toGeometry()),n=new er(r,o),i.geometry&&i.geometry.id&&(n.fid=i.geometry.id),n}}])&&ig(t.prototype,r),n&&ig(t,n),e}();function sg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ServerFeature=ag;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var lg=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.resourceID=null,this.tempLayerName=null,this.layerInfo=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.SetLayerInfoParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.resourceID=null,this.tempLayerName=null,this.layerInfo=null}}])&&sg(t.prototype,r),n&&sg(t,n),e}();function ug(e){return(ug="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pg(e,t,r){return(pg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hg(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function hg(e){return(hg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yg(e,t){return(yg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.SetLayerInfoParameters=lg;var dg=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(i=hg(t).call(this,e,r))||"object"!==ug(i)&&"function"!=typeof i?fg(o):i,r&&ge.extend(fg(n),r),n.CLASS_NAME="SuperMap.SetLayerInfoService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yg(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){pg(hg(t.prototype),"destroy",this).call(this),ge.reset(this)}},{key:"processAsync",value:function(e){if(e){var t=ge.toJSON(e);this.request({method:"PUT",data:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}])&&cg(r.prototype,n),o&&cg(r,o),t}();function vg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.SetLayerInfoService=dg;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var mg=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.isTempLayers=null,this.resourceID=null,this.layersInfo=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.SetLayersInfoParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.isTempLayers=null,this.resourceID=null,this.layersInfo=null}}])&&vg(t.prototype,r),n&&vg(t,n),e}();function bg(e){return(bg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Sg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wg(e,t,r){return(wg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Og(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Og(e){return(Og=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _g(e,t){return(_g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.SetLayersInfoParameters=mg;var Pg=function(e){function t(e,r){var o,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(o=!(a=Og(t).call(this,e,r))||"object"!==bg(a)&&"function"!=typeof a?Sg(i):a).resourceID=null,o.isTempLayers=!1,r&&n.Util.extend(Sg(o),r),o.CLASS_NAME="SuperMap.SetLayersInfoService",o}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_g(e,t)}(t,Wn),r=t,(o=[{key:"destroy",value:function(){wg(Og(t.prototype),"destroy",this).call(this),ge.reset(this)}},{key:"processAsync",value:function(e){if(e){var t,r=[],n=this,o="";n.isTempLayers?(n.url=ge.urlPathAppend(n.url,"tempLayersSet/"+n.resourceID),o="PUT"):(n.url=ge.urlPathAppend(n.url,"tempLayersSet"),o="POST"),e.subLayers||(e.subLayers={layers:[]}),e.subLayers.layers||(e.subLayers.layers=[]);var i=e.subLayers.layers,a=i.length;for(var s in i){if("GRID"===i[s].ugcLayerType){var l={},u=i[s].colorDictionarys;for(var c in u){l[u[c].elevation]=u[c].color}}i[s].colorDictionary=l,delete i[s].colorDictionarys}for(var f=0;f<a;f++)i[f].toJsonObject?r.push(i[f].toJsonObject()):r.push(i[f]);(t=ge.extend(t,e)).subLayers={layers:r},t.object=null;var p=ge.toJSON([t]);n.request({method:o,data:p,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&gg(r.prototype,o),i&&gg(r,i),t}();function Cg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.SetLayersInfoService=Pg;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Eg=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerStatusList=[],this.holdTime=15,this.resourceID=null,t&&ge.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.layerStatusList=null,this.holdTime=null,this.resourceID=null}},{key:"toJSON",value:function(){var e="{";e+='"layers":[';for(var t=[],r=0,n=this.layerStatusList.length;r<n;r++)t.push(this.layerStatusList[r].toJSON());return e+=t,e+="]",e+="}"}}])&&Cg(t.prototype,r),n&&Cg(t,n),e}();function Tg(e){return(Tg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ag(e,t,r){return(Ag="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jg(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function jg(e){return(jg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rg(e,t){return(Rg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.SetLayerStatusParameters=Eg;var Lg=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=jg(t).call(this,e,r))||"object"!==Tg(i)&&"function"!=typeof i?xg(o):i).lastparams=null,n.mapUrl=e,r&&ge.extend(xg(n),r),n.CLASS_NAME="SuperMap.SetLayerStatusService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rg(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Ag(jg(t.prototype),"destroy",this).call(this),ge.reset(this)}},{key:"processAsync",value:function(e){if(e instanceof Eg){var t=this;if(t.url=t.mapUrl,null==e.resourceID)t.url=ge.urlPathAppend(t.url,"tempLayersSet"),t.lastparams=e,t.request({method:"POST",scope:t,success:t.createTempLayerComplete,failure:t.serviceProcessFailed});else{t.url=ge.urlPathAppend(t.url,"tempLayersSet/"+e.resourceID),t.url=ge.urlAppend(t.url,"elementRemain=true&reference="+e.resourceID+"&holdTime="+e.holdTime.toString());var r="[{";r+='"type":"UGC",',null!=e.layerStatusList&&e.layerStatusList.length>0&&(r+='"subLayers":'+e.toJSON()),r+=',"visible":true,',r+='"name":"'+this.getMapName(this.mapUrl)+'"',r+="}]",t.request({method:"PUT",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}},{key:"createTempLayerComplete",value:function(e){(e=ge.transformResult(e)).succeed&&(this.lastparams.resourceID=e.newResourceID),this.processAsync(this.lastparams)}},{key:"getMapName",value:function(e){var t=e;"/"===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1));var r=t.lastIndexOf("/");return t.substring(r+1,t.length)}},{key:"serviceProcessCompleted",value:function(e){null!=(e=ge.transformResult(e))&&null!=this.lastparams&&(e.newResourceID=this.lastparams.resourceID),this.events.triggerEvent("processCompleted",{result:e})}}])&&kg(r.prototype,n),o&&kg(r,o),t}();function Mg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.SetLayerStatusService=Lg;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ng=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetQuery="",this.geometryQuery="",this.mode=u.CONTAIN,this.output=null,this.mappingParameters=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.SingleObjectQueryJobsParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetQuery=null,this.geometryQuery=null,this.mode=null,this.output instanceof si&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ui&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Mg(t.prototype,r),n&&Mg(t,n),e}();function Ig(e){return(Ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fg(e,t){return!t||"object"!==Ig(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bg(e,t,r){return(Bg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gg(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Gg(e){return(Gg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ug(e,t){return(Ug=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.SingleObjectQueryJobsParameter=Ng;var Hg=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Fg(this,Gg(t).call(this,e,r))).url=ge.urlPathAppend(n.url,"spatialanalyst/query"),n.CLASS_NAME="SuperMap.SingleObjectQueryJobsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ug(e,t)}(t,bi),r=t,(n=[{key:"destroy",value:function(){Bg(Gg(t.prototype),"destroy",this).call(this)}},{key:"getQueryJobs",value:function(){Bg(Gg(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getQueryJob",value:function(e){Bg(Gg(t.prototype),"getJobs",this).call(this,ge.urlPathAppend(this.url,e))}},{key:"addQueryJob",value:function(e,r){Bg(Gg(t.prototype),"addJob",this).call(this,this.url,e,Ng,r)}}])&&Dg(r.prototype,n),o&&Dg(r,o),t}();function Jg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.SingleObjectQueryJobsService=Hg;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Wg=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.keyWord=null,this.returnPosition=!1,ge.extend(this,t),this.CLASS_NAME="SuperMap.StopQueryParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){ge.reset(this)}}])&&Jg(t.prototype,r),n&&Jg(t,n),e}();function Vg(e){return(Vg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yg(e,t,r){return(Yg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qg(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Qg(e){return(Qg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xg(e,t){return(Xg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.StopQueryParameters=Wg;var Kg=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(i=Qg(t).call(this,e,r))||"object"!==Vg(i)&&"function"!=typeof i?qg(o):i,r=r||{},ge.extend(qg(n),r),n.CLASS_NAME="SuperMap.StopQueryService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xg(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Yg(Qg(t.prototype),"destroy",this).call(this),ge.reset(this)}},{key:"processAsync",value:function(e){if(e instanceof Wg){var t=this;t.url=ge.urlPathAppend(t.url,"stops/keyword/"+e.keyWord),t.request({method:"GET",params:{returnPosition:e.returnPosition},scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&zg(r.prototype,n),o&&zg(r,o),t}();function Zg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.StopQueryService=Kg;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.groupField="",this.attributeField="",this.statisticModes="",this.output=null,this.mappingParameters=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.SummaryAttributesJobsParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.groupField=null,this.attributeField=null,this.statisticModes=null,this.output instanceof si&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ui&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Zg(t.prototype,r),n&&Zg(t,n),e}();function eS(e){return(eS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rS(e,t){return!t||"object"!==eS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nS(e,t,r){return(nS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function oS(e){return(oS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iS(e,t){return(iS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.SummaryAttributesJobsParameter=$g;var aS=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=rS(this,oS(t).call(this,e,r))).url=ge.urlPathAppend(n.url,"spatialanalyst/summaryattributes"),n.CLASS_NAME="SuperMap.SummaryAttributesJobsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iS(e,t)}(t,bi),r=t,(n=[{key:"destroy",value:function(){nS(oS(t.prototype),"destroy",this).call(this)}},{key:"getSummaryAttributesJobs",value:function(){nS(oS(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryAttributesJob",value:function(e){nS(oS(t.prototype),"getJobs",this).call(this,ge.urlPathAppend(this.url,e))}},{key:"addSummaryAttributesJob",value:function(e,r){nS(oS(t.prototype),"addJob",this).call(this,this.url,e,$g,r)}}])&&tS(r.prototype,n),o&&tS(r,o),t}();function sS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.SummaryAttributesJobsService=aS;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var lS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes=te.AVERAGE,this.fields="",this.type=re.SUMMARYMESH,this.output=null,this.mappingParameters=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.SummaryMeshJobParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"type"!==r?"output"!==r?("SUMMARYMESH"===e.type&&"regionDataset"!==r||"SUMMARYREGION"===e.type&&!n(["meshType","resolution","query"],r))&&(t.analyst=t.analyst||{},"query"===r&&e[r]?t.analyst[r]=e[r].toBBOX():t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):t.type=e[r]:(t.input=t.input||{},t.input[r]=e[r]);function n(e,t){for(var r=e.length;r--;)if(e[r]===t)return!0;return!1}}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null,this.output instanceof si&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ui&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&sS(t.prototype,r),n&&sS(t,n),e}();function uS(e){return(uS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fS(e,t){return!t||"object"!==uS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pS(e,t,r){return(pS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function hS(e){return(hS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yS(e,t){return(yS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.SummaryMeshJobParameter=lS;var dS=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=fS(this,hS(t).call(this,e,r))).url=ge.urlPathAppend(n.url,"spatialanalyst/aggregatepoints"),n.CLASS_NAME="SuperMap.SummaryMeshJobsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yS(e,t)}(t,bi),r=t,(n=[{key:"destroy",value:function(){pS(hS(t.prototype),"destroy",this).call(this)}},{key:"getSummaryMeshJobs",value:function(){pS(hS(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryMeshJob",value:function(e){pS(hS(t.prototype),"getJobs",this).call(this,ge.urlPathAppend(this.url,e))}},{key:"addSummaryMeshJob",value:function(e,r){pS(hS(t.prototype),"addJob",this).call(this,this.url,e,lS,r)}}])&&cS(r.prototype,n),o&&cS(r,o),t}();function vS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.SummaryMeshJobsService=dS;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var mS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields="",this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=ee.METER,this.type=re.SUMMARYMESH,this.output=null,this.mappingParameters=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.SummaryRegionJobParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"type"!==r&&"type"!==r?"output"!==r?("SUMMARYREGION"===e.type||"SUMMARYMESH"===e.type&&"regionDataset"!==r)&&(t.analyst=t.analyst||{},"query"===r&&e[r]?t.analyst[r]=e[r].toBBOX():t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):t.type=e[r]:(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.sumShape=null,this.regionDataset=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null,this.output instanceof si&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ui&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&vS(t.prototype,r),n&&vS(t,n),e}();function bS(e){return(bS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function SS(e,t){return!t||"object"!==bS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wS(e,t,r){return(wS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=OS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function OS(e){return(OS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _S(e,t){return(_S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.SummaryRegionJobParameter=mS;var PS=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=SS(this,OS(t).call(this,e,r))).url=ge.urlPathAppend(n.url,"spatialanalyst/summaryregion"),n.CLASS_NAME="SuperMap.SummaryRegionJobsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_S(e,t)}(t,bi),r=t,(n=[{key:"destroy",value:function(){wS(OS(t.prototype),"destroy",this).call(this)}},{key:"getSummaryRegionJobs",value:function(){wS(OS(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryRegionJob",value:function(e){wS(OS(t.prototype),"getJobs",this).call(this,ge.urlPathAppend(this.url,e))}},{key:"addSummaryRegionJob",value:function(e,r){wS(OS(t.prototype),"addJob",this).call(this,this.url,e,mS,r)}}])&&gS(r.prototype,n),o&&gS(r,o),t}();function CS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.SummaryRegionJobsService=PS;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ES=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.SupplyCenter"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){if(t)return new e({maxWeight:t.maxWeight,nodeID:t.nodeID,resourceValue:t.resourceValue,type:t.type})}}],(r=[{key:"destroy",value:function(){this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null}}])&&CS(t.prototype,r),n&&CS(t,n),e}();function TS(e){return(TS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xS(e,t){return!t||"object"!==TS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function AS(e,t,r){return(AS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function jS(e){return(jS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RS(e,t){return(RS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.SupplyCenter=ES;var LS=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=xS(this,jS(t).call(this,e,r))).CLASS_NAME="SuperMap.SurfaceAnalystService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RS(e,t)}(t,yo),r=t,(n=[{key:"destroy",value:function(){AS(jS(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Va){var t,r=this;t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t="",r={},n=this;if(e instanceof Za)n.url=ge.urlPathAppend(n.url,"datasets/"+e.dataset+"/"+e.surfaceAnalystMethod.toLowerCase()),Za.toObject(e,r),t=ge.toJSON(r);else{if(!(e instanceof rf))return;n.url=ge.urlPathAppend(n.url,"geometry/"+e.surfaceAnalystMethod.toLowerCase()),t=ge.toJSON(e)}return n.url=ge.urlAppend(n.url,"returnContent=true"),t}}])&&kS(r.prototype,n),o&&kS(r,o),t}();function MS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.SurfaceAnalystService=LS;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var NS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName="",this.planCurvatureName="",this.deleteExistResultDataset=!1,ge.extend(this,t),this.CLASS_NAME="SuperMap.TerrainCurvatureCalculationParameters")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"dataset"!==r&&(t[r]=e[r])}}],(r=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.zFactor=1,e.averageCurvatureName=null,e.profileCurvatureName=null,e.planCurvatureName=null,e.deleteExistResultDataset=!0}}])&&MS(t.prototype,r),n&&MS(t,n),e}();function IS(e){return(IS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FS(e,t){return!t||"object"!==IS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function BS(e,t,r){return(BS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=GS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function GS(e){return(GS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function US(e,t){return(US=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.TerrainCurvatureCalculationParameters=NS;var HS=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=FS(this,GS(t).call(this,e,r))).CLASS_NAME="SuperMap.TerrainCurvatureCalculationService",n}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&US(e,t)}(t,yo),r=t,(o=[{key:"destroy",value:function(){BS(GS(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t=this,r={};e instanceof NS&&(t.url=ge.urlPathAppend(t.url,"datasets/"+e.dataset+"/terraincalculation/curvature")),NS.toObject(e,r);var o=n.Util.toJSON(r);t.url=ge.urlAppend(t.url,"returnContent=true"),t.request({method:"POST",data:o,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&DS(r.prototype,o),i&&DS(r,i),t}();function JS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.TerrainCurvatureCalculationService=HS;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var WS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.color=new cr,this.end=0,this.start=0,this.visible=!0,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridRangeItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return ge.copy(r,t),r.color=cr.fromJson(t.color),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.color&&(e.color.destroy(),e.color=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=ge.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e}}])&&JS(t.prototype,r),n&&JS(t,n),e}();function VS(e){return(VS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YS(e,t,r){return(YS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=QS(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function QS(e){return(QS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XS(e,t){return(XS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.ThemeGridRangeItem=WS;var KS=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=QS(t).call(this,"GRIDRANGE",e))||"object"!==VS(o)&&"function"!=typeof o?qS(n):o).items=null,r.rangeMode=g.EQUALINTERVAL,r.rangeParameter=0,r.colorGradientType=w.YELLOW_RED,r.reverseColor=!1,e&&ge.extend(qS(r),e),r.CLASS_NAME="SuperMap.ThemeGridRange",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&XS(e,t)}(t,ch),r=t,o=[{key:"fromObj",value:function(e){if(e){var r=new t;ge.copy(r,e);var n=e.items,o=n?n.length:0;r.items=[];for(var i=0;i<o;i++)r.items.push(WS.fromObj(n[i]));return r}}}],(n=[{key:"destroy",value:function(){YS(QS(t.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var r in e.items)e.items[r].destroy(),e.items[r]=null;e.items=null}e.reverseColor=null,e.rangeMode=null,e.rangeParameter=null,e.colorGradientType=null}}])&&zS(r.prototype,n),o&&zS(r,o),t}();function ZS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ThemeGridRange=KS;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $S=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.color=new cr,this.unique=null,this.visible=!0,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridUniqueItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){var r=new e;return ge.copy(r,t),r.color=cr.fromJson(t.color),r}}],(r=[{key:"destroy",value:function(){var e=this;e.caption=null,e.unique=null,e.color&&(e.color.destroy(),e.color=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=ge.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e}}])&&ZS(t.prototype,r),n&&ZS(t,n),e}();function ew(e){return(ew="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nw(e,t,r){return(nw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ow(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ow(e){return(ow=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iw(e,t){return(iw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.ThemeGridUniqueItem=$S;var aw=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=ow(t).call(this,"GRIDUNIQUE",e))||"object"!==ew(o)&&"function"!=typeof o?rw(n):o).defaultcolor=new cr,r.items=null,e&&ge.extend(rw(r),e),r.CLASS_NAME="SuperMap.ThemeGridUnique",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iw(e,t)}(t,ch),r=t,o=[{key:"fromObj",value:function(e){var r=new t,n=e.items,o=n?n.length:0;ge.extend(r,e),r.items=[],r.defaultcolor=cr.fromJson(e.defaultcolor);for(var i=0;i<o;i++)r.items.push($S.fromObj(n[i]));return r}}],(n=[{key:"destroy",value:function(){nw(ow(t.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var r in e.items)e.items[r].destroy(),e.items[r]=null;e.items=null}e.defaultcolor&&(e.defaultcolor.destroy(),e.defaultcolor=null)}},{key:"toServerJSONObject",value:function(){var e={};if((e=ge.copyAttributes(e,this)).defaultcolor&&e.defaultcolor.toServerJSONObject&&(e.defaultcolor=e.defaultcolor.toServerJSONObject()),e.items){for(var t=[],r=e.items.length,n=0;n<r;n++)t.push(e.items[n].toServerJSONObject());e.items=t}return e}}])&&tw(r.prototype,n),o&&tw(r,o),t}();function sw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ThemeGridUnique=aw;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var lw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.unique=null,this.offsetX=0,this.offsetY=0,this.visible=!0,this.style=new ph,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelUniqueItem"}var t,r,n;return t=e,n=[{key:"fromObj",value:function(t){if(t){var r=new e;return ge.copy(r,t),r}}}],(r=[{key:"destroy",value:function(){var e=this;e.unique=null,e.caption=null,e.offsetX=null,e.offsetY=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}}])&&sw(t.prototype,r),n&&sw(t,n),e}();function uw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ThemeLabelUniqueItem=lw;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var cw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetNames=null,this.dataSourceNames=null,this.joinItems=null,this.themes=null,this.displayFilters=null,this.displayOrderBys=null,this.fieldValuesDisplayFilter=null,t&&ge.extend(this,t),this.CLASS_NAME="SuperMap.ThemeParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e=this;if(e.datasetNames=null,e.dataSourceNames=null,e.joinItems){for(var t=0,r=e.joinItems,n=r.length;t<n;t++)r[t].destroy();e.joinItems=null}if(e.themes){for(var o=0,i=e.themes,a=i.length;o<a;o++)i[o].destroy();e.themes=null}}}])&&uw(t.prototype,r),n&&uw(t,n),e}();function fw(e){return(fw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yw(e,t,r){return(yw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dw(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function dw(e){return(dw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vw(e,t){return(vw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.ThemeParameters=cw;var mw=function(e){function t(e,r){var o,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,o=!(a=dw(t).call(this,e,r))||"object"!==fw(a)&&"function"!=typeof a?hw(i):a,r&&n.Util.extend(hw(o),r),o.url=ge.urlPathAppend(o.url,"tempLayersSet"),o.CLASS_NAME="SuperMap.ThemeService",o}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vw(e,t)}(t,Wn),r=t,(o=[{key:"destroy",value:function(){yw(dw(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof cw){var t,r=this;t=r.getJsonParameters(e),r.request({method:"POST",data:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t,r="",n=null,o=null,i=null;r+="[{'type': 'UGC','subLayers': {'layers': [";for(var a=0;a<e.themes.length;a++){n=e.themes[a];var s=ge.toJSON(n);if(r+="{'theme': "+(s=s.slice(0,-1))+"},'type': 'UGC','ugcLayerType': 'THEME',",(o=e.displayFilters)&&o.length>0&&(1===o.length?r+="'displayFilter':\""+o[0]+'",':r+="'displayFilter':\""+o[a]+'",'),(i=e.displayOrderBy)&&i.length>0&&(1===i.length?r+="'displayOrderBy':'"+i[0]+"',":r+="'displayOrderBy':'"+i[a]+"',"),(t=e.fieldValuesDisplayFilter)&&(r+="'fieldValuesDisplayFilter':"+ge.toJSON(t)+","),e.joinItems&&e.joinItems.length>0&&e.joinItems[a]&&(r+="'joinItems':["+ge.toJSON(e.joinItems[a])+"],"),e.datasetNames&&e.dataSourceNames){var l=e.datasetNames[a]?a:e.datasetNames.length-1,u=e.dataSourceNames[a]?a:e.dataSourceNames.length-1;r+="'datasetInfo': {'name': '"+e.datasetNames[l]+"','dataSourceName': '"+e.dataSourceNames[u]+"'}},"}else r+="},"}e.themes&&e.themes.length>0&&(r=r.substring(0,r.length-1)),r+="]},";var c=this.url.split("/");return r+="'name': '"+c[c.length-2]+"'}]"}}])&&pw(r.prototype,o),i&&pw(r,i),t}();function bw(e){return(bw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Sw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ww(e,t,r){return(ww="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ow(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ow(e){return(Ow=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _w(e,t){return(_w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.ThemeService=mw;var Pw=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=Ow(t).call(this,e,r))||"object"!==bw(i)&&"function"!=typeof i?Sw(o):i).mode=null,r&&ge.extend(Sw(n),r),n.CLASS_NAME="SuperMap.ThiessenAnalystService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_w(e,t)}(t,yo),r=t,(n=[{key:"destroy",value:function(){ww(Ow(t.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},r=this;e instanceof ss?(r.mode="datasets",r.url=ge.urlPathAppend(r.url,"datasets/"+e.dataset+"/thiessenpolygon"),ss.toObject(e,t)):e instanceof cf&&(r.mode="geometry",r.url=ge.urlPathAppend(r.url,"geometry/thiessenpolygon"),cf.toObject(e,t));var n=ge.toJSON(t);r.url=ge.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:n,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}])&&gw(r.prototype,n),o&&gw(r,o),t}();function Cw(e){return(Cw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ew(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kw(e,t,r){return(kw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xw(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function xw(e){return(xw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Aw(e,t){return(Aw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.ThiessenAnalystService=Pw;var jw=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(i=xw(t).call(this,e,r))||"object"!==Cw(i)&&"function"!=typeof i?Tw(o):i,r&&ge.extend(Tw(n),r),n.CLASS_NAME="SuperMap.GeometryBatchAnalystService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Aw(e,t)}(t,yo),r=t,(n=[{key:"processAsync",value:function(e){var t=this;t.url=ge.urlPathAppend(t.url,"geometry/batchanalyst"),t.url=ge.urlAppend(t.url,"returnContent=true&ignoreAnalystParam=true");var r=t._processParams(e),n=ge.toJSON(r);t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}},{key:"_processParams",value:function(e){var t=this;if(ge.isArray(e)){var r=[];return e.map(function(e){return r.push(t._toJSON(e)),e}),r}}},{key:"_toJSON",value:function(e){var t={};if("buffer"===e.analystName)t.analystName="buffer",t.param={},Zo.toObject(e.param,t.param);else if("overlay"===e.analystName)t.analystName="overlay",t.param={},Qc.toObject(e.param,t.param);else if("interpolationDensity"===e.analystName)t.analystName="interpolationDensity",t.param={},kd.toObject(e.param,t.param);else if("interpolationidw"===e.analystName)t.analystName="interpolationidw",t.param={},kd.toObject(e.param,t.param);else if("interpolationRBF"===e.analystName)t.analystName="interpolationRBF",t.param={},kd.toObject(e.param,t.param);else if("interpolationKriging"===e.analystName)t.analystName="interpolationKriging",t.param={},kd.toObject(e.param,t.param);else{if("thiessenpolygon"!==e.analystName)return e;t.analystName="thiessenpolygon",t.param={},cf.toObject(e.param,t.param)}return t}},{key:"destroy",value:function(){kw(xw(t.prototype),"destroy",this).call(this)}}])&&Ew(r.prototype,n),o&&Ew(r,o),t}();function Rw(e){return(Rw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mw(e,t){return!t||"object"!==Rw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nw(e,t,r){return(Nw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Iw(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Iw(e){return(Iw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dw(e,t){return(Dw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.GeometryBatchAnalystService=jw;var Fw=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Mw(this,Iw(t).call(this,e,r))).CLASS_NAME="SuperMap.TilesetsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dw(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){Nw(Iw(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(){if(this.url){var e=this;e.url=ge.urlPathAppend(e.url,"tilesets"),e.request({method:"GET",scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}}])&&Lw(r.prototype,n),o&&Lw(r,o),t}();function Bw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.TilesetsService=Fw;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Gw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetTopology="",this.tolerance="",this.rule=ne.REGIONNOOVERLAP,this.output=null,this.mappingParameters=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.TopologyValidatorJobsParameter")}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetTopology=null,this.tolerance=null,this.rule=null,this.output instanceof si&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ui&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Bw(t.prototype,r),n&&Bw(t,n),e}();function Uw(e){return(Uw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jw(e,t){return!t||"object"!==Uw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ww(e,t,r){return(Ww="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vw(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Vw(e){return(Vw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zw(e,t){return(zw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.TopologyValidatorJobsParameter=Gw;var qw=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Jw(this,Vw(t).call(this,e,r))).url=ge.urlPathAppend(n.url,"spatialanalyst/topologyvalidator"),n.CLASS_NAME="SuperMap.TopologyValidatorJobsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zw(e,t)}(t,bi),r=t,(n=[{key:"destroy",value:function(){Ww(Vw(t.prototype),"destroy",this).call(this)}},{key:"getTopologyValidatorJobs",value:function(){Ww(Vw(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getTopologyValidatorJob",value:function(e){Ww(Vw(t.prototype),"getJobs",this).call(this,ge.urlPathAppend(this.url,e))}},{key:"addTopologyValidatorJob",value:function(e,r){Ww(Vw(t.prototype),"addJob",this).call(this,this.url,e,Gw,r)}}])&&Hw(r.prototype,n),o&&Hw(r,o),t}();function Yw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.TopologyValidatorJobsService=qw;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Qw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.lineID=null,this.lineName=null,this.lineAliasName=null,this.startStopIndex=null,this.startStopName=null,this.startStopAliasName=null,this.endStopIndex=null,this.endStopName=null,this.endStopAliasName=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.TransferLine"}var t,r,n;return t=e,n=[{key:"fromJson",value:function(t){if(t)return new e({lineID:t.lineID,lineName:t.lineName,lineAliasName:t.lineAliasName,startStopIndex:t.startStopIndex,startStopName:t.startStopName,startStopAliasName:t.startStopAliasName,endStopIndex:t.endStopIndex,endStopName:t.endStopName,endStopAliasName:t.endStopAliasName})}}],(r=[{key:"destroy",value:function(){ge.reset(this)}}])&&Yw(t.prototype,r),n&&Yw(t,n),e}();function Xw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.TransferLine=Qw;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Kw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.transferLines=null,this.points=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.TransferPathParameters"}var t,r,n;return t=e,n=[{key:"toJson",value:function(e){if(e)return ge.toJSON(e)}}],(r=[{key:"destroy",value:function(){ge.reset(this)}}])&&Xw(t.prototype,r),n&&Xw(t,n),e}();function Zw(e){return(Zw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function eO(e,t){return!t||"object"!==Zw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tO(e,t,r){return(tO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rO(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function rO(e){return(rO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nO(e,t){return(nO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.TransferPathParameters=Kw;var oO=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=eO(this,rO(t).call(this,e,r))).CLASS_NAME="SuperMap.TransferPathService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nO(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){tO(rO(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Kw){var t,r=this;r.url=ge.urlPathAppend(r.url,"path"),t={points:ge.toJSON(e.points),transferLines:ge.toJSON(e.transferLines)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&$w(r.prototype,n),o&&$w(r,o),t}();function iO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.TransferPathService=oO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var aO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.solutionCount=6,this.transferPreference=B.NONE,this.transferTactic=F.LESS_TIME,this.walkingRatio=null,this.points=!1,this.evadeLines=null,this.evadeStops=null,this.priorLines=null,this.priorStops=null,this.travelTime=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.TransferSolutionParameters"}var t,r,n;return t=e,n=[{key:"toJson",value:function(e){if(e)return ge.toJSON(e)}}],(r=[{key:"destroy",value:function(){ge.reset(this)}}])&&iO(t.prototype,r),n&&iO(t,n),e}();function sO(e){return(sO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function uO(e,t){return!t||"object"!==sO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cO(e,t,r){return(cO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fO(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function fO(e){return(fO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pO(e,t){return(pO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.TransferSolutionParameters=aO;var hO=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=uO(this,fO(t).call(this,e,r))).CLASS_NAME="SuperMap.TransferSolutionService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pO(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){cO(fO(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof aO){var t,r=this;r.url=ge.urlPathAppend(r.url,"solutions"),t={points:ge.toJSON(e.points),walkingRatio:e.walkingRatio,transferTactic:e.transferTactic,solutionCount:e.solutionCount,transferPreference:e.transferPreference},e.evadeLines&&(t.evadeLines=ge.toJSON(e.evadeLines)),e.evadeStops&&(t.evadeStops=ge.toJSON(e.evadeStops)),e.priorLines&&(t.priorLines=ge.toJSON(e.priorLines)),e.priorStops&&(t.priorStops=ge.toJSON(e.priorStops)),e.travelTime&&(t.travelTime=e.travelTime),r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&lO(r.prototype,n),o&&lO(r,o),t}();function yO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.TransferSolutionService=hO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var dO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.edgeId="",this.fromNodeId="",this.toNodeId="",this.weightField="",this.edgeWeight="",ge.extend(this,t),this.CLASS_NAME="SuperMap.UpdateEdgeWeightParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.edgeId=null,this.fromNodeId=null,this.toNodeId=null,this.weightField=null,this.edgeWeight=null}}])&&yO(t.prototype,r),n&&yO(t,n),e}();function vO(e){return(vO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bO(e,t){return!t||"object"!==vO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gO(e,t,r){return(gO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=SO(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function SO(e){return(SO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wO(e,t){return(wO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.UpdateEdgeWeightParameters=dO;var OO=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=bO(this,SO(t).call(this,e,r))).CLASS_NAME="SuperMap.UpdateEdgeWeightService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wO(e,t)}(t,Mi),r=t,(n=[{key:"destroy",value:function(){gO(SO(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof dO){var t=this,r=t.parse(e);t.url=ge.urlPathAppend(t.url,r);var n=e.edgeWeight?e.edgeWeight:null;t.request({method:"PUT",scope:t,data:n,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}},{key:"parse",value:function(e){if(e){var t="";for(var r in e)if(""!==e[r]&&"edgeWeight"!==e[r])switch(r){case"edgeId":t+="/edgeweight/"+e[r];break;case"fromNodeId":t+="/fromnode/"+e[r];break;case"toNodeId":t+="/tonode/"+e[r];break;case"weightField":t+="/weightfield/"+e[r]}return t}}}])&&mO(r.prototype,n),o&&mO(r,o),t}();function _O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.UpdateEdgeWeightService=OO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var PO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.nodeId="",this.fromEdgeId="",this.toEdgeId="",this.weightField="",this.turnNodeWeight="",ge.extend(this,t),this.CLASS_NAME="SuperMap.UpdateTurnNodeWeightParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.nodeId=null,this.fromEdgeId=null,this.toEdgeId=null,this.weightField=null,this.turnNodeWeight=null}}])&&_O(t.prototype,r),n&&_O(t,n),e}();function CO(e){return(CO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function TO(e,t){return!t||"object"!==CO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kO(e,t,r){return(kO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xO(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function xO(e){return(xO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AO(e,t){return(AO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.UpdateTurnNodeWeightParameters=PO;var jO=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=TO(this,xO(t).call(this,e,r))).CLASS_NAME="SuperMap.UpdateTurnNodeWeightService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AO(e,t)}(t,Mi),r=t,(n=[{key:"destroy",value:function(){kO(xO(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof PO){var t=this,r=t.parse(e);t.url=ge.urlPathAppend(t.url,r);var n=e.turnNodeWeight?e.turnNodeWeight:null;t.request({method:"PUT",scope:t,data:n,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}},{key:"parse",value:function(e){if(e){var t="";for(var r in e)if(""!==e[r]&&"turnNodeWeight"!==e[r])switch(r){case"nodeId":t+="/turnnodeweight/"+e[r];break;case"fromEdgeId":t+="/fromedge/"+e[r];break;case"toEdgeId":t+="/toedge/"+e[r];break;case"weightField":t+="/weightfield/"+e[r]}return t}}}])&&EO(r.prototype,n),o&&EO(r,o),t}();function RO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.UpdateTurnNodeWeightService=jO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var LO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.datasetName="",this.datasetVectorClip="",this.geometryClip="",this.mode=Z.CLIP,this.output=null,this.mappingParameters=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.VectorClipJobsParameter"}var t,r,n;return t=e,n=[{key:"toObject",value:function(e,t){for(var r in e)"datasetName"!==r?"output"!==r?(t.analyst=t.analyst||{},t.analyst[r]=e[r],"mappingParameters"===r&&(t.analyst[r]=t.analyst[r]||{},t.analyst.mappingParameters=e[r])):(t.output=t.output||{},t.output=e[r]):(t.input=t.input||{},t.input[r]=e[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetVectorClip=null,this.geometryClip=null,this.mode=null,this.output instanceof si&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ui&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&RO(t.prototype,r),n&&RO(t,n),e}();function MO(e){return(MO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function IO(e,t){return!t||"object"!==MO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function DO(e,t,r){return(DO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=FO(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function FO(e){return(FO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BO(e,t){return(BO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.VectorClipJobsParameter=LO;var GO=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=IO(this,FO(t).call(this,e,r))).url=ge.urlPathAppend(n.url,"spatialanalyst/vectorclip"),n.CLASS_NAME="SuperMap.VectorClipJobsService",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BO(e,t)}(t,bi),r=t,(n=[{key:"destroy",value:function(){DO(FO(t.prototype),"destroy",this).call(this)}},{key:"getVectorClipJobs",value:function(){DO(FO(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getVectorClipJob",value:function(e){DO(FO(t.prototype),"getJobs",this).call(this,ge.urlPathAppend(this.url,e))}},{key:"addVectorClipJob",value:function(e,r){DO(FO(t.prototype),"addJob",this).call(this,this.url,e,LO,r)}}])&&NO(r.prototype,n),o&&NO(r,o),t}();function UO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.VectorClipJobsService=GO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var HO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.RasterFunctionParameter"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.type=null}}])&&UO(t.prototype,r),n&&UO(t,n),e}();function JO(e){return(JO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function VO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zO(e,t,r){return(zO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qO(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function qO(e){return(qO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function YO(e,t){return(YO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.RasterFunctionParameter=HO;var QO=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=qO(t).call(this,e))||"object"!==JO(o)&&"function"!=typeof o?VO(n):o).redIndex=0,r.nirIndex=1,r.colorMap="0:ffffe5ff;0.1:f7fcb9ff;0.2:d9f0a3ff;0.3:addd8eff;0.4:78c679ff;0.5:41ab5dff;0.6:238443ff;0.7:006837ff;1:004529ff",r.type=se.NDVI,ge.extend(VO(r),e),r.CLASS_NAME="SuperMap.NDVIParameter",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&YO(e,t)}(t,HO),r=t,(n=[{key:"destroy",value:function(){zO(qO(t.prototype),"destroy",this).call(this),this.redIndex=null,this.nirIndex=null,this.colorMap=null}},{key:"toJSON",value:function(){return{redIndex:this.redIndex,nirIndex:this.nirIndex,colorMap:this.colorMap,type:this.type}}}])&&WO(r.prototype,n),o&&WO(r,o),t}();function XO(e){return(XO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function KO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ZO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $O(e,t,r){return($O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=e_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function e_(e){return(e_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function t_(e,t){return(t_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.NDVIParameter=QO;var r_=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(r=!(o=e_(t).call(this,e))||"object"!==XO(o)&&"function"!=typeof o?ZO(n):o).altitude=45,r.azimuth=315,r.zFactor=1,r.type=se.HILLSHADE,ge.extend(ZO(r),e),r.CLASS_NAME="SuperMap.HillshadeParameter",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&t_(e,t)}(t,HO),r=t,(n=[{key:"destroy",value:function(){$O(e_(t.prototype),"destroy",this).call(this),this.altitude=null,this.azimuth=null,this.zFactor=null}},{key:"toJSON",value:function(){return{altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,type:this.type}}}])&&KO(r.prototype,n),o&&KO(r,o),t}();function n_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.HillshadeParameter=r_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var o_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobCustomItems",ge.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.name=null,this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={name:this.name};return this.title&&(e.title=this.title),this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),ge.toJSON(e)}}])&&n_(t.prototype,r),n&&n_(t,n),e}();function i_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.WebPrintingJobCustomItems=o_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var a_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobImage",ge.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={};return this.picAsUrl&&(e.picAsUrl=this.picAsUrl),this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),ge.toJSON(e)}}])&&i_(t.prototype,r),n&&i_(t,n),e}();function s_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.WebPrintingJobImage=a_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var l_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.layerType=null,this.url=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayers",ge.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.name=null,this.layerType=null,this.url=null}}])&&s_(t.prototype,r),n&&s_(t,n),e}();function u_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.WebPrintingJobLayers=l_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var c_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers=null,this.customItems=null,this.CLASS_NAME="SuperMap.WebPrintingJobLegendOptions",ge.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers instanceof l_&&(this.layers.destroy(),this.layers=null),this.customItems instanceof o_&&(this.customItems.destroy(),this.customItems=null)}},{key:"toJSON",value:function(){var e={title:this.title||""};return this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64?e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,""):this.customItems&&(e.customItems=this.customItems),ge.toJSON(e)}}])&&u_(t.prototype,r),n&&u_(t,n),e}();function f_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.WebPrintingJobLegendOptions=c_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var p_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.center=null,this.scale=null,this.layerNames=null,this.image=null,this.layers=null,this.CLASS_NAME="SuperMap.WebPrintingJobLittleMapOptions",ge.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.center=null,this.scale=null,this.layerNames=null,this.image instanceof a_&&(this.image.destroy(),this.image=null),this.layers instanceof l_&&(this.layers.destroy(),this.layers=null)}},{key:"toJSON",value:function(){var e={scale:this.scale,center:this.center};return this.layerNames?e.layerNames=this.layerNames:this.layers&&(e.layers=this.layers),this.image&&(e.image=this.image),ge.toJSON(e)}}])&&f_(t.prototype,r),n&&f_(t,n),e}();function h_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.WebPrintingJobLittleMapOptions=p_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var y_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobNorthArrowOptions",ge.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={};return this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),ge.toJSON(e)}}])&&h_(t.prototype,r),n&&h_(t,n),e}();function d_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.WebPrintingJobNorthArrowOptions=y_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var v_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null,this.CLASS_NAME="SuperMap.WebPrintingJobScaleBarOptions",ge.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null}},{key:"toJSON",value:function(){var e={scaleText:this.scaleText||"",type:this.type||"BAR",intervals:this.intervals||"",unit:this.unit||"METER"};return this.orientation&&(e.orientation=this.orientation),ge.toJSON(e)}}])&&d_(t.prototype,r),n&&d_(t,n),e}();function m_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.WebPrintingJobScaleBarOptions=v_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var b_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=null,this.url=null,this.token=null,this.value=null,this.CLASS_NAME="SuperMap.WebPrintingJobContent",ge.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.type="WEBMAP",this.url=null,this.token=null,this.value=null}},{key:"toJSON",value:function(){var e={type:this.type};return this.token&&(e.token=this.token),this.url?e.url=this.url:this.value&&(e.value=this.value),ge.toJSON(e)}}])&&m_(t.prototype,r),n&&m_(t,n),e}();function g_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.WebPrintingJobContent=b_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var S_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.scaleBarOptions=null,this.northArrowOptions=null,this.littleMapOptions=null,this.legendOptions=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayoutOptions",ge.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.scaleBarOptions instanceof v_&&(this.scaleBarOptions.destroy(),this.scaleBarOptions=null),this.northArrowOptions instanceof y_&&(this.northArrowOptions.destroy(),this.northArrowOptions=null),this.littleMapOptions instanceof p_&&(this.littleMapOptions.destroy(),this.littleMapOptions=null),this.legendOptions instanceof c_&&(this.legendOptions.destroy(),this.legendOptions=null)}},{key:"toJSON",value:function(){var e={templateName:this.templateName,title:this.title,subTitle:this.subTitle,author:this.author,copyright:this.copyright};return this.scaleBarOptions&&(e.scaleBarOptions=this.scaleBarOptions),this.northArrowOptions&&(e.northArrowOptions=this.northArrowOptions),this.littleMapOptions&&(e.littleMapOptions=this.littleMapOptions),this.legendOptions&&(e.legendOptions=this.legendOptions),ge.toJSON(e)}}])&&g_(t.prototype,r),n&&g_(t,n),e}();function w_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.WebPrintingJobLayoutOptions=S_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var O_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.format=null,this.dpi=96,this.scale=null,this.rotation=null,this.center=null,this.CLASS_NAME="SuperMap.WebPrintingJobExportOptions",ge.extend(this,t)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.format=null,this.dpi=null,this.scale=null,this.rotation=null,this.center=null,this.outputSize=null}},{key:"toJSON",value:function(){var e={format:this.format||"PDF",dpi:this.dpi,scale:this.scale,center:this.center};return this.rotation&&(e.rotation=this.rotation),this.outputSize&&(e.outputSize=this.outputSize),ge.toJSON(e)}}])&&w_(t.prototype,r),n&&w_(t,n),e}();function __(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.WebPrintingJobExportOptions=O_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var P_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.content=null,this.layoutOptions=null,this.exportOptions=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.WebPrintingJobParameters")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.content instanceof b_&&(this.content.destroy(),this.content=null),this.layoutOptions instanceof S_&&(this.layoutOptions.destroy(),this.layoutOptions=null),this.exportOptions instanceof O_&&(this.exportOptions.destroy(),this.exportOptions=null)}}])&&__(t.prototype,r),n&&__(t,n),e}();function C_(e){return(C_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T_(e,t){return!t||"object"!==C_(t)&&"function"!=typeof t?k_(e):t}function k_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x_(e,t,r){return(x_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function A_(e){return(A_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j_(e,t){return(j_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.WebPrintingJobParameters=P_;var R_=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=T_(this,A_(t).call(this,e,r)),r&&ge.extend(k_(n),r),n.CLASS_NAME="SuperMap.WebPrintingService",n.url?n:T_(n)}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j_(e,t)}(t,Wn),r=t,(n=[{key:"destroy",value:function(){x_(A_(t.prototype),"destroy",this).call(this)}},{key:"createWebPrintingJob",value:function(e){if(e){e.layoutOptions&&e.layoutOptions.legendOptions&&(!e.layoutOptions.legendOptions.title&&(e.layoutOptions.legendOptions.title=""),e.layoutOptions.legendOptions.picAsBase64=e.layoutOptions.legendOptions.picAsBase64&&e.layoutOptions.legendOptions.picAsBase64.replace(/^data:.+;base64,/,""),e.layoutOptions.legendOptions.customItems&&e.layoutOptions.legendOptions.customItems.hasOwnProperty("picAsBase64")&&(e.layoutOptions.legendOptions.customItems.picAsBase64=e.layoutOptions.legendOptions.customItems.picAsBase64.replace(/^data:.+;base64,/,"")));var t=this;t.request({url:t._processUrl("jobs"),method:"POST",data:ge.toJSON(e),scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}},{key:"getPrintingJob",value:function(e){var t=this,r=t._processUrl("jobs/".concat(e));t.request({url:r,method:"GET",scope:t,success:function(e){t.rollingProcess(e,r)},failure:t.serviceProcessFailed})}},{key:"getPrintingJobResult",value:function(e){var t=this;t.request({url:t._processUrl("jobs/".concat(e,"/result")),method:"GET",scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}},{key:"getLayoutTemplates",value:function(){var e=this;e.request({url:e._processUrl("layouts"),method:"GET",scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}},{key:"rollingProcess",value:function(e,t){var r=this;if(e)var n=setInterval(function(){r.request({url:t,method:"GET",scope:r,success:function(e){switch(e.status){case"FINISHED":clearInterval(n),r.serviceProcessCompleted(e);break;case"ERROR":clearInterval(n),r.serviceProcessFailed(e);break;case"RUNNING":r.events.triggerEvent("processRunning",e)}},failure:r.serviceProcessFailed})},1e3)}},{key:"_processUrl",value:function(e){return e?ge.urlPathAppend(this.url,e):this.url}}])&&E_(r.prototype,n),o&&E_(r,o),t}();n.WebPrintingService=R_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var L_=n.ServiceStatus={DOES_NOT_INVOLVE:"DOES_NOT_INVOLVE",PUBLISH_FAILED:"PUBLISH_FAILED",PUBLISHED:"PUBLISHED",PUBLISHING:"PUBLISHING",UNPUBLISHED:"UNPUBLISHED",UNPUBLISHED_FAILED:"UNPUBLISHED_FAILED"},M_=n.DataItemType={AUDIO:"AUDIO",COLOR:"COLOR",COLORSCHEME:"COLORSCHEME",CSV:"CSV",EXCEL:"EXCEL",FILLSYMBOL:"FILLSYMBOL",IMAGE:"IMAGE",LAYERTEMPLATE:"LAYERTEMPLATE",LAYOUTTEMPLATE:"LAYOUTTEMPLATE",LINESYMBOL:"LINESYMBOL",MAPTEMPLATE:"MAPTEMPLATE",MARKERSYMBOL:"MARKERSYMBOL",MBTILES:"MBTILES",PHOTOS:"PHOTOS",SHP:"SHP",SMTILES:"SMTILES",SVTILES:"SVTILES",THEMETEMPLATE:"THEMETEMPLATE",TPK:"TPK",UDB:"UDB",UGCV5:"UGCV5",UNKNOWN:"UNKNOWN",VIDEO:"VIDEO",WORKENVIRONMENT:"WORKENVIRONMENT",WORKSPACE:"WORKSPACE"},N_=n.DataItemOrderBy={FILENAME:"FILENAME",ID:"ID",LASTMODIFIEDTIME:"LASTMODIFIEDTIME",NICKNAME:"NICKNAME",SERVICESTATUS:"SERVICESTATUS",SIZE:"SIZE",STATUS:"STATUS",TYPE:"TYPE",UPDATETIME:"UPDATETIME",USERNAME:"USERNAME"},I_=n.FilterField={LINKPAGE:"LINKPAGE",MAPTITLE:"MAPTITLE",NICKNAME:"NICKNAME",RESTITLE:"RESTITLE",USERNAME:"USERNAME"};function D_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var F_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},ge.extend(this,t),this.serverType=i.ONLINE,this.CLASS_NAME="SuperMap.OnlineServiceBase"}var t,r,n;return t=e,(r=[{key:"request",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t=this.createCredentialUrl(t),n.crossOrigin=this.options.crossOrigin,n.headers=this.options.headers,en.commit(e,t,r,n).then(function(e){return e.json()})}},{key:"createCredentialUrl",value:function(e){var t=e,r=this.getCredential();if(r){var n="key="+r,o=t.substring(t.length-1,t.length);t.indexOf("?")>-1&&"?"===o?t+=n:t.indexOf("?")>-1&&"?"!==o?t+="&"+n:t+="?"+n}return t}},{key:"getCredential",value:function(){}}])&&D_(t.prototype,r),n&&D_(t,n),e}();function B_(e){return(B_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function U_(e){return(U_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J_(e,t){return(J_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.OnlineServiceBase=F_;var W_=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,n=!(i=U_(t).call(this,e))||"object"!==B_(i)&&"function"!=typeof i?H_(o):i,r=r||{},n.MD5=null,n.type=null,n.userName=null,n.fileName=null,n.size=null,n.serviceStatus=null,n.serviceId=null,n.id=null,n.lastModfiedTime=null,n.status=null,n.storageId=null,n.publishInfo=null,n.authorizeSetting=null,n.nickname=null,n.tags=[],n.description=null,n.dataItemServices=null,n.coordType=null,n.dataCheckResult=null,n.dataMetaInfo=null,n.thumbnail=null,ge.extend(H_(n),r),n.id&&(n.serviceUrl=e+"/"+n.id),n.CLASS_NAME="SuperMap.OnlineData",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J_(e,t)}(t,F_),r=t,(n=[{key:"load",value:function(){if(this.serviceUrl){var e=this;return e.request("GET",this.serviceUrl).then(function(t){ge.extend(e,t)})}}},{key:"getPublishedServices",value:function(){return this.dataItemServices}},{key:"getAuthorizeSetting",value:function(){return this.authorizeSetting}}])&&G_(r.prototype,n),o&&G_(r,o),t}();function V_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.OnlineData=W_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var z_=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootUrl="https://www.supermapol.com",this.webUrl=this.rootUrl+"/web";var t=this.webUrl+"/mycontent";this.mDatasUrl=t+"/datas",this.CLASS_NAME="SuperMap.Online"}var t,r,n;return t=e,(r=[{key:"load",value:function(){return en.get(this.rootUrl).then(function(e){return e})}},{key:"login",value:function(){rn.loginOnline(this.rootUrl,!0)}},{key:"queryDatas",value:function(e){var t=this,r=t.mDatasUrl;return e&&(e=e.toJSON()),en.get(r,e).then(function(e){if(e&&e.content&&!(e.content.length<1)){for(var r=[],n=e.content,o=n.length,i=0;i<o;i++){var a=n[i],s=new W_(t.mDatasUrl,a);r.push(s)}return r}})}}])&&V_(t.prototype,r),n&&V_(t,n),e}();function q_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.Online=z_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Y_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.userNames=null,this.types=null,this.fileName=null,this.serviceStatuses=null,this.serviceId=null,this.ids=null,this.keywords=null,this.orderBy=null,this.tags=null,this.filterFields=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.OnlineQueryDatasParameter"}var t,r,n;return t=e,(r=[{key:"toJSON",value:function(){var e=this,t={types:e.types,fileName:e.fileName,serviceStatuses:e.serviceStatuses,serviceId:e.serviceId,ids:e.ids,keywords:e.keywords,orderBy:e.orderBy,tags:e.tags,filterFields:e.filterFields};for(var r in t)null==t[r]&&delete t[r];return t}}])&&q_(t.prototype,r),n&&q_(t,n),e}();function Q_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.OnlineQueryDatasParameter=Y_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var X_=function(){function e(t){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.serviceIds=null,this.clientType=X.SERVER,this.limitation=null,ge.extend(this,t),this.CLASS_NAME="SuperMap.KeyServiceParameter"}var t,r,n;return t=e,(r=[{key:"toJSON",value:function(){return{name:this.name,serviceIds:this.serviceIds,clientType:this.clientType,limitation:this.limitation}}}])&&Q_(t.prototype,r),n&&Q_(t,n),e}();n.KeyServiceParameter=X_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var K_=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.server=null,this.tokenServiceUrl=null,this.keyServiceUrl=null,ge.extend(this,r),this.CLASS_NAME="SuperMap.ServerInfo",this.type=this.type||i.ISERVER,this.server||console.error("server url require is not  undefined");var n="/services/security/tokens";this.type===i.ISERVER&&this.server.indexOf("iserver")<0&&(n="/iserver"+n),this.tokenServiceUrl||(this.tokenServiceUrl=ge.urlPathAppend(this.server,n)),this.keyServiceUrl||(this.type===i.IPORTAL?this.keyServiceUrl=ge.urlPathAppend(this.server,"/web/mycontent/keys/register"):this.type===i.ONLINE&&(this.keyServiceUrl=ge.urlPathAppend(this.server,"/web/mycontent/keys")))};function Z_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ServerInfo=K_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userName=null,this.password=null,this.clientType=X.NONE,this.ip=null,this.referer=null,this.expiration=60,ge.extend(this,t),this.CLASS_NAME="SuperMap.TokenServiceParameter"}var t,r,n;return t=e,(r=[{key:"toJSON",value:function(){return{userName:this.userName,password:this.password,clientType:this.clientType,ip:this.ip,referer:this.referer,expiration:this.expiration}}}])&&Z_(t.prototype,r),n&&Z_(t,n),e}();n.TokenServiceParameter=$_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var eP=r(7),tP=r.n(eP);function rP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var nP=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=r||{},this.url=t,this.client=new tP.a.Client({host:this.url}),this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=new Vt(this,null,this.EVENT_TYPES),this.eventListeners=null,ge.extend(this,r),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)}var t,r,n;return t=e,(r=[{key:"setGeoFence",value:function(e){this.geoFence=e}},{key:"bulk",value:function(e,t){return this.client.bulk(e,t)}},{key:"clearScroll",value:function(e,t){return this.client.clearScroll(e,t)}},{key:"count",value:function(e,t){return this.client.count(e,t)}},{key:"create",value:function(e,t){return this.client.create(e,t)}},{key:"delete",value:function(e,t){return this.client.delete(e,t)}},{key:"deleteByQuery",value:function(e,t){return this.client.deleteByQuery(e,t)}},{key:"deleteScript",value:function(e,t){return this.client.deleteScript(e,t)}},{key:"deleteTemplate",value:function(e,t){return this.client.deleteTemplate(e,t)}},{key:"exists",value:function(e,t){return this.client.exists(e,t)}},{key:"existsSource",value:function(e,t){return this.client.existsSource(e,t)}},{key:"explain",value:function(e,t){return this.client.explain(e,t)}},{key:"fieldCaps",value:function(e,t){return this.client.fieldCaps(e,t)}},{key:"get",value:function(e,t){return this.client.get(e,t)}},{key:"getScript",value:function(e,t){return this.client.getScript(e,t)}},{key:"getSource",value:function(e,t){return this.client.getSource(e,t)}},{key:"getTemplate",value:function(e,t){return this.client.getTemplate(e,t)}},{key:"index",value:function(e,t){return this.client.index(e,t)}},{key:"info",value:function(e,t){return this.client.info(e,t)}},{key:"mget",value:function(e,t){return this.client.mget(e,t)}},{key:"msearch",value:function(e,t){var r=this;return r.client.msearch(e).then(function(e){return r._update(e.responses,t),e},function(e){return t(e),r.events.triggerEvent("error",{error:e}),e})}},{key:"msearchTemplate",value:function(e,t){return this.client.msearchTemplate(e,t)}},{key:"mtermvectors",value:function(e,t){return this.client.mtermvectors(e,t)}},{key:"ping",value:function(e,t){return this.client.ping(e,t)}},{key:"putScript",value:function(e,t){return this.client.putScript(e,t)}},{key:"putTemplate",value:function(e,t){return this.client.putTemplate(e,t)}},{key:"reindex",value:function(e,t){return this.client.reindex(e,t)}},{key:"reindexRessrottle",value:function(e,t){return this.client.reindexRessrottle(e,t)}},{key:"renderSearchTemplate",value:function(e,t){return this.client.renderSearchTemplate(e,t)}},{key:"scroll",value:function(e,t){return this.client.scroll(e,t)}},{key:"search",value:function(e,t){var r=this;return r.client.search(e).then(function(e){return r._update(e.responses,t),e},function(e){return t(e),r.events.triggerEvent("error",{error:e}),e})}},{key:"searchShards",value:function(e,t){return this.client.searchShards(e,t)}},{key:"searchTemplate",value:function(e,t){return this.client.searchTemplate(e,t)}},{key:"suggest",value:function(e,t){return this.client.suggest(e,t)}},{key:"termvectors",value:function(e,t){return this.client.termvectors(e,t)}},{key:"update",value:function(e,t){return this.client.update(e,t)}},{key:"updateByQuery",value:function(e,t){return this.client.updateByQuery(e,t)}},{key:"_update",value:function(e,t){var r=this;e&&(r.data=e,r.openGeoFence&&r.geoFence&&r._validateDatas(e),r.events.triggerEvent("change",{data:r.data}),r.change?r.change&&r.change(e):t&&t(void 0,{responses:e}))}},{key:"_validateDatas",value:function(e){if(e){e instanceof Array||(e=[e]);var t,r=e.length;for(t=0;t<r;t++)this._validateData(e[t])}}},{key:"_validateData",value:function(e){var t=this;e.hits.hits.map(function(r){var n=r._source,o=t._getMeterPerMapUnit(t.geoFence.unit),i=t.geoFence.center[0]*o,a=t.geoFence.center[1]*o,s=n.x*o,l=n.y*o;return t._distance(s,l,i,a)>t.geoFence.radius&&(t.outOfGeoFence&&t.outOfGeoFence(e),t.events.triggerEvent("outOfGeoFence",{data:e})),r})}},{key:"_distance",value:function(e,t,r,n){return Math.sqrt((e-r)*(e-r)+(t-n)*(t-n))}},{key:"_getMeterPerMapUnit",value:function(e){var t;return"meter"===e?t=1:"degree"===e&&(t=2*Math.PI*6378137/360),t}}])&&rP(t.prototype,r),n&&rP(t,n),e}();
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function oP(e){return(oP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ElasticSearch=nP;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var aP=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Util"}var t,r,n;return t=e,(r=[{key:"clone",value:function(e){var t=this.BUILTIN_OBJECT;if("object"==oP(e)&&null!==e){var r=e;if(e instanceof Array){r=[];for(var n=0,o=e.length;n<o;n++)r[n]=this.clone(e[n])}else if(!t[Object.prototype.toString.call(e)])for(var i in r={},e)e.hasOwnProperty(i)&&(r[i]=this.clone(e[i]));return r}return e}},{key:"mergeItem",value:function(e,t,r,n){var o=this.BUILTIN_OBJECT;t.hasOwnProperty(r)&&("object"!=oP(e[r])||o[Object.prototype.toString.call(e[r])]?!n&&r in e||(e[r]=t[r]):this.merge(e[r],t[r],n))}},{key:"merge",value:function(e,t,r){for(var n in t)this.mergeItem(e,t,n,r);return e}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(e,t){var r,n=this._canvas,o=this._pixelCtx,i=this._width,a=this._height,s=this._offsetX,l=this._offsetY;e+s>i&&(i=e+s+100,n.width=i,r=!0),t+l>a&&(a=t+l+100,n.height=a,r=!0),e<-s&&(i+=s=100*Math.ceil(-e/100),n.width=i,r=!0),t<-l&&(a+=l=100*Math.ceil(-t/100),n.height=a,r=!0),r&&o.translate(s,l)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}},{key:"inherits",value:function(e,t){var r=e.prototype;function n(){}for(var o in n.prototype=t.prototype,e.prototype=new n,r)e.prototype[o]=r[o];e.constructor=e}}])&&iP(t.prototype,r),n&&iP(t,n),e}();function sP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var lP=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.util=new aP,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Color"}var t,r,n;return t=e,(r=[{key:"customPalette",value:function(e){this.palette=e}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(e,t){return e|=0,(t=t||this.palette)[e%t.length]}},{key:"customHighlight",value:function(e){this.highlightColor=e}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(e,t,r,n,o,i,a){var s=this.util;this._ctx||(this._ctx=s.getContext());for(var l=this._ctx.createRadialGradient(e,t,r,n,o,i),u=0,c=a.length;u<c;u++)l.addColorStop(a[u][0],a[u][1]);return l.__nonRecursion=!0,l}},{key:"getLinearGradient",value:function(e,t,r,n,o){var i=this.util;this._ctx||(this._ctx=i.getContext());for(var a=this._ctx.createLinearGradient(e,t,r,n),s=0,l=o.length;s<l;s++)a.addColorStop(o[s][0],o[s][1]);return a.__nonRecursion=!0,a}},{key:"getStepColors",value:function(e,t,r){e=this.toRGBA(e),t=this.toRGBA(t),e=this.getData(e);for(var n=[],o=((t=this.getData(t))[0]-e[0])/r,i=(t[1]-e[1])/r,a=(t[2]-e[2])/r,s=(t[3]-e[3])/r,l=0,u=e[0],c=e[1],f=e[2],p=e[3];l<r;l++)n[l]=this.toColor([this.adjust(Math.floor(u),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(f),[0,255]),p.toFixed(4)-0],"rgba"),u+=o,c+=i,f+=a,p+=s;return u=t[0],c=t[1],f=t[2],p=t[3],n[l]=this.toColor([u,c,f,p],"rgba"),n}},{key:"getGradientColors",value:function(e,t){var r=[],n=e.length;if(void 0===t&&(t=20),1===n)r=this.getStepColors(e[0],e[0],t);else if(n>1)for(var o=0,i=n-1;o<i;o++){var a=this.getStepColors(e[o],e[o+1],t);o<i-1&&a.pop(),r=r.concat(a)}return r}},{key:"toColor",value:function(e,t){if(t=t||"rgb",e&&(3===e.length||4===e.length)){if(e=this.map(e,function(e){return e>1?Math.ceil(e):e}),t.indexOf("hex")>-1)return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1);if(t.indexOf("hs")>-1){var r=this.map(e.slice(1,3),function(e){return e+"%"});e[1]=r[0],e[2]=r[1]}return t.indexOf("a")>-1?(3===e.length&&e.push(1),e[3]=this.adjust(e[3],[0,1]),t+"("+e.slice(0,4).join(",")+")"):t+"("+e.slice(0,3).join(",")+")"}}},{key:"toArray",value:function(e){(e=this.trim(e)).indexOf("rgba")<0&&(e=this.toRGBA(e));var t=[],r=0;return e.replace(/[\d.]+/g,function(e){r<3?e|=0:e=+e,t[r++]=e}),t}},{key:"convert",value:function(e,t){if(!this.isCalculableColor(e))return e;var r=this.getData(e),n=r[3];return void 0===n&&(n=1),e.indexOf("hsb")>-1?r=this._HSV_2_RGB(r):e.indexOf("hsl")>-1&&(r=this._HSL_2_RGB(r)),t.indexOf("hsb")>-1||t.indexOf("hsv")>-1?r=this._RGB_2_HSB(r):t.indexOf("hsl")>-1&&(r=this._RGB_2_HSL(r)),r[3]=n,this.toColor(r,t)}},{key:"toRGBA",value:function(e){return this.convert(e,"rgba")}},{key:"toRGB",value:function(e){return this.convert(e,"rgb")}},{key:"toHex",value:function(e){return this.convert(e,"hex")}},{key:"toHSVA",value:function(e){return this.convert(e,"hsva")}},{key:"toHSV",value:function(e){return this.convert(e,"hsv")}},{key:"toHSBA",value:function(e){return this.convert(e,"hsba")}},{key:"toHSB",value:function(e){return this.convert(e,"hsb")}},{key:"toHSLA",value:function(e){return this.convert(e,"hsla")}},{key:"toHSL",value:function(e){return this.convert(e,"hsl")}},{key:"toName",value:function(e){for(var t in this._nameColors)if(this.toHex(this._nameColors[t])===this.toHex(e))return t;return null}},{key:"trim",value:function(e){return String(e).replace(/\s+/g,"")}},{key:"normalize",value:function(e){if(this._nameColors[e]&&(e=this._nameColors[e]),e=(e=this.trim(e)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(e)){var t=(3840&(e=parseInt(e.slice(1),16)))<<8,r=(240&e)<<4,n=15&e;e="#"+((1<<24)+(t<<4)+t+(r<<4)+r+(n<<4)+n).toString(16).slice(1)}return e}},{key:"lift",value:function(e,t){if(!this.isCalculableColor(e))return e;var r=t>0?1:-1;void 0===t&&(t=0),t=Math.abs(t)>1?1:Math.abs(t),e=this.toRGB(e);for(var n=this.getData(e),o=0;o<3;o++)n[o]=1===r?n[o]*(1-t)|0:(255-n[o])*t+n[o]|0;return"rgb("+n.join(",")+")"}},{key:"reverse",value:function(e){if(!this.isCalculableColor(e))return e;var t=this.getData(this.toRGBA(e));return t=this.map(t,function(e){return 255-e}),this.toColor(t,"rgb")}},{key:"mix",value:function(e,t,r){if(!this.isCalculableColor(e)||!this.isCalculableColor(t))return e;void 0===r&&(r=.5);for(var n=2*(r=1-this.adjust(r,[0,1]))-1,o=this.getData(this.toRGBA(e)),i=this.getData(this.toRGBA(t)),a=o[3]-i[3],s=((n*a==-1?n:(n+a)/(1+n*a))+1)/2,l=1-s,u=[],c=0;c<3;c++)u[c]=o[c]*s+i[c]*l;var f=o[3]*r+i[3]*(1-r);return f=Math.max(0,Math.min(1,f)),1===o[3]&&1===i[3]?this.toColor(u,"rgb"):(u[3]=f,this.toColor(u,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(t){var r,n,o=(t=this.normalize(t)).match(this.colorRegExp);if(null===o)throw new Error("The color format error");var i,a=[];if(o[2])i=[(r=o[2].replace("#","").split(""))[0]+r[1],r[2]+r[3],r[4]+r[5]],a=this.map(i,function(t){return e.prototype.adjust.call(this,parseInt(t,16),[0,255])});else if(o[4]){var s=o[4].split(",");n=s[3],i=s.slice(0,3),a=this.map(i,function(t){return t=Math.floor(t.indexOf("%")>0?2.55*parseInt(t,0):t),e.prototype.adjust.call(this,t,[0,255])}),void 0!==n&&a.push(this.adjust(parseFloat(n),[0,1]))}else if(o[5]||o[6]){var l=(o[5]||o[6]).split(","),u=parseInt(l[0],0)/360,c=l[1],f=l[2];n=l[3],(a=this.map([c,f],function(t){return e.prototype.adjust.call(this,parseFloat(t)/100,[0,1])})).unshift(u),void 0!==n&&a.push(this.adjust(parseFloat(n),[0,1]))}return a}},{key:"alpha",value:function(e,t){if(!this.isCalculableColor(e))return e;null===t&&(t=1);var r=this.getData(this.toRGBA(e));return r[3]=this.adjust(Number(t).toFixed(4),[0,1]),this.toColor(r,"rgba")}},{key:"map",value:function(e,t){if("function"!=typeof t)throw new TypeError;for(var r=e?e.length:0,n=0;n<r;n++)e[n]=t(e[n]);return e}},{key:"adjust",value:function(e,t){return e<=t[0]?e=t[0]:e>=t[1]&&(e=t[1]),e}},{key:"isCalculableColor",value:function(e){return e instanceof Array||"string"==typeof e}},{key:"_HSV_2_RGB",value:function(e){var t,r,n,o=e[0],i=e[1],a=e[2];if(0===i)t=255*a,r=255*a,n=255*a;else{var s=6*o;6===s&&(s=0);var l=0|s,u=a*(1-i),c=a*(1-i*(s-l)),f=a*(1-i*(1-(s-l))),p=0,h=0,y=0;0===l?(p=a,h=f,y=u):1===l?(p=c,h=a,y=u):2===l?(p=u,h=a,y=f):3===l?(p=u,h=c,y=a):4===l?(p=f,h=u,y=a):(p=a,h=u,y=c),t=255*p,r=255*h,n=255*y}return[t,r,n]}},{key:"_HSL_2_RGB",value:function(e){var t,r,n,o=e[0],i=e[1],a=e[2];if(0===i)t=255*a,r=255*a,n=255*a;else{var s,l=2*a-(s=a<.5?a*(1+i):a+i-i*a);t=255*this._HUE_2_RGB(l,s,o+1/3),r=255*this._HUE_2_RGB(l,s,o),n=255*this._HUE_2_RGB(l,s,o-1/3)}return[t,r,n]}},{key:"_HUE_2_RGB",value:function(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),6*r<1?e+6*(t-e)*r:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}},{key:"_RGB_2_HSB",value:function(e){var t,r,n=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),l=s-a,u=s;if(0===l)t=0,r=0;else{r=l/s;var c=((s-n)/6+l/2)/l,f=((s-o)/6+l/2)/l,p=((s-i)/6+l/2)/l;n===s?t=p-f:o===s?t=1/3+c-p:i===s&&(t=2/3+f-c),t<0&&(t+=1),t>1&&(t-=1)}return[t*=360,r*=100,u*=100]}},{key:"_RGB_2_HSL",value:function(e){var t,r,n=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),l=s-a,u=(s+a)/2;if(0===l)t=0,r=0;else{r=u<.5?l/(s+a):l/(2-s-a);var c=((s-n)/6+l/2)/l,f=((s-o)/6+l/2)/l,p=((s-i)/6+l/2)/l;n===s?t=p-f:o===s?t=1/3+c-p:i===s&&(t=2/3+f-c),t<0&&(t+=1),t>1&&(t-=1)}return[t*=360,r*=100,u*=100]}}])&&sP(t.prototype,r),n&&sP(t,n),e}();function uP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var cP=new lP,fP=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"createCanvas",value:function(e,t){var r=document.createElement("canvas");return r.height=e,r.width=t,r.getContext("2d")}},{key:"getLinearGradient",value:function(e,t,r,n,o){this._ctx||(this._ctx=this.getContext());for(var i=this._ctx.createLinearGradient(e,t,r,n),a=o.length,s=1/(a-1),l=0,u=0;u<a;u++)i.addColorStop(l,o[u]),l+=s;return i.__nonRecursion=!0,i}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getStepColors",value:function(e,t,r){e=cP.toRGBA(e),t=cP.toRGBA(t),e=cP.getData(e);for(var n=[],o=((t=cP.getData(t))[0]-e[0])/r,i=(t[1]-e[1])/r,a=(t[2]-e[2])/r,s=(t[3]-e[3])/r,l=0,u=e[0],c=e[1],f=e[2],p=e[3];l<r;l++)n[l]=cP.toColor([cP.adjust(Math.floor(u),[0,255]),cP.adjust(Math.floor(c),[0,255]),cP.adjust(Math.floor(f),[0,255]),p.toFixed(4)-0],"hex"),u+=o,c+=i,f+=a,p+=s;return u=t[0],c=t[1],f=t[2],p=t[3],n[l]=cP.toColor([u,c,f,p],"hex"),n}},{key:"getGradientColors",value:function(e,t,r){var n,o,i,a=[],s=e.length;if(void 0!==t){if(s>=t)if("RANGE"===r)for(o=0;o<t;o++)a.push(e[o]);else for(o=0;o<t;o++){var l=Math.floor(o/2);if(o%2==0)a.push(e[l]);else{var u=e.length-1-l;a.push(e[u])}}else{for(n=Math.ceil(t/(s-1)),o=0,i=s-1;o<i;o++){var c=this.getStepColors(e[o],e[o+1],n);o<i-1&&c.pop(),a=a.concat(c)}for(var f=a.length-t,p=0;p<f;p++)a.splice(2,1)}return a}}}],(r=null)&&uP(t.prototype,r),n&&uP(t,n),e}();function pP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ColorsPickerUtil=fP;var hP=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"newInstance",value:function(){return this.geostatsInstance||(this.geostatsInstance=new window.geostats),this.geostatsInstance}},{key:"getInstance",value:function(e){var t=this.newInstance();return t.setSerie(e),t}},{key:"getArrayStatistic",value:function(e,t){return e.length?"Sum"===t||"求和"===t?this.getSum(e):"Maximum"===t||"最大值"===t?this.getMax(e):"Minimum"===t||"最小值"===t?this.getMin(e):"Average"===t||"平均值"===t?this.getMean(e):"Median"===t||"中位数"===t?this.getMedian(e):"times"===t||"计数"===t?this.getTimes(e):void 0:0}},{key:"getArraySegments",value:function(e,t,r){return"offset"===t?this.getEqInterval(e,r):"jenks"===t?this.getJenks(e,r):"square"===t?this.getMin(e)>=0&&this.getSqrtInterval(e,r):"logarithm"===t?this.getMin(e)>0&&this.getGeometricProgression(e,r):void 0}},{key:"getSum",value:function(e){return this.getInstance(e).sum()}},{key:"getMax",value:function(e){return this.getInstance(e).max()}},{key:"getMin",value:function(e){return this.getInstance(e).min()}},{key:"getMean",value:function(e){return this.getInstance(e).mean()}},{key:"getMedian",value:function(e){return this.getInstance(e).median()}},{key:"getTimes",value:function(e){return e.length}},{key:"getEqInterval",value:function(e,t){return this.getInstance(e).getClassEqInterval(t)}},{key:"getJenks",value:function(e,t){return this.getInstance(e).getClassJenks(t)}},{key:"getSqrtInterval",value:function(e,t){return e=e.map(function(e){return Math.sqrt(e)}),this.getInstance(e).getClassEqInterval(t).map(function(e){return e*e})}},{key:"getGeometricProgression",value:function(e,t){return this.getInstance(e).getClassGeometricProgression(t)}}],(r=null)&&pP(t.prototype,r),n&&pP(t,n),e}();n.ArrayStatistic=hP;var yP=r(8),dP=r.n(yP);
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function vP(e){return(vP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gP(e,t,r){return t&&bP(e.prototype,t),r&&bP(e,r),e}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var SP=function(){function e(t){mP(this,e),this.env=null,this.parser=null,this.ruleSet=null,this.cartoStr="",this.shaders=null,"string"==typeof t&&(this.cartoStr=t,this.env={frames:[],errors:[],error:function(e){this.errors.push(e)}},this.parser=this.getParser(this.env),this.parse(t),this.shaders=this.toShaders())}return gP(e,[{key:"getParser",value:function(e){var t,r,o,i,a,s,l,u,c,f=this;function p(){i=l[o],a=r,u=r}function h(){l[o]=i,u=r=a}function y(){r>u&&(l[o]=l[o].slice(r-u),u=r)}function d(e){var n,i,a,s;if(e instanceof Function)return e.call(c.parsers);if("string"==typeof e)n=t.charAt(r)===e?e:null,i=1,y();else{if(y(),!(n=e.exec(l[o])))return null;i=n[0].length}if(n){var f=r+=i;for(s=r+l[o].length-i;r<s&&(32===(a=t.charCodeAt(r))||10===a||9===a);)r++;return l[o]=l[o].slice(i+(r-f)),u=r,0===l[o].length&&o<l.length-1&&o++,"string"==typeof n?n:1===n.length?n[0]:n}}function v(r){var n,o={index:s,filename:e.filename,message:"Parse error.",line:0,column:-1};for(var i in o)0===r[i]&&(r[i]=o[i]);n=r.filename&&f.env.inputs&&f.env.inputs[r.filename]?f.env.inputs[r.filename]:t,r.line=(n.slice(0,r.index).match(/\n/g)||"").length+1;for(var a=r.index;a>=0&&"\n"!==n.charAt(a);a--)r.column++;return new Error([r.filename,r.line,r.column,r.message].join(";"))}return this.env=e=e||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},c={parse:function(i){var a,c=null;if(r=o=u=s=0,l=[],t=i.replace(/\r\n/g,"\n"),e.filename&&(f.env.inputs[e.filename]=t),l=function(e){for(var r,n,o,i,a=0,s=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,l=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,u=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,f=0,p=e[0],h=0;h<t.length;)if(s.lastIndex=h,(r=s.exec(t))&&r.index===h&&(h+=r[0].length,p.push(r[0])),o=t.charAt(h),l.lastIndex=u.lastIndex=h,(r=u.exec(t))&&r.index===h)h+=r[0].length,p.push(r[0]);else if(n||"/"!==o||"/"!==(i=t.charAt(h+1))&&"*"!==i||!(r=l.exec(t))||r.index!==h){switch(o){case"{":if(!n){f++,p.push(o);break}case"}":if(!n){f--,p.push(o),e[++a]=p=[];break}case"(":if(!n){n=!0,p.push(o);break}case")":if(n){n=!1,p.push(o);break}default:p.push(o)}h++}else h+=r[0].length,p.push(r[0]);return 0!==f&&(c={index:h-1,type:"Parse",message:f>0?"missing closing `}`":"missing opening `{`"}),e.map(function(e){return e.join("")})}([[]]),c)throw v(c);var p=function(e,t){var r=e.specificity,n=t.specificity;return r[0]!=n[0]?n[0]-r[0]:r[1]!=n[1]?n[1]-r[1]:r[2]!=n[2]?n[2]-r[2]:n[3]-r[3]};return(a=new n.CartoCSS.Tree.Ruleset([],d(this.parsers.primary))).root=!0,a.toList=function(e){e.error=function(t){e.errors||(e.errors=new Error("")),e.errors.message?e.errors.message+="\n"+v(t).message:e.errors.message=v(t).message},e.frames=e.frames||[];var t=this.flatten([],[],e);return t.sort(p),t},a},parsers:{primary:function(){for(var e,t=[];(e=d(this.rule)||d(this.ruleset)||d(this.comment))||d(/^[\s\n]+/)||(e=d(this.invalid));)e&&t.push(e);return t},invalid:function(){var e=d(/^[^;\n]*[;\n]/);if(e)return new n.CartoCSS.Tree.Invalid(e,a)},comment:function(){var e;if("/"===t.charAt(r))return"/"===t.charAt(r+1)?new n.CartoCSS.Tree.Comment(d(/^\/\/.*/),!0):(e=d(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new n.CartoCSS.Tree.Comment(e):void 0},entities:{quoted:function(){if('"'===t.charAt(r)||"'"===t.charAt(r)){var e=d(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);return e?new n.CartoCSS.Tree.Quoted(e[1]||e[2]):void 0}},field:function(){if(d("[")){var e=d(/(^[^\]]+)/);if(d("]"))return e?new n.CartoCSS.Tree.Field(e[1]):void 0}},comparison:function(){var e=d(/^=~|=|!=|<=|>=|<|>/);if(e)return e},keyword:function(){var e=d(/^[A-Za-z\u4e00-\u9fa5-]+[A-Za-z-0-9\u4e00-\u9fa5_]*/);if(e)return new n.CartoCSS.Tree.Keyword(e)},call:function(){var e,t;if(e=/^([\w\-]+|%)\(/.exec(l[o])){if("url"===(e=e[1]))return null;r+=e.length;if(d("("),t=d(this.entities.arguments),d(")"))return e?new n.CartoCSS.Tree.Call(e,t,r):void 0}},arguments:function(){for(var e,t=[];e=d(this.expression);){t.push(e);if(!d(","))break}return t},literal:function(){return d(this.entities.dimension)||d(this.entities.keywordcolor)||d(this.entities.hexcolor)||d(this.entities.quoted)},url:function(){var e;if("u"===t.charAt(r)&&d(/^url\(/)){e=d(this.entities.quoted)||d(this.entities.variable)||d(/^[\-\w%@_match\/.&=:;#+?~]+/)||"";return d(")")?new n.CartoCSS.Tree.URL(void 0!==e.value||e instanceof n.CartoCSS.Tree.Variable?e:new n.CartoCSS.Tree.Quoted(e)):new n.CartoCSS.Tree.Invalid(e,a,"Missing closing ) in URL.")}},variable:function(){var o,i=r;if("@"===t.charAt(r)&&(o=d(/^@[\w-]+/)))return new n.CartoCSS.Tree.Variable(o,i,e.filename)},hexcolor:function(){var e;if("#"===t.charAt(r)&&(e=d(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new n.CartoCSS.Tree.Color(e[1])},keywordcolor:function(){var e=l[o].match(/^[a-z]+/);if(e&&e[0]in n.CartoCSS.Tree.Reference.data.colors)return new n.CartoCSS.Tree.Color(n.CartoCSS.Tree.Reference.data.colors[d(/^[a-z]+/)])},dimension:function(){var e=t.charCodeAt(r);if(!(e>57||e<45||47===e)){var o=d(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);return o?new n.CartoCSS.Tree.Dimension(o[1],o[2],a):void 0}}},variable:function(){var e;if("@"===t.charAt(r)&&(e=d(/^(@[\w-]+)\s*:/)))return e[1]},entity:function(){var e=d(this.entities.call)||d(this.entities.literal),t=d(this.entities.field)||d(this.entities.variable),r=d(this.entities.url)||d(this.entities.keyword);return e||t||r},end:function(){var e;return d(";")||("string"==typeof(e="}")?t.charAt(r)===e:!!e.test(l[o]))},element:function(){var e=d(/^(?:[.#][\w\u4e00-\u9fa5\-]+|\*|Map)/);if(e)return new n.CartoCSS.Tree.Element(e)},attachment:function(){var e=d(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(e)return e[1]},selector:function(){for(var e,o,i,s,l,u=[],c=new n.CartoCSS.Tree.Filterset,f=[],p=0,h=0;(i=d(this.element))||(l=d(this.zoom))||(s=d(this.filter))||(e=d(this.attachment));){if(p++,i)u.push(i);else if(l)f.push(l),h++;else if(s){var y=c.add(s);if(y)throw v({message:y,index:r-1});h++}else{if(o)throw v({message:"Encountered second attachment name.",index:r-1});o=e}var m=t.charAt(r);if("{"===m||"}"===m||";"===m||","===m)break}if(p)return new n.CartoCSS.Tree.Selector(c,f,u,o,h,a)},filter:function(){p();var t,r,o;if(d("[")&&(t=d(/^[a-zA-Z0-9\-_]+/)||d(this.entities.quoted)||d(this.entities.variable)||d(this.entities.keyword)||d(this.entities.field))&&(t instanceof n.CartoCSS.Tree.Quoted&&(t=new n.CartoCSS.Tree.Field(t.toString())),(r=d(this.entities.comparison))&&(o=d(this.entities.quoted)||d(this.entities.variable)||d(this.entities.dimension)||d(this.entities.keyword)||d(this.entities.field)))){if(!d("]"))throw v({message:"Missing closing ] of filter.",index:a-1});return t.is||(t=new n.CartoCSS.Tree.Field(t)),new n.CartoCSS.Tree.Filter(t,r,o,a,e.filename)}},zoom:function(){p();var e,t;if(d(/^\[\s*zoom/g)&&(e=d(this.entities.comparison))&&(t=d(this.entities.variable)||d(this.entities.dimension))&&d("]"))return new n.CartoCSS.Tree.Zoom(e,t,a);h()},block:function(){var e;if(d("{")&&(e=d(this.primary))&&d("}"))return e},ruleset:function(){var e,t,r=[];for(p();e=d(this.selector);){for(r.push(e);d(this.comment););if(!d(","))break;for(;d(this.comment););}if(e)for(;d(this.comment););if(r.length>0&&(t=d(this.block))){if(1===r.length&&r[0].elements.length&&"Map"===r[0].elements[0].value){var o=new n.CartoCSS.Tree.Ruleset(r,t);return o.isMap=!0,o}return new n.CartoCSS.Tree.Ruleset(r,t)}h()},rule:function(){var o,i,l=t.charAt(r);if(p(),"."!==l&&"#"!==l&&(o=d(this.variable)||d(this.property))){if((i=d(this.value))&&d(this.end))return new n.CartoCSS.Tree.Rule(o,i,a,e.filename);s=r,h()}},font:function(){for(var e,t=[],r=[];e=d(this.entity);)r.push(e);if(t.push(new n.CartoCSS.Tree.Expression(r)),d(","))for(;(e=d(this.expression))&&(t.push(e),d(",")););return new n.CartoCSS.Tree.Value(t)},value:function(){for(var e,t=[];(e=d(this.expression))&&(t.push(e),d(",")););return t.length>1?new n.CartoCSS.Tree.Value(t.map(function(e){return e.value[0]})):1===t.length?new n.CartoCSS.Tree.Value(t):void 0},sub:function(){var e;if(d("(")&&(e=d(this.expression))&&d(")"))return e},multiplication:function(){var e,t,r,o;if(e=d(this.operand)){for(;(r=d("/")||d("*")||d("%"))&&(t=d(this.operand));)o=new n.CartoCSS.Tree.Operation(r,[o||e,t],a);return o||e}},addition:function(){var e,o,i,s;if(e=d(this.multiplication)){for(;(i=d(/^[-+]\s+/)||" "!=t.charAt(r-1)&&(d("+")||d("-")))&&(o=d(this.multiplication));)s=new n.CartoCSS.Tree.Operation(i,[s||e,o],a);return s||e}},operand:function(){return d(this.sub)||d(this.entity)},expression:function(){for(var e,t=[];e=d(this.addition)||d(this.entity);)t.push(e);if(t.length>0)return new n.CartoCSS.Tree.Expression(t)},property:function(){var e=d(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(e)return e[1]}}}}},{key:"parse",value:function(e){var t=this.parser;return this.ruleSet=t.parse(e)}},{key:"toShaders",value:function(){if(this.ruleSet){var e=this.ruleSet;if(e){var t=e.toList(this.env);t.reverse();var r={},n=[];this._toShaders(r,n,t);for(var o=[],i={},a=0,s=t.length;a<s;++a){var l=t[a],u=l.attachment,c=r[n[a]],f=[];if(!i[u]){var p=0;for(var h in c)if("zoom"!==h&&"frames"!==h&&"attachment"!==h&&"elements"!=h)if("layer-index"===h){var y=(c[h].join("\n"),null);Object.defineProperty(f,"layerIndex",{configurable:!0,enumerable:!1,value:y})}else f[p++]=function(e,t){if(!Array.isArray(e))return e;var r=e.join("\n"),n='attributes["FEATUREID"]&&attributes["FEATUREID"]',o=r.indexOf(n);if(o>=0){if(!t.featureFilter){var i=o+n.length,a=r.indexOf(")",i+1),s="featureId&&(featureId"+r.substring(i,a)+")";Object.defineProperty(t,"featureFilter",{configurable:!0,enumerable:!1,value:function(e){return!!s}})}return{property:h,getValue:Function("attributes","zoom","seftFilter","var _value = null; var isExcute=typeof seftFilter=='function'?sefgFilter():seftFilter;if(isExcute){"+r+";} return _value; ")}}return{property:h,getValue:Function("attributes","zoom","var _value = null;"+r+"; return _value; ")}}(c[h],f);Object.defineProperty(f,"attachment",{configurable:!0,enumerable:!1,value:u}),Object.defineProperty(f,"elements",{configurable:!0,enumerable:!1,value:l.elements}),o.push(f),i[n[a]]=!0}Object.defineProperty(f,"zoom",{configurable:!0,enumerable:!1,value:l.zoom})}return o}}return null}},{key:"_toShaders",value:function(e,t,r){for(var o=0,i=r.length;o<i;++o){for(var a=r[o],s=[],l=0,u=a.elements.length;l<u;l++)s.push(a.elements[l]);var c=a.filters.filters,f=[];for(var p in c)f.push(c[p].id);var h=s.join("/")+"::"+a.attachment+"_"+f.join("_");t.push(h);var y=e[h]=e[h]||{};y.zoom=n.CartoCSS.Tree.Zoom.all;var d=a.toJS(this.env);for(var v in d)(y[v]=y[v]||[]).push(d[v].join("\n"))}}},{key:"getShaders",value:function(){return this.shaders}},{key:"destroy",value:function(){this.cartoStr=null,this.env=null,this.ruleSet=null,this.parser=null,this.shaders=null}}]),e}();n._mapnik_reference_latest={version:"2.1.1",style:{"filter-mode":{type:["all","first"],doc:"Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)","default-value":"all","default-meaning":"All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true."},"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},layer:{name:{"default-value":"",type:"string",required:!0,"default-meaning":"No layer name has been provided",doc:"The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map"},srs:{"default-value":"",type:"string","default-meaning":"No srs value is provided and the value will be inherited from the Map's srs",doc:"The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'"},status:{"default-value":!0,type:"boolean","default-meaning":"This layer will be marked as active and available for processing",doc:"A property that can be set to false to disable this layer from being processed"},minzoom:{"default-value":"0",type:"float","default-meaning":"The layer will be visible at the minimum possible scale",doc:"The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},maxzoom:{"default-value":"1.79769e+308",type:"float","default-meaning":"The layer will be visible at the maximum possible scale",doc:"The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},queryable:{"default-value":!1,type:"boolean","default-meaning":"The layer will not be available for the direct querying of data values",doc:"This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true"},"clear-label-cache":{"default-value":!1,type:"boolean","default-meaning":"The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer",doc:"This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers"},"group-by":{"default-value":"",type:"string","default-meaning":"No special layer grouping will be used during rendering",doc:"https://github.com/mapnik/mapnik/wiki/Grouped-rendering"},"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"maximum-extent":{"default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer."}},symbolizers:{"*":{"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},map:{"background-color":{css:"background-color","default-value":"none","default-meaning":"transparent",type:"color",doc:"Map Background color"},"background-image":{css:"background-image",type:"uri","default-value":"","default-meaning":"transparent",doc:"An image that is repeated below all features on a map as a background.",description:"Map Background image"},srs:{css:"srs",type:"string","default-value":"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs","default-meaning":"The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space",doc:"Map spatial reference (proj4 string)"},"buffer-size":{css:"buffer-size","default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".'},"maximum-extent":{css:"","default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map."},base:{css:"base","default-value":"","default-meaning":"This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.",type:"string",doc:"Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet."},"paths-from-xml":{css:"","default-value":!0,"default-meaning":"Paths read from XML will be interpreted from the location of the XML",type:"boolean",doc:"value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()"},"minimum-version":{css:"","default-value":"none","default-meaning":"Mapnik version will not be detected and no error will be thrown about compatibility",type:"string",doc:"The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet"},"font-directory":{css:"font-directory",type:"uri","default-value":"none","default-meaning":"No map-specific fonts will be registered",doc:"Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)."}},polygon:{fill:{css:"polygon-fill",type:"color","default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon"},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque"},gamma:{css:"polygon-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon edges"},"gamma-method":{css:"polygon-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},clip:{css:"polygon-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line"},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels"},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"},"stroke-gamma":{css:"line-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of stroke line"},"stroke-gamma-method":{css:"line-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},"stroke-dasharray":{css:"line-dasharray",type:"numbers",doc:"A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.","default-value":"none","default-meaning":"solid line"},"stroke-dashoffset":{css:"line-dash-offset",type:"numbers",doc:"valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)","default-value":"none","default-meaning":"solid line"},"stroke-miterlimit":{css:"line-miterlimit",type:"float",doc:"The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.","default-value":4,"default-meaning":"Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'"},clip:{css:"line-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},offset:{css:"line-offset",type:"float","default-value":0,"default-meaning":"no offset",doc:"Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)."},rasterizer:{css:"line-rasterizer",type:["full","fast"],"default-value":"full",doc:"Exposes an alternate AGG rendering method that sacrifices some accuracy for speed."},"geometry-transform":{css:"line-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri"},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},placement:{css:"marker-placement",type:["point","line","interior"],"default-value":"point","default-meaning":"Place markers at the center point (centroid) of the geometry",doc:"Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior"},"multi-policy":{css:"marker-multi-policy",type:["each","whole","largest"],"default-value":"each","default-meaning":"If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each",doc:"A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)."},"marker-type":{css:"marker-type",type:["arrow","ellipse"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"expression"},height:{css:"marker-height","default-value":10,doc:"The height of the marker, if using one of the default types.",type:"expression"},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color"},"allow-overlap":{css:"marker-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping markers are shown or hidden.","default-meaning":"Do not allow makers to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"marker-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},spacing:{css:"marker-spacing",doc:"Space between repeated labels","default-value":100,type:"float"},"max-error":{css:"marker-max-error",type:"float","default-value":.2,doc:"The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers."},transform:{css:"marker-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},clip:{css:"marker-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"marker-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"marker-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"marker-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},shield:{name:{css:"shield-name",type:"expression",serialization:"content",doc:'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]'},file:{css:"shield-file",required:!0,type:"uri","default-value":"none",doc:"Image file to render behind the shield text"},"face-name":{css:"shield-face-name",type:"string",validate:"font",doc:"Font name and style to use for the shield text","default-value":"",required:!0},"unlock-image":{css:"shield-unlock-image",type:"boolean",doc:"This parameter should be set to true if you are trying to position text beside rather than on top of the shield image","default-value":!1,"default-meaning":"text alignment relative to the shield image uses the center of the image as the anchor for text positioning."},size:{css:"shield-size",type:"float",doc:"The size of the shield text in pixels"},fill:{css:"shield-fill",type:"color",doc:"The color of the shield text"},placement:{css:"shield-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons."},"avoid-edges":{css:"shield-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.",type:"boolean","default-value":!1},"allow-overlap":{css:"shield-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping shields are shown or hidden.","default-meaning":"Do not allow shields to overlap with other map elements already placed."},"minimum-distance":{css:"shield-min-distance",type:"float","default-value":0,doc:"Minimum distance to the next shield symbol, not necessarily the same shield."},spacing:{css:"shield-spacing",type:"float","default-value":0,doc:"The spacing between repeated occurrences of the same shield on a line"},"minimum-padding":{css:"shield-min-padding","default-value":0,doc:"Determines the minimum amount of padding that a shield gets relative to other shields",type:"float"},"wrap-width":{css:"shield-wrap-width",type:"unsigned","default-value":0,doc:"Length of a chunk of text in characters before wrapping text"},"wrap-before":{css:"shield-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"shield-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long names."},"halo-fill":{css:"shield-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"shield-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},"character-spacing":{css:"shield-character-spacing",type:"unsigned","default-value":0,doc:"Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement."},"line-spacing":{css:"shield-line-spacing",doc:"Vertical spacing between lines of multiline labels (in pixels)",type:"unsigned"},dx:{css:"shield-text-dx",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"shield-text-dy",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"shield-dx":{css:"shield-dx",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},"shield-dy":{css:"shield-dy",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},opacity:{css:"shield-opacity",type:"float",doc:"(Default 1.0) - opacity of the image used for the shield","default-value":1},"text-opacity":{css:"shield-text-opacity",type:"float",doc:"(Default 1.0) - opacity of the text placed on top of the shield","default-value":1},"horizontal-alignment":{css:"shield-horizontal-alignment",type:["left","middle","right","auto"],doc:"The shield's horizontal alignment from its centerpoint","default-value":"auto"},"vertical-alignment":{css:"shield-vertical-alignment",type:["top","middle","bottom","auto"],doc:"The shield's vertical alignment from its centerpoint","default-value":"middle"},"text-transform":{css:"shield-text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"justify-alignment":{css:"shield-justify-alignment",type:["left","center","right","auto"],doc:"Define how text in a shield's label is justified","default-value":"auto"},clip:{css:"shield-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"shield-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"line-pattern":{file:{css:"line-pattern-file",type:"uri","default-value":"none",required:!0,doc:"An image file to be repeated and warped along a line"},clip:{css:"line-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"line-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"polygon-pattern":{file:{css:"polygon-pattern-file",type:"uri","default-value":"none",required:!0,doc:"Image to use as a repeated pattern fill within a polygon"},alignment:{css:"polygon-pattern-alignment",type:["local","global"],"default-value":"local",doc:"Specify whether to align pattern fills to the layer or to the map."},gamma:{css:"polygon-pattern-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon pattern edges"},opacity:{css:"polygon-pattern-opacity",type:"float",doc:"(Default 1.0) - Apply an opacity level to the image used for the pattern","default-value":1,"default-meaning":"The image is rendered without modifications"},clip:{css:"polygon-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},raster:{opacity:{css:"raster-opacity","default-value":1,"default-meaning":"opaque",type:"float",doc:"The opacity of the raster symbolizer on top of other symbolizers."},"filter-factor":{css:"raster-filter-factor","default-value":-1,"default-meaning":"Allow the datasource to choose appropriate downscaling.",type:"float",doc:"This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed."},scaling:{css:"raster-scaling",type:["near","fast","bilinear","bilinear8","bicubic","spline16","spline36","hanning","hamming","hermite","kaiser","quadric","catrom","gaussian","bessel","mitchell","sinc","lanczos","blackman"],"default-value":"near",doc:"The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality."},"mesh-size":{css:"raster-mesh-size","default-value":16,"default-meaning":"Reprojection mesh will be 1/16 of the resolution of the source image",type:"unsigned",doc:"A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion."},"comp-op":{css:"raster-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},"allow-overlap":{css:"point-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping points are shown or hidden.","default-meaning":"Do not allow points to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"point-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"},placement:{css:"point-placement",type:["centroid","interior"],doc:"How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.","default-value":"centroid"},transform:{css:"point-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},"comp-op":{css:"point-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},text:{name:{css:"text-name",type:"expression",required:!0,"default-value":"",serialization:"content",doc:"Value to use for a text label. Data columns are specified using brackets like [column_name]"},"face-name":{css:"text-face-name",type:"string",validate:"font",doc:"Font name and style to render a label in",required:!0},size:{css:"text-size",type:"float","default-value":10,doc:"Text size in pixels"},"text-ratio":{css:"text-ratio",doc:"Define the amount of text (of the total) present on successive lines when wrapping occurs","default-value":0,type:"unsigned"},"wrap-width":{css:"text-wrap-width",doc:"Length of a chunk of text in characters before wrapping text","default-value":0,type:"unsigned"},"wrap-before":{css:"text-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"text-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long text."},spacing:{css:"text-spacing",type:"unsigned",doc:"Distance between repeated text labels on a line (aka. label-spacing)"},"character-spacing":{css:"text-character-spacing",type:"float","default-value":0,doc:"Horizontal spacing adjustment between characters in pixels"},"line-spacing":{css:"text-line-spacing","default-value":0,type:"unsigned",doc:"Vertical spacing adjustment between lines in pixels"},"label-position-tolerance":{css:"text-label-position-tolerance","default-value":0,type:"unsigned",doc:"Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)"},"max-char-angle-delta":{css:"text-max-char-angle-delta",type:"float","default-value":"22.5",doc:"The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners."},fill:{css:"text-fill",doc:"Specifies the color for the text","default-value":"#000000",type:"color"},opacity:{css:"text-opacity",doc:"A number from 0 to 1 specifying the opacity for the text","default-value":1,"default-meaning":"Fully opaque",type:"float"},"halo-fill":{css:"text-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"text-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},dx:{css:"text-dx",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"text-dy",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"vertical-alignment":{css:"text-vertical-alignment",type:["top","middle","bottom","auto"],doc:"Position of label relative to point position.","default-value":"auto","default-meaning":'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.'},"avoid-edges":{css:"text-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.","default-value":!1,type:"boolean"},"minimum-distance":{css:"text-min-distance",doc:"Minimum permitted distance to the next text symbolizer.",type:"float"},"minimum-padding":{css:"text-min-padding",doc:"Determines the minimum amount of padding that a text symbolizer gets relative to other text",type:"float"},"minimum-path-length":{css:"text-min-path-length",type:"float","default-value":0,"default-meaning":"place labels on all paths",doc:"Place labels only on paths longer than this value."},"allow-overlap":{css:"text-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping text is shown or hidden.","default-meaning":"Do not allow text to overlap with other text - overlapping markers will not be shown."},orientation:{css:"text-orientation",type:"expression",doc:"Rotate the text."},placement:{css:"text-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"Control the style of placement of a point versus the geometry it is attached to."},"placement-type":{css:"text-placement-type",doc:'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.',type:["dummy","simple"],"default-value":"dummy"},placements:{css:"text-placements",type:"string","default-value":"",doc:'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` '},"text-transform":{css:"text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"horizontal-alignment":{css:"text-horizontal-alignment",type:["left","middle","right","auto"],doc:"The text's horizontal alignment from its centerpoint","default-value":"auto"},"justify-alignment":{css:"text-align",type:["left","right","center","auto"],doc:"Define how text is justified","default-value":"auto","default-meaning":"Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives"},clip:{css:"text-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"text-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},building:{fill:{css:"building-fill","default-value":"#FFFFFF",doc:"The color of the buildings walls.",type:"color"},"fill-opacity":{css:"building-fill-opacity",type:"float",doc:"The opacity of the building as a whole, including all walls.","default-value":1},height:{css:"building-height",doc:"The height of the building in pixels.",type:"expression","default-value":"0"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]},filter:{value:["true","false","null","point","linestring","polygon","collection"]}},SP.mapnik_reference={version:{latest:n._mapnik_reference_latest,"2.1.1":n._mapnik_reference_latest}},n.CartoCSS=SP,n.CartoCSS.Tree={},n.CartoCSS.Tree.operate=function(e,t,r){switch(e){case"+":return t+r;case"-":return t-r;case"*":return t*r;case"%":return t%r;case"/":return t/r}},n.CartoCSS.Tree.functions={rgb:function(e,t,r){return this.rgba(e,t,r,1)},rgba:function(e,t,r,o){var i=this,a=[e,t,r].map(function(e){return i.number(e)});return o=i.number(o),a.some(isNaN)||isNaN(o)?null:new n.CartoCSS.Tree.Color(a,o)},stop:function(e){var t,r;return arguments.length>1&&(t=arguments[1]),arguments.length>2&&(r=arguments[2]),{is:"tag",val:e,color:t,mode:r,toString:function(n){return'\n\t<stop value="'+e.ev(n)+'"'+(t?' color="'+t.ev(n)+'" ':"")+(r?' mode="'+r.ev(n)+'" ':"")+"/>"}}},hsl:function(e,t,r){return this.hsla(e,t,r,1)},hsla:function(e,t,r,n){if([e=this.number(e)%360/360,t=this.number(t),r=this.number(r),n=this.number(n)].some(isNaN))return null;var o=r<=.5?r*(t+1):r+t-r*t,i=2*r-o;return this.rgba(255*a(e+1/3),255*a(e),255*a(e-1/3),n);function a(e){return 6*(e=e<0?e+1:e>1?e-1:e)<1?i+(o-i)*e*6:2*e<1?o:3*e<2?i+(o-i)*(2/3-e)*6:i}},hue:function(e){return"toHSL"in e?new n.CartoCSS.Tree.Dimension(Math.round(e.toHSL().h)):null},saturation:function(e){return"toHSL"in e?new n.CartoCSS.Tree.Dimension(Math.round(100*e.toHSL().s),"%"):null},lightness:function(e){return"toHSL"in e?new n.CartoCSS.Tree.Dimension(Math.round(100*e.toHSL().l),"%"):null},alpha:function(e){return"toHSL"in e?new n.CartoCSS.Tree.Dimension(e.toHSL().a):null},saturate:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.s+=t.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},desaturate:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.s-=t.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},lighten:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.l+=t.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},darken:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.l-=t.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},fadein:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.a+=t.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},fadeout:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL();return r.a-=t.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},spin:function(e,t){if(!("toHSL"in e))return null;var r=e.toHSL(),n=(r.h+t.value)%360;return r.h=n<0?360+n:n,this.hsla_simple(r)},replace:function(e,t,r){return"field"===e.is?e.toString+".replace("+t.toString()+", "+r.toString()+")":e.replace(t,r)},mix:function(e,t,r){var o=r.value/100,i=2*o-1,a=e.toHSL().a-t.toHSL().a,s=((i*a==-1?i:(i+a)/(1+i*a))+1)/2,l=1-s,u=[e.rgb[0]*s+t.rgb[0]*l,e.rgb[1]*s+t.rgb[1]*l,e.rgb[2]*s+t.rgb[2]*l],c=e.alpha*o+t.alpha*(1-o);return new n.CartoCSS.Tree.Color(u,c)},greyscale:function(e){return this.desaturate(e,new n.CartoCSS.Tree.Dimension(100))},"%":function(e){for(var t=Array.prototype.slice.call(arguments,1),r=e.value,o=0;o<t.length;o++)r=r.replace(/%s/,t[o].value).replace(/%[da]/,t[o].toString());return r=r.replace(/%%/g,"%"),new n.CartoCSS.Tree.Quoted(r)},hsla_simple:function(e){return this.hsla(e.h,e.s,e.l,e.a)},number:function(e){return e instanceof n.CartoCSS.Tree.Dimension?parseFloat("%"===e.unit?e.value/100:e.value):"number"==typeof e?e:NaN},clamp:function(e){return Math.min(1,Math.max(0,e))}},n.CartoCSS.Tree.Call=function(){function e(t,r,n){mP(this,e),this.is="call",this.name=t,this.args=r,this.index=n}return gP(e,[{key:"ev",value:function(e){for(var t=this.args.map(function(t){return t.ev(e)}),r=0;r<t.length;r++)if("undefined"===t[r].is)return{is:"undefined",value:"undefined"};if(this.name in n.CartoCSS.Tree.functions){if(n.CartoCSS.Tree.functions[this.name].length<=t.length){var o=n.CartoCSS.Tree.functions[this.name].apply(n.CartoCSS.Tree.functions,t);return null===o?(e.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):o}return e.error({message:"incorrect number of arguments for "+this.name+"(). "+n.CartoCSS.Tree.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}var i=n.CartoCSS.Tree.Reference.mapnikFunctions[this.name];if(void 0===i){var a=dP()(n.CartoCSS.Tree.Reference.mapnikFunctions),s=this.name,l=a.map(function(e){return[e[0],n.CartoCSS.Tree.Reference.editDistance(s,e[0]),e[1]]}).sort(function(e,t){return e[1]-t[1]});return e.error({message:"unknown function "+this.name+"(), did you mean "+l[0][0]+"("+l[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}return i!==t.length&&-1!==i?(e.error({message:"function "+this.name+"() takes "+i+" arguments and was given "+t.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):(this.args=t,this)}},{key:"toString",value:function(e,t){return this.args.length?this.name+"("+this.args.join(",")+")":this.name}}]),e}(),n.CartoCSS.Tree.Color=function(){function e(t,r){mP(this,e),this.is="color",Array.isArray(t)?this.rgb=t.slice(0,3):6==t.length?this.rgb=t.match(/.{2}/g).map(function(e){return parseInt(e,16)}):this.rgb=t.split("").map(function(e){return parseInt(e+e,16)}),"number"==typeof r?this.alpha=r:4===t.length?this.alpha=t[3]:this.alpha=1}return gP(e,[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return"rgba("+this.rgb.map(function(e){return Math.round(e)}).concat(this.alpha).join(", ")+")"}},{key:"operate",value:function(e,t,r){var o=[];r instanceof n.CartoCSS.Tree.Color||(r=r.toColor());for(var i=0;i<3;i++)o[i]=n.CartoCSS.Tree.operate(t,this.rgb[i],r.rgb[i]);return new n.CartoCSS.Tree.Color(o)}},{key:"toHSL",value:function(){var e,t,r=this.rgb[0]/255,n=this.rgb[1]/255,o=this.rgb[2]/255,i=this.alpha,a=Math.max(r,n,o),s=Math.min(r,n,o),l=(a+s)/2,u=a-s;if(a===s)e=t=0;else{switch(t=l>.5?u/(2-a-s):u/(a+s),a){case r:e=(n-o)/u+(n<o?6:0);break;case n:e=(o-r)/u+2;break;case o:e=(r-n)/u+4}e/=6}return{h:360*e,s:t,l:l,a:i}}}]),e}(),n.CartoCSS.Tree.Comment=function(){function e(t,r){mP(this,e),this.value=t,this.silent=!!r}return gP(e,[{key:"toString",value:function(e){return"\x3c!--"+this.value+"--\x3e"}},{key:"ev",value:function(){return this}}]),e}(),n.CartoCSS.Tree.Definition=function(){function e(t,r){mP(this,e),this.elements=t.elements,this.rules=r,this.ruleIndex={};for(var n=0;n<this.rules.length;n++)"zoom"in this.rules[n]&&(this.rules[n]=this.rules[n].clone()),this.rules[n].zoom=t.zoom,this.ruleIndex[this.rules[n].updateID()]=!0;this.filters=t.filters,this.zoom=t.zoom,this.attachment=t.attachment||"__default__",this.specificity=t.specificity()}return gP(e,[{key:"toString",value:function(){for(var e=this.filters.toString(),t=0;t<this.rules.length;t++)e+="\n    "+this.rules[t];return e}},{key:"toJS",value:function(e){var t={},r=this.zoom,o=this.filters.toJS(e),i=[r];function a(r){if(r instanceof n.CartoCSS.Tree.Rule)t[r.name]=t[r.name]||[],o?t[r.name].push("if("+o+"){"+r.value.toJS(e)+"}"):t[r.name].push(r.value.toJS(e));else if(r instanceof n.CartoCSS.Tree.Ruleset){var i=r.toJS(e);for(var a in i)for(var s in t[a]=t[a]||[],i[a])t[a].push(i[a][s])}}for(var s in o&&i.push(o),o=i.join(" && "),this.rules)a(this.rules[s]);return t}}]),e}(),n.CartoCSS.Tree.Dimension=function(){function e(t,r,n){mP(this,e),this.is="float",this.physical_units=["m","cm","in","mm","pt","pc"],this.screen_units=["px","%"],this.all_units=["m","cm","in","mm","pt","pc","px","%"],this.densities={m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},this.value=parseFloat(t),this.unit=r||null,this.index=n}return gP(e,[{key:"ev",value:function(e){if(this.unit&&this.all_units.indexOf(this.unit)<0)return e.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&this.physical_units.indexOf(this.unit)>=0){if(!e.ppi)return e.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*e.ppi,this.unit="px"}return this}},{key:"toColor",value:function(){return new n.CartoCSS.Tree.Color([this.value,this.value,this.value])}},{key:"round",value:function(){return this.value=Math.round(this.value),this}},{key:"toString",value:function(){return this.value.toString()}},{key:"operate",value:function(e,t,r){return"%"===this.unit&&"%"!==r.unit?(e.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===r.unit?"*"===t||"/"===t||"%"===t?(e.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new n.CartoCSS.Tree.Dimension(n.CartoCSS.Tree.operate(t,this.value,this.value*r.value*.01),this.unit):new n.CartoCSS.Tree.Dimension(n.CartoCSS.Tree.operate(t,this.value,r.value),this.unit||r.unit)}}]),e}(),n.CartoCSS.Tree.Element=function(){function e(t){mP(this,e),this.value=t.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),-1!==this.value.indexOf("*")&&(this.type="wildcard")}return gP(e,[{key:"specificity",value:function(){return["id"===this.type?1:0,"class"===this.type?1:0]}},{key:"toString",value:function(){return this.value}}]),e}(),n.CartoCSS.Tree.Expression=function(){function e(t){mP(this,e),this.is="expression",this.value=t}return gP(e,[{key:"ev",value:function(e){return this.value.length>1?new n.CartoCSS.Tree.Expression(this.value.map(function(t){return t.ev(e)})):this.value[0].ev(e)}},{key:"toString",value:function(e){return this.value.map(function(t){return t.toString(e)}).join(" ")}}]),e}(),n.CartoCSS.Tree.Field=function(){function e(t){mP(this,e),this.is="field",this.value=t||""}return gP(e,[{key:"toString",value:function(){return'["'+this.value.toUpperCase()+'"]'}},{key:"ev",value:function(){return this}}]),e}(),n.CartoCSS.Tree.Filter=function(){function e(t,r,n,o,i){mP(this,e),this.ops={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]},this.key=t,this.op=r,this.val=n,this.index=o,this.filename=i,this.id=this.key+this.op+this.val}return gP(e,[{key:"ev",value:function(e){return this.key=this.key.ev(e),this.val=this.val.ev(e),this}},{key:"toString",value:function(){return"["+this.id+"]"}}]),e}(),n.CartoCSS.Tree.Filterset=function(){function e(){mP(this,e),this.filters={}}return gP(e,[{key:"toJS",value:function(e){function t(e){var t=e.op;"="===t&&(t="==");var r=e.val;void 0!==e._val&&(r=e._val.toString(!0)),e.key&&"scale"===e.key.value?r=+r:"string"!=typeof r&&"object"!==vP(r)||(r="'"+r+"'");var n="attributes";return n+"&&"+n+e.key+"&&"+n+e.key+" "+t+r}var r=[];for(var n in this.filters)r.push(t(this.filters[n]));return r.join(" && ")}},{key:"toString",value:function(){var e=[];for(var t in this.filters)e.push(this.filters[t].id);return e.sort().join("\t")}},{key:"ev",value:function(e){for(var t in this.filters)this.filters[t].ev(e);return this}},{key:"clone",value:function(){var e=new n.CartoCSS.Tree.Filterset;for(var t in this.filters)e.filters[t]=this.filters[t];return e}},{key:"cloneWith",value:function(e){var t=[];for(var r in e.filters){var o=this.addable(e.filters[r]);if(!1===o)return!1;!0===o&&t.push(e.filters[r])}if(!t.length)return null;var i=new n.CartoCSS.Tree.Filterset;for(r in this.filters)i.filters[r]=this.filters[r];for(;r=t.shift();)i.add(r);return i}},{key:"addable",value:function(e){var t=e.key.toString(),r=e.val.toString();switch(r.match(/^[0-9]+(\.[0-9]*)?_match/)&&(r=parseFloat(r)),e.op){case"=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val.toString()==r&&null:void 0===this.filters[t+"!="+r]&&(!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r)&&(!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>r)&&!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<r))));case"=~":return!0;case"!=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val!==r&&null:void 0!==this.filters[t+"!="+r]?null:void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r?null:void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r?null:void 0!==this.filters[t+">="]&&this.filters[t+">="].val>r?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<r)||null;case">":return t+"="in this.filters?!(this.filters[t+"="].val<=r)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r)&&(!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=r)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>r)||null));case">=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val<r)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r)&&(!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<r)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=r)||null));case"<":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>=r)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=r)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<r)||null));case"<=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>r)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=r)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>r)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=r?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=r)||null))}}},{key:"conflict",value:function(e){var t=e.key.toString(),r=e.val.toString();return isNaN(parseFloat(r))||(r=parseFloat(r)),("="===e.op&&void 0!==this.filters[t+"="]&&r!=this.filters[t+"="].val.toString()||"!="===e.op&&void 0!==this.filters[t+"="]&&r==this.filters[t+"="].val.toString()||"="===e.op&&void 0!==this.filters[t+"!="]&&r===this.filters[t+"!="].val.toString())&&e.toString()+" added to "+this.toString()+" produces an invalid filter"}},{key:"add",value:function(e,t){var r,n=e.key.toString(),o=e.op,i=this.conflict(e);if(i)return i;if("="===o){for(var a in this.filters)this.filters[a].key===n&&delete this.filters[a];this.filters[n+"="]=e}else if("!="===o)this.filters[n+"!="+e.val]=e;else if("=~"===o)this.filters[n+"=~"+e.val]=e;else if(">"===o){for(var s in this.filters)this.filters[s].key===n&&this.filters[s].val<=e.val&&delete this.filters[s];this.filters[n+">"]=e}else if(">="===o){for(var l in this.filters)r=+this.filters[l].val.toString(),this.filters[l].key===n&&r<e.val&&delete this.filters[l];void 0!==this.filters[n+"!="+e.val]?(delete this.filters[n+"!="+e.val],e.op=">",this.filters[n+">"]=e):this.filters[n+">="]=e}else if("<"===o){for(var u in this.filters)r=+this.filters[u].val.toString(),this.filters[u].key===n&&r>=e.val&&delete this.filters[u];this.filters[n+"<"]=e}else if("<="===o){for(var c in this.filters)r=+this.filters[c].val.toString(),this.filters[c].key===n&&r>e.val&&delete this.filters[c];void 0!==this.filters[n+"!="+e.val]?(delete this.filters[n+"!="+e.val],e.op="<",this.filters[n+"<"]=e):this.filters[n+"<="]=e}}}]),e}(),n.CartoCSS.Tree.Fontset=function e(t,r){mP(this,e),this.fonts=r,this.name="fontset-"+t.effects.length},n.CartoCSS.Tree.Invalid=function(){function e(t,r,n){mP(this,e),this.is="invalid",this.chunk=t,this.index=r,this.type="syntax",this.message=n||"Invalid code: "+this.chunk}return gP(e,[{key:"ev",value:function(e){return e.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"}}}]),e}(),n.CartoCSS.Tree.Keyword=function(){function e(t){mP(this,e),this.value=t;var r={transparent:"color",true:"boolean",false:"boolean"};this.is=r[t]?r[t]:"keyword"}return gP(e,[{key:"ev",value:function(){return this}}]),gP(e,[{key:"toString",value:function(){return this.value}}]),e}(),n.CartoCSS.Tree.Literal=function(){function e(t){mP(this,e),this.value=t||"",this.is="field"}return gP(e,[{key:"toString",value:function(){return this.value}},{key:"ev",value:function(){return this}}]),e}(),n.CartoCSS.Tree.Operation=function(){function e(t,r,n){mP(this,e),this.is="operation",this.op=t.trim(),this.operands=r,this.index=n}return gP(e,[{key:"ev",value:function(e){var t,r=this.operands[0].ev(e),o=this.operands[1].ev(e);return"undefined"===r.is||"undefined"===o.is?{is:"undefined",value:"undefined"}:(r instanceof n.CartoCSS.Tree.Dimension&&o instanceof n.CartoCSS.Tree.Color&&("*"===this.op||"+"===this.op?(t=o,o=r,r=t):e.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),r instanceof n.CartoCSS.Tree.Quoted&&o instanceof n.CartoCSS.Tree.Quoted&&"+"!==this.op?(e.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r instanceof n.CartoCSS.Tree.Field||o instanceof n.CartoCSS.Tree.Field||r instanceof n.CartoCSS.Tree.Literal||o instanceof n.CartoCSS.Tree.Literal?"color"===r.is||"color"===o.is?(e.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new n.CartoCSS.Tree.Literal(r.ev(e).toString(!0)+this.op+o.ev(e).toString(!0)):void 0===r.operate?(e.error({message:"Cannot do math with type "+r.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r.operate(e,this.op,o))}}]),e}(),n.CartoCSS.Tree.Quoted=function(){function e(t){mP(this,e),this.is="string",this.value=t||""}return gP(e,[{key:"toString",value:function(e){var t=this.value.replace(/&/g,"&amp;"),r=t.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return!0===e?"'"+r+"'":t}},{key:"ev",value:function(){return this}},{key:"operate",value:function(e,t,r){return new n.CartoCSS.Tree.Quoted(n.CartoCSS.Tree.operate(t,this.toString(),r.toString(this.contains_field)))}}]),e}(),n.CartoCSS.Tree.Reference={_validateValue:{font:function(e,t){return!e.validation_data||!e.validation_data.fonts||-1!=e.validation_data.fonts.indexOf(t)}},setData:function(e){this.data=e,this.selector_cache=function(e){var t={};for(var r in e.symbolizers)for(var n in e.symbolizers[r])e.symbolizers[r][n].hasOwnProperty("css")&&(t[e.symbolizers[r][n].css]=[e.symbolizers[r][n],r,n]);return t}(e),this.mapnikFunctions=function(e){var t={};for(var r in e.symbolizers)for(var n in e.symbolizers[r])if("functions"===e.symbolizers[r][n].type)for(var o=0;o<e.symbolizers[r][n].functions.length;o++){var i=e.symbolizers[r][n].functions[o];t[i[0]]=i[1]}return t}(e),this.required_cache=function(e){var t={};for(var r in e.symbolizers)for(var n in t[r]=[],e.symbolizers[r])e.symbolizers[r][n].required&&t[r].push(e.symbolizers[r][n].css);return t}(e)},setVersion:function(e){return!!n.CartoCSS.mapnik_reference.version.hasOwnProperty(e)&&(this.setData(n.CartoCSS.mapnik_reference.version[e]),!0)},selectorData:function(e,t){if(this.selector_cache&&this.selector_cache[e])return this.selector_cache[e][t]},validSelector:function(e){return!!this.selector_cache[e]},selectorName:function(e){return this.selectorData(e,2)},selector:function(e){return this.selectorData(e,0)},symbolizer:function(e){return this.selectorData(e,1)},requiredProperties:function(e,t){var r=this.required_cache[e];for(var n in r)if(!(r[n]in t))return"Property "+r[n]+" required for defining "+e+" styles."},isFont:function(e){return"font"===this.selector(e).validate},editDistance:function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;for(var r=[],n=0;n<=t.length;n++)r[n]=[n];for(var o=0;o<=e.length;o++)r[0][o]=o;for(n=1;n<=t.length;n++)for(o=1;o<=e.length;o++)t.charAt(n-1)===e.charAt(o-1)?r[n][o]=r[n-1][o-1]:r[n][o]=Math.min(r[n-1][o-1]+1,Math.min(r[n][o-1]+1,r[n-1][o]+1));return r[t.length][e.length]},validValue:function(e,t,r){var n;if(this.selector(t)){if("keyword"===r.value[0].is)return function(e,t){return"object"===vP(this.selector(t).type)?-1!==this.selector(t).type.indexOf(e.value[0].value):"string"===this.selector(t).type}(r,t);if("undefined"===r.value[0].is)return!0;if("numbers"===this.selector(t).type){for(n in r.value)if("float"!==r.value[n].is)return!1;return!0}if("tags"===this.selector(t).type){if(!r.value)return!1;if(!r.value[0].value)return"tag"===r.value[0].is;for(n=0;n<r.value[0].value.length;n++)if("tag"!==r.value[0].value[n].is)return!1;return!0}if("functions"==this.selector(t).type)return function(e,t){if("string"===e.value[0].is)return!0;for(var r in e.value)for(var n in e.value[r].value){if("call"!==e.value[r].value[n].is)return!1;var o=find(this.selector(t).functions,function(t){return t[0]===e.value[r].value[n].name});if(!(o&&-1===o[1]||o&&o[1]===e.value[r].value[n].args.length))return!1}return!0}(r,t);if("expression"===this.selector(t).type)return!0;if("unsigned"===this.selector(t).type)return"float"===r.value[0].is&&(r.value[0].round(),!0);if(this.selector(t).validate){for(n=0;n<r.value.length;n++)if(this.selector(t).type===r.value[n].is&&this._validateValue[this.selector(t).validate](e,r.value[n].value))return!0;return!1}return this.selector(t).type===r.value[0].is}return!1}},n.CartoCSS.Tree.Reference.setVersion("latest"),n.CartoCSS.Tree.Rule=function(){function e(t,r,o,i){mP(this,e),this.is="rule";var a=t.split("/");this.name=a.pop(),this.instance=a.length?a[0]:"__default__",this.value=r instanceof n.CartoCSS.Tree.Value?r:new n.CartoCSS.Tree.Value([r]),this.index=o,this.symbolizer=n.CartoCSS.Tree.Reference.symbolizer(this.name),this.filename=i,this.variable="@"===t.charAt(0)}return gP(e,[{key:"clone",value:function(){var e=Object.create(n.CartoCSS.Tree.Rule.prototype);return e.name=this.name,e.value=this.value,e.index=this.index,e.instance=this.instance,e.symbolizer=this.symbolizer,e.filename=this.filename,e.variable=this.variable,e}},{key:"updateID",value:function(){return this.id=this.zoom+"#"+this.instance+"#"+this.name}},{key:"toString",value:function(){return"["+n.CartoCSS.Tree.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value}},{key:"ev",value:function(e){return new n.CartoCSS.Tree.Rule(this.name,this.value.ev(e),this.index,this.filename)}}]),e}(),n.CartoCSS.Tree.Ruleset=function(){function e(t,r){mP(this,e),this.is="ruleset",this.selectors=t,this.rules=r,this._lookups={}}return gP(e,[{key:"ev",value:function(e){var t,r,o=new n.CartoCSS.Tree.Ruleset(this.selectors,this.rules.slice(0));for(o.root=this.root,e.frames.unshift(o),t=0;t<o.rules.length;t++)r=o.rules[t],o.rules[t]=r.ev?r.ev(e):r;return e.frames.shift(),o}},{key:"match",value:function(e){return!e||0===e.length}},{key:"variables",value:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(e,t){return t instanceof n.CartoCSS.Tree.Rule&&!0===t.variable&&(e[t.name]=t),e},{})}},{key:"variable",value:function(e){return this.variables()[e]}},{key:"rulesets",value:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(e){return e instanceof n.CartoCSS.Tree.Ruleset})}},{key:"find",value:function(e,t){t=t||this;var r=[],o=e.toString();return o in this._lookups?this._lookups[o]:(this.rulesets().forEach(function(o){if(o!==t)for(var i=0;i<o.selectors.length;i++)if(e.match(o.selectors[i])){e.elements.length>1?Array.prototype.push.apply(r,o.find(new n.CartoCSS.Tree.Selector(null,null,e.elements.slice(1)),t)):r.push(o);break}}),this._lookups[o]=r)}},{key:"evZooms",value:function(e){for(var t=0;t<this.selectors.length;t++){for(var r=n.CartoCSS.Tree.Zoom.all,o=0;o<this.selectors[t].zoom.length;o++)r=this.selectors[t].zoom[o].ev(e).zoom;this.selectors[t].zoom=r}}},{key:"flatten",value:function(e,t,r){var o,i,a=[];for(0===this.selectors.length&&(r.frames=r.frames.concat(this.rules)),this.evZooms(r),o=0;o<this.selectors.length;o++){var s=this.selectors[o];if(s.filters)if(t.length)for(i=0;i<t.length;i++){var l=t[i],u=l.filters.cloneWith(s.filters);if(null===u){if(l.zoom===s.zoom&&l.attachment===s.attachment&&l.elements.join()===s.elements.join()){a.push(l);continue}u=l.filters}else if(!u)continue;var c=Object.create(n.CartoCSS.Tree.Selector.prototype);c.filters=u,c.zoom=s.zoom,c.elements=l.elements.concat(s.elements),l.attachment&&s.attachment?c.attachment=l.attachment+"/"+s.attachment:c.attachment=s.attachment||l.attachment,c.conditions=l.conditions+s.conditions,c.index=s.index,a.push(c)}else a.push(s)}var f=[];for(o=0;o<this.rules.length;o++){var p=this.rules[o];p instanceof n.CartoCSS.Tree.Ruleset?p.flatten(e,a,r):p instanceof n.CartoCSS.Tree.Rule?f.push(p):p instanceof n.CartoCSS.Tree.Invalid&&r.error(p)}var h=!!f.length&&f[0].index;for(o=0;o<a.length;o++)!1!==h&&(a[o].index=h),e.push(new n.CartoCSS.Tree.Definition(a[o],f.slice()));return e}}]),e}(),n.CartoCSS.Tree.Selector=function(){function e(t,r,o,i,a,s){mP(this,e),this.elements=o||[],this.attachment=i,this.filters=t||{},this.zoom=void 0!==r?r:n.CartoCSS.Tree.Zoom.all,this.conditions=a,this.index=s}return gP(e,[{key:"specificity",value:function(){return this.elements.reduce(function(e,t){var r=t.specificity();return e[0]+=r[0],e[1]+=r[1],e},[0,0,this.conditions,this.index])}}]),e}(),n.CartoCSS.Tree.URL=function(){function e(t,r){mP(this,e),this.is="uri",this.value=t,this.paths=r}return gP(e,[{key:"toString",value:function(){return this.value.toString()}},{key:"ev",value:function(e){return new n.CartoCSS.Tree.URL(this.value.ev(e),this.paths)}}]),e}(),n.CartoCSS.Tree.Value=function(){function e(t){mP(this,e),this.is="value",this.value=t}return gP(e,[{key:"ev",value:function(e){return 1===this.value.length?this.value[0].ev(e):new n.CartoCSS.Tree.Value(this.value.map(function(t){return t.ev(e)}))}},{key:"toJS",value:function(e){var t=this.ev(e),r=t.toString();return"color"===t.is||"uri"===t.is||"string"===t.is||"keyword"===t.is?r="'"+r+"'":"field"===t.is?r=r.replace(/\[(.*)\]/g,"attributes['_match1']"):t.value&&"object"===vP(t.value)&&(r="["+r+"]"),"_value = "+r+";"}},{key:"toString",value:function(e,t,r,n){return this.value.map(function(t){return t.toString(e,n)}).join(r||", ")}},{key:"clone",value:function(){var e=Object.create(n.CartoCSS.Tree.Value.prototype);return Array.isArray(e)?e.value=this.value.slice():e.value=this.value,e.is=this.is,e}}]),e}(),n.CartoCSS.Tree.Variable=function(){function e(t,r,n){mP(this,e),this.is="variable",this.name=t,this.index=r,this.filename=n}return gP(e,[{key:"toString",value:function(){return this.name}},{key:"ev",value:function(e){if(this._css)return this._css;var t=e.frames.filter(function(e){return e.name===this.name}.bind(this));return t.length?t[0].value.ev(e):(e.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})}}]),e}(),n.CartoCSS.Tree.Zoom=function(){function e(t,r,n){mP(this,e),this.op=t,this.value=r,this.index=n}return gP(e,[{key:"setZoom",value:function(e){return this.zoom=e,this}},{key:"ev",value:function(e){var t=parseInt(this.value.ev(e).toString(),10);switch((t>n.CartoCSS.Tree.Zoom.maxZoom||t<0)&&e.error({message:"Only zoom levels between 0 and "+n.CartoCSS.Tree.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom="zoom && zoom === "+t,this;case">":this.zoom="zoom && zoom > "+t;break;case">=":this.zoom="zoom && zoom >= "+t;break;case"<":this.zoom="zoom && zoom < "+t;break;case"<=":this.zoom="zoom && zoom <= "+t;break;default:return this}return this}},{key:"toString",value:function(){for(var e="",t=0;t<=n.CartoCSS.Tree.Zoom.maxZoom;t++)e+=this.zoom&1<<t?"X":".";return e}}]),e}(),n.CartoCSS.Tree.Zoom.all=23,n.CartoCSS.Tree.Zoom.maxZoom=22,n.CartoCSS.Tree.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100};function wP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.ThemeStyle=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/(this,e),t=t||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,ge.extend(this,t)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var OP=function(){function e(){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="SuperMap.Feature.ShapeParameters"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}])&&wP(t.prototype,r),n&&wP(t,n),e}();function _P(e){return(_P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function CP(e,t){return!t||"object"!==_P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function EP(e,t,r){return(EP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function TP(e){return(TP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kP(e,t){return(kP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Feature=n.Feature||{},n.Feature.ShapeParameters=OP;var xP=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=CP(this,TP(t).call(this,e,r))).x=isNaN(e)?0:e,n.y=isNaN(r)?0:r,n.r=6,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Point",n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kP(e,t)}(t,OP),r=t,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,EP(TP(t.prototype),"destroy",this).call(this)}}])&&PP(r.prototype,n),o&&PP(r,o),t}();function AP(e){return(AP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function RP(e,t){return!t||"object"!==AP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function LP(e,t,r){return(LP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function MP(e){return(MP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function NP(e,t){return(NP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Feature=n.Feature||{},n.Feature.ShapeParameters.Point=xP;var IP=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=RP(this,MP(t).call(this,e))).pointList=e,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Line",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NP(e,t)}(t,OP),r=t,(n=[{key:"destroy",value:function(){this.pointList=null,LP(MP(t.prototype),"destroy",this).call(this)}}])&&jP(r.prototype,n),o&&jP(r,o),t}();function DP(e){return(DP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function BP(e,t){return!t||"object"!==DP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function GP(e,t,r){return(GP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=UP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function UP(e){return(UP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HP(e,t){return(HP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Feature=n.Feature||{},n.Feature.ShapeParameters.Line=IP;var JP=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=BP(this,UP(t).call(this,e))).pointList=e,r.holePolygonPointLists=null,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Polygon",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HP(e,t)}(t,OP),r=t,(n=[{key:"destroy",value:function(){this.pointList=null,this.holePolygonPointLists=null,GP(UP(t.prototype),"destroy",this).call(this)}}])&&FP(r.prototype,n),o&&FP(r,o),t}();function WP(e){return(WP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zP(e,t){return!t||"object"!==WP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qP(e,t,r){return(qP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=YP(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function YP(e){return(YP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QP(e,t){return(QP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Feature=n.Feature||{},n.Feature.ShapeParameters.Polygon=JP;var XP=function(e){function t(e,r,n,o){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=zP(this,YP(t).call(this,e,r,n,o))).x=isNaN(e)?0:e,i.y=isNaN(e)?0:r,i.width=isNaN(n)?0:n,i.height=isNaN(o)?0:o,i.CLASS_NAME="SuperMap.Feature.ShapeParameters.Rectangle",i}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&QP(e,t)}(t,OP),r=t,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.width=null,this.height=null,qP(YP(t.prototype),"destroy",this).call(this)}}])&&VP(r.prototype,n),o&&VP(r,o),t}();function KP(e){return(KP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $P(e,t){return!t||"object"!==KP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eC(e,t,r){return(eC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tC(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function tC(e){return(tC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rC(e,t){return(rC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Feature=n.Feature||{},n.Feature.ShapeParameters.Rectangle=XP;var nC=function(e){function t(e,r,n,o,i,a,s){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(l=$P(this,tC(t).call(this,e,r,n,o,i,a,s))).x=isNaN(e)?0:e,l.y=isNaN(r)?0:r,l.r=isNaN(n)?0:n,l.startAngle=isNaN(o)?0:o,l.endAngle=isNaN(i)?0:i,l.r0=isNaN(a)?0:a,l.clockWise=s,l.CLASS_NAME="SuperMap.Feature.ShapeParameters.Sector",l}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rC(e,t)}(t,OP),r=t,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,eC(tC(t.prototype),"destroy",this).call(this)}}])&&ZP(r.prototype,n),o&&ZP(r,o),t}();function oC(e){return(oC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function aC(e,t){return!t||"object"!==oC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sC(e,t,r){return(sC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lC(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function lC(e){return(lC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uC(e,t){return(uC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Feature=n.Feature||{},n.Feature.ShapeParameters.Sector=nC;var cC=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=aC(this,lC(t).call(this,e,r,n))).x=e,o.y=r,o.text=n,o.CLASS_NAME="SuperMap.Feature.ShapeParameters.Label",o}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uC(e,t)}(t,OP),r=t,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.text=null,sC(lC(t.prototype),"destroy",this).call(this)}}])&&iC(r.prototype,n),o&&iC(r,o),t}();function fC(e){return(fC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hC(e,t){return!t||"object"!==fC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yC(e,t,r){return(yC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dC(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function dC(e){return(dC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vC(e,t){return(vC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Feature=n.Feature||{},n.Feature.ShapeParameters.Label=cC;var mC=function(e){function t(e,r,n,o,i,a,s,l,u){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(c=hC(this,dC(t).call(this,e,r,n,o,i,a,s,l,u))).x=e,c.y=r,c.image=n,c.width=o,c.height=i,c.sx=a,c.sy=s,c.sWidth=l,c.sHeight=u,c.CLASS_NAME="SuperMap.Feature.ShapeParameters.Image",c}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vC(e,t)}(t,OP),r=t,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,yC(dC(t.prototype),"destroy",this).call(this)}}])&&pC(r.prototype,n),o&&pC(r,o),t}();function bC(e){return(bC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function SC(e,t){return!t||"object"!==bC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wC(e,t,r){return(wC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=OC(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function OC(e){return(OC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _C(e,t){return(_C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Feature=n.Feature||{},n.Feature.ShapeParameters.Image=mC;var PC=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=SC(this,OC(t).call(this,e,r,n))).x=isNaN(e)?0:e,o.y=isNaN(r)?0:r,o.r=isNaN(n)?0:n,o.CLASS_NAME="SuperMap.Feature.ShapeParameters.Circle",o}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_C(e,t)}(t,OP),r=t,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,wC(OC(t.prototype),"destroy",this).call(this)}}])&&gC(r.prototype,n),o&&gC(r,o),t}();function CC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.Feature=n.Feature||{},n.Feature.ShapeParameters.Circle=PC;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var EC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._handlers={},this.CLASS_NAME="SuperMap.LevelRenderer.Eventful"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(e,t,r){var n=this._handlers;return t&&e?(n[e]||(n[e]=[]),n[e].push({h:t,one:!0,ctx:r||this}),this):this}},{key:"bind",value:function(e,t,r){var n=this._handlers;return t&&e?(n[e]||(n[e]=[]),n[e].push({h:t,one:!1,ctx:r||this}),this):this}},{key:"unbind",value:function(e,t){var r=this._handlers;if(!e)return this._handlers={},this;if(t){if(r[e]){for(var n=[],o=0,i=r[e].length;o<i;o++)r[e][o].h!=t&&n.push(r[e][o]);r[e]=n}r[e]&&0===r[e].length&&delete r[e]}else delete r[e];return this}},{key:"dispatch",value:function(e){if(this._handlers[e]){var t=arguments,r=t.length;r>3&&(t=Array.prototype.slice.call(t,1));for(var n=this._handlers[e],o=n.length,i=0;i<o;){switch(r){case 1:n[i].h.call(n[i].ctx);break;case 2:n[i].h.call(n[i].ctx,t[1]);break;case 3:n[i].h.call(n[i].ctx,t[1],t[2]);break;default:n[i].h.apply(n[i].ctx,t)}n[i].one?(n.splice(i,1),o--):i++}}return this}},{key:"dispatchWithContext",value:function(e){if(this._handlers[e]){var t=arguments,r=t.length;r>4&&(t=Array.prototype.slice.call(t,1,t.length-1));for(var n=t[t.length-1],o=this._handlers[e],i=o.length,a=0;a<i;){switch(r){case 1:o[a].h.call(n);break;case 2:o[a].h.call(n,t[1]);break;case 3:o[a].h.call(n,t[1],t[2]);break;default:o[a].h.apply(n,t)}o[a].one?(o.splice(a,1),i--):a++}}return this}}])&&CC(t.prototype,r),n&&CC(t,n),e}();function TC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var kC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Vector"}var t,r,n;return t=e,(r=[{key:"create",value:function(e,t){var r=new(0,this.ArrayCtor)(2);return r[0]=e||0,r[1]=t||0,r}},{key:"copy",value:function(e,t){return e[0]=t[0],e[1]=t[1],e}},{key:"set",value:function(e,t,r){return e[0]=t,e[1]=r,e}},{key:"add",value:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}},{key:"scaleAndAdd",value:function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}},{key:"sub",value:function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}},{key:"len",value:function(e){return Math.sqrt(this.lenSquare(e))}},{key:"lenSquare",value:function(e){return e[0]*e[0]+e[1]*e[1]}},{key:"mul",value:function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}},{key:"div",value:function(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}},{key:"dot",value:function(e,t){return e[0]*t[0]+e[1]*t[1]}},{key:"scale",value:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}},{key:"normalize",value:function(e,t){var r=this.len(t);return 0===r?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}},{key:"distance",value:function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}},{key:"distanceSquare",value:function(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}},{key:"negate",value:function(e,t){return e[0]=-t[0],e[1]=-t[1],e}},{key:"lerp",value:function(e,t,r,n){return e[0]=t[0]+n*(r[0]-t[0]),e[1]=t[1]+n*(r[1]-t[1]),e}},{key:"applyTransform",value:function(e,t,r){var n=t[0],o=t[1];return e[0]=r[0]*n+r[2]*o+r[4],e[1]=r[1]*n+r[3]*o+r[5],e}},{key:"min",value:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}},{key:"max",value:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}},{key:"length",value:function(e){return this.len(e)}},{key:"lengthSquare",value:function(e){return this.lenSquare(e)}},{key:"dist",value:function(e,t){return this.distance(e,t)}},{key:"distSquare",value:function(e,t){return this.distanceSquare(e,t)}}])&&TC(t.prototype,r),n&&TC(t,n),e}();function xC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var AC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.vector=new kC,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Curve"}var t,r,n;return t=e,(r=[{key:"isAroundZero",value:function(e){return e>-this.EPSILON&&e<this.EPSILON}},{key:"isNotAroundZero",value:function(e){return e>this.EPSILON||e<-this.EPSILON}},{key:"cubicAt",value:function(e,t,r,n,o){var i=1-o;return i*i*(i*e+3*o*t)+o*o*(o*n+3*i*r)}},{key:"cubicDerivativeAt",value:function(e,t,r,n,o){var i=1-o;return 3*(((t-e)*i+2*(r-t)*o)*i+(n-r)*o*o)}},{key:"cubicRootAt",value:function(e,t,r,n,o,i){var a=n+3*(t-r)-e,s=3*(r-2*t+e),l=3*(t-e),u=e-o,c=s*s-3*a*l,f=s*l-9*a*u,p=l*l-3*s*u,h=0;if(this.isAroundZero(c)&&this.isAroundZero(f))if(this.isAroundZero(s))i[0]=0;else{var y=-l/s;y>=0&&y<=1&&(i[h++]=y)}else{var d=f*f-4*c*p;if(this.isAroundZero(d)){var v=f/c,m=-s/a+v,b=-v/2;m>=0&&m<=1&&(i[h++]=m),b>=0&&b<=1&&(i[h++]=b)}else if(d>0){var g=Math.sqrt(d),S=c*s+1.5*a*(-f+g),w=c*s+1.5*a*(-f-g),O=(-s-((S=S<0?-Math.pow(-S,this.ONE_THIRD):Math.pow(S,this.ONE_THIRD))+(w=w<0?-Math.pow(-w,this.ONE_THIRD):Math.pow(w,this.ONE_THIRD))))/(3*a);O>=0&&O<=1&&(i[h++]=O)}else{var _=(2*c*s-3*a*f)/(2*Math.sqrt(c*c*c)),P=Math.acos(_)/3,C=Math.sqrt(c),E=Math.cos(P),T=(-s-2*C*E)/(3*a),k=(-s+C*(E+this.THREE_SQRT*Math.sin(P)))/(3*a),x=(-s+C*(E-this.THREE_SQRT*Math.sin(P)))/(3*a);T>=0&&T<=1&&(i[h++]=T),k>=0&&k<=1&&(i[h++]=k),x>=0&&x<=1&&(i[h++]=x)}}return h}},{key:"cubicExtrema",value:function(e,t,r,n,o){var i=6*r-12*t+6*e,a=9*t+3*n-3*e-9*r,s=3*t-3*e,l=0;if(this.isAroundZero(a)){if(this.isNotAroundZero(i)){var u=-s/i;u>=0&&u<=1&&(o[l++]=u)}}else{var c=i*i-4*a*s;if(this.isAroundZero(c))o[0]=-i/(2*a);else if(c>0){var f=Math.sqrt(c),p=(-i+f)/(2*a),h=(-i-f)/(2*a);p>=0&&p<=1&&(o[l++]=p),h>=0&&h<=1&&(o[l++]=h)}}return l}},{key:"cubicSubdivide",value:function(e,t,r,n,o,i){var a=(t-e)*o+e,s=(r-t)*o+t,l=(n-r)*o+r,u=(s-a)*o+a,c=(l-s)*o+s,f=(c-u)*o+u;i[0]=e,i[1]=a,i[2]=u,i[3]=f,i[4]=f,i[5]=c,i[6]=l,i[7]=n}},{key:"cubicProjectPoint",value:function(e,t,r,n,o,i,a,s,l,u,c){var f,p=this.vector.create(),h=this.vector.create(),y=this.vector.create(),d=.005,v=1/0;p[0]=l,p[1]=u;for(var m=0;m<1;m+=.05){h[0]=this.cubicAt(e,r,o,a,m),h[1]=this.cubicAt(t,n,i,s,m);var b=this.vector.distSquare(p,h);b<v&&(f=m,v=b)}v=1/0;for(var g=0;g<32&&!(d<this.EPSILON);g++){var S=f-d,w=f+d;h[0]=this.cubicAt(e,r,o,a,S),h[1]=this.cubicAt(t,n,i,s,S);var O=this.vector.distSquare(h,p);if(S>=0&&O<v)f=S,v=O;else{y[0]=this.cubicAt(e,r,o,a,w),y[1]=this.cubicAt(t,n,i,s,w);var _=this.vector.distSquare(y,p);w<=1&&_<v?(f=w,v=_):d*=.5}}return c&&(c[0]=this.cubicAt(e,r,o,a,f),c[1]=this.cubicAt(t,n,i,s,f)),Math.sqrt(v)}},{key:"quadraticAt",value:function(e,t,r,n){var o=1-n;return o*(o*e+2*n*t)+n*n*r}},{key:"quadraticDerivativeAt",value:function(e,t,r,n){return 2*((1-n)*(t-e)+n*(r-t))}},{key:"quadraticRootAt",value:function(e,t,r,n,o){var i=e-2*t+r,a=2*(t-e),s=e-n,l=0;if(this.isAroundZero(i)){if(this.isNotAroundZero(a)){var u=-s/a;u>=0&&u<=1&&(o[l++]=u)}}else{var c=a*a-4*i*s;if(this.isAroundZero(c)){var f=-a/(2*i);f>=0&&f<=1&&(o[l++]=f)}else if(c>0){var p=Math.sqrt(c),h=(-a+p)/(2*i),y=(-a-p)/(2*i);h>=0&&h<=1&&(o[l++]=h),y>=0&&y<=1&&(o[l++]=y)}}return l}},{key:"quadraticExtremum",value:function(e,t,r){var n=e+r-2*t;return 0===n?.5:(e-t)/n}},{key:"quadraticProjectPoint",value:function(e,t,r,n,o,i,a,s,l){var u,c=this.vector.create(),f=this.vector.create(),p=this.vector.create(),h=.005,y=1/0;c[0]=a,c[1]=s;for(var d=0;d<1;d+=.05){f[0]=this.quadraticAt(e,r,o,d),f[1]=this.quadraticAt(t,n,i,d);var v=this.vector.distSquare(c,f);v<y&&(u=d,y=v)}y=1/0;for(var m=0;m<32&&!(h<this.EPSILON);m++){var b=u-h,g=u+h;f[0]=this.quadraticAt(e,r,o,b),f[1]=this.quadraticAt(t,n,i,b);var S=this.vector.distSquare(f,c);if(b>=0&&S<y)u=b,y=S;else{p[0]=this.quadraticAt(e,r,o,g),p[1]=this.quadraticAt(t,n,i,g);var w=this.vector.distSquare(p,c);g<=1&&w<y?(u=g,y=w):h*=.5}}return l&&(l[0]=this.quadraticAt(e,r,o,u),l[1]=this.quadraticAt(t,n,i,u)),Math.sqrt(y)}}])&&xC(t.prototype,r),n&&xC(t,n),e}();function jC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var RC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.util=new aP,this.curve=new AC,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Area"}var t,r,n;return t=e,(r=[{key:"normalizeRadian",value:function(e){return(e%=this.PI2)<0&&(e+=this.PI2),e}},{key:"isInside",value:function(e,t,r,n){if(!t||!e)return!1;var o=e.type;this._ctx=this._ctx||this.util.getContext();var i=this._mathMethod(e,t,r,n);if(void 0!==i)return i;if(e.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(e,this._ctx,t,r,n);switch(o){case"ellipse":case"smicellipse":return!0;case"trochoid":var a="out"==t.location?t.r1+t.r2+t.d:t.r1-t.r2+t.d;return this.isInsideCircle(t,r,n,a);case"rose":return this.isInsideCircle(t,r,n,t.maxr);default:return!1}}},{key:"_mathMethod",value:function(e,t,r,n){switch(e.type){case"bezier-curve":return void 0===t.cpX2?this.isInsideQuadraticStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.xEnd,t.yEnd,t.lineWidth,r,n):this.isInsideCubicStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.cpX2,t.cpY2,t.xEnd,t.yEnd,t.lineWidth,r,n);case"line":return this.isInsideLine(t.xStart,t.yStart,t.xEnd,t.yEnd,t.lineWidth,r,n);case"broken-line":return this.isInsideBrokenLine(t.pointList,t.lineWidth,r,n);case"smicbroken-line":var o=r,i=n;return e.refOriginalPosition&&(o=r-e.refOriginalPosition[0],i=n-e.refOriginalPosition[1]),this.isInsideBrokenLine(t.pointList,t.lineWidth,o,i);case"ring":return this.isInsideRing(t.x,t.y,t.r0,t.r,r,n);case"smicring":var a=t.x,s=t.y;return e.refOriginalPosition&&(a=t.x+e.refOriginalPosition[0],s=t.y+e.refOriginalPosition[1]),this.isInsideRing(a,s,t.r0,t.r,r,n);case"circle":return this.isInsideCircle(t.x,t.y,t.r,r,n);case"smicpoint":var l=r,u=n;return e.refOriginalPosition&&(l=r-e.refOriginalPosition[0],u=n-e.refOriginalPosition[1]),this.isInsideCircle(t.x,t.y,t.r,l,u);case"sector":var c=t.startAngle*Math.PI/180,f=t.endAngle*Math.PI/180;return t.clockWise||(c=-c,f=-f),this.isInsideSector(t.x,t.y,t.r0,t.r,c,f,!t.clockWise,r,n);case"smicsector":var p=t.startAngle*Math.PI/180,h=t.endAngle*Math.PI/180;t.clockWise||(p=-p,h=-h);var y=t.x,d=t.y;return e.refOriginalPosition&&(y=t.x+e.refOriginalPosition[0],d=t.y+e.refOriginalPosition[1]),this.isInsideSector(y,d,t.r0,t.r,p,h,!t.clockWise,r,n);case"path":return this.isInsidePath(t.pathArray,Math.max(t.lineWidth,5),t.brushType,r,n);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(t.pointList,r,n);case"smicpolygon":var v=r,m=n;if(e.refOriginalPosition&&(v=r-e.refOriginalPosition[0],m=n-e.refOriginalPosition[1]),e.holePolygonPointLists&&e.holePolygonPointLists.length>0){for(var b=this.isInsidePolygon(t.pointList,v,m),g=e.holePolygonPointLists,S=!1,w=0,O=g.length;w<O;w++){var _=g[w];!0===this.isInsidePolygon(_,v,m)&&(S=!0)}return!0===b&&!1===S}return this.isInsidePolygon(t.pointList,v,m);case"text":var P=t.__rect||e.getRect(t);return this.isInsideRect(P.x,P.y,P.width,P.height,r,n);case"smictext":var C=e.getTextBackground(t);return this.isInsidePolygon(C,r,n);case"rectangle":case"image":return this.isInsideRect(t.x,t.y,t.width,t.height,r,n);case"smicimage":var E=t.x,T=t.y;return e.refOriginalPosition&&(E=t.x+e.refOriginalPosition[0],T=t.y+e.refOriginalPosition[1]),this.isInsideRect(E,T,t.width,t.height,r,n)}}},{key:"_buildPathMethod",value:function(e,t,r,n,o){return t.beginPath(),e.buildPath(t,r),t.closePath(),t.isPointInPath(n,o)}},{key:"isOutside",value:function(e,t,r,n){return!this.isInside(e,t,r,n)}},{key:"isInsideLine",value:function(e,t,r,n,o,i,a){if(0===o)return!1;var s=Math.max(o,5),l=0;if(a>t+s&&a>n+s||a<t-s&&a<n-s||i>e+s&&i>r+s||i<e-s&&i<r-s)return!1;if(e===r)return Math.abs(i-e)<=s/2;var u=(l=(t-n)/(e-r))*i-a+(e*n-r*t)/(e-r);return u*u/(l*l+1)<=s/2*s/2}},{key:"isInsideCubicStroke",value:function(e,t,r,n,o,i,a,s,l,u,c){if(0===l)return!1;var f=Math.max(l,5);return!(c>t+f&&c>n+f&&c>i+f&&c>s+f||c<t-f&&c<n-f&&c<i-f&&c<s-f||u>e+f&&u>r+f&&u>o+f&&u>a+f||u<e-f&&u<r-f&&u<o-f&&u<a-f)&&this.curve.cubicProjectPoint(e,t,r,n,o,i,a,s,u,c,null)<=f/2}},{key:"isInsideQuadraticStroke",value:function(e,t,r,n,o,i,a,s,l){if(0===a)return!1;var u=Math.max(a,5);return!(l>t+u&&l>n+u&&l>i+u||l<t-u&&l<n-u&&l<i-u||s>e+u&&s>r+u&&s>o+u||s<e-u&&s<r-u&&s<o-u)&&this.curve.quadraticProjectPoint(e,t,r,n,o,i,s,l,null)<=u/2}},{key:"isInsideArcStroke",value:function(e,t,r,n,o,i,a,s,l){var u=this.PI2;if(0===a)return!1;var c=Math.max(a,5);s-=e,l-=t;var f=Math.sqrt(s*s+l*l);if(f-c>r||f+c<r)return!1;if(Math.abs(n-o)>=u)return!0;if(i){var p=n;n=this.normalizeRadian(o),o=this.normalizeRadian(p)}else n=this.normalizeRadian(n),o=this.normalizeRadian(o);n>o&&(o+=u);var h=Math.atan2(l,s);return h<0&&(h+=u),h>=n&&h<=o||h+u>=n&&h+u<=o}},{key:"isInsideBrokenLine",value:function(e,t,r,n){for(var o=Math.max(t,10),i=0,a=e.length-1;i<a;i++){var s=e[i][0],l=e[i][1],u=e[i+1][0],c=e[i+1][1];if(this.isInsideLine(s,l,u,c,o,r,n))return!0}return!1}},{key:"isInsideRing",value:function(e,t,r,n,o,i){var a=(o-e)*(o-e)+(i-t)*(i-t);return a<n*n&&a>r*r}},{key:"isInsideRect",value:function(e,t,r,n,o,i){return o>=e&&o<=e+r&&i>=t&&i<=t+n}},{key:"isInsideCircle",value:function(e,t,r,n,o){return(n-e)*(n-e)+(o-t)*(o-t)<r*r}},{key:"isInsideSector",value:function(e,t,r,n,o,i,a,s,l){return this.isInsideArcStroke(e,t,(r+n)/2,o,i,a,n-r,s,l)}},{key:"isInsidePolygon",value:function(e,t,r){for(var n=e.length,o=0,i=0,a=n-1;i<n;i++){var s=e[a][0],l=e[a][1],u=e[i][0],c=e[i][1];o+=this.windingLine(s,l,u,c,t,r),a=i}return 0!==o}},{key:"windingLine",value:function(e,t,r,n,o,i){return i>t&&i>n||i<t&&i<n?0:n==t?0:(i-t)/(n-t)*(r-e)+e>o?n<t?1:-1:0}},{key:"swapExtrema",value:function(){var e=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=e}},{key:"windingCubic",value:function(e,t,r,n,o,i,a,s,l,u){var c=this.curve,f=this.roots,p=this.extrema;if(u>t&&u>n&&u>i&&u>s||u<t&&u<n&&u<i&&u<s)return 0;var h=c.cubicRootAt(t,n,i,s,u,f);if(0===h)return 0;for(var y,d,v=0,m=-1,b=0;b<h;b++){var g=f[b];c.cubicAt(e,r,o,a,g)<l||(m<0&&(m=c.cubicExtrema(t,n,i,s,p),p[1]<p[0]&&m>1&&this.swapExtrema(),y=c.cubicAt(t,n,i,s,p[0]),m>1&&(d=c.cubicAt(t,n,i,s,p[1]))),2==m?g<p[0]?v+=y<t?1:-1:g<p[1]?v+=d<y?1:-1:v+=s<d?1:-1:g<p[0]?v+=y<t?1:-1:v+=s<y?1:-1)}return v}},{key:"windingQuadratic",value:function(e,t,r,n,o,i,a,s){var l=this.curve,u=this.roots;if(s>t&&s>n&&s>i||s<t&&s<n&&s<i)return 0;var c=l.quadraticRootAt(t,n,i,s,u);if(0===c)return 0;var f=l.quadraticExtremum(t,n,i);if(f>=0&&f<=1){for(var p=0,h=l.quadraticAt(t,n,i,f),y=0;y<c;y++){l.quadraticAt(e,r,o,u[y])>a||(u[y]<f?p+=h<t?1:-1:p+=i<h?1:-1)}return p}return l.quadraticAt(e,r,o,u[0])>a?0:i<t?1:-1}},{key:"windingArc",value:function(e,t,r,n,o,i,a,s){var l=this.roots,u=this.PI2;if((s-=t)>r||s<-r)return 0;var c=Math.sqrt(r*r-s*s);if(l[0]=-c,l[1]=c,Math.abs(n-o)>=u){n=0,o=u;var f=i?1:-1;return a>=l[0]+e&&a<=l[1]+e?f:0}if(i){var p=n;n=this.normalizeRadian(o),o=this.normalizeRadian(p)}else n=this.normalizeRadian(n),o=this.normalizeRadian(o);n>o&&(o+=u);for(var h=0,y=0;y<2;y++){var d=l[y];if(d+e>a){var v=Math.atan2(s,d),m=i?1:-1;v<0&&(v=u+v),(v>=n&&v<=o||v+u>=n&&v+u<=o)&&(v>Math.PI/2&&v<1.5*Math.PI&&(m=-m),h+=m)}}return h}},{key:"isInsidePath",value:function(e,t,r,n,o){for(var i=0,a=0,s=0,l=0,u=0,c=!0,f=!0,p="stroke"===(r=r||"fill")||"both"===r,h="fill"===r||"both"===r,y=0;y<e.length;y++){var d=e[y],v=d.points;if(c||"M"===d.command){if(y>0&&(h&&(i+=this.windingLine(a,s,l,u,n,o)),0!==i))return!0;l=v[v.length-2],u=v[v.length-1],c=!1,f&&"A"!==d.command&&(f=!1,a=l,s=u)}switch(d.command){case"M":a=v[0],s=v[1];break;case"L":if(p&&this.isInsideLine(a,s,v[0],v[1],t,n,o))return!0;h&&(i+=this.windingLine(a,s,v[0],v[1],n,o)),a=v[0],s=v[1];break;case"C":if(p&&this.isInsideCubicStroke(a,s,v[0],v[1],v[2],v[3],v[4],v[5],t,n,o))return!0;h&&(i+=this.windingCubic(a,s,v[0],v[1],v[2],v[3],v[4],v[5],n,o)),a=v[4],s=v[5];break;case"Q":if(p&&this.isInsideQuadraticStroke(a,s,v[0],v[1],v[2],v[3],t,n,o))return!0;h&&(i+=this.windingQuadratic(a,s,v[0],v[1],v[2],v[3],n,o)),a=v[2],s=v[3];break;case"A":var m=v[0],b=v[1],g=v[2],S=v[3],w=v[4],O=v[5],_=Math.cos(w)*g+m,P=Math.sin(w)*S+b;f?(f=!1,l=_,u=P):i+=this.windingLine(a,s,_,P);var C=(n-m)*S/g+m;if(p&&this.isInsideArcStroke(m,b,S,w,w+O,1-v[7],t,C,o))return!0;h&&(i+=this.windingArc(m,b,S,w,w+O,1-v[7],C,o)),a=Math.cos(w+O)*g+m,s=Math.sin(w+O)*S+b;break;case"z":if(p&&this.isInsideLine(a,s,l,u,t,n,o))return!0;c=!0}}return h&&(i+=this.windingLine(a,s,l,u,n,o)),0!==i}},{key:"getTextWidth",value:function(e,t){var r=e+":"+t;if(this._textWidthCache[r])return this._textWidthCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t);for(var n=0,o=0,i=(e=(e+"").split("\n")).length;o<i;o++)n=Math.max(this._ctx.measureText(e[o]).width,n);return this._ctx.restore(),this._textWidthCache[r]=n,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),n}},{key:"getTextHeight",value:function(e,t){var r=e+":"+t;if(this._textHeightCache[r])return this._textHeightCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t),e=(e+"").split("\n");var n=(this._ctx.measureText("ZH").width+2)*e.length;return this._ctx.restore(),this._textHeightCache[r]=n,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),n}}])&&jC(t.prototype,r),n&&jC(t,n),e}();function LC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var MC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.ComputeBoundingBox"}var t,r,n;return t=e,(r=[{key:"computeBoundingBox",value:function(e,t,r){if(0!==e.length){for(var n=e[0][0],o=e[0][0],i=e[0][1],a=e[0][1],s=1;s<e.length;s++){var l=e[s];l[0]<n&&(n=l[0]),l[0]>o&&(o=l[0]),l[1]<i&&(i=l[1]),l[1]>a&&(a=l[1])}t[0]=n,t[1]=i,r[0]=o,r[1]=a}}},{key:"cubeBezier",value:function(e,t,r,n,o,i){var a=new AC,s=[];a.cubicExtrema(e[0],t[0],r[0],n[0],s);for(var l=0;l<s.length;l++)s[l]=a.cubicAt(e[0],t[0],r[0],n[0],s[l]);var u=[];a.cubicExtrema(e[1],t[1],r[1],n[1],u);for(var c=0;c<u.length;c++)u[c]=a.cubicAt(e[1],t[1],r[1],n[1],u[c]);s.push(e[0],n[0]),u.push(e[1],n[1]);var f=Math.min.apply(null,s),p=Math.max.apply(null,s),h=Math.min.apply(null,u),y=Math.max.apply(null,u);o[0]=f,o[1]=h,i[0]=p,i[1]=y}},{key:"quadraticBezier",value:function(e,t,r,n,o){var i=new AC,a=i.quadraticExtremum(e[0],t[0],r[0]),s=i.quadraticExtremum(e[1],t[1],r[1]),l=1-(a=Math.max(Math.min(a,1),0)),u=1-(s=Math.max(Math.min(s,1),0)),c=l*l*e[0]+2*l*a*t[0]+a*a*r[0],f=l*l*e[1]+2*l*a*t[1]+a*a*r[1],p=u*u*e[0]+2*u*s*t[0]+s*s*r[0],h=u*u*e[1]+2*u*s*t[1]+s*s*r[1];n[0]=Math.min(e[0],r[0],c,p),n[1]=Math.min(e[1],r[1],f,h),o[0]=Math.max(e[0],r[0],c,p),o[1]=Math.max(e[1],r[1],f,h)}},{key:"arc",value:function(e,t,r,n,o,i,a,s){var l=new kC,u=l.create(),c=l.create(),f=l.create();if(u[0]=Math.cos(n)*r+e,u[1]=Math.sin(n)*r+t,c[0]=Math.cos(o)*r+e,c[1]=Math.sin(o)*r+t,l.min(a,u,c),l.max(s,u,c),(n%=2*Math.PI)<0&&(n+=2*Math.PI),(o%=2*Math.PI)<0&&(o+=2*Math.PI),n>o&&!i?o+=2*Math.PI:n<o&&i&&(n+=2*Math.PI),i){var p=o;o=n,n=p}for(var h=0;h<o;h+=Math.PI/2)h>n&&(f[0]=Math.cos(h)*r+e,f[1]=Math.sin(h)*r+t,l.min(a,f,a),l.max(s,f,s))}}])&&LC(t.prototype,r),n&&LC(t,n),e}();function NC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var IC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Env";var t,r,n,o,i,a,s,l,u,c,f,p,h,y,d,v,m,b,g,S,w,O=this;return t=navigator.userAgent,r=O.os={},n=O.browser={},o=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=t.match(/(Android);?[\s\/]+([\d.]+)?/),a=t.match(/(iPad).*OS\s([\d_]+)/),s=t.match(/(iPod)(.*OS\s([\d_]+))?/),l=!a&&t.match(/(iPhone\sOS)\s([\d_]+)/),u=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=u&&t.match(/TouchPad/),f=t.match(/Kindle\/([\d.]+)/),p=t.match(/Silk\/([\d._]+)/),h=t.match(/(BlackBerry).*Version\/([\d.]+)/),y=t.match(/(BB10).*Version\/([\d.]+)/),d=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),v=t.match(/PlayBook/),m=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),b=t.match(/Firefox\/([\d.]+)/),g=t.match(/MSIE ([\d.]+)/),S=o&&t.match(/Mobile\//)&&!m,w=t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!m,(n.webkit=!!o)&&(n.version=o[1]),i&&(r.android=!0,r.version=i[2]),l&&!s&&(r.ios=r.iphone=!0,r.version=l[2].replace(/_/g,".")),a&&(r.ios=r.ipad=!0,r.version=a[2].replace(/_/g,".")),s&&(r.ios=r.ipod=!0,r.version=s[3]?s[3].replace(/_/g,"."):null),u&&(r.webos=!0,r.version=u[2]),c&&(r.touchpad=!0),h&&(r.blackberry=!0,r.version=h[2]),y&&(r.bb10=!0,r.version=y[2]),d&&(r.rimtabletos=!0,r.version=d[2]),v&&(n.playbook=!0),f&&(r.kindle=!0,r.version=f[1]),p&&(n.silk=!0,n.version=p[1]),!p&&r.android&&t.match(/Kindle Fire/)&&(n.silk=!0),m&&(n.chrome=!0,n.version=m[1]),b&&(n.firefox=!0,n.version=b[1]),g&&(n.ie=!0,n.version=g[1]),S&&(t.match(/Safari/)||r.ios)&&(n.safari=!0),w&&(n.webview=!0),g&&(n.ie=!0,n.version=g[1]),r.tablet=!!(a||v||i&&!t.match(/Mobile/)||b&&t.match(/Tablet/)||g&&!t.match(/Phone/)&&t.match(/Touch/)),r.phone=!(r.tablet||r.ipod||!(i||l||u||h||y||m&&t.match(/Android/)||m&&t.match(/CriOS\/([\d.]+)/)||b&&t.match(/Mobile/)||g&&t.match(/Touch/))),{browser:n,os:r,canvasSupported:!!document.createElement("canvas").getContext}}var t,r,n;return t=e,(r=[{key:"destory",value:function(){return!0}}])&&NC(t.prototype,r),n&&NC(t,n),e}();function DC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var FC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stop="function"==typeof window.addEventListener?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Event"}var t,r,n;return t=e,(r=[{key:"getX",value:function(e){return void 0!==e.zrenderX&&e.zrenderX||void 0!==e.offsetX&&e.offsetX||void 0!==e.layerX&&e.layerX||void 0!==e.clientX&&e.clientX}},{key:"getY",value:function(e){return void 0!==e.zrenderY&&e.zrenderY||void 0!==e.offsetY&&e.offsetY||void 0!==e.layerY&&e.layerY||void 0!==e.clientY&&e.clientY}},{key:"getDelta",value:function(e){return void 0!==e.zrenderDelta&&e.zrenderDelta||void 0!==e.wheelDelta&&e.wheelDelta||void 0!==e.detail&&-e.detail}}])&&DC(t.prototype,r),n&&DC(t,n),e}();function BC(e){return(BC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var UC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Http"}var t,r,n;return t=e,(r=[{key:"get",value:function(e,t,r){if("object"===BC(e)){var n=e;e=n.url,t=n.onsuccess,r=n.onerror}var o=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open("GET",e,!0),o.onreadystatechange=function(){4==o.readyState&&(o.status>=200&&o.status<300||304===o.status?t&&t(o.responseText):r&&r(),o.onreadystatechange=new Function,o=null)},o.send(null)}}])&&GC(t.prototype,r),n&&GC(t,n),e}();
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var HC=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};function JC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}HC.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},HC.catchBrushException=!1,HC.debugMode=0;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var WC=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Log",function(){if(0!==HC.debugMode)if(1==HC.debugMode)for(var e in arguments)throw new Error(arguments[e]);else if(HC.debugMode>1)for(var t in arguments)console.log(arguments[t])}}var t,r,n;return t=e,(r=[{key:"destory",value:function(){return!0}}])&&JC(t.prototype,r),n&&JC(t,n),e}();function VC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._radians=window.Math.PI/180,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Math"}var t,r,n;return t=e,(r=[{key:"sin",value:function(e,t){return window.Math.sin(t?e*this._radians:e)}},{key:"cos",value:function(e,t){return window.Math.cos(t?e*this._radians:e)}},{key:"degreeToRadian",value:function(e){return e*this._radians}},{key:"radianToDegree",value:function(e){return e/this._radians}}])&&VC(t.prototype,r),n&&VC(t,n),e}();function qC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var YC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Matrix"}var t,r,n;return t=e,(r=[{key:"create",value:function(){var e=new(0,this.ArrayCtor)(6);return this.identity(e),e}},{key:"identity",value:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}},{key:"copy",value:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}},{key:"mul",value:function(e,t,r){return e[0]=t[0]*r[0]+t[2]*r[1],e[1]=t[1]*r[0]+t[3]*r[1],e[2]=t[0]*r[2]+t[2]*r[3],e[3]=t[1]*r[2]+t[3]*r[3],e[4]=t[0]*r[4]+t[2]*r[5]+t[4],e[5]=t[1]*r[4]+t[3]*r[5]+t[5],e}},{key:"translate",value:function(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}},{key:"rotate",value:function(e,t,r){var n=t[0],o=t[2],i=t[4],a=t[1],s=t[3],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c+a*u,e[1]=-n*u+a*c,e[2]=o*c+s*u,e[3]=-o*u+c*s,e[4]=c*i+u*l,e[5]=c*l-u*i,e}},{key:"scale",value:function(e,t,r){var n=r[0],o=r[1];return e[0]=t[0]*n,e[1]=t[1]*o,e[2]=t[2]*n,e[3]=t[3]*o,e[4]=t[4]*n,e[5]=t[5]*o,e}},{key:"invert",value:function(e,t){var r=t[0],n=t[2],o=t[4],i=t[1],a=t[3],s=t[5],l=r*a-i*n;return l?(l=1/l,e[0]=a*l,e[1]=-i*l,e[2]=-n*l,e[3]=r*l,e[4]=(n*s-a*o)*l,e[5]=(i*o-r*s)*l,e):null}},{key:"mulVector",value:function(e,t,r){var n=t[0],o=t[2],i=t[4],a=t[1],s=t[3],l=t[5];return e[0]=r[0]*n+r[1]*o+i,e[1]=r[0]*a+r[1]*s+l,e}}])&&qC(t.prototype,r),n&&qC(t,n),e}();function QC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var XC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"SUtil_smoothBezier",value:function(t,r,n,o,i){i&&2===i||(i=[0,0]);var a,s,l=i,u=[],c=[],f=[],p=[],h=!!o;if(h){a=[1/0,1/0],s=[-1/0,-1/0];for(var y=t.length,d=0;d<y;d++)e.Util_vector.min(a,a,[t[d][0]+l[0],t[d][1]+l[1]]),e.Util_vector.max(s,s,[t[d][0]+l[0],t[d][1]+l[1]]);e.Util_vector.min(a,a,o[0]),e.Util_vector.max(s,s,o[1])}for(var v=t.length,m=0;m<v;m++){var b=[t[m][0]+l[0],t[m][1]+l[1]],g=void 0,S=void 0;if(n)g=[t[m?m-1:v-1][0]+l[0],t[m?m-1:v-1][1]+l[1]],S=[t[(m+1)%v][0]+l[0],t[(m+1)%v][1]+l[1]];else{if(0===m||m===v-1){u.push([t[m][0]+l[0],t[m][1]+l[1]]);continue}g=[t[m-1][0]+l[0],t[m-1][1]+l[1]],S=[t[m+1][0]+l[0],t[m+1][1]+l[1]]}e.Util_vector.sub(c,S,g),e.Util_vector.scale(c,c,r);var w=e.Util_vector.distance(b,g),O=e.Util_vector.distance(b,S),_=w+O;0!==_&&(w/=_,O/=_),e.Util_vector.scale(f,c,-w),e.Util_vector.scale(p,c,O);var P=e.Util_vector.add([],b,f),C=e.Util_vector.add([],b,p);h&&(e.Util_vector.max(P,P,a),e.Util_vector.min(P,P,s),e.Util_vector.max(C,C,a),e.Util_vector.min(C,C,s)),u.push(P),u.push(C)}return n&&u.push(u.shift()),u}},{key:"SUtil_smoothSpline",value:function(t,r,n,o){o&&2===o||(o=[0,0]);for(var i=o,a=t.length,s=[],l=0,u=1;u<a;u++)l+=e.Util_vector.distance([t[u-1][0]+i[0],t[u-1][1]+i[1]],[t[u][0]+i[0],t[u][1]+i[1]]);var c=l/5;c=c<a?a:c;for(var f=0;f<c;f++){var p=f/(c-1)*(r?a:a-1),h=Math.floor(p),y=p-h,d=void 0,v=[t[h%a][0]+i[0],t[h%a][1]+i[1]],m=void 0,b=void 0;r?(d=[t[(h-1+a)%a][0]+i[0],t[(h-1+a)%a][1]+i[1]],m=[t[(h+1)%a][0]+i[0],t[(h+1)%a][1]+i[1]],b=[t[(h+2)%a][0]+i[0],t[(h+2)%a][1]+i[1]]):(d=[t[0===h?h:h-1][0]+i[0],t[0===h?h:h-1][1]+i[1]],m=[t[h>a-2?a-1:h+1][0]+i[0],t[h>a-2?a-1:h+1][1]+i[1]],b=[t[h>a-3?a-1:h+2][0]+i[0],t[h>a-3?a-1:h+2][1]+i[1]]);var g=y*y,S=y*g;s.push([w(d[0],v[0],m[0],b[0],y,g,S),w(d[1],v[1],m[1],b[1],y,g,S)])}return s;function w(e,t,r,n,o,i,a){var s=.5*(r-e),l=.5*(n-t);return(2*(t-r)+s+l)*a+(-3*(t-r)-2*s-l)*i+s*o+t}}},{key:"SUtil_dashedLineTo",value:function(e,t,r,n,o,i,a){var s=[5,5];if(i="number"!=typeof i?5:i,e.setLineDash)return s[0]=i,s[1]=i,a&&a instanceof Array?e.setLineDash(a):e.setLineDash(s),e.moveTo(t,r),void e.lineTo(n,o);var l=n-t,u=o-r,c=Math.floor(Math.sqrt(l*l+u*u)/i);l/=c,u/=c;for(var f=!0,p=0;p<c;++p)f?e.moveTo(t,r):e.lineTo(t,r),f=!f,t+=l,r+=u;e.lineTo(n,o)}}],(r=null)&&QC(t.prototype,r),n&&QC(t,n),e}();function KC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}XC.Util_area=new RC,XC.Util_color=new lP,XC.Util_computeBoundingBox=new MC,XC.Util_curve=new AC,XC.Util_env=new IC,XC.Util_event=new FC,XC.Util_http=new UC,XC.Util_log=new WC,XC.Util_math=new zC,XC.Util_matrix=new YC,XC.Util=new aP,XC.Util_vector=new kC;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ZC=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="SuperMap.LevelRenderer.Transformable",this.lookAt=(t=XC.Util_vector.create(),function(e){this.transform||(this.transform=XC.Util_matrix.create());var r=this.transform;function n(e){return e>-5e-5&&e<5e-5}XC.Util_vector.sub(t,e,this.position),n(t[0])&&n(t[1])||(XC.Util_vector.normalize(t,t),r[2]=t[0]*this.scale[1],r[3]=t[1]*this.scale[1],r[0]=t[1]*this.scale[0],r[1]=-t[0]*this.scale[0],r[4]=this.position[0],r[5]=this.position[1],this.decomposeTransform())})}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function e(e){return e>5e-5||e<-5e-5}this.needLocalTransform=e(this.rotation[0])||e(this.position[0])||e(this.position[1])||e(this.scale[0]-1)||e(this.scale[1]-1)}},{key:"updateTransform",value:function(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var e=[0,0],t=this.transform||XC.Util_matrix.create();if(XC.Util_matrix.identity(t),this.needLocalTransform){if(o(this.scale[0])||o(this.scale[1])){e[0]=-this.scale[2]||0,e[1]=-this.scale[3]||0;var r=o(e[0])||o(e[1]);r&&XC.Util_matrix.translate(t,t,e),XC.Util_matrix.scale(t,t,this.scale),r&&(e[0]=-e[0],e[1]=-e[1],XC.Util_matrix.translate(t,t,e))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){e[0]=-this.rotation[1]||0,e[1]=-this.rotation[2]||0;var n=o(e[0])||o(e[1]);n&&XC.Util_matrix.translate(t,t,e),XC.Util_matrix.rotate(t,t,this.rotation[0]),n&&(e[0]=-e[0],e[1]=-e[1],XC.Util_matrix.translate(t,t,e))}}else 0!==this.rotation&&XC.Util_matrix.rotate(t,t,this.rotation);(o(this.position[0])||o(this.position[1]))&&XC.Util_matrix.translate(t,t,this.position)}this.transform=t,this.parent&&this.parent.needTransform&&(this.needLocalTransform?XC.Util_matrix.mul(this.transform,this.parent.transform,this.transform):XC.Util_matrix.copy(this.transform,this.parent.transform))}function o(e){return e>5e-5||e<-5e-5}}},{key:"setTransform",value:function(e){if(this.needTransform){var t=this.transform;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}}},{key:"decomposeTransform",value:function(){if(this.transform){var e=this.transform,t=e[0]*e[0]+e[1]*e[1],r=this.position,n=this.scale,o=this.rotation;a(t-1)&&(t=Math.sqrt(t));var i=e[2]*e[2]+e[3]*e[3];a(i-1)&&(i=Math.sqrt(i)),r[0]=e[4],r[1]=e[5],n[0]=t,n[1]=i,n[2]=n[3]=0,o[0]=Math.atan2(-e[1]/i,e[0]/t),o[1]=o[2]=0}function a(e){return e>5e-5||e<-5e-5}}}])&&KC(t.prototype,r),n&&KC(t,n),e}();function $C(e){return($C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rE(e,t,r){return(rE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nE(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function nE(e){return(nE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oE(e,t){return(oE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var iE=function(e){function t(e){var r,n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=nE(t).call(this,e))||"object"!==$C(o)&&"function"!=typeof o?tE(n):o,e=e||{},r.id=null,r.style={},r.highlightStyle=null,r.parent=null,r.__dirty=!0,r.__clipShapes=[],r.invisible=!1,r.ignore=!1,r.zlevel=0,r.draggable=!1,r.clickable=!1,r.hoverable=!0,r.z=0,r.refOriginalPosition=[0,0],r.refDataID=null,r.isHoverByRefDataID=!1,r.refDataHoverGroup=null,r.dataInfo=null,ge.extend(tE(r),e),r.id=r.id||ge.createUniqueID("smShape_"),r.CLASS_NAME="SuperMap.LevelRenderer.Shape",r.getTansform=(i=[],function(e,t){var r=[e,t];return this.needTransform&&this.transform&&(XC.Util_matrix.invert(i,this.transform),XC.Util_matrix.mulVector(r,i,[e,t,1]),e==r[0]&&t==r[1]&&this.updateNeedTransform()),r}),r}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oE(e,t)}(t,n.mixin(EC,ZC)),r=t,i=[{key:"_fillText",value:function(e,r,n,o,i,a,s){i&&(e.font=i),e.textAlign=a,e.textBaseline=s;var l=t._getTextRect(r,n,o,i,a,s);r=(r+"").split("\n");var u=XC.Util_area.getTextHeight("ZH",i);switch(s){case"top":o=l.y;break;case"bottom":o=l.y+u;break;default:o=l.y+u/2}for(var c=0,f=r.length;c<f;c++)e.fillText(r[c],n,o),o+=u}},{key:"_getTextRect",value:function(e,t,r,n,o,i){var a=XC.Util_area.getTextWidth(e,n),s=XC.Util_area.getTextHeight("ZH",n);switch(e=(e+"").split("\n"),o){case"end":case"right":t-=a;break;case"center":t-=a/2}switch(i){case"top":break;case"bottom":r-=s*e.length;break;default:r-=s*e.length/2}return{x:t,y:r,width:a,height:s*e.length}}}],(o=[{key:"destroy",value:function(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,rE(nE(t.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){var r=this.beforeBrush(e,t);switch(e.beginPath(),this.buildPath(e,r),r.brushType){case"both":this.setCtxGlobalAlpha(e,"fill",r),e.fill(),r.lineWidth>0&&(this.setCtxGlobalAlpha(e,"stroke",r),e.stroke()),this.setCtxGlobalAlpha(e,"reset",r);break;case"stroke":this.setCtxGlobalAlpha(e,"stroke",r),r.lineWidth>0&&e.stroke(),this.setCtxGlobalAlpha(e,"reset",r);break;default:this.setCtxGlobalAlpha(e,"fill",r),e.fill(),this.setCtxGlobalAlpha(e,"reset",r)}this.drawText(e,r,this.style),this.afterBrush(e)}},{key:"beforeBrush",value:function(e,t){var r=this.style;return this.brushTypeOnly&&(r.brushType=this.brushTypeOnly),t&&(r=this.getHighlightStyle(r,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(r.strokeColor=r.strokeColor||r.color),e.save(),this.doClip(e),this.setContext(e,r),this.setTransform(e),r}},{key:"afterBrush",value:function(e){e.restore()}},{key:"setContext",value:function(e,t){for(var r=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],n=0,o=r.length;n<o;n++){var i=t[r[n][0]],a=r[n][1];void 0!==i&&(e[a]=i)}}},{key:"doClip",value:function(e){var t=XC.Util_matrix.create();if(this.__clipShapes)for(var r=0;r<this.__clipShapes.length;r++){var n=this.__clipShapes[r];if(n.needTransform){var o=n.transform;XC.Util_matrix.invert(t,o),e.transform(o[0],o[1],o[2],o[3],o[4],o[5])}if(e.beginPath(),n.buildPath(e,n.style),e.clip(),n.needTransform){var i=t;e.transform(i[0],i[1],i[2],i[3],i[4],i[5])}}}},{key:"getHighlightStyle",value:function(e,t,r){var n={};for(var o in e)n[o]=e[o];var i=XC.Util_color.getHighlightColor();for(var a in"stroke"!=e.brushType?(n.strokeColor=i,n.lineWidth=e.lineWidth||1,n.brushType="both"):"stroke"!=r?(n.strokeColor=i,n.lineWidth=e.lineWidth||1):n.strokeColor=t.strokeColor||XC.Util_color.mix(e.strokeColor,XC.Util_color.toRGB(i)),t)void 0!==t[a]&&(n[a]=t[a]);return n}},{key:"getHighlightZoom",value:function(){return"text"!=this.type?6:2}},{key:"drift",value:function(e,t){this.position[0]+=e,this.position[1]+=t}},{key:"buildPath",value:function(e,t){XC.Util_log("buildPath not implemented in "+this.type)}},{key:"getRect",value:function(e){XC.Util_log("getRect not implemented in "+this.type)}},{key:"isCover",value:function(e,t){var r=this.getTansform(e,t);e=r[0],t=r[1];var n=this.style.__rect;return n||(n=this.style.__rect=this.getRect(this.style)),e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height&&XC.Util_area.isInside(this,this.style,e,t)}},{key:"drawText",value:function(e,r,n){if(void 0!==r.text&&!1!==r.text){var o=r.textColor||r.color||r.strokeColor;e.fillStyle=o;var i,a,s,l,u=10,c=r.textPosition||this.textPosition||"top",f=[];switch(f=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],c){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var p=(n||r).__rect||this.getRect(n||r);switch(c){case"inside":s=p.x+p.width/2,l=p.y+p.height/2,i="center",a="middle","stroke"!=r.brushType&&o==r.color&&(e.fillStyle="#fff");break;case"left":s=p.x-u,l=p.y+p.height/2,i="end",a="middle";break;case"right":s=p.x+p.width+u,l=p.y+p.height/2,i="start",a="middle";break;case"top":s=p.x+p.width/2,l=p.y-u,i="center",a="bottom";break;case"bottom":s=p.x+p.width/2,l=p.y+p.height+u,i="center",a="top"}}break;case"start":case"end":var h=0,y=0,d=0,v=0;if(void 0!==r.pointList){var m=r.pointList;if(m.length<2)return;var b=m.length;switch(c){case"start":h=m[0][0]+f[0],y=m[1][0]+f[0],d=m[0][1]+f[1],v=m[1][1]+f[1];break;case"end":h=m[b-2][0]+f[0],y=m[b-1][0]+f[0],d=m[b-2][1]+f[1],v=m[b-1][1]+f[1]}}else h=r.xStart+f[0]||0,y=r.xEnd+f[0]||0,d=r.yStart+f[1]||0,v=r.yEnd+f[1]||0;switch(c){case"start":i=h<y?"end":"start",a=d<v?"bottom":"top",s=h,l=d;break;case"end":i=h<y?"start":"end",a=d<v?"top":"bottom",s=y,l=v}u-=4,h&&y&&h!=y?s-="end"==i?u:-u:i="center",d!=v?l-="bottom"==a?u:-u:a="middle";break;case"specific":s=r.textX||0,l=r.textY||0,i="start",a="middle"}r.labelXOffset&&!isNaN(r.labelXOffset)&&(s+=r.labelXOffset),r.labelYOffset&&!isNaN(r.labelYOffset)&&(l+=r.labelYOffset),null!=s&&null!=l&&t._fillText(e,r.text,s,l,r.textFont,r.textAlign||i,r.textBaseline||a)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(e,t,r){e.globalAlpha="fill"===t?void 0===r.fillOpacity?void 0===r.opacity?1:r.opacity:r.fillOpacity:"stroke"===t?void 0===r.strokeOpacity?void 0===r.opacity?1:r.opacity:r.strokeOpacity:void 0===r.opacity?1:r.opacity}}])&&eE(r.prototype,o),i&&eE(r,i),t}();function aE(e){return(aE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lE(e,t){return!t||"object"!==aE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uE(e,t,r){return(uE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cE(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function cE(e){return(cE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fE(e,t){return(fE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var pE=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=lE(this,cE(t).call(this,e))).type="smicpoint",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPoint",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fE(e,t)}(t,iE),r=t,(n=[{key:"destroy",value:function(){this.type=null,uE(cE(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;e.arc(t.x+r[0],t.y+r[1],t.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition;return e.__rect?e.__rect:(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+r[0]-e.r-t/2),y:Math.round(e.y+r[1]-e.r-t/2),width:2*e.r+t,height:2*e.r+t},e.__rect)}}])&&sE(r.prototype,n),o&&sE(r,o),t}();function hE(e){return(hE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dE(e,t){return!t||"object"!==hE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vE(e,t,r){return(vE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mE(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function mE(e){return(mE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bE(e,t){return(bE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var gE=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=dE(this,mE(t).call(this,e))).type="smictext",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicText",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bE(e,t)}(t,iE),r=t,(n=[{key:"destroy",value:function(){this.type=null,vE(mE(t.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=this.style;if(t&&(n=this.getHighlightStyle(n,this.highlightStyle||{})),void 0!==n.text&&!1!==n.text){e.save(),this.doClip(e),this.setContext(e,n),this.setTransform(e),n.textFont&&(e.font=n.textFont),e.textAlign=n.textAlign||"start",e.textBaseline=n.textBaseline||"middle";var o,i=(n.text+"").split("\n"),a=XC.Util_area.getTextHeight("ZH",n.textFont),s=this.getRectNoRotation(n),l=n.x+r[0];o="top"==n.textBaseline?s.y:"bottom"==n.textBaseline?s.y+a:s.y+a/2;for(var u=n.x+r[0],c=n.y+r[1],f=0,p=i.length;f<p;f++){switch(n.labelRect&&(e.fillRect(s.x-2,s.y,s.width+4,s.height),e.fillStyle=n.strokeColor,e.strokeRect(s.x-2,s.y,s.width+4,s.height),e.fillStyle=n.textColor),n.brushType){case"stroke":this.setCtxGlobalAlpha(e,"stroke",n),n.textRotation&&0!==n.textRotation?(e.save(),e.translate(u,c),e.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?e.strokeText(i[f],0,a*f,n.maxWidth):e.strokeText(i[f],0,a*f):"bottom"==n.textBaseline?n.maxWidth?e.strokeText(i[f],0,a*(f+1)-s.height,n.maxWidth):e.strokeText(i[f],0,a*(f+1)-s.height):n.maxWidth?e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth):e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),e.restore()):n.maxWidth?e.strokeText(i[f],l,o,n.maxWidth):e.strokeText(i[f],l,o),this.setCtxGlobalAlpha(e,"reset",n);break;case"both":n.textRotation&&0!==n.textRotation?(e.save(),e.translate(u,c),e.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*f,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*f,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*f),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*f),this.setCtxGlobalAlpha(e,"reset",n)):"bottom"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*(f+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*(f+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(e,"reset",n)):n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(e,"reset",n)),e.restore()):n.maxWidth?(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],l,o,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],l,o,n.maxWidth),this.setCtxGlobalAlpha(e,"reset",n)):(this.setCtxGlobalAlpha(e,"fill",n),e.fillText(i[f],l,o),this.setCtxGlobalAlpha(e,"reset",n),this.setCtxGlobalAlpha(e,"stroke",n),e.strokeText(i[f],l,o),this.setCtxGlobalAlpha(e,"reset",n));break;default:this.setCtxGlobalAlpha(e,"fill",n),n.textRotation&&0!==n.textRotation?(e.save(),e.translate(u,c),e.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?e.fillText(i[f],0,a*f,n.maxWidth):e.fillText(i[f],0,a*f):"bottom"==n.textBaseline?n.maxWidth?e.fillText(i[f],0,a*(f+1)-s.height,n.maxWidth):e.fillText(i[f],0,a*(f+1)-s.height):n.maxWidth?e.fillText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth):e.fillText(i[f],0,a*(f+1)-s.height/2-a/2),e.restore()):n.maxWidth?e.fillText(i[f],l,o,n.maxWidth):e.fillText(i[f],l,o),this.setCtxGlobalAlpha(e,"reset",n)}o+=a}e.restore()}}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;for(var t,r,n,o,i=this.getTextBackground(e,!0),a=0,s=i.length;a<s;a++){var l=i[a];0==a?(t=l[0],n=l[0],r=l[1],o=l[1]):(l[0]<t&&(t=l[0]),l[0]>n&&(n=l[0]),l[1]<r&&(r=l[1]),l[1]>o&&(o=l[1]))}return e.__rect={x:t,y:r,width:n-t,height:o-r},e.__rect}},{key:"getRectNoRotation",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition,n=XC.Util_area.getTextHeight("ZH",e.textFont),o=XC.Util_area.getTextWidth(e.text,e.textFont),i=XC.Util_area.getTextHeight(e.text,e.textFont),a=e.x+r[0];"end"==e.textAlign||"right"==e.textAlign?a-=o:"center"==e.textAlign&&(a-=o/2),t="top"==e.textBaseline?e.y+r[1]:"bottom"==e.textBaseline?e.y+r[1]-i:e.y+r[1]-i/2;var s,l=!1;if(e.maxWidth){var u=parseInt(e.maxWidth);u<o&&(s=o,l=!0,o=u),a=e.x+r[0],"end"==e.textAlign||"right"==e.textAlign?a-=o:"center"==e.textAlign&&(a-=o/2)}e.textFont&&(e.textFont.toLowerCase().indexOf("italic")>-1&&(o+=!0===l?n/3*(o/s):n/3));return{x:a,y:t,width:o,height:i}}},{key:"getTextBackground",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;if(!t&&e.__textBackground)return e.__textBackground;var n=this.getRectNoRotation(e),o=e.x+r[0],i=e.y+r[1],a=[];if(e.textRotation&&0!==e.textRotation){var s=e.textRotation,l=this.getRotatedLocation(n.x,n.y,o,i,s),u=this.getRotatedLocation(n.x+n.width,n.y,o,i,s),c=this.getRotatedLocation(n.x+n.width,n.y+n.height,o,i,s),f=this.getRotatedLocation(n.x,n.y+n.height,o,i,s);a.push(l),a.push(u),a.push(c),a.push(f)}else{var p=[n.x,n.y],h=[n.x+n.width,n.y],y=[n.x+n.width,n.y+n.height],d=[n.x,n.y+n.height];a.push(p),a.push(h),a.push(y),a.push(d)}return e.__textBackground=a,e.__textBackground}},{key:"getRotatedLocation",value:function(e,t,r,n,o){var i,a,s=new Array;return t=-t,n=-n,o=-o,i=(e-r)*Math.cos(o/180*Math.PI)-(t-n)*Math.sin(o/180*Math.PI)+r,a=(e-r)*Math.sin(o/180*Math.PI)+(t-n)*Math.cos(o/180*Math.PI)+n,s[0]=i,s[1]=-a,s}}])&&yE(r.prototype,n),o&&yE(r,o),t}();function SE(e){return(SE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function OE(e,t){return!t||"object"!==SE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _E(e,t,r){return(_E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=PE(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function PE(e){return(PE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CE(e,t){return(CE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var EE=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=OE(this,PE(t).call(this,e))).type="smiccircle",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicCircle",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CE(e,t)}(t,iE),r=t,(n=[{key:"destroy",value:function(){this.type=null,_E(PE(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.x+r[0],o=t.y+r[1];return e.moveTo(n+t.r,o),e.arc(n,o,t.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition,n=e.x+r[0],o=e.y+r[1],i=e.r;return t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(n-i-t/2),y:Math.round(o-i-t/2),width:2*i+t,height:2*i+t},e.__rect}}])&&wE(r.prototype,n),o&&wE(r,o),t}();function TE(e){return(TE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xE(e,t){return!t||"object"!==TE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function AE(e,t,r){return(AE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jE(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function jE(e){return(jE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RE(e,t){return(RE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var LE=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=xE(this,jE(t).call(this,e))).type="smicpolygon",r.holePolygonPointLists=null,r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPolygon",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RE(e,t)}(t,iE),r=t,(n=[{key:"destroy",value:function(){this.type=null,this.holePolygonPointLists=null,AE(jE(t.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.style;t&&(r=this.getHighlightStyle(r,this.highlightStyle||{})),e.save(),this.setContext(e,r),this.setTransform(e);var n=!1;"fill"!=r.brushType&&"both"!=r.brushType&&void 0!==r.brushType||(e.beginPath(),"dashed"==r.lineType||"dotted"==r.lineType||"dot"==r.lineType||"dash"==r.lineType||"dashdot"==r.lineType||"longdash"==r.lineType||"longdashdot"==r.lineType?this.buildPath(e,{lineType:"solid",lineWidth:r.lineWidth,pointList:r.pointList}):(this.buildPath(e,r),n=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",r),e.fill(),this.setCtxGlobalAlpha(e,"reset",r)),r.lineWidth>0&&("stroke"==r.brushType||"both"==r.brushType)&&(n||(e.beginPath(),this.buildPath(e,r)),this.setCtxGlobalAlpha(e,"stroke",r),e.stroke(),this.setCtxGlobalAlpha(e,"reset",r)),this.drawText(e,r,this.style);var o=ge.cloneObject(r);if(o.pointList&&this.holePolygonPointLists&&this.holePolygonPointLists.length>0)for(var i=this.holePolygonPointLists,a=i.length,s=0;s<a;s++){var l=i[s];o.pointList=l,e.globalCompositeOperation="destination-out",n=!1,"fill"!=o.brushType&&"both"!=o.brushType&&void 0!==o.brushType||(e.beginPath(),"dashed"==o.lineType||"dotted"==o.lineType||"dot"==o.lineType||"dash"==o.lineType||"dashdot"==o.lineType||"longdash"==o.lineType||"longdashdot"==o.lineType?this.buildPath(e,{lineType:"solid",lineWidth:o.lineWidth,pointList:o.pointList}):(this.buildPath(e,o),n=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",o),e.fill(),this.setCtxGlobalAlpha(e,"reset",o)),o.lineWidth>0&&("stroke"==o.brushType||"both"==o.brushType)?(n||(e.beginPath(),this.buildPath(e,o)),e.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(e,"stroke",o),e.stroke(),this.setCtxGlobalAlpha(e,"reset",o)):e.globalCompositeOperation="source-over"}e.restore()}},{key:"buildPath",value:function(e,t){t.showShadow&&(e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.pointList;if(!(n.length<2))if(t.smooth&&"spline"!==t.smooth){var o,i,a,s=XC.SUtil_smoothBezier(n,t.smooth,!0,t.smoothConstraint,r);e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var l=n.length,u=0;u<l;u++)o=s[2*u],i=s[2*u+1],a=[n[(u+1)%l][0]+r[0],n[(u+1)%l][1]+r[1]],e.bezierCurveTo(o[0],o[1],i[0],i[1],a[0],a[1])}else if("spline"===t.smooth&&(n=XC.SUtil_smoothSpline(n,!0,null,r)),t.lineType&&"solid"!=t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var c=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1);t._dashLength=c;var f=t.lineWidth||1,p=f,h=f;"dashed"===t.lineType&&(p*=5,h*=5,t.lineCap&&"butt"!==t.lineCap&&(p-=f,h+=f)),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(p=1,h+=f),"dot"===t.lineType&&(h*=4,t.lineCap&&"butt"!==t.lineCap&&(p=1,h+=f)),"dash"===t.lineType&&(p*=4,h*=4,t.lineCap&&"butt"!==t.lineCap&&(p-=f,h+=f)),"longdash"===t.lineType&&(p*=8,h*=4,t.lineCap&&"butt"!==t.lineCap&&(p-=f,h+=f)),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var y=1;y<n.length;y++)XC.SUtil_dashedLineTo(e,n[y-1][0]+r[0],n[y-1][1]+r[1],n[y][0]+r[0],n[y][1]+r[1],f,[p,h]);XC.SUtil_dashedLineTo(e,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],f,[p,h])}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var d=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1);t._dashLength=d;var v=t.lineWidth||1,m=v,b=v,g=v,S=v;"dashdot"===t.lineType&&(m*=4,b*=4,S*=4,t.lineCap&&"butt"!==t.lineCap&&(m-=v,b+=v,g=1,S+=v)),"longdashdot"===t.lineType&&(m*=8,b*=4,S*=4,t.lineCap&&"butt"!==t.lineCap&&(m-=v,b+=v,g=1,S+=v)),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var w=1;w<n.length;w++)XC.SUtil_dashedLineTo(e,n[w-1][0]+r[0],n[w-1][1]+r[1],n[w][0]+r[0],n[w][1]+r[1],v,[m,b,g,S]);XC.SUtil_dashedLineTo(e,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],v,[m,b,g,S])}}else{e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var O=1;O<n.length;O++)e.lineTo(n[O][0]+r[0],n[O][1]+r[1]);e.lineTo(n[0][0]+r[0],n[0][1]+r[1])}}},{key:"getRect",value:function(e,t){var r;if(t?r=t:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),r=this.refOriginalPosition),e.__rect)return e.__rect;for(var n,o=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MAX_VALUE,s=Number.MIN_VALUE,l=e.pointList,u=0,c=l.length;u<c;u++)l[u][0]+r[0]<o&&(o=l[u][0]+r[0]),l[u][0]+r[0]>i&&(i=l[u][0]+r[0]),l[u][1]+r[1]<a&&(a=l[u][1]+r[1]),l[u][1]+r[1]>s&&(s=l[u][1]+r[1]);return n="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(o-n/2),y:Math.round(a-n/2),width:i-o+n,height:s-a+n},e.__rect}}])&&kE(r.prototype,n),o&&kE(r,o),t}();function ME(e){return(ME="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function IE(e,t){return!t||"object"!==ME(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function DE(e,t,r){return(DE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=FE(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function FE(e){return(FE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BE(e,t){return(BE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var GE=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=IE(this,FE(t).call(this,e))).brushTypeOnly="stroke",r.textPosition="end",r.type="smicbroken-line",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicBrokenLine",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BE(e,t)}(t,iE),r=t,(n=[{key:"destroy",value:function(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,DE(FE(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.pointList;if(!(n.length<2)){var o=Math.min(t.pointList.length,Math.round(t.pointListLength||t.pointList.length));if(t.smooth&&"spline"!==t.smooth){var i,a,s,l=XC.SUtil_smoothBezier(n,t.smooth,!1,t.smoothConstraint,r);e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var u=0;u<o-1;u++)i=l[2*u],a=l[2*u+1],s=[n[u+1][0]+r[0],n[u+1][1]+r[1]],e.bezierCurveTo(i[0],i[1],a[0],a[1],s[0],s[1])}else if("spline"===t.smooth&&(o=(n=XC.SUtil_smoothSpline(n,null,null,r)).length),t.lineType&&"solid"!==t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var c=t.lineWidth||1,f=c,p=c;"dashed"===t.lineType&&(f*=5,p*=5,t.lineCap&&"butt"!==t.lineCap&&(f-=c,p+=c)),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(f=1,p+=c),"dot"===t.lineType&&(p*=4,t.lineCap&&"butt"!==t.lineCap&&(f=1,p+=c)),"dash"===t.lineType&&(f*=4,p*=4,t.lineCap&&"butt"!==t.lineCap&&(f-=c,p+=c)),"longdash"===t.lineType&&(f*=8,p*=4,t.lineCap&&"butt"!==t.lineCap&&(f-=c,p+=c)),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var h=1;h<o;h++)XC.SUtil_dashedLineTo(e,n[h-1][0]+r[0],n[h-1][1]+r[1],n[h][0]+r[0],n[h][1]+r[1],c,[f,p])}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var y=t.lineWidth||1,d=y,v=y,m=y,b=y;"dashdot"===t.lineType&&(d*=4,v*=4,b*=4,t.lineCap&&"butt"!==t.lineCap&&(d-=y,v+=y,m=1,b+=y)),"longdashdot"===t.lineType&&(d*=8,v*=4,b*=4,t.lineCap&&"butt"!==t.lineCap&&(d-=y,v+=y,m=1,b+=y)),y=(t.lineWidth||1)*("dashed"===t.lineType?5:1),e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var g=1;g<o;g++)XC.SUtil_dashedLineTo(e,n[g-1][0]+r[0],n[g-1][1]+r[1],n[g][0]+r[0],n[g][1]+r[1],y,[d,v,m,b])}}else{e.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var S=1;S<o;S++)e.lineTo(n[S][0]+r[0],n[S][1]+r[1])}}}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return LE.prototype.getRect.apply(this,[e,t])}}])&&NE(r.prototype,n),o&&NE(r,o),t}();function UE(e){return(UE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function JE(e,t){return!t||"object"!==UE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function WE(e,t,r){return(WE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=VE(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function VE(e){return(VE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zE(e,t){return(zE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var qE=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=JE(this,VE(t).call(this,e))).type="smicimage",r._imageCache={},r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicImage",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zE(e,t)}(t,iE),r=t,(n=[{key:"destroy",value:function(){this.type=null,this._imageCache=null,WE(VE(t.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,r,n){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var o=this.refOriginalPosition,i=this.style||{};r&&(i=this.getHighlightStyle(i,this.highlightStyle||{}));var a=i.image,s=this;if("string"==typeof a){var l=a;this._imageCache[l]?a=this._imageCache[l]:((a=new Image).onload=function(){a.onload=null,clearTimeout(t._refreshTimeout),t._needsRefresh.push(s),t._refreshTimeout=setTimeout(function(){n&&n(t._needsRefresh),t._needsRefresh=[]},10)},a.src=l,this._imageCache[l]=a)}if(a){if("IMG"==a.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=a.readyState)return}else if(!a.complete)return;var u=i.width||a.width,c=i.height||a.height,f=i.x+o[0],p=i.y+o[1];if(!a.width||!a.height)return;if(e.save(),this.doClip(e),this.setContext(e,i),this.setTransform(e),i.sWidth&&i.sHeight){var h=i.sx+o[0]||0,y=i.sy+o[1]||0;e.drawImage(a,h,y,i.sWidth,i.sHeight,f,p,u,c)}else if(i.sx&&i.sy){var d=i.sx+o[0],v=i.sy+o[1],m=u-d,b=c-v;e.drawImage(a,d,v,m,b,f,p,u,c)}else e.drawImage(a,f,p,u,c);i.width||(i.width=u),i.height||(i.height=c),this.style.width||(this.style.width=u),this.style.height||(this.style.height=c),this.drawText(e,i,this.style),e.restore()}}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return{x:e.x+t[0],y:e.y+t[1],width:e.width,height:e.height}}},{key:"clearCache",value:function(){this._imageCache={}}}])&&HE(r.prototype,n),o&&HE(r,o),t}();function YE(e){return(YE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function XE(e,t){return!t||"object"!==YE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function KE(e,t,r){return(KE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ZE(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ZE(e){return(ZE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $E(e,t){return($E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/qE._needsRefresh=[],qE._refreshTimeout=null;var eT=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=XE(this,ZE(t).call(this,e))).type="smicrectangle",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicRectangle",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$E(e,t)}(t,iE),r=t,(n=[{key:"destroy",value:function(){this.type=null,KE(ZE(t.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r,n,o,i,a,s=this.refOriginalPosition,l=t.x+s[0],u=t.y+s[1],c=t.width,f=t.height,p=t.radius;"number"==typeof p?r=n=o=i=p:p instanceof Array?1===p.length?r=n=o=i=p[0]:2===p.length?(r=o=p[0],n=i=p[1]):3===p.length?(r=p[0],n=i=p[1],o=p[2]):(r=p[0],n=p[1],o=p[2],i=p[3]):r=n=o=i=0,r+n>c&&(r*=c/(a=r+n),n*=c/a),o+i>c&&(o*=c/(a=o+i),i*=c/a),n+o>f&&(n*=f/(a=n+o),o*=f/a),r+i>f&&(r*=f/(a=r+i),i*=f/a),e.moveTo(l+r,u),e.lineTo(l+c-n,u),0!==n&&e.quadraticCurveTo(l+c,u,l+c,u+n),e.lineTo(l+c,u+f-o),0!==o&&e.quadraticCurveTo(l+c,u+f,l+c-o,u+f),e.lineTo(l+i,u+f),0!==i&&e.quadraticCurveTo(l,u+f,l,u+f-i),e.lineTo(l,u+r),0!==r&&e.quadraticCurveTo(l,u,l+r,u)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;t.radius?this._buildRadiusPath(e,t):(e.moveTo(t.x+r[0],t.y+r[1]),e.lineTo(t.x+r[0]+t.width,t.y+r[1]),e.lineTo(t.x+r[0]+t.width,t.y+r[1]+t.height),e.lineTo(t.x+r[0],t.y+r[1]+t.height),e.lineTo(t.x+r[0],t.y+r[1])),e.closePath()}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,r=this.refOriginalPosition;return e.__rect?e.__rect:(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+r[0]-t/2),y:Math.round(e.y+r[1]-t/2),width:e.width+t,height:e.height+t},e.__rect)}}])&&QE(r.prototype,n),o&&QE(r,o),t}();function tT(e){return(tT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nT(e,t){return!t||"object"!==tT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oT(e,t,r){return(oT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function iT(e){return(iT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aT(e,t){return(aT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var sT=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=nT(this,iT(t).call(this,e))).type="smicsector",r.refOriginalPosition&&2===r.refOriginalPosition.length||(r.refOriginalPosition=[0,0]),r.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicSector",r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aT(e,t)}(t,iE),r=t,(n=[{key:"destroy",value:function(){this.type=null,oT(iT(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=t.x+r[0],o=t.y+r[1],i=t.r0||0,a=t.r,s=t.startAngle,l=t.endAngle,u=t.clockWise||!1;s=XC.Util_math.degreeToRadian(s),l=XC.Util_math.degreeToRadian(l),u||(s=-s,l=-l);var c=XC.Util_math.cos(s),f=XC.Util_math.sin(s);e.moveTo(c*i+n,f*i+o),e.lineTo(c*a+n,f*a+o),e.arc(n,o,a,s,l,!u),e.lineTo(XC.Util_math.cos(l)*i+n,XC.Util_math.sin(l)*i+o),0!==i&&e.arc(n,o,i,l,s,u),e.closePath()}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition,r=XC.Util_vector.create(),n=XC.Util_vector.create(),o=XC.Util_vector.create(),i=XC.Util_vector.create(),a=e.x+t[0],s=e.y+t[1],l=e.r0||0,u=e.r,c=XC.Util_math.degreeToRadian(e.startAngle),f=XC.Util_math.degreeToRadian(e.endAngle),p=e.clockWise;return p||(c=-c,f=-f),l>1?XC.Util_computeBoundingBox.arc(a,s,l,c,f,!p,r,o):(r[0]=o[0]=a,r[1]=o[1]=s),XC.Util_computeBoundingBox.arc(a,s,u,c,f,!p,n,i),XC.Util_vector.min(r,r,n),XC.Util_vector.max(o,o,i),e.__rect={x:r[0],y:r[1],width:o[0]-r[0],height:o[1]-r[1]},e.__rect}}])&&rT(r.prototype,n),o&&rT(r,o),t}();function lT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var uT=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shapeParameters=t,this.CLASS_NAME="SuperMap.Feature.ShapeFactory"}var t,r,n;return t=e,n=[{key:"transformStyle",value:function(e){var t={},r=["normal","normal","normal","12","arial,sans-serif"],n=[!0,!1];for(var o in e)switch(o){case"fill":n[0]=e[o];break;case"fillColor":t.color=e[o];break;case"stroke":n[1]=e[o];break;case"strokeWidth":t.lineWidth=e[o];break;case"strokeLinecap":t.lineCap=e[o];break;case"strokeLineJoin":t.lineJoin=e[o];break;case"strokeDashstyle":t.lineType=e[o];break;case"pointRadius":t.r=e[o];break;case"label":t.text=e[o];break;case"labelRect":t.labelRect=e[o];break;case"fontColor":t.textColor=e[o];break;case"fontStyle":r[0]=e[o];break;case"fontVariant":r[1]=e[o];break;case"fontWeight":r[2]=e[o];break;case"fontSize":var i="";e[o]&&e[o].toString().indexOf("px")<0&&(i="px"),r[3]=e[o]+i;break;case"fontFamily":r[4]=e[o];break;case"fontOpacity":t.opacity=e[o];break;case"labelPosition":t.textPosition=e[o];break;case"labelAlign":t.textAlign=e[o];break;case"labelBaseline":t.textBaseline=e[o];break;case"labelRotation":t.textRotation=e[o];break;default:t[o]=e[o]}return t.textFont=r.join(" "),!0===n[0]&&!1===n[1]?t.brushType="fill":!1===n[0]&&!0===n[1]?t.brushType="stroke":!0===n[0]&&!0===n[1]?t.brushType="both":t.brushType="fill",null==t.lineWidth&&(t.lineWidth=1),t}},{key:"Background",value:function(e,t,r){var n=r||{},o=new XP(t[0],t[3],Math.abs(t[2]-t[0]),Math.abs(t[3]-t[1]));return o.style={fillColor:"#f3f3f3"},n.backgroundStyle&&ge.copyAttributesWithClip(o.style,n.backgroundStyle),n.backgroundRadius&&(o.style.radius=n.backgroundRadius),o.clickable=!1,o.hoverable=!1,e.createShape(o)}},{key:"GraphAxis",value:function(e,t,r,n){var o=t,i=r||{},a=[],s=[],l=!!i.useXReferenceLine&&i.useXReferenceLine,u=i.axisYTick&&!isNaN(i.axisYTick)?i.axisYTick:0,c=[],f=[];if(0==u){if(f.push([o[0],o[3]-5]),f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var p=parseInt(i.axis3DParameter),h=[o[0]-p,o[1]+p];i.axisUseArrow?(c.push([h[0]+1.5,h[1]-7.5]),c.push([h[0]-1,h[1]+1]),c.push([h[0]+7.5,h[1]-1.5]),f.push([h[0],h[1]])):f.push([h[0],h[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}else{var y=Math.abs(o[1]-o[3])/u,d=o[3];f.push([o[0],d-5]);for(var v=0;v<u;v++){if(f.push([o[0],d]),f.push([o[0]-5,d]),f.push([o[0],d]),l){var m=new IP([[o[0],d],[o[2],d]]);m.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},m.clickable=!1,m.hoverable=!1,i.xReferenceLineStyle&&ge.copyAttributesWithClip(m.style,i.xReferenceLineStyle),a.push(e.createShape(m))}d+=y}if(f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var b=parseInt(i.axis3DParameter),g=[o[0]-b,o[1]+b];i.axisUseArrow?(c.push([g[0]+1.5,g[1]-7.5]),c.push([g[0]-1,g[1]+1]),c.push([g[0]+7.5,g[1]-1.5]),f.push([g[0],g[1]])):f.push([g[0],g[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}if(i.axisUseArrow){var S=[[o[2]+5,o[1]+4],[o[2]+13,o[1]],[o[2]+5,o[1]-4]],w=[[o[0]-4,o[3]-5],[o[0],o[3]-13],[o[0]+4,o[3]-5]],O=new JP(S);O.style={fillColor:"#008acd"},ge.copyAttributesWithClip(O.style,i.axisStyle),s.push(e.createShape(O));var _=new JP(w);if(_.style={fillColor:"#008acd"},ge.copyAttributesWithClip(_.style,i.axisStyle),s.push(e.createShape(_)),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var P=new JP(c);P.style={fillColor:"#008acd"},ge.copyAttributesWithClip(P.style,i.axisStyle),s.push(e.createShape(P))}}var C=new IP(f);C.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},i.axisStyle&&ge.copyAttributesWithClip(C.style,i.axisStyle),C.clickable=!1,C.hoverable=!1;var E=[e.createShape(C)],T=[];if(i.axisYLabels&&i.axisYLabels.length&&i.axisYLabels.length>0){var k=i.axisYLabels,x=k.length,A=[0,0];if(i.axisYLabelsOffset&&i.axisYLabelsOffset.length&&(A=i.axisYLabelsOffset),1==x){var j=new cC(o[0]-5+A[0],o[3]+A[1],k[0]);j.style={labelAlign:"right"},i.axisYLabelsStyle&&ge.copyAttributesWithClip(j.style,i.axisYLabelsStyle),j.clickable=!1,j.hoverable=!1,T.push(e.createShape(j))}else for(var R=o[3],L=Math.abs(o[1]-o[3])/(x-1),M=0;M<x;M++){var N=new cC(o[0]-5+A[0],R+A[1],k[M]);N.style={labelAlign:"right"},i.axisYLabelsStyle&&ge.copyAttributesWithClip(N.style,i.axisYLabelsStyle),N.clickable=!1,N.hoverable=!1,T.push(e.createShape(N)),R+=L}}var I=[];if(i.axisXLabels&&i.axisXLabels.length&&i.axisXLabels.length>0){var D=i.axisXLabels,F=D.length,B=[0,0];if(i.axisXLabelsOffset&&i.axisXLabelsOffset.length&&(B=i.axisXLabelsOffset),n&&n.xPositions&&n.xPositions.length&&n.xPositions.length==F)for(var G=n.xPositions,U=0;U<F;U++){var H=new cC(G[U]+B[0],o[1]+B[1],D[U]);H.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&ge.copyAttributesWithClip(H.style,i.axisXLabelsStyle),H.clickable=!1,H.hoverable=!1,I.push(e.createShape(H))}else if(1==F){var J=new cC(o[0]-5+B[0],o[1]+B[0],D[0]);J.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&ge.copyAttributesWithClip(J.style,i.axisXLabelsStyle),J.clickable=!1,J.hoverable=!1,I.push(e.createShape(J))}else for(var W=o[0],V=Math.abs(o[2]-o[0])/(F-1),z=0;z<F;z++){var q=new cC(W+B[0],o[1]+B[1],D[z]);q.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&ge.copyAttributesWithClip(q.style,i.axisXLabelsStyle),q.clickable=!1,q.hoverable=!1,I.push(e.createShape(q)),W+=V}}return a.concat(E).concat(T).concat(I).concat(s)}},{key:"ShapeStyleTool",value:function(e,t,r,n,o,i){var a=e||{};if(t&&ge.copyAttributesWithClip(a,t),r&&r.length&&void 0!==o&&!isNaN(o)&&o>=0&&r[o]&&ge.copyAttributesWithClip(a,r[o]),n&&n.length&&void 0!==i)for(var s=n,l=s.length,u=parseFloat(i),c=0;c<l;c++)if(s[c].start<=u&&u<s[c].end){ge.copyAttributesWithClip(a,s[c].style);break}return a}}],(r=[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(t){if(t&&(this.shapeParameters=t),!this.shapeParameters)return null;var r=this.shapeParameters;if(r instanceof xP){var n=new Object;n.x=r.x,n.y=r.y,n.r=r.r,n=ge.copyAttributesWithClip(n,r.style,["x","y"]);var o=new pE;return o.style=e.transformStyle(n),o.highlightStyle=e.transformStyle(r.highlightStyle),ge.copyAttributesWithClip(o,r,["x","y","style","highlightStyle"]),o}if(r instanceof IP){if(!r.pointList)return null;var i=new Object;i.pointList=r.pointList,i=ge.copyAttributesWithClip(i,r.style,["pointList"]);var a=new GE;return a.style=e.transformStyle(i),a.highlightStyle=e.transformStyle(r.highlightStyle),ge.copyAttributesWithClip(a,r,["pointList","style","highlightStyle"]),a}if(r instanceof JP){if(!r.pointList)return null;var s=new Object;s.pointList=r.pointList,s=ge.copyAttributesWithClip(s,r.style,["pointList"]);var l=new LE;return l.style=e.transformStyle(s),l.highlightStyle=e.transformStyle(r.highlightStyle),ge.copyAttributesWithClip(l,r,["pointList","style","highlightStyle"]),l}if(r instanceof XP){if(!r.x&&!r.y&!r.width&!r.height)return null;var u=new Object;u.x=r.x,u.y=r.y,u.width=r.width,u.height=r.height,u=ge.copyAttributesWithClip(u,r.style,["x","y","width","height"]);var c=new eT;return c.style=e.transformStyle(u),c.highlightStyle=e.transformStyle(r.highlightStyle),ge.copyAttributesWithClip(c,r,["x","y","width","height","style","highlightStyle"]),c}if(r instanceof nC){var f=new Object;f.x=r.x,f.y=r.y,f.r=r.r,f.startAngle=r.startAngle,f.endAngle=r.endAngle,r.r0&&(f.r0=r.r0),r.clockWise&&(f.clockWise=r.clockWise),f=ge.copyAttributesWithClip(f,r.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var p=new sT;return p.style=e.transformStyle(f),p.highlightStyle=e.transformStyle(r.highlightStyle),ge.copyAttributesWithClip(p,r,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),p}if(r instanceof cC){var h=new Object;h.x=r.x,h.y=r.y,h.text=r.text,h=ge.copyAttributesWithClip(h,r.style,["x","y","text"]);var y=new gE;return y.style=e.transformStyle(h),y.highlightStyle=e.transformStyle(r.highlightStyle),ge.copyAttributesWithClip(y,r,["x","y","text","style","highlightStyle"]),y}if(r instanceof mC){var d=new Object;d.x=r.x,d.y=r.y,r.image&&(d.image=r.image),r.width&&(d.width=r.width),r.height&&(d.height=r.height),r.sx&&(d.sx=r.sx),r.sy&&(d.sy=r.sy),r.sWidth&&(d.sWidth=r.sWidth),r.sHeight&&(d.sHeight=r.sHeight),d=ge.copyAttributesWithClip(d,r.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var v=new qE;return v.style=e.transformStyle(d),v.highlightStyle=e.transformStyle(r.highlightStyle),ge.copyAttributesWithClip(v,r,["x","y","image","width","height","style","highlightStyle"]),v}if(r instanceof PC){var m=new Object;m.x=r.x,m.r=r.r,m.y=r.y,m=ge.copyAttributesWithClip(m,r.style,["x","y","r"]);var b=new EE;return b.style=e.transformStyle(m),b.highlightStyle=e.transformStyle(r.highlightStyle),ge.copyAttributesWithClip(b,r,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),b}return null}}])&&lT(t.prototype,r),n&&lT(t,n),e}();function cT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.Feature=n.Feature||{},n.Feature.ShapeFactory=uT;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fT=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&r&&r.map&&r.renderer&&(this.id=ge.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=null,this.location=[],this.data=t,this.shapes=[],this.layer=r,this.CLASS_NAME="SuperMap.Feature.Theme")}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}},{key:"getLocalXY",value:function(e){var t=this.layer.map.getResolution(),r=this.layer.map.getExtent();return e instanceof Xe||e instanceof ct?[e.x/t+-r.left/t,r.top/t-e.y/t]:e instanceof we?[e.lon/t+-r.left/t,r.top/t-e.lat/t]:null}}])&&cT(t.prototype,r),n&&cT(t,n),e}();function pT(e){return(pT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yT(e,t){return!t||"object"!==pT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dT(e,t,r){return(dT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function vT(e){return(vT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mT(e,t){return(mT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Feature=n.Feature||{},n.Feature.Theme=fT;var bT=function(e){function t(e,r,n,o,i,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=yT(this,vT(t).call(this,e,r,n,o,i,a))).shapeFactory=new uT,s.shapeParameters=null,s.RelativeCoordinate=!1,s.setting=null,s.origonPoint=null,s.chartBox=null,s.chartBounds=null,s.width=null,s.height=null,s.XOffset=0,s.YOffset=0,s.DVBParameter=null,s.dataViewBox=null,s.DVBCodomain=null,s.DVBCenterPoint=null,s.DVBUnitValue=null,s.DVBOrigonPoint=null,s.DVBWidth=null,s.DVBHeight=null,s.origonPointOffset=null,s.fields=n||[],s.dataValues=null,s.lonlat=i||s.data.geometry.getBounds().getCenterLonLat(),o&&o.width&&o.height&&o.codomain&&(s.setting=o),s.CLASS_NAME="SuperMap.Feature.Theme.Graph",s}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mT(e,t)}(t,fT),r=t,(n=[{key:"destroy",value:function(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,dT(vT(t.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var e=this.setting;if(!(e.width&&e.height&&e.codomain))return!1;var t=void 0===e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,r=fT.getDataValues(this.data,this.fields,t);this.dataValues=r||[],this.width=parseFloat(e.width),this.height=parseFloat(e.height),this.DVBCodomain=e.codomain,this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var n=this.width,o=this.height,i=this.location;this.origonPoint=[i[0]-n/2,i[1]-o/2];var a=this.origonPoint;this.chartBox=[a[0],a[1]+o,a[0]+n,a[1]];var s=this.chartBox,l=this.DVBParameter;this.dataViewBox=[s[0]+l[0],s[1]-l[1],s[2]-l[2],s[3]+l[3]];var u=this.dataViewBox;return!(u[0]>=u[2]||u[1]<=u[3])&&(this.DVBOrigonPoint=[u[0],u[3]],this.DVBWidth=Math.abs(u[2]-u[0]),this.DVBHeight=Math.abs(u[1]-u[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-a[0],this.DVBOrigonPoint[1]-a[1]],!0)}},{key:"resetLocation",value:function(e){e&&(this.lonlat=e);var t=this.getLocalXY(this.lonlat);t[0]+=this.XOffset,t[1]+=this.YOffset,this.location=t;var r=this.width,n=this.height,o=this.location;return this.chartBounds=new _e(o[0]-r/2,o[1]+n/2,o[0]+r/2,o[1]-n/2),this.resetLinearGradient(),o}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var e=this.shapes,t=this.location,r=0,n=e.length;r<n;r++){e[r].refOriginalPosition=t;var o=e[r].style;for(var i in o)switch(i){case"pointList":for(var a=o[i],s=0,l=a.length;s<l;s++)a[s][0]-=t[0],a[s][1]-=t[1];break;case"x":o[i]-=t[0];break;case"y":o[i]-=t[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(e){return this.layer.getLocalXY(e)}}])&&hT(r.prototype,n),o&&hT(r,o),t}();function gT(e){return(gT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ST(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wT(e,t){return!t||"object"!==gT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OT(e,t,r){return(OT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_T(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function _T(e){return(_T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PT(e,t){return(PT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/fT.getDataValues=function(e,t,r){if(!e.attributes)return!1;for(var n=[],o=e.attributes,i=0;i<t.length;i++)for(var a in o)if(a===t[i])try{!isNaN(r)&&r>=0?n.push(parseFloat(o[a].toString()).toFixed(r)):n.push(parseFloat(o[a].toString()))}catch(e){throw new Error("not a number")}return n.length===t.length&&n},n.Feature.Theme.Graph=bT;var CT=function(e){function t(e,r,n,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=wT(this,_T(t).call(this,e,r,n,o,i))).CLASS_NAME="SuperMap.Feature.Theme.Bar",a}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PT(e,t)}(t,bT),r=t,(n=[{key:"destroy",value:function(){OT(_T(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},t=this.setting;if(t.barLinearGradient||(t.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.dataViewBox,o=this.dataValues;if(!(o.length<1)){for(var i=0,a=o.length;i<a;i++)if(o[i]<r[0]||o[i]>r[1])return;var s=this.calculateXShapeInfo();if(s){var l=s.xPositions,u=s.width;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(uT.Background(this.shapeFactory,this.chartBox,t)),(void 0===t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(uT.GraphAxis(this.shapeFactory,n,t,s)));for(var c=0;c<o.length;c++){var f=n[1]-(o[c]-r[0])/this.DVBUnitValue,p=[[l[c]-u/2,n[1]-1],[l[c]+u/2,n[1]-1],[l[c]+u/2,f],[l[c]-u/2,f]],h=new JP(p);if(void 0===t.showShadow||t.showShadow){if(t.barShadowStyle){var y=t.barShadowStyle;y.shadowBlur&&(e.shadowBlur=y.shadowBlur),y.shadowColor&&(e.shadowColor=y.shadowColor),y.shadowOffsetX&&(e.shadowOffsetX=y.shadowOffsetX),y.shadowOffsetY&&(e.shadowOffsetY=y.shadowOffsetY)}h.style={},ge.copyAttributesWithClip(h.style,e)}h.refDataID=this.data.id,h.dataInfo={field:this.fields[c],value:o[c]},void 0!==t.barHoverAble&&(h.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(h.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(h))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=0,a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=a-((e=r.xShapeBlank)[0]+e[2]+(n-1)*e[1]);if(s<=n)return null;i=s/n}else e=[i=a/(2*n+1),i,i];for(var l=0,u=0;u<n;u++)0==u?l=e[0]+i/2:l+=i+e[1],o.push(t[0]+l);return{xPositions:o,width:i}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var e=this.shapes.length,t=this.setting.barLinearGradient,r=-1,n=0;n<e;n++){var o=this.shapes[n];if("SuperMap.LevelRenderer.Shape.SmicPolygon"===o.CLASS_NAME){var i=o.style,a=this.location[0]+i.pointList[0][0],s=this.location[0]+i.pointList[1][0];++r>=t.length&&(r%=t.length);var l=t[r][0],u=t[r][1],c=(new lP).getLinearGradient(a,0,s,0,[[0,l],[1,u]]);o.style.color=c}}}}])&&ST(r.prototype,n),o&&ST(r,o),t}();function ET(e){return(ET="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kT(e,t){return!t||"object"!==ET(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xT(e,t,r){return(xT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=AT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function AT(e){return(AT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jT(e,t){return(jT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Feature.Theme.Bar=CT;var RT=function(e){function t(e,r,n,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=kT(this,AT(t).call(this,e,r,n,o,i))).CLASS_NAME="SuperMap.Feature.Theme.Bar3D",a}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jT(e,t)}(t,bT),r=t,(n=[{key:"destroy",value:function(){xT(AT(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,25,20,20]:e.dataViewBoxParameter=[5,5,5,5]),e.axisUseArrow=void 0===e.axisUseArrow||e.axisUseArrow,e.axisXLabelsOffset=void 0!==e.axisXLabelsOffset?e.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var t=this.DVBCodomain;this.DVBUnitValue=(t[1]-t[0])/this.DVBHeight;var r=this.dataViewBox,n=this.dataValues;if(!(n.length<1)){for(var o=0,i=n.length;o<i;o++)if(n[o]<t[0]||n[o]>t[1])return;var a=this.calculateXShapeInfo();if(a){var s=a.xPositions,l=a.width;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(uT.Background(this.shapeFactory,this.chartBox,e)),(!e.axis3DParameter||isNaN(e.axis3DParameter)||e.axis3DParameter<15)&&(e.axis3DParameter=20),(void 0===e.useAxis||e.useAxis)&&(this.shapes=this.shapes.concat(uT.GraphAxis(this.shapeFactory,r,e,a)));for(var u=e.bar3DParameter&&!isNaN(e.bar3DParameter)?e.bar3DParameter:10,c=0;c<n.length;c++){var f=r[1]-(n[c]-t[0])/this.DVBUnitValue,p=s[c]-l/2,h=s[c]+l/2,y=[[p,f],[h,f],[h-u,f+u],[p-u,f+u]],d=[[h,f],[h-u,f+u],[h-u,r[1]+u],[h,r[1]]],v=[[p-u,r[1]+u],[h-u,r[1]+u],[h-u,f+u],[p-u,f+u]];u<=0&&(v=[[p,r[1]],[h,r[1]],[h,f],[p,f]]);var m=new JP(y),b=new JP(d),g=new JP(v);e.barSideStyle=e.barSideStyle?e.barSideStyle:e.barFaceStyle,e.barSideStyleByFields=e.barSideStyleByFields?e.barSideStyleByFields:e.barFaceStyleByFields,e.barSideStyleByCodomain=e.barSideStyleByCodomain?e.barSideStyleByCodomain:e.barFaceStyleByCodomain,e.barTopStyle=e.barTopStyle?e.barTopStyle:e.barFaceStyle,e.barTopStyleByFields=e.barTopStyleByFields?e.barTopStyleByFields:e.barFaceStyleByFields,e.barTopStyleByCodomain=e.barTopStyleByCodomain?e.barTopStyleByCodomain:e.barFaceStyleByCodomain,g.style=uT.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barFaceStyle,e.barFaceStyleByFields,e.barFaceStyleByCodomain,c,n[c]),b.style=uT.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barSideStyle,e.barSideStyleByFields,e.barSideStyleByCodomain,c,n[c]),m.style=uT.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barTopStyle,e.barTopStyleByFields,e.barTopStyleByCodomain,c,n[c]),e.barSideHoverStyle=e.barSideHoverStyle?e.barSideHoverStyle:e.barFaceHoverStyle,e.barTopHoverStyle=e.barTopHoverStyle?e.barTopHoverStyle:e.barFaceHoverStyle,g.highlightStyle=uT.ShapeStyleTool({stroke:!0},e.barFaceHoverStyle),b.highlightStyle=uT.ShapeStyleTool({stroke:!0},e.barSideHoverStyle),m.highlightStyle=uT.ShapeStyleTool({stroke:!0},e.barTopHoverStyle),m.refDataID=b.refDataID=g.refDataID=this.data.id,m.isHoverByRefDataID=b.isHoverByRefDataID=g.isHoverByRefDataID=!0,m.refDataHoverGroup=b.refDataHoverGroup=g.refDataHoverGroup=ge.createUniqueID("lr_shg"),m.dataInfo=b.dataInfo=g.dataInfo={field:this.fields[c],value:n[c]},void 0!==e.barHoverAble&&(m.hoverable=b.hoverable=g.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(m.clickable=b.clickable=g.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(b)),this.shapes.push(this.shapeFactory.createShape(m)),this.shapes.push(this.shapeFactory.createShape(g))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=0,a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=a-((e=r.xShapeBlank)[0]+e[2]+(n-1)*e[1]);if(s<=n)return null;i=s/n}else e=[i=a/(2*n+1),i,i];for(var l=0,u=0;u<n;u++)0==u?l=e[0]+i/2:l+=i+e[1],o.push(t[0]+l);return{xPositions:o,width:i}}}])&&TT(r.prototype,n),o&&TT(r,o),t}();function LT(e){return(LT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function NT(e,t){return!t||"object"!==LT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function IT(e,t,r){return(IT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=DT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function DT(e){return(DT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FT(e,t){return(FT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Feature.Theme.Bar3D=RT;var BT=function(e){function t(e,r,n,o,i,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=NT(this,DT(t).call(this,e,r,n,o,i,a))).setting=null,o&&o.codomain&&(s.setting=o,s.DVBCodomain=s.setting.codomain),s.CLASS_NAME="SuperMap.Feature.Theme.RankSymbol",s}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FT(e,t)}(t,bT),r=t,(n=[{key:"destroy",value:function(){this.setting=null,IT(DT(t.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var e=this.setting;e.XOffset&&(this.XOffset=e.XOffset),e.YOffset&&(this.YOffset=e.YOffset),this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var t=this.width,r=this.height,n=this.location;this.origonPoint=[n[0]-t/2,n[1]-r/2];var o=this.origonPoint;this.chartBox=[o[0],o[1]+r,o[0]+t,o[1]];var i=this.chartBox,a=this.DVBParameter;this.dataViewBox=[i[0]+a[0],i[1]-a[1],i[2]-a[2],i[3]+a[3]];var s=this.dataViewBox;return!(s[0]>=s[2]||s[1]<=s[3])&&(this.DVBOrigonPoint=[s[0],s[3]],this.DVBWidth=Math.abs(s[2]-s[0]),this.DVBHeight=Math.abs(s[1]-s[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-o[0],this.DVBOrigonPoint[1]-o[1]],!0)}}])&&MT(r.prototype,n),o&&MT(r,o),t}();function GT(e){return(GT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function HT(e,t){return!t||"object"!==GT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function JT(e,t,r){return(JT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=WT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function WT(e){return(WT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VT(e,t){return(VT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Feature.Theme.RankSymbol=BT;var zT=function(e){function t(e,r,n,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=HT(this,WT(t).call(this,e,r,n,o,i))).CLASS_NAME="SuperMap.Feature.Theme.Circle",a}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VT(e,t)}(t,BT),r=t,(n=[{key:"destroy",value:function(){JT(WT(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(!this.setting)return!1;var e=this.setting;if(!e.codomain)return!1;var t=void 0===e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,r=fT.getDataValues(this.data,this.fields,t);this.dataValues=r||[];var n=this.dataValues;e.maxR||(e.maxR=100),e.minR||(e.minR=0);var o=this.DVBCodomain;o&&o[1]-o[0]>0?this.DVBUnitValue=e.maxR/(o[1]-o[0]):this.DVBUnitValue=e.maxR;var i=this.DVBUnitValue,a=n[0]*i+e.minR;if(this.width=2*a,this.height=2*a,this.initBaseParameter()&&(!o||!(n[0]<o[0]||n[0]>o[1]))){var s=this.DVBCenterPoint,l=new PC(s[0],s[1],a);l.style=uT.ShapeStyleTool(null,e.circleStyle,null,null,0),void 0!==e.fillColor?l.style.fillColor=e.fillColor:l.style.fillColor="#ff9277",l.highlightStyle=uT.ShapeStyleTool(null,e.circleHoverStyle),void 0!==e.circleHoverAble&&(l.hoverable=e.circleHoverAble),void 0!==e.circleClickAble&&(l.clickable=e.circleClickAble),l.refDataID=this.data.id,l.dataInfo={field:this.fields[0],r:a,value:n[0]},this.shapes.push(this.shapeFactory.createShape(l)),this.shapesConvertToRelativeCoordinate()}}}])&&UT(r.prototype,n),o&&UT(r,o),t}();function qT(e){return(qT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function QT(e,t){return!t||"object"!==qT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function XT(e,t,r){return(XT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=KT(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function KT(e){return(KT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ZT(e,t){return(ZT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Feature.Theme.Circle=zT;var $T=function(e){function t(e,r,n,o,i,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=QT(this,KT(t).call(this,e,r,n,o,i,a))).CLASS_NAME="SuperMap.Feature.Theme.Line",s}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZT(e,t)}(t,bT),r=t,(n=[{key:"destroy",value:function(){XT(KT(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,o=this.dataValues;if(!(o.length<1)){var i=this.calculateXShapeInfo();if(i){var a,s,l=i.xPositions;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(uT.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(uT.GraphAxis(this.shapeFactory,t,e,i));for(var u=[],c=[],f=0,p=o.length;f<p;f++){if(o[f]<r[0]||o[f]>r[1])return null;a=l[f],s=t[1]-(o[f]-r[0])/n;var h=new xP(a,s);h.style=uT.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,f,o[f]),h.highlightStyle=uT.ShapeStyleTool(null,e.pointHoverStyle),void 0!==e.pointHoverAble&&(h.hoverable=e.pointHoverAble),void 0!==e.pointClickAble&&(h.clickable=e.pointClickAble),h.refDataID=this.data.id,h.dataInfo={field:this.fields[f],value:o[f]},c.push(this.shapeFactory.createShape(h));var y=[a,s];u.push(y)}var d=new IP(u);d.style=uT.ShapeStyleTool({strokeColor:"#ee9900"},e.lineStyle),d.clickable=!1,d.hoverable=!1;var v=this.shapeFactory.createShape(d);this.shapes.push(v),this.shapes=this.shapes.concat(c),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=this.DVBWidth,a=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=i-((e=r.xShapeBlank)[0]+e[1]);if(s<=n)return null;a=s/(n-1)}else e=[a=i/(n+1),a,a];for(var l=0,u=0;u<n;u++)0==u?l=e[0]:l+=a,o.push(t[0]+l);return{xPositions:o,width:0}}}])&&YT(r.prototype,n),o&&YT(r,o),t}();function ek(e){return(ek="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rk(e,t){return!t||"object"!==ek(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nk(e,t,r){return(nk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ok(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ok(e){return(ok=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ik(e,t){return(ik=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Feature.Theme.Line=$T;var ak=function(e){function t(e,r,n,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=rk(this,ok(t).call(this,e,r,n,o,i))).CLASS_NAME="SuperMap.Feature.Theme.Pie",a}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ik(e,t)}(t,bT),r=t,(n=[{key:"destroy",value:function(){nk(ok(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting,t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){e.useBackground&&this.shapes.push(uT.Background(this.shapeFactory,this.chartBox,e));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,o=0;o<r.length;o++)if(r[o]<n[0]||r[o]>n[1])return;for(var i=0,a=0;a<r.length;a++)i+=Math.abs(r[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,c=0,f=u,p=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,h=0;h<r.length;h++){var y=Math.abs(r[h]);(c=0===h?u+y*s:h===y.length-1?f:u+y*s)-u>=360&&(c=359.9999999);var d=new nC(l[0],l[1],p,u,c);if(void 0===e.sectorStyleByFields){var v=h%t.length;d.style=uT.ShapeStyleTool(null,e.sectorStyle,t,null,v)}else d.style=uT.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,h,r[h]);d.highlightStyle=uT.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(d.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(d.clickable=e.sectorClickAble),d.refDataID=this.data.id,d.dataInfo={field:this.fields[h],value:r[h]},this.shapes.push(this.shapeFactory.createShape(d)),u=c}this.shapesConvertToRelativeCoordinate()}}}}])&&tk(r.prototype,n),o&&tk(r,o),t}();function sk(e){return(sk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function uk(e,t){return!t||"object"!==sk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ck(e,t,r){return(ck="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fk(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function fk(e){return(fk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pk(e,t){return(pk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Feature.Theme.Pie=ak;var hk=function(e){function t(e,r,n,o,i,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=uk(this,fk(t).call(this,e,r,n,o,i,a))).CLASS_NAME="SuperMap.Feature.Theme.Point",s}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pk(e,t)}(t,bT),r=t,(n=[{key:"destroy",value:function(){ck(fk(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,o=this.dataValues,i=this.calculateXShapeInfo();if(i){var a,s,l=i.xPositions;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(uT.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(uT.GraphAxis(this.shapeFactory,t,e,i));for(var u=0,c=o.length;u<c;u++){if(o[u]<r[0]||o[u]>r[1])return null;a=l[u],s=t[1]-(o[u]-r[0])/n;var f=new xP(a,s);f.style=uT.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,u,o[u]),f.highlightStyle=uT.ShapeStyleTool(null,e.pointHoverStyle),void 0!==e.pointHoverAble&&(f.hoverable=e.pointHoverAble),void 0!==e.pointClickAble&&(f.clickable=e.pointClickAble),f.refDataID=this.data.id,f.dataInfo={field:this.fields[u],value:o[u]},this.shapes.push(this.shapeFactory.createShape(f))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=this.DVBWidth,a=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=i-((e=r.xShapeBlank)[0]+e[1]);if(s<=n)return null;a=s/(n-1)}else e=[a=i/(n+1),a,a];for(var l=0,u=0;u<n;u++)0==u?l=e[0]:l+=a,o.push(t[0]+l);return{xPositions:o,width:0}}}])&&lk(r.prototype,n),o&&lk(r,o),t}();function yk(e){return(yk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vk(e,t){return!t||"object"!==yk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mk(e,t,r){return(mk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bk(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function bk(e){return(bk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gk(e,t){return(gk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Feature.Theme.Point=hk;var Sk=function(e){function t(e,r,n,o,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=vk(this,bk(t).call(this,e,r,n,o,i))).CLASS_NAME="SuperMap.Feature.Theme.Ring",a}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gk(e,t)}(t,bT),r=t,(n=[{key:"destroy",value:function(){mk(bk(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],t=this.setting;t.useBackground&&this.shapes.push(uT.Background(this.shapeFactory,this.chartBox,t));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,o=0;o<r.length;o++)if(r[o]<n[0]||r[o]>n[1])return;for(var i=0,a=0;a<r.length;a++)i+=Math.abs(r[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,c=0,f=u,p=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,h=t.innerRingRadius>=0&&t.innerRingRadius<p,y=void 0!==t.innerRingRadius&&!isNaN(t.innerRingRadius)&&h?t.innerRingRadius:0,d=0;d<r.length;d++){var v=Math.abs(r[d]);c=0===d?u+v*s:d===v.length-1?f:u+v*s;var m=new nC(l[0],l[1],p,u,c,y);if(void 0===t.sectorStyleByFields){var b=d%e.length;m.style=uT.ShapeStyleTool(null,t.sectorStyle,e,null,b)}else m.style=uT.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,d,r[d]);m.highlightStyle=uT.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(m.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(m.clickable=t.sectorClickAble),m.refDataID=this.data.id,m.dataInfo={field:this.fields[d],value:r[d]},this.shapes.push(this.shapeFactory.createShape(m)),u=c}this.shapesConvertToRelativeCoordinate()}}}}])&&dk(r.prototype,n),o&&dk(r,o),t}();function wk(e){return(wk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ok(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _k(e,t){return!t||"object"!==wk(t)&&"function"!=typeof t?Pk(e):t}function Pk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ck(e,t,r){return(Ck="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ek(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Ek(e){return(Ek=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tk(e,t){return(Tk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Feature.Theme.Ring=Sk;var kk=function(e){function t(e,r,n,o,i){var a;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=_k(this,Ek(t).call(this,e,r)),!e.geometry)return _k(a);if(!(e.geometry instanceof Ce))return _k(a);a.dataBounds=e.geometry.getBounds(),a.nodesClipPixel=2,a.isHoverAble=!0,a.isMultiHover=!0,a.isClickAble=!0,a.highlightStyle=null,a.shapeOptions={},a.style=n||{},a.CLASS_NAME="SuperMap.Feature.Theme.Vector",a.style=n||{},o&&ge.copyAttributesWithClip(Pk(a),o,["shapeOptions","dataBounds"]),i&&ge.copyAttributesWithClip(a.shapeOptions,i);var s=e.geometry;return a.lonlat=a.dataBounds.getCenterLonLat(),a.location=a.getLocalXY(a.lonlat),s instanceof mt?a.lineToTF(s):s instanceof nt?a.lineToTF(s):s instanceof Je||(s instanceof Fe?a.multiPointToTF(s):s instanceof Ot?a.multiLineStringToTF(s):s instanceof Tt?a.multiPolygonToTF(s):s instanceof Lt?a.polygonToTF(s):s instanceof Re||(s instanceof Xe?a.pointToTF(s):s instanceof Bt?a.rectangleToTF(s):s instanceof ct&&a.geoTextToTF(s))),a}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tk(e,t)}(t,fT),r=t,(n=[{key:"destroy",value:function(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,Ck(Ek(t.prototype),"destroy",this).call(this)}},{key:"lineToTF",value:function(e){for(var t=e.components,r=[],n=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<t.length;s++){var l=t[s];if(n=[],r=this.getLocalXY(l),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var u=i[i.length-1];if(Math.abs(u[0]-n[0])<=a&&Math.abs(u[1]-n[1])<=a)continue}i.push(n)}if(i.length<2)return null;var c=new Object;(c=ge.copyAttributesWithClip(c,this.style,["pointList"])).pointList=i;var f=new GE({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=this.location,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&ge.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}},{key:"multiPointToTF",value:function(e){for(var t=e.components,r=[],n=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<t.length;s++){var l=t[s];if(n=[],r=this.getLocalXY(l),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var u=i[i.length-1];if(Math.abs(u[0]-n[0])<=a&&Math.abs(u[1]-n[1])<=a)continue}i.push(n);var c=new Object;c.r=6,(c=ge.copyAttributesWithClip(c,this.style)).x=n[0],c.y=n[1];var f=new pE({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=o,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&ge.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}}},{key:"multiLineStringToTF",value:function(e){for(var t=e.components,r=0;r<t.length;r++){var n=t[r];this.lineToTF(n)}}},{key:"multiPolygonToTF",value:function(e){for(var t=e.components,r=0;r<t.length;r++){var n=t[r];this.polygonToTF(n)}}},{key:"pointToTF",value:function(e){var t=this.location,r=this.getLocalXY(e),n=new Object;n.r=6,(n=ge.copyAttributesWithClip(n,this.style)).x=r[0]-t[0],n.y=r[1]-t[1];var o=new pE({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=t,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&ge.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"polygonToTF",value:function(e){for(var t=e.components,r=[],n=[],o=this.location,i=[],a=[],s=[],l=this.nodesClipPixel,u=0;u<t.length;u++){var c=t[u].components;if(0===u){i=[];for(var f=0;f<c.length;f++){if(n=[],r=this.getLocalXY(c[f]),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var p=i[i.length-1];if(Math.abs(p[0]-n[0])<=l&&Math.abs(p[1]-n[1])<=l)continue}i.push(n)}}else{a=[];for(var h=0;h<c.length;h++){if(n=[],r=this.getLocalXY(c[h]),n[0]=r[0]-o[0],n[1]=r[1]-o[1],a.length>0){var y=a[a.length-1];if(Math.abs(y[0]-n[0])<=l&&Math.abs(y[1]-n[1])<=l)continue}a.push(n)}}a.length<2||s.push(a)}if(!(i.length<2)){var d={};(d=ge.copyAttributesWithClip(d,this.style,["pointList"])).pointList=i;var v=new LE({style:d,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(v.highlightStyle=this.highlightStyle),v.refOriginalPosition=this.location,v.refDataID=this.data.id,v.isHoverByRefDataID=this.isMultiHover,s.length>0&&(v.holePolygonPointLists=s),this.shapeOptions&&ge.copyAttributesWithClip(v,this.shapeOptions),this.shapes.push(v)}}},{key:"rectangleToTF",value:function(e){var t=this.location,r=new we(e.x,e.y),n=this.layer.map.getResolution(),o=this.getLocalXY(r),i=new Object;i.r=6,(i=ge.copyAttributesWithClip(i,this.style)).x=o[0]-t[0],i.y=o[1]-t[1]-2*e.width/n,i.width=e.width/n,i.height=e.height/n;var a=new eT({style:i,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(a.highlightStyle=this.highlightStyle),a.refOriginalPosition=t,a.refDataID=this.data.id,a.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&ge.copyAttributesWithClip(a,this.shapeOptions),this.shapes.push(a)}},{key:"geoTextToTF",value:function(e){var t=this.location,r=this.getLocalXY(e),n=new Object;n.r=6,(n=ge.copyAttributesWithClip(n,this.style,["x","y","text"])).x=r[0]-t[0],n.y=r[1]-t[1],n.text=e.text;var o=new gE({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=t,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&ge.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"updateAndAddShapes",value:function(){var e=this.getLocalXY(this.lonlat);this.location=e;for(var t=this.layer.renderer,r=0,n=this.shapes.length;r<n;r++){var o=this.shapes[r];o.refOriginalPosition=e,t.addShape(o)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(e){return this.layer.getLocalXY(e)}}])&&Ok(r.prototype,n),o&&Ok(r,o),t}();
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function xk(e){return(xk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ak(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rk(e,t,r){return(Rk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lk(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Lk(e){return(Lk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mk(e,t){return(Mk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Feature.Theme.ThemeVector=kk;var Nk=function(e){function t(e){var r,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,r=!(o=Lk(t).call(this,e))||"object"!==xk(o)&&"function"!=typeof o?jk(n):o,e=e||{},r.id=null,r.type="group",r.clipShape=null,r._children=[],r._storage=null,r.__dirty=!0,r.ignore=!1,ge.extend(jk(r),e),r.id=r.id||ge.createUniqueID("smShapeGroup_"),r.CLASS_NAME="SuperMap.LevelRenderer.Group",r}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mk(e,t)}(t,n.mixin(EC,ZC)),r=t,(o=[{key:"destroy",value:function(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,Rk(Lk(t.prototype),"destroy",this).call(this)}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(e){return this._children[e]}},{key:"addChild",value:function(e){e!=this&&e.parent!=this&&(e.parent&&e.parent.removeChild(e),this._children.push(e),e.parent=this,this._storage&&this._storage!==e._storage&&(this._storage.addToMap(e),e instanceof t&&e.addChildrenToStorage(this._storage)))}},{key:"removeChild",value:function(e){var r=ge.indexOf(this._children,e);this._children.splice(r,1),e.parent=null,this._storage&&(this._storage.delFromMap(e.id),e instanceof t&&e.delChildrenFromStorage(this._storage))}},{key:"eachChild",value:function(e,t){for(var r=!!t,n=0;n<this._children.length;n++){var o=this._children[n];r?e.call(t,o):e(o)}}},{key:"traverse",value:function(e,t){for(var r=!!t,n=0;n<this._children.length;n++){var o=this._children[n];r?e.call(t,o):e(o),"group"===o.type&&o.traverse(e,t)}}},{key:"addChildrenToStorage",value:function(e){for(var t=0;t<this._children.length;t++){var r=this._children[t];e.addToMap(r),"group"===r.type&&r.addChildrenToStorage(e)}}},{key:"delChildrenFromStorage",value:function(e){for(var t=0;t<this._children.length;t++){var r=this._children[t];e.delFromMap(r.id),"group"===r.type&&r.delChildrenFromStorage(e)}}},{key:"modSelf",value:function(){this.__dirty=!0}}])&&Ak(r.prototype,o),i&&Ak(r,i),t}();function Ik(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Dk=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="SuperMap.LevelRenderer.Storage"}var t,r,n;return t=e,n=[{key:"shapeCompareFunc",value:function(e,t){return e.zlevel==t.zlevel?e.z==t.z?e.__renderidx-t.__renderidx:e.z-t.z:e.zlevel-t.zlevel}}],(r=[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(e,t){if(!t){t={hover:!1,normal:"down",update:!1}}if(t.hover)for(var r=0,n=this._hoverElements.length;r<n;r++){var o=this._hoverElements[r];if(o.updateTransform(),e(o))return this}switch(t.update&&this.updateShapeList(),t.normal){case"down":for(var i=this._shapeList.length;i--;)if(e(this._shapeList[i]))return this;break;default:for(var a=0,s=this._shapeList.length;a<s;a++)if(e(this._shapeList[a]))return this}return this}},{key:"getHoverShapes",value:function(t){for(var r=[],n=this._hoverElements.length,o=0;o<n;o++){r.push(this._hoverElements[o]);var i=this._hoverElements[o].hoverConnect;if(i)for(var a,s=0,l=(i=i instanceof Array?i:[i]).length;s<l;s++)(a=i[s].id?i[s]:this.get(i[s]))&&r.push(a)}if(r.sort(e.shapeCompareFunc),t)for(var u=0,c=r.length;u<c;u++)r[u].updateTransform();return r}},{key:"getShapeList",value:function(e){return e&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var t=this._roots.length,r=0;r<t;r++){var n=this._roots[r];this._updateAndAddShape(n)}this._shapeList.length=this._shapeListOffset;for(var o=this._shapeList.length,i=0;i<o;i++)this._shapeList[i].__renderidx=i;this._shapeList.sort(e.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(e,t){if(!e.ignore)if(e.updateTransform(),"group"==e.type){e.clipShape&&(e.clipShape.parent=e,e.clipShape.updateTransform(),t?(t=t.slice()).push(e.clipShape):t=[e.clipShape]);for(var r=0;r<e._children.length;r++){var n=e._children[r];n.__dirty=e.__dirty||n.__dirty,this._updateAndAddShape(n,t)}e.__dirty=!1}else e.__clipShapes=t,this._shapeList[this._shapeListOffset++]=e}},{key:"mod",value:function(e,t){var r=this._elements[e];if(r&&(r.modSelf(),t))if(t.parent||t._storage||t.__startClip){var n={};for(var o in t)"parent"!=o&&"_storage"!=o&&"__startClip"!=o&&t.hasOwnProperty(o)&&(n[o]=t[o]);(new aP).merge(r,n,!0)}else(new aP).merge(r,t,!0);return this}},{key:"drift",value:function(e,t,r){var n=this._elements[e];return n&&(n.needTransform=!0,"horizontal"===n.draggable?r=0:"vertical"===n.draggable&&(t=0),(!n.ondrift||n.ondrift&&!n.ondrift(t,r))&&n.drift(t,r)),this}},{key:"addHover",value:function(e){return e.updateNeedTransform(),this._hoverElements.push(e),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return this._hoverElements.length>0}},{key:"addRoot",value:function(e){e instanceof Nk&&e.addChildrenToStorage(this),this.addToMap(e),this._roots.push(e)}},{key:"delRoot",value:function(e){if(void 0===e){for(var t=0;t<this._roots.length;t++){var r=this._roots[t];r instanceof Nk&&r.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(e instanceof Array)for(var n=e.length,o=0;o<n;o++)this.delRoot(e[o]);else{var i;i="string"==typeof e?this._elements[e]:e;var a=(new aP).indexOf(this._roots,i);a>=0&&(this.delFromMap(i.id),this._roots.splice(a,1),i instanceof Nk&&i.delChildrenFromStorage(this))}}},{key:"addToMap",value:function(e){return e instanceof Nk&&(e._storage=this),e.modSelf(),this._elements[e.id]=e,this}},{key:"get",value:function(e){return this._elements[e]}},{key:"delFromMap",value:function(e){var t=this._elements[e];return t&&(delete this._elements[e],t instanceof Nk&&(t._storage=null)),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}])&&Ik(t.prototype,r),n&&Ik(t,n),e}();function Fk(e){return(Fk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bk(e,t){return!t||"object"!==Fk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gk(e){return(Gk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uk(e,t){return(Uk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wk(e,t,r){return t&&Jk(e.prototype,t),r&&Jk(e,r),e}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Vk=function(){function e(t,r){Hk(this,e),this.root=t,this.storage=r,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,e.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="SuperMap.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var n=document.createElement("div");this._domRoot=n,n.style.position="relative",n.style.overflow="hidden",n.style.width=this._width+"px",n.style.height=this._height+"px",this.root.appendChild(n),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=e.createDom(ge.createUniqueID("SuperMap.Theme_background_"),"div",this),n.appendChild(this._bgDom),this._bgDom.onselectstart=a,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var o=new zk(ge.createUniqueID("_highLightLayer_"),this);this._layers.hover=o,n.appendChild(o.dom),o.initContext(),o.dom.onselectstart=a,o.dom.style["-webkit-user-select"]="none",o.dom.style["user-select"]="none",o.dom.style["-webkit-touch-callout"]="none";var i=this;function a(){return!1}this.updatePainter=function(e,t){i.refreshShapes(e,t)}}return Wk(e,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(e){return this.refresh(e,!0),this}},{key:"refresh",value:function(e,t){var r=this.storage.getShapeList(!0);return this._paintList(r,t),"function"==typeof e&&e(),this}},{key:"_paintList",value:function(e,t){var r,n,o;for(var i in void 0===t&&(t=!1),this._updateLayerStatus(e),this._layers)"hover"!==i&&(this._layers[i].unusedCount++,this._layers[i].updateTransform());for(var a=[],s=0,l=e.length;s<l;s++){var u=e[s];if(n!==u.zlevel&&(r&&r.needTransform&&o.restore(),o=(r=this.getLayer(u.zlevel)).ctx,n=u.zlevel,r.unusedCount=0,(r.dirty||t)&&r.clear(),r.needTransform&&(o.save(),r.setTransform(o))),o&&u.__startClip){var c=u.__startClip;if(o.save(),c.needTransform){var f=c.transform;XC.Util_matrix.invert(a,f),o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}if(o.beginPath(),c.buildPath(o,c.style),o.clip(),c.needTransform){var p=a;o.transform(p[0],p[1],p[2],p[3],p[4],p[5])}}if((r&&r.dirty||t)&&!u.invisible&&(!u.onbrush||u.onbrush&&!u.onbrush(o,!1)))if(HC.catchBrushException)try{u.brush(o,!1,this.updatePainter)}catch(e){XC.Util_log(e,"brush error of "+u.type,u)}else u.brush(o,!1,this.updatePainter);o&&u.__stopClip&&o.restore(),u.__dirty=!1}for(var h in o&&r&&r.needTransform&&o.restore(),this._layers)if("hover"!==h){var y=this._layers[h];y.dirty=!1,1==y.unusedCount&&y.clear()}}},{key:"getLayer",value:function(e){var t=this._layers[e];if(!t){var r=this._zlevelList.length,n=null,o=-1;if(r>0&&e>this._zlevelList[0]){for(o=0;o<r-1&&!(this._zlevelList[o]<e&&this._zlevelList[o+1]>e);o++);n=this._layers[this._zlevelList[o]]}this._zlevelList.splice(o+1,0,e),t=new zk(ge.createUniqueID("_levelLayer_"+e),this);var i=n?n.dom:this._bgDom;i.nextSibling?i.parentNode.insertBefore(t.dom,i.nextSibling):i.parentNode.appendChild(t.dom),t.initContext(),this._layers[e]=t,this._layerConfig[e]&&(new aP).merge(t,this._layerConfig[e],!0),t.updateTransform()}return t}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(e){var t=this._layers,r={};for(var n in t)"hover"!==n&&(r[n]=t[n].elCount,t[n].elCount=0);for(var o=0;o<e.length;o++){var i=e[o],a=t[i.zlevel];if(a){if(a.elCount++,a.dirty)continue;a.dirty=i.__dirty}}for(var s in t)"hover"!==s&&r[s]!==t[s].elCount&&(t[s].dirty=!0)}},{key:"refreshShapes",value:function(e,t){for(var r=0,n=e.length;r<n;r++){var o=e[r];this.storage.mod(o.id)}return this.refresh(t),this}},{key:"clear",value:function(){for(var e in this._layers)"hover"!=e&&this._layers[e].clear();return this}},{key:"modLayer",value:function(e,t){if(t){this._layerConfig[e]?(new aP).merge(this._layerConfig[e],t,!0):this._layerConfig[e]=t;var r=this._layers[e];r&&(new aP).merge(r,this._layerConfig[e],!0)}}},{key:"delLayer",value:function(e){var t=this._layers[e];t&&(this.modLayer(e,{position:t.position,rotation:t.rotation,scale:t.scale}),t.dom.parentNode.removeChild(t.dom),delete this._layers[e],this._zlevelList.splice((new aP).indexOf(this._zlevelList,e),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var e=this.storage.getHoverShapes(!0),t=0,r=e.length;t<r;t++)this._brushHover(e[t]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var e=this._layers.hover;return e&&e.clear(),this}},{key:"resize",value:function(){var e=this._domRoot;e.style.display="none";var t=this._getWidth(),r=this._getHeight();if(e.style.display="",this._width!=t||r!=this._height){for(var n in this._width=t,this._height=r,e.style.width=t+"px",e.style.height=r+"px",this._layers)this._layers[n].resize(t,r);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(e){var t=this._layers[e];t&&t.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(t,r,n){var o=e.createDom(ge.createUniqueID("SuperMap.Theme.image_"),"canvas",this);this._bgDom.appendChild(o);var i=o.getContext("2d");1!=e.devicePixelRatio&&i.scale(e.devicePixelRatio,e.devicePixelRatio),i.fillStyle=r||"#fff",i.rect(0,0,this._width*e.devicePixelRatio,this._height*e.devicePixelRatio),i.fill();var a=this;this.storage.iterShape(function(e){if(!e.invisible&&(!e.onbrush||e.onbrush&&!e.onbrush(i,!1)))if(HC.catchBrushException)try{e.brush(i,!1,a.updatePainter)}catch(t){XC.Util_log(t,"brush error of "+e.type,e)}else e.brush(i,!1,a.updatePainter)},{normal:"up",update:!0});var s=o.toDataURL(t,n);return i=null,this._bgDom.removeChild(o),s}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function(e){var t=this._layers.hover.ctx;if(!e.onbrush||e.onbrush&&!e.onbrush(t,!0)){var r=this.getLayer(e.zlevel);if(r.needTransform&&(t.save(),r.setTransform(t)),HC.catchBrushException)try{e.brush(t,!0,this.updatePainter)}catch(t){XC.Util_log(t,"hoverBrush error of "+e.type,e)}else e.brush(t,!0,this.updatePainter);r.needTransform&&t.restore()}}},{key:"_shapeToImage",value:function(e,t,r,n,o){var i=document.createElement("canvas"),a=i.getContext("2d"),s=o||window.devicePixelRatio||1;i.style.width=r+"px",i.style.height=n+"px",i.setAttribute("width",r*s),i.setAttribute("height",n*s),a.clearRect(0,0,r*s,n*s);var l={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[0,0,0],t.rotation=0,t.scale=[1,1],t&&t.brush(a,!1);var u=new qE({id:e,style:{x:0,y:0,image:i}});return null!=l.position&&(u.position=t.position=l.position),null!=l.rotation&&(u.rotation=t.rotation=l.rotation),null!=l.scale&&(u.scale=t.scale=l.scale),u}},{key:"_createShapeToImageProcessor",value:function(){var t=this;return function(r,n,o,i){return t._shapeToImage(r,n,o,i,e.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(e){if(!(e instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var t=0;t<e.length;t++)this.storage.addHover(e[t]),this._brushHover(e[t])}}],[{key:"createDom",value:function(t,r,n){var o=document.createElement(r),i=n._width,a=n._height;return o.style.position="absolute",o.style.left=0,o.style.top=0,o.style.width=i+"px",o.style.height=a+"px",o.setAttribute("width",i*e.devicePixelRatio),o.setAttribute("height",a*e.devicePixelRatio),o.setAttribute("id",t),o}}]),e}(),zk=function(e){function t(e,r){var n;return Hk(this,t),(n=Bk(this,Gk(t).call(this,e,r))).dom=null,n.domBack=null,n.ctxBack=null,n.painter=r,n.unusedCount=0,n.config=null,n.dirty=!0,n.elCount=0,n.clearColor=0,n.motionBlur=!1,n.lastFrameAlpha=.7,n.zoomable=!1,n.panable=!1,n.maxZoom=1/0,n.minZoom=0,n.ctx=null,n.dom=Vk.createDom(ge.createUniqueID("SuperMap.Theme"+e),"canvas",r),n.dom.onselectstart=function(){return!1},n.dom.style["-webkit-user-select"]="none",n.dom.style["user-select"]="none",n.dom.style["-webkit-touch-callout"]="none",n.CLASS_NAME="SuperMap.LevelRenderer.Painter.Layer",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uk(e,t)}(t,ZC),Wk(t,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,ZC.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!=Vk.devicePixelRatio&&this.ctx.scale(Vk.devicePixelRatio,Vk.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=Vk.createDom(ge.createUniqueID("SuperMap.Theme.back-"+this.id),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!=Vk.devicePixelRatio&&this.ctxBack.scale(Vk.devicePixelRatio,Vk.devicePixelRatio)}},{key:"resize",value:function(e,t){this.dom.style.width=e+"px",this.dom.style.height=t+"px",this.dom.setAttribute("width",e*Vk.devicePixelRatio),this.dom.setAttribute("height",t*Vk.devicePixelRatio),1!=Vk.devicePixelRatio&&this.ctx.scale(Vk.devicePixelRatio,Vk.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",e*Vk.devicePixelRatio),this.domBack.setAttribute("height",t*Vk.devicePixelRatio),1!=Vk.devicePixelRatio&&this.ctxBack.scale(Vk.devicePixelRatio,Vk.devicePixelRatio))}},{key:"clear",value:function(){var e=this.dom,t=this.ctx,r=e.width,n=e.height,o=this.clearColor,i=this.motionBlur,a=this.lastFrameAlpha;if(i&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(e,0,0,r/Vk.devicePixelRatio,n/Vk.devicePixelRatio)),o?(t.save(),t.fillStyle=this.config.clearColor,t.fillRect(0,0,r/Vk.devicePixelRatio,n/Vk.devicePixelRatio),t.restore()):t.clearRect(0,0,r/Vk.devicePixelRatio,n/Vk.devicePixelRatio),i){var s=this.domBack;t.save(),t.globalAlpha=a,t.drawImage(s,0,0,r/Vk.devicePixelRatio,n/Vk.devicePixelRatio),t.restore()}}}]),t}();function qk(e){return(qk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qk(e){return(Qk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kk(e,t){return(Kk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Zk=function(e){function t(e,r,n){var o,i,a,s,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(o=!(a=Qk(t).call(this,e,r,n))||"object"!==qk(a)&&"function"!=typeof a?Xk(i):a).root=e,o.storage=r,o.painter=n,o._lastX=0,o._lastY=0,o._mouseX=0,o._mouseY=0,o._findHover=null,o._domHover=null,o._findHover=(s=function(e,t,r){var n=this;if(n._draggingTarget&&n._draggingTarget.id==e.id||e.isSilent())return!1;var o=n._event;if(e.isCover(t,r)){if(e.hoverable)if(e.isHoverByRefDataID&&!0===e.isHoverByRefDataID){if(e.refDataID){var i=e.refDataID,a=null;e.refDataHoverGroup&&(a=e.refDataHoverGroup);for(var s=n.storage._shapeList,l=0,u=s.length;l<u;l++){var c=s[l];c.refDataID&&i===c.refDataID&&(a?c.refDataHoverGroup&&a===c.refDataHoverGroup&&n.storage.addHover(c):n.storage.addHover(c))}}}else n.storage.addHover(e);for(var f=e.parent;f;){if(f.clipShape&&!f.clipShape.isCover(n._mouseX,n._mouseY))return!1;f=f.parent}return n._lastHover!=e&&(n._processOutShape(o),n._processDragLeave(o),n._lastHover=e,n._processDragEnter(o)),n._processOverShape(o),n._processDragOver(o),n._hasfound=1,!0}return!1},l=Xk(o),function(e,t,r){return s.call(l,e,t,r)}),o._domHover=n.getDomHover(),o.CLASS_NAME="SuperMap.LevelRenderer.Handler";var u={resize:function(e){e=e||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(HC.EVENT.RESIZE,e)},click:function(e){e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<10&&this._dispatchAgency(t,HC.EVENT.CLICK,e),this._mousemoveHandler(e)},dblclick:function(e){e=e||window.event,e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<5&&this._dispatchAgency(t,HC.EVENT.DBLCLICK,e),this._mousemoveHandler(e)},mousewheel:function(e){var t=((e=this._zrenderEventFixed(e)).wheelDelta||-e.detail)>0?1.1:1/1.1,r=this.painter.getLayers(),n=!1;for(var o in r)if("hover"!==o){var i=r[o],a=i.position;if(i.zoomable){i.__zoom=i.__zoom||1;var s=i.__zoom;s*=t,t=(s=Math.max(Math.min(i.maxZoom,s),i.minZoom))/i.__zoom,i.__zoom=s,a[0]-=(this._mouseX-a[0])*(t-1),a[1]-=(this._mouseY-a[1])*(t-1),i.scale[0]*=t,i.scale[1]*=t,i.dirty=!0,n=!0}}n&&this.painter.refresh(),this._dispatchAgency(this._lastHover,HC.EVENT.MOUSEWHEEL,e),this._mousemoveHandler(e)},mousemove:function(e){this._clickThreshold++,e=this._zrenderEventFixed(e),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=XC.Util_event.getX(e),this._mouseY=XC.Util_event.getY(e);var t=this._mouseX-this._lastX,r=this._mouseY-this._lastY;this._processDragStart(e),this._hasfound=0,this._event=e,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(e),this._processDragLeave(e)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var n="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,t,r),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var o=this.painter.getLayers(),i=!1;for(var a in o)if("hover"!==a){var s=o[a];s.panable&&(n="move",s.position[0]+=t,s.position[1]+=r,i=!0,s.dirty=!0)}i&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?n="move":this._hasfound&&this._lastHover.clickable&&(n="pointer"),this.root.style.cursor=n,this._dispatchAgency(this._lastHover,HC.EVENT.MOUSEMOVE,e),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(e){var t=(e=this._zrenderEventFixed(e)).toElement||e.relatedTarget;if(t!=this.root)for(;t&&9!=t.nodeType;){if(t==this.root)return void this._mousemoveHandler(e);t=t.parentNode}e.zrenderX=this._lastX,e.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(e),this._processDrop(e),this._processDragEnd(e),this.painter.refreshHover(),this.dispatch(HC.EVENT.GLOBALOUT,e)},mousedown:function(e){if(this._clickThreshold=0,2==this._lastDownButton)return this._lastDownButton=e.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,e=this._zrenderEventFixed(e),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,HC.EVENT.MOUSEDOWN,e),this._lastDownButton=e.button},mouseup:function(e){e=this._zrenderEventFixed(e),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,HC.EVENT.MOUSEUP,e),this._processDrop(e),this._processDragEnd(e)},touchstart:function(e){e=this._zrenderEventFixed(e,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(e),this._mousedownHandler(e)},touchmove:function(e){e=this._zrenderEventFixed(e,!0),this._mousemoveHandler(e),this._isDragging&&XC.Util_event.stop(e)},touchend:function(e){e=this._zrenderEventFixed(e,!0),this._mouseupHandler(e);var t=new Date;t-this._lastTouchMoment<HC.EVENT.touchClickDelay&&(this._mobildFindFixed(e),this._clickHandler(e),t-this._lastClickMoment<HC.EVENT.touchClickDelay/2&&(this._dblclickHandler(e),this._lastHover&&this._lastHover.clickable&&XC.Util_event.stop(e)),this._lastClickMoment=t),this.painter.clearHover()}};function c(e,t){return function(r){return e.call(t,r)}}return function(e){var t=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],r=t.length;for(;r--;){var n=t[r];e["_"+n+"Handler"]=c(u[n],e)}}(Xk(o)),window.addEventListener?(window.addEventListener("resize",o._resizeHandler),XC.Util_env.os.tablet||XC.Util_env.os.phone?(e.addEventListener("touchstart",o._touchstartHandler),e.addEventListener("touchmove",o._touchmoveHandler),e.addEventListener("touchend",o._touchendHandler)):(e.addEventListener("click",o._clickHandler),e.addEventListener("dblclick",o._dblclickHandler),e.addEventListener("mousewheel",o._mousewheelHandler),e.addEventListener("mousemove",o._mousemoveHandler),e.addEventListener("mousedown",o._mousedownHandler),e.addEventListener("mouseup",o._mouseupHandler)),e.addEventListener("DOMMouseScroll",o._mousewheelHandler),e.addEventListener("mouseout",o._mouseoutHandler)):(window.attachEvent("onresize",o._resizeHandler),e.attachEvent("onclick",o._clickHandler),e.ondblclick=o._dblclickHandler,e.attachEvent("onmousewheel",o._mousewheelHandler),e.attachEvent("onmousemove",o._mousemoveHandler),e.attachEvent("onmouseout",o._mouseoutHandler),e.attachEvent("onmousedown",o._mousedownHandler),e.attachEvent("onmouseup",o._mouseupHandler)),o}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kk(e,t)}(t,EC),r=t,(n=[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,EC.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(e,t){return this.bind(e,t),this}},{key:"un",value:function(e,t){return this.unbind(e,t),this}},{key:"trigger",value:function(e,t){var r=HC.EVENT;switch(e){case r.RESIZE:case r.CLICK:case r.DBLCLICK:case r.MOUSEWHEEL:case r.MOUSEMOVE:case r.MOUSEDOWN:case r.MOUSEUP:case r.MOUSEOUT:this["_"+e+"Handler"](t)}}},{key:"dispose",value:function(){var e=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),XC.Util_env.os.tablet||XC.Util_env.os.phone?(e.removeEventListener("touchstart",this._touchstartHandler),e.removeEventListener("touchmove",this._touchmoveHandler),e.removeEventListener("touchend",this._touchendHandler)):(e.removeEventListener("click",this._clickHandler),e.removeEventListener("dblclick",this._dblclickHandler),e.removeEventListener("mousewheel",this._mousewheelHandler),e.removeEventListener("mousemove",this._mousemoveHandler),e.removeEventListener("mousedown",this._mousedownHandler),e.removeEventListener("mouseup",this._mouseupHandler)),e.removeEventListener("DOMMouseScroll",this._mousewheelHandler),e.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),e.detachEvent("onclick",this._clickHandler),e.detachEvent("dblclick",this._dblclickHandler),e.detachEvent("onmousewheel",this._mousewheelHandler),e.detachEvent("onmousemove",this._mousemoveHandler),e.detachEvent("onmouseout",this._mouseoutHandler),e.detachEvent("onmousedown",this._mousedownHandler),e.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(e){var t=this._lastHover;if(this._isMouseDown&&t&&t.draggable&&!this._draggingTarget&&this._mouseDownTarget==t){if(t.dragEnableTime&&new Date-this._lastMouseDownMoment<t.dragEnableTime)return;var r=t;this._draggingTarget=r,this._isDragging=1,r.invisible=!0,this.storage.mod(r.id),this._dispatchAgency(r,HC.EVENT.DRAGSTART,e),this.painter.refresh()}}},{key:"_processDragEnter",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,HC.EVENT.DRAGENTER,e,this._draggingTarget)}},{key:"_processDragOver",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,HC.EVENT.DRAGOVER,e,this._draggingTarget)}},{key:"_processDragLeave",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,HC.EVENT.DRAGLEAVE,e,this._draggingTarget)}},{key:"_processDrop",value:function(e){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,HC.EVENT.DROP,e,this._draggingTarget))}},{key:"_processDragEnd",value:function(e){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,HC.EVENT.DRAGEND,e),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(e){this._dispatchAgency(this._lastHover,HC.EVENT.MOUSEOVER,e)}},{key:"_processOutShape",value:function(e){this._dispatchAgency(this._lastHover,HC.EVENT.MOUSEOUT,e)}},{key:"_dispatchAgency",value:function(e,t,r,n){var o="on"+t,i={type:t,event:r,target:e,cancelBubble:!1},a=e;for(n&&(i.dragged=n);a&&(a[o]&&(i.cancelBubble=a[o](i)),a.dispatch(t,i),a=a.parent,!i.cancelBubble););e?i.cancelBubble||this.dispatch(t,i):n||this.dispatch(t,{type:t,event:r})}},{key:"_iterateAndFindHover",value:function(){for(var e,t=XC.Util_matrix.create(),r=this.storage.getShapeList(),n=[0,0],o=r.length-1;o>=0;o--){var i=r[o];if(void 0!==i.zlevel&&(e=this.painter.getLayer(i.zlevel,e),n[0]=this._mouseX,n[1]=this._mouseY,e.needTransform&&(XC.Util_matrix.invert(t,e.transform),XC.Util_vector.applyTransform(n,n,t))),this._findHover(i,n[0],n[1]))break}}},{key:"_mobildFindFixed",value:function(e){var t=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=e.zrenderX,this._mouseY=e.zrenderY,this._event=e,this._iterateAndFindHover();for(var r=0;!this._lastHover&&r<t.length;r++){var n=t[r];n.x&&(this._mouseX+=n.x),n.y&&(this._mouseX+=n.y),this._iterateAndFindHover()}this._lastHover&&(e.zrenderX=this._mouseX,e.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(e,t){if(e.zrenderFixed)return e;if(t){var r="touchend"!=e.type?e.targetTouches[0]:e.changedTouches[0];if(r){var n=this.root.getBoundingClientRect();e.zrenderX=r.clientX-n.left,e.zrenderY=r.clientY-n.top}}else{var o=(e=e||window.event).toElement||e.relatedTarget||e.srcElement||e.target;o&&o!=this._domHover&&(e.zrenderX=(void 0!==e.offsetX?e.offsetX:e.layerX)+o.offsetLeft,e.zrenderY=(void 0!==e.offsetY?e.offsetY:e.layerY)+o.offsetTop)}return e.zrenderFixed=1,e}},{key:"getLastHoverOne",value:function(){return this._lastHover?this._lastHover:null}}])&&Yk(r.prototype,n),o&&Yk(r,o),t}();function $k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ex=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Animation.easing"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){}},{key:"Linear",value:function(e){return e}},{key:"QuadraticIn",value:function(e){return e*e}},{key:"QuadraticOut",value:function(e){return e*(2-e)}},{key:"QuadraticInOut",value:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},{key:"CubicIn",value:function(e){return e*e*e}},{key:"CubicOut",value:function(e){return--e*e*e+1}},{key:"CubicInOut",value:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},{key:"QuarticIn",value:function(e){return e*e*e*e}},{key:"QuarticOut",value:function(e){return 1- --e*e*e*e}},{key:"QuarticInOut",value:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},{key:"QuinticIn",value:function(e){return e*e*e*e*e}},{key:"QuinticOut",value:function(e){return--e*e*e*e*e+1}},{key:"QuinticInOut",value:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},{key:"SinusoidalIn",value:function(e){return 1-Math.cos(e*Math.PI/2)}},{key:"SinusoidalOut",value:function(e){return Math.sin(e*Math.PI/2)}},{key:"SinusoidalInOut",value:function(e){return.5*(1-Math.cos(Math.PI*e))}},{key:"ExponentialIn",value:function(e){return 0===e?0:Math.pow(1024,e-1)}},{key:"ExponentialOut",value:function(e){return 1===e?1:1-Math.pow(2,-10*e)}},{key:"ExponentialInOut",value:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},{key:"CircularIn",value:function(e){return 1-Math.sqrt(1-e*e)}},{key:"CircularOut",value:function(e){return Math.sqrt(1- --e*e)}},{key:"CircularInOut",value:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},{key:"ElasticIn",value:function(e){var t,r=.1;return 0===e?0:1===e?1:(r<1?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))}},{key:"ElasticOut",value:function(e){var t,r=.1;return 0===e?0:1===e?1:(r<1?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(e){var t,r=.1;return 0===e?0:1===e?1:(r<1?(r=1,t=.1):t=.4*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(e){var t=1.70158;return e*e*((t+1)*e-t)}},{key:"BackOut",value:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1}},{key:"BackInOut",value:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},{key:"BounceIn",value:function(e){return 1-this.BounceOut(1-e)}},{key:"BounceOut",value:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},{key:"BounceInOut",value:function(e){return e<.5?.5*this.BounceIn(2*e):.5*this.BounceOut(2*e-1)+.5}}])&&$k(t.prototype,r),n&&$k(t,n),e}();function tx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var rx=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._targetPool=t.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=t.life||1e3,this._delay=t.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Clip"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){}},{key:"step",value:function(e){var t=new ex,r=(e-this._startTime)/this._life;if(!(r<0)){r=Math.min(r,1);var n="string"==typeof this.easing?t[this.easing]:this.easing,o="function"==typeof n?n(r):r;return this.fire("frame",o),1==r?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}},{key:"restart",value:function(){var e=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-e+this.gap}},{key:"fire",value:function(e,t){for(var r=0,n=this._targetPool.length;r<n;r++)this["on"+e]&&this["on"+e](this._targetPool[r],t)}}])&&tx(t.prototype,r),n&&tx(t,n),e}();function nx(e){return(nx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ox(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ix(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ax(e,t,r){return t&&ix(e.prototype,t),r&&ix(e,r),e}function sx(e){return(sx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ux(e,t){return(ux=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var cx=function(e){function t(e){var r,n,o;return ox(this,t),n=this,r=!(o=sx(t).call(this,e))||"object"!==nx(o)&&"function"!=typeof o?lx(n):o,e=e||{},r.stage={},r.onframe=function(){},r._clips=[],r._running=!1,r._time=0,ge.extend(lx(r),e),r.CLASS_NAME="SuperMap.LevelRenderer.Animation",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ux(e,t)}(t,EC),ax(t,[{key:"add",value:function(e){this._clips.push(e)}},{key:"remove",value:function(e){var t=(new aP).indexOf(this._clips,e);t>=0&&this._clips.splice(t,1)}},{key:"_update",value:function(){for(var e=(new Date).getTime(),t=e-this._time,r=this._clips,n=r.length,o=[],i=[],a=0;a<n;a++){var s=r[a],l=s.step(e);l&&(o.push(l),i.push(s))}this.stage.update&&this.stage.update();for(var u=0;u<n;)r[u]._needsRemove?(r[u]=r[n-1],r.pop(),n--):u++;n=o.length;for(var c=0;c<n;c++)i[c].fire(o[c]);this._time=e,this.onframe(t),this.dispatch("frame",t)}},{key:"start",value:function(){var e=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,16)},t=this;this._running=!0,this._time=(new Date).getTime(),e(function r(){t._running&&(t._update(),e(r))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(e,t){var r=new fx(e,(t=t||{}).loop,t.getter,t.setter);return r.animation=this,r}}],[{key:"_interpolateNumber",value:function(e,t,r){return(t-e)*r+e}},{key:"_interpolateArray",value:function(e,r,n,o,i){var a=e.length;if(1==i)for(var s=0;s<a;s++)o[s]=t._interpolateNumber(e[s],r[s],n);else for(var l=e[0].length,u=0;u<a;u++)for(var c=0;c<l;c++)o[u][c]=t._interpolateNumber(e[u][c],r[u][c],n)}},{key:"_isArrayLike",value:function(e){switch(nx(e)){case"undefined":case"string":return!1}return void 0!==e.length}},{key:"_catmullRomInterpolateArray",value:function(e,r,n,o,i,a,s,l,u){var c=e.length;if(1==u)for(var f=0;f<c;f++)l[f]=t._catmullRomInterpolate(e[f],r[f],n[f],o[f],i,a,s);else for(var p=e[0].length,h=0;h<c;h++)for(var y=0;y<p;y++)l[h][y]=t._catmullRomInterpolate(e[h][y],r[h][y],n[h][y],o[h][y],i,a,s)}},{key:"_catmullRomInterpolate",value:function(e,t,r,n,o,i,a){var s=.5*(r-e),l=.5*(n-t);return(2*(t-r)+s+l)*a+(-3*(t-r)-2*s-l)*i+s*o+t}},{key:"_cloneValue",value:function(e){var r=Array.prototype.slice;if(t._isArrayLike(e)){var n=e.length;if(t._isArrayLike(e[0])){for(var o=[],i=0;i<n;i++)o.push(r.call(e[i]));return o}return r.call(e)}return e}},{key:"rgba2String",value:function(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}}]),t}(),fx=function(){function e(t,r,n,o){ox(this,e),this._tracks={},this._target=t,this._loop=r||!1,this._getter=n||function(e,t){return e[t]},this._setter=o||function(e,t,r){e[t]=r},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Animator"}return ax(e,[{key:"when",value:function(e,t){for(var r in t)this._tracks[r]||(this._tracks[r]=[],0!==e&&this._tracks[r].push({time:0,value:cx._cloneValue(this._getter(this._target,r))})),this._tracks[r].push({time:parseInt(e,10),value:t[r]});return this}},{key:"during",value:function(e){return this._onframeList.push(e),this}},{key:"start",value:function(e){var t=this,r=this._setter,n=this._getter,o=t._onframeList.length,i="spline"===e,a=function(){if(t._clipCount--,0===t._clipCount){t._tracks={};for(var e=t._doneList.length,r=0;r<e;r++)t._doneList[r].call(t)}},s=function(s,l){var u=s.length;if(u){var c=s[0].value,f=cx._isArrayLike(c),p=!1,h=f&&cx._isArrayLike(c[0])?2:1;s.sort(function(e,t){return e.time-t.time});for(var y=s[u-1].time,d=[],v=[],m=0;m<u;m++){d.push(s[m].time/y);var b=s[m].value;"string"==typeof b&&(0===(b=XC.Util_color.toArray(b)).length&&(b[0]=b[1]=b[2]=0,b[3]=1),p=!0),v.push(b)}var g,S,w,O,_,P,C,E=0,T=0;if(p)var k=[0,0,0,0];var x=new rx({target:t._target,life:y,loop:t._loop,delay:t._delay,onframe:function(e,a){if(a<T){for(g=Math.min(E+1,u-1),S=g;S>=0&&!(d[S]<=a);S--);S=Math.min(S,u-2)}else{for(S=E;S<u&&!(d[S]>a);S++);S=Math.min(S-1,u-2)}E=S,T=a;var s=d[S+1]-d[S];if(0!==s){var c,y;for(w=(a-d[S])/s,i?(_=v[S],O=v[0===S?S:S-1],P=v[S>u-2?u-1:S+1],C=v[S>u-3?u-1:S+2],f?cx._catmullRomInterpolateArray(O,_,P,C,w,w*w,w*w*w,n(e,l),h):(c=p?cx.rgba2String(k):cx._catmullRomInterpolate(O,_,P,C,w,w*w,w*w*w),r(e,l,c))):f?cx._interpolateArray(v[S],v[S+1],w,n(e,l),h):(p?(cx._interpolateArray(v[S],v[S+1],w,k,1),y=cx.rgba2String(k)):y=cx._interpolateNumber(v[S],v[S+1],w),r(e,l,y)),S=0;S<o;S++)t._onframeList[S](e,a)}},ondestroy:a});e&&"spline"!==e&&(x.easing=e),t._clipList.push(x),t._clipCount++,t.animation.add(x)}};for(var l in this._tracks)s(this._tracks[l],l);return this}},{key:"stop",value:function(){for(var e=0;e<this._clipList.length;e++){var t=this._clipList[e];this.animation.remove(t)}this._clipList=[]}},{key:"delay",value:function(e){return this._delay=e,this}},{key:"done",value:function(e){return e&&this._doneList.push(e),this}}]),e}();function px(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var hx=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.storage=new Dk,this.painter=new Vk(r,this.storage),this.handler=new Zk(r,this.storage,this.painter),this.animatingElements=[],this.animation=new cx({stage:{update:e.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="SuperMap.LevelRenderer.Render"}var t,r,n;return t=e,n=[{key:"getFrameCallback",value:function(e){return function(){var t=e.animatingElements;if(t instanceof Array){for(var r=0,n=t.length;r<n;r++)e.storage.mod(t[r].id);(t.length||e._needsRefreshNextFrame)&&e.refresh()}}}}],(r=[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(e){return this.storage.addRoot(e),this}},{key:"addGroup",value:function(e){return this.storage.addRoot(e),this}},{key:"delShape",value:function(e){return this.storage.delRoot(e),this}},{key:"delGroup",value:function(e){return this.storage.delRoot(e),this}},{key:"modShape",value:function(e,t){return this.storage.mod(e,t),this}},{key:"modGroup",value:function(e,t){return this.storage.mod(e,t),this}},{key:"modLayer",value:function(e,t){return this.painter.modLayer(e,t),this}},{key:"addHoverShape",value:function(e){return this.storage.addHover(e),this}},{key:"render",value:function(e){return this.painter.render(e),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(e){return this.painter.refresh(e),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(e){return this.painter.refreshHover(e),this}},{key:"refreshShapes",value:function(e,t){return this.painter.refreshShapes(e,t),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(e,t,r){if("string"==typeof e&&(e=this.storage.get(e)),e){var n;if(t){for(var o=t.split("."),i=e,a=0,s=o.length;a<s;a++)i&&(i=i[o[a]]);i&&(n=i)}else n=e;if(!n)return void XC.Util_log('Property "'+t+'" is not existed in element '+e.id);var l=this.animatingElements;return void 0===e.__aniCount&&(e.__aniCount=0),0===e.__aniCount&&l.push(e),e.__aniCount++,this.animation.animate(n,{loop:r}).done(function(){if(e.__aniCount--,0===e.__aniCount){var t=(new aP).indexOf(l,e);l.splice(t,1)}})}XC.Util_log("Element not existed")}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(e,t,r){return this.painter.toDataURL(e,t,r)}},{key:"shapeToImage",value:function(e,t,r){var n=ge.createUniqueID("SuperMap.LevelRenderer.ToImage_");return this.painter.shapeToImage(n,e,t,r)}},{key:"on",value:function(e,t){return this.handler.on(e,t),this}},{key:"un",value:function(e,t){return this.handler.un(e,t),this}},{key:"trigger",value:function(e,t){return this.handler.trigger(e,t),this.handler.dispatch(e,t),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(e){return this.painter.updateHoverLayer(e),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}])&&px(t.prototype,r),n&&px(t,n),e}();function yx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var dx=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e._instances={},e.Tool={},this.version="2.0.4",this.CLASS_NAME="SuperMap.LevelRenderer"}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.dispose(),this.version=null}},{key:"init",value:function(t){var r=new hx(ge.createUniqueID("LRenderer_"),t);return e._instances[r.id]=r,r}},{key:"dispose",value:function(t){if(t)t.dispose(),this.delInstance(t.id);else{for(var r in e._instances)e._instances[r].dispose();e._instances={}}return this}},{key:"getInstance",value:function(t){return e._instances[t]}},{key:"delInstance",value:function(t){return delete e._instances[t],this}}])&&yx(t.prototype,r),n&&yx(t,n),e}();n.LevelRenderer=dx;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var vx={EXCEL:"EXCEL",CSV:"CSV",ISERVER:"ISERVER",GEOJSON:"GEOJSON",JSON:"JSON"},mx={fileMaxSize:10485760};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function bx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var gx=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.FileTypes=vx,this.FileConfig=mx,this.loadFileObject=t&&t.loadFileObject?t.loadFileObject:[]}var t,r,n;return t=e,(r=[{key:"set",value:function(e,t){this[e]=t}},{key:"get",value:function(e){return this[e]}}])&&bx(t.prototype,r),n&&bx(t,n),e}();function Sx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var wx=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initView()}var t,r,n;return t=e,(r=[{key:"_initView",value:function(){var e=document.createElement("div");e.hidden=!0,e.setAttribute("class","component-messageboxcontainer component-border-bottom-orange");var t=document.createElement("div");t.setAttribute("class","icon"),this.icon=document.createElement("span"),this.icon.setAttribute("class","supermapol-icons-message-warning"),t.appendChild(this.icon),e.appendChild(t);var r=document.createElement("div");r.setAttribute("class","component-messagebox"),r.innerHTML="",e.appendChild(r),this.messageBox=r;var n=document.createElement("div");n.setAttribute("class","component-messagebox__cancelbtncontainer");var o=document.createElement("button");o.setAttribute("class","component-messagebox__cancelBtn"),o.innerHTML="x",o.onclick=this.closeView.bind(this),n.appendChild(o),e.appendChild(n),this.messageBoxContainer=e,document.body.appendChild(this.messageBoxContainer)}},{key:"closeView",value:function(){this.messageBoxContainer.hidden=!0}},{key:"showView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warring";"success"===t?(this.icon.setAttribute("class","supermapol-icons-message-success"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-green")):"failure"===t?(this.icon.setAttribute("class","supermapol-icons-message-failure"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-red")):"warring"===t&&(this.icon.setAttribute("class","supermapol-icons-message-warning"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-orange")),this.messageBox.innerHTML=e,this.messageBoxContainer.hidden=!1}}])&&Sx(t.prototype,r),n&&Sx(t,n),e}();n.Components.MessageBox=wx;var Ox=r(9),_x=r.n(Ox),Px={code:null,defaultCode:"en-US",getCode:function(){return n.Lang.code||n.Lang.setCode(),n.Lang.code},setCode:function(){var e=this.getLanguageFromCookie();e?n.Lang.code=e:(e=n.Lang.defaultCode,0===(e="Netscape"===navigator.appName?navigator.language:navigator.browserLanguage).indexOf("zh")&&(e="zh-CN"),0===e.indexOf("en")&&(e="en-US"),n.Lang.code=e)},getLanguageFromCookie:function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){for(var r=e[t];" "===r.charAt(0);)r=r.substring(1);if(-1!==r.indexOf("language="))return r.substring("language=".length,r.length)}return""},i18n:function(e){var t=n.Lang[n.Lang.getCode()],r=t&&t[e];return r||(r=e),r}};n.Lang=Px,n.i18n=n.Lang.i18n;var Cx=r(5),Ex=r.n(Cx),Tx={rABS:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsBinaryString,rABF:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsArrayBuffer,rAT:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsText,readFile:function(e,t,r,n,o){vx.JSON===e||vx.GEOJSON===e?this.readTextFile(t,r,n,o):vx.EXCEL!==e&&vx.CSV!==e||this.readXLSXFile(t,r,n,o)},readTextFile:function(e,t,r,n){var o=new FileReader;o.onloadend=function(e){t&&t.call(n,e.target.result)},o.onerror=function(e){r&&r.call(n,e)},this.rAT?o.readAsText(e.file,"utf-8"):o.readAsBinaryString(e.file)},readXLSXFile:function(e,t,r,n){var o=new FileReader;o.onloadend=function(e){var o=new Uint8Array(e.target.result),i=Ex.a.read(o,{type:"array"});try{if(i&&i.SheetNames&&i.SheetNames.length>0){var a=i.SheetNames[0],s=Ex.a.utils.sheet_to_csv(i.Sheets[a]);t&&t.call(n,s)}}catch(e){r&&r.call(n,e)}},o.onerror=function(e){r&&r.call(n,e)},this.rABF&&o.readAsArrayBuffer(e.file)},processDataToGeoJson:function(e,t,r,n,o){var i=null;if("EXCEL"===e||"CSV"===e)i=this.processExcelDataToGeoJson(t),r&&r.call(o,i);else if("JSON"===e||"GEOJSON"===e){var a=t;"string"==typeof a&&(a=JSON.parse(a)),"ISERVER"===a.type?i=a.data.recordsets[0].features:"FeatureCollection"===a.type?i=a:n&&n.call(o,Px.i18n("msg_dataInWrongGeoJSONFormat")),r&&r.call(o,i)}else n&&n.call(o,Px.i18n("msg_dataInWrongFormat"))},processExcelDataToGeoJson:function(e){for(var t=this.string2Csv(e),r=t.colTitles,n=-1,o=-1,i=0,a=r.length;i<a;i++)this.isXField(r[i])&&(n=i),this.isYField(r[i])&&(o=i);for(var s=[],l=0,u=t.rows.length;l<u;l++){var c=t.rows[l],f=Number(c[n]),p=Number(c[o]),h={};for(var y in t.colTitles){h[t.colTitles[y]]=t.rows[l][y]}var d={type:"Feature",geometry:{type:"Point",coordinates:[f,p]},properties:h};s.push(d)}return s},isXField:function(e){var t=e.toLowerCase();return"x"===t||"smx"===t||"jd"===t||"经度"===t||"东经"===t||"longitude"===t||"lot"===t||"lon"===t||"lng"===t||"x坐标"===t},isYField:function(e){var t=e.toLowerCase();return"y"===t||"smy"===t||"wd"===t||"纬度"===t||"北纬"===t||"latitude"===t||"lat"===t||"y坐标"===t},string2Csv:function(e,t){var r=e.split("\n"),n={};n.colTitles=t?[]:r[0].split(","),n.rows=[];for(var o=t?0:1;o<r.length;o++)r[o]&&n.rows.push(r[o].split(","));return n}};function kx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.Components.FileReaderUtil=Tx;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xx=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasets=t,this.EVENT_TYPES=["getdatafailed"],this.events=new Vt(this,null,this.EVENT_TYPES)}var t,r,i;return t=e,(r=[{key:"getDatasetInfo",value:function(e){var t=this.datasets.url,r=this;en.get(t).then(function(e){return e.json()}).then(function(t){if(t.datasetInfo){var n=t.datasetInfo;r.datasetsInfo={dataSourceName:n.dataSourceName,datasetName:n.name,mapName:t.name},e({result:r.datasetsInfo})}}).catch(function(e){console.log(e),r._fireFailedEvent(e)})}},{key:"getDataFeatures",value:function(e,t){var r,o,i=e.result,a={name:i.datasetName+"@"+i.dataSourceName};Object.assign(a,this.datasets.queryInfo),r=new n.FilterParameter(a),o=new n.GetFeaturesBySQLParameters({queryParameter:r,datasetNames:[i.dataSourceName+":"+i.datasetName],fromIndex:0,toIndex:1e5}),new n.GetFeaturesBySQLService(i.dataUrl,{eventListeners:{processCompleted:t,processFailed:function(){}}}).processAsync(o)}},{key:"getLayerFeatures",value:function(e,t){var r,o,i=e.result,a={name:i.mapName};Object.assign(a,this.datasets.queryInfo),r=new n.FilterParameter(a),o=new n.QueryBySQLParameters({queryParams:[r],expectCount:1e5}),new n.QueryBySQLService(i.dataUrl,{eventListeners:{processCompleted:t,processFailed:function(){}}}).processAsync(o)}},{key:"getDataInfoByIptl",value:function(e){this.getServiceInfo(this.datasets.url,e)}},{key:"getServiceInfo",value:function(e,t){var r=this;en.get(e,null,{withCredentials:this.datasets.withCredentials}).then(function(e){return e.json()}).then(function(n){var o;!1!==n.succeed?n.dataItemServices&&n.dataItemServices.length>0?(n.dataItemServices.forEach(function(n){if("RESTDATA"===n.serviceType&&"PUBLISHED"===n.serviceStatus)o=n;else{if("RESTMAP"!==n.serviceType||"PUBLISHED"!==n.serviceStatus)return void r.getDatafromContent(e,t);o=n}}),o&&r.getDatafromRest(o.serviceType,o.address,t)):r.getDatafromContent(e,t):r._fireFailedEvent(n)}).catch(function(e){console.log(e),r._fireFailedEvent(e)})}},{key:"getDatafromContent",value:function(e,t){var r=this,n={result:{}},o=this;e+="/content.json?pageSize=9999999&currentPage=1",en.get(e,null,{withCredentials:this.datasets.withCredentials}).then(function(e){return e.json()}).then(function(e){if(!1!==e.succeed){if(e.type){if("JSON"===e.type||"GEOJSON"===e.type){if(e.content=JSON.parse(e.content.trim()),!e.content.features)return void console.log(Px.i18n("msg_jsonResolveFiled"));var i=r._formatGeoJSON(e.content);n.result.features={type:e.content.type,features:i}}else if("EXCEL"===e.type||"CSV"===e.type){var a=r._excelData2Feature(e.content);n.result.features={type:"FeatureCollection",features:a}}t(n,"content")}}else o._fireFailedEvent(e)},this).catch(function(e){console.log(e),o._fireFailedEvent(e)})}},{key:"getDatafromRest",value:function(e,t,r){var n=this,o=this.datasets.withCredentials;if("RESTDATA"===e){var i,a,s="".concat(t,"/data/datasources");en.get(s,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){i=e.datasourceNames[0],s="".concat(t,"/data/datasources/").concat(i,"/datasets"),en.get(s,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){return a=e.datasetNames[0],n.getDatafromRestData("".concat(t,"/data"),[i+":"+a],r),[i+":"+a]}).catch(function(e){n._fireFailedEvent(e)})}).catch(function(e){n._fireFailedEvent(e)})}else{var l,u,c,f="".concat(t,"/maps");en.get(f,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){l=e[0].name,c=e[0].path,f=f="".concat(t,"/maps/").concat(l,"/layers"),en.get(f,null,{withCredentials:o}).then(function(e){return e.json()}).then(function(e){return u=e[0].subLayers.layers[0].caption,n.getDatafromRestMap(u,c,r),u}).catch(function(e){n._fireFailedEvent(e)})}).catch(function(e){n._fireFailedEvent(e)})}}},{key:"getDatafromRestData",value:function(e,t,r){var n=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"SmID>0",this._getFeatureBySQL(e,t,this.datasets.queryInfo,function(e){r(e,"RESTDATA")},function(e){console.log(e),n._fireFailedEvent(e)})}},{key:"getDatafromRestMap",value:function(e,t,r){var n=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"smid=1",this._queryFeatureBySQL(t,e,this.datasets.queryInfo,null,null,function(e){r(e,"RESTMAP")},function(e){console.log(e),n._fireFailedEvent(e)})}},{key:"_getFeatureBySQL",value:function(e,t,r,n,o){var i,a,s={name:t.join().replace(":","@")};Object.assign(s,r),i=new Fo(s),a=new Dp({queryParameter:i,datasetNames:t,fromIndex:0,toIndex:1e5,returnContent:!0}),new Wp(e,{eventListeners:{processCompleted:function(e){n&&n(e)},processFailed:function(e){o&&o(e)}}}).processAsync(a)}},{key:"_queryFeatureBySQL",value:function(e,t,r,n,o,i,a,l,u,c){var f,p,h={name:t};Object.assign(h,r),f=new Fo(h),n&&(f.fields=n);var y={queryParams:[f]};c&&(y.queryOption=s.ATTRIBUTE),l&&(y.startRecord=l),u&&(y.expectCount=u),o&&(y.prjCoordSys={epsgCode:o}),p=new Lb(y),this._queryBySQL(e,p,function(e){"processCompleted"===e.type?i(e):a(e)})}},{key:"_queryBySQL",value:function(e,t,r,n){new Gb(e,{eventListeners:{scope:this,processCompleted:r,processFailed:r},format:this._processFormat(n)}).processAsync(t)}},{key:"_processFormat",value:function(e){return e||o.GEOJSON}},{key:"_formatGeoJSON",value:function(e){var t=e.features;return t.forEach(function(e,t){e.properties.index=t}),t}},{key:"_excelData2Feature",value:function(e){for(var t=e.colTitles,r=-1,n=-1,o=0,i=t.length;o<i;o++)Tx.isXField(t[o])&&(r=o),Tx.isYField(t[o])&&(n=o);for(var a=[],s=0,l=e.rows.length;s<l;s++){var u=e.rows[s],c=Number(u[r]),f=Number(u[n]),p={};for(var h in e.colTitles){p[e.colTitles[h]]=e.rows[s][h]}p.index=s+"";var y={type:"Feature",geometry:{type:"Point",coordinates:[c,f]},properties:p};a.push(y)}return a}},{key:"_fireFailedEvent",value:function(e){var t=e?{error:e,message:Px.i18n("msg_getdatafailed")}:{message:Px.i18n("msg_getdatafailed")};this.events.triggerEvent("getdatafailed",t)}}])&&kx(t.prototype,r),i&&kx(t,i),e}();function Ax(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var jx=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasets=t.datasets,this.xField=[],this.yField=[],this.grid={top:"50px",bottom:"50px",left:"50px",right:"60px"},this.chartType=t.type||"bar",this._initXYField(t.chartOptions),this.EVENT_TYPES=["getdatafailed"],this.events=new Vt(this,null,this.EVENT_TYPES)}var t,r,n;return t=e,(r=[{key:"_initXYField",value:function(e){var t=this;e&&e.length>0&&e.forEach(function(e){e.xAxis&&t.xField.push({field:e.xAxis.field,name:e.xAxis.name}),e.yAxis&&t.yField.push({field:e.yAxis.field,name:e.yAxis.name})})}},{key:"getDatasetInfo",value:function(e){var t=this;this.createChart=e,this.datasets&&this._checkUrl(this.datasets.url)&&(this.chartModel=new xx(this.datasets),"iServer"===this.datasets.type?this.chartModel.getDatasetInfo(this._getDatasetInfoSuccess.bind(this)):"iPortal"===this.datasets.type&&this.chartModel.getDataInfoByIptl(this._getDataInfoSuccess.bind(this)),this.chartModel.events.on({getdatafailed:function(e){t.events.triggerEvent("getdatafailed",e)}}))}},{key:"_getDatasetInfoSuccess",value:function(e){var t=this.datasets.url,r=t.indexOf("rest");if(r>0){var n=t.indexOf("/",r+5),o=t.substring(r+5,n),i=t.substring(0,r+4)+"/data";if("maps"===o){var a=t.indexOf("/",n+1),s=t.substring(n+1,a);i=t.substring(0,r+4)+"/maps/"+s,e.result.dataUrl=i,this._getLayerFeatures(e)}else"data"===o&&(e.result.dataUrl=i,this._getDataFeatures(e))}}},{key:"_getDataInfoSuccess",value:function(e,t){"RESTMAP"===t?this._getChartDatasFromLayer(e):this._getChartDatas(e)}},{key:"_getDataFeatures",value:function(e){this.chartModel.getDataFeatures(e,this._getChartDatas.bind(this))}},{key:"_getLayerFeatures",value:function(e){this.chartModel.getLayerFeatures(e,this._getChartDatasFromLayer.bind(this))}},{key:"_getChartDatas",value:function(e){if(e){this.features=e.result.features;var t=this.features.features,r={};if(t.length){var n=t[0],o=[],i=[];for(var a in n.properties)o.push(a),i.push(this._getDataType(n.properties[a]));for(var s in r={features:t,fieldCaptions:o,fieldTypes:i,fieldValues:[]},i){var l=[];for(var u in t){var c=t[u],f=r.fieldCaptions[s],p=c.properties[f];l.push(p)}r.fieldValues.push(l)}this.createChart(r)}}}},{key:"_getChartDatasFromLayer",value:function(e){if(e.result.recordsets){var t=e.result.recordsets[0],r=t.features.features;this.features=t.features;var n={};if(r.length){for(var o in(n={features:t.features,fieldCaptions:t.fieldCaptions,fieldTypes:t.fieldTypes,fieldValues:[]}).fieldCaptions){var i=[];for(var a in r){var s=r[a],l=n.fieldCaptions[o],u=s.properties[l];i.push(u)}n.fieldValues.push(i)}this.createChart(n)}}}},{key:"_createChartOptions",value:function(e){return this.calculatedData=this._createChartDatas(e),this.updateChartOptions(this.chartType)}},{key:"changeType",value:function(e){if(e!==this.chartType)return this.chartType=e,this.updateChartOptions(this.chartType)}},{key:"updateData",value:function(e,t,r){this.updateChart=r,this.xField=[],this.yField=[],this._initXYField(t),e.type=e.type||"iServer",e.withCredentials=e.withCredentials||!1,this.datasets=e,this.getDatasetInfo(this._updateDataSuccess.bind(this))}},{key:"_updateDataSuccess",value:function(e){var t=this._createChartOptions(e);this.updateChart(t)}},{key:"updateChartOptions",value:function(e,t){if(this.calculatedData){var r=this.grid,n=this._createChartSeries(this.calculatedData,e),o=[];for(var i in this.calculatedData.XData)o.push({value:this.calculatedData.XData[i].fieldsData});var a={type:"category",name:this.xField[0].name||"X",data:o,nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},s={type:"value",name:this.yFieldName||"Y",data:{},nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},l={formatter:"{b0}: {c0}"},u="#404a59";return t&&(t.grid&&(r=t.grid),t.tooltip&&(l=t.tooltip),t.backgroundColor&&(u=t.backgroundColor)),{backgroundColor:u,grid:r,series:n,xAxis:a,yAxis:s,tooltip:l}}}},{key:"_createChartDatas",value:function(e){var t=0,r=[],n=e.fieldCaptions,o=this;n.forEach(function(e,r){o.xField[0]&&e===o.xField[0].field&&(t=r)}),this.yFieldName="",this.yField.forEach(function(e,t){0!==t&&(o.yFieldName=o.yFieldName+","),o.yFieldName=o.yFieldName+e.name,n.forEach(function(t,n){t===e.field&&r.push(n)})});var i=this._getAttrData(e,t),a=[];if(r.length>0)r.forEach(function(t){var r=[];for(var n in e.fieldValues[t])r.push({value:e.fieldValues[t][n]});a.push(r)});else{for(var s=[],l=[],u=i.length,c=0;c<u;c++){for(var f=!1,p=0,h=l.length;p<h;p++)if(i[c].fieldsData===l[p].fieldsData){s[p].value++,l[p].recordIndexs.push(c),f=!0;break}f||i[c].fieldsData&&(l.push({fieldsData:i[c].fieldsData,recordIndexs:[c]}),s.push({value:1}))}i=l,a=[s]}return{XData:i,YData:a}}},{key:"_getAttrData",value:function(e,t){0===t&&(this.xField=[{field:e.fieldCaptions[t],name:e.fieldCaptions[t]}]);for(var r=[],n=0,o=e.fieldValues[t].length;n<o;n++){var i=e.fieldValues[t][n];r.push({recordIndexs:n,fieldsData:i})}return r}},{key:"_createChartSeries",value:function(e,t){var r=[];return e.YData.forEach(function(e){var n=0,o=[],i=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){n=l.value.value,o.push({value:n})}}catch(e){a=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}var c={type:t,data:o,name:"y"};r.push(c)}),r}},{key:"_isDate",value:function(e){return/((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/gi.test(e)}},{key:"_isNumber",value:function(e){var t=Number(e);return 0===t||!isNaN(t)}},{key:"_getDataType",value:function(e){if(null!==e&&void 0!==e&&""!==e){if(this._isDate(e))return"DATE";if(this._isNumber(e))return"NUMBER"}return"STRING"}},{key:"_checkUrl",value:function(e){return!(""===e||!this._isMatchUrl(e))&&(!/^http[s]?:\/\/localhost/.test(e)&&!/^http[s]?:\/\/127.0.0.1/.test(e))}},{key:"_isMatchUrl",value:function(e){return new RegExp("(https?|http|file|ftp)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]").test(e)}},{key:"getStyle",value:function(){return{grid:this.grid,tooltip:this.tooltip,backgroundColor:this.backgroundColor}}},{key:"getFeatures",value:function(){return this.features}},{key:"setStyle",value:function(e){return this.updateChartOptions(this.chartType,e)}}])&&Ax(t.prototype,r),n&&Ax(t,n),e}();function Rx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.Components.ChartViewModel=jx;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Lx=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domID=t,this.chartType=r.type||"bar",r.datasets.type=r.datasets.type||"iServer",r.datasets.withCredentials=r.datasets.withCredentials||!1,this.viewModel=new jx(r),this._fillDataToView()}var t,r,n;return t=e,(r=[{key:"onAdd",value:function(e){this.addChart=e}},{key:"_fillDataToView",value:function(){var e=new wx;this.viewModel.getDatasetInfo(this._createChart.bind(this)),this.viewModel.events.on({getdatafailed:function(t){e.showView(t.message)}})}},{key:"getStyle",value:function(){return this.viewModel.getStyle()}},{key:"getFeatures",value:function(){return this.viewModel.getFeatures()}},{key:"setStyle",value:function(e){var t=this.viewModel.setStyle(e);this._updateChart(t)}},{key:"changeType",value:function(e){if(this.chartType!==e){this.chartType=e;var t=this.viewModel.changeType(e);this._updateChart(t)}}},{key:"updateData",value:function(e,t){var r=this;this.viewModel.updateData(e,t,function(e){r._updateChart(e),r.addChart&&r.addChart()})}},{key:"_createChart",value:function(e){this.echart=_x.a.init(document.getElementById(this.domID),null,{renderer:"canvas"});var t=this.viewModel._createChartOptions(e);this.echart.setOption(t),this.addChart&&this.addChart()}},{key:"_updateChart",value:function(e){this.echart&&(this.echart.clear(),this.echart.setOption(e))}}])&&Rx(t.prototype,r),n&&Rx(t,n),e}();function Mx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}n.Components.Chart=Lx;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Nx=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.id=t.id?t.id:null,this.rootContainer=null}var t,r,n;return t=e,(r=[{key:"getElement",value:function(){return this.id&&(this.rootContainer.id=this.id),this.rootContainer}},{key:"_initView",value:function(){}},{key:"showView",value:function(){this.rootContainer.hidden=!1}},{key:"closeView",value:function(){this.rootContainer.hidden=!0}}])&&Mx(t.prototype,r),n&&Mx(t,n),e}();function Ix(e){return(Ix="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fx(e,t){return!t||"object"!==Ix(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bx(e){return(Bx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gx(e,t){return(Gx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Components.TemplateBase=Nx;var Ux=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Fx(this,Bx(t).call(this,e));var n=e.title?e.title:"";return r._initView(n),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gx(e,t)}(t,Nx),r=t,(n=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-container");var r=document.createElement("div");r.setAttribute("class","component-title");var n=document.createElement("div");n.innerHTML=e,r.appendChild(n),t.appendChild(r);var o=document.createElement("div");return o.setAttribute("class","component-content"),t.appendChild(o),this.content=o,this.rootContainer=t,t}},{key:"getContentElement",value:function(){return this.content}},{key:"appendContent",value:function(e){this.content.appendChild(e)}}])&&Dx(r.prototype,n),o&&Dx(r,o),t}();function Hx(e){return(Hx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wx(e,t){return!t||"object"!==Hx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vx(e){return(Vx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zx(e,t){return(zx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Components.CommonContainer=Ux;var qx=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Wx(this,Vx(t).call(this,e)))._initView(e),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zx(e,t)}(t,Nx),r=t,(n=[{key:"_initView",value:function(e){var t=this._createElement("div","component-selecttool");e.labelName&&(this._createElement("label","component-selecttool__lable--describe",t).innerHTML=e.labelName);var r=this._createElement("div","component-selecttool--chart",t);r.setAttribute("tabindex","1");var n=this._createElement("div","component-selecttool__name",r);n.title=e.optionsArr[0],n.innerHTML=e.optionsArr[0];var o=this._createElement("div","component-selecttool__trianglebtn--chart",r),i=this._createElement("div","component-triangle-down-img",o),a=this._createElement("div","component-selecttool__content",r),s=this._createElement("div","component-selecttool__content--chart",a),l=this._createElement("div","component-selecttool__scrollarea__content",s);l.setAttribute("tabindex","1"),this.createOptions(l,e.optionsArr),this.optionClickEvent(l,n,e.optionsClickCb),this._selectClickEvent(r,a,i),this.rootContainer=t}},{key:"createOptions",value:function(e,t){for(var r in t){var n=this._createElement("div","component-selecttool__option",e);n.title=t[r],n.innerHTML=t[r]}}},{key:"_selectClickEvent",value:function(e,t,r){e.onclick=function(e){"block"===t.style.display?(t.style.display="none",r.className="component-triangle-down-img"):(t.style.display="block",r.className="triangle-up-img"),e.preventDefault(),e.stopPropagation()},e.onmousedown=function(e){e.target!==this&&(this.focus(),e.preventDefault(),e.stopPropagation())},e.onblur=function(){t.style.display="none",r.className="component-triangle-down-img"}}},{key:"_createElement",value:function(e,t,r){var n=document.createElement(e||"div");return t&&(n.className=t),r&&r.appendChild(n),n}},{key:"optionClickEvent",value:function(e,t,r){for(var n=function(n){var o=e.children[n];o.onclick=function(){t.innerHTML=o.innerHTML,t.title=o.title,o.getAttribute("data-value")&&t.setAttribute("data-value",o.getAttribute("data-value")),r&&r(o)}},o=0;o<e.children.length;o++)n(o)}}])&&Jx(r.prototype,n),o&&Jx(r,o),t}();function Yx(e){return(Yx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xx(e,t){return!t||"object"!==Yx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kx(e){return(Kx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zx(e,t){return(Zx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Components.Select=qx;var $x=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Xx(this,Kx(t).call(this,e)))._initView(e),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zx(e,t)}(t,Nx),r=t,(n=[{key:"_initView",value:function(e){var t=document.createElement("div");t.className="component-dropdownbox--container";var r=document.createElement("div");r.setAttribute("tabindex","1"),r.className="component-dropdownbox",t.appendChild(r);var n=document.createElement("div");r.appendChild(n),this._createDropDownOption(e[0],n);var o=document.createElement("div");o.className="component-dropdownbox__triangle-btn",r.appendChild(o);var i=document.createElement("div");i.className="component-triangle-down-img",o.appendChild(i);var a={parentEle:r,dropDownContent:["component-dropdownbox__content component-dropdownbox__content--chart","dropDownContent"],scrollareaContent:"component-selecttool__scrollarea__content",optionsArr:e,triangleBtn:i,dropDownTopContainer:n};this._createDropDownBox(a),this.rootContainer=t}},{key:"_createDropDownBox",value:function(e){var t=e.parentEle,r=e.dropDownTopContainer,n=document.createElement("div");n.className=e.dropDownContent[0],t.appendChild(n);var o=document.createElement("div");o.className=e.scrollareaContent,n.appendChild(o);for(var i=e.optionsArr,a=0;a<i.length;a++)this._createDropDownOption(i[a],o);var s=e.triangleBtn;this._dropDownClickEvent(t,n,s),this._eleOnblur(t,n,s);for(var l=o.children,u=function(e){l[e].onclick=function(){r.innerHTML=l[e].outerHTML}},c=0;c<l.length;c++)u(c)}},{key:"_createDropDownOption",value:function(e,t){var r=document.createElement("div");r.className="component-dropdownbox__item";var n=e;n.dataValue&&r.setAttribute("data-value",n.dataValue),t.appendChild(r);var o=document.createElement("div");o.className="component-dropdownbox__item__img",r.appendChild(o);var i=document.createElement("div");n.icon.className&&(i.className=n.icon.className),n.icon.background&&(i.style.background=n.icon.background),o.appendChild(i);var a=document.createElement("div");a.className="component-dropdownbox__item__title",a.title=n.title,a.innerHTML=n.title,r.appendChild(a);var s=document.createElement("div");s.className="component-dropdownbox__item__remark",s.title=n.remark,s.innerHTML=n.remark,r.appendChild(s)}},{key:"_dropDownClickEvent",value:function(e,t,r){e.onclick=function(e){"block"===t.style.display?(t.style.display="none",r.className="component-triangle-down-img"):(t.style.display="block",r.className="triangle-up-img"),e.preventDefault(),e.stopPropagation()},e.onmousedown=function(e){e.target!==this&&(this.focus(),e.preventDefault(),e.stopPropagation())}}},{key:"_eleOnblur",value:function(e,t,r){e.onblur=function(){t.style.display="none",r.className="component-triangle-down-img"}}},{key:"_createElement",value:function(e,t,r){var n=document.createElement(e||"div");return t&&(n.className=t),r&&r.appendChild(n),n}}])&&Qx(r.prototype,n),o&&Qx(r,o),t}();function eA(e){return(eA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rA(e,t){return!t||"object"!==eA(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nA(e){return(nA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oA(e,t){return(oA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Components.DropDownBox=$x;var iA=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},r=rA(this,nA(t).call(this,e)),e.title=e.title?e.title:"",r._initView(e.title),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oA(e,t)}(t,Nx),r=t,(n=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-popcontainer");var r=document.createElement("div");r.setAttribute("class","component-popcontainer__header");var n=document.createElement("label");n.setAttribute("class","component-popcontainer__header__title"),n.innerHTML=e,r.appendChild(n);var o=document.createElement("span");o.setAttribute("class","supermapol-icons-clear component-popcontainer__header__close"),o.onclick=this.closeView.bind(this),t.appendChild(o),t.appendChild(r);var i=document.createElement("div");i.setAttribute("class","component-popcontainer__content"),this.content=i,t.appendChild(i),this.rootContainer=t}},{key:"appendContent",value:function(e){this.content.appendChild(e)}}])&&tA(r.prototype,n),o&&tA(r,o),t}();function aA(e){return(aA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lA(e,t){return!t||"object"!==aA(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uA(e){return(uA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cA(e,t){return(cA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Components.PopContainer=iA;var fA=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.title=e.title?e.title:"属性",(r=lA(this,uA(t).call(this,e))).rootContainer.firstChild.hidden=!0,e.attributes=e.attributes?e.attributes:[],r._createAttributesTable(e.attributes),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cA(e,t)}(t,iA),r=t,(n=[{key:"_createAttributesTable",value:function(e){var t=document.createElement("table");t.setAttribute("class","component-popcontainer__content__table");var r=document.createElement("tbody"),n=!0;for(var o in e){var i=document.createElement("tr");n&&i.setAttribute("class","component-popcontainer__content__td--color");var a=document.createElement("td"),s=document.createElement("Span");s.innerHTML=o,a.appendChild(s);var l=document.createElement("td");l.innerHTML=e[o],i.appendChild(a),i.appendChild(l),r.appendChild(i),n=!n}t.appendChild(r),this.appendContent(t)}}])&&sA(r.prototype,n),o&&sA(r,o),t}();function pA(e){return(pA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yA(e,t){return!t||"object"!==pA(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dA(e){return(dA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vA(e,t){return(vA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Components.AttributesPopContainer=fA;var mA=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=yA(this,dA(t).call(this,e)))._initView(),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vA(e,t)}(t,Nx),r=t,(n=[{key:"_initView",value:function(){var e=document.createElement("div");e.setAttribute("class","component-tabpage");var t=document.createElement("ul");this.header=t;var r=document.createElement("div");r.setAttribute("class","component-tabpage__content"),this.content=r,e.appendChild(t),e.appendChild(r),this.rootContainer=e}},{key:"setTabs",value:function(e){this.removeAllTabs(),this.appendTabs(e)}},{key:"appendTabs",value:function(e){for(var t=0;t<e.length;t++){var r=document.createElement("span");r.index=t,r.appendChild(document.createTextNode(e[t].title)),r.onclick=this._changeTabsPage.bind(this);var n=e[t].content;n.index=t,n.hidden=!0,this.header.appendChild(r),this.content.appendChild(n)}this.header.firstChild.setAttribute("class","on"),this.content.firstChild.hidden=!1}},{key:"removeTab",value:function(e){this.header.removeChild(this.header.children[e]),this.content.removeChild(this.content.children[e])}},{key:"removeAllTabs",value:function(){for(var e=this.header.children.length;e>0;e--)this.header.removeChild(this.header.children[e]),this.content.removeChild(this.content.children[e])}},{key:"_changeTabsPage",value:function(e){for(var t=e.target.index,r=0;r<this.header.children.length;r++)this.header.children[r].setAttribute("class",""),this.content.children[r].hidden=!0,r===t&&(this.header.children[r].setAttribute("class","on"),this.content.children[r].hidden=!1)}}])&&hA(r.prototype,n),o&&hA(r,o),t}();function bA(e){return(bA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function SA(e,t){return!t||"object"!==bA(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wA(e){return(wA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OA(e,t){return(OA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Components.IndexTabsPageContainer=mA;var _A=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=SA(this,wA(t).call(this,e))).rootContainer.classList.add("component-citytabpage--noneBoxShadow"),r.config=e.config,ge.isArray(r.config)?(r.header.hidden=!0,r._createCityItem("城市",r.config),r.content.style.border="none"):(r._createTabs(),r.header.onclick=function(e){for(var t=0;t<r.header.children.length;t++)r.header.children[t].setAttribute("class","");e.target.setAttribute("class","on"),r._createCityContent(e.target.innerHTML)}),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OA(e,t)}(t,mA),r=t,(n=[{key:"_createTabs",value:function(){if(ge.isArray(this.config))for(var e=0;e<this.config.length;e++){var t="";for(var r in this.config[e])t+=r;var n=document.createElement("li");n.innerHTML=t,this.header.appendChild(n)}else for(var o in this.config){var i=document.createElement("li");i.innerHTML=o,this.header.appendChild(i)}this.header.firstChild.setAttribute("class","on"),this._createCityContent(this.header.firstChild.innerHTML)}},{key:"_createCityContent",value:function(e){for(var t=this.content.children.length;t>0;t--)this.content.removeChild(this.content.children[t-1]);var r=this.config[e];for(var n in r)this._createCityItem(n,r[n])}},{key:"_createCityItem",value:function(e,t){var r=document.createElement("div"),n=document.createElement("div");n.setAttribute("class","component-citytabpag__py-key"),n.innerHTML=e,r.appendChild(n);var o=document.createElement("div");o.setAttribute("class","component-citytabpag__content");for(var i=0;i<t.length;i++){var a=document.createElement("span");a.innerHTML=t[i],o.appendChild(a)}"HOT"===e&&(o.style.width="428px"),r.appendChild(o),this.content.appendChild(r)}}])&&gA(r.prototype,n),o&&gA(r,o),t}();function PA(e){return(PA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function EA(e,t){return!t||"object"!==PA(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function TA(e){return(TA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kA(e,t){return(kA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Components.CityTabsPage=_A;var xA=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=EA(this,TA(t).call(this,e))).navTabsTitle=null,r.navTabsContent=null,e.tabs=e.tabs?e.tabs:[],r._initView(e.tabs),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kA(e,t)}(t,Nx),r=t,(n=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-navtabspage");var r=document.createElement("span");r.setAttribute("class","supermapol-icons-close"),r.onclick=this.closeView.bind(this),t.appendChild(r);var n=document.createElement("div");this.navTabsTitle=n,n.setAttribute("class","component-navtabspage__title"),t.appendChild(n);var o=document.createElement("div");this.navTabsContent=o,o.setAttribute("class","component-navtabspage__content"),t.appendChild(o),e.length>0&&this.appendTabs(e),this.rootContainer=t}},{key:"setTabs",value:function(e){this.removeAllTabs(),this.appendTabs(e)}},{key:"appendTabs",value:function(e){for(var t=0;t<e.length;t++){var r=document.createElement("span");r.index=t,r.appendChild(document.createTextNode(e[t].title)),r.onclick=this._changeTabsPage.bind(this);var n=e[t].content;n.index=t,n.hidden=!0,this.navTabsTitle.appendChild(r),this.navTabsContent.appendChild(n)}this.navTabsTitle.firstChild.setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.firstChild.hidden=!1}},{key:"removeTab",value:function(e){this.navTabsTitle.removeChild(this.navTabsTitle.children[e]),this.navTabsContent.removeChild(this.navTabsContent.children[e])}},{key:"removeAllTabs",value:function(){for(var e=this.navTabsTitle.children.length;e>0;e--)this.navTabsTitle.removeChild(this.navTabsTitle.children[e]),this.navTabsContent.removeChild(this.navTabsContent.children[e])}},{key:"_changeTabsPage",value:function(e){for(var t=e.target.index,r=0;r<this.navTabsTitle.children.length;r++)this.navTabsTitle.children[r].setAttribute("class",""),this.navTabsContent.children[r].hidden=!0,r===t&&(this.navTabsTitle.children[r].setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.children[r].hidden=!1)}}])&&CA(r.prototype,n),o&&CA(r,o),t}();function AA(e){return(AA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function RA(e,t){return!t||"object"!==AA(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function LA(e){return(LA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MA(e,t){return(MA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Components.NavTabsPage=xA;var NA=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(r=RA(this,LA(t).call(this,e))).currentPage=0,r.pageNumberLis=[],r.currentPageNumberLis=[],r.linkageEvent=null,e.contents=e.contents?e.contents:null,e.pageCounts=e.pageCounts?e.pageCounts:0,r._initView(e.contents,e.pageCounts),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MA(e,t)}(t,Nx),r=t,(n=[{key:"setLinkageEvent",value:function(e){this.linkageEvent=e}},{key:"_initView",value:function(e,t){var r=document.createElement("div");r.setAttribute("class","component-pagination");var n=document.createElement("div");n.setAttribute("class","component-pagination__content"),r.appendChild(n),this.content=n;var o=document.createElement("ul");o.setAttribute("class","component-pagination__link"),o.onclick=this._changePageEvent.bind(this),r.appendChild(o),this._createLink(o),this.link=o,e&&this.setContent(e),0!==t&&this.setPageLink(t),this.rootContainer=r}},{key:"setContent",value:function(e){this.clearContent(),this.appendContent(e)}},{key:"appendContent",value:function(e){this.content.appendChild(e)}},{key:"clearContent",value:function(){for(var e=this.content.children.length-1;e>=0;e--)this.content.removeChild(this.content.children[e])}},{key:"setPageLink",value:function(e){this.pageNumberLis=[],this.currentPageNumberLis=[],this.clearPageLink(),this._createPageLi(e),this._appendPageLink()}},{key:"_createPageLi",value:function(e){for(var t=0;t<e;t++){var r=document.createElement("li");r.innerHTML=t+1,this.pageNumberLis.push(r)}if(this.pageNumberLis[0].setAttribute("class","active"),this.currentPage=1,e<5)this.currentPageNumberLis=this.pageNumberLis;else for(var n=0;n<5;n++)this.currentPageNumberLis.push(this.pageNumberLis[n])}},{key:"_appendPageLink",value:function(){for(var e=0;e<this.currentPageNumberLis.length;e++)this.link.insertBefore(this.currentPageNumberLis[e],this.link.childNodes[this.link.children.length-2]);for(var t=0;t<this.currentPageNumberLis.length;t++)this.currentPageNumberLis[t].setAttribute("class",""),Number(this.currentPageNumberLis[t].innerHTML)===this.currentPage&&this.currentPageNumberLis[t].setAttribute("class","active");this._changeDisableState(),this.linkageEvent&&this.linkageEvent(this.currentPage)}},{key:"clearPageLink",value:function(){for(var e=this.link.children.length-3;e>1;e--)this.link.removeChild(this.link.children[e])}},{key:"_createLink",value:function(e){for(var t=0;t<4;t++){var r=document.createElement("li");r.setAttribute("class","disable");var n=document.createElement("span");r.appendChild(n),0===t?(n.id="first",n.setAttribute("class","supermapol-icons-first")):1===t?(n.id="prev",n.setAttribute("class","supermapol-icons-prev")):2===t?(n.id="next",n.setAttribute("class","supermapol-icons-next")):3===t&&(n.id="last",n.setAttribute("class","supermapol-icons-last")),e.appendChild(r)}}},{key:"_changePageEvent",value:function(e){var t=e.target;if("disable"!==t.parentElement.classList[0]){var r;if(t.id)r=t.id;else{if(!Number(t.innerHTML))return;r=Number(t.innerHTML)}this._prePageNum(r),this.clearPageLink(),this._appendPageLink()}}},{key:"_changeDisableState",value:function(){this.link.children[0].setAttribute("class",""),this.link.children[1].setAttribute("class",""),this.link.children[this.link.children.length-1].setAttribute("class",""),this.link.children[this.link.children.length-2].setAttribute("class",""),1===this.currentPage&&(this.link.children[0].setAttribute("class","disable"),this.link.children[1].setAttribute("class","disable")),this.currentPage===this.pageNumberLis.length&&(this.link.children[this.link.children.length-1].setAttribute("class","disable"),this.link.children[this.link.children.length-2].setAttribute("class","disable"))}},{key:"_prePageNum",value:function(e){var t=[];if(this.currentPage="first"===e?1:"last"===e?this.pageNumberLis.length:"prev"===e?this.currentPage-1:"next"===e?this.currentPage+1:e,this.pageNumberLis.length<=5)for(var r=0;r<this.pageNumberLis.length;r++)t.push(this.pageNumberLis[r]);else if(this.currentPage<=3)for(var n=0;n<5;n++)t.push(this.pageNumberLis[n]);else if(this.currentPage>=this.pageNumberLis.length-3)for(var o=this.pageNumberLis.length-5;o<this.pageNumberLis.length;o++)t.push(this.pageNumberLis[o]);else for(var i=this.currentPage-3;i<=this.currentPage+1;i++)t.push(this.pageNumberLis[i]);t.length>0&&(this.currentPageNumberLis=t)}}])&&jA(r.prototype,n),o&&jA(r,o),t}();n.Components.PaginationContainer=NA;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var IA={getFileType:function(e){return/^.*\.(?:xls|xlsx)$/i.test(e)?vx.EXCEL:/^.*\.(?:csv)$/i.test(e)?vx.CSV:/^.*\.(?:geojson|json)$/i.test(e)?vx.GEOJSON:null}};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.Lang["en-US"]={title_dataFlowService:"Data Flow Service",title_distributedAnalysis:"Distributed Analysis",title_clientComputing:"Client Computing",title_dataServiceQuery:"Data Service Query",title_searchCity:"Search city",title_searchLayer:" Search layer",text_input_value_inputDataFlowUrl:"Please enter the data stream service address such as: ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"Display feature information",text_subscribe:"subscribe",text_cancelSubscribe:"unsubscribe",text_densityAnalysis:"Density Analysis",text_CalculateTheValuePerUnitArea:"Calculate the value per unit area within the neighborhood shape",text_option_selectDataset:"Please select a dataset",text_label_dataset:"Dataset",text_option_simplePointDensityAnalysis:"Simple point density analysis",text_option_nuclearDensityAnalysis:"Nuclear density analysis",text_label_analyticalMethod:"Analytical method",text_option_quadrilateral:"Quadrilateral",text_option_hexagon:"hexagon",text_label_meshType:"Mesh type",text_option_notSet:"Not set",text_label_weightField:"Weight field",text_label_gridSizeInMeters:"Grid size",text_label_searchRadius:"Search radius",text_label_queryRange:"Scope of analysis",text_label_areaUnit:"Area unit",text_option_equidistantSegmentation:"Equidistant segmentation",text_option_logarithm:"Logarithm",text_option_equalCountingSegment:"Equal counting segment",text_option_squareRootSegmentation:"Square root segmentation",text_label_thematicMapSegmentationMode:"Thematic map segmentation mode",text_label_thematicMapSegmentationParameters:"Thematic map segmentation parameters",text_option_greenOrangePurpleGradient:"Green orange purple gradient",text_option_greenOrangeRedGradient:"Green orange red gradient",text_option_rainbowGradient:"Rainbow gradient",text_option_spectralGradient:"Spectral gradient",text_option_terrainGradient:"Terrain gradient",text_label_thematicMapColorGradientMode:"Thematic map color gradient mode",text_label_resultLayerName:"Result layer name",text_chooseFile:"Open File",text_isoline:"Isoline",text_extractDiscreteValue:"Extract discrete value generation curve",text_buffer:"Buffer",text_specifyTheDistance:"Specify the distance to create the surrounding area",text_label_analysisLayer:"Analysis layer",text_label_extractField:"Extract field",text_label_extractedValue:"Extracted value",text_label_distanceAttenuation:"Distance attenuation",text_label_gridSize:"gridSize",text_label_bufferRadius:"Buffer radius",text_label_defaultkilometers:"Default 10 kilometers",text_label_kilometer:"kilometer",text_label_unit:"unit",text_retainOriginal:"Retain original object field",text_mergeBuffer:"Merge buffer",text_label_color:"Color",text_label_buffer:"[Buffer]",text_label_isolines:"[Isolines]",text_label_queryRangeTips:"The default is the full range of input data. Example: -74.050, 40.650, -73.850, 40.850",text_label_queryModel:"Query mode",text_label_IDArrayOfFeatures:"ID array of features",text_label_maxFeatures:"The maximum number of features that can be returned",text_label_bufferDistance:"Buffer distance",text_label_queryRange1:"Query range",text_label_spatialQueryMode:"Spatial query mode",text_label_featureFilter:"Feature filter",text_label_geometricObject:"Geometric object",text_label_queryMode:"Query mode",text_label_searchTips:"Search for city locations or layer features",text_label_chooseSearchLayers:"Select a query layer",text_loadSearchCriteria:"Load search criteria",text_saveSearchCriteria:"Save search criteria",btn_analyze:"Analyze",btn_analyzing:"Analyzing",btn_emptyTheAnalysisLayer:"Empty the analysis layer",btn_cancelAnalysis:"Cancel",btn_query:"Query",btn_querying:"Querying",btn_emptyTheRresultLayer:"Clear all result layers","msg_dataReturnedIsEmpty.":"The request is successful and the data returned by the query is empty.",msg_dataFlowServiceHasBeenSubscribed:"The data stream service has been subscribed to.",msg_inputDataFlowUrlFirst:"Please enter the data stream service address first.",msg_datasetOrMethodUnsupport:"This dataset does not support this analysis type. Please reselect the dataset.",msg_selectDataset:"Please select a data set!",msg_setTheWeightField:"Please set the weight field!",msg_theFieldNotSupportAnalysis:"The field you currently select does not support analysis!",msg_resultIsEmpty:"The result of the analysis is empty!",msg_openFileFail:"Failed to open file!",msg_fileTypeUnsupported:"File format is not supported!",msg_fileSizeExceeded:"File size exceeded! The file size should not exceed 10M!",msg_dataInWrongGeoJSONFormat:"Wrong data format! Non standard GEOJSON format data!",msg_dataInWrongFormat:"Wrong data format! Non standard EXCEL, CSV or GEOJSON format data!",msg_searchKeywords:"Search keywords cannot be empty. Please enter your search criteria.",msg_searchGeocodeField:"Did not match the address matching service data!",msg_cityGeocodeField:"The address matching service of the current city is not configured.",msg_getFeatureField:"No related vector features found!",msg_dataflowservicesubscribed:"The data stream service has been subscribed to.",msg_subscribesucceeded:"The data stream service subscription was successful.",msg_crsunsupport:"Does not support the coordinate system of the current map",msg_tilematrixsetunsupport:"Incoming TileMatrixSet is not supported",msg_jsonResolveFiled:"JSON format parsing failure！",msg_requestContentFiled:"Failed to request data through iportal!",msg_getdatafailed:"Failed to get data!"};n.Lang["zh-CN"]={title_dataFlowService:"数据流服务",title_distributedAnalysis:"分布式分析",title_clientComputing:"客户端计算",title_dataServiceQuery:"数据服务查询",title_searchCity:"搜索城市",title_searchLayer:"搜索图层",text_input_value_inputDataFlowUrl:"请输入数据流服务地址如:ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"显示要素信息",text_subscribe:"订阅",text_cancelSubscribe:"取消订阅",text_densityAnalysis:"密度分析",text_CalculateTheValuePerUnitArea:"计算点指定邻域形状内的每单位面积量值",text_option_selectDataset:"请选择数据集",text_label_dataset:"数据集",text_option_simplePointDensityAnalysis:"简单点密度分析",text_option_nuclearDensityAnalysis:"核密度分析",text_label_analyticalMethod:"分析方法",text_option_quadrilateral:"四边形",text_option_hexagon:"六边形",text_label_meshType:"网格面类型",text_option_notSet:"未设置",text_label_weightField:"权重字段",text_label_gridSizeInMeters:"网格大小",text_label_searchRadius:"搜索半径",text_label_queryRange:"分析范围",text_label_areaUnit:"面积单位",text_option_equidistantSegmentation:"等距离分段",text_option_logarithm:"对数",text_option_equalCountingSegment:"等计数分段",text_option_squareRootSegmentation:"平方根分段",text_label_thematicMapSegmentationMode:"专题图分段模式",text_label_thematicMapSegmentationParameters:"专题图分段参数",text_option_greenOrangePurpleGradient:"绿橙紫渐变",text_option_greenOrangeRedGradient:"绿橙红渐变",text_option_rainbowGradient:"彩虹渐变",text_option_spectralGradient:"光谱渐变",text_option_terrainGradient:"地形渐变",text_label_thematicMapColorGradientMode:"专题图颜色渐变模式",text_label_resultLayerName:"结果图层名称",text_chooseFile:"选择文件",text_isoline:"等值线",text_extractDiscreteValue:"提取离散值生成曲线",text_buffer:"缓冲区",text_specifyTheDistance:"指定距离创建周边区域",text_label_analysisLayer:"分析图层",text_label_extractField:"提取字段",text_label_extractedValue:"提取值",text_label_distanceAttenuation:"距离衰减",text_label_gridSize:"栅格大小",text_label_bufferRadius:"缓冲半径",text_label_defaultkilometers:"默认10千米",text_option_kilometer:"千米",text_label_unit:"单位",text_retainOriginal:"保留原对象字段属性",text_mergeBuffer:"合并缓冲区",text_label_color:"颜色",text_label_buffer:"[缓冲区]",text_label_isolines:"[等值线]",text_label_queryRangeTips:"默认为输入数据的全幅范围。范例：-74.050,40.650,-73.850,40.850",text_label_IDArrayOfFeatures:"要素 ID 数组",text_label_maxFeatures:"最多可返回的要素数量",text_label_bufferDistance:"缓冲区距离",text_label_queryRange1:"查询范围",text_label_spatialQueryMode:"空间查询模式",text_label_featureFilter:"要素过滤器",text_label_geometricObject:"几何对象",text_label_queryMode:"查询模式",text_label_searchTips:"搜索城市地点或图层要素",text_label_chooseSearchLayers:"选择查询图层",text_loadSearchCriteria:"加载搜索条件",text_saveSearchCriteria:"保存搜索条件",btn_analyze:"分析",btn_analyzing:"分析中",btn_emptyTheAnalysisLayer:"清空分析图层",btn_cancelAnalysis:"取消",btn_query:"查询",btn_querying:"查询中",btn_emptyTheRresultLayer:"清除所有结果图层",msg_dataFlowServiceHasBeenSubscribed:"已订阅该数据流服务。",msg_inputDataFlowUrlFirst:"请先输入数据流服务地址。",msg_datasetOrMethodUnsupport:"该数据集不支持本分析类型，请重新选择数据集",msg_selectDataset:"请选择数据集！",msg_setTheWeightField:"请设置权重字段！",msg_theFieldNotSupportAnalysis:"您当前选择的字段不支持分析！",msg_resultIsEmpty:"分析的结果为空！",msg_dataReturnedIsEmpty:"请求成功，查询返回的数据为空。",msg_openFileFail:"打开文件失败！",msg_fileTypeUnsupported:"不支持该文件格式！",msg_fileSizeExceeded:"文件大小超限！文件大小不得超过 10M！",msg_dataInWrongGeoJSONFormat:"数据格式错误！非标准的 GEOJSON 格式数据！",msg_dataInWrongFormat:"数据格式错误！非标准的 EXCEL, CSV 或 GEOJSON 格式数据！",msg_searchKeywords:"搜索关键字不能为空，请输入搜索条件。",msg_searchGeocodeField:"未匹配到地址匹配服务数据！",msg_cityGeocodeField:"未配置当前城市的地址匹配服务。",msg_getFeatureField:"未查找到相关矢量要素！",msg_dataflowservicesubscribed:"已订阅该数据流服务。",msg_subscribesucceeded:"数据流服务订阅成功。",msg_crsunsupport:"不支持当前地图的坐标系",msg_tilematrixsetunsupport:"不支持传入的TileMatrixSet",msg_jsonResolveFiled:"json格式解析失败！",msg_requestContentFiled:"通过iportal请求数据失败！",msg_getdatafailed:"获取数据失败！"};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var DA=r(0),FA=r.n(DA),BA=function(){FA.a.Map.prototype.overlayLayersManager={},FA.a.Map.prototype.addLayerBak=FA.a.Map.prototype.addLayer,FA.a.Map.prototype.addLayer=function(e,t){return e.source||"custom"===e.type||"background"===e.type?(this.addLayerBak(e,t),this):this.overlayLayersManager[e.id]||this.style._layers[e.id]?void this.fire("error",{error:new Error("A layer with this id already exists.")}):(function(e,t){e.onAdd&&e.onAdd(t)}(e,this),this.overlayLayersManager[e.id]=e,this)},FA.a.Map.prototype.getLayer=function(e){return this.overlayLayersManager[e]?this.overlayLayersManager[e]:this.style.getLayer(e)},FA.a.Map.prototype.moveLayer=function(e,t){return this.overlayLayersManager[e]?(function(e,t){var r=document.getElementById(e);if(t){var n=document.getElementById(t);n||FA.a.Evented.prototype.fire("error",{error:new Error('Layer with id "'.concat(t,'" does not exist on this document.'))})}r&&n?n.parentNode.insertBefore(r,n):r.parentNode.appendChild(r)}(e,t),this):this.style._layers[e]?(this.style.moveLayer(e,t),this._update(!0),this):void 0},FA.a.Map.prototype.removeLayer=function(e){return this.overlayLayersManager[e]?((t=this.overlayLayersManager[e]).removeFromMap&&t.removeFromMap(),delete this.overlayLayersManager[e],this):(this.style.removeLayer(e),this._update(!0),this);var t},FA.a.Map.prototype.setLayoutProperty=function(e,t,r){return this.overlayLayersManager[e]?("visibility"===t&&(r="visible"===r,n=this.overlayLayersManager[e],o=r,n.setVisibility&&n.setVisibility(o),this.style.fire("data",{dataType:"style"})),this):(this.style.setLayoutProperty(e,t,r),this._update(!0),this);var n,o},FA.a.Map.prototype.updateTransform=function(e,t,r,n,o,i,a){this.transform.units=e,this.transform.latRange=[this._tileExtent[1],this._tileExtent[3]],this.transform.lngRange=[this._tileExtent[0],this._tileExtent[2]];var s=this.mercatorZfromAltitude;FA.a.MercatorCoordinate.fromLngLat=function(e,n){n=n||0;var o=FA.a.LngLat.convert(e);return new FA.a.MercatorCoordinate((o.lng-t)/i,(r-o.lat)/a,s(n,o.lat))},FA.a.MercatorCoordinate.prototype.toLngLat=function(){return new FA.a.LngLat(this.x*i+t,r-this.y*a)},this.customConvertPoint=window.URL.createObjectURL(new Blob(["customConvertPoint = {projectX:function(x){return (x - "+n+") / "+i+" + 0.5},projectY:function(y){y = 0.5 - ((y - "+o+") / "+a+");return y < 0 ? 0 : y > 1 ? 1 : y;},toY:function(y){return (0.5-y)*"+a+"+"+o+";}}"],{type:"text/javascript"}))}}();function GA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
FA.a.supermap=FA.a.supermap||{};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var UA=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.imageUrl=null,this.link=null,this.width=null,this.height=null,this.alt="SuperMap iClient",this._extend(this,t)}var t,r,n;return t=e,(r=[{key:"onAdd",value:function(e){this._map=e,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl iclient-logo",this._container.style.marginTop=0,this._container.style.marginBottom=0,this._container.style.marginLeft=0,this._container.style.marginRight=0;var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAdCAYAAAAjHtusAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozYWZlOGIwMi01MWE3LTRiZjYtYWVkYS05MGQ2ZTQ4YjZiMmUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODg0NkFBQUE3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODg0NkFBQTk3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MWI3NzdhNC1lZmEyLTQ1MzUtOGQzNi03MmRjNDkyODMzN2UiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjYTYzODVjMi1jNDQ1LTExN2EtYTc0ZC1lM2I5MzJlMGE4Y2QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5q1HM0AAAF/ElEQVR42tSabYhUVRjHZ7W01C1uaCRW4F3oi9SXCUnwQ9gsGUFvOEtQH1bLu5VS9sbYh5KicjYt29qiGQwVg2xWWKgocob91AvC+CWsoJqB3qHMSdTMpZyeU/+Df07n3pk7997Z6cBv99z7nHvOvf/z/pxJNZvNVI/jCKXmv6EquAmVkxPSlvtp2GItr0/96fFQForChJAWDiVYTkMYMu4XBFcYjLOwWS3sNwmn8NGzZ0h4Flv/zwIdchAnh/slCGmmKUNIBzYPaXOUr0vPuEjD71JAPh7l61embzinhV3V8nnCGmGT8LwlzSL8/yUh4Tfjo9T/CgnCIYNKycA2Qq21AcHU/VHE80Idoo3Qs0W6p0UtUnkZvEMDeVcCyqxEafF7hL8Qf0oYsIj+lfC9cH1CwhchWAGCtZO+AooQOkdC1Km1VtCb63StW73uFSzgKFUkNwBbmZGGmqowhvg8ZNpH9oXChcIcYRdeNomgxLkaH+S1SGubAxyIpFv+Zp+0DYjrAS00j/dem2VGEl6FJ4Qa4quEu8j2hTCJ+GJhe4JjfQMf6JCYPPbysMPxBlp0BUKOogEF9Rg9/heNvNKYfM0KsZUZaYxX4STGrzJa+zbhPeFH2DcK10KItcI+pI0rVElwXl1ULaKnIJhDw0oRQpTQc1zcbwRU8ATy4DR6yMlTzwkqMziEWHvubJ4Nk4ZtHdnqwvwY17xq3Z4FjrG+z2Kdrdf2ZSGD+xlLPh6t1R0jP9fI22ZzKI92yvQl7EbmBxI4S7Y+vIAOL87QZqsc5uNnssxZIcfYjXT9snCR7jjobidp+FkxA2v+Cq1QervMDmp4P7Xs3YZtE9kOC3P/By6JGaETl8ElwueYTNTDq4UDsKnd7YfCNbT239LF1udS72xYJt1UWxNfN4IIP4bWuTpEja01JtMFZFsm/AHbtHBlDE6yasA4moYTrUbvdBTXHqUrAH4uSadbyzF+vbBM2IsNkS3MNa5305JxqfA02T4TnkX8XOH1mPw8ruVejpxbI9hZD2Cz1U7LdrrUvjP/WfZinNZhr6V27hP+FPZh9aLvLxVO4DllX0G2OcKnlO/DCblxaz6uXBtmi+8mBaP3/SP8IuEIiTRoPPQm2TaEmEyXo0JU+F0YiPFD0hhOsiE/vqeEVwyTgF8L51OilcIZ2I4Ll5NttvAJPfukUeB2sk0ZPSbKIUUJpCII7+DasWy08uhNNazT0wGHI7mAtB7KqMKm38HhDdAUibTVKGicbB8YAqrJ9DRsp43JdB4qUof1HQrPE6XTQWu3Ce/inVzjXhXpMiTwUYugNVQ+p80jrUsV5EH0POKeuXO9QjhFq5GryNYvfEMCDhsftYVsB9ETtG0V9ZjfhCURhbcJFpfwVZ9jvhxsLHwTYtp2svlWQw3vXL8UnqHVSIG8l8ex+tHhBXgjddgqHEZ8ufAA2aaEnYgrF/KrPXrEmMUqZ9THLW06xhoBaVueQpkug+ewOUphE3Qv2Q5gGamXYa+QbVq4O+DQ5FHyZqrjxNt7UHh9uuRa0F7HjCF8o9PCTOGnscM7g2u1Hl9C9oeEnxC/1ajZg8JLiM9Hj9GHJseMShwL2DO0G5yEWn3Zh1QUods5CPkIoqlwAZxhXMsb6HrcEPBxchhdJ6wj29vCW4hfLOzo8J3rltYX50nXQAATSf/K4DEaGlTLvplsk/QCpoD60EQ7gLYZc8H9wq+I3yncEOEcNhuz6HWf3XEiwU/4Y8YEqVp2P10rt+8REvBGw026i4aDcbL9jF8r8Blmf4fCOzhViiscskygXRdehf3CO4hfigmTBXyQrl8TFtD1IzQX3CbcQrY3hPcRv4z8OmHPXwchVNln2MmE7BX6VwIFi/he6uxvb6JM3m0fdqvx/ATidxg2JeC7VDErAw5NzGfvwRJVheEIQ8Mg/pdwIM+UOmi9Q8ivCsrIy0tF+wVbEcLrd3Pb2XisEb4Tdlhsi4WP4RBbaLGrHfC3PrvMIezy9rTpGm5lz9LOMG15xvFxD/j5gjzjjDbMOzk+9zzt3v5bgAEAibzFeFHVgYkAAAAASUVORK5CYII=";this.imageUrl&&(t=this.imageUrl);var r=this.alt,n="94px",o="29px",i="width:"+n+";height:"+o+";";this.imageUrl&&(i="width:"+(n=this.width)+";height:"+(o=this.height)+";",n&&o||(i=""));var a=this.link||"https://iclient.supermap.io";return this._container.innerHTML="<a href='"+a+"' target='_blank'><img src="+t+" alt='"+r+"' style='"+i+"margin-bottom: 2px'></a>",this._createStyleSheet(),this._container}},{key:"_createStyleSheet",value:function(){var e=document.createElement("style");e.type="text/css",e.innerHTML=".iclient-logo{margin:0 !important;}.iclient-logo a{border: none;display: block;height:31px;}.iclient-logo img{border: none;white-space: nowrap}",document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_extend",value:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var r=Object.getOwnPropertyNames(arguments)[t];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(e[i]=n[i])}}}return e}}])&&GA(t.prototype,r),n&&GA(t,n),e}();function HA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}FA.a.supermap.LogoControl=UA;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var JA=function(){function e(){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"toSuperMapGeometry",value:function(e){if(e&&e.type)return(new Lr).read(e,"FeatureCollection")[0].geometry}},{key:"toSuperMapBounds",value:function(e){return this.isArray(e)?new _e(e[0],e[1],e[2],e[3]):new _e(e.getWest(),e.getSouth(),e.getEast(),e.getNorth())}},{key:"toSuperMapPoint",value:function(e){return this.isArray(e)?new Xe(e[0],e[1]):e.lng&&e.lat?new Xe(e.lng,e.lat):new Xe(e.geometry.coordinates[0],e.geometry.coordinates[1])}},{key:"toSuperMapPolygon",value:function(e){var t=e.getWest(),r=e.getEast(),n=e.getSouth(),o=e.getNorth();return new Lt([new mt([new Xe(t,n),new Xe(r,n),new Xe(r,o),new Xe(t,o)])])}},{key:"isArray",value:function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{key:"toGeoJSON",value:function(e){if(e)return(new Lr).toGeoJSON(e)}},{key:"toProcessingParam",value:function(e){var t={};if(e.length<1)t="";else{for(var r=[],n=0;n<e.length;n++){var o={};o.x=e[n][0],o.y=e[n][1],r.push(o)}t.type="REGION",t.points=r}return t}},{key:"extend",value:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var r=Object.getOwnPropertyNames(arguments)[t];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(e[i]=n[i])}}}return e}},{key:"isNumber",value:function(e){if(""===e)return!1;var t=Number(e);return 0===t||!isNaN(t)}},{key:"isString",value:function(e){return"string"==typeof e&&e.constructor===String}},{key:"newGuid",value:function(e){for(var t=e||32,r="",n=1;n<t;n++){r+=Math.floor(16*Math.random()).toString(16)}return r}},{key:"hexToRgba",value:function(e,t){var r=[],n=[];if(3==(e=e.replace(/#/,"")).length){for(var o=[],i=0;i<3;i++)o.push(e.charAt(i)+e.charAt(i));e=o.join("")}for(var a=0;a<6;a+=2)r[a]="0x"+e.substr(a,2),n.push(parseInt(Number(r[a])));return n.push(t),"rgba("+n.join(",")+")"}},{key:"isMatchAdministrativeName",value:function(e,t){if(this.isString(t)){var r=e.substr(0,2);return"张家"===r&&(r=e.substr(0,3)),!!t.match(new RegExp(r))}return!1}}],(r=null)&&HA(t.prototype,r),n&&HA(t,n),e}();function WA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}FA.a.supermap.Util=JA;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var VA=function(){function e(t,r){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.geometry=t,this.attributes=r}var t,r,n;return t=e,(r=[{key:"toFeature",value:function(){var e=JA.toSuperMapGeometry(this.geometry),t=[];return this.geometry instanceof FA.a.LngLat?t=[this.geometry.lng,this.geometry.lat]:this.geometry instanceof FA.a.Point?t=[this.geometry.x,this.geometry.y]:3===this.geometry.length&&(e=new ct(this.geometry[0],this.geometry[1],this.geometry[2])),t.length>1&&(e=new Xe(t[0],t[1])),new er(e,this.attributes)}}])&&WA(t.prototype,r),n&&WA(t,n),e}();function zA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}FA.a.supermap.ThemeFeature=VA;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var qA=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=r||{};this.name=t,this.id=n.id?n.id:ge.createUniqueID("themeLayer_"),this.opacity=n.opacity?n.opacity:1,this.visibility=!0,this.loadWhileAnimating=void 0===n.loadWhileAnimating||n.loadWhileAnimating,this.map=n.map?n.map:null,this.features=[],this.TFEvents=[],this.map&&this.map.addLayer(this)}var t,r,n;return t=e,(r=[{key:"onAdd",value:function(e){this.map=e,this._createCanvasContainer(),this.addTFEvents(),this.map.on("resize",this.resizeEvent.bind(this)),this.map.on("zoomstart",this.zoomStartEvent.bind(this)),this.map.on("zoomend",this.zoomEndEvent.bind(this)),this.map.on("rotatestart",this.rotateStartEvent.bind(this)),this.map.on("rotate",this.rotateEvent.bind(this)),this.map.on("rotateend",this.rotateEndEvent.bind(this)),this.map.on("dragend",this.dragEndEvent.bind(this)),this.map.on("movestart",this.moveStartEvent.bind(this)),this.map.on("move",this.moveEvent.bind(this)),this.map.on("moveend",this.moveEndEvent.bind(this)),this.map.on("remove",this.removeFromMap.bind(this)),this.refresh()}},{key:"refresh",value:function(){0!==this.features.length&&this.map&&this.redrawThematicFeatures(this.map.getBounds())}},{key:"_createCanvasContainer",value:function(){this.movingOffset=[0,0],this.mapContainer=this.map.getCanvasContainer(),this.div=document.createElement("div"),this.div.id=this.id,this.div.style.position="absolute";var e=this.map.getCanvasContainer(),t=this.map.getCanvas();this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px",this.div.style.width=t.style.width,this.div.style.height=t.style.height,this.div.className="themeLayer",this.div.width=parseInt(t.width),this.div.height=parseInt(t.height),e.appendChild(this.div),this.setOpacity(this.opacity),this.levelRenderer=new dx,this.renderer=this.levelRenderer.init(this.div),this.renderer.clear()}},{key:"destroyFeatures",value:function(e){if(void 0==e&&(e=this.features),e){this.removeFeatures(e);for(var t=e.length-1;t>=0;t--)e[t].destroy()}}},{key:"setVisibility",value:function(e){e!==this.visibility&&(this.visibility=e,this.display(e),this.redrawThematicFeatures(this.map.getBounds()))}},{key:"display",value:function(e){this.div.style.display=e?"block":"none"}},{key:"setOpacity",value:function(e){if(e!==this.opacity){this.opacity=e;var t=this.div;ge.modifyDOMElement(t,null,null,null,null,null,null,e),null!==this.map&&FA.a.Evented.prototype.fire("changelayer",{layer:this,property:"opacity"})}}},{key:"addFeatures",value:function(e){}},{key:"removeFeatures",value:function(e){if(e&&0!==e.length){if(e===this.features)return this.removeAllFeatures();ge.isArray(e)||(e=[e]);for(var t=[],r=e.length-1;r>=0;r--){var n=e[r],o=ge.indexOf(this.features,n);-1!==o?this.features.splice(o,1):t.push(n)}for(var i=[],a=0,s=this.features.length;a<s;a++)n=this.features[a],i.push(n);this.features=[],this.addFeatures(i),this.renderer&&this.redrawThematicFeatures(this.map.getBounds());var l=0==t.length;FA.a.Evented.prototype.fire("featuresremoved",{features:t,succeed:l})}}},{key:"removeAllFeatures",value:function(){this.renderer&&this.renderer.clear(),this.features=[],FA.a.Evented.prototype.fire("featuresremoved",{features:[],succeed:!0})}},{key:"getFeatures",value:function(){for(var e=this.features.length,t=new Array(e),r=0;r<e;++r)t[r]=this.features[r];return t}},{key:"getFeatureBy",value:function(e,t){var r=null;for(var n in this.features)if(this.features[n][e]===t){r=this.features[n];break}return r}},{key:"getFeatureById",value:function(e){return this.getFeatureBy("id",e)}},{key:"getFeaturesByAttribute",value:function(e,t){var r,n=[];for(var o in this.features)(r=this.features[o])&&r.attributes&&r.attributes[e]===t&&n.push(r);return n}},{key:"redrawThematicFeatures",value:function(e){}},{key:"on",value:function(e,t,r){return this.renderer?this.renderer.on(e,t):this.map.on(e,t),this}},{key:"off",value:function(e,t,r){return this.renderer?this.renderer.off(e,t):this.map.off(e,t),this}},{key:"addTFEvents",value:function(){for(var e=this.TFEvents,t=e.length,r=0;r<t;r++)this.renderer.on(e[r][0],e[r][1])}},{key:"getLocalXY",value:function(e){var t,r=this.map;if(e instanceof Xe||e instanceof ct){var n=r.project(new FA.a.LngLat(e.x,e.y));t=[n.x,n.y]}if(e instanceof we){var o=r.project(new FA.a.LngLat(e.lon,e.lat));t=[o.x,o.y]}return t}},{key:"toiClientFeature",value:function(e){ge.isArray(e)||(e=[e]);for(var t=[],r=0;r<e.length;r++)if(e[r]instanceof VA)t.push(e[r].toFeature());else if(e[r]instanceof er)t.push(e[r]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e[r].type)){var n=new Lr;t=t.concat(n.read(e[r]))}else{if(!e[r].geometry||!e[r].geometry.parts)throw new Error("features's type is not be supported.");t.push(ag.fromJson(e[r]).toFeature())}return t}},{key:"toFeature",value:function(e){return this.toiClientFeature(e)}},{key:"moveEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.div.style.transform="",this.redrawThematicFeatures(this.map.getBounds()),this._show())}},{key:"moveStartEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){this.startPitch=this.map.getPitch(),this.startBearing=this.map.getBearing();var e=this.map.project(new FA.a.LngLat(0,0));this.startMoveX=e.x,this.startMoveY=e.y}}},{key:"moveEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){if(!this.rotating&&!this.zooming){0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing,r=this.map.project(new FA.a.LngLat(0,0)),n=r.x-this.startMoveX,o=r.y-this.startMoveY;this.div.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg) translate3d("+n+"px, "+o+"px, 0px)"}}else this.redrawThematicFeatures(this.map.getBounds())}},{key:"zoomStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!0,this._hide())}},{key:"zoomEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!1,this._show())}},{key:"rotateStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!0)}},{key:"rotateEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing;this.div.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg)"}}},{key:"rotateEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!1,this._show())}},{key:"dragEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&this._hide()}},{key:"resizeEvent",value:function(){this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getCanvas();this.div.style.width=e.style.width,this.div.style.height=e.style.height,this.div.width=parseInt(e.width),this.div.height=parseInt(e.height),this.renderer.resize()}},{key:"removeFromMap",value:function(){this.mapContainer.removeChild(this.div),this.removeAllFeatures()}},{key:"moveTo",value:function(e,t){var r=document.getElementById(this.div.id);if(t=void 0===t||t){var n=document.getElementById(e);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(e);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"_hide",value:function(){this.renderer.painter.root.style.display="none"}},{key:"_show",value:function(){this.renderer.painter.root.style.display="block"}}])&&zA(t.prototype,r),n&&zA(t,n),e}();function YA(e){return(YA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function XA(e,t){return!t||"object"!==YA(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function KA(e,t,r){return(KA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ZA(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ZA(e){return(ZA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $A(e,t){return($A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.ThemeLayer=qA;var ej=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=XA(this,ZA(t).call(this,e,n))).chartsSetting=n.chartsSetting||{},o.themeFields=n.themeFields||null,o.overlayWeightField=n.overlayWeightField||null,o.isOverLay=void 0===n.isOverLay||n.isOverLay,o.charts=n.charts||[],o.cache=n.cache||{},o.chartsType=r,o}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$A(e,t)}(t,qA),r=t,(n=[{key:"setChartsType",value:function(e){this.chartsType=e,this.redraw()}},{key:"addFeatures",value:function(e){!1!==FA.a.Evented.prototype.fire("beforefeaturesadded",{features:e})&&(this.features=this.toiClientFeature(e),this.renderer&&this.redrawThematicFeatures(this.map.getBounds()))}},{key:"redrawThematicFeatures",value:function(e){this.clearCache(),this.renderer.clearAll();for(var t=this.features,r=0,n=t.length;r<n;r++){var o=t[r],i=this.cache,a=o.id;if(!i[a]){i[a]=a;var s=this.createThematicFeature(o);s&&this.overlayWeightField&&o.attributes[this.overlayWeightField]&&!isNaN(o.attributes[this.overlayWeightField])&&(s.__overlayWeight=o.attributes[this.overlayWeightField]),s&&this.charts.push(s)}}this.drawCharts()}},{key:"createThematicFeature",value:function(e){var t;return fT[this.chartsType]&&this.themeFields&&this.chartsSetting&&(t=new fT[this.chartsType](e,this,this.themeFields,this.chartsSetting)),!!t&&(t.assembleShapes(),t)}},{key:"drawCharts",value:function(){if(this.renderer){var e=this.charts;if(this.overlayWeightField&&e.sort(function(e,t){return void 0===e.__overlayWeight&&void 0===t.__overlayWeight?0:void 0!==e.__overlayWeight&&void 0===t.__overlayWeight?-1:void 0===e.__overlayWeight&&void 0!==t.__overlayWeight?1:void 0!==e.__overlayWeight&&void 0!==t.__overlayWeight?parseFloat(e.__overlayWeight)<parseFloat(t.__overlayWeight)?1:-1:0}),this.isOverLay)for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r],i=o.resetLocation(),a=o.chartBounds,s=[{x:a.left,y:a.top},{x:a.left,y:a.bottom},{x:a.right,y:a.bottom},{x:a.right,y:a.top},{x:a.left,y:a.top}],l=!1;if(0!==r)for(var u=0;u<t.length;u++)if(this.isQuadrilateralOverLap(s,t[u])){l=!0;break}if(!l){t.push(s);for(var c=o.shapes,f=0,p=c.length;f<p;f++)c[f].refOriginalPosition=i,this.renderer.addShape(c[f])}}else for(var h=0,y=e.length;h<y;h++)for(var d=e[h],v=d.resetLocation(),m=d.shapes,b=0,g=m.length;b<g;b++)m[b].refOriginalPosition=v,this.renderer.addShape(m[b]);this.renderer.render()}}},{key:"getShapesByFeatureID",value:function(e){var t=[],r=this.renderer.getAllShapes();if(!e)return r;for(var n=0,o=r.length;n<o;n++){var i=r[n];i.refDataID&&e===i.refDataID&&t.push(i)}return t}},{key:"isQuadrilateralOverLap",value:function(e,t){var r=e.length,n=t.length;if(5!==r||5!==n)return null;for(var o=!1,i=0;i<r;i++)if(this.isPointInPoly(e[i],t)){o=!0;break}for(var a=0;a<n;a++)if(this.isPointInPoly(t[a],e)){o=!0;break}for(var s=0;s<r-1&&!o;s++)for(var l=0;l<n-1;l++){if("SuperMap.Geometry.Point"===ge.lineIntersection(e[s],e[s+1],t[l],t[l+1]).CLASS_NAME){o=!0;break}}return o}},{key:"isPointInPoly",value:function(e,t){for(var r=!1,n=-1,o=t.length,i=o-1;++n<o;i=n)(t[n].y<=e.y&&e.y<t[i].y||t[i].y<=e.y&&e.y<t[n].y)&&e.x<(t[i].x-t[n].x)*(e.y-t[n].y)/(t[i].y-t[n].y)+t[n].x&&(r=!r);return r}},{key:"isChartInMap",value:function(e,t){for(var r=e,n=!1,o=0,i=t.length;o<i;o++){var a=t[o];if(a.x>=r.left&&a.x<=r.right&&a.y>=r.top&&a.y<=r.bottom){n=!0;break}}return n}},{key:"clearCache",value:function(){this.cache={},this.charts=[]}},{key:"removeFeatures",value:function(e){this.clearCache(),KA(ZA(t.prototype),"removeFeatures",this).call(this,e)}},{key:"removeAllFeatures",value:function(){this.clearCache(),KA(ZA(t.prototype),"removeAllFeatures",this).call(this)}},{key:"redraw",value:function(){return this.clearCache(),!!this.renderer&&(this.redrawThematicFeatures(this.map.getBounds()),!0)}},{key:"clear",value:function(){this.renderer&&(this.renderer.clearAll(),this.renderer.refresh()),this.removeAllFeatures(),this.clearCache()}}])&&QA(r.prototype,n),o&&QA(r,o),t}();function tj(e){return(tj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nj(e){return(nj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ij(e,t){return(ij=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.GraphThemeLayer=ej;var aj=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=nj(t).call(this,e,r))||"object"!==tj(i)&&"function"!=typeof i?oj(o):i).name=null,n.style=null,n.highlightStyle=null,n.nodesClipPixel=2,n.isHoverAble=!1,n.isMultiHover=!1,n.isClickAble=!0,n.isAllowFeatureStyle=!1,ge.extend(oj(n),r),n.cache=r.cache||{},n.cacheFields=r.cacheFields||[],n.maxCacheCount=r.maxCacheCount||0,n.isCustomSetMaxCacheCount=void 0!==r.isCustomSetMaxCacheCount&&r.isCustomSetMaxCacheCount,n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ij(e,t)}(t,qA),r=t,(n=[{key:"addFeatures",value:function(e){FA.a.Evented.prototype.fire("beforefeaturesadded",{features:e}),this.features=this.toiClientFeature(e),this.isCustomSetMaxCacheCount||(this.maxCacheCount=5*this.features.length),this.renderer&&this.redrawThematicFeatures(this.map.getBounds())}},{key:"removeFeatures",value:function(e){this.clearCache(),qA.prototype.removeFeatures.apply(this,arguments)}},{key:"removeAllFeatures",value:function(){this.clearCache(),qA.prototype.removeAllFeatures.apply(this,arguments)}},{key:"redrawThematicFeatures",value:function(e){this.clearCache();var t=this.renderer.getHoverOne(),r=null;t&&t.refDataID&&(r=t.refDataID),this.renderer.clearAll();for(var n=this.features,o=this.cache,i=this.cacheFields,a=this.map.getZoom(),s=this.maxCacheCount,l=0,u=n.length;l<u;l++){var c,f=n[l].id+"_zoom_"+a.toString();if(o[f])o[f].updateAndAddShapes();else{if((c=this.createThematicFeature(n[l])).getShapesCount()<1)continue;if(o[f]=c,i.push(f),i.length>s){var p=i[0];i.splice(0,1),delete o[p]}}}if(this.renderer.render(),r&&this.isHoverAble&&this.isMultiHover){var h=this.getShapesByFeatureID(r);this.renderer.updateHoverShapes(h)}}},{key:"createThematicFeature",value:function(e){var t=ge.copyAttributesWithClip(this.style);e.style&&!0===this.isAllowFeatureStyle&&(t=ge.copyAttributesWithClip(e.style));var r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=uT.transformStyle(this.highlightStyle);for(var n=new kk(e,this,uT.transformStyle(t),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"clearCache",value:function(){this.cache={},this.cacheFields=[]}},{key:"clear",value:function(){this.renderer.clearAll(),this.renderer.refresh(),this.removeAllFeatures(),this.clearCache()}},{key:"getCacheCount",value:function(){return this.cacheFields.length}},{key:"setMaxCacheCount",value:function(e){isNaN(e)||(this.maxCacheCount=e,this.isCustomSetMaxCacheCount=!0)}},{key:"getShapesByFeatureID",value:function(e){var t=[],r=this.renderer.getAllShapes();if(!e)return r;for(var n=0,o=r.length;n<o;n++){var i=r[n];i.refDataID&&e===i.refDataID&&t.push(i)}return t}}])&&rj(r.prototype,n),o&&rj(r,o),t}();function sj(e){return(sj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function uj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cj(e,t,r){return(cj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fj(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function fj(e){return(fj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pj(e,t){return(pj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.GeoFeatureThemeLayer=aj;var hj=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=fj(t).call(this,e,r))||"object"!==sj(i)&&"function"!=typeof i?uj(o):i).isOverLay=!0,n.isAvoid=!0,n.themeField=null,n.styleGroups=null,ge.extend(uj(n),r),n.defaultStyle={fontColor:"#000000",fontOpacity:1,fontSize:"12px",fontStyle:"normal",fontWeight:"normal",labelAlign:"cm",labelXOffset:0,labelYOffset:0,labelRotation:0,fill:!1,fillColor:"#ee9900",fillOpacity:.4,stroke:!1,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",labelRect:!0,labelSelect:!0,_isGeoTextStrategyStyle:!0},n.getPxBoundsMode=0,n.labelFeatures=[],n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pj(e,t)}(t,aj),r=t,(n=[{key:"redrawThematicFeatures",value:function(e){if(this.features.length>0&&0==this.labelFeatures.length)for(var r=this.setLabelsStyle(this.features),n=0,o=r.length;n<o;n++)this.labelFeatures.push(r[n]);this.features=this.getDrawnLabels(this.labelFeatures),cj(fj(t.prototype),"redrawThematicFeatures",this).call(this,e)}},{key:"removeFeatures",value:function(e){this.labelFeatures=[],cj(fj(t.prototype),"removeFeatures",this).call(this,arguments)}},{key:"removeAllFeatures",value:function(){this.labelFeatures=[],cj(fj(t.prototype),"removeAllFeatures",this).call(this,arguments)}},{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=uT.transformStyle(this.highlightStyle);for(var n=new kk(e,this,uT.transformStyle(t),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"getDrawnLabels",value:function(e){for(var t,r,n,o,i=[],a=[],s={labelAlign:"cm",labelXOffset:0,labelYOffset:0},l=this.map,u=l.getZoom(),c=l.getCanvas(),f={x:parseFloat(c.style.width),y:parseFloat(c.style.height)},p=0,h=e.length;p<h;p++){((r=e[p]).isStyleChange||void 0===r.isStyleChange)&&(r=this.setStyle(r));var y=this.getLabelPxLocation(r);if(y.x>=0&&y.x<=f.x&&y.y>=0&&y.y<=f.y){if(r.style.minZoomLevel>-1&&u<=r.style.minZoomLevel)continue;if(r.style.maxZoomLevel>-1&&u>r.style.maxZoomLevel)continue;var d=null;r.isStyleChange?(r.isStyleChange=null,d=this.calculateLabelBounds(r,y)):d=r.geometry.bsInfo.w&&r.geometry.bsInfo.h?this.calculateLabelBounds2(r,y):this.calculateLabelBounds(r,y);var v=new _e(0,f.y,f.x,0),m=d.length;if(this.isAvoid){var b=this.getAvoidInfo(v,d);if(b){if("left"===b.aspectW){r.style.labelXOffset+=b.offsetX;for(var g=0;g<m;g++)d[g].x+=b.offsetX}else if("right"===b.aspectW){r.style.labelXOffset+=-b.offsetX;for(var S=0;S<m;S++)d[S].x+=-b.offsetX}if("top"===b.aspectH){r.style.labelYOffset+=b.offsetY;for(var w=0;w<m;w++)d[w].y+=b.offsetY}else if("bottom"===b.aspectH){r.style.labelYOffset+=-b.offsetY;for(var O=0;O<m;O++)d[O].y+=-b.offsetY}r.isStyleChange=!0}}if(this.isOverLay){var _=!1;if(0!=p)for(var P=0;P<a.length;P++)if(this.isQuadrilateralOverLap(d,a[P])){_=!0;break}if(_)continue;a.push(d)}for(var C=[],E=0;E<m-1;E++)C.push(l.unproject(d[E]));var T=C[3],k=C[1],x=new _e(T.lng,T.lat,k.lng,k.lat).getCenterLonLat(),A=new ct(x.lon,x.lat,r.attributes[this.themeField]);A.calculateBounds(),n=ge.cloneObject(r.style),o=ge.cloneObject(ge.copyAttributes(n,s)),(t=new er(A,r.attributes,o)).id=r.id,t.fid=r.fid,i.push(t)}}return i}},{key:"getStyleByData",value:function(e){var t=e;if(t.style=ge.copyAttributes(t.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),t.style=ge.copyAttributes(t.style,this.style),this.themeField&&this.styleGroups&&t.attributes){var r=this.themeField,n=t.attributes,o=this.styleGroups,i=!1,a=null;for(var s in n)if(r===s){i=!0,a=n[s];break}if(i)for(var l=0,u=o.length;l<u;l++)if(a>=o[l].start&&a<o[l].end){var c=o[l].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),t.style=ge.copyAttributes(t.style,c)}t.style.label=t.attributes[this.themeField]}return t.style}},{key:"setLabelsStyle",value:function(e){for(var t,r=[],n=0,o=e.length;n<o;n++){var i=e[n];if("SuperMap.Geometry.GeoText"!==i.geometry.CLASS_NAME)return e;(i.geometry.bsInfo.w||i.geometry.bsInfo.h)&&(i.geometry.bsInfo.w=null,i.geometry.bsInfo.h=null,i.geometry.labelWTmp=null),(t=this.setStyle(i)).layer=this.layer,r.push(t)}return r}},{key:"setStyle",value:function(e){var t=e;if(t.style=ge.copyAttributes(t.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),t.style=ge.copyAttributes(t.style,this.style),this.groupField&&this.styleGroups&&t.attributes){var r=this.groupField,n=t.attributes,o=this.styleGroups,i=!1,a=null;for(var s in n)if(r===s){i=!0,a=n[s];break}if(i)for(var l=0,u=o.length;l<u;l++)if(a>=o[l].start&&a<o[l].end){var c=o[l].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),t.style=ge.copyAttributes(t.style,c)}}return t.style.label=t.geometry.text,t}},{key:"getLabelPxLocation",value:function(e){var t=e.geometry,r=e.style,n=t.getCentroid(),o=this.map.project(new FA.a.LngLat(n.x,n.y)),i=new FA.a.Point(o.x,o.y);if(r.labelXOffset||r.labelYOffset){var a=isNaN(r.labelXOffset)?0:r.labelXOffset,s=isNaN(r.labelYOffset)?0:r.labelYOffset,l=i.add(new FA.a.Point(a,-s));return new FA.a.Point(l.x,l.y)}return new FA.a.Point(i.x,i.y)}},{key:"calculateLabelBounds",value:function(e,t){var r=e.geometry,n=null,o=null;if(0==this.getPxBoundsMode)n=r.getLabelPxBoundsByText(t,e.style);else{if(1!==this.getPxBoundsMode)return null;o=this.getLabelInfo(e.geometry.getCentroid(),e.style),n=r.getLabelPxBoundsByLabel(t,o.w,o.h,e.style)}var i=[];return i=e.style.labelRotation%180==0?[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.right,y:n.bottom},{x:n.left,y:n.bottom},{x:n.left,y:n.top}]:this.rotationBounds(n,t,e.style.labelRotation),r.bounds=new _e(i[1].x,i[3].y,i[2].x,i[4].y),i}},{key:"calculateLabelBounds2",value:function(e,t){var r,n,o,i,a,s=e.geometry.bsInfo,l=e.style,u=ge.cloneObject(t);if(l.labelAlign&&"cm"!==l.labelAlign)switch(l.labelAlign){case"lt":u.x+=s.w/2,u.y+=s.h/2;break;case"lm":u.x+=s.w/2;break;case"lb":u.x+=s.w/2,u.y-=s.h/2;break;case"ct":u.y+=s.h/2;break;case"cb":u.y-=s.h/2;break;case"rt":u.x-=s.w/2,u.y+=s.h/2;break;case"rm":u.x-=s.w/2;break;case"rb":u.x-=s.w/2,u.y-=s.h/2}n=u.x-s.w/2,o=u.y+s.h/2,a=l.fontStyle&&"italic"===l.fontStyle?u.x+s.w/2+parseInt(parseFloat(l.fontSize)/2):u.x+s.w/2,i=u.y-s.h/2,r=new _e(n,o,a,i);var c=[];return c=l.labelRotation%180==0?[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.right,y:r.bottom},{x:r.left,y:r.bottom},{x:r.left,y:r.top}]:this.rotationBounds(r,t,l.labelRotation),e.geometry.bounds=new _e(c[1].x,c[3].y,c[2].x,c[4].y),c}},{key:"getLabelInfo",value:function(e,t){var r={l:"left",r:"right",t:"top",b:"bottom"},n={l:0,r:-1,t:0,b:-1};t=ge.extend({fontColor:"#000000",labelAlign:"cm"},t);var o=this.getLocalXY(e),i=0;if(t.labelXOffset||t.labelYOffset){var a=isNaN(t.labelXOffset)?0:t.labelXOffset,s=isNaN(t.labelYOffset)?0:t.labelYOffset;o[0]+=a,o[1]-=s}var l=document.createElement("canvas");l.globalAlpha=0,l.lineWidth=1;var u=l.getContext("2d");u.fillStyle=t.fontColor,u.globalAlpha=t.fontOpacity||1;var c,f,p,h=[t.fontStyle?t.fontStyle:"normal","normal",t.fontWeight?t.fontWeight:"normal",t.fontSize?t.fontSize:"1em",t.fontFamily?t.fontFamily:"sans-serif"].join(" "),y=t.label.split("\n"),d=y.length;if(u.fillText){u.font=h,u.textAlign=r[t.labelAlign[0]]||"center",u.textBaseline=r[t.labelAlign[1]]||"middle",null==(c=n[t.labelAlign[1]])&&(c=-.5),f=u.measureText("Mg").height||u.measureText("xx").width,o[1]+=f*c*(d-1);for(var v=0;v<d;v++)i<(p=u.measureText(y[v]).width)&&(i=p)}else if(u.mozDrawText){u.mozTextStyle=h,null==(c=n[t.labelAlign[1]])&&(c=-.5),f=u.mozMeasureText("xx"),o[1]+=f*(1+c*d);for(var m=0;m<d;m++)i<(p=u.measureText(y[m]).width)&&(i=p)}var b={};return i?(b.w=i,b.h=t.fontSize,b.rows=y.length,b):null}},{key:"rotationBounds",value:function(e,t,r){var n=new FA.a.Point(e.left,e.top),o=new FA.a.Point(e.right,e.top),i=new FA.a.Point(e.right,e.bottom),a=new FA.a.Point(e.left,e.bottom),s=[];s.push(this.getRotatedLocation(n.x,n.y,t.x,t.y,r)),s.push(this.getRotatedLocation(o.x,o.y,t.x,t.y,r)),s.push(this.getRotatedLocation(i.x,i.y,t.x,t.y,r)),s.push(this.getRotatedLocation(a.x,a.y,t.x,t.y,r));for(var l=[],u=0;u<s.length;u++)l.push({x:s[u].x,y:s[u].y});return l.push({x:s[0].x,y:s[0].y}),l}},{key:"getRotatedLocation",value:function(e,t,r,n,o){var i,a,s={};return t=-t,n=-n,o=-o,i=(e-r)*Math.cos(o/180*Math.PI)-(t-n)*Math.sin(o/180*Math.PI)+r,a=(e-r)*Math.sin(o/180*Math.PI)+(t-n)*Math.cos(o/180*Math.PI)+n,s.x=i,s.y=-a,s}},{key:"getAvoidInfo",value:function(e,t){if(5!==t.length)return null;for(var r=[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.right,y:e.bottom},{x:e.left,y:e.bottom},{x:e.left,y:e.top}],n=!1,o=r.length,i=t.length,a=0,s=0,l="",u="",c=0;c<o-1;c++)for(var f=0;f<i-1;f++){"SuperMap.Geometry.Point"===ge.lineIntersection(r[c],r[c+1],t[f],t[f+1]).CLASS_NAME&&(p(t[f]),p(t[f+1]),n=!0)}return n?{aspectW:u,aspectH:l,offsetX:a,offsetY:s}:null;function p(t){if(!e.contains(t.x,t.y)){if(t.y<e.top){var r=Math.abs(e.top-t.y);r>s&&(s=r,l="top")}if(t.y>e.bottom){var n=Math.abs(t.y-e.bottom);n>s&&(s=n,l="bottom")}if(t.x<e.left){var o=Math.abs(e.left-t.x);o>a&&(a=o,u="left")}if(t.x>e.right){var i=Math.abs(t.x-e.right);i>a&&(a=i,u="right")}}}}},{key:"isQuadrilateralOverLap",value:function(e,t){var r=e.length,n=t.length;if(5!==r||5!==n)return null;for(var o=!1,i=0;i<r;i++)if(this.isPointInPoly(e[i],t)){o=!0;break}for(var a=0;a<n;a++)if(this.isPointInPoly(t[a],e)){o=!0;break}for(var s=0;s<r-1&&!o;s++)for(var l=0;l<n-1;l++){if("SuperMap.Geometry.Point"===ge.lineIntersection(e[s],e[s+1],t[l],t[l+1]).CLASS_NAME){o=!0;break}}return o}},{key:"isPointInPoly",value:function(e,t){for(var r=!1,n=-1,o=t.length,i=o-1;++n<o;i=n)(t[n].y<=e.y&&e.y<t[i].y||t[i].y<=e.y&&e.y<t[n].y)&&e.x<(t[i].x-t[n].x)*(e.y-t[n].y)/(t[i].y-t[n].y)+t[n].x&&(r=!r);return r}}])&&lj(r.prototype,n),o&&lj(r,o),t}();FA.a.supermap.LabelThemeLayer=hj;var yj=r(2);function dj(e){return(dj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mj(e,t){return!t||"object"!==dj(t)&&"function"!=typeof t?bj(e):t}function bj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gj(e,t,r){return(gj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sj(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function Sj(e){return(Sj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wj(e,t){return(wj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Oj=yj.baiduMapLayer?yj.baiduMapLayer.__proto__:Function,_j=function(e){function t(e,r,n,o){var i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=mj(this,Sj(t).call(this,e,n,o)),!Oj)return mj(i);i.map=e;var a=bj(i);return o=o||{},a.init(o),a.argCheck(o),i.canvasLayer=r,i.stopAniamation=!1,i.animation=o.animation,i.clickEvent=i.clickEvent.bind(bj(i)),i.mousemoveEvent=i.mousemoveEvent.bind(bj(i)),i.bindMapEvent(),i.bindEvent(),i._expectShow=!0,i}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wj(e,t)}(t,Oj),r=t,(n=[{key:"clickEvent",value:function(e){var r=e.point;gj(Sj(t.prototype),"clickEvent",this).call(this,r,e)}},{key:"mousemoveEvent",value:function(e){var r=e.point;gj(Sj(t.prototype),"mousemoveEvent",this).call(this,r,e)}},{key:"bindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.on("click",this.clickEvent),this.options.methods.mousemove&&e.on("mousemove",this.mousemoveEvent))}},{key:"unbindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.off("click",this.clickEvent),this.options.methods.mousemove&&e.off("mousemove",this.mousemoveEvent))}},{key:"getContext",value:function(){return this.canvasLayer.canvas.getContext(this.context)}},{key:"addData",value:function(e,t){var r=e;e&&e.get&&(r=e.get()),this.dataSet.add(r),this.update({options:t})}},{key:"update",value:function(e){var r=e||{},n=r.data;n&&n.get&&(n=n.get()),void 0!=n&&this.dataSet.set(n),gj(Sj(t.prototype),"update",this).call(this,{options:r.options})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(e){if(this.dataSet){var t=this.dataSet.get({filter:function(t){return null==e||"function"!=typeof e||!e(t)}});this.dataSet.set(t),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"updateData",value:function(e,t){e&&e.get&&this.dataSet.set(e.get()),this.update({options:t})}},{key:"_canvasUpdate",value:function(e){var t=this.map;if(this.canvasLayer&&!this.stopAniamation){var r=this,n=r.options.animation,o=this.getContext();if(r.isEnabledTime()){if(void 0===e)return void this.clear(o);"2d"===this.context&&(o.save(),o.globalCompositeOperation="destination-out",o.fillStyle="rgba(0, 0, 0, .1)",o.fillRect(0,0,o.canvas.width,o.canvas.height),o.restore())}else this.clear(o);if("2d"===this.context)for(var i in r.options)o[i]=r.options[i];else o.clear(o.COLOR_BUFFER_BIT);if(!(r.options.minZoom&&t.getZoom()<r.options.minZoom||r.options.maxZoom&&t.getZoom()>r.options.maxZoom)){var a=t.getBounds(),s=a.getEast()-a.getWest(),l=a.getNorth()-a.getSouth(),u=s/this.canvasLayer.canvas.width,c=l/this.canvasLayer.canvas.height,f=function(e){var t;if(e===p.METER)t=1;else if(e===p.DEGREE)t=2*Math.PI*6378137/360;else if(e===p.KILOMETER)t=.001;else if(e===p.INCH)t=1/.025399999918;else{if(e!==p.FOOT)return t;t=.3048}return t}("DEGREE")*u,h=t.getCenter(),y=t.project(h),d={transferCoordinate:function(e){if(t.transform.rotationMatrix||"2d"===r.context){var n=t.project(new FA.a.LngLat(e[0],e[1]));return[n.x,n.y]}var o=[(e[0]-h.lng)/u,(h.lat-e[1])/c];return[o[0]+y.x,o[1]+y.y]}};void 0!==e&&(d.filter=function(t){var r=n.trails||10;return e&&t.time>e-r&&t.time<e});var v=r.dataSet.get(d);this.processData(v),"m"===r.options.unit?(r.options.size&&(r.options._size=r.options.size/f),r.options.width&&(r.options._width=r.options.width/f),r.options.height&&(r.options._height=r.options.height/f)):(r.options._size=r.options.size,r.options._height=r.options.height,r.options._width=r.options.width);var m=t.project(new FA.a.LngLat(0,0));this.drawContext(o,v,r.options,m),r.options.updateCallback&&r.options.updateCallback(e)}}}},{key:"init",value:function(e){this.options=e,this.initDataRange(e),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"bindMapEvent",value:function(){this.mapEvent={resizeEvent:this.resizeEvent.bind(this),zoomStartEvent:this.zoomStartEvent.bind(this),zoomEndEvent:this.zoomEndEvent.bind(this),rotateStartEvent:this.rotateStartEvent.bind(this),rotateEvent:this.rotateEvent.bind(this),moveStartEvent:this.moveStartEvent.bind(this),rotateEndEvent:this.rotateEndEvent.bind(this),moveEvent:this.moveEvent.bind(this),moveEndEvent:this.moveEndEvent.bind(this),removeEvent:this.removeEvent.bind(this)},this.map.on("resize",this.mapEvent.resizeEvent),this.map.on("zoomstart",this.mapEvent.zoomStartEvent),this.map.on("zoomend",this.mapEvent.zoomEndEvent),this.map.on("rotatestart",this.mapEvent.rotateStartEvent),this.map.on("rotate",this.mapEvent.rotateEvent),this.map.on("rotateend",this.mapEvent.rotateEndEvent),this.map.on("movestart",this.mapEvent.moveStartEvent),this.map.on("move",this.mapEvent.moveEvent),this.map.on("moveend",this.mapEvent.moveEndEvent),this.map.on("remove",this.mapEvent.removeEvent)}},{key:"unbindMapEvent",value:function(){this.map.off("resize",this.mapEvent.resizeEvent),this.map.off("zoomstart",this.mapEvent.zoomStartEvent),this.map.off("zoomend",this.mapEvent.zoomEndEvent),this.map.off("rotatestart",this.mapEvent.rotateStartEvent),this.map.off("rotate",this.mapEvent.rotateEvent),this.map.off("rotateend",this.mapEvent.rotateEndEvent),this.map.off("movestart",this.mapEvent.moveStartEvent),this.map.off("move",this.mapEvent.moveEvent),this.map.off("moveend",this.mapEvent.moveEndEvent),this.map.off("remove",this.mapEvent.removeEvent)}},{key:"destroy",value:function(){this.unbindMapEvent(),this.unbindEvent(),this.clearData(),this.animator&&this.animator.stop(),this.animator=null,this.canvasLayer=null}},{key:"addAnimatorEvent",value:function(){}},{key:"removeEvent",value:function(){this.canvasLayer.mapContainer.removeChild(this.canvasLayer.canvas)}},{key:"resizeEvent",value:function(){this.canvasLayer.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.canvasLayer.canvas;e.style.position="absolute",e.style.top="0px",e.style.left="0px";var t="undefined"==typeof window?{}:window,r=this.canvasLayer.devicePixelRatio=t.devicePixelRatio||1;e.width=parseInt(this.map.getCanvas().style.width)*r,e.height=parseInt(this.map.getCanvas().style.height)*r,this.canvasLayer.mapVOptions.context&&"2d"!=this.canvasLayer.mapVOptions.context||e.getContext("2d").scale(r,r),e.style.width=this.map.getCanvas().style.width,e.style.height=this.map.getCanvas().style.height}},{key:"moveEndEvent",value:function(){this.stopAniamation=!1,this.getContext().canvas.style.transform="",this._canvasUpdate(),!0===this._expectShow&&this._show()}},{key:"moveStartEvent",value:function(){this.startPitch=this.map.getPitch(),this.startBearing=this.map.getBearing();var e=this.map.project(new FA.a.LngLat(0,0));this.startMoveX=e.x,this.startMoveY=e.y,this.animation&&(this.stopAniamation=!0),this.rotating||this.zooming||(this._expectShow="none"!==this.canvasLayer.canvas.style.display,0!==this.map.getPitch()&&this._hide())}},{key:"moveEvent",value:function(){this.canvasLayer.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing,r=this.map.project(new FA.a.LngLat(0,0)),n=r.x-this.startMoveX,o=r.y-this.startMoveY;this.getContext().canvas.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg) translate3d("+n+"px, "+o+"px, 0px)"}},{key:"zoomStartEvent",value:function(){this.zooming=!0,this._hide()}},{key:"zoomEndEvent",value:function(){this.zooming=!1}},{key:"rotateStartEvent",value:function(){this.rotating=!0,0!==this.map.getPitch()&&this._hide()}},{key:"rotateEvent",value:function(){this.canvasLayer.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing;this.getContext().canvas.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg)"}},{key:"rotateEndEvent",value:function(){this.rotating=!1}},{key:"clear",value:function(e){e&&e.clearRect&&e.clearRect(0,0,parseInt(this.map.getCanvas().style.width),parseInt(this.map.getCanvas().style.height))}},{key:"draw",value:function(){this._canvasUpdate()}},{key:"_hide",value:function(){this.canvasLayer.canvas.style.display="none"}},{key:"_show",value:function(){this.canvasLayer.canvas.style.display="block"}}])&&vj(r.prototype,n),o&&vj(r,o),t}();function Pj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Cj=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.map=t,this.id=n.layerID?n.layerID:ge.createUniqueID("mapvLayer_"),delete n.layerID,this.mapVOptions=n,this.dataSet=r,this.visibility=!0,this.map&&this.map.addLayer(this)}var t,r,n;return t=e,(r=[{key:"onAdd",value:function(e){this.map=e,this.renderer=new _j(this.map,this,this.dataSet,this.mapVOptions),this.canvas=this._createCanvas(),this.renderer._canvasUpdate(),this.mapContainer=e.getCanvasContainer(),this.mapContainer.appendChild(this.canvas),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px"}},{key:"removeFromMap",value:function(){this.mapContainer.removeChild(this.canvas),this.renderer.destroy()}},{key:"setVisibility",value:function(e){e!==this.visibility&&(this.visibility=e,e?this.show():this.hide())}},{key:"moveTo",value:function(e,t){var r=document.getElementById(this.canvas.id);if(t=void 0===t||t){var n=document.getElementById(e);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(e);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"getTopLeft",value:function(){var e,t=this.map;t&&(e=t.getBounds().getNorthWest());return e}},{key:"addData",value:function(e,t){this.renderer.addData(e,t)}},{key:"update",value:function(e){this.renderer.update(e)}},{key:"getData",value:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet}},{key:"removeData",value:function(e){this.renderer&&this.renderer.removeData(e)}},{key:"clearData",value:function(){this.renderer.clearData()}},{key:"show",value:function(){return this.renderer&&this.renderer._show(),this}},{key:"hide",value:function(){return this.renderer&&this.renderer._hide(),this}},{key:"_createCanvas",value:function(){var e=document.createElement("canvas");e.id=this.id,e.style.position="absolute",e.style.top="0px",e.style.left="0px";var t="undefined"==typeof window?{}:window,r=this.devicePixelRatio=t.devicePixelRatio||1;return e.width=parseInt(this.map.getCanvas().style.width)*r,e.height=parseInt(this.map.getCanvas().style.height)*r,this.mapVOptions.context&&"2d"!=this.mapVOptions.context||e.getContext("2d").scale(r,r),e.style.width=this.map.getCanvas().style.width,e.style.height=this.map.getCanvas().style.height,e}},{key:"setZIndex",value:function(e){this.canvas.style.zIndex=e}}])&&Pj(t.prototype,r),n&&Pj(t,n),e}();function Ej(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}FA.a.supermap.MapvLayer=Cj;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Tj=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.map=null,this.opacity=1,this.parseNumber=!1,this.enableHighlight=!1,this.highlight={color:"#ADA91E"},this.baseHeightField=null,this.height=null,this.heightField="height",this.themeField=this.heightField,this.showLegend=!0,this.legendTitle=null,this.legendTheme="light",this.legendOrientation="horizontal",this.legendPosition="bottom-right",this._highlightLayerId="".concat(this.id,"-highlightLayer"),this._extend(this,r)}var t,r,n;return t=e,(r=[{key:"setLayerOptions",value:function(e){return this._extend(this,e),this}},{key:"setHighlightStyleOptions",value:function(e){return this._extend(this.highlight,e),this}},{key:"setData",value:function(e,t){var r=this;return r.data=e,null!=t&&(r.parseNumber=t),r.parseNumber&&r.data&&r.data.features&&r.data.features.map(function(e){return r.baseHeightField&&e.properties[r.baseHeightField]&&(e.properties[r.baseHeightField]=parseFloat(e.properties[r.baseHeightField])),r.heightField&&e.properties[r.heightField]&&(e.properties[r.heightField]=parseFloat(e.properties[r.heightField])),e}),this}},{key:"getData",value:function(){return this.data}},{key:"addTo",value:function(e){return this.map=e,this.map?(this.show(),this):this}},{key:"show",value:function(e){return this._extend(this,e),this._addLayer(),this.enableHighlight&&this._addHighLightLayer(),this.showLegend&&(this.legend||(this.legend=this._createLegendControl()),this.map.addControl(this.legend,this.legendPosition)),this}},{key:"remove",value:function(){if(!this.map)return this;var e=this.id?this.id:"theme3DLayer";return this.map.getLayer(e)&&(this.map.off("mousemove",e,this._onMouseMove.bind(this)),this.map.on("mouseout",e,this._onMouseMove.bind(this)),this.map.removeLayer(e)),this.map.getLayer(this._highlightLayerId)&&(this._selectFeatureId=null,this.map.removeLayer(this._highlightLayerId)),this.legend&&this.map.removeControl(this.legend),this}},{key:"getLayerStyleOptions",value:function(){}},{key:"getHighlightStyleOptions",value:function(){}},{key:"_createLegendControl",value:function(e){var t=this;function r(){}return r.prototype.onAdd=function(r){this._map=r,this._container=document.createElement("div");var n="legend-light";"dark"===t.legendTheme&&(n="legend-dark");var o=" legend-horizontal";if("vertical"===t.legendOrientation&&(o=" legend-vertical"),this._container.className="mapboxgl-ctrl legend "+n+o,e)this._container.innerHTML=e;else{var i=" <div class='legend-title'>"+(t.legendTitle||"")+"</div>",a="<div class='legend-content'>"+(t._createLegendElement.call(t)||"")+"</div>";this._container.innerHTML=i+a}return t._appendLegendCSSStyle(),this._container},r.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map=void 0},new r}},{key:"_createLegendElement",value:function(){}},{key:"_addLayer",value:function(){var e=this.getLayerStyleOptions(),t=this.id?this.id:"theme3DLayer",r=this.sourceId=t+"Source";this.map.getSource(r)?(this.map.removeSource(r),this.map.addSource(r,{type:"geojson",data:this.data})):this.map.addSource(r,{type:"geojson",data:this.data}),this.map.addLayer({id:t,type:"fill-extrusion",source:r,paint:e}),this.map.moveLayer(t)}},{key:"_addHighLightLayer",value:function(){if(this.map){var e=this.map;e.addLayer({id:this._highlightLayerId,type:"fill-extrusion",source:this.sourceId,paint:this.getHighlightStyleOptions(),filter:["in","$id",""]}),this._selectFeatureId=null,e.on("mousemove",this.id,this._onMouseMove.bind(this)),e.on("mouseout",this.id,this._onMouseMove.bind(this))}}},{key:"_onMouseMove",value:function(e){var t=this,r=this.map,n=r.queryRenderedFeatures(e.point,{layers:[t.id]});if(t.highlight&&t.highlight.callback&&t.highlight.callback(n,e),!n||n.length<1)return t._clearHighlight.call(t),void(t._selectFeatureId=null);var o=n[0].id;t._selectFeatureId!==o&&(t._selectFeatureId=o,r.setFilter(t._highlightLayerId,["==","$id",t._selectFeatureId]))}},{key:"_clearHighlight",value:function(){this.map&&this.map.setFilter(this._highlightLayerId,["in","$id",""])}},{key:"_appendLegendCSSStyle",value:function(){var e=document.createElement("style");e.type="text/css";e.innerHTML="\n        .legend {\n            display: inline-block;\n            border-radius: 2px;\n            -moz-border-radius: 2px;\n            -webkit-border-radius: 2px;\n            font-size: 12px;\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n        }\n        .legend-light {\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n            box-shadow: 0px 0px 6px #bbbbbb;\n            -moz-box-shadow: 0px 6px 10px #bbbbbb;\n            -webkit-box-shadow: 0px 0px 6px #bbbbbb;\n        }\n        .legend-dark {\n            color: rgba(255, 255, 255, 0.8);\n            background-color: rgb(64, 64, 64);\n        }\n        .legend .legend-title {\n            min-height: 14px;\n            max-width: 500px;\n            padding:6px 10px;\n        }\n        .legend-light .legend-title {\n            color: rgba(0, 0, 0, 0.8);\n        }\n        .legend-dark .legend-title {\n            color: rgba(255, 255, 255, 0.8);\n        }\n        .legend-content{\n            padding:6px 10px;\n        }\n        "+this._legendCSSStyle(),document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_legendCSSStyle",value:function(){return"\n        .legend ul {\n            padding: 0;\n            margin: 0 16px;\n            height: 100%;\n            display: block;\n            list-style: none;\n        }\n\n        .legend li {\n            vertical-align: middle;\n        }\n\n        .legend li span:first-child {\n            vertical-align: middle;\n        }\n\n        .legend li span:last-child {\n            line-height: 28px;\n            max-width: 200px;\n            vertical-align: middle;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            -ms-text-overflow: ellipsis;\n        }\n\n        .legend-vertical li {\n            height: 28px;\n        }\n\n        .legend-vertical li span:first-child {\n            display: inline-block;\n            width: 60px;\n            height: 100%;\n        }\n\n        .legend-vertical li span:last-child {\n            display: inline-block;\n            margin-left: 16px;\n            height: 100%;\n        }\n\n        .legend-horizontal li {\n            height: 56px;\n            float: left;\n        }\n\n        .legend-horizontal li span:first-child {\n            display: block;\n            width: 100%;\n            height: 50%;\n        }\n\n        .legend-horizontal li span:last-child {\n            display: block;\n            vertical-align: middle;\n            width: 60px;\n            height: 50%;\n            text-align: center;\n        }\n        "}},{key:"_extend",value:function(e){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var r=Object.getOwnPropertyNames(arguments)[t];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(e[i]=n[i])}}}return e}}])&&Ej(t.prototype,r),n&&Ej(t,n),e}();function kj(e){return(kj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Aj(e){return(Aj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rj(e,t){return(Rj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.Theme3DLayer=Tj;var Lj=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=Aj(t).call(this,e,r))||"object"!==kj(i)&&"function"!=typeof i?jj(o):i).heightStops=null,n.colorStops=null,n.base=null,n.legendRatio=1,n._extend(jj(n),r),n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rj(e,t)}(t,Tj),r=t,(n=[{key:"getLayerStyleOptions",value:function(){var e=null==this.opacity?1:this.opacity;e=isNaN(parseFloat(e))?1:parseFloat(e);var t=/^[0-9]+.?[0-9]*$/,r={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField||this.heightField,type:"interval",base:t.test(this.base)?this.base:1},"fill-extrusion-opacity":e};return this.heightStops?r["fill-extrusion-height"]={stops:this.heightStops,property:this.heightField||"height",base:t.test(this.base)?this.base:1}:this.height?r["fill-extrusion-height"]=this.height:r["fill-extrusion-height"]={property:this.heightField||"height",type:"identity"},this.baseHeightField&&(r["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}),r}},{key:"getHighlightStyleOptions",value:function(){return{"fill-extrusion-color":this.highlight&&null!=this.highlight.color?this.highlight.color:"#ADA91E","fill-extrusion-height":{stops:this.heightStops,property:this.heightField},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6}}},{key:"_createLegendElement",value:function(){var e,t=this.colorStops&&this.colorStops.length||0,r="<ul>";for(e=0;e<t;e++){var n=this.colorStops[e][0],o=this._getWrapperText(n);if(e===t-1)o="> "+o;else o=o+"-"+this._getWrapperText(this.colorStops[e+1][0]);r+="<li><span style='background-color:"+this.colorStops[e][1]+";'></span><span>"+o+"</span></li>"}return r+="</ul>"}},{key:"_getWrapperText",value:function(e){var t=e*(null==this.legendRatio?1:parseFloat(this.legendRatio)),r=parseFloat(t);return r%1e6<=1e6?r.toString():parseInt(r/1e3)+"k"}}])&&xj(r.prototype,n),o&&xj(r,o),t}();function Mj(e){return(Mj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ij(e,t){return!t||"object"!==Mj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dj(e){return(Dj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fj(e,t){return(Fj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.RangeTheme3DLayer=Lj;var Bj=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ij(this,Dj(t).call(this,e,r))).style=r.style,n.isHoverAble=r.isHoverAble,n.highlightStyle=r.highlightStyle,n.themeField=r.themeField,n.styleGroups=r.styleGroups,n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fj(e,t)}(t,aj),r=t,(n=[{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=uT.transformStyle(this.highlightStyle);for(var n=new kk(e,this,uT.transformStyle(t),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"getStyleByData",value:function(e){var t={},r=e;if(t=ge.copyAttributesWithClip(t,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&r.attributes){var n=this.themeField,o=r.attributes,i=this.styleGroups,a=!1,s=null;for(var l in o)if(n===l){a=!0,s=o[l];break}if(a)for(var u=0,c=i.length;u<c;u++)if(s>=i[u].start&&s<i[u].end){var f=i[u].style;t=ge.copyAttributesWithClip(t,f)}}return r.style&&!0===this.isAllowFeatureStyle&&(t=ge.copyAttributesWithClip(r.style)),t}}])&&Nj(r.prototype,n),o&&Nj(r,o),t}();function Gj(e){return(Gj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hj(e,t){return!t||"object"!==Gj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jj(e){return(Jj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wj(e,t){return(Wj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.RangeThemeLayer=Bj;var Vj=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Hj(this,Jj(t).call(this,e,r,n))).symbolType=r,o.symbolSetting=n.symbolSetting,o.themeField=n.themeField,o}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wj(e,t)}(t,ej),r=t,(n=[{key:"setSymbolType",value:function(e){this.symbolType=e,this.redraw()}},{key:"createThematicFeature",value:function(e){var t;return fT[this.symbolType]&&this.themeField&&this.symbolSetting&&(t=new fT[this.symbolType](e,this,[this.themeField],this.symbolSetting)),!!t&&(t.assembleShapes(),t)}}])&&Uj(r.prototype,n),o&&Uj(r,o),t}();function zj(e){return(zj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qj(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yj(e){return(Yj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xj(e,t){return(Xj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.RankSymbolThemeLayer=Vj;var Kj=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=Yj(t).call(this,e,r))||"object"!==zj(i)&&"function"!=typeof i?Qj(o):i).colorStops=null,n._extend(Qj(n),r),n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xj(e,t)}(t,Tj),r=t,(n=[{key:"getLayerStyleOptions",value:function(){var e=null==this.opacity?1:this.opacity;e=isNaN(parseFloat(e))?1:parseFloat(e);var t={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField,type:"categorical"},"fill-extrusion-opacity":e};return null!=this.height?t["fill-extrusion-height"]=this.height:t["fill-extrusion-height"]={property:this.heightField||"height",type:"categorical"},this.baseHeightField&&(t["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}),t}},{key:"getHighlightStyleOptions",value:function(){var e={"fill-extrusion-color":this.highlight&&null!=this.highlight.color?this.highlight.color:"#ADA91E","fill-extrusion-height":{stops:this.heightStops,property:this.heightField,type:"categorical"},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6};return null!=this.height&&(e["fill-extrusion-height"]=this.height||0),e}},{key:"_createLegendElement",value:function(){for(var e="<ul>",t=this.colorStops&&this.colorStops.length||0,r=0;r<t;r++){var n=this.colorStops[r][0];e+="<li><span style='background-color:"+this.colorStops[r][1]+";'></span><span>"+n+"</span></li>"}return e+="</ul>"}}])&&qj(r.prototype,n),o&&qj(r,o),t}();function Zj(e){return(Zj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function eR(e,t){return!t||"object"!==Zj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tR(e){return(tR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rR(e,t){return(rR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.UniqueTheme3DLayer=Kj;var nR=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=eR(this,tR(t).call(this,e,r))).themeField=r.themeField,n.style=r.style,n.styleGroups=r.styleGroups,n.isHoverAble=r.isHoverAble,n.highlightStyle=r.highlightStyle,n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rR(e,t)}(t,aj),r=t,(n=[{key:"createThematicFeature",value:function(e){var t=this.getStyleByData(e),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=uT.transformStyle(this.highlightStyle);for(var n=new kk(e,this,uT.transformStyle(t),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"getStyleByData",value:function(e){var t={},r=e;if(t=ge.copyAttributesWithClip(t,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&r.attributes){var n=this.themeField,o=r.attributes,i=this.styleGroups,a=!1,s=null;for(var l in o)if(n===l){a=!0,s=o[l];break}if(a)for(var u=0,c=i.length;u<c;u++)if(s.toString()===i[u].value.toString()){var f=i[u].style;t=ge.copyAttributesWithClip(t,f)}}return r.style&&!0===this.isAllowFeatureStyle&&(t=ge.copyAttributesWithClip(r.style)),t}}])&&$j(r.prototype,n),o&&$j(r,o),t}();function oR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}FA.a.supermap.UniqueThemeLayer=nR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var iR=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lngLat=JA.isArray(t)?{lng:t[0],lat:t[1]}:t,this.style=JA.extend({},r),this.attributes=n}var t,r,n;return t=e,(r=[{key:"getId",value:function(){return this.id}},{key:"setId",value:function(e){this.id=e}},{key:"getLngLat",value:function(){return this.lngLat}},{key:"setLngLat",value:function(e){this.lngLat=JA.isArray(e)?{lng:e[0],lat:e[1]}:e}},{key:"setStyle",value:function(e){this.style=JA.extend(this.style,e)}},{key:"getStyle",value:function(){return this.style}},{key:"setAttributes",value:function(e){this.attributes=JA.extend({},this.attributes,e)}},{key:"getAttributes",value:function(){return this.attributes}}])&&oR(t.prototype,r),n&&oR(t,n),e}();function aR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}FA.a.supermap.Graphic=iR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var sR={color:[0,0,0,255],opacity:.8,radius:10,radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1},lR=function(){function e(t,r){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=JA.extend(this,sR,r);this.id=t||ge.createUniqueID("graphicLayer_"),this.graphics=[].concat(n.graphics),this.visibility=!0}var t,r,n;return t=e,(r=[{key:"addTo",value:function(e){this.onAdd(e)}},{key:"onAdd",value:function(e){if(this.map=e,this.canvas)return this.mapContainer=this.map.getCanvasContainer(),this.mapContainer.appendChild(this.canvas),this;this._initContainer(),e.getCRS&&e.getCRS()!==FA.a.CRS.EPSG3857&&(this.coordinateSystem=3,this.isGeographicCoordinateSystem=!0);var t=this.getState(),r=t.data,n=t.color,o=t.radius,i=t.opacity,a=t.highlightColor,s=t.radiusScale,l=t.radiusMinPixels,u=t.radiusMaxPixels,c=t.strokeWidth,f=t.outline,p=this,h={id:"scatter-plot",data:r,pickable:Boolean(this.onClick)||Boolean(this.onHover),autoHighlight:!0,color:n,opacity:i,radius:o,radiusScale:s,highlightColor:a,radiusMinPixels:l,radiusMaxPixels:u,strokeWidth:c,outline:f,isGeographicCoordinateSystem:this.isGeographicCoordinateSystem,coordinateSystem:this.coordinateSystem,getPosition:function(e){if(!e)return[0,0,0];var t=e.getLngLat();return t&&[t.lng,t.lat,0]},getColor:function(e){var t=e&&e.getStyle();return t&&t.color||p.color},getRadius:function(e){var t=e&&e.getStyle();return t&&t.radius||p.radius},updateTriggers:{getColor:[n],getRadius:[o]}};this.onClick&&(h.onClick=this.onClick),this.onHover&&(h.onHover=this.onHover),this.layer=new window.DeckGL.ScatterplotLayer(h);var y={};for(var d in t)y[d]=t[d];return y.layers=[this.layer],y.canvas=this.canvas,this.deckGL=new window.DeckGL.experimental.DeckGLJS(y),this.map.on("render",this._moveEvent.bind(this)),this.map.on("resize",this._resizeEvent.bind(this)),this.draw(),this}},{key:"setStyle",value:function(e){var t={color:this.color,radius:this.radius,opacity:this.opacity,highlightColor:this.highlightColor,radiusScale:this.radiusScale,radiusMinPixels:this.radiusMinPixels,radiusMaxPixels:this.radiusMaxPixels,strokeWidth:this.strokeWidth,outline:this.outline};JA.extend(this,t,e),this.update()}},{key:"setGraphics",value:function(e){this.graphics=this.graphics||[],this.graphics.length=0;var t=JA.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]),this.layer.props.data.length=0;for(var r=0;r<t.length;r++)this.layer.props.data.push(t[r]);this.update()}},{key:"addGraphics",value:function(e){this.graphics=this.graphics||[];var t=JA.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]);for(var r=0;r<t.length;r++)this.layer.props.data.push(t[r]);this.update()}},{key:"getGraphicBy",value:function(e,t){var r=null;for(var n in this.graphics)if(this.graphics[n][e]===t){r=this.graphics[n];break}return r}},{key:"getGraphicById",value:function(e){return this.getGraphicBy("id",e)}},{key:"getGraphicsByAttribute",value:function(e,t){var r,n=[];for(var o in this.graphics)(r=this.graphics[o])&&r.attributes&&r.attributes[e]===t&&n.push(r);return n}},{key:"removeGraphics",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e||0===e.length||e===this.graphics)return this.graphics.length=0,this.layer.props.data&&(this.layer.props.data.length=0),void this.update();ge.isArray(e)||(e=[e]);for(var t=e.length-1;t>=0;t--){var r=e[t],n=ge.indexOf(this.graphics,r);-1!==n&&this.graphics.splice(n,1)}this.update()}},{key:"update",value:function(){if("Awaiting state"!==this.layer.lifecycle){this.layer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0});var e=this.getState();this.layer.setState(e)}}},{key:"clear",value:function(){this.removeGraphics(),this.deckGL.finalize()}},{key:"remove",value:function(){this.map.off("render",this._moveEvent.bind(this)),this.map.off("resize",this._resizeEvent.bind(this)),this.map.getCanvasContainer().removeChild(this.canvas)}},{key:"removeFromMap",value:function(){this.remove(),this.clear()}},{key:"moveTo",value:function(e,t){var r=document.getElementById(this.id);if(t=void 0===t||t){var n=document.getElementById(e);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(e);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(e){this.canvas&&e!==this.visibility&&(this.visibility=e,this.canvas.style.display=e?"block":"none")}},{key:"getState",value:function(){var e=this.map,t=parseInt(this.canvas.style.width),r=parseInt(this.canvas.style.height),n=e.getCenter(),o={longitude:n.lng,latitude:n.lat,zoom:e.getZoom(),maxZoom:e.getMaxZoom(),pitch:e.getPitch(),bearing:e.getBearing()},i={};for(var a in o)i[a]=o[a];return i.width=t,i.height=r,i.data=this.graphics,i.color=this.color,i.radius=this.radius,i.opacity=this.opacity,i.highlightColor=this.highlightColor,i.radiusScale=this.radiusScale,i.radiusMinPixels=this.radiusMinPixels,i.radiusMaxPixels=this.radiusMaxPixels,i.strokeWidth=this.strokeWidth,i.outline=this.outline,e.getCRS&&e.getCRS()!==FA.a.CRS.EPSG3857&&(i.coordinateSystem=this.coordinateSystem,i.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem),i}},{key:"draw",value:function(){var e=this.getState(),t={};for(var r in e)t[r]=e[r];t.layers=[this.layer],t.canvas=this.canvas,this.deckGL.setProps(t)}},{key:"_moveEvent",value:function(){this.draw()}},{key:"_resizeEvent",value:function(){var e=this.canvas,t=this.map;e.width=parseInt(t.getCanvas().style.width),e.height=parseInt(t.getCanvas().style.height),e.style.width=t.getCanvas().style.width,e.style.height=t.getCanvas().style.height,this.draw()}},{key:"_initContainer",value:function(){this.canvas=this._createCanvas(),this.mapContainer=this.map.getCanvasContainer(),this.mapContainer.appendChild(this.canvas)}},{key:"_createCanvas",value:function(){var e=document.createElement("canvas");this.id&&(e.id=this.id),e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.cursor="";var t=this.map;return e.width=parseInt(t.getCanvas().style.width),e.height=parseInt(t.getCanvas().style.height),e.style.width=t.getCanvas().style.width,e.style.height=t.getCanvas().style.height,e}}])&&aR(t.prototype,r),n&&aR(t,n),e}();FA.a.supermap.GraphicLayer=lR;var uR=r(1);
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function cR(e,t,r){if(e===r||e===t)return e;var n=r-t;return((e-t)%n+n)%n+t}function fR(e){return e*Math.PI/180}var pR={matrix:[1,-1,0,0],projection:{R:6378137,minZoom:0,maxZoom:22,nativeMaxZoom:19,RAD:Math.PI/180,METERS_PER_DEGREE:6378137*Math.PI/180,MAX_LATITUDE:85.0511287798,project:function(e){var t=this.RAD,r=this.METERS_PER_DEGREE,n=this.MAX_LATITUDE,o=e instanceof Array?{lng:e[0],lat:e[1]}:{lng:e.lng,lat:e.lat},i=o.lng,a=Math.max(Math.min(n,o.lat),-n);return{x:i*r,y:(0===a?0:Math.log(Math.tan((90+a)*t/2))/t)*r}},unproject:function(e){var t,r=e.x,n=e.y,o=this.RAD,i=this.METERS_PER_DEGREE;return 0===n?t=0:(t=n/i,t=(2*Math.atan(Math.exp(t*o))-Math.PI/2)/o),{lng:cR(r/i,-180,180),lat:cR(t,-this.MAX_LATITUDE,this.MAX_LATITUDE)}},locate:function(e,t,r){if(!e)return null;if(t=t||0,r=r||0,!t&&!r)return e;var n=e.lng;if(0!==t){var o=Math.abs(t),i=fR(e.lng);n=cR(180*(i+=2*Math.sqrt(Math.pow(Math.sin(o/(2*this.R)),2)/Math.pow(Math.cos(i),2))*(o>0?1:-1))/Math.PI,-180,180)}var a=e.lat;if(0!==r){var s=Math.abs(r),l=fR(e.lat);a=cR(180*(l+=2*Math.sin(s/(2*this.R))*(s>0?1:-1))/Math.PI,-90,90)}return{lng:n,lat:a}},getResolution:function(e){if(!this.resolutions){for(var t=[],r=12756274*Math.PI,n=0;n<=this.maxZoom;n++)t[n]=r/(256*Math.pow(2,n));this.resolutions=t}var o=0|e,i=this.resolutions.length;o=o<0?0:o>i-1?i-1:o;var a=this.resolutions[o];return(0|e)!==e&&o!==i-1?a+(this.resolutions[o+1]-a)*(e-o):a}},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},lngLatToPoint:function(e,t){var r=this.project(e);return this.transform(r,this.projection.getResolution(t))},locate:function(e,t,r){return this.projection.locate(e,t,r)},transform:function(e,t){return{x:this.matrix[0]*(e.x-this.matrix[2])/t,y:this.matrix[1]*(e.y-this.matrix[3])/t}}};function hR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}FA.a.supermap.Transform=pR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var yR=pR.projection,dR=uR.Color,vR=uR.Scene,mR=uR.WebGLRenderer,bR=uR.CanvasRenderer,gR=uR.PerspectiveCamera,SR=Math.PI/180,wR=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,OR=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame,_R=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._layer=t,this.renderer=r||"gl",this.options=n}var t,r,n;return t=e,(r=[{key:"setMap",value:function(e){this.map=e}},{key:"render",value:function(){this._layer&&(this.prepare(),this._layer.fire("initialized"),this._layer&&this._layer.draw(this.context,this.scene,this.camera),this._layer.fire("draw"),this.renderScene())}},{key:"update",value:function(){this.remove(),this.render()}},{key:"renderScene",value:function(){this.locationCamera(),this.animationFrame=this.renderFrame(function(){this.animationFrame=null,this.context&&this.context.render(this.scene,this.camera)}.bind(this))}},{key:"renderFrame",value:function(e){return wR(function(){e&&"function"==typeof e&&e()})}},{key:"resize",value:function(){this._resetElementSize(this.container),this._resetElementSize(this.canvas);var e=this.canvas.width,t=this.canvas.height,r=this.getMapSize();this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.context.setSize(r.width,r.height),this.renderScene()}},{key:"prepare",value:function(){if(!this.map)return new Error("map object is necessary");this.canvas?this.clear(this.context):(this._initContainer(),this._initThreeRenderer(),this._layer.fire("rendererinitialized"))}},{key:"getMapSize",value:function(){var e=this.map.getContainer();return{width:e.clientWidth,height:e.clientHeight}}},{key:"cancelFrame",value:function(){null!=this.animationFrame&&OR(this.animationFrame)}},{key:"remove",value:function(){null!=this.animationFrame&&OR(this.animationFrame),this.container.removeChild(this.canvas),this.container.parentNode.removeChild(this.container),this.context=null,this.canvas=null,this.container=null}},{key:"clear",value:function(e){e&&e.clear&&e.clear(),e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)}},{key:"getScale",value:function(e){var t=this.map,r=null==e?t.getZoom():e,n=yR.getResolution(yR.nativeMaxZoom);return yR.getResolution(r)/n}},{key:"getCanvasContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"locationCamera",value:function(){var e=this.map,t=this.getMapSize(),r=e.transform.zoomScale(yR.nativeMaxZoom-e.getZoom()-1),n=Math.tan(e.transform.fov/2*SR),o=this.camera,i=e.getPitch()*SR,a=-r*t.height/2/n;o.position.z=a*Math.cos(i);var s=pR.lngLatToPoint(e.getCenter(),yR.nativeMaxZoom),l=Math.sin(i)*a,u=e.getBearing()*SR;o.position.x=s.x+l*Math.sin(u),o.position.y=s.y-l*Math.cos(u),o.up.set(Math.sin(u),-Math.cos(u),0),o.lookAt(new uR.Vector3(s.x,s.y,0)),o.updateProjectionMatrix()}},{key:"_initContainer",value:function(){var e=this._createCanvas(),t=this.container=document.createElement("div");this._layer._layerId&&(t.id=this._layer._layerId),t.className="threejs-wrapper",t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.overflow="hidden",this._resetElementSize(t),t.appendChild(e),this.map.getCanvasContainer().appendChild(t)}},{key:"_createCanvas",value:function(){if(!this.canvas){var e=this.canvas=document.createElement("canvas");return e.className="threejs-overlay",e.style.outline="none",this._resetElementSize(e),e}}},{key:"_resetElementSize",value:function(e){if(e){var t=this.getMapSize(),r=window.devicePixelRatio?window.devicePixelRatio:1,n=r*t.width,o=r*t.height;e.width=n,e.height=o,e.style.width=t.width+"px",e.style.height=t.height+"px"}}},{key:"_initThreeRenderer",value:function(){var e,t=this.map,r=this.getMapSize();"gl"===(this.renderer||"gl")?((e=new mR({canvas:this.canvas,alpha:!0,antialias:!0,preserveDrawingBuffer:!0},this.options)).autoClear=!0,e.clear()):e=new bR(ge.extend({canvas:this.canvas,alpha:!0},this.options)),e.setClearColor(new dR(1,1,1),0),e.canvas=this.canvas,this.context=e;var n=t.transform.fov,o=Math.tan(n/2*SR),i=this.getScale(yR.minZoom)/this.getScale(yR.nativeMaxZoom)*r.height/2/o;this.camera=new gR(n,r.width/r.height,1,i),this.scene=new vR,this.scene.add(this.camera)}}])&&hR(t.prototype,r),n&&hR(t,n),e}();
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function PR(e){return(PR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ER(e){return(ER=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kR(e,t){return(kR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var xR=uR.Vector3,AR=uR.Shape,jR=uR.Mesh,RR=uR.BufferGeometry,LR=uR.ExtrudeGeometry,MR=function(e){function t(e,r,n){var o,i,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(o=!(a=ER(t).call(this))||"object"!==PR(a)&&"function"!=typeof a?TR(i):a)._layerId=e,o.options=n;var s=n&&n.threeOptions;return o.renderer=new _R(TR(o),r,s),o}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kR(e,t)}(t,FA.a.Evented),r=t,(n=[{key:"toThreeShape",value:function(e){var t=this;if(!e)return null;var r=this.getCoordinatesCenter(e),n=this.lngLatToPosition(r),o=e.map(function(e){return t.lngLatToPosition({lng:e[0],lat:e[1]}).sub(n)});return new AR(o)}},{key:"toThreeMesh",value:function(e,t,r,n){if(!e)return null;var o=e;n&&(o=this.removeDuplicatedCoordinates(e));var i=this.distanceToThreeVector3(t,t).x,a=this.toThreeShape(o),s=new LR(a,{amount:i,bevelEnabled:!0}),l=(new RR).fromGeometry(s),u=new jR(l,r),c=this.lngLatToPosition(this.getCoordinatesCenter(o));return u.position.set(c.x,c.y,-i),u}},{key:"addObject",value:function(e,t){t&&e&&this.setPosition(e,t),this.renderer&&this.renderer.scene.add(e)}},{key:"getScene",value:function(){return this.renderer.scene}},{key:"getCamera",value:function(){return this.renderer.camera}},{key:"getThreeRenderer",value:function(){return this.renderer.context}},{key:"clearMesh",value:function(){var e=this.renderer.scene;if(!e)return this;for(var t=e.children.length-1;t>=0;t--)e.children[t]instanceof uR.Mesh&&e.remove(e.children[t]);return this}},{key:"clearAll",value:function(e){var t=this.renderer.scene;if(!t)return this;for(var r=t.children.length-1;r>=0;r--)!e&&t.children[r]instanceof uR.Camera||t.remove(t.children[r]);return this}},{key:"setPosition",value:function(e,t){if(!e||!t)return this;var r=this.lngLatToPosition(t);return e.position.set(r.x,r.y,r.z),this}},{key:"lngLatToPosition",value:function(e){var t=pR.projection.nativeMaxZoom,r=pR.lngLatToPoint(e,t);return new xR(r.x,r.y,-0)}},{key:"distanceToThreeVector3",value:function(e,t,r){var n=this._map,o=r||n.getCenter(),i=pR.projection.nativeMaxZoom,a=pR.locate(o,e,t),s=pR.lngLatToPoint(o,i),l=pR.lngLatToPoint(a,i),u=Math.abs(l.x-s.x)*Math.sign(e),c=Math.abs(l.y-s.y)*Math.sign(t);return new xR(u,c,0)}},{key:"removeDuplicatedCoordinates",value:function(e){function t(e,t){return e[0]===t[0]&&e[1]===t[1]}for(var r=[].concat(e),n=r.length-1;n>=1;n--)t(r[n],r[n-1])&&r.splice(n,1);return t(r[0],r[r.length-1])&&r.splice(r.length-1,1),r}},{key:"getCoordinatesCenter",value:function(e){for(var t=0,r=0,n=0,o=0,i=e.length;o<i;o++)e[o]&&(t+=e[o][0],r+=e[o][1],n++);return{lng:t/n,lat:r/n}}},{key:"addTo",value:function(e){var t=this;return t._map=e,t.renderer.setMap(e),t.renderer.render(),t._map.on("render",this._update.bind(t)),t._map.on("resize",this._resize.bind(t)),t.on("render",function(){this.context&&this.context.render(this.scene,this.camera)}.bind(t.renderer)),this}},{key:"getCanvasContainer",value:function(){return this.renderer.getCanvasContainer()}},{key:"getCanvas",value:function(){return this.renderer.getCanvas()}},{key:"remove",value:function(){var e=this._map,t=this;e.off("render",t._update.bind(t)),e.off("resize",t._resize.bind(t)),t.renderer.remove(),t._map=null}},{key:"draw",value:function(e,t,r){return this}},{key:"renderScene",value:function(){return this.renderer.renderScene(),this.fire("renderscene"),this}},{key:"_resize",value:function(){this.renderer.resize()}},{key:"_update",value:function(){return this.renderScene(),this.fire("render"),this}}])&&CR(r.prototype,n),o&&CR(r,o),t}();function NR(e){return(NR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function DR(e,t){return!t||"object"!==NR(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function FR(e){return(FR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BR(e,t){return(BR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.ThreeLayer=MR;var GR=function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=DR(this,FR(t).call(this));var o=r||{};return n.name=e,n.id=o.id?o.id:ge.createUniqueID("HeatMapLayer_"),n.map=o.map?o.map:null,n.loadWhileAnimating=void 0===o.loadWhileAnimating||o.loadWhileAnimating,n.visibility=!0,n.opacity=o.opacity?o.opacity:1,n.colors=o.colors?o.colors:["blue","cyan","lime","yellow","red"],n.useGeoUnit=!!o.useGeoUnit&&o.useGeoUnit,n.radius=o.radius?o.radius:50,n.featureWeight=o.featureWeight?o.featureWeight:null,n.features=[],n.maxWeight=null,n.minWeight=null,n.EVENT_TYPES=["featuresadded","featuresremoved","featuresdrawcompleted"],n.supported=!1,n.rootCanvas=null,n.canvasContext=null,n.maxWidth=null,n.maxHeight=null,n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BR(e,t)}(t,FA.a.Evented),r=t,(n=[{key:"onAdd",value:function(e){this.map=e,0!==this.features.length&&(this._createCanvasContainer(),this.map.on("resize",this._resizeEvent.bind(this)),this.map.on("zoomstart",this._zoomStartEvent.bind(this)),this.map.on("zoomend",this._zoomEndEvent.bind(this)),this.map.on("rotatestart",this._rotateStartEvent.bind(this)),this.map.on("rotate",this._rotateEvent.bind(this)),this.map.on("rotateend",this._rotateEndEvent.bind(this)),this.map.on("dragend",this._dragEndEvent.bind(this)),this.map.on("movestart",this._moveStartEvent.bind(this)),this.map.on("move",this._moveEvent.bind(this)),this.map.on("moveend",this._moveEndEvent.bind(this)),this.map.on("remove",this.removeFromMap.bind(this)),this.refresh())}},{key:"removeFromMap",value:function(){this.removeAllFeatures(),this.map.getCanvasContainer().removeChild(this.rootCanvas)}},{key:"_createCanvasContainer",value:function(){this.supported=!0,this.mapContainer=this.map.getCanvasContainer(),this.rootCanvas=document.createElement("canvas"),this.rootCanvas.id=this.id;var e=this.map.getCanvas();this.rootCanvas.width=this.maxWidth=parseInt(e.width),this.rootCanvas.height=this.maxHeight=parseInt(e.height),ge.modifyDOMElement(this.rootCanvas,null,null,null,"absolute",null,null,this.opacity),this.canvasContext=this.rootCanvas.getContext("2d"),this.mapContainer.appendChild(this.rootCanvas)}},{key:"addFeatures",value:function(e){this.features=this.toiClientFeature(e),this.fire(this.EVENT_TYPES[0],{features:e,succeed:!0}),this.refresh()}},{key:"refresh",value:function(){if(0!==this.features.length&&this.map){var e=this.map.getBounds();this.updateHeatPoints(e)}}},{key:"setOpacity",value:function(e){e!==this.opacity&&(this.opacity=e,ge.modifyDOMElement(this.rootCanvas,null,null,null,null,null,null,e),null!==this.map&&this.fire("changelayer",{layer:this,property:"opacity"}))}},{key:"updateHeatPoints",value:function(e){this.features&&this.features.length>0?this.convertFastToPixelPoints(e):this.canvasContext.clearRect(0,0,this.maxWidth,this.maxWidth)}},{key:"convertFastToPixelPoints",value:function(e){var t,r,n,o,i,a,s,l=[],u=e.getEast()-e.getWest(),c=e.getNorth()-e.getSouth(),f=this.map.getCanvas();o=u/f.width>c/f.height?u/f.width:c/f.height,this.useRadius=this.useGeoUnit?parseInt(this.radius/o):this.radius;for(var p=0;p<this.features.length;p++){var h=this.features[p],y=h.geometry,d=this.getPixelXY(new we(y.x,y.y));this.featureWeight?(d.weight=h.attributes[this.featureWeight],this.maxWeight||(i=i||d.weight,a=a||d.weight,i=Math.max(i,d.weight),a=Math.min(a,d.weight))):d.weight=1,t=Math.floor(d.x),r=Math.floor(d.y),n=d.weight,l.push([t,r,n])}this.maxWeight?this.draw(l,this.maxWeight):(s=i&&a?(i+a)/2:1,this.draw(l,s))}},{key:"draw",value:function(e,t){if(!(this.maxHeight>0&&this.maxWidth>0))return!1;var r=this.canvasContext;this.canvasContext.clearRect(0,0,this.maxWidth,this.maxHeight),this.drawCircle(this.useRadius),this.createGradient();for(var n=0;n<e.length;n++){var o=e[n];this.canvasContext.globalAlpha=Math.max(o[2]/t,.05),this.canvasContext.drawImage(this.circle,o[0]-this.useRadius,o[1]-this.useRadius)}var i=r.getImageData(0,0,this.maxWidth,this.maxHeight);this.colorize(i.data,this.grad),r.putImageData(i,0,0)}},{key:"colorize",value:function(e,t){for(var r,n=0;n<e.length;n+=4)(r=4*e[n+3])&&(e[n]=t[r],e[n+1]=t[r+1],e[n+2]=t[r+2])}},{key:"drawCircle",value:function(e){var t=e/2,r=this.circle=document.createElement("canvas"),n=r.getContext("2d");r.height=2*e,r.width=2*e,n.shadowOffsetX=n.shadowOffsetY=2*e,n.shadowBlur=t,n.shadowColor="#000000",n.beginPath(),n.arc(-e,-e,e/2,0,2*Math.PI,!0),n.closePath(),n.fill()}},{key:"createGradient",value:function(){var e=this.colors,t=document.createElement("canvas"),r=t.getContext("2d"),n=r.createLinearGradient(0,0,0,256);t.height=256,t.width=1;for(var o=1,i=0,a=e.length;i<a;i++)n.addColorStop(o/a,e[i]),o++;r.fillStyle=n,r.fillRect(0,0,1,256),this.grad=r.getImageData(0,0,1,256).data}},{key:"getPixelXY",value:function(e){var t,r=this.map;if(e instanceof Xe||e instanceof ct){var n=r.project(new FA.a.LngLat(e.x,e.y));t={x:parseInt(n.x),y:parseInt(n.y)}}if(e instanceof we){var o=r.project(new FA.a.LngLat(e.lon,e.lat));t={x:parseInt(o.x),y:parseInt(o.y)}}return t}},{key:"toiClientFeature",value:function(e){ge.isArray(e)||(e=[e]);for(var t=[],r=0;r<e.length;r++)if(e[r]instanceof er)t.push(e[r]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e[r].type)){var n=new Lr;t=t.concat(n.read(e[r]))}else{if(!e[r].geometry||!e[r].geometry.parts)throw new Error("Features[".concat(r,"]'s type does not match, please check."));t.push(ag.fromJson(e[r]).toFeature())}return t}},{key:"removeFeatures",value:function(e){if(e&&0!==e.length&&this.features&&0!==this.features.length){if(e===this.features)return this.removeAllFeatures();ge.isArray(e)||(e=[e]);for(var t,r,n=[],o=0,i=e.length;o<i;o++)t=e[o],-1!==(r=ge.indexOf(this.features,t))?this.features.splice(r,1):n.push(t);var a=0==n.length;this.fire(this.EVENT_TYPES[1],{features:n,succeed:a}),this.refresh()}}},{key:"removeAllFeatures",value:function(){this.features=[],this.refresh()}},{key:"moveTo",value:function(e,t){var r=document.getElementById(this.rootCanvas.id);if(t=void 0===t||t){var n=document.getElementById(e);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(e);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(e){this.rootCanvas&&e!==this.visibility&&(this.visibility=e,this.rootCanvas.style.display=e?"block":"none")}},{key:"_resizeEvent",value:function(){this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getCanvas();this.rootCanvas.style.width=e.style.width,this.rootCanvas.style.height=e.style.height,this.rootCanvas.width=this.maxWidth=parseInt(e.width),this.rootCanvas.height=this.maxHeight=parseInt(e.height);var t=window.devicePixelRatio||1;1!==t&&this.canvasContext&&this.canvasContext.scale(t,t),this.refresh()}},{key:"_zoomStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!0,this._hide())}},{key:"_zoomEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!1,this._show())}},{key:"_rotateStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!0)}},{key:"_rotateEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing;this.rootCanvas.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg)"}}},{key:"_rotateEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!1,this._show())}},{key:"_dragEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&this._hide()}},{key:"_moveEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rootCanvas.style.transform="",this.refresh(),this._show())}},{key:"_moveStartEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){this.startPitch=this.map.getPitch(),this.startBearing=this.map.getBearing();var e=this.map.project(new FA.a.LngLat(0,0));this.startMoveX=e.x,this.startMoveY=e.y}}},{key:"_moveEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){if(!this.rotating&&!this.zooming){0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var e=this.map.getPitch()-this.startPitch,t=-this.map.getBearing()+this.startBearing,r=this.map.project(new FA.a.LngLat(0,0)),n=r.x-this.startMoveX,o=r.y-this.startMoveY;this.rootCanvas.style.transform="rotateX("+e+"deg) rotateZ("+t+"deg) translate3d("+n+"px, "+o+"px, 0px)"}}else this.refresh()}},{key:"_hide",value:function(){this.rootCanvas.style.display="none"}},{key:"_show",value:function(){this.rootCanvas.style.display="block"}}])&&IR(r.prototype,n),o&&IR(r,o),t}();function UR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}FA.a.supermap.HeatMapLayer=GR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var HR=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerTypeID=t,this.data=[].concat(r.data),this.props=r.props?r.props:{},this.callback=r.callback?r.callback:{},this.id=r.layerId?r.layerId:ge.createUniqueID("graphicLayer_"+this.layerTypeID+"_"),this.visibility=!0}var t,r,n;return t=e,(r=[{key:"onAdd",value:function(e){if(this.map=e,this.canvas)return this.mapContainer=this.map.getCanvasContainer(),this.mapContainer.appendChild(this.canvas),this;e.getCRS&&e.getCRS()!==FA.a.CRS.EPSG3857&&(this.coordinateSystem=3,this.isGeographicCoordinateSystem=!0),this._initContainer(),this._createLayerByLayerTypeID();var t=this._getState(),r={};for(var n in t)r[n]=t[n];return r.layers=[this.layer],r.canvas=this.canvas,this.deckGL=new window.DeckGL.experimental.DeckGLJS(r),this.map.on("render",this._moveEvent.bind(this)),this.map.on("resize",this._resizeEvent.bind(this)),this._draw(),this}},{key:"remove",value:function(){this.map.off("render",this._moveEvent.bind(this)),this.map.off("resize",this._resizeEvent.bind(this)),this.map.getCanvasContainer().removeChild(this.canvas)}},{key:"removeFromMap",value:function(){this.remove(),this.clear()}},{key:"moveTo",value:function(e,t){var r=document.getElementById(this.id);if(t=void 0===t||t){var n=document.getElementById(e);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(e);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(e){this.canvas&&e!==this.visibility&&(this.visibility=e,this.canvas.style.display=e?"block":"none")}},{key:"setStyle",value:function(e){JA.extend(this.props,e),this._createLayerByLayerTypeID(),this.update()}},{key:"setData",value:function(e){this.data=this.data||[],this.data.length=0;var t=JA.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]),this.layer.props.data.length=0;for(var r=0;r<t.length;r++)this.layer.props.data.push(t[r]);this.data=this.layer.props.data,this.update()}},{key:"addData",value:function(e){this.data=this.data||[];var t=JA.isArray(e)?[].concat(e):[e];this.layer.props.data||(this.layer.props.data=[]);for(var r=0;r<t.length;r++)this.layer.props.data.push(t[r]);this.update()}},{key:"update",value:function(){if("Awaiting state"!==this.layer.lifecycle){this.layer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0})}this._draw()}},{key:"clear",value:function(){this.removeData(),this.deckGL.finalize()}},{key:"removeData",value:function(){this.data.length=0,this.layer.props.data&&(this.layer.props.data.length=0),this.update()}},{key:"_draw",value:function(){var e=this._getState();e.layers=[this.layer],e.canvas=this.canvas,this.deckGL.setProps(e)}},{key:"_getState",value:function(){var e=this.map,t=parseInt(this.canvas.style.width),r=parseInt(this.canvas.style.height),n=e.getCenter(),o={width:t,height:r,longitude:n.lng,latitude:n.lat,zoom:e.getZoom(),maxZoom:e.getMaxZoom(),pitch:e.getPitch(),bearing:e.getBearing()},i={};for(var a in o)i[a]=o[a];for(var s in this.props)i[s]=this.props[s];return e.getCRS&&e.getCRS()!==FA.a.CRS.EPSG3857&&(i.coordinateSystem=this.coordinateSystem,i.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem),i.data=this.data,i}},{key:"_createLayerByLayerTypeID",value:function(){if(this.props.data=this.data,this.props.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem,this.props.coordinateSystem=this.coordinateSystem,this.props.pickable=Boolean(this.props.onClick)||Boolean(this.props.onHover),"scatter-plot"===this.layerTypeID)this.props.id="scatter-plot",this._createScatterPlotLayer();else if("path-layer"===this.layerTypeID)this.props.id="path-layer",this._createPathLayer();else if("polygon-layer"===this.layerTypeID)this.props.id="polygon-layer",this._createPolygonLayer();else if("arc-layer"===this.layerTypeID)this.props.id="arc-layer",this._createArcLineLayer();else{if("hexagon-layer"!==this.layerTypeID)throw new Error(this.layerTypeID+" does not support");this.props.id="hexagon-layer",this._createHexagonLayer()}}},{key:"_createScatterPlotLayer",value:function(){var e=this;this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(e){if(!e)return[0,0,0];var t=e.getLngLat();return t&&[t.lng,t.lat,0]},this.callback.getColor&&(this.props.getColor=this.callback.getColor?this.callback.getColor:function(t){var r=t&&t.getStyle();return r&&r.color||e.props.color}),this.callback.getRadius&&(this.props.getRadius=this.callback.getRadius?this.callback.getRadius:function(t){var r=t&&t.getStyle();return r&&r.radius||e.props.radius}),(this.props.color||this.props.radius)&&(this.props.updateTriggers={},this.props.radius&&(this.props.updateTriggers.getRadius=[this.props.radius]),this.props.color&&(this.props.updateTriggers.getColor=[this.props.color])),this.layer=new window.DeckGL.ScatterplotLayer(this.props)}},{key:"_createPathLayer",value:function(){this.props.getPath=this.callback.getPath?this.callback.getPath:function(e){return e.geometry.coordinates},this.callback.getColor&&(this.props.getColor=this.callback.getColor),this.callback.getWidth&&(this.props.getWidth=this.callback.getWidth),this.callback.getDashArray&&(this.props.getDashArray=this.callback.getDashArray),this.layer=new window.DeckGL.PathLayer(this.props)}},{key:"_createPolygonLayer",value:function(){this.props.getPolygon=this.callback.getPolygon?this.callback.getPolygon:function(e){return e.geometry.coordinates},this.callback.getElevation&&(this.props.getElevation=this.callback.getElevation),this.callback.getFillColor&&(this.props.getFillColor=this.callback.getFillColor),this.callback.getLineColor&&(this.props.getLineColor=this.callback.getLineColor),this.callback.getLineWidth&&(this.props.getLineWidth=this.callback.getLineWidth),this.props.updateTriggers={},this.props.updateTriggers.getColor=this.props.color?this.props.color:[0,0,128,128],this.layer=new window.DeckGL.PolygonLayer(this.props)}},{key:"_createArcLineLayer",value:function(){this.props.getSourcePosition=this.callback.getSourcePosition?this.callback.getSourcePosition:function(e){return e?e.geometry.coordinates[0]:[0,0,0]},this.props.getTargetPosition=this.callback.getTargetPosition?this.callback.getTargetPosition:function(e){return e?e.geometry.coordinates[1]:[0,0,0]},this.callback.getStrokeWidth&&(this.props.getStrokeWidth=this.callback.getStrokeWidth),this.callback.getSourceColor&&(this.props.getSourceColor=this.callback.getSourceColor),this.callback.getTargetColor&&(this.props.getTargetColor=this.callback.getTargetColor),this.layer=new window.DeckGL.ArcLayer(this.props)}},{key:"_createHexagonLayer",value:function(){this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(e){return e?e.geometry.coordinates:[0,0,0]},this.callback.getColorValue&&(this.props.getColorValue=this.callback.getColorValue),this.callback.getElevationValue&&(this.props.getElevationValue=this.callback.getElevationValue),this.layer=new window.DeckGL.HexagonLayer(this.props)}},{key:"_initContainer",value:function(){this.canvas=this._createCanvas(),this.mapContainer=this.map.getCanvasContainer(),this.mapContainer.appendChild(this.canvas)}},{key:"_createCanvas",value:function(){var e=document.createElement("canvas");e.id=this.id,e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.cursor="";var t=this.map;return e.width=parseInt(t.getCanvas().style.width),e.height=parseInt(t.getCanvas().style.height),e.style.width=t.getCanvas().style.width,e.style.height=t.getCanvas().style.height,e}},{key:"_moveEvent",value:function(){this._draw()}},{key:"_resizeEvent",value:function(){var e=this.canvas,t=this.map;e.width=parseInt(t.getCanvas().style.width),e.height=parseInt(t.getCanvas().style.height),e.style.width=t.getCanvas().style.width,e.style.height=t.getCanvas().style.height,this._draw()}}])&&UR(t.prototype,r),n&&UR(t,n),e}();FA.a.supermap.DeckglLayer=HR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var JR={getPoint:function(e){if(e&&e instanceof Array)return new yj.DataSet([{geometry:{type:"Point",coordinates:e}}])},getPoints:function(e){if(e&&e instanceof Array){var t=[];return e.map(function(e){return t.push({geometry:{type:"Point",coordinates:e.geometry.coordinates}}),e}),new yj.DataSet(t)}},getCurveLines:function(e,t){if(e&&e instanceof Array&&t&&t instanceof Array){var r=[];return t.map(function(t){var n=t.geometry&&t.geometry.coordinates,o={lng:n[0],lat:n[1]},i={lng:e[0],lat:e[1]},a=yj.utilCurve.getPoints([i,o]);return r.push({geometry:{type:"LineString",coordinates:a}}),t}),new yj.DataSet(r)}},getCurveDynamicPoints:function(e,t){if(e&&e instanceof Array&&t&&t instanceof Array){var r=[];return t.map(function(t){for(var n=t.geometry&&t.geometry.coordinates,o={lng:n[0],lat:n[1]},i={lng:e[0],lat:e[1]},a=yj.utilCurve.getPoints([i,o]),s=0;s<a.length;s++)r.push({geometry:{type:"Point",coordinates:a[s]},time:s});return t}),new yj.DataSet(r)}}};FA.a.supermap.MapvDataSet=JR,
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
FA.a.supermap=FA.a.supermap||{},FA.a.supermap.map=FA.a.supermap.map||{};var WR=function(e,t){t=t||{};var r={};r.version=t.version||8,r.layers=t.layers||[],r.light=t.light||{anchor:"viewport",color:"#fcf6ef",intensity:.5,position:[1.15,201,20]};var n={version:r.version,sources:{"vector-tiles":{type:"vector",tiles:[e]}},layers:r.layers,light:r.light};return null!=t.sprite&&(n.sprite=t.sprite),null!=t.glyphs&&(n.glyphs=t.glyphs),n},VR=function(e,t){t&&e&&e.addLayer({id:"background",type:"background",paint:{"background-color":t}},"background")},zR=function(e,t,r,n,o,i){if(t&&e){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);for(var a=0;a<t.length;a++){var s=i?i[a]:null,l=qR(t[a],r,o,s,n);e.addLayer(l,t[a]),e.moveLayer(t[a])}}};function qR(e,t,r,n,o){return{id:e,type:t,source:r||"vector-tiles","source-layer":n||e,paint:o}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function YR(e){return(YR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QR(e){return(QR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KR(e,t){return(KR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.map.getDefaultVectorTileStyle=WR,FA.a.supermap.map.setBackground=VR,FA.a.supermap.map.setPaintProperty=zR;var ZR=function(e){function t(e,r){var n,o,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(i=QR(t).call(this))||"object"!==YR(i)&&"function"!=typeof i?XR(o):i).options=r||{},n.url=e,n.fire("initialized",XR(n)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KR(e,t)}(t,FA.a.Evented),t}();function $R(e){return($R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tL(e,t){return!t||"object"!==$R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rL(e){return(rL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nL(e,t){return(nL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.ServiceBase=ZR;var oL=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tL(this,rL(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nL(e,t)}(t,ZR),r=t,(n=[{key:"code",value:function(e,t){var r=this;new to(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).code(ge.urlPathAppend(r.url,"geocoding"),e)}},{key:"decode",value:function(e,t){var r=this;new to(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).decode(ge.urlPathAppend(r.url,"geodecoding"),e)}}])&&eL(r.prototype,n),o&&eL(r,o),t}();function iL(e){return(iL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sL(e,t){return!t||"object"!==iL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lL(e){return(lL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uL(e,t){return(uL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.AddressMatchService=oL;var cL=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sL(this,lL(t).call(this,e,r))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uL(e,t)}(t,ZR),r=t,(n=[{key:"queryChart",value:function(e,t,r){var n=this,o=n._processParams(e),i=n._processFormat(r);new sa(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:i}).processAsync(o)}},{key:"getChartFeatureInfo",value:function(e){var t=this,r=t.url.concat();r=ge.urlPathAppend(r,"chartFeatureInfoSpecs"),new Yi(r,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,serverType:t.options.serverType,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).processAsync()}},{key:"_processParams",value:function(e){if(!e)return{};e.returnContent=null==e.returnContent||e.returnContent,e.filter&&(e.chartQueryFilterParameters=JA.isArray(e.filter)?e.filter:[e.filter]),e.bounds&&(e.bounds instanceof Array&&(e.bounds=new _e(e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3])),e.bounds instanceof FA.a.LngLatBounds&&(e.bounds=new _e(e.bounds.getSouthWest().lng,e.bounds.getSouthWest().lat,e.bounds.getNorthEast().lng,e.bounds.getNorthEast().lat)))}},{key:"_processFormat",value:function(e){return e||o.GEOJSON}}])&&aL(r.prototype,n),i&&aL(r,i),t}();function fL(e){return(fL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hL(e){return(hL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dL(e,t){return(dL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.ChartService=cL;var vL=function(e){function t(e,r){var n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=r||{}).projection&&(r.prjCoordSys=r.projection),o=this,(n=!(i=hL(t).call(this,e,r))||"object"!==fL(i)&&"function"!=typeof i?yL(o):i).dataFlow=new Aa(e,r),n.dataFlow.events.on({broadcastSocketConnected:n._defaultEvent,broadcastSocketError:n._defaultEvent,broadcastFailed:n._defaultEvent,broadcastSucceeded:n._defaultEvent,subscribeSocketConnected:n._defaultEvent,subscribeSocketError:n._defaultEvent,messageSucceeded:n._defaultEvent,setFilterParamSucceeded:n._defaultEvent,scope:yL(n)});var a=yL(n);return a.on("subscribeSocketConnected",function(e){a.fire("subscribesucceeded",e)}),n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dL(e,t)}(t,ZR),r=t,(n=[{key:"initBroadcast",value:function(){return this.dataFlow.initBroadcast(),this}},{key:"broadcast",value:function(e){this.dataFlow.broadcast(e)}},{key:"initSubscribe",value:function(){return this.dataFlow.initSubscribe(),this}},{key:"setExcludeField",value:function(e){return this.dataFlow.setExcludeField(e),this.options.excludeField=e,this}},{key:"setGeometry",value:function(e){return this.dataFlow.setGeometry(e),this.options.geometry=e,this}},{key:"unSubscribe",value:function(){this.dataFlow.unSubscribe()}},{key:"unBroadcast",value:function(){this.dataFlow.unBroadcast()}},{key:"_defaultEvent",value:function(e){this.fire(e.eventType||e.type,e)}}])&&pL(r.prototype,n),o&&pL(r,o),t}();function mL(e){return(mL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gL(e,t){return!t||"object"!==mL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function SL(e){return(SL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wL(e,t){return(wL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.DataFlowService=vL;var OL=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gL(this,SL(t).call(this,e,r))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wL(e,t)}(t,ZR),r=t,(n=[{key:"getFeaturesByIDs",value:function(e,t,r){var n=this;new Ap(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"getFeaturesByBounds",value:function(e,t,r){var n=this;new Hf(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"getFeaturesByBuffer",value:function(e,t,r){var n=this;new rp(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"getFeaturesBySQL",value:function(e,t,r){var n=this;new Wp(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"getFeaturesByGeometry",value:function(e,t,r){var n=this;new vp(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"editFeatures",value:function(e,t){if(e&&e.dataSourceName&&e.dataSetName){var r=this,n=r.url,o=e.dataSourceName,i=e.dataSetName;n=ge.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new Cs(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(r._processParams(e))}}},{key:"_processParams",value:function(e){if(!e)return{};var t=this;if(e.returnContent=null==e.returnContent||e.returnContent,e.fromIndex=e.fromIndex?e.fromIndex:0,e.toIndex=0===e.toIndex?0:e.toIndex?e.toIndex:-1,e.bounds&&(e.bounds=JA.toSuperMapBounds(e.bounds)),e.editType&&(e.editType=e.editType.toLowerCase()),e.geometry&&(e.geometry instanceof FA.a.LngLatBounds?e.geometry=JA.toSuperMapPolygon(e.geometry):e.geometry=JA.toSuperMapGeometry(e.geometry)),e.features){var r=[];JA.isArray(e.features)?e.features.map(function(e){return r.push(t._createServerFeature(e)),r}):r.push(t._createServerFeature(e.features)),e.features=r}return e}},{key:"_createServerFeature",value:function(e){var t={},r=[],n=[],o=e.properties;for(var i in o)r.push(i),n.push(o[i]);return t.fieldNames=r,t.fieldValues=n,e.id&&(t.id=e.id),t.geometry=JA.toSuperMapGeometry(e),t}},{key:"_processFormat",value:function(e){return e||o.GEOJSON}}])&&bL(r.prototype,n),i&&bL(r,i),t}();function _L(e){return(_L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function CL(e,t){return!t||"object"!==_L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function EL(e){return(EL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TL(e,t){return(TL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.FeatureService=OL;var kL=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),CL(this,EL(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TL(e,t)}(t,ZR),r=t,(n=[{key:"getFields",value:function(e,t){var r=this;new Kp(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},datasource:e.datasource,dataset:e.dataset}).processAsync()}},{key:"getFieldStatisticsInfo",value:function(e,t){var r=this,n=e.fieldName,o=e.statisticMode;o&&!JA.isArray(o)&&(o=[o]),r.currentStatisticResult={fieldName:n},r._statisticsCallback=t,o.forEach(function(t){r.currentStatisticResult[t]=null,r._fieldStatisticRequest(e.datasource,e.dataset,n,t)})}},{key:"_fieldStatisticRequest",value:function(e,t,r,n){var o=this;new gu(o.url,{eventListeners:{scope:o,processCompleted:o._processCompleted,processFailed:o._statisticsCallback},datasource:e,dataset:t,field:r,statisticMode:n,crossOrigin:o.options.crossOrigin,headers:o.options.headers}).processAsync()}},{key:"_processCompleted",value:function(e){var t=this,r=!0,n=e.result;for(var o in this.currentStatisticResult&&null==t.currentStatisticResult[n.mode]&&(this.currentStatisticResult[n.mode]=n.result),t.currentStatisticResult)if(null==t.currentStatisticResult[o]){r=!1;break}r&&t._statisticsCallback({result:t.currentStatisticResult})}}])&&PL(r.prototype,n),o&&PL(r,o),t}();function xL(e){return(xL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jL(e,t){return!t||"object"!==xL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function RL(e){return(RL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LL(e,t){return(LL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.FieldService=kL;var ML=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),jL(this,RL(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LL(e,t)}(t,ZR),r=t,(n=[{key:"getGridCellInfos",value:function(e,t){if(!e)return null;var r=this;new ah(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}}])&&AL(r.prototype,n),o&&AL(r,o),t}();function NL(e){return(NL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function DL(e,t){return!t||"object"!==NL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function FL(e){return(FL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BL(e,t){return(BL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.GridCellInfosService=ML;var GL=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),DL(this,FL(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BL(e,t)}(t,ZR),r=t,(n=[{key:"getLayersInfo",value:function(e){var t=this;new Ed(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,serverType:t.options.serverType,eventListeners:{processCompleted:e,processFailed:e}}).processAsync()}},{key:"setLayerInfo",value:function(e,t){if(e){var r=this,n=e.resourceID,o=e.tempLayerName,i=e.layerInfo;if(n&&o){var a=ge.urlPathAppend(r.url,"tempLayersSet/"+n+"/"+o);new dg(a,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(i)}}}},{key:"setLayersInfo",value:function(e,t){if(e){var r=this,n=e.resourceID,o=!!e.isTempLayers&&e.isTempLayers,i=e.layersInfo;if((!o||n)&&i)new Pg(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{processCompleted:t,processFailed:t},resourceID:n,isTempLayers:o}).processAsync(i)}}},{key:"setLayerStatus",value:function(e,t){if(e){var r=this;new Lg(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(e)}}}])&&IL(r.prototype,n),o&&IL(r,o),t}();function UL(e){return(UL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function JL(e,t){return!t||"object"!==UL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function WL(e){return(WL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VL(e,t){return(VL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.LayerInfoService=GL;var zL=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),JL(this,WL(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VL(e,t)}(t,ZR),r=t,(n=[{key:"getMapInfo",value:function(e){var t=this;new zv(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,serverType:t.options.serverType,eventListeners:{scope:t,processCompleted:e,processFailed:e},projection:t.options.projection}).processAsync()}},{key:"getTilesets",value:function(e){var t=this;new Fw(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,serverType:t.options.serverType,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).processAsync()}}])&&HL(r.prototype,n),o&&HL(r,o),t}();function qL(e){return(qL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function QL(e,t){return!t||"object"!==qL(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function XL(e){return(XL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KL(e,t){return(KL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.MapService=zL;var ZL=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),QL(this,XL(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KL(e,t)}(t,ZR),r=t,(n=[{key:"measureDistance",value:function(e,t){this.measure(e,"DISTANCE",t)}},{key:"measureArea",value:function(e,t){this.measure(e,"AREA",t)}},{key:"measure",value:function(e,t,r){var n=this;new cm(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,measureMode:t,eventListeners:{scope:n,processCompleted:r,processFailed:r}}).processAsync(n._processParam(e))}},{key:"_processParam",value:function(e){return!e||e.geometry instanceof Ce||(e.geometry=JA.toSuperMapGeometry(e.geometry)),e}}])&&YL(r.prototype,n),o&&YL(r,o),t}();function $L(e){return($L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tM(e,t){return!t||"object"!==$L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rM(e){return(rM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nM(e,t){return(nM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.MeasureService=ZL;var oM=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tM(this,rM(t).call(this,e,r))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nM(e,t)}(t,ZR),r=t,(n=[{key:"burstPipelineAnalyst",value:function(e,t){var r=this;new Ui(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(r._processParams(e))}},{key:"computeWeightMatrix",value:function(e,t){var r=this;new Pa(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(r._processParams(e))}},{key:"findClosestFacilities",value:function(e,t,r){var n=this;new ku(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"streamFacilityAnalyst",value:function(e,t,r){var n=this;new ul(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"findLocation",value:function(e,t,r){var n=this;new Du(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"findPath",value:function(e,t,r){var n=this;new tc(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"findTSPPaths",value:function(e,t,r){var n=this;new gc(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"findMTSPPaths",value:function(e,t,r){var n=this;new zu(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"findServiceAreas",value:function(e,t,r){var n=this;new cc(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"updateEdgeWeight",value:function(e,t){var r=this;new OO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"updateTurnNodeWeight",value:function(e,t){var r=this;new jO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"_processParams",value:function(e){if(!e)return{};var t=this;if(e.centers&&JA.isArray(e.centers)&&e.centers.map(function(r,n){return e.centers[n]=t._toPointObject(r),e.centers[n]}),e.nodes&&JA.isArray(e.nodes)&&e.nodes.map(function(r,n){return e.nodes[n]=t._toPointObject(r),e.nodes[n]}),e.event&&(e.event=t._toPointObject(e.event)),e.facilities&&JA.isArray(e.facilities)&&e.facilities.map(function(r,n){return e.facilities[n]=t._toPointObject(r),e.facilities[n]}),e.parameter&&e.parameter.barrierPoints){var r=e.parameter.barrierPoints;JA.isArray(r)?r.map(function(r,n){return e.parameter[n]=t._toPointObject(r),e.parameter.barrierPoints[n]}):e.parameter.barrierPoints=[r instanceof FA.a.LngLat?{x:r.lng,y:r.lat}:r]}return e}},{key:"_toPointObject",value:function(e){return JA.isArray(e)?{x:e[0],y:e[1]}:e instanceof FA.a.LngLat?{x:e.lng,y:e.lat}:e instanceof FA.a.Point?{x:e.x,y:e.y}:e}},{key:"_processFormat",value:function(e){return e||o.GEOJSON}}])&&eM(r.prototype,n),i&&eM(r,i),t}();function iM(e){return(iM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sM(e,t){return!t||"object"!==iM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lM(e){return(lM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uM(e,t){return(uM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.NetworkAnalystService=oM;var cM=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sM(this,lM(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uM(e,t)}(t,ZR),r=t,(n=[{key:"sinksFacilityAnalyst",value:function(e,t){var r=this;new Gs(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"sourcesFacilityAnalyst",value:function(e,t){var r=this;new el(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"traceUpFacilityAnalyst",value:function(e,t){var r=this;new Dl(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"traceDownFacilityAnalyst",value:function(e,t){var r=this;new _l(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"upstreamFacilityAnalyst",value:function(e,t){var r=this;new Kl(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}}])&&aM(r.prototype,n),o&&aM(r,o),t}();function fM(e){return(fM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hM(e,t){return!t||"object"!==fM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yM(e){return(yM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dM(e,t){return(dM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.NetworkAnalyst3DService=cM;var vM=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=hM(this,yM(t).call(this,e,r))).kernelDensityJobs={},n.summaryMeshJobs={},n.queryJobs={},n.summaryRegionJobs={},n.vectorClipJobs={},n.overlayGeoJobs={},n.buffersJobs={},n.topologyValidatorJobs={},n.summaryAttributesJobs={},n}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dM(e,t)}(t,ZR),r=t,(n=[{key:"getKernelDensityJobs",value:function(e,t){var r=this,n=r._processFormat(t);new bv(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getKernelDensityJobs()}},{key:"getKernelDensityJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new bv(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getKernelDensityJob(e)}},{key:"addKernelDensityJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new bv(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.kernelDensityJobs[e.id]=e.state}},format:a}).addKernelDensityJob(i,r)}},{key:"getKernelDensityJobState",value:function(e){return this.kernelDensityJobs[e]}},{key:"getSummaryMeshJobs",value:function(e,t){var r=this,n=r._processFormat(t);new dS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getSummaryMeshJobs()}},{key:"getSummaryMeshJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new dS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getSummaryMeshJob(e)}},{key:"addSummaryMeshJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new dS(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryMeshJobs[e.id]=e.state}},format:a}).addSummaryMeshJob(i,r)}},{key:"getSummaryMeshJobState",value:function(e){return this.summaryMeshJobs[e]}},{key:"getQueryJobs",value:function(e,t){var r=this,n=r._processFormat(t);new Hg(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,serverType:r.options.serverType,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getQueryJobs()}},{key:"getQueryJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new Hg(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getQueryJob(e)}},{key:"addQueryJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new Hg(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.queryJobs[e.id]=e.state}},format:a}).addQueryJob(i,r)}},{key:"getQueryJobState",value:function(e){return this.queryJobs[e]}},{key:"getSummaryRegionJobs",value:function(e,t){var r=this,n=r._processFormat(t);new PS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getSummaryRegionJobs()}},{key:"getSummaryRegionJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new PS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getSummaryRegionJob(e)}},{key:"addSummaryRegionJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new PS(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryRegionJobs[e.id]=e.state}},format:a}).addSummaryRegionJob(i,r)}},{key:"getSummaryRegionJobState",value:function(e){return this.summaryRegionJobs[e]}},{key:"getVectorClipJobs",value:function(e,t){var r=this,n=r._processFormat(t);new GO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getVectorClipJobs()}},{key:"getVectorClipJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new GO(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,serverType:n.options.serverType,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getVectorClipJob(e)}},{key:"addVectorClipJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new GO(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,serverType:o.options.serverType,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.vectorClipJobs[e.id]=e.state}},format:a}).addVectorClipJob(i,r)}},{key:"getVectorClipJobState",value:function(e){return this.vectorClipJobs[e]}},{key:"getOverlayGeoJobs",value:function(e,t){var r=this,n=r._processFormat(t);new Em(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,serverType:r.options.serverType,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getOverlayGeoJobs()}},{key:"getOverlayGeoJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new Em(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,serverType:n.options.serverType,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getOverlayGeoJob(e)}},{key:"addOverlayGeoJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new Em(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,serverType:o.options.serverType,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.overlayGeoJobs[e.id]=e.state}},format:a}).addOverlayGeoJob(i,r)}},{key:"getoverlayGeoJobState",value:function(e){return this.overlayGeoJobs[e]}},{key:"getBuffersJobs",value:function(e,t){var r=this,n=r._processFormat(t);new Ci(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,serverType:r.options.serverType,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getBuffersJobs()}},{key:"getBuffersJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new Ci(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,serverType:n.options.serverType,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getBuffersJob(e)}},{key:"addBuffersJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new Ci(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,serverType:o.options.serverType,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.buffersJobs[e.id]=e.state}},format:a}).addBuffersJob(i,r)}},{key:"getBuffersJobState",value:function(e){return this.buffersJobs[e]}},{key:"getTopologyValidatorJobs",value:function(e,t){var r=this,n=r._processFormat(t);new qw(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,serverType:r.options.serverType,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getTopologyValidatorJobs()}},{key:"getTopologyValidatorJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new qw(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,serverType:n.options.serverType,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getTopologyValidatorJob(e)}},{key:"addTopologyValidatorJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new qw(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,serverType:o.options.serverType,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.topologyValidatorJobs[e.id]=e.state}},format:a}).addTopologyValidatorJob(i,r)}},{key:"getTopologyValidatorJobState",value:function(e){return this.topologyValidatorJobs[e]}},{key:"getSummaryAttributesJobs",value:function(e,t){var r=this,n=r._processFormat(t);new aS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,serverType:r.options.serverType,crossOrigin:r.options.crossOrigin,headers:r.options.headers,eventListeners:{scope:r,processCompleted:e,processFailed:e},format:n}).getSummaryAttributesJobs()}},{key:"getSummaryAttributesJob",value:function(e,t,r){var n=this,o=n._processFormat(r);new aS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,serverType:n.options.serverType,crossOrigin:n.options.crossOrigin,headers:n.options.headers,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:o}).getSummaryAttributesJob(e)}},{key:"addSummaryAttributesJob",value:function(e,t,r,n){var o=this,i=o._processParams(e),a=o._processFormat(n);new aS(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,serverType:o.options.serverType,crossOrigin:o.options.crossOrigin,headers:o.options.headers,eventListeners:{scope:o,processCompleted:t,processFailed:t,processRunning:function(e){o.summaryAttributesJobs[e.id]=e.state}},format:a}).addSummaryAttributesJob(i,r)}},{key:"getSummaryAttributesJobState",value:function(e){return this.summaryAttributesJobs[e]}},{key:"_processFormat",value:function(e){return e||o.GEOJSON}},{key:"_processParams",value:function(e){return e?(e.bounds&&(e.bounds=JA.toSuperMapBounds(e.bounds)),e.query&&(e.query=JA.toSuperMapBounds(e.query)),e.geometryQuery&&(e.geometryQuery=JA.toProcessingParam(e.geometryQuery)),e.geometryClip&&(e.geometryClip=JA.toProcessingParam(e.geometryClip)),e):{}}}])&&pM(r.prototype,n),i&&pM(r,i),t}();function mM(e){return(mM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gM(e,t){return!t||"object"!==mM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function SM(e){return(SM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wM(e,t){return(wM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.ProcessingService=vM;var OM=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gM(this,SM(t).call(this,e,r))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wM(e,t)}(t,ZR),r=t,(n=[{key:"queryByBounds",value:function(e,t,r){var n=this;new Qm(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"queryByDistance",value:function(e,t,r){var n=this;new cb(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"queryBySQL",value:function(e,t,r){var n=this;new Gb(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"queryByGeometry",value:function(e,t,r){var n=this;new Cb(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"_processParams",value:function(e){return e?(e.returnContent=null==e.returnContent||e.returnContent,e.queryParams&&!JA.isArray(e.queryParams)&&(e.queryParams=[e.queryParams]),e.bounds&&(e.bounds instanceof Array&&(e.bounds=new _e(e.bounds[0],e.bounds[1],e.bounds[2],e.bounds[3])),e.bounds instanceof FA.a.LngLatBounds&&(e.bounds=new _e(e.bounds.getSouthWest().lng,e.bounds.getSouthWest().lat,e.bounds.getNorthEast().lng,e.bounds.getNorthEast().lat))),e.geometry&&(e.geometry instanceof FA.a.LngLat&&(e.geometry=new Xe(e.geometry.lng,e.geometry.lat)),e.geometry instanceof FA.a.Point&&(e.geometry=new Xe(e.geometry.x,e.geometry.y)),e.geometry instanceof FA.a.LngLatBounds&&(e.geometry=JA.toSuperMapPolygon(e.geometry)),e.geometry instanceof Ce||(e.geometry=JA.toSuperMapGeometry(e.geometry))),e):{}}},{key:"_processFormat",value:function(e){return e||o.GEOJSON}}])&&bM(r.prototype,n),i&&bM(r,i),t}();function _M(e){return(_M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function CM(e,t){return!t||"object"!==_M(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function EM(e){return(EM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TM(e,t){return(TM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.QueryService=OM;var kM=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),CM(this,EM(t).call(this,e,r))}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TM(e,t)}(t,ZR),r=t,(n=[{key:"getAreaSolarRadiationResult",value:function(e,t,r){var n=this;new Oo(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"bufferAnalysis",value:function(e,t,r){var n=this;new ii(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"densityAnalysis",value:function(e,t,r){var n=this;new vs(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"generateSpatialData",value:function(e,t,r){var n=this;new kc(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"geoRelationAnalysis",value:function(e,t,r){var n=this;new gf(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"interpolationAnalysis",value:function(e,t,r){var n=this;new uv(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"mathExpressionAnalysis",value:function(e,t,r){var n=this;new tm(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"overlayAnalysis",value:function(e,t,r){var n=this;new mm(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"routeCalculateMeasure",value:function(e,t,r){var n=this;new Qb(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"routeLocate",value:function(e,t,r){var n=this;new og(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"surfaceAnalysis",value:function(e,t,r){var n=this;new LS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"terrainCurvatureCalculate",value:function(e,t,r){var n=this;new HS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(e)}},{key:"thiessenAnalysis",value:function(e,t,r){var n=this;new Pw(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}).processAsync(n._processParams(e))}},{key:"geometrybatchAnalysis",value:function(e,t,r){for(var n=this,o=new jw(n.url,{serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},format:n._processFormat(r)}),i=[],a=0;a<e.length;a++){var s=e[a];i.push({analystName:s.analystName,param:n._processParams(s.param)})}o.processAsync(i)}},{key:"_processParams",value:function(e){if(!e)return{};if(e.bounds&&(e.bounds=JA.toSuperMapBounds(e.bounds)),e.inputPoints)for(var t=0;t<e.inputPoints.length;t++){var r=e.inputPoints[t];JA.isArray(r)&&(e.inputPoints[t]={x:r[0],y:r[1],tag:r[2]})}if(e.points)for(var n=0;n<e.points.length;n++){var o=e.points[n];e.points[n]=JA.toSuperMapPoint(o)}if(e.point&&(e.point=JA.toSuperMapPoint(e.point)),e.extractRegion&&(e.extractRegion=JA.toSuperMapGeometry(e.extractRegion)),e.extractParameter&&e.extractParameter.clipRegion&&(e.extractParameter.clipRegion=JA.toSuperMapGeometry(e.extractParameter.clipRegion)),e.clipParam&&e.clipParam.clipRegion&&(e.clipParam.clipRegion=JA.toSuperMapGeometry(e.clipParam.clipRegion)),e.sourceRoute&&e.sourceRoute){var i={type:"LINEM"};i.parts=[e.sourceRoute.geometry.coordinates.length],i.points=[];for(var a=0;a<e.sourceRoute.geometry.coordinates.length;a++){var s=e.sourceRoute.geometry.coordinates[a];i.points=i.points.concat({x:s[0],y:s[1],measure:s[2]})}e.sourceRoute=i}if(e.operateRegions&&JA.isArray(e.operateRegions)&&e.operateRegions.map(function(t,r){return e.operateRegions[r]=JA.toSuperMapGeometry(t),e.operateRegions[r]}),e.sourceGeometry){var l=null;e.sourceGeometrySRID&&(l=e.sourceGeometrySRID),e.sourceGeometry=JA.toSuperMapGeometry(e.sourceGeometry),l&&(e.sourceGeometry.SRID=l),delete e.sourceGeometry.sourceGeometrySRID}if(e.operateGeometry&&(e.operateGeometry=JA.toSuperMapGeometry(e.operateGeometry)),e.sourceGeometries){for(var u=[],c=0;c<e.sourceGeometries.length;c++)u.push(JA.toSuperMapGeometry(e.sourceGeometries[c]));e.sourceGeometries=u}if(e.operateGeometries){for(var f=[],p=0;p<e.operateGeometries.length;p++)f.push(JA.toSuperMapGeometry(e.operateGeometries[p]));e.operateGeometries=f}return e.sourceRoute&&e.sourceRoute.components&&JA.isArray(e.sourceRoute.components)&&e.sourceRoute.components.map(function(t,r){return e.sourceRoute.components[r]=JA.toSuperMapGeometry(t),e.sourceRoute.components[r]}),e}},{key:"_processFormat",value:function(e){return e||o.GEOJSON}}])&&PM(r.prototype,n),i&&PM(r,i),t}();function xM(e){return(xM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jM(e,t){return!t||"object"!==xM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function RM(e){return(RM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LM(e,t){return(LM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.SpatialAnalystService=kM;var MM=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),jM(this,RM(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LM(e,t)}(t,ZR),r=t,(n=[{key:"getThemeInfo",value:function(e,t){var r=this;new mw(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}}])&&AM(r.prototype,n),o&&AM(r,o),t}();function NM(e){return(NM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function DM(e,t){return!t||"object"!==NM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function FM(e){return(FM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BM(e,t){return(BM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.ThemeService=MM;var GM=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),DM(this,FM(t).call(this,e,r))}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BM(e,t)}(t,ZR),r=t,(n=[{key:"queryStop",value:function(e,t){var r=this;new Kg(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(e)}},{key:"analysisTransferPath",value:function(e,t){var r=this;new oO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(r._processParams(e))}},{key:"analysisTransferSolution",value:function(e,t){var r=this;new hO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).processAsync(r._processParams(e))}},{key:"_processParams",value:function(e){return e?(e.transferLines&&!JA.isArray(e.transferLines)&&(e.transferLines=[e.transferLines]),e.points&&JA.isArray(e.points)&&e.points.map(function(t,r){return e.points[r]=t instanceof FA.a.LngLat?{x:t.lng,y:t.lat}:t,e.points[r]}),e):{}}}])&&IM(r.prototype,n),o&&IM(r,o),t}();function UM(e){return(UM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function HM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function JM(e,t){return!t||"object"!==UM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function WM(e){return(WM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VM(e,t){return(VM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap.TrafficTransferAnalystService=GM;var zM=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),JM(this,WM(t).call(this,e,r))}var r,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VM(e,t)}(t,ZR),r=t,(o=[{key:"createWebPrintingJob",value:function(e,t){if(e){var r=this;new R_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).createWebPrintingJob(r._processParams(e))}}},{key:"getPrintingJob",value:function(e,t){var r=this;new R_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).getPrintingJob(e)}},{key:"getPrintingJobResult",value:function(e,t){var r=this;new R_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t}}).getPrintingJobResult(e)}},{key:"getLayoutTemplates",value:function(e){var t=this;new R_(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,serverType:t.options.serverType,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).getLayoutTemplates()}},{key:"_processParams",value:function(e){return e.layoutOptions&&e.layoutOptions.littleMapOptions&&(e.layoutOptions.littleMapOptions.center=this._toPointObject(e.layoutOptions.littleMapOptions.center)),e.exportOptions&&(e.exportOptions.center=this._toPointObject(e.exportOptions.center)),e}},{key:"_toPointObject",value:function(e){return JA.isArray(e)?{x:e[0],y:e[1]}:e instanceof n.Geometry.Point||e instanceof FA.a.Point?{x:e.x,y:e.y}:e instanceof FA.a.LngLat?{x:e.lng,y:e.lat}:e}}])&&HM(r.prototype,o),i&&HM(r,i),t}();FA.a.supermap.WebPrintingJobService=zM;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var qM=r(6),YM=r.n(qM),QM=r(10),XM=r.n(QM);function KM(e){return(KM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ZM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $M(e,t){return!t||"object"!==KM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eN(e){return(eN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tN(e,t){return(tN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/FA.a.supermap=FA.a.supermap||{};var rN=["559082264.0287178","279541132.0143589","139770566.0071794","69885283.00358972","34942641.50179486","17471320.75089743","8735660.375448715","4367830.1877224357","2183915.093862179","1091957.546931089","545978.7734655447","272989.7734655447","272989.3867327723","136494.6933663862","68247.34668319309","34123.67334159654","17061.83667079827","8530.918335399136","4265.459167699568","2132.729583849784"],nN=["5.590822640287176E8","2.795411320143588E8","1.397705660071794E8","6.98852830035897E7","3.494264150179485E7","1.7471320750897426E7","8735660.375448713","4367830.187724357","2183915.0938621783","1091957.5469310891","545978.7734655446","272989.3867327723","136494.69336638614","68247.34668319307","34123.673341596535","17061.836670798268","8530.918335399134"],oN=["GoogleCRS84Quad","GoogleMapsCompatible"],iN=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=$M(this,eN(t).call(this))).mapId=e,r=r||{},n.server=r.server||"https://www.supermapol.com",n.credentialKey=r.credentialKey,n.credentialValue=r.credentialValue,n.withCredentials=r.withCredentials||!1,n.target=r.target||"map",n._createWebMap(),n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tN(e,t)}(t,FA.a.Evented),r=t,(n=[{key:"resize",value:function(){this.map.resize()}},{key:"setMapId",value:function(e){this.mapId=e,this._createWebMap()}},{key:"setWebMapOptions",value:function(e){this.server=e.server,this._createWebMap()}},{key:"setMapOptions",value:function(e){var t=e.center,r=e.zoom,n=e.maxBounds,o=e.minZoom,i=e.maxZoom,a=e.isWorldCopy,s=e.bearing,l=e.pitch;t&&t.length&&this.map.setCenter(t),r&&this.map.setZoom(r),n&&this.map.setMaxBounds(n),o&&this.map.setMinZoom(o),i&&this.map.setMaxZoom(i),a&&this.map.setRenderWorldCopies(a),s&&this.map.setBearing(s),l&&this.map.setPitch(l)}},{key:"_createWebMap",value:function(){var e=this.server.split("");"/"!==e[e.length-1]&&(this.server+="/");var t=this.server+"web/maps/"+this.mapId+"/map";this.credentialValue&&this.credentialKey&&(t+="?"+this.credentialKey+"="+this.credentialValue);var r="getUrlResource.json?url=";if(this.excludePortalProxyUrl&&this.server.indexOf(r)>-1){var n=this.server.split(r);n.length>1&&(t=n[0]+r+this.server+"web/maps/"+this.mapId+"/map.json")}this._getMapInfo(t)}},{key:"_createMap",value:function(e){var t=[],r=e.layers;r&&r.length>0&&r.forEach(function(e){e.labelStyle&&t.push(e.labelStyle.fontFamily)},this),t.push("'supermapol-icons'");var n,o=t.join(","),i=e.center,a=e.level||0;a+=e.minScale&&e.maxScale?this._transformScaleToZoom(e.minScale,FA.a.CRS?FA.a.CRS.get(this.baseProjection):"EPSG:3857"):+Math.log2(this._getResolution(FA.a.CRS?FA.a.CRS.get(this.baseProjection).getExtent():[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892])/this._getResolution(e.extent)).toFixed(2),n=i?this._unproject([i.x,i.y]):new FA.a.LngLat(0,0),this.map=new FA.a.Map({container:this.target,center:n,zoom:a,style:{version:8,sources:{},layers:[]},crs:this.baseProjection,localIdeographFontFamily:o||""}),this.fire("mapinitialized")}},{key:"_getMapInfo",value:function(e){var t=this,r=-1===e.indexOf(".json")?"".concat(e,".json"):e;en.get(r,null,{withCredentials:this.withCredentials}).then(function(e){return e.json()}).then(function(e){t.baseProjection=e.projection,t.mapParams={title:e.title,description:e.description};if(!(t.baseProjection in{"EPSG:4490":"EPSG:4490","EPSG:4214":"EPSG:4214","EPSG:4610":"EPSG:4610","EPSG:3857":"EPSG:3857","EPSG:4326":"EPSG:4326"}))throw Error(Px.i18n("msg_crsunsupport"));t._createMap(e,t.mapSetting);var r=e.layers;t.map.on("load",function(){t._addBaseMap(e),r&&0!==r.length?t._addLayers(r):t._sendMapToUser(0,0)})}).catch(function(e){t.fire("getmapfailed",{error:e})})}},{key:"_addBaseMap",value:function(e){this._createBaseLayer(e)}},{key:"_createBaseLayer",value:function(e){var t=e.baseLayer||e,r=t.layerType;(r.indexOf("TIANDITU_VEC")>-1||r.indexOf("TIANDITU_IMG")>-1||r.indexOf("TIANDITU_TER")>-1)&&(r=r.substr(0,12));var n;switch(r){case"TIANDITU_VEC":case"TIANDITU_IMG":case"TIANDITU_TER":this._createTiandituLayer(e);break;case"BING":this._createBingLayer(t.name);break;case"WMS":this._createWMSLayer(t);break;case"WMTS":this._createWMTSLayer(t);break;case"TILE":case"SUPERMAP_REST":this._createDynamicTiledLayer(t);break;case"CLOUD":case"CLOUD_BLACK":case"OSM":case"JAPAN_ORT":case"JAPAN_RELIEF":case"JAPAN_PALE":case"JAPAN_STD":case"GOOGLE_CN":case"GOOGLE":n={CLOUD:"http://t2.dituhui.com/FileService/image?map=quanguo&type=web&x={x}&y={y}&z={z}",CLOUD_BLACK:"http://t3.dituhui.com/MapService/getGdp?x={x}&y={y}&z={z}",OSM:"http://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",GOOGLE:"https://www.google.cn/maps/vt/pb=!1m4!1m3!1i{z}!2i{x}!3i{y}!2m3!1e0!2sm!3i380072576!3m8!2szh-CN!3scn!5e1105!12m4!1e68!2m2!1sset!2sRoadmap!4e0!5m1!1e0",GOOGLE_CN:"https://mt{0-3}.google.cn/vt/lyrs=m&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}",JAPAN_STD:"https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png",JAPAN_PALE:"https://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png",JAPAN_RELIEF:"https://cyberjapandata.gsi.go.jp/xyz/relief/{z}/{x}/{y}.png",JAPAN_ORT:"https://cyberjapandata.gsi.go.jp/xyz/ort/{z}/{x}/{y}.jpg"}[r],this._createXYZLayer(t,n);break;case"MAPBOXSTYLE":this._createMapboxStyle(t)}}},{key:"_createMapboxStyle",value:function(e){var t,r=this,n=e.dataSource,o=void 0===n?{}:n,i=o.serverId,a=o.url;t=void 0!==i?"".concat(this.server,"web/datas/").concat(i,"/download"):a,en.get(t,null,{withCredentials:this.withCredentials,withoutFormatSuffix:!0,headers:{"Content-Type":"application/json;chartset=uft-8"}}).then(function(e){return e.json()}).then(function(e){r._matchStyleObject(e),r.map.setStyle(e)})}},{key:"_matchStyleObject",value:function(e){var t=e.sprite,r=e.glyphs;t&&"object"===KM(t)&&(e.sprite=Object.values(t)[0]),r&&"object"===KM(r)&&(e.glyphs=Object.values(r)[0])}},{key:"_createTiandituLayer",value:function(e){var t=this._getTiandituUrl(e),r=e.baseLayer.layerType,n=Boolean(e.baseLayer.labelLayerVisible),o=t.labelUrl,i=t.tiandituUrl;this._addBaselayer(i,"tianditu-layers-"+r),n&&this._addBaselayer(o,"tianditu-label-layers-"+r)}},{key:"_createWMTSLayer",value:function(e){var t=this,r=this._getWMTSUrl(e);this._filterWMTSIsMatched(e,function(n,o){n&&t._addBaselayer([r],"wmts-layers"+e.name,0,o)})}},{key:"_filterWMTSIsMatched",value:function(e,t){var r=this,n=!1,o=22,i=e.url;en.get(i,null,{withCredentials:!1,withoutFormatSuffix:!0}).then(function(e){return e.text()}).then(function(i){var a=YM.a?YM.a:window.convert,s=JSON.parse(a.xml2json(i,{compact:!0,spaces:4})).Capabilities.Contents.TileMatrixSet;Array.isArray(s)||(s=[s]);for(var l=0;l<s.length;l++)if(s[l]["ows:Identifier"]&&s[l]["ows:Identifier"]._text===e.tileMatrixSet)if(oN.indexOf(s[l].WellKnownScaleSet._text)>-1)n=!0;else{if(!s[l].WellKnownScaleSet||"Custom"!==s[l].WellKnownScaleSet._text)throw Error(Px.i18n("msg_tilematrixsetunsupport"));for(var u=[],c="EPSG:3857"===r.map.crs?rN:nN,f=0,p=c.length;f<p&&s[l].TileMatrix[f]&&c[f]===s[l].TileMatrix[f].ScaleDenominator._text;f++)u.push(c[f]);if(o=u.length-1,0===u.length)throw Error(Px.i18n("msg_tilematrixsetunsupport"));n=!0}t(n,o)}).catch(function(e){r.fire("getwmtsfailed",{error:e,map:r.map})})}},{key:"_createBingLayer",value:function(e){this.addLayer(["https://dynamic.t0.tiles.ditu.live.com/comp/ch/{quadkey}?it=G,TW,L,LA&mkt=zh-cn&og=109&cstl=w4c&ur=CN&n=z"],"bing-layers-"+e)}},{key:"_createXYZLayer",value:function(e,t){var r=[];if("OSM"===e.layerType){for(var n=t.match(/\w\-\w/g)[0],o=n[0],i=n[2],a="",s=97;s<123;s++)a+=String.fromCharCode(s);for(var l=a.split(""),u=l.indexOf(o),c=l.indexOf(i),f=l.slice(u,c+1),p=0;p<f.length;p++){var h=t.replace(/{\w\-\w}/g,f[p]);r.push(h)}}else if("GOOGLE_CN"===e.layerType)for(var y=t.match(/\d\-\d/g)[0],d=y[0],v=y[2],m=d;m<=v;m++){var b=t.replace(/{\d\-\d}/g,m);r.push(b)}else r=[t];this._addBaselayer(r,"XYZ-layers-"+e.name)}},{key:"_createDynamicTiledLayer",value:function(e){var t=e.url,r=e.layerID||e.name,n=e.minzoom,o=e.maxzoom;this._addBaselayer([t],r,n,o,!0)}},{key:"_createWMSLayer",value:function(e){var t=this._getWMSUrl(e);this._addBaselayer([t],"WMS-layers-"+e.name)}},{key:"_createVectorLayer",value:function(e,t){var r=e.style,n=e.featureType,o=e.layerID,i=e.visible,a={};a.style=this._transformStyleToMapBoxGl(r,n),a.layout={visibility:i};var s={type:"geojson",data:{type:"FeatureCollection",features:t}};this._addOverlayToMap(n,s,o,a),"POLYGON"===n&&r.strokeColor&&this._addStrokeLineForPoly(r,s,o+"-strokeLine",i)}},{key:"_getTiandituUrl",value:function(e){for(var t=/t0/gi,r={},n=e.baseLayer.layerType.split("_")[1].toLowerCase(),o=Boolean(e.baseLayer.labelLayerVisible),i="https://t0.tianditu.gov.cn/{layer}_{proj}/wmts?",a=i,s="EPSG:4326"===this.baseProjection?"c":"w",l={service:"WMTS",request:"GetTile",style:"default",version:"1.0.0",layer:n,tilematrixSet:s,format:"tiles",width:256,height:256},u=(i+=this._getParamString(l,i)+"&tilematrix={z}&tilerow={y}&tilecol={x}").replace("{layer}",n).replace("{proj}",s),c=[],f=0;f<8;f++)c.push(u.replace(t,"t".concat(f)));if(r.tiandituUrl=c,o){var p={vec:"cva",ter:"cta",img:"cia"}[n];l.layer=p,a=(a+=this._getParamString(l,a)+"&tilematrix={z}&tilerow={y}&tilecol={x}").replace("{layer}",p).replace("{proj}",s);for(var h=[],y=0;y<8;y++)h.push(a.replace(t,"t".concat(y)));r.labelUrl=h}return r}},{key:"_getWMSUrl",value:function(e){var t=e.url,r=(t=t.split("?")[0]).split("/"),n={service:"WMS",request:"GetMap",layers:r[r.length-1],styles:"",format:"image/png",transparent:"true",version:"1.1.1",width:256,height:256,srs:this.baseProjection},o="EPSG:4326"===this.baseProjection?"{bbox-epsg-4326}":"{bbox-epsg-3857}";return t+=this._getParamString(n,t)+"&bbox=".concat(o)}},{key:"_addLayers",value:function(e){var t=this;this.layers=e;var r,n=0,o=e.length;e.forEach(function(e,i){if(e.dataSource&&e.dataSource.serverId||"MARKER"===e.layerType){var a=e.dataSource?e.dataSource.serverId:e.serverId,s="".concat(t.server,"web/datas/").concat(a,"/content.json?pageSize=9999999&currentPage=1");a&&en.get(s,null,{withCredentials:t.withCredentials}).then(function(e){return e.json()}).then(function(a){if(!1===a.succeed)return n++,t._sendMapToUser(n,o),void t.fire("getlayersfailed",{error:a.error,map:t.map});a.type&&("JSON"===a.type||"GEOJSON"===a.type?(a.content=JSON.parse(a.content.trim()),r=t._formatGeoJSON(a.content,e)):"EXCEL"!==a.type&&"CSV"!==a.type||(r=t._excelData2Feature(a.content,e)),t._addLayer(e,r,i),n++,t._sendMapToUser(n,o))}).catch(function(e){n++,t._sendMapToUser(n,o),t.fire("getlayersfailed",{error:e,map:t.map})})}else if("SUPERMAP_REST"===e.layerType||"TILE"===e.layerType||"WMS"===e.layerType||"WMTS"===e.layerType)t._createBaseLayer(e),n++,t._sendMapToUser(n,o);else if(e.dataSource&&"REST_DATA"===e.dataSource.type){var l=e.dataSource;t._getFeatureBySQL(l.url,[l.dataSourseName||e.name],function(a){r=t._parseGeoJsonData2Feature({allDatas:{features:a.result.features.features},fileCode:e.projection,featureProjection:t.baseProjection}),t._addLayer(e,r,i),n++,t._sendMapToUser(n,o)},function(e){n++,t._sendMapToUser(n,o),t.fire("getfeaturesfailed",{error:e})})}else e.dataSource&&"REST_MAP"===e.dataSource.type&&e.dataSource.url&&t._queryFeatureBySQL(e.dataSource.url,e.dataSource.layerName,"smid=1",null,null,function(r){var a=r&&r.result.recordsets,s=a&&a[0],l=s.fields;if(s&&l){var u=[];for(var c in l){var f=l[c];0===f.indexOf("Sm")&&"SmID"!==f||u.push(f)}t._getFeatures(u,e,function(r){t._addLayer(e,r,i),n++,t._sendMapToUser(n,o)},function(e){n++,t.fire("getfeaturesfailed",{error:e,map:t.map})})}},function(e){t.fire("getlayersfailed",{error:e,map:t.map})})},this)}},{key:"_getFeatures",value:function(e,t,r,n){var o=this,i=t.dataSource,a=t.projection;this._queryFeatureBySQL(i.url,i.layerName,null,e,null,function(e){var t=e.result.recordsets[0].features.features,n=o._parseGeoJsonData2Feature({allDatas:{features:t},fileCode:a,featureProjection:o.baseProjection},"JSON");r(n)},function(e){n(e)})}},{key:"_addLayer",value:function(e,t,r){var n=e.layerType;e.layerID=n+"-"+e.name+"-"+r,e.visible=e.visible?"visible":"none",t[0]&&"Polygon"===t[0].geometry.type&&(t=this._handleMultyPolygon(t)),e.style&&e.filterCondition&&"RANGE"!==n&&"UNIQUE"!==n&&(t=this._getFiterFeatures(e.filterCondition,t)),"VECTOR"===n?"POINT"===e.featureType?"SYMBOL_POINT"===e.style.type?this._createSymbolLayer(e,t):this._createGraphicLayer(e,t):this._createVectorLayer(e,t):"UNIQUE"===n?this._createUniqueLayer(e,t):"RANGE"===n?this._createRangeLayer(e,t):"HEAT"===n?this._createHeatLayer(e,t):"MARKER"===n&&this._createMarkerLayer(e,t),e.labelStyle&&e.labelStyle.labelField&&this._addLabelLayer(e,t)}},{key:"_addLabelLayer",value:function(e,t){var r=e.labelStyle;this.map.addLayer({id:e.layerID+"label",type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:t}},paint:{"text-color":r.fill},layout:{"text-field":"{".concat(r.labelField,"}"),"text-size":parseFloat(r.fontSize)||12,"text-offset":r.offsetX?[r.offsetX/10||0,r.offsetY/10||0]:[0,-1.5],"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],visibility:e.visible}})}},{key:"_createSymbolLayer",value:function(e,t){document.getElementById("".concat(this.target)).classList.add("supermapol-icons-map");var r=e.style,n=e.style.unicode,o=String.fromCharCode(parseInt(n.replace(/^&#x/,""),16)),i=e.layerID;this.map.addSource(i+"-source",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:i,type:"symbol",source:i+"-source",paint:{"text-color":r.fillColor},layout:{"text-field":o,"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],visibility:e.visible}}),this.map.getSource(i+"-source").setData({type:"FeatureCollection",features:t})}},{key:"_createGraphicLayer",value:function(e,t){var r=this,n=e.style,o={},i=e.layerID,a={type:"geojson",data:{type:"FeatureCollection",features:t}};if("IMAGE_POINT"===n.type){var s=n.imageInfo,l=s.img;l&&l.src||(s.url=this.server+s.url),this.map.loadImage(s.url||l.src,function(t,o){t&&console.log(t);var s=2*Number.parseFloat((n.radius/o.height).toFixed(2));r.map.addImage("imageIcon",o),r.map.addLayer({id:i,type:"symbol",source:a,layout:{"icon-image":"imageIcon","icon-size":s,visibility:e.visible}})})}else if("SVG_POINT"===n.type){var u=n.url;this.svgDiv||(this.svgDiv=document.createElement("div"),document.body.appendChild(this.svgDiv)),this._getCanvasFromSVG(u,this.svgDiv,function(t){var o=t.toDataURL("img/png");o&&r.map.loadImage(o,function(o,s){o&&console.log(o);var l=Number.parseFloat((n.radius/t.width).toFixed(2));r.map.addImage("imageIcon",s),r.map.addLayer({id:i,type:"symbol",source:a,layout:{"icon-image":"imageIcon","icon-size":l,visibility:e.visible}})},r)})}else o.style=this._transformStyleToMapBoxGl(n,e.featureType),o.layout={visibility:e.visible},this._addOverlayToMap("POINT",a,i,o)}},{key:"_createUniqueLayer",value:function(e,t){var r=this._getUniqueStyleGroup(e,t);t=this._getFiterFeatures(e.filterCondition,t);var n=e.style,o={},i=e.themeSetting.themeField,a=e.featureType,s=["match",["get","index"]],l=e.layerID;t.forEach(function(e){r.forEach(function(t){t.value===e.properties[i]&&s.push(e.properties.index,t.color)})}),s.push("#ffffff"),o.style=this._transformStyleToMapBoxGl(n,a,s);var u=e.visible;o.layout={visibility:u};var c={type:"geojson",data:{type:"FeatureCollection",features:t}};this._addOverlayToMap(a,c,l,o),"POLYGON"===a&&n.strokeColor&&this._addStrokeLineForPoly(n,c,l+"-strokeLine",u)}},{key:"_getUniqueStyleGroup",value:function(e,t){var r=e.featureType,n=e.style,o=e.themeSetting,i=o.themeField,a=o.colors,s=[],l=o.customSettings;for(var u in t){var c=t[u].properties[i],f=!1;for(var p in s)if(s[p]===c){f=!0;break}f||s.push(c)}var h=a||this.defaultParameters.colors;h=fP.getGradientColors(h,s.length);var y=[];return s.forEach(function(e,t){var o=h[t];e in l&&(o=l[e]),"LINE"===r?n.strokeColor=o:n.fillColor=o,y.push({color:o,value:e})},this),y}},{key:"_getWMTSUrl",value:function(e){var t={service:"WMTS",request:"GetTile",version:"1.0.0",style:"default",layer:e.layer,tilematrixSet:e.tileMatrixSet,format:"image/png"},r=e.url;return r+=this._getParamString(t,r)+"&tilematrix={z}&tilerow={y}&tilecol={x}"}},{key:"_createMarkerLayer",value:function(e,t){var r=this;t&&t.forEach(function(t){var n=t.geometry.type.toUpperCase(),o=t.dv_v5_markerStyle;"POINT"===n&&o.text&&(n="TEXT");var i=r.setFeatureInfo(t);t.properties.useStyle=o,t.properties.featureInfo=i,"POINT"===n&&o.src&&-1===o.src.indexOf("http://")&&-1===o.src.indexOf("https://")&&(o.src=r.server+o.src);var a={type:"geojson",data:t},s=t.properties.index,l=n+"-"+s;if("POINT"===n&&o.src&&o.src.indexOf("svg")<=-1&&r.map.loadImage(o.src,function(t,n){t&&console.log(t),r.map.addImage(s+"",n),r.map.addLayer({id:l,type:"symbol",source:a,layout:{"icon-image":s+"","icon-size":o.scale,visibility:e.visible}})},r),"POINT"===n&&o.src&&o.src.indexOf("svg")>-1&&(r.svgDiv||(r.svgDiv=document.createElement("div"),document.body.appendChild(r.svgDiv)),r._getCanvasFromSVG(o.src,r.svgDiv,function(t){var n=t.toDataURL("img/png");n&&r.map.loadImage(n,function(t,n){t&&console.log(t),r.map.addImage(s+"",n),r.map.addLayer({id:l,type:"symbol",source:a,layout:{"icon-image":s+"","icon-size":o.scale,visibility:e.visible}})},r)})),!o.src){var u={layout:{}};"LINESTRING"===n&&o.lineCap&&(n="LINE",u.layout={"line-cap":o.lineCap});var c=e.visible;u.layout.visibility=c,u.style=r._transformStyleToMapBoxGl(o,n),r._addOverlayToMap(n,a,l,u),"POLYGON"===n&&o.strokeColor&&r._addStrokeLineForPoly(o,a,l+"-strokeLine",c)}},this)}},{key:"setFeatureInfo",value:function(e){var t,r=e.dv_v5_markerInfo;if(!r||!r.dataViz_title)return r;t=r;var n=e.properties;for(var o in t)n[o]&&(t[o]=n[o],delete n[o]);return t}},{key:"_createHeatLayer",value:function(e,t){var r=e.themeSetting,n={};n.gradient=r.colors.slice(),n.radius=parseInt(r.radius);var o=r.customSettings;for(var i in o)n.gradient[i]=o[i];r.weight&&this._changeWeight(t,r.weight);var a=["interpolate",["linear"],["heatmap-density"]],s=(1/n.gradient.length).toFixed(2);n.gradient.forEach(function(e,t){a.push(t*s),0===t&&(e=JA.hexToRgba(e,0)),a.push(e)});var l={"heatmap-color":a,"heatmap-radius":r.radius+15,"heatmap-intensity":{base:1,stops:[[0,.8],[22,1]]}};if(t[0].weight&&t.length>=4){var u=[];t.forEach(function(e){u.push(e.weight)});var c=hP.getMax(u),f=hP.getMin(u);l["heatmap-weight"]=["interpolate",["linear"],["get","weight"],f,0,c,1]}this.map.addLayer({id:e.layerID,type:"heatmap",source:{type:"geojson",data:{type:"FeatureCollection",features:t}},paint:l})}},{key:"_changeWeight",value:function(e,t){this.fieldMaxValue={},this._getMaxValue(e,t);var r=this.fieldMaxValue[t];e.forEach(function(e){var n=e.properties[t];e.weight=n/r})}},{key:"_getMaxValue",value:function(e,t){var r,n=[],o=t;this.fieldMaxValue[o]||(e.forEach(function(e){(r=e.properties)&&parseFloat(r[o])&&n.push(parseFloat(r[o]))}),this.fieldMaxValue[o]=hP.getArrayStatistic(n,"Maximum"))}},{key:"_createRangeLayer",value:function(e,t){var r=e.themeSetting.themeField,n=e.style,o=e.featureType,i=this._getRangeStyleGroup(e,t),a={type:"geojson",data:{type:"FeatureCollection",features:t=this._getFiterFeatures(e.filterCondition,t)}},s=["match",["get","index"]];t.forEach(function(e){for(var t=parseFloat(e.properties[r]),n=0;n<i.length;n++)i[n].start<=t&&t<i[n].end&&s.push(e.properties.index,i[n].color);!t&&s.push(e.properties.index,"rgba(0, 0, 0, 0)")},this),s.push("rgba(0, 0, 0, 0)");var l={layout:{}};"LINE"===o&&n.lineCap&&(l.layout={"line-cap":n.lineCap});var u=e.visible;l.layout.visibility=u,l.style=this._transformStyleToMapBoxGl(n,o,s);var c=e.layerID;this._addOverlayToMap(o,a,c,l),"POLYGON"===o&&n.strokeColor&&this._addStrokeLineForPoly(n,a,c+"-strokeline",u)}},{key:"_getFiterFeatures",value:function(e,t){if(!e)return t;for(var r="select * from json where ("+this._replaceFilterCharacter(e)+")",n=[],o=0;o<t.length;o++){var i=t[o],a=!1;try{a=window.jsonsql.query(r,{properties:i.properties})}catch(e){continue}a&&a.length>0&&n.push(i)}return n}},{key:"_replaceFilterCharacter",value:function(e){return e=e.replace(/=/g,"==").replace(/AND|and/g,"&&").replace(/or|OR/g,"||").replace(/<==/g,"<=").replace(/>==/g,">=")}},{key:"_getRangeStyleGroup",value:function(e,t){var r,n=e.featureType,o=e.style,i=[],a=e.themeSetting,s=a.customSettings,l=a.themeField,u=a.segmentCount;t.forEach(function(e){(r=e.properties||e.get("Properties"))?r[l]&&JA.isNumber(r[l])&&i.push(parseFloat(r[l])):e.get(l)&&JA.isNumber(e.get(l))&&e.get(l)&&i.push(parseFloat(e.get(l)))},this);var c=hP.getArraySegments(i,a.segmentMethod,u);if(c){var f=u;for(var p in r&&c[0]===c[r.length-1]&&(f=1,c.length=2),c){var h=c[p];h=0==p?Math.floor(100*h)/100:Math.ceil(100*h)/100+.1,c[p]=Number(h.toFixed(2))}for(var y=a.colors,d=0;d<f;d++)d in s&&(s[d].segment.start&&(c[d]=s[d].segment.start),s[d].segment.end&&(c[d+1]=s[d].segment.end));for(var v=[],m=0;m<f;m++){var b=y[m];m in s&&s[m].color&&(b=s[m].color),"LINE"===n?o.strokeColor=b:o.fillColor=b;var g=c[m],S=c[m+1],w=JSON.parse(JSON.stringify(o));v.push({style:w,color:b,start:g,end:S})}return v}}},{key:"_formatGeoJSON",value:function(e){var t=e.features;return t.forEach(function(e,t){e.properties.index=t}),t}},{key:"_excelData2Feature",value:function(e){for(var t=e.colTitles,r=-1,n=-1,o=0,i=t.length;o<i;o++)this._isXField(t[o])&&(r=o),this._isYField(t[o])&&(n=o);for(var a=[],s=0,l=e.rows.length;s<l;s++){var u=e.rows[s],c=Number(u[r]),f=Number(u[n]),p={};for(var h in e.colTitles){p[e.colTitles[h]]=e.rows[s][h]}p.index=s+"";var y={type:"Feature",geometry:{type:"Point",coordinates:[c,f]},properties:p};a.push(y)}return a}},{key:"_sendMapToUser",value:function(e,t){e===t&&this.fire("addlayerssucceeded",{map:this.map,mapparams:this.mapParams,layers:this.layers})}},{key:"_unproject",value:function(e){for(var t,r=180/Math.PI,n=6378137,o=Math.exp(-e[1]/n),i=Math.PI/2-2*Math.atan(o),a=0,s=.1;a<15&&Math.abs(s)>1e-7;a++)t=1,i+=s=Math.PI/2-2*Math.atan(o*t)-i;return new FA.a.LngLat(e[0]*r/n,i*r)}},{key:"_getParamString",value:function(e,t,r){var n=[];for(var o in e)n.push((r?o.toUpperCase():o)+"="+e[o]);return(t&&-1!==t.indexOf("?")?"&":"?")+n.join("&")}},{key:"_isXField",value:function(e){var t=e.toLowerCase();return"x"===t||"smx"===t||"jd"===t||"经度"===t||"东经"===t||"longitude"===t||"lot"===t||"lon"===t||"lng"===t}},{key:"_isYField",value:function(e){var t=e.toLowerCase();return"y"===t||"smy"===t||"wd"===t||"纬度"===t||"北纬"===t||"latitude"===t||"lat"===t}},{key:"_transformStyleToMapBoxGl",value:function(e,t,r){var n={};"POINT"!==e.type&&"BASIC_POINT"!==e.type&&"POINT"!==t||"LINE"===t?"LINE"===t?n={strokeWidth:"line-width",strokeColor:"line-color",strokeOpacity:"line-opacity"}:"POLYGON"===t&&(n={fillColor:"fill-color",fillOpacity:"fill-opacity",strokeColor:"fill-outline-color"}):n={fillColor:"circle-color",strokeWidth:"circle-stroke-width",fillOpacity:"circle-opacity",radius:"circle-radius",strokeColor:"circle-stroke-color",strokeOpacity:"circle-stroke-opacity"};var o={};for(var i in e)n[i]&&(o[n[i]]=e[i]);return r&&(o["circle-color"]?o["circle-color"]=r:o["line-color"]?o["line-color"]=r:o["fill-color"]=r),e.lineDash&&"solid"!==e.lineDash&&"LINE"===t&&(o["line-dasharray"]=this._dashStyle(e)),o}},{key:"_dashStyle",value:function(e){if(!e)return[];var t=e.strokeDashstyle||e.lineDash;switch(t){case"solid":return[];case"dot":return[1,4];case"dash":return[4,4];case"dashdot":return[4,4,1,4];case"longdash":return[8,4];case"longdashdot":return[8,4,1,4];default:return t?ge.isArray(t)?t:(t=pe.trim(t).replace(/\s+/g,",")).replace(/\[|\]/gi,"").split(","):[]}}},{key:"_getCanvasFromSVG",value:function(e,t,r){var n=document.createElement("canvas");n.id="dataviz-canvas-"+JA.newGuid(8),n.style.display="none",t.appendChild(n),(window.canvg?window.canvg:XM.a)(n.id,e,{ignoreMouse:!0,ignoreAnimation:!0,renderCallback:function(){n.width>300||n.height>300||r(n)},forceRedraw:function(){return!1}})}},{key:"_addOverlayToMap",value:function(e,t,r,n){"circle"!==(e={POINT:"circle",LINE:"line",POLYGON:"fill"}[e])&&"line"!==e&&"fill"!==e||this.map.addLayer({id:r,type:e,source:t,paint:n.style,layout:n.layout||{}})}},{key:"_addBaselayer",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:22,o=arguments.length>4?arguments[4]:void 0;this.map.addLayer({id:t,type:"raster",source:{type:"raster",tiles:e,tileSize:256,rasterSource:o?"iserver":"",prjCoordSys:o?{epsgCode:this.baseProjection.split(":")[1]}:""},minzoom:r,maxzoom:n})}},{key:"_addStrokeLineForPoly",value:function(e,t,r,n){var o={};o.style=this._transformStyleToMapBoxGl(e,"LINE"),o.layout={visibility:n},this._addOverlayToMap("LINE",t,r,o)}},{key:"_parseGeoJsonData2Feature",value:function(e){for(var t=e.allDatas.features,r=[],n=0,o=t.length;n<o;n++){var i=t[n],a=i.geometry.coordinates;"Point"===t[n].geometry.type&&t[n].properties&&(t[n].properties.lon=a[0],t[n].properties.lat=a[1]),r.properties.index=n+"",r.push(i)}return r}},{key:"_getFeatureBySQL",value:function(e,t,r,n){var o,i;o=new Fo({name:t.join().replace(":","@"),attributeFilter:"SMID > 0"}),i=new Dp({queryParameter:o,datasetNames:t,fromIndex:0,toIndex:1e5,returnContent:!0}),new Wp(e,{eventListeners:{processCompleted:function(e){r&&r(e)},processFailed:function(e){n&&n(e)}}}).processAsync(i)}},{key:"_queryFeatureBySQL",value:function(e,t,r,n,o,i,a,l,u,c){var f,p;f=new Fo({name:t,attributeFilter:r}),n&&(f.fields=n);var h={queryParams:[f]};c&&(h.queryOption=s.ATTRIBUTE),l&&(h.startRecord=l),u&&(h.expectCount=u),o&&(h.prjCoordSys={epsgCode:o}),p=new Lb(h),new FA.a.supermap.QueryService(e).queryBySQL(p,function(e){"processCompleted"===e.type?i(e):a(e)})}},{key:"_handleMultyPolygon",value:function(e){return e.forEach(function(e){if("Polygon"===e.geometry.type){var t=e.geometry.coordinates;if(t.length>1){var r=[];t.forEach(function(e){r.push([e])}),e.geometry.coordinates=r,e.geometry.type="MultiPolygon"}}}),e}},{key:"_transformScaleToZoom",value:function(e,t){var r=295829515.2024169;"EPSG:3857"!==(t||this.map.getCRS()).epsgCode&&(r=295295895);var n=e.split(":")[1];return Math.min(24,+Math.log2(r/+n).toFixed(2))}},{key:"_getResolution",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512;return e.leftBottom&&e.rightTop?Math.max(e.rightTop.x-e.leftBottom.x,e.rightTop.y-e.leftBottom.y)/t:Math.max(e[2]-e[0],e[3]-e[1])/t}}])&&ZM(r.prototype,n),o&&ZM(r,o),t}();FA.a.supermap.WebMap=iN,r.d(t,"SuperMap",function(){return n}),r.d(t,"DataFormat",function(){return o}),r.d(t,"ServerType",function(){return i}),r.d(t,"GeometryType",function(){return a}),r.d(t,"QueryOption",function(){return s}),r.d(t,"JoinType",function(){return l}),r.d(t,"EngineType",function(){return y}),r.d(t,"MeasureMode",function(){return f}),r.d(t,"SpatialRelationType",function(){return c}),r.d(t,"DataReturnMode",function(){return I}),r.d(t,"Unit",function(){return p}),r.d(t,"BufferRadiusUnit",function(){return h}),r.d(t,"SpatialQueryMode",function(){return u}),r.d(t,"ThemeGraphTextFormat",function(){return d}),r.d(t,"ThemeGraphType",function(){return v}),r.d(t,"GraphAxesTextDisplayMode",function(){return m}),r.d(t,"GraduatedMode",function(){return b}),r.d(t,"RangeMode",function(){return g}),r.d(t,"ThemeType",function(){return S}),r.d(t,"ColorGradientType",function(){return w}),r.d(t,"TextAlignment",function(){return O}),r.d(t,"FillGradientMode",function(){return _}),r.d(t,"SideType",function(){return k}),r.d(t,"AlongLineDirection",function(){return P}),r.d(t,"LabelBackShape",function(){return C}),r.d(t,"LabelOverLengthMode",function(){return E}),r.d(t,"DirectionType",function(){return T}),r.d(t,"OverlayOperationType",function(){return R}),r.d(t,"SupplyCenterType",function(){return x}),r.d(t,"TurnType",function(){return A}),r.d(t,"BufferEndType",function(){return j}),r.d(t,"SmoothMethod",function(){return M}),r.d(t,"SurfaceAnalystMethod",function(){return N}),r.d(t,"ColorSpaceType",function(){return U}),r.d(t,"ChartType",function(){return K}),r.d(t,"EditType",function(){return D}),r.d(t,"TransferTactic",function(){return F}),r.d(t,"TransferPreference",function(){return B}),r.d(t,"GridType",function(){return G}),r.d(t,"ClientType",function(){return X}),r.d(t,"LayerType",function(){return H}),r.d(t,"UGCLayerType",function(){return J}),r.d(t,"StatisticMode",function(){return W}),r.d(t,"PixelFormat",function(){return V}),r.d(t,"SearchMode",function(){return z}),r.d(t,"SummaryType",function(){return re}),r.d(t,"InterpolationAlgorithmType",function(){return q}),r.d(t,"VariogramMode",function(){return Y}),r.d(t,"Exponent",function(){return Q}),r.d(t,"ClipAnalystMode",function(){return Z}),r.d(t,"AnalystAreaUnit",function(){return $}),r.d(t,"AnalystSizeUnit",function(){return ee}),r.d(t,"StatisticAnalystMode",function(){return te}),r.d(t,"TopologyValidatorRule",function(){return ne}),r.d(t,"OutputType",function(){return L}),r.d(t,"AggregationQueryBuilderType",function(){return ie}),r.d(t,"AggregationType",function(){return oe}),r.d(t,"GetFeatureMode",function(){return ae}),r.d(t,"TimeFlowControl",function(){return Yr}),r.d(t,"IManager",function(){return pn}),r.d(t,"IManagerServiceBase",function(){return on}),r.d(t,"IManagerCreateNodeParam",function(){return an}),r.d(t,"IPortal",function(){return xn}),r.d(t,"IPortalQueryParam",function(){return dn}),r.d(t,"IPortalResource",function(){return On}),r.d(t,"IPortalQueryResult",function(){return vn}),r.d(t,"IPortalShareParam",function(){return _n}),r.d(t,"IPortalShareEntity",function(){return An}),r.d(t,"IPortalServiceBase",function(){return yn}),r.d(t,"IPortalUser",function(){return Hn}),r.d(t,"IPortalAddResourceParam",function(){return jn}),r.d(t,"IPortalRegisterServiceParam",function(){return Rn}),r.d(t,"IPortalAddDataParam",function(){return Ln}),r.d(t,"IPortalDataMetaInfoParam",function(){return Mn}),r.d(t,"IPortalDataStoreInfoParam",function(){return Nn}),r.d(t,"IPortalDataConnectionInfoParam",function(){return In}),r.d(t,"Online",function(){return z_}),r.d(t,"OnlineData",function(){return W_}),r.d(t,"OnlineQueryDatasParameter",function(){return Y_}),r.d(t,"ServiceStatus",function(){return L_}),r.d(t,"DataItemType",function(){return M_}),r.d(t,"DataItemOrderBy",function(){return N_}),r.d(t,"FilterField",function(){return I_}),r.d(t,"OnlineServiceBase",function(){return F_}),r.d(t,"KeyServiceParameter",function(){return X_}),r.d(t,"SecurityManager",function(){return rn}),r.d(t,"ServerInfo",function(){return K_}),r.d(t,"TokenServiceParameter",function(){return $_}),r.d(t,"ElasticSearch",function(){return nP}),r.d(t,"FetchRequest",function(){return en}),r.d(t,"ColorsPickerUtil",function(){return fP}),r.d(t,"ArrayStatistic",function(){return hP}),r.d(t,"AreaSolarRadiationParameters",function(){return so}),r.d(t,"AggregationParameter",function(){return io}),r.d(t,"AggQueryBuilderParameter",function(){return no}),r.d(t,"BufferAnalystParameters",function(){return ko}),r.d(t,"BufferDistance",function(){return Po}),r.d(t,"BuffersAnalystJobsParameter",function(){return fi}),r.d(t,"BufferSetting",function(){return Eo}),r.d(t,"BurstPipelineAnalystParameters",function(){return Ti}),r.d(t,"ChartQueryFilterParameter",function(){return Xi}),r.d(t,"ChartQueryParameters",function(){return Zi}),r.d(t,"ClipParameter",function(){return ua}),r.d(t,"ColorDictionary",function(){return fa}),r.d(t,"ComputeWeightMatrixParameters",function(){return ma}),r.d(t,"DataReturnOption",function(){return Ao}),r.d(t,"DatasetBufferAnalystParameters",function(){return Vo}),r.d(t,"DatasetInfo",function(){return Ra}),r.d(t,"DatasetOverlayAnalystParameters",function(){return Ua}),r.d(t,"DatasetSurfaceAnalystParameters",function(){return Za}),r.d(t,"DatasetThiessenAnalystParameters",function(){return ss}),r.d(t,"DatasourceConnectionInfo",function(){return Mo}),r.d(t,"DensityKernelAnalystParameters",function(){return us}),r.d(t,"EditFeaturesParameters",function(){return bs}),r.d(t,"FacilityAnalyst3DParameters",function(){return Ts}),r.d(t,"FacilityAnalystSinks3DParameters",function(){return Ms}),r.d(t,"FacilityAnalystSources3DParameters",function(){return qs}),r.d(t,"FacilityAnalystStreamParameters",function(){return rl}),r.d(t,"FacilityAnalystTracedown3DParameters",function(){return vl}),r.d(t,"FacilityAnalystTraceup3DParameters",function(){return Al}),r.d(t,"FacilityAnalystUpstream3DParameters",function(){return Wl}),r.d(t,"FieldParameters",function(){return au}),r.d(t,"FieldStatisticsParameters",function(){return pu}),r.d(t,"FilterParameter",function(){return Fo}),r.d(t,"FilterAggParameter",function(){return ou}),r.d(t,"FindClosestFacilitiesParameters",function(){return wu}),r.d(t,"FindLocationParameters",function(){return Au}),r.d(t,"FindMTSPPathsParameters",function(){return Bu}),r.d(t,"FindPathParameters",function(){return Yu}),r.d(t,"FindServiceAreasParameters",function(){return nc}),r.d(t,"FindTSPPathsParameters",function(){return pc}),r.d(t,"GenerateSpatialDataParameters",function(){return wc}),r.d(t,"GeoBoundingBoxQueryBuilderParameter",function(){return Nc}),r.d(t,"GeoCodingParameter",function(){return zn}),r.d(t,"GeoDecodingParameter",function(){return Yn}),r.d(t,"GeoHashGridAggParameter",function(){return Hc}),r.d(t,"GeometryBufferAnalystParameters",function(){return Zo}),r.d(t,"GeometryOverlayAnalystParameters",function(){return Qc}),r.d(t,"GeometrySurfaceAnalystParameters",function(){return rf}),r.d(t,"GeometryThiessenAnalystParameters",function(){return cf}),r.d(t,"GeoRelationAnalystParameters",function(){return pf}),r.d(t,"GetFeaturesByBoundsParameters",function(){return kf}),r.d(t,"GetFeaturesByBufferParameters",function(){return Qf}),r.d(t,"GetFeaturesByGeometryParameters",function(){return up}),r.d(t,"GetFeaturesByIDsParameters",function(){return _p}),r.d(t,"GetFeaturesBySQLParameters",function(){return Dp}),r.d(t,"GetGridCellInfosParameters",function(){return $p}),r.d(t,"Grid",function(){return id}),r.d(t,"Image",function(){return mC}),r.d(t,"InterpolationAnalystParameters",function(){return kd}),r.d(t,"InterpolationIDWAnalystParameters",function(){return Qd}),r.d(t,"InterpolationKrigingAnalystParameters",function(){return rv}),r.d(t,"InterpolationRBFAnalystParameters",function(){return Nd}),r.d(t,"JoinItem",function(){return Ro}),r.d(t,"KernelDensityJobParameter",function(){return fv}),r.d(t,"LabelImageCell",function(){return Cv}),r.d(t,"LabelMatrixCell",function(){return gv}),r.d(t,"LabelMixedTextStyle",function(){return Oh}),r.d(t,"LabelSymbolCell",function(){return jv}),r.d(t,"LabelThemeCell",function(){return Dv}),r.d(t,"LayerStatus",function(){return Bv}),r.d(t,"LinkItem",function(){return Io}),r.d(t,"MathExpressionAnalysisParameters",function(){return Yv}),r.d(t,"MeasureParameters",function(){return nm}),r.d(t,"OutputSetting",function(){return si}),r.d(t,"MappingParameters",function(){return ui}),r.d(t,"OverlapDisplayedOptions",function(){return jy}),r.d(t,"OverlayAnalystParameters",function(){return Ma}),r.d(t,"OverlayGeoJobParameter",function(){return gm}),r.d(t,"PointWithMeasure",function(){return br}),r.d(t,"QueryByBoundsParameters",function(){return Mm}),r.d(t,"QueryByDistanceParameters",function(){return nb}),r.d(t,"QueryByGeometryParameters",function(){return bb}),r.d(t,"QueryBySQLParameters",function(){return Lb}),r.d(t,"QueryParameters",function(){return ea}),r.d(t,"Route",function(){return Pr}),r.d(t,"RouteCalculateMeasureParameters",function(){return Hb}),r.d(t,"RouteLocatorParameters",function(){return Kb}),r.d(t,"ServerColor",function(){return cr}),r.d(t,"ServerFeature",function(){return ag}),r.d(t,"ServerGeometry",function(){return Er}),r.d(t,"ServerStyle",function(){return pr}),r.d(t,"ServerTextStyle",function(){return ph}),r.d(t,"ServerTheme",function(){return Zy}),r.d(t,"SetLayerInfoParameters",function(){return lg}),r.d(t,"SetLayersInfoParameters",function(){return mg}),r.d(t,"SetLayerStatusParameters",function(){return Eg}),r.d(t,"SingleObjectQueryJobsParameter",function(){return Ng}),r.d(t,"StopQueryParameters",function(){return Wg}),r.d(t,"SummaryAttributesJobsParameter",function(){return $g}),r.d(t,"SummaryMeshJobParameter",function(){return lS}),r.d(t,"SummaryRegionJobParameter",function(){return mS}),r.d(t,"SupplyCenter",function(){return ES}),r.d(t,"SurfaceAnalystParameters",function(){return Va}),r.d(t,"SurfaceAnalystParametersSetting",function(){return Ja}),r.d(t,"TerrainCurvatureCalculationParameters",function(){return NS}),r.d(t,"Theme",function(){return ch}),r.d(t,"ThemeDotDensity",function(){return uy}),r.d(t,"ThemeFlow",function(){return bh}),r.d(t,"ThemeGraduatedSymbol",function(){return by}),r.d(t,"ThemeGraduatedSymbolStyle",function(){return fy}),r.d(t,"ThemeGraph",function(){return ny}),r.d(t,"ThemeGraphAxes",function(){return Wh}),r.d(t,"ThemeGraphItem",function(){return Xh}),r.d(t,"ThemeGraphSize",function(){return zh}),r.d(t,"ThemeGraphText",function(){return Yh}),r.d(t,"ThemeGridRange",function(){return KS}),r.d(t,"ThemeGridRangeItem",function(){return WS}),r.d(t,"ThemeGridUnique",function(){return aw}),r.d(t,"ThemeGridUniqueItem",function(){return $S}),r.d(t,"ThemeLabel",function(){return Nh}),r.d(t,"ThemeLabelAlongLine",function(){return Eh}),r.d(t,"ThemeLabelBackground",function(){return kh}),r.d(t,"ThemeLabelItem",function(){return yh}),r.d(t,"ThemeLabelText",function(){return Ph}),r.d(t,"ThemeLabelUniqueItem",function(){return lw}),r.d(t,"ThemeMemoryData",function(){return lh}),r.d(t,"ThemeOffset",function(){return Sh}),r.d(t,"ThemeParameters",function(){return cw}),r.d(t,"ThemeRange",function(){return Ty}),r.d(t,"ThemeRangeItem",function(){return Sy}),r.d(t,"ThemeUnique",function(){return Hh}),r.d(t,"ThemeUniqueItem",function(){return vh}),r.d(t,"ThiessenAnalystParameters",function(){return es}),r.d(t,"TopologyValidatorJobsParameter",function(){return Gw}),r.d(t,"TransferLine",function(){return Qw}),r.d(t,"TransferPathParameters",function(){return Kw}),r.d(t,"TransferSolutionParameters",function(){return aO}),r.d(t,"TransportationAnalystParameter",function(){return da}),r.d(t,"TransportationAnalystResultSetting",function(){return ha}),r.d(t,"UGCLayer",function(){return xy}),r.d(t,"UGCMapLayer",function(){return Fy}),r.d(t,"UGCSubLayer",function(){return Vy}),r.d(t,"UpdateEdgeWeightParameters",function(){return dO}),r.d(t,"UpdateTurnNodeWeightParameters",function(){return PO}),r.d(t,"Vector",function(){return gd}),r.d(t,"VectorClipJobsParameter",function(){return LO}),r.d(t,"WebPrintingJobCustomItems",function(){return o_}),r.d(t,"WebPrintingJobImage",function(){return a_}),r.d(t,"WebPrintingJobLayers",function(){return l_}),r.d(t,"WebPrintingJobLegendOptions",function(){return c_}),r.d(t,"WebPrintingJobLittleMapOptions",function(){return p_}),r.d(t,"WebPrintingJobNorthArrowOptions",function(){return y_}),r.d(t,"WebPrintingJobScaleBarOptions",function(){return v_}),r.d(t,"WebPrintingJobContent",function(){return b_}),r.d(t,"WebPrintingJobLayoutOptions",function(){return S_}),r.d(t,"WebPrintingJobExportOptions",function(){return O_}),r.d(t,"WebPrintingJobParameters",function(){return P_}),r.d(t,"WebPrintingService",function(){return R_}),r.d(t,"FileTypes",function(){return vx}),r.d(t,"FileConfig",function(){return mx}),r.d(t,"FileModel",function(){return gx}),r.d(t,"MessageBox",function(){return wx}),r.d(t,"CommonContainer",function(){return Ux}),r.d(t,"DropDownBox",function(){return $x}),r.d(t,"Select",function(){return qx}),r.d(t,"AttributesPopContainer",function(){return fA}),r.d(t,"PopContainer",function(){return iA}),r.d(t,"IndexTabsPageContainer",function(){return mA}),r.d(t,"CityTabsPage",function(){return _A}),r.d(t,"NavTabsPage",function(){return xA}),r.d(t,"PaginationContainer",function(){return NA}),r.d(t,"ComponentsUtil",function(){return IA}),r.d(t,"FileReaderUtil",function(){return Tx}),r.d(t,"ChartView",function(){return Lx}),r.d(t,"ChartViewModel",function(){return jx}),r.d(t,"Logo",function(){return UA}),r.d(t,"Util",function(){return JA}),r.d(t,"MapExtend",function(){return BA}),r.d(t,"Graph",function(){return ej}),r.d(t,"Label",function(){return hj}),r.d(t,"MapvLayer",function(){return Cj}),r.d(t,"RangeTheme3DLayer",function(){return Lj}),r.d(t,"Range",function(){return Bj}),r.d(t,"RankSymbol",function(){return Vj}),r.d(t,"UniqueTheme3DLayer",function(){return Kj}),r.d(t,"Unique",function(){return nR}),r.d(t,"GraphicLayer",function(){return lR}),r.d(t,"ThreeLayer",function(){return MR}),r.d(t,"HeatMapLayer",function(){return GR}),r.d(t,"DeckglLayer",function(){return HR}),r.d(t,"Graphic",function(){return iR}),r.d(t,"MapvDataSet",function(){return JR}),r.d(t,"MapvRenderer",function(){return _j}),r.d(t,"GeoFeature",function(){return aj}),r.d(t,"Theme3DLayer",function(){return Tj}),r.d(t,"ThemeFeature",function(){return VA}),r.d(t,"ThemeLayer",function(){return qA}),r.d(t,"ThreeLayerRenderer",function(){return _R}),r.d(t,"Transform",function(){return pR}),r.d(t,"getDefaultVectorTileStyle",function(){return WR}),r.d(t,"setBackground",function(){return VR}),r.d(t,"setPaintProperty",function(){return zR}),r.d(t,"AddressMatchService",function(){return oL}),r.d(t,"ChartService",function(){return cL}),r.d(t,"DataFlowService",function(){return vL}),r.d(t,"FeatureService",function(){return OL}),r.d(t,"FieldService",function(){return kL}),r.d(t,"GridCellInfosService",function(){return ML}),r.d(t,"LayerInfoService",function(){return GL}),r.d(t,"MapService",function(){return zL}),r.d(t,"MeasureService",function(){return ZL}),r.d(t,"NetworkAnalystService",function(){return oM}),r.d(t,"NetworkAnalyst3DService",function(){return cM}),r.d(t,"ProcessingService",function(){return vM}),r.d(t,"QueryService",function(){return OM}),r.d(t,"ServiceBase",function(){return ZR}),r.d(t,"SpatialAnalystService",function(){return kM}),r.d(t,"ThemeService",function(){return MM}),r.d(t,"TrafficTransferAnalystService",function(){return GM}),r.d(t,"WebPrintingJobService",function(){return zM}),r.d(t,"WebMap",function(){return iN})},function(e,t){},,,,,,function(e,t){}]);