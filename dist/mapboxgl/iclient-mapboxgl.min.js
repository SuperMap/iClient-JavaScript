/*!
 * 
 *          iclient-mapboxgl
 *          Copyright© 2000 - 2023 SuperMap Software Co.Ltd
 *          license: Apache-2.0
 *          version: v11.1.1
 *
 */!function(){var t={5023:function(t,e,r){"use strict";var n=r(6727);t.exports=n},3123:function(t,e,r){"use strict";var n=r(8690);t.exports=n},879:function(t,e,r){"use strict";r(7422);var n=r(97);t.exports=n.Object.assign},3723:function(t,e,r){"use strict";r(4835);var n=r(8384);t.exports=n.f("asyncIterator")},5980:function(t,e,r){"use strict";var n=r(729),o=r(8434),i=TypeError;t.exports=function(t){if(n(t))return t;throw i(o(t)+" is not a function")}},7563:function(t,e,r){"use strict";var n=r(691),o=String,i=TypeError;t.exports=function(t){if(n(t))return t;throw i(o(t)+" is not an object")}},8632:function(t,e,r){"use strict";var n=r(6462),o=r(5333),i=r(6803),a=function(t){return function(e,r,a){var s,u=n(e),l=i(u),c=o(a,l);if(t&&r!=r){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===r)return t||c||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},2177:function(t,e,r){"use strict";var n=r(9738),o=n({}.toString),i=n("".slice);t.exports=function(t){return i(o(t),8,-1)}},9029:function(t,e,r){"use strict";var n=r(1675),o=r(9402),i=r(7238),a=r(704);t.exports=function(t,e,r){for(var s=o(e),u=a.f,l=i.f,c=0;c<s.length;c++){var f=s[c];n(t,f)||r&&n(r,f)||u(t,f,l(e,f))}}},8268:function(t,e,r){"use strict";var n=r(6539),o=r(704),i=r(4925);t.exports=n?function(t,e,r){return o.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},4925:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7454:function(t,e,r){"use strict";var n=r(729),o=r(704),i=r(7948),a=r(161);t.exports=function(t,e,r,s){s||(s={});var u=s.enumerable,l=void 0!==s.name?s.name:e;if(n(r)&&i(r,l,s),s.global)u?t[e]=r:a(e,r);else{try{s.unsafe?t[e]&&(u=!0):delete t[e]}catch(t){}u?t[e]=r:o.f(t,e,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return t}},161:function(t,e,r){"use strict";var n=r(5835),o=Object.defineProperty;t.exports=function(t,e){try{o(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},6539:function(t,e,r){"use strict";var n=r(6583);t.exports=!n(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},9967:function(t){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r="object"==("undefined"==typeof document?"undefined":e(document))&&document.all,n=void 0===r&&void 0!==r;t.exports={all:r,IS_HTMLDDA:n}},3343:function(t,e,r){"use strict";var n=r(5835),o=r(691),i=n.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},1785:function(t){"use strict";t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},9282:function(t,e,r){"use strict";var n,o,i=r(5835),a=r(1785),s=i.process,u=i.Deno,l=s&&s.versions||u&&u.version,c=l&&l.v8;c&&(o=(n=c.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=+n[1]),t.exports=o},8525:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7926:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(5835),i=r(7238).f,a=r(8268),s=r(7454),u=r(161),l=r(9029),c=r(3175);t.exports=function(t,e){var r,f,h,p,y,d=t.target,b=t.global,v=t.stat;if(r=b?o:v?o[d]||u(d,{}):(o[d]||{}).prototype)for(f in e){if(p=e[f],h=t.dontCallGetSet?(y=i(r,f))&&y.value:r[f],!c(b?f:d+(v?".":"#")+f,t.forced)&&void 0!==h){if(n(p)==n(h))continue;l(p,h)}(t.sham||h&&h.sham)&&a(p,"sham",!0),s(r,f,p,t)}}},6583:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},9096:function(t,e,r){"use strict";var n=r(6583);t.exports=!n(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},5057:function(t,e,r){"use strict";var n=r(9096),o=Function.prototype.call;t.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},1864:function(t,e,r){"use strict";var n=r(6539),o=r(1675),i=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=o(i,"name"),u=s&&"something"===function(){}.name,l=s&&(!n||n&&a(i,"name").configurable);t.exports={EXISTS:s,PROPER:u,CONFIGURABLE:l}},9738:function(t,e,r){"use strict";var n=r(9096),o=Function.prototype,i=o.call,a=n&&o.bind.bind(i,i);t.exports=n?a:function(t){return function(){return i.apply(t,arguments)}}},8078:function(t,e,r){"use strict";var n=r(5835),o=r(729);t.exports=function(t,e){return arguments.length<2?(r=n[t],o(r)?r:void 0):n[t]&&n[t][e];var r}},2337:function(t,e,r){"use strict";var n=r(5980),o=r(6254);t.exports=function(t,e){var r=t[e];return o(r)?void 0:n(r)}},5835:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=function(t){return t&&t.Math==Math&&t};t.exports=o("object"==("undefined"==typeof globalThis?"undefined":n(globalThis))&&globalThis)||o("object"==("undefined"==typeof window?"undefined":n(window))&&window)||o("object"==("undefined"==typeof self?"undefined":n(self))&&self)||o("object"==(void 0===r.g?"undefined":n(r.g))&&r.g)||function(){return this}()||this||Function("return this")()},1675:function(t,e,r){"use strict";var n=r(9738),o=r(5825),i=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},940:function(t){"use strict";t.exports={}},2175:function(t,e,r){"use strict";var n=r(6539),o=r(6583),i=r(3343);t.exports=!n&&!o(function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},5407:function(t,e,r){"use strict";var n=r(9738),o=r(6583),i=r(2177),a=Object,s=n("".split);t.exports=o(function(){return!a("z").propertyIsEnumerable(0)})?function(t){return"String"==i(t)?s(t,""):a(t)}:a},6111:function(t,e,r){"use strict";var n=r(9738),o=r(729),i=r(9700),a=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},4751:function(t,e,r){"use strict";var n,o,i,a=r(9801),s=r(5835),u=r(691),l=r(8268),c=r(1675),f=r(9700),h=r(7307),p=r(940),y=s.TypeError,d=s.WeakMap;if(a||f.state){var b=f.state||(f.state=new d);b.get=b.get,b.has=b.has,b.set=b.set,n=function(t,e){if(b.has(t))throw y("Object already initialized");return e.facade=t,b.set(t,e),e},o=function(t){return b.get(t)||{}},i=function(t){return b.has(t)}}else{var v=h("state");p[v]=!0,n=function(t,e){if(c(t,v))throw y("Object already initialized");return e.facade=t,l(t,v,e),e},o=function(t){return c(t,v)?t[v]:{}},i=function(t){return c(t,v)}}t.exports={set:n,get:o,has:i,enforce:function(t){return i(t)?o(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!u(e)||(r=o(e)).type!==t)throw y("Incompatible receiver, "+t+" required");return r}}}},729:function(t,e,r){"use strict";var n=r(9967),o=n.all;t.exports=n.IS_HTMLDDA?function(t){return"function"==typeof t||t===o}:function(t){return"function"==typeof t}},3175:function(t,e,r){"use strict";var n=r(6583),o=r(729),i=/#|\.prototype\./,a=function(t,e){var r=u[s(t)];return r==c||r!=l&&(o(e)?n(e):!!e)},s=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},u=a.data={},l=a.NATIVE="N",c=a.POLYFILL="P";t.exports=a},6254:function(t){"use strict";t.exports=function(t){return null===t||void 0===t}},691:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(729),i=r(9967),a=i.all;t.exports=i.IS_HTMLDDA?function(t){return"object"==n(t)?null!==t:o(t)||t===a}:function(t){return"object"==n(t)?null!==t:o(t)}},1437:function(t){"use strict";t.exports=!1},4192:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(8078),i=r(729),a=r(5522),s=r(7860),u=Object;t.exports=s?function(t){return"symbol"==n(t)}:function(t){var e=o("Symbol");return i(e)&&a(e.prototype,u(t))}},6803:function(t,e,r){"use strict";var n=r(5108);t.exports=function(t){return n(t.length)}},7948:function(t,e,r){"use strict";var n=r(9738),o=r(6583),i=r(729),a=r(1675),s=r(6539),u=r(1864).CONFIGURABLE,l=r(6111),c=r(4751),f=c.enforce,h=c.get,p=String,y=Object.defineProperty,d=n("".slice),b=n("".replace),v=n([].join),m=s&&!o(function(){return 8!==y(function(){},"length",{value:8}).length}),g=String(String).split("String"),w=t.exports=function(t,e,r){"Symbol("===d(p(e),0,7)&&(e="["+b(p(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!a(t,"name")||u&&t.name!==e)&&(s?y(t,"name",{value:e,configurable:!0}):t.name=e),m&&r&&a(r,"arity")&&t.length!==r.arity&&y(t,"length",{value:r.arity});try{r&&a(r,"constructor")&&r.constructor?s&&y(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=f(t);return a(n,"source")||(n.source=v(g,"string"==typeof e?e:"")),t};Function.prototype.toString=w(function(){return i(this)&&h(this).source||l(this)},"toString")},4920:function(t){"use strict";var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?r:e)(n)}},7328:function(t,e,r){"use strict";var n=r(6539),o=r(9738),i=r(5057),a=r(6583),s=r(5403),u=r(7485),l=r(5339),c=r(5825),f=r(5407),h=Object.assign,p=Object.defineProperty,y=o([].concat);t.exports=!h||a(function(){if(n&&1!==h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol();return t[r]=7,"abcdefghijklmnopqrst".split("").forEach(function(t){e[t]=t}),7!=h({},t)[r]||"abcdefghijklmnopqrst"!=s(h({},e)).join("")})?function(t,e){for(var r=c(t),o=arguments.length,a=1,h=u.f,p=l.f;o>a;)for(var d,b=f(arguments[a++]),v=h?y(s(b),h(b)):s(b),m=v.length,g=0;m>g;)d=v[g++],n&&!i(p,b,d)||(r[d]=b[d]);return r}:h},704:function(t,e,r){"use strict";var n=r(6539),o=r(2175),i=r(4821),a=r(7563),s=r(9737),u=TypeError,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor;e.f=n?i?function(t,e,r){if(a(t),e=s(e),a(r),"function"==typeof t&&"prototype"===e&&"value"in r&&"writable"in r&&!r.writable){var n=c(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return l(t,e,r)}:l:function(t,e,r){if(a(t),e=s(e),a(r),o)try{return l(t,e,r)}catch(t){}if("get"in r||"set"in r)throw u("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},7238:function(t,e,r){"use strict";var n=r(6539),o=r(5057),i=r(5339),a=r(4925),s=r(6462),u=r(9737),l=r(1675),c=r(2175),f=Object.getOwnPropertyDescriptor;e.f=n?f:function(t,e){if(t=s(t),e=u(e),c)try{return f(t,e)}catch(t){}if(l(t,e))return a(!o(i.f,t,e),t[e])}},5454:function(t,e,r){"use strict";var n=r(497),o=r(8525).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},7485:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},5522:function(t,e,r){"use strict";var n=r(9738);t.exports=n({}.isPrototypeOf)},497:function(t,e,r){"use strict";var n=r(9738),o=r(1675),i=r(6462),a=r(8632).indexOf,s=r(940),u=n([].push);t.exports=function(t,e){var r,n=i(t),l=0,c=[];for(r in n)!o(s,r)&&o(n,r)&&u(c,r);for(;e.length>l;)o(n,r=e[l++])&&(~a(c,r)||u(c,r));return c}},5403:function(t,e,r){"use strict";var n=r(497),o=r(8525);t.exports=Object.keys||function(t){return n(t,o)}},5339:function(t,e){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);e.f=o?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},2821:function(t,e,r){"use strict";var n=r(5057),o=r(729),i=r(691),a=TypeError;t.exports=function(t,e){var r,s;if("string"===e&&o(r=t.toString)&&!i(s=n(r,t)))return s;if(o(r=t.valueOf)&&!i(s=n(r,t)))return s;if("string"!==e&&o(r=t.toString)&&!i(s=n(r,t)))return s;throw a("Can't convert object to primitive value")}},9402:function(t,e,r){"use strict";var n=r(8078),o=r(9738),i=r(5454),a=r(7485),s=r(7563),u=o([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=i.f(s(t)),r=a.f;return r?u(e,r(t)):e}},97:function(t,e,r){"use strict";var n=r(5835);t.exports=n},1894:function(t,e,r){"use strict";var n=r(6254),o=TypeError;t.exports=function(t){if(n(t))throw o("Can't call method on "+t);return t}},7307:function(t,e,r){"use strict";var n=r(5464),o=r(6065),i=n("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},9700:function(t,e,r){"use strict";var n=r(5835),o=r(161),i=n["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},5464:function(t,e,r){"use strict";var n=r(1437),o=r(9700);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.32.0",mode:n?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.0/LICENSE",source:"https://github.com/zloirock/core-js"})},4993:function(t,e,r){"use strict";var n=r(9282),o=r(6583),i=r(5835).String;t.exports=!!Object.getOwnPropertySymbols&&!o(function(){var t=Symbol();return!i(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41})},5333:function(t,e,r){"use strict";var n=r(1087),o=Math.max,i=Math.min;t.exports=function(t,e){var r=n(t);return r<0?o(r+e,0):i(r,e)}},6462:function(t,e,r){"use strict";var n=r(5407),o=r(1894);t.exports=function(t){return n(o(t))}},1087:function(t,e,r){"use strict";var n=r(4920);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},5108:function(t,e,r){"use strict";var n=r(1087),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},5825:function(t,e,r){"use strict";var n=r(1894),o=Object;t.exports=function(t){return o(n(t))}},1044:function(t,e,r){"use strict";var n=r(5057),o=r(691),i=r(4192),a=r(2337),s=r(2821),u=r(3121),l=TypeError,c=u("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var r,u=a(t,c);if(u){if(void 0===e&&(e="default"),r=n(u,t,e),!o(r)||i(r))return r;throw l("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(t,e)}},9737:function(t,e,r){"use strict";var n=r(1044),o=r(4192);t.exports=function(t){var e=n(t,"string");return o(e)?e:e+""}},8434:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},6065:function(t,e,r){"use strict";var n=r(9738),o=0,i=Math.random(),a=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},7860:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(4993);t.exports=o&&!Symbol.sham&&"symbol"==n(Symbol.iterator)},4821:function(t,e,r){"use strict";var n=r(6539),o=r(6583);t.exports=n&&o(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},9801:function(t,e,r){"use strict";var n=r(5835),o=r(729),i=n.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},5336:function(t,e,r){"use strict";var n=r(97),o=r(1675),i=r(8384),a=r(704).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});o(e,t)||a(e,t,{value:i.f(t)})}},8384:function(t,e,r){"use strict";var n=r(3121);e.f=n},3121:function(t,e,r){"use strict";var n=r(5835),o=r(5464),i=r(1675),a=r(6065),s=r(4993),u=r(7860),l=n.Symbol,c=o("wks"),f=u?l.for||l:l&&l.withoutSetter||a;t.exports=function(t){return i(c,t)||(c[t]=s&&i(l,t)?l[t]:f("Symbol."+t)),c[t]}},7422:function(t,e,r){"use strict";var n=r(7926),o=r(7328);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==o},{assign:o})},4835:function(t,e,r){"use strict";r(5336)("asyncIterator")},6727:function(t,e,r){"use strict";var n=r(879);t.exports=n},8690:function(t,e,r){"use strict";var n=r(3723);t.exports=n},2057:function(t,e,r){"use strict";var n=r(5954),o=r(9162),i=r(1290);t.exports={XMLParser:o,XMLValidator:n,XMLBuilder:i}},144:function(t,e){"use strict";var r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n="["+r+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",o=new RegExp("^"+n+"$");e.isExist=function(t){return void 0!==t},e.isEmptyObject=function(t){return 0===Object.keys(t).length},e.merge=function(t,e,r){if(e)for(var n=Object.keys(e),o=n.length,i=0;i<o;i++)t[n[i]]="strict"===r?[e[n[i]]]:e[n[i]]},e.getValue=function(t){return e.isExist(t)?t:""},e.isName=function(t){var e=o.exec(t);return!(null===e||void 0===e)},e.getAllMatches=function(t,e){for(var r=[],n=e.exec(t);n;){var o=[];o.startIndex=e.lastIndex-n[0].length;for(var i=n.length,a=0;a<i;a++)o.push(n[a]);r.push(o),n=e.exec(t)}return r},e.nameRegexp=n},5954:function(t,e,r){"use strict";var n=r(144),o={allowBooleanAttributes:!1,unpairedTags:[]};function i(t){return" "===t||"\t"===t||"\n"===t||"\r"===t}function a(t,e){for(var r=e;e<t.length;e++)if("?"!=t[e]&&" "!=t[e]);else{var n=t.substr(r,e-r);if(e>5&&"xml"===n)return y("InvalidXml","XML declaration allowed only at the start of the document.",b(t,e));if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}function s(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){var r=1;for(e+=8;e<t.length;e++)if("<"===t[e])r++;else if(">"===t[e]&&0===--r)break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}e.validate=function(t,e){e=Object.assign({},o,e);var r,u=[],l=!1,f=!1;"\ufeff"===t[0]&&(t=t.substr(1));for(var d=0;d<t.length;d++)if("<"===t[d]&&"?"===t[d+1]){if((d=a(t,d+=2)).err)return d}else{if("<"!==t[d]){if(i(t[d]))continue;return y("InvalidChar","char '"+t[d]+"' is not expected.",b(t,d))}var v=d;if("!"===t[++d]){d=s(t,d);continue}var m=!1;"/"===t[d]&&(m=!0,d++);for(var g="";d<t.length&&">"!==t[d]&&" "!==t[d]&&"\t"!==t[d]&&"\n"!==t[d]&&"\r"!==t[d];d++)g+=t[d];if("/"===(g=g.trim())[g.length-1]&&(g=g.substring(0,g.length-1),d--),r=g,!n.isName(r)){return y("InvalidTag",0===g.trim().length?"Invalid space after '<'.":"Tag '"+g+"' is an invalid name.",b(t,d))}var w=c(t,d);if(!1===w)return y("InvalidAttr","Attributes for '"+g+"' have open quote.",b(t,d));var O=w.value;if(d=w.index,"/"===O[O.length-1]){var S=d-O.length,_=h(O=O.substring(0,O.length-1),e);if(!0!==_)return y(_.err.code,_.err.msg,b(t,S+_.err.line));l=!0}else if(m){if(!w.tagClosed)return y("InvalidTag","Closing tag '"+g+"' doesn't have proper closing.",b(t,d));if(O.trim().length>0)return y("InvalidTag","Closing tag '"+g+"' can't have attributes or invalid starting.",b(t,v));var P=u.pop();if(g!==P.tagName){var x=b(t,P.tagStartPos);return y("InvalidTag","Expected closing tag '"+P.tagName+"' (opened in line "+x.line+", col "+x.col+") instead of closing tag '"+g+"'.",b(t,v))}0==u.length&&(f=!0)}else{var k=h(O,e);if(!0!==k)return y(k.err.code,k.err.msg,b(t,d-O.length+k.err.line));if(!0===f)return y("InvalidXml","Multiple possible root nodes found.",b(t,d));-1!==e.unpairedTags.indexOf(g)||u.push({tagName:g,tagStartPos:v}),l=!0}for(d++;d<t.length;d++)if("<"===t[d]){if("!"===t[d+1]){d=s(t,++d);continue}if("?"!==t[d+1])break;if((d=a(t,++d)).err)return d}else if("&"===t[d]){var j=p(t,d);if(-1==j)return y("InvalidChar","char '&' is not expected.",b(t,d));d=j}else if(!0===f&&!i(t[d]))return y("InvalidXml","Extra text at the end",b(t,d));"<"===t[d]&&d--}return l?1==u.length?y("InvalidTag","Unclosed tag '"+u[0].tagName+"'.",b(t,u[0].tagStartPos)):!(u.length>0)||y("InvalidXml","Invalid '"+JSON.stringify(u.map(function(t){return t.tagName}),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):y("InvalidXml","Start tag expected.",1)};var u='"',l="'";function c(t,e){for(var r="",n="",o=!1;e<t.length;e++){if(t[e]===u||t[e]===l)""===n?n=t[e]:n!==t[e]||(n="");else if(">"===t[e]&&""===n){o=!0;break}r+=t[e]}return""===n&&{value:r,index:e,tagClosed:o}}var f=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function h(t,e){for(var r=n.getAllMatches(t,f),o={},i=0;i<r.length;i++){if(0===r[i][1].length)return y("InvalidAttr","Attribute '"+r[i][2]+"' has no space in starting.",v(r[i]));if(void 0!==r[i][3]&&void 0===r[i][4])return y("InvalidAttr","Attribute '"+r[i][2]+"' is without value.",v(r[i]));if(void 0===r[i][3]&&!e.allowBooleanAttributes)return y("InvalidAttr","boolean attribute '"+r[i][2]+"' is not allowed.",v(r[i]));var a=r[i][2];if(!d(a))return y("InvalidAttr","Attribute '"+a+"' is an invalid name.",v(r[i]));if(o.hasOwnProperty(a))return y("InvalidAttr","Attribute '"+a+"' is repeated.",v(r[i]));o[a]=1}return!0}function p(t,e){if(";"===t[++e])return-1;if("#"===t[e])return function(t,e){var r=/\d/;for("x"===t[e]&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(";"===t[e])return e;if(!t[e].match(r))break}return-1}(t,++e);for(var r=0;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(";"===t[e])break;return-1}return e}function y(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function d(t){return n.isName(t)}function b(t,e){var r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function v(t){return t.startIndex+t[1].length}},1290:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(8183),i={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function a(t){this.options=Object.assign({},i,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=l),this.processTextOrObjNode=s,this.options.format?(this.indentate=u,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function s(t,e,r){var n=this.j2x(t,r+1);return void 0!==t[this.options.textNodeName]&&1===Object.keys(t).length?this.buildTextValNode(t[this.options.textNodeName],e,n.attrStr,r):this.buildObjectNode(n.val,e,n.attrStr,r)}function u(t){return this.options.indentBy.repeat(t)}function l(t){return!(!t.startsWith(this.options.attributeNamePrefix)||t===this.options.textNodeName)&&t.substr(this.attrPrefixLen)}a.prototype.build=function(t){return this.options.preserveOrder?o(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={},r=this.options.arrayNodeName,n=t,r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,t=e),this.j2x(t,0).val);var e,r,n},a.prototype.j2x=function(t,e){var r="",o="";for(var i in t)if(void 0===t[i])this.isAttribute(i)&&(o+="");else if(null===t[i])this.isAttribute(i)?o+="":"?"===i[0]?o+=this.indentate(e)+"<"+i+"?"+this.tagEndChar:o+=this.indentate(e)+"<"+i+"/"+this.tagEndChar;else if(t[i]instanceof Date)o+=this.buildTextValNode(t[i],i,"",e);else if("object"!==n(t[i])){var a=this.isAttribute(i);if(a)r+=this.buildAttrPairStr(a,""+t[i]);else if(i===this.options.textNodeName){var s=this.options.tagValueProcessor(i,""+t[i]);o+=this.replaceEntitiesValue(s)}else o+=this.buildTextValNode(t[i],i,"",e)}else if(Array.isArray(t[i])){for(var u=t[i].length,l="",c=0;c<u;c++){var f=t[i][c];void 0===f||(null===f?"?"===i[0]?o+=this.indentate(e)+"<"+i+"?"+this.tagEndChar:o+=this.indentate(e)+"<"+i+"/"+this.tagEndChar:"object"===n(f)?this.options.oneListGroup?l+=this.j2x(f,e+1).val:l+=this.processTextOrObjNode(f,i,e):l+=this.buildTextValNode(f,i,"",e))}this.options.oneListGroup&&(l=this.buildObjectNode(l,i,"",e)),o+=l}else if(this.options.attributesGroupName&&i===this.options.attributesGroupName)for(var h=Object.keys(t[i]),p=h.length,y=0;y<p;y++)r+=this.buildAttrPairStr(h[y],""+t[i][h[y]]);else o+=this.processTextOrObjNode(t[i],i,e);return{attrStr:r,val:o}},a.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&"true"===e?" "+t:" "+t+'="'+e+'"'},a.prototype.buildObjectNode=function(t,e,r,n){if(""===t)return"?"===e[0]?this.indentate(n)+"<"+e+r+"?"+this.tagEndChar:this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar;var o="</"+e+this.tagEndChar,i="";return"?"===e[0]&&(i="?",o=""),!r&&""!==r||-1!==t.indexOf("<")?!1!==this.options.commentPropName&&e===this.options.commentPropName&&0===i.length?this.indentate(n)+"\x3c!--".concat(t,"--\x3e")+this.newLine:this.indentate(n)+"<"+e+r+i+this.tagEndChar+t+this.indentate(n)+o:this.indentate(n)+"<"+e+r+i+">"+t+o},a.prototype.closeTag=function(t){var e="";return-1!==this.options.unpairedTags.indexOf(t)?this.options.suppressUnpairedNode||(e="/"):e=this.options.suppressEmptyNode?"/":"></".concat(t),e},a.prototype.buildTextValNode=function(t,e,r,n){if(!1!==this.options.cdataPropName&&e===this.options.cdataPropName)return this.indentate(n)+"<![CDATA[".concat(t,"]]>")+this.newLine;if(!1!==this.options.commentPropName&&e===this.options.commentPropName)return this.indentate(n)+"\x3c!--".concat(t,"--\x3e")+this.newLine;if("?"===e[0])return this.indentate(n)+"<"+e+r+"?"+this.tagEndChar;var o=this.options.tagValueProcessor(e,t);return""===(o=this.replaceEntitiesValue(o))?this.indentate(n)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(n)+"<"+e+r+">"+o+"</"+e+this.tagEndChar},a.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(var e=0;e<this.options.entities.length;e++){var r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t},t.exports=a},8183:function(t){var e="\n";function r(t){for(var e=Object.keys(t),r=0;r<e.length;r++){var n=e[r];if(":@"!==n)return n}}function n(t,e){var r="";if(t&&!e.ignoreAttributes)for(var n in t){var o=e.attributeValueProcessor(n,t[n]);!0===(o=i(o,e))&&e.suppressBooleanAttributes?r+=" ".concat(n.substr(e.attributeNamePrefix.length)):r+=" ".concat(n.substr(e.attributeNamePrefix.length),'="').concat(o,'"')}return r}function o(t,e){var r=(t=t.substr(0,t.length-e.textNodeName.length-1)).substr(t.lastIndexOf(".")+1);for(var n in e.stopNodes)if(e.stopNodes[n]===t||e.stopNodes[n]==="*."+r)return!0;return!1}function i(t,e){if(t&&t.length>0&&e.processEntities)for(var r=0;r<e.entities.length;r++){var n=e.entities[r];t=t.replace(n.regex,n.val)}return t}t.exports=function(t,a){var s="";return a.format&&a.indentBy.length>0&&(s=e),function t(e,a,s,u){for(var l="",c=!1,f=0;f<e.length;f++){var h=e[f],p=r(h),y="";if(y=0===s.length?p:"".concat(s,".").concat(p),p!==a.textNodeName)if(p!==a.cdataPropName)if(p!==a.commentPropName)if("?"!==p[0]){var d=u;""!==d&&(d+=a.indentBy);var b=n(h[":@"],a),v=u+"<".concat(p).concat(b),m=t(h[p],a,y,d);-1!==a.unpairedTags.indexOf(p)?a.suppressUnpairedNode?l+=v+">":l+=v+"/>":m&&0!==m.length||!a.suppressEmptyNode?m&&m.endsWith(">")?l+=v+">".concat(m).concat(u,"</").concat(p,">"):(l+=v+">",m&&""!==u&&(m.includes("/>")||m.includes("</"))?l+=u+a.indentBy+m+u:l+=m,l+="</".concat(p,">")):l+=v+"/>",c=!0}else{var g=n(h[":@"],a),w="?xml"===p?"":u,O=h[p][0][a.textNodeName];O=0!==O.length?" "+O:"",l+=w+"<".concat(p).concat(O).concat(g,"?>"),c=!0}else l+=u+"\x3c!--".concat(h[p][0][a.textNodeName],"--\x3e"),c=!0;else c&&(l+=u),l+="<![CDATA[".concat(h[p][0][a.textNodeName],"]]>"),c=!1;else{var S=h[p];o(y,a)||(S=i(S=a.tagValueProcessor(p,S),a)),c&&(l+=u),l+=S,c=!1}}return l}(t,a,"",s)}},8763:function(t,e,r){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var i=r(144);function a(t,e){for(var r="";e<t.length&&"'"!==t[e]&&'"'!==t[e];e++)r+=t[e];if(-1!==(r=r.trim()).indexOf(" "))throw new Error("External entites are not supported");for(var n=t[e++],o="";e<t.length&&t[e]!==n;e++)o+=t[e];return[r,o,e]}function s(t,e){return"!"===t[e+1]&&"-"===t[e+2]&&"-"===t[e+3]}function u(t,e){return"!"===t[e+1]&&"E"===t[e+2]&&"N"===t[e+3]&&"T"===t[e+4]&&"I"===t[e+5]&&"T"===t[e+6]&&"Y"===t[e+7]}function l(t,e){return"!"===t[e+1]&&"E"===t[e+2]&&"L"===t[e+3]&&"E"===t[e+4]&&"M"===t[e+5]&&"E"===t[e+6]&&"N"===t[e+7]&&"T"===t[e+8]}function c(t,e){return"!"===t[e+1]&&"A"===t[e+2]&&"T"===t[e+3]&&"T"===t[e+4]&&"L"===t[e+5]&&"I"===t[e+6]&&"S"===t[e+7]&&"T"===t[e+8]}function f(t,e){return"!"===t[e+1]&&"N"===t[e+2]&&"O"===t[e+3]&&"T"===t[e+4]&&"A"===t[e+5]&&"T"===t[e+6]&&"I"===t[e+7]&&"O"===t[e+8]&&"N"===t[e+9]}function h(t){if(i.isName(t))return t;throw new Error("Invalid entity name ".concat(t))}t.exports=function(t,e){var r={};if("O"!==t[e+3]||"C"!==t[e+4]||"T"!==t[e+5]||"Y"!==t[e+6]||"P"!==t[e+7]||"E"!==t[e+8])throw new Error("Invalid Tag instead of DOCTYPE");e+=9;for(var o=1,i=!1,p=!1;e<t.length;e++)if("<"!==t[e]||p)if(">"===t[e]){if(p?"-"===t[e-1]&&"-"===t[e-2]&&(p=!1,o--):o--,0===o)break}else"["===t[e]?i=!0:t[e];else{if(i&&u(t,e)){var y=n(a(t,(e+=7)+1),3);entityName=y[0],val=y[1],e=y[2],-1===val.indexOf("&")&&(r[h(entityName)]={regx:RegExp("&".concat(entityName,";"),"g"),val:val})}else if(i&&l(t,e))e+=8;else if(i&&c(t,e))e+=8;else if(i&&f(t,e))e+=9;else{if(!s)throw new Error("Invalid DOCTYPE");p=!0}o++}if(0!==o)throw new Error("Unclosed DOCTYPE");return{entities:r,i:e}}},4706:function(t,e){var r={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:function(){return!1},commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,r){return t}};e.buildOptions=function(t){return Object.assign({},r,t)},e.defaultOptions=r},9244:function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=r(144),s=r(5295),u=r(8763),l=r(8795),c=("<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,a.nameRegexp),function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=f,this.parseXml=b,this.parseTextData=h,this.resolveNameSpace=p,this.buildAttributesMap=d,this.isItStopNode=w,this.replaceEntitiesValue=m,this.readStopNodeData=_,this.saveTextToParentTag=g,this.addChild=v}));function f(t){for(var e=Object.keys(t),r=0;r<e.length;r++){var n=e[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:t[n]}}}function h(t,e,r,n,i,a,s){if(void 0!==t&&(this.options.trimValues&&!n&&(t=t.trim()),t.length>0)){s||(t=this.replaceEntitiesValue(t));var u=this.options.tagValueProcessor(e,t,r,i,a);return null===u||void 0===u?t:o(u)!==o(t)||u!==t?u:this.options.trimValues?P(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?P(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function p(t){if(this.options.removeNSPrefix){var e=t.split(":"),r="/"===t.charAt(0)?"/":"";if("xmlns"===e[0])return"";2===e.length&&(t=r+e[1])}return t}var y=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function d(t,e,r){if(!this.options.ignoreAttributes&&"string"==typeof t){for(var n=a.getAllMatches(t,y),i=n.length,s={},u=0;u<i;u++){var l=this.resolveNameSpace(n[u][1]),c=n[u][4],f=this.options.attributeNamePrefix+l;if(l.length)if(this.options.transformAttributeName&&(f=this.options.transformAttributeName(f)),"__proto__"===f&&(f="#__proto__"),void 0!==c){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);var h=this.options.attributeValueProcessor(l,c,e);null===h||void 0===h?s[f]=c:o(h)!==o(c)||h!==c?s[f]=h:s[f]=P(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[f]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){var p={};return p[this.options.attributesGroupName]=s,p}return s}}var b=function(t){t=t.replace(/\r\n?/g,"\n");for(var e=new s("!xml"),r=e,o="",i="",a=0;a<t.length;a++){if("<"===t[a])if("/"===t[a+1]){var l=O(t,">",a,"Closing Tag is not closed."),c=t.substring(a+2,l).trim();if(this.options.removeNSPrefix){var f=c.indexOf(":");-1!==f&&(c=c.substr(f+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&(o=this.saveTextToParentTag(o,r,i));var h=i.substring(i.lastIndexOf(".")+1);if(c&&-1!==this.options.unpairedTags.indexOf(c))throw new Error("Unpaired tag can not be used as closing tag: </".concat(c,">"));var p=0;h&&-1!==this.options.unpairedTags.indexOf(h)?(p=i.lastIndexOf(".",i.lastIndexOf(".")-1),this.tagsNodeStack.pop()):p=i.lastIndexOf("."),i=i.substring(0,p),r=this.tagsNodeStack.pop(),o="",a=l}else if("?"===t[a+1]){var y=S(t,a,!1,"?>");if(!y)throw new Error("Pi Tag is not closed.");if(o=this.saveTextToParentTag(o,r,i),this.options.ignoreDeclaration&&"?xml"===y.tagName||this.options.ignorePiTags);else{var d=new s(y.tagName);d.add(this.options.textNodeName,""),y.tagName!==y.tagExp&&y.attrExpPresent&&(d[":@"]=this.buildAttributesMap(y.tagExp,i,y.tagName)),this.addChild(r,d,i)}a=y.closeIndex+1}else if("!--"===t.substr(a+1,3)){var b=O(t,"--\x3e",a+4,"Comment is not closed.");if(this.options.commentPropName){var v=t.substring(a+4,b-2);o=this.saveTextToParentTag(o,r,i),r.add(this.options.commentPropName,[n({},this.options.textNodeName,v)])}a=b}else if("!D"===t.substr(a+1,2)){var m=u(t,a);this.docTypeEntities=m.entities,a=m.i}else if("!["===t.substr(a+1,2)){var g=O(t,"]]>",a,"CDATA is not closed.")-2,w=t.substring(a+9,g);if(o=this.saveTextToParentTag(o,r,i),this.options.cdataPropName)r.add(this.options.cdataPropName,[n({},this.options.textNodeName,w)]);else{var _=this.parseTextData(w,r.tagname,i,!0,!1,!0);void 0==_&&(_=""),r.add(this.options.textNodeName,_)}a=g+2}else{var P=S(t,a,this.options.removeNSPrefix),x=P.tagName,k=P.tagExp,j=P.attrExpPresent,E=P.closeIndex;this.options.transformTagName&&(x=this.options.transformTagName(x)),r&&o&&"!xml"!==r.tagname&&(o=this.saveTextToParentTag(o,r,i,!1));var T=r;if(T&&-1!==this.options.unpairedTags.indexOf(T.tagname)&&(r=this.tagsNodeStack.pop(),i=i.substring(0,i.lastIndexOf("."))),x!==e.tagname&&(i+=i?"."+x:x),this.isItStopNode(this.options.stopNodes,i,x)){var C="";if(k.length>0&&k.lastIndexOf("/")===k.length-1)a=P.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(x))a=P.closeIndex;else{var R=this.readStopNodeData(t,x,E+1);if(!R)throw new Error("Unexpected end of ".concat(x));a=R.i,C=R.tagContent}var A=new s(x);x!==k&&j&&(A[":@"]=this.buildAttributesMap(k,i,x)),C&&(C=this.parseTextData(C,x,i,!0,j,!0,!0)),i=i.substr(0,i.lastIndexOf(".")),A.add(this.options.textNodeName,C),this.addChild(r,A,i)}else{if(k.length>0&&k.lastIndexOf("/")===k.length-1){"/"===x[x.length-1]?(x=x.substr(0,x.length-1),i=i.substr(0,i.length-1),k=x):k=k.substr(0,k.length-1),this.options.transformTagName&&(x=this.options.transformTagName(x));var M=new s(x);x!==k&&j&&(M[":@"]=this.buildAttributesMap(k,i,x)),this.addChild(r,M,i),i=i.substr(0,i.lastIndexOf("."))}else{var L=new s(x);this.tagsNodeStack.push(r),x!==k&&j&&(L[":@"]=this.buildAttributesMap(k,i,x)),this.addChild(r,L,i),r=L}o="",a=E}}else o+=t[a]}return e.child};function v(t,e,r){var n=this.options.updateTag(e.tagname,r,e[":@"]);!1===n||("string"==typeof n?(e.tagname=n,t.addChild(e)):t.addChild(e))}var m=function(t){if(this.options.processEntities){for(var e in this.docTypeEntities){var r=this.docTypeEntities[e];t=t.replace(r.regx,r.val)}for(var n in this.lastEntities){var o=this.lastEntities[n];t=t.replace(o.regex,o.val)}if(this.options.htmlEntities)for(var i in this.htmlEntities){var a=this.htmlEntities[i];t=t.replace(a.regex,a.val)}t=t.replace(this.ampEntity.regex,this.ampEntity.val)}return t};function g(t,e,r,n){return t&&(void 0===n&&(n=0===Object.keys(e.child).length),void 0!==(t=this.parseTextData(t,e.tagname,r,!1,!!e[":@"]&&0!==Object.keys(e[":@"]).length,n))&&""!==t&&e.add(this.options.textNodeName,t),t=""),t}function w(t,e,r){var n="*."+r;for(var o in t){var i=t[o];if(n===i||e===i)return!0}return!1}function O(t,e,r,n){var o=t.indexOf(e,r);if(-1===o)throw new Error(n);return o+e.length-1}function S(t,e,r){var n=function(t,e){for(var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:">",o="",i=e;i<t.length;i++){var a=t[i];if(r)a===r&&(r="");else if('"'===a||"'"===a)r=a;else if(a===n[0]){if(!n[1])return{data:o,index:i};if(t[i+1]===n[1])return{data:o,index:i}}else"\t"===a&&(a=" ");o+=a}}(t,e+1,arguments.length>3&&void 0!==arguments[3]?arguments[3]:">");if(n){var o=n.data,i=n.index,a=o.search(/\s/),s=o,u=!0;if(-1!==a&&(s=o.substr(0,a).replace(/\s\s*$/,""),o=o.substr(a+1)),r){var l=s.indexOf(":");-1!==l&&(u=(s=s.substr(l+1))!==n.data.substr(l+1))}return{tagName:s,tagExp:o,closeIndex:i,attrExpPresent:u}}}function _(t,e,r){for(var n=r,o=1;r<t.length;r++)if("<"===t[r])if("/"===t[r+1]){var i=O(t,">",r,"".concat(e," is not closed"));if(t.substring(r+2,i).trim()===e&&0===--o)return{tagContent:t.substring(n,r),i:i};r=i}else if("?"===t[r+1]){r=O(t,"?>",r+1,"StopNode is not closed.")}else if("!--"===t.substr(r+1,3)){r=O(t,"--\x3e",r+3,"StopNode is not closed.")}else if("!["===t.substr(r+1,2)){r=O(t,"]]>",r,"StopNode is not closed.")-2}else{var a=S(t,r,">");if(a)(a&&a.tagName)===e&&"/"!==a.tagExp[a.tagExp.length-1]&&o++,r=a.closeIndex}}function P(t,e,r){if(e&&"string"==typeof t){var n=t.trim();return"true"===n||"false"!==n&&l(t,r)}return a.isExist(t)?t:""}t.exports=c},9162:function(t,e,r){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=r(4706).buildOptions,i=r(9244),a=r(1520).prettify,s=r(5954),u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.externalEntities={},this.options=o(e)}var e,r,u;return e=t,(r=[{key:"parse",value:function(t,e){if("string"==typeof t);else{if(!t.toString)throw new Error("XML data is accepted in String or Bytes[] form.");t=t.toString()}if(e){!0===e&&(e={});var r=s.validate(t,e);if(!0!==r)throw Error("".concat(r.err.msg,":").concat(r.err.line,":").concat(r.err.col))}var n=new i(this.options);n.addExternalEntities(this.externalEntities);var o=n.parseXml(t);return this.options.preserveOrder||void 0===o?o:a(o,this.options)}},{key:"addEntity",value:function(t,e){if(-1!==e.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==t.indexOf("&")||-1!==t.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if("&"===e)throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=e}}])&&n(e.prototype,r),u&&n(e,u),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=u},1520:function(t,e){"use strict";function r(t){for(var e=Object.keys(t),r=0;r<e.length;r++){var n=e[r];if(":@"!==n)return n}}function n(t,e,r,n){if(e)for(var o=Object.keys(e),i=o.length,a=0;a<i;a++){var s=o[a];n.isArray(s,r+"."+s,!0,!0)?t[s]=[e[s]]:t[s]=e[s]}}function o(t,e){var r=e.textNodeName,n=Object.keys(t).length;return 0===n||!(1!==n||!t[r]&&"boolean"!=typeof t[r]&&0!==t[r])}e.prettify=function(t,e){return function t(e,i,a){for(var s,u={},l=0;l<e.length;l++){var c=e[l],f=r(c),h="";if(h=void 0===a?f:a+"."+f,f===i.textNodeName)void 0===s?s=c[f]:s+=""+c[f];else{if(void 0===f)continue;if(c[f]){var p=t(c[f],i,h),y=o(p,i);c[":@"]?n(p,c[":@"],h,i):1!==Object.keys(p).length||void 0===p[i.textNodeName]||i.alwaysCreateTextNode?0===Object.keys(p).length&&(i.alwaysCreateTextNode?p[i.textNodeName]="":p=""):p=p[i.textNodeName],void 0!==u[f]&&u.hasOwnProperty(f)?(Array.isArray(u[f])||(u[f]=[u[f]]),u[f].push(p)):i.isArray(f,h,y)?u[f]=[p]:u[f]=p}}}return"string"==typeof s?s.length>0&&(u[i.textNodeName]=s):void 0!==s&&(u[i.textNodeName]=s),u}(t,e)}},5295:function(t){"use strict";function e(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tagname=e,this.child=[],this[":@"]={}}var n,o,i;return n=t,(o=[{key:"add",value:function(t,r){"__proto__"===t&&(t="#__proto__"),this.child.push(e({},t,r))}},{key:"addChild",value:function(t){var r;("__proto__"===t.tagname&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0)?this.child.push((e(r={},t.tagname,t.child),e(r,":@",t[":@"]),r)):this.child.push(e({},t.tagname,t.child))}}])&&r(n.prototype,o),i&&r(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}();t.exports=n},5937:function(t){!function(e){"use strict";if(e.__disableNativeFetch||!e.fetch){s.prototype.append=function(t,e){t=i(t),e=a(e);var r=this.map[t];r||(r=[],this.map[t]=r),r.push(e)},s.prototype.delete=function(t){delete this.map[i(t)]},s.prototype.get=function(t){var e=this.map[i(t)];return e?e[0]:null},s.prototype.getAll=function(t){return this.map[i(t)]||[]},s.prototype.has=function(t){return this.map.hasOwnProperty(i(t))},s.prototype.set=function(t,e){this.map[i(t)]=[a(e)]},s.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){t.call(e,n,r,this)},this)},this)};var r={blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e},n=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this)},f.call(h.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var o=[301,302,303,307,308];y.redirect=function(t,e){if(-1===o.indexOf(e))throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},e.Headers=s,e.Request=h,e.Response=y,e.fetch=function(t,e){return new Promise(function(n,o){var i;i=h.prototype.isPrototypeOf(t)&&!e?t:new h(t,e);var a=new XMLHttpRequest;var u=!1;function l(){if(4===a.readyState){var t=1223===a.status?204:a.status;if(t<100||t>599){if(u)return;return u=!0,void o(new TypeError("Network request failed"))}var e={status:t,statusText:a.statusText,headers:function(t){var e=new s;return t.getAllResponseHeaders().trim().split("\n").forEach(function(t){var r=t.trim().split(":"),n=r.shift().trim(),o=r.join(":").trim();e.append(n,o)}),e}(a),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},r="response"in a?a.response:a.responseText;u||(u=!0,n(new y(r,e)))}}a.onreadystatechange=l,a.onload=l,a.onerror=function(){u||(u=!0,o(new TypeError("Network request failed")))},a.open(i.method,i.url,!0);try{"include"===i.credentials&&("withCredentials"in a?a.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(t){console&&console.warn&&console.warn("set withCredentials error:"+t)}"responseType"in a&&r.blob&&(a.responseType="blob"),i.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send(void 0===i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0,t.exports&&(t.exports=e.fetch)}function i(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function a(t){return"string"!=typeof t&&(t=String(t)),t}function s(t){this.map={},t instanceof s?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function u(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function l(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function c(t){var e=new FileReader;return e.readAsArrayBuffer(t),l(e)}function f(){return this.bodyUsed=!1,this._initBody=function(t,e){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(r.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t,this._options=e;else if(r.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!r.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText=""},r.blob?(this.blob=function(){var t=u(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var t,e,r,n,o,i,a,s=u(this);if(s)return s;if(this._bodyBlob)return t=this._bodyBlob,e=this._options,r=new FileReader,n=e.headers.map["content-type"]?e.headers.map["content-type"].toString():"",o=/charset\=[0-9a-zA-Z\-\_]*;?/,i=t.type.match(o)||n.match(o),a=[t],i&&a.push(i[0].replace(/^charset\=/,"").replace(/;$/,"")),r.readAsText.apply(r,a),l(r);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=u(this);return t||Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(t,e){var r,o,i=(e=e||{}).body;if(h.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,i||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=(r=e.method||this.method||"GET",o=r.toUpperCase(),n.indexOf(o)>-1?o:r),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i,e)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function y(t,e){e||(e={}),this._initBody(t,e),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof s?e.headers:new s(e.headers),this.url=e.url||""}}("undefined"!=typeof self?self:this)},4238:function(t,e){var r,n,o;n=[e,t],void 0===(o="function"==typeof(r=function(t,e){"use strict";var r={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function n(t){try{delete window[t]}catch(e){window[t]=void 0}}function o(t){var e=document.getElementById(t);e&&document.getElementsByTagName("head")[0].removeChild(e)}e.exports=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=t,a=e.timeout||r.timeout,s=e.jsonpCallback||r.jsonpCallback,u=void 0;return new Promise(function(r,l){var c=e.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),f=s+"_"+c;window[c]=function(t){r({ok:!0,json:function(){return Promise.resolve(t)}}),u&&clearTimeout(u),o(f),n(c)},i+=-1===i.indexOf("?")?"?":"&";var h=document.createElement("script");h.setAttribute("src",""+i+s+"="+c),e.charset&&h.setAttribute("charset",e.charset),h.id=f,document.getElementsByTagName("head")[0].appendChild(h),u=setTimeout(function(){l(new Error("JSONP request to "+t+" timed out")),n(c),o(f),window[c]=function(){n(c)}},a),h.onerror=function(){l(new Error("JSONP request to "+t+" failed")),n(c),o(f),u&&clearTimeout(u)}})}})?r.apply(e,n):r)||(t.exports=o)},8813:function(t){var e=[],r=[],n="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function o(t,o){if(o=o||{},void 0===t)throw new Error(n);var i,a=!0===o.prepend?"prepend":"append",s=void 0!==o.container?o.container:document.querySelector("head"),u=e.indexOf(s);return-1===u&&(u=e.push(s)-1,r[u]={}),void 0!==r[u]&&void 0!==r[u][a]?i=r[u][a]:(i=r[u][a]=function(){var t=document.createElement("style");return t.setAttribute("type","text/css"),t}(),"prepend"===a?s.insertBefore(i,s.childNodes[0]):s.appendChild(i)),65279===t.charCodeAt(0)&&(t=t.substr(1,t.length)),i.styleSheet?i.styleSheet.cssText+=t:i.textContent+=t,i}t.exports=o,t.exports.insertCss=o},2138:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t);var o=200,i="__lodash_hash_undefined__",a=9007199254740991,s="[object Arguments]",u="[object Boolean]",l="[object Date]",c="[object Function]",f="[object GeneratorFunction]",h="[object Map]",p="[object Number]",y="[object Object]",d="[object RegExp]",b="[object Set]",v="[object String]",m="[object Symbol]",g="[object ArrayBuffer]",w="[object DataView]",O="[object Float32Array]",S="[object Float64Array]",_="[object Int8Array]",P="[object Int16Array]",x="[object Int32Array]",k="[object Uint8Array]",j="[object Uint8ClampedArray]",E="[object Uint16Array]",T="[object Uint32Array]",C=/\w*$/,R=/^\[object .+?Constructor\]$/,A=/^(?:0|[1-9]\d*)$/,M={};M[s]=M["[object Array]"]=M[g]=M[w]=M[u]=M[l]=M[O]=M[S]=M[_]=M[P]=M[x]=M[h]=M[p]=M[y]=M[d]=M[b]=M[v]=M[m]=M[k]=M[j]=M[E]=M[T]=!0,M["[object Error]"]=M[c]=M["[object WeakMap]"]=!1;var L="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,N="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,I=L||N||Function("return this")(),D="object"==n(e)&&e&&!e.nodeType&&e,F=D&&"object"==n(t)&&t&&!t.nodeType&&t,B=F&&F.exports===D;function G(t,e){return t.set(e[0],e[1]),t}function U(t,e){return t.add(e),t}function J(t,e,r,n){var o=-1,i=t?t.length:0;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function V(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function z(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function q(t,e){return function(r){return t(e(r))}}function H(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var W,Y=Array.prototype,X=Function.prototype,Q=Object.prototype,Z=I["__core-js_shared__"],K=(W=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",$=X.toString,tt=Q.hasOwnProperty,et=Q.toString,rt=RegExp("^"+$.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=B?I.Buffer:void 0,ot=I.Symbol,it=I.Uint8Array,at=q(Object.getPrototypeOf,Object),st=Object.create,ut=Q.propertyIsEnumerable,lt=Y.splice,ct=Object.getOwnPropertySymbols,ft=nt?nt.isBuffer:void 0,ht=q(Object.keys,Object),pt=Ft(I,"DataView"),yt=Ft(I,"Map"),dt=Ft(I,"Promise"),bt=Ft(I,"Set"),vt=Ft(I,"WeakMap"),mt=Ft(Object,"create"),gt=Vt(pt),wt=Vt(yt),Ot=Vt(dt),St=Vt(bt),_t=Vt(vt),Pt=ot?ot.prototype:void 0,xt=Pt?Pt.valueOf:void 0;function kt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function jt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Et(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Tt(t){this.__data__=new jt(t)}function Ct(t,e){var r=qt(t)||function(t){return function(t){return function(t){return!!t&&"object"==n(t)}(t)&&Ht(t)}(t)&&tt.call(t,"callee")&&(!ut.call(t,"callee")||et.call(t)==s)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],o=r.length,i=!!o;for(var a in t)!e&&!tt.call(t,a)||i&&("length"==a||Ut(a,o))||r.push(a);return r}function Rt(t,e,r){var n=t[e];tt.call(t,e)&&zt(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function At(t,e){for(var r=t.length;r--;)if(zt(t[r][0],e))return r;return-1}function Mt(t,e,r,n,o,i,a){var R;if(n&&(R=i?n(t,o,i,a):n(t)),void 0!==R)return R;if(!Xt(t))return t;var A=qt(t);if(A){if(R=function(t){var e=t.length,r=t.constructor(e);e&&"string"==typeof t[0]&&tt.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!e)return function(t,e){var r=-1,n=t.length;e||(e=Array(n));for(;++r<n;)e[r]=t[r];return e}(t,R)}else{var L=Gt(t),N=L==c||L==f;if(Wt(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if(L==y||L==s||N&&!i){if(V(t))return i?t:{};if(R=function(t){return"function"!=typeof t.constructor||Jt(t)?{}:(e=at(t),Xt(e)?st(e):{});var e}(N?{}:t),!e)return function(t,e){return It(t,Bt(t),e)}(t,function(t,e){return t&&It(e,Qt(e),t)}(R,t))}else{if(!M[L])return i?t:{};R=function(t,e,r,n){var o=t.constructor;switch(e){case g:return Nt(t);case u:case l:return new o(+t);case w:return function(t,e){var r=e?Nt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,n);case O:case S:case _:case P:case x:case k:case j:case E:case T:return function(t,e){var r=e?Nt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,n);case h:return function(t,e,r){return J(e?r(z(t),!0):z(t),G,new t.constructor)}(t,n,r);case p:case v:return new o(t);case d:return(s=new(a=t).constructor(a.source,C.exec(a))).lastIndex=a.lastIndex,s;case b:return function(t,e,r){return J(e?r(H(t),!0):H(t),U,new t.constructor)}(t,n,r);case m:return i=t,xt?Object(xt.call(i)):{}}var i;var a,s}(t,L,Mt,e)}}a||(a=new Tt);var I=a.get(t);if(I)return I;if(a.set(t,R),!A)var D=r?function(t){return function(t,e,r){var n=e(t);return qt(t)?n:function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}(n,r(t))}(t,Qt,Bt)}(t):Qt(t);return function(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r,t););}(D||t,function(o,i){D&&(o=t[i=o]),Rt(R,i,Mt(o,e,r,n,i,t,a))}),R}function Lt(t){return!(!Xt(t)||K&&K in t)&&(Yt(t)||V(t)?rt:R).test(Vt(t))}function Nt(t){var e=new t.constructor(t.byteLength);return new it(e).set(new it(t)),e}function It(t,e,r,n){r||(r={});for(var o=-1,i=e.length;++o<i;){var a=e[o],s=n?n(r[a],t[a],a,r,t):void 0;Rt(r,a,void 0===s?t[a]:s)}return r}function Dt(t,e){var r,o,i=t.__data__;return("string"==(o=n(r=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function Ft(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Lt(r)?r:void 0}kt.prototype.clear=function(){this.__data__=mt?mt(null):{}},kt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},kt.prototype.get=function(t){var e=this.__data__;if(mt){var r=e[t];return r===i?void 0:r}return tt.call(e,t)?e[t]:void 0},kt.prototype.has=function(t){var e=this.__data__;return mt?void 0!==e[t]:tt.call(e,t)},kt.prototype.set=function(t,e){return this.__data__[t]=mt&&void 0===e?i:e,this},jt.prototype.clear=function(){this.__data__=[]},jt.prototype.delete=function(t){var e=this.__data__,r=At(e,t);return!(r<0||(r==e.length-1?e.pop():lt.call(e,r,1),0))},jt.prototype.get=function(t){var e=this.__data__,r=At(e,t);return r<0?void 0:e[r][1]},jt.prototype.has=function(t){return At(this.__data__,t)>-1},jt.prototype.set=function(t,e){var r=this.__data__,n=At(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},Et.prototype.clear=function(){this.__data__={hash:new kt,map:new(yt||jt),string:new kt}},Et.prototype.delete=function(t){return Dt(this,t).delete(t)},Et.prototype.get=function(t){return Dt(this,t).get(t)},Et.prototype.has=function(t){return Dt(this,t).has(t)},Et.prototype.set=function(t,e){return Dt(this,t).set(t,e),this},Tt.prototype.clear=function(){this.__data__=new jt},Tt.prototype.delete=function(t){return this.__data__.delete(t)},Tt.prototype.get=function(t){return this.__data__.get(t)},Tt.prototype.has=function(t){return this.__data__.has(t)},Tt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof jt){var n=r.__data__;if(!yt||n.length<o-1)return n.push([t,e]),this;r=this.__data__=new Et(n)}return r.set(t,e),this};var Bt=ct?q(ct,Object):function(){return[]},Gt=function(t){return et.call(t)};function Ut(t,e){return!!(e=null==e?a:e)&&("number"==typeof t||A.test(t))&&t>-1&&t%1==0&&t<e}function Jt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Q)}function Vt(t){if(null!=t){try{return $.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function zt(t,e){return t===e||t!=t&&e!=e}(pt&&Gt(new pt(new ArrayBuffer(1)))!=w||yt&&Gt(new yt)!=h||dt&&"[object Promise]"!=Gt(dt.resolve())||bt&&Gt(new bt)!=b||vt&&"[object WeakMap]"!=Gt(new vt))&&(Gt=function(t){var e=et.call(t),r=e==y?t.constructor:void 0,n=r?Vt(r):void 0;if(n)switch(n){case gt:return w;case wt:return h;case Ot:return"[object Promise]";case St:return b;case _t:return"[object WeakMap]"}return e});var qt=Array.isArray;function Ht(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}(t.length)&&!Yt(t)}var Wt=ft||function(){return!1};function Yt(t){var e=Xt(t)?et.call(t):"";return e==c||e==f}function Xt(t){var e=n(t);return!!t&&("object"==e||"function"==e)}function Qt(t){return Ht(t)?Ct(t):function(t){if(!Jt(t))return ht(t);var e=[];for(var r in Object(t))tt.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}t.exports=function(t){return Mt(t,!0,!0)}},7820:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=9007199254740991,i="[object Arguments]",a="[object Function]",s="[object GeneratorFunction]",u="[object Map]",l="[object Set]",c=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,h="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,p="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,y=h||p||Function("return this")();function d(t,e){return function(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}(e,function(e){return[e,t[e]]})}var b,v,m,g=Function.prototype,w=Object.prototype,O=y["__core-js_shared__"],S=(b=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",_=g.toString,P=w.hasOwnProperty,x=w.toString,k=RegExp("^"+_.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),j=w.propertyIsEnumerable,E=(v=Object.keys,m=Object,function(t){return v(m(t))}),T=J(y,"DataView"),C=J(y,"Map"),R=J(y,"Promise"),A=J(y,"Set"),M=J(y,"WeakMap"),L=q(T),N=q(C),I=q(R),D=q(A),F=q(M);function B(t,e){var r=H(t)||function(t){return function(t){return function(t){return!!t&&"object"==n(t)}(t)&&W(t)}(t)&&P.call(t,"callee")&&(!j.call(t,"callee")||x.call(t)==i)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],o=r.length,a=!!o;for(var s in t)!e&&!P.call(t,s)||a&&("length"==s||z(s,o))||r.push(s);return r}function G(t){return!(!X(t)||S&&S in t)&&(Y(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?k:c).test(q(t))}function U(t){if(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||w,e!==n)return E(t);var e,r,n,o=[];for(var i in Object(t))P.call(t,i)&&"constructor"!=i&&o.push(i);return o}function J(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return G(r)?r:void 0}var V=function(t){return x.call(t)};function z(t,e){return!!(e=null==e?o:e)&&("number"==typeof t||f.test(t))&&t>-1&&t%1==0&&t<e}function q(t){if(null!=t){try{return _.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(T&&"[object DataView]"!=V(new T(new ArrayBuffer(1)))||C&&V(new C)!=u||R&&"[object Promise]"!=V(R.resolve())||A&&V(new A)!=l||M&&"[object WeakMap]"!=V(new M))&&(V=function(t){var e=x.call(t),r="[object Object]"==e?t.constructor:void 0,n=r?q(r):void 0;if(n)switch(n){case L:return"[object DataView]";case N:return u;case I:return"[object Promise]";case D:return l;case F:return"[object WeakMap]"}return e});var H=Array.isArray;function W(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}(t.length)&&!Y(t)}function Y(t){var e=X(t)?x.call(t):"";return e==a||e==s}function X(t){var e=n(t);return!!t&&("object"==e||"function"==e)}var Q,Z=(Q=function(t){return W(t)?B(t):U(t)},function(t){var e,r,n,o=V(t);return o==u?(e=t,r=-1,n=Array(e.size),e.forEach(function(t,e){n[++r]=[e,t]}),n):o==l?function(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=[t,t]}),r}(t):d(t,Q(t))});t.exports=Z},9819:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t);var o=200,i="Expected a function",a="__lodash_hash_undefined__",s=1,u=2,l=1/0,c=9007199254740991,f="[object Arguments]",h="[object Array]",p="[object Boolean]",y="[object Date]",d="[object Error]",b="[object Function]",v="[object GeneratorFunction]",m="[object Map]",g="[object Number]",w="[object Object]",O="[object RegExp]",S="[object Set]",_="[object String]",P="[object Symbol]",x="[object ArrayBuffer]",k="[object DataView]",j=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,E=/^\w*$/,T=/^\./,C=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,R=/\\(\\)?/g,A=/^\[object .+?Constructor\]$/,M=/^(?:0|[1-9]\d*)$/,L={};L["[object Float32Array]"]=L["[object Float64Array]"]=L["[object Int8Array]"]=L["[object Int16Array]"]=L["[object Int32Array]"]=L["[object Uint8Array]"]=L["[object Uint8ClampedArray]"]=L["[object Uint16Array]"]=L["[object Uint32Array]"]=!0,L[f]=L[h]=L[x]=L[p]=L[k]=L[y]=L[d]=L[b]=L[m]=L[g]=L[w]=L[O]=L[S]=L[_]=L["[object WeakMap]"]=!1;var N="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,I="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,D=N||I||Function("return this")(),F="object"==n(e)&&e&&!e.nodeType&&e,B=F&&"object"==n(t)&&t&&!t.nodeType&&t,G=B&&B.exports===F&&N.process,U=function(){try{return G&&G.binding("util")}catch(t){}}(),J=U&&U.isTypedArray;function V(t,e){return!!(t?t.length:0)&&function(t,e,r){if(e!=e)return function(t,e,r,n){var o=t.length,i=r+(n?1:-1);for(;n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,H,r);var n=r-1,o=t.length;for(;++n<o;)if(t[n]===e)return n;return-1}(t,e,0)>-1}function z(t,e,r){for(var n=-1,o=t?t.length:0;++n<o;)if(r(e,t[n]))return!0;return!1}function q(t,e){for(var r=-1,n=t?t.length:0;++r<n;)if(e(t[r],r,t))return!0;return!1}function H(t){return t!=t}function W(t,e){return t.has(e)}function Y(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function X(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function Q(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var Z,K,$,tt=Array.prototype,et=Function.prototype,rt=Object.prototype,nt=D["__core-js_shared__"],ot=(Z=/[^.]+$/.exec(nt&&nt.keys&&nt.keys.IE_PROTO||""))?"Symbol(src)_1."+Z:"",it=et.toString,at=rt.hasOwnProperty,st=rt.toString,ut=RegExp("^"+it.call(at).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lt=D.Symbol,ct=D.Uint8Array,ft=rt.propertyIsEnumerable,ht=tt.splice,pt=(K=Object.keys,$=Object,function(t){return K($(t))}),yt=qt(D,"DataView"),dt=qt(D,"Map"),bt=qt(D,"Promise"),vt=qt(D,"Set"),mt=qt(D,"WeakMap"),gt=qt(Object,"create"),wt=$t(yt),Ot=$t(dt),St=$t(bt),_t=$t(vt),Pt=$t(mt),xt=lt?lt.prototype:void 0,kt=xt?xt.valueOf:void 0,jt=xt?xt.toString:void 0;function Et(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Tt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ct(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Rt(t){var e=-1,r=t?t.length:0;for(this.__data__=new Ct;++e<r;)this.add(t[e])}function At(t){this.__data__=new Tt(t)}function Mt(t,e){var r=ne(t)||re(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,o=!!n;for(var i in t)!e&&!at.call(t,i)||o&&("length"==i||Wt(i,n))||r.push(i);return r}function Lt(t,e){for(var r=t.length;r--;)if(ee(t[r][0],e))return r;return-1}function Nt(t,e){for(var r=0,n=(e=Yt(e,t)?[e]:Ut(e)).length;null!=t&&r<n;)t=t[Kt(e[r++])];return r&&r==n?t:void 0}function It(t,e){return null!=t&&e in Object(t)}function Dt(t,e,r,n,o){return t===e||(null==t||null==e||!se(t)&&!ue(e)?t!=t&&e!=e:function(t,e,r,n,o,i){var a=ne(t),l=ne(e),c=h,b=h;a||(c=(c=Ht(t))==f?w:c);l||(b=(b=Ht(e))==f?w:b);var v=c==w&&!Y(t),j=b==w&&!Y(e),E=c==b;if(E&&!v)return i||(i=new At),a||ce(t)?Vt(t,e,r,n,o,i):function(t,e,r,n,o,i,a){switch(r){case k:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case x:return!(t.byteLength!=e.byteLength||!n(new ct(t),new ct(e)));case p:case y:case g:return ee(+t,+e);case d:return t.name==e.name&&t.message==e.message;case O:case _:return t==e+"";case m:var l=X;case S:var c=i&u;if(l||(l=Q),t.size!=e.size&&!c)return!1;var f=a.get(t);if(f)return f==e;i|=s,a.set(t,e);var h=Vt(l(t),l(e),n,o,i,a);return a.delete(t),h;case P:if(kt)return kt.call(t)==kt.call(e)}return!1}(t,e,c,r,n,o,i);if(!(o&u)){var T=v&&at.call(t,"__wrapped__"),C=j&&at.call(e,"__wrapped__");if(T||C){var R=T?t.value():t,A=C?e.value():e;return i||(i=new At),r(R,A,n,o,i)}}if(!E)return!1;return i||(i=new At),function(t,e,r,n,o,i){var a=o&u,s=fe(t),l=s.length,c=fe(e).length;if(l!=c&&!a)return!1;for(var f=l;f--;){var h=s[f];if(!(a?h in e:at.call(e,h)))return!1}var p=i.get(t);if(p&&i.get(e))return p==e;var y=!0;i.set(t,e),i.set(e,t);for(var d=a;++f<l;){h=s[f];var b=t[h],v=e[h];if(n)var m=a?n(v,b,h,e,t,i):n(b,v,h,t,e,i);if(!(void 0===m?b===v||r(b,v,n,o,i):m)){y=!1;break}d||(d="constructor"==h)}if(y&&!d){var g=t.constructor,w=e.constructor;g!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof w&&w instanceof w)&&(y=!1)}return i.delete(t),i.delete(e),y}(t,e,r,n,o,i)}(t,e,Dt,r,n,o))}function Ft(t){return!(!se(t)||ot&&ot in t)&&(ie(t)||Y(t)?ut:A).test($t(t))}function Bt(t){return"function"==typeof t?t:null==t?he:"object"==n(t)?ne(t)?function(t,e){if(Yt(t)&&Xt(e))return Qt(Kt(t),e);return function(r){var n=function(t,e,r){var n=null==t?void 0:Nt(t,e);return void 0===n?r:n}(r,t);return void 0===n&&n===e?function(t,e){return null!=t&&function(t,e,r){var n,o=-1,i=(e=Yt(e,t)?[e]:Ut(e)).length;for(;++o<i;){var a=Kt(e[o]);if(!(n=null!=t&&r(t,a)))break;t=t[a]}if(n)return n;return!!(i=t?t.length:0)&&ae(i)&&Wt(a,i)&&(ne(t)||re(t))}(t,e,It)}(r,t):Dt(e,n,void 0,s|u)}}(t[0],t[1]):function(t){var e=function(t){var e=fe(t),r=e.length;for(;r--;){var n=e[r],o=t[n];e[r]=[n,o,Xt(o)]}return e}(t);if(1==e.length&&e[0][2])return Qt(e[0][0],e[0][1]);return function(r){return r===t||function(t,e,r,n){var o=r.length,i=o,a=!n;if(null==t)return!i;for(t=Object(t);o--;){var l=r[o];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<i;){var c=(l=r[o])[0],f=t[c],h=l[1];if(a&&l[2]){if(void 0===f&&!(c in t))return!1}else{var p=new At;if(n)var y=n(f,h,c,t,e,p);if(!(void 0===y?Dt(h,f,n,s|u,p):y))return!1}}return!0}(r,t,e)}}(t):Yt(e=t)?(r=Kt(e),function(t){return null==t?void 0:t[r]}):function(t){return function(e){return Nt(e,t)}}(e);var e,r}function Gt(t){if(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||rt,e!==n)return pt(t);var e,r,n,o=[];for(var i in Object(t))at.call(t,i)&&"constructor"!=i&&o.push(i);return o}function Ut(t){return ne(t)?t:Zt(t)}Et.prototype.clear=function(){this.__data__=gt?gt(null):{}},Et.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Et.prototype.get=function(t){var e=this.__data__;if(gt){var r=e[t];return r===a?void 0:r}return at.call(e,t)?e[t]:void 0},Et.prototype.has=function(t){var e=this.__data__;return gt?void 0!==e[t]:at.call(e,t)},Et.prototype.set=function(t,e){return this.__data__[t]=gt&&void 0===e?a:e,this},Tt.prototype.clear=function(){this.__data__=[]},Tt.prototype.delete=function(t){var e=this.__data__,r=Lt(e,t);return!(r<0||(r==e.length-1?e.pop():ht.call(e,r,1),0))},Tt.prototype.get=function(t){var e=this.__data__,r=Lt(e,t);return r<0?void 0:e[r][1]},Tt.prototype.has=function(t){return Lt(this.__data__,t)>-1},Tt.prototype.set=function(t,e){var r=this.__data__,n=Lt(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},Ct.prototype.clear=function(){this.__data__={hash:new Et,map:new(dt||Tt),string:new Et}},Ct.prototype.delete=function(t){return zt(this,t).delete(t)},Ct.prototype.get=function(t){return zt(this,t).get(t)},Ct.prototype.has=function(t){return zt(this,t).has(t)},Ct.prototype.set=function(t,e){return zt(this,t).set(t,e),this},Rt.prototype.add=Rt.prototype.push=function(t){return this.__data__.set(t,a),this},Rt.prototype.has=function(t){return this.__data__.has(t)},At.prototype.clear=function(){this.__data__=new Tt},At.prototype.delete=function(t){return this.__data__.delete(t)},At.prototype.get=function(t){return this.__data__.get(t)},At.prototype.has=function(t){return this.__data__.has(t)},At.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Tt){var n=r.__data__;if(!dt||n.length<o-1)return n.push([t,e]),this;r=this.__data__=new Ct(n)}return r.set(t,e),this};var Jt=vt&&1/Q(new vt([,-0]))[1]==l?function(t){return new vt(t)}:function(){};function Vt(t,e,r,n,o,i){var a=o&u,l=t.length,c=e.length;if(l!=c&&!(a&&c>l))return!1;var f=i.get(t);if(f&&i.get(e))return f==e;var h=-1,p=!0,y=o&s?new Rt:void 0;for(i.set(t,e),i.set(e,t);++h<l;){var d=t[h],b=e[h];if(n)var v=a?n(b,d,h,e,t,i):n(d,b,h,t,e,i);if(void 0!==v){if(v)continue;p=!1;break}if(y){if(!q(e,function(t,e){if(!y.has(e)&&(d===t||r(d,t,n,o,i)))return y.add(e)})){p=!1;break}}else if(d!==b&&!r(d,b,n,o,i)){p=!1;break}}return i.delete(t),i.delete(e),p}function zt(t,e){var r,o,i=t.__data__;return("string"==(o=n(r=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function qt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Ft(r)?r:void 0}var Ht=function(t){return st.call(t)};function Wt(t,e){return!!(e=null==e?c:e)&&("number"==typeof t||M.test(t))&&t>-1&&t%1==0&&t<e}function Yt(t,e){if(ne(t))return!1;var r=n(t);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!le(t))||(E.test(t)||!j.test(t)||null!=e&&t in Object(e))}function Xt(t){return t==t&&!se(t)}function Qt(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}(yt&&Ht(new yt(new ArrayBuffer(1)))!=k||dt&&Ht(new dt)!=m||bt&&"[object Promise]"!=Ht(bt.resolve())||vt&&Ht(new vt)!=S||mt&&"[object WeakMap]"!=Ht(new mt))&&(Ht=function(t){var e=st.call(t),r=e==w?t.constructor:void 0,n=r?$t(r):void 0;if(n)switch(n){case wt:return k;case Ot:return m;case St:return"[object Promise]";case _t:return S;case Pt:return"[object WeakMap]"}return e});var Zt=te(function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(le(t))return jt?jt.call(t):"";var e=t+"";return"0"==e&&1/t==-l?"-0":e}(e);var r=[];return T.test(t)&&r.push(""),t.replace(C,function(t,e,n,o){r.push(n?o.replace(R,"$1"):e||t)}),r});function Kt(t){if("string"==typeof t||le(t))return t;var e=t+"";return"0"==e&&1/t==-l?"-0":e}function $t(t){if(null!=t){try{return it.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function te(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(i);var r=function r(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(te.Cache||Ct),r}function ee(t,e){return t===e||t!=t&&e!=e}function re(t){return function(t){return ue(t)&&oe(t)}(t)&&at.call(t,"callee")&&(!ft.call(t,"callee")||st.call(t)==f)}te.Cache=Ct;var ne=Array.isArray;function oe(t){return null!=t&&ae(t.length)&&!ie(t)}function ie(t){var e=se(t)?st.call(t):"";return e==b||e==v}function ae(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function se(t){var e=n(t);return!!t&&("object"==e||"function"==e)}function ue(t){return!!t&&"object"==n(t)}function le(t){return"symbol"==n(t)||ue(t)&&st.call(t)==P}var ce=J?function(t){return function(e){return t(e)}}(J):function(t){return ue(t)&&ae(t.length)&&!!L[st.call(t)]};function fe(t){return oe(t)?Mt(t):Gt(t)}function he(t){return t}t.exports=function(t,e){return t&&t.length?function(t,e,r){var n=-1,i=V,a=t.length,s=!0,u=[],l=u;if(r)s=!1,i=z;else if(a>=o){var c=e?null:Jt(t);if(c)return Q(c);s=!1,i=W,l=new Rt}else l=e?[]:u;t:for(;++n<a;){var f=t[n],h=e?e(f):f;if(f=r||0!==f?f:0,s&&h==h){for(var p=l.length;p--;)if(l[p]===h)continue t;e&&l.push(h),u.push(f)}else i(l,h,r)||(l!==u&&l.push(h),u.push(f))}return u}(t,Bt(e)):[]}},9957:function(t,e,r){var n,o,i;function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i=function(){"use strict";function t(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){return e.reject(r)})})}function e(t){return new this(function(e,r){if(!t||void 0===t.length)return r(new TypeError(a(t)+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var o=n.length;function i(t,r){if(r&&("object"===a(r)||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,function(e){i(t,e)},function(r){n[t]={status:"rejected",reason:r},0==--o&&e(n)})}n[t]={status:"fulfilled",value:r},0==--o&&e(n)}for(var s=0;s<n.length;s++)i(s,n[s])})}var n=setTimeout;function o(t){return Boolean(t&&void 0!==t.length)}function i(){}function s(t){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function u(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,s._immediateFn(function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){var n;try{n=r(t._value)}catch(t){return void c(e.promise,t)}l(e.promise,n)}else(1===t._state?l:c)(e.promise,t._value)})):t._deferreds.push(e)}function l(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===a(e)||"function"==typeof e)){var r=e.then;if(e instanceof s)return t._state=3,t._value=e,void f(t);if("function"==typeof r)return void h((n=r,o=e,function(){n.apply(o,arguments)}),t)}t._state=1,t._value=e,f(t)}catch(e){c(t,e)}var n,o}function c(t,e){t._state=2,t._value=e,f(t)}function f(t){2===t._state&&0===t._deferreds.length&&s._immediateFn(function(){t._handled||s._unhandledRejectionFn(t._value)});for(var e=0,r=t._deferreds.length;e<r;e++)u(t,t._deferreds[e]);t._deferreds=null}function h(t,e){var r=!1;try{t(function(t){r||(r=!0,l(e,t))},function(t){r||(r=!0,c(e,t))})}catch(t){if(r)return;r=!0,c(e,t)}}s.prototype.catch=function(t){return this.then(null,t)},s.prototype.then=function(t,e){var r=new this.constructor(i);return u(this,new function(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}(t,e,r)),r},s.prototype.finally=t,s.all=function(t){return new s(function(e,r){if(!o(t))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var i=n.length;function s(t,o){try{if(o&&("object"===a(o)||"function"==typeof o)){var u=o.then;if("function"==typeof u)return void u.call(o,function(e){s(t,e)},r)}n[t]=o,0==--i&&e(n)}catch(t){r(t)}}for(var u=0;u<n.length;u++)s(u,n[u])})},s.allSettled=e,s.resolve=function(t){return t&&"object"===a(t)&&t.constructor===s?t:new s(function(e){e(t)})},s.reject=function(t){return new s(function(e,r){r(t)})},s.race=function(t){return new s(function(e,r){if(!o(t))return r(new TypeError("Promise.race accepts an array"));for(var n=0,i=t.length;n<i;n++)s.resolve(t[n]).then(e,r)})},s._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){n(t,0)},s._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var p=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}();"function"!=typeof p.Promise?p.Promise=s:(p.Promise.prototype.finally||(p.Promise.prototype.finally=t),p.Promise.allSettled||(p.Promise.allSettled=e))},"object"===a(e)?i():void 0===(o="function"==typeof(n=i)?n.call(e,r,e,t):n)||(t.exports=o)},1441:function(t,e,r){var n,o,i;function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i=function(){"use strict";function t(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function e(t,e){return t<e?-1:t>e?1:0}return function(r,n,o,i,a){!function e(r,n,o,i,a){for(;i>o;){if(i-o>600){var s=i-o+1,u=n-o+1,l=Math.log(s),c=.5*Math.exp(2*l/3),f=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1),h=Math.max(o,Math.floor(n-u*c/s+f)),p=Math.min(i,Math.floor(n+(s-u)*c/s+f));e(r,n,h,p,a)}var y=r[n],d=o,b=i;for(t(r,o,n),a(r[i],y)>0&&t(r,o,i);d<b;){for(t(r,d,b),d++,b--;a(r[d],y)<0;)d++;for(;a(r[b],y)>0;)b--}0===a(r[o],y)?t(r,o,b):t(r,++b,i),b<=n&&(o=b+1),n<=b&&(i=b-1)}}(r,n,o||0,i||r.length-1,a||e)}},"object"===a(e)?t.exports=i():void 0===(o="function"==typeof(n=i)?n.call(e,r,e,t):n)||(t.exports=o)},3861:function(t,e,r){"use strict";t.exports=o,t.exports.default=o;var n=r(1441);function o(t,e){if(!(this instanceof o))return new o(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function i(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,r,n,o){o||(o=d(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i,a=e;a<r;a++)i=t.children[a],u(o,t.leaf?n(i):i);return o}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function y(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function b(t,e,r,o,i){for(var a,s=[e,r];s.length;)(r=s.pop())-(e=s.pop())<=o||(a=e+Math.ceil((r-e)/o/2)*o,n(t,a,e,r,i),s.push(e,a,a,r))}o.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,r=[],n=this.toBBox;if(!y(t,e))return r;for(var o,i,a,s,u=[];e;){for(o=0,i=e.children.length;o<i;o++)a=e.children[o],y(t,s=e.leaf?n(a):a)&&(e.leaf?r.push(a):p(t,s)?this._all(a,r):u.push(a));e=u.pop()}return r},collides:function(t){var e=this.data,r=this.toBBox;if(!y(t,e))return!1;for(var n,o,i,a,s=[];e;){for(n=0,o=e.children.length;n<o;n++)if(i=e.children[n],y(t,a=e.leaf?r(i):i)){if(e.leaf||p(t,a))return!0;s.push(i)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,r=t.length;e<r;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=d([]),this},remove:function(t,e){if(!t)return this;for(var r,n,o,a,s=this.data,u=this.toBBox(t),l=[],c=[];s||l.length;){if(s||(s=l.pop(),n=l[l.length-1],r=c.pop(),a=!0),s.leaf&&-1!==(o=i(t,s.children,e)))return s.children.splice(o,1),l.push(s),this._condense(l),this;a||s.leaf||!p(s,u)?n?(r++,s=n.children[r],a=!1):s=null:(l.push(s),c.push(r),r=0,n=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:l,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},_build:function(t,e,r,n){var o,i=r-e+1,s=this._maxEntries;if(i<=s)return a(o=d(t.slice(e,r+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/Math.pow(s,n-1))),(o=d([])).leaf=!1,o.height=n;var u,l,c,f,h=Math.ceil(i/s),p=h*Math.ceil(Math.sqrt(s));for(b(t,e,r,p,this.compareMinX),u=e;u<=r;u+=p)for(b(t,u,c=Math.min(u+p-1,r),h,this.compareMinY),l=u;l<=c;l+=h)f=Math.min(l+h-1,c),o.children.push(this._build(t,l,f,n-1));return a(o,this.toBBox),o},_chooseSubtree:function(t,e,r,n){for(var o,i,a,s,u,l,c,h,p,y;n.push(e),!e.leaf&&n.length-1!==r;){for(c=h=1/0,o=0,i=e.children.length;o<i;o++)u=f(a=e.children[o]),p=t,y=a,(l=(Math.max(y.maxX,p.maxX)-Math.min(y.minX,p.minX))*(Math.max(y.maxY,p.maxY)-Math.min(y.minY,p.minY))-u)<h?(h=l,c=u<c?u:c,s=a):l===h&&u<c&&(c=u,s=a);e=s||e.children[0]}return e},_insert:function(t,e,r){var n=this.toBBox,o=r?t:n(t),i=[],a=this._chooseSubtree(o,this.data,e,i);for(a.children.push(t),u(a,o);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(o,i,e)},_split:function(t,e){var r=t[e],n=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,n);var i=this._chooseSplitIndex(r,o,n),s=d(r.children.splice(i,r.children.length-i));s.height=r.height,s.leaf=r.leaf,a(r,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},_splitRoot:function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,r){var n,o,i,a,u,l,c,h,p,y,d,b,v,m;for(l=c=1/0,n=e;n<=r-e;n++)o=s(t,0,n,this.toBBox),i=s(t,n,r,this.toBBox),p=o,y=i,void 0,void 0,void 0,void 0,d=Math.max(p.minX,y.minX),b=Math.max(p.minY,y.minY),v=Math.min(p.maxX,y.maxX),m=Math.min(p.maxY,y.maxY),a=Math.max(0,v-d)*Math.max(0,m-b),u=f(o)+f(i),a<l?(l=a,h=n,c=u<c?u:c):a===l&&u<c&&(c=u,h=n);return h},_chooseSplitAxis:function(t,e,r){var n=t.leaf?this.compareMinX:l,o=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,o)&&t.children.sort(n)},_allDistMargin:function(t,e,r,n){t.children.sort(n);var o,i,a=this.toBBox,l=s(t,0,e,a),c=s(t,r-e,r,a),f=h(l)+h(c);for(o=e;o<r-e;o++)i=t.children[o],u(l,t.leaf?a(i):i),f+=h(l);for(o=r-e-1;o>=e;o--)i=t.children[o],u(c,t.leaf?a(i):i),f+=h(c);return f},_adjustParentBBoxes:function(t,e,r){for(var n=r;n>=0;n--)u(e[n],t)},_condense:function(t){for(var e,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(e=t[r-1].children).splice(e.indexOf(t[r]),1):this.clear():a(t[r],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},8795:function(t){var e=/^[-+]?0x[a-fA-F0-9]+$/,r=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var n={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};t.exports=function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o=Object.assign({},n,o),!t||"string"!=typeof t)return t;var i=t.trim();if(void 0!==o.skipLike&&o.skipLike.test(i))return t;if(o.hex&&e.test(i))return Number.parseInt(i,16);var a=r.exec(i);if(a){var s=a[1],u=a[2],l=function(t){return t&&-1!==t.indexOf(".")?("."===(t=t.replace(/0+$/,""))?t="0":"."===t[0]?t="0"+t:"."===t[t.length-1]&&(t=t.substr(0,t.length-1)),t):t}(a[3]),c=a[4]||a[6];if(!o.leadingZeros&&u.length>0&&s&&"."!==i[2])return t;if(!o.leadingZeros&&u.length>0&&!s&&"."!==i[1])return t;var f=Number(i),h=""+f;return-1!==h.search(/[eE]/)?o.eNotation?f:t:c?o.eNotation?f:t:-1!==i.indexOf(".")?"0"===h&&""===l?f:h===l?f:s&&h==="-"+l?f:t:u?l===h?f:s+l===h?f:t:i===h?f:i===s+h?f:t}return t}},3679:function(){"use strict"},7888:function(t,e,r){"use strict";var n=mapboxgl,o=r.n(n);!function(){o().Map.prototype.overlayLayersManager={},void 0===o().Map.prototype.addLayerBak&&(o().Map.prototype.addLayerBak=o().Map.prototype.addLayer,o().Map.prototype.addLayer=function(t,e){return t.source||"custom"===t.type||"background"===t.type?(this.addLayerBak(t,e),t.overlay&&!this.overlayLayersManager[t.id]&&(this.overlayLayersManager[t.id]=t),this):this.overlayLayersManager[t.id]||this.style._layers[t.id]?void this.fire("error",{error:new Error("A layer with this id already exists.")}):(function(t,e){t.onAdd&&t.onAdd(e)}(t,this),this.overlayLayersManager[t.id]=t,this)}),o().Map.prototype.getLayer=function(t){return this.overlayLayersManager[t]?this.overlayLayersManager[t]:this.style.getLayer(t)},o().Map.prototype.moveLayer=function(t,e){return this.overlayLayersManager[t]?(this.overlayLayersManager[t].moveLayer?this.overlayLayersManager[t].moveLayer(t,e):function(t,e){var r=document.getElementById(t);if(e){var n=document.getElementById(e);n||o().Evented.prototype.fire("error",{error:new Error('Layer with id "'.concat(e,'" does not exist on this document.'))})}r&&n?n.parentNode.insertBefore(r,n):r.parentNode.appendChild(r)}(t,e),this):this.style._layers[t]?(this.style.moveLayer(t,e),this._update(!0),this):void 0},o().Map.prototype.removeLayer=function(t){return this.overlayLayersManager[t]&&delete this.overlayLayersManager[t],this.style.removeLayer(t),this._update(!0),this},o().Map.prototype.setLayoutProperty=function(t,e,r){return this.overlayLayersManager[t]?("visibility"===e&&(r="visible"===r,n=this.overlayLayersManager[t],o=r,n.setVisibility&&n.setVisibility(o),this.style.fire("data",{dataType:"style"})),this):(this.style.setLayoutProperty(t,e,r),this._update(!0),this);var n,o},o().Map.prototype.updateTransform=function(t,e,r,n,i,a,s){this.transform.units=t;var u=this.mercatorZfromAltitude;o().MercatorCoordinate.fromLngLat=function(t,n){n=n||0;var i=o().LngLat.convert(t);return new(o().MercatorCoordinate)((i.lng-e)/a,(r-i.lat)/s,u(n,i.lat))},o().MercatorCoordinate.prototype.toLngLat=function(){return new(o().LngLat)(this.x*a+e,r-this.y*s)},this.customConvertPoint=window.URL.createObjectURL(new Blob(["customConvertPoint = {projectX:function(x){return (x - "+n+") / "+a+" + 0.5},projectY:function(y){y = 0.5 - ((y - "+i+") / "+s+");return y < 0 ? 0 : y > 1 ? 1 : y;},toY:function(y){return (0.5-y)*"+s+"+"+i+";}}"],{type:"text/javascript"}))}}();function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.imageUrl=null,this.link=null,this.width=null,this.height=null,this.alt="SuperMap iClient",this._extend(this,e)}var e,r,n;return e=t,(r=[{key:"onAdd",value:function(t){this._map=t,this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl iclient-logo",this._container.style.marginTop=0,this._container.style.marginBottom=0,this._container.style.marginLeft=0,this._container.style.marginRight=0;var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAdCAYAAAAjHtusAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozYWZlOGIwMi01MWE3LTRiZjYtYWVkYS05MGQ2ZTQ4YjZiMmUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODg0NkFBQUE3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODg0NkFBQTk3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MWI3NzdhNC1lZmEyLTQ1MzUtOGQzNi03MmRjNDkyODMzN2UiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjYTYzODVjMi1jNDQ1LTExN2EtYTc0ZC1lM2I5MzJlMGE4Y2QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5q1HM0AAAF/ElEQVR42tSabYhUVRjHZ7W01C1uaCRW4F3oi9SXCUnwQ9gsGUFvOEtQH1bLu5VS9sbYh5KicjYt29qiGQwVg2xWWKgocob91AvC+CWsoJqB3qHMSdTMpZyeU/+Df07n3pk7997Z6cBv99z7nHvOvf/z/pxJNZvNVI/jCKXmv6EquAmVkxPSlvtp2GItr0/96fFQForChJAWDiVYTkMYMu4XBFcYjLOwWS3sNwmn8NGzZ0h4Flv/zwIdchAnh/slCGmmKUNIBzYPaXOUr0vPuEjD71JAPh7l61embzinhV3V8nnCGmGT8LwlzSL8/yUh4Tfjo9T/CgnCIYNKycA2Qq21AcHU/VHE80Idoo3Qs0W6p0UtUnkZvEMDeVcCyqxEafF7hL8Qf0oYsIj+lfC9cH1CwhchWAGCtZO+AooQOkdC1Km1VtCb63StW73uFSzgKFUkNwBbmZGGmqowhvg8ZNpH9oXChcIcYRdeNomgxLkaH+S1SGubAxyIpFv+Zp+0DYjrAS00j/dem2VGEl6FJ4Qa4quEu8j2hTCJ+GJhe4JjfQMf6JCYPPbysMPxBlp0BUKOogEF9Rg9/heNvNKYfM0KsZUZaYxX4STGrzJa+zbhPeFH2DcK10KItcI+pI0rVElwXl1ULaKnIJhDw0oRQpTQc1zcbwRU8ATy4DR6yMlTzwkqMziEWHvubJ4Nk4ZtHdnqwvwY17xq3Z4FjrG+z2Kdrdf2ZSGD+xlLPh6t1R0jP9fI22ZzKI92yvQl7EbmBxI4S7Y+vIAOL87QZqsc5uNnssxZIcfYjXT9snCR7jjobidp+FkxA2v+Cq1QervMDmp4P7Xs3YZtE9kOC3P/By6JGaETl8ElwueYTNTDq4UDsKnd7YfCNbT239LF1udS72xYJt1UWxNfN4IIP4bWuTpEja01JtMFZFsm/AHbtHBlDE6yasA4moYTrUbvdBTXHqUrAH4uSadbyzF+vbBM2IsNkS3MNa5305JxqfA02T4TnkX8XOH1mPw8ruVejpxbI9hZD2Cz1U7LdrrUvjP/WfZinNZhr6V27hP+FPZh9aLvLxVO4DllX0G2OcKnlO/DCblxaz6uXBtmi+8mBaP3/SP8IuEIiTRoPPQm2TaEmEyXo0JU+F0YiPFD0hhOsiE/vqeEVwyTgF8L51OilcIZ2I4Ll5NttvAJPfukUeB2sk0ZPSbKIUUJpCII7+DasWy08uhNNazT0wGHI7mAtB7KqMKm38HhDdAUibTVKGicbB8YAqrJ9DRsp43JdB4qUof1HQrPE6XTQWu3Ce/inVzjXhXpMiTwUYugNVQ+p80jrUsV5EH0POKeuXO9QjhFq5GryNYvfEMCDhsftYVsB9ETtG0V9ZjfhCURhbcJFpfwVZ9jvhxsLHwTYtp2svlWQw3vXL8UnqHVSIG8l8ex+tHhBXgjddgqHEZ8ufAA2aaEnYgrF/KrPXrEmMUqZ9THLW06xhoBaVueQpkug+ewOUphE3Qv2Q5gGamXYa+QbVq4O+DQ5FHyZqrjxNt7UHh9uuRa0F7HjCF8o9PCTOGnscM7g2u1Hl9C9oeEnxC/1ajZg8JLiM9Hj9GHJseMShwL2DO0G5yEWn3Zh1QUods5CPkIoqlwAZxhXMsb6HrcEPBxchhdJ6wj29vCW4hfLOzo8J3rltYX50nXQAATSf/K4DEaGlTLvplsk/QCpoD60EQ7gLYZc8H9wq+I3yncEOEcNhuz6HWf3XEiwU/4Y8YEqVp2P10rt+8REvBGw026i4aDcbL9jF8r8Blmf4fCOzhViiscskygXRdehf3CO4hfigmTBXyQrl8TFtD1IzQX3CbcQrY3hPcRv4z8OmHPXwchVNln2MmE7BX6VwIFi/he6uxvb6JM3m0fdqvx/ATidxg2JeC7VDErAw5NzGfvwRJVheEIQ8Mg/pdwIM+UOmi9Q8ivCsrIy0tF+wVbEcLrd3Pb2XisEb4Tdlhsi4WP4RBbaLGrHfC3PrvMIezy9rTpGm5lz9LOMG15xvFxD/j5gjzjjDbMOzk+9zzt3v5bgAEAibzFeFHVgYkAAAAASUVORK5CYII=";this.imageUrl&&(e=this.imageUrl);var r=this.alt,n="94px",o="29px",i="width:"+n+";height:"+o+";";this.imageUrl&&(i="width:"+(n=this.width)+";height:"+(o=this.height)+";",n&&o||(i=""));var a=this.link;return this._container.innerHTML="<a href='"+a+"' target='_blank'><img src="+e+" alt='"+r+"' style='"+i+"margin-bottom: 2px'></a>",this._createStyleSheet(),this._container}},{key:"_createStyleSheet",value:function(){var t=document.createElement("style");t.type="text/css",t.innerHTML=".iclient-logo{margin:0 !important;}.iclient-logo a{border: none;display: block;height:31px;}.iclient-logo img{border: none;white-space: nowrap}",document.getElementsByTagName("head")[0].appendChild(t)}},{key:"_extend",value:function(t){for(var e=0;e<Object.getOwnPropertyNames(arguments).length;e++){var r=Object.getOwnPropertyNames(arguments)[e];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(t[i]=n[i])}}}return t}}])&&i(e.prototype,r),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.w=e?parseFloat(e):0,this.h=e?parseFloat(r):0,this.CLASS_NAME="SuperMap.Size"}var e,r,n;return e=t,(r=[{key:"toString",value:function(){return"w="+this.w+",h="+this.h}},{key:"clone",value:function(){return new t(this.w,this.h)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.w===t.w&&this.h===t.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(t.w)&&isNaN(t.h)),e}},{key:"destroy",value:function(){this.w=null,this.h=null}}])&&s(e.prototype,r),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e?parseFloat(e):0,this.y=r?parseFloat(r):0,this.mode=n,this.CLASS_NAME="SuperMap.Pixel"}var e,r,n;return e=t,(r=[{key:"toString",value:function(){return"x="+this.x+",y="+this.y}},{key:"clone",value:function(){return new t(this.x,this.y,this.mode)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.x==t.x&&this.y==t.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(t.x)&&isNaN(t.y)),e}},{key:"distanceTo",value:function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}},{key:"add",value:function(e,r){if(null==e||null==r)throw new TypeError("Pixel.add cannot receive null values");return new t(this.x+e,this.y+r)}},{key:"offset",value:function(t){var e=this.clone();return t&&(e=this.add(t.x,t.y)),e}},{key:"destroy",value:function(){this.x=null,this.y=null,this.mode=null}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}c.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"};var h=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=function(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=0;n<e.length;n++)a(this,new e[n](r))}),o=0;o<e.length;o++){var i=e[o];a(n,i),a(n.prototype,i.prototype),a(n.prototype,new i)}return n;function a(t,e){var r=Object.getOwnPropertyNames(e);Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e)));for(var n=0;n<r.length;n++){var o=r[n];if("constructor"!==o&&"prototype"!==o&&"name"!==o&&"length"!==o){var i=Object.getOwnPropertyDescriptor(e,o);window.ActiveXObject?Object.defineProperty(t,o,i||{}):Object.defineProperty(t,o,i)}}}},p={startsWith:function(t,e){return 0==t.indexOf(e)},contains:function(t,e){return-1!=t.indexOf(e)},trim:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(t){for(var e=t.split("-"),r=e[0],n=1,o=e.length;n<o;n++){var i=e[n];r+=i.charAt(0).toUpperCase()+i.substring(1)}return r},format:function(t,e,r){e||(e=window);return t.replace(p.tokenRegEx,function(t,n){for(var o,i=n.split(/\.+/),a=0;a<i.length;a++)0==a&&(o=e),o=o[i[a]];return"function"==typeof o&&(o=r?o.apply(null,r):o()),void 0===o?"undefined":o})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(t){return p.numberRegEx.test(t)},numericIf:function(t){return p.isNumeric(t)?parseFloat(t):t}},y={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(t,e){var r=0;return e>0&&(r=parseFloat(t.toPrecision(e))),r},format:function(t,e,r,n){e=void 0!==e?e:0,r=void 0!==r?r:y.thousandsSeparator,n=void 0!==n?n:y.decimalSeparator,null!=e&&(t=parseFloat(t.toFixed(e)));var o=t.toString().split(".");1===o.length&&null==e&&(e=0);var i,a=o[0];if(r)for(var s=/(-?[0-9]+)([0-9]{3})/;s.test(a);)a=a.replace(s,"$1"+r+"$2");if(0==e)i=a;else{var u=o.length>1?o[1]:"0";null!=e&&(u+=new Array(e-u.length+1).join("0")),i=a+n+u}return i}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(t){return y.limitSigDigs(this,t)});var d={bind:function(t,e){var r=Array.prototype.slice.apply(arguments,[2]);return function(){var n=r.concat(Array.prototype.slice.apply(arguments,[0]));return t.apply(e,n)}},bindAsEventListener:function(t,e){return function(r){return t.call(e,r||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}},b={filter:function(t,e,r){var n=[];if(Array.prototype.filter)n=t.filter(e,r);else{var o=t.length;if("function"!=typeof e)throw new TypeError;for(var i=0;i<o;i++)if(i in t){var a=t[i];e.call(r,a,i,t)&&n.push(a)}}return n}};function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var m=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.Geometry",this.id=C.createUniqueID(this.CLASS_NAME+"_"),this.parent=null,this.bounds=null,this.SRID=null}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.id=null,this.bounds=null,this.SRID=null}},{key:"clone",value:function(){return new t}},{key:"setBounds",value:function(t){t&&(this.bounds=t.clone())}},{key:"clearBounds",value:function(){this.bounds=null,this.parent&&this.parent.clearBounds()}},{key:"extendBounds",value:function(t){this.getBounds()?this.bounds.extend(t):this.setBounds(t)}},{key:"getBounds",value:function(){return null==this.bounds&&this.calculateBounds(),this.bounds}},{key:"calculateBounds",value:function(){}},{key:"getVertices",value:function(t){}},{key:"getArea",value:function(){return 0}}])&&v(e.prototype,r),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function g(t){"@babel/helpers - typeof";return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var w,O,S,_,P,x,k,j=(O="",S="",_="pc",(P=navigator.userAgent.toLowerCase()).indexOf("msie")>-1||P.indexOf("trident")>-1&&P.indexOf("rv")>-1?(O="msie",w=P.match(/msie ([\d.]+)/)||P.match(/rv:([\d.]+)/)):P.indexOf("chrome")>-1?(O="chrome",w=P.match(/chrome\/([\d.]+)/)):P.indexOf("firefox")>-1?(O="firefox",w=P.match(/firefox\/([\d.]+)/)):P.indexOf("opera")>-1?(O="opera",w=P.match(/version\/([\d.]+)/)):P.indexOf("safari")>-1&&(O="safari",w=P.match(/version\/([\d.]+)/)),S=w?w[1]:"",P.indexOf("ipad")>-1||P.indexOf("ipod")>-1||P.indexOf("iphone")>-1?_="apple":P.indexOf("android")>-1&&(S=(w=P.match(/version\/([\d.]+)/))?w[1]:"",_="android"),{name:O,version:S,device:_}),E=(x=!0,k=j,document.createElement("canvas").getContext?("firefox"===k.name&&parseFloat(k.version)<5&&(x=!1),"safari"===k.name&&parseFloat(k.version)<4&&(x=!1),"opera"===k.name&&parseFloat(k.version)<10&&(x=!1),"msie"===k.name&&parseFloat(k.version)<9&&(x=!1)):x=!1,x),T=function(){var t=navigator.userAgent.toLowerCase();return-1===t.indexOf("webkit")&&-1!==t.indexOf("gecko")}(),C={assign:function(t){for(var e=0;e<Object.getOwnPropertyNames(arguments).length;e++){var r=Object.getOwnPropertyNames(arguments)[e];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(t[i]=n[i])}}}return t},extend:function(t,e){if(t=t||{},e){for(var r in e){var n=e[r];void 0!==n&&(t[r]=n)}!("function"==typeof window.Event&&e instanceof window.Event)&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&(t.toString=e.toString)}return t},copy:function(t,e){var r;if(t=t||{},e)for(var n in t)void 0!==(r=e[n])&&(t[n]=r)},reset:function(t){for(var e in t=t||{})if(t.hasOwnProperty(e)){if("object"===g(t[e])&&t[e]instanceof Array){for(var r in t[e])t[e][r].destroy&&t[e][r].destroy();t[e].length=0}else"object"===g(t[e])&&t[e]instanceof Object&&t[e].destroy&&t[e].destroy();t[e]=null}},getElement:function(){for(var t=[],e=0,r=arguments.length;e<r;e++){var n=arguments[e];if("string"==typeof n&&(n=document.getElementById(n)),1===arguments.length)return n;t.push(n)}return t},isElement:function(t){return!(!t||1!==t.nodeType)},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},removeItem:function(t,e){for(var r=t.length-1;r>=0;r--)t[r]===e&&t.splice(r,1);return t},indexOf:function(t,e){if(null==t)return-1;if("function"==typeof t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1},modifyDOMElement:function(t,e,r,n,o,i,a,s){e&&(t.id=e),r&&(t.style.left=r.x+"px",t.style.top=r.y+"px"),n&&(t.style.width=n.w+"px",t.style.height=n.h+"px"),o&&(t.style.position=o),i&&(t.style.border=i),a&&(t.style.overflow=a),parseFloat(s)>=0&&parseFloat(s)<1?(t.style.filter="alpha(opacity="+100*s+")",t.style.opacity=s):1===parseFloat(s)&&(t.style.filter="",t.style.opacity="")},applyDefaults:function(t,e){t=t||{};var r="function"==typeof window.Event&&e instanceof window.Event;for(var n in e)(void 0===t[n]||!r&&e.hasOwnProperty&&e.hasOwnProperty(n)&&!t.hasOwnProperty(n))&&(t[n]=e[n]);return!r&&e&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&!t.hasOwnProperty("toString")&&(t.toString=e.toString),t},getParameterString:function(t){var e=[];for(var r in t){var n,o=t[r];if(null!=o&&"function"!=typeof o)n=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),e.push(encodeURIComponent(r)+"="+n)}return e.join("&")},urlAppend:function(t,e){var r=t;if(e){0===e.indexOf("?")&&(e=e.substring(1));var n=(t+" ").split(/[?&]/);r+=" "===n.pop()?e:n.length?"&"+e:"?"+e}return r},urlPathAppend:function(t,e){var r=t;if(!e)return r;0===e.indexOf("/")&&(e=e.substring(1));var n=t.split("?");return n[0].indexOf("/",n[0].length-1)<0&&(n[0]+="/"),r="".concat(n[0]).concat(e).concat(n.length>1?"?".concat(n[1]):"")},DEFAULT_PRECISION:14,toFloat:function(t,e){return null==e&&(e=C.DEFAULT_PRECISION),"number"!=typeof t&&(t=parseFloat(t)),0===e?t:parseFloat(t.toPrecision(e))},rad:function(t){return t*Math.PI/180},getParameters:function(t){t=null===t||void 0===t?window.location.href:t;var e="";if(p.contains(t,"?")){var r=t.indexOf("?")+1,n=p.contains(t,"#")?t.indexOf("#"):t.length;e=t.substring(r,n)}for(var o={},i=e.split(/[&;]/),a=0,s=i.length;a<s;++a){var u=i[a].split("=");if(u[0]){var l=u[0];try{l=decodeURIComponent(l)}catch(t){l=unescape(l)}var c=(u[1]||"").replace(/\+/g," ");try{c=decodeURIComponent(c)}catch(t){c=unescape(c)}1==(c=c.split(",")).length&&(c=c[0]),o[l]=c}}return o},lastSeqID:0,createUniqueID:function(t){return null==t&&(t="id_"),C.lastSeqID+=1,t+C.lastSeqID},normalizeScale:function(t){return t>1?1/t:t},getResolutionFromScale:function(t,e){var r;t&&(null==e&&(e="degrees"),r=1/(C.normalizeScale(t)*R[e]*96));return r},getScaleFromResolution:function(t,e){return null==e&&(e="degrees"),t*R[e]*96},getBrowser:function(){return j},isSupportCanvas:E,supportCanvas:function(){return C.isSupportCanvas},isInTheSameDomain:function(t){if(!t)return!0;var e=t.indexOf("//"),r=document.location.toString(),n=r.indexOf("//");if(-1===e)return!0;var o,i=o=t.substring(0,e),a=r.substring(n+2);n=a.indexOf("/");var s=a.indexOf(":"),u=a.substring(0,n),l=document.location.protocol;if(-1!==s||(u+=":"+("http:"===l.toLowerCase()?80:443)),l.toLowerCase()!==i.toLowerCase())return!1;var c=(i=t.substring(e+2)).indexOf(":");e=i.indexOf("/");var f,h=i.substring(0,e);return-1!==c?f=i.substring(0,c):(f=i.substring(0,e),h+=":"+("http:"===o.toLowerCase()?80:443)),f===document.domain&&h===u},calculateDpi:function(t,e,r,n,o){if(t&&e&&r){var i,a=t.getWidth(),s=t.getHeight(),u=e.w,l=e.h;if(o=o||6378137,"degree"===(n=n||"degrees").toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()){var c=a/u,f=s/l;i=254/(c>f?c:f)/r/(2*Math.PI*o/360)/1e4}else{i=254/(a/u)/r/1e4}return i}},toJSON:function(t){var e=t;if(null==e)return null;switch(e.constructor){case String:return e=(e=(e=(e=(e=(e=(e='"'+e.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var r="",n=0,o=e.length;n<o;n++)r+=C.toJSON(e[n]),n!==e.length-1&&(r+=",");return"["+r+"]";case Number:return isFinite(e)?String(e):null;case Boolean:return String(e);case Date:return"{'__type':\"System.DateTime\",'Year':"+e.getFullYear()+",'Month':"+(e.getMonth()+1)+",'Day':"+e.getDate()+",'Hour':"+e.getHours()+",'Minute':"+e.getMinutes()+",'Second':"+e.getSeconds()+",'Millisecond':"+e.getMilliseconds()+",'TimezoneOffset':"+e.getTimezoneOffset()+"}";default:if(null!=e.toJSON&&"function"==typeof e.toJSON)return e.toJSON();if("object"===g(e)){if(e.length){for(var i=[],a=0,s=e.length;a<s;a++)i.push(C.toJSON(e[a]));return"["+i.join(",")+"]"}var u=[];for(var l in e)"function"!=typeof e[l]&&"CLASS_NAME"!==l&&"parent"!==l&&u.push("'"+l+"':"+C.toJSON(e[l]));return u.length>0?"{"+u.join(",")+"}":"{}"}return e.toString()}},getResolutionFromScaleDpi:function(t,e,r,n){return n=n||6378137,r=r||"",t>0&&e>0?(t=C.normalizeScale(t),"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/e/t/(2*Math.PI*n/360)/1e4:254/e/t/1e4):-1},getScaleFromResolutionDpi:function(t,e,r,n){return n=n||6378137,r=r||"",t>0&&e>0?"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/e/t/(2*Math.PI*n/360)/1e4:254/e/t/1e4:-1},transformResult:function(t){return t.responseText&&"string"==typeof t.responseText&&(t=JSON.parse(t.responseText)),t},copyAttributes:function(t,e){if(t=t||{},e)for(var r in e){var n=e[r];void 0!==n&&"CLASS_NAME"!==r&&"function"!=typeof n&&(t[r]=n)}return t},copyAttributesWithClip:function(t,e,r){if(t=t||{},e)for(var n in e){var o=!1;if(r&&r.length)for(var i=0,a=r.length;i<a;i++)if(n===r[i]){o=!0;break}if(!0!==o){var s=e[n];void 0!==s&&"CLASS_NAME"!==n&&"function"!=typeof s&&(t[n]=s)}}return t},cloneObject:function(t){if(null===t||"object"!==g(t))return t;if(t instanceof Date){var e=new Date;return e.setTime(t.getTime()),e}if(t instanceof Array)return t.slice(0);if(t instanceof Object){var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]=C.cloneObject(t[n]));return r}throw new Error("Unable to copy obj! Its type isn't supported.")},lineIntersection:function(t,e,r,n){var o,i,a=null,s=(n.x-r.x)*(t.y-r.y)-(n.y-r.y)*(t.x-r.x),u=(e.x-t.x)*(t.y-r.y)-(e.y-t.y)*(t.x-r.x),l=(n.y-r.y)*(e.x-t.x)-(n.x-r.x)*(e.y-t.y);if(0!=l)i=u/l,a=(o=s/l)>=0&&i<=1&&o<=1&&i>=0?new m.Point(t.x+o*(e.x-t.x),t.y+o*(e.y-t.y)):"No Intersection";else if(0==s&&0==u){var c=Math.max(t.y,e.y),f=Math.min(t.y,e.y),h=Math.max(t.x,e.x),p=Math.min(t.x,e.x);a=(r.y>=f&&r.y<=c||n.y>=f&&n.y<=c)&&r.x>=p&&r.x<=h||n.x>=p&&n.x<=h?"Coincident":"Parallel"}else a="Parallel";return a},getTextBounds:function(t,e,r){document.body.appendChild(r),r.style.width="auto",r.style.height="auto",t.fontSize&&(r.style.fontSize=t.fontSize),t.fontFamily&&(r.style.fontFamily=t.fontFamily),t.fontWeight&&(r.style.fontWeight=t.fontWeight),r.style.position="relative",r.style.visibility="hidden",r.style.display="inline-block",r.innerHTML=e;var n=r.clientWidth,o=r.clientHeight;return document.body.removeChild(r),{textWidth:n,textHeight:o}},convertPath:function(t,e){return e?t.replace(/\{([\w-\.]+)\}/g,function(t,r){var n;return n=e.hasOwnProperty(r)?function(t){if(void 0==t||null==t)return"";if(t instanceof Date)return t.toJSON();if(function(t){if("string"!=typeof t&&"object"!==g(t))return!1;try{var e=t.toString();return"[object Object]"===e||"[object Array]"===e}catch(t){return!1}}(t))return JSON.stringify(t);return t.toString()}(e[r]):t,encodeURIComponent(n)}):t}},R={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36};R.in=R.inches,R.degrees=R.dd,R.nmi=1852*R.m;var A=.0254000508001016;function M(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}C.extend(R,{Inch:R.inches,Meter:39.37,Foot:12,IFoot:11.999976,ClarkeFoot:11.999868327581488,SearsFoot:11.999955194477684,GoldCoastFoot:11.999964589846002,IInch:.9999979999999999,MicroInch:999998e-9,Mil:9.99998e-7,Centimeter:.3937,Kilometer:39370,Yard:36,SearsYard:35.99986558343306,IndianYard:35.99987015540864,IndianYd37:35.999740205100004,IndianYd62:35.999880755999996,IndianYd75:35.999868945,IndianFoot:11.9999567087,IndianFt37:11.9999134017,IndianFt62:11.999960252000001,IndianFt75:11.999956315,Mile:63360,IYard:35.999928,IMile:63359.87328,NautM:72913.24,"Lat-66":4367838.370169282,"Lat-83":4367954.152606599,Decimeter:3.9370000000000003,Millimeter:.03937,Dekameter:393.7,Decameter:393.7,Hectometer:3937,GermanMeter:39.370535294205006,CaGrid:39.359685060000004,ClarkeChain:791.991309620512,GunterChain:792.0000000000001,BenoitChain:791.9977268035781,SearsChain:791.9970428354235,ClarkeLink:7.91991309620512,GunterLink:7.920000000000001,BenoitLink:7.919977268035781,SearsLink:7.919970428354236,Rod:198.00000000000014,IntnlChain:791.998416,IntnlLink:7.91998416,Perch:198.00000000000014,Pole:198.00000000000014,Furlong:7919.999999999997,Rood:148.75036777426,CapeFoot:11.999868185255002,Brealey:14763.75,ModAmFt:12.000458400000001,Fathom:71.999856,"NautM-UK":72959.85408,"50kilometers":1968500,"150kilometers":5905500}),C.extend(R,{mm:R.Meter/1e3,cm:R.Meter/100,dm:100*R.Meter,km:1e3*R.Meter,kmi:R.nmi,fath:R.Fathom,ch:R.IntnlChain,link:R.IntnlLink,"us-in":R.inches,"us-ft":R.Foot,"us-yd":R.Yard,"us-ch":R.GunterChain,"us-mi":R.Mile,"ind-yd":R.IndianYd37,"ind-ft":R.IndianFt37,"ind-ch":791.9942845122}),R.degree=R.dd,R.meter=R.m,R.foot=R.ft,R.inch=R.inches,R.mile=R.mi,R.kilometer=R.km,R.yard=R.yd;var L=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),C.isArray(e)&&(r=e[1],e=e[0]),this.lon=e?C.toFloat(e):0,this.lat=r?C.toFloat(r):0,this.CLASS_NAME="SuperMap.LonLat"}var e,r,n;return e=t,n=[{key:"fromString",value:function(e){var r=e.split(",");return new t(r[0],r[1])}},{key:"fromArray",value:function(e){var r=C.isArray(e);return new t(r&&e[0],r&&e[1])}}],(r=[{key:"toString",value:function(){return"lon="+this.lon+",lat="+this.lat}},{key:"toShortString",value:function(){return this.lon+","+this.lat}},{key:"clone",value:function(){return new t(this.lon,this.lat)}},{key:"add",value:function(e,r){if(null==e||null==r)throw new TypeError("LonLat.add cannot receive null values");return new t(this.lon+C.toFloat(e),this.lat+C.toFloat(r))}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.lon===t.lon&&this.lat===t.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(t.lon)&&isNaN(t.lat)),e}},{key:"wrapDateLine",value:function(t){var e=this.clone();if(t){for(;e.lon<t.left;)e.lon+=t.getWidth();for(;e.lon>t.right;)e.lon-=t.getWidth()}return e}},{key:"destroy",value:function(){this.lon=null,this.lat=null}}])&&M(e.prototype,r),n&&M(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function N(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var I=function(){function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),C.isArray(e)&&(o=e[3],n=e[2],r=e[1],e=e[0]),this.left=null!=e?C.toFloat(e):this.left,this.bottom=null!=r?C.toFloat(r):this.bottom,this.right=null!=n?C.toFloat(n):this.right,this.top=null!=o?C.toFloat(o):this.top,this.centerLonLat=null,this.CLASS_NAME="SuperMap.Bounds"}var e,r,n;return e=t,n=[{key:"fromString",value:function(e,r){var n=e.split(",");return t.fromArray(n,r)}},{key:"fromArray",value:function(e,r){return!0===r?new t(e[1],e[0],e[3],e[2]):new t(e[0],e[1],e[2],e[3])}},{key:"fromSize",value:function(e){return new t(0,e.h,e.w,0)}},{key:"oppositeQuadrant",value:function(t){var e="";return e+="t"===t.charAt(0)?"b":"t",e+="l"===t.charAt(1)?"r":"l"}}],(r=[{key:"clone",value:function(){return new t(this.left,this.bottom,this.right,this.top)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.left===t.left&&this.right===t.right&&this.top===t.top&&this.bottom===t.bottom),e}},{key:"toString",value:function(){return[this.left,this.bottom,this.right,this.top].join(",")}},{key:"toArray",value:function(t){return!0===t?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]}},{key:"toBBOX",value:function(t,e){null==t&&(t=6);var r=Math.pow(10,t),n=Math.round(this.left*r)/r,o=Math.round(this.bottom*r)/r,i=Math.round(this.right*r)/r,a=Math.round(this.top*r)/r;return!0===e?o+","+n+","+a+","+i:n+","+o+","+i+","+a}},{key:"getWidth",value:function(){return this.right-this.left}},{key:"getHeight",value:function(){return this.top-this.bottom}},{key:"getSize",value:function(){return new u(this.getWidth(),this.getHeight())}},{key:"getCenterPixel",value:function(){return new c((this.left+this.right)/2,(this.bottom+this.top)/2)}},{key:"getCenterLonLat",value:function(){return this.centerLonLat||(this.centerLonLat=new L((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat}},{key:"scale",value:function(e,r){var n,o;return e=e||1,null==r&&(r=this.getCenterLonLat()),"SuperMap.LonLat"===r.CLASS_NAME?(n=r.lon,o=r.lat):(n=r.x,o=r.y),new t((this.left-n)*e+n,(this.bottom-o)*e+o,(this.right-n)*e+n,(this.top-o)*e+o)}},{key:"add",value:function(e,r){if(null==e||null==r)throw new TypeError("Bounds.add cannot receive null values");return new t(this.left+e,this.bottom+r,this.right+e,this.top+r)}},{key:"extend",value:function(e){var r=null;if(e){switch(e.CLASS_NAME){case"SuperMap.LonLat":r=new t(e.lon,e.lat,e.lon,e.lat);break;case"SuperMap.Geometry.Point":r=new t(e.x,e.y,e.x,e.y);break;case"SuperMap.Bounds":r=e}r&&(this.centerLonLat=null,(null==this.left||r.left<this.left)&&(this.left=r.left),(null==this.bottom||r.bottom<this.bottom)&&(this.bottom=r.bottom),(null==this.right||r.right>this.right)&&(this.right=r.right),(null==this.top||r.top>this.top)&&(this.top=r.top))}}},{key:"containsLonLat",value:function(t,e){"boolean"==typeof e&&(e={inclusive:e}),e=e||{};var r=this.contains(t.lon,t.lat,e.inclusive),n=e.worldBounds;if(n&&!r){var o=n.getWidth(),i=(n.left+n.right)/2,a=Math.round((t.lon-i)/o);r=this.containsLonLat({lon:t.lon-a*o,lat:t.lat},{inclusive:e.inclusive})}return r}},{key:"containsPixel",value:function(t,e){return this.contains(t.x,t.y,e)}},{key:"contains",value:function(t,e,r){if(null==r&&(r=!0),null==t||null==e)return!1;var n=!1;return n=r?t>=this.left&&t<=this.right&&e>=this.bottom&&e<=this.top:t>this.left&&t<this.right&&e>this.bottom&&e<this.top,n}},{key:"intersectsBounds",value:function(t,e){if("boolean"==typeof e&&(e={inclusive:e}),(e=e||{}).worldBounds){var r=this.wrapDateLine(e.worldBounds);t=t.wrapDateLine(e.worldBounds)}else r=this;null==e.inclusive&&(e.inclusive=!0);var n=!1,o=r.left===t.right||r.right===t.left||r.top===t.bottom||r.bottom===t.top;if(e.inclusive||!o){var i=t.bottom>=r.bottom&&t.bottom<=r.top||r.bottom>=t.bottom&&r.bottom<=t.top,a=t.top>=r.bottom&&t.top<=r.top||r.top>t.bottom&&r.top<t.top,s=t.left>=r.left&&t.left<=r.right||r.left>=t.left&&r.left<=t.right,u=t.right>=r.left&&t.right<=r.right||r.right>=t.left&&r.right<=t.right;n=(i||a)&&(s||u)}if(e.worldBounds&&!n){var l=e.worldBounds,c=l.getWidth(),f=!l.containsBounds(r),h=!l.containsBounds(t);f&&!h?(t=t.add(-c,0),n=r.intersectsBounds(t,{inclusive:e.inclusive})):h&&!f&&(r=r.add(-c,0),n=t.intersectsBounds(r,{inclusive:e.inclusive}))}return n}},{key:"containsBounds",value:function(t,e,r){null==e&&(e=!1),null==r&&(r=!0);var n=this.contains(t.left,t.bottom,r),o=this.contains(t.right,t.bottom,r),i=this.contains(t.left,t.top,r),a=this.contains(t.right,t.top,r);return e?n||o||i||a:n&&o&&i&&a}},{key:"determineQuadrant",value:function(t){var e="",r=this.getCenterLonLat();return e+=t.lat<r.lat?"b":"t",e+=t.lon<r.lon?"l":"r"}},{key:"wrapDateLine",value:function(t,e){var r=(e=e||{}).leftTolerance||0,n=e.rightTolerance||0,o=this.clone();if(t){for(var i=t.getWidth();o.left<t.left&&o.right-n<=t.left;)o=o.add(i,0);for(;o.left+r>=t.right&&o.right>t.right;)o=o.add(-i,0);var a=o.left+r;a<t.right&&a>t.left&&o.right-n>t.right&&(o=o.add(-i,0))}return o}},{key:"toServerJSONObject",value:function(){return{rightTop:{x:this.right,y:this.top},leftBottom:{x:this.left,y:this.bottom},left:this.left,right:this.right,top:this.top,bottom:this.bottom}}},{key:"destroy",value:function(){this.left=null,this.right=null,this.top=null,this.bottom=null,this.centerLonLat=null}}])&&N(e.prototype,r),n&&N(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function D(t){"@babel/helpers - typeof";return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function B(){return(B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=J(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function G(t,e){return(G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=J(t);if(e){var o=J(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===D(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function J(t){return(J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var V=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&G(t,e)}(i,m);var e,r,n,o=U(i);function i(t,e,r,n){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this,t,e,r,n)).x=parseFloat(t),a.y=parseFloat(e),a.tag=n||0==n?parseFloat(n):null,a.type=r||"Point",a.CLASS_NAME="SuperMap.Geometry.Point",a.geometryType="Point",a}return e=i,(r=[{key:"clone",value:function(t){return null==t&&(t=new i(this.x,this.y)),C.applyDefaults(t,this),t}},{key:"calculateBounds",value:function(){this.bounds=new I(this.x,this.y,this.x,this.y)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.x===t.x&&this.y===t.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(t.x)&&isNaN(t.y)),e}},{key:"move",value:function(t,e){this.x=this.x+t,this.y=this.y+e,this.clearBounds()}},{key:"toShortString",value:function(){return this.x+", "+this.y}},{key:"destroy",value:function(){this.x=null,this.y=null,this.tag=null,B(J(i.prototype),"destroy",this).call(this)}},{key:"getVertices",value:function(){return[this]}}])&&F(e.prototype,r),n&&F(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function z(t){"@babel/helpers - typeof";return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function H(){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=X(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function W(t,e){return(W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=X(t);if(e){var o=X(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function X(t){return(X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Q=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W(t,e)}(i,m);var e,r,n,o=Y(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).components=[],e.componentTypes=null,null!=t&&e.addComponents(t),e.CLASS_NAME="SuperMap.Geometry.Collection",e.geometryType="Collection",e}return e=i,(r=[{key:"destroy",value:function(){this.components.length=0,this.components=null,H(X(i.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){for(var t=new i,e=0,r=this.components.length;e<r;e++)t.addComponent(this.components[e].clone());return C.applyDefaults(t,this),t}},{key:"getComponentsString",value:function(){for(var t=[],e=0,r=this.components.length;e<r;e++)t.push(this.components[e].toShortString());return t.join(",")}},{key:"calculateBounds",value:function(){this.bounds=null;var t=new I,e=this.components;if(e)for(var r=0,n=e.length;r<n;r++)t.extend(e[r].getBounds());null!=t.left&&null!=t.bottom&&null!=t.right&&null!=t.top&&this.setBounds(t)}},{key:"addComponents",value:function(t){C.isArray(t)||(t=[t]);for(var e=0,r=t.length;e<r;e++)this.addComponent(t[e])}},{key:"addComponent",value:function(t,e){var r=!1;if(t&&(null==this.componentTypes||C.indexOf(this.componentTypes,t.CLASS_NAME)>-1)){if(null!=e&&e<this.components.length){var n=this.components.slice(0,e),o=this.components.slice(e,this.components.length);n.push(t),this.components=n.concat(o)}else this.components.push(t);t.parent=this,this.clearBounds(),r=!0}return r}},{key:"removeComponents",value:function(t){var e=!1;C.isArray(t)||(t=[t]);for(var r=t.length-1;r>=0;--r)e=this.removeComponent(t[r])||e;return e}},{key:"removeComponent",value:function(t){return C.removeItem(this.components,t),this.clearBounds(),!0}},{key:"getArea",value:function(){for(var t=0,e=0,r=this.components.length;e<r;e++)t+=this.components[e].getArea();return t}},{key:"equals",value:function(t){var e=!0;if(t&&t.CLASS_NAME&&this.CLASS_NAME===t.CLASS_NAME)if(C.isArray(t.components)&&t.components.length===this.components.length){for(var r=0,n=this.components.length;r<n;++r)if(!this.components[r].equals(t.components[r])){e=!1;break}}else e=!1;else e=!1;return e}},{key:"getVertices",value:function(t){for(var e=[],r=0,n=this.components.length;r<n;++r)Array.prototype.push.apply(e,this.components[r].getVertices(t));return e}}])&&q(e.prototype,r),n&&q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Z(t){"@babel/helpers - typeof";return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function K(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $(t,e){return($=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=et(t);if(e){var o=et(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function et(t){return(et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$(t,e)}(i,Q);var e,r,n,o=tt(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).componentTypes=["SuperMap.Geometry.Point"],e.CLASS_NAME="SuperMap.Geometry.MultiPoint",e.geometryType="MultiPoint",e}return e=i,(r=[{key:"addPoint",value:function(t,e){this.addComponent(t,e)}},{key:"removePoint",value:function(t){this.removeComponent(t)}}])&&K(e.prototype,r),n&&K(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function nt(t){"@babel/helpers - typeof";return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ot(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function it(t,e){return(it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=st(t);if(e){var o=st(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===nt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ut=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&it(t,e)}(i,rt);var e,r,n,o=at(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).componentTypes=["SuperMap.Geometry.Point","SuperMap.PointWithMeasure"],e.CLASS_NAME="SuperMap.Geometry.Curve",e.geometryType="Curve",e}return e=i,r&&ot(e.prototype,r),n&&ot(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function lt(t){"@babel/helpers - typeof";return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ft(){return(ft="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ht(t,e){return(ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=yt(t);if(e){var o=yt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===lt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function yt(t){return(yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ht(t,e)}(i,ut);var e,r,n,o=pt(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).CLASS_NAME="SuperMap.Geometry.LineString",e.geometryType="LineString",e}return e=i,n=[{key:"calculateCircle",value:function(t){if(t.length<3)return t;var e={},r=t[0],n=t[1],o=t[2],i=0,a=0,s=!0,u=0,l=0,c=0,f=[],h=(o.y-r.y)/(o.x-r.x),p=o.y-h*o.x;if(o.x!=r.x&&o.y!=r.y&&n.y==h*n.x+p||o.x==r.x&&n.x==r.x||o.y==r.y&&n.y==r.y||o.x==r.x&&o.y==r.y||o.x==n.x&&o.y==n.y||r.x==n.x&&r.y==n.y)f.push(r),f.push(n),f.push(o);else{var y=(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y))*(2*(o.y-r.y))-(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))*(2*(n.y-r.y)),d=2*(n.x-r.x)*(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))-2*(o.x-r.x)*(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y)),b=4*((n.x-r.x)*(o.y-r.y)-(o.x-r.x)*(n.y-r.y));e.x=y/b,e.y=d/b;var v=(2*(i=Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)))*i-((r.x-o.x)*(r.x-o.x)+(r.y-o.y)*(r.y-o.y)))/(2*i*i);v=(v=v>=1?1:v)<=-1?-1:v,c=180*Math.acos(v)/Math.PI,a=(c=o.x==r.x?e.x>r.x&&n.x>r.x||e.x<r.x&&n.x<r.x?360-c:c:e.y>h*e.x+p&&n.y>h*n.x+p||e.y<h*e.x+p&&n.y<h*n.x+p?360-c:c)/72,o.y!=r.y?o.x==r.x?o.y>r.y?n.x<r.x&&(s=!1):n.x>r.x&&(s=!1):o.x<r.x?n.y<h*n.x+p&&(s=!1):n.y>h*n.x+p&&(s=!1):o.x>r.x?n.y>r.y&&(s=!1):n.y<r.y&&(s=!1);var m=(r.y-e.y)/(r.x-e.x),g=m>=0?180*Math.atan(m)/Math.PI:Math.abs(180*Math.atan(m)/Math.PI)+90,w=Math.abs(e.y);r.y==w&&w==o.y&&r.x<o.x&&(g+=180);var O=r.y-e.y;f.push(r);for(var S=1;S<72;S++){u=a*S,l=g,s?O>=0?m>=0?l+=u:l=180-(l-90)+u:l=m>0?l-180+u:90-l+u:O>=0?m>=0?l-=u:l=180-(l-90)-u:l=m>=0?l-180-u:90-l-u,l=l*Math.PI/180;var _=e.x+i*Math.cos(l),P=e.y+i*Math.sin(l);f.push(new V(_,P))}f.push(o)}return f}},{key:"createLineEPS",value:function(t){var e=[],r=t.length;if(r<2)return t;for(var n=0;n<r;){if("LTypeArc"==t[n].type){var o=i.createLineArc(e,n,r,t);e=o[0],n=o[1]}else e.push(t[n]),n++}return e}},{key:"createLineArc",value:function(t,e,r,n){if(0==e){var o=i.addPointEPS(n,e,r,"LTypeArc");Array.prototype.push.apply(t,o[0]),e=o[1]+1}else if(e==r-1){var a=[n[e-1],n[e]],s=i.calculateCircle(a);Array.prototype.push.apply(t,s),e++}else{var u=i.addPointEPS(n,e,r,"LTypeArc");t.pop(),Array.prototype.push.apply(t,u[0]),e=u[1]+1}return[t,e]}},{key:"addPointEPS",value:function(t,e,r,n){var o,a=[],s=e+1;return 0==e?Array.prototype.push.apply(a,[t[e],t[e+1]]):e==r-1?Array.prototype.push.apply(a,[t[e-1],t[e]]):Array.prototype.push.apply(a,[t[e-1],t[e],t[e+1]]),"LTypeCurve"==n?o=i.calculatePointsFBZN(a):"LTypeArc"==n&&(o=i.calculateCircle(a)),[o,s]}}],(r=[{key:"removeComponent",value:function(t){var e=this.components&&this.components.length>2;return e&&ft(yt(i.prototype),"removeComponent",this).apply(this,arguments),e}},{key:"getSortedSegments",value:function(){for(var t,e,r=this.components.length-1,n=new Array(r),o=0;o<r;++o)t=this.components[o],e=this.components[o+1],t.x<e.x?n[o]={x1:t.x,y1:t.y,x2:e.x,y2:e.y}:n[o]={x1:e.x,y1:e.y,x2:t.x,y2:t.y};return n.sort(function(t,e){return t.x1-e.x1})}},{key:"getVertices",value:function(t){return!0===t?[this.components[0],this.components[this.components.length-1]]:!1===t?this.components.slice(1,this.components.length-1):this.components.slice()}}])&&ct(e.prototype,r),n&&ct(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function bt(t){"@babel/helpers - typeof";return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mt(){return(mt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ot(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function gt(t,e){return(gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ot(t);if(e){var o=Ot(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===bt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ot(t){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var St=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gt(t,e)}(i,dt);var e,r,n,o=wt(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).componentTypes=["SuperMap.Geometry.Point"],e.CLASS_NAME="SuperMap.Geometry.LinearRing",e.geometryType="LinearRing",e}return e=i,(r=[{key:"addComponent",value:function(t,e){var r=!1,n=this.components.pop();null==e&&t.equals(n)||(r=mt(Ot(i.prototype),"addComponent",this).apply(this,arguments));var o=this.components[0];return mt(Ot(i.prototype),"addComponent",this).apply(this,[o]),r}},{key:"removeComponent",value:function(t){var e=this.components&&this.components.length>3;if(e){this.components.pop(),mt(Ot(i.prototype),"removeComponent",this).apply(this,arguments);var r=this.components[0];mt(Ot(i.prototype),"addComponent",this).apply(this,[r])}return e}},{key:"getArea",value:function(){var t=0;if(this.components&&this.components.length>2){for(var e=0,r=0,n=this.components.length;r<n-1;r++){var o=this.components[r],i=this.components[r+1];e+=(o.x+i.x)*(i.y-o.y)}t=-e/2}return t}},{key:"getVertices",value:function(t){return!0===t?[]:this.components.slice(0,this.components.length-1)}}])&&vt(e.prototype,r),n&&vt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function _t(t){"@babel/helpers - typeof";return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xt(t,e){return(xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=jt(t);if(e){var o=jt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===_t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function jt(t){return(jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xt(t,e)}(i,Q);var e,r,n,o=kt(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).componentTypes=["SuperMap.Geometry.LinearRing"],e.CLASS_NAME="SuperMap.Geometry.Polygon",e.geometryType="Polygon",e}return e=i,(r=[{key:"getArea",value:function(){var t=0;if(this.components&&this.components.length>0){t+=Math.abs(this.components[0].getArea());for(var e=1,r=this.components.length;e<r;e++)t-=Math.abs(this.components[e].getArea())}return t}}])&&Pt(e.prototype,r),n&&Pt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Tt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ct=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.Feature",this.layer=e,this.id=C.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=r,this.data=null!=n?n:{}}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.id=null,this.lonlat=null,this.data=null}}])&&Tt(e.prototype,r),n&&Tt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Rt(t){"@babel/helpers - typeof";return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function At(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Mt(){return(Mt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=It(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Lt(t,e){return(Lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=It(t);if(e){var o=It(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function It(t){return(It=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Dt="Unknown",Ft="Insert",Bt="Update",Gt="Delete",Ut=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lt(t,e)}(i,Ct);var e,r,n,o=Nt(i);function i(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,null,null,e)).fid=null,n.geometry=t||null,n.attributes={},e&&(n.attributes=C.extend(n.attributes,e)),n.bounds=null,n.state=null,n.style=r||null,n.url=null,n.lonlat=null,n.CLASS_NAME="SuperMap.Feature.Vector",i.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"default",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}},n}return e=i,(r=[{key:"destroy",value:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,Mt(It(i.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){return new i(this.geometry?this.geometry.clone():null,this.attributes,this.style)}},{key:"toState",value:function(t){if(t===Bt)switch(this.state){case Dt:case Gt:this.state=t}else if(t===Ft)switch(this.state){case Dt:break;default:this.state=t}else if(t===Gt)switch(this.state){case Ft:case Gt:break;case Dt:case Bt:this.state=t}else t===Dt&&(this.state=t)}}])&&At(e.prototype,r),n&&At(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Jt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Vt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=null,this.keepData=!1,C.extend(this,e),this.options=e,this.CLASS_NAME="SuperMap.Format"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){}},{key:"read",value:function(t){}},{key:"write",value:function(t){}}])&&Jt(e.prototype,r),n&&Jt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function zt(t){"@babel/helpers - typeof";return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ht(t,e){return(Ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Wt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Yt(t);if(e){var o=Yt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===zt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Yt(t){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ht(t,e)}(i,Vt);var e,r,n,o=Wt(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).indent="    ",e.space=" ",e.newline="\n",e.level=0,e.pretty=!1,e.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),e.CLASS_NAME="SuperMap.Format.JSON",e.serialize={object:function(t){if(null==t)return"null";if(t.constructor===Date)return this.serialize.date.apply(this,[t]);if(t.constructor===Array)return this.serialize.array.apply(this,[t]);var e,r,n,o=["{"];this.level+=1;var i=!1;for(e in t)t.hasOwnProperty(e)&&(r=this.write.apply(this,[e,this.pretty]),n=this.write.apply(this,[t[e],this.pretty]),null!=r&&null!=n&&(i&&o.push(","),o.push(this.writeNewline(),this.writeIndent(),r,":",this.writeSpace(),n),i=!0));return this.level-=1,o.push(this.writeNewline(),this.writeIndent(),"}"),o.join("")},array:function(t){var e,r=["["];this.level+=1;for(var n=0,o=t.length;n<o;++n)null!=(e=this.write.apply(this,[t[n],this.pretty]))&&(n>0&&r.push(","),r.push(this.writeNewline(),this.writeIndent(),e));return this.level-=1,r.push(this.writeNewline(),this.writeIndent(),"]"),r.join("")},string:function(t){var e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(t)?'"'+t.replace(/([\x00-\x1f\\"])/g,function(t,r){var n=e[r];return n||(n=r.charCodeAt(),"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16))})+'"':'"'+t+'"'},number:function(t){return isFinite(t)?String(t):"null"},boolean:function(t){return String(t)},date:function(t){function e(t){return t<10?"0"+t:t}return'"'+t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+"T"+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())+'"'}},e}return e=i,(r=[{key:"read",value:function(t,e){var r;if(this.nativeJSON)try{r=JSON.parse(t,e)}catch(e){return{data:t}}return this.keepData&&(this.data=r),r}},{key:"write",value:function(t,e){this.pretty=!!e;var r=null,n=zt(t);if(this.serialize[n])try{r=!this.pretty&&this.nativeJSON?JSON.stringify(t):this.serialize[n].apply(this,[t])}catch(t){}return r}},{key:"writeIndent",value:function(){var t=[];if(this.pretty)for(var e=0;e<this.level;++e)t.push(this.indent);return t.join("")}},{key:"writeNewline",value:function(){return this.pretty?this.newline:""}},{key:"writeSpace",value:function(){return this.pretty?this.space:""}}])&&qt(e.prototype,r),n&&qt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Qt(t){"@babel/helpers - typeof";return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Kt(t,e){return(Kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function $t(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=te(t);if(e){var o=te(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Qt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function te(t){return(te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ee=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kt(t,e)}(i,Q);var e,r,n,o=$t(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).componentTypes=["SuperMap.Geometry.LineString"],e.CLASS_NAME="SuperMap.Geometry.MultiLineString",e.geometryType="MultiLineString",e}return e=i,r&&Zt(e.prototype,r),n&&Zt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function re(t){"@babel/helpers - typeof";return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ne(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function oe(t,e){return(oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ie(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ae(t);if(e){var o=ae(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===re(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ae(t){return(ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oe(t,e)}(i,Q);var e,r,n,o=ie(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).componentTypes=["SuperMap.Geometry.Polygon"],e.CLASS_NAME="SuperMap.Geometry.MultiPolygon",e.geometryType="MultiPolygon",e}return e=i,r&&ne(e.prototype,r),n&&ne(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function ue(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var le=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.red=e||0==e?e:255,this.green=r||0,this.blue=n||0,this.CLASS_NAME="SuperMap.ServerColor"}var e,r,n;return e=t,n=[{key:"fromJson",value:function(e){if(e){var r=new t,n=255;null!==e.red&&(n=Number(e.red)),r.red=n;var o=0;null!==e.green&&(o=Number(e.green)),r.green=o;var i=0;return null!==e.blue&&(i=Number(e.blue)),r.blue=i,r}}}],(r=[{key:"destroy",value:function(){this.red=null,this.green=null,this.blue=null}}])&&ue(e.prototype,r),n&&ue(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ce(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var fe=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fillBackColor=new le(255,255,255),this.fillBackOpaque=!1,this.fillForeColor=new le(255,0,0),this.fillGradientMode=null,this.fillGradientAngle=0,this.fillGradientOffsetRatioX=0,this.fillGradientOffsetRatioY=0,this.fillOpaqueRate=100,this.fillSymbolID=0,this.lineColor=new le(0,0,0),this.lineSymbolID=0,this.lineWidth=1,this.markerAngle=0,this.markerSize=1,this.markerSymbolID=-1,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ServerStyle"}var e,r,n;return e=t,n=[{key:"fromJson",value:function(e){if(e)return new t({fillBackColor:le.fromJson(e.fillBackColor),fillBackOpaque:e.fillBackOpaque,fillForeColor:le.fromJson(e.fillForeColor),fillGradientMode:e.fillGradientMode,fillGradientAngle:e.fillGradientAngle,fillGradientOffsetRatioX:e.fillGradientOffsetRatioX,fillGradientOffsetRatioY:e.fillGradientOffsetRatioY,fillOpaqueRate:e.fillOpaqueRate,fillSymbolID:e.fillSymbolID,lineColor:le.fromJson(e.lineColor),lineSymbolID:e.lineSymbolID,lineWidth:e.lineWidth,markerAngle:e.markerAngle,markerSize:e.markerSize,markerSymbolID:e.markerSymbolID})}}],(r=[{key:"destroy",value:function(){var t=this;t.fillBackColor&&(t.fillBackColor.destroy(),t.fillBackColor=null),t.fillBackOpaque=null,t.fillForeColor&&(t.fillForeColor.destroy(),t.fillForeColor=null),t.fillGradientMode=null,t.fillGradientAngle=null,t.fillGradientOffsetRatioX=null,t.fillGradientOffsetRatioY=null,t.fillOpaqueRate=null,t.fillSymbolID=null,t.lineColor&&(t.lineColor.destroy(),t.lineColor=null),t.lineSymbolID=null,t.lineWidth=null,t.markerAngle=null,t.markerSize=null,t.markerSymbolID=null}},{key:"toServerJSONObject",value:function(){var t={};return t=C.copyAttributes(t,this)}}])&&ce(e.prototype,r),n&&ce(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function he(t){"@babel/helpers - typeof";return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ye(t,e){return(ye=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function de(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ve(t);if(e){var o=ve(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===he(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return be(t)}(this,r)}}function be(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ve(t){return(ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var me=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ye(t,e)}(i,V);var e,r,n,o=de(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).measure=null,t&&C.extend(be(e),t),e.CLASS_NAME="SuperMap.PointWithMeasure",e}return e=i,n=[{key:"fromJson",value:function(t){if(t)return new i({x:t.x,y:t.y,measure:t.measure})}}],(r=[{key:"equals",value:function(t){var e=!1;if(null!=t){var r=this.x===t.x&&this.y===t.y&&this.measure===t.measure,n=isNaN(this.x)&&isNaN(this.y)&&isNaN(this.measure),o=isNaN(t.x)&&isNaN(t.y)&&isNaN(t.measure);e=r||n&&o}return e}},{key:"toJson",value:function(){var t="{";return null!=this.measure&&void 0!=this.measure&&(t+='"measure":'+this.measure+","),t+='"x":'+this.x+",",t+='"y":'+this.y,t+="}"}},{key:"destroy",value:function(){this.measure=null,this.x=null,this.y=null}}])&&pe(e.prototype,r),n&&pe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ge(t){"@babel/helpers - typeof";return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function we(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Oe(t,e){return(Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Se(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Pe(t);if(e){var o=Pe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ge(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _e(t)}(this,r)}}function _e(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pe(t){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oe(t,e)}(i,Q);var e,r,n,o=Se(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).id=null,r.center=null,r.style=null,r.length=null,r.maxM=null,r.minM=null,r.parts=null,r.points=null,r.type=null,r.componentTypes=["SuperMap.Geometry.LinearRing","SuperMap.Geometry.LineString"],e&&C.extend(_e(r),e),r.CLASS_NAME="SuperMap.Route",r.geometryType="LINEM",r}return e=i,n=[{key:"fromJson",value:function(t){if(t){var e=t.parts||[],r=t.points||[],n=e.length,o=[];if(!(n>0))return null;for(var a=0,s=0,u=[];a<n;a++){for(var l=0;l<e[a];l++)u.push(me.fromJson(r[s+l]));s+=e[a],u[0].equals(u[e[a]-1])?o.push(new St(u)):o.push(new dt(u)),u=[]}return new i(o,{id:t.id,center:t.center,style:t.style,length:t.length,maxM:t.maxM,minM:t.minM,type:t.type,parts:t.parts})}}}],(r=[{key:"toJson",value:function(){var t="{";if(null!=this.id&&void 0!=this.id&&(t+='"id":'+this.id+","),null!=this.center&&void 0!=this.center&&(t+='"center":'+this.center+","),null!=this.style&&void 0!=this.style&&(t+='"style":'+this.style+","),null!=this.length&&void 0!=this.length&&(t+='"length":'+this.length+","),null!=this.maxM&&void 0!=this.maxM&&(t+='"maxM":'+this.maxM+","),null!=this.minM&&void 0!=this.minM&&(t+='"minM":'+this.minM+","),null!=this.type&&void 0!=this.type&&(t+='"type":"'+this.type+'",'),null!=this.parts&&void 0!=this.parts){t+='"parts":['+this.parts[0];for(var e=1;e<this.parts.length;e++)t+=","+this.parts[e];t+="],"}if(null!=this.components&&this.components.length>0){t+='"points":[';for(var r=0,n=this.components.length;r<n;r++)for(var o=0,i=this.components[r].components.length;o<i;o++)t+=this.components[r].components[o].toJson()+",";t=t.replace(/,$/g,""),t+="]"}return t=t.replace(/,$/g,""),t+="}"}},{key:"destroy",value:function(){var t=this;t.id=null,t.center=null,t.style=null,t.length=null,t.maxM=null,t.minM=null,t.type=null,t.parts=null,t.components.length=0,t.components=null,t.componentTypes=null}}])&&we(e.prototype,r),n&&we(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),ke={GEOJSON:"GEOJSON",ISERVER:"ISERVER",FGB:"FGB"},je={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"},Ee={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",POINTEPS:"POINTEPS",LINEEPS:"LINEEPS",REGIONEPS:"REGIONEPS",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN",GEOCOMPOUND:"GEOCOMPOUND"},Te={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"},Ce={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"},Re={DISTANCE:"DISTANCE",AREA:"AREA"},Ae={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},Me={CENTIMETER:"CENTIMETER",DECIMETER:"DECIMETER",FOOT:"FOOT",INCH:"INCH",KILOMETER:"KILOMETER",METER:"METER",MILE:"MILE",MILLIMETER:"MILLIMETER",YARD:"YARD"},Le={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"},Ne={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"},Ie={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"},De={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"},Fe={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"},Be={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"},Ge={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"},Ue={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"},Je={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"},Ve={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"},ze={FLAT:"FLAT",ROUND:"ROUND"},qe={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"},He={INDEXEDHDFS:"INDEXEDHDFS",UDB:"UDB",MONGODB:"MONGODB",PG:"PG"},We={BSPLINE:"BSPLINE",POLISH:"POLISH"},Ye={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"},Xe={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"},Qe={ADD:"add",UPDATE:"update",DELETE:"delete"},Ze={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"},Ke={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"},$e={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"},tr={EXP1:"EXP1",EXP2:"EXP2"},er={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"},rr={CLIP:"clip",INTERSECT:"intersect"},nr={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"},or={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"},ir={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"},ar={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"},sr={REGIONNOOVERLAP:"REGIONNOOVERLAP",REGIONNOOVERLAPWITH:"REGIONNOOVERLAPWITH",REGIONCONTAINEDBYREGION:"REGIONCONTAINEDBYREGION",REGIONCOVEREDBYREGION:"REGIONCOVEREDBYREGION",LINENOOVERLAP:"LINENOOVERLAP",LINENOOVERLAPWITH:"LINENOOVERLAPWITH",POINTNOIDENTICAL:"POINTNOIDENTICAL"},ur={GEOHASH_GRID:"geohash_grid"},lr={AVG:"avg",MAX:"max",MIN:"min",SUM:"sum"},cr={NDVI:"NDVI",HILLSHADE:"HILLSHADE"},fr={CUSTOM:"CUSTOM",INTERSECTION:"INTERSECTION",UNION:"UNION"},hr={CUSTOM:"CUSTOM",MAX:"MAX",MIN:"MIN"};function pr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var yr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=0,this.style=null,this.parts=null,this.points=null,this.type=null,this.prjCoordSys=null,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ServerGeometry"}var e,r,n;return e=t,n=[{key:"fromJson",value:function(e){if(e)return new t({id:e.id,style:fe.fromJson(e.style),parts:e.parts,partTopo:e.partTopo,points:e.points,center:e.center,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type})}},{key:"fromGeometry",value:function(e){if(e){var r=0,n=[],o=[],i=null,a=e.components,s=e.CLASS_NAME,u={epsgCode:e.SRID};if(isNaN(e.id)||(r=e.id),"SuperMap.Geometry.LinearRing"!=s&&"SuperMap.Geometry.LineString"!=s&&(e instanceof rt||e instanceof ee)){for(var l=a.length,c=0;c<l;c++){var f=a[c].getVertices(),h=f.length;n.push(h);for(var p=0;p<h;p++)o.push(new V(f[p].x,f[p].y))}i="SuperMap.Geometry.MultiPoint"==s?Ee.POINT:Ee.LINE}else if(e instanceof se){for(var y=a.length,d=0;d<y;d++)for(var b=a[d].components,v=b.length,m=0;m<v;m++){var g=b[m].getVertices(),w=g.length+1;n.push(w);for(var O=0;O<w-1;O++)o.push(new V(g[O].x,g[O].y));o.push(new V(g[0].x,g[0].y))}i=Ee.REGION}else if(e instanceof Et){for(var S=a.length,_=0;_<S;_++){var P=a[_].getVertices(),x=P.length+1;n.push(x);for(var k=0;k<x-1;k++)o.push(new V(P[k].x,P[k].y));o.push(new V(P[0].x,P[0].y))}i=Ee.REGION}else{for(var j=e.getVertices(),E=j.length,T=0;T<E;T++)o.push(new V(j[T].x,j[T].y));e instanceof St&&(o.push(new V(j[0].x,j[0].y)),E++),n.push(E),i=e instanceof V?Ee.POINT:Ee.LINE}return new t({id:r,style:null,parts:n,points:o,type:i,prjCoordSys:u})}}},{key:"IsClockWise",value:function(t){var e=t.length;if(e<3)return 0;var r=t[0].y*(t[e-1].x-t[1].x);t.push(t[0]);for(var n=1;n<e;n++)r+=t[n].y*(t[n-1].x-t[n+1].x);return.5*r}},{key:"bubbleSort",value:function(t,e,r,n){for(var o=0;o<t.length;o++)for(var i=0;i<t.length;i++)if(t[o]>t[i]){var a=t[i];t[i]=t[o],t[o]=a;var s=e[i];if(e[i]=e[o],e[o]=s,r&&r.length>0){var u=r[i];r[i]=r[o],r[o]=u}if(n&&n.length>0){var l=n[i];n[i]=n[o],n[o]=l}}}}],(r=[{key:"destroy",value:function(){var t=this;t.id=null,t.style=null,t.parts=null,t.partTopo=null,t.points=null,t.type=null,t.prjCoordSys=null}},{key:"toGeometry",value:function(){var t=this;switch(t.type.toUpperCase()){case Ee.POINT:return t.toGeoPoint();case Ee.LINE:return t.toGeoLine();case Ee.LINEM:return t.toGeoLinem();case Ee.REGION:return t.toGeoRegion();case Ee.POINTEPS:return t.toGeoPoint();case Ee.LINEEPS:return t.toGeoLineEPS();case Ee.REGIONEPS:return t.toGeoRegionEPS();case Ee.GEOCOMPOUND:return t.transformGeoCompound()}}},{key:"toGeoPoint",value:function(){var t=this.parts||[],e=this.points||[],r=t.length;if(r>0){if(1===r)return new V(e[0].x,e[0].y);for(var n=[],o=0;o<r;o++)n.push(new V(e[o].x,e[o].y));return new rt(n)}return null}},{key:"toGeoLine",value:function(){var t=this.parts||[],e=this.points||[],r=t.length;if(r>0){if(1===r){for(var n=[],o=0;o<t[0];o++)n.push(new V(e[o].x,e[o].y));return n[0].equals(n[t[0]-1])?new St(n):new dt(n)}for(var i=[],a=0;a<r;a++){for(var s=[],u=0;u<t[a];u++)s.push(new V(e[u].x,e[u].y));i.push(new dt(s)),e.splice(0,t[a])}return new ee(i)}return null}},{key:"toGeoLineEPS",value:function(){var t,e,r,n,o,i=this.parts||[],a=this.points||[],s=i.length;if(s>0){if(1===s){for(t=0,r=[];t<i[0];t++)r.push(new V(a[t].x,a[t].y,a[t].type));return r[0].equals(r[i[0]-1])?(o=dt.createLineEPS(r),new St(o)):(o=dt.createLineEPS(r),new dt(o))}for(t=0,n=[];t<s;t++){for(e=0,r=[];e<i[t];e++)r.push(new V(a[e].x,a[e].y));o=dt.createLineEPS(r),n.push(new dt(o)),a.splice(0,i[t])}return new ee(n)}return null}},{key:"toGeoLinem",value:function(){return xe.fromJson(this)}},{key:"toGeoRegion",value:function(){var e=this.parts||[],r=this.partTopo||[],n=this.points||[],o=e.length;if(o<=0)return null;var i=[],a=[];if(1==o){for(var s=0;s<n.length;s++)a.push(new V(n[s].x,n[s].y));return i.push(new Et([new St(a)])),new se(i)}for(var u=[],l=[],c=[],f=[],h=[],p=0,y=0;p<o;p++){for(var d=0;d<e[p];d++)a.push(new V(n[y+d].x,n[y+d].y));y+=e[p];var b=new Et([new St(a)]);a=[],c.push(b),0===r.length&&f.push(b.getBounds()),h.push(1),l.push(b.getArea())}if(0===r.length){t.bubbleSort(l,c,r,f);for(var v=[],m=1;m<c.length;m++)for(var g=m-1;g>=0;g--)if(v[m]=-1,f[g].containsBounds(f[m])){h[m]=-1*h[g],h[m]<0&&(v[m]=g);break}for(var w=0;w<c.length;w++)h[w]>0?i.push(c[w]):(i[v[w]].components=i[v[w]].components.concat(c[w].components),i.push(""))}else{i=new Array;for(var O=0;O<c.length;O++)if(r[O]&&-1==r[O]?u=u.concat(c[O].components):(u.length>0&&i.length>0&&(i[i.length-1].components=i[i.length-1].components.concat(u),u=[]),i.push(c[O])),O==o-1){var S=i.length;if(S)i[S-1].components=i[S-1].components.concat(u);else for(var _=0,P=u.length;_<P;_++)i.push(new Et(u))}}return new se(i)}},{key:"toGeoRegionEPS",value:function(){var e=this.parts||[],r=this.partTopo||[],n=this.points||[],o=e.length;if(o<=0)return null;var i,a=[],s=[];if(1==o){for(var u=0;u<n.length;u++)s.push(new V(n[u].x,n[u].y));return i=dt.createLineEPS(s),a.push(new Et([new St(i)])),new se(a)}for(var l=[],c=[],f=[],h=[],p=[],y=0,d=0;y<o;y++){for(var b=0;b<e[y];b++)s.push(new V(n[d+b].x,n[d+b].y));d+=e[y],i=dt.createLineEPS(s);var v=new Et([new St(i)]);s=[],f.push(v),0===r.length&&h.push(v.getBounds()),p.push(1),c.push(v.getArea())}if(0===r.length){t.bubbleSort(c,f,r,h);for(var m=[],g=1;g<f.length;g++)for(var w=g-1;w>=0;w--)if(m[g]=-1,h[w].containsBounds(h[g])){p[g]=-1*p[w],p[g]<0&&(m[g]=w);break}for(var O=0;O<f.length;O++)p[O]>0?a.push(f[O]):(a[m[O]].components=a[m[O]].components.concat(f[O].components),a.push(""))}else{a=new Array;for(var S=0;S<f.length;S++)if(r[S]&&-1==r[S]?l=l.concat(f[S].components):(l.length>0&&a.length>0&&(a[a.length-1].components=a[a.length-1].components.concat(l),l=[]),a.push(f[S])),S==o-1){var _=a.length;if(_)a[_-1].components=a[_-1].components.concat(l);else for(var P=0,x=l.length;P<x;P++)a.push(new Et(l))}}return new se(a)}},{key:"transformGeoCompound",value:function(){var e=this.geoParts||[],r=e.length;if(r<=0)return null;for(var n=[],o=0;o<r;o++){var i=e[o];n.push(new t(i).toGeometry())}return new Q(n)}}])&&pr(e.prototype,r),n&&pr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dr(t){"@babel/helpers - typeof";return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function br(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vr(){return(vr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wr(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function mr(t,e){return(mr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function gr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=wr(t);if(e){var o=wr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===dr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function wr(t){return(wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Or=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mr(t,e)}(i,Xt);var e,r,n,o=gr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).ignoreExtraDims=!0,e.CLASS_NAME="SuperMap.Format.GeoJSON",e.parseCoords={point:function(t){if(!1===this.ignoreExtraDims&&2!=t.length)throw"Only 2D points are supported: "+t;return new V(t[0],t[1])},multipoint:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=this.parseCoords.point.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return new rt(e)},linestring:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=this.parseCoords.point.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return new dt(e)},multilinestring:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=this.parseCoords.linestring.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return new ee(e)},polygon:function(t){for(var e,r,n=[],o=0,i=t.length;o<i;++o){try{r=this.parseCoords.linestring.apply(this,[t[o]])}catch(t){throw t}e=new St(r.components),n.push(e)}return new Et(n)},multipolygon:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=this.parseCoords.polygon.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return new se(e)},box:function(t){if(2!=t.length)throw"GeoJSON box coordinates must have 2 elements";return new Et([new St([new V(t[0][0],t[0][1]),new V(t[1][0],t[0][1]),new V(t[1][0],t[1][1]),new V(t[0][0],t[1][1]),new V(t[0][0],t[0][1])])])}},e.extract={feature:function(t){var e=this.extract.geometry.apply(this,[t.geometry]),r={type:"Feature",properties:this.createAttributes(t),geometry:e};return t.geometry&&"TEXT"===t.geometry.type&&(r.properties.texts=t.geometry.texts,r.properties.textStyle=t.geometry.textStyle),t.fid&&(r.id=t.fid),t.ID&&(r.id=t.ID),r},geometry:function(t){if(null==t)return null;!t.parts&&t.points&&(t.parts=[t.points.length]);var e,r=t.hasOwnProperty("geometryType")?t:new yr(t).toGeometry()||t,n=r.geometryType||r.type;return"LinearRing"===n&&(n="LineString"),"LINEM"===n&&(n="MultiLineString"),e=this.extract[n.toLowerCase()].apply(this,[r]),"Collection"===(n="TEXT"===n?"Point":n)?{type:"GeometryCollection",geometries:e}:{type:n,coordinates:e}},point:function(t){var e=[t.x,t.y];for(var r in t)"x"===r||"y"===r||null===t[r]||isNaN(t[r])||e.push(t[r]);return e},text:function(t){return[t.points[0].x,t.points[0].y]},multipoint:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.point.apply(this,[t.components[r]]));return e},linestring:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.point.apply(this,[t.components[r]]));return e},multilinestring:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.linestring.apply(this,[t.components[r]]));return e},polygon:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.linestring.apply(this,[t.components[r]]));return e},multipolygon:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.polygon.apply(this,[t.components[r]]));return e},collection:function(t){for(var e=t.components.length,r=new Array(e),n=0;n<e;++n)r[n]=this.extract.geometry.apply(this,[t.components[n]]);return r}},e}return e=i,(r=[{key:"read",value:function(t,e,r){e=e||"FeatureCollection";var n=null,o=null;if(o="string"==typeof t?vr(wr(i.prototype),"read",this).call(this,t,r):t){if("string"!=typeof o.type);else if(this.isValidType(o,e))switch(e){case"Geometry":try{n=this.parseGeometry(o)}catch(t){}break;case"Feature":try{(n=this.parseFeature(o)).type="Feature"}catch(t){}break;case"FeatureCollection":switch(n=[],o.type){case"Feature":try{n.push(this.parseFeature(o))}catch(t){n=null}break;case"FeatureCollection":for(var a=0,s=o.features.length;a<s;++a)try{n.push(this.parseFeature(o.features[a]))}catch(t){n=null}break;default:try{var u=this.parseGeometry(o);n.push(new Ut(u))}catch(t){n=null}}}}else;return n}},{key:"write",value:function(t,e){return vr(wr(i.prototype),"write",this).call(this,this.toGeoJSON(t),e)}},{key:"fromGeoJSON",value:function(t,e,r){var n=this,o=this.read(t,e,r);return C.isArray(o)?o.map(function(t){return n._toiSevrerFeature(t)}):this._toiSevrerFeature(o)}},{key:"toGeoJSON",value:function(t){var e={type:null};if(C.isArray(t)){e.type="FeatureCollection";var r=t.length;e.features=new Array(r);for(var n=0;n<r;++n){var o=t[n];if(s(o)){var i={};i.geometry=o,e.features[n]=this.extract.feature.apply(this,[i])}else e.features[n]=this.extract.feature.apply(this,[o])}}else if(s(t)){var a={};a.geometry=t,e=this.extract.feature.apply(this,[a])}else e=this.extract.feature.apply(this,[t]);function s(t){return t.hasOwnProperty("parts")&&t.hasOwnProperty("points")||t.hasOwnProperty("geoParts")}return e}},{key:"isValidType",value:function(t,e){var r=!1;switch(e){case"Geometry":-1==C.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],t.type)||(r=!0);break;case"FeatureCollection":r=!0;break;default:t.type==e&&(r=!0)}return r}},{key:"parseFeature",value:function(t){var e,r,n,o;n=t.properties?t.properties:{},o=t.geometry&&t.geometry.bbox||t.bbox;try{r=this.parseGeometry(t.geometry)}catch(t){throw t}return e=new Ut(r,n),o&&(e.bounds=I.fromArray(o)),t.id&&(e.geometry.id=t.id,e.fid=t.id),e}},{key:"parseGeometry",value:function(t){if(null==t)return null;var e;if("GeometryCollection"==t.type){if(!C.isArray(t.geometries))throw"GeometryCollection must have geometries array: "+t;for(var r=t.geometries.length,n=new Array(r),o=0;o<r;++o)n[o]=this.parseGeometry.apply(this,[t.geometries[o]]);e=new Q(n)}else{if(!C.isArray(t.coordinates))throw"Geometry must have coordinates array: "+t;if(!this.parseCoords[t.type.toLowerCase()])throw"Unsupported geometry type: "+t.type;try{e=this.parseCoords[t.type.toLowerCase()].apply(this,[t.coordinates])}catch(t){throw t}}return e}},{key:"createCRSObject",value:function(t){var e=t.layer.projection.toString(),r={};if(e.match(/epsg:/i)){var n=parseInt(e.substring(e.indexOf(":")+1));r=4326==n?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+n}}}return r}},{key:"_toiSevrerFeature",value:function(t){var e=t.attributes,r=[],n=[];for(var o in e)r.push(o),n.push(e[o]);var i={fieldNames:r,fieldValues:n,geometry:yr.fromGeometry(t.geometry)};return i.geometry.id=t.fid,i}},{key:"createAttributes",value:function(t){if(!t)return null;var e={};!function(t,e){if(!t.hasOwnProperty("fieldNames")||!t.hasOwnProperty("fieldValues"))return;var r=t.fieldNames,n=t.fieldValues;for(var o in r)e[r[o]]=n[o]}(t,e);var r=["fieldNames","fieldValues","geometry","stringID","ID"];for(var n in t)r.indexOf(n)>-1||(e[n]=t[n]);return e}}])&&br(e.prototype,r),n&&br(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),Sr=function(t){return"[object Array]"==Object.prototype.toString.call(t)},_r=function(t){return"string"==typeof t&&t.constructor===String},Pr={toSuperMapGeometry:function(t){if(t&&t.type)return(new Or).read(t,"FeatureCollection")[0].geometry},toSuperMapBounds:function(t){return Sr(t)?new I(t[0],t[1],t[2],t[3]):new I(t.getWest(),t.getSouth(),t.getEast(),t.getNorth())},toSuperMapPoint:function(t){return Sr(t)?new V(t[0],t[1]):t.lng&&t.lat?new V(t.lng,t.lat):new V(t.geometry.coordinates[0],t.geometry.coordinates[1])},toSuperMapPolygon:function(t){var e=t.getWest(),r=t.getEast(),n=t.getSouth(),o=t.getNorth();return new Et([new St([new V(e,n),new V(r,n),new V(r,o),new V(e,o)])])},isArray:Sr,toGeoJSON:function(t){if(t)return(new Or).toGeoJSON(t)},toProcessingParam:function(t){var e={};if(t.length<1)e="";else{for(var r=[],n=0;n<t.length;n++){var o={};o.x=t[n][0],o.y=t[n][1],r.push(o)}e.type="REGION",e.points=r}return e},extend:function(t){for(var e=0;e<Object.getOwnPropertyNames(arguments).length;e++){var r=Object.getOwnPropertyNames(arguments)[e];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(t[i]=n[i])}}}return t},isNumber:function(t){if(""===t)return!1;var e=Number(t);return 0===e||!isNaN(e)},isString:_r,newGuid:function(t){for(var e=t||32,r="",n=1;n<e;n++){r+=Math.floor(16*Math.random()).toString(16)}return r},hexToRgba:function(t,e){var r=[],n=[];if(3==(t=t.replace(/#/,"")).length){for(var o=[],i=0;i<3;i++)o.push(t.charAt(i)+t.charAt(i));t=o.join("")}for(var a=0;a<6;a+=2)r[a]="0x"+t.substr(a,2),n.push(parseInt(Number(r[a])));return n.push(e),"rgba("+n.join(",")+")"},isMatchAdministrativeName:function(t,e){if(_r(e)){var r=t.substr(0,2);return"张家"===r&&(r=t.substr(0,3)),!!e.match(new RegExp(r))}return!1}};function xr(t){"@babel/helpers - typeof";return(xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function jr(){return(jr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Cr(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Er(t,e){return(Er=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Tr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Cr(t);if(e){var o=Cr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===xr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Cr(t){return(Cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Er(t,e)}(i,m);var e,r,n,o=Tr(i);function i(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t,e,r)).x=parseFloat(t),n.y=parseFloat(e),n.text=r.toString(),n.bsInfo={h:null,w:null},n.element=document.createElement("span"),n.CLASS_NAME="SuperMap.Geometry.GeoText",n.geometryType="GeoText",n}return e=i,(r=[{key:"destroy",value:function(){jr(Cr(i.prototype),"destroy",this).call(this),this.x=null,this.y=null,this.text=null}},{key:"getCentroid",value:function(){return new V(this.x,this.y)}},{key:"clone",value:function(t){return null==t&&(t=new i(this.x,this.y,this.text)),C.applyDefaults(t,this),t}},{key:"calculateBounds",value:function(){this.bounds=new I(this.x,this.y,this.x,this.y)}},{key:"getLabelPxBoundsByLabel",value:function(t,e,r,n){var o,i,a,s,u=C.cloneObject(t),l=(n.label||this.text).split("\n").length;if(e=parseFloat(e),r=parseFloat(r),l>1&&(r=parseFloat(r)*l),n.labelAlign&&"cm"!==n.labelAlign)switch(n.labelAlign){case"lt":u.x+=e/2,u.y+=r/2;break;case"lm":u.x+=e/2;break;case"lb":u.x+=e/2,u.y-=r/2;break;case"ct":u.y+=r/2;break;case"cb":u.y-=r/2;break;case"rt":u.x-=e/2,u.y+=r/2;break;case"rm":u.x-=e/2;break;case"rb":u.x-=e/2,u.y-=r/2}return this.bsInfo.h=r,this.bsInfo.w=e,o=u.x-parseFloat(e)/2,i=u.y+parseFloat(r)/2,s=u.x+parseFloat(e)/2,a=u.y-parseFloat(r)/2,new I(o,i,s,a)}},{key:"getLabelPxBoundsByText",value:function(t,e){var r,n,o,i,a=this.getLabelPxSize(e),s=C.cloneObject(t);if(e.labelAlign&&"cm"!==e.labelAlign)switch(e.labelAlign){case"lt":s.x+=a.w/2,s.y+=a.h/2;break;case"lm":s.x+=a.w/2;break;case"lb":s.x+=a.w/2,s.y-=a.h/2;break;case"ct":s.y+=a.h/2;break;case"cb":s.y-=a.h/2;break;case"rt":s.x-=a.w/2,s.y+=a.h/2;break;case"rm":s.x-=a.w/2;break;case"rb":s.x-=a.w/2,s.y-=a.h/2}return this.bsInfo.h=a.h,this.bsInfo.w=a.w,r=s.x-a.w/2,n=s.y+a.h/2,i=e.fontStyle&&"italic"===e.fontStyle?s.x+a.w/2+parseInt(parseFloat(e.fontSize)/2):s.x+a.w/2,o=s.y-a.h/2,new I(r,n,i,o)}},{key:"getLabelPxSize",value:function(t){var e,r,n,o,i=parseFloat(t.strokeWidth);e=t.label||this.text,r=t.fontSize?parseFloat(t.fontSize):parseFloat("12px");var a=e.split("\n"),s=a.length;o=s>1?r*s+s+i+.2*r:r+i+.2*r+1,n=0,this.labelWTmp&&n<this.labelWTmp&&(n=this.labelWTmp);for(var u=0;u<s;u++){var l=this.getTextCount(a[u]),c=this.labelWTmp=C.getTextBounds(t,a[u],this.element).textWidth+1*l.textC+i;n<c&&(n=c)}var f=new Object;return f.h=o,f.w=n,f}},{key:"getTextCount",value:function(t){for(var e={},r=0,n=0,o=0;o<t.length;o++)t.charCodeAt(o)>255?r++:n++;return e.cnC=r,e.enC=n,e.textC=t.length,e}}])&&kr(e.prototype,r),n&&kr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ar(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Mr=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&r&&r.map&&r.renderer&&(this.id=C.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=null,this.location=[],this.data=e,this.shapes=[],this.layer=r,this.CLASS_NAME="SuperMap.Feature.Theme")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}},{key:"getLocalXY",value:function(t){var e=this.layer.map.getResolution(),r=this.layer.map.getExtent();return t instanceof V||t instanceof Rr?[t.x/e+-r.left/e,r.top/e-t.y/e]:t instanceof L?[t.lon/e+-r.left/e,r.top/e-t.lat/e]:null}}])&&Ar(e.prototype,r),n&&Ar(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Lr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Nr=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.geometry=e,this.attributes=r}var e,r,n;return e=t,(r=[{key:"toFeature",value:function(){var t=Pr.toSuperMapGeometry(this.geometry),e=[];return this.geometry instanceof o().LngLat?e=[this.geometry.lng,this.geometry.lat]:this.geometry instanceof o().Point?e=[this.geometry.x,this.geometry.y]:3===this.geometry.length&&(t=new Rr(this.geometry[0],this.geometry[1],this.geometry[2])),e.length>1&&(t=new V(e[0],e[1])),new Ut(t,this.attributes)}}])&&Lr(e.prototype,r),n&&Lr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ir(t){"@babel/helpers - typeof";return(Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Fr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Util"}var e,r,n;return e=t,(r=[{key:"clone",value:function(t){var e=this.BUILTIN_OBJECT;if("object"==Ir(t)&&null!==t){var r=t;if(t instanceof Array){r=[];for(var n=0,o=t.length;n<o;n++)r[n]=this.clone(t[n])}else if(!e[Object.prototype.toString.call(t)])for(var i in r={},t)t.hasOwnProperty(i)&&(r[i]=this.clone(t[i]));return r}return t}},{key:"mergeItem",value:function(t,e,r,n){var o=this.BUILTIN_OBJECT;e.hasOwnProperty(r)&&("object"!=Ir(t[r])||o[Object.prototype.toString.call(t[r])]?!n&&r in t||(t[r]=e[r]):this.merge(t[r],e[r],n))}},{key:"merge",value:function(t,e,r){for(var n in e)this.mergeItem(t,e,n,r);return t}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(t,e){var r,n=this._canvas,o=this._pixelCtx,i=this._width,a=this._height,s=this._offsetX,u=this._offsetY;t+s>i&&(i=t+s+100,n.width=i,r=!0),e+u>a&&(a=e+u+100,n.height=a,r=!0),t<-s&&(i+=s=100*Math.ceil(-t/100),n.width=i,r=!0),e<-u&&(a+=u=100*Math.ceil(-e/100),n.height=a,r=!0),r&&o.translate(s,u)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}},{key:"inherits",value:function(t,e){var r=t.prototype;function n(){}for(var o in n.prototype=e.prototype,t.prototype=new n,r)t.prototype[o]=r[o];t.constructor=t}}])&&Dr(e.prototype,r),n&&Dr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Br(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Gr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._handlers={},this.CLASS_NAME="SuperMap.LevelRenderer.Eventful"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(t,e,r){var n=this._handlers;return e&&t?(n[t]||(n[t]=[]),n[t].push({h:e,one:!0,ctx:r||this}),this):this}},{key:"bind",value:function(t,e,r){var n=this._handlers;return e&&t?(n[t]||(n[t]=[]),n[t].push({h:e,one:!1,ctx:r||this}),this):this}},{key:"unbind",value:function(t,e){var r=this._handlers;if(!t)return this._handlers={},this;if(e){if(r[t]){for(var n=[],o=0,i=r[t].length;o<i;o++)r[t][o].h!=e&&n.push(r[t][o]);r[t]=n}r[t]&&0===r[t].length&&delete r[t]}else delete r[t];return this}},{key:"dispatch",value:function(t){if(this._handlers[t]){var e=arguments,r=e.length;r>3&&(e=Array.prototype.slice.call(e,1));for(var n=this._handlers[t],o=n.length,i=0;i<o;){switch(r){case 1:n[i].h.call(n[i].ctx);break;case 2:n[i].h.call(n[i].ctx,e[1]);break;case 3:n[i].h.call(n[i].ctx,e[1],e[2]);break;default:n[i].h.apply(n[i].ctx,e)}n[i].one?(n.splice(i,1),o--):i++}}return this}},{key:"dispatchWithContext",value:function(t){if(this._handlers[t]){var e=arguments,r=e.length;r>4&&(e=Array.prototype.slice.call(e,1,e.length-1));for(var n=e[e.length-1],o=this._handlers[t],i=o.length,a=0;a<i;){switch(r){case 1:o[a].h.call(n);break;case 2:o[a].h.call(n,e[1]);break;case 3:o[a].h.call(n,e[1],e[2]);break;default:o[a].h.apply(n,e)}o[a].one?(o.splice(a,1),i--):a++}}return this}}])&&Br(e.prototype,r),n&&Br(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ur(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Jr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Vector"}var e,r,n;return e=t,(r=[{key:"create",value:function(t,e){var r=new(0,this.ArrayCtor)(2);return r[0]=t||0,r[1]=e||0,r}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t}},{key:"set",value:function(t,e,r){return t[0]=e,t[1]=r,t}},{key:"add",value:function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}},{key:"scaleAndAdd",value:function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}},{key:"sub",value:function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}},{key:"len",value:function(t){return Math.sqrt(this.lenSquare(t))}},{key:"lenSquare",value:function(t){return t[0]*t[0]+t[1]*t[1]}},{key:"mul",value:function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}},{key:"div",value:function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}},{key:"dot",value:function(t,e){return t[0]*e[0]+t[1]*e[1]}},{key:"scale",value:function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}},{key:"normalize",value:function(t,e){var r=this.len(e);return 0===r?(t[0]=0,t[1]=0):(t[0]=e[0]/r,t[1]=e[1]/r),t}},{key:"distance",value:function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}},{key:"distanceSquare",value:function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}},{key:"negate",value:function(t,e){return t[0]=-e[0],t[1]=-e[1],t}},{key:"lerp",value:function(t,e,r,n){return t[0]=e[0]+n*(r[0]-e[0]),t[1]=e[1]+n*(r[1]-e[1]),t}},{key:"applyTransform",value:function(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[2]*o+r[4],t[1]=r[1]*n+r[3]*o+r[5],t}},{key:"min",value:function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}},{key:"max",value:function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}},{key:"length",value:function(t){return this.len(t)}},{key:"lengthSquare",value:function(t){return this.lenSquare(t)}},{key:"dist",value:function(t,e){return this.distance(t,e)}},{key:"distSquare",value:function(t,e){return this.distanceSquare(t,e)}}])&&Ur(e.prototype,r),n&&Ur(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Vr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var zr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vector=new Jr,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Curve"}var e,r,n;return e=t,(r=[{key:"isAroundZero",value:function(t){return t>-this.EPSILON&&t<this.EPSILON}},{key:"isNotAroundZero",value:function(t){return t>this.EPSILON||t<-this.EPSILON}},{key:"cubicAt",value:function(t,e,r,n,o){var i=1-o;return i*i*(i*t+3*o*e)+o*o*(o*n+3*i*r)}},{key:"cubicDerivativeAt",value:function(t,e,r,n,o){var i=1-o;return 3*(((e-t)*i+2*(r-e)*o)*i+(n-r)*o*o)}},{key:"cubicRootAt",value:function(t,e,r,n,o,i){var a=n+3*(e-r)-t,s=3*(r-2*e+t),u=3*(e-t),l=t-o,c=s*s-3*a*u,f=s*u-9*a*l,h=u*u-3*s*l,p=0;if(this.isAroundZero(c)&&this.isAroundZero(f))if(this.isAroundZero(s))i[0]=0;else{var y=-u/s;y>=0&&y<=1&&(i[p++]=y)}else{var d=f*f-4*c*h;if(this.isAroundZero(d)){var b=f/c,v=-s/a+b,m=-b/2;v>=0&&v<=1&&(i[p++]=v),m>=0&&m<=1&&(i[p++]=m)}else if(d>0){var g=Math.sqrt(d),w=c*s+1.5*a*(-f+g),O=c*s+1.5*a*(-f-g),S=(-s-((w=w<0?-Math.pow(-w,this.ONE_THIRD):Math.pow(w,this.ONE_THIRD))+(O=O<0?-Math.pow(-O,this.ONE_THIRD):Math.pow(O,this.ONE_THIRD))))/(3*a);S>=0&&S<=1&&(i[p++]=S)}else{var _=(2*c*s-3*a*f)/(2*Math.sqrt(c*c*c)),P=Math.acos(_)/3,x=Math.sqrt(c),k=Math.cos(P),j=(-s-2*x*k)/(3*a),E=(-s+x*(k+this.THREE_SQRT*Math.sin(P)))/(3*a),T=(-s+x*(k-this.THREE_SQRT*Math.sin(P)))/(3*a);j>=0&&j<=1&&(i[p++]=j),E>=0&&E<=1&&(i[p++]=E),T>=0&&T<=1&&(i[p++]=T)}}return p}},{key:"cubicExtrema",value:function(t,e,r,n,o){var i=6*r-12*e+6*t,a=9*e+3*n-3*t-9*r,s=3*e-3*t,u=0;if(this.isAroundZero(a)){if(this.isNotAroundZero(i)){var l=-s/i;l>=0&&l<=1&&(o[u++]=l)}}else{var c=i*i-4*a*s;if(this.isAroundZero(c))o[0]=-i/(2*a);else if(c>0){var f=Math.sqrt(c),h=(-i+f)/(2*a),p=(-i-f)/(2*a);h>=0&&h<=1&&(o[u++]=h),p>=0&&p<=1&&(o[u++]=p)}}return u}},{key:"cubicSubdivide",value:function(t,e,r,n,o,i){var a=(e-t)*o+t,s=(r-e)*o+e,u=(n-r)*o+r,l=(s-a)*o+a,c=(u-s)*o+s,f=(c-l)*o+l;i[0]=t,i[1]=a,i[2]=l,i[3]=f,i[4]=f,i[5]=c,i[6]=u,i[7]=n}},{key:"cubicProjectPoint",value:function(t,e,r,n,o,i,a,s,u,l,c){var f,h=this.vector.create(),p=this.vector.create(),y=this.vector.create(),d=.005,b=1/0;h[0]=u,h[1]=l;for(var v=0;v<1;v+=.05){p[0]=this.cubicAt(t,r,o,a,v),p[1]=this.cubicAt(e,n,i,s,v);var m=this.vector.distSquare(h,p);m<b&&(f=v,b=m)}b=1/0;for(var g=0;g<32&&!(d<this.EPSILON);g++){var w=f-d,O=f+d;p[0]=this.cubicAt(t,r,o,a,w),p[1]=this.cubicAt(e,n,i,s,w);var S=this.vector.distSquare(p,h);if(w>=0&&S<b)f=w,b=S;else{y[0]=this.cubicAt(t,r,o,a,O),y[1]=this.cubicAt(e,n,i,s,O);var _=this.vector.distSquare(y,h);O<=1&&_<b?(f=O,b=_):d*=.5}}return c&&(c[0]=this.cubicAt(t,r,o,a,f),c[1]=this.cubicAt(e,n,i,s,f)),Math.sqrt(b)}},{key:"quadraticAt",value:function(t,e,r,n){var o=1-n;return o*(o*t+2*n*e)+n*n*r}},{key:"quadraticDerivativeAt",value:function(t,e,r,n){return 2*((1-n)*(e-t)+n*(r-e))}},{key:"quadraticRootAt",value:function(t,e,r,n,o){var i=t-2*e+r,a=2*(e-t),s=t-n,u=0;if(this.isAroundZero(i)){if(this.isNotAroundZero(a)){var l=-s/a;l>=0&&l<=1&&(o[u++]=l)}}else{var c=a*a-4*i*s;if(this.isAroundZero(c)){var f=-a/(2*i);f>=0&&f<=1&&(o[u++]=f)}else if(c>0){var h=Math.sqrt(c),p=(-a+h)/(2*i),y=(-a-h)/(2*i);p>=0&&p<=1&&(o[u++]=p),y>=0&&y<=1&&(o[u++]=y)}}return u}},{key:"quadraticExtremum",value:function(t,e,r){var n=t+r-2*e;return 0===n?.5:(t-e)/n}},{key:"quadraticProjectPoint",value:function(t,e,r,n,o,i,a,s,u){var l,c=this.vector.create(),f=this.vector.create(),h=this.vector.create(),p=.005,y=1/0;c[0]=a,c[1]=s;for(var d=0;d<1;d+=.05){f[0]=this.quadraticAt(t,r,o,d),f[1]=this.quadraticAt(e,n,i,d);var b=this.vector.distSquare(c,f);b<y&&(l=d,y=b)}y=1/0;for(var v=0;v<32&&!(p<this.EPSILON);v++){var m=l-p,g=l+p;f[0]=this.quadraticAt(t,r,o,m),f[1]=this.quadraticAt(e,n,i,m);var w=this.vector.distSquare(f,c);if(m>=0&&w<y)l=m,y=w;else{h[0]=this.quadraticAt(t,r,o,g),h[1]=this.quadraticAt(e,n,i,g);var O=this.vector.distSquare(h,c);g<=1&&O<y?(l=g,y=O):p*=.5}}return u&&(u[0]=this.quadraticAt(t,r,o,l),u[1]=this.quadraticAt(e,n,i,l)),Math.sqrt(y)}}])&&Vr(e.prototype,r),n&&Vr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Hr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.util=new Fr,this.curve=new zr,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Area"}var e,r,n;return e=t,(r=[{key:"normalizeRadian",value:function(t){return(t%=this.PI2)<0&&(t+=this.PI2),t}},{key:"isInside",value:function(t,e,r,n){if(!e||!t)return!1;var o=t.type;this._ctx=this._ctx||this.util.getContext();var i=this._mathMethod(t,e,r,n);if(void 0!==i)return i;if(t.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(t,this._ctx,e,r,n);switch(o){case"ellipse":case"smicellipse":return!0;case"trochoid":var a="out"==e.location?e.r1+e.r2+e.d:e.r1-e.r2+e.d;return this.isInsideCircle(e,r,n,a);case"rose":return this.isInsideCircle(e,r,n,e.maxr);default:return!1}}},{key:"_mathMethod",value:function(t,e,r,n){switch(t.type){case"bezier-curve":return void 0===e.cpX2?this.isInsideQuadraticStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.xEnd,e.yEnd,e.lineWidth,r,n):this.isInsideCubicStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.cpX2,e.cpY2,e.xEnd,e.yEnd,e.lineWidth,r,n);case"line":return this.isInsideLine(e.xStart,e.yStart,e.xEnd,e.yEnd,e.lineWidth,r,n);case"broken-line":return this.isInsideBrokenLine(e.pointList,e.lineWidth,r,n);case"smicbroken-line":var o=r,i=n;return t.refOriginalPosition&&(o=r-t.refOriginalPosition[0],i=n-t.refOriginalPosition[1]),this.isInsideBrokenLine(e.pointList,e.lineWidth,o,i);case"ring":return this.isInsideRing(e.x,e.y,e.r0,e.r,r,n);case"smicring":var a=e.x,s=e.y;return t.refOriginalPosition&&(a=e.x+t.refOriginalPosition[0],s=e.y+t.refOriginalPosition[1]),this.isInsideRing(a,s,e.r0,e.r,r,n);case"circle":return this.isInsideCircle(e.x,e.y,e.r,r,n);case"smicpoint":var u=r,l=n;return t.refOriginalPosition&&(u=r-t.refOriginalPosition[0],l=n-t.refOriginalPosition[1]),this.isInsideCircle(e.x,e.y,e.r,u,l);case"sector":var c=e.startAngle*Math.PI/180,f=e.endAngle*Math.PI/180;return e.clockWise||(c=-c,f=-f),this.isInsideSector(e.x,e.y,e.r0,e.r,c,f,!e.clockWise,r,n);case"smicsector":var h=e.startAngle*Math.PI/180,p=e.endAngle*Math.PI/180;e.clockWise||(h=-h,p=-p);var y=e.x,d=e.y;return t.refOriginalPosition&&(y=e.x+t.refOriginalPosition[0],d=e.y+t.refOriginalPosition[1]),this.isInsideSector(y,d,e.r0,e.r,h,p,!e.clockWise,r,n);case"path":return this.isInsidePath(e.pathArray,Math.max(e.lineWidth,5),e.brushType,r,n);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(e.pointList,r,n);case"smicpolygon":var b=r,v=n;if(t.refOriginalPosition&&(b=r-t.refOriginalPosition[0],v=n-t.refOriginalPosition[1]),t.holePolygonPointLists&&t.holePolygonPointLists.length>0){for(var m=this.isInsidePolygon(e.pointList,b,v),g=t.holePolygonPointLists,w=!1,O=0,S=g.length;O<S;O++){var _=g[O];!0===this.isInsidePolygon(_,b,v)&&(w=!0)}return!0===m&&!1===w}return this.isInsidePolygon(e.pointList,b,v);case"text":var P=e.__rect||t.getRect(e);return this.isInsideRect(P.x,P.y,P.width,P.height,r,n);case"smictext":var x=t.getTextBackground(e);return this.isInsidePolygon(x,r,n);case"rectangle":case"image":return this.isInsideRect(e.x,e.y,e.width,e.height,r,n);case"smicimage":var k=e.x,j=e.y;return t.refOriginalPosition&&(k=e.x+t.refOriginalPosition[0],j=e.y+t.refOriginalPosition[1]),this.isInsideRect(k,j,e.width,e.height,r,n)}}},{key:"_buildPathMethod",value:function(t,e,r,n,o){return e.beginPath(),t.buildPath(e,r),e.closePath(),e.isPointInPath(n,o)}},{key:"isOutside",value:function(t,e,r,n){return!this.isInside(t,e,r,n)}},{key:"isInsideLine",value:function(t,e,r,n,o,i,a){if(0===o)return!1;var s=Math.max(o,5),u=0;if(a>e+s&&a>n+s||a<e-s&&a<n-s||i>t+s&&i>r+s||i<t-s&&i<r-s)return!1;if(t===r)return Math.abs(i-t)<=s/2;var l=(u=(e-n)/(t-r))*i-a+(t*n-r*e)/(t-r);return l*l/(u*u+1)<=s/2*s/2}},{key:"isInsideCubicStroke",value:function(t,e,r,n,o,i,a,s,u,l,c){if(0===u)return!1;var f=Math.max(u,5);return!(c>e+f&&c>n+f&&c>i+f&&c>s+f||c<e-f&&c<n-f&&c<i-f&&c<s-f||l>t+f&&l>r+f&&l>o+f&&l>a+f||l<t-f&&l<r-f&&l<o-f&&l<a-f)&&this.curve.cubicProjectPoint(t,e,r,n,o,i,a,s,l,c,null)<=f/2}},{key:"isInsideQuadraticStroke",value:function(t,e,r,n,o,i,a,s,u){if(0===a)return!1;var l=Math.max(a,5);return!(u>e+l&&u>n+l&&u>i+l||u<e-l&&u<n-l&&u<i-l||s>t+l&&s>r+l&&s>o+l||s<t-l&&s<r-l&&s<o-l)&&this.curve.quadraticProjectPoint(t,e,r,n,o,i,s,u,null)<=l/2}},{key:"isInsideArcStroke",value:function(t,e,r,n,o,i,a,s,u){var l=this.PI2;if(0===a)return!1;var c=Math.max(a,5);s-=t,u-=e;var f=Math.sqrt(s*s+u*u);if(f-c>r||f+c<r)return!1;if(Math.abs(n-o)>=l)return!0;if(i){var h=n;n=this.normalizeRadian(o),o=this.normalizeRadian(h)}else n=this.normalizeRadian(n),o=this.normalizeRadian(o);n>o&&(o+=l);var p=Math.atan2(u,s);return p<0&&(p+=l),p>=n&&p<=o||p+l>=n&&p+l<=o}},{key:"isInsideBrokenLine",value:function(t,e,r,n){for(var o=Math.max(e,10),i=0,a=t.length-1;i<a;i++){var s=t[i][0],u=t[i][1],l=t[i+1][0],c=t[i+1][1];if(this.isInsideLine(s,u,l,c,o,r,n))return!0}return!1}},{key:"isInsideRing",value:function(t,e,r,n,o,i){var a=(o-t)*(o-t)+(i-e)*(i-e);return a<n*n&&a>r*r}},{key:"isInsideRect",value:function(t,e,r,n,o,i){return o>=t&&o<=t+r&&i>=e&&i<=e+n}},{key:"isInsideCircle",value:function(t,e,r,n,o){return(n-t)*(n-t)+(o-e)*(o-e)<r*r}},{key:"isInsideSector",value:function(t,e,r,n,o,i,a,s,u){return this.isInsideArcStroke(t,e,(r+n)/2,o,i,a,n-r,s,u)}},{key:"isInsidePolygon",value:function(t,e,r){for(var n=t.length,o=0,i=0,a=n-1;i<n;i++){var s=t[a][0],u=t[a][1],l=t[i][0],c=t[i][1];o+=this.windingLine(s,u,l,c,e,r),a=i}return 0!==o}},{key:"windingLine",value:function(t,e,r,n,o,i){return i>e&&i>n||i<e&&i<n?0:n==e?0:(i-e)/(n-e)*(r-t)+t>o?n<e?1:-1:0}},{key:"swapExtrema",value:function(){var t=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=t}},{key:"windingCubic",value:function(t,e,r,n,o,i,a,s,u,l){var c=this.curve,f=this.roots,h=this.extrema;if(l>e&&l>n&&l>i&&l>s||l<e&&l<n&&l<i&&l<s)return 0;var p=c.cubicRootAt(e,n,i,s,l,f);if(0===p)return 0;for(var y,d,b=0,v=-1,m=0;m<p;m++){var g=f[m];c.cubicAt(t,r,o,a,g)<u||(v<0&&(v=c.cubicExtrema(e,n,i,s,h),h[1]<h[0]&&v>1&&this.swapExtrema(),y=c.cubicAt(e,n,i,s,h[0]),v>1&&(d=c.cubicAt(e,n,i,s,h[1]))),2==v?g<h[0]?b+=y<e?1:-1:g<h[1]?b+=d<y?1:-1:b+=s<d?1:-1:g<h[0]?b+=y<e?1:-1:b+=s<y?1:-1)}return b}},{key:"windingQuadratic",value:function(t,e,r,n,o,i,a,s){var u=this.curve,l=this.roots;if(s>e&&s>n&&s>i||s<e&&s<n&&s<i)return 0;var c=u.quadraticRootAt(e,n,i,s,l);if(0===c)return 0;var f=u.quadraticExtremum(e,n,i);if(f>=0&&f<=1){for(var h=0,p=u.quadraticAt(e,n,i,f),y=0;y<c;y++){u.quadraticAt(t,r,o,l[y])>a||(l[y]<f?h+=p<e?1:-1:h+=i<p?1:-1)}return h}return u.quadraticAt(t,r,o,l[0])>a?0:i<e?1:-1}},{key:"windingArc",value:function(t,e,r,n,o,i,a,s){var u=this.roots,l=this.PI2;if((s-=e)>r||s<-r)return 0;var c=Math.sqrt(r*r-s*s);if(u[0]=-c,u[1]=c,Math.abs(n-o)>=l){n=0,o=l;var f=i?1:-1;return a>=u[0]+t&&a<=u[1]+t?f:0}if(i){var h=n;n=this.normalizeRadian(o),o=this.normalizeRadian(h)}else n=this.normalizeRadian(n),o=this.normalizeRadian(o);n>o&&(o+=l);for(var p=0,y=0;y<2;y++){var d=u[y];if(d+t>a){var b=Math.atan2(s,d),v=i?1:-1;b<0&&(b=l+b),(b>=n&&b<=o||b+l>=n&&b+l<=o)&&(b>Math.PI/2&&b<1.5*Math.PI&&(v=-v),p+=v)}}return p}},{key:"isInsidePath",value:function(t,e,r,n,o){for(var i=0,a=0,s=0,u=0,l=0,c=!0,f=!0,h="stroke"===(r=r||"fill")||"both"===r,p="fill"===r||"both"===r,y=0;y<t.length;y++){var d=t[y],b=d.points;if(c||"M"===d.command){if(y>0&&(p&&(i+=this.windingLine(a,s,u,l,n,o)),0!==i))return!0;u=b[b.length-2],l=b[b.length-1],c=!1,f&&"A"!==d.command&&(f=!1,a=u,s=l)}switch(d.command){case"M":a=b[0],s=b[1];break;case"L":if(h&&this.isInsideLine(a,s,b[0],b[1],e,n,o))return!0;p&&(i+=this.windingLine(a,s,b[0],b[1],n,o)),a=b[0],s=b[1];break;case"C":if(h&&this.isInsideCubicStroke(a,s,b[0],b[1],b[2],b[3],b[4],b[5],e,n,o))return!0;p&&(i+=this.windingCubic(a,s,b[0],b[1],b[2],b[3],b[4],b[5],n,o)),a=b[4],s=b[5];break;case"Q":if(h&&this.isInsideQuadraticStroke(a,s,b[0],b[1],b[2],b[3],e,n,o))return!0;p&&(i+=this.windingQuadratic(a,s,b[0],b[1],b[2],b[3],n,o)),a=b[2],s=b[3];break;case"A":var v=b[0],m=b[1],g=b[2],w=b[3],O=b[4],S=b[5],_=Math.cos(O)*g+v,P=Math.sin(O)*w+m;f?(f=!1,u=_,l=P):i+=this.windingLine(a,s,_,P);var x=(n-v)*w/g+v;if(h&&this.isInsideArcStroke(v,m,w,O,O+S,1-b[7],e,x,o))return!0;p&&(i+=this.windingArc(v,m,w,O,O+S,1-b[7],x,o)),a=Math.cos(O+S)*g+v,s=Math.sin(O+S)*w+m;break;case"z":if(h&&this.isInsideLine(a,s,u,l,e,n,o))return!0;c=!0}}return p&&(i+=this.windingLine(a,s,u,l,n,o)),0!==i}},{key:"getTextWidth",value:function(t,e){var r=t+":"+e;if(this._textWidthCache[r])return this._textWidthCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e);for(var n=0,o=0,i=(t=(t+"").split("\n")).length;o<i;o++)n=Math.max(this._ctx.measureText(t[o]).width,n);return this._ctx.restore(),this._textWidthCache[r]=n,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),n}},{key:"getTextHeight",value:function(t,e){var r=t+":"+e;if(this._textHeightCache[r])return this._textHeightCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e),t=(t+"").split("\n");var n=(this._ctx.measureText("ZH").width+2)*t.length;return this._ctx.restore(),this._textHeightCache[r]=n,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),n}}])&&qr(e.prototype,r),n&&qr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Wr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Yr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.util=new Fr,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Color"}var e,r,n;return e=t,(r=[{key:"customPalette",value:function(t){this.palette=t}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(t,e){return t|=0,(e=e||this.palette)[t%e.length]}},{key:"customHighlight",value:function(t){this.highlightColor=t}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(t,e,r,n,o,i,a){var s=this.util;this._ctx||(this._ctx=s.getContext());for(var u=this._ctx.createRadialGradient(t,e,r,n,o,i),l=0,c=a.length;l<c;l++)u.addColorStop(a[l][0],a[l][1]);return u.__nonRecursion=!0,u}},{key:"getLinearGradient",value:function(t,e,r,n,o){var i=this.util;this._ctx||(this._ctx=i.getContext());for(var a=this._ctx.createLinearGradient(t,e,r,n),s=0,u=o.length;s<u;s++)a.addColorStop(o[s][0],o[s][1]);return a.__nonRecursion=!0,a}},{key:"getStepColors",value:function(t,e,r){t=this.toRGBA(t),e=this.toRGBA(e),t=this.getData(t);for(var n=[],o=((e=this.getData(e))[0]-t[0])/r,i=(e[1]-t[1])/r,a=(e[2]-t[2])/r,s=(e[3]-t[3])/r,u=0,l=t[0],c=t[1],f=t[2],h=t[3];u<r;u++)n[u]=this.toColor([this.adjust(Math.floor(l),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(f),[0,255]),h.toFixed(4)-0],"rgba"),l+=o,c+=i,f+=a,h+=s;return l=e[0],c=e[1],f=e[2],h=e[3],n[u]=this.toColor([l,c,f,h],"rgba"),n}},{key:"getGradientColors",value:function(t,e){var r=[],n=t.length;if(void 0===e&&(e=20),1===n)r=this.getStepColors(t[0],t[0],e);else if(n>1)for(var o=0,i=n-1;o<i;o++){var a=this.getStepColors(t[o],t[o+1],e);o<i-1&&a.pop(),r=r.concat(a)}return r}},{key:"toColor",value:function(t,e){if(e=e||"rgb",t&&(3===t.length||4===t.length)){if(t=this.map(t,function(t){return t>1?Math.ceil(t):t}),e.indexOf("hex")>-1)return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1);if(e.indexOf("hs")>-1){var r=this.map(t.slice(1,3),function(t){return t+"%"});t[1]=r[0],t[2]=r[1]}return e.indexOf("a")>-1?(3===t.length&&t.push(1),t[3]=this.adjust(t[3],[0,1]),e+"("+t.slice(0,4).join(",")+")"):e+"("+t.slice(0,3).join(",")+")"}}},{key:"toArray",value:function(t){(t=this.trim(t)).indexOf("rgba")<0&&(t=this.toRGBA(t));var e=[],r=0;return t.replace(/[\d.]+/g,function(t){r<3?t|=0:t=+t,e[r++]=t}),e}},{key:"convert",value:function(t,e){if(!this.isCalculableColor(t))return t;var r=this.getData(t),n=r[3];return void 0===n&&(n=1),t.indexOf("hsb")>-1?r=this._HSV_2_RGB(r):t.indexOf("hsl")>-1&&(r=this._HSL_2_RGB(r)),e.indexOf("hsb")>-1||e.indexOf("hsv")>-1?r=this._RGB_2_HSB(r):e.indexOf("hsl")>-1&&(r=this._RGB_2_HSL(r)),r[3]=n,this.toColor(r,e)}},{key:"toRGBA",value:function(t){return this.convert(t,"rgba")}},{key:"toRGB",value:function(t){return this.convert(t,"rgb")}},{key:"toHex",value:function(t){return this.convert(t,"hex")}},{key:"toHSVA",value:function(t){return this.convert(t,"hsva")}},{key:"toHSV",value:function(t){return this.convert(t,"hsv")}},{key:"toHSBA",value:function(t){return this.convert(t,"hsba")}},{key:"toHSB",value:function(t){return this.convert(t,"hsb")}},{key:"toHSLA",value:function(t){return this.convert(t,"hsla")}},{key:"toHSL",value:function(t){return this.convert(t,"hsl")}},{key:"toName",value:function(t){for(var e in this._nameColors)if(this.toHex(this._nameColors[e])===this.toHex(t))return e;return null}},{key:"trim",value:function(t){return String(t).replace(/\s+/g,"")}},{key:"normalize",value:function(t){if(this._nameColors[t]&&(t=this._nameColors[t]),t=(t=this.trim(t)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(t)){var e=(3840&(t=parseInt(t.slice(1),16)))<<8,r=(240&t)<<4,n=15&t;t="#"+((1<<24)+(e<<4)+e+(r<<4)+r+(n<<4)+n).toString(16).slice(1)}return t}},{key:"lift",value:function(t,e){if(!this.isCalculableColor(t))return t;var r=e>0?1:-1;void 0===e&&(e=0),e=Math.abs(e)>1?1:Math.abs(e),t=this.toRGB(t);for(var n=this.getData(t),o=0;o<3;o++)n[o]=1===r?n[o]*(1-e)|0:(255-n[o])*e+n[o]|0;return"rgb("+n.join(",")+")"}},{key:"reverse",value:function(t){if(!this.isCalculableColor(t))return t;var e=this.getData(this.toRGBA(t));return e=this.map(e,function(t){return 255-t}),this.toColor(e,"rgb")}},{key:"mix",value:function(t,e,r){if(!this.isCalculableColor(t)||!this.isCalculableColor(e))return t;void 0===r&&(r=.5);for(var n=2*(r=1-this.adjust(r,[0,1]))-1,o=this.getData(this.toRGBA(t)),i=this.getData(this.toRGBA(e)),a=o[3]-i[3],s=((n*a==-1?n:(n+a)/(1+n*a))+1)/2,u=1-s,l=[],c=0;c<3;c++)l[c]=o[c]*s+i[c]*u;var f=o[3]*r+i[3]*(1-r);return f=Math.max(0,Math.min(1,f)),1===o[3]&&1===i[3]?this.toColor(l,"rgb"):(l[3]=f,this.toColor(l,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(e){var r,n,o=(e=this.normalize(e)).match(this.colorRegExp);if(null===o)throw new Error("The color format error");var i,a=[];if(o[2])i=[(r=o[2].replace("#","").split(""))[0]+r[1],r[2]+r[3],r[4]+r[5]],a=this.map(i,function(e){return t.prototype.adjust.call(this,parseInt(e,16),[0,255])});else if(o[4]){var s=o[4].split(",");n=s[3],i=s.slice(0,3),a=this.map(i,function(e){return e=Math.floor(e.indexOf("%")>0?2.55*parseInt(e,0):e),t.prototype.adjust.call(this,e,[0,255])}),void 0!==n&&a.push(this.adjust(parseFloat(n),[0,1]))}else if(o[5]||o[6]){var u=(o[5]||o[6]).split(","),l=parseInt(u[0],0)/360,c=u[1],f=u[2];n=u[3],(a=this.map([c,f],function(e){return t.prototype.adjust.call(this,parseFloat(e)/100,[0,1])})).unshift(l),void 0!==n&&a.push(this.adjust(parseFloat(n),[0,1]))}return a}},{key:"alpha",value:function(t,e){if(!this.isCalculableColor(t))return t;null===e&&(e=1);var r=this.getData(this.toRGBA(t));return r[3]=this.adjust(Number(e).toFixed(4),[0,1]),this.toColor(r,"rgba")}},{key:"map",value:function(t,e){if("function"!=typeof e)throw new TypeError;for(var r=t?t.length:0,n=0;n<r;n++)t[n]=e(t[n]);return t}},{key:"adjust",value:function(t,e){return t<=e[0]?t=e[0]:t>=e[1]&&(t=e[1]),t}},{key:"isCalculableColor",value:function(t){return t instanceof Array||"string"==typeof t}},{key:"_HSV_2_RGB",value:function(t){var e,r,n,o=t[0],i=t[1],a=t[2];if(0===i)e=255*a,r=255*a,n=255*a;else{var s=6*o;6===s&&(s=0);var u=0|s,l=a*(1-i),c=a*(1-i*(s-u)),f=a*(1-i*(1-(s-u))),h=0,p=0,y=0;0===u?(h=a,p=f,y=l):1===u?(h=c,p=a,y=l):2===u?(h=l,p=a,y=f):3===u?(h=l,p=c,y=a):4===u?(h=f,p=l,y=a):(h=a,p=l,y=c),e=255*h,r=255*p,n=255*y}return[e,r,n]}},{key:"_HSL_2_RGB",value:function(t){var e,r,n,o=t[0],i=t[1],a=t[2];if(0===i)e=255*a,r=255*a,n=255*a;else{var s,u=2*a-(s=a<.5?a*(1+i):a+i-i*a);e=255*this._HUE_2_RGB(u,s,o+1/3),r=255*this._HUE_2_RGB(u,s,o),n=255*this._HUE_2_RGB(u,s,o-1/3)}return[e,r,n]}},{key:"_HUE_2_RGB",value:function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),6*r<1?t+6*(e-t)*r:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}},{key:"_RGB_2_HSB",value:function(t){var e,r,n=t[0]/255,o=t[1]/255,i=t[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),u=s-a,l=s;if(0===u)e=0,r=0;else{r=u/s;var c=((s-n)/6+u/2)/u,f=((s-o)/6+u/2)/u,h=((s-i)/6+u/2)/u;n===s?e=h-f:o===s?e=1/3+c-h:i===s&&(e=2/3+f-c),e<0&&(e+=1),e>1&&(e-=1)}return[e*=360,r*=100,l*=100]}},{key:"_RGB_2_HSL",value:function(t){var e,r,n=t[0]/255,o=t[1]/255,i=t[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),u=s-a,l=(s+a)/2;if(0===u)e=0,r=0;else{r=l<.5?u/(s+a):u/(2-s-a);var c=((s-n)/6+u/2)/u,f=((s-o)/6+u/2)/u,h=((s-i)/6+u/2)/u;n===s?e=h-f:o===s?e=1/3+c-h:i===s&&(e=2/3+f-c),e<0&&(e+=1),e>1&&(e-=1)}return[e*=360,r*=100,l*=100]}}])&&Wr(e.prototype,r),n&&Wr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Xr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Qr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.ComputeBoundingBox"}var e,r,n;return e=t,(r=[{key:"computeBoundingBox",value:function(t,e,r){if(0!==t.length){for(var n=t[0][0],o=t[0][0],i=t[0][1],a=t[0][1],s=1;s<t.length;s++){var u=t[s];u[0]<n&&(n=u[0]),u[0]>o&&(o=u[0]),u[1]<i&&(i=u[1]),u[1]>a&&(a=u[1])}e[0]=n,e[1]=i,r[0]=o,r[1]=a}}},{key:"cubeBezier",value:function(t,e,r,n,o,i){var a=new zr,s=[];a.cubicExtrema(t[0],e[0],r[0],n[0],s);for(var u=0;u<s.length;u++)s[u]=a.cubicAt(t[0],e[0],r[0],n[0],s[u]);var l=[];a.cubicExtrema(t[1],e[1],r[1],n[1],l);for(var c=0;c<l.length;c++)l[c]=a.cubicAt(t[1],e[1],r[1],n[1],l[c]);s.push(t[0],n[0]),l.push(t[1],n[1]);var f=Math.min.apply(null,s),h=Math.max.apply(null,s),p=Math.min.apply(null,l),y=Math.max.apply(null,l);o[0]=f,o[1]=p,i[0]=h,i[1]=y}},{key:"quadraticBezier",value:function(t,e,r,n,o){var i=new zr,a=i.quadraticExtremum(t[0],e[0],r[0]),s=i.quadraticExtremum(t[1],e[1],r[1]),u=1-(a=Math.max(Math.min(a,1),0)),l=1-(s=Math.max(Math.min(s,1),0)),c=u*u*t[0]+2*u*a*e[0]+a*a*r[0],f=u*u*t[1]+2*u*a*e[1]+a*a*r[1],h=l*l*t[0]+2*l*s*e[0]+s*s*r[0],p=l*l*t[1]+2*l*s*e[1]+s*s*r[1];n[0]=Math.min(t[0],r[0],c,h),n[1]=Math.min(t[1],r[1],f,p),o[0]=Math.max(t[0],r[0],c,h),o[1]=Math.max(t[1],r[1],f,p)}},{key:"arc",value:function(t,e,r,n,o,i,a,s){var u=new Jr,l=u.create(),c=u.create(),f=u.create();if(l[0]=Math.cos(n)*r+t,l[1]=Math.sin(n)*r+e,c[0]=Math.cos(o)*r+t,c[1]=Math.sin(o)*r+e,u.min(a,l,c),u.max(s,l,c),(n%=2*Math.PI)<0&&(n+=2*Math.PI),(o%=2*Math.PI)<0&&(o+=2*Math.PI),n>o&&!i?o+=2*Math.PI:n<o&&i&&(n+=2*Math.PI),i){var h=o;o=n,n=h}for(var p=0;p<o;p+=Math.PI/2)p>n&&(f[0]=Math.cos(p)*r+t,f[1]=Math.sin(p)*r+e,u.min(a,f,a),u.max(s,f,s))}}])&&Xr(e.prototype,r),n&&Xr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Zr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Kr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Env";var e,r,n,o,i,a,s,u,l,c,f,h,p,y,d,b,v,m,g,w,O,S=this;return e=navigator.userAgent,r=S.os={},n=S.browser={},o=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=e.match(/(Android);?[\s\/]+([\d.]+)?/),a=e.match(/(iPad).*OS\s([\d_]+)/),s=e.match(/(iPod)(.*OS\s([\d_]+))?/),u=!a&&e.match(/(iPhone\sOS)\s([\d_]+)/),l=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=l&&e.match(/TouchPad/),f=e.match(/Kindle\/([\d.]+)/),h=e.match(/Silk\/([\d._]+)/),p=e.match(/(BlackBerry).*Version\/([\d.]+)/),y=e.match(/(BB10).*Version\/([\d.]+)/),d=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),b=e.match(/PlayBook/),v=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),m=e.match(/Firefox\/([\d.]+)/),g=e.match(/MSIE ([\d.]+)/),w=o&&e.match(/Mobile\//)&&!v,O=e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!v,(n.webkit=!!o)&&(n.version=o[1]),i&&(r.android=!0,r.version=i[2]),u&&!s&&(r.ios=r.iphone=!0,r.version=u[2].replace(/_/g,".")),a&&(r.ios=r.ipad=!0,r.version=a[2].replace(/_/g,".")),s&&(r.ios=r.ipod=!0,r.version=s[3]?s[3].replace(/_/g,"."):null),l&&(r.webos=!0,r.version=l[2]),c&&(r.touchpad=!0),p&&(r.blackberry=!0,r.version=p[2]),y&&(r.bb10=!0,r.version=y[2]),d&&(r.rimtabletos=!0,r.version=d[2]),b&&(n.playbook=!0),f&&(r.kindle=!0,r.version=f[1]),h&&(n.silk=!0,n.version=h[1]),!h&&r.android&&e.match(/Kindle Fire/)&&(n.silk=!0),v&&(n.chrome=!0,n.version=v[1]),m&&(n.firefox=!0,n.version=m[1]),g&&(n.ie=!0,n.version=g[1]),w&&(e.match(/Safari/)||r.ios)&&(n.safari=!0),O&&(n.webview=!0),g&&(n.ie=!0,n.version=g[1]),r.tablet=!!(a||b||i&&!e.match(/Mobile/)||m&&e.match(/Tablet/)||g&&!e.match(/Phone/)&&e.match(/Touch/)),r.phone=!(r.tablet||r.ipod||!(i||u||l||p||y||v&&e.match(/Android/)||v&&e.match(/CriOS\/([\d.]+)/)||m&&e.match(/Mobile/)||g&&e.match(/Touch/))),{browser:n,os:r,canvasSupported:!!document.createElement("canvas").getContext}}var e,r,n;return e=t,(r=[{key:"destory",value:function(){return!0}}])&&Zr(e.prototype,r),n&&Zr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var tn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stop="function"==typeof window.addEventListener?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Event"}var e,r,n;return e=t,(r=[{key:"getX",value:function(t){return void 0!==t.zrenderX&&t.zrenderX||void 0!==t.offsetX&&t.offsetX||void 0!==t.layerX&&t.layerX||void 0!==t.clientX&&t.clientX}},{key:"getY",value:function(t){return void 0!==t.zrenderY&&t.zrenderY||void 0!==t.offsetY&&t.offsetY||void 0!==t.layerY&&t.layerY||void 0!==t.clientY&&t.clientY}},{key:"getDelta",value:function(t){return void 0!==t.zrenderDelta&&t.zrenderDelta||void 0!==t.wheelDelta&&t.wheelDelta||void 0!==t.detail&&-t.detail}}])&&$r(e.prototype,r),n&&$r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function en(t){"@babel/helpers - typeof";return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var nn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Http"}var e,r,n;return e=t,(r=[{key:"get",value:function(t,e,r){if("object"===en(t)){var n=t;t=n.url,e=n.onsuccess,r=n.onerror}var o=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open("GET",t,!0),o.onreadystatechange=function(){4==o.readyState&&(o.status>=200&&o.status<300||304===o.status?e&&e(o.responseText):r&&r(),o.onreadystatechange=new Function,o=null)},o.send(null)}}])&&rn(e.prototype,r),n&&rn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function on(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var an=function(t,e,r){return e&&on(t.prototype,e),r&&on(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)});function sn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}an.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},an.catchBrushException=!1,an.debugMode=0;var un=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Log",function(){if(0!=+an.debugMode)if(1==+an.debugMode)for(var t in arguments)throw new Error(arguments[t]);else if(+an.debugMode>1)for(var e in arguments)console.log(arguments[e])}}var e,r,n;return e=t,(r=[{key:"destory",value:function(){return!0}}])&&sn(e.prototype,r),n&&sn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ln(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var cn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._radians=window.Math.PI/180,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Math"}var e,r,n;return e=t,(r=[{key:"sin",value:function(t,e){return window.Math.sin(e?t*this._radians:t)}},{key:"cos",value:function(t,e){return window.Math.cos(e?t*this._radians:t)}},{key:"degreeToRadian",value:function(t){return t*this._radians}},{key:"radianToDegree",value:function(t){return t/this._radians}}])&&ln(e.prototype,r),n&&ln(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function fn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var hn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Matrix"}var e,r,n;return e=t,(r=[{key:"create",value:function(){var t=new(0,this.ArrayCtor)(6);return this.identity(t),t}},{key:"identity",value:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}},{key:"mul",value:function(t,e,r){return t[0]=e[0]*r[0]+e[2]*r[1],t[1]=e[1]*r[0]+e[3]*r[1],t[2]=e[0]*r[2]+e[2]*r[3],t[3]=e[1]*r[2]+e[3]*r[3],t[4]=e[0]*r[4]+e[2]*r[5]+e[4],t[5]=e[1]*r[4]+e[3]*r[5]+e[5],t}},{key:"translate",value:function(t,e,r){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+r[0],t[5]=e[5]+r[1],t}},{key:"rotate",value:function(t,e,r){var n=e[0],o=e[2],i=e[4],a=e[1],s=e[3],u=e[5],l=Math.sin(r),c=Math.cos(r);return t[0]=n*c+a*l,t[1]=-n*l+a*c,t[2]=o*c+s*l,t[3]=-o*l+c*s,t[4]=c*i+l*u,t[5]=c*u-l*i,t}},{key:"scale",value:function(t,e,r){var n=r[0],o=r[1];return t[0]=e[0]*n,t[1]=e[1]*o,t[2]=e[2]*n,t[3]=e[3]*o,t[4]=e[4]*n,t[5]=e[5]*o,t}},{key:"invert",value:function(t,e){var r=e[0],n=e[2],o=e[4],i=e[1],a=e[3],s=e[5],u=r*a-i*n;return u?(u=1/u,t[0]=a*u,t[1]=-i*u,t[2]=-n*u,t[3]=r*u,t[4]=(n*s-a*o)*u,t[5]=(i*o-r*s)*u,t):null}},{key:"mulVector",value:function(t,e,r){var n=e[0],o=e[2],i=e[4],a=e[1],s=e[3],u=e[5];return t[0]=r[0]*n+r[1]*o+i,t[1]=r[0]*a+r[1]*s+u,t}}])&&fn(e.prototype,r),n&&fn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var yn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"SUtil_smoothBezier",value:function(e,r,n,o,i){i&&2===i.length||(i=[0,0]);var a,s,u=i,l=[],c=[],f=[],h=[],p=!!o;if(p){a=[1/0,1/0],s=[-1/0,-1/0];for(var y=e.length,d=0;d<y;d++)t.Util_vector.min(a,a,[e[d][0]+u[0],e[d][1]+u[1]]),t.Util_vector.max(s,s,[e[d][0]+u[0],e[d][1]+u[1]]);t.Util_vector.min(a,a,o[0]),t.Util_vector.max(s,s,o[1])}for(var b=e.length,v=0;v<b;v++){var m=[e[v][0]+u[0],e[v][1]+u[1]],g=void 0,w=void 0;if(n)g=[e[v?v-1:b-1][0]+u[0],e[v?v-1:b-1][1]+u[1]],w=[e[(v+1)%b][0]+u[0],e[(v+1)%b][1]+u[1]];else{if(0===v||v===b-1){l.push([e[v][0]+u[0],e[v][1]+u[1]]);continue}g=[e[v-1][0]+u[0],e[v-1][1]+u[1]],w=[e[v+1][0]+u[0],e[v+1][1]+u[1]]}t.Util_vector.sub(c,w,g),t.Util_vector.scale(c,c,r);var O=t.Util_vector.distance(m,g),S=t.Util_vector.distance(m,w),_=O+S;0!==_&&(O/=_,S/=_),t.Util_vector.scale(f,c,-O),t.Util_vector.scale(h,c,S);var P=t.Util_vector.add([],m,f),x=t.Util_vector.add([],m,h);p&&(t.Util_vector.max(P,P,a),t.Util_vector.min(P,P,s),t.Util_vector.max(x,x,a),t.Util_vector.min(x,x,s)),l.push(P),l.push(x)}return n&&l.push(l.shift()),l}},{key:"SUtil_smoothSpline",value:function(e,r,n,o){o&&2===o.length||(o=[0,0]);for(var i=o,a=e.length,s=[],u=0,l=1;l<a;l++)u+=t.Util_vector.distance([e[l-1][0]+i[0],e[l-1][1]+i[1]],[e[l][0]+i[0],e[l][1]+i[1]]);var c=u/5;c=c<a?a:c;for(var f=0;f<c;f++){var h=f/(c-1)*(r?a:a-1),p=Math.floor(h),y=h-p,d=void 0,b=[e[p%a][0]+i[0],e[p%a][1]+i[1]],v=void 0,m=void 0;r?(d=[e[(p-1+a)%a][0]+i[0],e[(p-1+a)%a][1]+i[1]],v=[e[(p+1)%a][0]+i[0],e[(p+1)%a][1]+i[1]],m=[e[(p+2)%a][0]+i[0],e[(p+2)%a][1]+i[1]]):(d=[e[0===p?p:p-1][0]+i[0],e[0===p?p:p-1][1]+i[1]],v=[e[p>a-2?a-1:p+1][0]+i[0],e[p>a-2?a-1:p+1][1]+i[1]],m=[e[p>a-3?a-1:p+2][0]+i[0],e[p>a-3?a-1:p+2][1]+i[1]]);var g=y*y,w=y*g;s.push([O(d[0],b[0],v[0],m[0],y,g,w),O(d[1],b[1],v[1],m[1],y,g,w)])}return s;function O(t,e,r,n,o,i,a){var s=.5*(r-t),u=.5*(n-e);return(2*(e-r)+s+u)*a+(-3*(e-r)-2*s-u)*i+s*o+e}}},{key:"SUtil_dashedLineTo",value:function(t,e,r,n,o,i,a){var s=[5,5];if(i="number"!=typeof i?5:i,t.setLineDash)return s[0]=i,s[1]=i,a&&a instanceof Array?t.setLineDash(a):t.setLineDash(s),t.moveTo(e,r),void t.lineTo(n,o);var u=n-e,l=o-r,c=Math.floor(Math.sqrt(u*u+l*l)/i);u/=c,l/=c;for(var f=!0,h=0;h<c;++h)f?t.moveTo(e,r):t.lineTo(e,r),f=!f,e+=u,r+=l;t.lineTo(n,o)}}],(r=null)&&pn(e.prototype,r),n&&pn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}yn.Util_area=new Hr,yn.Util_color=new Yr,yn.Util_computeBoundingBox=new Qr,yn.Util_curve=new zr,yn.Util_env=new Kr,yn.Util_event=new tn,yn.Util_http=new nn,yn.Util_log=new un,yn.Util_math=new cn,yn.Util_matrix=new hn,yn.Util=new Fr,yn.Util_vector=new Jr;var bn=function(){function t(){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="SuperMap.LevelRenderer.Transformable",this.lookAt=(e=yn.Util_vector.create(),function(t){this.transform||(this.transform=yn.Util_matrix.create());var r=this.transform;function n(t){return t>-5e-5&&t<5e-5}yn.Util_vector.sub(e,t,this.position),n(e[0])&&n(e[1])||(yn.Util_vector.normalize(e,e),r[2]=e[0]*this.scale[1],r[3]=e[1]*this.scale[1],r[0]=e[1]*this.scale[0],r[1]=-e[0]*this.scale[0],r[4]=this.position[0],r[5]=this.position[1],this.decomposeTransform())})}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function t(t){return t>5e-5||t<-5e-5}this.needLocalTransform=t(this.rotation[0])||t(this.position[0])||t(this.position[1])||t(this.scale[0]-1)||t(this.scale[1]-1)}},{key:"updateTransform",value:function(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var t=[0,0],e=this.transform||yn.Util_matrix.create();if(yn.Util_matrix.identity(e),this.needLocalTransform){if(o(this.scale[0])||o(this.scale[1])){t[0]=-this.scale[2]||0,t[1]=-this.scale[3]||0;var r=o(t[0])||o(t[1]);r&&yn.Util_matrix.translate(e,e,t),yn.Util_matrix.scale(e,e,this.scale),r&&(t[0]=-t[0],t[1]=-t[1],yn.Util_matrix.translate(e,e,t))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){t[0]=-this.rotation[1]||0,t[1]=-this.rotation[2]||0;var n=o(t[0])||o(t[1]);n&&yn.Util_matrix.translate(e,e,t),yn.Util_matrix.rotate(e,e,this.rotation[0]),n&&(t[0]=-t[0],t[1]=-t[1],yn.Util_matrix.translate(e,e,t))}}else 0!=+this.rotation&&yn.Util_matrix.rotate(e,e,this.rotation);(o(this.position[0])||o(this.position[1]))&&yn.Util_matrix.translate(e,e,this.position)}this.transform=e,this.parent&&this.parent.needTransform&&(this.needLocalTransform?yn.Util_matrix.mul(this.transform,this.parent.transform,this.transform):yn.Util_matrix.copy(this.transform,this.parent.transform))}function o(t){return t>5e-5||t<-5e-5}}},{key:"setTransform",value:function(t){if(this.needTransform){var e=this.transform;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}}},{key:"decomposeTransform",value:function(){if(this.transform){var t=this.transform,e=t[0]*t[0]+t[1]*t[1],r=this.position,n=this.scale,o=this.rotation;a(e-1)&&(e=Math.sqrt(e));var i=t[2]*t[2]+t[3]*t[3];a(i-1)&&(i=Math.sqrt(i)),r[0]=t[4],r[1]=t[5],n[0]=e,n[1]=i,n[2]=n[3]=0,o[0]=Math.atan2(-t[1]/i,t[0]/e),o[1]=o[2]=0}function a(t){return t>5e-5||t<-5e-5}}}])&&dn(e.prototype,r),n&&dn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function vn(t){"@babel/helpers - typeof";return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function gn(){return(gn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_n(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function wn(t,e){return(wn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function On(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=_n(t);if(e){var o=_n(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===vn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Sn(t)}(this,r)}}function Sn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _n(t){return(_n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wn(t,e)}(i,h(Gr,bn));var e,r,n,o=On(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t),t=t||{},e.id=null,e.type="group",e.clipShape=null,e._children=[],e._storage=null,e.__dirty=!0,e.ignore=!1,C.extend(Sn(e),t),e.id=e.id||C.createUniqueID("smShapeGroup_"),e.CLASS_NAME="SuperMap.LevelRenderer.Group",e}return e=i,(r=[{key:"destroy",value:function(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,gn(_n(i.prototype),"destroy",this).call(this)}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(t){return this._children[t]}},{key:"addChild",value:function(t){t!=this&&t.parent!=this&&(t.parent&&t.parent.removeChild(t),this._children.push(t),t.parent=this,this._storage&&this._storage!==t._storage&&(this._storage.addToMap(t),t instanceof i&&t.addChildrenToStorage(this._storage)))}},{key:"removeChild",value:function(t){var e=C.indexOf(this._children,t);this._children.splice(e,1),t.parent=null,this._storage&&(this._storage.delFromMap(t.id),t instanceof i&&t.delChildrenFromStorage(this._storage))}},{key:"eachChild",value:function(t,e){for(var r=!!e,n=0;n<this._children.length;n++){var o=this._children[n];r?t.call(e,o):t(o)}}},{key:"traverse",value:function(t,e){for(var r=!!e,n=0;n<this._children.length;n++){var o=this._children[n];r?t.call(e,o):t(o),"group"===o.type&&o.traverse(t,e)}}},{key:"addChildrenToStorage",value:function(t){for(var e=0;e<this._children.length;e++){var r=this._children[e];t.addToMap(r),"group"===r.type&&r.addChildrenToStorage(t)}}},{key:"delChildrenFromStorage",value:function(t){for(var e=0;e<this._children.length;e++){var r=this._children[e];t.delFromMap(r.id),"group"===r.type&&r.delChildrenFromStorage(t)}}},{key:"modSelf",value:function(){this.__dirty=!0}}])&&mn(e.prototype,r),n&&mn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function xn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var kn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="SuperMap.LevelRenderer.Storage"}var e,r,n;return e=t,n=[{key:"shapeCompareFunc",value:function(t,e){return t.zlevel==e.zlevel?t.z==e.z?t.__renderidx-e.__renderidx:t.z-e.z:t.zlevel-e.zlevel}}],(r=[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(t,e){if(!e){e={hover:!1,normal:"down",update:!1}}if(e.hover)for(var r=0,n=this._hoverElements.length;r<n;r++){var o=this._hoverElements[r];if(o.updateTransform(),t(o))return this}switch(e.update&&this.updateShapeList(),e.normal){case"down":for(var i=this._shapeList.length;i--;)if(t(this._shapeList[i]))return this;break;default:for(var a=0,s=this._shapeList.length;a<s;a++)if(t(this._shapeList[a]))return this}return this}},{key:"getHoverShapes",value:function(e){for(var r=[],n=this._hoverElements.length,o=0;o<n;o++){r.push(this._hoverElements[o]);var i=this._hoverElements[o].hoverConnect;if(i)for(var a,s=0,u=(i=i instanceof Array?i:[i]).length;s<u;s++)(a=i[s].id?i[s]:this.get(i[s]))&&r.push(a)}if(r.sort(t.shapeCompareFunc),e)for(var l=0,c=r.length;l<c;l++)r[l].updateTransform();return r}},{key:"getShapeList",value:function(t){return t&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var e=this._roots.length,r=0;r<e;r++){var n=this._roots[r];this._updateAndAddShape(n)}this._shapeList.length=this._shapeListOffset;for(var o=this._shapeList.length,i=0;i<o;i++)this._shapeList[i].__renderidx=i;this._shapeList.sort(t.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(t,e){if(!t.ignore)if(t.updateTransform(),"group"==t.type){t.clipShape&&(t.clipShape.parent=t,t.clipShape.updateTransform(),e?(e=e.slice()).push(t.clipShape):e=[t.clipShape]);for(var r=0;r<t._children.length;r++){var n=t._children[r];n.__dirty=t.__dirty||n.__dirty,this._updateAndAddShape(n,e)}t.__dirty=!1}else t.__clipShapes=e,this._shapeList[this._shapeListOffset++]=t}},{key:"mod",value:function(t,e){var r=this._elements[t];if(r&&(r.modSelf(),e))if(e.parent||e._storage||e.__startClip){var n={};for(var o in e)"parent"!=o&&"_storage"!=o&&"__startClip"!=o&&e.hasOwnProperty(o)&&(n[o]=e[o]);(new Fr).merge(r,n,!0)}else(new Fr).merge(r,e,!0);return this}},{key:"drift",value:function(t,e,r){var n=this._elements[t];return n&&(n.needTransform=!0,"horizontal"===n.draggable?r=0:"vertical"===n.draggable&&(e=0),(!n.ondrift||n.ondrift&&!n.ondrift(e,r))&&n.drift(e,r)),this}},{key:"addHover",value:function(t){return t.updateNeedTransform(),this._hoverElements.push(t),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return this._hoverElements.length>0}},{key:"addRoot",value:function(t){t instanceof Pn&&t.addChildrenToStorage(this),this.addToMap(t),this._roots.push(t)}},{key:"delRoot",value:function(t){if(void 0===t){for(var e=0;e<this._roots.length;e++){var r=this._roots[e];r instanceof Pn&&r.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(t instanceof Array)for(var n=t.length,o=0;o<n;o++)this.delRoot(t[o]);else{var i;i="string"==typeof t?this._elements[t]:t;var a=(new Fr).indexOf(this._roots,i);a>=0&&(this.delFromMap(i.id),this._roots.splice(a,1),i instanceof Pn&&i.delChildrenFromStorage(this))}}},{key:"addToMap",value:function(t){return t instanceof Pn&&(t._storage=this),t.modSelf(),this._elements[t.id]=t,this}},{key:"get",value:function(t){return this._elements[t]}},{key:"delFromMap",value:function(t){var e=this._elements[t];return e&&(delete this._elements[t],e instanceof Pn&&(e._storage=null)),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}])&&xn(e.prototype,r),n&&xn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function jn(t){"@babel/helpers - typeof";return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function En(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Tn(t,e){return(Tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Cn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Rn(t);if(e){var o=Rn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===jn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Rn(t){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var An=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tn(t,e)}(i,m);var e,r,n,o=Cn(i);function i(t,e,r,n){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this,t,e,r,n)).x=t,a.y=e,a.width=r,a.height=n,a.CLASS_NAME="SuperMap.Geometry.Rectangle",a.geometryType="Rectangle",a}return e=i,(r=[{key:"calculateBounds",value:function(){this.bounds=new I(this.x,this.y,this.x+this.width,this.y+this.height)}},{key:"getArea",value:function(){return this.width*this.height}}])&&En(e.prototype,r),n&&En(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Mn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ln=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=e||"",this.name=r||"token",this.CLASS_NAME="SuperMap.Credential"}var e,r,n;return e=t,(r=[{key:"getUrlParameters",value:function(){return this.name+"="+this.value}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){this.value=null,this.name=null}}])&&Mn(e.prototype,r),n&&Mn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();Ln.CREDENTIAL=null;var Nn={toISOString:function(){if("toISOString"in Date.prototype)return function(t){return t.toISOString()};var t=function(t,e){for(var r=t+"";r.length<e;)r="0"+r;return r};return function(e){return isNaN(e.getTime())?"Invalid Date":e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1,2)+"-"+t(e.getUTCDate(),2)+"T"+t(e.getUTCHours(),2)+":"+t(e.getUTCMinutes(),2)+":"+t(e.getUTCSeconds(),2)+"."+t(e.getUTCMilliseconds(),3)+"Z"}}(),parse:function(t){var e,r=t.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/);if(r&&(r[1]||r[7])){var n=parseInt(r[1],10)||0,o=parseInt(r[2],10)-1||0,i=parseInt(r[3],10)||1;e=new Date(Date.UTC(n,o,i));var a=r[7];if(a){var s=parseInt(r[4],10),u=parseInt(r[5],10),l=parseFloat(r[6]),c=0|l,f=Math.round(1e3*(l-c));if(e.setUTCHours(s,u,c,f),"Z"!==a){var h=-1e3*(60*parseInt(a,10)*60+60*(parseInt(r[8],10)||0));e=new Date(e.getTime()+h)}}}else e=new Date("invalid");return e}},In={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(t){return t.target||t.srcElement},isSingleTouch:function(t){return t.touches&&1===t.touches.length},isMultiTouch:function(t){return t.touches&&t.touches.length>1},isLeftClick:function(t){return t.which&&1===t.which||t.button&&1===t.button},isRightClick:function(t){return t.which&&3===t.which||t.button&&2===t.button},stop:function(t,e){e||(t.preventDefault?t.preventDefault():t.returnValue=!1),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},findElement:function(t,e){for(var r=In.element(t);r.parentNode&&(!r.tagName||r.tagName.toUpperCase()!=e.toUpperCase());)r=r.parentNode;return r},observe:function(t,e,r,n){var o=C.getElement(t);if(n=n||!1,"keypress"===e&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.attachEvent)&&(e="keydown"),this.observers||(this.observers={}),!o._eventCacheID){var i="eventCacheID_";o.id&&(i=o.id+"_"+i),o._eventCacheID=C.createUniqueID(i)}var a=o._eventCacheID;this.observers[a]||(this.observers[a]=[]),this.observers[a].push({element:o,name:e,observer:r,useCapture:n}),o.addEventListener?"mousewheel"===e?o.addEventListener(e,r,{useCapture:n,passive:!1}):o.addEventListener(e,r,n):o.attachEvent&&o.attachEvent("on"+e,r)},stopObservingElement:function(t){var e=C.getElement(t)._eventCacheID;this._removeElementObservers(In.observers[e])},_removeElementObservers:function(t){if(t)for(var e=t.length-1;e>=0;e--){var r=t[e],n=new Array(r.element,r.name,r.observer,r.useCapture);In.stopObserving.apply(this,n)}},stopObserving:function(t,e,r,n){n=n||!1;var o=C.getElement(t),i=o._eventCacheID;"keypress"===e&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.detachEvent)&&(e="keydown");var a=!1,s=In.observers[i];if(s)for(var u=0;!a&&u<s.length;){var l=s[u];if(l.name===e&&l.observer===r&&l.useCapture===n){s.splice(u,1),0==s.length&&delete In.observers[i],a=!0;break}u++}return a&&(o.removeEventListener?o.removeEventListener(e,r,n):o&&o.detachEvent&&o.detachEvent("on"+e,r)),a},unloadCache:function(){if(In&&In.observers){for(var t in In.observers){var e=In.observers[t];In._removeElementObservers.apply(this,[e])}In.observers=!1}},CLASS_NAME:"SuperMap.Event"};function Dn(t){"@babel/helpers - typeof";return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}In.observe(window,"resize",In.unloadCache,!1);var Bn=function(){function t(e,r,n,o,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners={},this.object=e,this.element=null,this.eventTypes=[],this.eventHandler=null,this.fallThrough=o,this.includeXY=!1,this.extensions={},this.extensionCount={},this.clearMouseListener=null,C.extend(this,i),null!=n)for(var a=0,s=n.length;a<s;a++)this.addEventType(n[a]);null!=r&&this.attachToElement(r),this.CLASS_NAME="SuperMap.Events"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){for(var t in this.extensions)"boolean"!=typeof this.extensions[t]&&this.extensions[t].destroy();this.extensions=null,this.element&&(In.stopObservingElement(this.element),this.element.hasScrollEvent&&In.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}},{key:"addEventType",value:function(t){this.listeners[t]||(this.eventTypes.push(t),this.listeners[t]=[])}},{key:"attachToElement",value:function(t){this.element?In.stopObservingElement(this.element):(this.eventHandler=d.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=d.bind(this.clearMouseCache,this)),this.element=t;for(var e=0,r=this.BROWSER_EVENTS.length;e<r;e++){var n=this.BROWSER_EVENTS[e];this.addEventType(n),In.observe(t,n,this.eventHandler)}In.observe(t,"dragstart",In.stop)}},{key:"on",value:function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.register(e,t.scope,t[e])}},{key:"register",value:function(e,r,n,o){if(e in t&&!this.extensions[e]&&(this.extensions[e]=new t[e](this)),null!=n&&-1!==C.indexOf(this.eventTypes,e)){null==r&&(r=this.object);var i=this.listeners[e];i||(i=[],this.listeners[e]=i,this.extensionCount[e]=0);var a={obj:r,func:n};o?(i.splice(this.extensionCount[e],0,a),"object"===Dn(o)&&o.extension&&this.extensionCount[e]++):i.push(a)}}},{key:"registerPriority",value:function(t,e,r){this.register(t,e,r,!0)}},{key:"un",value:function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.unregister(e,t.scope,t[e])}},{key:"unregister",value:function(t,e,r){null==e&&(e=this.object);var n=this.listeners[t];if(null!=n)for(var o=0,i=n.length;o<i;o++)if(n[o].obj===e&&n[o].func===r){n.splice(o,1);break}}},{key:"remove",value:function(t){null!=this.listeners[t]&&(this.listeners[t]=[])}},{key:"triggerEvent",value:function(t,e){var r=this.listeners[t];if(r&&0!=r.length){var n;null==e&&(e={}),e.object=this.object,e.element=this.element,e.type||(e.type=t);for(var o=0,i=(r=r.slice()).length;o<i;o++){var a=r[o];if(void 0!=(n=a.func.apply(a.obj,[e]))&&!1===n)break}return this.fallThrough||In.stop(e,!0),n}}},{key:"handleBrowserEvent",value:function(t){var e=t.type,r=this.listeners[e];if(r&&0!=r.length){var n=t.touches;if(n&&n[0]){for(var o,i=0,a=0,s=n.length,u=0;u<s;++u)i+=(o=n[u]).clientX,a+=o.clientY;t.clientX=i/s,t.clientY=a/s}this.includeXY&&(t.xy=this.getMousePosition(t)),this.triggerEvent(e,t)}}},{key:"clearMouseCache",value:function(){this.element.scrolls=null,this.element.lefttop=null;var t=document.body;t&&(0==t.scrollTop&&0==t.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}},{key:"getMousePosition",value:function(t){if(this.includeXY?this.element.hasScrollEvent||(In.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var e=C.getViewportElement();this.element.scrolls=[e.scrollLeft,e.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=C.pagePosition(this.element)),new c(t.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],t.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}])&&Fn(e.prototype,r),n&&Fn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Gn(t){"@babel/helpers - typeof";return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Un(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Jn(t,e){return(Jn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Vn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=qn(t);if(e){var o=qn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Gn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zn(t)}(this,r)}}function zn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qn(t){return(qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Bn.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"];var Hn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jn(t,e)}(i,yr);var e,r,n,o=Vn(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).CLASS_NAME="SuperMap.Geometry3D",e.position=null,e.rotationX=null,e.rotationY=null,e.rotationZ=null,e.scaleX=null,e.scaleY=null,e.scaleZ=null,C.extend(zn(e),t),e}return e=i,(r=[{key:"destroy",value:function(){this.position=null,this.rotationX=null,this.rotationY=null,this.rotationZ=null,this.scaleX=null,this.scaleY=null,this.scaleZ=null}}])&&Un(e.prototype,r),n&&Un(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Wn(t){"@babel/helpers - typeof";return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Xn(){return(Xn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$n(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Qn(t,e){return(Qn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Zn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=$n(t);if(e){var o=$n(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Wn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Kn(t)}(this,r)}}function Kn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $n(t){return($n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var to=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qn(t,e)}(i,h(Gr,bn));var e,r,n,o=Zn(i);function i(t){var e,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t),t=t||{},e.id=null,e.style={},e.highlightStyle=null,e.parent=null,e.__dirty=!0,e.__clipShapes=[],e.invisible=!1,e.ignore=!1,e.zlevel=0,e.draggable=!1,e.clickable=!1,e.hoverable=!0,e.z=0,e.refOriginalPosition=[0,0],e.refDataID=null,e.isHoverByRefDataID=!1,e.refDataHoverGroup=null,e.dataInfo=null,C.extend(Kn(e),t),e.id=e.id||C.createUniqueID("smShape_"),e.CLASS_NAME="SuperMap.LevelRenderer.Shape",e.getTansform=(r=[],function(t,e){var n=[t,e];return this.needTransform&&this.transform&&(yn.Util_matrix.invert(r,this.transform),yn.Util_matrix.mulVector(n,r,[t,e,1]),t==n[0]&&e==n[1]&&this.updateNeedTransform()),n}),e}return e=i,n=[{key:"_fillText",value:function(t,e,r,n,o,a,s){o&&(t.font=o),t.textAlign=a,t.textBaseline=s;var u=i._getTextRect(e,r,n,o,a,s);e=(e+"").split("\n");var l=yn.Util_area.getTextHeight("ZH",o);switch(s){case"top":n=u.y;break;case"bottom":n=u.y+l;break;default:n=u.y+l/2}for(var c=0,f=e.length;c<f;c++)t.fillText(e[c],r,n),n+=l}},{key:"_getTextRect",value:function(t,e,r,n,o,i){var a=yn.Util_area.getTextWidth(t,n),s=yn.Util_area.getTextHeight("ZH",n);switch(t=(t+"").split("\n"),o){case"end":case"right":e-=a;break;case"center":e-=a/2}switch(i){case"top":break;case"bottom":r-=s*t.length;break;default:r-=s*t.length/2}return{x:e,y:r,width:a,height:s*t.length}}}],(r=[{key:"destroy",value:function(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,Xn($n(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){var r=this.beforeBrush(t,e);switch(t.beginPath(),this.buildPath(t,r),r.brushType){case"both":this.setCtxGlobalAlpha(t,"fill",r),t.fill(),r.lineWidth>0&&(this.setCtxGlobalAlpha(t,"stroke",r),t.stroke()),this.setCtxGlobalAlpha(t,"reset",r);break;case"stroke":this.setCtxGlobalAlpha(t,"stroke",r),r.lineWidth>0&&t.stroke(),this.setCtxGlobalAlpha(t,"reset",r);break;default:this.setCtxGlobalAlpha(t,"fill",r),t.fill(),this.setCtxGlobalAlpha(t,"reset",r)}this.drawText(t,r,this.style),this.afterBrush(t)}},{key:"beforeBrush",value:function(t,e){var r=this.style;return this.brushTypeOnly&&(r.brushType=this.brushTypeOnly),e&&(r=this.getHighlightStyle(r,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(r.strokeColor=r.strokeColor||r.color),t.save(),this.doClip(t),this.setContext(t,r),this.setTransform(t),r}},{key:"afterBrush",value:function(t){t.restore()}},{key:"setContext",value:function(t,e){for(var r=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],n=0,o=r.length;n<o;n++){var i=e[r[n][0]],a=r[n][1];void 0!==i&&(t[a]=i)}}},{key:"doClip",value:function(t){var e=yn.Util_matrix.create();if(this.__clipShapes)for(var r=0;r<this.__clipShapes.length;r++){var n=this.__clipShapes[r];if(n.needTransform){var o=n.transform;yn.Util_matrix.invert(e,o),t.transform(o[0],o[1],o[2],o[3],o[4],o[5])}if(t.beginPath(),n.buildPath(t,n.style),t.clip(),n.needTransform){var i=e;t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}}}},{key:"getHighlightStyle",value:function(t,e,r){var n={};for(var o in t)n[o]=t[o];var i=yn.Util_color.getHighlightColor();for(var a in"stroke"!=t.brushType?(n.strokeColor=i,n.lineWidth=t.lineWidth||1,n.brushType="both"):"stroke"!=r?(n.strokeColor=i,n.lineWidth=t.lineWidth||1):n.strokeColor=e.strokeColor||yn.Util_color.mix(t.strokeColor,yn.Util_color.toRGB(i)),e)void 0!==e[a]&&(n[a]=e[a]);return n}},{key:"getHighlightZoom",value:function(){return"text"!=this.type?6:2}},{key:"drift",value:function(t,e){this.position[0]+=t,this.position[1]+=e}},{key:"buildPath",value:function(t,e){yn.Util_log("buildPath not implemented in "+this.type)}},{key:"getRect",value:function(t){yn.Util_log("getRect not implemented in "+this.type)}},{key:"isCover",value:function(t,e){var r=this.getTansform(t,e);t=r[0],e=r[1];var n=this.style.__rect;return n||(n=this.style.__rect=this.getRect(this.style)),t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height&&yn.Util_area.isInside(this,this.style,t,e)}},{key:"drawText",value:function(t,e,r){if(void 0!==e.text&&!1!==e.text){var n=e.textColor||e.color||e.strokeColor;t.fillStyle=n;var o,a,s,u,l=10,c=e.textPosition||this.textPosition||"top",f=[];switch(f=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],c){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var h=(r||e).__rect||this.getRect(r||e);switch(c){case"inside":s=h.x+h.width/2,u=h.y+h.height/2,o="center",a="middle","stroke"!=e.brushType&&n==e.color&&(t.fillStyle="#fff");break;case"left":s=h.x-l,u=h.y+h.height/2,o="end",a="middle";break;case"right":s=h.x+h.width+l,u=h.y+h.height/2,o="start",a="middle";break;case"top":s=h.x+h.width/2,u=h.y-l,o="center",a="bottom";break;case"bottom":s=h.x+h.width/2,u=h.y+h.height+l,o="center",a="top"}}break;case"start":case"end":var p=0,y=0,d=0,b=0;if(void 0!==e.pointList){var v=e.pointList;if(v.length<2)return;var m=v.length;switch(c){case"start":p=v[0][0]+f[0],y=v[1][0]+f[0],d=v[0][1]+f[1],b=v[1][1]+f[1];break;case"end":p=v[m-2][0]+f[0],y=v[m-1][0]+f[0],d=v[m-2][1]+f[1],b=v[m-1][1]+f[1]}}else p=e.xStart+f[0]||0,y=e.xEnd+f[0]||0,d=e.yStart+f[1]||0,b=e.yEnd+f[1]||0;switch(c){case"start":o=p<y?"end":"start",a=d<b?"bottom":"top",s=p,u=d;break;case"end":o=p<y?"start":"end",a=d<b?"top":"bottom",s=y,u=b}l-=4,p&&y&&p!=y?s-="end"==o?l:-l:o="center",d!=b?u-="bottom"==a?l:-l:a="middle";break;case"specific":s=e.textX||0,u=e.textY||0,o="start",a="middle"}e.labelXOffset&&!isNaN(e.labelXOffset)&&(s+=e.labelXOffset),e.labelYOffset&&!isNaN(e.labelYOffset)&&(u+=e.labelYOffset),null!=s&&null!=u&&i._fillText(t,e.text,s,u,e.textFont,e.textAlign||o,e.textBaseline||a)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(t,e,r){t.globalAlpha="fill"===e?void 0===r.fillOpacity?void 0===r.opacity?1:r.opacity:r.fillOpacity:"stroke"===e?void 0===r.strokeOpacity?void 0===r.opacity?1:r.opacity:r.strokeOpacity:void 0===r.opacity?1:r.opacity}}])&&Yn(e.prototype,r),n&&Yn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function eo(t){"@babel/helpers - typeof";return(eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ro(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function no(){return(no="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ao(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function oo(t,e){return(oo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function io(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ao(t);if(e){var o=ao(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===eo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ao(t){return(ao=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var so=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oo(t,e)}(i,to);var e,r,n,o=io(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type="smicimage",e._imageCache={},e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicImage",e}return e=i,(r=[{key:"destroy",value:function(){this.type=null,this._imageCache=null,no(ao(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e,r){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,o=this.style||{};e&&(o=this.getHighlightStyle(o,this.highlightStyle||{}));var a=o.image,s=this;if("string"==typeof a){var u=a;this._imageCache[u]?a=this._imageCache[u]:((a=new Image).onload=function(){a.onload=null,clearTimeout(i._refreshTimeout),i._needsRefresh.push(s),i._refreshTimeout=setTimeout(function(){r&&r(i._needsRefresh),i._needsRefresh=[]},10)},a.src=u,this._imageCache[u]=a)}if(a){if("IMG"==a.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=a.readyState)return}else if(!a.complete)return;var l=o.width||a.width,c=o.height||a.height,f=o.x+n[0],h=o.y+n[1];if(!a.width||!a.height)return;if(t.save(),this.doClip(t),this.setContext(t,o),this.setTransform(t),o.sWidth&&o.sHeight){var p=o.sx+n[0]||0,y=o.sy+n[1]||0;t.drawImage(a,p,y,o.sWidth,o.sHeight,f,h,l,c)}else if(o.sx&&o.sy){var d=o.sx+n[0],b=o.sy+n[1],v=l-d,m=c-b;t.drawImage(a,d,b,v,m,f,h,l,c)}else t.drawImage(a,f,h,l,c);o.width||(o.width=l),o.height||(o.height=c),this.style.width||(this.style.width=l),this.style.height||(this.style.height=c),this.drawText(t,o,this.style),t.restore()}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return{x:t.x+e[0],y:t.y+e[1],width:t.width,height:t.height}}},{key:"clearCache",value:function(){this._imageCache={}}}])&&ro(e.prototype,r),n&&ro(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function uo(t){"@babel/helpers - typeof";return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lo(t,e){return(lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function co(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=fo(t);if(e){var o=fo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===uo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function fo(t){return(fo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ho(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function po(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function yo(t,e,r){return e&&po(t.prototype,e),r&&po(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}so._needsRefresh=[],so._refreshTimeout=null;var bo=function(){function t(e,r){ho(this,t),this.root=e,this.storage=r,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,t.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="SuperMap.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var n=document.createElement("div");this._domRoot=n,n.style.position="relative",n.style.overflow="hidden",n.style.width=this._width+"px",n.style.height=this._height+"px",this.root.appendChild(n),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=t.createDom(C.createUniqueID("SuperMap.Theme_background_"),"div",this),n.appendChild(this._bgDom),this._bgDom.onselectstart=a,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var o=new vo(C.createUniqueID("_highLightLayer_"),this);this._layers.hover=o,n.appendChild(o.dom),o.initContext(),o.dom.onselectstart=a,o.dom.style["-webkit-user-select"]="none",o.dom.style["user-select"]="none",o.dom.style["-webkit-touch-callout"]="none";var i=this;function a(){return!1}this.updatePainter=function(t,e){i.refreshShapes(t,e)}}return yo(t,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(t){return this.refresh(t,!0),this}},{key:"refresh",value:function(t,e){var r=this.storage.getShapeList(!0);return this._paintList(r,e),"function"==typeof t&&t(),this}},{key:"_paintList",value:function(t,e){var r,n,o;for(var i in void 0===e&&(e=!1),this._updateLayerStatus(t),this._layers)"hover"!==i&&(this._layers[i].unusedCount++,this._layers[i].updateTransform());for(var a=[],s=0,u=t.length;s<u;s++){var l=t[s];if(n!==l.zlevel&&(r&&r.needTransform&&o.restore(),o=(r=this.getLayer(l.zlevel)).ctx,n=l.zlevel,r.unusedCount=0,(r.dirty||e)&&r.clear(),r.needTransform&&(o.save(),r.setTransform(o))),o&&l.__startClip){var c=l.__startClip;if(o.save(),c.needTransform){var f=c.transform;yn.Util_matrix.invert(a,f),o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}if(o.beginPath(),c.buildPath(o,c.style),o.clip(),c.needTransform){var h=a;o.transform(h[0],h[1],h[2],h[3],h[4],h[5])}}if((r&&r.dirty||e)&&!l.invisible&&(!l.onbrush||l.onbrush&&!l.onbrush(o,!1)))if(an.catchBrushException)try{l.brush(o,!1,this.updatePainter)}catch(t){yn.Util_log(t,"brush error of "+l.type,l)}else l.brush(o,!1,this.updatePainter);o&&l.__stopClip&&o.restore(),l.__dirty=!1}for(var p in o&&r&&r.needTransform&&o.restore(),this._layers)if("hover"!==p){var y=this._layers[p];y.dirty=!1,1==y.unusedCount&&y.clear()}}},{key:"getLayer",value:function(t){var e=this._layers[t];if(!e){var r=this._zlevelList.length,n=null,o=-1;if(r>0&&t>this._zlevelList[0]){for(o=0;o<r-1&&!(this._zlevelList[o]<t&&this._zlevelList[o+1]>t);o++);n=this._layers[this._zlevelList[o]]}this._zlevelList.splice(o+1,0,t),e=new vo(C.createUniqueID("_levelLayer_"+t),this);var i=n?n.dom:this._bgDom;i.nextSibling?i.parentNode.insertBefore(e.dom,i.nextSibling):i.parentNode.appendChild(e.dom),e.initContext(),this._layers[t]=e,this._layerConfig[t]&&(new Fr).merge(e,this._layerConfig[t],!0),e.updateTransform()}return e}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(t){var e=this._layers,r={};for(var n in e)"hover"!==n&&(r[n]=e[n].elCount,e[n].elCount=0);for(var o=0;o<t.length;o++){var i=t[o],a=e[i.zlevel];if(a){if(a.elCount++,a.dirty)continue;a.dirty=i.__dirty}}for(var s in e)"hover"!==s&&r[s]!==e[s].elCount&&(e[s].dirty=!0)}},{key:"refreshShapes",value:function(t,e){for(var r=0,n=t.length;r<n;r++){var o=t[r];this.storage.mod(o.id)}return this.refresh(e),this}},{key:"clear",value:function(){for(var t in this._layers)"hover"!=t&&this._layers[t].clear();return this}},{key:"modLayer",value:function(t,e){if(e){this._layerConfig[t]?(new Fr).merge(this._layerConfig[t],e,!0):this._layerConfig[t]=e;var r=this._layers[t];r&&(new Fr).merge(r,this._layerConfig[t],!0)}}},{key:"delLayer",value:function(t){var e=this._layers[t];e&&(this.modLayer(t,{position:e.position,rotation:e.rotation,scale:e.scale}),e.dom.parentNode.removeChild(e.dom),delete this._layers[t],this._zlevelList.splice((new Fr).indexOf(this._zlevelList,t),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var t=this.storage.getHoverShapes(!0),e=0,r=t.length;e<r;e++)this._brushHover(t[e]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var t=this._layers.hover;return t&&t.clear(),this}},{key:"resize",value:function(){var t=this._domRoot;t.style.display="none";var e=this._getWidth(),r=this._getHeight();if(t.style.display="",this._width!=e||r!=this._height){for(var n in this._width=e,this._height=r,t.style.width=e+"px",t.style.height=r+"px",this._layers)this._layers[n].resize(e,r);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(t){var e=this._layers[t];e&&e.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(e,r,n){var o=t.createDom(C.createUniqueID("SuperMap.Theme.image_"),"canvas",this);this._bgDom.appendChild(o);var i=o.getContext("2d");1!=t.devicePixelRatio&&i.scale(t.devicePixelRatio,t.devicePixelRatio),i.fillStyle=r||"#fff",i.rect(0,0,this._width*t.devicePixelRatio,this._height*t.devicePixelRatio),i.fill();var a=this;this.storage.iterShape(function(t){if(!t.invisible&&(!t.onbrush||t.onbrush&&!t.onbrush(i,!1)))if(an.catchBrushException)try{t.brush(i,!1,a.updatePainter)}catch(e){yn.Util_log(e,"brush error of "+t.type,t)}else t.brush(i,!1,a.updatePainter)},{normal:"up",update:!0});var s=o.toDataURL(e,n);return i=null,this._bgDom.removeChild(o),s}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function(t){var e=this._layers.hover.ctx;if(!t.onbrush||t.onbrush&&!t.onbrush(e,!0)){var r=this.getLayer(t.zlevel);if(r.needTransform&&(e.save(),r.setTransform(e)),an.catchBrushException)try{t.brush(e,!0,this.updatePainter)}catch(e){yn.Util_log(e,"hoverBrush error of "+t.type,t)}else t.brush(e,!0,this.updatePainter);r.needTransform&&e.restore()}}},{key:"_shapeToImage",value:function(t,e,r,n,o){var i=document.createElement("canvas"),a=i.getContext("2d"),s=o||window.devicePixelRatio||1;i.style.width=r+"px",i.style.height=n+"px",i.setAttribute("width",r*s),i.setAttribute("height",n*s),a.clearRect(0,0,r*s,n*s);var u={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[0,0,0],e.rotation=0,e.scale=[1,1],e&&e.brush(a,!1);var l=new so({id:t,style:{x:0,y:0,image:i}});return null!=u.position&&(l.position=e.position=u.position),null!=u.rotation&&(l.rotation=e.rotation=u.rotation),null!=u.scale&&(l.scale=e.scale=u.scale),l}},{key:"_createShapeToImageProcessor",value:function(){var e=this;return function(r,n,o,i){return e._shapeToImage(r,n,o,i,t.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(t){if(!(t instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var e=0;e<t.length;e++)this.storage.addHover(t[e]),this._brushHover(t[e])}}],[{key:"createDom",value:function(e,r,n){var o=document.createElement(r),i=n._width,a=n._height;return o.style.position="absolute",o.style.left=0,o.style.top=0,o.style.width=i+"px",o.style.height=a+"px",o.setAttribute("width",i*t.devicePixelRatio),o.setAttribute("height",a*t.devicePixelRatio),o.setAttribute("id",e),o}}]),t}(),vo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lo(t,e)}(r,bn);var e=co(r);function r(t,n){var o;return ho(this,r),(o=e.call(this,t,n)).dom=null,o.domBack=null,o.ctxBack=null,o.painter=n,o.unusedCount=0,o.config=null,o.dirty=!0,o.elCount=0,o.clearColor=0,o.motionBlur=!1,o.lastFrameAlpha=.7,o.zoomable=!1,o.panable=!1,o.maxZoom=1/0,o.minZoom=0,o.ctx=null,o.dom=bo.createDom(C.createUniqueID("SuperMap.Theme"+t),"canvas",n),o.dom.onselectstart=function(){return!1},o.dom.style["-webkit-user-select"]="none",o.dom.style["user-select"]="none",o.dom.style["-webkit-touch-callout"]="none",o.CLASS_NAME="SuperMap.LevelRenderer.Painter.Layer",o}return yo(r,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,bn.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!=bo.devicePixelRatio&&this.ctx.scale(bo.devicePixelRatio,bo.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=bo.createDom(C.createUniqueID("SuperMap.Theme.back-"+this.id),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!=bo.devicePixelRatio&&this.ctxBack.scale(bo.devicePixelRatio,bo.devicePixelRatio)}},{key:"resize",value:function(t,e){this.dom.style.width=t+"px",this.dom.style.height=e+"px",this.dom.setAttribute("width",t*bo.devicePixelRatio),this.dom.setAttribute("height",e*bo.devicePixelRatio),1!=bo.devicePixelRatio&&this.ctx.scale(bo.devicePixelRatio,bo.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",t*bo.devicePixelRatio),this.domBack.setAttribute("height",e*bo.devicePixelRatio),1!=bo.devicePixelRatio&&this.ctxBack.scale(bo.devicePixelRatio,bo.devicePixelRatio))}},{key:"clear",value:function(){var t=this.dom,e=this.ctx,r=t.width,n=t.height,o=this.clearColor,i=this.motionBlur,a=this.lastFrameAlpha;if(i&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(t,0,0,r/bo.devicePixelRatio,n/bo.devicePixelRatio)),o?(e.save(),e.fillStyle=this.config.clearColor,e.fillRect(0,0,r/bo.devicePixelRatio,n/bo.devicePixelRatio),e.restore()):e.clearRect(0,0,r/bo.devicePixelRatio,n/bo.devicePixelRatio),i){var s=this.domBack;e.save(),e.globalAlpha=a,e.drawImage(s,0,0,r/bo.devicePixelRatio,n/bo.devicePixelRatio),e.restore()}}}]),r}();function mo(t){"@babel/helpers - typeof";return(mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function go(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function wo(t,e){return(wo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Oo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=_o(t);if(e){var o=_o(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===mo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return So(t)}(this,r)}}function So(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _o(t){return(_o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Po=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wo(t,e)}(i,Gr);var e,r,n,o=Oo(i);function i(t,e,r){var n,a,s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t,e,r)).root=t,n.storage=e,n.painter=r,n._lastX=0,n._lastY=0,n._mouseX=0,n._mouseY=0,n._findHover=null,n._domHover=null,n._findHover=(a=function(t,e,r){var n=this;if(n._draggingTarget&&n._draggingTarget.id==t.id||t.isSilent())return!1;var o=n._event;if(t.isCover(e,r)){if(t.hoverable)if(t.isHoverByRefDataID&&!0===t.isHoverByRefDataID){if(t.refDataID){var i=t.refDataID,a=null;t.refDataHoverGroup&&(a=t.refDataHoverGroup);for(var s=n.storage._shapeList,u=0,l=s.length;u<l;u++){var c=s[u];c.refDataID&&i===c.refDataID&&(a?c.refDataHoverGroup&&a===c.refDataHoverGroup&&n.storage.addHover(c):n.storage.addHover(c))}}}else n.storage.addHover(t);for(var f=t.parent;f;){if(f.clipShape&&!f.clipShape.isCover(n._mouseX,n._mouseY))return!1;f=f.parent}return n._lastHover!=t&&(n._processOutShape(o),n._processDragLeave(o),n._lastHover=t,n._processDragEnter(o)),n._processOverShape(o),n._processDragOver(o),n._hasfound=1,!0}return!1},s=So(n),function(t,e,r){return a.call(s,t,e,r)}),n._domHover=r.getDomHover(),n.CLASS_NAME="SuperMap.LevelRenderer.Handler";var u={resize:function(t){t=t||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(an.EVENT.RESIZE,t)},click:function(t){t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<10&&this._dispatchAgency(e,an.EVENT.CLICK,t),this._mousemoveHandler(t)},dblclick:function(t){t=t||window.event,t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<5&&this._dispatchAgency(e,an.EVENT.DBLCLICK,t),this._mousemoveHandler(t)},mousewheel:function(t){var e=((t=this._zrenderEventFixed(t)).wheelDelta||-t.detail)>0?1.1:1/1.1,r=this.painter.getLayers(),n=!1;for(var o in r)if("hover"!==o){var i=r[o],a=i.position;if(i.zoomable){i.__zoom=i.__zoom||1;var s=i.__zoom;s*=e,e=(s=Math.max(Math.min(i.maxZoom,s),i.minZoom))/i.__zoom,i.__zoom=s,a[0]-=(this._mouseX-a[0])*(e-1),a[1]-=(this._mouseY-a[1])*(e-1),i.scale[0]*=e,i.scale[1]*=e,i.dirty=!0,n=!0}}n&&this.painter.refresh(),this._dispatchAgency(this._lastHover,an.EVENT.MOUSEWHEEL,t),this._mousemoveHandler(t)},mousemove:function(t){this._clickThreshold++,t=this._zrenderEventFixed(t),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=yn.Util_event.getX(t),this._mouseY=yn.Util_event.getY(t);var e=this._mouseX-this._lastX,r=this._mouseY-this._lastY;this._processDragStart(t),this._hasfound=0,this._event=t,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(t),this._processDragLeave(t)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var n="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,e,r),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var o=this.painter.getLayers(),i=!1;for(var a in o)if("hover"!==a){var s=o[a];s.panable&&(n="move",s.position[0]+=e,s.position[1]+=r,i=!0,s.dirty=!0)}i&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?n="move":this._hasfound&&this._lastHover.clickable&&(n="pointer"),this.root.style.cursor=n,this._dispatchAgency(this._lastHover,an.EVENT.MOUSEMOVE,t),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(t){var e=(t=this._zrenderEventFixed(t)).toElement||t.relatedTarget;if(e!=this.root)for(;e&&9!=e.nodeType;){if(e==this.root)return void this._mousemoveHandler(t);e=e.parentNode}t.zrenderX=this._lastX,t.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(t),this._processDrop(t),this._processDragEnd(t),this.painter.refreshHover(),this.dispatch(an.EVENT.GLOBALOUT,t)},mousedown:function(t){if(this._clickThreshold=0,2==this._lastDownButton)return this._lastDownButton=t.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,t=this._zrenderEventFixed(t),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,an.EVENT.MOUSEDOWN,t),this._lastDownButton=t.button},mouseup:function(t){t=this._zrenderEventFixed(t),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,an.EVENT.MOUSEUP,t),this._processDrop(t),this._processDragEnd(t)},touchstart:function(t){t=this._zrenderEventFixed(t,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(t),this._mousedownHandler(t)},touchmove:function(t){t=this._zrenderEventFixed(t,!0),this._mousemoveHandler(t),this._isDragging&&yn.Util_event.stop(t)},touchend:function(t){t=this._zrenderEventFixed(t,!0),this._mouseupHandler(t);var e=new Date;e-this._lastTouchMoment<an.EVENT.touchClickDelay&&(this._mobildFindFixed(t),this._clickHandler(t),e-this._lastClickMoment<an.EVENT.touchClickDelay/2&&(this._dblclickHandler(t),this._lastHover&&this._lastHover.clickable&&yn.Util_event.stop(t)),this._lastClickMoment=e),this.painter.clearHover()}};function l(t,e){return function(r){return t.call(e,r)}}return function(t){var e=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],r=e.length;for(;r--;){var n=e[r];t["_"+n+"Handler"]=l(u[n],t)}}(So(n)),window.addEventListener?(window.addEventListener("resize",n._resizeHandler),yn.Util_env.os.tablet||yn.Util_env.os.phone?(t.addEventListener("touchstart",n._touchstartHandler),t.addEventListener("touchmove",n._touchmoveHandler),t.addEventListener("touchend",n._touchendHandler)):(t.addEventListener("click",n._clickHandler),t.addEventListener("dblclick",n._dblclickHandler),t.addEventListener("mousewheel",n._mousewheelHandler),t.addEventListener("mousemove",n._mousemoveHandler),t.addEventListener("mousedown",n._mousedownHandler),t.addEventListener("mouseup",n._mouseupHandler)),t.addEventListener("DOMMouseScroll",n._mousewheelHandler),t.addEventListener("mouseout",n._mouseoutHandler)):(window.attachEvent("onresize",n._resizeHandler),t.attachEvent("onclick",n._clickHandler),t.ondblclick=n._dblclickHandler,t.attachEvent("onmousewheel",n._mousewheelHandler),t.attachEvent("onmousemove",n._mousemoveHandler),t.attachEvent("onmouseout",n._mouseoutHandler),t.attachEvent("onmousedown",n._mousedownHandler),t.attachEvent("onmouseup",n._mouseupHandler)),n}return e=i,(r=[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,Gr.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(t,e){return this.bind(t,e),this}},{key:"un",value:function(t,e){return this.unbind(t,e),this}},{key:"trigger",value:function(t,e){var r=an.EVENT;switch(t){case r.RESIZE:case r.CLICK:case r.DBLCLICK:case r.MOUSEWHEEL:case r.MOUSEMOVE:case r.MOUSEDOWN:case r.MOUSEUP:case r.MOUSEOUT:this["_"+t+"Handler"](e)}}},{key:"dispose",value:function(){var t=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),yn.Util_env.os.tablet||yn.Util_env.os.phone?(t.removeEventListener("touchstart",this._touchstartHandler),t.removeEventListener("touchmove",this._touchmoveHandler),t.removeEventListener("touchend",this._touchendHandler)):(t.removeEventListener("click",this._clickHandler),t.removeEventListener("dblclick",this._dblclickHandler),t.removeEventListener("mousewheel",this._mousewheelHandler),t.removeEventListener("mousemove",this._mousemoveHandler),t.removeEventListener("mousedown",this._mousedownHandler),t.removeEventListener("mouseup",this._mouseupHandler)),t.removeEventListener("DOMMouseScroll",this._mousewheelHandler),t.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),t.detachEvent("onclick",this._clickHandler),t.detachEvent("dblclick",this._dblclickHandler),t.detachEvent("onmousewheel",this._mousewheelHandler),t.detachEvent("onmousemove",this._mousemoveHandler),t.detachEvent("onmouseout",this._mouseoutHandler),t.detachEvent("onmousedown",this._mousedownHandler),t.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(t){var e=this._lastHover;if(this._isMouseDown&&e&&e.draggable&&!this._draggingTarget&&this._mouseDownTarget==e){if(e.dragEnableTime&&new Date-this._lastMouseDownMoment<e.dragEnableTime)return;var r=e;this._draggingTarget=r,this._isDragging=1,r.invisible=!0,this.storage.mod(r.id),this._dispatchAgency(r,an.EVENT.DRAGSTART,t),this.painter.refresh()}}},{key:"_processDragEnter",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,an.EVENT.DRAGENTER,t,this._draggingTarget)}},{key:"_processDragOver",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,an.EVENT.DRAGOVER,t,this._draggingTarget)}},{key:"_processDragLeave",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,an.EVENT.DRAGLEAVE,t,this._draggingTarget)}},{key:"_processDrop",value:function(t){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,an.EVENT.DROP,t,this._draggingTarget))}},{key:"_processDragEnd",value:function(t){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,an.EVENT.DRAGEND,t),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(t){this._dispatchAgency(this._lastHover,an.EVENT.MOUSEOVER,t)}},{key:"_processOutShape",value:function(t){this._dispatchAgency(this._lastHover,an.EVENT.MOUSEOUT,t)}},{key:"_dispatchAgency",value:function(t,e,r,n){var o="on"+e,i={type:e,event:r,target:t,cancelBubble:!1},a=t;for(n&&(i.dragged=n);a&&(a[o]&&(i.cancelBubble=a[o](i)),a.dispatch(e,i),a=a.parent,!i.cancelBubble););t?i.cancelBubble||this.dispatch(e,i):n||this.dispatch(e,{type:e,event:r})}},{key:"_iterateAndFindHover",value:function(){for(var t,e=yn.Util_matrix.create(),r=this.storage.getShapeList(),n=[0,0],o=r.length-1;o>=0;o--){var i=r[o];if(void 0!==i.zlevel&&(t=this.painter.getLayer(i.zlevel,t),n[0]=this._mouseX,n[1]=this._mouseY,t.needTransform&&(yn.Util_matrix.invert(e,t.transform),yn.Util_vector.applyTransform(n,n,e))),this._findHover(i,n[0],n[1]))break}}},{key:"_mobildFindFixed",value:function(t){var e=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=t.zrenderX,this._mouseY=t.zrenderY,this._event=t,this._iterateAndFindHover();for(var r=0;!this._lastHover&&r<e.length;r++){var n=e[r];n.x&&(this._mouseX+=n.x),n.y&&(this._mouseX+=n.y),this._iterateAndFindHover()}this._lastHover&&(t.zrenderX=this._mouseX,t.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(t,e){if(t.zrenderFixed)return t;if(e){var r="touchend"!=t.type?t.targetTouches[0]:t.changedTouches[0];if(r){var n=this.root.getBoundingClientRect();t.zrenderX=r.clientX-n.left,t.zrenderY=r.clientY-n.top}}else{var o=(t=t||window.event).toElement||t.relatedTarget||t.srcElement||t.target;o&&o!=this._domHover&&(t.zrenderX=(void 0!==t.offsetX?t.offsetX:t.layerX)+o.offsetLeft,t.zrenderY=(void 0!==t.offsetY?t.offsetY:t.layerY)+o.offsetTop)}return t.zrenderFixed=1,t}},{key:"getLastHoverOne",value:function(){return this._lastHover?this._lastHover:null}}])&&go(e.prototype,r),n&&go(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function xo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ko=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Animation.easing"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){}},{key:"Linear",value:function(t){return t}},{key:"QuadraticIn",value:function(t){return t*t}},{key:"QuadraticOut",value:function(t){return t*(2-t)}},{key:"QuadraticInOut",value:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},{key:"CubicIn",value:function(t){return t*t*t}},{key:"CubicOut",value:function(t){return--t*t*t+1}},{key:"CubicInOut",value:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},{key:"QuarticIn",value:function(t){return t*t*t*t}},{key:"QuarticOut",value:function(t){return 1- --t*t*t*t}},{key:"QuarticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},{key:"QuinticIn",value:function(t){return t*t*t*t*t}},{key:"QuinticOut",value:function(t){return--t*t*t*t*t+1}},{key:"QuinticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},{key:"SinusoidalIn",value:function(t){return 1-Math.cos(t*Math.PI/2)}},{key:"SinusoidalOut",value:function(t){return Math.sin(t*Math.PI/2)}},{key:"SinusoidalInOut",value:function(t){return.5*(1-Math.cos(Math.PI*t))}},{key:"ExponentialIn",value:function(t){return 0===t?0:Math.pow(1024,t-1)}},{key:"ExponentialOut",value:function(t){return 1===t?1:1-Math.pow(2,-10*t)}},{key:"ExponentialInOut",value:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},{key:"CircularIn",value:function(t){return 1-Math.sqrt(1-t*t)}},{key:"CircularOut",value:function(t){return Math.sqrt(1- --t*t)}},{key:"CircularInOut",value:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},{key:"ElasticIn",value:function(t){var e,r=.1;return 0===t?0:1===t?1:(r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))}},{key:"ElasticOut",value:function(t){var e,r=.1;return 0===t?0:1===t?1:(r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(t){var e,r=.1;return 0===t?0:1===t?1:(r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),(t*=2)<1?r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:r*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(t){var e=1.70158;return t*t*((e+1)*t-e)}},{key:"BackOut",value:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1}},{key:"BackInOut",value:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},{key:"BounceIn",value:function(t){return 1-this.BounceOut(1-t)}},{key:"BounceOut",value:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},{key:"BounceInOut",value:function(t){return t<.5?.5*this.BounceIn(2*t):.5*this.BounceOut(2*t-1)+.5}}])&&xo(e.prototype,r),n&&xo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function jo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Eo=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._targetPool=e.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=e.life||1e3,this._delay=e.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Clip"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){}},{key:"step",value:function(t){var e=new ko,r=(t-this._startTime)/this._life;if(!(r<0)){r=Math.min(r,1);var n="string"==typeof this.easing?e[this.easing]:this.easing,o="function"==typeof n?n(r):r;return this.fire("frame",o),1==r?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}},{key:"restart",value:function(){var t=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-t+this.gap}},{key:"fire",value:function(t,e){for(var r=0,n=this._targetPool.length;r<n;r++)this["on"+t]&&this["on"+t](this._targetPool[r],e)}}])&&jo(e.prototype,r),n&&jo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function To(t){"@babel/helpers - typeof";return(To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Co(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ro(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ao(t,e,r){return e&&Ro(t.prototype,e),r&&Ro(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mo(t,e){return(Mo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Lo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Io(t);if(e){var o=Io(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===To(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return No(t)}(this,r)}}function No(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Io(t){return(Io=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Do=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mo(t,e)}(r,Gr);var e=Lo(r);function r(t){var n;return Co(this,r),n=e.call(this,t),t=t||{},n.stage={},n.onframe=function(){},n._clips=[],n._running=!1,n._time=0,C.extend(No(n),t),n.CLASS_NAME="SuperMap.LevelRenderer.Animation",n}return Ao(r,[{key:"add",value:function(t){this._clips.push(t)}},{key:"remove",value:function(t){var e=(new Fr).indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)}},{key:"_update",value:function(){for(var t=(new Date).getTime(),e=t-this._time,r=this._clips,n=r.length,o=[],i=[],a=0;a<n;a++){var s=r[a],u=s.step(t);u&&(o.push(u),i.push(s))}this.stage.update&&this.stage.update();for(var l=0;l<n;)r[l]._needsRemove?(r[l]=r[n-1],r.pop(),n--):l++;n=o.length;for(var c=0;c<n;c++)i[c].fire(o[c]);this._time=t,this.onframe(e),this.dispatch("frame",e)}},{key:"start",value:function(){var t=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,16)},e=this;this._running=!0,this._time=(new Date).getTime(),t(function r(){e._running&&(e._update(),t(r))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(t,e){var r=new Fo(t,(e=e||{}).loop,e.getter,e.setter);return r.animation=this,r}}],[{key:"_interpolateNumber",value:function(t,e,r){return(e-t)*r+t}},{key:"_interpolateArray",value:function(t,e,n,o,i){var a=t.length;if(1==i)for(var s=0;s<a;s++)o[s]=r._interpolateNumber(t[s],e[s],n);else for(var u=t[0].length,l=0;l<a;l++)for(var c=0;c<u;c++)o[l][c]=r._interpolateNumber(t[l][c],e[l][c],n)}},{key:"_isArrayLike",value:function(t){switch(To(t)){case"undefined":case"string":return!1}return void 0!==t.length}},{key:"_catmullRomInterpolateArray",value:function(t,e,n,o,i,a,s,u,l){var c=t.length;if(1==l)for(var f=0;f<c;f++)u[f]=r._catmullRomInterpolate(t[f],e[f],n[f],o[f],i,a,s);else for(var h=t[0].length,p=0;p<c;p++)for(var y=0;y<h;y++)u[p][y]=r._catmullRomInterpolate(t[p][y],e[p][y],n[p][y],o[p][y],i,a,s)}},{key:"_catmullRomInterpolate",value:function(t,e,r,n,o,i,a){var s=.5*(r-t),u=.5*(n-e);return(2*(e-r)+s+u)*a+(-3*(e-r)-2*s-u)*i+s*o+e}},{key:"_cloneValue",value:function(t){var e=Array.prototype.slice;if(r._isArrayLike(t)){var n=t.length;if(r._isArrayLike(t[0])){for(var o=[],i=0;i<n;i++)o.push(e.call(t[i]));return o}return e.call(t)}return t}},{key:"rgba2String",value:function(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}}]),r}(),Fo=function(){function t(e,r,n,o){Co(this,t),this._tracks={},this._target=e,this._loop=r||!1,this._getter=n||function(t,e){return t[e]},this._setter=o||function(t,e,r){t[e]=r},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Animator"}return Ao(t,[{key:"when",value:function(t,e){for(var r in e)this._tracks[r]||(this._tracks[r]=[],0!==t&&this._tracks[r].push({time:0,value:Do._cloneValue(this._getter(this._target,r))})),this._tracks[r].push({time:parseInt(t,10),value:e[r]});return this}},{key:"during",value:function(t){return this._onframeList.push(t),this}},{key:"start",value:function(t){var e=this,r=this._setter,n=this._getter,o=e._onframeList.length,i="spline"===t,a=function(){if(e._clipCount--,0===e._clipCount){e._tracks={};for(var t=e._doneList.length,r=0;r<t;r++)e._doneList[r].call(e)}},s=function(s,u){var l=s.length;if(l){var c=s[0].value,f=Do._isArrayLike(c),h=!1,p=f&&Do._isArrayLike(c[0])?2:1;s.sort(function(t,e){return t.time-e.time});for(var y=s[l-1].time,d=[],b=[],v=0;v<l;v++){d.push(s[v].time/y);var m=s[v].value;"string"==typeof m&&(0===(m=yn.Util_color.toArray(m)).length&&(m[0]=m[1]=m[2]=0,m[3]=1),h=!0),b.push(m)}var g,w,O,S,_,P,x,k=0,j=0;if(h)var E=[0,0,0,0];var T=new Eo({target:e._target,life:y,loop:e._loop,delay:e._delay,onframe:function(t,a){if(a<j){for(g=Math.min(k+1,l-1),w=g;w>=0&&!(d[w]<=a);w--);w=Math.min(w,l-2)}else{for(w=k;w<l&&!(d[w]>a);w++);w=Math.min(w-1,l-2)}k=w,j=a;var s=d[w+1]-d[w];if(0!==s){var c,y;for(O=(a-d[w])/s,i?(_=b[w],S=b[0===w?w:w-1],P=b[w>l-2?l-1:w+1],x=b[w>l-3?l-1:w+2],f?Do._catmullRomInterpolateArray(S,_,P,x,O,O*O,O*O*O,n(t,u),p):(c=h?Do.rgba2String(E):Do._catmullRomInterpolate(S,_,P,x,O,O*O,O*O*O),r(t,u,c))):f?Do._interpolateArray(b[w],b[w+1],O,n(t,u),p):(h?(Do._interpolateArray(b[w],b[w+1],O,E,1),y=Do.rgba2String(E)):y=Do._interpolateNumber(b[w],b[w+1],O),r(t,u,y)),w=0;w<o;w++)e._onframeList[w](t,a)}},ondestroy:a});t&&"spline"!==t&&(T.easing=t),e._clipList.push(T),e._clipCount++,e.animation.add(T)}};for(var u in this._tracks)s(this._tracks[u],u);return this}},{key:"stop",value:function(){for(var t=0;t<this._clipList.length;t++){var e=this._clipList[t];this.animation.remove(e)}this._clipList=[]}},{key:"delay",value:function(t){return this._delay=t,this}},{key:"done",value:function(t){return t&&this._doneList.push(t),this}}]),t}();function Bo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Go=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.storage=new kn,this.painter=new bo(r,this.storage),this.handler=new Po(r,this.storage,this.painter),this.animatingElements=[],this.animation=new Do({stage:{update:t.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="SuperMap.LevelRenderer.Render"}var e,r,n;return e=t,n=[{key:"getFrameCallback",value:function(t){return function(){var e=t.animatingElements;if(e instanceof Array){for(var r=0,n=e.length;r<n;r++)t.storage.mod(e[r].id);(e.length||t._needsRefreshNextFrame)&&t.refresh()}}}}],(r=[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(t){return this.storage.addRoot(t),this}},{key:"addGroup",value:function(t){return this.storage.addRoot(t),this}},{key:"delShape",value:function(t){return this.storage.delRoot(t),this}},{key:"delGroup",value:function(t){return this.storage.delRoot(t),this}},{key:"modShape",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modGroup",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modLayer",value:function(t,e){return this.painter.modLayer(t,e),this}},{key:"addHoverShape",value:function(t){return this.storage.addHover(t),this}},{key:"render",value:function(t){return this.painter.render(t),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(t){return this.painter.refresh(t),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(t){return this.painter.refreshHover(t),this}},{key:"refreshShapes",value:function(t,e){return this.painter.refreshShapes(t,e),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(t,e,r){if("string"==typeof t&&(t=this.storage.get(t)),t){var n;if(e){for(var o=e.split("."),i=t,a=0,s=o.length;a<s;a++)i&&(i=i[o[a]]);i&&(n=i)}else n=t;if(!n)return void yn.Util_log('Property "'+e+'" is not existed in element '+t.id);var u=this.animatingElements;return void 0===t.__aniCount&&(t.__aniCount=0),0===t.__aniCount&&u.push(t),t.__aniCount++,this.animation.animate(n,{loop:r}).done(function(){if(t.__aniCount--,0===t.__aniCount){var e=(new Fr).indexOf(u,t);u.splice(e,1)}})}yn.Util_log("Element not existed")}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(t,e,r){return this.painter.toDataURL(t,e,r)}},{key:"shapeToImage",value:function(t,e,r){var n=C.createUniqueID("SuperMap.LevelRenderer.ToImage_");return this.painter.shapeToImage(n,t,e,r)}},{key:"on",value:function(t,e){return this.handler.on(t,e),this}},{key:"un",value:function(t,e){return this.handler.un(t,e),this}},{key:"trigger",value:function(t,e){return this.handler.trigger(t,e),this.handler.dispatch(t,e),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(t){return this.painter.updateHoverLayer(t),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}])&&Bo(e.prototype,r),n&&Bo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Uo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Jo=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t._instances={},t.Tool={},this.version="2.0.4",this.CLASS_NAME="SuperMap.LevelRenderer"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.dispose(),this.version=null}},{key:"init",value:function(e){var r=new Go(C.createUniqueID("LRenderer_"),e);return t._instances[r.id]=r,r}},{key:"dispose",value:function(e){if(e)e.dispose(),this.delInstance(e.id);else{for(var r in t._instances)t._instances[r].dispose();t._instances={}}return this}},{key:"getInstance",value:function(e){return t._instances[e]}},{key:"delInstance",value:function(e){return delete t._instances[e],this}}])&&Uo(e.prototype,r),n&&Uo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Vo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var zo=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fieldNames=null,this.fieldValues=null,this.geometry=null,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ServerFeature"}var e,r,n;return e=t,n=[{key:"fromJson",value:function(e){var r=null;if(e)return(r=e.geometry)&&(r=yr.fromJson(r)),new t({fieldNames:e.fieldNames,fieldValues:e.fieldValues,geometry:r})}}],(r=[{key:"destroy",value:function(){var t=this;t.fieldNames=null,t.fieldValues=null,t.geometry&&(t.geometry.destroy(),t.geometry=null)}},{key:"toFeature",value:function(){var t,e,r,n,o={},i=this;for(var a in t=i.fieldNames,e=i.fieldValues,t)o[t[a]]=e[a];return i.geometry&&(r=i.geometry.toGeometry()),n=new Ut(r,o),i.geometry&&i.geometry.id&&(n.fid=i.geometry.id),n}}])&&Vo(e.prototype,r),n&&Vo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ho=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=r||{};this.name=e,this.id=n.id?n.id:C.createUniqueID("themeLayer_"),this.opacity=n.opacity?n.opacity:1,this.visibility=!0,this.loadWhileAnimating=void 0===n.loadWhileAnimating||n.loadWhileAnimating,this.map=n.map?n.map:null,this.features=[],this.TFEvents=[],this.map&&this.map.addLayer(this)}var e,r,n;return e=t,(r=[{key:"onAdd",value:function(t){this.map=t,this._createCanvasContainer(),this.addTFEvents(),this.map.on("resize",this.resizeEvent.bind(this)),this.map.on("zoomstart",this.zoomStartEvent.bind(this)),this.map.on("zoomend",this.zoomEndEvent.bind(this)),this.map.on("rotatestart",this.rotateStartEvent.bind(this)),this.map.on("rotate",this.rotateEvent.bind(this)),this.map.on("rotateend",this.rotateEndEvent.bind(this)),this.map.on("dragend",this.dragEndEvent.bind(this)),this.map.on("movestart",this.moveStartEvent.bind(this)),this.map.on("move",this.moveEvent.bind(this)),this.map.on("moveend",this.moveEndEvent.bind(this)),this.map.on("remove",this.removeFromMap.bind(this)),this.refresh()}},{key:"refresh",value:function(){0!==this.features.length&&this.map&&this.redrawThematicFeatures(this.map.getBounds())}},{key:"_createCanvasContainer",value:function(){this.movingOffset=[0,0],this.mapContainer=this.map.getCanvasContainer(),this.div=document.createElement("div"),this.div.id=this.id,this.div.style.position="absolute";var t=this.map.getCanvasContainer(),e=this.map.getCanvas();this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px",this.div.style.width=e.style.width,this.div.style.height=e.style.height,this.div.className="themeLayer",this.div.width=parseInt(e.width),this.div.height=parseInt(e.height),t.appendChild(this.div),this.setOpacity(this.opacity),this.levelRenderer=new Jo,this.renderer=this.levelRenderer.init(this.div),this.renderer.clear()}},{key:"destroyFeatures",value:function(t){if(void 0===t&&(t=this.features),t){this.removeFeatures(t),Array.isArray(t)||(t=[t]);for(var e=t.length-1;e>=0;e--)t[e].destroy()}}},{key:"setVisibility",value:function(t){t!==this.visibility&&(this.visibility=t,this.display(t),this.redrawThematicFeatures(this.map.getBounds()))}},{key:"display",value:function(t){this.div.style.display=t?"block":"none"}},{key:"setOpacity",value:function(t){if(t!==this.opacity){this.opacity=t;var e=this.div;C.modifyDOMElement(e,null,null,null,null,null,null,t),null!==this.map&&o().Evented.prototype.fire("changelayer",{layer:this,property:"opacity"})}}},{key:"addFeatures",value:function(t){}},{key:"removeFeatures",value:function(t){var e=this;if(t){if(t===e.features)return e.removeAllFeatures();C.isArray(t)||"function"==typeof t||(t=[t]);for(var r=[],n=0;n<e.features.length;n++){var i=e.features[n];if(t&&"function"==typeof t)t(i)&&e.features.splice(n--,1);else-1===C.indexOf(t,i)?r.push(i):e.features.splice(n--,1)}for(var a=[],s=0,u=this.features.length;s<u;s++)i=this.features[s],a.push(i);this.features=[],this.addFeatures(a),this.renderer&&this.redrawThematicFeatures(this.map.getBounds());var l=0==r.length;o().Evented.prototype.fire("featuresremoved",{features:r,succeed:l})}}},{key:"removeAllFeatures",value:function(){this.renderer&&this.renderer.clear(),this.features=[],o().Evented.prototype.fire("featuresremoved",{features:[],succeed:!0})}},{key:"getFeatures",value:function(t){for(var e=this.features.length,r=[],n=0;n<e;++n)(!t||t&&"function"==typeof t&&t(this.features[n]))&&r.push(this.features[n]);return r}},{key:"getFeatureBy",value:function(t,e){var r=null;for(var n in this.features)if(this.features[n][t]===e){r=this.features[n];break}return r}},{key:"getFeatureById",value:function(t){return this.getFeatureBy("id",t)}},{key:"getFeaturesByAttribute",value:function(t,e){var r,n=[];for(var o in this.features)(r=this.features[o])&&r.attributes&&r.attributes[t]===e&&n.push(r);return n}},{key:"redrawThematicFeatures",value:function(t){}},{key:"on",value:function(t,e,r){return this.renderer?this.renderer.on(t,e):this.map.on(t,e),this}},{key:"off",value:function(t,e,r){return this.renderer?this.renderer.un(t,e):this.map.off(t,e),this}},{key:"addTFEvents",value:function(){for(var t=this.TFEvents,e=t.length,r=0;r<e;r++)this.renderer.on(t[r][0],t[r][1])}},{key:"getLocalXY",value:function(t){var e,r=this.map;if(t instanceof V||t instanceof Rr){var n=r.project(new(o().LngLat)(t.x,t.y));e=[n.x,n.y]}if(t instanceof L){var i=r.project(new(o().LngLat)(t.lon,t.lat));e=[i.x,i.y]}return e}},{key:"toiClientFeature",value:function(t){C.isArray(t)||(t=[t]);for(var e=[],r=0;r<t.length;r++)if(t[r]instanceof Nr)e.push(t[r].toFeature());else if(t[r]instanceof Ut)e.push(t[r]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(t[r].type)){var n=new Or;e=e.concat(n.read(t[r]))}else{if(!t[r].geometry||!t[r].geometry.parts)throw new Error("features's type is not be supported.");e.push(zo.fromJson(t[r]).toFeature())}return e}},{key:"toFeature",value:function(t){return this.toiClientFeature(t)}},{key:"moveEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.div.style.transform="",this.redrawThematicFeatures(this.map.getBounds()),this._show())}},{key:"moveStartEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){this.startPitch=this.map.getPitch(),this.startBearing=this.map.getBearing();var t=this.map.project(new(o().LngLat)(0,0));this.startMoveX=t.x,this.startMoveY=t.y}}},{key:"moveEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){if(!this.rotating&&!this.zooming){0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var t=this.map.getPitch()-this.startPitch,e=-this.map.getBearing()+this.startBearing,r=this.map.project(new(o().LngLat)(0,0)),n=r.x-this.startMoveX,i=r.y-this.startMoveY;this.div.style.transform="rotateX("+t+"deg) rotateZ("+e+"deg) translate3d("+n+"px, "+i+"px, 0px)"}}else this.redrawThematicFeatures(this.map.getBounds())}},{key:"zoomStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!0,this._hide())}},{key:"zoomEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.zooming=!1,this._show())}},{key:"rotateStartEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!0)}},{key:"rotateEvent",value:function(){if(!this.loadWhileAnimating&&this.visibility){0!==this.map.getPitch()&&this._hide(),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var t=this.map.getPitch()-this.startPitch,e=-this.map.getBearing()+this.startBearing;this.div.style.transform="rotateX("+t+"deg) rotateZ("+e+"deg)"}}},{key:"rotateEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&(this.rotating=!1,this._show())}},{key:"dragEndEvent",value:function(){!this.loadWhileAnimating&&this.visibility&&this._hide()}},{key:"resizeEvent",value:function(){this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px";var t=this.map.getCanvas();this.div.style.width=t.style.width,this.div.style.height=t.style.height,this.div.width=parseInt(t.width),this.div.height=parseInt(t.height),this.renderer.resize()}},{key:"removeFromMap",value:function(){this.mapContainer.removeChild(this.div),this.removeAllFeatures()}},{key:"moveTo",value:function(t,e){var r=document.getElementById(this.div.id);if(e=void 0===e||e){var n=document.getElementById(t);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(t);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"_hide",value:function(){this.renderer.painter.root.style.display="none"}},{key:"_show",value:function(){this.renderer.painter.root.style.display="block"}}])&&qo(e.prototype,r),n&&qo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Wo(t){"@babel/helpers - typeof";return(Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Xo(){return(Xo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ko(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Qo(t,e){return(Qo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Zo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ko(t);if(e){var o=Ko(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Wo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ko(t){return(Ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $o=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qo(t,e)}(a,Ho);var e,r,n,i=Zo(a);function a(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t,r)).chartsSetting=r.chartsSetting||{},n.themeFields=r.themeFields||null,n.overlayWeightField=r.overlayWeightField||null,n.isOverLay=void 0===r.isOverLay||r.isOverLay,n.charts=r.charts||[],n.cache=r.cache||{},n.chartsType=e,n}return e=a,(r=[{key:"setChartsType",value:function(t){this.chartsType=t,this.redraw()}},{key:"addFeatures",value:function(t){!1!==o().Evented.prototype.fire("beforefeaturesadded",{features:t})&&(this.features=this.toiClientFeature(t),this.renderer&&this.redrawThematicFeatures(this.map.getBounds()))}},{key:"redrawThematicFeatures",value:function(){this.clearCache(),this.renderer.clearAll();for(var t=this.features,e=0,r=t.length;e<r;e++){var n=t[e],o=this.cache,i=n.id;if(!o[i]){o[i]=i;var a=this.createThematicFeature(n);a&&this.overlayWeightField&&n.attributes[this.overlayWeightField]&&!isNaN(n.attributes[this.overlayWeightField])&&(a.__overlayWeight=n.attributes[this.overlayWeightField]),a&&this.charts.push(a)}}this.drawCharts()}},{key:"createThematicFeature",value:function(t){var e;return Mr[this.chartsType]&&this.themeFields&&this.chartsSetting&&(e=new Mr[this.chartsType](t,this,this.themeFields,this.chartsSetting)),!!e&&(e.assembleShapes(),e)}},{key:"drawCharts",value:function(){if(this.renderer){var t=this.charts;if(this.overlayWeightField&&t.sort(function(t,e){return void 0===t.__overlayWeight&&void 0===e.__overlayWeight?0:void 0!==t.__overlayWeight&&void 0===e.__overlayWeight?-1:void 0===t.__overlayWeight&&void 0!==e.__overlayWeight?1:void 0!==t.__overlayWeight&&void 0!==e.__overlayWeight?parseFloat(t.__overlayWeight)<parseFloat(e.__overlayWeight)?1:-1:0}),this.isOverLay)for(var e=[],r=0,n=t.length;r<n;r++){var o=t[r],i=o.resetLocation(),a=o.chartBounds,s=[{x:a.left,y:a.top},{x:a.left,y:a.bottom},{x:a.right,y:a.bottom},{x:a.right,y:a.top},{x:a.left,y:a.top}],u=!1;if(0!==r)for(var l=0;l<e.length;l++)if(this.isQuadrilateralOverLap(s,e[l])){u=!0;break}if(!u){e.push(s);for(var c=o.shapes,f=0,h=c.length;f<h;f++)c[f].refOriginalPosition=i,this.renderer.addShape(c[f])}}else for(var p=0,y=t.length;p<y;p++)for(var d=t[p],b=d.resetLocation(),v=d.shapes,m=0,g=v.length;m<g;m++)v[m].refOriginalPosition=b,this.renderer.addShape(v[m]);this.renderer.render()}}},{key:"getShapesByFeatureID",value:function(t){var e=[],r=this.renderer.getAllShapes();if(!t)return r;for(var n=0,o=r.length;n<o;n++){var i=r[n];i.refDataID&&t===i.refDataID&&e.push(i)}return e}},{key:"isQuadrilateralOverLap",value:function(t,e){var r=t.length,n=e.length;if(5!==r||5!==n)return null;for(var o=!1,i=0;i<r;i++)if(this.isPointInPoly(t[i],e)){o=!0;break}for(var a=0;a<n;a++)if(this.isPointInPoly(e[a],t)){o=!0;break}for(var s=0;s<r-1&&!o;s++)for(var u=0;u<n-1;u++){if("SuperMap.Geometry.Point"===C.lineIntersection(t[s],t[s+1],e[u],e[u+1]).CLASS_NAME){o=!0;break}}return o}},{key:"isPointInPoly",value:function(t,e){for(var r=!1,n=-1,o=e.length,i=o-1;++n<o;i=n)(e[n].y<=t.y&&t.y<e[i].y||e[i].y<=t.y&&t.y<e[n].y)&&t.x<(e[i].x-e[n].x)*(t.y-e[n].y)/(e[i].y-e[n].y)+e[n].x&&(r=!r);return r}},{key:"isChartInMap",value:function(t,e){for(var r=t,n=!1,o=0,i=e.length;o<i;o++){var a=e[o];if(a.x>=r.left&&a.x<=r.right&&a.y>=r.top&&a.y<=r.bottom){n=!0;break}}return n}},{key:"clearCache",value:function(){this.cache={},this.charts=[]}},{key:"removeFeatures",value:function(t){this.clearCache(),Xo(Ko(a.prototype),"removeFeatures",this).call(this,t)}},{key:"removeAllFeatures",value:function(){this.clearCache(),Xo(Ko(a.prototype),"removeAllFeatures",this).call(this)}},{key:"redraw",value:function(){return this.clearCache(),!!this.renderer&&(this.redrawThematicFeatures(this.map.getBounds()),!0)}},{key:"clear",value:function(){this.renderer&&(this.renderer.clearAll(),this.renderer.refresh()),this.removeAllFeatures(),this.clearCache()}}])&&Yo(e.prototype,r),n&&Yo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function ti(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ei=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="SuperMap.Feature.ShapeParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}])&&ti(e.prototype,r),n&&ti(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ri(t){"@babel/helpers - typeof";return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ni(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function oi(){return(oi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=si(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ii(t,e){return(ii=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ai(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=si(t);if(e){var o=si(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ri(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function si(t){return(si=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ui=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ii(t,e)}(i,ei);var e,r,n,o=ai(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).x=isNaN(t)?0:t,r.y=isNaN(e)?0:e,r.r=6,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Point",r}return e=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,oi(si(i.prototype),"destroy",this).call(this)}}])&&ni(e.prototype,r),n&&ni(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function li(t){"@babel/helpers - typeof";return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ci(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fi(){return(fi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yi(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function hi(t,e){return(hi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=yi(t);if(e){var o=yi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===li(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function yi(t){return(yi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var di=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hi(t,e)}(i,ei);var e,r,n,o=pi(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).pointList=t,e.CLASS_NAME="SuperMap.Feature.ShapeParameters.Line",e}return e=i,(r=[{key:"destroy",value:function(){this.pointList=null,fi(yi(i.prototype),"destroy",this).call(this)}}])&&ci(e.prototype,r),n&&ci(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function bi(t){"@babel/helpers - typeof";return(bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mi(){return(mi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Oi(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function gi(t,e){return(gi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Oi(t);if(e){var o=Oi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===bi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Oi(t){return(Oi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Si=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gi(t,e)}(i,ei);var e,r,n,o=wi(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).pointList=t,e.holePolygonPointLists=null,e.CLASS_NAME="SuperMap.Feature.ShapeParameters.Polygon",e}return e=i,(r=[{key:"destroy",value:function(){this.pointList=null,this.holePolygonPointLists=null,mi(Oi(i.prototype),"destroy",this).call(this)}}])&&vi(e.prototype,r),n&&vi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function _i(t){"@babel/helpers - typeof";return(_i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xi(){return(xi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ei(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ki(t,e){return(ki=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ji(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ei(t);if(e){var o=Ei(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===_i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ei(t){return(Ei=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ti=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ki(t,e)}(i,ei);var e,r,n,o=ji(i);function i(t,e,r,n){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this,t,e,r,n)).x=isNaN(t)?0:t,a.y=isNaN(t)?0:e,a.width=isNaN(r)?0:r,a.height=isNaN(n)?0:n,a.CLASS_NAME="SuperMap.Feature.ShapeParameters.Rectangle",a}return e=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.width=null,this.height=null,xi(Ei(i.prototype),"destroy",this).call(this)}}])&&Pi(e.prototype,r),n&&Pi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ci(t){"@babel/helpers - typeof";return(Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ri(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ai(){return(Ai="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ni(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Mi(t,e){return(Mi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Li(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ni(t);if(e){var o=Ni(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ci(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ni(t){return(Ni=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ii=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mi(t,e)}(i,ei);var e,r,n,o=Li(i);function i(t,e,r,n,a,s,u){var l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(l=o.call(this,t,e,r,n,a,s,u)).x=isNaN(t)?0:t,l.y=isNaN(e)?0:e,l.r=isNaN(r)?0:r,l.startAngle=isNaN(n)?0:n,l.endAngle=isNaN(a)?0:a,l.r0=isNaN(s)?0:s,l.clockWise=u,l.CLASS_NAME="SuperMap.Feature.ShapeParameters.Sector",l}return e=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,Ai(Ni(i.prototype),"destroy",this).call(this)}}])&&Ri(e.prototype,r),n&&Ri(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Di(t){"@babel/helpers - typeof";return(Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Bi(){return(Bi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ji(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Gi(t,e){return(Gi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ui(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ji(t);if(e){var o=Ji(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Di(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ji(t){return(Ji=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Vi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gi(t,e)}(i,ei);var e,r,n,o=Ui(i);function i(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t,e,r)).x=t,n.y=e,n.text=r,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Label",n}return e=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.text=null,Bi(Ji(i.prototype),"destroy",this).call(this)}}])&&Fi(e.prototype,r),n&&Fi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function zi(t){"@babel/helpers - typeof";return(zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Hi(){return(Hi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xi(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Wi(t,e){return(Wi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Yi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Xi(t);if(e){var o=Xi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===zi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Xi(t){return(Xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Qi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wi(t,e)}(i,ei);var e,r,n,o=Yi(i);function i(t,e,r,n,a,s,u,l,c){var f;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(f=o.call(this,t,e,r,n,a,s,u,l,c)).x=t,f.y=e,f.image=r,f.width=n,f.height=a,f.sx=s,f.sy=u,f.sWidth=l,f.sHeight=c,f.CLASS_NAME="SuperMap.Feature.ShapeParameters.Image",f}return e=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,Hi(Xi(i.prototype),"destroy",this).call(this)}}])&&qi(e.prototype,r),n&&qi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Zi(t){"@babel/helpers - typeof";return(Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ki(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $i(){return($i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ra(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ta(t,e){return(ta=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ea(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ra(t);if(e){var o=ra(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Zi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ra(t){return(ra=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var na=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ta(t,e)}(i,ei);var e,r,n,o=ea(i);function i(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t,e,r)).x=isNaN(t)?0:t,n.y=isNaN(e)?0:e,n.r=isNaN(r)?0:r,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Circle",n}return e=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,$i(ra(i.prototype),"destroy",this).call(this)}}])&&Ki(e.prototype,r),n&&Ki(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function oa(t){"@babel/helpers - typeof";return(oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ia(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function aa(){return(aa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=la(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function sa(t,e){return(sa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ua(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=la(t);if(e){var o=la(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===oa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function la(t){return(la=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ca=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sa(t,e)}(i,to);var e,r,n,o=ua(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type="smicpoint",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPoint",e}return e=i,(r=[{key:"destroy",value:function(){this.type=null,aa(la(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;t.arc(e.x+r[0],e.y+r[1],e.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition;return t.__rect?t.__rect:(e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+r[0]-t.r-e/2),y:Math.round(t.y+r[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect)}}])&&ia(e.prototype,r),n&&ia(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function fa(t){"@babel/helpers - typeof";return(fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ha(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pa(){return(pa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ba(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ya(t,e){return(ya=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function da(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ba(t);if(e){var o=ba(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===fa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ba(t){return(ba=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var va=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ya(t,e)}(i,to);var e,r,n,o=da(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type="smictext",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicText",e}return e=i,(r=[{key:"destroy",value:function(){this.type=null,pa(ba(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=this.style;if(e&&(n=this.getHighlightStyle(n,this.highlightStyle||{})),void 0!==n.text&&!1!==n.text){t.save(),this.doClip(t),this.setContext(t,n),this.setTransform(t),n.textFont&&(t.font=n.textFont),t.textAlign=n.textAlign||"start",t.textBaseline=n.textBaseline||"middle";var o,i=(n.text+"").split("\n"),a=yn.Util_area.getTextHeight("ZH",n.textFont),s=this.getRectNoRotation(n),u=n.x+r[0];o="top"==n.textBaseline?s.y:"bottom"==n.textBaseline?s.y+a:s.y+a/2;for(var l=n.x+r[0],c=n.y+r[1],f=0,h=i.length;f<h;f++){switch(n.labelRect&&(t.fillRect(s.x-2,s.y,s.width+4,s.height),t.fillStyle=n.strokeColor,t.strokeRect(s.x-2,s.y,s.width+4,s.height),t.fillStyle=n.textColor),n.brushType){case"stroke":this.setCtxGlobalAlpha(t,"stroke",n),n.textRotation&&0!==n.textRotation?(t.save(),t.translate(l,c),t.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?t.strokeText(i[f],0,a*f,n.maxWidth):t.strokeText(i[f],0,a*f):"bottom"==n.textBaseline?n.maxWidth?t.strokeText(i[f],0,a*(f+1)-s.height,n.maxWidth):t.strokeText(i[f],0,a*(f+1)-s.height):n.maxWidth?t.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth):t.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),t.restore()):n.maxWidth?t.strokeText(i[f],u,o,n.maxWidth):t.strokeText(i[f],u,o),this.setCtxGlobalAlpha(t,"reset",n);break;case"both":n.textRotation&&0!==n.textRotation?(t.save(),t.translate(l,c),t.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*f,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*f,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*f),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*f),this.setCtxGlobalAlpha(t,"reset",n)):"bottom"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*(f+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*(f+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(t,"reset",n)):n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(t,"reset",n)),t.restore()):n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],u,o,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],u,o,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],u,o),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],u,o),this.setCtxGlobalAlpha(t,"reset",n));break;default:this.setCtxGlobalAlpha(t,"fill",n),n.textRotation&&0!==n.textRotation?(t.save(),t.translate(l,c),t.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?t.fillText(i[f],0,a*f,n.maxWidth):t.fillText(i[f],0,a*f):"bottom"==n.textBaseline?n.maxWidth?t.fillText(i[f],0,a*(f+1)-s.height,n.maxWidth):t.fillText(i[f],0,a*(f+1)-s.height):n.maxWidth?t.fillText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth):t.fillText(i[f],0,a*(f+1)-s.height/2-a/2),t.restore()):n.maxWidth?t.fillText(i[f],u,o,n.maxWidth):t.fillText(i[f],u,o),this.setCtxGlobalAlpha(t,"reset",n)}o+=a}t.restore()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;for(var e,r,n,o,i=this.getTextBackground(t,!0),a=0,s=i.length;a<s;a++){var u=i[a];0==a?(e=u[0],n=u[0],r=u[1],o=u[1]):(u[0]<e&&(e=u[0]),u[0]>n&&(n=u[0]),u[1]<r&&(r=u[1]),u[1]>o&&(o=u[1]))}return t.__rect={x:e,y:r,width:n-e,height:o-r},t.__rect}},{key:"getRectNoRotation",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition,n=yn.Util_area.getTextHeight("ZH",t.textFont),o=yn.Util_area.getTextWidth(t.text,t.textFont),i=yn.Util_area.getTextHeight(t.text,t.textFont),a=t.x+r[0];"end"==t.textAlign||"right"==t.textAlign?a-=o:"center"==t.textAlign&&(a-=o/2),e="top"==t.textBaseline?t.y+r[1]:"bottom"==t.textBaseline?t.y+r[1]-i:t.y+r[1]-i/2;var s,u=!1;if(t.maxWidth){var l=parseInt(t.maxWidth);l<o&&(s=o,u=!0,o=l),a=t.x+r[0],"end"==t.textAlign||"right"==t.textAlign?a-=o:"center"==t.textAlign&&(a-=o/2)}t.textFont&&(t.textFont.toLowerCase().indexOf("italic")>-1&&(o+=!0===u?n/3*(o/s):n/3));return{x:a,y:e,width:o,height:i}}},{key:"getTextBackground",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;if(!e&&t.__textBackground)return t.__textBackground;var n=this.getRectNoRotation(t),o=t.x+r[0],i=t.y+r[1],a=[];if(t.textRotation&&0!==t.textRotation){var s=t.textRotation,u=this.getRotatedLocation(n.x,n.y,o,i,s),l=this.getRotatedLocation(n.x+n.width,n.y,o,i,s),c=this.getRotatedLocation(n.x+n.width,n.y+n.height,o,i,s),f=this.getRotatedLocation(n.x,n.y+n.height,o,i,s);a.push(u),a.push(l),a.push(c),a.push(f)}else{var h=[n.x,n.y],p=[n.x+n.width,n.y],y=[n.x+n.width,n.y+n.height],d=[n.x,n.y+n.height];a.push(h),a.push(p),a.push(y),a.push(d)}return t.__textBackground=a,t.__textBackground}},{key:"getRotatedLocation",value:function(t,e,r,n,o){var i,a,s=new Array;return e=-e,n=-n,o=-o,i=(t-r)*Math.cos(o/180*Math.PI)-(e-n)*Math.sin(o/180*Math.PI)+r,a=(t-r)*Math.sin(o/180*Math.PI)+(e-n)*Math.cos(o/180*Math.PI)+n,s[0]=i,s[1]=-a,s}}])&&ha(e.prototype,r),n&&ha(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ma(t){"@babel/helpers - typeof";return(ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ga(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function wa(){return(wa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_a(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Oa(t,e){return(Oa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Sa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=_a(t);if(e){var o=_a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ma(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function _a(t){return(_a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oa(t,e)}(i,to);var e,r,n,o=Sa(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type="smiccircle",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicCircle",e}return e=i,(r=[{key:"destroy",value:function(){this.type=null,wa(_a(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=e.x+r[0],o=e.y+r[1];return t.moveTo(n+e.r,o),t.arc(n,o,e.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition,n=t.x+r[0],o=t.y+r[1],i=t.r;return e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(n-i-e/2),y:Math.round(o-i-e/2),width:2*i+e,height:2*i+e},t.__rect}}])&&ga(e.prototype,r),n&&ga(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function xa(t){"@babel/helpers - typeof";return(xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ka(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ja(){return(ja="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ca(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ea(t,e){return(Ea=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ta(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ca(t);if(e){var o=Ca(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===xa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ca(t){return(Ca=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ra=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ea(t,e)}(i,to);var e,r,n,o=Ta(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type="smicpolygon",e.holePolygonPointLists=null,e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPolygon",e}return e=i,(r=[{key:"destroy",value:function(){this.type=null,this.holePolygonPointLists=null,ja(Ca(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.style;e&&(r=this.getHighlightStyle(r,this.highlightStyle||{})),t.save(),this.setContext(t,r),this.setTransform(t);var n=!1;"fill"!=r.brushType&&"both"!=r.brushType&&void 0!==r.brushType||(t.beginPath(),"dashed"==r.lineType||"dotted"==r.lineType||"dot"==r.lineType||"dash"==r.lineType||"dashdot"==r.lineType||"longdash"==r.lineType||"longdashdot"==r.lineType?this.buildPath(t,{lineType:"solid",lineWidth:r.lineWidth,pointList:r.pointList}):(this.buildPath(t,r),n=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",r),t.fill(),this.setCtxGlobalAlpha(t,"reset",r)),r.lineWidth>0&&("stroke"==r.brushType||"both"==r.brushType)&&(n||(t.beginPath(),this.buildPath(t,r)),this.setCtxGlobalAlpha(t,"stroke",r),t.stroke(),this.setCtxGlobalAlpha(t,"reset",r)),this.drawText(t,r,this.style);var o=C.cloneObject(r);if(o.pointList&&this.holePolygonPointLists&&this.holePolygonPointLists.length>0)for(var i=this.holePolygonPointLists,a=i.length,s=0;s<a;s++){var u=i[s];o.pointList=u,t.globalCompositeOperation="destination-out",n=!1,"fill"!=o.brushType&&"both"!=o.brushType&&void 0!==o.brushType||(t.beginPath(),"dashed"==o.lineType||"dotted"==o.lineType||"dot"==o.lineType||"dash"==o.lineType||"dashdot"==o.lineType||"longdash"==o.lineType||"longdashdot"==o.lineType?this.buildPath(t,{lineType:"solid",lineWidth:o.lineWidth,pointList:o.pointList}):(this.buildPath(t,o),n=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",o),t.fill(),this.setCtxGlobalAlpha(t,"reset",o)),o.lineWidth>0&&("stroke"==o.brushType||"both"==o.brushType)?(n||(t.beginPath(),this.buildPath(t,o)),t.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(t,"stroke",o),t.stroke(),this.setCtxGlobalAlpha(t,"reset",o)):t.globalCompositeOperation="source-over"}t.restore()}},{key:"buildPath",value:function(t,e){e.showShadow&&(t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=e.pointList;if(!(n.length<2))if(e.smooth&&"spline"!==e.smooth){var o,i,a,s=yn.SUtil_smoothBezier(n,e.smooth,!0,e.smoothConstraint,r);t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var u=n.length,l=0;l<u;l++)o=s[2*l],i=s[2*l+1],a=[n[(l+1)%u][0]+r[0],n[(l+1)%u][1]+r[1]],t.bezierCurveTo(o[0],o[1],i[0],i[1],a[0],a[1])}else if("spline"===e.smooth&&(n=yn.SUtil_smoothSpline(n,!0,null,r)),e.lineType&&"solid"!=e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var c=e._dashLength||(e.lineWidth||1)*("dashed"==e.lineType?5:1);e._dashLength=c;var f=e.lineWidth||1,h=f,p=f;"dashed"===e.lineType&&(h*=5,p*=5,e.lineCap&&"butt"!==e.lineCap&&(h-=f,p+=f)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(h=1,p+=f),"dot"===e.lineType&&(p*=4,e.lineCap&&"butt"!==e.lineCap&&(h=1,p+=f)),"dash"===e.lineType&&(h*=4,p*=4,e.lineCap&&"butt"!==e.lineCap&&(h-=f,p+=f)),"longdash"===e.lineType&&(h*=8,p*=4,e.lineCap&&"butt"!==e.lineCap&&(h-=f,p+=f)),t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var y=1;y<n.length;y++)yn.SUtil_dashedLineTo(t,n[y-1][0]+r[0],n[y-1][1]+r[1],n[y][0]+r[0],n[y][1]+r[1],f,[h,p]);yn.SUtil_dashedLineTo(t,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],f,[h,p])}else if("dashdot"===e.lineType||"longdashdot"===e.lineType){var d=e._dashLength||(e.lineWidth||1)*("dashed"==e.lineType?5:1);e._dashLength=d;var b=e.lineWidth||1,v=b,m=b,g=b,w=b;"dashdot"===e.lineType&&(v*=4,m*=4,w*=4,e.lineCap&&"butt"!==e.lineCap&&(v-=b,m+=b,g=1,w+=b)),"longdashdot"===e.lineType&&(v*=8,m*=4,w*=4,e.lineCap&&"butt"!==e.lineCap&&(v-=b,m+=b,g=1,w+=b)),t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var O=1;O<n.length;O++)yn.SUtil_dashedLineTo(t,n[O-1][0]+r[0],n[O-1][1]+r[1],n[O][0]+r[0],n[O][1]+r[1],b,[v,m,g,w]);yn.SUtil_dashedLineTo(t,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],b,[v,m,g,w])}}else{t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var S=1;S<n.length;S++)t.lineTo(n[S][0]+r[0],n[S][1]+r[1]);t.lineTo(n[0][0]+r[0],n[0][1]+r[1])}}},{key:"getRect",value:function(t,e){var r;if(e?r=e:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),r=this.refOriginalPosition),t.__rect)return t.__rect;for(var n,o=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MAX_VALUE,s=Number.MIN_VALUE,u=t.pointList,l=0,c=u.length;l<c;l++)u[l][0]+r[0]<o&&(o=u[l][0]+r[0]),u[l][0]+r[0]>i&&(i=u[l][0]+r[0]),u[l][1]+r[1]<a&&(a=u[l][1]+r[1]),u[l][1]+r[1]>s&&(s=u[l][1]+r[1]);return n="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(o-n/2),y:Math.round(a-n/2),width:i-o+n,height:s-a+n},t.__rect}}])&&ka(e.prototype,r),n&&ka(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Aa(t){"@babel/helpers - typeof";return(Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ma(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function La(){return(La="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Da(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Na(t,e){return(Na=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ia(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Da(t);if(e){var o=Da(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Aa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Da(t){return(Da=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Na(t,e)}(i,to);var e,r,n,o=Ia(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).brushTypeOnly="stroke",e.textPosition="end",e.type="smicbroken-line",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicBrokenLine",e}return e=i,(r=[{key:"destroy",value:function(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,La(Da(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=e.pointList;if(!(n.length<2)){var o=Math.min(e.pointList.length,Math.round(e.pointListLength||e.pointList.length));if(e.smooth&&"spline"!==e.smooth){var i,a,s,u=yn.SUtil_smoothBezier(n,e.smooth,!1,e.smoothConstraint,r);t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var l=0;l<o-1;l++)i=u[2*l],a=u[2*l+1],s=[n[l+1][0]+r[0],n[l+1][1]+r[1]],t.bezierCurveTo(i[0],i[1],a[0],a[1],s[0],s[1])}else if("spline"===e.smooth&&(o=(n=yn.SUtil_smoothSpline(n,null,null,r)).length),e.lineType&&"solid"!==e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var c=e.lineWidth||1,f=c,h=c;"dashed"===e.lineType&&(f*=5,h*=5,e.lineCap&&"butt"!==e.lineCap&&(f-=c,h+=c)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(f=1,h+=c),"dot"===e.lineType&&(h*=4,e.lineCap&&"butt"!==e.lineCap&&(f=1,h+=c)),"dash"===e.lineType&&(f*=4,h*=4,e.lineCap&&"butt"!==e.lineCap&&(f-=c,h+=c)),"longdash"===e.lineType&&(f*=8,h*=4,e.lineCap&&"butt"!==e.lineCap&&(f-=c,h+=c)),t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var p=1;p<o;p++)yn.SUtil_dashedLineTo(t,n[p-1][0]+r[0],n[p-1][1]+r[1],n[p][0]+r[0],n[p][1]+r[1],c,[f,h])}else if("dashdot"===e.lineType||"longdashdot"===e.lineType){var y=e.lineWidth||1,d=y,b=y,v=y,m=y;"dashdot"===e.lineType&&(d*=4,b*=4,m*=4,e.lineCap&&"butt"!==e.lineCap&&(d-=y,b+=y,v=1,m+=y)),"longdashdot"===e.lineType&&(d*=8,b*=4,m*=4,e.lineCap&&"butt"!==e.lineCap&&(d-=y,b+=y,v=1,m+=y)),y=(e.lineWidth||1)*("dashed"===e.lineType?5:1),t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var g=1;g<o;g++)yn.SUtil_dashedLineTo(t,n[g-1][0]+r[0],n[g-1][1]+r[1],n[g][0]+r[0],n[g][1]+r[1],y,[d,b,v,m])}}else{t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var w=1;w<o;w++)t.lineTo(n[w][0]+r[0],n[w][1]+r[1])}}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return Ra.prototype.getRect.apply(this,[t,e])}}])&&Ma(e.prototype,r),n&&Ma(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ba(t){"@babel/helpers - typeof";return(Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ga(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ua(){return(Ua="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=za(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ja(t,e){return(Ja=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Va(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=za(t);if(e){var o=za(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ba(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function za(t){return(za=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ja(t,e)}(i,to);var e,r,n,o=Va(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type="smicrectangle",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicRectangle",e}return e=i,(r=[{key:"destroy",value:function(){this.type=null,Ua(za(i.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r,n,o,i,a,s=this.refOriginalPosition,u=e.x+s[0],l=e.y+s[1],c=e.width,f=e.height,h=e.radius;"number"==typeof h?r=n=o=i=h:h instanceof Array?1===h.length?r=n=o=i=h[0]:2===h.length?(r=o=h[0],n=i=h[1]):3===h.length?(r=h[0],n=i=h[1],o=h[2]):(r=h[0],n=h[1],o=h[2],i=h[3]):r=n=o=i=0,r+n>c&&(r*=c/(a=r+n),n*=c/a),o+i>c&&(o*=c/(a=o+i),i*=c/a),n+o>f&&(n*=f/(a=n+o),o*=f/a),r+i>f&&(r*=f/(a=r+i),i*=f/a),t.moveTo(u+r,l),t.lineTo(u+c-n,l),0!==n&&t.quadraticCurveTo(u+c,l,u+c,l+n),t.lineTo(u+c,l+f-o),0!==o&&t.quadraticCurveTo(u+c,l+f,u+c-o,l+f),t.lineTo(u+i,l+f),0!==i&&t.quadraticCurveTo(u,l+f,u,l+f-i),t.lineTo(u,l+r),0!==r&&t.quadraticCurveTo(u,l,u+r,l)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;e.radius?this._buildRadiusPath(t,e):(t.moveTo(e.x+r[0],e.y+r[1]),t.lineTo(e.x+r[0]+e.width,e.y+r[1]),t.lineTo(e.x+r[0]+e.width,e.y+r[1]+e.height),t.lineTo(e.x+r[0],e.y+r[1]+e.height),t.lineTo(e.x+r[0],e.y+r[1])),t.closePath()}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition;return t.__rect?t.__rect:(e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+r[0]-e/2),y:Math.round(t.y+r[1]-e/2),width:t.width+e,height:t.height+e},t.__rect)}}])&&Ga(e.prototype,r),n&&Ga(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ha(t){"@babel/helpers - typeof";return(Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ya(){return(Ya="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Za(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Xa(t,e){return(Xa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Qa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Za(t);if(e){var o=Za(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ha(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Za(t){return(Za=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ka=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xa(t,e)}(i,to);var e,r,n,o=Qa(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type="smicsector",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicSector",e}return e=i,(r=[{key:"destroy",value:function(){this.type=null,Ya(Za(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=e.x+r[0],o=e.y+r[1],i=e.r0||0,a=e.r,s=e.startAngle,u=e.endAngle,l=e.clockWise||!1;s=yn.Util_math.degreeToRadian(s),u=yn.Util_math.degreeToRadian(u),l||(s=-s,u=-u);var c=yn.Util_math.cos(s),f=yn.Util_math.sin(s);t.moveTo(c*i+n,f*i+o),t.lineTo(c*a+n,f*a+o),t.arc(n,o,a,s,u,!l),t.lineTo(yn.Util_math.cos(u)*i+n,yn.Util_math.sin(u)*i+o),0!==i&&t.arc(n,o,i,u,s,l),t.closePath()}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition,r=yn.Util_vector.create(),n=yn.Util_vector.create(),o=yn.Util_vector.create(),i=yn.Util_vector.create(),a=t.x+e[0],s=t.y+e[1],u=t.r0||0,l=t.r,c=yn.Util_math.degreeToRadian(t.startAngle),f=yn.Util_math.degreeToRadian(t.endAngle),h=t.clockWise;return h||(c=-c,f=-f),u>1?yn.Util_computeBoundingBox.arc(a,s,u,c,f,!h,r,o):(r[0]=o[0]=a,r[1]=o[1]=s),yn.Util_computeBoundingBox.arc(a,s,l,c,f,!h,n,i),yn.Util_vector.min(r,r,n),yn.Util_vector.max(o,o,i),t.__rect={x:r[0],y:r[1],width:o[0]-r[0],height:o[1]-r[1]},t.__rect}}])&&Wa(e.prototype,r),n&&Wa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function $a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ts=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.shapeParameters=e,this.CLASS_NAME="SuperMap.Feature.ShapeFactory"}var e,r,n;return e=t,n=[{key:"transformStyle",value:function(t){var e={},r=["normal","normal","normal","12","arial,sans-serif"],n=[!0,!1];for(var o in t)switch(o){case"fill":n[0]=t[o];break;case"fillColor":e.color=t[o];break;case"stroke":n[1]=t[o];break;case"strokeWidth":e.lineWidth=t[o];break;case"strokeLinecap":e.lineCap=t[o];break;case"strokeLineJoin":e.lineJoin=t[o];break;case"strokeDashstyle":e.lineType=t[o];break;case"pointRadius":e.r=t[o];break;case"label":e.text=t[o];break;case"labelRect":e.labelRect=t[o];break;case"fontColor":e.textColor=t[o];break;case"fontStyle":r[0]=t[o];break;case"fontVariant":r[1]=t[o];break;case"fontWeight":r[2]=t[o];break;case"fontSize":var i="";t[o]&&t[o].toString().indexOf("px")<0&&(i="px"),r[3]=t[o]+i;break;case"fontFamily":r[4]=t[o];break;case"fontOpacity":e.opacity=t[o];break;case"labelPosition":e.textPosition=t[o];break;case"labelAlign":e.textAlign=t[o];break;case"labelBaseline":e.textBaseline=t[o];break;case"labelRotation":e.textRotation=t[o];break;default:e[o]=t[o]}return e.textFont=r.join(" "),!0===n[0]&&!1===n[1]?e.brushType="fill":!1===n[0]&&!0===n[1]?e.brushType="stroke":!0===n[0]&&!0===n[1]?e.brushType="both":e.brushType="fill",null==e.lineWidth&&(e.lineWidth=1),e}},{key:"Background",value:function(t,e,r){var n=r||{},o=new Ti(e[0],e[3],Math.abs(e[2]-e[0]),Math.abs(e[3]-e[1]));return o.style={fillColor:"#f3f3f3"},n.backgroundStyle&&C.copyAttributesWithClip(o.style,n.backgroundStyle),n.backgroundRadius&&(o.style.radius=n.backgroundRadius),o.clickable=!1,o.hoverable=!1,t.createShape(o)}},{key:"GraphAxis",value:function(t,e,r,n){var o=e,i=r||{},a=[],s=[],u=!!i.useXReferenceLine&&i.useXReferenceLine,l=i.axisYTick&&!isNaN(i.axisYTick)?i.axisYTick:0,c=[],f=[];if(0==l){if(f.push([o[0],o[3]-5]),f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var h=parseInt(i.axis3DParameter),p=[o[0]-h,o[1]+h];i.axisUseArrow?(c.push([p[0]+1.5,p[1]-7.5]),c.push([p[0]-1,p[1]+1]),c.push([p[0]+7.5,p[1]-1.5]),f.push([p[0],p[1]])):f.push([p[0],p[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}else{var y=Math.abs(o[1]-o[3])/l,d=o[3];f.push([o[0],d-5]);for(var b=0;b<l;b++){if(f.push([o[0],d]),f.push([o[0]-5,d]),f.push([o[0],d]),u){var v=new di([[o[0],d],[o[2],d]]);v.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},v.clickable=!1,v.hoverable=!1,i.xReferenceLineStyle&&C.copyAttributesWithClip(v.style,i.xReferenceLineStyle),a.push(t.createShape(v))}d+=y}if(f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var m=parseInt(i.axis3DParameter),g=[o[0]-m,o[1]+m];i.axisUseArrow?(c.push([g[0]+1.5,g[1]-7.5]),c.push([g[0]-1,g[1]+1]),c.push([g[0]+7.5,g[1]-1.5]),f.push([g[0],g[1]])):f.push([g[0],g[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}if(i.axisUseArrow){var w=[[o[2]+5,o[1]+4],[o[2]+13,o[1]],[o[2]+5,o[1]-4]],O=[[o[0]-4,o[3]-5],[o[0],o[3]-13],[o[0]+4,o[3]-5]],S=new Si(w);S.style={fillColor:"#008acd"},C.copyAttributesWithClip(S.style,i.axisStyle),s.push(t.createShape(S));var _=new Si(O);if(_.style={fillColor:"#008acd"},C.copyAttributesWithClip(_.style,i.axisStyle),s.push(t.createShape(_)),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var P=new Si(c);P.style={fillColor:"#008acd"},C.copyAttributesWithClip(P.style,i.axisStyle),s.push(t.createShape(P))}}var x=new di(f);x.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},i.axisStyle&&C.copyAttributesWithClip(x.style,i.axisStyle),x.clickable=!1,x.hoverable=!1;var k=[t.createShape(x)],j=[];if(i.axisYLabels&&i.axisYLabels.length&&i.axisYLabels.length>0){var E=i.axisYLabels,T=E.length,R=[0,0];if(i.axisYLabelsOffset&&i.axisYLabelsOffset.length&&(R=i.axisYLabelsOffset),1==T){var A=new Vi(o[0]-5+R[0],o[3]+R[1],E[0]);A.style={labelAlign:"right"},i.axisYLabelsStyle&&C.copyAttributesWithClip(A.style,i.axisYLabelsStyle),A.clickable=!1,A.hoverable=!1,j.push(t.createShape(A))}else for(var M=o[3],L=Math.abs(o[1]-o[3])/(T-1),N=0;N<T;N++){var I=new Vi(o[0]-5+R[0],M+R[1],E[N]);I.style={labelAlign:"right"},i.axisYLabelsStyle&&C.copyAttributesWithClip(I.style,i.axisYLabelsStyle),I.clickable=!1,I.hoverable=!1,j.push(t.createShape(I)),M+=L}}var D=[];if(i.axisXLabels&&i.axisXLabels.length&&i.axisXLabels.length>0){var F=i.axisXLabels,B=F.length,G=[0,0];if(i.axisXLabelsOffset&&i.axisXLabelsOffset.length&&(G=i.axisXLabelsOffset),n&&n.xPositions&&n.xPositions.length&&n.xPositions.length==B)for(var U=n.xPositions,J=0;J<B;J++){var V=new Vi(U[J]+G[0],o[1]+G[1],F[J]);V.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&C.copyAttributesWithClip(V.style,i.axisXLabelsStyle),V.clickable=!1,V.hoverable=!1,D.push(t.createShape(V))}else if(1==B){var z=new Vi(o[0]-5+G[0],o[1]+G[0],F[0]);z.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&C.copyAttributesWithClip(z.style,i.axisXLabelsStyle),z.clickable=!1,z.hoverable=!1,D.push(t.createShape(z))}else for(var q=o[0],H=Math.abs(o[2]-o[0])/(B-1),W=0;W<B;W++){var Y=new Vi(q+G[0],o[1]+G[1],F[W]);Y.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&C.copyAttributesWithClip(Y.style,i.axisXLabelsStyle),Y.clickable=!1,Y.hoverable=!1,D.push(t.createShape(Y)),q+=H}}return a.concat(k).concat(j).concat(D).concat(s)}},{key:"ShapeStyleTool",value:function(t,e,r,n,o,i){var a=t||{};if(e&&C.copyAttributesWithClip(a,e),r&&r.length&&void 0!==o&&!isNaN(o)&&o>=0&&r[o]&&C.copyAttributesWithClip(a,r[o]),n&&n.length&&void 0!==i)for(var s=n,u=s.length,l=parseFloat(i),c=0;c<u;c++)if(s[c].start<=l&&l<s[c].end){C.copyAttributesWithClip(a,s[c].style);break}return a}}],(r=[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(e){if(e&&(this.shapeParameters=e),!this.shapeParameters)return null;var r=this.shapeParameters;if(r instanceof ui){var n=new Object;n.x=r.x,n.y=r.y,n.r=r.r,n=C.copyAttributesWithClip(n,r.style,["x","y"]);var o=new ca;return o.style=t.transformStyle(n),o.highlightStyle=t.transformStyle(r.highlightStyle),C.copyAttributesWithClip(o,r,["x","y","style","highlightStyle"]),o}if(r instanceof di){if(!r.pointList)return null;var i=new Object;i.pointList=r.pointList,i=C.copyAttributesWithClip(i,r.style,["pointList"]);var a=new Fa;return a.style=t.transformStyle(i),a.highlightStyle=t.transformStyle(r.highlightStyle),C.copyAttributesWithClip(a,r,["pointList","style","highlightStyle"]),a}if(r instanceof Si){if(!r.pointList)return null;var s=new Object;s.pointList=r.pointList,s=C.copyAttributesWithClip(s,r.style,["pointList"]);var u=new Ra;return u.style=t.transformStyle(s),u.highlightStyle=t.transformStyle(r.highlightStyle),C.copyAttributesWithClip(u,r,["pointList","style","highlightStyle"]),u}if(r instanceof Ti){if(!r.x&&!r.y&!r.width&!r.height)return null;var l=new Object;l.x=r.x,l.y=r.y,l.width=r.width,l.height=r.height,l=C.copyAttributesWithClip(l,r.style,["x","y","width","height"]);var c=new qa;return c.style=t.transformStyle(l),c.highlightStyle=t.transformStyle(r.highlightStyle),C.copyAttributesWithClip(c,r,["x","y","width","height","style","highlightStyle"]),c}if(r instanceof Ii){var f=new Object;f.x=r.x,f.y=r.y,f.r=r.r,f.startAngle=r.startAngle,f.endAngle=r.endAngle,r.r0&&(f.r0=r.r0),r.clockWise&&(f.clockWise=r.clockWise),f=C.copyAttributesWithClip(f,r.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var h=new Ka;return h.style=t.transformStyle(f),h.highlightStyle=t.transformStyle(r.highlightStyle),C.copyAttributesWithClip(h,r,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),h}if(r instanceof Vi){var p=new Object;p.x=r.x,p.y=r.y,p.text=r.text,p=C.copyAttributesWithClip(p,r.style,["x","y","text"]);var y=new va;return y.style=t.transformStyle(p),y.highlightStyle=t.transformStyle(r.highlightStyle),C.copyAttributesWithClip(y,r,["x","y","text","style","highlightStyle"]),y}if(r instanceof Qi){var d=new Object;d.x=r.x,d.y=r.y,r.image&&(d.image=r.image),r.width&&(d.width=r.width),r.height&&(d.height=r.height),r.sx&&(d.sx=r.sx),r.sy&&(d.sy=r.sy),r.sWidth&&(d.sWidth=r.sWidth),r.sHeight&&(d.sHeight=r.sHeight),d=C.copyAttributesWithClip(d,r.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var b=new so;return b.style=t.transformStyle(d),b.highlightStyle=t.transformStyle(r.highlightStyle),C.copyAttributesWithClip(b,r,["x","y","image","width","height","style","highlightStyle"]),b}if(r instanceof na){var v=new Object;v.x=r.x,v.r=r.r,v.y=r.y,v=C.copyAttributesWithClip(v,r.style,["x","y","r"]);var m=new Pa;return m.style=t.transformStyle(v),m.highlightStyle=t.transformStyle(r.highlightStyle),C.copyAttributesWithClip(m,r,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),m}return null}}])&&$a(e.prototype,r),n&&$a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function es(t){"@babel/helpers - typeof";return(es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ns(){return(ns="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=us(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function os(t,e){return(os=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function is(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=us(t);if(e){var o=us(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return as(this,r)}}function as(t,e){if(e&&("object"===es(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ss(t)}function ss(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function us(t){return(us=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ls=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&os(t,e)}(i,Mr);var e,r,n,o=is(i);function i(t,e,r,n,a){var s;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),s=o.call(this,t,e),!t.geometry)return as(s);if(!(t.geometry instanceof m))return as(s);s.dataBounds=t.geometry.getBounds(),s.nodesClipPixel=2,s.isHoverAble=!0,s.isMultiHover=!0,s.isClickAble=!0,s.highlightStyle=null,s.shapeOptions={},s.style=r||{},s.CLASS_NAME="SuperMap.Feature.Theme.Vector",s.style=r||{},n&&C.copyAttributesWithClip(ss(s),n,["shapeOptions","dataBounds"]),a&&C.copyAttributesWithClip(s.shapeOptions,a);var u=t.geometry;return s.lonlat=s.dataBounds.getCenterLonLat(),s.location=s.getLocalXY(s.lonlat),u instanceof St?s.lineToTF(u):u instanceof dt?s.lineToTF(u):u instanceof ut||(u instanceof rt?s.multiPointToTF(u):u instanceof ee?s.multiLineStringToTF(u):u instanceof se?s.multiPolygonToTF(u):u instanceof Et?s.polygonToTF(u):u instanceof Q||(u instanceof V?s.pointToTF(u):u instanceof An?s.rectangleToTF(u):u instanceof Rr&&s.geoTextToTF(u))),s}return e=i,(r=[{key:"destroy",value:function(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,ns(us(i.prototype),"destroy",this).call(this)}},{key:"lineToTF",value:function(t){for(var e=t.components,r=[],n=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<e.length;s++){var u=e[s];if(n=[],r=this.getLocalXY(u),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var l=i[i.length-1];if(Math.abs(l[0]-n[0])<=a&&Math.abs(l[1]-n[1])<=a)continue}i.push(n)}if(i.length<2)return null;var c=new Object;(c=C.copyAttributesWithClip(c,this.style,["pointList"])).pointList=i;var f=new Fa({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=this.location,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&C.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}},{key:"multiPointToTF",value:function(t){for(var e=t.components,r=[],n=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<e.length;s++){var u=e[s];if(n=[],r=this.getLocalXY(u),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var l=i[i.length-1];if(Math.abs(l[0]-n[0])<=a&&Math.abs(l[1]-n[1])<=a)continue}i.push(n);var c=new Object;c.r=6,(c=C.copyAttributesWithClip(c,this.style)).x=n[0],c.y=n[1];var f=new ca({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=o,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&C.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}}},{key:"multiLineStringToTF",value:function(t){for(var e=t.components,r=0;r<e.length;r++){var n=e[r];this.lineToTF(n)}}},{key:"multiPolygonToTF",value:function(t){for(var e=t.components,r=0;r<e.length;r++){var n=e[r];this.polygonToTF(n)}}},{key:"pointToTF",value:function(t){var e=this.location,r=this.getLocalXY(t),n=new Object;n.r=6,(n=C.copyAttributesWithClip(n,this.style)).x=r[0]-e[0],n.y=r[1]-e[1];var o=new ca({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=e,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&C.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"polygonToTF",value:function(t){for(var e=t.components,r=[],n=[],o=this.location,i=[],a=[],s=[],u=this.nodesClipPixel,l=0;l<e.length;l++){var c=e[l].components;if(0===l){i=[];for(var f=0;f<c.length;f++){if(n=[],r=this.getLocalXY(c[f]),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var h=i[i.length-1];if(Math.abs(h[0]-n[0])<=u&&Math.abs(h[1]-n[1])<=u)continue}i.push(n)}}else{a=[];for(var p=0;p<c.length;p++){if(n=[],r=this.getLocalXY(c[p]),n[0]=r[0]-o[0],n[1]=r[1]-o[1],a.length>0){var y=a[a.length-1];if(Math.abs(y[0]-n[0])<=u&&Math.abs(y[1]-n[1])<=u)continue}a.push(n)}}a.length<2||s.push(a)}if(!(i.length<2)){var d={};(d=C.copyAttributesWithClip(d,this.style,["pointList"])).pointList=i;var b=new Ra({style:d,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(b.highlightStyle=this.highlightStyle),b.refOriginalPosition=this.location,b.refDataID=this.data.id,b.isHoverByRefDataID=this.isMultiHover,s.length>0&&(b.holePolygonPointLists=s),this.shapeOptions&&C.copyAttributesWithClip(b,this.shapeOptions),this.shapes.push(b)}}},{key:"rectangleToTF",value:function(t){var e=this.location,r=new L(t.x,t.y),n=this.layer.map.getResolution(),o=this.getLocalXY(r),i=new Object;i.r=6,(i=C.copyAttributesWithClip(i,this.style)).x=o[0]-e[0],i.y=o[1]-e[1]-2*t.width/n,i.width=t.width/n,i.height=t.height/n;var a=new qa({style:i,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(a.highlightStyle=this.highlightStyle),a.refOriginalPosition=e,a.refDataID=this.data.id,a.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&C.copyAttributesWithClip(a,this.shapeOptions),this.shapes.push(a)}},{key:"geoTextToTF",value:function(t){var e=this.location,r=this.getLocalXY(t),n=new Object;n.r=6,(n=C.copyAttributesWithClip(n,this.style,["x","y","text"])).x=r[0]-e[0],n.y=r[1]-e[1],n.text=t.text;var o=new va({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=e,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&C.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"updateAndAddShapes",value:function(){var t=this.getLocalXY(this.lonlat);this.location=t;for(var e=this.layer.renderer,r=0,n=this.shapes.length;r<n;r++){var o=this.shapes[r];o.refOriginalPosition=t,e.addShape(o)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}}])&&rs(e.prototype,r),n&&rs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function cs(t){"@babel/helpers - typeof";return(cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function hs(t,e){return(hs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ps(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ds(t);if(e){var o=ds(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===cs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ys(t)}(this,r)}}function ys(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ds(t){return(ds=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hs(t,e)}(a,Ho);var e,r,n,i=ps(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t,e)).name=null,r.style=null,r.highlightStyle=null,r.nodesClipPixel=2,r.isHoverAble=!1,r.isMultiHover=!1,r.isClickAble=!0,r.isAllowFeatureStyle=!1,C.extend(ys(r),e),r.cache=e.cache||{},r.cacheFields=e.cacheFields||[],r.maxCacheCount=e.maxCacheCount||0,r.isCustomSetMaxCacheCount=void 0!==e.isCustomSetMaxCacheCount&&e.isCustomSetMaxCacheCount,r}return e=a,(r=[{key:"addFeatures",value:function(t){o().Evented.prototype.fire("beforefeaturesadded",{features:t}),this.features=this.toiClientFeature(t),this.isCustomSetMaxCacheCount||(this.maxCacheCount=5*this.features.length),this.renderer&&this.redrawThematicFeatures(this.map.getBounds())}},{key:"removeFeatures",value:function(t){this.clearCache(),Ho.prototype.removeFeatures.call(this,t)}},{key:"removeAllFeatures",value:function(){this.clearCache(),Ho.prototype.removeAllFeatures.apply(this,arguments)}},{key:"redrawThematicFeatures",value:function(t){this.clearCache();var e=this.renderer.getHoverOne(),r=null;e&&e.refDataID&&(r=e.refDataID),this.renderer.clearAll();for(var n=this.features,o=this.cache,i=this.cacheFields,a=this.map.getZoom(),s=this.maxCacheCount,u=0,l=n.length;u<l;u++){var c,f=n[u].id+"_zoom_"+a.toString();if(o[f])o[f].updateAndAddShapes();else{if((c=this.createThematicFeature(n[u])).getShapesCount()<1)continue;if(o[f]=c,i.push(f),i.length>s){var h=i[0];i.splice(0,1),delete o[h]}}}if(this.renderer.render(),r&&this.isHoverAble&&this.isMultiHover){var p=this.getShapesByFeatureID(r);this.renderer.updateHoverShapes(p)}}},{key:"createThematicFeature",value:function(t){var e=C.copyAttributesWithClip(this.style);t.style&&!0===this.isAllowFeatureStyle&&(e=C.copyAttributesWithClip(t.style));var r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=ts.transformStyle(this.highlightStyle);for(var n=new ls(t,this,ts.transformStyle(e),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"clearCache",value:function(){this.cache={},this.cacheFields=[]}},{key:"clear",value:function(){this.renderer.clearAll(),this.renderer.refresh(),this.removeAllFeatures(),this.clearCache()}},{key:"getCacheCount",value:function(){return this.cacheFields.length}},{key:"setMaxCacheCount",value:function(t){isNaN(t)||(this.maxCacheCount=t,this.isCustomSetMaxCacheCount=!0)}},{key:"getShapesByFeatureID",value:function(t){var e=[],r=this.renderer.getAllShapes();if(!t)return r;for(var n=0,o=r.length;n<o;n++){var i=r[n];i.refDataID&&t===i.refDataID&&e.push(i)}return e}}])&&fs(e.prototype,r),n&&fs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function vs(t){"@babel/helpers - typeof";return(vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ms(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function gs(){return(gs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_s(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ws(t,e){return(ws=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Os(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=_s(t);if(e){var o=_s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===vs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ss(t)}(this,r)}}function Ss(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _s(t){return(_s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ps=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ws(t,e)}(a,bs);var e,r,n,i=Os(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t,e)).isOverLay=!0,r.isAvoid=!0,r.themeField=null,r.styleGroups=null,C.extend(Ss(r),e),r.defaultStyle={fontColor:"#000000",fontOpacity:1,fontSize:"12px",fontStyle:"normal",fontWeight:"normal",labelAlign:"cm",labelXOffset:0,labelYOffset:0,labelRotation:0,fill:!1,fillColor:"#ee9900",fillOpacity:.4,stroke:!1,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",labelRect:!0,labelSelect:!0,_isGeoTextStrategyStyle:!0},r.getPxBoundsMode=0,r.labelFeatures=[],r}return e=a,(r=[{key:"redrawThematicFeatures",value:function(t){if(this.features.length>0&&0==this.labelFeatures.length)for(var e=this.setLabelsStyle(this.features),r=0,n=e.length;r<n;r++)this.labelFeatures.push(e[r]);this.features=this.getDrawnLabels(this.labelFeatures),gs(_s(a.prototype),"redrawThematicFeatures",this).call(this,t)}},{key:"removeFeatures",value:function(t){this.labelFeatures=[],gs(_s(a.prototype),"removeFeatures",this).call(this,t)}},{key:"removeAllFeatures",value:function(){this.labelFeatures=[],gs(_s(a.prototype),"removeAllFeatures",this).call(this,arguments)}},{key:"createThematicFeature",value:function(t){var e=this.getStyleByData(t),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=ts.transformStyle(this.highlightStyle);for(var n=new ls(t,this,ts.transformStyle(e),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"getDrawnLabels",value:function(t){for(var e,r,n,o,i=[],a=[],s={labelAlign:"cm",labelXOffset:0,labelYOffset:0},u=this.map,l=u.getZoom(),c=u.getCanvas(),f={x:parseFloat(c.style.width),y:parseFloat(c.style.height)},h=0,p=t.length;h<p;h++){((r=t[h]).isStyleChange||void 0===r.isStyleChange)&&(r=this.setStyle(r));var y=this.getLabelPxLocation(r);if(y.x>=0&&y.x<=f.x&&y.y>=0&&y.y<=f.y){if(r.style.minZoomLevel>-1&&l<=r.style.minZoomLevel)continue;if(r.style.maxZoomLevel>-1&&l>r.style.maxZoomLevel)continue;var d=null;r.isStyleChange?(r.isStyleChange=null,d=this.calculateLabelBounds(r,y)):d=r.geometry.bsInfo.w&&r.geometry.bsInfo.h?this.calculateLabelBounds2(r,y):this.calculateLabelBounds(r,y);var b=new I(0,f.y,f.x,0),v=d.length;if(this.isAvoid){var m=this.getAvoidInfo(b,d);if(m){if("left"===m.aspectW){r.style.labelXOffset+=m.offsetX;for(var g=0;g<v;g++)d[g].x+=m.offsetX}else if("right"===m.aspectW){r.style.labelXOffset+=-m.offsetX;for(var w=0;w<v;w++)d[w].x+=-m.offsetX}if("top"===m.aspectH){r.style.labelYOffset+=m.offsetY;for(var O=0;O<v;O++)d[O].y+=m.offsetY}else if("bottom"===m.aspectH){r.style.labelYOffset+=-m.offsetY;for(var S=0;S<v;S++)d[S].y+=-m.offsetY}r.isStyleChange=!0}}if(this.isOverLay){var _=!1;if(0!=h)for(var P=0;P<a.length;P++)if(this.isQuadrilateralOverLap(d,a[P])){_=!0;break}if(_)continue;a.push(d)}for(var x=[],k=0;k<v-1;k++)x.push(u.unproject(d[k]));var j=x[3],E=x[1],T=new I(j.lng,j.lat,E.lng,E.lat).getCenterLonLat(),R=new Rr(T.lon,T.lat,r.attributes[this.themeField]);R.calculateBounds(),n=C.cloneObject(r.style),o=C.cloneObject(C.copyAttributes(n,s)),(e=new Ut(R,r.attributes,o)).id=r.id,e.fid=r.fid,i.push(e)}}return i}},{key:"getStyleByData",value:function(t){var e=t;if(e.style=C.copyAttributes(e.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),e.style=C.copyAttributes(e.style,this.style),this.themeField&&this.styleGroups&&e.attributes){var r=this.themeField,n=e.attributes,o=this.styleGroups,i=!1,a=null;for(var s in n)if(r===s){i=!0,a=n[s];break}if(i)for(var u=0,l=o.length;u<l;u++)if(a>=o[u].start&&a<o[u].end){var c=o[u].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),e.style=C.copyAttributes(e.style,c)}e.style.label=e.attributes[this.themeField]}return e.style}},{key:"setLabelsStyle",value:function(t){for(var e,r=[],n=0,o=t.length;n<o;n++){var i=t[n];if("SuperMap.Geometry.GeoText"!==i.geometry.CLASS_NAME)return t;(i.geometry.bsInfo.w||i.geometry.bsInfo.h)&&(i.geometry.bsInfo.w=null,i.geometry.bsInfo.h=null,i.geometry.labelWTmp=null),(e=this.setStyle(i)).layer=this.layer,r.push(e)}return r}},{key:"setStyle",value:function(t){var e=t;if(e.style=C.copyAttributes(e.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),e.style=C.copyAttributes(e.style,this.style),this.groupField&&this.styleGroups&&e.attributes){var r=this.groupField,n=e.attributes,o=this.styleGroups,i=!1,a=null;for(var s in n)if(r===s){i=!0,a=n[s];break}if(i)for(var u=0,l=o.length;u<l;u++)if(a>=o[u].start&&a<o[u].end){var c=o[u].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),e.style=C.copyAttributes(e.style,c)}}return e.style.label=e.geometry.text,e}},{key:"getLabelPxLocation",value:function(t){var e=t.geometry,r=t.style,n=e.getCentroid(),i=this.map.project(new(o().LngLat)(n.x,n.y)),a=new(o().Point)(i.x,i.y);if(r.labelXOffset||r.labelYOffset){var s=isNaN(r.labelXOffset)?0:r.labelXOffset,u=isNaN(r.labelYOffset)?0:r.labelYOffset,l=a.add(new(o().Point)(s,-u));return new(o().Point)(l.x,l.y)}return new(o().Point)(a.x,a.y)}},{key:"calculateLabelBounds",value:function(t,e){var r=t.geometry,n=null,o=null;if(0==this.getPxBoundsMode)n=r.getLabelPxBoundsByText(e,t.style);else{if(1!==this.getPxBoundsMode)return null;o=this.getLabelInfo(t.geometry.getCentroid(),t.style),n=r.getLabelPxBoundsByLabel(e,o.w,o.h,t.style)}var i=[];return i=t.style.labelRotation%180==0?[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.right,y:n.bottom},{x:n.left,y:n.bottom},{x:n.left,y:n.top}]:this.rotationBounds(n,e,t.style.labelRotation),r.bounds=new I(i[1].x,i[3].y,i[2].x,i[4].y),i}},{key:"calculateLabelBounds2",value:function(t,e){var r,n,o,i,a,s=t.geometry.bsInfo,u=t.style,l=C.cloneObject(e);if(u.labelAlign&&"cm"!==u.labelAlign)switch(u.labelAlign){case"lt":l.x+=s.w/2,l.y+=s.h/2;break;case"lm":l.x+=s.w/2;break;case"lb":l.x+=s.w/2,l.y-=s.h/2;break;case"ct":l.y+=s.h/2;break;case"cb":l.y-=s.h/2;break;case"rt":l.x-=s.w/2,l.y+=s.h/2;break;case"rm":l.x-=s.w/2;break;case"rb":l.x-=s.w/2,l.y-=s.h/2}n=l.x-s.w/2,o=l.y+s.h/2,a=u.fontStyle&&"italic"===u.fontStyle?l.x+s.w/2+parseInt(parseFloat(u.fontSize)/2):l.x+s.w/2,i=l.y-s.h/2,r=new I(n,o,a,i);var c=[];return c=u.labelRotation%180==0?[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.right,y:r.bottom},{x:r.left,y:r.bottom},{x:r.left,y:r.top}]:this.rotationBounds(r,e,u.labelRotation),t.geometry.bounds=new I(c[1].x,c[3].y,c[2].x,c[4].y),c}},{key:"getLabelInfo",value:function(t,e){var r={l:"left",r:"right",t:"top",b:"bottom"},n={l:0,r:-1,t:0,b:-1};e=C.extend({fontColor:"#000000",labelAlign:"cm"},e);var o=this.getLocalXY(t),i=0;if(e.labelXOffset||e.labelYOffset){var a=isNaN(e.labelXOffset)?0:e.labelXOffset,s=isNaN(e.labelYOffset)?0:e.labelYOffset;o[0]+=a,o[1]-=s}var u=document.createElement("canvas");u.globalAlpha=0,u.lineWidth=1;var l=u.getContext("2d");l.fillStyle=e.fontColor,l.globalAlpha=e.fontOpacity||1;var c,f,h,p=[e.fontStyle?e.fontStyle:"normal","normal",e.fontWeight?e.fontWeight:"normal",e.fontSize?e.fontSize:"1em",e.fontFamily?e.fontFamily:"sans-serif"].join(" "),y=e.label.split("\n"),d=y.length;if(l.fillText){l.font=p,l.textAlign=r[e.labelAlign[0]]||"center",l.textBaseline=r[e.labelAlign[1]]||"middle",null==(c=n[e.labelAlign[1]])&&(c=-.5),f=l.measureText("Mg").height||l.measureText("xx").width,o[1]+=f*c*(d-1);for(var b=0;b<d;b++)i<(h=l.measureText(y[b]).width)&&(i=h)}else if(l.mozDrawText){l.mozTextStyle=p,null==(c=n[e.labelAlign[1]])&&(c=-.5),f=l.mozMeasureText("xx"),o[1]+=f*(1+c*d);for(var v=0;v<d;v++)i<(h=l.measureText(y[v]).width)&&(i=h)}var m={};return i?(m.w=i,m.h=e.fontSize,m.rows=y.length,m):null}},{key:"rotationBounds",value:function(t,e,r){var n=new(o().Point)(t.left,t.top),i=new(o().Point)(t.right,t.top),a=new(o().Point)(t.right,t.bottom),s=new(o().Point)(t.left,t.bottom),u=[];u.push(this.getRotatedLocation(n.x,n.y,e.x,e.y,r)),u.push(this.getRotatedLocation(i.x,i.y,e.x,e.y,r)),u.push(this.getRotatedLocation(a.x,a.y,e.x,e.y,r)),u.push(this.getRotatedLocation(s.x,s.y,e.x,e.y,r));for(var l=[],c=0;c<u.length;c++)l.push({x:u[c].x,y:u[c].y});return l.push({x:u[0].x,y:u[0].y}),l}},{key:"getRotatedLocation",value:function(t,e,r,n,o){var i,a,s={};return e=-e,n=-n,o=-o,i=(t-r)*Math.cos(o/180*Math.PI)-(e-n)*Math.sin(o/180*Math.PI)+r,a=(t-r)*Math.sin(o/180*Math.PI)+(e-n)*Math.cos(o/180*Math.PI)+n,s.x=i,s.y=-a,s}},{key:"getAvoidInfo",value:function(t,e){if(5!==e.length)return null;for(var r=[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.right,y:t.bottom},{x:t.left,y:t.bottom},{x:t.left,y:t.top}],n=!1,o=r.length,i=e.length,a=0,s=0,u="",l="",c=0;c<o-1;c++)for(var f=0;f<i-1;f++){"SuperMap.Geometry.Point"===C.lineIntersection(r[c],r[c+1],e[f],e[f+1]).CLASS_NAME&&(h(e[f]),h(e[f+1]),n=!0)}return n?{aspectW:l,aspectH:u,offsetX:a,offsetY:s}:null;function h(e){if(!t.contains(e.x,e.y)){if(e.y<t.top){var r=Math.abs(t.top-e.y);r>s&&(s=r,u="top")}if(e.y>t.bottom){var n=Math.abs(e.y-t.bottom);n>s&&(s=n,u="bottom")}if(e.x<t.left){var o=Math.abs(t.left-e.x);o>a&&(a=o,l="left")}if(e.x>t.right){var i=Math.abs(e.x-t.right);i>a&&(a=i,l="right")}}}}},{key:"isQuadrilateralOverLap",value:function(t,e){var r=t.length,n=e.length;if(5!==r||5!==n)return null;for(var o=!1,i=0;i<r;i++)if(this.isPointInPoly(t[i],e)){o=!0;break}for(var a=0;a<n;a++)if(this.isPointInPoly(e[a],t)){o=!0;break}for(var s=0;s<r-1&&!o;s++)for(var u=0;u<n-1;u++){if("SuperMap.Geometry.Point"===C.lineIntersection(t[s],t[s+1],e[u],e[u+1]).CLASS_NAME){o=!0;break}}return o}},{key:"isPointInPoly",value:function(t,e){for(var r=!1,n=-1,o=e.length,i=o-1;++n<o;i=n)(e[n].y<=t.y&&t.y<e[i].y||e[i].y<=t.y&&t.y<e[n].y)&&t.x<(e[i].x-e[n].x)*(t.y-e[n].y)/(e[i].y-e[n].y)+e[n].x&&(r=!r);return r}}])&&ms(e.prototype,r),n&&ms(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(),xs=function(){try{return mapv}catch(t){return{}}}();function ks(t){"@babel/helpers - typeof";return(ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function js(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Es(){return(Es="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ms(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ts(t,e){return(Ts=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Cs(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ms(t);if(e){var o=Ms(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Rs(this,r)}}function Rs(t,e){if(e&&("object"===ks(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return As(t)}function As(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ms(t){return(Ms=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ls=xs.baiduMapLayer?xs.baiduMapLayer.__proto__:Function,Ns=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ts(t,e)}(i,Ls);var e,r,n,o=Cs(i);function i(t,e,r,n,a){var s;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),s=o.call(this,t,e,r),!Ls)return Rs(s);s.options=r||{},s.transferCoordinate=n.transferCoordinate,s.getCenterPixel=n.getCenterPixel,s.getResolution=n.getResolution,s.validZoom=n.validZoom;var u=a.mapElement,l=a.targetElement,c=a.id;return s.targetElement=l,s.canvas=s._createCanvas(c,u),s.canvasLayer={canvas:s.canvas,devicePixelRatio:s.devicePixelRatio},s.init(r),s.argCheck(r),s.stopAniamation=!1,s.animation=r.animation,s.clickEvent=s.clickEvent.bind(As(s)),s.mousemoveEvent=s.mousemoveEvent.bind(As(s)),s._canvasUpdate(),s.targetElement.appendChild(s.canvas),s._expectShow=!0,s.isShow=!0,s}return e=i,(r=[{key:"clickEvent",value:function(t){var e=t.point;Es(Ms(i.prototype),"clickEvent",this).call(this,e,t)}},{key:"mousemoveEvent",value:function(t){var e=t.point;Es(Ms(i.prototype),"mousemoveEvent",this).call(this,e,t)}},{key:"getContext",value:function(){return this.canvas.getContext(this.context)}},{key:"addData",value:function(t,e){var r=t;t&&t.get&&(r=t.get()),this.dataSet.add(r),this.update({options:e})}},{key:"update",value:function(t){var e=t||{},r=e.data;r&&r.get&&(r=r.get()),void 0!=r&&this.dataSet.set(r),Es(Ms(i.prototype),"update",this).call(this,{options:e.options})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(t){if(this.dataSet){var e=this.dataSet.get({filter:function(e){return null==t||"function"!=typeof t||!t(e)}});this.dataSet.set(e),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"updateData",value:function(t,e){t&&t.get&&this.dataSet.set(t.get()),this.update({options:e})}},{key:"_createCanvas",value:function(t,e){var r=e.style,n=r.width,o=r.height,i=document.createElement("canvas");i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.id=t;var a="undefined"==typeof window?{}:window,s=this.devicePixelRatio=a.devicePixelRatio||1;return i.width=parseInt(n)*s,i.height=parseInt(o)*s,this.options.context&&"2d"!=this.options.context||i.getContext("2d").scale(s,s),i.style.width=n,i.style.height=o,i}},{key:"_canvasUpdate",value:function(t){if(!this.stopAniamation){var e=this.options.animation,r=this.getContext();if(this.isEnabledTime()){if(void 0===t)return void this.clear(r);"2d"===this.context&&(r.save(),r.globalCompositeOperation="destination-out",r.fillStyle="rgba(0, 0, 0, .1)",r.fillRect(0,0,r.canvas.width,r.canvas.height),r.restore())}else this.clear(r);if("2d"===this.context)for(var n in this.options)r[n]=this.options[n];else r.clear(r.COLOR_BUFFER_BIT);if(this.validZoom()){var o={transferCoordinate:this.transferCoordinate()},i=this.getResolution();void 0!==t&&(o.filter=function(r){var n=e.trails||10;return t&&r.time>t-n&&r.time<t});var a=this.dataSet.get(o);this.processData(a),"m"===this.options.unit?(this.options.size&&(this.options._size=this.options.size/i),this.options.width&&(this.options._width=this.options.width/i),this.options.height&&(this.options._height=this.options.height/i)):(this.options._size=this.options.size,this.options._height=this.options.height,this.options._width=this.options.width);var s=this.getCenterPixel();this.drawContext(r,a,this.options,s),this.options.updateCallback&&this.options.updateCallback(t)}}}},{key:"init",value:function(t){this.options=t,this.initDataRange(t),this.context=this.options.context||"2d",this.options.zIndex&&this.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"destroy",value:function(){this.targetElement.removeChild(this.canvas),this.clearData(),this.animator&&this.animator.stop(),this.animator=null}},{key:"addAnimatorEvent",value:function(){}},{key:"moveEndEvent",value:function(){this.stopAniamation=!1,this._canvasUpdate()}},{key:"draw",value:function(){this._canvasUpdate()}},{key:"visible",value:function(){return this.isShow}},{key:"hide",value:function(){this.isShow=!1,this.canvas.style.display="none"}},{key:"show",value:function(){this.isShow=!0,this.canvas.style.display="block"}},{key:"setZIndex",value:function(t){this.canvas.style.zIndex=t}},{key:"clear",value:function(t){t&&t.clearRect&&t.clearRect(0,0,parseInt(this.map.getCanvas().style.width),parseInt(this.map.getCanvas().style.height))}}])&&js(e.prototype,r),n&&js(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),Is=function(t){var e;if(t===Ae.METER)e=1;else if(t===Ae.DEGREE)e=2*Math.PI*6378137/360;else if(t===Ae.KILOMETER)e=.001;else if(t===Ae.INCH)e=1/.025399999918;else{if(t!==Ae.FOOT)return e;e=.3048}return e};function Ds(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[-180,180],o=n[1],i=n[0],a=o-i;return t===o&&e?t:t===i&&r?t:0===((t-i)%a+a)%a&&e?o:((t-i)%a+a)%a+i}function Fs(t){var e=parseInt(t),r=parseInt(60*(t-e)),n=parseInt(60*(60*(t-e)-r));return r=0===parseInt(r/10)?"0".concat(r):r,n=0===parseInt(n/10)?"0".concat(n):n,"".concat(e,"°").concat(r,"'").concat(n)}function Bs(t,e,r){return 1/(t*e*(1/.0254)*Is(r))}function Gs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Us=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),3===arguments.length?(this.map=e,delete n.layerID,this.mapVOptions=n,this.dataSet=r):(this.dataSet=e,delete r.layerID,this.mapVOptions=r),this.id=this.mapVOptions.layerID?this.mapVOptions.layerID:C.createUniqueID("mapvLayer_"),this.type="custom",this.visibility=!0,this.renderingMode="3d",this.overlay=!0,this.context=this.mapVOptions.context||"2d",this.map&&this.map.addLayer(this)}var e,r,n;return e=t,(r=[{key:"onAdd",value:function(t){this.map=t,this.mapContainer=t.getCanvasContainer(),this.renderer=new Ns(t,this.dataSet,this.mapVOptions,{transferCoordinate:this._transferCoordinate,getCenterPixel:this._getCenterPixel,getResolution:this._getResolution,validZoom:this._validZoom.bind(this)},{mapElement:this.map.getCanvas(),targetElement:this.mapContainer,id:this.id}),this.mapContainer.style.perspective=this.map.transform.cameraToCenterDistance+"px",this.bindEvent()}},{key:"onRemove",value:function(){this.renderer.destroy(),this.unbindEvent()}},{key:"render",value:function(){this.renderer&&this.renderer.draw()}},{key:"_transferCoordinate",value:function(){var t=this.map,e=t.getBounds(),r=e.getEast()-e.getWest(),n=e.getNorth()-e.getSouth(),i=t.getCanvas().getBoundingClientRect(),a=r/i.width,s=n/i.height,u=t.getCenter(),l=t.project(u),c=this;return function(e){if(t.transform.rotationMatrix||"2d"===c.context){var r=t.project(new(o().LngLat)(e[0],e[1]));return[r.x,r.y]}var n=[(e[0]-u.lng)/a,(u.lat-e[1])/s];return[n[0]+l.x,n[1]+l.y]}}},{key:"_validZoom",value:function(){return!(this.mapVOptions.minZoom&&this.map.getZoom()<this.mapVOptions.minZoom||this.mapVOptions.maxZoom&&this.map.getZoom()>this.mapVOptions.maxZoom)}},{key:"_getResolution",value:function(){var t=this.map.getBounds(),e=(t.getEast()-t.getWest())/this.map.getCanvas().getBoundingClientRect().width;return Is("DEGREE")*e}},{key:"_getCenterPixel",value:function(){return this.map.project(new(o().LngLat)(0,0))}},{key:"addData",value:function(t,e){this.renderer.addData(t,e)}},{key:"update",value:function(t){this.renderer.update(t)}},{key:"getData",value:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet}},{key:"removeData",value:function(t){this.renderer&&this.renderer.removeData(t)}},{key:"clearData",value:function(){this.renderer.clearData()}},{key:"show",value:function(){return this.renderer&&this.renderer.show(),this}},{key:"hide",value:function(){return this.renderer&&this.renderer.hide(),this}},{key:"getTopLeft",value:function(){var t,e=this.map;e&&(t=e.getBounds().getNorthWest());return t}},{key:"bindEvent",value:function(){var t=this.map;this.mapVOptions.methods&&(this.mapVOptions.methods.click&&t.on("click",this.renderer.clickEvent),this.mapVOptions.methods.mousemove&&t.on("mousemove",this.renderer.mousemoveEvent))}},{key:"unbindEvent",value:function(){var t=this.map;this.mapvOptions.methods&&(this.mapvOptions.methods.click&&t.off("click",this.clickEvent),this.mapvOptions.methods.mousemove&&t.off("mousemove",this.mousemoveEvent))}},{key:"setVisibility",value:function(t){t!==this.visibility&&(this.visibility=t,t?this.show():this.hide())}},{key:"setZIndex",value:function(t){this.renderer.setZIndex(t)}}])&&Gs(e.prototype,r),n&&Gs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Js(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Vs=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.map=null,this.opacity=1,this.parseNumber=!1,this.enableHighlight=!1,this.highlight={color:"#ADA91E"},this.baseHeightField=null,this.height=null,this.heightField="height",this.themeField=this.heightField,this.showLegend=!0,this.legendTitle=null,this.legendTheme="light",this.legendOrientation="horizontal",this.legendPosition="bottom-right",this._highlightLayerId="".concat(this.id,"-highlightLayer"),this._extend(this,r)}var e,r,n;return e=t,(r=[{key:"setLayerOptions",value:function(t){return this._extend(this,t),this}},{key:"setHighlightStyleOptions",value:function(t){return this._extend(this.highlight,t),this}},{key:"setData",value:function(t,e){var r=this;return r.data=t,null!=e&&(r.parseNumber=e),r.parseNumber&&r.data&&r.data.features&&r.data.features.map(function(t){return r.baseHeightField&&t.properties[r.baseHeightField]&&(t.properties[r.baseHeightField]=parseFloat(t.properties[r.baseHeightField])),r.heightField&&t.properties[r.heightField]&&(t.properties[r.heightField]=parseFloat(t.properties[r.heightField])),t}),this}},{key:"getData",value:function(){return this.data}},{key:"addTo",value:function(t){return this.map=t,this.map?(this.show(),this):this}},{key:"show",value:function(t){return this._extend(this,t),this._addLayer(),this.enableHighlight&&this._addHighLightLayer(),this.showLegend&&(this.legend||(this.legend=this._createLegendControl()),this.map.addControl(this.legend,this.legendPosition)),this}},{key:"remove",value:function(){if(!this.map)return this;var t=this.id?this.id:"theme3DLayer";return this.map.getLayer(t)&&(this.map.off("mousemove",t,this._onMouseMove.bind(this)),this.map.on("mouseout",t,this._onMouseMove.bind(this)),this.map.removeLayer(t)),this.map.getLayer(this._highlightLayerId)&&(this._selectFeatureId=null,this.map.removeLayer(this._highlightLayerId)),this.legend&&this.map.removeControl(this.legend),this}},{key:"getLayerStyleOptions",value:function(){}},{key:"getHighlightStyleOptions",value:function(){}},{key:"_createLegendControl",value:function(t){var e=this;function r(){}return r.prototype.onAdd=function(r){this._map=r,this._container=document.createElement("div");var n="legend-light";"dark"===e.legendTheme&&(n="legend-dark");var o=" legend-horizontal";if("vertical"===e.legendOrientation&&(o=" legend-vertical"),this._container.className="mapboxgl-ctrl legend "+n+o,t)this._container.innerHTML=t;else{var i=" <div class='legend-title'>"+(e.legendTitle||"")+"</div>",a="<div class='legend-content'>"+(e._createLegendElement.call(e)||"")+"</div>";this._container.innerHTML=i+a}return e._appendLegendCSSStyle(),this._container},r.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map=void 0},new r}},{key:"_createLegendElement",value:function(){}},{key:"_addLayer",value:function(){var t=this.getLayerStyleOptions(),e=this.id?this.id:"theme3DLayer",r=this.sourceId=e+"Source";this.map.getSource(r)?(this.map.removeSource(r),this.map.addSource(r,{type:"geojson",data:this.data})):this.map.addSource(r,{type:"geojson",data:this.data}),this.map.addLayer({id:e,type:"fill-extrusion",source:r,paint:t}),this.map.moveLayer(e)}},{key:"_addHighLightLayer",value:function(){if(this.map){var t=this.map;t.addLayer({id:this._highlightLayerId,type:"fill-extrusion",source:this.sourceId,paint:this.getHighlightStyleOptions(),filter:["in","$id",""]}),this._selectFeatureId=null,t.on("mousemove",this.id,this._onMouseMove.bind(this)),t.on("mouseout",this.id,this._onMouseMove.bind(this))}}},{key:"_onMouseMove",value:function(t){var e=this,r=this.map,n=r.queryRenderedFeatures(t.point,{layers:[e.id]});if(e.highlight&&e.highlight.callback&&e.highlight.callback(n,t),!n||n.length<1)return e._clearHighlight.call(e),void(e._selectFeatureId=null);var o=n[0].id;e._selectFeatureId!==o&&(e._selectFeatureId=o,r.setFilter(e._highlightLayerId,["==","$id",e._selectFeatureId]))}},{key:"_clearHighlight",value:function(){this.map&&this.map.setFilter(this._highlightLayerId,["in","$id",""])}},{key:"_appendLegendCSSStyle",value:function(){var t=document.createElement("style");t.type="text/css";t.innerHTML="\n        .legend {\n            display: inline-block;\n            border-radius: 2px;\n            -moz-border-radius: 2px;\n            -webkit-border-radius: 2px;\n            font-size: 12px;\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n        }\n        .legend-light {\n            color: rgba(0, 0, 0, 0.8);\n            background-color: rgb(255, 255, 255);\n            box-shadow: 0px 0px 6px #bbbbbb;\n            -moz-box-shadow: 0px 6px 10px #bbbbbb;\n            -webkit-box-shadow: 0px 0px 6px #bbbbbb;\n        }\n        .legend-dark {\n            color: rgba(255, 255, 255, 0.8);\n            background-color: rgb(64, 64, 64);\n        }\n        .legend .legend-title {\n            min-height: 14px;\n            max-width: 500px;\n            padding:6px 10px;\n        }\n        .legend-light .legend-title {\n            color: rgba(0, 0, 0, 0.8);\n        }\n        .legend-dark .legend-title {\n            color: rgba(255, 255, 255, 0.8);\n        }\n        .legend-content{\n            padding:6px 10px;\n        }\n        "+this._legendCSSStyle(),document.getElementsByTagName("head")[0].appendChild(t)}},{key:"_legendCSSStyle",value:function(){return"\n        .legend ul {\n            padding: 0;\n            margin: 0 16px;\n            height: 100%;\n            display: block;\n            list-style: none;\n        }\n\n        .legend li {\n            vertical-align: middle;\n        }\n\n        .legend li span:first-child {\n            vertical-align: middle;\n        }\n\n        .legend li span:last-child {\n            line-height: 28px;\n            max-width: 200px;\n            vertical-align: middle;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            -ms-text-overflow: ellipsis;\n        }\n\n        .legend-vertical li {\n            height: 28px;\n        }\n\n        .legend-vertical li span:first-child {\n            display: inline-block;\n            width: 60px;\n            height: 100%;\n        }\n\n        .legend-vertical li span:last-child {\n            display: inline-block;\n            margin-left: 16px;\n            height: 100%;\n        }\n\n        .legend-horizontal li {\n            height: 56px;\n            float: left;\n        }\n\n        .legend-horizontal li span:first-child {\n            display: block;\n            width: 100%;\n            height: 50%;\n        }\n\n        .legend-horizontal li span:last-child {\n            display: block;\n            vertical-align: middle;\n            width: 60px;\n            height: 50%;\n            text-align: center;\n        }\n        "}},{key:"_extend",value:function(t){for(var e=0;e<Object.getOwnPropertyNames(arguments).length;e++){var r=Object.getOwnPropertyNames(arguments)[e];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(t[i]=n[i])}}}return t}}])&&Js(e.prototype,r),n&&Js(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function zs(t){"@babel/helpers - typeof";return(zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Hs(t,e){return(Hs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ws(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Xs(t);if(e){var o=Xs(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===zs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ys(t)}(this,r)}}function Ys(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xs(t){return(Xs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Qs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hs(t,e)}(i,Vs);var e,r,n,o=Ws(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).heightStops=null,r.colorStops=null,r.base=null,r.legendRatio=1,r._extend(Ys(r),e),r}return e=i,(r=[{key:"getLayerStyleOptions",value:function(){var t=null==this.opacity?1:this.opacity;t=isNaN(parseFloat(t))?1:parseFloat(t);var e=/^[0-9]+.?[0-9]*$/,r={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField||this.heightField,type:"interval",base:e.test(this.base)?this.base:1},"fill-extrusion-opacity":t};return this.heightStops?r["fill-extrusion-height"]={stops:this.heightStops,property:this.heightField||"height",base:e.test(this.base)?this.base:1}:this.height?r["fill-extrusion-height"]=this.height:r["fill-extrusion-height"]={property:this.heightField||"height",type:"identity"},this.baseHeightField&&(r["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}),r}},{key:"getHighlightStyleOptions",value:function(){return{"fill-extrusion-color":this.highlight&&null!=this.highlight.color?this.highlight.color:"#ADA91E","fill-extrusion-height":{stops:this.heightStops,property:this.heightField},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6}}},{key:"_createLegendElement",value:function(){var t,e=this.colorStops&&this.colorStops.length||0,r="<ul>";for(t=0;t<e;t++){var n=this.colorStops[t][0],o=this._getWrapperText(n);if(t===e-1)o="> "+o;else o=o+"-"+this._getWrapperText(this.colorStops[t+1][0]);r+="<li><span style='background-color:"+this.colorStops[t][1]+";'></span><span>"+o+"</span></li>"}return r+="</ul>"}},{key:"_getWrapperText",value:function(t){var e=t*(null==this.legendRatio?1:parseFloat(this.legendRatio)),r=parseFloat(e);return r%1e6<=1e6?r.toString():parseInt(r/1e3)+"k"}}])&&qs(e.prototype,r),n&&qs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Zs(t){"@babel/helpers - typeof";return(Zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ks(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $s(t,e){return($s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=eu(t);if(e){var o=eu(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Zs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function eu(t){return(eu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ru=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$s(t,e)}(i,bs);var e,r,n,o=tu(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).style=e.style,r.isHoverAble=e.isHoverAble,r.highlightStyle=e.highlightStyle,r.themeField=e.themeField,r.styleGroups=e.styleGroups,r}return e=i,(r=[{key:"createThematicFeature",value:function(t){var e=this.getStyleByData(t),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=ts.transformStyle(this.highlightStyle);for(var n=new ls(t,this,ts.transformStyle(e),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"getStyleByData",value:function(t){var e={},r=t;if(e=C.copyAttributesWithClip(e,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&r.attributes){var n=this.themeField,o=r.attributes,i=this.styleGroups,a=!1,s=null;for(var u in o)if(n===u){a=!0,s=o[u];break}if(a)for(var l=0,c=i.length;l<c;l++)if(s>=i[l].start&&s<i[l].end){var f=i[l].style;e=C.copyAttributesWithClip(e,f)}}return r.style&&!0===this.isAllowFeatureStyle&&(e=C.copyAttributesWithClip(r.style)),e}}])&&Ks(e.prototype,r),n&&Ks(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function nu(t){"@babel/helpers - typeof";return(nu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ou(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function iu(t,e){return(iu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function au(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=su(t);if(e){var o=su(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===nu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function su(t){return(su=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var uu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iu(t,e)}(i,$o);var e,r,n,o=au(i);function i(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t,e,r)).symbolType=e,n.symbolSetting=r.symbolSetting,n.themeField=r.themeField,n}return e=i,(r=[{key:"setSymbolType",value:function(t){this.symbolType=t,this.redraw()}},{key:"createThematicFeature",value:function(t){var e;return Mr[this.symbolType]&&this.themeField&&this.symbolSetting&&(e=new Mr[this.symbolType](t,this,[this.themeField],this.symbolSetting)),!!e&&(e.assembleShapes(),e)}}])&&ou(e.prototype,r),n&&ou(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function lu(t){"@babel/helpers - typeof";return(lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fu(t,e){return(fu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=yu(t);if(e){var o=yu(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===lu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return pu(t)}(this,r)}}function pu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yu(t){return(yu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var du=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fu(t,e)}(i,Vs);var e,r,n,o=hu(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).colorStops=null,r._extend(pu(r),e),r}return e=i,(r=[{key:"getLayerStyleOptions",value:function(){var t=null==this.opacity?1:this.opacity;t=isNaN(parseFloat(t))?1:parseFloat(t);var e={"fill-extrusion-color":{stops:this.colorStops,property:this.themeField,type:"categorical"},"fill-extrusion-opacity":t};return null!=this.height?e["fill-extrusion-height"]=this.height:e["fill-extrusion-height"]={property:this.heightField||"height",type:"categorical"},this.baseHeightField&&(e["fill-extrusion-base"]={property:this.baseHeightField,type:"identity"}),e}},{key:"getHighlightStyleOptions",value:function(){var t={"fill-extrusion-color":this.highlight&&null!=this.highlight.color?this.highlight.color:"#ADA91E","fill-extrusion-height":{stops:this.heightStops,property:this.heightField,type:"categorical"},"fill-extrusion-opacity":this.highlight&&this.highlight.opacity||.6};return null!=this.height&&(t["fill-extrusion-height"]=this.height||0),t}},{key:"_createLegendElement",value:function(){for(var t="<ul>",e=this.colorStops&&this.colorStops.length||0,r=0;r<e;r++){var n=this.colorStops[r][0];t+="<li><span style='background-color:"+this.colorStops[r][1]+";'></span><span>"+n+"</span></li>"}return t+="</ul>"}}])&&cu(e.prototype,r),n&&cu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function bu(t){"@babel/helpers - typeof";return(bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mu(t,e){return(mu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function gu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=wu(t);if(e){var o=wu(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===bu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function wu(t){return(wu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ou=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mu(t,e)}(i,bs);var e,r,n,o=gu(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).themeField=e.themeField,r.style=e.style,r.styleGroups=e.styleGroups,r.isHoverAble=e.isHoverAble,r.highlightStyle=e.highlightStyle,r}return e=i,(r=[{key:"createThematicFeature",value:function(t){var e=this.getStyleByData(t),r={};r.nodesClipPixel=this.nodesClipPixel,r.isHoverAble=this.isHoverAble,r.isMultiHover=this.isMultiHover,r.isClickAble=this.isClickAble,r.highlightStyle=ts.transformStyle(this.highlightStyle);for(var n=new ls(t,this,ts.transformStyle(e),r),o=0;o<n.shapes.length;o++)this.renderer.addShape(n.shapes[o]);return n}},{key:"getStyleByData",value:function(t){var e={},r=t;if(e=C.copyAttributesWithClip(e,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&r.attributes){var n=this.themeField,o=r.attributes,i=this.styleGroups,a=!1,s=null;for(var u in o)if(n===u){a=!0,s=o[u];break}if(a)for(var l=0,c=i.length;l<c;l++)if(s.toString()===i[l].value.toString()){var f=i[l].style;e=C.copyAttributesWithClip(e,f)}}return r.style&&!0===this.isAllowFeatureStyle&&(e=C.copyAttributesWithClip(r.style)),e}}])&&vu(e.prototype,r),n&&vu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Su(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function _u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var xu={color:[0,0,0,255],opacity:.8,radius:10,radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1},ku=function(){function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=C.assign(this,xu,r);this.id=e,this.graphics=[].concat(i.graphics),this.mapOptions=o,this.functions=n,this.visibility=!0,this.init()}var e,r,n;return e=t,(r=[{key:"init",value:function(){this.canvas&&this.mapOptions.targetElement.appendChild(this.canvas),this._initContainer();var t=this.getState(),e=t.data,r=t.color,n=t.radius,o=t.opacity,i=t.highlightColor,a=t.radiusScale,s=t.radiusMinPixels,u=t.radiusMaxPixels,l=t.strokeWidth,c=t.outline,f=this,h={id:"scatter-plot",data:e,pickable:Boolean(this.onClick)||Boolean(this.onHover),autoHighlight:!0,color:r,opacity:o,radius:n,radiusScale:a,highlightColor:i,radiusMinPixels:s,radiusMaxPixels:u,strokeWidth:l,outline:c,isGeographicCoordinateSystem:this.isGeographicCoordinateSystem,coordinateSystem:this.coordinateSystem,getPosition:function(t){if(!t)return[0,0,0];var e=t.getLngLat();return e&&[e.lng,e.lat,0]},getColor:function(t){var e=t&&t.getStyle();return e&&e.color||f.color},getRadius:function(t){var e=t&&t.getStyle();return e&&e.radius||f.radius},updateTriggers:{getColor:[r],getRadius:[n]}};this.onClick&&(h.onClick=this.onClick),this.onHover&&(h.onHover=this.onHover),this.layer=new window.DeckGL.ScatterplotLayer(h);var p={};for(var y in t)p[y]=t[y];var d=parseInt(this.canvas.style.width),b=parseInt(this.canvas.style.height);p.width=d,p.height=b,p.layers=[this.layer],p.canvas=this.canvas,this.deckGL=new window.DeckGL.experimental.DeckGLJS(p),this.draw()}},{key:"setStyle",value:function(t){var e={color:this.color,radius:this.radius,opacity:this.opacity,highlightColor:this.highlightColor,radiusScale:this.radiusScale,radiusMinPixels:this.radiusMinPixels,radiusMaxPixels:this.radiusMaxPixels,strokeWidth:this.strokeWidth,outline:this.outline};C.assign(this,e,t),this.update()}},{key:"setGraphics",value:function(t){this.graphics=this.graphics||[],this.graphics.length=0;var e=C.isArray(t)?[].concat(t):[t];this.layer.props.data||(this.layer.props.data=[]),this.layer.props.data.length=0;for(var r=0;r<e.length;r++)this.layer.props.data.push(e[r]);this.update()}},{key:"addGraphics",value:function(t){this.graphics=this.graphics||[];var e=C.isArray(t)?[].concat(t):[t];this.layer.props.data||(this.layer.props.data=[]);for(var r=0;r<e.length;r++)this.layer.props.data.push(e[r]);this.update()}},{key:"getGraphicBy",value:function(t,e){var r=null;for(var n in this.graphics)if(this.graphics[n][t]===e){r=this.graphics[n];break}return r}},{key:"getGraphicById",value:function(t){return this.getGraphicBy("id",t)}},{key:"getGraphicsByAttribute",value:function(t,e){var r,n=[];for(var o in this.graphics)(r=this.graphics[o])&&r.attributes&&r.attributes[t]===e&&n.push(r);return n}},{key:"removeGraphics",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!t||0===t.length||t===this.graphics)return this.graphics.length=0,this.layer.props.data&&(this.layer.props.data.length=0),void this.update();C.isArray(t)||(t=[t]);for(var e=t.length-1;e>=0;e--){var r=t[e],n=C.indexOf(this.graphics,r);-1!==n&&this.graphics.splice(n,1)}this.update()}},{key:"update",value:function(){if("Awaiting state"!==this.layer.lifecycle){this.layer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0});var t=this.getState(),e=parseInt(this.canvas.style.width),r=parseInt(this.canvas.style.height);t.width=e,t.height=r,this.layer.setState(t)}}},{key:"clear",value:function(){this.removeGraphics(),this.deckGL.finalize()}},{key:"remove",value:function(){this.mapOptions.targetElement.removeChild(this.canvas)}},{key:"destroy",value:function(){this.remove(),this.clear()}},{key:"moveTo",value:function(t,e){var r=document.getElementById(this.id);if(e=void 0===e||e){var n=document.getElementById(t);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(t);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(t){this.canvas&&t!==this.visibility&&(this.visibility=t,this.canvas.style.display=t?"block":"none")}},{key:"draw",value:function(){var t=this.getState(),e={};for(var r in t)e[r]=t[r];var n=parseInt(this.canvas.style.width),o=parseInt(this.canvas.style.height);e.width=n,e.height=o,e.layers=[this.layer],e.canvas=this.canvas,this.deckGL.setProps(e)}},{key:"_initContainer",value:function(){this.canvas=this._createCanvas(this.mapOptions.mapElement),this.mapOptions.targetElement.appendChild(this.canvas)}},{key:"_createCanvas",value:function(t){var e=document.createElement("canvas");return this.id&&(e.id=this.id),e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.cursor="",e.width=parseInt(t.style.width),e.height=parseInt(t.style.height),e.style.width=t.style.width,e.style.height=t.style.height,e}},{key:"getState",value:function(){var t=this.functions.getMapState();return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Su(Object(r),!0).forEach(function(e){_u(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Su(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({data:this.graphics,color:this.color,radius:this.radius,opacity:this.opacity,highlightColor:this.highlightColor,radiusScale:this.radiusScale,radiusMinPixels:this.radiusMinPixels,radiusMaxPixels:this.radiusMaxPixels,strokeWidth:this.strokeWidth,outline:this.outline},t)}}])&&Pu(e.prototype,r),n&&Pu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ju(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Eu=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=r,this.id=e||C.createUniqueID("graphicLayer_"),this.type="custom",this.renderingMode="3d",this.overlay=!0}var e,r,n;return e=t,(r=[{key:"addTo",value:function(t){return this.onAdd(t),this}},{key:"onAdd",value:function(t){this.map=t,this.renderer=new ku(this.id,this.options,{getMapState:this.getMapState.bind(this)},{targetElement:this.map.getCanvasContainer(),mapElement:this.map.getCanvas()})}},{key:"onRemove",value:function(){this.remove(),this.clear()}},{key:"render",value:function(){this.renderer.draw()}},{key:"setStyle",value:function(t){this.renderer&&this.renderer.setStyle(t)}},{key:"setGraphics",value:function(t){this.renderer&&this.renderer.setGraphics(t)}},{key:"addGraphics",value:function(t){this.renderer&&this.renderer.addGraphics(t)}},{key:"getGraphicBy",value:function(t,e){return this.renderer&&this.renderer.getGraphicBy(t,e)}},{key:"getGraphicById",value:function(t){return this.getGraphicBy("id",t)}},{key:"getGraphicsByAttribute",value:function(t,e){return this.renderer&&this.renderer.getGraphicsByAttribute(t,e)}},{key:"removeGraphics",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.renderer&&this.renderer.removeGraphics(t)}},{key:"clear",value:function(){this.renderer&&this.renderer.clear()}},{key:"remove",value:function(){this.renderer&&this.renderer.remove()}},{key:"moveTo",value:function(t,e){this.renderer.moveTo(t,e)}},{key:"setVisibility",value:function(t){this.renderer.setVisibility(t)}},{key:"getState",value:function(){return this.renderer.getState()}},{key:"getMapState",value:function(){var t={},e=this.map.getCenter(),r={longitude:e.lng,latitude:e.lat,zoom:this.map.getZoom(),maxZoom:this.map.getMaxZoom(),pitch:this.map.getPitch(),bearing:this.map.getBearing()};for(var n in r)t[n]=r[n];return this.map.getCRS&&this.map.getCRS()!==o().CRS.EPSG3857&&(t.coordinateSystem=this.coordinateSystem,t.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem),t}}])&&ju(e.prototype,r),n&&ju(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Tu=function(){try{return THREE}catch(t){return{}}}();function Cu(t,e,r){if(t===r||t===e)return t;var n=r-e;return((t-e)%n+n)%n+e}function Ru(t){return t*Math.PI/180}var Au={matrix:[1,-1,0,0],projection:{R:6378137,minZoom:0,maxZoom:22,nativeMaxZoom:19,RAD:Math.PI/180,METERS_PER_DEGREE:6378137*Math.PI/180,MAX_LATITUDE:85.0511287798,project:function(t){var e=this.RAD,r=this.METERS_PER_DEGREE,n=this.MAX_LATITUDE,o=t instanceof Array?{lng:t[0],lat:t[1]}:{lng:t.lng,lat:t.lat},i=o.lng,a=Math.max(Math.min(n,o.lat),-n);return{x:i*r,y:(0===a?0:Math.log(Math.tan((90+a)*e/2))/e)*r}},unproject:function(t){var e,r=t.x,n=t.y,o=this.RAD,i=this.METERS_PER_DEGREE;return 0===n?e=0:(e=n/i,e=(2*Math.atan(Math.exp(e*o))-Math.PI/2)/o),{lng:Cu(r/i,-180,180),lat:Cu(e,-this.MAX_LATITUDE,this.MAX_LATITUDE)}},locate:function(t,e,r){if(!t)return null;if(e=e||0,r=r||0,!e&&!r)return t;var n=t.lng;if(0!==e){var o=Math.abs(e),i=Ru(t.lng);n=Cu(180*(i+=2*Math.sqrt(Math.pow(Math.sin(o/(2*this.R)),2)/Math.pow(Math.cos(i),2))*(o>0?1:-1))/Math.PI,-180,180)}var a=t.lat;if(0!==r){var s=Math.abs(r),u=Ru(t.lat);a=Cu(180*(u+=2*Math.sin(s/(2*this.R))*(s>0?1:-1))/Math.PI,-90,90)}return{lng:n,lat:a}},getResolution:function(t){if(!this.resolutions){for(var e=[],r=12756274*Math.PI,n=0;n<=this.maxZoom;n++)e[n]=r/(256*Math.pow(2,n));this.resolutions=e}var o=0|t,i=this.resolutions.length;o=o<0?0:o>i-1?i-1:o;var a=this.resolutions[o];return(0|t)!==t&&o!==i-1?a+(this.resolutions[o+1]-a)*(t-o):a}},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},lngLatToPoint:function(t,e){var r=this.project(t);return this.transform(r,this.projection.getResolution(e))},locate:function(t,e,r){return this.projection.locate(t,e,r)},transform:function(t,e){return{x:this.matrix[0]*(t.x-this.matrix[2])/e,y:this.matrix[1]*(t.y-this.matrix[3])/e}}};function Mu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Lu=Au.projection,Nu=Tu.Color,Iu=Tu.Scene,Du=Tu.WebGLRenderer,Fu=Tu.PerspectiveCamera,Bu=Tu.Vector3,Gu=Tu.Shape,Uu=Tu.Mesh,Ju=Tu.ExtrudeGeometry,Vu=Math.PI/180,zu=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,qu=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame,Hu=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._layer=e,this.renderer=r||"gl",this.options=n}var e,r,n;return e=t,(r=[{key:"setMap",value:function(t){this.map=t}},{key:"render",value:function(){this._layer&&(this.prepare(),this._layer.fire("initialized"),this._layer&&this._layer.draw(this.context,this.scene,this.camera),this._layer.fire("draw"),this.renderScene())}},{key:"update",value:function(){this.remove(),this.render()}},{key:"renderScene",value:function(){this.locationCamera(),this.animationFrame=this.renderFrame(function(){this.animationFrame=null,this.context&&this.context.render(this.scene,this.camera)}.bind(this))}},{key:"renderFrame",value:function(t){return zu(function(){t&&"function"==typeof t&&t()})}},{key:"resize",value:function(){this._resetElementSize(this.container),this._resetElementSize(this.canvas);var t=this.canvas.width,e=this.canvas.height,r=this.getMapSize();this.camera.aspect=t/e,this.camera.updateProjectionMatrix(),this.context.setSize(r.width,r.height),this.renderScene()}},{key:"prepare",value:function(){if(!this.map)return new Error("map object is necessary");this.canvas?this.clear(this.context):(this._initContainer(),this._initThreeRenderer(),this._layer.fire("rendererinitialized"))}},{key:"getMapSize",value:function(){var t=this.map.getContainer();return{width:t.clientWidth,height:t.clientHeight}}},{key:"cancelFrame",value:function(){null!=this.animationFrame&&qu(this.animationFrame)}},{key:"remove",value:function(){null!=this.animationFrame&&qu(this.animationFrame),this.container.removeChild(this.canvas),this.container.parentNode.removeChild(this.container),this.context=null,this.canvas=null,this.container=null}},{key:"clear",value:function(t){t&&t.clear&&t.clear(),t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}},{key:"getScale",value:function(t){var e=this.map,r=null==t?e.getZoom():t,n=Lu.getResolution(Lu.nativeMaxZoom);return Lu.getResolution(r)/n}},{key:"getCanvasContainer",value:function(){return this.container}},{key:"getCanvas",value:function(){return this.canvas}},{key:"locationCamera",value:function(){var t=this.map,e=this.getMapSize(),r=t.transform.zoomScale(Lu.nativeMaxZoom-t.getZoom()-1),n=Math.tan(t.transform.fov/2*Vu),o=this.camera,i=t.getPitch()*Vu,a=-r*e.height/2/n;o.position.z=a*Math.cos(i);var s=Au.lngLatToPoint(t.getCenter(),Lu.nativeMaxZoom),u=Math.sin(i)*a,l=t.getBearing()*Vu;o.position.x=s.x+u*Math.sin(l),o.position.y=s.y-u*Math.cos(l),o.up.set(Math.sin(l),-Math.cos(l),0),o.lookAt(new Tu.Vector3(s.x,s.y,0)),o.updateProjectionMatrix()}},{key:"toThreeShape",value:function(t){var e=this;if(!t)return null;var r=this.getCoordinatesCenter(t),n=this.lngLatToPosition(r),o=t.map(function(t){return e.lngLatToPosition({lng:t[0],lat:t[1]}).sub(n)});return new Gu(o)}},{key:"toThreeMesh",value:function(t,e,r,n){if(!t)return null;var o=t;n&&(o=this.removeDuplicatedCoordinates(t));var i=this.distanceToThreeVector3(e,e).x,a=this.toThreeShape(o),s=new Ju(a,{amount:i,bevelEnabled:!0}),u=new Uu(s,r),l=this.lngLatToPosition(this.getCoordinatesCenter(o));return u.position.set(l.x,l.y,-i),u}},{key:"addObject",value:function(t,e){e&&t&&this.setPosition(t,e),this.scene.add(t)}},{key:"clearMesh",value:function(){var t=this.scene;if(!t)return this;for(var e=t.children.length-1;e>=0;e--)t.children[e]instanceof Tu.Mesh&&t.remove(t.children[e]);return this}},{key:"clearAll",value:function(t){var e=this.scene;if(!e)return this;for(var r=e.children.length-1;r>=0;r--)!t&&e.children[r]instanceof Tu.Camera||e.remove(e.children[r]);return this}},{key:"setPosition",value:function(t,e){if(!t||!e)return this;var r=this.lngLatToPosition(e);return t.position.set(r.x,r.y,r.z),this}},{key:"lngLatToPosition",value:function(t){var e=Au.projection.nativeMaxZoom,r=Au.lngLatToPoint(t,e);return new Bu(r.x,r.y,-0)}},{key:"distanceToThreeVector3",value:function(t,e,r){var n=this.map,o=r||n.getCenter(),i=Au.projection.nativeMaxZoom,a=Au.locate(o,t,e),s=Au.lngLatToPoint(o,i),u=Au.lngLatToPoint(a,i),l=Math.abs(u.x-s.x)*Math.sign(t),c=Math.abs(u.y-s.y)*Math.sign(e);return new Bu(l,c,0)}},{key:"removeDuplicatedCoordinates",value:function(t){function e(t,e){return t[0]===e[0]&&t[1]===e[1]}for(var r=[].concat(t),n=r.length-1;n>=1;n--)e(r[n],r[n-1])&&r.splice(n,1);return e(r[0],r[r.length-1])&&r.splice(r.length-1,1),r}},{key:"getCoordinatesCenter",value:function(t){for(var e=0,r=0,n=0,o=0,i=t.length;o<i;o++)t[o]&&(e+=t[o][0],r+=t[o][1],n++);return{lng:e/n,lat:r/n}}},{key:"_initContainer",value:function(){var t=this._createCanvas(),e=this.container=document.createElement("div");e.id=this._layer.id,e.className="threejs-wrapper",e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.overflow="hidden",this._resetElementSize(e),e.appendChild(t),this.map.getCanvasContainer().appendChild(e)}},{key:"_createCanvas",value:function(){if(!this.canvas){var t=this.canvas=document.createElement("canvas");return t.className="threejs-overlay",t.style.outline="none",this._resetElementSize(t),t}}},{key:"_resetElementSize",value:function(t){if(t){var e=this.getMapSize(),r=window.devicePixelRatio?window.devicePixelRatio:1,n=r*e.width,o=r*e.height;t.width=n,t.height=o,t.style.width=e.width+"px",t.style.height=e.height+"px"}}},{key:"_initThreeRenderer",value:function(){var t,e=this.map,r=this.getMapSize();"gl"===(this.renderer||"gl")&&((t=new Du({canvas:this.canvas,alpha:!0,antialias:!0,preserveDrawingBuffer:!0},this.options)).autoClear=!0,t.clear()),t.setClearColor(new Nu(1,1,1),0),t.canvas=this.canvas,this.context=t;var n=e.transform.fov,o=Math.tan(n/2*Vu),i=this.getScale(Lu.minZoom)/this.getScale(Lu.nativeMaxZoom)*r.height/2/o;this.camera=new Fu(n,r.width/r.height,1,i),this.scene=new Iu,this.scene.add(this.camera)}}])&&Mu(e.prototype,r),n&&Mu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Wu(t){"@babel/helpers - typeof";return(Wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Xu(t,e){return(Xu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Qu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ku(t);if(e){var o=Ku(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Wu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Zu(t)}(this,r)}}function Zu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ku(t){return(Ku=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xu(t,e)}(a,o().Evented);var e,r,n,i=Qu(a);function a(t,e,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this)).id=t,n.type="custom",n.renderingMode="3d",n.overlay=!0,n.options=r;var o=r&&r.threeOptions;return n.renderer=new Hu(Zu(n),e,o),n}return e=a,(r=[{key:"onAdd",value:function(t){var e=this;return e._map=t,e.renderer.setMap(t),e.renderer.render(),e.on("render",function(){this.context&&this.context.render(this.scene,this.camera)}.bind(e.renderer)),this}},{key:"addTo",value:function(t){return t.addLayer(this),this}},{key:"toThreeShape",value:function(t){return this.renderer.toThreeShape(t)}},{key:"toThreeMesh",value:function(t,e,r,n){return this.renderer.toThreeMesh(t,e,r,n)}},{key:"addObject",value:function(t,e){this.renderer&&this.renderer.addObject(t,e)}},{key:"getScene",value:function(){return this.renderer.scene}},{key:"getCamera",value:function(){return this.renderer.camera}},{key:"getThreeRenderer",value:function(){return this.renderer.context}},{key:"clearMesh",value:function(){return this.renderer.clearMesh(),this}},{key:"clearAll",value:function(t){return this.renderer.clearAll(t),this}},{key:"setPosition",value:function(t,e){return this.renderer.setPosition(t,e)}},{key:"lngLatToPosition",value:function(t){return this.renderer.lngLatToPosition(t)}},{key:"distanceToThreeVector3",value:function(t,e,r){var n=this._map,o=r||n.getCenter();return this.renderer.distanceToThreeVector3(t,e,o)}},{key:"removeDuplicatedCoordinates",value:function(t){this.renderer.removeDuplicatedCoordinates(t)}},{key:"getCoordinatesCenter",value:function(t){return this.renderer.getCoordinatesCenter(t)}},{key:"render",value:function(){this._update()}},{key:"getCanvasContainer",value:function(){return this.renderer.getCanvasContainer()}},{key:"getCanvas",value:function(){return this.renderer.getCanvas()}},{key:"remove",value:function(){this.renderer.remove(),this._map=null}},{key:"draw",value:function(){return this}},{key:"renderScene",value:function(){return this.renderer.renderScene(),this.fire("renderscene"),this}},{key:"_update",value:function(){return this.renderScene(),this.fire("render"),this}}])&&Yu(e.prototype,r),n&&Yu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function tl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var el=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.rootCanvas=null,this.features=[],this.visibility=!0,this.opacity=e.opacity?e.opacity:1,this.colors=e.colors?e.colors:["blue","cyan","lime","yellow","red"],this.useGeoUnit=!!e.useGeoUnit&&e.useGeoUnit,this.radius=e.radius?e.radius:50,this.featureWeight=e.featureWeight?e.featureWeight:null,this.maxWeight=null,this.minWeight=null,this.canvasContext=null,this.maxWidth=null,this.maxHeight=null,this.extent={},this.mapElement=e.mapElement,this._createCanvasContainer(e.targetElement,e.size)}var e,r,n;return e=t,(r=[{key:"addFeatures",value:function(t){this.features=this.toiClientFeature(t),this.refresh()}},{key:"refresh",value:function(){0!==this.features.length&&this.updateHeatPoints(this.extent)}},{key:"setOpacity",value:function(t){t!==this.opacity&&(this.opacity=t,C.modifyDOMElement(this.rootCanvas,null,null,null,null,null,null,t))}},{key:"updateHeatPoints",value:function(t){this.features&&this.features.length>0?this.convertFastToPixelPoints(t):this.canvasContext.clearRect(0,0,this.maxWidth,this.maxWidth)}},{key:"convertFastToPixelPoints",value:function(t){var e,r,n,o,i,a,s,u=[],l=t.getEast()-t.getWest(),c=t.getNorth()-t.getSouth(),f=this.mapElement;o=l/f.width>c/f.height?l/f.width:c/f.height,this.useRadius=this.useGeoUnit?parseInt(this.radius/o):this.radius;for(var h=0;h<this.features.length;h++){var p=this.features[h],y=p.geometry,d=this.getPixelXY(new L(y.x,y.y));this.featureWeight?(d.weight=p.attributes[this.featureWeight],this.maxWeight||(i=i||d.weight,a=a||d.weight,i=Math.max(i,d.weight),a=Math.min(a,d.weight))):d.weight=1,e=Math.floor(d.x),r=Math.floor(d.y),n=d.weight,u.push([e,r,n])}this.maxWeight?this.draw(u,this.maxWeight):(s=i&&a?(i+a)/2:1,this.draw(u,s))}},{key:"draw",value:function(t,e){if(!(this.maxHeight>0&&this.maxWidth>0))return!1;var r=this.canvasContext;r.setTransform(1,0,0,1,0,0),this.canvasContext.clearRect(0,0,this.maxWidth,this.maxHeight),this.drawCircle(this.useRadius),this.createGradient();for(var n=0;n<t.length;n++){var o=t[n];this.canvasContext.globalAlpha=Math.max(o[2]/e,.05),this.canvasContext.drawImage(this.circle,o[0]-this.useRadius,o[1]-this.useRadius)}var i=r.getImageData(0,0,this.maxWidth,this.maxHeight);this.colorize(i.data,this.grad),r.putImageData(i,0,0)}},{key:"colorize",value:function(t,e){for(var r,n=0;n<t.length;n+=4)(r=4*t[n+3])&&(t[n]=e[r],t[n+1]=e[r+1],t[n+2]=e[r+2])}},{key:"drawCircle",value:function(t){var e=t/2,r=this.circle=document.createElement("canvas"),n=r.getContext("2d");r.height=2*t,r.width=2*t,n.shadowOffsetX=n.shadowOffsetY=2*t,n.shadowBlur=e,n.shadowColor="#000000",n.beginPath(),n.arc(-t,-t,t/2,0,2*Math.PI,!0),n.closePath(),n.fill()}},{key:"createGradient",value:function(){var t=this.colors,e=document.createElement("canvas"),r=e.getContext("2d"),n=r.createLinearGradient(0,0,0,256);e.height=256,e.width=1;for(var o=1,i=0,a=t.length;i<a;i++)n.addColorStop(o/a,t[i]),o++;r.fillStyle=n,r.fillRect(0,0,1,256),this.grad=r.getImageData(0,0,1,256).data}},{key:"getPixelXY",value:function(t){var e;if(t instanceof V||t instanceof Rr){var r=this.options.convertLatlonToPixel({lon:t.x,lat:t.y});e={x:parseInt(r.x),y:parseInt(r.y)}}if(t instanceof L){var n=this.options.convertLatlonToPixel(t);e={x:parseInt(n.x),y:parseInt(n.y)}}return e}},{key:"_createCanvasContainer",value:function(t){this.rootCanvas=document.createElement("canvas"),this.rootCanvas.id=this.options.id,this.rootCanvas.width=this.maxWidth=parseInt(this.mapElement.style.width),this.rootCanvas.height=this.maxHeight=parseInt(this.mapElement.style.height),this.canvasContext=this.rootCanvas.getContext("2d");var e=window.devicePixelRatio||1;1!==e&&this.canvasContext&&this.canvasContext.scale(e,e),C.modifyDOMElement(this.rootCanvas,null,{x:0,y:0},{w:this.maxWidth,h:this.maxHeight},"absolute",null,null,this.opacity),t.appendChild(this.rootCanvas)}},{key:"toiClientFeature",value:function(t){C.isArray(t)||(t=[t]);for(var e=[],r=0;r<t.length;r++)if(t[r]instanceof Ut)e.push(t[r]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(t[r].type)){var n=new Or;e=e.concat(n.read(t[r]))}else{if(!t[r].geometry||!t[r].geometry.parts)throw new Error("Features[".concat(r,"]'s type does not match, please check."));e.push(zo.fromJson(t[r]).toFeature())}return e}},{key:"removeFeatures",value:function(t){if(t&&0!==t.length&&this.features&&0!==this.features.length){if(t===this.features)return this.removeAllFeatures();C.isArray(t)||(t=[t]);for(var e,r,n=[],o=0,i=t.length;o<i;o++)e=t[o],-1!==(r=C.indexOf(this.features,e))?this.features.splice(r,1):n.push(e);var a=0==n.length;return this.refresh(),{succeed:a,heatPointsFailedRemoved:n}}}},{key:"removeAllFeatures",value:function(){this.features=[],this.refresh()}},{key:"removeFromMap",value:function(){this.removeAllFeatures(),this.options.targetElement.removeChild(this.rootCanvas)}},{key:"setVisibility",value:function(t){this.rootCanvas&&t!==this.visibility&&(this.visibility=t,this.rootCanvas.style.display=t?"block":"none")}},{key:"setExtent",value:function(t){this.extent=t}},{key:"_hide",value:function(){this.rootCanvas.style.display="none"}},{key:"_show",value:function(){this.rootCanvas.style.display="block"}}])&&tl(e.prototype,r),n&&tl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function rl(t){"@babel/helpers - typeof";return(rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function ol(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nl(Object(r),!0).forEach(function(e){il(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nl(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function il(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function al(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function sl(t,e){return(sl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ul(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ll(t);if(e){var o=ll(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===rl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ll(t){return(ll=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sl(t,e)}(a,o().Evented);var e,r,n,i=ul(a);function a(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),r=i.call(this);var n=e||{};return r.options=n,r.name=t,r.id=n.id?n.id:C.createUniqueID("HeatMapLayer_"),r.loadWhileAnimating=void 0===n.loadWhileAnimating||n.loadWhileAnimating,r.features={},r.EVENT_TYPES=["featuresadded","featuresremoved","featuresdrawcompleted"],r.type="custom",r.renderingMode="3d",r.overlay=!0,r}return e=a,(r=[{key:"onAdd",value:function(t){this.map=t;var e=this.map.getCanvasContainer(),r=this.map.getCanvas();this.renderer=new el(ol(ol({id:this.id},this.options),{},{convertLatlonToPixel:this._convertLatlonToPixel.bind(this),targetElement:e,mapElement:r})),this.features.features&&this.features.features.length&&(this.renderer.setExtent(this.map.getBounds()),this.renderer.addFeatures(this.features))}},{key:"onRemove",value:function(){this.removeAllFeatures(),this.renderer.removeFromMap(),this.features={},this.renderer=null}},{key:"render",value:function(){this.refresh()}},{key:"addFeatures",value:function(t){this.renderer?this.renderer.addFeatures(t):this.features=t,this.fire(this.EVENT_TYPES[0],{features:t,succeed:!0})}},{key:"refresh",value:function(){this.map&&(this.renderer.setExtent(this.map.getBounds()),this.renderer.refresh())}},{key:"setOpacity",value:function(t){t!==this.opacity&&(this.renderer.setOpacity(t),null!==this.map&&this.fire("changelayer",{layer:this,property:"opacity"}))}},{key:"updateHeatPoints",value:function(t){this.renderer.updateHeatPoints(t)}},{key:"getPixelXY",value:function(t){return this.renderer.getPixelXY(t)}},{key:"removeFeatures",value:function(t){var e=this.renderer.removeFeatures(t);if(e){var r=e.heatPointsFailedRemoved,n=e.succeed;this.fire(this.EVENT_TYPES[1],{features:r,succeed:n})}}},{key:"removeAllFeatures",value:function(){this.renderer.removeAllFeatures()}},{key:"moveTo",value:function(t,e){var r=document.getElementById(this.renderer.rootCanvas.id);if(e=void 0===e||e){var n=document.getElementById(t);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(t);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(t){this.renderer.setVisibility(t)}},{key:"_convertLatlonToPixel",value:function(t){return this.map.project(new(o().LngLat)(t.lon,t.lat))}}])&&al(e.prototype,r),n&&al(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function fl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function hl(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var yl=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layerTypeID=e,this.data=[].concat(r.data),this.props=r.props?r.props:{},this.callback=r.callback?r.callback:{},this.id=r.layerId?r.layerId:C.createUniqueID("graphicLayer_"+this.layerTypeID+"_")}var e,r,n;return e=t,(r=[{key:"onAdd",value:function(){}},{key:"render",value:function(){}},{key:"setStyle",value:function(t){C.extend(this.props,t),this._createLayerByLayerTypeID(),this.update()}},{key:"setData",value:function(t){this.data=this.data||[],this.data.length=0;var e=C.isArray(t)?[].concat(t):[t];this.layer.props.data||(this.layer.props.data=[]),this.layer.props.data.length=0;for(var r=0;r<e.length;r++)this.layer.props.data.push(e[r]);this.data=this.layer.props.data,this.update()}},{key:"addData",value:function(t){this.data=this.data||[];var e=C.isArray(t)?[].concat(t):[t];this.layer.props.data||(this.layer.props.data=[]);for(var r=0;r<e.length;r++)this.layer.props.data.push(e[r]);this.update()}},{key:"update",value:function(){if("Awaiting state"!==this.layer.lifecycle){this.layer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0})}this._draw()}},{key:"clear",value:function(){this.removeData(),this.deckGL.finalize()}},{key:"removeData",value:function(){this.data.length=0,this.layer.props.data&&(this.layer.props.data.length=0),this.update()}},{key:"moveTo",value:function(t,e){var r=document.getElementById(this.id);if(e=void 0===e||e){var n=document.getElementById(t);r&&n&&n.parentNode.insertBefore(r,n)}else{var o=document.getElementById(t);if(r){if(o.nextSibling)return void o.parentNode.insertBefore(r,o.nextSibling);o.parentNode.appendChild(r)}}}},{key:"setVisibility",value:function(t){this.canvas&&t!==this.visibility&&(this.visibility=t,this.canvas.style.display=t?"block":"none")}},{key:"_draw",value:function(){var t=this._getState();t.layers=[this.layer],t.canvas=this.canvas,this.deckGL.setProps(t)}},{key:"_getState",value:function(){var t=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?fl(Object(r),!0).forEach(function(e){hl(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fl(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({width:parseInt(this.canvas.style.width),height:parseInt(this.canvas.style.height)},this.getMapInfo()),e={};for(var r in t)e[r]=t[r];for(var n in this.props)e[n]=this.props[n];return this._isEPSG3857&&this._isEPSG3857()?(e.coordinateSystem=this.coordinateSystem,e.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem):(e.coordinateSystem=1,e.isGeographicCoordinateSystem=!1),e.data=this.data,e}},{key:"_createLayerByLayerTypeID",value:function(){if(this.props.data=this.data,this.props.isGeographicCoordinateSystem=this.isGeographicCoordinateSystem,this.props.coordinateSystem=this.coordinateSystem,this.props.pickable=Boolean(this.props.onClick)||Boolean(this.props.onHover),"scatter-plot"===this.layerTypeID)this.props.id="scatter-plot",this._createScatterPlotLayer();else if("path-layer"===this.layerTypeID)this.props.id="path-layer",this._createPathLayer();else if("polygon-layer"===this.layerTypeID)this.props.id="polygon-layer",this._createPolygonLayer();else if("arc-layer"===this.layerTypeID)this.props.id="arc-layer",this._createArcLineLayer();else{if("hexagon-layer"!==this.layerTypeID)throw new Error(this.layerTypeID+" does not support");this.props.id="hexagon-layer",this._createHexagonLayer()}}},{key:"_createScatterPlotLayer",value:function(){var t=this;this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(t){if(!t)return[0,0,0];var e=t.getLngLat();return e&&[e.lng,e.lat,0]},this.callback.getColor&&(this.props.getColor=this.callback.getColor?this.callback.getColor:function(e){var r=e&&e.getStyle();return r&&r.color||t.props.color}),this.callback.getRadius&&(this.props.getRadius=this.callback.getRadius?this.callback.getRadius:function(e){var r=e&&e.getStyle();return r&&r.radius||t.props.radius}),(this.props.color||this.props.radius)&&(this.props.updateTriggers={},this.props.radius&&(this.props.updateTriggers.getRadius=[this.props.radius]),this.props.color&&(this.props.updateTriggers.getColor=[this.props.color])),this.layer=new window.DeckGL.ScatterplotLayer(this.props)}},{key:"_createPathLayer",value:function(){this.props.getPath=this.callback.getPath?this.callback.getPath:function(t){return t.geometry.coordinates},this.callback.getColor&&(this.props.getColor=this.callback.getColor),this.callback.getWidth&&(this.props.getWidth=this.callback.getWidth),this.callback.getDashArray&&(this.props.getDashArray=this.callback.getDashArray),this.layer=new window.DeckGL.PathLayer(this.props)}},{key:"_createPolygonLayer",value:function(){this.props.getPolygon=this.callback.getPolygon?this.callback.getPolygon:function(t){return t.geometry.coordinates},this.callback.getElevation&&(this.props.getElevation=this.callback.getElevation),this.callback.getFillColor&&(this.props.getFillColor=this.callback.getFillColor),this.callback.getLineColor&&(this.props.getLineColor=this.callback.getLineColor),this.callback.getLineWidth&&(this.props.getLineWidth=this.callback.getLineWidth),this.props.updateTriggers={},this.props.updateTriggers.getColor=this.props.color?this.props.color:[0,0,128,128],this.layer=new window.DeckGL.PolygonLayer(this.props)}},{key:"_createArcLineLayer",value:function(){this.props.getSourcePosition=this.callback.getSourcePosition?this.callback.getSourcePosition:function(t){return t?t.geometry.coordinates[0]:[0,0,0]},this.props.getTargetPosition=this.callback.getTargetPosition?this.callback.getTargetPosition:function(t){return t?t.geometry.coordinates[1]:[0,0,0]},this.callback.getStrokeWidth&&(this.props.getStrokeWidth=this.callback.getStrokeWidth),this.callback.getSourceColor&&(this.props.getSourceColor=this.callback.getSourceColor),this.callback.getTargetColor&&(this.props.getTargetColor=this.callback.getTargetColor),this.layer=new window.DeckGL.ArcLayer(this.props)}},{key:"_createHexagonLayer",value:function(){this.props.getPosition=this.callback.getPosition?this.callback.getPosition:function(t){return t?t.geometry.coordinates:[0,0,0]},this.callback.getColorValue&&(this.props.getColorValue=this.callback.getColorValue),this.callback.getElevationValue&&(this.props.getElevationValue=this.callback.getElevationValue),this.layer=new window.DeckGL.HexagonLayer(this.props)}},{key:"_initContainer",value:function(t,e){var r=e.style,n=r.width,o=r.height;this.canvas=this._createCanvas(n,o),t.appendChild(this.canvas)}},{key:"_createCanvas",value:function(t,e){var r=document.createElement("canvas");return r.id=this.id,r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.cursor="",r.width=parseInt(t),r.height=parseInt(e),r.style.width=t,r.style.height=e,r}}])&&pl(e.prototype,r),n&&pl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dl(t){"@babel/helpers - typeof";return(dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vl(t,e){return(vl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ml(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=gl(t);if(e){var o=gl(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===dl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function gl(t){return(gl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vl(t,e)}(a,yl);var e,r,n,i=ml(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t,e)).type="custom",r.renderingMode="3d",r.overlay=!0,r}return e=a,(r=[{key:"onAdd",value:function(t){if(this.map=t,this.canvas)return this.mapContainer=this.map.getCanvasContainer(),this;this._isEPSG3857()?(this.coordinateSystem=3,this.isGeographicCoordinateSystem=!0):(this.coordinateSystem=1,this.isGeographicCoordinateSystem=!1),this._initContainer(this.map.getCanvasContainer(),this.map.getCanvas()),this._createLayerByLayerTypeID();var e=this._getState(),r={};for(var n in e)r[n]=e[n];return r.layers=[this.layer],r.canvas=this.canvas,this.deckGL=new window.DeckGL.experimental.DeckGLJS(r),this._draw(),this}},{key:"onRemove",value:function(){this.map.getCanvasContainer().removeChild(this.canvas),this.clear()}},{key:"getMapInfo",value:function(){var t=this.map.getCenter();return{center:t,zoom:this.map.getZoom(),maxZoom:this.map.getMaxZoom(),pitch:this.map.getPitch(),bearing:this.map.getBearing(),longitude:t.lng,latitude:t.lat}}},{key:"render",value:function(){this._draw()}},{key:"_isEPSG3857",value:function(){return this.map.getCRS&&this.map.getCRS()!==o().CRS.EPSG3857}}])&&bl(e.prototype,r),n&&bl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function Ol(t){return function(t){if(Array.isArray(t))return Sl(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Sl(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sl(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sl(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Pl={textSize:"12px",textFont:["12px Calibri","sans-serif"],textAnchor:"bottom",textColor:"rgba(0,0,0,1)",textHaloColor:"rgba(255,255,255,1)",textHaloWidth:1},xl={lineColor:"red",lineCap:"round",lineJoin:"round",lindDasharray:[.4,5],lineDashOffset:0,lineWidth:1},kl={showLabel:!0,opacity:1,visible:!0,interval:10,extent:null,minZoom:0,maxZoom:50,wrapX:!0,strokeStyle:xl,lngLabelFormatter:null,latLabelFormatter:null,lngLabelStyle:Pl,latLabelStyle:Pl},jl=function(){function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=e,this.id=o&&o.id,this.sourceId=this.id+"_line",this.canvasId=this.id,this.options=r,this.mapElement=o.mapElement,this.targetElement=o.targetElement,this.getMapStateByKey=n.getMapStateByKey,this.getDefaultExtent=n.getDefaultExtent,this.setVisibility=n.setVisibility,this.updateGraticuleLayer=n.updateGraticuleLayer,this.init()}var e,r,n;return e=t,(r=[{key:"init",value:function(){this._initialize(),this._createCanvas(),this._drawCanvas(),this.setVisibility(),this._drawLabel()}},{key:"onRemove",value:function(){this.targetElement.removeChild(this.canvas),this.canvas=null}},{key:"setMinZoom",value:function(t){this.options.minZoom=t,this.setVisibility()}},{key:"setMaxZoom",value:function(t){this.options.maxZoom=t,this.setVisibility()}},{key:"setShowLabel",value:function(t){this.options.showLabel=t,this._drawLabel()}},{key:"setExtent",value:function(t){this.options.extent=this.getDefaultExtent(t),this.features=this._getGraticuleFeatures(),this.updateGraticuleLayer(),this._drawLabel()}},{key:"setLngLabelStyle",value:function(t){this.options.lngLabelStyle=t,this._drawLabel()}},{key:"setLatLabelStyle",value:function(t){this.options.latLabelStyle=t,this._drawLabel()}},{key:"setIntervals",value:function(t){this.options.interval=t,this._calcInterval(),this.features=this._getGraticuleFeatures(),this.updateGraticuleLayer(),this._drawLabel()}},{key:"draw",value:function(){this._reset()}},{key:"_initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options;(t=t||{}).strokeStyle=Object.assign({},xl,t.strokeStyle||{}),t.lngLabelStyle=Object.assign({},Pl,t.lngLabelStyle||{}),t.latLabelStyle=Object.assign({},Pl,t.latLabelStyle||{}),this.options=Object.assign({},kl,t,{extent:this.getDefaultExtent(t.extent),wrapX:t.wrapX}),this.oldExtent=this.options.extent,this._calcInterval(),this.isRotate=!1,this.visible=!0,this.features=this._getGraticuleFeatures()}},{key:"_createCanvas",value:function(){if(!this.canvas){var t=this.mapElement;this.canvas=document.createElement("canvas"),this.canvas.id=this.canvasId,this.canvas.style.position="absolute",this.canvas.style.top="0px",this.canvas.style.left="0px";var e=("undefined"==typeof window?{}:window).devicePixelRatio||1;this.canvas.width=parseInt(t.style.width)*e,this.canvas.height=parseInt(t.style.height)*e,this.canvas.style.width=t.style.width,this.canvas.style.height=t.style.height,this.canvas.globalAlpha=this.options.opacity,this.targetElement.appendChild(this.canvas)}}},{key:"_drawCanvas",value:function(){this.canvas||this._createCanvas(),this.setVisibility(),this._reset()}},{key:"_resizeCallback",value:function(){this.targetElement&&this.targetElement.removeChild(this.canvas),this.canvas=null,this._drawCanvas()}},{key:"_reset",value:function(){this._updateRotate(),this._updateExtent(),this._calcInterval(),this._drawLabel()}},{key:"_updateRotate",value:function(){var t=this.getMapStateByKey("getBearing");this.isRotate=t>-180&&t<=-90||t>=90&&t<180}},{key:"_updateExtent",value:function(){if(this.options.wrapX&&!this.oldExtent){var t=this.getMapStateByKey("getBounds"),e=t._ne,r=t._sw;this.options.extent=[r.lng,r.lat,e.lng,e.lat]}}},{key:"_calcInterval",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.interval;"function"==typeof t?(t=t(this.map),this._currLngInterval=t,this._currLatInterval=t):(this._currLngInterval=t,this._currLatInterval=t)}},{key:"_formatLat",value:function(t){return this.options.latFormatTickLabel?this.options.latLabelFormatter(t):t<0?Fs(-1*t)+"S":t>0?Fs(t)+"N":""+Fs(t)}},{key:"_formatLng",value:function(t){return this.options.lngLabelFormatter?this.options.lngLabelFormatter(t):(t=Ds(t))>0&&t<=180?Fs(t)+"E":t<0&&t>=-180?Fs(-1*t)+"W":""+Fs(t)}},{key:"_parsePxToInt",value:function(t){t.length>2&&"p"===t.charAt(t.length-2)&&(t=t.substr(0,t.length-2));try{return parseInt(t,10)}catch(t){console.log(t)}return 0}},{key:"_drawLabel",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.visible,r=this.canvas,n=r.getContext("2d");if(e&&this.options.showLabel){if(this.mapElement){this._currLngInterval&&this._currLatInterval||this._calcInterval(),n.clearRect(0,0,r.width,r.height);var o=this.options,i=o.lngLabelStyle,a=o.latLabelStyle,s=this._getGridiculePoints(),u=s.lngPoints,l=s.latPonits;u.forEach(function(e){t._drawLng(n,e[0],e[1],e[2],i)}),l.forEach(function(e){t._drawLat(n,e[0],e[1],e[2],a)})}}else n.clearRect(0,0,r.width,r.height)}},{key:"_drawLat",value:function(t,e,r,n,o){t=this._setLabelStyle(t,o);var i=this.canvas.width,a=12;try{var s=t.font.split(" ")[0];a=this._parsePxToInt(s)}catch(t){console.log(t)}if(!n){var u=e;e=r,r=this.getMapStateByKey("project",[u,e])}var l=this._formatLat(e),c=t.measureText(l).width;t.strokeText(l,(n?i:r.x)-c,(n?r:r.y)+a/2),t.fillText(l,(n?i:r.x)-c,(n?r:r.y)+a/2)}},{key:"_drawLng",value:function(t,e,r,n,o){t=this._setLabelStyle(t,o);var i=this.canvas.height;if(!n){var a=r;r=this.getMapStateByKey("project",[e,a])}var s=this._formatLng(e),u=t.measureText(s).width;t.strokeText(s,(n?r:r.x)-u/2,n?i:r.y),t.fillText(s,(n?r:r.x)-u/2,n?i:r.y)}},{key:"_getLatPoints",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-180,180],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.features;if(o){if(this.options.wrapX&&-180===e[0]&&180===e[1])return[];var i=[];return o.forEach(function(o){var a=o.geometry.coordinates[0][1];if(o.geometry.coordinates[1][1]===a){var s="number"==typeof n?n:e[1];t.isRotate&&(s="number"==typeof r?r:e[0]),t.options.wrapX&&(i=i.concat(t._getWrapPoints(s,a,[s,s]))),i.push([s,a])}}),i}}},{key:"_getLngPoints",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-90,90],r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.features;if(o){var i="number"==typeof r?r:e[0];this.isRotate&&(i="number"==typeof n?n:e[1]);var a=[];return o.forEach(function(e){var r=e.geometry.coordinates[0][0];e.geometry.coordinates[1][0]===r&&(a.push([r,i]),t.options.wrapX&&(a=a.concat(t._getWrapPoints(r,i))))}),a}}},{key:"_getWrapPoints",value:function(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.oldExtent,n=[],o=this.getMapStateByKey("getBounds"),i=o._ne,a=o._sw,s=r.length>2?r[2]:r[1];t>=a.lng;){var u=Ds(t,180===s,-180===r[0]);(!r||u>=r[0]&&u<=s)&&n.push([t,e]),t-=360}for(;t<=i.lng;){var l=Ds(t,180===s,-180===r[0]);(!r||l>=r[0]&&l<=s)&&n.push([t,e]),t+=360}return n}},{key:"_getGridiculePoints",value:function(){var t=this._getEdgeLat(),e=this._getEdgeLng(),r=this._getRange(),n=r.latRange,o=r.lngRange,i=r.firstLat,a=r.firstLng,s=r.lastLat,u=r.lastLng;return{latPonits:this._getUniquePoint(this._getLatPoints(o,a,u),t,1),lngPoints:this._getUniquePoint(this._getLngPoints(n,i,s),e,0)}}},{key:"_getEdgeLat",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._currLatInterval,r=[],n=[],o=this.canvas.width,i=this.canvas.height,a=this._getRange().extent,s=this.getMapStateByKey("getBounds")._ne;if(this.options.wrapX&&Ds(s.lng)>a[2])return[];for(var u=this._countDecimals(e),l=0;l<=i;l++){var c=this.getMapStateByKey("unproject",[o,l]),f=Ds(c.lng);(this.options.wrapX?f>=a[0]&&f<=a[2]:c.lng>=a[0]&&c.lng<=a[2])&&c.lat>=a[1]&&c.lat<=a[3]&&(r.push([c.lat,l]),n.push(c.lat),void 0===t&&c.lat.toFixed(u)%e==0&&(t=Number(c.lat.toFixed(u))))}var h=this._getIntersectRange(t,n,r,e),p=h.first,y=h.last,d=h.coordinates,b=h.points;t=Math.min(Math.max(p,-90),90);var v=Math.max(Math.min(Math.round(y),90),-90);return-90!==t||-90!==v?this._getClosestCoordinate(t,v,d,b,e):[]}},{key:"_getEdgeLng",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._currLngInterval,r=[],n=[],o=this.canvas.width,i=this.canvas.height,a=this.options.extent,s=this._countDecimals(e),u=this.getMapStateByKey("getBounds")._sw;if(this.options.wrapX&&Ds(u.lat)>a[3])return[];for(var l=0;l<=o;l++){var c=this.getMapStateByKey("unproject",[l,i]),f=Ds(c.lng);(this.options.wrapX?f>=a[0]&&f<=a[2]:c.lng>=a[0]&&c.lng<=a[2])&&c.lat>=a[1]&&c.lat<=a[3]&&(r.push([c.lng,l]),n.push(c.lng),void 0===t&&c.lng.toFixed(s)%e==0&&(t=Number(c.lng.toFixed(s))))}var h=this._getIntersectRange(t,n,r,e),p=h.first,y=h.last,d=h.coordinates,b=h.points;return t=p,this._getClosestCoordinate(t,y,d,b,e)}},{key:"_getIntersectRange",value:function(t,e,r,n){var o=e[e.length-1];if(t>o){o=t,e.reverse(),r.reverse();for(var i=this._countDecimals(n),a=0;a<=e.length;a++){var s=e[a];if(s.toFixed(i)%n==0){t=Number(s.toFixed(i));break}}}return{first:t,last:o,coordinates:e,points:r}}},{key:"_getClosestCoordinate",value:function(t,e,r,n,o){for(var i=[],a=t;a<=e;){var s=this._getClosestNumberIndex(a,r),u=n[s];i.push([Math.round(u[0]),u[1],!0]),a+=o,r=r.slice(s),n=n.slice(s)}return i}},{key:"_getClosestNumberIndex",value:function(t,e){for(var r=0,n=Number.MAX_VALUE,o=0;o<e.length;o++){var i=Math.abs(e[o]-t);if(i<=n){if(i===n&&e[o]<e[r])continue;r=o,n=i}}return r}},{key:"_getUniquePoint",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.options.wrapX)return t.concat(e);if(!e||0===e.length)return t;var n=e,o=this.canvas.width,i=this.canvas.height;for(var a in t){var s=this.getMapStateByKey("project",t[a]),u=n.findIndex(function(e){return e[0]===t[a][r]});u<=-1?n.push(t[a]):s&&s.x>=0&&s.x<=o&&s.y>=0&&s.y<=i&&(n[u]=t[a])}return n}},{key:"_countDecimals",value:function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0}},{key:"_getGraticuleFeatures",value:function(){var t=this._currLngInterval||10,e=this._currLatInterval||10,r=[],n=this._getRange(),o=n.latRange,i=n.lngRange,a=n.firstLat,s=n.firstLng,u=n.lastLat,l=n.lastLng;this.options.wrapX&&!this.oldExtent&&(o=[-90,90],i=[-180,180],a=s=u=l=null),"number"==typeof s&&r.unshift(this._makeLineFeature(this._makeLineCoords(s,o,a,u))),"number"==typeof l&&r.unshift(this._makeLineFeature(this._makeLineCoords(l,o,a,u)));for(var c=i[0];c<=i[1];c+=t)r.unshift(this._makeLineFeature(this._makeLineCoords(c,o,a,u)));"number"==typeof a&&r.unshift(this._makeLineFeature(this._makeLineCoords(a,i,s,l,"lat"))),"number"==typeof u&&r.unshift(this._makeLineFeature(this._makeLineCoords(u,i,s,l,"lat")));for(var f=o[0];f<=o[1];f+=e)r.unshift(this._makeLineFeature(this._makeLineCoords(f,i,s,l,"lat")));return r}},{key:"_getRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.extent&&Ol(this.options.extent);t&&0!==t.length||(t=this.getDefaultExtent());var e={};if((t=t.map(function(t){return Number(t.toFixed(6))}))[1]%this._currLatInterval!=0){e.firstLat=t[1];var r=Math.ceil(t[1]/this._currLatInterval);t[1]=r*this._currLatInterval}if(t[3]%this._currLatInterval!=0){e.lastLat=t[3];var n=Math.floor(t[3]/this._currLatInterval);t[3]=n*this._currLatInterval}if(t[0]%this._currLngInterval!=0){e.firstLng=t[0];var o=Math.ceil(t[0]/this._currLngInterval);t[0]=o*this._currLngInterval}if(t[2]%this._currLngInterval!=0){e.lastLng=t[2];var i=Math.floor(t[2]/this._currLngInterval);t[2]=i*this._currLngInterval}return Object.assign({latRange:[t[1],t[3]],lngRange:[t[0],t[2]],extent:t},e)}},{key:"_makeLineCoords",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[-90,90],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"lng";t="lng"===o?this._lngFix(t):t,r="number"==typeof r?r:e[0],n="number"==typeof n?n:e[1];for(var i=Math.abs(r-n),a=[],s=r;s<=n;s+=i)"lng"===o?a.push([t,s]):a.push([s,t]);return a}},{key:"_makeLineFeature",value:function(t){return{type:"Feature",geometry:{type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LineString",coordinates:t}}}},{key:"_lngFix",value:function(t){return t>=180?180:t<=-180?-180:t}},{key:"_transformStrokeStyle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.strokeStyle;if(!t||"string"==typeof t)return{paint:{"line-color":t||"rgba(0,0,0,0.2)"}};var e={visibility:this.visible?"visible":"none","line-join":t.lineJoin||"round","line-cap":t.lineCap||"round"},r={"line-color":t.lineColor||"rgba(0,0,0,0.2)","line-width":t.lineWidth||1,"line-offset":t.lineDashOffset||0,"line-translate-anchor":"viewport"};return t.lineWidth&&("function"==typeof t.lineWidth?r["line-width"]=t.lineWidth(this.map):r["line-width"]=t.lineWidth),t.lindDasharray&&("function"==typeof t.lindDasharray?r["line-dasharray"]=t.lindDasharray(this.map):r["line-dasharray"]=t.lindDasharray),{layout:e,paint:r}}},{key:"_setLabelStyle",value:function(t,e){return e.textColor&&(t.fillStyle=e.textColor),e.textSize&&(t.font=e.textSize+" "+(e.textFont||["Calibri","sans-serif"]).join(",")),e.textHaloColor&&(t.strokeStyle=e.textHaloColor,t.lineWidth=e.textHaloWidth||1),e.textAnchor&&(t.textBaseline=this._getTxetBaseline(e.textAnchor),t.textAligin=this._getTxetAlign(e.textAligin)),t}},{key:"_getTxetBaseline",value:function(t){if(!t)return"bottom";var e=t.split("-");return e.includes("bottom")?"bottom":e.includes("top")?"top":e.includes("center")?"middle":void 0}},{key:"_getTxetAlign",value:function(t){if(!t)return"center";var e=t.split("-");return e.includes("left")?"left":e.includes("right")?"right":e.includes("center")?"center":void 0}}])&&_l(e.prototype,r),n&&_l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function El(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Tl,Cl,Rl,Al={textSize:"12px",textFont:["12px Calibri","sans-serif"],textAnchor:"bottom",textColor:"rgba(0,0,0,1)",textHaloColor:"rgba(255,255,255,1)",textHaloWidth:1},Ml={lineColor:"red",lineCap:"round",lineJoin:"round",lindDasharray:[.4,5],lineDashOffset:0,lineWidth:1},Ll={showLabel:!0,opacity:1,visible:!0,interval:10,extent:null,minZoom:0,maxZoom:50,wrapX:!0,strokeStyle:Ml,lngLabelFormatter:null,latLabelFormatter:null,lngLabelStyle:Al,latLabelStyle:Al},Nl=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e&&e.layerID?e.layerID:C.createUniqueID("graticuleLayer_"),this.sourceId=this.id+"_line",(e=e||{}).strokeStyle=Object.assign({},Ml,e.strokeStyle||{}),e.lngLabelStyle=Object.assign({},Al,e.lngLabelStyle||{}),e.latLabelStyle=Object.assign({},Al,e.latLabelStyle||{}),this.options=Object.assign({},Ll,e),this.type="custom",this.renderingMode="3d",this.overlay=!0,this.styleDataEevent=this._setLayerTop.bind(this)}var e,r,n;return e=t,(r=[{key:"onAdd",value:function(t){this.map=t,this.renderer=new jl(this.map,this.options,{getMapStateByKey:this.getMapStateByKey,getDefaultExtent:this.getDefaultExtent,updateGraticuleLayer:this.updateGraticuleLayer.bind(this),setVisibility:this.setVisibility.bind(this)},{mapElement:this.map.getCanvas(),targetElement:this.map.getCanvasContainer(),id:this.id}),this.addGraticuleLayer(),this.resizeEvent=this.renderer._resizeCallback.bind(this.renderer),this.zoomendEvent=this.setVisibility.bind(this),this._bindEvent()}},{key:"onRemove",value:function(){this.renderer.onRemove(),this._unbindEvent()}},{key:"render",value:function(){this.renderer.draw()}},{key:"getMapStateByKey",value:function(t,e){return"getBearing"===t?this.map.getBearing():"getBounds"===t?this.map.getBounds():"project"===t?this.map.project(e):"unproject"===t?this.map.unproject(e):void 0}},{key:"setVisibility",value:function(t){var e=this.map&&this.map.getZoom();this.options.visible="boolean"==typeof t?t:this.options.visible,this.visible="boolean"==typeof t?t:this.options.visible&&e>=this.options.minZoom&&e<=this.options.maxZoom,this.renderer&&(this.renderer.visible=this.visible),this.map.getLayer(this.sourceId)&&this.map.setLayoutProperty(this.sourceId,"visibility",this.visible?"visible":"none"),this.renderer&&this.renderer._drawLabel()}},{key:"setMinZoom",value:function(t){this.options.minZoom=t,this.setVisibility()}},{key:"setMaxZoom",value:function(t){this.options.maxZoom=t,this.setVisibility()}},{key:"setShowLabel",value:function(t){this.options.showLabel=t,this.renderer._drawLabel()}},{key:"setExtent",value:function(t){this.options.extent=this.getDefaultExtent(t,this.map),this.updateGraticuleLayer(),this.renderer._drawLabel()}},{key:"setStrokeStyle",value:function(t){if(this.map&&this.map.getLayer(this.sourceId)){this.options.strokeStyle=t;var e=this.renderer._transformStrokeStyle(t),r=e.layout,n=e.paint;for(var o in r)this.map.setLayoutProperty(this.sourceId,o,r[o]);for(var i in n)this.map.setPaintProperty(this.sourceId,i,n[i])}}},{key:"setLngLabelStyle",value:function(t){this.options.lngLabelStyle=t,this.renderer._drawLabel()}},{key:"setLatLabelStyle",value:function(t){this.options.latLabelStyle=t,this.renderer._drawLabel()}},{key:"setIntervals",value:function(t){this.renderer&&this.renderer.setIntervals(t)}},{key:"getDefaultExtent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.map,r=(e.getCRS&&e.getCRS()||{}).extent;if(r||(r=[-180,-85.05119,180,85.05119]),!t||0===t.length)return r;var n=o().LngLatBounds.convert(t),i=n._sw,a=n._ne;return t=[i.lng,i.lat,a.lng,a.lat],t=[Math.max(r[0],t[0]),Math.max(r[1],t[1]),Math.min(r[2],t[2]),Math.min(r[3],t[3])]}},{key:"addGraticuleLayer",value:function(){if(!this.map.getSource(this.sourceId)){var t={type:"geojson",data:{type:"FeatureCollection",features:this.renderer.features}};this.map.addSource(this.sourceId,t)}if(!this.map.getLayer(this.sourceId)){var e=Object.assign({id:this.sourceId,type:"line",source:this.sourceId},this.renderer._transformStrokeStyle());this.map.addLayer(e)}}},{key:"_getLatPoints",value:function(t,e,r,n){return this.renderer._getLatPoints(t,e,r,n)}},{key:"_bindEvent",value:function(){this.map.on("styledata",this.styleDataEevent),this.map.on("resize",this.resizeEvent),this.map.on("zoomend",this.zoomendEvent)}},{key:"_unbindEvent",value:function(){this.map.off("styledata",this.styleDataEevent),this.map.off("resize",this.resizeEvent),this.map.off("zoomend",this.zoomendEvent)}},{key:"_setLayerTop",value:function(){var t=this,e=this.map;if(e){var r=e.getStyle&&e.getStyle().layers;r&&r.length&&r.findIndex(function(e){return e.id===t.sourceId})!==r.length-1&&e.getLayer(this.sourceId)&&(e.removeLayer(this.sourceId),this.addGraticuleLayer())}}},{key:"updateGraticuleLayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.features;if(this.map.getSource(this.sourceId)){var e={type:"FeatureCollection",features:t};this.map.getSource(this.sourceId).setData(e)}this.addGraticuleLayer()}}])&&El(e.prototype,r),n&&El(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Il=(r(9957),r(5937),r(4238)),Dl=r.n(Il),Fl=window.fetch,Bl={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(t){for(var e in t){this.queryKeys.push(e),"string"!=typeof t[e]&&(t[e]=C.toJSON(t[e]));var r=encodeURIComponent(t[e]);this.queryValues.push(r)}},issue:function(t){for(var e=this,r=e.getUid(),n=t.url,o=[],i=n,a=0,s=e.queryKeys?e.queryKeys.length:0,u=0;u<s;u++)if(i.length+e.queryKeys[u].length+2>=e.limitLength){if(0==a)return!1;o.push(i),i=n,a=0,u--}else if(i.length+e.queryKeys[u].length+2+e.queryValues[u].length>e.limitLength)for(var l=e.queryValues[u];l.length>0;){var c=e.limitLength-i.length-e.queryKeys[u].length-2;i.indexOf("?")>-1?i+="&":i+="?";var f=l.substring(0,c);"%"===f.substring(c-1,c)?(c-=1,f=l.substring(0,c)):"%"===f.substring(c-2,c-1)&&(c-=2,f=l.substring(0,c)),i+=e.queryKeys[u]+"="+f,l=l.substring(c),f.length>0&&(o.push(i),i=n,a=0)}else a++,i.indexOf("?")>-1?i+="&":i+="?",i+=e.queryKeys[u]+"="+e.queryValues[u];return o.push(i),e.send(o,"SuperMapJSONPCallbacks_"+r,t&&t.proxy)},getUid:function(){return 1e3*(new Date).getTime()+Math.floor(1e17*Math.random())},send:function(t,e,r){var n=t.length;if(n>0)return new Promise(function(o){for(var i=(new Date).getTime(),a=0;a<n;a++){var s=t[a];s.indexOf("?")>-1?s+="&":s+="?",s+="sectionCount="+n,s+="&sectionIndex="+a,s+="&jsonpUserID="+i,r&&(s=decodeURIComponent(s),s=r+encodeURIComponent(s)),Dl()(s,{jsonpCallbackFunction:e,timeout:3e4}).then(function(t){o(t.json())})}})},GET:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings(t.params),this.issue(t)},POST:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:t.data}),this.issue(t)},PUT:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:t.data}),this.issue(t)},DELETE:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:t.data}),this.issue(t)}},Gl=function(){return void 0!=Tl?Tl:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest},Ul=function(){return Cl||45e3},Jl={commit:function(t,e,r,n){switch(t=t?t.toUpperCase():t){case"GET":return this.get(e,r,n);case"POST":return this.post(e,r,n);case"PUT":return this.put(e,r,n);case"DELETE":return this.delete(e,r,n);default:return this.get(e,r,n)}},supportDirectRequest:function(t,e){return!!C.isInTheSameDomain(t)||(void 0!=e.crossOrigin?e.crossOrigin:Gl()||e.proxy)},get:function(t,e,r){r=r||{};if(t=C.urlAppend(t,this._getParameterString(e||{})),t=this._processUrl(t,r),!this.supportDirectRequest(t,r)){var n={url:t=t.replace(".json",".jsonp"),data:e};return Bl.GET(n)}return this.urlIsLong(t)?this._postSimulatie("GET",t.substring(0,t.indexOf("?")),e,r):this._fetch(t,e,r,"GET")},delete:function(t,e,r){r=r||{};if(t=C.urlAppend(t,this._getParameterString(e||{})),t=this._processUrl(t,r),!this.supportDirectRequest(t,r)){t=t.replace(".json",".jsonp");var n={url:t+="&_method=DELETE",data:e};return Bl.DELETE(n)}return this.urlIsLong(t)?this._postSimulatie("DELETE",t.substring(0,t.indexOf("?")),e,r):this._fetch(t,e,r,"DELETE")},post:function(t,e,r){if(r=r||{},t=this._processUrl(t,r),!this.supportDirectRequest(t,r)){t=t.replace(".json",".jsonp");var n={url:C.urlAppend(t,"_method=POST"),data:e};return Bl.POST(n)}return this._fetch(t,e,r,"POST")},put:function(t,e,r){if(r=r||{},t=this._processUrl(t,r),!this.supportDirectRequest(t,r)){t=t.replace(".json",".jsonp");var n={url:t+="&_method=PUT",data:e};return Bl.PUT(n)}return this._fetch(t,e,r,"PUT")},urlIsLong:function(t){for(var e=0,r=null,n=0,o=t.length;n<o;n++)(r=t.charCodeAt(n))<127?e++:128<=r&&r<=2047?e+=2:2048<=r&&r<=65535&&(e+=3);return!(e<2e3)},_postSimulatie:function(t,e,r,n){return e+=(e.indexOf("?")>-1?"&":"?")+"_method="+t,"string"!=typeof r&&(r=JSON.stringify(r)),this.post(e,r,n)},_processUrl:function(t,e){if(this._isMVTRequest(t))return t;if(-1===t.indexOf(".json")&&!e.withoutFormatSuffix)if(t.indexOf("?")<0)t+=".json";else{var r=t.split("?");2===r.length&&(t=r[0]+".json?"+r[1])}return e&&e.proxy&&("function"==typeof e.proxy?t=e.proxy(t):(t=decodeURIComponent(t),t=e.proxy+encodeURIComponent(t))),t},_fetch:function(t,e,r,n){return(r=r||{}).headers=r.headers||{},r.headers["Content-Type"]||FormData.prototype.isPrototypeOf(e)||(r.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),r.timeout?this._timeout(r.timeout,Fl(t,{method:n,headers:r.headers,body:"PUT"===n||"POST"===n?e:void 0,credentials:this._getWithCredentials(r),mode:"cors",timeout:Ul()}).then(function(t){return t})):Fl(t,{method:n,body:"PUT"===n||"POST"===n?e:void 0,headers:r.headers,credentials:this._getWithCredentials(r),mode:"cors",timeout:Ul()}).then(function(t){return t})},_getWithCredentials:function(t){return!0===t.withCredentials?"include":!1===t.withCredentials?"omit":"same-origin"},_fetchJsonp:function(t,e){return e=e||{},Dl()(t,{method:"GET",timeout:e.timeout}).then(function(t){return t})},_timeout:function(t,e){return new Promise(function(r,n){setTimeout(function(){n(new Error("timeout"))},t),e.then(r,n)})},_getParameterString:function(t){var e=[];for(var r in t){var n,o=t[r];if(null!=o&&"function"!=typeof o)n=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),e.push(encodeURIComponent(r)+"="+n)}return e.join("&")},_isMVTRequest:function(t){return t.indexOf(".mvt")>-1||t.indexOf(".pbf")>-1}};!function(t){t[t.Unknown=0]="Unknown",t[t.Point=1]="Point",t[t.LineString=2]="LineString",t[t.Polygon=3]="Polygon",t[t.MultiPoint=4]="MultiPoint",t[t.MultiLineString=5]="MultiLineString",t[t.MultiPolygon=6]="MultiPolygon",t[t.GeometryCollection=7]="GeometryCollection",t[t.CircularString=8]="CircularString",t[t.CompoundCurve=9]="CompoundCurve",t[t.CurvePolygon=10]="CurvePolygon",t[t.MultiCurve=11]="MultiCurve",t[t.MultiSurface=12]="MultiSurface",t[t.Curve=13]="Curve",t[t.Surface=14]="Surface",t[t.PolyhedralSurface=15]="PolyhedralSurface",t[t.TIN=16]="TIN",t[t.Triangle=17]="Triangle"}(Rl||(Rl={}));var Vl,zl=new Int32Array(2),ql=new Float32Array(zl.buffer),Hl=new Float64Array(zl.buffer),Wl=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];function Yl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}!function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(Vl||(Vl={}));var Xl=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bytes_=e,this.position_=0}var e,r,n;return e=t,n=[{key:"allocate",value:function(e){return new t(new Uint8Array(e))}}],(r=[{key:"clear",value:function(){this.position_=0}},{key:"bytes",value:function(){return this.bytes_}},{key:"position",value:function(){return this.position_}},{key:"setPosition",value:function(t){this.position_=t}},{key:"capacity",value:function(){return this.bytes_.length}},{key:"readInt8",value:function(t){return this.readUint8(t)<<24>>24}},{key:"readUint8",value:function(t){return this.bytes_[t]}},{key:"readInt16",value:function(t){return this.readUint16(t)<<16>>16}},{key:"readUint16",value:function(t){return this.bytes_[t]|this.bytes_[t+1]<<8}},{key:"readInt32",value:function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}},{key:"readUint32",value:function(t){return this.readInt32(t)>>>0}},{key:"readInt64",value:function(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}},{key:"readUint64",value:function(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}},{key:"readFloat32",value:function(t){return zl[0]=this.readInt32(t),ql[0]}},{key:"readFloat64",value:function(t){return zl[Wl?0:1]=this.readInt32(t),zl[Wl?1:0]=this.readInt32(t+4),Hl[0]}},{key:"writeInt8",value:function(t,e){this.bytes_[t]=e}},{key:"writeUint8",value:function(t,e){this.bytes_[t]=e}},{key:"writeInt16",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}},{key:"writeUint16",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}},{key:"writeInt32",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}},{key:"writeUint32",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}},{key:"writeInt64",value:function(t,e){this.writeInt32(t,Number(BigInt.asIntN(32,e))),this.writeInt32(t+4,Number(BigInt.asIntN(32,e>>BigInt(32))))}},{key:"writeUint64",value:function(t,e){this.writeUint32(t,Number(BigInt.asUintN(32,e))),this.writeUint32(t+4,Number(BigInt.asUintN(32,e>>BigInt(32))))}},{key:"writeFloat32",value:function(t,e){ql[0]=e,this.writeInt32(t,zl[0])}},{key:"writeFloat64",value:function(t,e){Hl[0]=e,this.writeInt32(t,zl[Wl?0:1]),this.writeInt32(t+4,zl[Wl?1:0])}},{key:"getBufferIdentifier",value:function(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}},{key:"__offset",value:function(t,e){var r=t-this.readInt32(t);return e<this.readInt16(r)?this.readInt16(r+e):0}},{key:"__union",value:function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}},{key:"__string",value:function(t,e){t+=this.readInt32(t);var r=this.readInt32(t),n="",o=0;if(t+=4,e===Vl.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;o<r;){var i=void 0,a=this.readUint8(t+o++);if(a<192)i=a;else{var s=this.readUint8(t+o++);if(a<224)i=(31&a)<<6|63&s;else{var u=this.readUint8(t+o++);if(a<240)i=(15&a)<<12|(63&s)<<6|63&u;else i=(7&a)<<18|(63&s)<<12|(63&u)<<6|63&this.readUint8(t+o++)}}i<65536?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296+(i>>10),56320+(1023&i)))}return n}},{key:"__union_with_string",value:function(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)}},{key:"__indirect",value:function(t){return t+this.readInt32(t)}},{key:"__vector",value:function(t){return t+this.readInt32(t)+4}},{key:"__vector_len",value:function(t){return this.readInt32(t+this.readInt32(t))}},{key:"__has_identifier",value:function(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(var e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}},{key:"createScalarList",value:function(t,e){for(var r=[],n=0;n<e;++n)null!==t(n)&&r.push(t(n));return r}},{key:"createObjList",value:function(t,e){for(var r=[],n=0;n<e;++n){var o=t(n);null!==o&&r.push(o.unpack())}return r}}])&&Yl(e.prototype,r),n&&Yl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ql(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Zl,Kl=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}var e,r,n;return e=t,n=[{key:"getRootAsGeometry",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsGeometry",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startGeometry",value:function(t){t.startObject(8)}},{key:"addEnds",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"createEndsVector",value:function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--)t.addInt32(e[r]);return t.endVector()}},{key:"startEndsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"addXy",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createXyVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startXyVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addZ",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"createZVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startZVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addM",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"createMVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startMVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addT",value:function(t,e){t.addFieldOffset(4,e,0)}},{key:"createTVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startTVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addTm",value:function(t,e){t.addFieldOffset(5,e,0)}},{key:"createTmVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addInt64(e[r]);return t.endVector()}},{key:"startTmVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addType",value:function(t,e){t.addFieldInt8(6,e,Rl.Unknown)}},{key:"addParts",value:function(t,e){t.addFieldOffset(7,e,0)}},{key:"createPartsVector",value:function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}},{key:"startPartsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"endGeometry",value:function(t){return t.endObject()}},{key:"createGeometry",value:function(e,r,n,o,i,a,s,u,l){return t.startGeometry(e),t.addEnds(e,r),t.addXy(e,n),t.addZ(e,o),t.addM(e,i),t.addT(e,a),t.addTm(e,s),t.addType(e,u),t.addParts(e,l),t.endGeometry(e)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"ends",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}},{key:"endsLength",value:function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"endsArray",value:function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"xy",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"xyLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"xyArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"z",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"zLength",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"zArray",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"m",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"mLength",value:function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"mArray",value:function(){var t=this.bb.__offset(this.bb_pos,10);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"t",value:function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"tLength",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"tArray",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"tm",value:function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):BigInt(0)}},{key:"tmLength",value:function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"type",value:function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint8(this.bb_pos+t):Rl.Unknown}},{key:"parts",value:function(e,r){var n=this.bb.__offset(this.bb_pos,18);return n?(r||new t).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}},{key:"partsLength",value:function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}}])&&Ql(e.prototype,r),n&&Ql(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $l(t,e){for(var r=[],n=0;n<t.length;n+=2){var o=[t[n],t[n+1]];e&&o.push(e[n>>1]),r.push(o)}return r}function tc(t,e,r){if(!r||0===r.length)return[$l(t,e)];var n,o=0,i=Array.from(r).map(function(e){return t.slice(o,o=e<<1)});return e&&(o=0,n=Array.from(r).map(function(t){return e.slice(o,o=t)})),i.map(function(t,e){return $l(t,n?n[e]:void 0)})}function ec(t,e){var r=e;if(r===Rl.Unknown&&(r=t.type()),r===Rl.GeometryCollection){for(var n=[],o=0;o<t.partsLength();o++){var i=t.parts(o),a=i.type();n.push(ec(i,a))}return{type:Rl[r],geometries:n}}if(r===Rl.MultiPolygon){for(var s=[],u=0;u<t.partsLength();u++)s.push(ec(t.parts(u),Rl.Polygon));return{type:Rl[r],coordinates:s.map(function(t){return t.coordinates})}}var l=function(t,e){var r=t.xyArray(),n=t.zArray();switch(e){case Rl.Point:var o=Array.from(r);return n&&o.push(n[0]),o;case Rl.MultiPoint:case Rl.LineString:return $l(r,n);case Rl.MultiLineString:case Rl.Polygon:return tc(r,n,t.endsArray())}}(t,r);return{type:Rl[r],coordinates:l}}function rc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}!function(t){t[t.Byte=0]="Byte",t[t.UByte=1]="UByte",t[t.Bool=2]="Bool",t[t.Short=3]="Short",t[t.UShort=4]="UShort",t[t.Int=5]="Int",t[t.UInt=6]="UInt",t[t.Long=7]="Long",t[t.ULong=8]="ULong",t[t.Float=9]="Float",t[t.Double=10]="Double",t[t.String=11]="String",t[t.Json=12]="Json",t[t.DateTime=13]="DateTime",t[t.Binary=14]="Binary"}(Zl||(Zl={}));var nc=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}var e,r,n;return e=t,n=[{key:"getRootAsColumn",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsColumn",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startColumn",value:function(t){t.startObject(11)}},{key:"addName",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addType",value:function(t,e){t.addFieldInt8(1,e,Zl.Byte)}},{key:"addTitle",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"addWidth",value:function(t,e){t.addFieldInt32(4,e,-1)}},{key:"addPrecision",value:function(t,e){t.addFieldInt32(5,e,-1)}},{key:"addScale",value:function(t,e){t.addFieldInt32(6,e,-1)}},{key:"addNullable",value:function(t,e){t.addFieldInt8(7,+e,1)}},{key:"addUnique",value:function(t,e){t.addFieldInt8(8,+e,0)}},{key:"addPrimaryKey",value:function(t,e){t.addFieldInt8(9,+e,0)}},{key:"addMetadata",value:function(t,e){t.addFieldOffset(10,e,0)}},{key:"endColumn",value:function(t){var e=t.endObject();return t.requiredField(e,4),e}},{key:"createColumn",value:function(e,r,n,o,i,a,s,u,l,c,f,h){return t.startColumn(e),t.addName(e,r),t.addType(e,n),t.addTitle(e,o),t.addDescription(e,i),t.addWidth(e,a),t.addPrecision(e,s),t.addScale(e,u),t.addNullable(e,l),t.addUnique(e,c),t.addPrimaryKey(e,f),t.addMetadata(e,h),t.endColumn(e)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"type",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Zl.Byte}},{key:"title",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"width",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"precision",value:function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"scale",value:function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"nullable",value:function(){var t=this.bb.__offset(this.bb_pos,18);return!t||!!this.bb.readInt8(this.bb_pos+t)}},{key:"unique",value:function(){var t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"primaryKey",value:function(){var t=this.bb.__offset(this.bb_pos,22);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"metadata",value:function(t){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__string(this.bb_pos+e,t):null}}])&&rc(e.prototype,r),n&&rc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function oc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ic=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}var e,r,n;return e=t,n=[{key:"getRootAsFeature",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsFeature",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startFeature",value:function(t){t.startObject(3)}},{key:"addGeometry",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addProperties",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createPropertiesVector",value:function(t,e){t.startVector(1,e.length,1);for(var r=e.length-1;r>=0;r--)t.addInt8(e[r]);return t.endVector()}},{key:"startPropertiesVector",value:function(t,e){t.startVector(1,e,1)}},{key:"addColumns",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"createColumnsVector",value:function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}},{key:"startColumnsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"endFeature",value:function(t){return t.endObject()}},{key:"finishFeatureBuffer",value:function(t,e){t.finish(e)}},{key:"finishSizePrefixedFeatureBuffer",value:function(t,e){t.finish(e,void 0,!0)}},{key:"createFeature",value:function(e,r,n,o){return t.startFeature(e),t.addGeometry(e,r),t.addProperties(e,n),t.addColumns(e,o),t.endFeature(e)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"geometry",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?(t||new Kl).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}},{key:"properties",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}},{key:"propertiesLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"propertiesArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"columns",value:function(t,e){var r=this.bb.__offset(this.bb_pos,8);return r?(e||new nc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}},{key:"columnsLength",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}}])&&oc(e.prototype,r),n&&oc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),ac=(new TextEncoder,new TextDecoder);function sc(t,e){var r={};if(!e||0===e.length)return r;var n=t.propertiesArray();if(!n)return r;for(var o=new DataView(n.buffer,n.byteOffset),i=t.propertiesLength(),a=0;a<i;){var s=o.getUint16(a,!0);a+=2;var u=e[s],l=u.name;switch(u.type){case Zl.Bool:r[l]=!!o.getUint8(a),a+=1;break;case Zl.Byte:r[l]=o.getInt8(a),a+=1;break;case Zl.UByte:r[l]=o.getUint8(a),a+=1;break;case Zl.Short:r[l]=o.getInt16(a,!0),a+=2;break;case Zl.UShort:r[l]=o.getUint16(a,!0),a+=2;break;case Zl.Int:r[l]=o.getInt32(a,!0),a+=4;break;case Zl.UInt:r[l]=o.getUint32(a,!0),a+=4;break;case Zl.Long:r[l]=Number(o.getBigInt64(a,!0)),a+=8;break;case Zl.ULong:r[l]=Number(o.getBigUint64(a,!0)),a+=8;break;case Zl.Float:r[l]=o.getFloat32(a,!0),a+=4;break;case Zl.Double:r[l]=o.getFloat64(a,!0),a+=8;break;case Zl.DateTime:case Zl.String:var c=o.getUint32(a,!0);a+=4,r[l]=ac.decode(n.subarray(a,a+c)),a+=c;break;case Zl.Json:var f=o.getUint32(a,!0);a+=4;var h=ac.decode(n.subarray(a,a+f));r[l]=JSON.parse(h),a+=f;break;default:throw new Error("Unknown type "+u.type)}}return r}function uc(t,e){var r=e.columns;return{type:"Feature",geometry:ec(t.geometry(),e.geometryType),properties:sc(t,r)}}var lc=new Uint8Array(0);function cc(t){this._source=t,this._array=lc,this._index=0}function fc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}cc.prototype.read=function(){var t=this,e=t._array.subarray(t._index);return t._source.read().then(function(r){return t._array=lc,t._index=0,r.done?e.length>0?{done:!1,value:e}:{done:!0,value:void 0}:{done:!1,value:function(t,e){if(!t.length)return e;if(!e.length)return t;var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}(e,r.value)}})},cc.prototype.slice=function(t){if((t|=0)<0)throw new Error("invalid length");var e=this,r=this._array.length-this._index;if(this._index+t<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=t));var n=new Uint8Array(t);return n.set(this._array.subarray(this._index)),function o(){return e._source.read().then(function(i){return i.done?(e._array=lc,e._index=0,r>0?n.subarray(0,r):null):r+i.value.length>=t?(e._array=i.value,e._index=t-r,n.set(i.value.subarray(0,t-r),r),n):(n.set(i.value,r),r+=i.value.length,o())})}()},cc.prototype.cancel=function(){return this._source.cancel()};var hc=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}var e,r,n;return e=t,n=[{key:"getRootAsCrs",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsCrs",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startCrs",value:function(t){t.startObject(6)}},{key:"addOrg",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addCode",value:function(t,e){t.addFieldInt32(1,e,0)}},{key:"addName",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"addWkt",value:function(t,e){t.addFieldOffset(4,e,0)}},{key:"addCodeString",value:function(t,e){t.addFieldOffset(5,e,0)}},{key:"endCrs",value:function(t){return t.endObject()}},{key:"createCrs",value:function(e,r,n,o,i,a,s){return t.startCrs(e),t.addOrg(e,r),t.addCode(e,n),t.addName(e,o),t.addDescription(e,i),t.addWkt(e,a),t.addCodeString(e,s),t.endCrs(e)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"org",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"code",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"wkt",value:function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"codeString",value:function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}}])&&fc(e.prototype,r),n&&fc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var yc=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}var e,r,n;return e=t,n=[{key:"getRootAsHeader",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsHeader",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startHeader",value:function(t){t.startObject(14)}},{key:"addName",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addEnvelope",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createEnvelopeVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startEnvelopeVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addGeometryType",value:function(t,e){t.addFieldInt8(2,e,Rl.Unknown)}},{key:"addHasZ",value:function(t,e){t.addFieldInt8(3,+e,0)}},{key:"addHasM",value:function(t,e){t.addFieldInt8(4,+e,0)}},{key:"addHasT",value:function(t,e){t.addFieldInt8(5,+e,0)}},{key:"addHasTm",value:function(t,e){t.addFieldInt8(6,+e,0)}},{key:"addColumns",value:function(t,e){t.addFieldOffset(7,e,0)}},{key:"createColumnsVector",value:function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}},{key:"startColumnsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"addFeaturesCount",value:function(t,e){t.addFieldInt64(8,e,BigInt("0"))}},{key:"addIndexNodeSize",value:function(t,e){t.addFieldInt16(9,e,16)}},{key:"addCrs",value:function(t,e){t.addFieldOffset(10,e,0)}},{key:"addTitle",value:function(t,e){t.addFieldOffset(11,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(12,e,0)}},{key:"addMetadata",value:function(t,e){t.addFieldOffset(13,e,0)}},{key:"endHeader",value:function(t){return t.endObject()}},{key:"finishHeaderBuffer",value:function(t,e){t.finish(e)}},{key:"finishSizePrefixedHeaderBuffer",value:function(t,e){t.finish(e,void 0,!0)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"envelope",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"envelopeLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"envelopeArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"geometryType",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Rl.Unknown}},{key:"hasZ",value:function(){var t=this.bb.__offset(this.bb_pos,10);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasM",value:function(){var t=this.bb.__offset(this.bb_pos,12);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasT",value:function(){var t=this.bb.__offset(this.bb_pos,14);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasTm",value:function(){var t=this.bb.__offset(this.bb_pos,16);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"columns",value:function(t,e){var r=this.bb.__offset(this.bb_pos,18);return r?(e||new nc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}},{key:"columnsLength",value:function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"featuresCount",value:function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint64(this.bb_pos+t):BigInt("0")}},{key:"indexNodeSize",value:function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):16}},{key:"crs",value:function(t){var e=this.bb.__offset(this.bb_pos,24);return e?(t||new hc).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}},{key:"title",value:function(t){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"metadata",value:function(t){var e=this.bb.__offset(this.bb_pos,30);return e?this.bb.__string(this.bb_pos+e,t):null}}])&&pc(e.prototype,r),n&&pc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dc(t){for(var e=yc.getRootAsHeader(t),r=e.featuresCount(),n=e.indexNodeSize(),o=[],i=0;i<e.columnsLength();i++){var a=e.columns(i);if(!a)throw new Error("Column unexpectedly missing");if(!a.name())throw new Error("Column name unexpectedly missing");o.push({name:a.name(),type:a.type(),title:a.title(),description:a.description(),width:a.width(),precision:a.precision(),scale:a.scale(),nullable:a.nullable(),unique:a.unique(),primary_key:a.primaryKey()})}var s=e.crs(),u=s?{org:s.org(),code:s.code(),name:s.name(),description:s.description(),wkt:s.wkt(),code_string:s.codeString()}:null;return{geometryType:e.geometryType(),columns:o,envelope:null,featuresCount:Number(r),indexNodeSize:n,crs:u,title:e.title(),description:e.description(),metadata:e.metadata()}}var bc=function(t,e){return(bc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function vc(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}u((n=n.apply(t,e||[])).next())})}function mc(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function gc(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wc(t){return this instanceof wc?(this.v=t,this):new wc(t)}function Oc(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(t){o[t]&&(n[t]=function(e){return new Promise(function(r,n){i.push([t,e,r,n])>1||s(t,e)})})}function s(t,e){try{(r=o[t](e)).value instanceof wc?Promise.resolve(r.value.v).then(u,l):c(i[0][2],r)}catch(t){c(i[0][3],t)}var r}function u(t){s("next",t)}function l(t){s("throw",t)}function c(t,e){t(e),i.shift(),i.length&&s(i[0][0],i[0][1])}}var Sc=function(t){function e(e){var r=t.call(this,e)||this;return Object.defineProperty(r,"name",{value:"RepeaterOverflowError",enumerable:!1}),"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(r,r.constructor.prototype):r.__proto__=r.constructor.prototype,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(r,r.constructor),r}return function(t,e){function r(){this.constructor=t}bc(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e}(Error);(function(){function t(t){if(t<0)throw new RangeError("Capacity may not be less than 0");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),t.prototype.add=function(t){if(this.full)throw new Error("Buffer full");this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}})(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){for(;this._q.length>=this._c;)this._q.shift();this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){this._q.length<this._c&&this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}();function _c(t){null!=t&&"function"==typeof t.then&&t.then(Cc,Cc)}var Pc=0,xc=1,kc=2,jc=3,Ec=4,Tc=1024,Cc=function(){};function Rc(t){var e=t.err,r=Promise.resolve(t.execution).then(function(t){if(null!=e)throw e;return t});return t.err=void 0,t.execution=r.then(function(){},function(){}),void 0===t.pending?r:t.pending.then(function(){return r})}function Ac(t,e){var r=t.state>=jc;return Promise.resolve(e).then(function(e){return!r&&t.state>=Ec?Rc(t).then(function(t){return{value:t,done:!0}}):{value:e,done:r}})}function Mc(t,e){var r,n;if(!(t.state>=kc))if(t.state=kc,t.onnext(),t.onstop(),null==t.err&&(t.err=e),0!==t.pushes.length||void 0!==t.buffer&&!t.buffer.empty)try{for(var o=gc(t.pushes),i=o.next();!i.done;i=o.next()){i.value.resolve()}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}else Lc(t)}function Lc(t){var e,r;if(!(t.state>=jc)){t.state<kc&&Mc(t),t.state=jc,t.buffer=void 0;try{for(var n=gc(t.nexts),o=n.next();!o.done;o=n.next()){var i=o.value,a=void 0===t.pending?Rc(t):t.pending.then(function(){return Rc(t)});i.resolve(Ac(t,a))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}t.pushes=[],t.nexts=[]}}function Nc(t){t.state>=Ec||(t.state<jc&&Lc(t),t.state=Ec)}function Ic(t){if(!(t.state>=xc)){t.state=xc;var e=function(t,e){if(_c(e),t.pushes.length>=Tc)throw new Sc("No more than "+Tc+" pending calls to push are allowed on a single repeater.");if(t.state>=kc)return Promise.resolve(void 0);var r,n=void 0===t.pending?Promise.resolve(e):t.pending.then(function(){return e});n=n.catch(function(e){t.state<kc&&(t.err=e),Nc(t)}),t.nexts.length?(t.nexts.shift().resolve(Ac(t,n)),r=t.nexts.length?Promise.resolve(t.nexts[0].value):new Promise(function(e){return t.onnext=e})):void 0===t.buffer||t.buffer.full?r=new Promise(function(e){return t.pushes.push({resolve:e,value:n})}):(t.buffer.add(n),r=Promise.resolve(void 0));var o=!0,i={},a=r.catch(function(t){if(o)throw t});return i.then=function(t,e){return o=!1,Promise.prototype.then.call(r,t,e)},i.catch=function(t){return o=!1,Promise.prototype.catch.call(r,t)},i.finally=r.finally.bind(r),t.pending=n.then(function(){return a}).catch(function(e){t.err=e,Nc(t)}),i}.bind(null,t),r=function(t){var e=Mc.bind(null,t),r=new Promise(function(e){return t.onstop=e});return e.then=r.then.bind(r),e.catch=r.catch.bind(r),e.finally=r.finally.bind(r),e}(t);t.execution=new Promise(function(n){return n(t.executor(e,r))}),t.execution.catch(function(){return Mc(t)})}}var Dc=new WeakMap,Fc=function(){function t(t,e){Dc.set(this,{executor:t,buffer:e,err:void 0,state:Pc,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:Cc,onstop:Cc})}return t.prototype.next=function(t){_c(t);var e=Dc.get(this);if(void 0===e)throw new Error("WeakMap error");if(e.nexts.length>=Tc)throw new Sc("No more than "+Tc+" pending calls to next are allowed on a single repeater.");if(e.state<=Pc&&Ic(e),e.onnext(t),void 0!==e.buffer&&!e.buffer.empty){var r=Ac(e,e.buffer.remove());if(e.pushes.length){var n=e.pushes.shift();e.buffer.add(n.value),e.onnext=n.resolve}return r}if(e.pushes.length){var o=e.pushes.shift();return e.onnext=o.resolve,Ac(e,o.value)}return e.state>=kc?(Lc(e),Ac(e,Rc(e))):new Promise(function(r){return e.nexts.push({resolve:r,value:t})})},t.prototype.return=function(t){_c(t);var e=Dc.get(this);if(void 0===e)throw new Error("WeakMap error");return Lc(e),e.execution=Promise.resolve(e.execution).then(function(){return t}),Ac(e,Rc(e))},t.prototype.throw=function(t){var e=Dc.get(this);if(void 0===e)throw new Error("WeakMap error");return e.state<=Pc||e.state>=kc||void 0!==e.buffer&&!e.buffer.empty?(Lc(e),null==e.err&&(e.err=t),Ac(e,Rc(e))):this.next(Promise.reject(t))},t.prototype[Symbol.asyncIterator]=function(){return this},t.race=Gc,t.merge=Uc,t.zip=Jc,t.latest=Vc,t}();function Bc(t,e){var r,n,o=[],i=function(t){null!=t&&"function"==typeof t[Symbol.asyncIterator]?o.push(t[Symbol.asyncIterator]()):null!=t&&"function"==typeof t[Symbol.iterator]?o.push(t[Symbol.iterator]()):o.push(function(){return Oc(this,arguments,function(){return mc(this,function(r){switch(r.label){case 0:return e.yieldValues?[4,wc(t)]:[3,3];case 1:return[4,r.sent()];case 2:r.sent(),r.label=3;case 3:return e.returnValues?[4,wc(t)]:[3,5];case 4:return[2,r.sent()];case 5:return[2]}})})}())};try{for(var a=gc(t),s=a.next();!s.done;s=a.next()){i(s.value)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}function Gc(t){var e=this,r=Bc(t,{returnValues:!0});return new Fc(function(t,n){return vc(e,void 0,void 0,function(){var e,o,i,a,s,u;return mc(this,function(l){switch(l.label){case 0:if(!r.length)return n(),[2];o=!1,n.then(function(){e(),o=!0}),l.label=1;case 1:l.trys.push([1,,5,7]),a=void 0,s=0,u=function(){var o,u,l,c,f,h;return mc(this,function(p){switch(p.label){case 0:o=s;try{for(f=void 0,u=gc(r),l=u.next();!l.done;l=u.next())c=l.value,Promise.resolve(c.next()).then(function(t){t.done?(n(),void 0===i&&(i=t)):s===o&&(s++,e(t))},function(t){return n(t)})}catch(t){f={error:t}}finally{try{l&&!l.done&&(h=u.return)&&h.call(u)}finally{if(f)throw f.error}}return[4,new Promise(function(t){return e=t})];case 1:return void 0===(a=p.sent())?[3,3]:[4,t(a.value)];case 2:p.sent(),p.label=3;case 3:return[2]}})},l.label=2;case 2:return o?[3,4]:[5,u()];case 3:return l.sent(),[3,2];case 4:return[2,i&&i.value];case 5:return n(),[4,Promise.race(r.map(function(t){return t.return&&t.return()}))];case 6:return l.sent(),[7];case 7:return[2]}})})})}function Uc(t){var e=this,r=Bc(t,{yieldValues:!0});return new Fc(function(t,n){return vc(e,void 0,void 0,function(){var e,o,i,a=this;return mc(this,function(s){switch(s.label){case 0:if(!r.length)return n(),[2];e=[],o=!1,n.then(function(){var t,r;o=!0;try{for(var n=gc(e),i=n.next();!i.done;i=n.next()){(0,i.value)()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}}),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,Promise.all(r.map(function(r,s){return vc(a,void 0,void 0,function(){var a;return mc(this,function(u){switch(u.label){case 0:u.trys.push([0,,6,9]),u.label=1;case 1:return o?[3,5]:(Promise.resolve(r.next()).then(function(t){return e[s](t)},function(t){return n(t)}),[4,new Promise(function(t){e[s]=t})]);case 2:return void 0===(a=u.sent())?[3,4]:a.done?(i=a,[2]):[4,t(a.value)];case 3:u.sent(),u.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return r.return?[4,r.return()]:[3,8];case 7:u.sent(),u.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return s.sent(),[2,i&&i.value];case 3:return n(),[7];case 4:return[2]}})})})}function Jc(t){var e=this,r=Bc(t,{returnValues:!0});return new Fc(function(t,n){return vc(e,void 0,void 0,function(){var e,o,i,a;return mc(this,function(s){switch(s.label){case 0:if(!r.length)return n(),[2,[]];o=!1,n.then(function(){e(),o=!0}),s.label=1;case 1:s.trys.push([1,,6,8]),s.label=2;case 2:return o?[3,5]:(Promise.all(r.map(function(t){return t.next()})).then(function(t){return e(t)},function(t){return n(t)}),[4,new Promise(function(t){return e=t})]);case 3:return void 0===(i=s.sent())?[2]:(a=i.map(function(t){return t.value}),i.some(function(t){return t.done})?[2,a]:[4,t(a)]);case 4:return s.sent(),[3,2];case 5:return[3,8];case 6:return n(),[4,Promise.all(r.map(function(t){return t.return&&t.return()}))];case 7:return s.sent(),[7];case 8:return[2]}})})})}function Vc(t){var e=this,r=Bc(t,{yieldValues:!0,returnValues:!0});return new Fc(function(t,n){return vc(e,void 0,void 0,function(){var e,o,i,a,s,u=this;return mc(this,function(l){switch(l.label){case 0:if(!r.length)return n(),[2,[]];o=[],i=!1,n.then(function(){var t,r;e();try{for(var n=gc(o),a=n.next();!a.done;a=n.next()){(0,a.value)()}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}i=!0}),l.label=1;case 1:return l.trys.push([1,,5,7]),Promise.all(r.map(function(t){return t.next()})).then(function(t){return e(t)},function(t){return n(t)}),[4,new Promise(function(t){return e=t})];case 2:return void 0===(a=l.sent())?[2]:(s=a.map(function(t){return t.value}),a.every(function(t){return t.done})?[2,s]:[4,t(s.slice())]);case 3:return l.sent(),[4,Promise.all(r.map(function(e,r){return vc(u,void 0,void 0,function(){var u;return mc(this,function(l){switch(l.label){case 0:if(a[r].done)return[2,a[r].value];l.label=1;case 1:return i?[3,4]:(Promise.resolve(e.next()).then(function(t){return o[r](t)},function(t){return n(t)}),[4,new Promise(function(t){return o[r]=t})]);case 2:return void 0===(u=l.sent())?[2,a[r].value]:u.done?[2,u.value]:(s[r]=u.value,[4,t(s.slice())]);case 3:return l.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,l.sent()];case 5:return n(),[4,Promise.all(r.map(function(t){return t.return&&t.return()}))];case 6:return l.sent(),[7];case 7:return[2]}})})})}function zc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var qc,Hc=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._extraRequestThreshold=262144}var e,r,n;return e=t,(r=[{key:"extraRequestThreshold",value:function(){return this._extraRequestThreshold}},{key:"setExtraRequestThreshold",value:function(t){if(t<0)throw new Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=t}}])&&zc(e.prototype,r),n&&zc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Wc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Hc.global=new Hc,function(t){t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error"}(qc||(qc={}));var Yc=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.log.apply(this,[qc.Debug].concat(e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.log.apply(this,[qc.Info].concat(e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.log.apply(this,[qc.Warn].concat(e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.log.apply(this,[qc.Error].concat(e))}},{key:"log",value:function(t){if(!(this.logLevel>t)){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];switch(t){case qc.Debug:var o;(o=console).debug.apply(o,r);break;case qc.Info:var i;(i=console).info.apply(i,r);break;case qc.Warn:var a;(a=console).warn.apply(a,r);break;case qc.Error:var s;(s=console).error.apply(s,r)}}}}],(r=null)&&Wc(e.prototype,r),n&&Wc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Xc(t){"@babel/helpers - typeof";return(Xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qc(){Qc=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var c={};function f(){}function h(){}function p(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(P([])));b&&b!==e&&r.call(b,o)&&(y=b);var v=p.prototype=f.prototype=Object.create(y);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==Xc(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(f).then(function(t){c.value=t,a(c)},function(t){return n("throw",t,a,s)})}s(u.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=p,s(v,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=P,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function Zc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Kc(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kc(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kc(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ef(t){var e,r;function n(e,r){try{var i=t[e](r),a=i.value,s=a instanceof rf;Promise.resolve(s?a.v:a).then(function(r){if(s){var u="return"===e?"return":"next";if(!a.k||r.done)return n(u,r);r=t[u](r).value}o(i.done?"return":"normal",r)},function(t){n("throw",t)})}catch(t){o("throw",t)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,o){return new Promise(function(i,a){var s={key:t,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(e=r=s,n(t,o))})},"function"!=typeof t.return&&(this.return=void 0)}function rf(t,e){this.v=t,this.k=e}Yc.logLevel=qc.Info,ef.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},ef.prototype.next=function(t){return this._invoke("next",t)},ef.prototype.throw=function(t){return this._invoke("throw",t)},ef.prototype.return=function(t){return this._invoke("return",t)};var nf=40;function of(t,e){e=Math.min(Math.max(+e,2),65535);var r=t,n=r;do{n+=r=Math.ceil(r/e)}while(1!==r);return n*nf}function af(t,e){if(e<2)throw new Error("Node size must be at least 2");if(0===t)throw new Error("Number of items must be greater than 0");var r=t,n=r,o=[r];do{n+=r=Math.ceil(r/e),o.push(r)}while(1!==r);var i=[];r=n;for(var a=0,s=o;a<s.length;a++){var u=s[a];i.push(r-u),r-=u}i.reverse(),o.reverse();for(var l=[],c=0;c<o.length;c++)l.push([i[c],i[c]+o[c]]);return l.reverse(),l}function sf(t,e,r,n){return uf.apply(this,arguments)}function uf(){var t;return t=Qc().mark(function t(e,r,n,o){var i,a,s,u,l,c,f,h,p,y;return Qc().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=function(){function t(e,r){$c(this,t),this._level=r,this.nodes=e}var e,r,n;return e=t,(r=[{key:"level",value:function(){return this._level}},{key:"startNode",value:function(){return this.nodes[0]}},{key:"endNode",value:function(){return this.nodes[1]}},{key:"extendEndNodeToNewOffset",value:function(t){console.assert(t>this.nodes[1]),this.nodes[1]=t}},{key:"toString",value:function(){return"[NodeRange level: ".concat(this._level,", nodes: ").concat(this.nodes[0],"-").concat(this.nodes[1],"]")}}])&&tf(e.prototype,r),n&&tf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),a=n.minX,s=n.minY,u=n.maxX,l=n.maxY,Yc.info("tree items: ".concat(e,", nodeSize: ").concat(r)),c=af(e,r),f=c[0][0],void 0,d=c.length-1,h=new i([0,1],d),p=[h],Yc.debug("starting stream search with queue: ".concat(p,", numItems: ").concat(e,", nodeSize: ").concat(r,", levelBounds: ").concat(c)),y=Qc().mark(function t(){var n,h,y,d,b,v,m,g,w,O,S,_;return Qc().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=p.shift(),Yc.debug("popped node: ".concat(n,", queueLength: ").concat(p.length)),h=n.startNode(),y=h>=f,d=Zc(c[n.level()],2),b=d[1],v=Math.min(n.endNode()+r,b),m=v-h,t.next=9,new rf(o(h*nf,m*nf),0);case 9:g=t.sent,w=new Float64Array(g),O=new Uint32Array(g),S=Qc().mark(function t(r){var o,c,d,b,v,m,g,S;return Qc().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(u<w[(o=5*(r-h))+0])){t.next=3;break}return t.abrupt("return",0);case 3:if(!(l<w[o+1])){t.next=5;break}return t.abrupt("return",0);case 5:if(!(a>w[o+2])){t.next=7;break}return t.abrupt("return",0);case 7:if(!(s>w[o+3])){t.next=9;break}return t.abrupt("return",0);case 9:if(c=O[8+(o<<1)],d=O[9+(o<<1)],b=lf(d,c),!y){t.next=17;break}return v=function(){if(r<e-1){var t=5*(r-h+1),n=O[8+(t<<1)];return lf(O[9+(t<<1)],n)-b}return null}(),t.next=16,[b,r-f,v];case 16:return t.abrupt("return",0);case 17:if(m=Hc.global.extraRequestThreshold()/nf,!(void 0!==(g=p[p.length-1])&&g.level()==n.level()-1&&b<g.endNode()+m)){t.next=23;break}return Yc.debug('Merging "nodeRange" request into existing range: '.concat(g,", newOffset: ").concat(g.endNode()," -> ").concat(b)),g.extendEndNodeToNewOffset(b),t.abrupt("return",0);case 23:void 0,_=n.level()-1,S=new i([b,b+1],_),void 0!==g&&g.level()==S.level()?Yc.info("Same level, but too far away. Pushing new request at offset: ".concat(b," rather than merging with distant ").concat(g)):Yc.info("Pushing new level for ".concat(S," onto queue with nearestNodeRange: ").concat(g," since there's not already a range for this level.")),p.push(S);case 26:case"end":return t.stop()}var _},t)}),_=h;case 14:if(!(_<v)){t.next=22;break}return t.delegateYield(S(_),"t0",16);case 16:if(0!==t.t0){t.next=19;break}return t.abrupt("continue",19);case 19:_++,t.next=14;break;case 22:case"end":return t.stop()}},t)});case 9:if(0==p.length){t.next=13;break}return t.delegateYield(y(),"t0",11);case 11:t.next=9;break;case 13:case"end":return t.stop()}var d},t)}),(uf=function(){return new ef(t.apply(this,arguments))}).apply(this,arguments)}function lf(t,e){if(0!=(4293918720&t))throw Error("integer is too large to be safely represented");return e+t*Math.pow(2,32)}var cf=new Uint8Array([102,103,98,3,102,103,98,0]),ff=4;function hf(t){"@babel/helpers - typeof";return(hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pf(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=df(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function yf(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||df(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function df(t,e){if(t){if("string"==typeof t)return bf(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bf(t,e):void 0}}function bf(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vf(){vf=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var c={};function f(){}function h(){}function p(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(P([])));b&&b!==e&&r.call(b,o)&&(y=b);var v=p.prototype=f.prototype=Object.create(y);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==hf(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(f).then(function(t){c.value=t,a(c)},function(t){return n("throw",t,a,s)})}s(u.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=p,s(v,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=P,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function mf(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function gf(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){mf(i,n,o,a,s,"next",t)}function s(t){mf(i,n,o,a,s,"throw",t)}a(void 0)})}}function wf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Of(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Sf(t,e,r){return e&&Of(t.prototype,e),r&&Of(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _f(t){return function(){return new Pf(t.apply(this,arguments))}}function Pf(t){var e,r;function n(e,r){try{var i=t[e](r),a=i.value,s=a instanceof jf;Promise.resolve(s?a.v:a).then(function(r){if(s){var u="return"===e?"return":"next";if(!a.k||r.done)return n(u,r);r=t[u](r).value}o(i.done?"return":"normal",r)},function(t){n("throw",t)})}catch(t){o("throw",t)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,o){return new Promise(function(i,a){var s={key:t,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(e=r=s,n(t,o))})},"function"!=typeof t.return&&(this.return=void 0)}function xf(t){return new jf(t,0)}function kf(t){var e={},r=!1;function n(e,n){return r=!0,{done:!1,value:new jf(n=new Promise(function(r){r(t[e](n))}),1)}}return e["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},e.next=function(t){return r?(r=!1,t):n("next",t)},"function"==typeof t.throw&&(e.throw=function(t){if(r)throw r=!1,t;return n("throw",t)}),"function"==typeof t.return&&(e.return=function(t){return r?(r=!1,t):n("return",t)}),e}function jf(t,e){this.v=t,this.k=e}function Ef(t){var e,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new Tf(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Tf(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return(Tf=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new Tf(t)}Pf.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Pf.prototype.next=function(t){return this._invoke("next",t)},Pf.prototype.throw=function(t){return this._invoke("throw",t)},Pf.prototype.return=function(t){return this._invoke("return",t)};var Cf=function(){function t(e,r,n,o){wf(this,t),this.headerClient=e,this.header=r,this.headerLength=n,this.indexLength=o}return Sf(t,[{key:"selectBbox",value:function(t){var e=this;return _f(vf().mark(function r(){var n,o,i,a,s,u,l,c,f,h,p,y,d,b,v,m,g,w,O;return vf().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=e.lengthBeforeTree(),o=e.headerClient,i=function(){var t=gf(vf().mark(function t(e,r){var i;return vf().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=0,t.abrupt("return",o.getRange(n+e,r,i,"index"));case 2:case"end":return t.stop()}},t)}));return function(e,r){return t.apply(this,arguments)}}(),a=[],s=[],u=!1,l=!1,r.prev=7,f=Ef(sf(e.header.featuresCount,e.header.indexNodeSize,t,i));case 9:return r.next=11,xf(f.next());case 11:if(!(u=!(h=r.sent).done)){r.next=26;break}if(p=h.value,y=yf(p,2),d=y[0],b=yf(p,3),(v=b[2])||(Yc.info("final feature"),m=Hc.global.extraRequestThreshold(),v=m),0!=s.length){r.next=19;break}return s.push([d,v]),r.abrupt("continue",23);case 19:g=s[s.length-1],(w=d-(g[0]+g[1]))>Hc.global.extraRequestThreshold()&&(Yc.info("Pushing new feature batch, since gap ".concat(w," was too large")),a.push(s),s=[]),s.push([d,v]);case 23:u=!1,r.next=9;break;case 26:r.next=32;break;case 28:r.prev=28,r.t0=r.catch(7),l=!0,c=r.t0;case 32:if(r.prev=32,r.prev=33,!u||null==f.return){r.next=37;break}return r.next=37,xf(f.return());case 37:if(r.prev=37,!l){r.next=40;break}throw c;case 40:return r.finish(37);case 41:return r.finish(32);case 42:return e.headerClient.logUsage("header+index"),s.length>0&&a.push(s),O=a.flatMap(function(t){return e.readFeatureBatch(t)}),r.delegateYield(kf(Ef(Fc.merge(O))),"t1",46);case 46:case"end":return r.stop()}},r,null,[[7,28,32,42],[33,,37,41]])}))()}},{key:"lengthBeforeTree",value:function(){return cf.length+ff+this.headerLength}},{key:"lengthBeforeFeatures",value:function(){return this.lengthBeforeTree()+this.indexLength}},{key:"buildFeatureClient",value:function(){return new Rf(this.headerClient.httpClient)}},{key:"readFeatureBatch",value:function(t){var e=this;return _f(vf().mark(function r(){var n,o,i,a,s,u,l,c,f,h,p;return vf().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=yf(t[0],1),o=n[0],i=yf(t[t.length-1],2),a=i[0],s=i[1],u=a+s-o,l=e.buildFeatureClient(),c=pf(t),r.prev=7,c.s();case 9:if((f=c.n()).done){r.next=17;break}return h=yf(f.value,1),p=h[0],r.next=13,xf(e.readFeature(l,p,u));case 13:return r.next=15,r.sent;case 15:r.next=9;break;case 17:r.next=22;break;case 19:r.prev=19,r.t0=r.catch(7),c.e(r.t0);case 22:return r.prev=22,c.f(),r.finish(22);case 25:l.logUsage("feature");case 26:case"end":return r.stop()}},r,null,[[7,19,22,25]])}))()}},{key:"readFeature",value:function(){var t=gf(vf().mark(function t(e,r,n){var o,i,a,s,u,l,c;return vf().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r+this.lengthBeforeFeatures(),t.next=3,e.getRange(o,4,n,"feature length");case 3:return a=t.sent,i=new DataView(a).getUint32(0,!0),t.next=7,e.getRange(o+4,i,n,"feature data");case 7:return s=t.sent,u=new Uint8Array(s),(l=new Uint8Array(i+ff)).set(u,ff),(c=new Xl(l)).setPosition(ff),t.abrupt("return",ic.getRootAsFeature(c));case 14:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()}],[{key:"open",value:function(){var e=gf(vf().mark(function e(r){var n,o,i,a,s,u,l,c,f,h,p;return vf().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=2024,o=new Rf(r),i=function(){var t,e=0;for(t=0;t<3;t++){e+=Math.pow(16,t)*nf}return e}(),a=n+i,Yc.debug("fetching header. minReqLength: ".concat(a," (assumedHeaderLength: ").concat(n,", assumedIndexLength: ").concat(i,")")),e.t0=Uint8Array,e.next=8,o.getRange(0,8,a,"header");case 8:if(e.t1=e.sent,(s=new e.t0(e.t1)).subarray(0,3).every(function(t,e){return cf[e]===t})){e.next=13;break}throw Yc.error("bytes: ".concat(s," != ").concat(cf)),new Error("Not a FlatGeobuf file");case 13:return Yc.debug("magic bytes look good"),e.next=16,o.getRange(8,4,a,"header");case 16:if(l=e.sent,!((u=new DataView(l).getUint32(0,!0))>10485760||u<8)){e.next=21;break}throw new Error("Invalid header size");case 21:return Yc.debug("headerLength: ".concat(u)),e.next=24,o.getRange(12,u,a,"header");case 24:return c=e.sent,f=new Xl(new Uint8Array(c)),h=dc(f),p=of(h.featuresCount,h.indexNodeSize),Yc.debug("completed: opening http reader"),e.abrupt("return",new t(o,h,u,p));case 30:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),t}(),Rf=function(){function t(e){wf(this,t),this.bytesEverUsed=0,this.bytesEverFetched=0,this.buffer=new ArrayBuffer(0),this.head=0,this.httpClient="string"==typeof e?new Af(e):e}return Sf(t,[{key:"getRange",value:function(){var t=gf(vf().mark(function t(e,r,n,o){var i,a,s;return vf().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.bytesEverUsed+=r,i=e-this.head,a=i+r,!(i>=0&&a<=this.buffer.byteLength)){t.next=5;break}return t.abrupt("return",this.buffer.slice(i,a));case 5:return s=Math.max(r,n),this.bytesEverFetched+=s,Yc.debug("requesting for new Range: ".concat(e,"-").concat(e+r-1)),t.next=10,this.httpClient.getRange(e,s,o);case 10:return this.buffer=t.sent,this.head=e,t.abrupt("return",this.buffer.slice(0,r));case 13:case"end":return t.stop()}},t,this)}));return function(e,r,n,o){return t.apply(this,arguments)}}()},{key:"logUsage",value:function(t){var e=t.split(" ")[0],r=this.bytesEverUsed,n=this.bytesEverFetched,o=(100*r/n).toFixed(2);Yc.info("".concat(e," bytes used/requested: ").concat(r," / ").concat(n," = ").concat(o,"%"))}}]),t}(),Af=function(){function t(e){wf(this,t),this.requestsEverMade=0,this.bytesEverRequested=0,this.url=e}return Sf(t,[{key:"getRange",value:function(){var t=gf(vf().mark(function t(e,r,n){var o,i;return vf().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.requestsEverMade+=1,this.bytesEverRequested+=r,o="bytes=".concat(e,"-").concat(e+r-1),Yc.info("request: #".concat(this.requestsEverMade,", purpose: ").concat(n,"), bytes: (this_request: ").concat(r,", ever: ").concat(this.bytesEverRequested,"), Range: ").concat(o)),t.next=6,fetch(this.url,{headers:{Range:o}});case 6:return i=t.sent,t.abrupt("return",i.arrayBuffer());case 8:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()}]),t}();function Mf(t){"@babel/helpers - typeof";return(Mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lf(){Lf=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var c={};function f(){}function h(){}function p(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(P([])));b&&b!==e&&r.call(b,o)&&(y=b);var v=p.prototype=f.prototype=Object.create(y);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==Mf(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(f).then(function(t){c.value=t,a(c)},function(t){return n("throw",t,a,s)})}s(u.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=p,s(v,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=P,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function Nf(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function If(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Nf(i,n,o,a,s,"next",t)}function s(t){Nf(i,n,o,a,s,"throw",t)}a(void 0)})}}function Df(t){var e,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new Ff(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Ff(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return(Ff=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new Ff(t)}function Bf(t){return new Jf(t,0)}function Gf(t){return function(){return new Uf(t.apply(this,arguments))}}function Uf(t){var e,r;function n(e,r){try{var i=t[e](r),a=i.value,s=a instanceof Jf;Promise.resolve(s?a.v:a).then(function(r){if(s){var u="return"===e?"return":"next";if(!a.k||r.done)return n(u,r);r=t[u](r).value}o(i.done?"return":"normal",r)},function(t){n("throw",t)})}catch(t){o("throw",t)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,o){return new Promise(function(i,a){var s={key:t,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(e=r=s,n(t,o))})},"function"!=typeof t.return&&(this.return=void 0)}function Jf(t,e){this.v=t,this.k=e}function Vf(){return(Vf=Gf(Lf().mark(function t(e,r,n){var o,i,a,s,u,l,c,f,h,p;return Lf().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o="function"==typeof(y=e).slice?y:new cc("function"==typeof y.read?y:y.getReader()),i=function(){var t=If(Lf().mark(function t(e){return Lf().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.slice(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),t.t0=Uint8Array,t.next=5,Bf(i(8,"magic bytes"));case 5:if(t.t1=t.sent,(a=new t.t0(t.t1)).subarray(0,3).every(function(t,e){return cf[e]===t})){t.next=9;break}throw new Error("Not a FlatGeobuf file");case 9:return t.t2=Uint8Array,t.next=12,Bf(i(4,"header length"));case 12:return t.t3=t.sent,a=new t.t2(t.t3),s=new Xl(a),u=s.readUint32(0),t.t4=Uint8Array,t.next=19,Bf(i(u,"header data"));case 19:if(t.t5=t.sent,a=new t.t4(t.t5),s=new Xl(a),l=dc(s),n&&n(l),c=l.indexNodeSize,f=l.featuresCount,!(c>0)){t.next=29;break}return h=of(f,c),t.next=29,Bf(i(h,"entire index, w/o rect"));case 29:return t.next=31,Bf(qf(i,l,r));case 31:if(!(p=t.sent)){t.next=36;break}return t.next=34,p;case 34:t.next=29;break;case 36:case"end":return t.stop()}var y},t)}))).apply(this,arguments)}function zf(){return(zf=Gf(Lf().mark(function t(e,r,n,o){var i,a,s,u,l,c,f;return Lf().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Bf(Cf.open(e));case 2:i=t.sent,Yc.debug("opened reader"),o&&o(i.header),a=!1,s=!1,t.prev=7,l=Df(i.selectBbox(r));case 9:return t.next=11,Bf(l.next());case 11:if(!(a=!(c=t.sent).done)){t.next=18;break}return f=c.value,t.next=15,n(f,i.header);case 15:a=!1,t.next=9;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(7),s=!0,u=t.t0;case 24:if(t.prev=24,t.prev=25,!a||null==l.return){t.next=29;break}return t.next=29,Bf(l.return());case 29:if(t.prev=29,!s){t.next=32;break}throw u;case 32:return t.finish(29);case 33:return t.finish(24);case 34:case"end":return t.stop()}},t,null,[[7,20,24,34],[25,,29,33]])}))).apply(this,arguments)}function qf(t,e,r){return Hf.apply(this,arguments)}function Hf(){return(Hf=If(Lf().mark(function t(e,r,n){var o,i,a,s,u;return Lf().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,e(4,"feature length");case 3:if(t.t1=t.sent,0!==(o=new t.t0(t.t1)).byteLength){t.next=7;break}return t.abrupt("return");case 7:return i=new Xl(o),a=i.readUint32(0),t.t2=Uint8Array,t.next=12,e(a,"feature data");case 12:return t.t3=t.sent,o=new t.t2(t.t3),(s=new Uint8Array(a+4)).set(o,4),(i=new Xl(s)).setPosition(ff),u=ic.getRootAsFeature(i),t.abrupt("return",n(u,r));case 20:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Wf(t,e){return{type:"FeatureCollection",features:function(t,e,r){if(!t.subarray(0,3).every(function(t,e){return cf[e]===t}))throw new Error("Not a FlatGeobuf file");var n=new Xl(t),o=n.readUint32(cf.length);n.setPosition(cf.length+ff);var i=dc(n);r&&r(i);var a=cf.length+ff+o,s=i.indexNodeSize,u=i.featuresCount;s>0&&(a+=of(u,s));for(var l=[];a<n.capacity();){var c=n.readUint32(a);n.setPosition(a+ff);var f=ic.getRootAsFeature(n);l.push(e(f,i)),a+=ff+c}return l}(t,uc,e)}}function Yf(t,e){return function(t,e,r){return Vf.apply(this,arguments)}(t,uc,e)}function Xf(t,e,r){return function(t,e,r,n){return zf.apply(this,arguments)}(t,e,uc,r)}function Qf(t,e,r){return t instanceof Uint8Array?Wf(t,r):t instanceof ReadableStream?Yf(t,r):Xf(t,e,r)}Uf.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Uf.prototype.next=function(t){return this._invoke("next",t)},Uf.prototype.throw=function(t){return this._invoke("throw",t)},Uf.prototype.return=function(t){return this._invoke("return",t)};var Zf=r(3861),Kf=r.n(Zf);function $f(t){"@babel/helpers - typeof";return($f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function th(){th=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var c={};function f(){}function h(){}function p(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(P([])));b&&b!==e&&r.call(b,o)&&(y=b);var v=p.prototype=f.prototype=Object.create(y);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==$f(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(f).then(function(t){c.value=t,a(c)},function(t){return n("throw",t,a,s)})}s(u.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=p,s(v,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=P,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function eh(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function rh(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){eh(i,n,o,a,s,"next",t)}function s(t){eh(i,n,o,a,s,"throw",t)}a(void 0)})}}function nh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function oh(t){var e,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new ih(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function ih(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return(ih=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new ih(t)}var ah={1:"circle",2:"line",3:"fill",5:"line",4:"circle",6:"fill",MultiPolygon:"fill",Point:"circle",MultiLineString:"line",MultiPoint:"circle",LineString:"line",Polygon:"fill"},sh=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.layerID?e.layerID:C.createUniqueID("FGBLayer_"),this.layerId=this.id+"outer",this.sourceId=this.layerId,this.options=e,this.strategy=e.strategy||"bbox",this.url=e.url,this.layerType="",this.extent=e.extent,this.init()}var e,r,n;return e=t,(r=[{key:"init",value:function(){"bbox"===this.strategy&&(this.loadedExtentsRtree_=new(Kf()))}},{key:"iterateFeatures",value:function(){var t=rh(th().mark(function t(e){var r,n,o,i,a,s,u;return th().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r={type:"FeatureCollection",features:[]},n=!1,o=!1,t.prev=3,a=oh(e);case 5:return t.next=7,a.next();case 7:if(!(n=!(s=t.sent).done)){t.next=15;break}u=s.value,this.options.featureLoader&&"function"==typeof this.options.featureLoader&&(u=this.options.featureLoader(u)),this.layerType||(this.layerType=ah[u.geometry.type]),r.features.push(u);case 12:n=!1,t.next=5;break;case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(3),o=!0,i=t.t0;case 21:if(t.prev=21,t.prev=22,!n||null==a.return){t.next=26;break}return t.next=26,a.return();case 26:if(t.prev=26,!o){t.next=29;break}throw i;case 29:return t.finish(26);case 30:return t.finish(21);case 31:return t.abrupt("return",r);case 32:case"end":return t.stop()}},t,this,[[3,17,21,31],[22,,26,30]])}));return function(e){return t.apply(this,arguments)}}()},{key:"_loadData",value:function(){var t=rh(th().mark(function t(e){var r,n,o=this;return th().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]},e.length){t.next=7;break}return t.next=4,this._getStream(this.url);case 4:r=t.sent,t.next=9;break;case 7:n.value={extent:e.slice()},this.loadedExtentsRtree_.insert(n);case 9:return t.next=11,Qf(r&&r.body||this.url,n,function(t){o.layerType=ah[t.geometryType]});case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_getStream",value:function(){var t=rh(th().mark(function t(e){return th().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Jl.get(e,{},{withoutFormatSuffix:!0}).then(function(t){return t});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},{key:"_containsExtent",value:function(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}},{key:"_getInExtent",value:function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.loadedExtentsRtree_.search(e).map(function(t){return t.value})}},{key:"_forEachInExtent",value:function(t,e){return this._forEach(this._getInExtent(t),e)}},{key:"_forEach",value:function(t,e){for(var r,n=0,o=t.length;n<o;n++)if(r=e(t[n]))return r;return r}}])&&nh(e.prototype,r),n&&nh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function uh(t){"@babel/helpers - typeof";return(uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lh(){lh=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var c={};function f(){}function h(){}function p(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(P([])));b&&b!==e&&r.call(b,o)&&(y=b);var v=p.prototype=f.prototype=Object.create(y);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==uh(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(f).then(function(t){c.value=t,a(c)},function(t){return n("throw",t,a,s)})}s(u.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=p,s(v,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=P,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function ch(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function fh(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){ch(i,n,o,a,s,"next",t)}function s(t){ch(i,n,o,a,s,"throw",t)}a(void 0)})}}function hh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ph={circle:{"circle-radius":6,"circle-color":"#3fb1e3","circle-opacity":1,"circle-blur":0,"circle-translate":[0,0],"circle-stroke-width":0,"circle-stroke-color":"#000","circle-stroke-opacity":1},line:{"line-opacity":1,"line-color":"#3fb1e3","line-width":3,"line-blur":1},fill:{"fill-opacity":.8,"fill-color":"#3fb1e3","fill-translate":[0,0],"fill-antialias":!0,"fill-outline-color":"#3fb1e3"}},yh=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.layerID?e.layerID:C.createUniqueID("FGBLayer_"),this.layerId=this.id+"outer",this.sourceId=this.layerId,this.options=e,this.strategy=e.strategy||"bbox",this.url=e.url,this.layerType="",this.extent=e.extent,this.overlay=!0,this.type="custom",this.renderingMode="3d",this._updateFeaturesFn=this._updateFeatures.bind(this)}var e,r,n;return e=t,(r=[{key:"onAdd",value:function(t){this.map=t;var e,r,n,o=[];if("bbox"===this.strategy){var i=this.map.getBounds().toArray();o=[i[0][0],i[0][1],i[1][0],i[1][1]],this.map.on("moveend",this._updateFeaturesFn)}if(this.extent){var a=(e=this.extent,n=[],function(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}(e,r=o)&&(e[0]>r[0]?n[0]=e[0]:n[0]=r[0],e[1]>r[1]?n[1]=e[1]:n[1]=r[1],e[2]<r[2]?n[2]=e[2]:n[2]=r[2],e[3]<r[3]?n[3]=e[3]:n[3]=r[3]),n);o=a&&a.length?a:this.extent}this.renderer=new sh(this.options),this._handleFeatures(o)}},{key:"onRemove",value:function(){this.map.off("moveend",this._updateFeaturesFn)}},{key:"moveLayer",value:function(t){this.map.moveLayer(this.layerId,t)}},{key:"render",value:function(){}},{key:"setVisibility",value:function(t){var e=t?"visible":"none";this.map.setLayoutProperty(this.layerId,"visibility",e)}},{key:"_handleFeatures",value:function(){var t=fh(lh().mark(function t(e){var r,n,o;return lh().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.renderer._loadData(e);case 2:return r=t.sent,t.next=5,this.renderer.iterateFeatures(r);case 5:n=t.sent,this.map.getSource(this.sourceId)?this.map.getSource(this.sourceId).setData(n):this.map.addSource(this.sourceId,{type:"geojson",data:n}),this.map.getLayer(this.layerId)||(this.layerType=this.renderer.layerType,o=Object.assign({id:this.layerId,type:this.layerType,source:this.sourceId,paint:Object.assign(ph[this.layerType],this.options.paint)||{},layout:this.options.layout||{}}),this.map.addLayer(o));case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"_updateFeatures",value:function(){var t=fh(lh().mark(function t(){var e,r,n,o,i=this;return lh().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.map.getBounds().toArray(),r=[e[0][0],e[0][1],e[1][0],e[1][1]],this.renderer._forEachInExtent(r,function(t){return i.renderer._containsExtent(t.extent,r)})){t.next=11;break}return t.next=6,this.renderer._loadData(r);case 6:return n=t.sent,t.next=9,this.renderer.iterateFeatures(n);case 9:o=t.sent,this.map.getSource(this.sourceId).setData(o);case 11:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}])&&hh(e.prototype,r),n&&hh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dh(t){"@babel/helpers - typeof";return(dh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vh(t,e){return(vh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function mh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=wh(t);if(e){var o=wh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===dh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gh(t)}(this,r)}}function gh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wh(t){return(wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Oh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vh(t,e)}(a,o().Evented);var e,r,n,i=mh(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this)).options=e||{},r.url=t,r.fire("initialized",gh(r)),r}return e=a,r&&bh(e.prototype,r),n&&bh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function Sh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var _h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"generateToken",value:function(t,e){var r=this.servers[t];if(r)return Jl.post(r.tokenServiceUrl,JSON.stringify(e.toJSON())).then(function(t){return t.text()})}},{key:"registerServers",value:function(t){this.servers=this.servers||{},C.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var r=t[e];this.servers[r.server]=r}}},{key:"registerToken",value:function(t,e){if(this.tokens=this.tokens||{},t&&e){var r=this._getTokenStorageKey(t);this.tokens[r]=e}}},{key:"registerKey",value:function(t,e){if(this.keys=this.keys||{},t&&!(t.length<1)&&e){t=C.isArray(t)?t:[t];for(var r=0;r<t.length;r++){var n=this._getUrlRestString(t[0])||t[0];this.keys[n]=e}}}},{key:"getServerInfo",value:function(t){return this.servers=this.servers||{},this.servers[t]}},{key:"getToken",value:function(t){if(t){this.tokens=this.tokens||{};var e=this._getTokenStorageKey(t);return this.tokens[e]}}},{key:"getKey",value:function(t){this.keys=this.keys||{};var e=this._getUrlRestString(t)||t;return this.keys[e]}},{key:"loginiServer",value:function(t,e,r,n){t=C.urlPathAppend(t,"services/security/login");var o={username:e&&e.toString(),password:r&&r.toString(),rememberme:n};o=JSON.stringify(o);return Jl.post(t,o,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(t){return t.json()})}},{key:"logoutiServer",value:function(t){t=C.urlPathAppend(t,"services/security/logout");return Jl.get(t,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginOnline",value:function(e,r){var n=t.SSO+"/login?service="+e;this._open(n,r)}},{key:"loginiPortal",value:function(t,e,r){t=C.urlPathAppend(t,"web/login");var n={username:e&&e.toString(),password:r&&r.toString()};n=JSON.stringify(n);return Jl.post(t,n,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!1}).then(function(t){return t.json()})}},{key:"logoutiPortal",value:function(t){t=C.urlPathAppend(t,"services/security/logout");return Jl.get(t,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginManager",value:function(t,e){var r=C.urlPathAppend(t,"/security/tokens"),n=e||{},o={username:n.userName&&n.userName.toString(),password:n.password&&n.password.toString()};o=JSON.stringify(o);var i=this;return Jl.post(r,o,{headers:{Accept:"*/*","Content-Type":"application/json; charset=UTF-8"}}).then(function(t){return t.text()}).then(function(t){return i.imanagerToken=t,t})}},{key:"destroyAllCredentials",value:function(){this.keys=null,this.tokens=null,this.servers=null}},{key:"destroyToken",value:function(t){if(t){var e=this._getTokenStorageKey(t);this.tokens=this.tokens||{},this.tokens[e]&&delete this.tokens[e]}}},{key:"destroyKey",value:function(t){if(t){this.keys=this.keys||{};var e=this._getUrlRestString(t)||t;this.keys[e]&&delete this.keys[e]}}},{key:"appendCredential",value:function(t){var e=t,r=this.getToken(t),n=r?new Ln(r,"token"):null;return n||(n=(r=this.getKey(t))?new Ln(r,"key"):null),n&&(e=C.urlAppend(e,n.getUrlParameters())),e}},{key:"_open",value:function(t,e){e=null==e||e;var r=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,n=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,o="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+n+", left="+r+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";e?window.open(t,"login"):window.open(t,"login",o)}},{key:"_getTokenStorageKey",value:function(t){var e=t.match(/(.*?):\/\/([^\/]+)/i);return e?e[0]:t}},{key:"_getUrlRestString",value:function(t){if(!t)return t;var e=t.match(/(http|https):\/\/(.*\/rest)/i);return e?e[0]:t}}],(r=null)&&Sh(e.prototype,r),n&&Sh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ph(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function xh(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ph(Object(r),!0).forEach(function(e){kh(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ph(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function kh(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jh(t){"@babel/helpers - typeof";return(jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Eh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}_h.INNER_WINDOW_WIDTH=600,_h.INNER_WINDOW_HEIGHT=600,_h.SSO="https://sso.supermap.com",_h.ONLINE="https://www.supermapol.com";var Th=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.proxy=null,this.index=null,this.length=null,this.totalTimes=null,this.POLLING_TIMES=3,this.isInTheSameDomain=null,this.withCredentials=!1,C.isArray(e)?(n.urls=e,n.length=e.length,n.totalTimes=n.length,1===n.length?n.url=e[0]:(n.index=parseInt(Math.random()*n.length),n.url=e[n.index])):(n.totalTimes=1,n.url=e),C.isArray(e)&&!n.isServiceSupportPolling()&&(n.url=e[0],n.totalTimes=1),r=r||{},this.crossOrigin=r.crossOrigin,this.headers=r.headers,C.extend(this,r),n.isInTheSameDomain=C.isInTheSameDomain(n.url),n.events=new Bn(n,null,n.EVENT_TYPES,!0),n.eventListeners instanceof Object&&n.events.on(n.eventListeners),this.CLASS_NAME="SuperMap.CommonServiceBase"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;C.isArray(t.urls)&&(t.urls=null,t.index=null,t.length=null,t.totalTimes=null),t.url=null,t.isInTheSameDomain=null,t.EVENT_TYPES=null,t.events&&(t.events.destroy(),t.events=null),t.eventListeners&&(t.eventListeners=null)}},{key:"request",value:function(t){var e=t.scope.format;if("string"==typeof t.success&&(t.scope.format=t.success,e=t.success,t.success=null,t.failure=null),e&&!this.supportDataFormat(e))throw new Error("".concat(this.CLASS_NAME," is not surport ").concat(e," format!"));var r=this;return t.url=t.url||r.url,this._returnContent(t)&&!t.url.includes("returnContent=true")&&(t.url=C.urlAppend(t.url,"returnContent=true")),t.proxy=t.proxy||r.proxy,t.withCredentials=void 0!=t.withCredentials?t.withCredentials:r.withCredentials,t.crossOrigin=void 0!=t.crossOrigin?t.crossOrigin:r.crossOrigin,t.headers=t.headers||r.headers,t.isInTheSameDomain=r.isInTheSameDomain,t.withoutFormatSuffix=t.scope.withoutFormatSuffix||!1,t.url=_h.appendCredential(t.url),r.calculatePollingTimes(),t.scope=r,r.totalTimes>0?(r.totalTimes--,r.ajaxPolling(t)):r._commit(t)}},{key:"ajaxPolling",value:function(t){var e=this,r=t.url,n=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;return e.index=parseInt(Math.random()*e.length),e.url=e.urls[e.index],r=r.replace(n,n.exec(e.url)[0]),t.url=r,t.isInTheSameDomain=C.isInTheSameDomain(r),e._commit(t)}},{key:"calculatePollingTimes",value:function(){var t=this;t.times?t.totalTimes>t.POLLING_TIMES?t.times>t.POLLING_TIMES?t.totalTimes=t.POLLING_TIMES:t.totalTimes=t.times:t.times<t.totalTimes&&(t.totalTimes=t.times):t.totalTimes>t.POLLING_TIMES&&(t.totalTimes=t.POLLING_TIMES),t.totalTimes--}},{key:"isServiceSupportPolling",value:function(){return!("SuperMap.REST.ThemeService"===this.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===this.CLASS_NAME)}},{key:"transformResult",value:function(t,e){return{result:t=C.transformResult(t),options:e}}},{key:"transformErrorResult",value:function(t,e){return{error:(t=C.transformResult(t)).error||t,options:e}}},{key:"serviceProcessCompleted",value:function(t,e){t=this.transformResult(t).result,this.events.triggerEvent("processCompleted",{result:t,options:e})}},{key:"serviceProcessFailed",value:function(t,e){var r=(t=this.transformErrorResult(t).error).error||t;this.events.triggerEvent("processFailed",{error:r,options:e})}},{key:"_returnContent",value:function(t){return t.scope.format!==ke.FGB&&!!t.scope.returnContent}},{key:"supportDataFormat",value:function(t){return this.dataFormat().includes(t)}},{key:"dataFormat",value:function(){return[ke.GEOJSON,ke.ISERVER]}},{key:"_commit",value:function(t){var e=this;if("POST"===t.method||"PUT"===t.method||"PATCH"===t.method)if(t.params&&(t.url=C.urlAppend(t.url,C.getParameterString(t.params||{}))),"object"===jh(t.data))try{t.params=C.toJSON(t.data)}catch(t){console.log("不是json对象")}else t.params=t.data;return Jl.commit(t.method,t.url,t.params,{headers:t.headers,withoutFormatSuffix:t.withoutFormatSuffix,withCredentials:t.withCredentials,crossOrigin:t.crossOrigin,timeout:t.async?0:null,proxy:t.proxy}).then(function(t){return t.text?t.text():t.json?t.json():t}).then(function(e){var r=e;return"string"==typeof e&&(r=(new Xt).read(e)),(!r||r.error||r.code>=300&&304!==r.code)&&(r=r&&r.error?{error:r.error}:{error:r}),r&&t.scope.format===ke.FGB&&(r.newResourceLocation=r.newResourceLocation.replace(".json","")+".fgb"),r}).catch(function(t){return{error:t}}).then(function(r){var n={object:e};if(r.error){var o="processFailed";if(e.events&&e.events.listeners[o]&&e.events.listeners[o].length){var i=t.failure&&(t.scope?d.bind(t.failure,t.scope):t.failure);i?i(r,t):e.serviceProcessFailed(r,t)}else(n=xh(xh({},n),e.transformErrorResult(r,t))).type=o,t.failure&&t.failure(n)}else{var a="processCompleted";if(e.events&&e.events.listeners[a]&&e.events.listeners[a].length){var s=t.success&&(t.scope?d.bind(t.success,t.scope):t.success);s?s(r,t):e.serviceProcessCompleted(r,t)}else r.succeed=void 0==r.succeed||r.succeed,(n=xh(xh({},n),e.transformResult(r,t))).type=a,t.success&&t.success(n)}return n})}}])&&Eh(e.prototype,r),n&&Eh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ch(t){"@babel/helpers - typeof";return(Ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rh(){Rh=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var c={};function f(){}function h(){}function p(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(P([])));b&&b!==e&&r.call(b,o)&&(y=b);var v=p.prototype=f.prototype=Object.create(y);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==Ch(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(f).then(function(t){c.value=t,a(c)},function(t){return n("throw",t,a,s)})}s(u.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=p,s(v,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=P,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function Ah(t){return function(t){if(Array.isArray(t))return Mh(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Mh(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mh(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mh(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Lh(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function Nh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ih(){return(Ih="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Dh(t,e){return(Dh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Fh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Bh(t);if(e){var o=Bh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ch(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Bh(t){return(Bh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dh(t,e)}(i,Th);var e,r,n,o=Fh(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).options=e||{},r.CLASS_NAME="SuperMap.KnowledgeGraphService",r}return e=i,(r=[{key:"destroy",value:function(){Ih(Bh(i.prototype),"destroy",this).call(this)}},{key:"query",value:function(t,e){var r=C.urlAppend(this.url+"/query.json","".concat("cypherQuery","=").concat(encodeURI(t)));this.processAsync({url:r,method:"GET",callback:e})}},{key:"getGraphMaps",value:function(t){var e=this.url+"/graphmaps.json";this.processAsync({url:e,method:"GET",callback:t})}},{key:"getGraphMap",value:function(t,e){var r=this.url+"/graphmaps/".concat(t,".json");this.processAsync({url:r,method:"GET",callback:e})}},{key:"getGraphMapData",value:function(){var t,e=(t=Rh().mark(function t(e){var r,n,o,i,a,s,u,l,c;return Rh().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.next=3,this._getGraphMapData(e);case 3:if(n=t.sent){t.next=6;break}return t.abrupt("return");case 6:o=n.dataContent.queries&&n.dataContent.queries.query||[],i=[],i="string"==typeof o?[o]:o,(a=this._getGraphMapExpandQuery(n)).length&&(s=i).push.apply(s,Ah(a)),u=0;case 12:if(!(u<i.length)){t.next=21;break}return l=i[u],t.next=16,this._queryDataBySql(l);case 16:c=t.sent,r=r.concat([],c);case 18:u++,t.next=12;break;case 21:return t.abrupt("return",{data:r,graphMap:n});case 22:case"end":return t.stop()}},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Lh(i,n,o,a,s,"next",t)}function s(t){Lh(i,n,o,a,s,"throw",t)}a(void 0)})});return function(t){return e.apply(this,arguments)}}()},{key:"_getGraphMapExpandQuery",value:function(t){var e=[];return(t.dataContent.expand&&JSON.parse(t.dataContent.expand)||[]).forEach(function(t){e.push("match p=(n)-[]-(m) where id(n)=".concat(t," return p;"))}),e}},{key:"processAsync",value:function(t){var e=t.url,r=t.params,n=t.method,o=t.callback,i={method:n,url:e,scope:this,success:o,failure:o};return r&&(i.params=r),this.request(i)}},{key:"_getGraphMapData",value:function(t){var e=this;return new Promise(function(r,n){e.getGraphMap(t,function(t){"processFailed"===t.type?n(t.error):""===t.result.data?n("无数据"):r(t.result.graphMap)})})}},{key:"_queryDataBySql",value:function(t){var e=this;return new Promise(function(r,n){e.query(t,function(t){"processFailed"===t.type?n(t.error):r(t.result)})})}}])&&Nh(e.prototype,r),n&&Nh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Uh(t){"@babel/helpers - typeof";return(Uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jh(){Jh=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var c={};function f(){}function h(){}function p(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(P([])));b&&b!==e&&r.call(b,o)&&(y=b);var v=p.prototype=f.prototype=Object.create(y);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==Uh(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(f).then(function(t){c.value=t,a(c)},function(t){return n("throw",t,a,s)})}s(u.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=p,s(v,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=P,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function Vh(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function zh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function qh(t,e){return(qh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Hh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wh(t);if(e){var o=Wh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Uh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Wh(t){return(Wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qh(t,e)}(i,Oh);var e,r,n,o=Hh(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e))._knowledgeGraphService=new Gh(t,e),r}return e=i,(r=[{key:"query",value:function(t,e){return this._knowledgeGraphService.query(t,e)}},{key:"getGraphMaps",value:function(t){return this._knowledgeGraphService.getGraphMaps(t)}},{key:"getGraphMap",value:function(t,e){return this._knowledgeGraphService.getGraphMap(t,e)}},{key:"getGraphMapData",value:function(){var t,e=(t=Jh().mark(function t(e){var r;return Jh().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._knowledgeGraphService.getGraphMapData(e);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){Vh(i,n,o,a,s,"next",t)}function s(t){Vh(i,n,o,a,s,"throw",t)}a(void 0)})});return function(t){return e.apply(this,arguments)}}()}])&&zh(e.prototype,r),n&&zh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),Xh=r(9819),Qh=r.n(Xh);function Zh(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Kh(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zh(Object(r),!0).forEach(function(e){$h(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zh(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function $h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tp(t){return function(t){if(Array.isArray(t))return ep(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ep(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ep(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ep(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rp(t,e){var r=e&&e.styles&&e.styles.style,n=e&&e.captionFields&&e.captionFields.captionField,o={nodes:[],edges:[]};return t.forEach(function(t){var e=t.path;if(e){var i,a,s=function(t,e,r){var n={nodes:[],edges:[]};return t.forEach(function(t){if(op(t)){var o=ap(t,e);n.edges.push(o)}else{var i=ip(t,e,r);n.nodes.push(i)}}),n}(e,r,n),u=s.nodes,l=s.edges;(i=o.nodes).push.apply(i,tp(u)),(a=o.edges).push.apply(a,tp(l))}else if(op(t)){var c=ap(t,r);o.edges.push(c)}else{var f=ip(t,r,n);o.nodes.push(f)}}),{nodes:np(o.nodes),edges:np(o.edges,"edgeId")}}function np(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return Qh()(t,e)}function op(t){return t.hasOwnProperty("start")&&t.hasOwnProperty("end")}function ip(t,e,r){var n=t.id,o=t.properties,i=t.lables,a=e?function(t,e){if(!e)return{};for(var r=t.id,n=t.labels,o=e.filter(function(t){return"entity"===t.type}),i=0;i<o.length;i++){var a=o[i],s=a.color,u=a.textColor,l=a.font,c=a.size,f=a.entityTypes,h=a.entityIds,p=JSON.parse(h||"[]"),y=JSON.parse(f||"[]");if(p.includes(r)||y.includes(n[0]))return Kh(Kh({fillColor:s,fontSize:l.fontSize,fill:u,size:c},up(l.fontName)),sp(l.fontStyle))}return{}}(t,e):{},s=function(t,e){var r=t.id,n=t.labels,o=t.properties;if(e)for(var i=e instanceof Array?e:[e],a=0;a<i.length;a++){var s=i[a],u=s.name,l=s.entityTypes,c=s.entityIds,f=JSON.parse(c||"[]"),h=JSON.parse(l||"[]"),p=n&&n.join("&");if(f.includes(r)||h.includes(p))return o[u]||""}return o[o._labelfieldname]||""}(t,r),u=a.fillColor||"",l={id:n+"",label:s,properties:o,lables:i};return a.size&&(l.size=a.size,delete a.size),a.fillColor&&(l.style={fill:u,stroke:u},delete a.fillColor),0!==Object.keys(a).length&&(l.labelCfg={style:a}),l}function ap(t,e){var r=t.start,n=t.end,o=t.id,i=t.type,a=t.properties,s=e?function(t,e){if(!e)return{};for(var r=t.id,n=t.type,o=e.filter(function(t){return"relationShip"===t.type}),i=0;i<o.length;i++){var a=o[i],s=a.color,u=a.width,l=a.textColor,c=a.font,f=a.relationTypes,h=a.relationIds,p=JSON.parse(h||"[]"),y=JSON.parse(f||"[]");if(p.includes(r)||y.includes(n))return Kh(Kh({stroke:s,lineWidth:1.4*Number(u),fontSize:c.fontSize,fill:l},up(c.fontName)),sp(c.fontStyle))}return{}}(t,e):{},u={source:r+"",target:n+"",edgeId:o+"",label:i,style:{},labelCfg:{},properties:a};return s.stroke&&(u.style.stroke=s.stroke,u.style.endArrow={path:"M 0,0 L 4,2 L 4,-2 Z",fill:s.stroke},delete s.stroke),s.lineWidth&&(u.style.lineWidth=s.lineWidth,delete s.lineWidth),u.labelCfg={style:s},u}function sp(t){return 1===t||"bold"===t?{fontWeight:"bold"}:2===t||"italic"===t?{fontStyle:"italic"}:"bolditalic"===t?{fontWeight:"bold",fontStyle:"italic"}:{}}function up(t){if(!t)return{};var e=t.split(".");return Kh({fontFamily:e[0]},sp(e[1]))}var lp=function(){try{return G6}catch(t){return{}}}(),cp=r.n(lp),fp=r(8813),hp=r.n(fp);function pp(t){return function(t){if(Array.isArray(t))return yp(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return yp(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yp(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yp(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function bp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?dp(Object(r),!0).forEach(function(e){vp(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dp(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function vp(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var gp=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=null,this.graph=null,this.data=null,this.collpasedData={},this.importG6(),this.CLASS_NAME="SuperMap.G6Render"}var e,r,n;return e=t,(r=[{key:"importG6",value:function(){cp()||console.log("please import g6, eg：https://gw.alipayobjects.com/os/lib/antv/g6/4.3.2/dist/g6.min.js")}},{key:"initGraph",value:function(t){var e=new(cp().Graph)(t);return this.graph=e,t&&!1===t.highlightNode||this.highlightNode(e),t&&!1===t.highlightEdge||this.highlightEdge(e),!1===t.dragCanvas&&!1===t.dragNode||this.stopDefaultEventPropagation(),e}},{key:"_getContextMenu",value:function(){var t=this;return new(cp().Menu)({shouldBegin:function(t){return!!(t.target&&t.target.isCanvas&&t.target.isCanvas())||!!t.item},getContent:function(e){var r=e.item;if(!(e.target&&e.target.isCanvas&&e.target.isCanvas())&&r){var n=r.getType(),o=r.getModel();return n&&o&&"node"===n?t.isCollpased(o.id)?"<ul>\n              <li id='expand'>展开</li>\n            </ul>":"<ul>\n              <li id='collapse'>折叠</li>\n            </ul>":void 0}},handleMenuClick:function(e,r){switch(e.id.split("-")[0]){case"hide":t.hideItem(r);break;case"expand":t.expandNode(r);break;case"collapse":t.collapseNode(r);break;case"show":t.showItem(r)}},offsetX:26,offsetY:0,itemTypes:["node","edge","canvas"]})}},{key:"_getGraphConfig",value:function(t){var e=this,r={speed:120,maxIteration:83,tick:function(){e.refreshPositions()}},n={type:"fruchterman",gravity:5},o={},i={type:"line",style:{endArrow:{path:"M 0,0 L 4,2 L 4,-2 Z",fill:"#e0e0e0"},lineWidth:.5},labelCfg:{autoRotate:!0,style:{fontSize:4,fill:"#333"}}},a={default:["drag-canvas","zoom-canvas","drag-node"]},s=this._getContextMenu(),u=[new(cp().ToolBar),s],l={lineWidth:3,stroke:"#b4d6ff"},c={stroke:"#b4d6ff",shadowColor:"#b4d6ff",shadowBlur:5,endArrow:{path:"M 0,0 L 4,2 L 4,-2 Z",fill:"#b4d6ff"}};if(!t)return this._setToolBarStyle(),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"knowledgeGraph",e=document.querySelector("#".concat(t));return{container:t,width:e.scrollWidth,height:e.scrollHeight,plugins:u,modes:a,layout:bp(bp({},n),r),defaultNode:o,defaultEdge:i,nodeStateStyles:{hover:l},edgeStateStyles:{hover:c}}}();t.container=t.container||"knowledgeGraph";var f="string"==typeof t.container?document.querySelector("#".concat(t.container)):t.container;return t.width=t.width||f.scrollWidth,t.height=t.height||f.scrollHeight,t.layout=bp(bp(bp({},n),t.layout||{}),!1!==t.animate?r:{}),t.defaultNode=bp(bp({},o),t.defaultNode||{}),t.defaultEdge=bp(bp({},i),t.defaultEdge||{}),t.modes={default:[!1!==t.dragCanvas&&"drag-canvas",!1!==t.zoomCanvas&&"zoom-canvas",!1!==t.dragNode&&"drag-node"]},t.nodeStateStyles={hover:bp(bp({},l),t.nodeHighlightStyle||{})},t.edgeStateStyles={hover:bp(bp({},c),t.edgeHighlightStyle||{})},!1!==t.showToolBar&&(t.plugins=[new(cp().ToolBar)],this._setToolBarStyle()),!1!==t.showContextMenu&&(t.plugins=[].concat(pp(t.plugins||[]),[s]),this._setToolBarStyle()),t}},{key:"changeSize",value:function(t,e){return this.graph.changeSize(t,e)}},{key:"autoResize",value:function(){var t=this,e=this.getContainer();window.addEventListener("resize",function(){var r=e.scrollWidth,n=e.scrollHeight;t.graph.changeSize(r,n),t.graph.refresh()})}},{key:"zoom",value:function(t,e,r,n){this.graph.zoom(t,e,r,n)}},{key:"zoomTo",value:function(t,e,r,n){this.graph.zoomTo(t,e,r,n)}},{key:"fitView",value:function(t,e,r,n){this.graph.fitView(t,e,r,n)}},{key:"fitCenter",value:function(t,e){this.graph.fitCenter(t,e)}},{key:"getGraphCenterPoint",value:function(){return this.graph.getGraphCenterPoint()}},{key:"getViewPortCenterPoint",value:function(){return this.graph.getViewPortCenterPoint()}},{key:"getZoom",value:function(){return this.graph.getZoom()}},{key:"getMinZoom",value:function(){return this.graph.getMinZoom()}},{key:"setMinZoom",value:function(t){this.graph.setMinZoom(t)}},{key:"getMaxZoom",value:function(){return this.graph.getMaxZoom()}},{key:"setMaxZoom",value:function(t){this.graph.setMaxZoom(t)}},{key:"getWidth",value:function(){return this.graph.getWidth()}},{key:"getHeight",value:function(){return this.graph.getHeight()}},{key:"setCenter",value:function(t){var e=this.graph.getWidth()/2,r=this.graph.getHeight()/2,n=this.graph.getCanvasByPoint(t.x,t.y);this.graph.translate(e-n.x,r-n.y)}},{key:"_setToolBarStyle",value:function(){hp()("\n      .g6-component-toolbar li[code='redo'],\n      .g6-component-toolbar li[code='undo'],\n      .g6-component-toolbar li[code='realZoom'] {\n        display: none;\n      }\n      .g6-component-contextmenu {\n        position: absolute;\n        z-index: 2;\n        list-style-type: none;\n        border-radius: 6px;\n        font-size: 14px;\n        width: fit-content;\n        transition: opacity .2s;\n        text-align: center;\n        box-shadow: 0 5px 18px 0 rgba(0, 0, 0, 0.6);\n        border: 0px;\n      }\n      .g6-component-contextmenu ul {\n        padding-left: 0px;\n        margin: 0;\n      }\n      .g6-component-contextmenu li {\n        cursor: pointer;\n        list-style-type: none;\n        list-style: none;\n        margin-left: 0;\n        line-height: 38px;\n        padding: 0px 35px;\n      }\n      .g6-component-contextmenu li:hover {\n        color: #333;\n        background: #aaaaaa45;\n      }\n    ")}},{key:"highlightNode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t.on("node:mouseenter",function(e){var r=e.item;t.setAutoPaint(!1),t.getNodes().forEach(function(e){t.clearItemStates(e)}),t.setItemState(r,"hover",!0),t.paint(),t.setAutoPaint(!0)}),t.on("node:mouseleave",function(){t.setAutoPaint(!1),t.getNodes().forEach(function(e){t.clearItemStates(e)}),t.paint(),t.setAutoPaint(!0)})}},{key:"highlightEdge",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t.on("edge:mouseenter",function(e){var r=e.item;t.setAutoPaint(!1),t.getNodes().forEach(function(e){t.clearItemStates(e)}),t.setItemState(r,"hover",!0),t.paint(),t.setAutoPaint(!0)}),t.on("edge:mouseleave",function(){t.setAutoPaint(!1),t.getEdges().forEach(function(e){t.clearItemStates(e)}),t.paint(),t.setAutoPaint(!0)})}},{key:"setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;this.data?e.changeData(t):e.data(t),this.data=t}},{key:"render",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).render()}},{key:"updateGraph",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;this.data=t,e.changeData(t)}},{key:"refresh",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).refresh()}},{key:"getContainer",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getContainer()}},{key:"getCanvas",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).get("canvas")}},{key:"getNodes",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getNodes()}},{key:"getEdges",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getEdges()}},{key:"getNeighbors",value:function(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).getNeighbors(t,e)}},{key:"findById",value:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).findById(t)}},{key:"find",value:function(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).find(t,e)}},{key:"findAll",value:function(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).findAll(t,e)}},{key:"getEdgesByNode",value:function(t){return t.getEdges()}},{key:"getInEdges",value:function(t){return t.getInEdges()}},{key:"getOutEdges",value:function(t){return t.getOutEdges()}},{key:"getSourceByEdge",value:function(t){return t.getSource()}},{key:"getTargetByEdge",value:function(t){return t.getTarget()}},{key:"expandNode",value:function(t){var e=t.getModel().id;this._expandCollapseNode(this.collpasedData[e],"show"),delete this.collpasedData[e]}},{key:"collapseNode",value:function(t){var e=t.getModel().id,r=[];this._collapseFunc(t,r),this.collpasedData[e]=r,this._expandCollapseNode(r)}},{key:"isCollpased",value:function(t){return!!this.collpasedData[t]}},{key:"_collapseFunc",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.getNeighbors(t,"target"),n=this.getNeighbors(t,"source"),o=0;o<r.length;o++){var i=r[o],a=i.getModel();1===this.getNeighbors(i).length&&e.push({id:a.id})}for(var s=0;s<n.length;s++){var u=n[s],l=u.getModel(),c=this.getNeighbors(u),f=this.getNeighbors(u,"source");if(1===c.length||0===f.length)e.push({id:l.id});else{var h=[];this._collapseFunc(u,h),e.push({id:l.id,children:h})}}return e}},{key:"_expandCollapseNode",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hide";t&&t.forEach(function(t){"hide"===r?e.hideItem(t.id):(e.showItem(t.id),e.isCollpased(t.id)&&delete e.collpasedData[t.id]),t.children&&e._expandCollapseNode(t.children,r)})}},{key:"showItem",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).showItem(t,e)}},{key:"hideItem",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).hideItem(t,e)}},{key:"show",value:function(t){t.show()}},{key:"hide",value:function(t){t.hide()}},{key:"changeVisibility",value:function(t,e){t.changeVisibility(e)}},{key:"isVisible",value:function(t){return t.isVisible()}},{key:"getModel",value:function(t){return t.getModel()}},{key:"addItem",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).addItem(t,e)}},{key:"removeItem",value:function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).removeItem(t)}},{key:"updateItem",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).updateItem(t,e)}},{key:"refreshItem",value:function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).refreshItem(t)}},{key:"refreshPositions",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).refreshPositions()}},{key:"on",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).on(t,e)}},{key:"off",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).off(t,e)}},{key:"toDataURL",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).toDataURL(t,e)}},{key:"bindNodeDefaultDragEvent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t.on("node:dragstart",function(t){wp(t)}),t.on("node:drag",function(t){wp(t)}),t.on("node:dragend",function(t){t.item.get("model").fx=null,t.item.get("model").fy=null})}},{key:"stopDefaultEventPropagation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t.on("click",function(t){t.stopPropagation()}),t.on("mousedown",function(t){t.stopPropagation()}),t.on("mouseover",function(t){t.stopPropagation()}),t.on("mouseout",function(t){t.stopPropagation()})}},{key:"clear",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).clear()}},{key:"destroy",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).destroy()}}])&&mp(e.prototype,r),n&&mp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function wp(t){var e=t.item.get("model");return e.fx=t.x,e.fy=t.y,e.x=t.x,e.y=t.y,e}var Op=r(2138),Sp=r.n(Op);function _p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Pp=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"G6";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.graph=null,this.config=Sp()(e),this.graphRender=null,this.type=r,this.createGraphRender(this.type),this.config=this.graphRender._getGraphConfig(this.config),this.createGraph(this.config),this.CLASS_NAME="SuperMap.KnowledgeGraph"}var e,r,n;return e=t,n=[{key:"dataFromGraphMap",value:function(t,e){return rp(t,e)}},{key:"dataFromKnowledgeGraphQuery",value:function(t){return rp(t)}}],(r=[{key:"handleNodeStatus",value:function(t){var e=t.expand,r=t.collapse,n=t.hidden;this.expandNodes(e),this.collapseNodes(r),this.hideNodes(n)}},{key:"expandNodes",value:function(t){var e=this;t&&t.forEach(function(t){e.expandNode(t+"")})}},{key:"collapseNodes",value:function(t){var e=this;t&&t.forEach(function(t){e.collapseNode(t+"")})}},{key:"hideNodes",value:function(t){var e=this;t&&t.forEach(function(t){e.hideItem(t+"")})}},{key:"createGraphRender",value:function(t){"G6"===t&&(this.graphRender=new gp)}},{key:"createGraph",value:function(t){var e=this.initGraph(t);return this.graph=e,this.autoResize(),e}},{key:"getGraph",value:function(){return this.graph}},{key:"autoResize",value:function(){this.config&&!1!==this.config.autoResize&&this.graphRender.autoResize()}},{key:"zoom",value:function(t,e,r,n){this.graphRender.zoom(t,e,r,n)}},{key:"zoomTo",value:function(t,e,r,n){this.graphRender.zoomTo(t,e,r,n)}},{key:"fitView",value:function(t,e,r,n){this.graphRender.fitView(t,e,r,n)}},{key:"fitCenter",value:function(t,e){this.graphRender.fitCenter(t,e)}},{key:"getGraphCenterPoint",value:function(){return this.graphRender.getGraphCenterPoint()}},{key:"getViewPortCenterPoint",value:function(){return this.graphRender.getViewPortCenterPoint()}},{key:"getZoom",value:function(){return this.graphRender.getZoom()}},{key:"getMinZoom",value:function(){return this.graphRender.getMinZoom()}},{key:"setMinZoom",value:function(t){this.graphRender.setMinZoom(t)}},{key:"getMaxZoom",value:function(){return this.graphRender.getMaxZoom()}},{key:"setMaxZoom",value:function(t){this.graphRender.setMaxZoom(t)}},{key:"getWidth",value:function(){return this.graphRender.getWidth()}},{key:"getHeight",value:function(){return this.graphRender.getHeight()}},{key:"initGraph",value:function(t){var e=this,r=this.graphRender.initGraph(t);this.graph=r;return this.graph.on("beforelayout",function(){void 0!==e.config.zoom&&e.zoom(e.config.zoom),void 0!==e.config.center&&e.graphRender.setCenter({x:e.config.center[0],y:e.config.center[1]})}),r}},{key:"setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;t=t||{nodes:[],edges:[]},this.config&&this.config.nodeLabelMaxWidth&&(t.nodes=this.nodeLabelOpenEllipsis(this.config.nodeLabelMaxWidth,t.nodes)),this.graphRender.setData(t,e),this.render(e),this.data=t}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t&&this.graphRender.render(t)}},{key:"updateGraph",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;e&&this.graphRender.updateGraph(t,e)}},{key:"refresh",value:function(){return this.graphRender.refresh()}},{key:"changeSize",value:function(t,e){return this.graphRender.changeSize(t,e)}},{key:"resize",value:function(t,e){this.graphRender.changeSize(t,e),this.graphRender.refresh()}},{key:"getContainer",value:function(){return this.graphRender.getContainer()}},{key:"getCanvas",value:function(){return this.graphRender.getCanvas()}},{key:"getNodes",value:function(){return this.graphRender.getNodes()}},{key:"getEdges",value:function(){return this.graphRender.getEdges()}},{key:"getNeighbors",value:function(t,e){return this.graphRender.getNeighbors(t,e)}},{key:"findById",value:function(t){return this.graphRender.findById(t)}},{key:"find",value:function(t,e){return this.graphRender.find(t,e)}},{key:"findAll",value:function(t,e){return this.graphRender.findAll(t,e)}},{key:"getEdgesByNode",value:function(t){return this.graphRender.getEdgesByNode(t)}},{key:"getInEdges",value:function(t){return this.graphRender.getInEdges(t)}},{key:"getOutEdges",value:function(t){return this.graphRender.getOutEdges(t)}},{key:"getSourceByEdge",value:function(t){return this.graphRender.getSourceByEdge(t)}},{key:"getTargetByEdge",value:function(t){return this.graphRender.getTargetByEdge(t)}},{key:"expandNode",value:function(t){var e=this.findById(t);e&&this.graphRender.expandNode(e)}},{key:"collapseNode",value:function(t){var e=this.findById(t);e&&this.graphRender.collapseNode(e)}},{key:"showItem",value:function(t,e){this.graphRender.showItem(t,e)}},{key:"hideItem",value:function(t,e){this.graphRender.hideItem(t,e)}},{key:"show",value:function(t){this.graphRender.show(t)}},{key:"hide",value:function(t){this.graphRender.hide(t)}},{key:"changeVisibility",value:function(t,e){this.graphRender.changeVisibility(t,e)}},{key:"isVisible",value:function(t){return this.graphRender.isVisible(t)}},{key:"getModel",value:function(t){return this.graphRender.getModel(t)}},{key:"addItem",value:function(t,e){return this.graphRender.addItem(t,e)}},{key:"removeItem",value:function(t){return this.graphRender.removeItem(t)}},{key:"updateItem",value:function(t,e){return this.graphRender.updateItem(t,e)}},{key:"refreshItem",value:function(t){return this.graphRender.refreshItem(t)}},{key:"refreshPositions",value:function(){return this.graphRender.refreshPositions()}},{key:"on",value:function(t,e){this.graphRender.on(t,e)}},{key:"off",value:function(t,e){this.graphRender.off(t,e)}},{key:"toDataURL",value:function(t,e){this.graphRender.toDataURL(t,e)}},{key:"nodeLabelOpenEllipsis",value:function(t,e){var r=this;return e?t?e.map(function(e){var n=e.labelCfg&&e.labelCfg.fontSize||r.defaultNode&&r.defaultNode.labelCfg&&r.defaultNode.labelCfg.fontSize||14;return e.label=function(t,e,r){var n=1*r;e*=1.6;if(function(t){for(var e=0,r=0;r<t.length;r++)t.charCodeAt(r)>0&&t.charCodeAt(r)<128?e++:e+=2;return e}(t)*n>e){var o=Math.floor((e-20)/n),i=t.substring(0,o);return(t.substring(o).length+"…".length)*n>e?i+"\n"+t.substring(o,o+o-2)+"…":0==t.substring(o).length?i:i+"\n"+t.substring(o)}return t}(e.label,t,n),e}):e:[]}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t&&t.clear()}},{key:"destroy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t&&t.destroy()}}])&&_p(e.prototype,r),n&&_p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function xp(t){"@babel/helpers - typeof";return(xp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kp(){kp=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var c={};function f(){}function h(){}function p(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(P([])));b&&b!==e&&r.call(b,o)&&(y=b);var v=p.prototype=f.prototype=Object.create(y);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==xp(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(f).then(function(t){c.value=t,a(c)},function(t){return n("throw",t,a,s)})}s(u.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=p,s(v,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=P,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function jp(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function Ep(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Tp(t,e){return(Tp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Cp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Rp(t);if(e){var o=Rp(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===xp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Rp(t){return(Rp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ap=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tp(t,e)}(a,o().Evented);var e,r,n,i=Cp(a);function a(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t,e)).graph=null,r.EVENT_TYPES=["loaded"];var n=t.split("/").pop();return r.url=t.replace("/graphmaps/".concat(n),""),r.createGraphMap(n,e),r}return e=a,(r=[{key:"createGraphMap",value:function(){var t,e=(t=kp().mark(function t(e,r){var n,o,i=this;return kp().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.knowledgeGraphService=this.createKnowledgeGraphService(this.url,r),t.next=3,this.knowledgeGraphService.getGraphMapData(e);case 3:n=t.sent,o=Pp.dataFromGraphMap(n.data,n.graphMap),this.graph=new Pp(r&&r.config),this.graph.on("beforelayout",function(){i.fire(i.EVENT_TYPES[0])}),this.graph.setData(o),this.graph.handleNodeStatus((a=n.graphMap,void 0,void 0,void 0,void 0,s=a.dataContent,u=s.expand,l=s.collapse,c=s.hidden,{expand:u&&JSON.parse(u),collapse:l&&JSON.parse(l),hidden:c&&JSON.parse(c)}));case 9:case"end":return t.stop()}var a,s,u,l,c},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){jp(i,n,o,a,s,"next",t)}function s(t){jp(i,n,o,a,s,"throw",t)}a(void 0)})});return function(t,r){return e.apply(this,arguments)}}()},{key:"createKnowledgeGraphService",value:function(t,e){return new Yh(t,e)}}])&&Ep(e.prototype,r),n&&Ep(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function Mp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Lp=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lngLat=Pr.isArray(e)?{lng:e[0],lat:e[1]}:e,this.style=Pr.extend({},r),this.attributes=n}var e,r,n;return e=t,(r=[{key:"getId",value:function(){return this.id}},{key:"setId",value:function(t){this.id=t}},{key:"getLngLat",value:function(){return this.lngLat}},{key:"setLngLat",value:function(t){this.lngLat=Pr.isArray(t)?{lng:t[0],lat:t[1]}:t}},{key:"setStyle",value:function(t){this.style=Pr.extend(this.style,t)}},{key:"getStyle",value:function(){return this.style}},{key:"setAttributes",value:function(t){this.attributes=Pr.extend({},this.attributes,t)}},{key:"getAttributes",value:function(){return this.attributes}}])&&Mp(e.prototype,r),n&&Mp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Np={getPoint:function(t){if(t&&t instanceof Array)return new xs.DataSet([{geometry:{type:"Point",coordinates:t}}])},getPoints:function(t){if(t&&t instanceof Array){var e=[];return t.forEach(function(t){e.push({geometry:{type:"Point",coordinates:t.geometry.coordinates}})}),new xs.DataSet(e)}},getCurveLines:function(t,e){if(t&&t instanceof Array&&e&&e instanceof Array){var r=[];return e.forEach(function(e){var n=e.geometry&&e.geometry.coordinates,o={lng:n[0],lat:n[1]},i={lng:t[0],lat:t[1]},a=xs.utilCurve.getPoints([i,o]);r.push({geometry:{type:"LineString",coordinates:a}})}),new xs.DataSet(r)}},getCurveDynamicPoints:function(t,e){if(t&&t instanceof Array&&e&&e instanceof Array){var r=[];return e.forEach(function(e){for(var n=e.geometry&&e.geometry.coordinates,o={lng:n[0],lat:n[1]},i={lng:t[0],lat:t[1]},a=xs.utilCurve.getPoints([i,o]),s=0;s<a.length;s++)r.push({geometry:{type:"Point",coordinates:a[s]},time:s})}),new xs.DataSet(r)}}};function Ip(t,e,r,n,o){return{id:t,type:e,source:r||"vector-tiles","source-layer":n||t,paint:o}}function Dp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Fp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Dp(Object(r),!0).forEach(function(e){Bp(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dp(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function Bp(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Up=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=e}var e,r,n;return e=t,(r=[{key:"addLayer",value:function(t,e,r){t.paint&&Object.assign(e.paint||{},t.paint),t.layout&&Object.assign(e.layout||{},t.layout),this.map.addLayerBySymbolBak(Fp(Fp({},t),e),r)}}])&&Gp(e.prototype,r),n&&Gp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Jp(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Vp(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Jp(Object(r),!0).forEach(function(e){zp(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jp(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function zp(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Hp=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=e,this.singleSymbol=new Up(e),this.layerIds={}}var e,r,n;return e=t,(r=[{key:"addLayer",value:function(t,e,r){var n=this;e.forEach(function(e){var o=C.createUniqueID("".concat(t.id,"_compositeLayer_"));n.singleSymbol.addLayer(Vp(Vp({},t),{},{id:o}),e,r),n.addLayerId(t.id,o)})}},{key:"addLayerId",value:function(t,e){this.layerIds[t]||(this.layerIds[t]=[]),!this.layerIds[t].includes(e)&&this.layerIds[t].push(e)}},{key:"removeLayerId",value:function(t){delete this.layerIds[t]}},{key:"getLayerIds",value:function(t){return this.layerIds[t]}},{key:"getLayerId",value:function(t){for(var e in this.layerIds)if(this.layerIds[e].find(function(e){return e===t}))return e}}])&&qp(e.prototype,r),n&&qp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Wp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Yp=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.symbols={},this.images={}}var e,r,n;return e=t,(r=[{key:"addSymbol",value:function(t,e){e.layout&&delete e.layout.visibility,this.symbols[t]=e}},{key:"getSymbol",value:function(t){return this.symbols[t]&&JSON.parse(JSON.stringify(this.symbols[t]))}},{key:"removeSymbol",value:function(t){delete this.symbols[t]}},{key:"addImageInfo",value:function(t,e){this.images[t]=e}},{key:"getImageInfo",value:function(t){return this.images[t]}}])&&Wp(e.prototype,r),n&&Wp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Xp(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||Qp(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qp(t,e){if(t){if("string"==typeof t)return Zp(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zp(t,e):void 0}}function Zp(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Kp(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var $p={circle:"circle",symbol:"symbol",line:"line",fill:"fill"},ty=[{prefix:"line-",type:$p.line},{prefix:"fill-",type:$p.fill},{prefix:"circle-",type:$p.circle}];function ey(t){return t&&t.length>0}function ry(t){var e,r=function(t){var e,r,n=t.paint,o=void 0===n?{}:n,i=t.layout,a=void 0===i?{}:i,s=Object.keys(o).concat(Object.keys(a)),u=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Qp(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(ty);try{var l=function(){var t=r.value,n=s.some(function(e){return e.startsWith(t.prefix)});if(n)return e=t.type,1};for(u.s();!(r=u.n()).done&&!l(););}catch(t){u.e(t)}finally{u.f()}return e||$p.symbol}(t);return(Kp(e={},$p.symbol,{type:"layout",name:"icon-image"}),Kp(e,$p.line,{type:"paint",name:"line-pattern"}),Kp(e,$p.fill,{type:"paint",name:"fill-pattern"}),e)[r]}var ny=["array","boolean","collator","format","literal","number","object","string","to-boolean","to-color","to-number","to-string","typeof","feature-state","geometry-type","id","line-progress","properties","at","get","has","length","!","!=","<","<=","==",">",">=","all","any","case","match","coalesce","interpolate","interpolate-hcl","interpolate-lab","step","let","var","concat","downcase","is-supported-script","resolved-locale","upcase","rgb","rgba","-","*","/","%","^","+","abs","acos","asin","atan","ceil","cos","e","floor","ln","ln2","log10","log2","max","min","pi","round","sin","sqrt","tan","zoom","heatmap-density"];function oy(t){if(t&&t.length>0){var e=Xp(t,1)[0];return"string"==typeof e&&ny.includes(e)}return!1}function iy(t){return Object.keys(t).every(function(e){return!oy(t[e])})}function ay(t){return(ey(t)?t:[t]).every(function(t){return iy(t.paint||{})&&iy(t.layout||{})})}var sy=function(t){return["icon-color","icon-opacity","icon-translate","line-opacity","line-blur","line-translate","line-color","line-width","line-offset","line-dasharray","line-pattern","fill-color","fill-opacity","fill-pattern","fill-outline-color","text-color","text-halo-blur","text-halo-color","text-halo-width","text-opacity","text-translate","text-translate-anchor","circle-blur","circle-color","circle-opacity","circle-translate","circle-radius","circle-stroke-color","circle-stroke-opacity","circle-stroke-width"].includes(t)};function uy(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function ly(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?uy(Object(r),!0).forEach(function(e){cy(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uy(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function cy(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var hy=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.map=e,this.symbolManager=new Yp,this.singleSymbolRender=new Up(e),this.compositeSymbolRender=new Hp(e),this._layerSymbols={}}var e,r,n;return e=t,(r=[{key:"_update",value:function(t){return this.map=t,this}},{key:"addLayer",value:function(t,e){if("string"==typeof t.symbol){var r=t.symbol;if(r){var n=this.getSymbol(r);if(!n)return this.map.fire("error",{error:new Error('Symbol "'.concat(r,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))});this.setSymbolTolayer(t.id,r),this.getSymbolRender(n).addLayer(t,n,e)}}else oy(t.symbol)&&(this.setSymbolTolayer(t.id,t.symbol),this.addExpressionLayer(t,e))}},{key:"setSymbol",value:function(t,e){var r=this.map.getStyle().layers,n=r.findIndex(function(e){return e.id===t});if(-1===n)return this.map.fire("error",{error:new Error('Cannot set symbol "'.concat(e,'" to non-existing layer "').concat(t,'".'))});this.map.removeLayer(t);var o=r[n+1]&&r[n+1].id,i=o&&this.map.style.getLayer(o),a=i&&i.id||o&&this.getFirstLayerId(o),s=r[n];this.addLayer(ly(ly({},s),{},{paint:{},layout:{visibility:s.layout&&s.layout.visibility||"visible"},symbol:e}),a)}},{key:"getMatchLayers",value:function(t){var e=[],r=["all"];t.filter&&r.push(t.filter);var n=[],o=t.symbol.slice(2);return o.forEach(function(i,a){a%2==1?(e.push(ly(ly({},t),{},{filter:[].concat(r,[["==",t.symbol[1][1],o[a-1]]]),symbol:i})),n.push(["!=",t.symbol[1][1],o[a-1]])):a===o.length-1&&e.unshift(ly(ly({},t),{},{filter:[].concat(r,n),symbol:i}))}),e}},{key:"getCaseLayers",value:function(t){var e=[],r=["all"];t.filter&&r.push(t.filter);var n=[],o=t.symbol.slice(1);return o.forEach(function(i,a){a%2==1?(e.push(ly(ly({},t),{},{filter:[].concat(r,[o[a-1]]),symbol:i})),n.push(["!",o[a-1]])):a===o.length-1&&e.unshift(ly(ly({},t),{},{filter:[].concat(r,n),symbol:i}))}),e}},{key:"addExpressionLayer",value:function(t,e){var r=this,n={match:this.getMatchLayers,case:this.getCaseLayers}[t.symbol[0]],o=n&&n(t);if(!o)return this.map.fire("error",{error:new Error("This expressions not supported")});o.forEach(function(n){n.id=C.createUniqueID("".concat(t.id,"_compositeLayer_")),r.compositeSymbolRender.addLayerId(t.id,n.id),r.addLayer(n,e)})}},{key:"getSymbolRender",value:function(t){return ey(t)?this.compositeSymbolRender:this.singleSymbolRender}},{key:"addSymbolImageToMap",value:function(t,e){var r=ry(t),n=r.type,o=r.name,i=t[n]&&t[n][o];i&&!this.map.hasImage(i)&&(this.map.addImage(i,e),this.symbolManager.addImageInfo(i,e))}},{key:"addSymbol",value:function(t,e){return this.getSymbol(t)?this.map.fire("error",{error:new Error("An symbol with this name already exists.")}):ay(e)?void this.symbolManager.addSymbol(t,e):this.map.fire("error",{error:new Error("Symbol is not supported expressions.")})}},{key:"setSymbolTolayer",value:function(t,e){this._layerSymbols[t]=e}},{key:"getLayerSymbol",value:function(t){return this._layerSymbols[t]}},{key:"hasSymbol",value:function(){return Object.keys(this._layerSymbols).length>0}},{key:"removeSymbol",value:function(t){this.symbolManager.removeSymbol(t)}},{key:"getSymbol",value:function(t){return this.symbolManager.getSymbol(t)}},{key:"getLayerIds",value:function(t){return this.compositeSymbolRender.getLayerIds(t)||[]}},{key:"getLayerId",value:function(t){return this.compositeSymbolRender.getLayerId(t)}},{key:"removeLayerId",value:function(t){return this.compositeSymbolRender.removeLayerId(t)}},{key:"getLayer",value:function(t){var e=this.map.getLayerBySymbolBak(t),r=this.getLayerSymbol(t);if(e)return r?ly(ly({},e),{},{symbol:r}):e;var n=this.getLayerIds(t);if(n[0]){var o=this.map.getLayerBySymbolBak(n[0]);return o&&ly(ly({},o),{},{symbol:r,id:t})}}},{key:"removeLayer",value:function(t){var e=this,r=this.getLayerIds(t);r.length>0?(r.forEach(function(t){return e.map.style.removeLayer(t)}),this.removeLayerId(t)):this.map.style.removeLayer(t)}},{key:"getStyle",value:function(){var t=this,e=this.map.style.serialize();return this.hasSymbol()&&(e.layers=e.layers.reduce(function(e,r){var n=t.getLayerId(r.id);return n?!e.find(function(t){return t.id===n})&&e.push(ly(ly({},r),{},{symbol:t.getLayerSymbol(n),id:n})):t.getLayerSymbol(r.id)?e.push(ly(ly({},r),{},{symbol:t.getLayerSymbol(r.id)})):e.push(r),e},[])),e}},{key:"getFirstLayerId",value:function(t){return this.getLayerIds(t)[0]}},{key:"moveLayer",value:function(t,e){var r=this,n=this.getLayerIds(t),o=e&&this.map.style.getLayer(e),i=o&&o.id||e&&this.getFirstLayerId(e);n.length>0?n.forEach(function(t){return r.map.style.moveLayer(t,i)}):this.map.style.moveLayer(t,i)}},{key:"setFilter",value:function(t,e,r){var n=this;if(oy(this.getLayerSymbol(t))){var o=this.getFirstLayerId(t);this.map.style.setFilter(o,e,r);var i=this.getLayerSymbol(t);this.setSymbol(t,i)}else{var a=this.getLayerIds(t);a.length>0?a.forEach(function(t){return n.map.style.setFilter(t,e,r)}):this.map.style.setFilter(t,e,r)}}},{key:"getFilter",value:function(t){var e=this.getFirstLayerId(t);if(this.map.style.getLayer(e))return this.map.style.getFilter(e)}},{key:"setLayerZoomRange",value:function(t,e,r){var n=this,o=this.getLayerIds(t);o.length>0?o.forEach(function(t){return n.map.style.setLayerZoomRange(t,e,r)}):this.map.style.setLayerZoomRange(t,e,r)}},{key:"setPaintProperty",value:function(t,e,r,n){var o=this,i=this.getLayerIds(t);i.length>0?i.forEach(function(t){return o.map.style.setPaintProperty(t,e,r,n)}):this.map.style.setPaintProperty(t,e,r,n)}},{key:"getPaintProperty",value:function(t,e){var r=this.getFirstLayerId(t);return this.map.style.getPaintProperty(r,e)}},{key:"setLayoutProperty",value:function(t,e,r,n){var o=this,i=this.getLayerIds(t);i.length>0?i.forEach(function(t){return o.map.style.setLayoutProperty(t,e,r,n)}):this.map.style.setLayoutProperty(t,e,r,n)}},{key:"getLayoutProperty",value:function(t,e){var r=this.getFirstLayerId(t);return this.map.style.getLayoutProperty(r,e)}},{key:"updateLayerSymbol",value:function(t){var e=this;Object.keys(this._layerSymbols).forEach(function(r){var n=e._layerSymbols[r];n.includes(t)&&e.setSymbol(r,n)})}},{key:"updateSymbol",value:function(t,e){return this.getSymbol(t)?ay(e)?(this.symbolManager.addSymbol(t,e),void this.updateLayerSymbol(t)):this.map.fire("error",{error:new Error("Symbol is not supported expressions.")}):this.map.fire("error",{error:new Error('Symbol "'.concat(t,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))})}},{key:"setSymbolProperty",value:function(t,e,r,n){var o=this.getSymbol(t);if(!o)return this.map.fire("error",{error:new Error('Symbol "'.concat(t,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))});if(oy(n))return this.map.fire("error",{error:new Error("Symbol value is not supported expressions.")});var i=sy(r)?"paint":"layout";if(o.length>0){var a=o[e];if(!a)return this.map.fire("error",{error:new Error("symbol[".concat(e,"] does not exist."))});a[i]||(a[i]={}),Object.assign(a[i],cy({},r,n))}else o[i]||(o[i]={}),Object.assign(o[i],cy({},r,n));this.symbolManager.addSymbol(t,o),this.updateLayerSymbol(t)}},{key:"getSymbolProperty",value:function(t,e,r){var n=this.getSymbol(t);if(n){var o=sy(r)?"paint":"layout";return n.length>0?n[e]&&n[e][o]&&n[e][o][r]:n[o]&&n[o][r]}this.map.fire("error",{error:new Error('Symbol "'.concat(t,'" could not be loaded. Please make sure you have added the symbol with map.addSymbol().'))})}}])&&fy(e.prototype,r),n&&fy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function py(t){"@babel/helpers - typeof";return(py="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yy(){yy=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var c={};function f(){}function h(){}function p(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(P([])));b&&b!==e&&r.call(b,o)&&(y=b);var v=p.prototype=f.prototype=Object.create(y);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==py(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(f).then(function(t){c.value=t,a(c)},function(t){return n("throw",t,a,s)})}s(u.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=p,s(v,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=P,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function dy(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function by(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){dy(i,n,o,a,s,"next",t)}function s(t){dy(i,n,o,a,s,"throw",t)}a(void 0)})}}var vy=function(){var t=function(t){return o().Map.prototype.symbolHandler||(o().Map.prototype.symbolHandler=new hy(t)),o().Map.prototype.symbolHandler._update(t)};function e(){return(e=by(yy().mark(function t(e,r){var n,o,i,a,s,u;return yy().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(r.basePath,"/").concat(e,"/").concat(e),t.next=4,Jl.get("".concat(n,".json")).then(function(t){return t.ok?t.json():null}).catch(function(){return null});case 4:if(o=t.sent){t.next=7;break}return t.abrupt("return",null);case 7:if(i=o.paint||{},a=o.layout||{},s=i["fill-pattern"]||i["line-pattern"]||a["icon-image"],t.t0=s,!t.t0){t.next=15;break}return t.next=14,new Promise(function(t){var e=new Image;e.src="".concat(n,".png"),e.onload=function(r){t(r?e:null)},e.onerror=function(){t(null)}});case 14:t.t0=t.sent;case 15:return u=t.t0,t.abrupt("return",{value:o,image:u});case 17:case"end":return t.stop()}},t)}))).apply(this,arguments)}function r(r,n){return function(t,r){return e.apply(this,arguments)}(r,n).then(function(e){if(!e)return null;var r=e.value,o=e.image;return o&&t(n).addSymbolImageToMap(r,o),r})}void 0===o().Map.prototype.addLayerBySymbolBak&&(o().Map.prototype.addLayerBySymbolBak=o().Map.prototype.addLayer,o().Map.prototype.addLayer=function(e,r){var n=t(this);if(!(n.getLayerIds(e.id).length>0))return e.symbol?(n.addLayer(e,r),this):(this.addLayerBySymbolBak(e,r),this);this.fire("error",{error:new Error("A layer with this id already exists.")})}),void 0===o().Map.prototype.getLayerBySymbolBak&&(o().Map.prototype.getLayerBySymbolBak=o().Map.prototype.getLayer,o().Map.prototype.getLayer=function(e){return t(this).getLayer(e)}),void 0===o().Map.prototype.moveLayerBySymbolBak&&(o().Map.prototype.moveLayerBySymbolBak=o().Map.prototype.moveLayer,o().Map.prototype.moveLayer=function(e,r){return!this.style.getLayer(e)||r&&!this.style.getLayer(r)?(t(this).moveLayer(e,r),this._update(!0)):this.moveLayerBySymbolBak(e,r)}),void 0===o().Map.prototype.removeLayerBySymbolBak&&(o().Map.prototype.removeLayerBySymbolBak=o().Map.prototype.removeLayer,o().Map.prototype.removeLayer=function(e){return this.style.getLayer(e)?this.removeLayerBySymbolBak(e):t(this).removeLayer(e)}),void 0===o().Map.prototype.setLayoutPropertyBySymbolBak&&(o().Map.prototype.setLayoutPropertyBySymbolBak=o().Map.prototype.setLayoutProperty,o().Map.prototype.setLayoutProperty=function(e,r,n,o){return this.overlayLayersManager[e]||this.style.getLayer(e)?this.setLayoutPropertyBySymbolBak(e,r,n,o):(t(this).setLayoutProperty(e,r,n,o),this._update(!0))}),o().Map.prototype.setSymbol=function(e,r){t(this).setSymbol(e,r)},o().Map.prototype.setStyleBak||(o().Map.prototype.setStyleBak=o().Map.prototype.setStyle,o().Map.prototype.setStyle=function(t,e){var r=this;return this.setStyleBak(t,e),this.style&&this.style.once("style.load",function(){t.layers.filter(function(t){return t.symbol}).forEach(function(t){r.setSymbol(t.id,t.symbol)})}),this}),o().Map.prototype.loadSymbol=(n=by(yy().mark(function t(e,n){var o,i,a,s,u,l,c=this;return yy().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof e){t.next=9;break}return t.next=3,r(e,this);case 3:o=t.sent,i=null,o||(i="Symbol ".concat(e," is not exists")),n(i,o),t.next=21;break;case 9:if(!C.isArray(e)){t.next=20;break}return a=e.map(function(t){return r(t,c)}),t.next=13,Promise.all(a);case 13:s=t.sent,u=null,(l=e.filter(function(t,e){return!s[e]})).length>0&&(u="Symbol ".concat(l.join(",")," is not exists")),n(u,s),t.next=21;break;case 20:n({message:"Symbol id must be a string or string[]."});case 21:case"end":return t.stop()}},t,this)})),function(t,e){return n.apply(this,arguments)}),o().Map.prototype.addSymbol=function(e,r){t(this).addSymbol(e,r)},o().Map.prototype.getSymbol=function(e){return t(this).getSymbol(e)},o().Map.prototype.hasSymbol=function(t){return t?!!this.getSymbol(t):(this.fire("error",{error:new Error("Missing required symbol id")}),!1)},o().Map.prototype.removeSymbol=function(e){t(this).removeSymbol(e)},o().Map.prototype.updateSymbol=function(e,r){t(this).updateSymbol(e,r)},o().Map.prototype.setSymbolProperty=function(e,r,n,o){t(this).setSymbolProperty(e,r,n,o)},o().Map.prototype.getSymbolProperty=function(e,r,n){return t(this).getSymbolProperty(e,r,n)},o().Map.prototype.getStyle=function(){if(this.style)return t(this).getStyle()},o().Map.prototype.setFilter=function(e,r,n){return this.style.getLayer(e)?(this.style.setFilter(e,r,n),this._update(!0)):(t(this).setFilter(e,r,n),this._update(!0))},o().Map.prototype.getFilter=function(e){return this.style.getLayer(e)?this.style.getFilter(e):t(this).getFilter(e)},o().Map.prototype.setLayerZoomRange=function(e,r,n){return this.style.getLayer(e)?(this.style.setLayerZoomRange(e,r,n),this._update(!0)):(t(this).setLayerZoomRange(e,r,n),this._update(!0))},o().Map.prototype.setPaintProperty=function(e,r,n,o){return this.style.getLayer(e)?(this.style.setPaintProperty(e,r,n,o),this._update(!0)):(t(this).setPaintProperty(e,r,n,o),this._update(!0))},o().Map.prototype.getPaintProperty=function(e,r){return this.style.getLayer(e)?this.style.getPaintProperty(e,r):t(this).getPaintProperty(e,r)},o().Map.prototype.getLayoutProperty=function(e,r){return this.style.getLayer(e)?this.style.getLayoutProperty(e,r):t(this).getLayoutProperty(e,r)},void 0===o().Map.prototype.onBak&&(o().Map.prototype.onBak=o().Map.prototype.on,o().Map.prototype.on=function(e,r,n){var o=this;return void 0===n||this.style.getLayer(r)?this.onBak(e,r,n):(t(this).getLayerIds(r).forEach(function(t){return o.onBak(e,t,n)}),this)}),void 0===o().Map.prototype.onceBak&&(o().Map.prototype.onceBak=o().Map.prototype.once,o().Map.prototype.once=function(e,r,n){var o=this;return void 0===n||this.style.getLayer(r)?this.onceBak(e,r,n):(t(this).getLayerIds(r).forEach(function(t){return o.onceBak(e,t,n)}),this)}),void 0===o().Map.prototype.offBak&&(o().Map.prototype.offBak=o().Map.prototype.off,o().Map.prototype.off=function(e,r,n){var o=this;return void 0===n||this.style.getLayer(r)?this.offBak(e,r,n):(t(this).getLayerIds(r).forEach(function(t){return o.offBak(e,t,n)}),this)});var n};function my(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var gy=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.defaultBasePath="./resources/symbols"}var e,r,n;return e=t,(r=[{key:"init",value:function(t){o().Map.prototype.basePath=t&&t.basePath||this.defaultBasePath,vy()}}])&&my(e.prototype,r),n&&my(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function wy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Oy=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.filters&&"string"==typeof e.filters&&(e.filters=e.filters.split(",")),this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,C.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null}}])&&wy(e.prototype,r),n&&wy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Sy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var _y=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.filters&&(e.filters=e.filters.split(",")),this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,C.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null}}])&&Sy(e.prototype,r),n&&Sy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Py(t){"@babel/helpers - typeof";return(Py="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ky(){return(ky="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ty(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function jy(t,e){return(jy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ey(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ty(t);if(e){var o=Ty(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Py(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ty(t){return(Ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Cy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jy(t,e)}(i,Th);var e,r,n,o=Ey(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).options=e||{},r.CLASS_NAME="SuperMap.AddressMatchService",r}return e=i,(r=[{key:"destroy",value:function(){ky(Ty(i.prototype),"destroy",this).call(this)}},{key:"code",value:function(t,e,r){if(e instanceof Oy)return this.processAsync(t,e,r)}},{key:"decode",value:function(t,e,r){if(e instanceof _y)return this.processAsync(t,e,r)}},{key:"processAsync",value:function(t,e,r){return this.request({method:"GET",url:t,params:e,scope:this,success:r,failure:r})}},{key:"transformResult",value:function(t,e){return t.succeed&&delete t.succeed,{result:t,options:e}}}])&&xy(e.prototype,r),n&&xy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ry(t){"@babel/helpers - typeof";return(Ry="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ay(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function My(t,e){return(My=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ly(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ny(t);if(e){var o=Ny(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ry(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ny(t){return(Ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Iy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&My(t,e)}(i,Oh);var e,r,n,o=Ly(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e))._addressMatchService=new Cy(t,e),r}return e=i,(r=[{key:"code",value:function(t,e){return this._addressMatchService.code(C.urlPathAppend(this.url,"geocoding"),t,e)}},{key:"decode",value:function(t,e){return this._addressMatchService.decode(C.urlPathAppend(this.url,"geodecoding"),t,e)}}])&&Ay(e.prototype,r),n&&Ay(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Dy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Fy=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.customParams=null,this.prjCoordSys=null,this.expectCount=1e5,this.networkType=Ee.LINE,this.queryOption=Te.ATTRIBUTEANDGEOMETRY,this.queryParams=null,this.startRecord=0,this.holdTime=10,this.returnCustomResult=!1,this.returnFeatureWithFieldCaption=!1,C.extend(this,e),this.CLASS_NAME="SuperMap.QueryParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;if(t.customParams=null,t.expectCount=null,t.networkType=null,t.queryOption=null,t.queryParams){for(var e=0,r=t.queryParams,n=r.length;e<n;e++)r[e].destroy();t.queryParams=null}t.startRecord=null,t.holdTime=null,t.returnCustomResult=null,t.prjCoordSys=null}}])&&Dy(e.prototype,r),n&&Dy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function By(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Gy=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null,C.extend(this,e),this.CLASS_NAME="SuperMap.ChartQueryFilterParameter"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.isQueryPoint=null,t.isQueryLine=null,t.isQueryRegion=null,t.attributeFilter=null,t.chartFeatureInfoSpecCode=null}},{key:"toJson",value:function(){var t="";return t+='"isQueryPoint":'+this.isQueryPoint+",",t+='"isQueryLine":'+this.isQueryLine+",",t+='"isQueryRegion":'+this.isQueryRegion+",",this.attributeFilter&&(t+='"attributeFilter": "'+this.attributeFilter+'",'),t="{"+(t+='"chartFeatureInfoSpecCode":'+this.chartFeatureInfoSpecCode)+"}"}}])&&By(e.prototype,r),n&&By(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Uy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Jy=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null,C.extend(this,e),this.CLASS_NAME="SuperMap.ChartQueryParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.queryMode=null,t.bounds=null,t.chartLayerNames=null,t.chartQueryFilterParameters=null,t.returnContent=!0,t.startRecord=0,t.expectCount=null}},{key:"getVariablesJson",value:function(){var t="";if(t+='"queryMode":"'+this.queryMode+'",',this.chartLayerNames&&this.chartLayerNames.length){for(var e=[],r=this.chartLayerNames.length,n=0;n<r;n++)e.push('"'+this.chartLayerNames[n]+'"');t+='"chartLayerNames":'+("["+e.join(",")+"]")+","}if("ChartBoundsQuery"===this.queryMode&&this.bounds&&(t+='"bounds":{"leftBottom":{"x":'+this.bounds.left+',"y":'+this.bounds.bottom+'},"rightTop":{"x":'+this.bounds.right+',"y":'+this.bounds.top+"}},"),this.chartQueryFilterParameters&&this.chartQueryFilterParameters.length){for(var o=[],i=this.chartQueryFilterParameters.length,a=0;a<i;a++){var s=this.chartQueryFilterParameters[a];s instanceof Gy&&o.push(s.toJson())}var u="["+o.join(",")+"]";u='"chartQueryParams":'+u+",",u+='"startRecord":'+this.startRecord+",",t+='"chartQueryParameters":'+(u="{"+(u+='"expectCount":'+this.expectCount)+"}")}return t="{"+t+"}"}}])&&Uy(e.prototype,r),n&&Uy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Vy(t){"@babel/helpers - typeof";return(Vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function qy(t,e){return(qy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Hy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Xy(t);if(e){var o=Xy(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Wy(this,r)}}function Wy(t,e){if(e&&("object"===Vy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Yy(t)}function Yy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xy(t){return(Xy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Qy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qy(t,e)}(i,Th);var e,r,n,o=Hy(i);function i(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e=e||{},r.returnContent=null,r.format=ke.GEOJSON,C.extend(Yy(r),e);var n=Yy(r);return e.format&&(n.format=e.format.toUpperCase()),n.url?(n.url=C.urlPathAppend(n.url,"queryResults"),r.CLASS_NAME="SuperMap.ChartQueryService",r):Wy(r)}return e=i,(r=[{key:"destroy",value:function(){Th.prototype.destroy.apply(this,arguments),this.returnContent=null,this.format=null}},{key:"processAsync",value:function(t,e){if(t instanceof Jy){var r,n=this;return n.returnContent=t.returnContent,r=t.getVariablesJson(),n.returnContent&&(n.url=C.urlAppend(n.url,"returnContent=true")),n.request({method:"POST",data:r,scope:n,success:e,failure:e})}}},{key:"transformResult",value:function(t,e){if((t=C.transformResult(t))&&t.recordsets&&this.format===ke.GEOJSON)for(var r=0,n=t.recordsets,o=n.length;r<o;r++)if(n[r].features){var i=new Or;n[r].features=i.toGeoJSON(n[r].features)}return{result:t,options:e}}},{key:"getQueryParameters",value:function(t){return new Fy({queryMode:t.queryMode,bounds:t.bounds,chartLayerNames:t.chartLayerNames,chartQueryFilterParameters:t.chartQueryFilterParameters,returnContent:t.returnContent})}}])&&zy(e.prototype,r),n&&zy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Zy(t){"@babel/helpers - typeof";return(Zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ky(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $y(){return($y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rd(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function td(t,e){return(td=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ed(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=rd(t);if(e){var o=rd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Zy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function rd(t){return(rd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&td(t,e)}(i,Th);var e,r,n,o=ed(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.ChartFeatureInfoSpecsService",r}return e=i,(r=[{key:"destroy",value:function(){$y(rd(i.prototype),"destroy",this).call(this),C.reset(this)}},{key:"processAsync",value:function(t){return this.isTempLayers||C.urlPathAppend(this.url,"chartFeatureInfoSpecs"),this.request({method:"GET",params:null,scope:this,success:t,failure:t})}}])&&Ky(e.prototype,r),n&&Ky(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function od(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var id=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"queryChart",value:function(t,e,r){var n=this,o=t,i=n._processFormat(r);return new Qy(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:i}).processAsync(o,e)}},{key:"getChartFeatureInfo",value:function(t){var e=this,r=C.urlPathAppend(e.url,"chartFeatureInfoSpecs");return new nd(r,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}).processAsync(t)}},{key:"_processFormat",value:function(t){return t||ke.GEOJSON}}])&&od(e.prototype,r),n&&od(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ad(t){"@babel/helpers - typeof";return(ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ud(t,e){return(ud=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ld(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=cd(t);if(e){var o=cd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ad(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function cd(t){return(cd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ud(t,e)}(i,Oh);var e,r,n,o=ld(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e))._chartService=new id(t,e),r}return e=i,(r=[{key:"queryChart",value:function(t,e,r){return this._chartService.queryChart(t,e,r)}},{key:"getChartFeatureInfo",value:function(t){return this._chartService.getChartFeatureInfo(t)}},{key:"_processFormat",value:function(t){return t||ke.GEOJSON}}])&&sd(e.prototype,r),n&&sd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function hd(t){"@babel/helpers - typeof";return(hd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function yd(t,e){return(yd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function dd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=vd(t);if(e){var o=vd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===hd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bd(t)}(this,r)}}function bd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vd(t){return(vd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var md=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yd(t,e)}(i,Th);var e,r,n,o=dd(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=e||{}).EVENT_TYPES=["broadcastSocketConnected","broadcastSocketClosed","broadcastSocketError","broadcastFailed","broadcastSucceeded","subscribeSocketConnected","subscribeSocketClosed","subscribeSocketError","messageSucceeded","setFilterParamSucceeded"],(r=o.call(this,t,e)).geometry=null,r.prjCoordSys=null,r.excludeField=null,C.extend(bd(r),e),r.CLASS_NAME="SuperMap.DataFlowService",r}return e=i,(r=[{key:"initBroadcast",value:function(){var t=this;return this.broadcastWebSocket=this._connect(C.urlPathAppend(t.url,"broadcast")),this.broadcastWebSocket.onopen=function(e){t.broadcastWebSocket.isOpen=!0,e.eventType="broadcastSocketConnected",t.events.triggerEvent("broadcastSocketConnected",e)},this.broadcastWebSocket.onclose=function(e){t.broadcastWebSocket&&(t.broadcastWebSocket.isOpen=!1),e.eventType="broadcastSocketClosed",t.events.triggerEvent("broadcastSocketClosed",e)},this.broadcastWebSocket.onerror=function(e){e.eventType="broadcastSocketError",t.events.triggerEvent("broadcastSocketError",e)},this}},{key:"broadcast",value:function(t){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen?(this.broadcastWebSocket.send(JSON.stringify(t)),this.events.triggerEvent("broadcastSucceeded")):this.events.triggerEvent("broadcastFailed")}},{key:"initSubscribe",value:function(){var t=this;return this.subscribeWebSocket=this._connect(C.urlPathAppend(t.url,"subscribe")),this.subscribeWebSocket.onopen=function(e){t.subscribeWebSocket.send(t._getFilterParams()),e.eventType="subscribeSocketConnected",t.events.triggerEvent("subscribeSocketConnected",e)},this.subscribeWebSocket.onclose=function(e){e.eventType="subscribeWebSocketClosed",t.events.triggerEvent("subscribeWebSocketClosed",e)},this.subscribeWebSocket.onerror=function(e){e.eventType="subscribeSocketError",t.events.triggerEvent("subscribeSocketError",e)},this.subscribeWebSocket.onmessage=function(e){t._onMessage(e)},this}},{key:"setExcludeField",value:function(t){return this.excludeField=t,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"setGeometry",value:function(t){return this.geometry=t,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"unSubscribe",value:function(){this.subscribeWebSocket&&(this.subscribeWebSocket.close(),this.subscribeWebSocket=null)}},{key:"unBroadcast",value:function(){this.broadcastWebSocket&&(this.broadcastWebSocket.close(),this.broadcastWebSocket=null)}},{key:"destroy",value:function(){Th.prototype.destroy.apply(this,arguments);this.geometry=null,this.prjCoordSys=null,this.excludeField=null,this.unBroadcast(),this.unSubscribe()}},{key:"_getFilterParams",value:function(){var t={filterParam:{prjCoordSys:this.prjCoordSys,excludeField:this.excludeField,geometry:this.geometry}};return C.toJSON(t)}},{key:"_onMessage",value:function(t){if(t.data&&t.data.indexOf("filterParam")>=0){var e=JSON.parse(t.data);return t.filterParam=e,t.eventType="setFilterParamSucceeded",void this.events.triggerEvent("setFilterParamSucceeded",t)}var r=JSON.parse(t.data);t.featureResult=r,t.eventType="messageSucceeded",this.events.triggerEvent("messageSucceeded",t)}},{key:"_connect",value:function(t){return t=_h.appendCredential(t),"WebSocket"in window?new WebSocket(t):"MozWebSocket"in window?new(0,window.MozWebSocket)(t):(console.log("no WebSocket"),null)}}])&&pd(e.prototype,r),n&&pd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function gd(t){"@babel/helpers - typeof";return(gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Od(t,e){return(Od=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Sd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Pd(t);if(e){var o=Pd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===gd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _d(t)}(this,r)}}function _d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pd(t){return(Pd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Od(t,e)}(i,Oh);var e,r,n,o=Sd(i);function i(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=e||{}).projection&&(e.prjCoordSys=e.projection),(r=o.call(this,t,e)).dataFlow=new md(t,e),r.dataFlow.events.on({broadcastSocketConnected:r._defaultEvent,broadcastSocketError:r._defaultEvent,broadcastFailed:r._defaultEvent,broadcastSucceeded:r._defaultEvent,subscribeSocketConnected:r._defaultEvent,subscribeSocketError:r._defaultEvent,messageSucceeded:r._defaultEvent,setFilterParamSucceeded:r._defaultEvent,scope:_d(r)});var n=_d(r);return n.on("subscribeSocketConnected",function(t){n.fire("subscribesucceeded",t)}),r}return e=i,(r=[{key:"initBroadcast",value:function(){return this.dataFlow.initBroadcast(),this}},{key:"broadcast",value:function(t){this.dataFlow.broadcast(t)}},{key:"initSubscribe",value:function(){return this.dataFlow.initSubscribe(),this}},{key:"setExcludeField",value:function(t){return this.dataFlow.setExcludeField(t),this.options.excludeField=t,this}},{key:"setGeometry",value:function(t){return this.dataFlow.setGeometry(t),this.options.geometry=t,this}},{key:"unSubscribe",value:function(){this.dataFlow.unSubscribe()}},{key:"unBroadcast",value:function(){this.dataFlow.unBroadcast()}},{key:"_defaultEvent",value:function(t){this.fire(t.eventType||t.type,t)}}])&&wd(e.prototype,r),n&&wd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function kd(t){"@babel/helpers - typeof";return(kd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ed(){return(Ed="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Md(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Td(t,e){return(Td=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Cd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Md(t);if(e){var o=Md(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Rd(this,r)}}function Rd(t,e){if(e&&("object"===kd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ad(t)}function Ad(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Md(t){return(Md=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ld=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Td(t,e)}(i,Th);var e,r,n,o=Cd(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e?(r.datasource=null,r.dataset=null,e&&C.extend(Ad(r),e),r.CLASS_NAME="SuperMap.DatasetService",r):Rd(r)}return e=i,(r=[{key:"destroy",value:function(){Ed(Md(i.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"getDatasetsService",value:function(t,e){var r=C.urlPathAppend(this.url,"datasources/name/".concat(t,"/datasets"));return this.processAsync(r,"GET",e)}},{key:"getDatasetService",value:function(t,e,r){var n=C.urlPathAppend(this.url,"datasources/name/".concat(t,"/datasets/name/").concat(e));return this.processAsync(n,"GET",r)}},{key:"setDatasetService",value:function(t,e){if(t){var r=C.urlPathAppend(this.url,"datasources/name/".concat(t.datasourceName,"/datasets/name/").concat(t.datasetName));return delete t.datasourceName,this.processAsync(r,"PUT",e,t)}}},{key:"deleteDatasetService",value:function(t,e,r){var n=C.urlPathAppend(this.url,"datasources/name/".concat(t,"/datasets/name/").concat(e));return this.processAsync(n,"DELETE",r)}},{key:"processAsync",value:function(t,e,r,n){var o={url:t,method:e,scope:this,success:r,failure:r};return n&&(o.data=C.toJSON(n)),this.request(o)}}])&&jd(e.prototype,r),n&&jd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Nd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Id=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasourceName=null,this.datasetName=null,this.datasetType=null,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.CreateDatasetParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.datasourceName=null,this.datasetName=null,this.datasetType=null}}])&&Nd(e.prototype,r),n&&Nd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Dd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Fd=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasourceName=null,this.datasetName=null,this.isFileCache=null,this.description=null,this.prjCoordSys=null,this.charset=null,this.palette=null,this.noValue=null,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.UpdateDatasetParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.datasourceName=null,t.datasetName=null,t.isFileCache=null,t.prjCoordSys=null,t.charset=null,t.palette=null,t.noValue=null}}])&&Dd(e.prototype,r),n&&Dd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Bd(t){"@babel/helpers - typeof";return(Bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ud(t,e){return(Ud=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Jd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Vd(t);if(e){var o=Vd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Bd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Vd(t){return(Vd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ud(t,e)}(i,Oh);var e,r,n,o=Jd(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e))._datasetService=new Ld(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}),r}return e=i,(r=[{key:"getDatasets",value:function(t,e){if(t)return this._datasetService.getDatasetsService(t,e)}},{key:"getDataset",value:function(t,e,r){if(t&&e)return this._datasetService.getDatasetService(t,e,r)}},{key:"setDataset",value:function(t,e){if(t instanceof Id||t instanceof Fd){if(t instanceof Id)var r={datasetType:t.datasetType,datasetName:t.datasetName,datasourceName:t.datasourceName};else t instanceof Fd&&(r={datasetName:t.datasetName,datasourceName:t.datasourceName,isFileCache:t.isFileCache,description:t.description,prjCoordSys:t.prjCoordSys,charset:t.charset});return this._datasetService.setDatasetService(r,e)}}},{key:"deleteDataset",value:function(t,e,r){return this._datasetService.deleteDatasetService(t,e,r)}}])&&Gd(e.prototype,r),n&&Gd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function qd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Hd=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.SetDatasourceParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null}}])&&qd(e.prototype,r),n&&qd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Wd(t){"@babel/helpers - typeof";return(Wd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Xd(){return(Xd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$d(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Qd(t,e){return(Qd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Zd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=$d(t);if(e){var o=$d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Wd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Kd(t)}(this,r)}}function Kd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $d(t){return($d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qd(t,e)}(i,Th);var e,r,n,o=Zd(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e&&C.extend(Kd(r),e),r.CLASS_NAME="SuperMap.DatasourceService",r}return e=i,(r=[{key:"destroy",value:function(){Xd($d(i.prototype),"destroy",this).call(this)}},{key:"getDatasourceService",value:function(t,e){var r=C.urlPathAppend(this.url,"datasources/name/".concat(t));return this.processAsync(r,"GET",e)}},{key:"getDatasourcesService",value:function(t){var e=C.urlPathAppend(this.url,"datasources");return this.processAsync(e,"GET",t)}},{key:"setDatasourceService",value:function(t,e){if(t){var r=C.urlPathAppend(this.url,"datasources/name/".concat(t.datasourceName));return this.processAsync(r,"PUT",e,t)}}},{key:"processAsync",value:function(t,e,r,n){var o={url:t,method:e,scope:this,success:r,failure:r};return n&&(o.data=C.toJSON(n)),this.request(o)}}])&&Yd(e.prototype,r),n&&Yd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function eb(t){"@babel/helpers - typeof";return(eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function nb(t,e){return(nb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ob(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ib(t);if(e){var o=ib(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===eb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ib(t){return(ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ab=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nb(t,e)}(i,Oh);var e,r,n,o=ob(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e))._datasourceService=new tb(r.url,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers}),r}return e=i,(r=[{key:"getDatasources",value:function(t){return this._datasourceService.getDatasourcesService(t)}},{key:"getDatasource",value:function(t,e){if(t)return this._datasourceService.getDatasourceService(t,e)}},{key:"setDatasource",value:function(t,e){if(t instanceof Hd){var r={description:t.description,coordUnit:t.coordUnit,distanceUnit:t.distanceUnit,datasourceName:t.datasourceName};return this._datasourceService.setDatasourceService(r,e)}}}])&&rb(e.prototype,r),n&&rb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function sb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ub=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=Qe.ADD,this.IDs=null,this.returnContent=!1,this.isUseBatch=!1,C.extend(this,e),this.CLASS_NAME="SuperMap.EditFeaturesParameters"}var e,r,n;return e=t,n=[{key:"toJsonParameters",value:function(t){var e,r,n;if(t.editType===Qe.DELETE){if(null===t.IDs)return;n={ids:t.IDs}}else if(n=[],t.features){r=t.features.length;for(var o=0;o<r;o++)(e=t.features[o]).geometry=yr.fromGeometry(e.geometry),n.push(e)}return C.toJSON(n)}}],(r=[{key:"destroy",value:function(){var t=this;t.dataSourceName=null,t.dataSetName=null,t.features=null,t.editType=null,t.IDs=null,t.returnContent=null}}])&&sb(e.prototype,r),n&&sb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function lb(t){"@babel/helpers - typeof";return(lb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fb(){return(fb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=db(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function hb(t,e){return(hb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=db(t);if(e){var o=db(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===lb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return yb(t)}(this,r)}}function yb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function db(t){return(db=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hb(t,e)}(i,Th);var e,r,n,o=pb(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).returnContent=!1,r.isUseBatch=!1,e&&C.extend(yb(r),e),r.url=C.urlPathAppend(r.url,"features"),r.CLASS_NAME="SuperMap.EditFeaturesService",r}return e=i,(r=[{key:"destroy",value:function(){fb(db(i.prototype),"destroy",this).call(this);this.returnContent=null,this.isUseBatch=null,this.fromIndex=null,this.toIndex=null}},{key:"processAsync",value:function(t,e){if(t instanceof ub){var r=this,n="POST",o="",i=t.editType,a=null;if(r.returnContent=t.returnContent,r.isUseBatch=t.isUseBatch,a=ub.toJsonParameters(t),i===Qe.DELETE){a=o=C.toJSON(t.IDs);var s=C.urlAppend(r.url,C.getParameterString({ids:o}));Jl.urlIsLong(s)?(r.url=C.urlAppend(r.url,C.getParameterString({_method:"DELETE"})),n="POST"):(r.url=s,n="DELETE")}else i===Qe.UPDATE?n="PUT":(r.isUseBatch&&(r.url=C.urlAppend(r.url,"isUseBatch=".concat(r.isUseBatch)),r.returnContent=!1),r.returnContent&&(r.url=C.urlAppend(r.url,"returnContent=true"),n="POST"));return r.request({method:n,data:a,scope:r,success:e,failure:e})}}},{key:"getMetaData",value:function(t,e){var r=t.featureId;return this.url=C.urlPathAppend(this.url,r+"/metadata"),this.request({method:"GET",data:null,scope:this,success:e,failure:e})}}])&&cb(e.prototype,r),n&&cb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function vb(t){"@babel/helpers - typeof";return(vb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function gb(){return(gb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_b(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function wb(t,e){return(wb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ob(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=_b(t);if(e){var o=_b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===vb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Sb(t)}(this,r)}}function Sb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _b(t){return(_b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wb(t,e)}(i,Th);var e,r,n,o=Ob(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e=e||{},r.returnContent=!0,r.fromIndex=0,r.toIndex=19,r.hasGeometry=!0,r.maxFeatures=null,r.format=ke.GEOJSON,C.extend(Sb(r),e),r.url=C.urlPathAppend(r.url,"featureResults"),r.CLASS_NAME="SuperMap.GetFeaturesServiceBase",r}return e=i,(r=[{key:"destroy",value:function(){gb(_b(i.prototype),"destroy",this).call(this);var t=this;t.returnContent=null,t.fromIndex=null,t.toIndex=null,t.maxFeatures=null,t.format=null,t.hasGeometry=null}},{key:"processAsync",value:function(t,e){if(t){var r,n=this,o=!0;return n.returnContent=t.returnContent,n.fromIndex=t.fromIndex,n.toIndex=t.toIndex,n.maxFeatures=t.maxFeatures,n.hasGeometry=t.hasGeometry,n.returnContent&&(o=!1),null!=n.fromIndex&&null!=n.toIndex&&!isNaN(n.fromIndex)&&!isNaN(n.toIndex)&&n.fromIndex>=0&&n.toIndex>=0&&!o&&(n.url=C.urlAppend(n.url,"fromIndex=".concat(n.fromIndex,"&toIndex=").concat(n.toIndex))),t.returnCountOnly&&(n.url=C.urlAppend(n.url,"&returnCountOnly="+t.returnContent)),r=n.getJsonParameters(t),n.request({method:"POST",data:r,scope:n,success:e,failure:e})}}},{key:"transformResult",value:function(t,e){if(t=C.transformResult(t),this.format===ke.GEOJSON&&t.features){var r=new Or;t.features=r.toGeoJSON(t.features)}return{result:t,options:e}}},{key:"dataFormat",value:function(){return[ke.GEOJSON,ke.ISERVER,ke.FGB]}}])&&mb(e.prototype,r),n&&mb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function xb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var kb=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.attributeFilter=null,this.name=null,this.joinItems=null,this.linkItems=null,this.ids=null,this.orderBy=null,this.groupBy=null,this.fields=null,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.FilterParameter"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;if(t.attributeFilter=null,t.name=null,t.joinItems){for(var e=0,r=t.joinItems,n=r.length;e<n;e++)r[e].destroy();t.joinItems=null}if(t.linkItems){for(var o=0,i=t.linkItems,a=i.length;o<a;o++)i[o].destroy();t.linkItems=null}t.ids=null,t.orderBy=null,t.groupBy=null,t.fields=null}}])&&xb(e.prototype,r),n&&xb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function jb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Eb=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetNames=null,this.targetEpsgCode=null,this.targetPrj=null,this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.returnCountOnly=!1,this.maxFeatures=null,this.hasGeometry=!0,this.aggregations=null,C.extend(this,e),this.CLASS_NAME="SuperMap.GetFeaturesParametersBase"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.datasetNames=null,t.returnContent=null,t.fromIndex=null,t.toIndex=null,t.hasGeometry=null,t.maxFeatures=null,t.targetEpsgCode=null,t.targetPrj=null,t.aggregation&&(t.aggregation=null)}}])&&jb(e.prototype,r),n&&jb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Tb(t){"@babel/helpers - typeof";return(Tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Rb(){return(Rb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nb(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ab(t,e){return(Ab=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Mb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Nb(t);if(e){var o=Nb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Tb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Lb(t)}(this,r)}}function Lb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Nb(t){return(Nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ib=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ab(t,e)}(i,Eb);var e,r,n,o=Mb(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).getFeatureMode="ID",e.IDs=null,e.fields=null,C.extend(Lb(e),t),e.CLASS_NAME="SuperMap.GetFeaturesByIDsParameters",e}return e=i,n=[{key:"toJsonParameters",value:function(t){var e,r;return e={datasetNames:t.datasetNames,getFeatureMode:"ID",ids:t.IDs},t.fields&&((r=new kb).name=t.datasetNames,r.fields=t.fields,e.queryParameter=r),t.targetEpsgCode&&(e.targetEpsgCode=t.targetEpsgCode),"boolean"==typeof t.hasGeometry&&(e.hasGeometry=t.hasGeometry),!t.targetEpsgCode&&t.targetPrj&&(e.targetPrj=t.targetPrj),t.aggregations&&(e.aggregations=t.aggregations),C.toJSON(e)}}],(r=[{key:"destroy",value:function(){Rb(Nb(i.prototype),"destroy",this).call(this);var t=this;if(t.IDs=null,t.getFeatureMode=null,t.fields){for(;t.fields.length>0;)t.fields.pop();t.fields=null}}}])&&Cb(e.prototype,r),n&&Cb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Db(t){"@babel/helpers - typeof";return(Db="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Bb(){return(Bb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jb(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Gb(t,e){return(Gb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ub(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Jb(t);if(e){var o=Jb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Db(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Jb(t){return(Jb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Vb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gb(t,e)}(i,Pb);var e,r,n,o=Ub(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.GetFeaturesByIDsService",r}return e=i,(r=[{key:"destroy",value:function(){Bb(Jb(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return Ib.toJsonParameters(t)}}])&&Fb(e.prototype,r),n&&Fb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function zb(t){"@babel/helpers - typeof";return(zb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Hb(){return(Hb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qb(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Wb(t,e){return(Wb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Yb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Qb(t);if(e){var o=Qb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===zb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Xb(t)}(this,r)}}function Xb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qb(t){return(Qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wb(t,e)}(i,Eb);var e,r,n,o=Yb(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).getFeatureMode="SQL",e.queryParameter=null,C.extend(Xb(e),t),e.CLASS_NAME="SuperMap.GetFeaturesBySQLParameters",e}return e=i,n=[{key:"toJsonParameters",value:function(t){var e={datasetNames:t.datasetNames,getFeatureMode:"SQL",queryParameter:t.queryParameter};return t.maxFeatures&&!isNaN(t.maxFeatures)&&(e.maxFeatures=t.maxFeatures),"boolean"==typeof t.hasGeometry&&(e.hasGeometry=t.hasGeometry),t.aggregations&&(e.aggregations=t.aggregations),t.targetEpsgCode&&(e.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(e.targetPrj=t.targetPrj),t.aggregations&&(e.aggregations=t.aggregations),C.toJSON(e)}}],(r=[{key:"destroy",value:function(){Hb(Qb(i.prototype),"destroy",this).call(this);this.getFeatureMode=null,this.queryParameter&&(this.queryParameter.destroy(),this.queryParameter=null)}}])&&qb(e.prototype,r),n&&qb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Kb(t){"@babel/helpers - typeof";return(Kb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function tv(){return(tv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nv(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ev(t,e){return(ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=nv(t);if(e){var o=nv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Kb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function nv(t){return(nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ov=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ev(t,e)}(i,Pb);var e,r,n,o=rv(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.GetFeaturesBySQLService",r}return e=i,(r=[{key:"destroy",value:function(){tv(nv(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return Zb.toJsonParameters(t)}}])&&$b(e.prototype,r),n&&$b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function iv(t){"@babel/helpers - typeof";return(iv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function av(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function sv(){return(sv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fv(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function uv(t,e){return(uv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=fv(t);if(e){var o=fv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===iv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return cv(t)}(this,r)}}function cv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fv(t){return(fv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uv(t,e)}(i,Eb);var e,r,n,o=lv(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).getFeatureMode=i.getFeatureMode.BOUNDS,e.bounds=null,e.fields=null,e.attributeFilter=null,e.spatialQueryMode=Ce.CONTAIN,C.extend(cv(e),t),e.CLASS_NAME="SuperMap.GetFeaturesByBoundsParameters",e}return e=i,n=[{key:"toJsonParameters",value:function(t){var e,r,n;return r={leftBottom:{x:t.bounds.left,y:t.bounds.bottom},rightTop:{x:t.bounds.right,y:t.bounds.top}},n={datasetNames:t.datasetNames,getFeatureMode:i.getFeatureMode.BOUNDS,bounds:r,spatialQueryMode:t.spatialQueryMode},t.fields&&((e=new kb).name=t.datasetNames,e.fields=t.fields,n.queryParameter=e),t.attributeFilter&&(n.attributeFilter=t.attributeFilter,n.getFeatureMode=i.getFeatureMode.BOUNDS_ATTRIBUTEFILTER),t.maxFeatures&&!isNaN(t.maxFeatures)&&(n.maxFeatures=t.maxFeatures),"boolean"==typeof t.hasGeometry&&(n.hasGeometry=t.hasGeometry),t.targetEpsgCode&&(n.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(n.targetPrj=t.targetPrj),t.aggregations&&(n.aggregations=t.aggregations),C.toJSON(n)}}],(r=[{key:"destroy",value:function(){sv(fv(i.prototype),"destroy",this).call(this);var t=this;if(t.bounds&&(t.bounds.destroy(),t.bounds=null),t.fields){for(;t.fields.length>0;)t.fields.pop();t.fields=null}t.attributeFilter=null,t.spatialQueryMode=null,t.getFeatureMode=null}}])&&av(e.prototype,r),n&&av(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function pv(t){"@babel/helpers - typeof";return(pv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function dv(){return(dv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mv(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function bv(t,e){return(bv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=mv(t);if(e){var o=mv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===pv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function mv(t){return(mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}hv.getFeatureMode={BOUNDS:"BOUNDS",BOUNDS_ATTRIBUTEFILTER:"BOUNDS_ATTRIBUTEFILTER"};var gv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bv(t,e)}(i,Pb);var e,r,n,o=vv(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.GetFeaturesByBoundsService",r}return e=i,(r=[{key:"destroy",value:function(){dv(mv(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return hv.toJsonParameters(t)}}])&&yv(e.prototype,r),n&&yv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function wv(t){"@babel/helpers - typeof";return(wv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ov(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Sv(){return(Sv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kv(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function _v(t,e){return(_v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Pv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=kv(t);if(e){var o=kv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===wv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return xv(t)}(this,r)}}function xv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kv(t){return(kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_v(t,e)}(i,Eb);var e,r,n,o=Pv(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).bufferDistance=null,e.attributeFilter=null,e.geometry=null,e.fields=null,C.extend(xv(e),t),e.CLASS_NAME="SuperMap.GetFeaturesByBufferParameters",e}return e=i,n=[{key:"toJsonParameters",value:function(t){var e,r,n;return n=yr.fromGeometry(t.geometry),r={datasetNames:t.datasetNames,getFeatureMode:"BUFFER",bufferDistance:t.bufferDistance,geometry:n},t.fields&&((e=new kb).name=t.datasetNames,e.fields=t.fields,r.queryParameter=e),t.attributeFilter&&(r.attributeFilter=t.attributeFilter,r.getFeatureMode="BUFFER_ATTRIBUTEFILTER"),t.maxFeatures&&!isNaN(t.maxFeatures)&&(r.maxFeatures=t.maxFeatures),"boolean"==typeof t.hasGeometry&&(r.hasGeometry=t.hasGeometry),t.targetEpsgCode&&(r.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(r.targetPrj=t.targetPrj),C.toJSON(r)}}],(r=[{key:"destroy",value:function(){Sv(kv(i.prototype),"destroy",this).call(this);var t=this;if(t.bufferDistance=null,t.attributeFilter=null,t.fields){for(;t.fields.length>0;)t.fields.pop();t.fields=null}t.geometry&&(t.geometry.destroy(),t.geometry=null)}}])&&Ov(e.prototype,r),n&&Ov(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ev(t){"@babel/helpers - typeof";return(Ev="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Cv(){return(Cv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Mv(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Rv(t,e){return(Rv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Av(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Mv(t);if(e){var o=Mv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ev(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Mv(t){return(Mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Lv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rv(t,e)}(i,Pb);var e,r,n,o=Av(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.GetFeaturesByBufferService",r}return e=i,(r=[{key:"destroy",value:function(){Cv(Mv(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof jv)return jv.toJsonParameters(t)}}])&&Tv(e.prototype,r),n&&Tv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Nv(t){"@babel/helpers - typeof";return(Nv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Iv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Dv(){return(Dv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Uv(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Fv(t,e){return(Fv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Bv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Uv(t);if(e){var o=Uv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Nv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Gv(t)}(this,r)}}function Gv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Uv(t){return(Uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Jv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fv(t,e)}(i,Eb);var e,r,n,o=Bv(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).getFeatureMode="SPATIAL",e.geometry=null,e.fields=null,e.attributeFilter=null,e.spatialQueryMode=Ce.CONTAIN,C.extend(Gv(e),t),e.CLASS_NAME="SuperMap.GetFeaturesByGeometryParameters",e}return e=i,n=[{key:"toJsonParameters",value:function(t){var e,r,n;return r=yr.fromGeometry(t.geometry),n={datasetNames:t.datasetNames,getFeatureMode:"SPATIAL",geometry:r,spatialQueryMode:t.spatialQueryMode},t.fields&&((e=new kb).name=t.datasetNames,e.fields=t.fields,n.queryParameter=e),t.attributeFilter&&(n.attributeFilter=t.attributeFilter,n.getFeatureMode="SPATIAL_ATTRIBUTEFILTER"),t.maxFeatures&&!isNaN(t.maxFeatures)&&(n.maxFeatures=t.maxFeatures),"boolean"==typeof t.hasGeometry&&(n.hasGeometry=t.hasGeometry),t.targetEpsgCode&&(n.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(n.targetPrj=t.targetPrj),t.aggregations&&(n.aggregations=t.aggregations),C.toJSON(n)}}],(r=[{key:"destroy",value:function(){Dv(Uv(i.prototype),"destroy",this).call(this);var t=this;if(t.geometry&&(t.geometry.destroy(),t.geometry=null),t.fields){for(;t.fields.length>0;)t.fields.pop();t.fields=null}t.attributeFilter=null,t.spatialQueryMode=null,t.getFeatureMode=null}}])&&Iv(e.prototype,r),n&&Iv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Vv(t){"@babel/helpers - typeof";return(Vv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function qv(){return(qv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yv(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Hv(t,e){return(Hv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Wv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Yv(t);if(e){var o=Yv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Vv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Yv(t){return(Yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Xv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hv(t,e)}(i,Pb);var e,r,n,o=Wv(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.GetFeaturesByGeometryService",r}return e=i,(r=[{key:"destroy",value:function(){qv(Yv(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return Jv.toJsonParameters(t)}}])&&zv(e.prototype,r),n&&zv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Qv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Zv=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"getFeaturesByIDs",value:function(t,e,r){var n=this;return new Vb(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(t,e)}},{key:"getFeaturesByBounds",value:function(t,e,r){var n=this;return new gv(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"getFeaturesByBuffer",value:function(t,e,r){var n=this;return new Lv(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"getFeaturesBySQL",value:function(t,e,r){var n=this;return new ov(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"getFeaturesByGeometry",value:function(t,e,r){var n=this;return new Xv(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"editFeatures",value:function(t,e){if(t&&t.dataSourceName&&t.dataSetName){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=C.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new bb(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}},{key:"getMetadata",value:function(t,e){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=C.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new bb(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).getMetaData(t,e)}},{key:"_processFormat",value:function(t){return t||ke.GEOJSON}}])&&Qv(e.prototype,r),n&&Qv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Kv(t){"@babel/helpers - typeof";return(Kv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function tm(t,e){return(tm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function em(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=rm(t);if(e){var o=rm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Kv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function rm(t){return(rm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tm(t,e)}(a,Oh);var e,r,n,i=em(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t,e))._featureService=new Zv(t,e),r}return e=a,(r=[{key:"getFeaturesByIDs",value:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesByIDs(t,e,r)}},{key:"getFeaturesByBounds",value:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesByBounds(t,e,r)}},{key:"getFeaturesByBuffer",value:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesByBuffer(t,e,r)}},{key:"getFeaturesBySQL",value:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesBySQL(t,e,r)}},{key:"getFeaturesByGeometry",value:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesByGeometry(t,e,r)}},{key:"editFeatures",value:function(t,e){if(t&&t.dataSourceName&&t.dataSetName){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=C.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new bb(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(r._processParams(t),e)}}},{key:"getMetadata",value:function(t,e){return this._featureService.getMetadata(t,e)}},{key:"_processParams",value:function(t){if(!t)return{};var e=this;if(t.returnContent=null==t.returnContent||t.returnContent,t.fromIndex=t.fromIndex?t.fromIndex:0,t.toIndex=0===t.toIndex?0:t.toIndex?t.toIndex:-1,t.bounds&&(t.bounds=Pr.toSuperMapBounds(t.bounds)),t.editType&&(t.editType=t.editType.toLowerCase()),t.geometry&&(t.geometry instanceof o().LngLatBounds?(t.geometry=Pr.toSuperMapPolygon(t.geometry),t.geometry.SRID=4326):t.geometry instanceof o().Point?t.geometry=new V(t.geometry.x,t.geometry.y):t.geometry instanceof o().LngLat?(t.geometry=new V(t.geometry.lng,t.geometry.lat),t.geometry.SRID=4326):t.geometry instanceof m||(t.geometry=Pr.toSuperMapGeometry(t.geometry))),t.features){var r=[];Pr.isArray(t.features)?t.features.map(function(t){return r.push(e._createServerFeature(t)),r}):r.push(e._createServerFeature(t.features)),t.features=r}return t}},{key:"_createServerFeature",value:function(t){var e={},r=[],n=[],o=t.properties;for(var i in o)r.push(i),n.push(o[i]);return e.fieldNames=r,e.fieldValues=n,t.id&&(e.id=t.id),e.geometry=Pr.toSuperMapGeometry(t),e}}])&&$v(e.prototype,r),n&&$v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function om(t){"@babel/helpers - typeof";return(om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function im(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function am(){return(am="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cm(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function sm(t,e){return(sm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function um(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=cm(t);if(e){var o=cm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===om(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return lm(t)}(this,r)}}function lm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cm(t){return(cm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sm(t,e)}(i,Th);var e,r,n,o=um(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).datasource=null,r.dataset=null,e&&C.extend(lm(r),e),r.CLASS_NAME="SuperMap.GetFieldsService",r}return e=i,(r=[{key:"destroy",value:function(){am(cm(i.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"processAsync",value:function(t){var e=this;return e.url=C.urlPathAppend(e.url,"datasources/".concat(e.datasource,"/datasets/").concat(e.dataset,"/fields")),e.request({method:"GET",data:null,scope:e,success:t,failure:t})}}])&&im(e.prototype,r),n&&im(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function hm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var pm=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasource=null,this.dataset=null,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.FieldParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.datasource=null,this.dataset=null}}])&&hm(e.prototype,r),n&&hm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ym(t){"@babel/helpers - typeof";return(ym="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bm(t,e){return(bm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=gm(t);if(e){var o=gm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ym(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return mm(t)}(this,r)}}function mm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gm(t){return(gm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bm(t,e)}(i,pm);var e,r,n,o=vm(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).fieldName=null,e.statisticMode=null,t&&C.extend(mm(e),t),e.CLASS_NAME="SuperMap.FieldStatisticsParameters",e}return e=i,(r=[{key:"destroy",value:function(){this.fieldName=null,this.statisticMode=null}}])&&dm(e.prototype,r),n&&dm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Om(t){"@babel/helpers - typeof";return(Om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _m(){return(_m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jm(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Pm(t,e){return(Pm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function xm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=jm(t);if(e){var o=jm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Om(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return km(t)}(this,r)}}function km(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jm(t){return(jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Em=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pm(t,e)}(i,Th);var e,r,n,o=xm(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).datasource=null,r.dataset=null,r.field=null,r.statisticMode=null,e&&C.extend(km(r),e),r.CLASS_NAME="SuperMap.FieldStatisticService",r}return e=i,(r=[{key:"destroy",value:function(){_m(jm(i.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null,this.field=null,this.statisticMode=null}},{key:"processAsync",value:function(t){var e=this,r="datasources/"+e.datasource+"/datasets/"+e.dataset+"/fields/"+e.field+"/"+e.statisticMode;return e.url=C.urlPathAppend(e.url,r),e.request({method:"GET",data:null,scope:e,success:t,failure:t})}}])&&Sm(e.prototype,r),n&&Sm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Tm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Cm=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"getFields",value:function(t,e){var r=this;return new fm(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,datasource:t.datasource,dataset:t.dataset}).processAsync(e)}},{key:"getFieldStatisticsInfo",value:function(t,e){if(t instanceof wm){var r=this,n=t.fieldName,o=t.statisticMode;o&&!Array.isArray(o)&&(o=[o]),r.currentStatisticResult={fieldName:n},r._statisticsCallback=e,o.forEach(function(e){r.currentStatisticResult[e]=null,r._fieldStatisticRequest(t.datasource,t.dataset,n,e)})}}},{key:"_fieldStatisticRequest",value:function(t,e,r,n){var o=this;new Em(o.url,{datasource:t,dataset:e,field:r,statisticMode:n,crossOrigin:o.options.crossOrigin,headers:o.options.headers}).processAsync(o._processCompleted.bind(o))}},{key:"_processCompleted",value:function(t){var e=this;if(t.error)e._statisticsCallback(t);else{var r=!0,n=t.result;for(var o in this.currentStatisticResult&&null==e.currentStatisticResult[n.mode]&&(this.currentStatisticResult[n.mode]=n.result),e.currentStatisticResult)if(null==e.currentStatisticResult[o]){r=!1;break}r&&e._statisticsCallback({result:e.currentStatisticResult})}}}])&&Tm(e.prototype,r),n&&Tm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Rm(t){"@babel/helpers - typeof";return(Rm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Am(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Mm(t,e){return(Mm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Lm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Nm(t);if(e){var o=Nm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Rm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Nm(t){return(Nm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Im=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mm(t,e)}(i,Oh);var e,r,n,o=Lm(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e))._fieldService=new Cm(t,e),r}return e=i,(r=[{key:"getFields",value:function(t,e){return this._fieldService.getFields(t,e)}},{key:"getFieldStatisticsInfo",value:function(t,e){return this._fieldService.getFieldStatisticsInfo(t,e)}}])&&Am(e.prototype,r),n&&Am(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Dm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Fm=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null,C.extend(this,e),this.CLASS_NAME="SuperMap.GetGridCellInfosParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null}}])&&Dm(e.prototype,r),n&&Dm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Bm(t){"@babel/helpers - typeof";return(Bm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Um(){return(Um="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qm(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Jm(t,e){return(Jm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Vm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=qm(t);if(e){var o=qm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Bm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zm(t)}(this,r)}}function zm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qm(t){return(qm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Hm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jm(t,e)}(i,Th);var e,r,n,o=Vm(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).datasetName=null,r.dataSourceName=null,r.datasetType=null,r.X=null,r.Y=null,e&&C.extend(zm(r),e),r.CLASS_NAME="SuperMap.GetGridCellInfosService",r}return e=i,(r=[{key:"destroy",value:function(){Um(qm(i.prototype),"destroy",this).call(this);var t=this;t.X=null,t.Y=null,t.datasetName=null,t.dataSourceName=null,t.datasetType=null}},{key:"processAsync",value:function(t,e){if(t instanceof Fm){C.extend(this,t);var r=this;return r.url=C.urlPathAppend(r.url,"datasources/".concat(r.dataSourceName,"/datasets/").concat(r.datasetName)),r.request({method:"GET",data:null,scope:r,success:function(t){var n=t.result;e&&r.getDatasetInfoCompleted(n,e)},failure:e}).then(function(t){var e=t.result;return r.getDatasetInfoCompleted(e)})}}},{key:"getDatasetInfoCompleted",value:function(t,e){return t=C.transformResult(t),this.datasetType=t.datasetInfo.type,this.queryGridInfos(e)}},{key:"queryGridInfos",value:function(t){var e=this,r=C.urlPathAppend(e.url,"GRID"==e.datasetType?"gridValue":"imageValue");return null!=e.X&&null!=e.Y&&(r=C.urlAppend(r,"x=".concat(e.X,"&y=").concat(e.Y))),e.request({url:r,method:"GET",data:null,scope:e,success:t,failure:t})}}])&&Gm(e.prototype,r),n&&Gm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Wm(t){"@babel/helpers - typeof";return(Wm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ym(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Xm(t,e){return(Xm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Qm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Zm(t);if(e){var o=Zm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Wm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Zm(t){return(Zm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Km=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xm(t,e)}(i,Oh);var e,r,n,o=Qm(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e))._gridCellQueryService=new Hm(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}),r}return e=i,(r=[{key:"getGridCellInfos",value:function(t,e){return t?this._gridCellQueryService.processAsync(t,e):null}}])&&Ym(e.prototype,r),n&&Ym(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function $m(t){"@babel/helpers - typeof";return($m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function eg(t,e){return(eg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ng(t);if(e){var o=ng(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===$m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ng(t){return(ng=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var og=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eg(t,e)}(i,Th);var e,r,n,o=rg(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(r=o.call(this,t,e)).CLASS_NAME="SuperMap.GeoprocessingService",r.headers={},r.crossOrigin=!0,r}return e=i,(r=[{key:"getTools",value:function(t){return this._processAsync({url:"".concat(this.url,"/list"),callback:t})}},{key:"getTool",value:function(t,e){return this._processAsync({url:"".concat(this.url,"/").concat(t),callback:e})}},{key:"execute",value:function(t,e,r,n){var o={parameter:e=e||null,environment:r=r||null};return this._processAsync({url:"".concat(this.url,"/").concat(t,"/execute"),executeParamter:o,callback:n})}},{key:"submitJob",value:function(t,e,r,n){e=e||null,r=r||null;var o=JSON.stringify({parameter:e,environments:r});return this._processAsync({url:"".concat(this.url,"/").concat(t,"/jobs"),method:"POST",callback:n,params:o})}},{key:"waitForJobCompletion",value:function(t,e,r,n){var o=this,i=setInterval(function(){o._processAsync({url:"".concat(o.url,"/").concat(e,"/jobs/").concat(t),callback:function(t){var e=t.result.state.runState;t.options.statusCallback&&t.options.statusCallback(e),-1!==["FINISHED","FAILED","CANCELED"].indexOf(e)&&(clearInterval(i),n(t))}})},r.interval)}},{key:"getJobInfo",value:function(t,e,r){return this._processAsync({url:"".concat(this.url,"/").concat(t,"/jobs/").concat(e),callback:r})}},{key:"cancelJob",value:function(t,e,r){return this._processAsync({url:"".concat(this.url,"/").concat(t,"/jobs/").concat(e,"/cancel"),callback:r})}},{key:"getJobs",value:function(t,e){var r="".concat(this.url,"/jobs");t&&"string"==typeof t?r="".concat(this.url,"/").concat(t,"/jobs"):e=t,this._processAsync({url:r,callback:e})}},{key:"getResults",value:function(t,e,r,n){var o="".concat(this.url,"/").concat(t,"/jobs/").concat(e,"/results");return r&&("string"==typeof r?o="".concat(o,"/").concat(r):n=r),this._processAsync({url:o,callback:n})}},{key:"_processAsync",value:function(t){var e=t.url,r=t.method,n=t.callback,o=t.paramter;return this.request({url:e,method:r||"GET",params:o,headers:{"Content-type":"application/json"},scope:this,success:n,failure:n})}}])&&tg(e.prototype,r),n&&tg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ig(t){"@babel/helpers - typeof";return(ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ag(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function sg(t,e){return(sg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ug(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=lg(t);if(e){var o=lg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ig(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function lg(t){return(lg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sg(t,e)}(i,Oh);var e,r,n,o=ug(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).headers={},r.crossOrigin=!0,r.withCredentials=!0,r.proxy=!0,r._geoprocessingJobsService=new og(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}),r}return e=i,(r=[{key:"getTools",value:function(t){return this._geoprocessingJobsService.getTools(t)}},{key:"getTool",value:function(t,e){this._geoprocessingJobsService.getTool(t,e)}},{key:"execute",value:function(t,e,r,n){return this._geoprocessingJobsService.execute(t,e,r,n)}},{key:"submitJob",value:function(t,e,r,n){return this._geoprocessingJobsService.submitJob(t,e,r,n)}},{key:"waitForJobCompletion",value:function(t,e,r,n){return this._geoprocessingJobsService.waitForJobCompletion(t,e,r,n)}},{key:"getJobInfo",value:function(t,e,r){return this._geoprocessingJobsService.getJobInfo(t,e,r)}},{key:"cancelJob",value:function(t,e,r){return this._geoprocessingJobsService.cancelJob(t,e,r)}},{key:"getJobs",value:function(t,e){return this._geoprocessingJobsService.getJobs(t,e)}},{key:"getResults",value:function(t,e,r,n){return this._geoprocessingJobsService.getResults(t,e,r,n)}}])&&ag(e.prototype,r),n&&ag(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function fg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var hg=function(){function t(e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)return this;this.memoryData=null,this.type=e,r&&C.extend(this,r),this.CLASS_NAME="SuperMap.Theme"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.memoryData&&(this.memoryData.destroy(),this.memoryData=null),this.type=null}},{key:"toServerJSONObject",value:function(){}}])&&fg(e.prototype,r),n&&fg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var yg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.align=Ge.BASELINECENTER,this.backColor=new le(255,255,255),this.foreColor=new le(0,0,0),this.backOpaque=!1,this.sizeFixed=!0,this.fontHeight=6,this.fontWidth=0,this.fontWeight=400,this.fontName="Times New Roman",this.bold=!1,this.italic=!1,this.italicAngle=0,this.shadow=!1,this.strikeout=!1,this.outline=!1,this.opaqueRate=0,this.underline=!1,this.rotation=0,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ServerTextStyle"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){var r=new t(e);return C.copy(r,e),r.backColor=le.fromJson(e.backColor),r.foreColor=le.fromJson(e.foreColor),r}}],(r=[{key:"destroy",value:function(){var t=this;t.align=null,t.backColor&&(t.backColor.destroy(),t.backColor=null),t.foreColor&&(t.foreColor.destroy(),t.foreColor=null),t.backOpaque=null,t.sizeFixed=null,t.fontHeight=null,t.fontWidth=null,t.fontWeight=null,t.fontName=null,t.bold=null,t.italic=null,t.italicAngle=null,t.shadow=null,t.strikeout=null,t.outline=null,t.opaqueRate=null,t.underline=null,t.rotation=null}}])&&pg(e.prototype,r),n&&pg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var bg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.end=0,this.start=0,this.visible=!0,this.style=new yg,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return C.copy(r,e),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.end=null,t.start=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}}])&&dg(e.prototype,r),n&&dg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function vg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var mg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.style=new fe,this.unique=null,this.visible=!0,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ThemeUniqueItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){var r=new t;return C.copy(r,e),r.style=fe.fromJson(e.style),r}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.unique=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=C.copyAttributes(t,this)).style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&vg(e.prototype,r),n&&vg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function gg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var wg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.offsetFixed=!1,this.offsetX="0.0",this.offsetY="0.0",e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ThemeOffset"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return C.copy(r,e),r}}}],(r=[{key:"destroy",value:function(){this.offsetFixed=null,this.offsetX=null,this.offsetY=null}}])&&gg(e.prototype,r),n&&gg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Og(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Sg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.defaultStyle=null,this.separator=null,this.separatorEnabled=!1,this.splitIndexes=null,this.styles=new yg,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.LabelMixedTextStyle"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t,n=e.styles;if(C.copy(r,e),r.defaultStyle=new yg(e.defaultStyle),n){r.styles=[];for(var o=0,i=n.length;o<i;o++)r.styles.push(new yg(n[o]))}return r}}}],(r=[{key:"destroy",value:function(){var t=this;if(t.defaultStyle&&(t.defaultStyle.destroy(),t.defaultStyle=null),t.separator=null,t.separatorEnabled=null,t.splitIndexes&&(t.splitIndexes=null),t.styles){for(var e=0,r=t.styles,n=r.length;e<n;e++)r[e].destroy();t.styles=null}}}])&&Og(e.prototype,r),n&&Og(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _g(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Pg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxTextHeight=0,this.maxTextWidth=0,this.minTextHeight=0,this.minTextWidth=0,this.uniformStyle=new yg,this.uniformMixedStyle=null,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelText"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return C.copy(r,e),r.uniformStyle=yg.fromObj(e.uniformStyle),r.uniformMixedStyle=Sg.fromObj(e.uniformMixedStyle),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.maxTextHeight=null,t.maxTextWidth=null,t.minTextHeight=null,t.minTextWidth=null,t.uniformStyle&&(t.uniformStyle.destroy(),t.uniformStyle=null),t.uniformMixedStyle&&(t.uniformMixedStyle.destroy(),t.uniformMixedStyle=null)}}])&&_g(e.prototype,r),n&&_g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function xg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var kg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAlongLine=!0,this.alongLineDirection=Ue.LB_TO_RT,this.angleFixed=!1,this.repeatedLabelAvoided=!1,this.repeatIntervalFixed=!1,this.labelRepeatInterval=0,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelAlongLine"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return C.copy(r,e),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.isAlongLine=null,t.alongLineDirection=null,t.angleFixed=null,t.repeatedLabelAvoided=null,t.repeatIntervalFixed=null,t.labelRepeatInterval=null}}])&&xg(e.prototype,r),n&&xg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function jg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Eg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.labelBackShape=Je.NONE,this.backStyle=new fe,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelBackground"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return r.labelBackShape=e.labelBackShape,r.backStyle=fe.fromJson(e.backStyle),r}}}],(r=[{key:"destroy",value:function(){this.labelBackShape=null,this.backStyle&&(this.backStyle.destroy(),this.backStyle=null)}}])&&jg(e.prototype,r),n&&jg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Tg(t){"@babel/helpers - typeof";return(Tg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Rg(){return(Rg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ng(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ag(t,e){return(Ag=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Mg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ng(t);if(e){var o=Ng(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Tg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Lg(t)}(this,r)}}function Lg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ng(t){return(Ng=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ig=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ag(t,e)}(i,hg);var e,r,n,o=Mg(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,"LABEL",t)).alongLine=new kg,e.background=new Eg,e.items=null,e.uniqueItems=null,e.labelExpression=null,e.labelOverLengthMode=Ve.NONE,e.matrixCells=null,e.maxLabelLength=256,e.numericPrecision=0,e.offset=new wg,e.overlapAvoided=!0,e.rangeExpression=null,e.uniqueExpression=null,e.smallGeometryLabeled=!1,e.text=new Pg,e.textSpace=0,t&&C.extend(Lg(e),t),e.CLASS_NAME="SuperMap.ThemeLabel",e}return e=i,n=[{key:"fromObj",value:function(t){if(t){var e=new i,r=t.items,n=t.uniqueItems,o=t.matrixCells;if(t.matrixCells=null,C.copy(e,t),e.alongLine=kg.fromObj(t),e.background=Eg.fromObj(t),r){e.items=[];for(var a=0,s=r.length;a<s;a++)e.items.push(bg.fromObj(r[a]))}if(n){e.uniqueItems=[];for(var u=0,l=n.length;u<l;u++)e.uniqueItems.push(mg.fromObj(n[u]))}if(o){e.matrixCells=[];for(var c=0,f=o.length;c<f;c++);}return e.offset=wg.fromObj(t),e.text=Pg.fromObj(t),e}}}],(r=[{key:"destroy",value:function(){Rg(Ng(i.prototype),"destroy",this).call(this);var t=this;if(t.alongLine=null,t.background&&(t.background.destroy(),t.background=null),t.items){for(var e=0,r=t.items,n=r.length;e<n;e++)r[e].destroy();t.items=null}if(t.uniqueItems){for(var o=0,a=t.uniqueItems,s=a.length;o<s;o++)a[o].destory();t.uniqueItems=null}t.labelExpression=null,t.labelOverLengthMode=null,t.matrixCells=null,t.maxLabelLength=null,t.numericPrecision=null,t.overlapAvoided=null,t.rangeExpression=null,t.uniqueExpression=null,t.offset&&(t.offset.destroy(),t.offset=null),t.overlapAvoided=null,t.smallGeometryLabeled=null,t.text&&(t.text.destroy(),t.text=null),t.textSpace=null}},{key:"toJSON",value:function(){return C.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var t={};return t.type=this.type,t.memoryData=this.memoryData,this.alongLine&&(t.alongLine=this.alongLine.isAlongLine,t.alongLineDirection=this.alongLine.alongLineDirection,t.angleFixed=this.alongLine.angleFixed,t.isLabelRepeated=this.alongLine.isLabelRepeated,t.labelRepeatInterval=this.alongLine.labelRepeatInterval,t.repeatedLabelAvoided=this.alongLine.repeatedLabelAvoided,t.repeatIntervalFixed=this.alongLine.repeatIntervalFixed),this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),this.text&&(t.maxTextHeight=this.text.maxTextHeight,t.maxTextWidth=this.text.maxTextWidth,t.minTextHeight=this.text.minTextHeight,t.minTextWidth=this.text.minTextWidth,t.uniformStyle=this.text.uniformStyle,t.uniformMixedStyle=this.text.uniformMixedStyle),this.background&&(t.labelBackShape=this.background.labelBackShape,t.backStyle=this.background.backStyle),t.labelOverLengthMode=this.labelOverLengthMode,t.maxLabelLength=this.maxLabelLength,t.smallGeometryLabeled=this.smallGeometryLabeled,t.rangeExpression=this.rangeExpression,t.uniqueExpression=this.uniqueExpression,t.numericPrecision=this.numericPrecision,t.items=this.items,t.uniqueItems=this.uniqueItems,t.labelExpression=this.labelExpression,t.overlapAvoided=this.overlapAvoided,t.matrixCells=this.matrixCells,t.textSpace=this.textSpace,t}}])&&Cg(e.prototype,r),n&&Cg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Dg(t){"@babel/helpers - typeof";return(Dg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Bg(){return(Bg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vg(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Gg(t,e){return(Gg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ug(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Vg(t);if(e){var o=Vg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Dg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Jg(t)}(this,r)}}function Jg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vg(t){return(Vg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gg(t,e)}(i,hg);var e,r,n,o=Ug(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,"UNIQUE",t)).defaultStyle=new fe,e.items=null,e.uniqueExpression=null,e.colorGradientType=Be.YELLOW_RED,t&&C.extend(Jg(e),t),e.CLASS_NAME="SuperMap.ThemeUnique",e}return e=i,n=[{key:"fromObj",value:function(t){var e=new i,r=t.items,n=r?r.length:0;C.extend(e,t),e.items=[],e.defaultStyle=fe.fromJson(t.defaultStyle);for(var o=0;o<n;o++)e.items.push(mg.fromObj(r[o]));return e}}],(r=[{key:"destroy",value:function(){Bg(Vg(i.prototype),"destroy",this).call(this);var t=this;if(t.uniqueExpression=null,t.colorGradientType=null,t.items){if(t.items.length>0)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.defaultStyle&&(t.defaultStyle.destroy(),t.defaultStyle=null)}},{key:"toServerJSONObject",value:function(){var t={};if((t=C.copyAttributes(t,this)).defaultStyle&&t.defaultStyle.toServerJSONObject&&(t.defaultStyle=t.defaultStyle.toServerJSONObject()),t.items){for(var e=[],r=t.items.length,n=0;n<r;n++)e.push(t.items[n].toServerJSONObject());t.items=e}return t}}])&&Fg(e.prototype,r),n&&Fg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function qg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Hg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.axesColor=new le(0,0,0),this.axesDisplayed=!1,this.axesGridDisplayed=!1,this.axesTextDisplayed=!1,this.axesTextStyle=new yg,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphAxes"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return C.copy(r,e),r.axesColor=le.fromJson(e.axesColor),r.axesTextStyle=yg.fromObj(e.axesTextStyle),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.axesColor&&(t.axesColor.destroy(),t.axesColor=null),t.axesDisplayed=null,t.axesGridDisplayed=null,t.axesTextDisplayed=null,t.axesTextStyle&&(t.axesTextStyle.destroy(),t.axesTextStyle=null)}}])&&qg(e.prototype,r),n&&qg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Wg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Yg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxGraphSize=0,this.minGraphSize=0,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphSize"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){var r=new t;return C.copy(r,e),r}}],(r=[{key:"destroy",value:function(){this.maxGraphSize=null,this.minGraphSize=null}}])&&Wg(e.prototype,r),n&&Wg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Xg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Qg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.graphTextDisplayed=!1,this.graphTextFormat=Le.CAPTION,this.graphTextStyle=new yg,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphText"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){var r=new t;return C.copy(r,e),r.graphTextStyle=yg.fromObj(e.graphTextStyle),r}}],(r=[{key:"destroy",value:function(){var t=this;t.graphTextDisplayed=null,t.graphTextFormat=null,t.graphTextStyle&&(t.graphTextStyle.destroy(),t.graphTextStyle=null)}}])&&Xg(e.prototype,r),n&&Xg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Zg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Kg=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=new fe,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return C.copy(r,e),r.uniformStyle=fe.fromJson(e.uniformStyle),r}}}],(r=[{key:"destroy",value:function(){this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=null}}])&&Zg(e.prototype,r),n&&Zg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $g(t){"@babel/helpers - typeof";return($g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ew(){return(ew="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iw(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function rw(t,e){return(rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=iw(t);if(e){var o=iw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===$g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ow(t)}(this,r)}}function ow(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iw(t){return(iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var aw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rw(t,e)}(i,hg);var e,r,n,o=nw(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,"GRAPH",t)).barWidth=0,e.graduatedMode=De.CONSTANT,e.graphAxes=new Hg,e.graphSize=new Yg,e.graphSizeFixed=!1,e.graphText=new Qg,e.graphType=Ne.AREA,e.graphAxesTextDisplayMode=Ie.NONE,e.items=null,e.memoryKeys=null,e.negativeDisplayed=!1,e.offset=new wg,e.overlapAvoided=!0,e.roseAngle=0,e.startAngle=0,t&&C.extend(ow(e),t),e.CLASS_NAME="SuperMap.ThemeGraph",e}return e=i,n=[{key:"fromObj",value:function(t){var e=new i,r=t.items,n=r?r.length:0;C.copy(e,t),e.items=[],e.graphAxes=Hg.fromObj(t),e.graphSize=Yg.fromObj(t),e.graphText=Qg.fromObj(t),e.offset=wg.fromObj(t);for(var o=0;o<n;o++)e.items.push(Kg.fromObj(r[o]));return e}}],(r=[{key:"destroy",value:function(){ew(iw(i.prototype),"destroy",this).call(this);var t=this;if(t.barWidth=null,t.graduatedMode=null,t.graphAxes&&(t.graphAxes.destroy(),t.graphAxes=null),t.graphSize&&(t.graphSize.destroy(),t.graphSize=null),t.graphSizeFixed=null,t.graphText&&(t.graphText.destroy(),t.graphText=null),t.graphType=null,t.items){for(var e=0,r=t.items,n=r.length;e<n;e++)r[e].destroy();t.items=null}t.memoryKeys=null,t.negativeDisplayed=null,t.offset&&(t.offset.destroy(),t.offset=null),t.overlapAvoided=null,t.roseAngle=null,t.startAngle=null,t.graphAxesTextDisplayMode=null}},{key:"toJSON",value:function(){return C.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var t={};return t.type=this.type,this.graphText&&(t.graphTextDisplayed=this.graphText.graphTextDisplayed,t.graphTextFormat=this.graphText.graphTextFormat,t.graphTextStyle=this.graphText.graphTextStyle),this.graphAxes&&(t.axesColor=this.graphAxes.axesColor,t.axesDisplayed=this.graphAxes.axesDisplayed,t.axesGridDisplayed=this.graphAxes.axesGridDisplayed,t.axesTextDisplayed=this.graphAxes.axesTextDisplayed,t.axesTextStyle=this.graphAxes.axesTextStyle),this.graphSize&&(t.maxGraphSize=this.graphSize.maxGraphSize,t.minGraphSize=this.graphSize.minGraphSize),this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),t.barWidth=this.barWidth,t.graduatedMode=this.graduatedMode,t.graphSizeFixed=this.graphSizeFixed,t.graphType=this.graphType,t.graphAxesTextDisplayMode=this.graphAxesTextDisplayMode,t.items=this.items,t.memoryKeys=this.memoryKeys,t.negativeDisplayed=this.negativeDisplayed,t.overlapAvoided=this.overlapAvoided,t.roseAngle=this.roseAngle,t.startAngle=this.startAngle,t}}])&&tw(e.prototype,r),n&&tw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function sw(t){"@babel/helpers - typeof";return(sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function lw(t,e){return(lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=hw(t);if(e){var o=hw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===sw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return fw(t)}(this,r)}}function fw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hw(t){return(hw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lw(t,e)}(i,hg);var e,r,n,o=cw(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,"DOTDENSITY",t)).dotExpression=null,e.style=new fe,e.value=null,t&&C.extend(fw(e),t),e.CLASS_NAME="SuperMap.ThemeDotDensity",e}return e=i,n=[{key:"fromObj",value:function(t){if(t){var e=new i;return C.copy(e,t),e.style=fe.fromJson(t.style),e}}}],(r=[{key:"destroy",value:function(){var t=this;t.dotExpression=null,t.value=null,t.style&&(t.style.destroy(),t.style=null)}},{key:"toServerJSONObject",value:function(){var t={};return(t=C.copyAttributes(t,this)).style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&uw(e.prototype,r),n&&uw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function yw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var dw=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.negativeDisplayed=!1,this.negativeStyle=new fe,this.positiveStyle=new fe,this.zeroDisplayed=!1,this.zeroStyle=new fe,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraduatedSymbolStyle"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return C.copy(r,e),r.negativeStyle=fe.fromJson(e.negativeStyle),r.positiveStyle=fe.fromJson(e.positiveStyle),r.zeroStyle=fe.fromJson(e.zeroStyle),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.negativeDisplayed=null,t.negativeStyle=null,t.positiveStyle=null,t.zeroDisplayed=null,t.zeroStyle=null}}])&&yw(e.prototype,r),n&&yw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function bw(t){"@babel/helpers - typeof";return(bw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mw(){return(mw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sw(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function gw(t,e){return(gw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ww(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Sw(t);if(e){var o=Sw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===bw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ow(t)}(this,r)}}function Ow(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sw(t){return(Sw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gw(t,e)}(i,hg);var e,r,n,o=ww(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,"GRADUATEDSYMBOL",t)).baseValue=0,e.expression=null,e.graduatedMode=De.CONSTAN,e.offset=new wg,e.style=new dw,t&&C.extend(Ow(e),t),e.CLASS_NAME="SuperMap.ThemeGraduatedSymbol",e}return e=i,n=[{key:"fromObj",value:function(t){if(t){var e=new i;return C.copy(e,t),e.offset=wg.fromObj(t),e.style=dw.fromObj(t),e}}}],(r=[{key:"destroy",value:function(){mw(Sw(i.prototype),"destroy",this).call(this);var t=this;t.expression=null,t.graduatedMode=De.CONSTANT,t.offset&&(t.offset.destroy(),t.offset=null),t.style&&(t.style.destroy(),t.style=null)}},{key:"toJSON",value:function(){return C.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var t={};return t.type=this.type,t.memoryData=this.memoryData,t.baseValue=this.baseValue,t.expression=this.expression,t.graduatedMode=this.graduatedMode,this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),this.style&&(t.negativeStyle=this.style.negativeStyle,t.negativeDisplayed=this.style.negativeDisplayed,t.positiveStyle=this.style.positiveStyle,t.zeroDisplayed=this.style.zeroDisplayed,t.zeroStyle=this.style.zeroStyle),t}}])&&vw(e.prototype,r),n&&vw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Pw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var xw=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.end=0,this.start=0,this.style=new fe,this.visible=!0,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ThemeRangeItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return C.copy(r,e),r.style=fe.fromJson(e.style),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.end=null,t.start=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=C.copyAttributes(t,this)).style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&Pw(e.prototype,r),n&&Pw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function kw(t){"@babel/helpers - typeof";return(kw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ew(){return(Ew="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Aw(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Tw(t,e){return(Tw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Cw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Aw(t);if(e){var o=Aw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===kw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Rw(t)}(this,r)}}function Rw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Aw(t){return(Aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Mw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tw(t,e)}(i,hg);var e,r,n,o=Cw(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,"RANGE",t)).precision="1.0E-12",e.items=null,e.rangeExpression=null,e.rangeMode=Fe.EQUALINTERVAL,e.rangeParameter=0,e.colorGradientType=Be.YELLOW_RED,t&&C.extend(Rw(e),t),e.CLASS_NAME="SuperMap.ThemeRange",e}return e=i,n=[{key:"fromObj",value:function(t){if(t){var e=new i;C.copy(e,t);var r=t.items,n=r?r.length:0;e.items=[];for(var o=0;o<n;o++)e.items.push(xw.fromObj(r[o]));return e}}}],(r=[{key:"destroy",value:function(){Ew(Aw(i.prototype),"destroy",this).call(this);var t=this;if(t.items){if(t.items.length>0)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.rangeExpression=null,t.rangeMode=null,t.rangeParameter=null,t.colorGradientType=null}}])&&jw(e.prototype,r),n&&jw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Lw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Nw=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.bounds=null,this.caption=null,this.description=null,this.name=null,this.queryable=null,this.subLayers=null,this.type=null,this.visible=null,C.extend(this,e),this.CLASS_NAME="SuperMap.UGCLayer"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){C.reset(this)}},{key:"fromJson",value:function(t){t=t||{},C.extend(this,t);var e=this.bounds;e&&(this.bounds=new I(e.leftBottom.x,e.leftBottom.y,e.rightTop.x,e.rightTop.y))}},{key:"toServerJSONObject",value:function(){var t={};return(t=C.copyAttributes(t,this)).bounds&&t.bounds.toServerJSONObject&&(t.bounds=t.bounds.toServerJSONObject()),t}}])&&Lw(e.prototype,r),n&&Lw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Iw(t){"@babel/helpers - typeof";return(Iw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Fw(){return(Fw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Uw(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Bw(t,e){return(Bw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Gw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Uw(t);if(e){var o=Uw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Iw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Uw(t){return(Uw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Jw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bw(t,e)}(i,Nw);var e,r,n,o=Gw(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).completeLineSymbolDisplayed=null,e.maxScale=null,e.minScale=null,e.minVisibleGeometrySize=null,e.opaqueRate=null,e.symbolScalable=null,e.symbolScale=null,e.overlapDisplayed=null,e.overlapDisplayedOptions=null,e.CLASS_NAME="SuperMap.UGCMapLayer",e}return e=i,(r=[{key:"destroy",value:function(){Fw(Uw(i.prototype),"destroy",this).call(this),C.reset(this)}},{key:"fromJson",value:function(t){Fw(Uw(i.prototype),"fromJson",this).call(this,t)}},{key:"toServerJSONObject",value:function(){return Fw(Uw(i.prototype),"toServerJSONObject",this).call(this)}}])&&Dw(e.prototype,r),n&&Dw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Vw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var zw=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.foreignTableName=null,this.joinFilter=null,this.joinType=null,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.JoinItem"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.foreignTableName=null,this.joinFilter=null,this.joinType=null}},{key:"toServerJSONObject",value:function(){var t={};return t=C.copyAttributes(t,this)}}])&&Vw(e.prototype,r),n&&Vw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Hw=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.bounds=null,this.dataSourceName=null,this.description=null,this.encodeType=null,this.isReadOnly=null,this.name=null,this.prjCoordSys=null,this.tableName=null,this.type=null,C.extend(this,e);var r=this.bounds;r&&(this.bounds=new I(r.leftBottom.x,r.leftBottom.y,r.rightTop.x,r.rightTop.y)),this.CLASS_NAME="SuperMap.DatasetInfo"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){C.reset(this)}},{key:"toServerJSONObject",value:function(){var t={};return(t=C.copyAttributes(t,this)).bounds&&t.bounds.toServerJSONObject&&(t.bounds=t.bounds.toServerJSONObject()),t}}])&&qw(e.prototype,r),n&&qw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ww(t){"@babel/helpers - typeof";return(Ww="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Xw(){return(Xw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Kw(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Qw(t,e){return(Qw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Zw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Kw(t);if(e){var o=Kw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ww(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Kw(t){return(Kw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qw(t,e)}(i,Jw);var e,r,n,o=Zw(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).datasetInfo=null,e.displayFilter=null,e.joinItems=null,e.representationField=null,e.ugcLayerType=null,e.CLASS_NAME="SuperMap.UGCSubLayer",e}return e=i,(r=[{key:"fromJson",value:function(t){if(Xw(Kw(i.prototype),"fromJson",this).call(this,t),this.datasetInfo&&(this.datasetInfo=new Hw(this.datasetInfo)),this.joinItems&&this.joinItems.length){for(var e=[],r=0;r<this.joinItems.length;r++)e[r]=new zw(this.joinItems[r]);this.joinItems=e}}},{key:"destroy",value:function(){Xw(Kw(i.prototype),"destroy",this).call(this),C.reset(this)}},{key:"toServerJSONObject",value:function(){var t=Xw(Kw(i.prototype),"toServerJSONObject",this).call(this);if(t.joinItems){for(var e=[],r=0;r<t.joinItems.length;r++)t.joinItems[r].toServerJSONObject&&(e[r]=t.joinItems[r].toServerJSONObject());t.joinItems=e}return t.datasetInfo&&t.datasetInfo.toServerJSONObject&&(t.datasetInfo=t.datasetInfo.toServerJSONObject()),t}}])&&Yw(e.prototype,r),n&&Yw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function tO(t){"@babel/helpers - typeof";return(tO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function rO(){return(rO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iO(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function nO(t,e){return(nO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function oO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=iO(t);if(e){var o=iO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===tO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function iO(t){return(iO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var aO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nO(t,e)}(i,$w);var e,r,n,o=oO(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).theme=null,e.themeElementPosition=null,e.CLASS_NAME="SuperMap.ServerTheme",e}return e=i,(r=[{key:"destroy",value:function(){rO(iO(i.prototype),"destroy",this).call(this),C.reset(this)}},{key:"fromJson",value:function(t){rO(iO(i.prototype),"fromJson",this).call(this,t);var e=this.theme;switch(e&&e.type){case"LABEL":this.theme=Ig.fromObj(e);break;case"UNIQUE":this.theme=zg.fromObj(e);break;case"GRAPH":this.theme=aw.fromObj(e);break;case"DOTDENSITY":this.theme=pw.fromObj(e);break;case"GRADUATEDSYMBOL":this.theme=_w.fromObj(e);break;case"RANGE":this.theme=Mw.fromObj(e)}this.themeElementPosition&&(this.themeElementPosition=new L(this.themeElementPosition.x,this.themeElementPosition.y))}},{key:"toServerJSONObject",value:function(){var t=rO(iO(i.prototype),"toServerJSONObject",this).call(this);return t.themeElementPosition&&t.themeElementPosition.toServerJSONObject&&(t.themeElementPosition=t.themeElementPosition.toServerJSONObject()),t.theme&&t.theme.toServerJSONObject&&(t.theme=t.theme.toServerJSONObject()),t}}])&&eO(e.prototype,r),n&&eO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function sO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var uO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.elevation=null,this.color=null,C.extend(this,e);var r=this.color;r&&(this.color=new le(r.red,r.green,r.blue)),this.CLASS_NAME="SuperMap.ColorDictionary"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){C.reset(this)}},{key:"toServerJSONObject",value:function(){var t={};return t=C.copyAttributes(t,this)}}])&&sO(e.prototype,r),n&&sO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function lO(t){"@babel/helpers - typeof";return(lO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fO(){return(fO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yO(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function hO(t,e){return(hO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=yO(t);if(e){var o=yO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===lO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function yO(t){return(yO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hO(t,e)}(i,$w);var e,r,n,o=pO(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).colorDictionarys=null,e.brightness=null,e.colorGradientType=null,e.colors=null,e.contrast=null,e.dashStyle=null,e.gridType=null,e.horizontalSpacing=null,e.sizeFixed=null,e.solidStyle=null,e.specialColor=null,e.specialValue=null,e.specialValueTransparent=null,e.verticalSpacing=null,e.CLASS_NAME="SuperMap.Grid",e}return e=i,(r=[{key:"destroy",value:function(){fO(yO(i.prototype),"destroy",this).call(this),C.reset(this)}},{key:"fromJson",value:function(t){if(fO(yO(i.prototype),"fromJson",this).call(this,t),this.specialColor&&(this.specialColor=new le(this.specialColor.red,this.specialColor.green,this.specialColor.blue)),this.colors){var e,r=[];for(var n in this.colors)e=this.colors[n],r.push(new le(e.red,e.green,e.blue));this.colors=r}if(this.dashStyle&&(this.dashStyle=new fe(this.dashStyle)),this.solidStyle&&(this.solidStyle=new fe(this.solidStyle)),this.colorDictionary){var o,a=[];for(var s in this.colorDictionary)o=this.colorDictionary[s],a.push(new uO({elevation:s,color:o}));this.colorDictionarys=a}delete this.colorDictionary}},{key:"toServerJSONObject",value:function(){var t=fO(yO(i.prototype),"toServerJSONObject",this).call(this);return t.dashStyle&&t.dashStyle.toServerJSONObject&&(t.dashStyle=t.dashStyle.toServerJSONObject()),t.solidStyle&&t.solidStyle.toServerJSONObject&&(t.solidStyle=t.solidStyle.toServerJSONObject()),t}}])&&cO(e.prototype,r),n&&cO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function bO(t){"@babel/helpers - typeof";return(bO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mO(){return(mO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=OO(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function gO(t,e){return(gO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=OO(t);if(e){var o=OO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===bO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function OO(t){return(OO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var SO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gO(t,e)}(i,$w);var e,r,n,o=wO(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).brightness=null,e.colorSpaceType=null,e.contrast=null,e.displayBandIndexes=null,e.transparent=null,e.transparentColor=null,e.transparentColorTolerance=null,e.CLASS_NAME="SuperMap.Image",e}return e=i,(r=[{key:"destroy",value:function(){mO(OO(i.prototype),"destroy",this).call(this),C.reset(this)}},{key:"fromJson",value:function(t){mO(OO(i.prototype),"fromJson",this).call(this,t),this.transparentColor&&(this.transparentColor=new le(this.transparentColor.red,this.transparentColor.green,this.transparentColor.blue))}},{key:"toServerJSONObject",value:function(){return mO(OO(i.prototype),"toServerJSONObject",this).call(this)}}])&&vO(e.prototype,r),n&&vO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function _O(t){"@babel/helpers - typeof";return(_O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xO(){return(xO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=EO(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function kO(t,e){return(kO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function jO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=EO(t);if(e){var o=EO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===_O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function EO(t){return(EO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var TO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kO(t,e)}(i,$w);var e,r,n,o=jO(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).style=null,e.CLASS_NAME="SuperMap.Vector",e}return e=i,(r=[{key:"destroy",value:function(){xO(EO(i.prototype),"destroy",this).call(this),C.reset(this)}},{key:"fromJson",value:function(t){xO(EO(i.prototype),"fromJson",this).call(this,t);var e=this.style;e&&(this.style=new fe(e))}},{key:"toServerJSONObject",value:function(){var t=xO(EO(i.prototype),"toServerJSONObject",this).call(this);return t.style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&PO(e.prototype,r),n&&PO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function CO(t){"@babel/helpers - typeof";return(CO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function AO(){return(AO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=IO(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function MO(t,e){return(MO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function LO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=IO(t);if(e){var o=IO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===CO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return NO(t)}(this,r)}}function NO(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IO(t){return(IO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var DO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MO(t,e)}(i,Th);var e,r,n,o=LO(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).isTempLayers=!1,e&&C.extend(NO(r),e),r.CLASS_NAME="SuperMap.GetLayersInfoService",r}return e=i,(r=[{key:"destroy",value:function(){AO(IO(i.prototype),"destroy",this).call(this),C.reset(this)}},{key:"processAsync",value:function(t){var e=this;return e.isTempLayers||(e.url=C.urlPathAppend(e.url,"layers")),e.request({method:"GET",params:null,scope:e,success:t,failure:t})}},{key:"transformResult",value:function(t,e){var r,n;return n=(r=!!(t=C.transformResult(t))&&t.length>0?t[0].subLayers.layers:null)?r.length:0,this.handleLayers(n,r),{result:t[0],options:e}}},{key:"handleLayers",value:function(t,e){var r;if(t)for(var n=0;n<t;n++){if(e[n].subLayers&&e[n].subLayers.layers&&e[n].subLayers.layers.length>0)this.handleLayers(e[n].subLayers.layers.length,e[n].subLayers.layers);else switch(e[n].ugcLayerType){case"THEME":(r=new aO).fromJson(e[n]),e[n]=r;break;case"GRID":(r=new dO).fromJson(e[n]),e[n]=r;break;case"IMAGE":(r=new SO).fromJson(e[n]),e[n]=r;break;case"VECTOR":(r=new TO).fromJson(e[n]),e[n]=r}}}}])&&RO(e.prototype,r),n&&RO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function FO(t){"@babel/helpers - typeof";return(FO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function GO(){return(GO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zO(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function UO(t,e){return(UO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function JO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=zO(t);if(e){var o=zO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===FO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return VO(t)}(this,r)}}function VO(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zO(t){return(zO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UO(t,e)}(i,Th);var e,r,n,o=JO(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e&&C.extend(VO(r),e),r.CLASS_NAME="SuperMap.GetLayersLegendInfoService",r}return e=i,(r=[{key:"destroy",value:function(){GO(zO(i.prototype),"destroy",this).call(this),C.reset(this)}},{key:"processAsync",value:function(t,e){return this.url=C.urlPathAppend(this.url,"/legend"),this.request({method:"GET",params:t,scope:this,success:e,failure:e})}}])&&BO(e.prototype,r),n&&BO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function HO(t){"@babel/helpers - typeof";return(HO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function WO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function YO(){return(YO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=KO(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function XO(t,e){return(XO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function QO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=KO(t);if(e){var o=KO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===HO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ZO(t)}(this,r)}}function ZO(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KO(t){return(KO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XO(t,e)}(i,Th);var e,r,n,o=QO(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e&&C.extend(ZO(r),e),r.CLASS_NAME="SuperMap.SetLayerInfoService",r}return e=i,(r=[{key:"destroy",value:function(){YO(KO(i.prototype),"destroy",this).call(this),C.reset(this)}},{key:"processAsync",value:function(t,e){if(t){var r=C.toJSON(t);return this.request({method:"PUT",data:r,scope:this,success:e,failure:e})}}}])&&WO(e.prototype,r),n&&WO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function tS(t){"@babel/helpers - typeof";return(tS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function rS(){return(rS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=aS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function nS(t,e){return(nS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function oS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=aS(t);if(e){var o=aS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===tS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return iS(t)}(this,r)}}function iS(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aS(t){return(aS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var sS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nS(t,e)}(i,Th);var e,r,n,o=oS(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).resourceID=null,r.isTempLayers=!1,e&&C.extend(iS(r),e),r.CLASS_NAME="SuperMap.SetLayersInfoService",r}return e=i,(r=[{key:"destroy",value:function(){rS(aS(i.prototype),"destroy",this).call(this),C.reset(this)}},{key:"processAsync",value:function(t,e){if(t){var r,n=[],o=this,i="";o.isTempLayers?(o.url=C.urlPathAppend(o.url,"tempLayersSet/"+o.resourceID),i="PUT"):(o.url=C.urlPathAppend(o.url,"tempLayersSet"),i="POST"),t.subLayers||(t.subLayers={layers:[]}),t.subLayers.layers||(t.subLayers.layers=[]);var a=t.subLayers.layers,s=a.length;for(var u in a){if("GRID"===a[u].ugcLayerType){var l={},c=a[u].colorDictionarys;for(var f in c){l[c[f].elevation]=c[f].color}}a[u].colorDictionary=l,delete a[u].colorDictionarys}for(var h=0;h<s;h++)a[h].toJsonObject?n.push(a[h].toJsonObject()):n.push(a[h]);(r=C.extend(r,t)).subLayers={layers:n},r.object=null;var p=C.toJSON([r]);return o.request({method:i,data:p,scope:o,success:e,failure:e})}}}])&&eS(e.prototype,r),n&&eS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function uS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var lS=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layerStatusList=[],this.holdTime=15,this.resourceID=null,e&&C.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.layerStatusList=null,this.holdTime=null,this.resourceID=null}},{key:"toJSON",value:function(){var t="{";t+='"layers":[';for(var e=[],r=0,n=this.layerStatusList.length;r<n;r++)e.push(this.layerStatusList[r].toJSON());return t+=e,t+="]",t+="}"}}])&&uS(e.prototype,r),n&&uS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function cS(t){"@babel/helpers - typeof";return(cS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function hS(){return(hS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function pS(t,e){return(pS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function yS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=bS(t);if(e){var o=bS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===cS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return dS(t)}(this,r)}}function dS(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bS(t){return(bS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pS(t,e)}(i,Th);var e,r,n,o=yS(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).lastparams=null,r.mapUrl=t,e&&C.extend(dS(r),e),r.CLASS_NAME="SuperMap.SetLayerStatusService",r}return e=i,(r=[{key:"destroy",value:function(){hS(bS(i.prototype),"destroy",this).call(this),C.reset(this)}},{key:"processAsync",value:function(t,e){if(t instanceof lS){var r=this;if(r.url=r.mapUrl,null==t.resourceID)return r.url=C.urlPathAppend(r.url,"tempLayersSet"),r.lastparams=t,r.request({method:"POST",scope:r,success:r.createTempLayerComplete.bind(r,e),failure:e});r.url=C.urlPathAppend(r.url,"tempLayersSet/"+t.resourceID),r.url=C.urlAppend(r.url,"elementRemain=true&reference="+t.resourceID+"&holdTime="+t.holdTime.toString());var n="[{";return n+='"type":"UGC",',null!=t.layerStatusList&&t.layerStatusList.length>0&&(n+='"subLayers":'+t.toJSON()),n+=',"visible":true,',n+='"name":"'+this.getMapName(this.mapUrl)+'"',n+="}]",r.request({method:"PUT",data:n,scope:r,success:e,failure:e})}}},{key:"createTempLayerComplete",value:function(t,e){return e.result=C.transformResult(e.result),e.result.succeed&&(this.lastparams.resourceID=e.result.newResourceID),this.processAsync(this.lastparams,t)}},{key:"getMapName",value:function(t){var e=t;"/"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1));var r=e.lastIndexOf("/");return e.substring(r+1,e.length)}},{key:"transformResult",value:function(t,e){return null!=(t=C.transformResult(t))&&null!=this.lastparams&&null!=this.lastparams.resourceID&&(t.newResourceID=this.lastparams.resourceID),{result:t,options:e}}}])&&fS(e.prototype,r),n&&fS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function mS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var gS=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"getLayersInfo",value:function(t){var e=this;return new DO(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}).processAsync(t)}},{key:"getLayersLegendInfo",value:function(t,e){var r=this;return new qO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"setLayerInfo",value:function(t,e){if(t){var r=this,n=t.resourceID,o=t.tempLayerName,i=t.layerInfo;if(n&&o){var a=C.urlPathAppend(r.url,"tempLayersSet/"+n+"/"+o);return new $O(a,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(i,e)}}}},{key:"setLayersInfo",value:function(t,e){if(t){var r=this,n=t.resourceID,o=!!t.isTempLayers&&t.isTempLayers,i=t.layersInfo;if((!o||n)&&i)return new sS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,resourceID:n,isTempLayers:o}).processAsync(i,e)}}},{key:"setLayerStatus",value:function(t,e){if(t){var r=this;return new vS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}}])&&mS(e.prototype,r),n&&mS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function wS(t){"@babel/helpers - typeof";return(wS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function SS(t,e){return(SS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=PS(t);if(e){var o=PS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===wS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function PS(t){return(PS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SS(t,e)}(i,Oh);var e,r,n,o=_S(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e))._layerInfoService=new gS(t,e),r}return e=i,(r=[{key:"getLayersInfo",value:function(t){return this._layerInfoService.getLayersInfo(t)}},{key:"getLayersLegendInfo",value:function(t,e){return this._layerInfoService.getLayersLegendInfo(t,e)}},{key:"setLayerInfo",value:function(t,e){return this._layerInfoService.setLayerInfo(t,e)}},{key:"setLayersInfo",value:function(t,e){return this._layerInfoService.setLayersInfo(t,e)}},{key:"setLayerStatus",value:function(t,e){return this._layerInfoService.setLayerStatus(t,e)}}])&&OS(e.prototype,r),n&&OS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function kS(t){"@babel/helpers - typeof";return(kS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ES(){return(ES="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=AS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function TS(t,e){return(TS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function CS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=AS(t);if(e){var o=AS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===kS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return RS(t)}(this,r)}}function RS(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AS(t){return(AS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var MS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TS(t,e)}(i,Th);var e,r,n,o=CS(i);function i(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).projection=null,r.CLASS_NAME="SuperMap.MapService",e&&C.extend(RS(r),e);var n=RS(r);if(n.projection){var a=n.projection.split(":");a instanceof Array&&(2===a.length&&(n.url=C.urlAppend(n.url,"prjCoordSys=".concat(encodeURIComponent('{"epsgCode":"'.concat(a[1],'"}'))))),1===a.length&&(n.url=C.urlAppend(n.url,"prjCoordSys=".concat(encodeURIComponent('{"epsgCode":"'.concat(a[0],'"}'))))))}return r}return e=i,(r=[{key:"destroy",value:function(){ES(AS(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){return this.request({method:"GET",scope:this,success:t,failure:t})}},{key:"transformResult",value:function(t,e){var r=(t=C.transformResult(t)).code>=200&&t.code<300||0==t.code||304===t.code,n=t.code&&r;return!t.code||n?{result:t,options:e}:{error:t,options:e}}}])&&jS(e.prototype,r),n&&jS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function LS(t){"@babel/helpers - typeof";return(LS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function IS(){return(IS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=BS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function DS(t,e){return(DS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function FS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=BS(t);if(e){var o=BS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===LS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function BS(t){return(BS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var GS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DS(t,e)}(i,Th);var e,r,n,o=FS(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.TilesetsService",r}return e=i,(r=[{key:"destroy",value:function(){IS(BS(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(this.url){return this.url=C.urlPathAppend(this.url,"tilesets"),this.request({method:"GET",scope:this,success:t,failure:t})}}}])&&NS(e.prototype,r),n&&NS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function US(t){"@babel/helpers - typeof";return(US="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function VS(t,e){return(VS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function zS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=qS(t);if(e){var o=qS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===US(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function qS(t){return(qS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var HS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VS(t,e)}(i,Oh);var e,r,n,o=zS(i);function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,e)}return e=i,(r=[{key:"getMapInfo",value:function(t){var e=this;return new MS(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers,projection:e.options.projection}).processAsync(t)}},{key:"getWKT",value:function(t){var e=this;return new MS("".concat(e.url,"/prjCoordSys.wkt"),{proxy:e.options.proxy,withCredentials:e.options.withCredentials,withoutFormatSuffix:!0,crossOrigin:e.options.crossOrigin,headers:e.options.headers,projection:e.options.projection}).processAsync(t)}},{key:"getTilesets",value:function(t){var e=this;return new GS(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}).processAsync(t)}}])&&JS(e.prototype,r),n&&JS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function WS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var YS=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.geometry=e,this.unit=Ae.METER,this.prjCoordSys=null,this.distanceMode=null,r&&C.extend(this,r),this.CLASS_NAME="SuperMap.MeasureParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.geometry=null,this.unit=null,this.prjCoordSys=null}}])&&WS(e.prototype,r),n&&WS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function XS(t){"@babel/helpers - typeof";return(XS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ZS(){return(ZS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=e_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function KS(t,e){return(KS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function $S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=e_(t);if(e){var o=e_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===XS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return t_(t)}(this,r)}}function t_(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e_(t){return(e_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var r_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KS(t,e)}(i,Th);var e,r,n,o=$S(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).measureMode=Re.DISTANCE,e&&C.extend(t_(r),e),r.CLASS_NAME="SuperMap.MeasureService",r}return e=i,(r=[{key:"destroy",value:function(){ZS(e_(i.prototype),"destroy",this).call(this);this.measureMode=null}},{key:"processAsync",value:function(t,e){if(t instanceof YS){var r,n,o=this,i=t.geometry;if(i){o.url=C.urlPathAppend(o.url,o.measureMode===Re.AREA?"area":"distance");var a,s,u,l=yr.fromGeometry(i);if(l)return r=l.parts[0],n=l.points.splice(0,r),t.prjCoordSys?("object"===XS(t.prjCoordSys)?a='{"epsgCode"'+(s=t.prjCoordSys.projCode).substring(s.indexOf(":"),s.length)+"}":"string"==typeof t.prjCoordSys&&(a='{"epsgCode"'+t.prjCoordSys.substring(t.prjCoordSys.indexOf(":"),t.prjCoordSys.length)+"}"),u={point2Ds:C.toJSON(n),unit:t.unit,prjCoordSys:a,distanceMode:t.distanceMode||"Geodesic"}):u={point2Ds:C.toJSON(n),unit:t.unit,distanceMode:t.distanceMode||"Geodesic"},o.request({method:"GET",params:u,scope:o,success:e,failure:e})}}}}])&&QS(e.prototype,r),n&&QS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function n_(t){"@babel/helpers - typeof";return(n_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i_(t,e){return(i_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=s_(t);if(e){var o=s_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===n_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function s_(t){return(s_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i_(t,e)}(i,Oh);var e,r,n,o=a_(i);function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,e)}return e=i,(r=[{key:"measureDistance",value:function(t,e){return this.measure(t,"DISTANCE",e)}},{key:"measureArea",value:function(t,e){return this.measure(t,"AREA",e)}},{key:"measure",value:function(t,e,r){var n=this;return new r_(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,measureMode:e}).processAsync(n._processParam(t),r)}},{key:"_processParam",value:function(t){return!t||t.geometry instanceof m||(t.geometry=Pr.toSuperMapGeometry(t.geometry)),t}}])&&o_(e.prototype,r),n&&o_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function l_(t){"@babel/helpers - typeof";return(l_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f_(){return(f_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function h_(t,e){return(h_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function p_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=y_(t);if(e){var o=y_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===l_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function y_(t){return(y_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h_(t,e)}(i,Th);var e,r,n,o=p_(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).format=ke.GEOJSON,r.CLASS_NAME="SuperMap.NetworkAnalystServiceBase",r}return e=i,(r=[{key:"destroy",value:function(){f_(y_(i.prototype),"destroy",this).call(this),this.format=null}},{key:"transformResult",value:function(t,e){var r;return(t=C.transformResult(t))&&this.format===ke.GEOJSON&&"function"==typeof this.toGeoJSONResult&&(r=this.toGeoJSONResult(t)),r||(r=t),{result:r,options:e}}},{key:"toGeoJSONResult",value:function(t){return null}}])&&c_(e.prototype,r),n&&c_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function b_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var v_=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,C.extend(this,e),this.CLASS_NAME="SuperMap.BurstPipelineAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=null}}])&&b_(e.prototype,r),n&&b_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function m_(t){"@babel/helpers - typeof";return(m_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function w_(){return(w_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=__(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function O_(t,e){return(O_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function S_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=__(t);if(e){var o=__(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===m_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function __(t){return(__=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var P_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O_(t,e)}(i,d_);var e,r,n,o=S_(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.BurstPipelineAnalystService",r}return e=i,(r=[{key:"destroy",value:function(){w_(__(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(!(t instanceof v_))return null;var r;if(this.url=C.urlPathAppend(this.url,"burstAnalyse"),r={sourceNodeIDs:t.sourceNodeIDs,isUncertainDirectionValid:t.isUncertainDirectionValid},null!==t.edgeID&&null!==t.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");if(null===t.edgeID&&null===t.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");return null!==t.edgeID?r.edgeID=t.edgeID:r.nodeID=t.nodeID,this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}])&&g_(e.prototype,r),n&&g_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function x_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var k_=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.returnEdgeFeatures=!1,this.returnEdgeGeometry=!1,this.returnEdgeIDs=!1,this.returnNodeFeatures=!1,this.returnNodeGeometry=!1,this.returnNodeIDs=!1,this.returnPathGuides=!1,this.returnRoutes=!1,C.extend(this,e),this.CLASS_NAME="SuperMap.TransportationAnalystResultSetting")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.returnEdgeFeatures=null,t.returnEdgeGeometry=null,t.returnEdgeIDs=null,t.returnNodeFeatures=null,t.returnNodeGeometry=null,t.returnNodeIDs=null,t.returnPathGuides=null,t.returnRoutes=null}}])&&x_(e.prototype,r),n&&x_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function j_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var E_=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.barrierEdgeIDs=null,this.barrierNodeIDs=null,this.barrierPoints=null,this.weightFieldName=null,this.turnWeightField=null,this.resultSetting=new k_,C.extend(this,e),this.CLASS_NAME="SuperMap.TransportationAnalystParameter")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;if(t.barrierEdgeIDs=null,t.barrierNodeIDs=null,t.weightFieldName=null,t.turnWeightField=null,t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null),t.barrierPoints&&t.barrierPoints.length)for(var e in t.barrierPoints)t.barrierPoints[e].destroy();t.barrierPoints=null}}])&&j_(e.prototype,r),n&&j_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function T_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var C_=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAnalyzeById=!1,this.nodes=null,this.parameter=new E_,C.extend(this,e),this.CLASS_NAME="SuperMap.ComputeWeightMatrixParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.isAnalyzeById=null,t.nodes=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&T_(e.prototype,r),n&&T_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function R_(t){"@babel/helpers - typeof";return(R_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function M_(){return(M_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=I_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function L_(t,e){return(L_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function N_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=I_(t);if(e){var o=I_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===R_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function I_(t){return(I_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var D_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&L_(t,e)}(i,d_);var e,r,n,o=N_(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.ComputeWeightMatrixService",r}return e=i,(r=[{key:"destroy",value:function(){M_(I_(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof C_){var r,n=this;return n.url=C.urlPathAppend(n.url,"weightmatrix"),r={parameter:C.toJSON(t.parameter),nodes:n.getJson(t.isAnalyzeById,t.nodes)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}}])&&A_(e.prototype,r),n&&A_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function F_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var B_=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,this.queryType=null,C.extend(this,e),this.CLASS_NAME="SuperMap.FacilityAnalystStreamParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.edgeID=null,t.nodeID=null,t.weightName=null,t.isUncertainDirectionValid=null,t.type=null}}])&&F_(e.prototype,r),n&&F_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function G_(t){"@babel/helpers - typeof";return(G_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function J_(){return(J_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=q_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function V_(t,e){return(V_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function z_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=q_(t);if(e){var o=q_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===G_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function q_(t){return(q_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var H_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V_(t,e)}(i,d_);var e,r,n,o=z_(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FacilityAnalystStreamService",r}return e=i,(r=[{key:"destroy",value:function(){J_(q_(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof B_){var r,n=this;if(0===t.queryType)n.url=C.urlPathAppend(n.url,"upstreamcirticalfaclilities");else{if(1!==t.queryType)return;n.url=C.urlPathAppend(n.url,"downstreamcirticalfaclilities")}if(r={sourceNodeIDs:t.sourceNodeIDs,isUncertainDirectionValid:t.isUncertainDirectionValid},!(null!==t.edgeID&&null!==t.nodeID||null===t.edgeID&&null===t.nodeID))return null!==t.edgeID?r.edgeID=t.edgeID:r.nodeID=t.nodeID,n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}}])&&U_(e.prototype,r),n&&U_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function W_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Y_=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.edgeID=null,this.nodeID=null,this.weightName=null,this.returnFeatures=!0,this.isUncertainDirectionValid=!0,this.traceType=null,this.withIndex=null,C.extend(this,e),this.CLASS_NAME="SuperMap.TraceAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.edgeID=null,t.nodeID=null,t.weightName=null,t.returnFeatures=null,t.isUncertainDirectionValid=null,t.type=null,t.withIndex=null}}])&&W_(e.prototype,r),n&&W_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function X_(t){"@babel/helpers - typeof";return(X_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Z_(){return(Z_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function K_(t,e){return(K_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function $_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=tP(t);if(e){var o=tP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===X_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function tP(t){return(tP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var eP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K_(t,e)}(i,d_);var e,r,n,o=$_(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.TraceAnalystService",r}return e=i,(r=[{key:"destroy",value:function(){Z_(tP(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Y_){var r,n=this;if(0===t.traceType)n.url=C.urlPathAppend(n.url,"traceup");else{if(1!==t.traceType)return;n.url=C.urlPathAppend(n.url,"tracedown")}if(r={weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid,returnFeatures:t.returnFeatures},!(null!==t.edgeID&&null!==t.nodeID||null===t.edgeID&&null===t.nodeID))return null!==t.edgeID?r.edgeID=t.edgeID:r.nodeID=t.nodeID,n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;var e=new Or;return t.edgesFeatures&&(t.edgesFeatures=e.toGeoJSON(t.edgesFeatures)),t.nodesFeatures&&(t.nodesFeatures=e.toGeoJSON(t.nodesFeatures)),t}}])&&Q_(e.prototype,r),n&&Q_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function rP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var nP=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.connected=null,this.returnFeatures=!0,this.edgeIDs=null,this.nodeIDs=null,this.withIndex=null,C.extend(this,e),this.CLASS_NAME="SuperMap.ConnectedEdgesAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.edgeIDs=null,t.nodeIDs=null,t.connected=null,t.returnFeatures=null,t.withIndex=null}}])&&rP(e.prototype,r),n&&rP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function oP(t){"@babel/helpers - typeof";return(oP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function aP(){return(aP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function sP(t,e){return(sP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function uP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=lP(t);if(e){var o=lP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===oP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function lP(t){return(lP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sP(t,e)}(i,d_);var e,r,n,o=uP(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.ConnectedEdgesAnalystService",r}return e=i,(r=[{key:"destroy",value:function(){aP(lP(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof nP){var r;if(this.url=C.urlPathAppend(this.url,"connectededges"),r={connected:t.connected,returnFeatures:t.returnFeatures},!(null!==t.edgeIDs&&null!==t.nodeIDs||null===t.edgeIDs&&null===t.nodeIDs))return null!==t.edgeIDs?r.edgeIDs=t.edgeIDs:r.nodeIDs=t.nodeIDs,this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;var e=new Or;return t.edgesFeatures&&(t.edgesFeatures=e.toGeoJSON(t.edgesFeatures)),t.nodesFeatures&&(t.nodesFeatures=e.toGeoJSON(t.nodesFeatures)),t}}])&&iP(e.prototype,r),n&&iP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function fP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var hP=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.event=null,this.expectFacilityCount=1,this.facilities=null,this.fromEvent=!1,this.isAnalyzeById=!1,this.maxWeight=0,this.parameter=new E_,C.extend(this,e),this.CLASS_NAME="SuperMap.FindClosestFacilitiesParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.event=null,t.expectFacilityCount=null,t.facilities=null,t.fromEvent=null,t.isAnalyzeById=null,t.maxWeight=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&fP(e.prototype,r),n&&fP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pP(t){"@babel/helpers - typeof";return(pP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function dP(){return(dP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function bP(t,e){return(bP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=mP(t);if(e){var o=mP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===pP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function mP(t){return(mP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bP(t,e)}(i,d_);var e,r,n,o=vP(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FindClosestFacilitiesService",r}return e=i,(r=[{key:"destroy",value:function(){dP(mP(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof hP){var r,n=this;return n.url=C.urlPathAppend(n.url,"closestfacility"),r={expectFacilityCount:t.expectFacilityCount,fromEvent:t.fromEvent,maxWeight:t.maxWeight,parameter:C.toJSON(t.parameter),event:C.toJSON(t.event),facilities:n.getJson(t.isAnalyzeById,t.facilities)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.facilityPathList)return t;var e=new Or;return t.facilityPathList.map(function(t){return t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t}),t}}])&&yP(e.prototype,r),n&&yP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function wP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var OP=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.expectedSupplyCenterCount=null,this.isFromCenter=!1,this.supplyCenters=null,this.turnWeightField=null,this.weightName=null,C.extend(this,e),this.CLASS_NAME="SuperMap.FindLocationParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;if(t.expectedSupplyCenterCount=null,t.isFromCenter=null,t.turnWeightField=null,t.weightName=null,t.supplyCenters){for(var e=0,r=t.supplyCenters,n=r.length;e<n;e++)r[e].destroy();t.supplyCenters=null}}}])&&wP(e.prototype,r),n&&wP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function SP(t){"@babel/helpers - typeof";return(SP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _P(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function PP(){return(PP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function xP(t,e){return(xP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function kP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=jP(t);if(e){var o=jP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===SP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function jP(t){return(jP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var EP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xP(t,e)}(i,d_);var e,r,n,o=kP(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FindLocationService",r}return e=i,(r=[{key:"destroy",value:function(){PP(jP(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof OP){var r,n=this;return n.url=C.urlPathAppend(n.url,"location"),r={isFromCenter:t.isFromCenter,expectedSupplyCenterCount:t.expectedSupplyCenterCount,weightName:t.weightName,turnWeightField:t.turnWeightField,returnEdgeFeature:!0,returnEdgeGeometry:!0,returnNodeFeature:!0,mapParameter:C.toJSON(t.mapParameter),supplyCenters:n.getCentersJson(t.supplyCenters)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getCentersJson",value:function(t){for(var e="[",r=t?t.length:0,n=0;n<r;n++)n>0&&(e+=","),e+=C.toJSON(t[n]);return e+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;var e=new Or;return t.demandResults&&(t.demandResults=e.toGeoJSON(t.demandResults)),t.supplyResults&&(t.supplyResults=e.toGeoJSON(t.supplyResults)),t}}])&&_P(e.prototype,r),n&&_P(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function TP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var CP=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.centers=null,this.hasLeastTotalCost=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new E_,C.extend(this,e),this.CLASS_NAME="SuperMap.FindMTSPPathsParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.centers=null,t.hasLeastTotalCost=null,t.isAnalyzeById=null,t.nodes=null,t.maxWeight=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&TP(e.prototype,r),n&&TP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function RP(t){"@babel/helpers - typeof";return(RP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function MP(){return(MP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=IP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function LP(t,e){return(LP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function NP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=IP(t);if(e){var o=IP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===RP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function IP(t){return(IP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var DP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LP(t,e)}(i,d_);var e,r,n,o=NP(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FindMTSPPathsService",r}return e=i,(r=[{key:"destroy",value:function(){MP(IP(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof CP){var r,n=this,o=n.getJson(t.isAnalyzeById,t.centers),i=n.getJson(t.isAnalyzeById,t.nodes);return n.url=C.urlPathAppend(n.url,"mtsppath"),r={centers:o,nodes:i,parameter:C.toJSON(t.parameter),hasLeastTotalCost:t.hasLeastTotalCost},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.pathList)return null;var e=new Or;return t.pathList.map(function(t){return t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t}),t}}])&&AP(e.prototype,r),n&&AP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function FP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var BP=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAnalyzeById=!1,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter=new E_,C.extend(this,e),this.CLASS_NAME="SuperMap.FindPathParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.isAnalyzeById=null,t.hasLeastEdgeCount=null,t.nodes=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&FP(e.prototype,r),n&&FP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function GP(t){"@babel/helpers - typeof";return(GP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function JP(){return(JP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function VP(t,e){return(VP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function zP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=qP(t);if(e){var o=qP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===GP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function qP(t){return(qP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var HP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VP(t,e)}(i,d_);var e,r,n,o=zP(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FindPathService",r}return e=i,(r=[{key:"destroy",value:function(){JP(qP(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof BP){var r,n=this;return n.url=C.urlPathAppend(n.url,"path"),r={hasLeastEdgeCount:t.hasLeastEdgeCount,parameter:C.toJSON(t.parameter),nodes:n.getJson(t.isAnalyzeById,t.nodes)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.pathList||t.pathList.length<1)return null;var e=new Or;return t.pathList.forEach(function(t){t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures))}),t}}])&&UP(e.prototype,r),n&&UP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function WP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var YP=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAnalyzeById=!1,this.isCenterMutuallyExclusive=!1,this.centers=null,this.isFromCenter=!1,this.weights=null,this.parameter=new E_,C.extend(this,e),this.CLASS_NAME="SuperMap.FindServiceAreasParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.isAnalyzeById=null,t.isCenterMutuallyExclusive=null,t.centers=null,t.isFromCenter=null,t.weights=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&WP(e.prototype,r),n&&WP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function XP(t){"@babel/helpers - typeof";return(XP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ZP(){return(ZP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tx(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function KP(t,e){return(KP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function $P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=tx(t);if(e){var o=tx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===XP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function tx(t){return(tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ex=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KP(t,e)}(i,d_);var e,r,n,o=$P(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FindServiceAreasService",r}return e=i,(r=[{key:"destroy",value:function(){ZP(tx(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof YP){var r,n=this;return n.url=C.urlPathAppend(n.url,"servicearea"),r={isFromCenter:t.isFromCenter,isCenterMutuallyExclusive:t.isCenterMutuallyExclusive,parameter:C.toJSON(t.parameter),centers:n.getJson(t.isAnalyzeById,t.centers),weights:n.getJson(!0,t.weights)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.serviceAreaList)return t;var e=new Or;return t.serviceAreaList.map(function(t){return t.serviceRegion&&(t.serviceRegion=e.toGeoJSON(t.serviceRegion)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t.routes&&(t.routes=e.toGeoJSON(t.routes)),t}),t}}])&&QP(e.prototype,r),n&&QP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function rx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var nx=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.endNodeAssigned=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new E_,C.extend(this,e),this.CLASS_NAME="SuperMap.FindTSPPathsParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.endNodeAssigned=null,t.isAnalyzeById=null,t.nodes=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&rx(e.prototype,r),n&&rx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ox(t){"@babel/helpers - typeof";return(ox="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ix(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ax(){return(ax="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lx(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function sx(t,e){return(sx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ux(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=lx(t);if(e){var o=lx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ox(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function lx(t){return(lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sx(t,e)}(i,d_);var e,r,n,o=ux(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FindTSPPathsService",r}return e=i,(r=[{key:"destroy",value:function(){ax(lx(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof nx){var r,n=this;return n.url=C.urlPathAppend(n.url,"tsppath"),r={parameter:C.toJSON(t.parameter),endNodeAssigned:t.endNodeAssigned,nodes:n.getNodesJson(t)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getNodesJson",value:function(t){var e,r,n,o,i="";if(!1===t.isAnalyzeById){for(e="[",r=0,n=(o=t.nodes).length;r<n;r++)r>0&&(e+=","),e+='{"x":'+o[r].x+',"y":'+o[r].y+"}";i+=e+="]"}else if(!0===t.isAnalyzeById){for(var a="[",s=t.nodes,u=s.length,l=0;l<u;l++)l>0&&(a+=","),a+=s[l];i+=a+="]"}return i}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.tspPathList)return null;var e=new Or;return t.tspPathList.forEach(function(t){t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures))}),t}}])&&ix(e.prototype,r),n&&ix(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function fx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var hx=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.edgeId="",this.fromNodeId="",this.toNodeId="",this.weightField="",this.edgeWeight="",C.extend(this,e),this.CLASS_NAME="SuperMap.UpdateEdgeWeightParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.edgeId=null,this.fromNodeId=null,this.toNodeId=null,this.weightField=null,this.edgeWeight=null}}])&&fx(e.prototype,r),n&&fx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function px(t){"@babel/helpers - typeof";return(px="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function dx(){return(dx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mx(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function bx(t,e){return(bx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=mx(t);if(e){var o=mx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===px(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function mx(t){return(mx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bx(t,e)}(i,d_);var e,r,n,o=vx(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.UpdateEdgeWeightService",r}return e=i,(r=[{key:"destroy",value:function(){dx(mx(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof hx){var r=this,n=r.parse(t);r.url=C.urlPathAppend(r.url,n);var o=t.edgeWeight?t.edgeWeight:null;return r.request({method:"PUT",scope:r,data:o,success:e,failure:e})}}},{key:"parse",value:function(t){if(t){var e="";for(var r in t)if(""!==t[r]&&"edgeWeight"!==t[r])switch(r){case"edgeId":e+="/edgeweight/"+t[r];break;case"fromNodeId":e+="/fromnode/"+t[r];break;case"toNodeId":e+="/tonode/"+t[r];break;case"weightField":e+="/weightfield/"+t[r]}return e}}}])&&yx(e.prototype,r),n&&yx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function wx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ox=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.nodeId="",this.fromEdgeId="",this.toEdgeId="",this.weightField="",this.turnNodeWeight="",C.extend(this,e),this.CLASS_NAME="SuperMap.UpdateTurnNodeWeightParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.nodeId=null,this.fromEdgeId=null,this.toEdgeId=null,this.weightField=null,this.turnNodeWeight=null}}])&&wx(e.prototype,r),n&&wx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Sx(t){"@babel/helpers - typeof";return(Sx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Px(){return(Px="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jx(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function xx(t,e){return(xx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function kx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=jx(t);if(e){var o=jx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Sx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function jx(t){return(jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ex=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xx(t,e)}(i,d_);var e,r,n,o=kx(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.UpdateTurnNodeWeightService",r}return e=i,(r=[{key:"destroy",value:function(){Px(jx(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Ox){var r=this,n=r.parse(t);r.url=C.urlPathAppend(r.url,n);var o=t.turnNodeWeight?t.turnNodeWeight:null;return r.request({method:"PUT",scope:r,data:o,success:e,failure:e})}}},{key:"parse",value:function(t){if(t){var e="";for(var r in t)if(""!==t[r]&&"turnNodeWeight"!==t[r])switch(r){case"nodeId":e+="/turnnodeweight/"+t[r];break;case"fromEdgeId":e+="/fromedge/"+t[r];break;case"toEdgeId":e+="/toedge/"+t[r];break;case"weightField":e+="/weightfield/"+t[r]}return e}}}])&&_x(e.prototype,r),n&&_x(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Tx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Cx=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"burstPipelineAnalyst",value:function(t,e){var r=this;return new P_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"computeWeightMatrix",value:function(t,e){var r=this;return new D_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"findClosestFacilities",value:function(t,e,r){var n=this;return new gP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"traceAnalyst",value:function(t,e,r){var n=this;return new eP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"connectedEdgesAnalyst",value:function(t,e,r){var n=this;return new cP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"streamFacilityAnalyst",value:function(t,e,r){var n=this;return new H_(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findLocation",value:function(t,e,r){var n=this;return new EP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findPath",value:function(t,e,r){var n=this;return new HP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findTSPPaths",value:function(t,e,r){var n=this;return new cx(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findMTSPPaths",value:function(t,e,r){var n=this;return new DP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findServiceAreas",value:function(t,e,r){var n=this;return new ex(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"updateEdgeWeight",value:function(t,e){var r=this;return new gx(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"updateTurnNodeWeight",value:function(t,e){var r=this;return new Ex(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"_processFormat",value:function(t){return t||ke.GEOJSON}}])&&Tx(e.prototype,r),n&&Tx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Rx(t){"@babel/helpers - typeof";return(Rx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ax(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Mx(t,e){return(Mx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Lx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Nx(t);if(e){var o=Nx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Rx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Nx(t){return(Nx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ix=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mx(t,e)}(a,Oh);var e,r,n,i=Lx(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t,e))._networkAnalystService=new Cx(t,e),r}return e=a,(r=[{key:"burstPipelineAnalyst",value:function(t,e){return t=this._processParams(t),this._networkAnalystService.burstPipelineAnalyst(t,e)}},{key:"computeWeightMatrix",value:function(t,e){return t=this._processParams(t),this._networkAnalystService.computeWeightMatrix(t,e)}},{key:"findClosestFacilities",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findClosestFacilities(t,e,r)}},{key:"traceAnalyst",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.traceAnalyst(t,e,r)}},{key:"connectedEdgesAnalyst",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.connectedEdgesAnalyst(t,e,r)}},{key:"streamFacilityAnalyst",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.streamFacilityAnalyst(t,e,r)}},{key:"findLocation",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findLocation(t,e,r)}},{key:"findPath",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findPath(t,e,r)}},{key:"findTSPPaths",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findTSPPaths(t,e,r)}},{key:"findMTSPPaths",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findMTSPPaths(t,e,r)}},{key:"findServiceAreas",value:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findServiceAreas(t,e,r)}},{key:"updateEdgeWeight",value:function(t,e){return this._networkAnalystService.updateEdgeWeight(t,e)}},{key:"updateTurnNodeWeight",value:function(t,e){return this._networkAnalystService.updateTurnNodeWeight(t,e)}},{key:"_processParams",value:function(t){if(!t)return{};var e=this;if(t.centers&&Pr.isArray(t.centers)&&t.centers.map(function(r,n){return t.centers[n]=e._toPointObject(r),t.centers[n]}),t.nodes&&Pr.isArray(t.nodes)&&t.nodes.map(function(r,n){return t.nodes[n]=e._toPointObject(r),t.nodes[n]}),t.event&&(t.event=e._toPointObject(t.event)),t.facilities&&Pr.isArray(t.facilities)&&t.facilities.map(function(r,n){return t.facilities[n]=e._toPointObject(r),t.facilities[n]}),t.parameter&&t.parameter.barrierPoints){var r=t.parameter.barrierPoints;Pr.isArray(r)?r.map(function(r,n){return t.parameter[n]=e._toPointObject(r),t.parameter.barrierPoints[n]}):t.parameter.barrierPoints=[r instanceof o().LngLat?{x:r.lng,y:r.lat}:r]}return t}},{key:"_toPointObject",value:function(t){return Pr.isArray(t)?{x:t[0],y:t[1]}:t instanceof o().LngLat?{x:t.lng,y:t.lat}:t instanceof o().Point?{x:t.x,y:t.y}:t}},{key:"_processFormat",value:function(t){return t||ke.GEOJSON}}])&&Ax(e.prototype,r),n&&Ax(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function Dx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Fx=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=!1,C.extend(this,e),this.CLASS_NAME="SuperMap.FacilityAnalyst3DParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=null}}])&&Dx(e.prototype,r),n&&Dx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Bx(t){"@babel/helpers - typeof";return(Bx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ux(){return(Ux="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zx(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Jx(t,e){return(Jx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Vx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=zx(t);if(e){var o=zx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Bx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function zx(t){return(zx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jx(t,e)}(i,Fx);var e,r,n,o=Vx(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).CLASS_NAME="SuperMap.FacilityAnalystSinks3DParameters",e}return e=i,(r=[{key:"destroy",value:function(){Ux(zx(i.prototype),"destroy",this).call(this)}}])&&Gx(e.prototype,r),n&&Gx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Hx(t){"@babel/helpers - typeof";return(Hx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Yx(t,e){return(Yx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Xx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Qx(t);if(e){var o=Qx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Hx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Qx(t){return(Qx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yx(t,e)}(i,Th);var e,r,n,o=Xx(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FacilityAnalystSinks3DService",r}return e=i,(r=[{key:"destroy",value:function(){Th.prototype.destroy.apply(this,arguments)}},{key:"processAsync",value:function(t,e){if(t instanceof qx){var r;return this.url=C.urlPathAppend(this.url,"sinks"),r={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&Wx(e.prototype,r),n&&Wx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Kx(t){"@babel/helpers - typeof";return(Kx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function tk(){return(tk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nk(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ek(t,e){return(ek=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=nk(t);if(e){var o=nk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Kx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function nk(t){return(nk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ok=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ek(t,e)}(i,Fx);var e,r,n,o=rk(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).CLASS_NAME="SuperMap.FacilityAnalystSources3DParameters",e}return e=i,(r=[{key:"destroy",value:function(){tk(nk(i.prototype),"destroy",this).call(this)}}])&&$x(e.prototype,r),n&&$x(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ik(t){"@babel/helpers - typeof";return(ik="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ak(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function sk(){return(sk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ck(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function uk(t,e){return(uk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ck(t);if(e){var o=ck(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ik(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ck(t){return(ck=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uk(t,e)}(i,Th);var e,r,n,o=lk(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FacilityAnalystSources3DService",r}return e=i,(r=[{key:"destroy",value:function(){sk(ck(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof ok){var r;return this.url=C.urlPathAppend(this.url,"sources"),r={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&ak(e.prototype,r),n&&ak(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function hk(t){"@babel/helpers - typeof";return(hk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function yk(){return(yk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vk(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function dk(t,e){return(dk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function bk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=vk(t);if(e){var o=vk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===hk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function vk(t){return(vk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dk(t,e)}(i,Fx);var e,r,n,o=bk(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DParameters",e}return e=i,(r=[{key:"destroy",value:function(){yk(vk(i.prototype),"destroy",this).call(this)}}])&&pk(e.prototype,r),n&&pk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function gk(t){"@babel/helpers - typeof";return(gk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ok(){return(Ok="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pk(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Sk(t,e){return(Sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Pk(t);if(e){var o=Pk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===gk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Pk(t){return(Pk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sk(t,e)}(i,Th);var e,r,n,o=_k(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DService",r}return e=i,(r=[{key:"destroy",value:function(){Ok(Pk(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof mk){var r;return this.url=C.urlPathAppend(this.url,"traceupresult"),r={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&wk(e.prototype,r),n&&wk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function kk(t){"@babel/helpers - typeof";return(kk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ek(){return(Ek="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rk(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Tk(t,e){return(Tk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ck(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Rk(t);if(e){var o=Rk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===kk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Rk(t){return(Rk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ak=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tk(t,e)}(i,Fx);var e,r,n,o=Ck(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DParameters",e}return e=i,(r=[{key:"destroy",value:function(){Ek(Rk(i.prototype),"destroy",this).call(this)}}])&&jk(e.prototype,r),n&&jk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Mk(t){"@babel/helpers - typeof";return(Mk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Nk(){return(Nk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fk(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ik(t,e){return(Ik=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Dk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Fk(t);if(e){var o=Fk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Mk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Fk(t){return(Fk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Bk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ik(t,e)}(i,Th);var e,r,n,o=Dk(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DService",r}return e=i,(r=[{key:"destroy",value:function(){Nk(Fk(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Ak){var r;return this.url=C.urlPathAppend(this.url,"tracedownresult"),r={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&Lk(e.prototype,r),n&&Lk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Gk(t){"@babel/helpers - typeof";return(Gk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Jk(){return(Jk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Hk(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Vk(t,e){return(Vk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function zk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Hk(t);if(e){var o=Hk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Gk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return qk(t)}(this,r)}}function qk(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hk(t){return(Hk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Wk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vk(t,e)}(i,Fx);var e,r,n,o=zk(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t),t=t||{},e.sourceNodeIDs=null,C.extend(qk(e),t),e.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DParameters",e}return e=i,(r=[{key:"destroy",value:function(){Jk(Hk(i.prototype),"destroy",this).call(this),this.sourceNodeIDs=null}}])&&Uk(e.prototype,r),n&&Uk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Yk(t){"@babel/helpers - typeof";return(Yk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Qk(){return(Qk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$k(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Zk(t,e){return(Zk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Kk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=$k(t);if(e){var o=$k(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Yk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function $k(t){return($k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zk(t,e)}(i,Th);var e,r,n,o=Kk(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FacilityAnalystUpstream3DService",r}return e=i,(r=[{key:"destroy",value:function(){Qk($k(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Wk){var r;return this.url=C.urlPathAppend(this.url,"upstreamcirticalfaclilities"),r={sourceNodeIDs:t.sourceNodeIDs,edgeID:t.edgeID,nodeID:t.nodeID,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&Xk(e.prototype,r),n&&Xk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ej(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var rj=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"sinksFacilityAnalyst",value:function(t,e){var r=this;return new Zx(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"sourcesFacilityAnalyst",value:function(t,e){var r=this;return new fk(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"traceUpFacilityAnalyst",value:function(t,e){var r=this;return new xk(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"traceDownFacilityAnalyst",value:function(t,e){var r=this;return new Bk(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"upstreamFacilityAnalyst",value:function(t,e){var r=this;return new tj(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}])&&ej(e.prototype,r),n&&ej(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nj(t){"@babel/helpers - typeof";return(nj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ij(t,e){return(ij=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function aj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=sj(t);if(e){var o=sj(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===nj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function sj(t){return(sj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var uj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ij(t,e)}(i,Oh);var e,r,n,o=aj(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e))._networkAnalyst3DService=new rj(t,e),r}return e=i,(r=[{key:"sinksFacilityAnalyst",value:function(t,e){return this._networkAnalyst3DService.sinksFacilityAnalyst(t,e)}},{key:"sourcesFacilityAnalyst",value:function(t,e){return this._networkAnalyst3DService.sourcesFacilityAnalyst(t,e)}},{key:"traceUpFacilityAnalyst",value:function(t,e){return this._networkAnalyst3DService.traceUpFacilityAnalyst(t,e)}},{key:"traceDownFacilityAnalyst",value:function(t,e){return this._networkAnalyst3DService.traceDownFacilityAnalyst(t,e)}},{key:"upstreamFacilityAnalyst",value:function(t,e){return this._networkAnalyst3DService.upstreamFacilityAnalyst(t,e)}}])&&oj(e.prototype,r),n&&oj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function lj(t){"@babel/helpers - typeof";return(lj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fj(){return(fj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yj(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function hj(t,e){return(hj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=yj(t);if(e){var o=yj(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===lj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function yj(t){return(yj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hj(t,e)}(i,Th);var e,r,n,o=pj(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(r=o.call(this,t,e)).CLASS_NAME="SuperMap.ProcessingServiceBase",r}return e=i,(r=[{key:"destroy",value:function(){fj(yj(i.prototype),"destroy",this).call(this)}},{key:"getJobs",value:function(t,e){var r=this;return Jl.get(_h.appendCredential(t),null,{proxy:r.proxy}).then(function(t){return t.json()}).then(function(t){var n={result:t,object:r,type:"processCompleted"};return e(n),n}).catch(function(t){var n={error:t,object:r,type:"processFailed"};return e(n),n})}},{key:"addJob",value:function(t,e,r,n,o,i){var a=this,s=null;e&&e instanceof r&&(s=new Object,r.toObject(e,s));var u=Object.assign({"Content-Type":"application/x-www-form-urlencoded"},a.headers||{}),l={proxy:a.proxy,headers:u,withCredentials:a.withCredentials,crossOrigin:a.crossOrigin,isInTheSameDomain:a.isInTheSameDomain};return Jl.post(_h.appendCredential(t),JSON.stringify(s),l).then(function(t){return t.json()}).then(function(t){return t.succeed?a.transformResult(t,n,o,i):((t=a.transformErrorResult(t)).options=a,t.type="processFailed",o(t),t)}).catch(function(t){return(t=a.transformErrorResult({error:t})).options=a,t.type="processFailed",o(t),t})}},{key:"transformResult",value:function(t,e,r,n){t=C.transformResult(t),e=e||1e3;var o=this;if(t)return new Promise(function(i){var a=setInterval(function(){Jl.get(_h.appendCredential(t.newResourceLocation),{_t:(new Date).getTime()}).then(function(t){return t.json()}).then(function(t){if(i({object:o,id:t.id,state:t.state}),n({id:t.id,state:t.state,object:o}),"LOST"===t.state.runState||"KILLED"===t.state.runState||"FAILED"===t.state.runState){clearInterval(a);var e={error:t.state.errorMsg,state:t.state.runState,object:o,type:"processFailed"};i(e),r(e)}if("FINISHED"===t.state.runState&&t.setting.serviceInfo){clearInterval(a);var s={result:t,object:o,type:"processCompleted"};i(s),r(s)}}).catch(function(t){clearInterval(a);var e={error:t,object:o,type:"processFailed"};i(e),r(e)})},e)})}}])&&cj(e.prototype,r),n&&cj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function bj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var vj=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.alias=null,this.connect=null,this.dataBase=null,this.driver=null,this.engineType=null,this.exclusive=null,this.OpenLinkTable=null,this.password=null,this.readOnly=null,this.server=null,this.user=null,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.DatasourceConnectionInfo"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.alias=null,t.connect=null,t.dataBase=null,t.driver=null,t.engineType=null,t.exclusive=null,t.OpenLinkTable=null,t.password=null,t.readOnly=null,t.server=null,t.user=null}}])&&bj(e.prototype,r),n&&bj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function mj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var gj=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=He.UDB,this.datasetName="analystResult",this.datasourceInfo=null,this.outputPath="",C.extend(this,e),this.CLASS_NAME="SuperMap.OutputSetting"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.type=null,t.datasetName=null,t.outputPath=null,t.datasourceInfo instanceof vj&&(t.datasourceInfo.destroy(),t.datasourceInfo=null)}}])&&mj(e.prototype,r),n&&mj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function wj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Oj=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.items=null,this.numericPrecision=1,this.rangeMode=Fe.EQUALINTERVAL,this.rangeCount="",this.colorGradientType=Be.YELLOW_RED,C.extend(this,e),this.CLASS_NAME="SuperMap.MappingParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;if(t.items){if(t.items.length>0)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.numericPrecision=null,t.rangeMode=null,t.rangeCount=null,t.colorGradientType=null}}])&&wj(e.prototype,r),n&&wj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Sj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var _j=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=or.METER,this.radiusUnit=or.METER,this.areaUnit=nr.SQUAREMILE,this.output=null,this.mappingParameters=null,C.extend(this,e),this.CLASS_NAME="SuperMap.KernelDensityJobParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},"query"===r&&t[r]?e.analyst[r]=t[r].toBBOX():e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null,this.output instanceof gj&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Oj&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Sj(e.prototype,r),n&&Sj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Pj(t){"@babel/helpers - typeof";return(Pj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kj(){return(kj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tj(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function jj(t,e){return(jj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ej(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Tj(t);if(e){var o=Tj(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Pj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Tj(t){return(Tj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Cj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jj(t,e)}(i,dj);var e,r,n,o=Ej(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).url=C.urlPathAppend(r.url,"spatialanalyst/density"),r.CLASS_NAME="SuperMap.KernelDensityJobsService",r}return e=i,(r=[{key:"destroy",value:function(){kj(Tj(i.prototype),"destroy",this).call(this)}},{key:"getKernelDensityJobs",value:function(t){return kj(Tj(i.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getKernelDensityJob",value:function(t,e){return kj(Tj(i.prototype),"getJobs",this).call(this,C.urlPathAppend(this.url,t),e)}},{key:"addKernelDensityJob",value:function(t,e,r,n){return kj(Tj(i.prototype),"addJob",this).call(this,this.url,t,_j,e,r,n)}}])&&xj(e.prototype,r),n&&xj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Rj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Aj=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.datasetQuery="",this.geometryQuery="",this.mode=Ce.CONTAIN,this.output=null,this.mappingParameters=null,C.extend(this,e),this.CLASS_NAME="SuperMap.SingleObjectQueryJobsParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetQuery=null,this.geometryQuery=null,this.mode=null,this.output instanceof gj&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Oj&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Rj(e.prototype,r),n&&Rj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Mj(t){"@babel/helpers - typeof";return(Mj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Nj(){return(Nj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fj(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ij(t,e){return(Ij=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Dj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Fj(t);if(e){var o=Fj(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Mj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Fj(t){return(Fj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Bj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ij(t,e)}(i,dj);var e,r,n,o=Dj(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).url=C.urlPathAppend(r.url,"spatialanalyst/query"),r.CLASS_NAME="SuperMap.SingleObjectQueryJobsService",r}return e=i,(r=[{key:"destroy",value:function(){Nj(Fj(i.prototype),"destroy",this).call(this)}},{key:"getQueryJobs",value:function(t){return Nj(Fj(i.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getQueryJob",value:function(t,e){return Nj(Fj(i.prototype),"getJobs",this).call(this,C.urlPathAppend(this.url,t),e)}},{key:"addQueryJob",value:function(t,e,r,n){return Nj(Fj(i.prototype),"addJob",this).call(this,this.url,t,Aj,e,r,n)}}])&&Lj(e.prototype,r),n&&Lj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Gj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Uj=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes=ir.AVERAGE,this.fields="",this.type=ar.SUMMARYMESH,this.output=null,this.mappingParameters=null,C.extend(this,e),this.CLASS_NAME="SuperMap.SummaryMeshJobParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"type"!==r?"output"!==r?("SUMMARYMESH"===t.type&&"regionDataset"!==r||"SUMMARYREGION"===t.type&&!n(["meshType","resolution","query"],r))&&(e.analyst=e.analyst||{},"query"===r&&t[r]?e.analyst[r]=t[r].toBBOX():e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):e.type=t[r]:(e.input=e.input||{},e.input[r]=t[r]);function n(t,e){for(var r=t.length;r--;)if(t[r]===e)return!0;return!1}}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null,this.output instanceof gj&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Oj&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Gj(e.prototype,r),n&&Gj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Jj(t){"@babel/helpers - typeof";return(Jj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zj(){return(zj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wj(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function qj(t,e){return(qj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Hj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wj(t);if(e){var o=Wj(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Jj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Wj(t){return(Wj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qj(t,e)}(i,dj);var e,r,n,o=Hj(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).url=C.urlPathAppend(r.url,"spatialanalyst/aggregatepoints"),r.CLASS_NAME="SuperMap.SummaryMeshJobsService",r}return e=i,(r=[{key:"destroy",value:function(){zj(Wj(i.prototype),"destroy",this).call(this)}},{key:"getSummaryMeshJobs",value:function(t){return zj(Wj(i.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getSummaryMeshJob",value:function(t,e){return zj(Wj(i.prototype),"getJobs",this).call(this,C.urlPathAppend(this.url,t),e)}},{key:"addSummaryMeshJob",value:function(t,e,r,n){return zj(Wj(i.prototype),"addJob",this).call(this,this.url,t,Uj,e,r,n)}}])&&Vj(e.prototype,r),n&&Vj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Xj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Qj=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.datasetName="",this.datasetVectorClip="",this.geometryClip="",this.mode=rr.CLIP,this.output=null,this.mappingParameters=null,C.extend(this,e),this.CLASS_NAME="SuperMap.VectorClipJobsParameter"}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetVectorClip=null,this.geometryClip=null,this.mode=null,this.output instanceof gj&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Oj&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Xj(e.prototype,r),n&&Xj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Zj(t){"@babel/helpers - typeof";return(Zj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $j(){return($j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function tE(t,e){return(tE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function eE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=rE(t);if(e){var o=rE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Zj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function rE(t){return(rE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tE(t,e)}(i,dj);var e,r,n,o=eE(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).url=C.urlPathAppend(r.url,"spatialanalyst/vectorclip"),r.CLASS_NAME="SuperMap.VectorClipJobsService",r}return e=i,(r=[{key:"destroy",value:function(){$j(rE(i.prototype),"destroy",this).call(this)}},{key:"getVectorClipJobs",value:function(t){return $j(rE(i.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getVectorClipJob",value:function(t,e){return $j(rE(i.prototype),"getJobs",this).call(this,C.urlPathAppend(this.url,t),e)}},{key:"addVectorClipJob",value:function(t,e,r,n){return $j(rE(i.prototype),"addJob",this).call(this,this.url,t,Qj,e,r,n)}}])&&Kj(e.prototype,r),n&&Kj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function oE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var iE=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.datasetOverlay="",this.mode="",this.srcFields="",this.overlayFields="",this.output=null,this.mappingParameters=null,C.extend(this,e),this.CLASS_NAME="SuperMap.OverlayGeoJobParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!=r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetOverlay=null,this.mode=null,this.srcFields=null,this.overlayFields=null,this.output instanceof gj&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Oj&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&oE(e.prototype,r),n&&oE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function aE(t){"@babel/helpers - typeof";return(aE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function uE(){return(uE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function lE(t,e){return(lE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=fE(t);if(e){var o=fE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===aE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function fE(t){return(fE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lE(t,e)}(i,dj);var e,r,n,o=cE(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).url=C.urlPathAppend(r.url,"spatialanalyst/overlay"),r.CLASS_NAME="SuperMap.OverlayGeoJobsService",r}return e=i,(r=[{key:"destroy",value:function(){uE(fE(i.prototype),"destroy",this).call(this)}},{key:"getOverlayGeoJobs",value:function(t){return uE(fE(i.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getOverlayGeoJob",value:function(t,e){return uE(fE(i.prototype),"getJobs",this).call(this,C.urlPathAppend(this.url,t),e)}},{key:"addOverlayGeoJob",value:function(t,e,r,n){return uE(fE(i.prototype),"addJob",this).call(this,this.url,t,iE,e,r,n)}}])&&sE(e.prototype,r),n&&sE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function pE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var yE=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields="",this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=or.METER,this.type=ar.SUMMARYMESH,this.output=null,this.mappingParameters=null,C.extend(this,e),this.CLASS_NAME="SuperMap.SummaryRegionJobParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"type"!==r&&"type"!==r?"output"!==r?("SUMMARYREGION"===t.type||"SUMMARYMESH"===t.type&&"regionDataset"!==r)&&(e.analyst=e.analyst||{},"query"===r&&t[r]?e.analyst[r]=t[r].toBBOX():e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):e.type=t[r]:(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.sumShape=null,this.regionDataset=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null,this.output instanceof gj&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Oj&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&pE(e.prototype,r),n&&pE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dE(t){"@babel/helpers - typeof";return(dE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vE(){return(vE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function mE(t,e){return(mE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function gE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=wE(t);if(e){var o=wE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===dE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function wE(t){return(wE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var OE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mE(t,e)}(i,dj);var e,r,n,o=gE(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).url=C.urlPathAppend(r.url,"spatialanalyst/summaryregion"),r.CLASS_NAME="SuperMap.SummaryRegionJobsService",r}return e=i,(r=[{key:"destroy",value:function(){vE(wE(i.prototype),"destroy",this).call(this)}},{key:"getSummaryRegionJobs",value:function(t){return vE(wE(i.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getSummaryRegionJob",value:function(t,e){return vE(wE(i.prototype),"getJobs",this).call(this,C.urlPathAppend(this.url,t),e)}},{key:"addSummaryRegionJob",value:function(t,e,r,n){return vE(wE(i.prototype),"addJob",this).call(this,this.url,t,yE,e,r,n)}}])&&bE(e.prototype,r),n&&bE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function SE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var _E=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetName="",this.bounds="",this.distance="",this.distanceField="",this.distanceUnit=or.METER,this.dissolveField="",this.output=null,this.mappingParameters=null,!e)return this;C.extend(this,e),this.CLASS_NAME="SuperMap.BuffersAnalystJobsParameter"}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},"bounds"===r&&t[r]?e.analyst[r]=t[r].toBBOX():e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.bounds=null,this.distance=null,this.distanceField=null,this.distanceUnit=null,this.dissolveField=null,this.output instanceof gj&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Oj&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&SE(e.prototype,r),n&&SE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function PE(t){"@babel/helpers - typeof";return(PE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kE(){return(kE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=TE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function jE(t,e){return(jE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function EE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=TE(t);if(e){var o=TE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===PE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function TE(t){return(TE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var CE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jE(t,e)}(i,dj);var e,r,n,o=EE(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).url=C.urlPathAppend(r.url,"spatialanalyst/buffers"),r.CLASS_NAME="SuperMap.BuffersAnalystJobsService",r}return e=i,(r=[{key:"destroy",value:function(){kE(TE(i.prototype),"destroy",this).call(this)}},{key:"getBuffersJobs",value:function(t){return kE(TE(i.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getBuffersJob",value:function(t,e){return kE(TE(i.prototype),"getJobs",this).call(this,C.urlPathAppend(this.url,t),e)}},{key:"addBuffersJob",value:function(t,e,r,n){return kE(TE(i.prototype),"addJob",this).call(this,this.url,t,_E,e,r,n)}}])&&xE(e.prototype,r),n&&xE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function RE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var AE=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.datasetTopology="",this.tolerance="",this.rule=sr.REGIONNOOVERLAP,this.output=null,this.mappingParameters=null,C.extend(this,e),this.CLASS_NAME="SuperMap.TopologyValidatorJobsParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetTopology=null,this.tolerance=null,this.rule=null,this.output instanceof gj&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Oj&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&RE(e.prototype,r),n&&RE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ME(t){"@babel/helpers - typeof";return(ME="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function NE(){return(NE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=FE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function IE(t,e){return(IE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function DE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=FE(t);if(e){var o=FE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ME(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function FE(t){return(FE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var BE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IE(t,e)}(i,dj);var e,r,n,o=DE(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).url=C.urlPathAppend(r.url,"spatialanalyst/topologyvalidator"),r.CLASS_NAME="SuperMap.TopologyValidatorJobsService",r}return e=i,(r=[{key:"destroy",value:function(){NE(FE(i.prototype),"destroy",this).call(this)}},{key:"getTopologyValidatorJobs",value:function(t){return NE(FE(i.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getTopologyValidatorJob",value:function(t,e){return NE(FE(i.prototype),"getJobs",this).call(this,C.urlPathAppend(this.url,t),e)}},{key:"addTopologyValidatorJob",value:function(t,e,r,n){return NE(FE(i.prototype),"addJob",this).call(this,this.url,t,AE,e,r,n)}}])&&LE(e.prototype,r),n&&LE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function GE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var UE=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.groupField="",this.attributeField="",this.statisticModes="",this.output=null,this.mappingParameters=null,C.extend(this,e),this.CLASS_NAME="SuperMap.SummaryAttributesJobsParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.groupField=null,this.attributeField=null,this.statisticModes=null,this.output instanceof gj&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Oj&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&GE(e.prototype,r),n&&GE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function JE(t){"@babel/helpers - typeof";return(JE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zE(){return(zE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=WE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function qE(t,e){return(qE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function HE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=WE(t);if(e){var o=WE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===JE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function WE(t){return(WE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var YE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qE(t,e)}(i,dj);var e,r,n,o=HE(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).url=C.urlPathAppend(r.url,"spatialanalyst/summaryattributes"),r.CLASS_NAME="SuperMap.SummaryAttributesJobsService",r}return e=i,(r=[{key:"destroy",value:function(){zE(WE(i.prototype),"destroy",this).call(this)}},{key:"getSummaryAttributesJobs",value:function(t){return zE(WE(i.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getSummaryAttributesJob",value:function(t,e){return zE(WE(i.prototype),"getJobs",this).call(this,C.urlPathAppend(this.url,t),e)}},{key:"addSummaryAttributesJob",value:function(t,e,r,n){return zE(WE(i.prototype),"addJob",this).call(this,this.url,t,UE,e,r,n)}}])&&VE(e.prototype,r),n&&VE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function XE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var QE=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{},this.kernelDensityJobs={},this.summaryMeshJobs={},this.queryJobs={},this.summaryRegionJobs={},this.vectorClipJobs={},this.overlayGeoJobs={},this.buffersJobs={},this.topologyValidatorJobs={},this.summaryAttributesJobs={}}var e,r,n;return e=t,(r=[{key:"getKernelDensityJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new Cj(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getKernelDensityJobs(t)}},{key:"getKernelDensityJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new Cj(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getKernelDensityJob(t,e)}},{key:"addKernelDensityJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new Cj(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addKernelDensityJob(t,r,e,function(t){o.kernelDensityJobs[t.id]=t.state})}},{key:"getKernelDensityJobState",value:function(t){return this.kernelDensityJobs[t]}},{key:"getSummaryMeshJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new Yj(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getSummaryMeshJobs(t)}},{key:"getSummaryMeshJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new Yj(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getSummaryMeshJob(t,e)}},{key:"addSummaryMeshJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new Yj(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addSummaryMeshJob(t,r,e,function(t){o.summaryMeshJobs[t.id]=t.state})}},{key:"getSummaryMeshJobState",value:function(t){return this.summaryMeshJobs[t]}},{key:"getQueryJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new Bj(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getQueryJobs(t)}},{key:"getQueryJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new Bj(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getQueryJob(t,e)}},{key:"addQueryJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new Bj(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addQueryJob(t,r,e,function(t){o.queryJobs[t.id]=t.state})}},{key:"getQueryJobState",value:function(t){return this.queryJobs[t]}},{key:"getSummaryRegionJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new OE(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getSummaryRegionJobs(t)}},{key:"getSummaryRegionJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new OE(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getSummaryRegionJob(t,e)}},{key:"addSummaryRegionJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new OE(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addSummaryRegionJob(t,r,e,function(t){o.summaryRegionJobs[t.id]=t.state})}},{key:"getSummaryRegionJobState",value:function(t){return this.summaryRegionJobs[t]}},{key:"getVectorClipJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new nE(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getVectorClipJobs(t)}},{key:"getVectorClipJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new nE(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getVectorClipJob(t,e)}},{key:"addVectorClipJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new nE(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addVectorClipJob(t,r,e,function(t){o.vectorClipJobs[t.id]=t.state})}},{key:"getVectorClipJobState",value:function(t){return this.vectorClipJobs[t]}},{key:"getOverlayGeoJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new hE(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getOverlayGeoJobs(t)}},{key:"getOverlayGeoJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new hE(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getOverlayGeoJob(t,e)}},{key:"addOverlayGeoJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new hE(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addOverlayGeoJob(t,r,e,function(t){o.overlayGeoJobs[t.id]=t.state})}},{key:"getoverlayGeoJobState",value:function(t){return this.overlayGeoJobs[t]}},{key:"getBuffersJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new CE(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getBuffersJobs(t)}},{key:"getBuffersJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new CE(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getBuffersJob(t,e)}},{key:"addBuffersJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new CE(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addBuffersJob(t,r,e,function(t){o.buffersJobs[t.id]=t.state})}},{key:"getBuffersJobState",value:function(t){return this.buffersJobs[t]}},{key:"getTopologyValidatorJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new BE(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getTopologyValidatorJobs(t)}},{key:"getTopologyValidatorJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new BE(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getTopologyValidatorJob(t,e)}},{key:"addTopologyValidatorJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new BE(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addTopologyValidatorJob(t,r,e,function(t){o.topologyValidatorJobs[t.id]=t.state})}},{key:"getTopologyValidatorJobState",value:function(t){return this.topologyValidatorJobs[t]}},{key:"getSummaryAttributesJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new YE(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getSummaryAttributesJobs(t)}},{key:"getSummaryAttributesJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new YE(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getSummaryAttributesJob(t,e)}},{key:"addSummaryAttributesJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new YE(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addSummaryAttributesJob(t,r,e,function(t){o.summaryAttributesJobs[t.id]=t.state})}},{key:"getSummaryAttributesJobState",value:function(t){return this.summaryAttributesJobs[t]}},{key:"_processFormat",value:function(t){return t||ke.GEOJSON}}])&&XE(e.prototype,r),n&&XE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ZE(t){"@babel/helpers - typeof";return(ZE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $E(t,e){return($E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=eT(t);if(e){var o=eT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ZE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function eT(t){return(eT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$E(t,e)}(i,Oh);var e,r,n,o=tT(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e))._processingService=new QE(t,e),r}return e=i,(r=[{key:"getKernelDensityJobs",value:function(t,e){return this._processingService.getKernelDensityJobs(t,e)}},{key:"getKernelDensityJob",value:function(t,e,r){return this._processingService.getKernelDensityJob(t,e,r)}},{key:"addKernelDensityJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addKernelDensityJob(t,e,r,n)}},{key:"getKernelDensityJobState",value:function(t){return this._processingService.getKernelDensityJobState(t)}},{key:"getSummaryMeshJobs",value:function(t,e){return this._processingService.getSummaryMeshJobs(t,e)}},{key:"getSummaryMeshJob",value:function(t,e,r){return this._processingService.getSummaryMeshJob(t,e,r)}},{key:"addSummaryMeshJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addSummaryMeshJob(t,e,r,n)}},{key:"getSummaryMeshJobState",value:function(t){return this._processingService.getSummaryMeshJobState(t)}},{key:"getQueryJobs",value:function(t,e){return this._processingService.getQueryJobs(t,e)}},{key:"getQueryJob",value:function(t,e,r){return this._processingService.getQueryJob(t,e,r)}},{key:"addQueryJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addQueryJob(t,e,r,n)}},{key:"getQueryJobState",value:function(t){return this._processingService.getQueryJobState(t)}},{key:"getSummaryRegionJobs",value:function(t,e){return this._processingService.getSummaryRegionJobs(t,e)}},{key:"getSummaryRegionJob",value:function(t,e,r){return this._processingService.getSummaryRegionJob(t,e,r)}},{key:"addSummaryRegionJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addSummaryRegionJob(t,e,r,n)}},{key:"getSummaryRegionJobState",value:function(t){return this._processingService.getSummaryRegionJobState(t)}},{key:"getVectorClipJobs",value:function(t,e){return this._processingService.getVectorClipJobs(t,e)}},{key:"getVectorClipJob",value:function(t,e,r){return this._processingService.getVectorClipJob(t,e,r)}},{key:"addVectorClipJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addVectorClipJob(t,e,r,n)}},{key:"getVectorClipJobState",value:function(t){return this._processingService.getVectorClipJobState(t)}},{key:"getOverlayGeoJobs",value:function(t,e){return this._processingService.getOverlayGeoJobs(t,e)}},{key:"getOverlayGeoJob",value:function(t,e,r){return this._processingService.getOverlayGeoJob(t,e,r)}},{key:"addOverlayGeoJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addOverlayGeoJob(t,e,r,n)}},{key:"getoverlayGeoJobState",value:function(t){return this._processingService.getoverlayGeoJobState(t)}},{key:"getBuffersJobs",value:function(t,e){return this._processingService.getBuffersJobs(t,e)}},{key:"getBuffersJob",value:function(t,e,r){return this._processingService.getBuffersJob(t,e,r)}},{key:"addBuffersJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addBuffersJob(t,e,r,n)}},{key:"getBuffersJobState",value:function(t){return this._processingService.getBuffersJobState(t)}},{key:"getTopologyValidatorJobs",value:function(t,e){return this._processingService.getTopologyValidatorJobs(t,e)}},{key:"getTopologyValidatorJob",value:function(t,e,r){return this._processingService.getTopologyValidatorJob(t,e,r)}},{key:"addTopologyValidatorJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addTopologyValidatorJob(t,e,r,n)}},{key:"getTopologyValidatorJobState",value:function(t){return this._processingService.getTopologyValidatorJobState(t)}},{key:"getSummaryAttributesJobs",value:function(t,e){return this._processingService.getSummaryAttributesJobs(t,e)}},{key:"getSummaryAttributesJob",value:function(t,e,r){return this._processingService.getSummaryAttributesJob(t,e,r)}},{key:"addSummaryAttributesJob",value:function(t,e,r,n){return t=this._processParams(t),this._processingService.addSummaryAttributesJob(t,e,r,n)}},{key:"getSummaryAttributesJobState",value:function(t){return this._processingService.getSummaryAttributesJobState(t)}},{key:"_processFormat",value:function(t){return t||ke.GEOJSON}},{key:"_processParams",value:function(t){return t?(t.bounds&&(t.bounds=Pr.toSuperMapBounds(t.bounds)),t.query&&(t.query=Pr.toSuperMapBounds(t.query)),t.geometryQuery&&(t.geometryQuery=Pr.toProcessingParam(t.geometryQuery)),t.geometryClip&&(t.geometryClip=Pr.toProcessingParam(t.geometryClip)),t):{}}}])&&KE(e.prototype,r),n&&KE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function nT(t){"@babel/helpers - typeof";return(nT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function iT(){return(iT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function aT(t,e){return(aT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function sT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=cT(t);if(e){var o=cT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return uT(this,r)}}function uT(t,e){if(e&&("object"===nT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return lT(t)}function lT(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cT(t){return(cT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aT(t,e)}(i,Th);var e,r,n,o=sT(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).returnContent=!1,r.format=ke.GEOJSON,r.returnFeatureWithFieldCaption=!1,e&&C.extend(lT(r),e),r.CLASS_NAME="SuperMap.QueryService",r.url?(e&&e.format&&(r.format=e.format.toUpperCase()),r.url=C.urlPathAppend(r.url,"queryResults"),r):uT(r)}return e=i,(r=[{key:"destroy",value:function(){iT(cT(i.prototype),"destroy",this).call(this);this.returnContent=null,this.format=null}},{key:"processAsync",value:function(t,e){if(t instanceof Fy){var r,n=this,o=null;return n.returnContent=t.returnContent,r=n.getJsonParameters(t),n.returnContent||(o=t.returnCustomResult)&&(n.url=C.urlAppend(n.url,"returnCustomResult="+o)),n.returnFeatureWithFieldCaption=t.returnFeatureWithFieldCaption,n.request({method:"POST",data:r,scope:n,success:e,failure:e})}}},{key:"transformResult",value:function(t,e){t=C.transformResult(t);var r=new Or;if(t&&t.recordsets)for(var n=0,o=t.recordsets,i=o.length;n<i;n++)o[n].features&&(!0===this.returnFeatureWithFieldCaption&&o[n].features.map(function(t){return t.fieldNames=o[n].fieldCaptions,t}),this.format===ke.GEOJSON&&(o[n].features=r.toGeoJSON(o[n].features)));return{result:t,options:e}}},{key:"dataFormat",value:function(){return[ke.GEOJSON,ke.ISERVER,ke.FGB]}},{key:"getQueryParameters",value:function(t){return new Fy({customParams:t.customParams,expectCount:t.expectCount,networkType:t.networkType,queryOption:t.queryOption,queryParams:t.queryParams,startRecord:t.startRecord,prjCoordSys:t.prjCoordSys,holdTime:t.holdTime})}}])&&oT(e.prototype,r),n&&oT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function hT(t){"@babel/helpers - typeof";return(hT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function yT(){return(yT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function dT(t,e){return(dT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function bT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=mT(t);if(e){var o=mT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===hT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return vT(t)}(this,r)}}function vT(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mT(t){return(mT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dT(t,e)}(i,Fy);var e,r,n,o=bT(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).returnContent=!0,e.bounds=null,C.extend(vT(e),t),e.CLASS_NAME="SuperMap.QueryByBoundsParameters",e}return e=i,(r=[{key:"destroy",value:function(){yT(mT(i.prototype),"destroy",this).call(this);this.returnContent=null,this.bounds&&(this.bounds=null)}}])&&pT(e.prototype,r),n&&pT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function wT(t){"@babel/helpers - typeof";return(wT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ST(){return(ST="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function _T(t,e){return(_T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function PT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=xT(t);if(e){var o=xT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===wT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function xT(t){return(xT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_T(t,e)}(i,fT);var e,r,n,o=PT(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.QueryByBoundsService",r}return e=i,(r=[{key:"destroy",value:function(){ST(xT(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(!(t instanceof gT))return null;var e,r="",n=t.bounds;return e=this.getQueryParameters(t),r+="'queryMode':'BoundsQuery','queryParameters':",r+=C.toJSON(e),r="{"+(r+=",'bounds': {'rightTop':{'y':"+n.top+",'x':"+n.right+"},'leftBottom':{'y':"+n.bottom+",'x':"+n.left+"}}")+"}"}}])&&OT(e.prototype,r),n&&OT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function jT(t){"@babel/helpers - typeof";return(jT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ET(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function TT(){return(TT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=MT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function CT(t,e){return(CT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function RT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=MT(t);if(e){var o=MT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===jT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return AT(t)}(this,r)}}function AT(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MT(t){return(MT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var LT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CT(t,e)}(i,Fy);var e,r,n,o=RT(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).geometry=null,e.isNearest=null,e.returnContent=!0,C.extend(AT(e),t),e.CLASS_NAME="SuperMap.QueryByDistanceParameters",e}return e=i,(r=[{key:"destroy",value:function(){TT(MT(i.prototype),"destroy",this).call(this);var t=this;t.returnContent=null,t.distance=null,t.isNearest=null,t.geometry&&(t.geometry.destroy(),t.geometry=null)}}])&&ET(e.prototype,r),n&&ET(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function NT(t){"@babel/helpers - typeof";return(NT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function IT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function DT(){return(DT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=GT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function FT(t,e){return(FT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function BT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=GT(t);if(e){var o=GT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===NT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function GT(t){return(GT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var UT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FT(t,e)}(i,fT);var e,r,n,o=BT(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.QueryByDistanceService",r}return e=i,(r=[{key:"destroy",value:function(){DT(GT(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof LT){var e="",r=this.getQueryParameters(t),n=yr.fromGeometry(t.geometry);return e+=t.isNearest?"'queryMode':'FindNearest','queryParameters':":"'queryMode':'DistanceQuery','queryParameters':",e+=C.toJSON(r),e="{"+(e+=",'geometry':"+C.toJSON(n)+",'distance':"+t.distance)+"}"}}}])&&IT(e.prototype,r),n&&IT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function JT(t){"@babel/helpers - typeof";return(JT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zT(){return(zT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=YT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function qT(t,e){return(qT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function HT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=YT(t);if(e){var o=YT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===JT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return WT(t)}(this,r)}}function WT(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YT(t){return(YT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var XT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qT(t,e)}(i,Fy);var e,r,n,o=HT(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).returnContent=!0,C.extend(WT(e),t),e.CLASS_NAME="SuperMap.QueryBySQLParameters",e}return e=i,(r=[{key:"destroy",value:function(){zT(YT(i.prototype),"destroy",this).call(this);this.returnContent=null}}])&&VT(e.prototype,r),n&&VT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function QT(t){"@babel/helpers - typeof";return(QT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function KT(){return(KT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eC(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function $T(t,e){return($T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=eC(t);if(e){var o=eC(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===QT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function eC(t){return(eC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$T(t,e)}(i,fT);var e,r,n,o=tC(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.QueryBySQLService",r}return e=i,(r=[{key:"destroy",value:function(){KT(eC(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof XT){var e,r="";return e=this.getQueryParameters(t),r+="'queryMode':'SqlQuery','queryParameters':",r="{"+(r+=C.toJSON(e))+"}"}}}])&&ZT(e.prototype,r),n&&ZT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function nC(t){"@babel/helpers - typeof";return(nC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function iC(){return(iC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lC(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function aC(t,e){return(aC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function sC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=lC(t);if(e){var o=lC(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===nC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return uC(t)}(this,r)}}function uC(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lC(t){return(lC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aC(t,e)}(i,Fy);var e,r,n,o=sC(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).returnContent=!0,e.geometry=null,e.spatialQueryMode=Ce.INTERSECT,C.extend(uC(e),t),e.CLASS_NAME="SuperMap.QueryByGeometryParameters",e}return e=i,(r=[{key:"destroy",value:function(){iC(lC(i.prototype),"destroy",this).call(this);this.returnContent=null,this.geometry=null,this.spatialQueryMode=null}}])&&oC(e.prototype,r),n&&oC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function fC(t){"@babel/helpers - typeof";return(fC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pC(){return(pC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bC(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function yC(t,e){return(yC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function dC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=bC(t);if(e){var o=bC(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===fC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function bC(t){return(bC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yC(t,e)}(i,fT);var e,r,n,o=dC(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.QueryByGeometryService",r}return e=i,(r=[{key:"destroy",value:function(){pC(bC(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof cC){var e,r="",n=t.geometry,o=yr.fromGeometry(n);return e=this.getQueryParameters(t),r+="'queryMode':'SpatialQuery','queryParameters':",r="{"+(r+=C.toJSON(e)+",'geometry':"+C.toJSON(o)+",'spatialQueryMode':"+C.toJSON(t.spatialQueryMode))+"}"}}}])&&hC(e.prototype,r),n&&hC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function mC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var gC=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=r||{},this.url=e}var e,r,n;return e=t,(r=[{key:"queryByBounds",value:function(t,e,r){var n=this;return new kT(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"queryByDistance",value:function(t,e,r){var n=this;return new UT(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(t,e)}},{key:"queryBySQL",value:function(t,e,r){var n=this;return new rC(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(t,e)}},{key:"queryByGeometry",value:function(t,e,r){var n=this;return new vC(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(t,e)}},{key:"_processFormat",value:function(t){return t||ke.GEOJSON}}])&&mC(e.prototype,r),n&&mC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function wC(t){"@babel/helpers - typeof";return(wC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function SC(t,e){return(SC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=PC(t);if(e){var o=PC(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===wC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function PC(t){return(PC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SC(t,e)}(a,Oh);var e,r,n,i=_C(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t,e))._queryService=new gC(t,e),r}return e=a,(r=[{key:"queryByBounds",value:function(t,e,r){return t=this._processParams(t),this._queryService.queryByBounds(t,e,r)}},{key:"queryByDistance",value:function(t,e,r){return t=this._processParams(t),this._queryService.queryByDistance(t,e,r)}},{key:"queryBySQL",value:function(t,e,r){return t=this._processParams(t),this._queryService.queryBySQL(t,e,r)}},{key:"queryByGeometry",value:function(t,e,r){return t=this._processParams(t),this._queryService.queryByGeometry(t,e,r)}},{key:"_processParams",value:function(t){return t?(t.returnContent=null==t.returnContent||t.returnContent,t.queryParams&&!Pr.isArray(t.queryParams)&&(t.queryParams=[t.queryParams]),t.bounds&&(t.bounds instanceof Array&&(t.bounds=new I(t.bounds[0],t.bounds[1],t.bounds[2],t.bounds[3])),t.bounds instanceof o().LngLatBounds&&(t.bounds=new I(t.bounds.getSouthWest().lng,t.bounds.getSouthWest().lat,t.bounds.getNorthEast().lng,t.bounds.getNorthEast().lat))),t.geometry&&(t.geometry instanceof o().LngLat&&(t.geometry=new V(t.geometry.lng,t.geometry.lat)),t.geometry instanceof o().Point&&(t.geometry=new V(t.geometry.x,t.geometry.y)),t.geometry instanceof o().LngLatBounds&&(t.geometry=Pr.toSuperMapPolygon(t.geometry)),t.geometry instanceof m||(t.geometry=Pr.toSuperMapGeometry(t.geometry))),t):{}}}])&&OC(e.prototype,r),n&&OC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function kC(t){"@babel/helpers - typeof";return(kC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function EC(){return(EC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=RC(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function TC(t,e){return(TC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function CC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=RC(t);if(e){var o=RC(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===kC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function RC(t){return(RC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var AC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TC(t,e)}(i,Th);var e,r,n,o=CC(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).format=e&&e.format||ke.GEOJSON,r.CLASS_NAME="SuperMap.SpatialAnalystBase",r}return e=i,(r=[{key:"destroy",value:function(){EC(RC(i.prototype),"destroy",this).call(this),this.format=null}},{key:"transformResult",value:function(t,e){var r;if((t=C.transformResult(t))&&this.format===ke.GEOJSON&&"function"==typeof this.toGeoJSONResult)if(C.isArray(t)){for(var n=0;n<t.length;n++)t[n]=this.toGeoJSONResult(t[n]);r=t}else r=this.toGeoJSONResult(t);return r||(r=t),{result:r,options:e}}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;t.result&&t.result.resultGeometry&&(t=t.result);var e=new Or;if(t.recordsets)for(var r=0,n=t.recordsets,o=n.length;r<o;r++)n[r].features&&(n[r].features=e.toGeoJSON(n[r].features));else t.recordset&&t.recordset.features&&(t.recordset.features=e.toGeoJSON(t.recordset.features));return t.resultGeometry&&(t.resultGeometry=e.toGeoJSON(t.resultGeometry)),t.regions&&(t.regions=e.toGeoJSON(t.regions)),t}}])&&jC(e.prototype,r),n&&jC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function MC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var LC=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataset=null,this.targetDatasourceName=null,this.totalGridName=null,this.diffuseDatasetGridName=null,this.durationDatasetGridName=null,this.directDatasetGridName=null,this.latitude=null,this.timeMode="MULTIDAYS",this.dayStart=null,this.dayEnd=null,this.hourStart=null,this.hourEnd=null,this.transmittance=null,this.hourInterval=null,this.dayInterval=null,this.deleteExistResultDataset=!1,C.extend(this,e),this.CLASS_NAME="SuperMap.AreaSolarRadiationParameters"}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){var r={};for(var n in t){if("dataset"!==n)"latitude"===n||"timeMode"===n||"dayStart"===n||("dayEnd"===n||"hourStart"===n||"hourEnd"===n)||("transmittance"===n||"hourInterval"===n||"dayInterval"===n)?r[n]=t[n]:e[n]=t[n]}e.parameter=r}}],(r=[{key:"destroy",value:function(){var t=this;t.dataset=null,t.zFactor=1,t.averageCurvatureName=null,t.profileCurvatureName=null,t.planCurvatureName=null,t.deleteExistResultDataset=!0}}])&&MC(e.prototype,r),n&&MC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function NC(t){"@babel/helpers - typeof";return(NC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function IC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function DC(){return(DC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=GC(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function FC(t,e){return(FC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function BC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=GC(t);if(e){var o=GC(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===NC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function GC(t){return(GC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var UC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FC(t,e)}(i,AC);var e,r,n,o=BC(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.AreaSolarRadiationService",r}return e=i,(r=[{key:"destroy",value:function(){DC(GC(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof LC){var r=this,n={};t instanceof LC&&(r.url=C.urlPathAppend(r.url,"datasets/".concat(t.dataset,"/solarradiation"))),r.url=C.urlAppend(r.url,"returnContent=true"),LC.toObject(t,n);var o=C.toJSON(n);return r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}}])&&IC(e.prototype,r),n&&IC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function JC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var VC=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.exp=null,this.value=100,C.extend(this,e),this.CLASS_NAME="SuperMap.BufferDistance"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.exp=null,this.value=null}}])&&JC(e.prototype,r),n&&JC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function zC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var qC=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.endType=ze.FLAT,this.leftDistance=new VC,this.rightDistance=new VC,this.semicircleLineSegment=4,this.radiusUnit=Me.METER,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.BufferSetting"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.endType=null,t.leftDistance&&(t.leftDistance.destroy(),t.leftDistance=null),t.rightDistance&&(t.rightDistance.destroy(),t.rightDistance=null),t.semicircleLineSegment=null,t.radiusUnit=null}}])&&zC(e.prototype,r),n&&zC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function HC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var WC=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.bufferSetting=new qC,C.extend(this,e),this.CLASS_NAME="SuperMap.BufferAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.bufferSetting&&(this.bufferSetting.destroy(),this.bufferSetting=null)}}])&&HC(e.prototype,r),n&&HC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function YC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var XC=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.expectCount=1e3,this.dataset=null,this.dataReturnMode=Xe.RECORDSET_ONLY,this.deleteExistResultDataset=!0,C.extend(this,e),this.CLASS_NAME="SuperMap.DataReturnOption"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.expectCount=null,this.dataset=null,this.dataReturnMode=null,this.deleteExistResultDataset=null}}])&&YC(e.prototype,r),n&&YC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function QC(t){"@babel/helpers - typeof";return(QC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function KC(){return(KC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rR(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function $C(t,e){return($C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=rR(t);if(e){var o=rR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===QC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return eR(t)}(this,r)}}function eR(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rR(t){return(rR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$C(t,e)}(i,WC);var e,r,n,o=tR(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).dataset=null,e.filterQueryParameter=new kb,e.resultSetting=new XC,e.isAttributeRetained=!0,e.isUnion=!1,C.extend(eR(e),t),e.CLASS_NAME="SuperMap.DatasetBufferAnalystParameters",e}return e=i,n=[{key:"toObject",value:function(t,e){for(var r in t)if("bufferSetting"===r)t.bufferSetting.radiusUnit=t.bufferSetting.radiusUnit.toUpperCase(),e.bufferAnalystParameter=t.bufferSetting;else if("resultSetting"===r)e.dataReturnOption=t.resultSetting;else{if("dataset"===r)continue;e[r]=t[r]}}}],(r=[{key:"destroy",value:function(){KC(rR(i.prototype),"destroy",this).call(this);var t=this;t.dataset=null,t.filterQueryParameter&&(t.filterQueryParameter.destroy(),t.filterQueryParameter=null),t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null),t.isAttributeRetained=null,t.isUnion=null}}])&&ZC(e.prototype,r),n&&ZC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function oR(t){"@babel/helpers - typeof";return(oR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function aR(){return(aR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cR(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function sR(t,e){return(sR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function uR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=cR(t);if(e){var o=cR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===oR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return lR(t)}(this,r)}}function lR(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cR(t){return(cR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sR(t,e)}(i,WC);var e,r,n,o=uR(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).sourceGeometry=null,e.sourceGeometrySRID=null,t&&C.extend(lR(e),t),e.CLASS_NAME=" SuperMap.GeometryBufferAnalystParameters",e}return e=i,n=[{key:"toObject",value:function(t,e){for(var r in t)if("bufferSetting"===r){var n={};for(var o in t.bufferSetting)n[o]=t.bufferSetting[o];e.analystParameter=n}else"sourceGeometry"===r?e.sourceGeometry=yr.fromGeometry(t.sourceGeometry):e[r]=t[r]}}],(r=[{key:"destroy",value:function(){aR(cR(i.prototype),"destroy",this).call(this);this.sourceGeometry&&(this.sourceGeometry.destroy(),this.sourceGeometry=null)}}])&&iR(e.prototype,r),n&&iR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function hR(t){"@babel/helpers - typeof";return(hR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function yR(){return(yR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mR(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function dR(t,e){return(dR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function bR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=mR(t);if(e){var o=mR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===hR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return vR(t)}(this,r)}}function vR(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mR(t){return(mR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dR(t,e)}(i,AC);var e,r,n,o=bR(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).mode=null,e&&C.extend(vR(r),e),r.CLASS_NAME="SuperMap.BufferAnalystService",r}return e=i,(r=[{key:"destroy",value:function(){yR(mR(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r={},n=this;t instanceof nR?(n.mode="datasets",n.url=C.urlPathAppend(n.url,"datasets/"+t.dataset+"/buffer"),nR.toObject(t,r)):t instanceof fR&&(n.mode="geometry",n.url=C.urlPathAppend(n.url,"geometry/buffer"),fR.toObject(t,r));var o=C.toJSON(r);return this.returnContent=!0,n.request({method:"POST",data:o,scope:n,success:e,failure:e})}},{key:"dataFormat",value:function(){return[ke.GEOJSON,ke.ISERVER,ke.FGB]}}])&&pR(e.prototype,r),n&&pR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function wR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var OR=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,C.extend(this,e),this.CLASS_NAME="SuperMap.DensityKernelAnalystParameters"}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(r=[{key:"destroy",value:function(){var t=this;t.dataset=null,t.bounds=null,t.fieldName=null,t.resultGridDatasetResolution=null,t.searchRadius=null,t.targetDatasource=null,t.resultGridName=null,t.deleteExistResultDataset=null}}])&&wR(e.prototype,r),n&&wR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function SR(t){"@babel/helpers - typeof";return(SR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _R(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function PR(){return(PR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ER(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function xR(t,e){return(xR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function kR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ER(t);if(e){var o=ER(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===SR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jR(t)}(this,r)}}function jR(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ER(t){return(ER=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var TR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xR(t,e)}(i,AC);var e,r,n,o=kR(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).mode=null,e&&C.extend(jR(r),e),r.CLASS_NAME="SuperMap.DensityAnalystService",r}return e=i,(r=[{key:"destroy",value:function(){PR(ER(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r=this,n=new Object;t instanceof OR&&(r.url=C.urlPathAppend(r.url,"datasets/"+t.dataset+"/densityanalyst/kernel"),r.mode="kernel"),OR.toObject(t,n);var o=C.toJSON(n);return r.url=C.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&_R(e.prototype,r),n&&_R(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function CR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var RR=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.routeTable=null,this.routeIDField=null,this.attributeFilter=null,this.eventTable=null,this.eventRouteIDField=null,this.measureField=null,this.measureStartField=null,this.measureEndField=null,this.measureOffsetField=null,this.errorInfoField=null,this.retainedFields=null,this.dataReturnOption=null,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.GenerateSpatialDataParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.routeTable&&(t.routeTable=null),t.routeIDField=null,t.attributeFilter=null,t.eventTable=null,t.eventRouteIDField=null,t.measureField=null,t.measureStartField=null,t.measureEndField=null,t.measureOffsetField=null,t.errorInfoField=null,t.dataReturnOption&&(t.dataReturnOption.destroy(),t.dataReturnOption=null)}}])&&CR(e.prototype,r),n&&CR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function AR(t){"@babel/helpers - typeof";return(AR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function LR(){return(LR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=DR(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function NR(t,e){return(NR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function IR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=DR(t);if(e){var o=DR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===AR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function DR(t){return(DR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var FR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NR(t,e)}(i,AC);var e,r,n,o=IR(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.GenerateSpatialDataService",r}return e=i,(r=[{key:"destroy",value:function(){LR(DR(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof RR){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){var e="datasets/"+t.routeTable+"/linearreferencing/generatespatialdata";return this.url=C.urlPathAppend(this.url,e),this.url=C.urlAppend(this.url,"returnContent=true"),C.toJSON(t)}}])&&MR(e.prototype,r),n&&MR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function BR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var GR=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataset=null,this.sourceFilter=null,this.referenceFilter=null,this.spatialRelationType=null,this.isBorderInside=null,this.returnFeature=null,this.returnGeoRelatedOnly=null,this.startRecord=0,this.expectCount=500,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.GeoRelationAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.sourceFilter&&t.sourceFilter.destroy(),t.sourceFilter=null,t.referenceFilter&&t.referenceFilter.destroy(),t.referenceFilter=null,t.dataset=null,t.spatialRelationType=null,t.isBorderInside=null,t.returnFeature=null,t.returnGeoRelatedOnly=null,t.startRecord=null,t.expectCount=null}}])&&BR(e.prototype,r),n&&BR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function UR(t){"@babel/helpers - typeof";return(UR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function VR(){return(VR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=HR(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function zR(t,e){return(zR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function qR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=HR(t);if(e){var o=HR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===UR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function HR(t){return(HR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var WR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zR(t,e)}(i,AC);var e,r,n,o=qR(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.GeoRelationAnalystService",r}return e=i,(r=[{key:"destroy",value:function(){VR(HR(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof GR){var r=this;r.url=C.urlPathAppend(r.url,"datasets/"+t.dataset+"/georelation");var n=C.toJSON(t);return r.url=C.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:n,scope:r,success:e,failure:e})}}}])&&JR(e.prototype,r),n&&JR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function YR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var XR=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.bounds=null,this.searchRadius=0,this.zValueFieldName=null,this.zValueScale=1,this.resolution=null,this.filterQueryParameter=null,this.outputDatasetName=null,this.outputDatasourceName=null,this.pixelFormat=null,this.dataset=null,this.inputPoints=null,this.InterpolationAnalystType="dataset",this.clipParam=null,C.extend(this,e),this.CLASS_NAME="SuperMap.InterpolationAnalystParameters")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)if("inputPoints"===r&&"geometry"===t.InterpolationAnalystType){for(var n=[],o=0;o<t.inputPoints.length;o++){var i=t.inputPoints[o],a={x:i.x,y:i.y,z:i.tag};n.push(a)}e[r]=n}else e[r]=t[r]}}],(r=[{key:"destroy",value:function(){var t=this;t.bounds=null,t.searchRadius=null,t.zValueFieldName=null,t.zValueScale=null,t.resolution=null,t.filterQueryParameter=null,t.outputDatasetName=null,t.pixelFormat=null}}])&&YR(e.prototype,r),n&&YR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function QR(t){"@babel/helpers - typeof";return(QR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function KR(){return(KR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function $R(t,e){return($R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=rA(t);if(e){var o=rA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===QR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return eA(t)}(this,r)}}function eA(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rA(t){return(rA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$R(t,e)}(i,XR);var e,r,n,o=tA(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).smooth=.1,e.tension=40,e.searchMode=null,e.expectedCount=12,e.maxPointCountForInterpolation=200,e.maxPointCountInNode=50,t&&C.extend(eA(e),t),e.CLASS_NAME="SuperMap.InterpolationRBFAnalystParameters",e}return e=i,n=[{key:"toObject",value:function(t,e){for(var r in t)e[r]=t[r]}}],(r=[{key:"destroy",value:function(){KR(rA(i.prototype),"destroy",this).call(this);var t=this;t.smooth=null,t.tension=null,t.searchMode=null,t.expectedCount=null,t.maxPointCountForInterpolation=null,t.maxPointCountInNode=null}}])&&ZR(e.prototype,r),n&&ZR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function oA(t){"@babel/helpers - typeof";return(oA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function aA(){return(aA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function sA(t,e){return(sA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function uA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=cA(t);if(e){var o=cA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===oA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return lA(t)}(this,r)}}function lA(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cA(t){return(cA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sA(t,e)}(i,XR);var e,r,n,o=uA(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t),t&&C.extend(lA(e),t),e.CLASS_NAME="SuperMap.InterpolationDensityAnalystParameters",e}return e=i,(r=[{key:"destroy",value:function(){aA(cA(i.prototype),"destroy",this).call(this)}}])&&iA(e.prototype,r),n&&iA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function hA(t){"@babel/helpers - typeof";return(hA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function yA(){return(yA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function dA(t,e){return(dA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function bA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=mA(t);if(e){var o=mA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===hA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return vA(t)}(this,r)}}function vA(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mA(t){return(mA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dA(t,e)}(i,XR);var e,r,n,o=bA(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).power=2,e.searchMode=null,e.expectedCount=12,t&&C.extend(vA(e),t),e.CLASS_NAME="SuperMap.InterpolationIDWAnalystParameters",e}return e=i,(r=[{key:"destroy",value:function(){yA(mA(i.prototype),"destroy",this).call(this);this.power=null,this.searchMode=null,this.expectedCount=null}}])&&pA(e.prototype,r),n&&pA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function wA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var OA=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.clipRegion=null,this.createResultDataset=!1,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=!0,C.extend(this,e),this.CLASS_NAME="SuperMap.ThiessenAnalystParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.clipRegion&&(t.clipRegion.destroy(),t.clipRegion=null),t.createResultDataset=null,t.resultDatasetName=null,t.resultDatasourceName=null,t.returnResultRegion=null}}])&&wA(e.prototype,r),n&&wA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function SA(t){"@babel/helpers - typeof";return(SA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _A(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function PA(){return(PA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=EA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function xA(t,e){return(xA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function kA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=EA(t);if(e){var o=EA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===SA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jA(t)}(this,r)}}function jA(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EA(t){return(EA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var TA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xA(t,e)}(i,XR);var e,r,n,o=kA(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=null,e.mean=null,e.angle=0,e.nugget=0,e.range=0,e.sill=0,e.variogramMode=$e.SPHERICAL,e.exponent=tr.EXP1,e.searchMode=null,e.expectedCount=12,e.maxPointCountForInterpolation=200,e.maxPointCountInNode=50,t&&C.extend(jA(e),t),e.CLASS_NAME="SuperMap.InterpolationKrigingAnalystParameters",e}return e=i,(r=[{key:"destroy",value:function(){PA(EA(i.prototype),"destroy",this).call(this);var t=this;t.type=null,t.mean=null,t.angle=null,t.nugget=null,t.range=null,t.sill=null,t.variogramMode=null,t.exponent=null,t.searchMode=null,t.expectedCount=null,t.maxPointCountForInterpolation=null,t.maxPointCountInNode=null}}])&&_A(e.prototype,r),n&&_A(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function CA(t){"@babel/helpers - typeof";return(CA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function AA(){return(AA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=IA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function MA(t,e){return(MA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function LA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=IA(t);if(e){var o=IA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===CA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return NA(t)}(this,r)}}function NA(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IA(t){return(IA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var DA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MA(t,e)}(i,AC);var e,r,n,o=LA(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).mode=null,e&&C.extend(NA(r),e),r}return e=i,(r=[{key:"destroy",value:function(){AA(IA(i.prototype),"destroy",this).call(this),this.mode=null,this.CLASS_NAME="SuperMap.InterpolationAnalystService"}},{key:"processAsync",value:function(t,e){var r={},n=this;t instanceof fA?(n.mode="Density","geometry"===t.InterpolationAnalystType?n.url=C.urlPathAppend(n.url,"geometry/interpolation/density"):n.url=C.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/density")):t instanceof gA?(n.mode="IDW","geometry"===t.InterpolationAnalystType?n.url=C.urlPathAppend(n.url,"geometry/interpolation/idw"):n.url=C.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/idw")):t instanceof nA?(n.mode="RBF","geometry"===t.InterpolationAnalystType?n.url=C.urlPathAppend(n.url,"geometry/interpolation/rbf"):n.url=C.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/rbf")):t instanceof TA&&(n.mode="Kriging","geometry"===t.InterpolationAnalystType?n.url=C.urlPathAppend(n.url,"geometry/interpolation/kriging"):n.url=C.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/kriging")),XR.toObject(t,r);var o=C.toJSON(r);return n.url=C.urlAppend(n.url,"returnContent=true"),n.request({method:"POST",data:o,scope:n,success:e,failure:e})}}])&&RA(e.prototype,r),n&&RA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function FA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var BA=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.extractRegion=null,this.expression=null,this.isZip=!1,this.ignoreNoValue=!1,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,C.extend(this,e),this.CLASS_NAME="SuperMap.MathExpressionAnalysisParameters")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)if("dataset"!==r&&(e[r]=t[r]),"extractRegion"===r&&t[r]){for(var n=t[r].components[0].components,o={},i=[],a=n.length,s=0;s<a-1;s++){var u={};u.x=n[s].x,u.y=n[s].y,i.push(u)}o.points=i,o.type="REGION",e[r]=o}}}],(r=[{key:"destroy",value:function(){var t=this;t.dataset=null,t.bounds=null,t.expression=null,t.isZip=!0,t.ignoreNoValue=!0,t.targetDatasource=null,t.resultGridName=null,t.deleteExistResultDataset=null}}])&&FA(e.prototype,r),n&&FA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function GA(t){"@babel/helpers - typeof";return(GA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function JA(){return(JA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function VA(t,e){return(VA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function zA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=qA(t);if(e){var o=qA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===GA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function qA(t){return(qA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var HA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VA(t,e)}(i,AC);var e,r,n,o=zA(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.MathExpressionAnalysisService",r}return e=i,(r=[{key:"destroy",value:function(){JA(qA(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof BA&&(r.url=C.urlPathAppend(r.url,"datasets/"+t.dataset+"/mathanalyst")),BA.toObject(t,n);var o=C.toJSON(n);return r.url=C.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&UA(e.prototype,r),n&&UA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function WA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var YA=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.operation=qe.UNION,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.OverlayAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.operation=null}}])&&WA(e.prototype,r),n&&WA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function XA(t){"@babel/helpers - typeof";return(XA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ZA(){return(ZA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eM(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function KA(t,e){return(KA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function $A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=eM(t);if(e){var o=eM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===XA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return tM(t)}(this,r)}}function tM(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eM(t){return(eM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KA(t,e)}(i,YA);var e,r,n,o=$A(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).operateDataset=null,e.operateDatasetFields=[],e.operateDatasetFilter=new kb,e.operateRegions=[],e.sourceDataset=null,e.sourceDatasetFields=[],e.sourceDatasetFilter=new kb,e.tolerance=0,e.resultSetting=new XC,C.extend(tM(e),t),e.CLASS_NAME="SuperMap.DatasetOverlayAnalystParameters",e}return e=i,n=[{key:"toObject",value:function(t,e){for(var r in t)if("sourceDataset"!==r)if("operateRegions"===r){e.operateRegions=[];var n=t.operateRegions;for(var o in n)n.hasOwnProperty(o)&&(e.operateRegions[o]=yr.fromGeometry(n[o]))}else"resultSetting"===r?e.dataReturnOption=t.resultSetting:e[r]=t[r]}}],(r=[{key:"destroy",value:function(){ZA(eM(i.prototype),"destroy",this).call(this);var t=this;if(t.operateDataset=null,t.operateDatasetFields=null,t.operateDatasetFilter&&(t.operateDatasetFilter.destroy(),t.operateDatasetFilter=null),t.operateRegions){for(var e=0,r=t.operateRegions,n=r.length;e<n;e++)r[e].destroy();t.operateRegions=null}t.sourceDataset=null,t.sourceDatasetFields=null,t.sourceDatasetFilter&&(t.sourceDatasetFilter.destroy(),t.sourceDatasetFilter=null),t.tolerance=null,t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null)}}])&&QA(e.prototype,r),n&&QA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function nM(t){"@babel/helpers - typeof";return(nM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function iM(){return(iM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lM(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function aM(t,e){return(aM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function sM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=lM(t);if(e){var o=lM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===nM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return uM(t)}(this,r)}}function uM(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lM(t){return(lM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aM(t,e)}(i,YA);var e,r,n,o=sM(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t),t&&t.operateGeometry&&(e.operateGeometry=t.operateGeometry),t&&t.sourceGeometry&&(e.sourceGeometry=t.sourceGeometry),t&&t.operateGeometries&&(e.operateGeometries=t.operateGeometries),t&&t.sourceGeometries&&(e.sourceGeometries=t.sourceGeometries),t&&C.extend(uM(e),t),e.CLASS_NAME="SuperMap.GeometryOverlayAnalystParameters",e}return e=i,n=[{key:"toObject",value:function(t,e){for(var r in t)if("sourceGeometry"===r)e.sourceGeometry=yr.fromGeometry(t.sourceGeometry);else if("sourceGeometries"===r){for(var n=[],o=0;o<t.sourceGeometries.length;o++)n.push(yr.fromGeometry(t.sourceGeometries[o]));e.sourceGeometries=n}else if("operateGeometry"===r)e.operateGeometry=yr.fromGeometry(t.operateGeometry);else if("operateGeometries"===r){for(var i=[],a=0;a<t.operateGeometries.length;a++)i.push(yr.fromGeometry(t.operateGeometries[a]));e.operateGeometries=i}else e[r]=t[r]}}],(r=[{key:"destroy",value:function(){iM(lM(i.prototype),"destroy",this).call(this);var t=this;t.sourceGeometry&&(t.sourceGeometry.destroy(),t.sourceGeometry=null),t.sourceGeometries&&(t.sourceGeometries.destroy(),t.sourceGeometries=null),t.sourceGeometry&&(t.sourceGeometry.destroy(),t.sourceGeometry=null),t.operateGeometries&&(t.operateGeometries.destroy(),t.operateGeometries=null)}}])&&oM(e.prototype,r),n&&oM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function fM(t){"@babel/helpers - typeof";return(fM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pM(){return(pM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vM(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function yM(t,e){return(yM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function dM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=vM(t);if(e){var o=vM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===fM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bM(t)}(this,r)}}function bM(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vM(t){return(vM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yM(t,e)}(i,AC);var e,r,n,o=dM(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).mode=null,e&&C.extend(bM(r),e),r.CLASS_NAME="SuperMap.OverlayAnalystService",r}return e=i,(r=[{key:"destroy",value:function(){pM(vM(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r={},n=this;t instanceof rM?(n.mode="datasets",n.url=C.urlPathAppend(n.url,"datasets/"+t.sourceDataset+"/overlay"),rM.toObject(t,r)):t instanceof cM&&(n.mode="geometry",t.operateGeometries&&t.sourceGeometries?(n.url=C.urlPathAppend(n.url,"geometry/overlay/batch"),n.url=C.urlAppend(n.url,"ignoreAnalystParam=true")):n.url=C.urlPathAppend(n.url,"geometry/overlay"),cM.toObject(t,r)),this.returnContent=!0;var o=C.toJSON(r);return n.request({method:"POST",data:o,scope:n,success:e,failure:e})}},{key:"dataFormat",value:function(){return[ke.GEOJSON,ke.ISERVER,ke.FGB]}}])&&hM(e.prototype,r),n&&hM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function gM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var wM=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)return this;this.sourceRoute=null,this.point=null,this.tolerance=null,this.isIgnoreGap=!1,C.extend(this,e),this.CLASS_NAME="SuperMap.RouteCalculateMeasureParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.sourceRoute=null,t.point=null,t.tolerance&&(t.tolerance=null),t.isIgnoreGap&&(t.isIgnoreGap=!1)}}])&&gM(e.prototype,r),n&&gM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function OM(t){"@babel/helpers - typeof";return(OM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _M(){return(_M="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kM(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function PM(t,e){return(PM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function xM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=kM(t);if(e){var o=kM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===OM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function kM(t){return(kM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PM(t,e)}(i,AC);var e,r,n,o=xM(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.RouteCalculateMeasureService",r}return e=i,(r=[{key:"destroy",value:function(){_M(kM(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof wM){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){return this.url=C.urlPathAppend(this.url,"geometry/calculatemeasure"),this.url=C.urlAppend(this.url,"returnContent=true"),C.toJSON(t)}}])&&SM(e.prototype,r),n&&SM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function EM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var TM=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)return this;this.sourceRoute=null,this.dataset=null,this.routeIDField=null,this.routeID=null,this.type=null,this.measure=null,this.offset=0,this.isIgnoreGap=!1,this.startMeasure=null,this.endMeasure=null;var r=e.sourceRoute,n={};if(r&&r instanceof m&&r.components){n.type=r.type,n.parts=r.parts;for(var o=[],i=0,a=r.components.length;i<a;i++)o=o.concat(r.components[i].components);n.points=o,e.sourceRoute=n}C.extend(this,e),this.CLASS_NAME="SuperMap.RouteLocatorParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.sourceRoute=null,t.type=null,t.measure=null,t.offset=0,t.isIgnoreGap=!1,t.startMeasure=null,t.endMeasure=null,t.dataset=null,t.routeID=null,t.routeIDField=null}}])&&EM(e.prototype,r),n&&EM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function CM(t){"@babel/helpers - typeof";return(CM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function AM(){return(AM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=NM(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function MM(t,e){return(MM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function LM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=NM(t);if(e){var o=NM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===CM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function NM(t){return(NM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var IM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MM(t,e)}(i,AC);var e,r,n,o=LM(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.RouteLocatorService",r}return e=i,(r=[{key:"destroy",value:function(){AM(NM(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof TM){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){var e="geometry/routelocator";return t.dataset&&(e="datasets/"+t.dataset+"/linearreferencing/routelocator",t.sourceRoute=null),this.url=C.urlPathAppend(this.url,e),this.url=C.urlAppend(this.url,"returnContent=true"),C.toJSON(t)}}])&&RM(e.prototype,r),n&&RM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function DM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var FM=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clipRegion=null,this.datumValue=0,this.expectedZValues=null,this.interval=0,this.resampleTolerance=0,this.smoothMethod=We.BSPLINE,this.smoothness=0,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.SurfaceAnalystParametersSetting"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.clipRegion&&(t.clipRegion.destroy(),t.clipRegion=null),t.datumValue=null,t.expectedZValues=null,t.interval=null,t.resampleTolerance=null,t.smoothMethod=null,t.smoothness=null}},{key:"toJSON",value:function(){var t="'datumValue':"+C.toJSON(this.datumValue);if(t+=",'interval':"+C.toJSON(this.interval),t+=",'resampleTolerance':"+C.toJSON(this.resampleTolerance),t+=",'smoothMethod':"+C.toJSON(this.smoothMethod),t+=",'smoothness':"+C.toJSON(this.smoothness),null!=this.expectedZValues&&(t+=",'expectedZValues':"+C.toJSON(this.expectedZValues)),null!=this.clipRegion){var e=this.clipRegion;this.clipRegion instanceof m&&this.clipRegion.components&&(e=yr.fromGeometry(this.clipRegion)),t+=",'clipRegion':"+C.toJSON(e)}return"{"+t+"}"}}])&&DM(e.prototype,r),n&&DM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function BM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var GM=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resolution=0,this.extractParameter=new FM,this.resultSetting=new XC,this.surfaceAnalystMethod=Ye.ISOLINE,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.SurfaceAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.resolution=null,t.extractParameter&&(t.extractParameter.destroy(),t.extractParameter=null),t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null),t.surfaceAnalystMethod=null}}])&&BM(e.prototype,r),n&&BM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function UM(t){"@babel/helpers - typeof";return(UM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function VM(){return(VM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=WM(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function zM(t,e){return(zM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function qM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=WM(t);if(e){var o=WM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===UM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return HM(t)}(this,r)}}function HM(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WM(t){return(WM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var YM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zM(t,e)}(i,GM);var e,r,n,o=qM(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).dataset=null,e.filterQueryParameter=new kb,e.zValueFieldName=null,t&&C.extend(HM(e),t),e.CLASS_NAME="SuperMap.DatasetSurfaceAnalystParameters",e}return e=i,n=[{key:"toObject",value:function(t,e){for(var r in t)if("filterQueryParameter"===r&&(e.filterQueryParameter=t.filterQueryParameter),"extractParameter"===r)t.extractParameter.clipRegion instanceof m&&t.extractParameter.clipRegion.components&&(t.extractParameter.clipRegion=yr.fromGeometry(t.extractParameter.clipRegion)),e.extractParameter=t.extractParameter;else{if("dataset"===r)continue;if("surfaceAnalystMethod"===r)continue;e[r]=t[r]}}}],(r=[{key:"destroy",value:function(){VM(WM(i.prototype),"destroy",this).call(this);var t=this;t.dataset=null,t.filterQueryParameter&&(t.filterQueryParameter.destroy(),t.filterQueryParameter=null),t.zValueFieldName=null}}])&&JM(e.prototype,r),n&&JM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function XM(t){"@babel/helpers - typeof";return(XM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ZM(){return(ZM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eL(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function KM(t,e){return(KM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function $M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=eL(t);if(e){var o=eL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===XM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return tL(t)}(this,r)}}function tL(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eL(t){return(eL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KM(t,e)}(i,GM);var e,r,n,o=$M(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).points=null,e.zValues=null,t&&C.extend(tL(e),t),e.CLASS_NAME="SuperMap.GeometrySurfaceAnalystParameters",e}return e=i,(r=[{key:"destroy",value:function(){ZM(eL(i.prototype),"destroy",this).call(this);if(this.points){for(var t=0,e=this.points,r=e.length;t<r;t++)e[t].destroy();this.points=null}this.zValues=null}}])&&QM(e.prototype,r),n&&QM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function nL(t){"@babel/helpers - typeof";return(nL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function iL(){return(iL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uL(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function aL(t,e){return(aL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function sL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=uL(t);if(e){var o=uL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===nL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function uL(t){return(uL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aL(t,e)}(i,AC);var e,r,n,o=sL(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.SurfaceAnalystService",r}return e=i,(r=[{key:"destroy",value:function(){iL(uL(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof GM){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){var e="",r={};if(t instanceof YM)this.url=C.urlPathAppend(this.url,"datasets/"+t.dataset+"/"+t.surfaceAnalystMethod.toLowerCase()),YM.toObject(t,r),e=C.toJSON(r);else{if(!(t instanceof rL))return;this.url=C.urlPathAppend(this.url,"geometry/"+t.surfaceAnalystMethod.toLowerCase()),e=C.toJSON(t)}return this.returnContent=!0,e}},{key:"dataFormat",value:function(){return[ke.GEOJSON,ke.ISERVER,ke.FGB]}}])&&oL(e.prototype,r),n&&oL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function cL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var fL=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName="",this.planCurvatureName="",this.deleteExistResultDataset=!1,C.extend(this,e),this.CLASS_NAME="SuperMap.TerrainCurvatureCalculationParameters")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(r=[{key:"destroy",value:function(){var t=this;t.dataset=null,t.zFactor=1,t.averageCurvatureName=null,t.profileCurvatureName=null,t.planCurvatureName=null,t.deleteExistResultDataset=!0}}])&&cL(e.prototype,r),n&&cL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function hL(t){"@babel/helpers - typeof";return(hL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function yL(){return(yL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vL(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function dL(t,e){return(dL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function bL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=vL(t);if(e){var o=vL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===hL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function vL(t){return(vL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dL(t,e)}(i,AC);var e,r,n,o=bL(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.TerrainCurvatureCalculationService",r}return e=i,(r=[{key:"destroy",value:function(){yL(vL(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof fL&&(r.url=C.urlPathAppend(r.url,"datasets/"+t.dataset+"/terraincalculation/curvature")),fL.toObject(t,n);var o=C.toJSON(n);return r.url=C.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&pL(e.prototype,r),n&&pL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function gL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var wL=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.cutFillType="GRID",this.afterCutFillDataset=null,this.resultDataset=null,this.buildPyramid=null,this.deleteExistResultDataset=null,this.bufferRadius=null,this.isRoundHead=null,this.line3D=null,this.region=null,this.region3D=null,C.extend(this,e),this.CLASS_NAME="SuperMap.TerrainCutFillCalculationParameters")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(r=[{key:"destroy",value:function(){var t=this;t.cutFillType=null,t.afterCutFillDataset=null,t.resultDataset=null,t.buildPyramid=null,t.deleteExistResultDataset=null,t.bufferRadius=null,t.isRoundHead=null,t.line3D=null,t.region=null,t.region3D=null}}])&&gL(e.prototype,r),n&&gL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function OL(t){"@babel/helpers - typeof";return(OL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _L(){return(_L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kL(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function PL(t,e){return(PL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function xL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=kL(t);if(e){var o=kL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===OL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function kL(t){return(kL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PL(t,e)}(i,AC);var e,r,n,o=xL(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.TerrainCutFillCalculationService",r}return e=i,(r=[{key:"destroy",value:function(){_L(kL(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof wL&&(r.url=C.urlPathAppend(r.url,"datasets/"+t.dataset+"/terraincalculation/cutfill")),wL.toObject(t,n);var o=C.toJSON(n);return r.url=C.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&SL(e.prototype,r),n&&SL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function EL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var TL=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.terrainAnalystSetting=null,this.resultDatasetName=null,this.deleteExistResultDataset=null,C.extend(this,e),this.CLASS_NAME="SuperMap.TerrainAspectCalculationParameters")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.terrainAnalystSetting=null,this.resultDatasetName=null,this.deleteExistResultDataset=null}}])&&EL(e.prototype,r),n&&EL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function CL(t){"@babel/helpers - typeof";return(CL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function AL(){return(AL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=NL(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ML(t,e){return(ML=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function LL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=NL(t);if(e){var o=NL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===CL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function NL(t){return(NL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var IL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ML(t,e)}(i,AC);var e,r,n,o=LL(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.TerrainAspectCalculationService",r}return e=i,(r=[{key:"destroy",value:function(){AL(NL(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof TL&&(r.url=C.urlPathAppend(r.url,"datasets/"+t.dataset+"/terraincalculation/aspect")),TL.toObject(t,n);var o=C.toJSON(n);return r.url=C.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&RL(e.prototype,r),n&&RL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function DL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var FL=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.terrainAnalystSetting=null,this.resultDatasetName=null,this.deleteExistResultDataset=null,this.zFactor=null,this.slopeType=null,C.extend(this,e),this.CLASS_NAME="SuperMap.TerrainSlopeCalculationParameters")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(r=[{key:"destroy",value:function(){var t=this;t.terrainAnalystSetting=null,t.resultDatasetName=null,t.deleteExistResultDataset=null,t.zFactor=null,t.slopeType=null}}])&&DL(e.prototype,r),n&&DL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function BL(t){"@babel/helpers - typeof";return(BL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function GL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function UL(){return(UL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zL(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function JL(t,e){return(JL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function VL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=zL(t);if(e){var o=zL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===BL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function zL(t){return(zL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JL(t,e)}(i,AC);var e,r,n,o=VL(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.TerrainSlopeCalculationService",r}return e=i,(r=[{key:"destroy",value:function(){UL(zL(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof FL&&(r.url=C.urlPathAppend(r.url,"datasets/"+t.dataset+"/terraincalculation/slope")),FL.toObject(t,n);var o=C.toJSON(n);return r.url=C.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&GL(e.prototype,r),n&&GL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function HL(t){"@babel/helpers - typeof";return(HL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function WL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function YL(){return(YL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=KL(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function XL(t,e){return(XL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function QL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=KL(t);if(e){var o=KL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===HL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ZL(t)}(this,r)}}function ZL(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KL(t){return(KL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XL(t,e)}(i,OA);var e,r,n,o=QL(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).filterQueryParameter=null,e.dataset=null,t&&C.extend(ZL(e),t),e.CLASS_NAME="SuperMap.DatasetThiessenAnalystParameters",e}return e=i,n=[{key:"toObject",value:function(t,e){for(var r in t)"clipRegion"===r?e.clipRegion=yr.fromGeometry(t.clipRegion):e[r]=t[r]}}],(r=[{key:"destroy",value:function(){YL(KL(i.prototype),"destroy",this).call(this);this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null)}}])&&WL(e.prototype,r),n&&WL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function tN(t){"@babel/helpers - typeof";return(tN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function rN(){return(rN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=aN(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function nN(t,e){return(nN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function oN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=aN(t);if(e){var o=aN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===tN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return iN(t)}(this,r)}}function iN(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aN(t){return(aN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var sN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nN(t,e)}(i,OA);var e,r,n,o=oN(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).points=null,t&&C.extend(iN(e),t),e.CLASS_NAME="SuperMap.GeometryThiessenAnalystParameters",e}return e=i,n=[{key:"toObject",value:function(t,e){for(var r in t)"clipRegion"===r?e.clipRegion=yr.fromGeometry(t.clipRegion):e[r]=t[r]}}],(r=[{key:"destroy",value:function(){rN(aN(i.prototype),"destroy",this).call(this);if(this.points){for(var t=this.points.length-1;t>=0;t--)this.points[t].destroy();this.points=null}}}])&&eN(e.prototype,r),n&&eN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function uN(t){"@babel/helpers - typeof";return(uN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function cN(){return(cN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yN(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function fN(t,e){return(fN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=yN(t);if(e){var o=yN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===uN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return pN(t)}(this,r)}}function pN(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yN(t){return(yN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fN(t,e)}(i,AC);var e,r,n,o=hN(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).mode=null,e&&C.extend(pN(r),e),r.CLASS_NAME="SuperMap.ThiessenAnalystService",r}return e=i,(r=[{key:"destroy",value:function(){cN(yN(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r={},n=this;t instanceof $L?(n.mode="datasets",n.url=C.urlPathAppend(n.url,"datasets/"+t.dataset+"/thiessenpolygon"),$L.toObject(t,r)):t instanceof sN&&(n.mode="geometry",n.url=C.urlPathAppend(n.url,"geometry/thiessenpolygon"),sN.toObject(t,r));var o=C.toJSON(r);return this.returnContent=!0,n.request({method:"POST",data:o,scope:n,success:e,failure:e})}},{key:"dataFormat",value:function(){return[ke.GEOJSON,ke.ISERVER,ke.FGB]}}])&&lN(e.prototype,r),n&&lN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function bN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var vN=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.referenceDatasetName=null,this.referenceFilterQueryParameter=null,this.createResultDataset=null,this.resultDatasetName=null,this.resultDatasourceName=null,this.minDistance=null,this.maxDistance=null,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.MinDistanceAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.referenceDatasetName=null,t.dataset=null,t.referenceFilterQueryParameter=null,t.createResultDataset=null,t.resultDatasetName=null,t.resultDatasourceName=null,t.minDistance=null,t.maxDistance=null}}])&&bN(e.prototype,r),n&&bN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function mN(t){"@babel/helpers - typeof";return(mN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function wN(){return(wN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=PN(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ON(t,e){return(ON=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function SN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=PN(t);if(e){var o=PN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===mN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _N(t)}(this,r)}}function _N(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PN(t){return(PN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ON(t,e)}(i,vN);var e,r,n,o=SN(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).dataset=null,e.inputFilterQueryParameter=null,t&&C.extend(_N(e),t),e.CLASS_NAME="SuperMap.DatasetMinDistanceAnalystParameters",e}return e=i,(r=[{key:"destroy",value:function(){wN(PN(i.prototype),"destroy",this).call(this);this.dataset=null,this.inputFilterQueryParameter=null}}])&&gN(e.prototype,r),n&&gN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function kN(t){"@babel/helpers - typeof";return(kN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function EN(){return(EN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=AN(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function TN(t,e){return(TN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function CN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=AN(t);if(e){var o=AN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===kN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return RN(t)}(this,r)}}function RN(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AN(t){return(AN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var MN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TN(t,e)}(i,vN);var e,r,n,o=CN(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).inputGeometries=null,t&&C.extend(RN(e),t),e.CLASS_NAME="SuperMap.GeometryMinDistanceAnalystParameters",e}return e=i,n=[{key:"toObject",value:function(t,e){for(var r in t)if("inputGeometries"===r&&t.inputGeometries){for(var n=[],o=0;o<t.inputGeometries.length;o++)n.push(yr.fromGeometry(t.inputGeometries[o]));e.inputGeometries=n}else e[r]=t[r]}}],(r=[{key:"destroy",value:function(){EN(AN(i.prototype),"destroy",this).call(this);this.inputGeometries=null}}])&&jN(e.prototype,r),n&&jN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function LN(t){"@babel/helpers - typeof";return(LN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function IN(){return(IN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=GN(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function DN(t,e){return(DN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function FN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=GN(t);if(e){var o=GN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===LN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return BN(t)}(this,r)}}function BN(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GN(t){return(GN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var UN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DN(t,e)}(i,AC);var e,r,n,o=FN(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e&&C.extend(BN(r),e),r.CLASS_NAME="SuperMap.MinDistanceAnalystService",r}return e=i,(r=[{key:"destroy",value:function(){IN(GN(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof xN?(r.url=C.urlPathAppend(r.url,"datasets/"+t.dataset+"/mindistance"),n=t):t instanceof MN&&(r.url=C.urlPathAppend(r.url,"geometry/mindistance"),MN.toObject(t,n));var o=C.toJSON(n);return r.url=C.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&NN(e.prototype,r),n&&NN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function JN(t){"@babel/helpers - typeof";return(JN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zN(){return(zN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=YN(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function qN(t,e){return(qN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function HN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=YN(t);if(e){var o=YN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===JN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return WN(t)}(this,r)}}function WN(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YN(t){return(YN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var XN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qN(t,e)}(i,AC);var e,r,n,o=HN(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e&&C.extend(WN(r),e),r.CLASS_NAME="SuperMap.ConvexHullAnalystService",r}return e=i,(r=[{key:"destroy",value:function(){zN(YN(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r=this;r.url=C.urlPathAppend(r.url,"geometry/3d/convexhull");var n=C.toJSON(t);return r.url=C.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:n,scope:r,success:e,failure:e})}}])&&VN(e.prototype,r),n&&VN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function QN(t){"@babel/helpers - typeof";return(QN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ZN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function KN(){return(KN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rI(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function $N(t,e){return($N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=rI(t);if(e){var o=rI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===QN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return eI(t)}(this,r)}}function eI(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rI(t){return(rI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$N(t,e)}(i,AC);var e,r,n,o=tI(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e&&C.extend(eI(r),e),r.CLASS_NAME="SuperMap.GeometryBatchAnalystService",r}return e=i,(r=[{key:"processAsync",value:function(t,e){var r=this;r.url=C.urlPathAppend(r.url,"geometry/batchanalyst"),r.url=C.urlAppend(r.url,"returnContent=true&ignoreAnalystParam=true");var n=r._processParams(t),o=C.toJSON(n);return r.request({method:"POST",data:o,scope:r,success:e,failure:e})}},{key:"_processParams",value:function(t){var e=this;if(C.isArray(t)){var r=[];return t.map(function(t){return r.push(e._toJSON(t)),t}),r}}},{key:"_toJSON",value:function(t){var e={};if("buffer"===t.analystName)e.analystName="buffer",e.param={},fR.toObject(t.param,e.param);else if("overlay"===t.analystName)e.analystName="overlay",e.param={},cM.toObject(t.param,e.param);else if("interpolationDensity"===t.analystName)e.analystName="interpolationDensity",e.param={},XR.toObject(t.param,e.param);else if("interpolationidw"===t.analystName)e.analystName="interpolationidw",e.param={},XR.toObject(t.param,e.param);else if("interpolationRBF"===t.analystName)e.analystName="interpolationRBF",e.param={},XR.toObject(t.param,e.param);else if("interpolationKriging"===t.analystName)e.analystName="interpolationKriging",e.param={},XR.toObject(t.param,e.param);else{if("thiessenpolygon"!==t.analystName)return t;e.analystName="thiessenpolygon",e.param={},sN.toObject(t.param,e.param)}return e}},{key:"destroy",value:function(){KN(rI(i.prototype),"destroy",this).call(this)}}])&&ZN(e.prototype,r),n&&ZN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function oI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var iI=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"getAreaSolarRadiationResult",value:function(t,e,r){var n=this;return new UC(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"bufferAnalysis",value:function(t,e,r){var n=this;return new gR(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"densityAnalysis",value:function(t,e,r){var n=this;return new TR(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"generateSpatialData",value:function(t,e,r){var n=this;return new FR(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"geoRelationAnalysis",value:function(t,e,r){var n=this;return new WR(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"interpolationAnalysis",value:function(t,e,r){var n=this;return new DA(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"mathExpressionAnalysis",value:function(t,e,r){var n=this;return new HA(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"overlayAnalysis",value:function(t,e,r){var n=this;return new mM(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"routeCalculateMeasure",value:function(t,e,r){var n=this;return new jM(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"routeLocate",value:function(t,e,r){var n=this;return new IM(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"surfaceAnalysis",value:function(t,e,r){var n=this;return new lL(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"terrainCurvatureCalculate",value:function(t,e,r){var n=this;return new mL(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"terrainCutFillCalculate",value:function(t,e,r){var n=this;return new jL(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"terrainAspectCalculate",value:function(t,e,r){var n=this;return new IL(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"terrainSlopeCalculate",value:function(t,e,r){var n=this;return new qL(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"thiessenAnalysis",value:function(t,e,r){var n=this;return new dN(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"minDistanceAnalysis",value:function(t,e,r){var n=this;return new UN(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"convexHullAnalysis",value:function(t,e,r){var n=this;return new XN(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"geometrybatchAnalysis",value:function(t,e,r){for(var n=new nI(this.url,{format:this._processFormat(r)}),o=[],i=0;i<t.length;i++){var a=t[i];o.push({analystName:a.analystName,param:a.param})}return n.processAsync(o,e)}},{key:"_processFormat",value:function(t){return t||ke.GEOJSON}}])&&oI(e.prototype,r),n&&oI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function aI(t){"@babel/helpers - typeof";return(aI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function uI(t,e){return(uI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=cI(t);if(e){var o=cI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===aI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function cI(t){return(cI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uI(t,e)}(i,Oh);var e,r,n,o=lI(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e))._spatialAnalystService=new iI(t,e),r}return e=i,(r=[{key:"getAreaSolarRadiationResult",value:function(t,e,r){return this._spatialAnalystService.getAreaSolarRadiationResult(t,e,r)}},{key:"bufferAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.bufferAnalysis(t,e,r)}},{key:"densityAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.densityAnalysis(t,e,r)}},{key:"generateSpatialData",value:function(t,e,r){return this._spatialAnalystService.generateSpatialData(t,e,r)}},{key:"geoRelationAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.geoRelationAnalysis(t,e,r)}},{key:"interpolationAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.interpolationAnalysis(t,e,r)}},{key:"mathExpressionAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.mathExpressionAnalysis(t,e,r)}},{key:"overlayAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.overlayAnalysis(t,e,r)}},{key:"routeCalculateMeasure",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.routeCalculateMeasure(t,e,r)}},{key:"routeLocate",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.routeLocate(t,e,r)}},{key:"surfaceAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.surfaceAnalysis(t,e,r)}},{key:"terrainCurvatureCalculate",value:function(t,e,r){return this._spatialAnalystService.terrainCurvatureCalculate(t,e,r)}},{key:"terrainCutFillCalculate",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.terrainCutFillCalculate(t,e,r)}},{key:"terrainAspectCalculate",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.terrainAspectCalculate(t,e,r)}},{key:"terrainSlopeCalculate",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.terrainSlopeCalculate(t,e,r)}},{key:"thiessenAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.thiessenAnalysis(t,e,r)}},{key:"minDistanceAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.minDistanceAnalysis(t,e,r)}},{key:"convexHullAnalysis",value:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.convexHullAnalysis(t,e,r)}},{key:"geometrybatchAnalysis",value:function(t,e,r){for(var n=0;n<t.length;n++)t[n].param=this._processParams(t[n].param);return this._spatialAnalystService.geometrybatchAnalysis(t,e,r)}},{key:"_processParams",value:function(t){if(!t)return{};if(t.bounds&&(t.bounds=Pr.toSuperMapBounds(t.bounds)),t.inputPoints)for(var e=0;e<t.inputPoints.length;e++){var r=t.inputPoints[e];Pr.isArray(r)&&(t.inputPoints[e]={x:r[0],y:r[1],tag:r[2]})}if(t.points)for(var n=0;n<t.points.length;n++){var o=t.points[n];t.points[n]=Pr.toSuperMapPoint(o)}if(t.point&&(t.point=Pr.toSuperMapPoint(t.point)),t.extractRegion&&(t.extractRegion=Pr.toSuperMapGeometry(t.extractRegion)),t.extractParameter&&t.extractParameter.clipRegion&&(t.extractParameter.clipRegion=Pr.toSuperMapGeometry(t.extractParameter.clipRegion)),t.clipParam&&t.clipParam.clipRegion&&(t.clipParam.clipRegion=Pr.toSuperMapGeometry(t.clipParam.clipRegion)),t.sourceRoute&&t.sourceRoute){var i={type:"LINEM"};i.parts=[t.sourceRoute.geometry.coordinates.length],i.points=[];for(var a=0;a<t.sourceRoute.geometry.coordinates.length;a++){var s=t.sourceRoute.geometry.coordinates[a];i.points=i.points.concat({x:s[0],y:s[1],measure:s[2]})}t.sourceRoute=i}if(t.operateRegions&&Pr.isArray(t.operateRegions)&&t.operateRegions.map(function(e,r){return t.operateRegions[r]=Pr.toSuperMapGeometry(e),t.operateRegions[r]}),t.sourceGeometry){var u=null;t.sourceGeometrySRID&&(u=t.sourceGeometrySRID),t.sourceGeometry=Pr.toSuperMapGeometry(t.sourceGeometry),u&&(t.sourceGeometry.SRID=u),delete t.sourceGeometry.sourceGeometrySRID}if(t.operateGeometry&&(t.operateGeometry=Pr.toSuperMapGeometry(t.operateGeometry)),t.sourceGeometries){for(var l=[],c=0;c<t.sourceGeometries.length;c++)l.push(Pr.toSuperMapGeometry(t.sourceGeometries[c]));t.sourceGeometries=l}if(t.operateGeometries){for(var f=[],h=0;h<t.operateGeometries.length;h++)f.push(Pr.toSuperMapGeometry(t.operateGeometries[h]));t.operateGeometries=f}if(t.inputGeometries){for(var p=[],y=0;y<t.inputGeometries.length;y++)p.push(Pr.toSuperMapGeometry(t.inputGeometries[y]));t.inputGeometries=p}return t.sourceRoute&&t.sourceRoute.components&&Pr.isArray(t.sourceRoute.components)&&t.sourceRoute.components.map(function(e,r){return t.sourceRoute.components[r]=Pr.toSuperMapGeometry(e),t.sourceRoute.components[r]}),t}},{key:"_processFormat",value:function(t){return t||ke.GEOJSON}}])&&sI(e.prototype,r),n&&sI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function hI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var pI=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetNames=null,this.dataSourceNames=null,this.joinItems=null,this.themes=null,this.displayFilters=null,this.displayOrderBys=null,this.fieldValuesDisplayFilter=null,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ThemeParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;if(t.datasetNames=null,t.dataSourceNames=null,t.joinItems){for(var e=0,r=t.joinItems,n=r.length;e<n;e++)r[e].destroy();t.joinItems=null}if(t.themes){for(var o=0,i=t.themes,a=i.length;o<a;o++)i[o].destroy();t.themes=null}}}])&&hI(e.prototype,r),n&&hI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function yI(t){"@babel/helpers - typeof";return(yI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bI(){return(bI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wI(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function vI(t,e){return(vI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function mI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=wI(t);if(e){var o=wI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===yI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gI(t)}(this,r)}}function gI(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wI(t){return(wI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var OI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vI(t,e)}(i,Th);var e,r,n,o=mI(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e&&C.extend(gI(r),e),r.url=C.urlPathAppend(r.url,"tempLayersSet"),r.CLASS_NAME="SuperMap.ThemeService",r}return e=i,(r=[{key:"destroy",value:function(){bI(wI(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof pI){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){var e,r="",n=null,o=null,i=null;r+="[{'type': 'UGC','subLayers': {'layers': [";for(var a=0;a<t.themes.length;a++){n=t.themes[a];var s=C.toJSON(n);if(r+="{'theme': "+(s=s.slice(0,-1))+"},'type': 'UGC','ugcLayerType': 'THEME',",(o=t.displayFilters)&&o.length>0&&(1===o.length?r+="'displayFilter':\""+o[0]+'",':r+="'displayFilter':\""+o[a]+'",'),(i=t.displayOrderBy)&&i.length>0&&(1===i.length?r+="'displayOrderBy':'"+i[0]+"',":r+="'displayOrderBy':'"+i[a]+"',"),(e=t.fieldValuesDisplayFilter)&&(r+="'fieldValuesDisplayFilter':"+C.toJSON(e)+","),t.joinItems&&t.joinItems.length>0&&t.joinItems[a]&&(r+="'joinItems':["+C.toJSON(t.joinItems[a])+"],"),t.datasetNames&&t.dataSourceNames){var u=t.datasetNames[a]?a:t.datasetNames.length-1,l=t.dataSourceNames[a]?a:t.dataSourceNames.length-1;r+="'datasetInfo': {'name': '"+t.datasetNames[u]+"','dataSourceName': '"+t.dataSourceNames[l]+"'}},"}else r+="},"}t.themes&&t.themes.length>0&&(r=r.substring(0,r.length-1)),r+="]},";var c=this.url.split("/");return r+="'name': '"+c[c.length-2]+"'}]"}}])&&dI(e.prototype,r),n&&dI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function SI(t){"@babel/helpers - typeof";return(SI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _I(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function PI(t,e){return(PI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function xI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=kI(t);if(e){var o=kI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===SI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function kI(t){return(kI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PI(t,e)}(i,Oh);var e,r,n,o=xI(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e))._themeService=new OI(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}),r}return e=i,(r=[{key:"getThemeInfo",value:function(t,e){return this._themeService.processAsync(t,e)}}])&&_I(e.prototype,r),n&&_I(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function EI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var TI=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.keyWord=null,this.returnPosition=!1,C.extend(this,e),this.CLASS_NAME="SuperMap.StopQueryParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){C.reset(this)}}])&&EI(e.prototype,r),n&&EI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function CI(t){"@babel/helpers - typeof";return(CI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function AI(){return(AI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=II(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function MI(t,e){return(MI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function LI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=II(t);if(e){var o=II(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===CI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return NI(t)}(this,r)}}function NI(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function II(t){return(II=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var DI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MI(t,e)}(i,Th);var e,r,n,o=LI(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e=e||{},C.extend(NI(r),e),r.CLASS_NAME="SuperMap.StopQueryService",r}return e=i,(r=[{key:"destroy",value:function(){AI(II(i.prototype),"destroy",this).call(this),C.reset(this)}},{key:"processAsync",value:function(t,e){if(t instanceof TI){return this.url=C.urlPathAppend(this.url,"stops/keyword/"+t.keyWord),this.request({method:"GET",params:{returnPosition:t.returnPosition},scope:this,success:e,failure:e})}}}])&&RI(e.prototype,r),n&&RI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function FI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var BI=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.transferLines=null,this.points=null,C.extend(this,e),this.CLASS_NAME="SuperMap.TransferPathParameters"}var e,r,n;return e=t,n=[{key:"toJson",value:function(t){if(t)return C.toJSON(t)}}],(r=[{key:"destroy",value:function(){C.reset(this)}}])&&FI(e.prototype,r),n&&FI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function GI(t){"@babel/helpers - typeof";return(GI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function UI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function JI(){return(JI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qI(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function VI(t,e){return(VI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function zI(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=qI(t);if(e){var o=qI(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===GI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function qI(t){return(qI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var HI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VI(t,e)}(i,Th);var e,r,n,o=zI(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.TransferPathService",r}return e=i,(r=[{key:"destroy",value:function(){JI(qI(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof BI){var r;return this.url=C.urlPathAppend(this.url,"path"),r={points:C.toJSON(t.points),transferLines:C.toJSON(t.transferLines)},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&UI(e.prototype,r),n&&UI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function WI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var YI=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.solutionCount=6,this.transferPreference=Ke.NONE,this.transferTactic=Ze.LESS_TIME,this.walkingRatio=null,this.points=!1,this.evadeLines=null,this.evadeStops=null,this.priorLines=null,this.priorStops=null,this.travelTime=null,C.extend(this,e),this.CLASS_NAME="SuperMap.TransferSolutionParameters"}var e,r,n;return e=t,n=[{key:"toJson",value:function(t){if(t)return C.toJSON(t)}}],(r=[{key:"destroy",value:function(){C.reset(this)}}])&&WI(e.prototype,r),n&&WI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function XI(t){"@babel/helpers - typeof";return(XI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ZI(){return(ZI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tD(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function KI(t,e){return(KI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function $I(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=tD(t);if(e){var o=tD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===XI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function tD(t){return(tD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var eD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KI(t,e)}(i,Th);var e,r,n,o=$I(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.TransferSolutionService",r}return e=i,(r=[{key:"destroy",value:function(){ZI(tD(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof YI){var r;return this.url=C.urlPathAppend(this.url,"solutions"),r={points:C.toJSON(t.points),walkingRatio:t.walkingRatio,transferTactic:t.transferTactic,solutionCount:t.solutionCount,transferPreference:t.transferPreference},t.evadeLines&&(r.evadeLines=C.toJSON(t.evadeLines)),t.evadeStops&&(r.evadeStops=C.toJSON(t.evadeStops)),t.priorLines&&(r.priorLines=C.toJSON(t.priorLines)),t.priorStops&&(r.priorStops=C.toJSON(t.priorStops)),t.travelTime&&(r.travelTime=t.travelTime),this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&QI(e.prototype,r),n&&QI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function rD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var nD=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"queryStop",value:function(t,e){var r=this;return new DI(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"analysisTransferPath",value:function(t,e){var r=this;return new HI(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"analysisTransferSolution",value:function(t,e){var r=this;return new eD(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}])&&rD(e.prototype,r),n&&rD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function oD(t){"@babel/helpers - typeof";return(oD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function aD(t,e){return(aD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function sD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=uD(t);if(e){var o=uD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===oD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function uD(t){return(uD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aD(t,e)}(a,Oh);var e,r,n,i=sD(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t,e))._trafficTransferAnalystService=new nD(t,e),r}return e=a,(r=[{key:"queryStop",value:function(t,e){return this._trafficTransferAnalystService.queryStop(t,e)}},{key:"analysisTransferPath",value:function(t,e){return this._trafficTransferAnalystService.analysisTransferPath(t,e)}},{key:"analysisTransferSolution",value:function(t,e){return this._trafficTransferAnalystService.analysisTransferSolution(t,e)}},{key:"_processParams",value:function(t){return t?(t.transferLines&&!Pr.isArray(t.transferLines)&&(t.transferLines=[t.transferLines]),t.points&&Pr.isArray(t.points)&&t.points.map(function(e,r){return t.points[r]=e instanceof o().LngLat?{x:e.lng,y:e.lat}:e,t.points[r]}),t):{}}}])&&iD(e.prototype,r),n&&iD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function cD(t){"@babel/helpers - typeof";return(cD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function hD(){return(hD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vD(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function pD(t,e){return(pD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function yD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=vD(t);if(e){var o=vD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return dD(this,r)}}function dD(t,e){if(e&&("object"===cD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return bD(t)}function bD(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vD(t){return(vD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pD(t,e)}(i,Th);var e,r,n,o=yD(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e&&C.extend(bD(r),e),r.CLASS_NAME="SuperMap.WebPrintingService",r.url?r:dD(r)}return e=i,(r=[{key:"destroy",value:function(){hD(vD(i.prototype),"destroy",this).call(this)}},{key:"createWebPrintingJob",value:function(t,e){if(t)return t.layoutOptions&&t.layoutOptions.legendOptions&&(!t.layoutOptions.legendOptions.title&&(t.layoutOptions.legendOptions.title=""),t.layoutOptions.legendOptions.picAsBase64=t.layoutOptions.legendOptions.picAsBase64&&t.layoutOptions.legendOptions.picAsBase64.replace(/^data:.+;base64,/,""),t.layoutOptions.legendOptions.customItems&&t.layoutOptions.legendOptions.customItems.hasOwnProperty("picAsBase64")&&(t.layoutOptions.legendOptions.customItems.picAsBase64=t.layoutOptions.legendOptions.customItems.picAsBase64.replace(/^data:.+;base64,/,""))),this.processAsync("jobs","POST",e,t)}},{key:"getPrintingJob",value:function(t,e){var r=this;r.processAsync("jobs/".concat(t),"GET",function(n){r.rollingProcess(n,r._processUrl("jobs/".concat(t)),e)})}},{key:"getPrintingJobResult",value:function(t,e){return this.processAsync("jobs/".concat(t,"/result"),"GET",e)}},{key:"getLayoutTemplates",value:function(t){return this.processAsync("layouts","GET",t)}},{key:"rollingProcess",value:function(t,e,r){var n=this;t&&(this.id&&clearInterval(this.id),this.id=setInterval(function(){n.request({url:e,method:"GET",scope:n,success:r,failure:r})},1e3))}},{key:"processAsync",value:function(t,e,r,n){var o={url:this._processUrl(t),method:e,scope:this,success:r,failure:r};return n&&(o.data=C.toJSON(n)),this.request(o)}},{key:"transformResult",value:function(t,e){return"FINISHED"!==(t=C.transformResult(t)).status&&"ERROR"!==t.status||clearInterval(this.id),{result:t,options:e}}},{key:"_processUrl",value:function(t){return t?C.urlPathAppend(this.url,t):this.url}}])&&fD(e.prototype,r),n&&fD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function gD(t){"@babel/helpers - typeof";return(gD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function OD(t,e){return(OD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function SD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=_D(t);if(e){var o=_D(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===gD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function _D(t){return(_D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var PD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OD(t,e)}(a,Oh);var e,r,n,i=SD(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t,e))._webPrintingService=new mD(t,e),r}return e=a,(r=[{key:"createWebPrintingJob",value:function(t,e){if(t)return this._webPrintingService.createWebPrintingJob(this._processParams(t),e)}},{key:"getPrintingJob",value:function(t,e){return this._webPrintingService.getPrintingJob(t,e)}},{key:"getPrintingJobResult",value:function(t,e){this._webPrintingService.getPrintingJobResult(t,e)}},{key:"getLayoutTemplates",value:function(t){return this._webPrintingService.getLayoutTemplates(t)}},{key:"_processParams",value:function(t){return t.layoutOptions&&t.layoutOptions.littleMapOptions&&(t.layoutOptions.littleMapOptions.center=this._toPointObject(t.layoutOptions.littleMapOptions.center)),t.exportOptions&&(t.exportOptions.center=this._toPointObject(t.exportOptions.center)),t}},{key:"_toPointObject",value:function(t){return Pr.isArray(t)?{x:t[0],y:t[1]}:t instanceof V||t instanceof o().Point?{x:t.x,y:t.y}:t instanceof o().LngLat?{x:t.lng,y:t.lat}:t}}])&&wD(e.prototype,r),n&&wD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function xD(t){"@babel/helpers - typeof";return(xD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function jD(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ED(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function TD(){return(TD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=MD(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function CD(t,e){return(CD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function RD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=MD(t);if(e){var o=MD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===xD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return AD(t)}(this,r)}}function AD(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MD(t){return(MD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var LD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CD(t,e)}(i,Th);var e,r,n,o=RD(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).options=e||{},e&&C.extend(AD(r),e),r.CLASS_NAME="SuperMap.ImageService",r}return e=i,(r=[{key:"destroy",value:function(){TD(MD(i.prototype),"destroy",this).call(this)}},{key:"getCollections",value:function(t){var e=C.convertPath("/collections"),r=C.urlPathAppend(this.url,e);return this._processAsync({url:r,mehtod:"GET",callback:t})}},{key:"getCollectionByID",value:function(t,e){var r={collectionId:t},n=C.convertPath("/collections/{collectionId}",r),o=C.urlPathAppend(this.url,n);return this._processAsync({url:o,mehtod:"GET",callback:e})}},{key:"search",value:function(t,e){var r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?kD(Object(r),!0).forEach(function(e){jD(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kD(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},t||{}),n=C.convertPath("/search"),o=C.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"POST",data:r,callback:e})}},{key:"_processAsync",value:function(t){var e=t.url,r=t.method,n=t.callback,o=t.data;return this.request({method:r||"GET",url:e,data:o,scope:this,success:n,failure:n})}}])&&ED(e.prototype,r),n&&ED(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ND(t){"@babel/helpers - typeof";return(ND="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ID(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function DD(t,e){return(DD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function FD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=BD(t);if(e){var o=BD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ND(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function BD(t){return(BD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var GD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DD(t,e)}(i,Oh);var e,r,n,o=FD(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e))._imageService=new LD(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}),r}return e=i,(r=[{key:"getCollections",value:function(t){return this._imageService.getCollections(t)}},{key:"getCollectionByID",value:function(t,e){return this._imageService.getCollectionByID(t,e)}},{key:"search",value:function(t,e){return this._imageService.search(t,e)}}])&&ID(e.prototype,r),n&&ID(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function UD(t){"@babel/helpers - typeof";return(UD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function VD(){return(VD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=WD(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function zD(t,e){return(zD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function qD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=WD(t);if(e){var o=WD(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===UD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return HD(t)}(this,r)}}function HD(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WD(t){return(WD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var YD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zD(t,e)}(i,Th);var e,r,n,o=qD(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).options=e||{},e&&C.extend(HD(r),e),r.CLASS_NAME="SuperMap.ImageCollectionService",r}return e=i,(r=[{key:"destroy",value:function(){VD(WD(i.prototype),"destroy",this).call(this)}},{key:"getLegend",value:function(t,e){var r={collectionId:this.options.collectionId};"function"==typeof t&&(e=t,t=null);var n=C.convertPath("/collections/{collectionId}/legend",r),o=C.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"GET",params:t,callback:e})}},{key:"getStatistics",value:function(t){var e={collectionId:this.options.collectionId},r=C.convertPath("/collections/{collectionId}/statistics",e),n=C.urlPathAppend(this.url,r);return this._processAsync({url:n,method:"GET",callback:t})}},{key:"getTileInfo",value:function(t){var e={collectionId:this.options.collectionId},r=C.convertPath("/collections/{collectionId}/tileInfo",e),n=C.urlPathAppend(this.url,r);return this._processAsync({url:n,method:"GET",callback:t})}},{key:"deleteItemByID",value:function(t,e){var r={collectionId:this.options.collectionId,featureId:t},n=C.convertPath("/collections/{collectionId}/items/{featureId}",r),o=C.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"DELETE",callback:e})}},{key:"getItemByID",value:function(t,e){var r={collectionId:this.options.collectionId,featureId:t},n=C.convertPath("/collections/{collectionId}/items/{featureId}",r),o=C.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"GET",callback:e})}},{key:"_processAsync",value:function(t){var e=t.url,r=t.method,n=t.callback,o=t.params;return this.request({method:r||"GET",url:e,params:o,scope:this,success:n,failure:n})}}])&&JD(e.prototype,r),n&&JD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function XD(t){"@babel/helpers - typeof";return(XD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ZD(t,e){return(ZD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function KD(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=$D(t);if(e){var o=$D(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===XD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function $D(t){return($D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZD(t,e)}(i,Oh);var e,r,n,o=KD(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e))._imageCollectionService=new YD(r.url,{collectionId:r.options.collectionId,proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}),r}return e=i,(r=[{key:"getLegend",value:function(t,e){return this._imageCollectionService.getLegend(t,e)}},{key:"getStatistics",value:function(t){return this._imageCollectionService.getStatistics(t)}},{key:"getTileInfo",value:function(t){return this._imageCollectionService.getTileInfo(t)}},{key:"deleteItemByID",value:function(t,e){return this._imageCollectionService.deleteItemByID(t,e)}},{key:"getItemByID",value:function(t,e){return this._imageCollectionService.getItemByID(t,e)}}])&&QD(e.prototype,r),n&&QD(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),eF=window.SuperMap=window.SuperMap||{};function rF(t){"@babel/helpers - typeof";return(rF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function oF(t,e){return(oF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function iF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=aF(t);if(e){var o=aF(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===rF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function aF(t){return(aF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}eF.Components=window.SuperMap.Components||{};var sF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oF(t,e)}(i,Vt);var e,r,n,o=iF(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},e.CLASS_NAME="SuperMap.Format.WKT",e.extract={point:function(t){return t.x+" "+t.y},multipoint:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push("("+this.extract.point.apply(this,[t.components[r]])+")");return e.join(",")},linestring:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.point.apply(this,[t.components[r]]));return e.join(",")},multilinestring:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push("("+this.extract.linestring.apply(this,[t.components[r]])+")");return e.join(",")},polygon:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push("("+this.extract.linestring.apply(this,[t.components[r]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push("("+this.extract.polygon.apply(this,[t.components[r]])+")");return e.join(",")},collection:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extractGeometry.apply(this,[t.components[r]]));return e.join(",")}},e.parse={point:function(t){var e=p.trim(t).split(this.regExes.spaces);return new Ut(new V(e[0],e[1]))},multipoint:function(t){for(var e,r=p.trim(t).split(","),n=[],o=0,i=r.length;o<i;++o)e=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.point.apply(this,[e]).geometry);return new Ut(new rt(n))},linestring:function(t){for(var e=p.trim(t).split(","),r=[],n=0,o=e.length;n<o;++n)r.push(this.parse.point.apply(this,[e[n]]).geometry);return new Ut(new dt(r))},multilinestring:function(t){for(var e,r=p.trim(t).split(this.regExes.parenComma),n=[],o=0,i=r.length;o<i;++o)e=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.linestring.apply(this,[e]).geometry);return new Ut(new ee(n))},polygon:function(t){for(var e,r,n,o=p.trim(t).split(this.regExes.parenComma),i=[],a=0,s=o.length;a<s;++a)e=o[a].replace(this.regExes.trimParens,"$1"),r=this.parse.linestring.apply(this,[e]).geometry,n=new St(r.components),i.push(n);return new Ut(new Et(i))},multipolygon:function(t){for(var e,r=p.trim(t).split(this.regExes.doubleParenComma),n=[],o=0,i=r.length;o<i;++o)e=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.polygon.apply(this,[e]).geometry);return new Ut(new se(n))},geometrycollection:function(t){t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var e=p.trim(t).split("|"),r=[],n=0,o=e.length;n<o;++n)r.push(this.read(e[n]));return r}},e}return e=i,(r=[{key:"read",value:function(t){var e,r,n;t=t.replace(/[\n\r]/g," ");var o=this.regExes.typeStr.exec(t);return o&&(r=o[1].toLowerCase(),n=o[2],this.parse[r]&&(e=this.parse[r].apply(this,[n]))),e}},{key:"write",value:function(t){var e,r,n;t.constructor===Array?(e=t,n=!0):(e=[t],n=!1);var o=[];n&&o.push("GEOMETRYCOLLECTION(");for(var i=0,a=e.length;i<a;++i)n&&i>0&&o.push(","),r=e[i].geometry,o.push(this.extractGeometry(r));return n&&o.push(")"),o.join("")}},{key:"extractGeometry",value:function(t){var e=t.CLASS_NAME.split(".")[2].toLowerCase();return this.extract[e]?("collection"===e?"GEOMETRYCOLLECTION":e.toUpperCase())+"("+this.extract[e].apply(this,[t])+")":null}}])&&nF(e.prototype,r),n&&nF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function uF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var lF=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=this;e=e||{},this.speed=e.speed&&e.speed>=0?e.speed:1,this.frequency=e.speed&&e.frequency>=0?e.frequency:1e3,this.startTime=e.startTime&&null!=e.startTime?e.startTime:0,this.endTime=e.endTime&&null!=e.endTime&&e.endTime>=r.startTime?e.endTime:+new Date,this.repeat=void 0===e.repeat||e.repeat,this.reverse=void 0!==e.reverse&&e.reverse,this.currentTime=null,this.oldTime=null,this.running=!1,this.EVENT_TYPES=["start","pause","stop"],r.events=new Bn(this,null,this.EVENT_TYPES),r.speed=Number(r.speed),r.frequency=Number(r.frequency),r.startTime=Number(r.startTime),r.endTime=Number(r.endTime),r.startTime=Date.parse(new Date(r.startTime)),r.endTime=Date.parse(new Date(r.endTime)),r.currentTime=r.startTime,this.CLASS_NAME="SuperMap.TimeControlBase"}var e,r,n;return e=t,(r=[{key:"updateOptions",value:function(t){var e=this;(t=t||{}).speed&&t.speed>=0&&(e.speed=t.speed,e.speed=Number(e.speed)),t.speed&&t.frequency>=0&&(e.frequency=t.frequency,e.frequency=Number(e.frequency)),t.startTime&&null!=t.startTime&&(e.startTime=t.startTime,e.startTime=Date.parse(new Date(e.startTime))),t.endTime&&null!=t.endTime&&t.endTime>=e.startTime&&(e.endTime=t.endTime,e.endTime=Date.parse(new Date(e.endTime))),null!=t.repeat&&(e.repeat=t.repeat),null!=t.reverse&&(e.reverse=t.reverse)}},{key:"start",value:function(){var t=this;t.running||(t.running=!0,t.tick(),t.events.triggerEvent("start",t.currentTime))}},{key:"pause",value:function(){this.running=!1,this.events.triggerEvent("pause",this.currentTime)}},{key:"stop",value:function(){var t=this;t.currentTime=t.startTime,t.running&&(t.running=!1),t.events.triggerEvent("stop",t.currentTime)}},{key:"toggle",value:function(){this.running?this.pause():this.start()}},{key:"setSpeed",value:function(t){return t>=0&&(this.speed=t,!0)}},{key:"getSpeed",value:function(){return this.speed}},{key:"setFrequency",value:function(t){return t>=0&&(this.frequency=t,!0)}},{key:"getFrequency",value:function(){return this.frequency}},{key:"setStartTime",value:function(t){var e=this;return!((t=Date.parse(new Date(t)))>e.endTime)&&(e.startTime=t,e.currentTime<e.startTime&&(e.currentTime=e.startTime,e.tick()),!0)}},{key:"getStartTime",value:function(){return this.startTime}},{key:"setEndTime",value:function(t){var e=this;return e.endTime=Date.parse(new Date(e.endTime)),!(t<e.startTime)&&(e.endTime=t,e.currentTime>=e.endTime&&(e.currentTime=e.startTime,e.tick()),!0)}},{key:"getEndTime",value:function(){return this.endTime}},{key:"setCurrentTime",value:function(t){var e=this;return e.currentTime=Date.parse(new Date(e.currentTime)),t>=e.startTime&&t<=e.endTime&&(e.currentTime=t,e.startTime=e.currentTime,e.tick(),!0)}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"setRepeat",value:function(t){this.repeat=t}},{key:"getRepeat",value:function(){return this.repeat}},{key:"setReverse",value:function(t){this.reverse=t}},{key:"getReverse",value:function(){return this.reverse}},{key:"getRunning",value:function(){return this.running}},{key:"destroy",value:function(){var t=this;t.speed=null,t.frequency=null,t.startTime=null,t.endTime=null,t.currentTime=null,t.repeat=null,t.running=!1,t.reverse=null}},{key:"tick",value:function(){}}])&&uF(e.prototype,r),n&&uF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function cF(t){"@babel/helpers - typeof";return(cF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function hF(){return(hF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bF(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function pF(t,e){return(pF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function yF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=bF(t);if(e){var o=bF(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===cF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return dF(t)}(this,r)}}function dF(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bF(t){return(bF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pF(t,e)}(i,lF);var e,r,n,o=yF(i);function i(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var n=dF(r=o.call(this,e));return n.callback=t,Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),r=this,n=function(){},o=function(){return r.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o}),n.update=n.update.bind(n),n.oldTime=n.currentTime,n.CLASS_NAME="SuperMap.TimeFlowControl",r}return e=i,(r=[{key:"updateOptions",value:function(t){t=t||{},hF(bF(i.prototype),"updateOptions",this).call(this,t)}},{key:"start",value:function(){var t=this;t.running||(t.running=!0,t.reverse?t.currentTime===t.startTime&&(t.oldTime=t.endTime,t.currentTime=t.oldTime):t.oldTime===t.endTime&&(t.currentTime=t.startTime,t.oldTime=t.currentTime),t.tick())}},{key:"stop",value:function(){hF(bF(i.prototype),"stop",this).call(this);var t=this;t.oldTime=t.currentTime,t.running&&(t.running=!1),t.intervalId&&window.clearTimeout(t.intervalId)}},{key:"destroy",value:function(){hF(bF(i.prototype),"destroy",this).call(this);this.oldTime=null,this.callback=null}},{key:"tick",value:function(){var t=this;t.intervalId&&window.clearInterval(t.intervalId),t.intervalId=null,t.update(),t.intervalId=window.setInterval(t.update,t.frequency)}},{key:"update",value:function(){var t=this;if(t.running)if(t.callback&&t.callback(t.currentTime),t.reverse){if(t.currentTime===t.startTime){if(!t.repeat)return t.running=!1,null;t.oldTime=t.endTime,t.currentTime=t.oldTime}else t.currentTime=t.oldTime,t.oldTime-=t.speed;t.oldTime<=t.startTime&&(t.oldTime=t.startTime)}else{if(t.currentTime===t.endTime){if(!t.repeat)return t.running=!1,t.stop(),null;t.stop(),t.currentTime=t.startTime,t.oldTime=t.currentTime,t.start()}else t.oldTime=t.currentTime,t.currentTime+=t.speed;t.currentTime>=t.endTime&&(t.currentTime=t.endTime)}}}])&&fF(e.prototype,r),n&&fF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function mF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var gF=function(){function t(e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e){var n=e.substr(e.length-1,1);this.serviceUrl="/"===n?e.substr(0,e.length-2):e}this.options=r||{},this.CLASS_NAME="SuperMap.iManagerServiceBase"}var e,r,n;return e=t,(r=[{key:"request",value:function(t,e,r,n){(n=n||{headers:{Accept:"*/*","Content-Type":"application/json"}}).crossOrigin=this.options.crossOrigin,n.headers=this.options.headers;var o=_h.imanagerToken;return o&&(n.headers||(n.headers={}),n.headers["X-Auth-Token"]=o),r&&(r=JSON.stringify(r)),Jl.commit(t,e,r,n).then(function(t){return t.json()})}}])&&mF(e.prototype,r),n&&mF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function wF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var OF=function(t,e,r){return e&&wF(t.prototype,e),r&&wF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.nodeSpec="SMALL",this.nodeCount=1,this.nodeName="",this.password="",this.description="",this.physicalMachineName="",this.ips=[],this.userName="",C.extend(this,e)});function SF(t){"@babel/helpers - typeof";return(SF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _F(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function PF(t,e){return(PF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function xF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=kF(t);if(e){var o=kF(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===SF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function kF(t){return(kF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PF(t,e)}(i,gF);var e,r,n,o=xF(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t)}return e=i,(r=[{key:"load",value:function(){return this.request("GET",this.serviceUrl+"/web/api/service.json")}},{key:"createIServer",value:function(t){return this.request("POST",this.serviceUrl+"/cloud/web/nodes/server.json",new OF(t))}},{key:"createIPortal",value:function(t){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/portal.json",new OF(t))}},{key:"iServerList",value:function(){return this.request("GET",this.serviceUrl+"/cloud/web/nodes/server.json")}},{key:"iPortalList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/portal.json")}},{key:"startNodes",value:function(t){return this.request("POST",this.serviceUrl+"/cloud/web/nodes/started.json",t)}},{key:"stopNodes",value:function(t){return this.request("POST",this.serviceUrl+"/cloud/web/nodes/stopped.json",t)}}])&&_F(e.prototype,r),n&&_F(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function EF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var TF=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=r||{},this.serviceUrl=e,this.CLASS_NAME="SuperMap.iPortalServiceBase",this.withCredentials=r.withCredentials||!1,this.crossOrigin=r.crossOrigin,this.headers=r.headers}var e,r,n;return e=t,(r=[{key:"request",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{headers:this.headers,crossOrigin:this.crossOrigin,withCredentials:this.withCredentials};return e=_h.appendCredential(e),Jl.commit(t,e,r,n).then(function(t){return t.json()})}}])&&EF(e.prototype,r),n&&EF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function CF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var RF=function(t,e,r){return e&&CF(t.prototype,e),r&&CF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.resourceType="",this.pageSize=12,this.currentPage=1,this.orderBy="UPDATETIME",this.orderType="DESC",this.searchType="PUBLIC",this.tags=[],this.dirIds=[],this.resourceSubTypes=[],this.aggregationTypes=[],this.text="",this.groupIds=[],this.departmentIds=[],C.extend(this,e)});function AF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var MF=function(t,e,r){return e&&AF(t.prototype,e),r&&AF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.content=[],this.total=0,this.currentPage=1,this.pageSize=12,this.aggregations=null,C.extend(this,e)});function LF(t){"@babel/helpers - typeof";return(LF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function IF(t,e){return(IF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function DF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=BF(t);if(e){var o=BF(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===LF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return FF(t)}(this,r)}}function FF(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BF(t){return(BF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var GF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IF(t,e)}(i,TF);var e,r,n,o=DF(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t),e=e||{},r.authorizeSetting=[],r.bounds="",r.bounds4326="",r.checkStatus="",r.createTime=0,r.description=null,r.dirId=null,r.epsgCode=0,r.heatLevel=0,r.id=0,r.name="",r.personalDirId=null,r.resourceId=0,r.resourceSubType=null,r.resourceType=null,r.serviceRootUrlId=null,r.tags=null,r.thumbnail=null,r.updateTime=0,r.userName="",r.sourceJSON={},C.extend(FF(r),e),r.resourceUrl=t+"/web/"+r.resourceType.replace("_","").toLowerCase()+"s/"+r.resourceId,r.withCredentials&&(r.resourceUrl=t+"/web/mycontent/"+r.resourceType.replace("_","").toLowerCase()+"s/"+r.resourceId),r}return e=i,(r=[{key:"load",value:function(){var t=this;return t.request("GET",t.resourceUrl+".json").then(function(e){if(e.error)return e;t.sourceJSON=e})}},{key:"update",value:function(){var t=this.resourceType.replace("_","").toLowerCase();"data"===t&&(this.resourceUrl=this.resourceUrl+"/attributes.json");var e=JSON.stringify(this.sourceJSON);if("service"===t){var r={authorizeSetting:this.sourceJSON.authorizeSetting,metadata:this.sourceJSON.metadata,tags:this.sourceJSON.tags,thumbnail:this.sourceJSON.thumbnail,tokenRefreshUrl:this.sourceJSON.tokenRefreshUrl};e=JSON.stringify(r)}return this.request("PUT",this.resourceUrl,e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}])&&NF(e.prototype,r),n&&NF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function UF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var JF=function(t,e,r){return e&&UF(t.prototype,e),r&&UF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.ids=[],this.entities=[],this.resourceType="",C.extend(this,e)});function VF(t){"@babel/helpers - typeof";return(VF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function qF(t,e){return(qF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function HF(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=WF(t);if(e){var o=WF(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===VF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function WF(t){return(WF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var YF=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qF(t,e)}(i,TF);var e,r,n,o=HF(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).iportalUrl=t,e=e||{},r.withCredentials=e.withCredentials||!1,r}return e=i,(r=[{key:"load",value:function(){return Jl.get(this.iportalUrl+"/web")}},{key:"queryResources",value:function(t){if(!(t instanceof RF))return new Promise(function(t){t("queryParams is not instanceof iPortalQueryParam !")});var e=this,r=this.iportalUrl+"/gateway/catalog/resource/search.json";return t.t=(new Date).getTime(),this.request("GET",r,t).then(function(t){var r=[];(t.content||[]).forEach(function(t){r.push(new GF(e.iportalUrl,t))});var n=new MF;return n.content=r,n.total=t.total,n.currentPage=t.currentPage,n.pageSize=t.pageSize,n.aggregations=t.aggregations,n})}},{key:"updateResourcesShareSetting",value:function(t){if(!(t instanceof JF))return new Promise(function(t){t("shareParams is not instanceof iPortalShareParam !")});var e=t.resourceType.replace("_","").toLowerCase()+"s";"datas"===e&&(e="mycontent/"+e);var r={ids:t.ids,entities:t.entities},n=this.iportalUrl+"/web/"+e+"/sharesetting.json";return this.request("PUT",n,JSON.stringify(r)).then(function(t){return t})}}])&&zF(e.prototype,r),n&&zF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function XF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var QF=function(t,e,r){return e&&XF(t.prototype,e),r&&XF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.permissionType="",this.entityType="",this.entityName="GUEST",this.entityId=null,C.extend(this,e)});function ZF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var KF=function(t,e,r){return e&&ZF(t.prototype,e),r&&ZF(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.rootUrl="",this.tags=[],this.entities=[],C.extend(this,e)});function $F(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var tB=function(t,e,r){return e&&$F(t.prototype,e),r&&$F(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.type="",this.tags=[],this.entities=[],this.metadata={},this.addedMapNames=[],this.addedSceneNames=[],C.extend(this,e)});function eB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var rB=function(t,e,r){return e&&eB(t.prototype,e),r&&eB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.fileName="",this.type="",this.tags=[],this.dataMetaInfo={},C.extend(this,e)});function nB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var oB=function(t,e,r){return e&&nB(t.prototype,e),r&&nB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.xField="",this.yField="",this.fileEncoding="UTF-8",this.xIndex=1,this.yIndex=1,this.fieldTypes=[],this.separator="",this.firstRowIsHead=!0,this.url="",this.dataStoreInfo={},C.extend(this,e)});function iB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var aB=function(t,e,r){return e&&iB(t.prototype,e),r&&iB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.type="",this.url="",this.connectionInfo={},C.extend(this,e)});function sB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var uB=function(t,e,r){return e&&sB(t.prototype,e),r&&sB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.dataBase="",this.server="",C.extend(this,e)});function lB(t){"@babel/helpers - typeof";return(lB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fB(t,e){return(fB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=pB(t);if(e){var o=pB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===lB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function pB(t){return(pB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fB(t,e)}(i,TF);var e,r,n,o=hB(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).iportalUrl=t,e}return e=i,(r=[{key:"deleteResources",value:function(t){var e=t.resourceType.replace("_","").toLowerCase(),r=this.iportalUrl+"/web/"+e+"s.json?ids="+encodeURI(JSON.stringify(t.ids));return"data"===e?(r=this.iportalUrl+"/web/mycontent/datas/delete.json",this.request("POST",r,JSON.stringify(t.ids))):this.request("DELETE",r)}},{key:"addMap",value:function(t){if(!(t instanceof KF))return this.getErrMsgPromise("addMapParams is not instanceof IPortalAddResourceParam !");var e={rootUrl:t.rootUrl,tags:t.tags,authorizeSetting:t.entities},r=this.iportalUrl+"/web/maps/batchaddmaps.json";return this.request("POST",r,JSON.stringify(e)).then(function(t){return t})}},{key:"addScene",value:function(t){if(!(t instanceof KF))return this.getErrMsgPromise("addSceneParams is not instanceof IPortalAddResourceParam !");var e={rootUrl:t.rootUrl,tags:t.tags,authorizeSetting:t.entities},r=this.iportalUrl+"/web/scenes/batchaddscenes.json";return this.request("POST",r,JSON.stringify(e)).then(function(t){return t})}},{key:"registerService",value:function(t){if(!(t instanceof tB))return this.getErrMsgPromise("registerParams is not instanceof IPortalRegisterServiceParam !");var e={type:t.type,tags:t.tags,authorizeSetting:t.entities,metadata:t.metadata,addedMapNames:t.addedMapNames,addedSceneNames:t.addedSceneNames},r=this.iportalUrl+"/web/services.json";return this.request("POST",r,JSON.stringify(e)).then(function(t){return t})}},{key:"getErrMsgPromise",value:function(t){return new Promise(function(e){e(t)})}},{key:"uploadDataRequest",value:function(t,e){var r=this.iportalUrl+"/web/mycontent/datas/"+t+"/upload.json";return this.request("POST",r,e)}},{key:"addData",value:function(t,e){var r=this;if(!(t instanceof rB))return this.getErrMsgPromise("params is not instanceof iPortalAddDataParam !");var n,o=this.iportalUrl+"/web/mycontent/datas.json",i={fileName:t.fileName,tags:t.tags,type:t.type},a=t.type.toLowerCase();if("excel"===a||"csv"===a){if(!(t.dataMetaInfo instanceof oB))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");n={xField:t.dataMetaInfo.xField,yField:t.dataMetaInfo.yField},"csv"===a&&(n.fileEncoding=t.dataMetaInfo.fileEncoding),i.coordType="WGS84",i.dataMetaInfo=n}else if("hdfs"===a||"hbase"===a){if(!(t.dataMetaInfo instanceof oB))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");if(!(t.dataMetaInfo.dataStoreInfo instanceof aB))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo is not instanceof iPortalDataStoreInfoParam !");var s={type:t.dataMetaInfo.dataStoreInfo.type};switch(a){case"hdfs":s.url=t.dataMetaInfo.dataStoreInfo.url,n={url:t.dataMetaInfo.url,dataStoreInfo:s};break;case"hbase":if(!(t.dataMetaInfo.dataStoreInfo.connectionInfo instanceof uB))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo.connectionInfo is not instanceof iPortalDataConnectionInfoParam !");s.connectionInfo={dataBase:t.dataMetaInfo.dataStoreInfo.connectionInfo.dataBase,server:t.dataMetaInfo.dataStoreInfo.connectionInfo.server,engineType:"HBASE"},s.datastoreType="SPATIAL",n={dataStoreInfo:s}}i.dataMetaInfo=n}return this.request("POST",o,JSON.stringify(i)).then(function(t){return"hdfs"===a||"hbase"===a?t:t.childID?r.uploadDataRequest(t.childID,e):t.customResult})}},{key:"publishOrUnpublish",value:function(t,e){if(!t.dataId||!t.serviceType)return this.getErrMsgPromise("option.dataID and option.serviceType are Required!");var r=t.dataId,n=t.dataServiceId,o=t.serviceType,i=this.iportalUrl+"/web/mycontent/datas/"+r+"/publishstatus.json?serviceType="+o;return n&&(i+="&dataServiceId="+n),this.request("PUT",i,JSON.stringify(e)).then(function(t){return e?(n||(n=t.customResult),n):t})}},{key:"getDataPublishedStatus",value:function(t,e){var r=this.iportalUrl+"/web/mycontent/datas/"+t+"/publishstatus.json?dataServiceId="+e+"&forPublish=true";return this.request("GET",r)}},{key:"unPublishDataService",value:function(t){return this.publishOrUnpublish(t,!1)}},{key:"publishDataService",value:function(t){return this.publishOrUnpublish(t,!0)}}])&&cB(e.prototype,r),n&&cB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function dB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var bB=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.aggName=null,this.aggFieldName=null,this.CLASS_NAME="SuperMap.AggregationParameter",C.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.aggName=null,this.aggFieldName=null,this.aggType=null}}])&&dB(e.prototype,r),n&&dB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function vB(t){"@babel/helpers - typeof";return(vB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function gB(t,e){return(gB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=SB(t);if(e){var o=SB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===vB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return OB(t)}(this,r)}}function OB(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SB(t){return(SB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _B=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gB(t,e)}(i,bB);var e,r,n,o=wB(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).subAggs=null,e.aggType=null,e.CLASS_NAME="SuperMap.BucketAggParameter",C.extend(OB(e),t),e}return e=i,(r=[{key:"destroy",value:function(){this.subAggs&&(this.subAggs=null)}}])&&mB(e.prototype,r),n&&mB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function PB(t){"@babel/helpers - typeof";return(PB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kB(){return(kB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=CB(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function jB(t,e){return(jB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function EB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=CB(t);if(e){var o=CB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===PB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return TB(t)}(this,r)}}function TB(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CB(t){return(CB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var RB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jB(t,e)}(i,bB);var e,r,n,o=EB(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).aggType=lr.AVG,C.extend(TB(e),t),e.CLASS_NAME="SuperMap.MetricsAggParameter",e}return e=i,(r=[{key:"destroy",value:function(){kB(CB(i.prototype),"destroy",this).call(this);this.aggType=null}}])&&xB(e.prototype,r),n&&xB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function AB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var MB=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=!0,this.isExactClip=null,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ClipParameter"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.clipDatasetName=null,t.clipDatasourceName=null,t.clipRegion=null,t.isClipInRegion=null,t.isExactClip=null}},{key:"toJSON",value:function(){return C.toJSON({isClipInRegion:this.isClipInRegion,clipDatasetName:this.clipDatasetName,clipDatasourceName:this.clipDatasourceName,isExactClip:this.isExactClip,clipRegion:yr.fromGeometry(this.clipRegion)})}}])&&AB(e.prototype,r),n&&AB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function LB(t){"@babel/helpers - typeof";return(LB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function IB(){return(IB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=GB(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function DB(t,e){return(DB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function FB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=GB(t);if(e){var o=GB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===LB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return BB(t)}(this,r)}}function BB(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GB(t){return(GB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var UB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DB(t,e)}(i,_B);var e,r,n,o=FB(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).precision=5,C.extend(BB(e),t),e.aggType=ur.GEOHASH_GRID,e.CLASS_NAME="SuperMap.GeoHashGridAggParameter",e}return e=i,n=[{key:"toJsonParameters",value:function(t){var e={aggName:t.aggName,aggFieldName:t.aggFieldName,aggType:t.aggType,precision:t.precision};return C.toJson(e)}}],(r=[{key:"destroy",value:function(){IB(GB(i.prototype),"destroy",this).call(this),this.aggType=null,this.precision=null}}])&&NB(e.prototype,r),n&&NB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function JB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var VB=function(t,e,r){return e&&JB(t.prototype,e),r&&JB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="LabelMatrixCell"});function zB(t){"@babel/helpers - typeof";return(zB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function HB(t,e){return(HB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function WB(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=XB(t);if(e){var o=XB(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===zB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return YB(t)}(this,r)}}function YB(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XB(t){return(XB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var QB=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HB(t,e)}(i,VB);var e,r,n,o=WB(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).height=0,e.pathField=null,e.rotation=0,e.width=0,e.sizeFixed=!1,e.type="IMAGE",t&&C.extend(YB(e),t),e.CLASS_NAME="SuperMap.LabelImageCell",e}return e=i,(r=[{key:"destroy",value:function(){var t=this;t.height=null,t.pathField=null,t.rotation=null,t.width=null,t.sizeFixed=null}}])&&qB(e.prototype,r),n&&qB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ZB(t){"@babel/helpers - typeof";return(ZB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $B(t,e){return($B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tG(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=rG(t);if(e){var o=rG(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ZB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return eG(t)}(this,r)}}function eG(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rG(t){return(rG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$B(t,e)}(i,VB);var e,r,n,o=tG(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).style=new fe,e.symbolIDField=null,e.type="SYMBOL",t&&C.extend(eG(e),t),e.CLASS_NAME="SuperMap.LabelSymbolCell",e}return e=i,(r=[{key:"destroy",value:function(){this.style&&(this.style.destroy(),this.style=null),this.symbolIDField=null}}])&&KB(e.prototype,r),n&&KB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function oG(t){"@babel/helpers - typeof";return(oG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function aG(t,e){return(aG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function sG(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=lG(t);if(e){var o=lG(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===oG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return uG(t)}(this,r)}}function uG(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lG(t){return(lG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aG(t,e)}(i,VB);var e,r,n,o=sG(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).themeLabel=new Ig,e.type="THEME",t&&C.extend(uG(e),t),e.CLASS_NAME=" SuperMap.LabelThemeCell",e}return e=i,(r=[{key:"destroy",value:function(){this.themeLabel&&(this.themeLabel.destroy(),this.themeLabel=null)}}])&&iG(e.prototype,r),n&&iG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function fG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var hG=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layerName=null,this.isVisible=null,this.displayFilter=null,this.fieldValuesDisplayFilter=null,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.LayerStatus"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.layerName=null,this.isVisible=null,this.displayFilter=null}},{key:"toJSON",value:function(){var t="{";t+='"type":"UGC",';var e=[];return this.layerName&&(e.push('"name":"'+this.layerName+'"'),e.push('"visible":'+this.isVisible)),this.displayFilter&&e.push('"displayFilter":"'+this.displayFilter+'"'),(this.minScale||0==this.minScale)&&e.push('"minScale":'+this.minScale),(this.maxScale||0==this.maxScale)&&e.push('"maxScale":'+this.maxScale),this.fieldValuesDisplayFilter&&e.push('"fieldValuesDisplayFilter":'+C.toJSON(this.fieldValuesDisplayFilter)),t+=e,t+="}"}}])&&fG(e.prototype,r),n&&fG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var yG=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasourceConnectionInfo=null,this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.LinkItem"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.datasourceConnectionInfo instanceof vj&&(t.datasourceConnectionInfo.destroy(),t.datasourceConnectionInfo=null),t.foreignKeys=null,t.foreignTable=null,t.linkFields=null,t.linkFilter=null,t.name=null,t.primaryKeys=null}}])&&pG(e.prototype,r),n&&pG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var bG=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.allowPointOverlap=!0,this.allowPointWithTextDisplay=!0,this.allowTextOverlap=!1,this.allowTextAndPointOverlap=!0,this.allowThemeGraduatedSymbolOverlap=!1,this.allowThemeGraphOverlap=!1,this.horizontalOverlappedSpaceSize=0,this.verticalOverlappedSpaceSize=0,C.extend(this,e),this.ugcLayer=new Nw(e),this.CLASS_NAME="SuperMap.OverlapDisplayedOptions"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){C.reset(this)}},{key:"fromJson",value:function(t){this.ugcLayer.fromJson.apply(this,[t])}},{key:"toServerJSONObject",value:function(){return this.ugcLayer.toServerJSONObject.apply(this,arguments)}},{key:"toString",value:function(){var t=this.ugcLayer.toServerJSONObject.apply(this,arguments),e="{";for(var r in t)t.hasOwnProperty(r)&&(e+="'"+r+"':"+t[r]+",");return e=e.substr(0,e.length-1),e+="}"}}])&&dG(e.prototype,r),n&&dG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function vG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var mG=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.model=null,this.resultSetting=null,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ConvexHullAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.model=null,this.resultSetting=null}}])&&vG(e.prototype,r),n&&vG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function gG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var wG=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bbox=null,this.layers=null,this.transparent=null,this.mapScale=null,this.returnVisibleOnly=null,this.width=null,this.height=null,C.extend(this,e),this.CLASS_NAME="SuperMap.GetLayersLegendInfoParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.bbox=null,t.layers=null,t.transparent=null,t.mapScale=null,t.returnVisibleOnly=null,t.width=null,t.height=null}}])&&gG(e.prototype,r),n&&gG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function OG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var SG=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.resourceID=null,this.tempLayerName=null,this.layerInfo=null,C.extend(this,e),this.CLASS_NAME="SuperMap.SetLayerInfoParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.resourceID=null,this.tempLayerName=null,this.layerInfo=null}}])&&OG(e.prototype,r),n&&OG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _G(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var PG=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.isTempLayers=null,this.resourceID=null,this.layersInfo=null,C.extend(this,e),this.CLASS_NAME="SuperMap.SetLayersInfoParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.isTempLayers=null,this.resourceID=null,this.layersInfo=null}}])&&_G(e.prototype,r),n&&_G(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function xG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var kG=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.SupplyCenter"}var e,r,n;return e=t,n=[{key:"fromJson",value:function(e){if(e)return new t({maxWeight:e.maxWeight,nodeID:e.nodeID,resourceValue:e.resourceValue,type:e.type})}}],(r=[{key:"destroy",value:function(){this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null}}])&&xG(e.prototype,r),n&&xG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function jG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var EG=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bounds=null,this.boundsType=fr.MAX,this.cellSize=null,this.cellSizeType=hr.UNION,C.extend(this,e),this.CLASS_NAME="SuperMap.terrainAnalystSetting"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.bounds=null,this.boundsType=null,this.cellSize=null,this.cellSizeType=null}}])&&jG(e.prototype,r),n&&jG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function TG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var CG=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.flowEnabled=!1,this.leaderLineDisplayed=!1,this.leaderLineStyle=new fe,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ThemeFlow"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return C.copy(r,e),r.leaderLineStyle=fe.fromJson(e.leaderLineStyle),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.flowEnabled=null,t.leaderLineDisplayed=null,t.leaderLineStyle&&(t.leaderLineStyle.destroy(),t.leaderLineStyle=null)}}])&&TG(e.prototype,r),n&&TG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function RG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var AG=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.color=new le,this.end=0,this.start=0,this.visible=!0,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGridRangeItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return C.copy(r,e),r.color=le.fromJson(e.color),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.end=null,t.start=null,t.color&&(t.color.destroy(),t.color=null),t.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=C.copyAttributes(t,this)).color&&t.color.toServerJSONObject&&(t.color=t.color.toServerJSONObject()),t}}])&&RG(e.prototype,r),n&&RG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function MG(t){"@babel/helpers - typeof";return(MG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function NG(){return(NG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=BG(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function IG(t,e){return(IG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function DG(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=BG(t);if(e){var o=BG(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===MG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return FG(t)}(this,r)}}function FG(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function BG(t){return(BG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var GG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IG(t,e)}(i,hg);var e,r,n,o=DG(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,"GRIDRANGE",t)).items=null,e.rangeMode=Fe.EQUALINTERVAL,e.rangeParameter=0,e.colorGradientType=Be.YELLOW_RED,e.reverseColor=!1,t&&C.extend(FG(e),t),e.CLASS_NAME="SuperMap.ThemeGridRange",e}return e=i,n=[{key:"fromObj",value:function(t){if(t){var e=new i;C.copy(e,t);var r=t.items,n=r?r.length:0;e.items=[];for(var o=0;o<n;o++)e.items.push(AG.fromObj(r[o]));return e}}}],(r=[{key:"destroy",value:function(){NG(BG(i.prototype),"destroy",this).call(this);var t=this;if(t.items){if(t.items.length>0)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.reverseColor=null,t.rangeMode=null,t.rangeParameter=null,t.colorGradientType=null}}])&&LG(e.prototype,r),n&&LG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function UG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var JG=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.color=new le,this.unique=null,this.visible=!0,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGridUniqueItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){var r=new t;return C.copy(r,e),r.color=le.fromJson(e.color),r}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.unique=null,t.color&&(t.color.destroy(),t.color=null),t.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=C.copyAttributes(t,this)).color&&t.color.toServerJSONObject&&(t.color=t.color.toServerJSONObject()),t}}])&&UG(e.prototype,r),n&&UG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function VG(t){"@babel/helpers - typeof";return(VG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function qG(){return(qG="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=XG(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function HG(t,e){return(HG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function WG(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=XG(t);if(e){var o=XG(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===VG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return YG(t)}(this,r)}}function YG(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function XG(t){return(XG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var QG=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HG(t,e)}(i,hg);var e,r,n,o=WG(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,"GRIDUNIQUE",t)).defaultcolor=new le,e.items=null,t&&C.extend(YG(e),t),e.CLASS_NAME="SuperMap.ThemeGridUnique",e}return e=i,n=[{key:"fromObj",value:function(t){var e=new i,r=t.items,n=r?r.length:0;C.extend(e,t),e.items=[],e.defaultcolor=le.fromJson(t.defaultcolor);for(var o=0;o<n;o++)e.items.push(JG.fromObj(r[o]));return e}}],(r=[{key:"destroy",value:function(){qG(XG(i.prototype),"destroy",this).call(this);var t=this;if(t.items){if(t.items.length>0)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.defaultcolor&&(t.defaultcolor.destroy(),t.defaultcolor=null)}},{key:"toServerJSONObject",value:function(){var t={};if((t=C.copyAttributes(t,this)).defaultcolor&&t.defaultcolor.toServerJSONObject&&(t.defaultcolor=t.defaultcolor.toServerJSONObject()),t.items){for(var e=[],r=t.items.length,n=0;n<r;n++)e.push(t.items[n].toServerJSONObject());t.items=e}return t}}])&&zG(e.prototype,r),n&&zG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ZG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var KG=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.unique=null,this.offsetX=0,this.offsetY=0,this.visible=!0,this.style=new yg,e&&C.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelUniqueItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return C.copy(r,e),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.unique=null,t.caption=null,t.offsetX=null,t.offsetY=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}}])&&ZG(e.prototype,r),n&&ZG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $G(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var tU=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.srcData=e,this.targetData=r,this.CLASS_NAME="SuperMap.ThemeMemoryData"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.srcData=null,this.targetData=null}},{key:"toJSON",value:function(){if(this.srcData&&this.targetData){for(var t="",e=Math.min(this.srcData.length,this.targetData.length),r=0;r<e;r++)t+="'"+this.srcData[r]+"':'"+this.targetData[r]+"',";return r>0&&(t=t.substring(0,t.length-1)),"{"+t+"}"}return null}}])&&$G(e.prototype,r),n&&$G(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function eU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var rU=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.lineID=null,this.lineName=null,this.lineAliasName=null,this.startStopIndex=null,this.startStopName=null,this.startStopAliasName=null,this.endStopIndex=null,this.endStopName=null,this.endStopAliasName=null,C.extend(this,e),this.CLASS_NAME="SuperMap.TransferLine"}var e,r,n;return e=t,n=[{key:"fromJson",value:function(e){if(e)return new t({lineID:e.lineID,lineName:e.lineName,lineAliasName:e.lineAliasName,startStopIndex:e.startStopIndex,startStopName:e.startStopName,startStopAliasName:e.startStopAliasName,endStopIndex:e.endStopIndex,endStopName:e.endStopName,endStopAliasName:e.endStopAliasName})}}],(r=[{key:"destroy",value:function(){C.reset(this)}}])&&eU(e.prototype,r),n&&eU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var oU=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.type=null,C.extend(this,e),this.CLASS_NAME="SuperMap.RasterFunctionParameter"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.type=null}}])&&nU(e.prototype,r),n&&nU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function iU(t){"@babel/helpers - typeof";return(iU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function aU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function sU(){return(sU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fU(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function uU(t,e){return(uU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lU(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=fU(t);if(e){var o=fU(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===iU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return cU(t)}(this,r)}}function cU(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fU(t){return(fU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hU=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uU(t,e)}(i,oU);var e,r,n,o=lU(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).redIndex=0,e.nirIndex=1,e.colorMap="0:ffffe5ff;0.1:f7fcb9ff;0.2:d9f0a3ff;0.3:addd8eff;0.4:78c679ff;0.5:41ab5dff;0.6:238443ff;0.7:006837ff;1:004529ff",e.type=cr.NDVI,C.extend(cU(e),t),e.CLASS_NAME="SuperMap.NDVIParameter",e}return e=i,(r=[{key:"destroy",value:function(){sU(fU(i.prototype),"destroy",this).call(this),this.redIndex=null,this.nirIndex=null,this.colorMap=null}},{key:"toJSON",value:function(){return{redIndex:this.redIndex,nirIndex:this.nirIndex,colorMap:this.colorMap,type:this.type}}}])&&aU(e.prototype,r),n&&aU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function pU(t){"@babel/helpers - typeof";return(pU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function dU(){return(dU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gU(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function bU(t,e){return(bU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vU(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=gU(t);if(e){var o=gU(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===pU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return mU(t)}(this,r)}}function mU(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gU(t){return(gU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wU=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bU(t,e)}(i,oU);var e,r,n,o=vU(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).altitude=45,e.azimuth=315,e.zFactor=1,e.type=cr.HILLSHADE,C.extend(mU(e),t),e.CLASS_NAME="SuperMap.HillshadeParameter",e}return e=i,(r=[{key:"destroy",value:function(){dU(gU(i.prototype),"destroy",this).call(this),this.altitude=null,this.azimuth=null,this.zFactor=null}},{key:"toJSON",value:function(){return{altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,type:this.type}}}])&&yU(e.prototype,r),n&&yU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function OU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var SU=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=null,this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobCustomItems",C.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.name=null,this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var t={name:this.name};return this.title&&(t.title=this.title),this.picAsUrl?t.picAsUrl=this.picAsUrl:this.picAsBase64&&(t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),C.toJSON(t)}}])&&OU(e.prototype,r),n&&OU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _U(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var PU=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobImage",C.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var t={};return this.picAsUrl&&(t.picAsUrl=this.picAsUrl),this.picAsBase64&&(t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),C.toJSON(t)}}])&&_U(e.prototype,r),n&&_U(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function xU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var kU=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=null,this.layerType=null,this.url=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayers",C.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.name=null,this.layerType=null,this.url=null}}])&&xU(e.prototype,r),n&&xU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function jU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var EU=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers=null,this.customItems=null,this.CLASS_NAME="SuperMap.WebPrintingJobLegendOptions",C.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers instanceof kU&&(this.layers.destroy(),this.layers=null),this.customItems instanceof SU&&(this.customItems.destroy(),this.customItems=null)}},{key:"toJSON",value:function(){var t={title:this.title||""};return this.picAsUrl?t.picAsUrl=this.picAsUrl:this.picAsBase64?t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,""):this.customItems&&(t.customItems=this.customItems),C.toJSON(t)}}])&&jU(e.prototype,r),n&&jU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function TU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var CU=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.center=null,this.scale=null,this.layerNames=null,this.image=null,this.layers=null,this.CLASS_NAME="SuperMap.WebPrintingJobLittleMapOptions",C.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.center=null,this.scale=null,this.layerNames=null,this.image instanceof PU&&(this.image.destroy(),this.image=null),this.layers instanceof kU&&(this.layers.destroy(),this.layers=null)}},{key:"toJSON",value:function(){var t={scale:this.scale,center:this.center};return this.layerNames?t.layerNames=this.layerNames:this.layers&&(t.layers=this.layers),this.image&&(t.image=this.image),C.toJSON(t)}}])&&TU(e.prototype,r),n&&TU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function RU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var AU=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobNorthArrowOptions",C.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var t={};return this.picAsUrl?t.picAsUrl=this.picAsUrl:this.picAsBase64&&(t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),C.toJSON(t)}}])&&RU(e.prototype,r),n&&RU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function MU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var LU=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null,this.CLASS_NAME="SuperMap.WebPrintingJobScaleBarOptions",C.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null}},{key:"toJSON",value:function(){var t={scaleText:this.scaleText||"",type:this.type||"BAR",intervals:this.intervals||"",unit:this.unit||"METER"};return this.orientation&&(t.orientation=this.orientation),C.toJSON(t)}}])&&MU(e.prototype,r),n&&MU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function NU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var IU=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=null,this.url=null,this.token=null,this.value=null,this.CLASS_NAME="SuperMap.WebPrintingJobContent",C.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.type="WEBMAP",this.url=null,this.token=null,this.value=null}},{key:"toJSON",value:function(){var t={type:this.type};return this.token&&(t.token=this.token),this.url?t.url=this.url:this.value&&(t.value=this.value),C.toJSON(t)}}])&&NU(e.prototype,r),n&&NU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function DU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var FU=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.scaleBarOptions=null,this.northArrowOptions=null,this.littleMapOptions=null,this.legendOptions=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayoutOptions",C.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.scaleBarOptions instanceof LU&&(this.scaleBarOptions.destroy(),this.scaleBarOptions=null),this.northArrowOptions instanceof AU&&(this.northArrowOptions.destroy(),this.northArrowOptions=null),this.littleMapOptions instanceof CU&&(this.littleMapOptions.destroy(),this.littleMapOptions=null),this.legendOptions instanceof EU&&(this.legendOptions.destroy(),this.legendOptions=null)}},{key:"toJSON",value:function(){var t={templateName:this.templateName,title:this.title,subTitle:this.subTitle,author:this.author,copyright:this.copyright};return this.scaleBarOptions&&(t.scaleBarOptions=this.scaleBarOptions),this.northArrowOptions&&(t.northArrowOptions=this.northArrowOptions),this.littleMapOptions&&(t.littleMapOptions=this.littleMapOptions),this.legendOptions&&(t.legendOptions=this.legendOptions),C.toJSON(t)}}])&&DU(e.prototype,r),n&&DU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function BU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var GU=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.format=null,this.dpi=96,this.scale=null,this.rotation=null,this.center=null,this.CLASS_NAME="SuperMap.WebPrintingJobExportOptions",C.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.format=null,this.dpi=null,this.scale=null,this.rotation=null,this.center=null,this.outputSize=null}},{key:"toJSON",value:function(){var t={format:this.format||"PDF",dpi:this.dpi,scale:this.scale,center:this.center};return this.rotation&&(t.rotation=this.rotation),this.outputSize&&(t.outputSize=this.outputSize),C.toJSON(t)}}])&&BU(e.prototype,r),n&&BU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function UU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var JU=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.content=null,this.layoutOptions=null,this.exportOptions=null,C.extend(this,e),this.CLASS_NAME="SuperMap.WebPrintingJobParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.content instanceof IU&&(this.content.destroy(),this.content=null),this.layoutOptions instanceof FU&&(this.layoutOptions.destroy(),this.layoutOptions=null),this.exportOptions instanceof GU&&(this.exportOptions.destroy(),this.exportOptions=null)}}])&&UU(e.prototype,r),n&&UU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function VU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var zU=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.include=void 0,this.exclude=void 0,this.CLASS_NAME="SuperMap.FieldsFilter",C.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("include")&&(r.include=e.include),e.hasOwnProperty("exclude")&&(r.exclude=e.exclude)),r}}],(r=[{key:"destroy",value:function(){this.include=void 0,this.exclude=void 0}}])&&VU(e.prototype,r),n&&VU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var HU=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.field=void 0,this.direction=t.Direction.ASC,this.CLASS_NAME="SuperMap.Sortby",C.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("field")&&(r.field=e.field),e.hasOwnProperty("direction")&&(r.direction=e.direction)),r}}],(r=[{key:"destroy",value:function(){this.field=void 0,this.direction="ASC"}}])&&qU(e.prototype,r),n&&qU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function WU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}HU.Direction={ASC:"ASC",DESC:"DESC"};var YU=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bbox=void 0,this.collections=void 0,this.ids=void 0,this.limit=void 0,this.fields=void 0,this.query=void 0,this.sortby=void 0,this.CLASS_NAME="SuperMap.ImageSearchParameter",C.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("bbox")&&(r.bbox=e.bbox),e.hasOwnProperty("collections")&&(r.collections=e.collections),e.hasOwnProperty("ids")&&(r.ids=e.ids),e.hasOwnProperty("limit")&&(r.limit=e.limit),e.hasOwnProperty("fields")&&(r.fields=zU.constructFromObject&&zU.constructFromObject(e.fields,{})||e.fields),e.hasOwnProperty("query")&&(r.query=e.query),e.hasOwnProperty("sortby")&&(r.sortby=e.sortby,e.sortby&&(r.sortby=e.sortby.map(function(t){return HU.constructFromObject&&HU.constructFromObject(t,{})||t})))),r}}],(r=[{key:"destroy",value:function(){var t=this;t.bbox=void 0,t.collections=void 0,t.ids=void 0,t.limit=void 0,t.fields=void 0,t.query=void 0,t.sortby=void 0}}])&&WU(e.prototype,r),n&&WU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function XU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var QU=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stretchType=void 0,this.stdevCoefficient=void 0,this.gaussianCoefficient=void 0,this.useMedianValue=void 0,this.minPercent=void 0,this.maxPercent=void 0,this.CLASS_NAME="SuperMap.ImageStretchOption",C.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("stretchType")&&(r.stretchType=e.stretchType),e.hasOwnProperty("stdevCoefficient")&&(r.stdevCoefficient=e.stdevCoefficient),e.hasOwnProperty("gaussianCoefficient")&&(r.gaussianCoefficient=e.gaussianCoefficient),e.hasOwnProperty("useMedianValue")&&(r.useMedianValue=e.useMedianValue),e.hasOwnProperty("minPercent")&&(r.minPercent=e.minPercent),e.hasOwnProperty("maxPercent")&&(r.maxPercent=e.maxPercent)),r}}],(r=[{key:"destroy",value:function(){var t=this;t.stretchType=void 0,t.stdevCoefficient=void 0,t.gaussianCoefficient=void 0,t.useMedianValue=void 0,t.minPercent=void 0,t.maxPercent=void 0}}])&&XU(e.prototype,r),n&&XU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ZU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}QU.StretchType={NONE:"NONE",GAUSSIAN:"GAUSSIAN",PERCENTCLIP:"PERCENTCLIP",MINIMUMMAXIMUM:"MINIMUMMAXIMUM",STANDARDDEVIATION:"STANDARDDEVIATION"};var KU=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.displayMode=void 0,this.displayBands=void 0,this.stretchOption=void 0,this.interpolationMode=void 0,this.colorScheme=void 0,this.colorTable=void 0,this.brightness=void 0,this.contrast=void 0,this.noData=void 0,this.noDataColor=void 0,this.noDataTransparent=void 0,this.backgroundValue=void 0,this.backgroundColor=void 0,this.backgroundTransparent=void 0,this.gridFunctions=void 0,this.CLASS_NAME="SuperMap.ImageRenderingRule",C.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("displayMode")&&(r.displayMode=e.displayMode),e.hasOwnProperty("displayBands")&&(r.displayBands=e.displayBands),e.hasOwnProperty("stretchOption")&&(r.stretchOption=QU.constructFromObject&&QU.constructFromObject(e.stretchOption,{})||e.stretchOption),e.hasOwnProperty("interpolationMode")&&(r.interpolationMode=e.interpolationMode),e.hasOwnProperty("colorScheme")&&(r.colorScheme=e.colorScheme),e.hasOwnProperty("colorTable")&&(r.colorTable=e.colorTable),e.hasOwnProperty("brightness")&&(r.brightness=e.brightness),e.hasOwnProperty("contrast")&&(r.contrast=e.contrast),e.hasOwnProperty("noData")&&(r.noData=e.noData),e.hasOwnProperty("noDataColor")&&(r.noDataColor=e.noDataColor),e.hasOwnProperty("backgroundValue")&&(r.backgroundValue=e.backgroundValue),e.hasOwnProperty("noDataTransparent")&&(r.noDataTransparent=e.noDataTransparent),e.hasOwnProperty("backgroundColor")&&(r.backgroundColor=e.backgroundColor),e.hasOwnProperty("backgroundTransparent")&&(r.backgroundTransparent=e.backgroundTransparent),e.hasOwnProperty("gridFunctions")&&(r.gridFunctions=e.gridFunctions)),r}}],(r=[{key:"destroy",value:function(){var t=this;t.displayMode=void 0,t.displayBands=void 0,t.stretchOption=void 0,t.interpolationMode=void 0,t.colorScheme=void 0,t.colorTable=void 0,t.brightness=void 0,t.contrast=void 0,t.noData=void 0,t.noDataColor=void 0,t.noDataTransparent=void 0,t.backgroundValue=void 0,t.backgroundColor=void 0,t.backgroundTransparent=void 0,t.gridFuncOptions=void 0}}])&&ZU(e.prototype,r),n&&ZU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $U(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}KU.DisplayMode={COMPOSITE:"COMPOSITE",STRETCHED:"Stretched"},KU.InterpolationMode={NEARESTNEIGHBOR:"NEARESTNEIGHBOR",HIGHQUALITYBILINEAR:"HIGHQUALITYBILINEAR",DEFAULT:"DEFAULT"};var tJ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFHillShade",C.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("girdFuncName")&&(r.girdFuncName=e.girdFuncName),e.hasOwnProperty("Azimuth")&&(r.Azimuth=e.Azimuth),e.hasOwnProperty("Altitude")&&(r.Altitude=e.Altitude),e.hasOwnProperty("ZFactor")&&(r.ZFactor=e.ZFactor)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1}}])&&$U(e.prototype,r),n&&$U(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function eJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var rJ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.girdFuncName="GFAspect",this.Azimuth=void 0,this.CLASS_NAME="SuperMap.ImageGFAspect",C.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("girdFuncName")&&(r.girdFuncName=e.girdFuncName),e.hasOwnProperty("Azimuth")&&(r.Azimuth=e.Azimuth)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFAspect",this.Azimuth=void 0}}])&&eJ(e.prototype,r),n&&eJ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var oJ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.girdFuncName="GFOrtho",this.CLASS_NAME="SuperMap.ImageGFOrtho",C.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("girdFuncName")&&(r.girdFuncName=e.girdFuncName)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFOrtho"}}])&&nJ(e.prototype,r),n&&nJ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function iJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var aJ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFSlope",C.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("girdFuncName")&&(r.girdFuncName=e.girdFuncName),e.hasOwnProperty("Altitude")&&(r.Altitude=e.Altitude),e.hasOwnProperty("ZFactor")&&(r.ZFactor=e.ZFactor)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1}}])&&iJ(e.prototype,r),n&&iJ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function sJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var uJ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},C.extend(this,e),this.CLASS_NAME="SuperMap.OnlineServiceBase"}var e,r,n;return e=t,(r=[{key:"request",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e=_h.appendCredential(e),n.crossOrigin=this.options.crossOrigin,n.headers=this.options.headers,Jl.commit(t,e,r,n).then(function(t){return t.json()})}}])&&sJ(e.prototype,r),n&&sJ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function lJ(t){"@babel/helpers - typeof";return(lJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fJ(t,e){return(fJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hJ(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=yJ(t);if(e){var o=yJ(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===lJ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return pJ(t)}(this,r)}}function pJ(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yJ(t){return(yJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dJ=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fJ(t,e)}(i,uJ);var e,r,n,o=hJ(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t),e=e||{},r.MD5=null,r.type=null,r.userName=null,r.fileName=null,r.size=null,r.serviceStatus=null,r.serviceId=null,r.id=null,r.lastModfiedTime=null,r.status=null,r.storageId=null,r.publishInfo=null,r.authorizeSetting=null,r.nickname=null,r.tags=[],r.description=null,r.dataItemServices=null,r.coordType=null,r.dataCheckResult=null,r.dataMetaInfo=null,r.thumbnail=null,C.extend(pJ(r),e),r.id&&(r.serviceUrl=t+"/"+r.id),r.CLASS_NAME="SuperMap.OnlineData",r}return e=i,(r=[{key:"load",value:function(){if(this.serviceUrl){var t=this;return t.request("GET",this.serviceUrl).then(function(e){C.extend(t,e)})}}},{key:"getPublishedServices",value:function(){return this.dataItemServices}},{key:"getAuthorizeSetting",value:function(){return this.authorizeSetting}}])&&cJ(e.prototype,r),n&&cJ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function bJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var vJ=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rootUrl="https://www.supermapol.com",this.webUrl=this.rootUrl+"/web";var e=this.webUrl+"/mycontent";this.mDatasUrl=e+"/datas",this.CLASS_NAME="SuperMap.Online"}var e,r,n;return e=t,(r=[{key:"load",value:function(){return Jl.get(this.rootUrl).then(function(t){return t})}},{key:"login",value:function(){_h.loginOnline(this.rootUrl,!0)}},{key:"queryDatas",value:function(t){var e=this,r=e.mDatasUrl;return t&&(t=t.toJSON()),Jl.get(r,t).then(function(t){if(t&&t.content&&!(t.content.length<1)){for(var r=[],n=t.content,o=n.length,i=0;i<o;i++){var a=n[i],s=new dJ(e.mDatasUrl,a);r.push(s)}return r}})}}])&&bJ(e.prototype,r),n&&bJ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function mJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var gJ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.userNames=null,this.types=null,this.fileName=null,this.serviceStatuses=null,this.serviceId=null,this.ids=null,this.keywords=null,this.orderBy=null,this.tags=null,this.filterFields=null,C.extend(this,e),this.CLASS_NAME="SuperMap.OnlineQueryDatasParameter"}var e,r,n;return e=t,(r=[{key:"toJSON",value:function(){var t=this,e={types:t.types,fileName:t.fileName,serviceStatuses:t.serviceStatuses,serviceId:t.serviceId,ids:t.ids,keywords:t.keywords,orderBy:t.orderBy,tags:t.tags,filterFields:t.filterFields};for(var r in e)null==e[r]&&delete e[r];return e}}])&&mJ(e.prototype,r),n&&mJ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function wJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var OJ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=null,this.serviceIds=null,this.clientType=er.SERVER,this.limitation=null,C.extend(this,e),this.CLASS_NAME="SuperMap.KeyServiceParameter"}var e,r,n;return e=t,(r=[{key:"toJSON",value:function(){return{name:this.name,serviceIds:this.serviceIds,clientType:this.clientType,limitation:this.limitation}}}])&&wJ(e.prototype,r),n&&wJ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function SJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var _J=function(t,e,r){return e&&SJ(t.prototype,e),r&&SJ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e,this.server=null,this.tokenServiceUrl=null,this.keyServiceUrl=null,C.extend(this,r),this.CLASS_NAME="SuperMap.ServerInfo",this.type=this.type||je.ISERVER,this.server||console.error("server url require is not  undefined");var n="/services/security/tokens";this.type===je.ISERVER&&this.server.indexOf("iserver")<0&&(n="/iserver"+n),this.tokenServiceUrl||(this.tokenServiceUrl=C.urlPathAppend(this.server,n)),this.keyServiceUrl||(this.type===je.IPORTAL?this.keyServiceUrl=C.urlPathAppend(this.server,"/web/mycontent/keys/register"):this.type===je.ONLINE&&(this.keyServiceUrl=C.urlPathAppend(this.server,"/web/mycontent/keys")))});function PJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var xJ=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.userName=null,this.password=null,this.clientType=er.NONE,this.ip=null,this.referer=null,this.expiration=60,C.extend(this,e),this.CLASS_NAME="SuperMap.TokenServiceParameter"}var e,r,n;return e=t,(r=[{key:"toJSON",value:function(){return{userName:this.userName,password:this.password,clientType:this.clientType,ip:this.ip,referer:this.referer,expiration:this.expiration}}}])&&PJ(e.prototype,r),n&&PJ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function kJ(t){return function(t){if(Array.isArray(t))return jJ(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return jJ(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jJ(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jJ(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function EJ(t){"@babel/helpers - typeof";return(EJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function TJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var CJ=function(){function t(e,r,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!r||"function"!=typeof r&&"object"!==EJ(r)||"function"!=typeof r.Client)throw Error("Please enter the global variable of @elastic/elasticsearch@5.6.22 or elasticsearch@16.7.3 for the second parameter!");n=n||{},this.url=e;try{this.client=new r.Client({host:this.url})}catch(t){this.client=new r.Client({node:{url:new URL(this.url)}})}this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=new Bn(this,null,this.EVENT_TYPES),this.eventListeners=null,C.extend(this,n),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)}var e,r,n;return e=t,(r=[{key:"setGeoFence",value:function(t){this.geoFence=t}},{key:"bulk",value:function(t,e){return this.client.bulk(t,this._handleCallback(e))}},{key:"clearScroll",value:function(t,e){return this.client.clearScroll(t,this._handleCallback(e))}},{key:"count",value:function(t,e){return this.client.count(t,this._handleCallback(e))}},{key:"create",value:function(t,e){return this.client.create(t,this._handleCallback(e))}},{key:"delete",value:function(t,e){return this.client.delete(t,this._handleCallback(e))}},{key:"deleteByQuery",value:function(t,e){return this.client.deleteByQuery(t,this._handleCallback(e))}},{key:"deleteScript",value:function(t,e){return this.client.deleteScript(t,this._handleCallback(e))}},{key:"deleteTemplate",value:function(t,e){return this.client.deleteTemplate(t,this._handleCallback(e))}},{key:"exists",value:function(t,e){return this.client.exists(t,this._handleCallback(e))}},{key:"existsSource",value:function(t,e){return this.client.existsSource(t,this._handleCallback(e))}},{key:"explain",value:function(t,e){return this.client.explain(t,this._handleCallback(e))}},{key:"fieldCaps",value:function(t,e){return this.client.fieldCaps(t,this._handleCallback(e))}},{key:"get",value:function(t,e){return this.client.get(t,this._handleCallback(e))}},{key:"getScript",value:function(t,e){return this.client.getScript(t,this._handleCallback(e))}},{key:"getSource",value:function(t,e){return this.client.getSource(t,this._handleCallback(e))}},{key:"getTemplate",value:function(t,e){return this.client.getTemplate(t,this._handleCallback(e))}},{key:"index",value:function(t,e){return this.client.index(t,this._handleCallback(e))}},{key:"info",value:function(t,e){return this.client.info(t,this._handleCallback(e))}},{key:"mget",value:function(t,e){return this.client.mget(t,this._handleCallback(e))}},{key:"msearch",value:function(t,e){var r=this;return r.client.msearch(t).then(function(t){return t=t.body||t,r._update(t.responses,e),t},function(t){return e(t),r.events.triggerEvent("error",{error:t}),t})}},{key:"msearchTemplate",value:function(t,e){return this.client.msearchTemplate(t,this._handleCallback(e))}},{key:"mtermvectors",value:function(t,e){return this.client.mtermvectors(t,this._handleCallback(e))}},{key:"ping",value:function(t,e){return this.client.ping(t,this._handleCallback(e))}},{key:"putScript",value:function(t,e){return this.client.putScript(t,this._handleCallback(e))}},{key:"putTemplate",value:function(t,e){return this.client.putTemplate(t,this._handleCallback(e))}},{key:"reindex",value:function(t,e){return this.client.reindex(t,this._handleCallback(e))}},{key:"reindexRessrottle",value:function(t,e){return this.client.reindexRessrottle(t,this._handleCallback(e))}},{key:"renderSearchTemplate",value:function(t,e){return this.client.renderSearchTemplate(t,this._handleCallback(e))}},{key:"scroll",value:function(t,e){return this.client.scroll(t,this._handleCallback(e))}},{key:"search",value:function(t,e){var r=this;return r.client.search(t).then(function(t){return t=t.body||t,r._update(t,e),t},function(t){return e&&e(t),r.events.triggerEvent("error",{error:t}),t})}},{key:"searchShards",value:function(t,e){return this.client.searchShards(t,this._handleCallback(e))}},{key:"searchTemplate",value:function(t,e){return this.client.searchTemplate(t,this._handleCallback(e))}},{key:"suggest",value:function(t,e){return this.client.suggest(t,this._handleCallback(e))}},{key:"termvectors",value:function(t,e){return this.client.termvectors(t,this._handleCallback(e))}},{key:"update",value:function(t,e){return this.client.update(t,this._handleCallback(e))}},{key:"updateByQuery",value:function(t,e){return this.client.updateByQuery(t,this._handleCallback(e))}},{key:"_handleCallback",value:function(t){return function(){var e=Array.from(arguments),r=e.shift(),n=e.shift(),o=n&&n.body;if(o){var i=n;e=[i.statusCode,i.headers],n=o}t.call.apply(t,[this,r,n].concat(kJ(e)))}}},{key:"_update",value:function(t,e){var r=this;t&&(r.data=t,r.openGeoFence&&r.geoFence&&r._validateDatas(t),r.events.triggerEvent("change",{data:r.data}),r.change?r.change&&r.change(t):e&&e(void 0,{responses:t}))}},{key:"_validateDatas",value:function(t){if(t){t instanceof Array||(t=[t]);var e,r=t.length;for(e=0;e<r;e++)this._validateData(t[e])}}},{key:"_validateData",value:function(t){var e=this;t.hits.hits.map(function(r){var n=r._source,o=e._getMeterPerMapUnit(e.geoFence.unit),i=e.geoFence.center[0]*o,a=e.geoFence.center[1]*o,s=n.x*o,u=n.y*o;return e._distance(s,u,i,a)>e.geoFence.radius&&(e.outOfGeoFence&&e.outOfGeoFence(t),e.events.triggerEvent("outOfGeoFence",{data:t})),r})}},{key:"_distance",value:function(t,e,r,n){return Math.sqrt((t-r)*(t-r)+(e-n)*(e-n))}},{key:"_getMeterPerMapUnit",value:function(t){var e;return"meter"===t?e=1:"degree"===t&&(e=2*Math.PI*6378137/360),e}}])&&TJ(e.prototype,r),n&&TJ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function RJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var AJ=new Yr,MJ=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"createCanvas",value:function(t,e){var r=document.createElement("canvas");return r.height=t,r.width=e,r.getContext("2d")}},{key:"getLinearGradient",value:function(t,e,r,n,o){this._ctx||(this._ctx=this.getContext());for(var i=this._ctx.createLinearGradient(t,e,r,n),a=o.length,s=1/(a-1),u=0,l=0;l<a;l++)i.addColorStop(u,o[l]),u+=s;return i.__nonRecursion=!0,i}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getStepColors",value:function(t,e,r){t=AJ.toRGBA(t),e=AJ.toRGBA(e),t=AJ.getData(t);for(var n=[],o=((e=AJ.getData(e))[0]-t[0])/r,i=(e[1]-t[1])/r,a=(e[2]-t[2])/r,s=(e[3]-t[3])/r,u=0,l=t[0],c=t[1],f=t[2],h=t[3];u<r;u++)n[u]=AJ.toColor([AJ.adjust(Math.floor(l),[0,255]),AJ.adjust(Math.floor(c),[0,255]),AJ.adjust(Math.floor(f),[0,255]),h.toFixed(4)-0],"hex"),l+=o,c+=i,f+=a,h+=s;return l=e[0],c=e[1],f=e[2],h=e[3],n[u]=AJ.toColor([l,c,f,h],"hex"),n}},{key:"getGradientColors",value:function(t,e,r){var n,o,i,a=[],s=t.length;if(void 0!==e){if(s>=e)if("RANGE"===r)for(o=0;o<e;o++)a.push(t[o]);else for(o=0;o<e;o++){var u=Math.floor(o/2);if(o%2==0)a.push(t[u]);else{var l=t.length-1-u;a.push(t[l])}}else{for(n=Math.ceil(e/(s-1)),o=0,i=s-1;o<i;o++){var c=this.getStepColors(t[o],t[o+1],n);o<i-1&&c.pop(),a=a.concat(c)}for(var f=a.length-e,h=0;h<f;h++)a.splice(2,1)}return a}}}],(r=null)&&RJ(e.prototype,r),n&&RJ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function LJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var NJ=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"newInstance",value:function(){return this.geostatsInstance||(this.geostatsInstance=new window.geostats),this.geostatsInstance}},{key:"getInstance",value:function(t){var e=this.newInstance();return e.setSerie(t),e}},{key:"getArrayStatistic",value:function(t,e){return t.length?"Sum"===e||"求和"===e?this.getSum(t):"Maximum"===e||"最大值"===e?this.getMax(t):"Minimum"===e||"最小值"===e?this.getMin(t):"Average"===e||"平均值"===e?this.getMean(t):"Median"===e||"中位数"===e?this.getMedian(t):"times"===e||"计数"===e?this.getTimes(t):void 0:0}},{key:"getArraySegments",value:function(t,e,r){return"offset"===e?this.getEqInterval(t,r):"jenks"===e?this.getJenks(t,r):"square"===e?this.getMin(t)>=0&&this.getSqrtInterval(t,r):"logarithm"===e?this.getMin(t)>0&&this.getGeometricProgression(t,r):void 0}},{key:"getSum",value:function(t){return this.getInstance(t).sum()}},{key:"getMax",value:function(t){return this.getInstance(t).max()}},{key:"getMin",value:function(t){return this.getInstance(t).min()}},{key:"getMean",value:function(t){return this.getInstance(t).mean()}},{key:"getMedian",value:function(t){return this.getInstance(t).median()}},{key:"getTimes",value:function(t){return t.length}},{key:"getEqInterval",value:function(t,e){return this.getInstance(t).getClassEqInterval(e)}},{key:"getJenks",value:function(t,e){return this.getInstance(t).getClassJenks(e)}},{key:"getSqrtInterval",value:function(t,e){return t=t.map(function(t){return Math.sqrt(t)}),this.getInstance(t).getClassEqInterval(e).map(function(t){return t*t})}},{key:"getGeometricProgression",value:function(t,e){return this.getInstance(t).getClassGeometricProgression(e)}}],(r=null)&&LJ(e.prototype,r),n&&LJ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();var IJ=r(7820),DJ=r.n(IJ);function FJ(t){"@babel/helpers - typeof";return(FJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function UJ(t,e,r){return e&&GJ(t.prototype,e),r&&GJ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var JJ=function(){function t(e){BJ(this,t),this.env=null,this.parser=null,this.ruleSet=null,this.cartoStr="",this.shaders=null,"string"==typeof e&&(this.cartoStr=e,this.env={frames:[],errors:[],error:function(t){this.errors.push(t)}},this.parser=this.getParser(this.env),this.parse(e),this.shaders=this.toShaders())}return UJ(t,[{key:"getParser",value:function(e){var r,n,o,i,a,s,u,l,c,f=this;function h(){i=u[o],a=n,l=n}function p(){u[o]=i,l=n=a}function y(){n>l&&(u[o]=u[o].slice(n-l),l=n)}function d(t){var e,i,a,s;if(t instanceof Function)return t.call(c.parsers);if("string"==typeof t)e=r.charAt(n)===t?t:null,i=1,y();else{if(y(),!(e=t.exec(u[o])))return null;i=e[0].length}if(e){var f=n+=i;for(s=n+u[o].length-i;n<s&&(32===(a=r.charCodeAt(n))||10===a||9===a);)n++;return u[o]=u[o].slice(i+(n-f)),l=n,0===u[o].length&&o<u.length-1&&o++,"string"==typeof e?e:1===e.length?e[0]:e}}function b(t){var n,o={index:s,filename:e.filename,message:"Parse error.",line:0,column:-1};for(var i in o)0===t[i]&&(t[i]=o[i]);n=t.filename&&f.env.inputs&&f.env.inputs[t.filename]?f.env.inputs[t.filename]:r,t.line=(n.slice(0,t.index).match(/\n/g)||"").length+1;for(var a=t.index;a>=0&&"\n"!==n.charAt(a);a--)t.column++;return new Error([t.filename,t.line,t.column,t.message].join(";"))}return this.env=e=e||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},c={parse:function(i){var a,c=null;if(n=o=l=s=0,u=[],r=i.replace(/\r\n/g,"\n"),e.filename&&(f.env.inputs[e.filename]=r),u=function(t){for(var e,n,o,i,a=0,s=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,u=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,l=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,f=0,h=t[0],p=0;p<r.length;)if(s.lastIndex=p,(e=s.exec(r))&&e.index===p&&(p+=e[0].length,h.push(e[0])),o=r.charAt(p),u.lastIndex=l.lastIndex=p,(e=l.exec(r))&&e.index===p)p+=e[0].length,h.push(e[0]);else if(n||"/"!==o||"/"!==(i=r.charAt(p+1))&&"*"!==i||!(e=u.exec(r))||e.index!==p){switch(o){case"{":if(!n){f++,h.push(o);break}case"}":if(!n){f--,h.push(o),t[++a]=h=[];break}case"(":if(!n){n=!0,h.push(o);break}case")":if(n){n=!1,h.push(o);break}default:h.push(o)}p++}else p+=e[0].length,h.push(e[0]);return 0!==f&&(c={index:p-1,type:"Parse",message:f>0?"missing closing `}`":"missing opening `{`"}),t.map(function(t){return t.join("")})}([[]]),c)throw b(c);var h=function(t,e){var r=t.specificity,n=e.specificity;return r[0]!=n[0]?n[0]-r[0]:r[1]!=n[1]?n[1]-r[1]:r[2]!=n[2]?n[2]-r[2]:n[3]-r[3]};return(a=new t.Tree.Ruleset([],d(this.parsers.primary))).root=!0,a.toList=function(t){t.error=function(e){t.errors||(t.errors=new Error("")),t.errors.message?t.errors.message+="\n"+b(e).message:t.errors.message=b(e).message},t.frames=t.frames||[];var e=this.flatten([],[],t);return e.sort(h),e},a},parsers:{primary:function(){for(var t,e=[];(t=d(this.rule)||d(this.ruleset)||d(this.comment))||d(/^[\s\n]+/)||(t=d(this.invalid));)t&&e.push(t);return e},invalid:function(){var e=d(/^[^;\n]*[;\n]/);if(e)return new t.Tree.Invalid(e,a)},comment:function(){var e;if("/"===r.charAt(n))return"/"===r.charAt(n+1)?new t.Tree.Comment(d(/^\/\/.*/),!0):(e=d(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new t.Tree.Comment(e):void 0},entities:{quoted:function(){if('"'===r.charAt(n)||"'"===r.charAt(n)){var e=d(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);return e?new t.Tree.Quoted(e[1]||e[2]):void 0}},field:function(){if(d("[")){var e=d(/(^[^\]]+)/);if(d("]"))return e?new t.Tree.Field(e[1]):void 0}},comparison:function(){var t=d(/^=~|=|!=|<=|>=|<|>/);if(t)return t},keyword:function(){var e=d(/^[A-Za-z\u4e00-\u9fa5-]+[A-Za-z-0-9\u4e00-\u9fa5_]*/);if(e)return new t.Tree.Keyword(e)},call:function(){var e,r;if(e=/^([\w\-]+|%)\(/.exec(u[o])){if("url"===(e=e[1]))return null;n+=e.length;if(d("("),r=d(this.entities.arguments),d(")"))return e?new t.Tree.Call(e,r,n):void 0}},arguments:function(){for(var t,e=[];t=d(this.expression);){e.push(t);if(!d(","))break}return e},literal:function(){return d(this.entities.dimension)||d(this.entities.keywordcolor)||d(this.entities.hexcolor)||d(this.entities.quoted)},url:function(){var e;if("u"===r.charAt(n)&&d(/^url\(/)){e=d(this.entities.quoted)||d(this.entities.variable)||d(/^[\-\w%@_match\/.&=:;#+?~]+/)||"";return d(")")?new t.Tree.URL(void 0!==e.value||e instanceof t.Tree.Variable?e:new t.Tree.Quoted(e)):new t.Tree.Invalid(e,a,"Missing closing ) in URL.")}},variable:function(){var o,i=n;if("@"===r.charAt(n)&&(o=d(/^@[\w-]+/)))return new t.Tree.Variable(o,i,e.filename)},hexcolor:function(){var e;if("#"===r.charAt(n)&&(e=d(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new t.Tree.Color(e[1])},keywordcolor:function(){var e=u[o].match(/^[a-z]+/);if(e&&e[0]in t.Tree.Reference.data.colors)return new t.Tree.Color(t.Tree.Reference.data.colors[d(/^[a-z]+/)])},dimension:function(){var e=r.charCodeAt(n);if(!(e>57||e<45||47===e)){var o=d(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);return o?new t.Tree.Dimension(o[1],o[2],a):void 0}}},variable:function(){var t;if("@"===r.charAt(n)&&(t=d(/^(@[\w-]+)\s*:/)))return t[1]},entity:function(){var t=d(this.entities.call)||d(this.entities.literal),e=d(this.entities.field)||d(this.entities.variable),r=d(this.entities.url)||d(this.entities.keyword);return t||e||r},end:function(){var t;return d(";")||("string"==typeof(t="}")?r.charAt(n)===t:!!t.test(u[o]))},element:function(){var e=d(/^(?:[.#][\w\u4e00-\u9fa5\-]+|\*|Map)/);if(e)return new t.Tree.Element(e)},attachment:function(){var t=d(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(t)return t[1]},selector:function(){for(var e,o,i,s,u,l=[],c=new t.Tree.Filterset,f=[],h=0,p=0;(i=d(this.element))||(u=d(this.zoom))||(s=d(this.filter))||(e=d(this.attachment));){if(h++,i)l.push(i);else if(u)f.push(u),p++;else if(s){var y=c.add(s);if(y)throw b({message:y,index:n-1});p++}else{if(o)throw b({message:"Encountered second attachment name.",index:n-1});o=e}var v=r.charAt(n);if("{"===v||"}"===v||";"===v||","===v)break}if(h)return new t.Tree.Selector(c,f,l,o,p,a)},filter:function(){h();var r,n,o;if(d("[")&&(r=d(/^[a-zA-Z0-9\-_]+/)||d(this.entities.quoted)||d(this.entities.variable)||d(this.entities.keyword)||d(this.entities.field))&&(r instanceof t.Tree.Quoted&&(r=new t.Tree.Field(r.toString())),(n=d(this.entities.comparison))&&(o=d(this.entities.quoted)||d(this.entities.variable)||d(this.entities.dimension)||d(this.entities.keyword)||d(this.entities.field)))){if(!d("]"))throw b({message:"Missing closing ] of filter.",index:a-1});return r.is||(r=new t.Tree.Field(r)),new t.Tree.Filter(r,n,o,a,e.filename)}},zoom:function(){h();var e,r;if(d(/^\[\s*zoom/g)&&(e=d(this.entities.comparison))&&(r=d(this.entities.variable)||d(this.entities.dimension))&&d("]"))return new t.Tree.Zoom(e,r,a);p()},block:function(){var t;if(d("{")&&(t=d(this.primary))&&d("}"))return t},ruleset:function(){var e,r,n=[];for(h();e=d(this.selector);){for(n.push(e);d(this.comment););if(!d(","))break;for(;d(this.comment););}if(e)for(;d(this.comment););if(n.length>0&&(r=d(this.block))){if(1===n.length&&n[0].elements.length&&"Map"===n[0].elements[0].value){var o=new t.Tree.Ruleset(n,r);return o.isMap=!0,o}return new t.Tree.Ruleset(n,r)}p()},rule:function(){var o,i,u=r.charAt(n);if(h(),"."!==u&&"#"!==u&&(o=d(this.variable)||d(this.property))){if((i=d(this.value))&&d(this.end))return new t.Tree.Rule(o,i,a,e.filename);s=n,p()}},font:function(){for(var e,r=[],n=[];e=d(this.entity);)n.push(e);if(r.push(new t.Tree.Expression(n)),d(","))for(;(e=d(this.expression))&&(r.push(e),d(",")););return new t.Tree.Value(r)},value:function(){for(var e,r=[];(e=d(this.expression))&&(r.push(e),d(",")););return r.length>1?new t.Tree.Value(r.map(function(t){return t.value[0]})):1===r.length?new t.Tree.Value(r):void 0},sub:function(){var t;if(d("(")&&(t=d(this.expression))&&d(")"))return t},multiplication:function(){var e,r,n,o;if(e=d(this.operand)){for(;(n=d("/")||d("*")||d("%"))&&(r=d(this.operand));)o=new t.Tree.Operation(n,[o||e,r],a);return o||e}},addition:function(){var e,o,i,s;if(e=d(this.multiplication)){for(;(i=d(/^[-+]\s+/)||" "!=r.charAt(n-1)&&(d("+")||d("-")))&&(o=d(this.multiplication));)s=new t.Tree.Operation(i,[s||e,o],a);return s||e}},operand:function(){return d(this.sub)||d(this.entity)},expression:function(){for(var e,r=[];e=d(this.addition)||d(this.entity);)r.push(e);if(r.length>0)return new t.Tree.Expression(r)},property:function(){var t=d(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(t)return t[1]}}}}},{key:"parse",value:function(t){var e=this.parser;return this.ruleSet=e.parse(t)}},{key:"toShaders",value:function(){if(this.ruleSet){var t=this.ruleSet;if(t){var e=t.toList(this.env);e.reverse();var r={},n=[];this._toShaders(r,n,e);for(var o=[],i={},a=0,s=e.length;a<s;++a){var u=e[a],l=u.attachment,c=r[n[a]],f=[];if(!i[l]){var h=0;for(var p in c)if("zoom"!==p&&"frames"!==p&&"attachment"!==p&&"elements"!=p)if("layer-index"===p){var y=(c[p].join("\n"),null);Object.defineProperty(f,"layerIndex",{configurable:!0,enumerable:!1,value:y})}else f[h++]=function(t,e){if(!Array.isArray(t))return t;var r=t.join("\n"),n='attributes["FEATUREID"]&&attributes["FEATUREID"]',o=r.indexOf(n);if(o>=0){if(!e.featureFilter){var i=o+n.length,a=r.indexOf(")",i+1),s="featureId&&(featureId"+r.substring(i,a)+")";Object.defineProperty(e,"featureFilter",{configurable:!0,enumerable:!1,value:function(t){return!!s}})}return{property:p,getValue:Function("attributes","zoom","seftFilter","var _value = null; var isExcute=typeof seftFilter=='function'?sefgFilter():seftFilter;if(isExcute){"+r+";} return _value; ")}}return{property:p,getValue:Function("attributes","zoom","var _value = null;"+r+"; return _value; ")}}(c[p],f);Object.defineProperty(f,"attachment",{configurable:!0,enumerable:!1,value:l}),Object.defineProperty(f,"elements",{configurable:!0,enumerable:!1,value:u.elements}),o.push(f),i[n[a]]=!0}Object.defineProperty(f,"zoom",{configurable:!0,enumerable:!1,value:u.zoom})}return o}}return null}},{key:"_toShaders",value:function(e,r,n){for(var o=0,i=n.length;o<i;++o){for(var a=n[o],s=[],u=0,l=a.elements.length;u<l;u++)s.push(a.elements[u]);var c=a.filters.filters,f=[];for(var h in c)f.push(c[h].id);var p=s.join("/")+"::"+a.attachment+"_"+f.join("_");r.push(p);var y=e[p]=e[p]||{};y.zoom=t.Tree.Zoom.all;var d=a.toJS(this.env);for(var b in d)(y[b]=y[b]||[]).push(d[b].join("\n"))}}},{key:"getShaders",value:function(){return this.shaders}},{key:"destroy",value:function(){this.cartoStr=null,this.env=null,this.ruleSet=null,this.parser=null,this.shaders=null}}]),t}(),VJ={version:"2.1.1",style:{"filter-mode":{type:["all","first"],doc:"Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)","default-value":"all","default-meaning":"All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true."},"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},layer:{name:{"default-value":"",type:"string",required:!0,"default-meaning":"No layer name has been provided",doc:"The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map"},srs:{"default-value":"",type:"string","default-meaning":"No srs value is provided and the value will be inherited from the Map's srs",doc:"The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'"},status:{"default-value":!0,type:"boolean","default-meaning":"This layer will be marked as active and available for processing",doc:"A property that can be set to false to disable this layer from being processed"},minzoom:{"default-value":"0",type:"float","default-meaning":"The layer will be visible at the minimum possible scale",doc:"The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},maxzoom:{"default-value":"1.79769e+308",type:"float","default-meaning":"The layer will be visible at the maximum possible scale",doc:"The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},queryable:{"default-value":!1,type:"boolean","default-meaning":"The layer will not be available for the direct querying of data values",doc:"This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true"},"clear-label-cache":{"default-value":!1,type:"boolean","default-meaning":"The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer",doc:"This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers"},"group-by":{"default-value":"",type:"string","default-meaning":"No special layer grouping will be used during rendering",doc:"https://github.com/mapnik/mapnik/wiki/Grouped-rendering"},"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"maximum-extent":{"default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer."}},symbolizers:{"*":{"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},map:{"background-color":{css:"background-color","default-value":"none","default-meaning":"transparent",type:"color",doc:"Map Background color"},"background-image":{css:"background-image",type:"uri","default-value":"","default-meaning":"transparent",doc:"An image that is repeated below all features on a map as a background.",description:"Map Background image"},srs:{css:"srs",type:"string","default-value":"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs","default-meaning":"The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space",doc:"Map spatial reference (proj4 string)"},"buffer-size":{css:"buffer-size","default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".'},"maximum-extent":{css:"","default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map."},base:{css:"base","default-value":"","default-meaning":"This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.",type:"string",doc:"Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet."},"paths-from-xml":{css:"","default-value":!0,"default-meaning":"Paths read from XML will be interpreted from the location of the XML",type:"boolean",doc:"value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()"},"minimum-version":{css:"","default-value":"none","default-meaning":"Mapnik version will not be detected and no error will be thrown about compatibility",type:"string",doc:"The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet"},"font-directory":{css:"font-directory",type:"uri","default-value":"none","default-meaning":"No map-specific fonts will be registered",doc:"Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)."}},polygon:{fill:{css:"polygon-fill",type:"color","default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon"},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque"},gamma:{css:"polygon-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon edges"},"gamma-method":{css:"polygon-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},clip:{css:"polygon-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line"},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels"},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"},"stroke-gamma":{css:"line-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of stroke line"},"stroke-gamma-method":{css:"line-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},"stroke-dasharray":{css:"line-dasharray",type:"numbers",doc:"A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.","default-value":"none","default-meaning":"solid line"},"stroke-dashoffset":{css:"line-dash-offset",type:"numbers",doc:"valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)","default-value":"none","default-meaning":"solid line"},"stroke-miterlimit":{css:"line-miterlimit",type:"float",doc:"The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.","default-value":4,"default-meaning":"Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'"},clip:{css:"line-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},offset:{css:"line-offset",type:"float","default-value":0,"default-meaning":"no offset",doc:"Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)."},rasterizer:{css:"line-rasterizer",type:["full","fast"],"default-value":"full",doc:"Exposes an alternate AGG rendering method that sacrifices some accuracy for speed."},"geometry-transform":{css:"line-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri"},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},placement:{css:"marker-placement",type:["point","line","interior"],"default-value":"point","default-meaning":"Place markers at the center point (centroid) of the geometry",doc:"Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior"},"multi-policy":{css:"marker-multi-policy",type:["each","whole","largest"],"default-value":"each","default-meaning":"If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each",doc:"A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)."},"marker-type":{css:"marker-type",type:["arrow","ellipse"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"expression"},height:{css:"marker-height","default-value":10,doc:"The height of the marker, if using one of the default types.",type:"expression"},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color"},"allow-overlap":{css:"marker-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping markers are shown or hidden.","default-meaning":"Do not allow makers to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"marker-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},spacing:{css:"marker-spacing",doc:"Space between repeated labels","default-value":100,type:"float"},"max-error":{css:"marker-max-error",type:"float","default-value":.2,doc:"The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers."},transform:{css:"marker-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},clip:{css:"marker-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"marker-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"marker-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"marker-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},shield:{name:{css:"shield-name",type:"expression",serialization:"content",doc:'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]'},file:{css:"shield-file",required:!0,type:"uri","default-value":"none",doc:"Image file to render behind the shield text"},"face-name":{css:"shield-face-name",type:"string",validate:"font",doc:"Font name and style to use for the shield text","default-value":"",required:!0},"unlock-image":{css:"shield-unlock-image",type:"boolean",doc:"This parameter should be set to true if you are trying to position text beside rather than on top of the shield image","default-value":!1,"default-meaning":"text alignment relative to the shield image uses the center of the image as the anchor for text positioning."},size:{css:"shield-size",type:"float",doc:"The size of the shield text in pixels"},fill:{css:"shield-fill",type:"color",doc:"The color of the shield text"},placement:{css:"shield-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons."},"avoid-edges":{css:"shield-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.",type:"boolean","default-value":!1},"allow-overlap":{css:"shield-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping shields are shown or hidden.","default-meaning":"Do not allow shields to overlap with other map elements already placed."},"minimum-distance":{css:"shield-min-distance",type:"float","default-value":0,doc:"Minimum distance to the next shield symbol, not necessarily the same shield."},spacing:{css:"shield-spacing",type:"float","default-value":0,doc:"The spacing between repeated occurrences of the same shield on a line"},"minimum-padding":{css:"shield-min-padding","default-value":0,doc:"Determines the minimum amount of padding that a shield gets relative to other shields",type:"float"},"wrap-width":{css:"shield-wrap-width",type:"unsigned","default-value":0,doc:"Length of a chunk of text in characters before wrapping text"},"wrap-before":{css:"shield-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"shield-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long names."},"halo-fill":{css:"shield-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"shield-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},"character-spacing":{css:"shield-character-spacing",type:"unsigned","default-value":0,doc:"Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement."},"line-spacing":{css:"shield-line-spacing",doc:"Vertical spacing between lines of multiline labels (in pixels)",type:"unsigned"},dx:{css:"shield-text-dx",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"shield-text-dy",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"shield-dx":{css:"shield-dx",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},"shield-dy":{css:"shield-dy",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},opacity:{css:"shield-opacity",type:"float",doc:"(Default 1.0) - opacity of the image used for the shield","default-value":1},"text-opacity":{css:"shield-text-opacity",type:"float",doc:"(Default 1.0) - opacity of the text placed on top of the shield","default-value":1},"horizontal-alignment":{css:"shield-horizontal-alignment",type:["left","middle","right","auto"],doc:"The shield's horizontal alignment from its centerpoint","default-value":"auto"},"vertical-alignment":{css:"shield-vertical-alignment",type:["top","middle","bottom","auto"],doc:"The shield's vertical alignment from its centerpoint","default-value":"middle"},"text-transform":{css:"shield-text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"justify-alignment":{css:"shield-justify-alignment",type:["left","center","right","auto"],doc:"Define how text in a shield's label is justified","default-value":"auto"},clip:{css:"shield-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"shield-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"line-pattern":{file:{css:"line-pattern-file",type:"uri","default-value":"none",required:!0,doc:"An image file to be repeated and warped along a line"},clip:{css:"line-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"line-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"polygon-pattern":{file:{css:"polygon-pattern-file",type:"uri","default-value":"none",required:!0,doc:"Image to use as a repeated pattern fill within a polygon"},alignment:{css:"polygon-pattern-alignment",type:["local","global"],"default-value":"local",doc:"Specify whether to align pattern fills to the layer or to the map."},gamma:{css:"polygon-pattern-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon pattern edges"},opacity:{css:"polygon-pattern-opacity",type:"float",doc:"(Default 1.0) - Apply an opacity level to the image used for the pattern","default-value":1,"default-meaning":"The image is rendered without modifications"},clip:{css:"polygon-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},raster:{opacity:{css:"raster-opacity","default-value":1,"default-meaning":"opaque",type:"float",doc:"The opacity of the raster symbolizer on top of other symbolizers."},"filter-factor":{css:"raster-filter-factor","default-value":-1,"default-meaning":"Allow the datasource to choose appropriate downscaling.",type:"float",doc:"This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed."},scaling:{css:"raster-scaling",type:["near","fast","bilinear","bilinear8","bicubic","spline16","spline36","hanning","hamming","hermite","kaiser","quadric","catrom","gaussian","bessel","mitchell","sinc","lanczos","blackman"],"default-value":"near",doc:"The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality."},"mesh-size":{css:"raster-mesh-size","default-value":16,"default-meaning":"Reprojection mesh will be 1/16 of the resolution of the source image",type:"unsigned",doc:"A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion."},"comp-op":{css:"raster-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},"allow-overlap":{css:"point-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping points are shown or hidden.","default-meaning":"Do not allow points to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"point-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"},placement:{css:"point-placement",type:["centroid","interior"],doc:"How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.","default-value":"centroid"},transform:{css:"point-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},"comp-op":{css:"point-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},text:{name:{css:"text-name",type:"expression",required:!0,"default-value":"",serialization:"content",doc:"Value to use for a text label. Data columns are specified using brackets like [column_name]"},"face-name":{css:"text-face-name",type:"string",validate:"font",doc:"Font name and style to render a label in",required:!0},size:{css:"text-size",type:"float","default-value":10,doc:"Text size in pixels"},"text-ratio":{css:"text-ratio",doc:"Define the amount of text (of the total) present on successive lines when wrapping occurs","default-value":0,type:"unsigned"},"wrap-width":{css:"text-wrap-width",doc:"Length of a chunk of text in characters before wrapping text","default-value":0,type:"unsigned"},"wrap-before":{css:"text-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"text-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long text."},spacing:{css:"text-spacing",type:"unsigned",doc:"Distance between repeated text labels on a line (aka. label-spacing)"},"character-spacing":{css:"text-character-spacing",type:"float","default-value":0,doc:"Horizontal spacing adjustment between characters in pixels"},"line-spacing":{css:"text-line-spacing","default-value":0,type:"unsigned",doc:"Vertical spacing adjustment between lines in pixels"},"label-position-tolerance":{css:"text-label-position-tolerance","default-value":0,type:"unsigned",doc:"Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)"},"max-char-angle-delta":{css:"text-max-char-angle-delta",type:"float","default-value":"22.5",doc:"The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners."},fill:{css:"text-fill",doc:"Specifies the color for the text","default-value":"#000000",type:"color"},opacity:{css:"text-opacity",doc:"A number from 0 to 1 specifying the opacity for the text","default-value":1,"default-meaning":"Fully opaque",type:"float"},"halo-fill":{css:"text-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"text-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},dx:{css:"text-dx",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"text-dy",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"vertical-alignment":{css:"text-vertical-alignment",type:["top","middle","bottom","auto"],doc:"Position of label relative to point position.","default-value":"auto","default-meaning":'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.'},"avoid-edges":{css:"text-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.","default-value":!1,type:"boolean"},"minimum-distance":{css:"text-min-distance",doc:"Minimum permitted distance to the next text symbolizer.",type:"float"},"minimum-padding":{css:"text-min-padding",doc:"Determines the minimum amount of padding that a text symbolizer gets relative to other text",type:"float"},"minimum-path-length":{css:"text-min-path-length",type:"float","default-value":0,"default-meaning":"place labels on all paths",doc:"Place labels only on paths longer than this value."},"allow-overlap":{css:"text-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping text is shown or hidden.","default-meaning":"Do not allow text to overlap with other text - overlapping markers will not be shown."},orientation:{css:"text-orientation",type:"expression",doc:"Rotate the text."},placement:{css:"text-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"Control the style of placement of a point versus the geometry it is attached to."},"placement-type":{css:"text-placement-type",doc:'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.',type:["dummy","simple"],"default-value":"dummy"},placements:{css:"text-placements",type:"string","default-value":"",doc:'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` '},"text-transform":{css:"text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"horizontal-alignment":{css:"text-horizontal-alignment",type:["left","middle","right","auto"],doc:"The text's horizontal alignment from its centerpoint","default-value":"auto"},"justify-alignment":{css:"text-align",type:["left","right","center","auto"],doc:"Define how text is justified","default-value":"auto","default-meaning":"Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives"},clip:{css:"text-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"text-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},building:{fill:{css:"building-fill","default-value":"#FFFFFF",doc:"The color of the buildings walls.",type:"color"},"fill-opacity":{css:"building-fill-opacity",type:"float",doc:"The opacity of the building as a whole, including all walls.","default-value":1},height:{css:"building-height",doc:"The height of the building in pixels.",type:"expression","default-value":"0"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]},filter:{value:["true","false","null","point","linestring","polygon","collection"]}};function zJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}JJ.mapnik_reference={version:{latest:VJ,"2.1.1":VJ}},JJ.Tree={},JJ.Tree.operate=function(t,e,r){switch(t){case"+":return e+r;case"-":return e-r;case"*":return e*r;case"%":return e%r;case"/":return e/r}},JJ.Tree.functions={rgb:function(t,e,r){return this.rgba(t,e,r,1)},rgba:function(t,e,r,n){var o=this,i=[t,e,r].map(function(t){return o.number(t)});return n=o.number(n),i.some(isNaN)||isNaN(n)?null:new JJ.Tree.Color(i,n)},stop:function(t){var e,r;return arguments.length>1&&(e=arguments[1]),arguments.length>2&&(r=arguments[2]),{is:"tag",val:t,color:e,mode:r,toString:function(n){return'\n\t<stop value="'+t.ev(n)+'"'+(e?' color="'+e.ev(n)+'" ':"")+(r?' mode="'+r.ev(n)+'" ':"")+"/>"}}},hsl:function(t,e,r){return this.hsla(t,e,r,1)},hsla:function(t,e,r,n){if([t=this.number(t)%360/360,e=this.number(e),r=this.number(r),n=this.number(n)].some(isNaN))return null;var o=r<=.5?r*(e+1):r+e-r*e,i=2*r-o;return this.rgba(255*a(t+1/3),255*a(t),255*a(t-1/3),n);function a(t){return 6*(t=t<0?t+1:t>1?t-1:t)<1?i+(o-i)*t*6:2*t<1?o:3*t<2?i+(o-i)*(2/3-t)*6:i}},hue:function(t){return"toHSL"in t?new JJ.Tree.Dimension(Math.round(t.toHSL().h)):null},saturation:function(t){return"toHSL"in t?new JJ.Tree.Dimension(Math.round(100*t.toHSL().s),"%"):null},lightness:function(t){return"toHSL"in t?new JJ.Tree.Dimension(Math.round(100*t.toHSL().l),"%"):null},alpha:function(t){return"toHSL"in t?new JJ.Tree.Dimension(t.toHSL().a):null},saturate:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.s+=e.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},desaturate:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.s-=e.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},lighten:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.l+=e.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},darken:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.l-=e.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},fadein:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.a+=e.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},fadeout:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.a-=e.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},spin:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL(),n=(r.h+e.value)%360;return r.h=n<0?360+n:n,this.hsla_simple(r)},replace:function(t,e,r){return"field"===t.is?t.toString+".replace("+e.toString()+", "+r.toString()+")":t.replace(e,r)},mix:function(t,e,r){var n=r.value/100,o=2*n-1,i=t.toHSL().a-e.toHSL().a,a=((o*i==-1?o:(o+i)/(1+o*i))+1)/2,s=1-a,u=[t.rgb[0]*a+e.rgb[0]*s,t.rgb[1]*a+e.rgb[1]*s,t.rgb[2]*a+e.rgb[2]*s],l=t.alpha*n+e.alpha*(1-n);return new JJ.Tree.Color(u,l)},greyscale:function(t){return this.desaturate(t,new JJ.Tree.Dimension(100))},"%":function(t){for(var e=Array.prototype.slice.call(arguments,1),r=t.value,n=0;n<e.length;n++)r=r.replace(/%s/,e[n].value).replace(/%[da]/,e[n].toString());return r=r.replace(/%%/g,"%"),new JJ.Tree.Quoted(r)},hsla_simple:function(t){return this.hsla(t.h,t.s,t.l,t.a)},number:function(t){return t instanceof JJ.Tree.Dimension?parseFloat("%"===t.unit?t.value/100:t.value):"number"==typeof t?t:NaN},clamp:function(t){return Math.min(1,Math.max(0,t))}},JJ.Tree.Call=function(){function t(e,r,n){BJ(this,t),this.is="call",this.name=e,this.args=r,this.index=n}return UJ(t,[{key:"ev",value:function(t){for(var e=this.args.map(function(e){return e.ev(t)}),r=0;r<e.length;r++)if("undefined"===e[r].is)return{is:"undefined",value:"undefined"};if(this.name in JJ.Tree.functions){if(JJ.Tree.functions[this.name].length<=e.length){var n=JJ.Tree.functions[this.name].apply(JJ.Tree.functions,e);return null===n?(t.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n}return t.error({message:"incorrect number of arguments for "+this.name+"(). "+JJ.Tree.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}var o=JJ.Tree.Reference.mapnikFunctions[this.name];if(void 0===o){var i=DJ()(JJ.Tree.Reference.mapnikFunctions),a=this.name,s=i.map(function(t){return[t[0],JJ.Tree.Reference.editDistance(a,t[0]),t[1]]}).sort(function(t,e){return t[1]-e[1]});return t.error({message:"unknown function "+this.name+"(), did you mean "+s[0][0]+"("+s[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}return o!==e.length&&-1!==o?(t.error({message:"function "+this.name+"() takes "+o+" arguments and was given "+e.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):(this.args=e,this)}},{key:"toString",value:function(t,e){return this.args.length?this.name+"("+this.args.join(",")+")":this.name}}]),t}(),JJ.Tree.Color=function(){function t(e,r){BJ(this,t),this.is="color",Array.isArray(e)?this.rgb=e.slice(0,3):6==e.length?this.rgb=e.match(/.{2}/g).map(function(t){return parseInt(t,16)}):this.rgb=e.split("").map(function(t){return parseInt(t+t,16)}),"number"==typeof r?this.alpha=r:4===e.length?this.alpha=e[3]:this.alpha=1}return UJ(t,[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return"rgba("+this.rgb.map(function(t){return Math.round(t)}).concat(this.alpha).join(", ")+")"}},{key:"operate",value:function(t,e,r){var n=[];r instanceof JJ.Tree.Color||(r=r.toColor());for(var o=0;o<3;o++)n[o]=JJ.Tree.operate(e,this.rgb[o],r.rgb[o]);return new JJ.Tree.Color(n)}},{key:"toHSL",value:function(){var t,e,r=this.rgb[0]/255,n=this.rgb[1]/255,o=this.rgb[2]/255,i=this.alpha,a=Math.max(r,n,o),s=Math.min(r,n,o),u=(a+s)/2,l=a-s;if(a===s)t=e=0;else{switch(e=u>.5?l/(2-a-s):l/(a+s),a){case r:t=(n-o)/l+(n<o?6:0);break;case n:t=(o-r)/l+2;break;case o:t=(r-n)/l+4}t/=6}return{h:360*t,s:e,l:u,a:i}}}]),t}(),JJ.Tree.Comment=function(){function t(e,r){BJ(this,t),this.value=e,this.silent=!!r}return UJ(t,[{key:"toString",value:function(t){return"\x3c!--"+this.value+"--\x3e"}},{key:"ev",value:function(){return this}}]),t}(),JJ.Tree.Definition=function(){function t(e,r){BJ(this,t),this.elements=e.elements,this.rules=r,this.ruleIndex={};for(var n=0;n<this.rules.length;n++)"zoom"in this.rules[n]&&(this.rules[n]=this.rules[n].clone()),this.rules[n].zoom=e.zoom,this.ruleIndex[this.rules[n].updateID()]=!0;this.filters=e.filters,this.zoom=e.zoom,this.attachment=e.attachment||"__default__",this.specificity=e.specificity()}return UJ(t,[{key:"toString",value:function(){for(var t=this.filters.toString(),e=0;e<this.rules.length;e++)t+="\n    "+this.rules[e];return t}},{key:"toJS",value:function(t){var e={},r=this.zoom,n=this.filters.toJS(t),o=[r];function i(r){if(r instanceof JJ.Tree.Rule)e[r.name]=e[r.name]||[],n?e[r.name].push("if("+n+"){"+r.value.toJS(t)+"}"):e[r.name].push(r.value.toJS(t));else if(r instanceof JJ.Tree.Ruleset){var o=r.toJS(t);for(var i in o)for(var a in e[i]=e[i]||[],o[i])e[i].push(o[i][a])}}for(var a in n&&o.push(n),n=o.join(" && "),this.rules)i(this.rules[a]);return e}}]),t}(),JJ.Tree.Dimension=function(){function t(e,r,n){BJ(this,t),this.is="float",this.physical_units=["m","cm","in","mm","pt","pc"],this.screen_units=["px","%"],this.all_units=["m","cm","in","mm","pt","pc","px","%"],this.densities={m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},this.value=parseFloat(e),this.unit=r||null,this.index=n}return UJ(t,[{key:"ev",value:function(t){if(this.unit&&this.all_units.indexOf(this.unit)<0)return t.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&this.physical_units.indexOf(this.unit)>=0){if(!t.ppi)return t.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*t.ppi,this.unit="px"}return this}},{key:"toColor",value:function(){return new JJ.Tree.Color([this.value,this.value,this.value])}},{key:"round",value:function(){return this.value=Math.round(this.value),this}},{key:"toString",value:function(){return this.value.toString()}},{key:"operate",value:function(t,e,r){return"%"===this.unit&&"%"!==r.unit?(t.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===r.unit?"*"===e||"/"===e||"%"===e?(t.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new JJ.Tree.Dimension(JJ.Tree.operate(e,this.value,this.value*r.value*.01),this.unit):new JJ.Tree.Dimension(JJ.Tree.operate(e,this.value,r.value),this.unit||r.unit)}}]),t}(),JJ.Tree.Element=function(){function t(e){BJ(this,t),this.value=e.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),-1!==this.value.indexOf("*")&&(this.type="wildcard")}return UJ(t,[{key:"specificity",value:function(){return["id"===this.type?1:0,"class"===this.type?1:0]}},{key:"toString",value:function(){return this.value}}]),t}(),JJ.Tree.Expression=function(){function t(e){BJ(this,t),this.is="expression",this.value=e}return UJ(t,[{key:"ev",value:function(t){return this.value.length>1?new JJ.Tree.Expression(this.value.map(function(e){return e.ev(t)})):this.value[0].ev(t)}},{key:"toString",value:function(t){return this.value.map(function(e){return e.toString(t)}).join(" ")}}]),t}(),JJ.Tree.Field=function(){function t(e){BJ(this,t),this.is="field",this.value=e||""}return UJ(t,[{key:"toString",value:function(){return'["'+this.value.toUpperCase()+'"]'}},{key:"ev",value:function(){return this}}]),t}(),JJ.Tree.Filter=function(){function t(e,r,n,o,i){BJ(this,t),this.ops={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]},this.key=e,this.op=r,this.val=n,this.index=o,this.filename=i,this.id=this.key+this.op+this.val}return UJ(t,[{key:"ev",value:function(t){return this.key=this.key.ev(t),this.val=this.val.ev(t),this}},{key:"toString",value:function(){return"["+this.id+"]"}}]),t}(),JJ.Tree.Filterset=function(){function t(){BJ(this,t),this.filters={}}return UJ(t,[{key:"toJS",value:function(t){function e(t){var e=t.op;"="===e&&(e="==");var r=t.val;void 0!==t._val&&(r=t._val.toString(!0)),t.key&&"scale"===t.key.value?r=+r:"string"!=typeof r&&"object"!==FJ(r)||(r="'"+r+"'");var n="attributes";return n+"&&"+n+t.key+"&&"+n+t.key+" "+e+r}var r=[];for(var n in this.filters)r.push(e(this.filters[n]));return r.join(" && ")}},{key:"toString",value:function(){var t=[];for(var e in this.filters)t.push(this.filters[e].id);return t.sort().join("\t")}},{key:"ev",value:function(t){for(var e in this.filters)this.filters[e].ev(t);return this}},{key:"clone",value:function(){var t=new JJ.Tree.Filterset;for(var e in this.filters)t.filters[e]=this.filters[e];return t}},{key:"cloneWith",value:function(t){var e=[];for(var r in t.filters){var n=this.addable(t.filters[r]);if(!1===n)return!1;!0===n&&e.push(t.filters[r])}if(!e.length)return null;var o=new JJ.Tree.Filterset;for(r in this.filters)o.filters[r]=this.filters[r];for(;r=e.shift();)o.add(r);return o}},{key:"addable",value:function(t){var e=t.key.toString(),r=t.val.toString();switch(r.match(/^[0-9]+(\.[0-9]*)?_match/)&&(r=parseFloat(r)),t.op){case"=":return void 0!==this.filters[e+"="]?this.filters[e+"="].val.toString()==r&&null:void 0===this.filters[e+"!="+r]&&(!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r)&&(!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>r)&&!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<r))));case"=~":return!0;case"!=":return void 0!==this.filters[e+"="]?this.filters[e+"="].val!==r&&null:void 0!==this.filters[e+"!="+r]?null:void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r?null:void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r?null:void 0!==this.filters[e+">="]&&this.filters[e+">="].val>r?null:!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<r)||null;case">":return e+"="in this.filters?!(this.filters[e+"="].val<=r)&&null:!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r)&&(!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<=r)&&(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r?null:!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>r)||null));case">=":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val<r)&&null:!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r)&&(!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<r)&&(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r?null:!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>=r)||null));case"<":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val>=r)&&null:!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>=r)&&(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r?null:!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<r)||null));case"<=":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val>r)&&null:!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>r)&&(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r?null:!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<=r)||null))}}},{key:"conflict",value:function(t){var e=t.key.toString(),r=t.val.toString();return isNaN(parseFloat(r))||(r=parseFloat(r)),("="===t.op&&void 0!==this.filters[e+"="]&&r!=this.filters[e+"="].val.toString()||"!="===t.op&&void 0!==this.filters[e+"="]&&r==this.filters[e+"="].val.toString()||"="===t.op&&void 0!==this.filters[e+"!="]&&r===this.filters[e+"!="].val.toString())&&t.toString()+" added to "+this.toString()+" produces an invalid filter"}},{key:"add",value:function(t,e){var r,n=t.key.toString(),o=t.op,i=this.conflict(t);if(i)return i;if("="===o){for(var a in this.filters)this.filters[a].key===n&&delete this.filters[a];this.filters[n+"="]=t}else if("!="===o)this.filters[n+"!="+t.val]=t;else if("=~"===o)this.filters[n+"=~"+t.val]=t;else if(">"===o){for(var s in this.filters)this.filters[s].key===n&&this.filters[s].val<=t.val&&delete this.filters[s];this.filters[n+">"]=t}else if(">="===o){for(var u in this.filters)r=+this.filters[u].val.toString(),this.filters[u].key===n&&r<t.val&&delete this.filters[u];void 0!==this.filters[n+"!="+t.val]?(delete this.filters[n+"!="+t.val],t.op=">",this.filters[n+">"]=t):this.filters[n+">="]=t}else if("<"===o){for(var l in this.filters)r=+this.filters[l].val.toString(),this.filters[l].key===n&&r>=t.val&&delete this.filters[l];this.filters[n+"<"]=t}else if("<="===o){for(var c in this.filters)r=+this.filters[c].val.toString(),this.filters[c].key===n&&r>t.val&&delete this.filters[c];void 0!==this.filters[n+"!="+t.val]?(delete this.filters[n+"!="+t.val],t.op="<",this.filters[n+"<"]=t):this.filters[n+"<="]=t}}}]),t}(),JJ.Tree.Fontset=UJ(function t(e,r){BJ(this,t),this.fonts=r,this.name="fontset-"+e.effects.length}),JJ.Tree.Invalid=function(){function t(e,r,n){BJ(this,t),this.is="invalid",this.chunk=e,this.index=r,this.type="syntax",this.message=n||"Invalid code: "+this.chunk}return UJ(t,[{key:"ev",value:function(t){return t.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"}}}]),t}(),JJ.Tree.Keyword=function(){function t(e){BJ(this,t),this.value=e;var r={transparent:"color",true:"boolean",false:"boolean"};this.is=r[e]?r[e]:"keyword"}return UJ(t,[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return this.value}}]),t}(),JJ.Tree.Literal=function(){function t(e){BJ(this,t),this.value=e||"",this.is="field"}return UJ(t,[{key:"toString",value:function(){return this.value}},{key:"ev",value:function(){return this}}]),t}(),JJ.Tree.Operation=function(){function t(e,r,n){BJ(this,t),this.is="operation",this.op=e.trim(),this.operands=r,this.index=n}return UJ(t,[{key:"ev",value:function(t){var e,r=this.operands[0].ev(t),n=this.operands[1].ev(t);return"undefined"===r.is||"undefined"===n.is?{is:"undefined",value:"undefined"}:(r instanceof JJ.Tree.Dimension&&n instanceof JJ.Tree.Color&&("*"===this.op||"+"===this.op?(e=n,n=r,r=e):t.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),r instanceof JJ.Tree.Quoted&&n instanceof JJ.Tree.Quoted&&"+"!==this.op?(t.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r instanceof JJ.Tree.Field||n instanceof JJ.Tree.Field||r instanceof JJ.Tree.Literal||n instanceof JJ.Tree.Literal?"color"===r.is||"color"===n.is?(t.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new JJ.Tree.Literal(r.ev(t).toString(!0)+this.op+n.ev(t).toString(!0)):void 0===r.operate?(t.error({message:"Cannot do math with type "+r.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r.operate(t,this.op,n))}}]),t}(),JJ.Tree.Quoted=function(){function t(e){BJ(this,t),this.is="string",this.value=e||""}return UJ(t,[{key:"toString",value:function(t){var e=this.value.replace(/&/g,"&amp;"),r=e.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return!0===t?"'"+r+"'":e}},{key:"ev",value:function(){return this}},{key:"operate",value:function(t,e,r){return new JJ.Tree.Quoted(JJ.Tree.operate(e,this.toString(),r.toString(this.contains_field)))}}]),t}(),JJ.Tree.Reference={_validateValue:{font:function(t,e){return!t.validation_data||!t.validation_data.fonts||-1!=t.validation_data.fonts.indexOf(e)}},setData:function(t){this.data=t,this.selector_cache=function(t){var e={};for(var r in t.symbolizers)for(var n in t.symbolizers[r])t.symbolizers[r][n].hasOwnProperty("css")&&(e[t.symbolizers[r][n].css]=[t.symbolizers[r][n],r,n]);return e}(t),this.mapnikFunctions=function(t){var e={};for(var r in t.symbolizers)for(var n in t.symbolizers[r])if("functions"===t.symbolizers[r][n].type)for(var o=0;o<t.symbolizers[r][n].functions.length;o++){var i=t.symbolizers[r][n].functions[o];e[i[0]]=i[1]}return e}(t),this.required_cache=function(t){var e={};for(var r in t.symbolizers)for(var n in e[r]=[],t.symbolizers[r])t.symbolizers[r][n].required&&e[r].push(t.symbolizers[r][n].css);return e}(t)},setVersion:function(t){return!!JJ.mapnik_reference.version.hasOwnProperty(t)&&(this.setData(JJ.mapnik_reference.version[t]),!0)},selectorData:function(t,e){if(this.selector_cache&&this.selector_cache[t])return this.selector_cache[t][e]},validSelector:function(t){return!!this.selector_cache[t]},selectorName:function(t){return this.selectorData(t,2)},selector:function(t){return this.selectorData(t,0)},symbolizer:function(t){return this.selectorData(t,1)},requiredProperties:function(t,e){var r=this.required_cache[t];for(var n in r)if(!(r[n]in e))return"Property "+r[n]+" required for defining "+t+" styles."},isFont:function(t){return"font"===this.selector(t).validate},editDistance:function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;for(var r=[],n=0;n<=e.length;n++)r[n]=[n];for(var o=0;o<=t.length;o++)r[0][o]=o;for(n=1;n<=e.length;n++)for(o=1;o<=t.length;o++)e.charAt(n-1)===t.charAt(o-1)?r[n][o]=r[n-1][o-1]:r[n][o]=Math.min(r[n-1][o-1]+1,Math.min(r[n][o-1]+1,r[n-1][o]+1));return r[e.length][t.length]},validValue:function(t,e,r){var n;if(this.selector(e)){if("keyword"===r.value[0].is)return function(t,e){return"object"===FJ(this.selector(e).type)?-1!==this.selector(e).type.indexOf(t.value[0].value):"string"===this.selector(e).type}(r,e);if("undefined"===r.value[0].is)return!0;if("numbers"===this.selector(e).type){for(n in r.value)if("float"!==r.value[n].is)return!1;return!0}if("tags"===this.selector(e).type){if(!r.value)return!1;if(!r.value[0].value)return"tag"===r.value[0].is;for(n=0;n<r.value[0].value.length;n++)if("tag"!==r.value[0].value[n].is)return!1;return!0}if("functions"==this.selector(e).type)return function(t,e){if("string"===t.value[0].is)return!0;for(var r in t.value)for(var n in t.value[r].value){if("call"!==t.value[r].value[n].is)return!1;var o=find(this.selector(e).functions,function(e){return e[0]===t.value[r].value[n].name});if(!(o&&-1===o[1]||o&&o[1]===t.value[r].value[n].args.length))return!1}return!0}(r,e);if("expression"===this.selector(e).type)return!0;if("unsigned"===this.selector(e).type)return"float"===r.value[0].is&&(r.value[0].round(),!0);if(this.selector(e).validate){for(n=0;n<r.value.length;n++)if(this.selector(e).type===r.value[n].is&&this._validateValue[this.selector(e).validate](t,r.value[n].value))return!0;return!1}return this.selector(e).type===r.value[0].is}return!1}},JJ.Tree.Reference.setVersion("latest"),JJ.Tree.Rule=function(){function t(e,r,n,o){BJ(this,t),this.is="rule";var i=e.split("/");this.name=i.pop(),this.instance=i.length?i[0]:"__default__",this.value=r instanceof JJ.Tree.Value?r:new JJ.Tree.Value([r]),this.index=n,this.symbolizer=JJ.Tree.Reference.symbolizer(this.name),this.filename=o,this.variable="@"===e.charAt(0)}return UJ(t,[{key:"clone",value:function(){var t=Object.create(JJ.Tree.Rule.prototype);return t.name=this.name,t.value=this.value,t.index=this.index,t.instance=this.instance,t.symbolizer=this.symbolizer,t.filename=this.filename,t.variable=this.variable,t}},{key:"updateID",value:function(){return this.id=this.zoom+"#"+this.instance+"#"+this.name}},{key:"toString",value:function(){return"["+JJ.Tree.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value}},{key:"ev",value:function(t){return new JJ.Tree.Rule(this.name,this.value.ev(t),this.index,this.filename)}}]),t}(),JJ.Tree.Ruleset=function(){function t(e,r){BJ(this,t),this.is="ruleset",this.selectors=e,this.rules=r,this._lookups={}}return UJ(t,[{key:"ev",value:function(t){var e,r,n=new JJ.Tree.Ruleset(this.selectors,this.rules.slice(0));for(n.root=this.root,t.frames.unshift(n),e=0;e<n.rules.length;e++)r=n.rules[e],n.rules[e]=r.ev?r.ev(t):r;return t.frames.shift(),n}},{key:"match",value:function(t){return!t||0===t.length}},{key:"variables",value:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(t,e){return e instanceof JJ.Tree.Rule&&!0===e.variable&&(t[e.name]=e),t},{})}},{key:"variable",value:function(t){return this.variables()[t]}},{key:"rulesets",value:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(t){return t instanceof JJ.Tree.Ruleset})}},{key:"find",value:function(t,e){e=e||this;var r=[],n=t.toString();return n in this._lookups?this._lookups[n]:(this.rulesets().forEach(function(n){if(n!==e)for(var o=0;o<n.selectors.length;o++)if(t.match(n.selectors[o])){t.elements.length>1?Array.prototype.push.apply(r,n.find(new JJ.Tree.Selector(null,null,t.elements.slice(1)),e)):r.push(n);break}}),this._lookups[n]=r)}},{key:"evZooms",value:function(t){for(var e=0;e<this.selectors.length;e++){for(var r=JJ.Tree.Zoom.all,n=0;n<this.selectors[e].zoom.length;n++)r=this.selectors[e].zoom[n].ev(t).zoom;this.selectors[e].zoom=r}}},{key:"flatten",value:function(t,e,r){var n,o,i=[];for(0===this.selectors.length&&(r.frames=r.frames.concat(this.rules)),this.evZooms(r),n=0;n<this.selectors.length;n++){var a=this.selectors[n];if(a.filters)if(e.length)for(o=0;o<e.length;o++){var s=e[o],u=s.filters.cloneWith(a.filters);if(null===u){if(s.zoom===a.zoom&&s.attachment===a.attachment&&s.elements.join()===a.elements.join()){i.push(s);continue}u=s.filters}else if(!u)continue;var l=Object.create(JJ.Tree.Selector.prototype);l.filters=u,l.zoom=a.zoom,l.elements=s.elements.concat(a.elements),s.attachment&&a.attachment?l.attachment=s.attachment+"/"+a.attachment:l.attachment=a.attachment||s.attachment,l.conditions=s.conditions+a.conditions,l.index=a.index,i.push(l)}else i.push(a)}var c=[];for(n=0;n<this.rules.length;n++){var f=this.rules[n];f instanceof JJ.Tree.Ruleset?f.flatten(t,i,r):f instanceof JJ.Tree.Rule?c.push(f):f instanceof JJ.Tree.Invalid&&r.error(f)}var h=!!c.length&&c[0].index;for(n=0;n<i.length;n++)!1!==h&&(i[n].index=h),t.push(new JJ.Tree.Definition(i[n],c.slice()));return t}}]),t}(),JJ.Tree.Selector=function(){function t(e,r,n,o,i,a){BJ(this,t),this.elements=n||[],this.attachment=o,this.filters=e||{},this.zoom=void 0!==r?r:JJ.Tree.Zoom.all,this.conditions=i,this.index=a}return UJ(t,[{key:"specificity",value:function(){return this.elements.reduce(function(t,e){var r=e.specificity();return t[0]+=r[0],t[1]+=r[1],t},[0,0,this.conditions,this.index])}}]),t}(),JJ.Tree.URL=function(){function t(e,r){BJ(this,t),this.is="uri",this.value=e,this.paths=r}return UJ(t,[{key:"toString",value:function(){return this.value.toString()}},{key:"ev",value:function(t){return new JJ.Tree.URL(this.value.ev(t),this.paths)}}]),t}(),JJ.Tree.Value=function(){function t(e){BJ(this,t),this.is="value",this.value=e}return UJ(t,[{key:"ev",value:function(t){return 1===this.value.length?this.value[0].ev(t):new JJ.Tree.Value(this.value.map(function(e){return e.ev(t)}))}},{key:"toJS",value:function(t){var e=this.ev(t),r=e.toString();return"color"===e.is||"uri"===e.is||"string"===e.is||"keyword"===e.is?r="'"+r+"'":"field"===e.is?r=r.replace(/\[(.*)\]/g,"attributes['_match1']"):e.value&&"object"===FJ(e.value)&&(r="["+r+"]"),"_value = "+r+";"}},{key:"toString",value:function(t,e,r,n){return this.value.map(function(e){return e.toString(t,n)}).join(r||", ")}},{key:"clone",value:function(){var t=Object.create(JJ.Tree.Value.prototype);return Array.isArray(t)?t.value=this.value.slice():t.value=this.value,t.is=this.is,t}}]),t}(),JJ.Tree.Variable=function(){function t(e,r,n){BJ(this,t),this.is="variable",this.name=e,this.index=r,this.filename=n}return UJ(t,[{key:"toString",value:function(){return this.name}},{key:"ev",value:function(t){if(this._css)return this._css;var e=t.frames.filter(function(t){return t.name===this.name}.bind(this));return e.length?e[0].value.ev(t):(t.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})}}]),t}(),JJ.Tree.Zoom=function(){function t(e,r,n){BJ(this,t),this.op=e,this.value=r,this.index=n}return UJ(t,[{key:"setZoom",value:function(t){return this.zoom=t,this}},{key:"ev",value:function(t){var e=parseInt(this.value.ev(t).toString(),10);switch((e>JJ.Tree.Zoom.maxZoom||e<0)&&t.error({message:"Only zoom levels between 0 and "+JJ.Tree.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom="zoom && zoom === "+e,this;case">":this.zoom="zoom && zoom > "+e;break;case">=":this.zoom="zoom && zoom >= "+e;break;case"<":this.zoom="zoom && zoom < "+e;break;case"<=":this.zoom="zoom && zoom <= "+e}return this}},{key:"toString",value:function(){for(var t="",e=0;e<=JJ.Tree.Zoom.maxZoom;e++)t+=this.zoom&1<<e?"X":".";return t}}]),t}(),JJ.Tree.Zoom.all=23,JJ.Tree.Zoom.maxZoom=22,JJ.Tree.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100};var qJ=function(t,e,r){return e&&zJ(t.prototype,e),r&&zJ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,C.extend(this,e)});function HJ(t){"@babel/helpers - typeof";return(HJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function WJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function YJ(){return(YJ="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ZJ(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function XJ(t,e){return(XJ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function QJ(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ZJ(t);if(e){var o=ZJ(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===HJ(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ZJ(t){return(ZJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var KJ=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XJ(t,e)}(i,Mr);var e,r,n,o=QJ(i);function i(t,e,r,n,a,s){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(u=o.call(this,t,e,r,n,a,s)).shapeFactory=new ts,u.shapeParameters=null,u.RelativeCoordinate=!1,u.setting=null,u.origonPoint=null,u.chartBox=null,u.chartBounds=null,u.width=null,u.height=null,u.XOffset=0,u.YOffset=0,u.DVBParameter=null,u.dataViewBox=null,u.DVBCodomain=null,u.DVBCenterPoint=null,u.DVBUnitValue=null,u.DVBOrigonPoint=null,u.DVBWidth=null,u.DVBHeight=null,u.origonPointOffset=null,u.fields=r||[],u.dataValues=null,u.lonlat=a||u.data.geometry.getBounds().getCenterLonLat(),n&&n.width&&n.height&&n.codomain&&(u.setting=n),u.CLASS_NAME="SuperMap.Feature.Theme.Graph",u}return e=i,(r=[{key:"destroy",value:function(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,YJ(ZJ(i.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;if(!(t.width&&t.height&&t.codomain))return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,r=Mr.getDataValues(this.data,this.fields,e);this.dataValues=r||[],this.width=parseFloat(t.width),this.height=parseFloat(t.height),this.DVBCodomain=t.codomain,this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var n=this.width,o=this.height,i=this.location;this.origonPoint=[i[0]-n/2,i[1]-o/2];var a=this.origonPoint;this.chartBox=[a[0],a[1]+o,a[0]+n,a[1]];var s=this.chartBox,u=this.DVBParameter;this.dataViewBox=[s[0]+u[0],s[1]-u[1],s[2]-u[2],s[3]+u[3]];var l=this.dataViewBox;return!(l[0]>=l[2]||l[1]<=l[3])&&(this.DVBOrigonPoint=[l[0],l[3]],this.DVBWidth=Math.abs(l[2]-l[0]),this.DVBHeight=Math.abs(l[1]-l[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-a[0],this.DVBOrigonPoint[1]-a[1]],!0)}},{key:"resetLocation",value:function(t){t&&(this.lonlat=t);var e=this.getLocalXY(this.lonlat);e[0]+=this.XOffset,e[1]+=this.YOffset,this.location=e;var r=this.width,n=this.height,o=this.location;return this.chartBounds=new I(o[0]-r/2,o[1]+n/2,o[0]+r/2,o[1]-n/2),this.resetLinearGradient(),o}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var t=this.shapes,e=this.location,r=0,n=t.length;r<n;r++){t[r].refOriginalPosition=e;var o=t[r].style;for(var i in o)switch(i){case"pointList":for(var a=o[i],s=0,u=a.length;s<u;s++)a[s][0]-=e[0],a[s][1]-=e[1];break;case"x":o[i]-=e[0];break;case"y":o[i]-=e[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}}])&&WJ(e.prototype,r),n&&WJ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function $J(t){"@babel/helpers - typeof";return($J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function eV(){return(eV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oV(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function rV(t,e){return(rV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nV(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=oV(t);if(e){var o=oV(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===$J(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function oV(t){return(oV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Mr.getDataValues=function(t,e,r){if(!t.attributes)return!1;for(var n=[],o=t.attributes,i=0;i<e.length;i++)for(var a in o)if(a===e[i])try{!isNaN(r)&&r>=0?n.push(parseFloat(o[a].toString()).toFixed(r)):n.push(parseFloat(o[a].toString()))}catch(t){throw new Error("not a number")}return n.length===e.length&&n};var iV=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rV(t,e)}(i,KJ);var e,r,n,o=nV(i);function i(t,e,r,n,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,t,e,r,n,a)).CLASS_NAME="SuperMap.Feature.Theme.Bar",s}return e=i,(r=[{key:"destroy",value:function(){eV(oV(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},e=this.setting;if(e.barLinearGradient||(e.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.dataViewBox,o=this.dataValues;if(!(o.length<1)){for(var i=0,a=o.length;i<a;i++)if(o[i]<r[0]||o[i]>r[1])return;var s=this.calculateXShapeInfo();if(s){var u=s.xPositions,l=s.width;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(ts.Background(this.shapeFactory,this.chartBox,e)),(void 0===e.useAxis||e.useAxis)&&(this.shapes=this.shapes.concat(ts.GraphAxis(this.shapeFactory,n,e,s)));for(var c=0;c<o.length;c++){var f=n[1]-(o[c]-r[0])/this.DVBUnitValue,h=[[u[c]-l/2,n[1]-1],[u[c]+l/2,n[1]-1],[u[c]+l/2,f],[u[c]-l/2,f]],p=new Si(h);if(void 0===e.showShadow||e.showShadow){if(e.barShadowStyle){var y=e.barShadowStyle;y.shadowBlur&&(t.shadowBlur=y.shadowBlur),y.shadowColor&&(t.shadowColor=y.shadowColor),y.shadowOffsetX&&(t.shadowOffsetX=y.shadowOffsetX),y.shadowOffsetY&&(t.shadowOffsetY=y.shadowOffsetY)}p.style={},C.copyAttributesWithClip(p.style,t)}p.refDataID=this.data.id,p.dataInfo={field:this.fields[c],value:o[c]},void 0!==e.barHoverAble&&(p.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(p.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(p))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=0,a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=a-((t=r.xShapeBlank)[0]+t[2]+(n-1)*t[1]);if(s<=n)return null;i=s/n}else t=[i=a/(2*n+1),i,i];for(var u=0,l=0;l<n;l++)0==l?u=t[0]+i/2:u+=i+t[1],o.push(e[0]+u);return{xPositions:o,width:i}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var t=this.shapes.length,e=this.setting.barLinearGradient,r=-1,n=0;n<t;n++){var o=this.shapes[n];if("SuperMap.LevelRenderer.Shape.SmicPolygon"===o.CLASS_NAME){var i=o.style,a=this.location[0]+i.pointList[0][0],s=this.location[0]+i.pointList[1][0];++r>=e.length&&(r%=e.length);var u=e[r][0],l=e[r][1],c=(new Yr).getLinearGradient(a,0,s,0,[[0,u],[1,l]]);o.style.color=c}}}}])&&tV(e.prototype,r),n&&tV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function aV(t){"@babel/helpers - typeof";return(aV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function uV(){return(uV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fV(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function lV(t,e){return(lV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cV(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=fV(t);if(e){var o=fV(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===aV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function fV(t){return(fV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hV=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lV(t,e)}(i,KJ);var e,r,n,o=cV(i);function i(t,e,r,n,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,t,e,r,n,a)).CLASS_NAME="SuperMap.Feature.Theme.Bar3D",s}return e=i,(r=[{key:"destroy",value:function(){uV(fV(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,25,20,20]:t.dataViewBoxParameter=[5,5,5,5]),t.axisUseArrow=void 0===t.axisUseArrow||t.axisUseArrow,t.axisXLabelsOffset=void 0!==t.axisXLabelsOffset?t.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var e=this.DVBCodomain;this.DVBUnitValue=(e[1]-e[0])/this.DVBHeight;var r=this.dataViewBox,n=this.dataValues;if(!(n.length<1)){for(var o=0,i=n.length;o<i;o++)if(n[o]<e[0]||n[o]>e[1])return;var a=this.calculateXShapeInfo();if(a){var s=a.xPositions,u=a.width;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(ts.Background(this.shapeFactory,this.chartBox,t)),(!t.axis3DParameter||isNaN(t.axis3DParameter)||t.axis3DParameter<15)&&(t.axis3DParameter=20),(void 0===t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(ts.GraphAxis(this.shapeFactory,r,t,a)));for(var l=t.bar3DParameter&&!isNaN(t.bar3DParameter)?t.bar3DParameter:10,c=0;c<n.length;c++){var f=r[1]-(n[c]-e[0])/this.DVBUnitValue,h=s[c]-u/2,p=s[c]+u/2,y=[[h,f],[p,f],[p-l,f+l],[h-l,f+l]],d=[[p,f],[p-l,f+l],[p-l,r[1]+l],[p,r[1]]],b=[[h-l,r[1]+l],[p-l,r[1]+l],[p-l,f+l],[h-l,f+l]];l<=0&&(b=[[h,r[1]],[p,r[1]],[p,f],[h,f]]);var v=new Si(y),m=new Si(d),g=new Si(b);t.barSideStyle=t.barSideStyle?t.barSideStyle:t.barFaceStyle,t.barSideStyleByFields=t.barSideStyleByFields?t.barSideStyleByFields:t.barFaceStyleByFields,t.barSideStyleByCodomain=t.barSideStyleByCodomain?t.barSideStyleByCodomain:t.barFaceStyleByCodomain,t.barTopStyle=t.barTopStyle?t.barTopStyle:t.barFaceStyle,t.barTopStyleByFields=t.barTopStyleByFields?t.barTopStyleByFields:t.barFaceStyleByFields,t.barTopStyleByCodomain=t.barTopStyleByCodomain?t.barTopStyleByCodomain:t.barFaceStyleByCodomain,g.style=ts.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barFaceStyle,t.barFaceStyleByFields,t.barFaceStyleByCodomain,c,n[c]),m.style=ts.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barSideStyle,t.barSideStyleByFields,t.barSideStyleByCodomain,c,n[c]),v.style=ts.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barTopStyle,t.barTopStyleByFields,t.barTopStyleByCodomain,c,n[c]),t.barSideHoverStyle=t.barSideHoverStyle?t.barSideHoverStyle:t.barFaceHoverStyle,t.barTopHoverStyle=t.barTopHoverStyle?t.barTopHoverStyle:t.barFaceHoverStyle,g.highlightStyle=ts.ShapeStyleTool({stroke:!0},t.barFaceHoverStyle),m.highlightStyle=ts.ShapeStyleTool({stroke:!0},t.barSideHoverStyle),v.highlightStyle=ts.ShapeStyleTool({stroke:!0},t.barTopHoverStyle),v.refDataID=m.refDataID=g.refDataID=this.data.id,v.isHoverByRefDataID=m.isHoverByRefDataID=g.isHoverByRefDataID=!0,v.refDataHoverGroup=m.refDataHoverGroup=g.refDataHoverGroup=C.createUniqueID("lr_shg"),v.dataInfo=m.dataInfo=g.dataInfo={field:this.fields[c],value:n[c]},void 0!==t.barHoverAble&&(v.hoverable=m.hoverable=g.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(v.clickable=m.clickable=g.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(m)),this.shapes.push(this.shapeFactory.createShape(v)),this.shapes.push(this.shapeFactory.createShape(g))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=0,a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=a-((t=r.xShapeBlank)[0]+t[2]+(n-1)*t[1]);if(s<=n)return null;i=s/n}else t=[i=a/(2*n+1),i,i];for(var u=0,l=0;l<n;l++)0==l?u=t[0]+i/2:u+=i+t[1],o.push(e[0]+u);return{xPositions:o,width:i}}}])&&sV(e.prototype,r),n&&sV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function pV(t){"@babel/helpers - typeof";return(pV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function dV(){return(dV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mV(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function bV(t,e){return(bV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vV(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=mV(t);if(e){var o=mV(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===pV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function mV(t){return(mV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gV=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bV(t,e)}(i,KJ);var e,r,n,o=vV(i);function i(t,e,r,n,a,s){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(u=o.call(this,t,e,r,n,a,s)).setting=null,n&&n.codomain&&(u.setting=n,u.DVBCodomain=u.setting.codomain),u.CLASS_NAME="SuperMap.Feature.Theme.RankSymbol",u}return e=i,(r=[{key:"destroy",value:function(){this.setting=null,dV(mV(i.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;t.XOffset&&(this.XOffset=t.XOffset),t.YOffset&&(this.YOffset=t.YOffset),this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var e=this.width,r=this.height,n=this.location;this.origonPoint=[n[0]-e/2,n[1]-r/2];var o=this.origonPoint;this.chartBox=[o[0],o[1]+r,o[0]+e,o[1]];var i=this.chartBox,a=this.DVBParameter;this.dataViewBox=[i[0]+a[0],i[1]-a[1],i[2]-a[2],i[3]+a[3]];var s=this.dataViewBox;return!(s[0]>=s[2]||s[1]<=s[3])&&(this.DVBOrigonPoint=[s[0],s[3]],this.DVBWidth=Math.abs(s[2]-s[0]),this.DVBHeight=Math.abs(s[1]-s[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-o[0],this.DVBOrigonPoint[1]-o[1]],!0)}}])&&yV(e.prototype,r),n&&yV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function wV(t){"@babel/helpers - typeof";return(wV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function SV(){return(SV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xV(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function _V(t,e){return(_V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function PV(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=xV(t);if(e){var o=xV(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===wV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function xV(t){return(xV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kV=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_V(t,e)}(i,gV);var e,r,n,o=PV(i);function i(t,e,r,n,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,t,e,r,n,a)).CLASS_NAME="SuperMap.Feature.Theme.Circle",s}return e=i,(r=[{key:"destroy",value:function(){SV(xV(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(!this.setting)return!1;var t=this.setting;if(!t.codomain)return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,r=Mr.getDataValues(this.data,this.fields,e);this.dataValues=r||[];var n=this.dataValues;t.maxR||(t.maxR=100),t.minR||(t.minR=0);var o=this.DVBCodomain;o&&o[1]-o[0]>0?this.DVBUnitValue=t.maxR/(o[1]-o[0]):this.DVBUnitValue=t.maxR;var i=this.DVBUnitValue,a=n[0]*i+t.minR;if(this.width=2*a,this.height=2*a,this.initBaseParameter()&&(!o||!(n[0]<o[0]||n[0]>o[1]))){var s=this.DVBCenterPoint,u=new na(s[0],s[1],a);u.style=ts.ShapeStyleTool(null,t.circleStyle,null,null,0),void 0!==t.fillColor?u.style.fillColor=t.fillColor:u.style.fillColor="#ff9277",u.highlightStyle=ts.ShapeStyleTool(null,t.circleHoverStyle),void 0!==t.circleHoverAble&&(u.hoverable=t.circleHoverAble),void 0!==t.circleClickAble&&(u.clickable=t.circleClickAble),u.refDataID=this.data.id,u.dataInfo={field:this.fields[0],r:a,value:n[0]},this.shapes.push(this.shapeFactory.createShape(u)),this.shapesConvertToRelativeCoordinate()}}}])&&OV(e.prototype,r),n&&OV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function jV(t){"@babel/helpers - typeof";return(jV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function TV(){return(TV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=AV(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function CV(t,e){return(CV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function RV(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=AV(t);if(e){var o=AV(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===jV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function AV(t){return(AV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var MV=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CV(t,e)}(i,KJ);var e,r,n,o=RV(i);function i(t,e,r,n,a,s){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(u=o.call(this,t,e,r,n,a,s)).CLASS_NAME="SuperMap.Feature.Theme.Line",u}return e=i,(r=[{key:"destroy",value:function(){TV(AV(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,o=this.dataValues;if(!(o.length<1)){var i=this.calculateXShapeInfo();if(i){var a,s,u=i.xPositions;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(ts.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(ts.GraphAxis(this.shapeFactory,e,t,i));for(var l=[],c=[],f=0,h=o.length;f<h;f++){if(o[f]<r[0]||o[f]>r[1])return null;a=u[f],s=e[1]-(o[f]-r[0])/n;var p=new ui(a,s);p.style=ts.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,f,o[f]),p.highlightStyle=ts.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(p.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(p.clickable=t.pointClickAble),p.refDataID=this.data.id,p.dataInfo={field:this.fields[f],value:o[f]},c.push(this.shapeFactory.createShape(p));var y=[a,s];l.push(y)}var d=new di(l);d.style=ts.ShapeStyleTool({strokeColor:"#ee9900"},t.lineStyle),d.clickable=!1,d.hoverable=!1;var b=this.shapeFactory.createShape(d);this.shapes.push(b),this.shapes=this.shapes.concat(c),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=this.DVBWidth,a=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=i-((t=r.xShapeBlank)[0]+t[1]);if(s<=n)return null;a=s/(n-1)}else t=[a=i/(n+1),a,a];for(var u=0,l=0;l<n;l++)0==l?u=t[0]:u+=a,o.push(e[0]+u);return{xPositions:o,width:0}}}])&&EV(e.prototype,r),n&&EV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function LV(t){"@babel/helpers - typeof";return(LV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function IV(){return(IV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=BV(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function DV(t,e){return(DV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function FV(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=BV(t);if(e){var o=BV(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===LV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function BV(t){return(BV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var GV=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DV(t,e)}(i,KJ);var e,r,n,o=FV(i);function i(t,e,r,n,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,t,e,r,n,a)).CLASS_NAME="SuperMap.Feature.Theme.Pie",s}return e=i,(r=[{key:"destroy",value:function(){IV(BV(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting,e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){t.useBackground&&this.shapes.push(ts.Background(this.shapeFactory,this.chartBox,t));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,o=0;o<r.length;o++)if(r[o]<n[0]||r[o]>n[1])return;for(var i=0,a=0;a<r.length;a++)i+=Math.abs(r[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,u=this.DVBCenterPoint,l=0,c=0,f=l,h=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=0;p<r.length;p++){var y=Math.abs(r[p]);(c=0===p?l+y*s:p===y.length-1?f:l+y*s)-l>=360&&(c=359.9999999);var d=new Ii(u[0],u[1],h,l,c);if(void 0===t.sectorStyleByFields){var b=p%e.length;d.style=ts.ShapeStyleTool(null,t.sectorStyle,e,null,b)}else d.style=ts.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,p,r[p]);d.highlightStyle=ts.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(d.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(d.clickable=t.sectorClickAble),d.refDataID=this.data.id,d.dataInfo={field:this.fields[p],value:r[p]},this.shapes.push(this.shapeFactory.createShape(d)),l=c}this.shapesConvertToRelativeCoordinate()}}}}])&&NV(e.prototype,r),n&&NV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function UV(t){"@babel/helpers - typeof";return(UV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function VV(){return(VV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=HV(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function zV(t,e){return(zV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function qV(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=HV(t);if(e){var o=HV(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===UV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function HV(t){return(HV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var WV=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zV(t,e)}(i,KJ);var e,r,n,o=qV(i);function i(t,e,r,n,a,s){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(u=o.call(this,t,e,r,n,a,s)).CLASS_NAME="SuperMap.Feature.Theme.Point",u}return e=i,(r=[{key:"destroy",value:function(){VV(HV(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,o=this.dataValues,i=this.calculateXShapeInfo();if(i){var a,s,u=i.xPositions;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(ts.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(ts.GraphAxis(this.shapeFactory,e,t,i));for(var l=0,c=o.length;l<c;l++){if(o[l]<r[0]||o[l]>r[1])return null;a=u[l],s=e[1]-(o[l]-r[0])/n;var f=new ui(a,s);f.style=ts.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,l,o[l]),f.highlightStyle=ts.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(f.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(f.clickable=t.pointClickAble),f.refDataID=this.data.id,f.dataInfo={field:this.fields[l],value:o[l]},this.shapes.push(this.shapeFactory.createShape(f))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=this.DVBWidth,a=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=i-((t=r.xShapeBlank)[0]+t[1]);if(s<=n)return null;a=s/(n-1)}else t=[a=i/(n+1),a,a];for(var u=0,l=0;l<n;l++)0==l?u=t[0]:u+=a,o.push(e[0]+u);return{xPositions:o,width:0}}}])&&JV(e.prototype,r),n&&JV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function YV(t){"@babel/helpers - typeof";return(YV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function XV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function QV(){return(QV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$V(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ZV(t,e){return(ZV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function KV(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=$V(t);if(e){var o=$V(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===YV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function $V(t){return($V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tz=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZV(t,e)}(i,KJ);var e,r,n,o=KV(i);function i(t,e,r,n,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,t,e,r,n,a)).CLASS_NAME="SuperMap.Feature.Theme.Ring",s}return e=i,(r=[{key:"destroy",value:function(){QV($V(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],e=this.setting;e.useBackground&&this.shapes.push(ts.Background(this.shapeFactory,this.chartBox,e));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,o=0;o<r.length;o++)if(r[o]<n[0]||r[o]>n[1])return;for(var i=0,a=0;a<r.length;a++)i+=Math.abs(r[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,u=this.DVBCenterPoint,l=0,c=0,f=l,h=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=e.innerRingRadius>=0&&e.innerRingRadius<h,y=void 0!==e.innerRingRadius&&!isNaN(e.innerRingRadius)&&p?e.innerRingRadius:0,d=0;d<r.length;d++){var b=Math.abs(r[d]);c=0===d?l+b*s:d===b.length-1?f:l+b*s;var v=new Ii(u[0],u[1],h,l,c,y);if(void 0===e.sectorStyleByFields){var m=d%t.length;v.style=ts.ShapeStyleTool(null,e.sectorStyle,t,null,m)}else v.style=ts.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,d,r[d]);v.highlightStyle=ts.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(v.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(v.clickable=e.sectorClickAble),v.refDataID=this.data.id,v.dataInfo={field:this.fields[d],value:r[d]},this.shapes.push(this.shapeFactory.createShape(v)),l=c}this.shapesConvertToRelativeCoordinate()}}}}])&&XV(e.prototype,r),n&&XV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();var ez="EXCEL",rz="CSV",nz="GEOJSON",oz="JSON";function iz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var az=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._initView()}var e,r,n;return e=t,(r=[{key:"_initView",value:function(){var t=document.createElement("div");t.hidden=!0,t.setAttribute("class","component-messageboxcontainer component-border-bottom-orange");var e=document.createElement("div");e.setAttribute("class","icon"),this.icon=document.createElement("span"),this.icon.setAttribute("class","supermapol-icons-message-warning"),e.appendChild(this.icon),t.appendChild(e);var r=document.createElement("div");r.setAttribute("class","component-messagebox"),r.innerHTML="",t.appendChild(r),this.messageBox=r;var n=document.createElement("div");n.setAttribute("class","component-messagebox__cancelbtncontainer");var o=document.createElement("button");o.setAttribute("class","component-messagebox__cancelBtn"),o.innerHTML="x",o.onclick=this.closeView.bind(this),n.appendChild(o),t.appendChild(n),this.messageBoxContainer=t,document.body.appendChild(this.messageBoxContainer)}},{key:"closeView",value:function(){this.messageBoxContainer.hidden=!0}},{key:"showView",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warring";"success"===e?(this.icon.setAttribute("class","supermapol-icons-message-success"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-green")):"failure"===e?(this.icon.setAttribute("class","supermapol-icons-message-failure"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-red")):"warring"===e&&(this.icon.setAttribute("class","supermapol-icons-message-warning"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-orange")),this.messageBox.innerHTML=t,this.messageBoxContainer.hidden=!1}}])&&iz(e.prototype,r),n&&iz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),sz=function(){try{return echarts}catch(t){return{}}}(),uz={"en-US":{title_dataFlowService:"Data Flow Service",title_distributedAnalysis:"Distributed Analysis",title_clientComputing:"Client Computing",title_dataServiceQuery:"Data Service Query",title_searchCity:"Search city",title_searchLayer:" Search layer",text_input_value_inputDataFlowUrl:"Please enter the data stream service address such as: ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"Display feature information",text_subscribe:"subscribe",text_cancelSubscribe:"unsubscribe",text_densityAnalysis:"Density Analysis",text_CalculateTheValuePerUnitArea:"Calculate the value per unit area within the neighborhood shape",text_option_selectDataset:"Please select a dataset",text_label_dataset:"Dataset",text_option_simplePointDensityAnalysis:"Simple point density analysis",text_option_nuclearDensityAnalysis:"Nuclear density analysis",text_label_analyticalMethod:"Analytical method",text_option_quadrilateral:"Quadrilateral",text_option_hexagon:"hexagon",text_label_meshType:"Mesh type",text_option_notSet:"Not set",text_label_weightField:"Weight field",text_label_gridSizeInMeters:"Grid size",text_label_searchRadius:"Search radius",text_label_queryRange:"Scope of analysis",text_label_areaUnit:"Area unit",text_option_equidistantSegmentation:"Equidistant segmentation",text_option_logarithm:"Logarithm",text_option_equalCountingSegment:"Equal counting segment",text_option_squareRootSegmentation:"Square root segmentation",text_label_thematicMapSegmentationMode:"Thematic map segmentation mode",text_label_thematicMapSegmentationParameters:"Thematic map segmentation parameters",text_option_greenOrangePurpleGradient:"Green orange purple gradient",text_option_greenOrangeRedGradient:"Green orange red gradient",text_option_rainbowGradient:"Rainbow gradient",text_option_spectralGradient:"Spectral gradient",text_option_terrainGradient:"Terrain gradient",text_label_thematicMapColorGradientMode:"Thematic map color gradient mode",text_label_resultLayerName:"Result layer name",text_chooseFile:"Open File",text_isoline:"Isoline",text_extractDiscreteValue:"Extract discrete value generation curve",text_buffer:"Buffer",text_specifyTheDistance:"Specify the distance to create the surrounding area",text_label_analysisLayer:"Analysis layer",text_label_extractField:"Extract field",text_label_extractedValue:"Extracted value",text_label_distanceAttenuation:"Distance attenuation",text_label_gridSize:"gridSize",text_label_bufferRadius:"Buffer radius",text_label_defaultkilometers:"Default 10 kilometers",text_label_kilometer:"kilometer",text_label_unit:"unit",text_retainOriginal:"Retain original object field",text_mergeBuffer:"Merge buffer",text_label_color:"Color",text_label_buffer:"[Buffer]",text_label_isolines:"[Isolines]",text_label_queryRangeTips:"The default is the full range of input data. Example: -74.050, 40.650, -73.850, 40.850",text_label_queryModel:"Query mode",text_label_IDArrayOfFeatures:"ID array of features",text_label_maxFeatures:"The maximum number of features that can be returned",text_label_bufferDistance:"Buffer distance",text_label_queryRange1:"Query range",text_label_spatialQueryMode:"Spatial query mode",text_label_featureFilter:"Feature filter",text_label_geometricObject:"Geometric object",text_label_queryMode:"Query mode",text_label_searchTips:"Search for city locations or layer features",text_label_chooseSearchLayers:"Select a query layer",text_loadSearchCriteria:"Load search criteria",text_saveSearchCriteria:"Save search criteria",btn_analyze:"Analyze",btn_analyzing:"Analyzing",btn_emptyTheAnalysisLayer:"Empty the analysis layer",btn_cancelAnalysis:"Cancel",btn_query:"Query",btn_querying:"Querying",btn_emptyTheRresultLayer:"Clear all result layers","msg_dataReturnedIsEmpty.":"The request is successful and the data returned by the query is empty.",msg_dataFlowServiceHasBeenSubscribed:"The data stream service has been subscribed to.",msg_inputDataFlowUrlFirst:"Please enter the data stream service address first.",msg_datasetOrMethodUnsupport:"This dataset does not support this analysis type. Please reselect the dataset.",msg_selectDataset:"Please select a data set!",msg_setTheWeightField:"Please set the weight field!",msg_theFieldNotSupportAnalysis:"The field you currently select does not support analysis!",msg_resultIsEmpty:"The result of the analysis is empty!",msg_openFileFail:"Failed to open file!",msg_fileTypeUnsupported:"File format is not supported!",msg_fileSizeExceeded:"File size exceeded! The file size should not exceed 10M!",msg_dataInWrongGeoJSONFormat:"Wrong data format! Non standard GEOJSON format data!",msg_dataInWrongFormat:"Wrong data format! Non standard EXCEL, CSV or GEOJSON format data!",msg_searchKeywords:"Search keywords cannot be empty. Please enter your search criteria.",msg_searchGeocodeField:"Did not match the address matching service data!",msg_cityGeocodeField:"The address matching service of the current city is not configured.",msg_getFeatureField:"No related vector features found!",msg_dataflowservicesubscribed:"The data stream service has been subscribed to.",msg_subscribesucceeded:"The data stream service subscription was successful.",msg_crsunsupport:"Does not support the coordinate system of the current map",msg_tilematrixsetunsupport:"Incoming TileMatrixSet is not supported",msg_jsonResolveFiled:"JSON format parsing failure！",msg_requestContentFiled:"Failed to request data through iportal!",msg_getdatafailed:"Failed to get data!"},"zh-CN":{title_dataFlowService:"数据流服务",title_distributedAnalysis:"分布式分析",title_clientComputing:"客户端计算",title_dataServiceQuery:"数据服务查询",title_searchCity:"搜索城市",title_searchLayer:"搜索图层",text_input_value_inputDataFlowUrl:"请输入数据流服务地址如:ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"显示要素信息",text_subscribe:"订阅",text_cancelSubscribe:"取消订阅",text_densityAnalysis:"密度分析",text_CalculateTheValuePerUnitArea:"计算点指定邻域形状内的每单位面积量值",text_option_selectDataset:"请选择数据集",text_label_dataset:"数据集",text_option_simplePointDensityAnalysis:"简单点密度分析",text_option_nuclearDensityAnalysis:"核密度分析",text_label_analyticalMethod:"分析方法",text_option_quadrilateral:"四边形",text_option_hexagon:"六边形",text_label_meshType:"网格面类型",text_option_notSet:"未设置",text_label_weightField:"权重字段",text_label_gridSizeInMeters:"网格大小",text_label_searchRadius:"搜索半径",text_label_queryRange:"分析范围",text_label_areaUnit:"面积单位",text_option_equidistantSegmentation:"等距离分段",text_option_logarithm:"对数",text_option_equalCountingSegment:"等计数分段",text_option_squareRootSegmentation:"平方根分段",text_label_thematicMapSegmentationMode:"专题图分段模式",text_label_thematicMapSegmentationParameters:"专题图分段参数",text_option_greenOrangePurpleGradient:"绿橙紫渐变",text_option_greenOrangeRedGradient:"绿橙红渐变",text_option_rainbowGradient:"彩虹渐变",text_option_spectralGradient:"光谱渐变",text_option_terrainGradient:"地形渐变",text_label_thematicMapColorGradientMode:"专题图颜色渐变模式",text_label_resultLayerName:"结果图层名称",text_chooseFile:"选择文件",text_isoline:"等值线",text_extractDiscreteValue:"提取离散值生成曲线",text_buffer:"缓冲区",text_specifyTheDistance:"指定距离创建周边区域",text_label_analysisLayer:"分析图层",text_label_extractField:"提取字段",text_label_extractedValue:"提取值",text_label_distanceAttenuation:"距离衰减",text_label_gridSize:"栅格大小",text_label_bufferRadius:"缓冲半径",text_label_defaultkilometers:"默认10千米",text_option_kilometer:"千米",text_label_unit:"单位",text_retainOriginal:"保留原对象字段属性",text_mergeBuffer:"合并缓冲区",text_label_color:"颜色",text_label_buffer:"[缓冲区]",text_label_isolines:"[等值线]",text_label_queryRangeTips:"默认为输入数据的全幅范围。范例：-74.050,40.650,-73.850,40.850",text_label_IDArrayOfFeatures:"要素 ID 数组",text_label_maxFeatures:"最多可返回的要素数量",text_label_bufferDistance:"缓冲区距离",text_label_queryRange1:"查询范围",text_label_spatialQueryMode:"空间查询模式",text_label_featureFilter:"要素过滤器",text_label_geometricObject:"几何对象",text_label_queryMode:"查询模式",text_label_searchTips:"搜索城市地点或图层要素",text_label_chooseSearchLayers:"选择查询图层",text_loadSearchCriteria:"加载搜索条件",text_saveSearchCriteria:"保存搜索条件",btn_analyze:"分析",btn_analyzing:"分析中",btn_emptyTheAnalysisLayer:"清空分析图层",btn_cancelAnalysis:"取消",btn_query:"查询",btn_querying:"查询中",btn_emptyTheRresultLayer:"清除所有结果图层",msg_dataFlowServiceHasBeenSubscribed:"已订阅该数据流服务。",msg_inputDataFlowUrlFirst:"请先输入数据流服务地址。",msg_datasetOrMethodUnsupport:"该数据集不支持本分析类型，请重新选择数据集",msg_selectDataset:"请选择数据集！",msg_setTheWeightField:"请设置权重字段！",msg_theFieldNotSupportAnalysis:"您当前选择的字段不支持分析！",msg_resultIsEmpty:"分析的结果为空！",msg_dataReturnedIsEmpty:"请求成功，查询返回的数据为空。",msg_openFileFail:"打开文件失败！",msg_fileTypeUnsupported:"不支持该文件格式！",msg_fileSizeExceeded:"文件大小超限！文件大小不得超过 10M！",msg_dataInWrongGeoJSONFormat:"数据格式错误！非标准的 GEOJSON 格式数据！",msg_dataInWrongFormat:"数据格式错误！非标准的 EXCEL, CSV 或 GEOJSON 格式数据！",msg_searchKeywords:"搜索关键字不能为空，请输入搜索条件。",msg_searchGeocodeField:"未匹配到地址匹配服务数据！",msg_cityGeocodeField:"未配置当前城市的地址匹配服务。",msg_getFeatureField:"未查找到相关矢量要素！",msg_dataflowservicesubscribed:"已订阅该数据流服务。",msg_subscribesucceeded:"数据流服务订阅成功。",msg_crsunsupport:"不支持当前地图的坐标系",msg_tilematrixsetunsupport:"不支持传入的TileMatrixSet",msg_jsonResolveFiled:"json格式解析失败！",msg_requestContentFiled:"通过iportal请求数据失败！",msg_getdatafailed:"获取数据失败！"},code:null,defaultCode:"en-US",getCode:function(){return uz.code||uz.setCode(),uz.code},setCode:function(){var t=this.getLanguageFromCookie();t||(t=uz.defaultCode,t="Netscape"===navigator.appName?navigator.language:navigator.browserLanguage),0===t.indexOf("zh")&&(t="zh-CN"),0===t.indexOf("en")&&(t="en-US"),uz.code=t},getLanguageFromCookie:function(){for(var t=document.cookie.split(";"),e=0;e<t.length;e++){for(var r=t[e];" "===r.charAt(0);)r=r.substring(1);if(-1!==r.indexOf("language="))return r.substring("language=".length,r.length)}return""},i18n:function(t){var e=uz[uz.getCode()],r=e&&e[t];return r||(r=t),r}},lz=function(){try{return XLSX}catch(t){return{}}}(),cz={rABS:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsBinaryString,rABF:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsArrayBuffer,rAT:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsText,readFile:function(t,e,r,n,o){oz===t||nz===t?this.readTextFile(e,r,n,o):ez!==t&&rz!==t||this.readXLSXFile(e,r,n,o)},readTextFile:function(t,e,r,n){var o=new FileReader;o.onloadend=function(t){e&&e.call(n,t.target.result)},o.onerror=function(t){r&&r.call(n,t)},this.rAT?o.readAsText(t.file,"utf-8"):o.readAsBinaryString(t.file)},readXLSXFile:function(t,e,r,n){var o=new FileReader;o.onloadend=function(t){var o=new Uint8Array(t.target.result),i=lz.read(o,{type:"array"});try{if(i&&i.SheetNames&&i.SheetNames.length>0){var a=i.SheetNames[0],s=lz.utils.sheet_to_csv(i.Sheets[a]);e&&e.call(n,s)}}catch(t){r&&r.call(n,t)}},o.onerror=function(t){r&&r.call(n,t)},this.rABF&&o.readAsArrayBuffer(t.file)},processDataToGeoJson:function(t,e,r,n,o){var i=null;if("EXCEL"===t||"CSV"===t)i=this.processExcelDataToGeoJson(e),r&&r.call(o,i);else if("JSON"===t||"GEOJSON"===t){var a=e;"string"==typeof a&&(a=JSON.parse(a)),"ISERVER"===a.type?i=a.data.recordsets[0].features:"FeatureCollection"===a.type?i=a:n&&n.call(o,uz.i18n("msg_dataInWrongGeoJSONFormat")),r&&r.call(o,i)}else n&&n.call(o,uz.i18n("msg_dataInWrongFormat"))},processExcelDataToGeoJson:function(t){for(var e=this.string2Csv(t),r=e.colTitles,n=-1,o=-1,i=0,a=r.length;i<a;i++)this.isXField(r[i])&&(n=i),this.isYField(r[i])&&(o=i);for(var s=[],u=0,l=e.rows.length;u<l;u++){var c=e.rows[u],f=Number(c[n]),h=Number(c[o]),p={};for(var y in e.colTitles){p[e.colTitles[y]]=e.rows[u][y]}var d={type:"Feature",geometry:{type:"Point",coordinates:[f,h]},properties:p};s.push(d)}return s},isXField:function(t){var e=t.toLowerCase();return"x"===e||"smx"===e||"jd"===e||"经度"===e||"东经"===e||"longitude"===e||"lot"===e||"lon"===e||"lng"===e||"x坐标"===e},isYField:function(t){var e=t.toLowerCase();return"y"===e||"smy"===e||"wd"===e||"纬度"===e||"北纬"===e||"latitude"===e||"lat"===e||"y坐标"===e},string2Csv:function(t,e){var r=t.split("\n"),n={};n.colTitles=e?[]:r[0].split(","),n.rows=[];for(var o=e?0:1;o<r.length;o++)r[o]&&n.rows.push(r[o].split(","));return n}};function fz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var hz=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasets=e,this.EVENT_TYPES=["getdatafailed"],this.events=new Bn(this,null,this.EVENT_TYPES)}var e,r,n;return e=t,(r=[{key:"getDatasetInfo",value:function(t){var e=this.datasets.url,r=this;Jl.get(e).then(function(t){return t.json()}).then(function(e){if(e.datasetInfo){var n=e.datasetInfo;r.datasetsInfo={dataSourceName:n.dataSourceName,datasetName:n.name,mapName:e.name},t({result:r.datasetsInfo})}}).catch(function(t){console.log(t),r._fireFailedEvent(t)})}},{key:"getDataFeatures",value:function(t,e){var r,n,o=t.result,i={name:o.datasetName+"@"+o.dataSourceName};Object.assign(i,this.datasets.queryInfo),r=new kb(i),n=new Zb({queryParameter:r,datasetNames:[o.dataSourceName+":"+o.datasetName],fromIndex:0,toIndex:1e5}),new ov(o.dataUrl).processAsync(n,e)}},{key:"getLayerFeatures",value:function(t,e){var r,n,o=t.result,i={name:o.mapName};Object.assign(i,this.datasets.queryInfo),r=new kb(i),n=new XT({queryParams:[r],expectCount:1e5}),new rC(o.dataUrl).processAsync(n,e)}},{key:"getDataInfoByIptl",value:function(t){this.getServiceInfo(this.datasets.url,t)}},{key:"getServiceInfo",value:function(t,e){var r=this;Jl.get(t,null,{withCredentials:this.datasets.withCredentials}).then(function(t){return t.json()}).then(function(n){var o;!1!==n.succeed?n.dataItemServices&&n.dataItemServices.length>0?(n.dataItemServices.forEach(function(n){if("RESTDATA"===n.serviceType&&"PUBLISHED"===n.serviceStatus)o=n;else{if("RESTMAP"!==n.serviceType||"PUBLISHED"!==n.serviceStatus)return void r.getDatafromContent(t,e);o=n}}),o&&r.getDatafromRest(o.serviceType,o.address,e)):r.getDatafromContent(t,e):r._fireFailedEvent(n)}).catch(function(t){console.log(t),r._fireFailedEvent(t)})}},{key:"getDatafromContent",value:function(t,e){var r=this,n={result:{}},o=this;t+="/content.json?pageSize=9999999&currentPage=1",Jl.get(t,null,{withCredentials:this.datasets.withCredentials}).then(function(t){return t.json()}).then(function(t){if(!1!==t.succeed){if(t.type){if("JSON"===t.type||"GEOJSON"===t.type){if(t.content=JSON.parse(t.content.trim()),!t.content.features)return void console.log(uz.i18n("msg_jsonResolveFiled"));var i=r._formatGeoJSON(t.content);n.result.features={type:t.content.type,features:i}}else if("EXCEL"===t.type||"CSV"===t.type){var a=r._excelData2Feature(t.content);n.result.features={type:"FeatureCollection",features:a}}e(n,"content")}}else o._fireFailedEvent(t)},this).catch(function(t){console.log(t),o._fireFailedEvent(t)})}},{key:"getDatafromRest",value:function(t,e,r){var n=this,o=this.datasets.withCredentials;if("RESTDATA"===t){var i,a,s="".concat(e,"/data/datasources");Jl.get(s,null,{withCredentials:o}).then(function(t){return t.json()}).then(function(t){i=t.datasourceNames[0],s="".concat(e,"/data/datasources/").concat(i,"/datasets"),Jl.get(s,null,{withCredentials:o}).then(function(t){return t.json()}).then(function(t){return a=t.datasetNames[0],n.getDatafromRestData("".concat(e,"/data"),[i+":"+a],r),[i+":"+a]}).catch(function(t){n._fireFailedEvent(t)})}).catch(function(t){n._fireFailedEvent(t)})}else{var u,l,c,f="".concat(e,"/maps");Jl.get(f,null,{withCredentials:o}).then(function(t){return t.json()}).then(function(t){u=t[0].name,c=t[0].path,f=f="".concat(e,"/maps/").concat(u,"/layers"),Jl.get(f,null,{withCredentials:o}).then(function(t){return t.json()}).then(function(t){return l=t[0].subLayers.layers[0].caption,n.getDatafromRestMap(l,c,r),l}).catch(function(t){n._fireFailedEvent(t)})}).catch(function(t){n._fireFailedEvent(t)})}}},{key:"getDatafromRestData",value:function(t,e,r){var n=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"SmID>0",this._getFeatureBySQL(t,e,this.datasets.queryInfo,function(t){r(t,"RESTDATA")},function(t){console.log(t),n._fireFailedEvent(t)})}},{key:"getDatafromRestMap",value:function(t,e,r){var n=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"smid=1",this._queryFeatureBySQL(e,t,this.datasets.queryInfo,null,null,function(t){r(t,"RESTMAP")},function(t){console.log(t),n._fireFailedEvent(t)})}},{key:"_getFeatureBySQL",value:function(t,e,r,n,o){var i,a,s={name:e.join().replace(":","@")};Object.assign(s,r),i=new kb(s),a=new Zb({queryParameter:i,datasetNames:e,fromIndex:0,toIndex:1e5,returnContent:!0}),new ov(t).processAsync(a,function(t){"processCompleted"===t.type?n&&n(t):o&&o(t)})}},{key:"_queryFeatureBySQL",value:function(t,e,r,n,o,i,a,s,u,l){var c,f,h={name:e};Object.assign(h,r),c=new kb(h),n&&(c.fields=n);var p={queryParams:[c]};l&&(p.queryOption=Te.ATTRIBUTE),s&&(p.startRecord=s),u&&(p.expectCount=u),o&&(p.prjCoordSys={epsgCode:o}),f=new XT(p),this._queryBySQL(t,f,function(t){"processCompleted"===t.type?i(t):a(t)})}},{key:"_queryBySQL",value:function(t,e,r,n){new rC(t,{format:this._processFormat(n)}).processAsync(e,r)}},{key:"_processFormat",value:function(t){return t||ke.GEOJSON}},{key:"_formatGeoJSON",value:function(t){var e=t.features;return e.forEach(function(t,e){t.properties.index=e}),e}},{key:"_excelData2Feature",value:function(t){for(var e=t.colTitles,r=-1,n=-1,o=0,i=e.length;o<i;o++)cz.isXField(e[o])&&(r=o),cz.isYField(e[o])&&(n=o);for(var a=[],s=0,u=t.rows.length;s<u;s++){var l=t.rows[s],c=Number(l[r]),f=Number(l[n]),h={};for(var p in t.colTitles){h[t.colTitles[p]]=t.rows[s][p]}h.index=s+"";var y={type:"Feature",geometry:{type:"Point",coordinates:[c,f]},properties:h};a.push(y)}return a}},{key:"_fireFailedEvent",value:function(t){var e=t?{error:t,message:uz.i18n("msg_getdatafailed")}:{message:uz.i18n("msg_getdatafailed")};this.events.triggerEvent("getdatafailed",e)}}])&&fz(e.prototype,r),n&&fz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pz(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return yz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yz(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function yz(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var bz=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasets=e.datasets,this.xField=[],this.yField=[],this.grid={top:"50px",bottom:"50px",left:"50px",right:"60px"},this.chartType=e.type||"bar",this._initXYField(e.chartOptions),this.EVENT_TYPES=["getdatafailed"],this.events=new Bn(this,null,this.EVENT_TYPES)}var e,r,n;return e=t,(r=[{key:"_initXYField",value:function(t){var e=this;t&&t.length>0&&t.forEach(function(t){t.xAxis&&e.xField.push({field:t.xAxis.field,name:t.xAxis.name}),t.yAxis&&e.yField.push({field:t.yAxis.field,name:t.yAxis.name})})}},{key:"getDatasetInfo",value:function(t){var e=this;this.createChart=t,this.datasets&&this._checkUrl(this.datasets.url)&&(this.chartModel=new hz(this.datasets),"iServer"===this.datasets.type?this.chartModel.getDatasetInfo(this._getDatasetInfoSuccess.bind(this)):"iPortal"===this.datasets.type&&this.chartModel.getDataInfoByIptl(this._getDataInfoSuccess.bind(this)),this.chartModel.events.on({getdatafailed:function(t){e.events.triggerEvent("getdatafailed",t)}}))}},{key:"_getDatasetInfoSuccess",value:function(t){var e=this.datasets.url,r=e.indexOf("rest");if(r>0){var n=e.indexOf("/",r+5),o=e.substring(r+5,n),i=e.substring(0,r+4)+"/data";if("maps"===o){var a=e.indexOf("/",n+1),s=e.substring(n+1,a);i=e.substring(0,r+4)+"/maps/"+s,t.result.dataUrl=i,this._getLayerFeatures(t)}else"data"===o&&(t.result.dataUrl=i,this._getDataFeatures(t))}}},{key:"_getDataInfoSuccess",value:function(t,e){"RESTMAP"===e?this._getChartDatasFromLayer(t):this._getChartDatas(t)}},{key:"_getDataFeatures",value:function(t){this.chartModel.getDataFeatures(t,this._getChartDatas.bind(this))}},{key:"_getLayerFeatures",value:function(t){this.chartModel.getLayerFeatures(t,this._getChartDatasFromLayer.bind(this))}},{key:"_getChartDatas",value:function(t){if(t){this.features=t.result.features;var e=this.features.features,r={};if(e.length){var n=e[0],o=[],i=[];for(var a in n.properties)o.push(a),i.push(this._getDataType(n.properties[a]));for(var s in r={features:e,fieldCaptions:o,fieldTypes:i,fieldValues:[]},i){var u=[];for(var l in e){var c=e[l],f=r.fieldCaptions[s],h=c.properties[f];u.push(h)}r.fieldValues.push(u)}this.createChart(r)}}}},{key:"_getChartDatasFromLayer",value:function(t){if(t.result.recordsets){var e=t.result.recordsets[0],r=e.features.features;this.features=e.features;var n={};if(r.length){for(var o in(n={features:e.features,fieldCaptions:e.fieldCaptions,fieldTypes:e.fieldTypes,fieldValues:[]}).fieldCaptions){var i=[];for(var a in r){var s=r[a],u=n.fieldCaptions[o],l=s.properties[u];i.push(l)}n.fieldValues.push(i)}this.createChart(n)}}}},{key:"_createChartOptions",value:function(t){return this.calculatedData=this._createChartDatas(t),this.updateChartOptions(this.chartType)}},{key:"changeType",value:function(t){if(t!==this.chartType)return this.chartType=t,this.updateChartOptions(this.chartType)}},{key:"updateData",value:function(t,e,r){this.updateChart=r,this.xField=[],this.yField=[],this._initXYField(e),t.type=t.type||"iServer",t.withCredentials=t.withCredentials||!1,this.datasets=t,this.getDatasetInfo(this._updateDataSuccess.bind(this))}},{key:"_updateDataSuccess",value:function(t){var e=this._createChartOptions(t);this.updateChart(e)}},{key:"updateChartOptions",value:function(t,e){if(this.calculatedData){var r=this.grid,n=this._createChartSeries(this.calculatedData,t),o=[];for(var i in this.calculatedData.XData)o.push({value:this.calculatedData.XData[i].fieldsData});var a={type:"category",name:this.xField[0].name||"X",data:o,nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},s={type:"value",name:this.yFieldName||"Y",data:{},nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},u={formatter:"{b0}: {c0}"},l="#404a59";return e&&(e.grid&&(r=e.grid),e.tooltip&&(u=e.tooltip),e.backgroundColor&&(l=e.backgroundColor)),{backgroundColor:l,grid:r,series:n,xAxis:a,yAxis:s,tooltip:u}}}},{key:"_createChartDatas",value:function(t){var e=0,r=[],n=t.fieldCaptions,o=this;n.forEach(function(t,r){o.xField[0]&&t===o.xField[0].field&&(e=r)}),this.yFieldName="",this.yField.forEach(function(t,e){0!==e&&(o.yFieldName=o.yFieldName+","),o.yFieldName=o.yFieldName+t.name,n.forEach(function(e,n){e===t.field&&r.push(n)})});var i=this._getAttrData(t,e),a=[];if(r.length>0)r.forEach(function(e){var r=[];for(var n in t.fieldValues[e])r.push({value:t.fieldValues[e][n]});a.push(r)});else{for(var s=[],u=[],l=i.length,c=0;c<l;c++){for(var f=!1,h=0,p=u.length;h<p;h++)if(i[c].fieldsData===u[h].fieldsData){s[h].value++,u[h].recordIndexs.push(c),f=!0;break}f||i[c].fieldsData&&(u.push({fieldsData:i[c].fieldsData,recordIndexs:[c]}),s.push({value:1}))}i=u,a=[s]}return{XData:i,YData:a}}},{key:"_getAttrData",value:function(t,e){0===e&&(this.xField=[{field:t.fieldCaptions[e],name:t.fieldCaptions[e]}]);for(var r=[],n=0,o=t.fieldValues[e].length;n<o;n++){var i=t.fieldValues[e][n];r.push({recordIndexs:n,fieldsData:i})}return r}},{key:"_createChartSeries",value:function(t,e){var r=[];return t.YData.forEach(function(t){var n,o=0,i=[],a=pz(t);try{for(a.s();!(n=a.n()).done;){o=n.value.value,i.push({value:o})}}catch(t){a.e(t)}finally{a.f()}var s={type:e,data:i,name:"y"};r.push(s)}),r}},{key:"_isDate",value:function(t){return/((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/gi.test(t)}},{key:"_isNumber",value:function(t){var e=Number(t);return 0===e||!isNaN(e)}},{key:"_getDataType",value:function(t){if(null!==t&&void 0!==t&&""!==t){if(this._isDate(t))return"DATE";if(this._isNumber(t))return"NUMBER"}return"STRING"}},{key:"_checkUrl",value:function(t){return!(""===t||!this._isMatchUrl(t))&&(!/^http[s]?:\/\/localhost/.test(t)&&!/^http[s]?:\/\/127.0.0.1/.test(t))}},{key:"_isMatchUrl",value:function(t){return new RegExp("(https?|http|file|ftp)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]").test(t)}},{key:"getStyle",value:function(){return{grid:this.grid,tooltip:this.tooltip,backgroundColor:this.backgroundColor}}},{key:"getFeatures",value:function(){return this.features}},{key:"setStyle",value:function(t){return this.updateChartOptions(this.chartType,t)}}])&&dz(e.prototype,r),n&&dz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function vz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var mz=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.domID=e,this.chartType=r.type||"bar",r.datasets.type=r.datasets.type||"iServer",r.datasets.withCredentials=r.datasets.withCredentials||!1,this.viewModel=new bz(r),this._fillDataToView()}var e,r,n;return e=t,(r=[{key:"onAdd",value:function(t){this.addChart=t}},{key:"_fillDataToView",value:function(){var t=new az;this.viewModel.getDatasetInfo(this._createChart.bind(this)),this.viewModel.events.on({getdatafailed:function(e){t.showView(e.message)}})}},{key:"getStyle",value:function(){return this.viewModel.getStyle()}},{key:"getFeatures",value:function(){return this.viewModel.getFeatures()}},{key:"setStyle",value:function(t){var e=this.viewModel.setStyle(t);this._updateChart(e)}},{key:"changeType",value:function(t){if(this.chartType!==t){this.chartType=t;var e=this.viewModel.changeType(t);this._updateChart(e)}}},{key:"updateData",value:function(t,e){var r=this;this.viewModel.updateData(t,e,function(t){r._updateChart(t),r.addChart&&r.addChart()})}},{key:"_createChart",value:function(t){this.echart=sz.init(document.getElementById(this.domID),null,{renderer:"canvas"});var e=this.viewModel._createChartOptions(t);this.echart.setOption(e),this.addChart&&this.addChart()}},{key:"_updateChart",value:function(t){this.echart&&(this.echart.clear(),this.echart.setOption(t))}}])&&vz(e.prototype,r),n&&vz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function gz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var wz=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.id=e.id?e.id:null,this.rootContainer=null}var e,r,n;return e=t,(r=[{key:"getElement",value:function(){return this.id&&(this.rootContainer.id=this.id),this.rootContainer}},{key:"_initView",value:function(){}},{key:"showView",value:function(){this.rootContainer.hidden=!1}},{key:"closeView",value:function(){this.rootContainer.hidden=!0}}])&&gz(e.prototype,r),n&&gz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Oz(t){"@babel/helpers - typeof";return(Oz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _z(t,e){return(_z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Pz(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=xz(t);if(e){var o=xz(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Oz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function xz(t){return(xz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kz=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_z(t,e)}(i,wz);var e,r,n,o=Pz(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t);var r=t.title?t.title:"";return e._initView(r),e}return e=i,(r=[{key:"_initView",value:function(t){var e=document.createElement("div");e.setAttribute("class","component-container");var r=document.createElement("div");r.setAttribute("class","component-title");var n=document.createElement("div");n.innerHTML=t,r.appendChild(n),e.appendChild(r);var o=document.createElement("div");return o.setAttribute("class","component-content"),e.appendChild(o),this.content=o,this.rootContainer=e,e}},{key:"getContentElement",value:function(){return this.content}},{key:"appendContent",value:function(t){this.content.appendChild(t)}}])&&Sz(e.prototype,r),n&&Sz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function jz(t){"@babel/helpers - typeof";return(jz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ez(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Tz(t,e){return(Tz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Cz(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Rz(t);if(e){var o=Rz(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===jz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Rz(t){return(Rz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Az=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tz(t,e)}(i,wz);var e,r,n,o=Cz(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._initView(t),e}return e=i,(r=[{key:"_initView",value:function(t){var e=this._createElement("div","component-selecttool");t.labelName&&(this._createElement("label","component-selecttool__lable--describe",e).innerHTML=t.labelName);var r=this._createElement("div","component-selecttool--chart",e);r.setAttribute("tabindex","1");var n=this._createElement("div","component-selecttool__name",r);n.title=t.optionsArr[0],n.innerHTML=t.optionsArr[0];var o=this._createElement("div","component-selecttool__trianglebtn--chart",r),i=this._createElement("div","component-triangle-down-img",o),a=this._createElement("div","component-selecttool__content",r),s=this._createElement("div","component-selecttool__content--chart",a),u=this._createElement("div","component-selecttool__scrollarea__content",s);u.setAttribute("tabindex","1"),this.createOptions(u,t.optionsArr),this.optionClickEvent(u,n,t.optionsClickCb),this._selectClickEvent(r,a,i),this.rootContainer=e}},{key:"createOptions",value:function(t,e){for(var r in e){var n=this._createElement("div","component-selecttool__option",t);n.title=e[r],n.innerHTML=e[r]}}},{key:"_selectClickEvent",value:function(t,e,r){t.onclick=function(t){"block"===e.style.display?(e.style.display="none",r.className="component-triangle-down-img"):(e.style.display="block",r.className="triangle-up-img"),t.preventDefault(),t.stopPropagation()},t.onmousedown=function(t){t.target!==this&&(this.focus(),t.preventDefault(),t.stopPropagation())},t.onblur=function(){e.style.display="none",r.className="component-triangle-down-img"}}},{key:"_createElement",value:function(t,e,r){var n=document.createElement(t||"div");return e&&(n.className=e),r&&r.appendChild(n),n}},{key:"optionClickEvent",value:function(t,e,r){for(var n=function(){var n=t.children[o];n.onclick=function(){e.innerHTML=n.innerHTML,e.title=n.title,n.getAttribute("data-value")&&e.setAttribute("data-value",n.getAttribute("data-value")),r&&r(n)}},o=0;o<t.children.length;o++)n()}}])&&Ez(e.prototype,r),n&&Ez(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Mz(t){"@babel/helpers - typeof";return(Mz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Nz(t,e){return(Nz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Iz(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Dz(t);if(e){var o=Dz(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Mz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Dz(t){return(Dz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fz=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nz(t,e)}(i,wz);var e,r,n,o=Iz(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._initView(t),e}return e=i,(r=[{key:"_initView",value:function(t){var e=document.createElement("div");e.className="component-dropdownbox--container";var r=document.createElement("div");r.setAttribute("tabindex","1"),r.className="component-dropdownbox",e.appendChild(r);var n=document.createElement("div");r.appendChild(n),this._createDropDownOption(t[0],n);var o=document.createElement("div");o.className="component-dropdownbox__triangle-btn",r.appendChild(o);var i=document.createElement("div");i.className="component-triangle-down-img",o.appendChild(i);var a={parentEle:r,dropDownContent:["component-dropdownbox__content component-dropdownbox__content--chart","dropDownContent"],scrollareaContent:"component-selecttool__scrollarea__content",optionsArr:t,triangleBtn:i,dropDownTopContainer:n};this._createDropDownBox(a),this.rootContainer=e}},{key:"_createDropDownBox",value:function(t){var e=t.parentEle,r=t.dropDownTopContainer,n=document.createElement("div");n.className=t.dropDownContent[0],e.appendChild(n);var o=document.createElement("div");o.className=t.scrollareaContent,n.appendChild(o);for(var i=t.optionsArr,a=0;a<i.length;a++)this._createDropDownOption(i[a],o);var s=t.triangleBtn;this._dropDownClickEvent(e,n,s),this._eleOnblur(e,n,s);for(var u=o.children,l=function(t){u[t].onclick=function(){r.innerHTML=u[t].outerHTML}},c=0;c<u.length;c++)l(c)}},{key:"_createDropDownOption",value:function(t,e){var r=document.createElement("div");r.className="component-dropdownbox__item";var n=t;n.dataValue&&r.setAttribute("data-value",n.dataValue),e.appendChild(r);var o=document.createElement("div");o.className="component-dropdownbox__item__img",r.appendChild(o);var i=document.createElement("div");n.icon.className&&(i.className=n.icon.className),n.icon.background&&(i.style.background=n.icon.background),o.appendChild(i);var a=document.createElement("div");a.className="component-dropdownbox__item__title",a.title=n.title,a.innerHTML=n.title,r.appendChild(a);var s=document.createElement("div");s.className="component-dropdownbox__item__remark",s.title=n.remark,s.innerHTML=n.remark,r.appendChild(s)}},{key:"_dropDownClickEvent",value:function(t,e,r){t.onclick=function(t){"block"===e.style.display?(e.style.display="none",r.className="component-triangle-down-img"):(e.style.display="block",r.className="triangle-up-img"),t.preventDefault(),t.stopPropagation()},t.onmousedown=function(t){t.target!==this&&(this.focus(),t.preventDefault(),t.stopPropagation())}}},{key:"_eleOnblur",value:function(t,e,r){t.onblur=function(){e.style.display="none",r.className="component-triangle-down-img"}}},{key:"_createElement",value:function(t,e,r){var n=document.createElement(t||"div");return e&&(n.className=e),r&&r.appendChild(n),n}}])&&Lz(e.prototype,r),n&&Lz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Bz(t){"@babel/helpers - typeof";return(Bz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Uz(t,e){return(Uz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Jz(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Vz(t);if(e){var o=Vz(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Bz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Vz(t){return(Vz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zz=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uz(t,e)}(i,wz);var e,r,n,o=Jz(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},e=o.call(this,t),t.title=t.title?t.title:"",e._initView(t.title),e}return e=i,(r=[{key:"_initView",value:function(t){var e=document.createElement("div");e.setAttribute("class","component-popcontainer");var r=document.createElement("div");r.setAttribute("class","component-popcontainer__header");var n=document.createElement("label");n.setAttribute("class","component-popcontainer__header__title"),n.innerHTML=t,r.appendChild(n);var o=document.createElement("span");o.setAttribute("class","supermapol-icons-clear component-popcontainer__header__close"),o.onclick=this.closeView.bind(this),e.appendChild(o),e.appendChild(r);var i=document.createElement("div");i.setAttribute("class","component-popcontainer__content"),this.content=i,e.appendChild(i),this.rootContainer=e}},{key:"appendContent",value:function(t){this.content.appendChild(t)}}])&&Gz(e.prototype,r),n&&Gz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function qz(t){"@babel/helpers - typeof";return(qz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Wz(t,e){return(Wz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Yz(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Xz(t);if(e){var o=Xz(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===qz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Xz(t){return(Xz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Qz=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wz(t,e)}(i,zz);var e,r,n,o=Yz(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.title=t.title?t.title:"属性",(e=o.call(this,t)).rootContainer.firstChild.hidden=!0,t.attributes=t.attributes?t.attributes:[],e._createAttributesTable(t.attributes),e}return e=i,(r=[{key:"_createAttributesTable",value:function(t){var e=document.createElement("table");e.setAttribute("class","component-popcontainer__content__table");var r=document.createElement("tbody"),n=!0;for(var o in t){var i=document.createElement("tr");n&&i.setAttribute("class","component-popcontainer__content__td--color");var a=document.createElement("td"),s=document.createElement("Span");s.innerHTML=o,a.appendChild(s);var u=document.createElement("td");u.innerHTML=t[o],i.appendChild(a),i.appendChild(u),r.appendChild(i),n=!n}e.appendChild(r),this.appendContent(e)}}])&&Hz(e.prototype,r),n&&Hz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Zz(t){"@babel/helpers - typeof";return(Zz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $z(t,e){return($z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tq(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=eq(t);if(e){var o=eq(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Zz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function eq(t){return(eq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rq=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$z(t,e)}(i,wz);var e,r,n,o=tq(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._initView(),e}return e=i,(r=[{key:"_initView",value:function(){var t=document.createElement("div");t.setAttribute("class","component-tabpage");var e=document.createElement("ul");this.header=e;var r=document.createElement("div");r.setAttribute("class","component-tabpage__content"),this.content=r,t.appendChild(e),t.appendChild(r),this.rootContainer=t}},{key:"setTabs",value:function(t){this.removeAllTabs(),this.appendTabs(t)}},{key:"appendTabs",value:function(t){for(var e=0;e<t.length;e++){var r=document.createElement("span");r.index=e,r.appendChild(document.createTextNode(t[e].title)),r.onclick=this._changeTabsPage.bind(this);var n=t[e].content;n.index=e,n.hidden=!0,this.header.appendChild(r),this.content.appendChild(n)}this.header.firstChild.setAttribute("class","on"),this.content.firstChild.hidden=!1}},{key:"removeTab",value:function(t){this.header.removeChild(this.header.children[t]),this.content.removeChild(this.content.children[t])}},{key:"removeAllTabs",value:function(){for(var t=this.header.children.length;t>0;t--)this.header.removeChild(this.header.children[t]),this.content.removeChild(this.content.children[t])}},{key:"_changeTabsPage",value:function(t){for(var e=t.target.index,r=0;r<this.header.children.length;r++)this.header.children[r].setAttribute("class",""),this.content.children[r].hidden=!0,r===e&&(this.header.children[r].setAttribute("class","on"),this.content.children[r].hidden=!1)}}])&&Kz(e.prototype,r),n&&Kz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function nq(t){"@babel/helpers - typeof";return(nq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function iq(t,e){return(iq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function aq(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=sq(t);if(e){var o=sq(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===nq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function sq(t){return(sq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var uq=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iq(t,e)}(i,rq);var e,r,n,o=aq(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).rootContainer.classList.add("component-citytabpage--noneBoxShadow"),e.config=t.config,C.isArray(e.config)?(e.header.hidden=!0,e._createCityItem("城市",e.config),e.content.style.border="none"):(e._createTabs(),e.header.onclick=function(t){for(var r=0;r<e.header.children.length;r++)e.header.children[r].setAttribute("class","");t.target.setAttribute("class","on"),e._createCityContent(t.target.innerHTML)}),e}return e=i,(r=[{key:"_createTabs",value:function(){if(C.isArray(this.config))for(var t=0;t<this.config.length;t++){var e="";for(var r in this.config[t])e+=r;var n=document.createElement("li");n.innerHTML=e,this.header.appendChild(n)}else for(var o in this.config){var i=document.createElement("li");i.innerHTML=o,this.header.appendChild(i)}this.header.firstChild.setAttribute("class","on"),this._createCityContent(this.header.firstChild.innerHTML)}},{key:"_createCityContent",value:function(t){for(var e=this.content.children.length;e>0;e--)this.content.removeChild(this.content.children[e-1]);var r=this.config[t];for(var n in r)this._createCityItem(n,r[n])}},{key:"_createCityItem",value:function(t,e){var r=document.createElement("div"),n=document.createElement("div");n.setAttribute("class","component-citytabpag__py-key"),n.innerHTML=t,r.appendChild(n);var o=document.createElement("div");o.setAttribute("class","component-citytabpag__content");for(var i=0;i<e.length;i++){var a=document.createElement("span");a.innerHTML=e[i],o.appendChild(a)}"HOT"===t&&(o.style.width="428px"),r.appendChild(o),this.content.appendChild(r)}}])&&oq(e.prototype,r),n&&oq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function lq(t){"@babel/helpers - typeof";return(lq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fq(t,e){return(fq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hq(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=pq(t);if(e){var o=pq(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===lq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function pq(t){return(pq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yq=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fq(t,e)}(i,wz);var e,r,n,o=hq(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).navTabsTitle=null,e.navTabsContent=null,t.tabs=t.tabs?t.tabs:[],e._initView(t.tabs),e}return e=i,(r=[{key:"_initView",value:function(t){var e=document.createElement("div");e.setAttribute("class","component-navtabspage");var r=document.createElement("span");r.setAttribute("class","supermapol-icons-close"),r.onclick=this.closeView.bind(this),e.appendChild(r);var n=document.createElement("div");this.navTabsTitle=n,n.setAttribute("class","component-navtabspage__title"),e.appendChild(n);var o=document.createElement("div");this.navTabsContent=o,o.setAttribute("class","component-navtabspage__content"),e.appendChild(o),t.length>0&&this.appendTabs(t),this.rootContainer=e}},{key:"setTabs",value:function(t){this.removeAllTabs(),this.appendTabs(t)}},{key:"appendTabs",value:function(t){for(var e=0;e<t.length;e++){var r=document.createElement("span");r.index=e,r.appendChild(document.createTextNode(t[e].title)),r.onclick=this._changeTabsPage.bind(this);var n=t[e].content;n.index=e,n.hidden=!0,this.navTabsTitle.appendChild(r),this.navTabsContent.appendChild(n)}this.navTabsTitle.firstChild.setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.firstChild.hidden=!1}},{key:"removeTab",value:function(t){this.navTabsTitle.removeChild(this.navTabsTitle.children[t]),this.navTabsContent.removeChild(this.navTabsContent.children[t])}},{key:"removeAllTabs",value:function(){for(var t=this.navTabsTitle.children.length;t>0;t--)this.navTabsTitle.removeChild(this.navTabsTitle.children[t]),this.navTabsContent.removeChild(this.navTabsContent.children[t])}},{key:"_changeTabsPage",value:function(t){for(var e=t.target.index,r=0;r<this.navTabsTitle.children.length;r++)this.navTabsTitle.children[r].setAttribute("class",""),this.navTabsContent.children[r].hidden=!0,r===e&&(this.navTabsTitle.children[r].setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.children[r].hidden=!1)}}])&&cq(e.prototype,r),n&&cq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function dq(t){"@babel/helpers - typeof";return(dq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vq(t,e){return(vq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function mq(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=gq(t);if(e){var o=gq(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===dq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function gq(t){return(gq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wq=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vq(t,e)}(i,wz);var e,r,n,o=mq(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).currentPage=0,e.pageNumberLis=[],e.currentPageNumberLis=[],e.linkageEvent=null,t.contents=t.contents?t.contents:null,t.pageCounts=t.pageCounts?t.pageCounts:0,e._initView(t.contents,t.pageCounts),e}return e=i,(r=[{key:"setLinkageEvent",value:function(t){this.linkageEvent=t}},{key:"_initView",value:function(t,e){var r=document.createElement("div");r.setAttribute("class","component-pagination");var n=document.createElement("div");n.setAttribute("class","component-pagination__content"),r.appendChild(n),this.content=n;var o=document.createElement("ul");o.setAttribute("class","component-pagination__link"),o.onclick=this._changePageEvent.bind(this),r.appendChild(o),this._createLink(o),this.link=o,t&&this.setContent(t),0!==e&&this.setPageLink(e),this.rootContainer=r}},{key:"setContent",value:function(t){this.clearContent(),this.appendContent(t)}},{key:"appendContent",value:function(t){this.content.appendChild(t)}},{key:"clearContent",value:function(){for(var t=this.content.children.length-1;t>=0;t--)this.content.removeChild(this.content.children[t])}},{key:"setPageLink",value:function(t){this.pageNumberLis=[],this.currentPageNumberLis=[],this.clearPageLink(),this._createPageLi(t),this._appendPageLink()}},{key:"_createPageLi",value:function(t){for(var e=0;e<t;e++){var r=document.createElement("li");r.innerHTML=e+1,this.pageNumberLis.push(r)}if(this.pageNumberLis[0].setAttribute("class","active"),this.currentPage=1,t<5)this.currentPageNumberLis=this.pageNumberLis;else for(var n=0;n<5;n++)this.currentPageNumberLis.push(this.pageNumberLis[n])}},{key:"_appendPageLink",value:function(){for(var t=0;t<this.currentPageNumberLis.length;t++)this.link.insertBefore(this.currentPageNumberLis[t],this.link.childNodes[this.link.children.length-2]);for(var e=0;e<this.currentPageNumberLis.length;e++)this.currentPageNumberLis[e].setAttribute("class",""),Number(this.currentPageNumberLis[e].innerHTML)===this.currentPage&&this.currentPageNumberLis[e].setAttribute("class","active");this._changeDisableState(),this.linkageEvent&&this.linkageEvent(this.currentPage)}},{key:"clearPageLink",value:function(){for(var t=this.link.children.length-3;t>1;t--)this.link.removeChild(this.link.children[t])}},{key:"_createLink",value:function(t){for(var e=0;e<4;e++){var r=document.createElement("li");r.setAttribute("class","disable");var n=document.createElement("span");r.appendChild(n),0===e?(n.id="first",n.setAttribute("class","supermapol-icons-first")):1===e?(n.id="prev",n.setAttribute("class","supermapol-icons-prev")):2===e?(n.id="next",n.setAttribute("class","supermapol-icons-next")):3===e&&(n.id="last",n.setAttribute("class","supermapol-icons-last")),t.appendChild(r)}}},{key:"_changePageEvent",value:function(t){var e=t.target;if("disable"!==e.parentElement.classList[0]){var r;if(e.id)r=e.id;else{if(!Number(e.innerHTML))return;r=Number(e.innerHTML)}this._prePageNum(r),this.clearPageLink(),this._appendPageLink()}}},{key:"_changeDisableState",value:function(){this.link.children[0].setAttribute("class",""),this.link.children[1].setAttribute("class",""),this.link.children[this.link.children.length-1].setAttribute("class",""),this.link.children[this.link.children.length-2].setAttribute("class",""),1===this.currentPage&&(this.link.children[0].setAttribute("class","disable"),this.link.children[1].setAttribute("class","disable")),this.currentPage===this.pageNumberLis.length&&(this.link.children[this.link.children.length-1].setAttribute("class","disable"),this.link.children[this.link.children.length-2].setAttribute("class","disable"))}},{key:"_prePageNum",value:function(t){var e=[];if(this.currentPage="first"===t?1:"last"===t?this.pageNumberLis.length:"prev"===t?this.currentPage-1:"next"===t?this.currentPage+1:t,this.pageNumberLis.length<=5)for(var r=0;r<this.pageNumberLis.length;r++)e.push(this.pageNumberLis[r]);else if(this.currentPage<=3)for(var n=0;n<5;n++)e.push(this.pageNumberLis[n]);else if(this.currentPage>=this.pageNumberLis.length-3)for(var o=this.pageNumberLis.length-5;o<this.pageNumberLis.length;o++)e.push(this.pageNumberLis[o]);else for(var i=this.currentPage-3;i<=this.currentPage+1;i++)e.push(this.pageNumberLis[i]);e.length>0&&(this.currentPageNumberLis=e)}}])&&bq(e.prototype,r),n&&bq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Oq(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Sq(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Oq(Object(r),!0).forEach(function(e){_q(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oq(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _q(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Pq(t){var e,r=(e={},["(",")","（","）",",","，"].forEach(function(t,r){e[t]="$".concat(r)}),e);for(var n in r)for(var o=r[n],i=new RegExp("\\".concat(n),"g");i.test(t);)t=t.replace(i,o);return t}function xq(t,e){var r=t;return t.replace(/&|\||>|<|=|!/g," ").split(" ").filter(function(t){return t}).forEach(function(t){var n=e.find(function(e){return e===t});if(jq(t)&&n&&(r=r.replace(n,"$"+n)),n){var o=Pq(n);r=r.replace(n,o)}}),r}function kq(t){var e={};for(var r in t){var n=r;jq(r)&&(n="$"+r),e[n=Pq(n)]=t[r]}return e}function jq(t){return/^\d/.test(t)}eF.Lang=uz,eF.i18n=eF.Lang.i18n,eF.Util=Sq(Sq({},eF.Util),C),eF.Browser=j,eF.INCHES_PER_UNIT=R,eF.METERS_PER_INCH=A,eF.DOTS_PER_INCH=96,eF.IS_GECKO=T,eF.setCORS=function(t){Tl=t},eF.isCORS=Gl,eF.setRequestTimeout=function(t){return Cl=t},eF.getRequestTimeout=Ul,eF.FetchRequest=Jl,eF.inherit=function(t,e){var r,n,o,i=function(){};for(i.prototype=e.prototype,t.prototype=new i,r=2,n=arguments.length;r<n;r++)"function"==typeof(o=arguments[r])&&(o=o.prototype),C.extend(t.prototype,o)},eF.mixin=h,eF.String=p,eF.Number=y,eF.Function=d,eF.Array=b,eF.Date=Nn,eF.Event=In,eF.Bounds=I,eF.Credential=Ln,eF.Events=Bn,eF.Feature=Ct,eF.Geometry=m,eF.Geometry3D=Hn,eF.Pixel=c,eF.Size=u,eF.Feature.Vector=Ut,eF.Geometry.Collection=Q,eF.Geometry.Curve=ut,eF.Geometry.GeoText=Rr,eF.Geometry.LinearRing=St,eF.Geometry.LineString=dt,eF.Geometry.MultiLineString=ee,eF.Geometry.MultiPoint=rt,eF.Geometry.MultiPolygon=se,eF.Geometry.Point=V,eF.Geometry.Polygon=Et,eF.Geometry.Rectangle=An,eF.Components.Chart=mz,eF.Components.ChartViewModel=bz,eF.Components.MessageBox=az,eF.Components.AttributesPopContainer=Qz,eF.Components.CityTabsPage=uq,eF.Components.CommonContainer=kz,eF.Components.DropDownBox=Fz,eF.Components.IndexTabsPageContainer=rq,eF.Components.NavTabsPage=yq,eF.Components.PaginationContainer=wq,eF.Components.PopContainer=zz,eF.Components.Select=Az,eF.Components.TemplateBase=wz,eF.Components.FileReaderUtil=cz,eF.TimeControlBase=lF,eF.TimeFlowControl=vF,eF.Format=eF.Format||Vt,eF.Format.GeoJSON=Or,eF.Format.JSON=Xt,eF.Format.WKT=sF,eF.iManager=jF,eF.iManagerCreateNodeParam=OF,eF.iManagerServiceBase=gF,eF.iPortal=YF,eF.iPortalAddDataParam=rB,eF.iPortalAddResourceParam=KF,eF.iPortalDataConnectionInfoParam=uB,eF.iPortalDataMetaInfoParam=oB,eF.iPortalDataStoreInfoParam=aB,eF.iPortalQueryParam=RF,eF.iPortalQueryResult=MF,eF.iPortalRegisterServiceParam=tB,eF.iPortalResource=GF,eF.iPortalServiceBase=TF,eF.iPortalShareEntity=QF,eF.iPortalShareParam=JF,eF.iPortalUser=yB,eF.AddressMatchService=Cy,eF.AggregationParameter=bB,eF.AreaSolarRadiationParameters=LC,eF.AreaSolarRadiationService=UC,eF.BucketAggParameter=_B,eF.BufferAnalystParameters=WC,eF.BufferAnalystService=gR,eF.BufferDistance=VC,eF.BuffersAnalystJobsParameter=_E,eF.BuffersAnalystJobsService=CE,eF.BufferSetting=qC,eF.BurstPipelineAnalystParameters=v_,eF.BurstPipelineAnalystService=P_,eF.ChartFeatureInfoSpecsService=nd,eF.ChartQueryFilterParameter=Gy,eF.ChartQueryParameters=Jy,eF.ChartQueryService=Qy,eF.ClipParameter=MB,eF.ColorDictionary=uO,eF.CommonServiceBase=Th,eF.ComputeWeightMatrixParameters=C_,eF.ComputeWeightMatrixService=D_,eF.CreateDatasetParameters=Id,eF.DataFlowService=md,eF.DataReturnOption=XC,eF.DatasetBufferAnalystParameters=nR,eF.DatasetInfo=Hw,eF.DatasetOverlayAnalystParameters=rM,eF.DatasetService=Ld,eF.DatasetSurfaceAnalystParameters=YM,eF.DatasetThiessenAnalystParameters=$L,eF.DatasourceConnectionInfo=vj,eF.DatasourceService=tb,eF.DensityAnalystService=TR,eF.DensityKernelAnalystParameters=OR,eF.EditFeaturesParameters=ub,eF.EditFeaturesService=bb,eF.FacilityAnalyst3DParameters=Fx,eF.FacilityAnalystSinks3DParameters=qx,eF.FacilityAnalystSinks3DService=Zx,eF.FacilityAnalystSources3DParameters=ok,eF.FacilityAnalystSources3DService=fk,eF.FacilityAnalystStreamParameters=B_,eF.FacilityAnalystStreamService=H_,eF.FacilityAnalystTracedown3DParameters=Ak,eF.FacilityAnalystTracedown3DService=Bk,eF.FacilityAnalystTraceup3DParameters=mk,eF.FacilityAnalystTraceup3DService=xk,eF.FacilityAnalystUpstream3DParameters=Wk,eF.FacilityAnalystUpstream3DService=tj,eF.FieldParameters=pm,eF.FieldsFilter=zU,eF.FieldStatisticService=Em,eF.FieldStatisticsParameters=wm,eF.FilterParameter=kb,eF.FindClosestFacilitiesParameters=hP,eF.FindClosestFacilitiesService=gP,eF.FindLocationParameters=OP,eF.FindLocationService=EP,eF.FindMTSPPathsParameters=CP,eF.FindMTSPPathsService=DP,eF.FindPathParameters=BP,eF.FindPathService=HP,eF.FindServiceAreasParameters=YP,eF.FindServiceAreasService=ex,eF.FindTSPPathsParameters=nx,eF.FindTSPPathsService=cx,eF.GenerateSpatialDataParameters=RR,eF.GenerateSpatialDataService=FR,eF.GeoCodingParameter=Oy,eF.GeoDecodingParameter=_y,eF.GeoHashGridAggParameter=UB,eF.GeometryBatchAnalystService=nI,eF.GeometryBufferAnalystParameters=fR,eF.GeometryOverlayAnalystParameters=cM,eF.GeometrySurfaceAnalystParameters=rL,eF.GeometryThiessenAnalystParameters=sN,eF.GeoprocessingService=og,eF.GeoRelationAnalystParameters=GR,eF.GeoRelationAnalystService=WR,eF.GetFeaturesByBoundsParameters=hv,eF.GetFeaturesByBoundsService=gv,eF.GetFeaturesByBufferParameters=jv,eF.GetFeaturesByBufferService=Lv,eF.GetFeaturesByGeometryParameters=Jv,eF.GetFeaturesByGeometryService=Xv,eF.GetFeaturesByIDsParameters=Ib,eF.GetFeaturesByIDsService=Vb,eF.GetFeaturesBySQLParameters=Zb,eF.GetFeaturesBySQLService=ov,eF.GetFeaturesParametersBase=Eb,eF.GetFeaturesServiceBase=Pb,eF.GetFieldsService=fm,eF.GetGridCellInfosParameters=Fm,eF.GetGridCellInfosService=Hm,eF.GetLayersInfoService=DO,eF.Grid=dO,eF.HillshadeParameter=wU,eF.Image=SO,eF.ImageCollectionService=YD,eF.ImageGFAspect=rJ,eF.ImageGFHillShade=tJ,eF.ImageGFOrtho=oJ,eF.ImageGFSlope=aJ,eF.ImageRenderingRule=KU,eF.ImageSearchParameter=YU,eF.ImageService=LD,eF.ImageStretchOption=QU,eF.InterpolationAnalystParameters=XR,eF.InterpolationAnalystService=DA,eF.InterpolationDensityAnalystParameters=fA,eF.InterpolationIDWAnalystParameters=gA,eF.InterpolationKrigingAnalystParameters=TA,eF.InterpolationRBFAnalystParameters=nA,eF.JoinItem=zw,eF.KernelDensityJobParameter=_j,eF.KernelDensityJobsService=Cj,eF.LabelImageCell=QB,eF.LabelMatrixCell=VB,eF.LabelMixedTextStyle=Sg,eF.LabelSymbolCell=nG,eF.LabelThemeCell=cG,eF.LayerStatus=hG,eF.LinkItem=yG,eF.MappingParameters=Oj,eF.MapService=MS,eF.MathExpressionAnalysisParameters=BA,eF.MathExpressionAnalysisService=HA,eF.MeasureParameters=YS,eF.MeasureService=r_,eF.MetricsAggParameter=RB,eF.NDVIParameter=hU,eF.NetworkAnalystServiceBase=d_,eF.OutputSetting=gj,eF.OverlapDisplayedOptions=bG,eF.OverlayAnalystParameters=YA,eF.OverlayAnalystService=mM,eF.OverlayGeoJobParameter=iE,eF.OverlayGeoJobsService=hE,eF.PointWithMeasure=me,eF.ProcessingServiceBase=dj,eF.QueryByBoundsParameters=gT,eF.QueryByBoundsService=kT,eF.QueryByDistanceParameters=LT,eF.QueryByDistanceService=UT,eF.QueryByGeometryParameters=cC,eF.QueryByGeometryService=vC,eF.QueryBySQLParameters=XT,eF.QueryBySQLService=rC,eF.DatasetMinDistanceAnalystParameters=xN,eF.MinDistanceAnalystService=UN,eF.TerrainCutFillCalculationParameters=wL,eF.TerrainCutFillCalculationService=jL,eF.terrainAnalystSetting=EG,eF.TerrainAspectCalculationParameters=TL,eF.TerrainAspectCalculationService=IL,eF.TerrainSlopeCalculationParameters=FL,eF.TerrainSlopeCalculationService=qL,eF.GeometryMinDistanceAnalystParameters=MN,eF.ConvexHullAnalystParameters=mG,eF.ConvexHullAnalystService=XN,eF.TraceAnalystParameters=Y_,eF.TraceAnalystService=eP,eF.ConnectedEdgesAnalystParameters=nP,eF.ConnectedEdgesAnalystService=cP,eF.GetLayersLegendInfoParameters=wG,eF.GetLayersLegendInfoService=qO,eF.QueryParameters=Fy,eF.QueryService=gC,eF.RasterFunctionParameter=oU,eF.Route=xe,eF.RouteCalculateMeasureParameters=wM,eF.RouteCalculateMeasureService=jM,eF.RouteLocatorParameters=TM,eF.RouteLocatorService=IM,eF.ServerColor=le,eF.ServerFeature=zo,eF.ServerGeometry=yr,eF.ServerStyle=fe,eF.ServerTextStyle=yg,eF.ServerTheme=aO,eF.SetDatasourceParameters=Hd,eF.SetLayerInfoParameters=SG,eF.SetLayerInfoService=$O,eF.SetLayersInfoParameters=PG,eF.SetLayersInfoService=sS,eF.SetLayerStatusParameters=lS,eF.SetLayerStatusService=vS,eF.SingleObjectQueryJobsParameter=Aj,eF.SingleObjectQueryJobsService=Bj,eF.Sortby=HU,eF.SpatialAnalystBase=AC,eF.StopQueryParameters=TI,eF.StopQueryService=DI,eF.SummaryAttributesJobsParameter=UE,eF.SummaryAttributesJobsService=YE,eF.SummaryMeshJobParameter=Uj,eF.SummaryMeshJobsService=Yj,eF.SummaryRegionJobParameter=yE,eF.SummaryRegionJobsService=OE,eF.SupplyCenter=kG,eF.SurfaceAnalystParameters=GM,eF.SurfaceAnalystParametersSetting=FM,eF.SurfaceAnalystService=lL,eF.TerrainCurvatureCalculationParameters=fL,eF.TerrainCurvatureCalculationService=mL,eF.Theme=hg,eF.ThemeDotDensity=pw,eF.ThemeFlow=CG,eF.ThemeGraduatedSymbol=_w,eF.ThemeGraduatedSymbolStyle=dw,eF.ThemeGraph=aw,eF.ThemeGraphAxes=Hg,eF.ThemeGraphItem=Kg,eF.ThemeGraphSize=Yg,eF.ThemeGraphText=Qg,eF.ThemeGridRange=GG,eF.ThemeGridRangeItem=AG,eF.ThemeGridUnique=QG,eF.ThemeGridUniqueItem=JG,eF.ThemeLabel=Ig,eF.ThemeLabelAlongLine=kg,eF.ThemeLabelBackground=Eg,eF.ThemeLabelItem=bg,eF.ThemeLabelText=Pg,eF.ThemeLabelUniqueItem=KG,eF.ThemeMemoryData=tU,eF.ThemeOffset=wg,eF.ThemeParameters=pI,eF.ThemeRange=Mw,eF.ThemeRangeItem=xw,eF.ThemeService=OI,eF.ThemeUnique=zg,eF.ThemeUniqueItem=mg,eF.ThiessenAnalystParameters=OA,eF.ThiessenAnalystService=dN,eF.TilesetsService=GS,eF.TopologyValidatorJobsParameter=AE,eF.TopologyValidatorJobsService=BE,eF.TransferLine=rU,eF.TransferPathParameters=BI,eF.TransferPathService=HI,eF.TransferSolutionParameters=YI,eF.TransferSolutionService=eD,eF.TransportationAnalystParameter=E_,eF.TransportationAnalystResultSetting=k_,eF.UGCLayer=Nw,eF.UGCMapLayer=Jw,eF.UGCSubLayer=$w,eF.UpdateDatasetParameters=Fd,eF.UpdateEdgeWeightParameters=hx,eF.UpdateEdgeWeightService=gx,eF.UpdateTurnNodeWeightParameters=Ox,eF.UpdateTurnNodeWeightService=Ex,eF.Vector=TO,eF.VectorClipJobsParameter=Qj,eF.VectorClipJobsService=nE,eF.WebPrintingJobContent=IU,eF.WebPrintingJobCustomItems=SU,eF.WebPrintingJobExportOptions=GU,eF.WebPrintingJobImage=PU,eF.WebPrintingJobLayers=kU,eF.WebPrintingJobLayoutOptions=FU,eF.WebPrintingJobLegendOptions=EU,eF.WebPrintingJobLittleMapOptions=CU,eF.WebPrintingJobNorthArrowOptions=AU,eF.WebPrintingJobParameters=JU,eF.WebPrintingJobScaleBarOptions=LU,eF.WebPrintingService=mD,eF.Online=vJ,eF.OnlineData=dJ,eF.OnlineQueryDatasParameter=gJ,eF.ServiceStatus={DOES_NOT_INVOLVE:"DOES_NOT_INVOLVE",PUBLISH_FAILED:"PUBLISH_FAILED",PUBLISHED:"PUBLISHED",PUBLISHING:"PUBLISHING",UNPUBLISHED:"UNPUBLISHED",UNPUBLISHED_FAILED:"UNPUBLISHED_FAILED"},eF.DataItemType={GEOJSON:"GEOJSON",UGCV5_MVT:"UGCV5_MVT",JSON:"JSON",AUDIO:"AUDIO",COLOR:"COLOR",COLORSCHEME:"COLORSCHEME",CSV:"CSV",EXCEL:"EXCEL",FILLSYMBOL:"FILLSYMBOL",IMAGE:"IMAGE",LAYERTEMPLATE:"LAYERTEMPLATE",LAYOUTTEMPLATE:"LAYOUTTEMPLATE",LINESYMBOL:"LINESYMBOL",MAPTEMPLATE:"MAPTEMPLATE",MARKERSYMBOL:"MARKERSYMBOL",MBTILES:"MBTILES",PHOTOS:"PHOTOS",SHP:"SHP",SMTILES:"SMTILES",SVTILES:"SVTILES",THEMETEMPLATE:"THEMETEMPLATE",TPK:"TPK",UDB:"UDB",UGCV5:"UGCV5",UNKNOWN:"UNKNOWN",VIDEO:"VIDEO",WORKENVIRONMENT:"WORKENVIRONMENT",WORKSPACE:"WORKSPACE"},eF.DataItemOrderBy={FILENAME:"FILENAME",ID:"ID",LASTMODIFIEDTIME:"LASTMODIFIEDTIME",NICKNAME:"NICKNAME",SERVICESTATUS:"SERVICESTATUS",SIZE:"SIZE",STATUS:"STATUS",TYPE:"TYPE",UPDATETIME:"UPDATETIME",USERNAME:"USERNAME"},eF.FilterField={LINKPAGE:"LINKPAGE",MAPTITLE:"MAPTITLE",NICKNAME:"NICKNAME",RESTITLE:"RESTITLE",USERNAME:"USERNAME"},eF.OnlineServiceBase=uJ,eF.Feature=eF.Feature||{},eF.Feature.Theme=Mr,eF.Feature.Theme.Bar=iV,eF.Feature.Theme.Bar3D=hV,eF.Feature.Theme.Circle=kV,eF.Feature.Theme.Graph=KJ,eF.Feature.Theme.Line=MV,eF.Feature.Theme.Pie=GV,eF.Feature.Theme.Point=WV,eF.Feature.Theme.RankSymbol=gV,eF.Feature.Theme.Ring=tz,eF.Feature.Theme.ThemeVector=ls,eF.Feature.ShapeParameters=ei,eF.Feature.ShapeParameters.Circle=na,eF.Feature.ShapeParameters.Image=Qi,eF.Feature.ShapeParameters.Label=Vi,eF.Feature.ShapeParameters.Line=di,eF.Feature.ShapeParameters.Point=ui,eF.Feature.ShapeParameters.Polygon=Si,eF.Feature.ShapeParameters.Rectangle=Ti,eF.Feature.ShapeParameters.Sector=Ii,eF.Feature.ShapeFactory=ts,eF.LevelRenderer=Jo,eF.KeyServiceParameter=OJ,eF.SecurityManager=_h,eF.ServerInfo=_J,eF.TokenServiceParameter=xJ,eF.ThemeStyle=qJ,eF.CartoCSS=JJ,eF.ElasticSearch=CJ,eF.ArrayStatistic=NJ,eF.ColorsPickerUtil=MJ,eF.DataFormat=ke,eF.ServerType=je,eF.GeometryType=Ee,eF.QueryOption=Te,eF.JoinType={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"},eF.SpatialQueryMode=Ce,eF.SpatialRelationType={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"},eF.MeasureMode=Re,eF.Unit=Ae,eF.BufferRadiusUnit=Me,eF.EngineType={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"},eF.ThemeGraphTextFormat=Le,eF.ThemeGraphType=Ne,eF.GraphAxesTextDisplayMode=Ie,eF.GraduatedMode=De,eF.RangeMode=Fe,eF.ThemeType={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"},eF.ColorGradientType=Be,eF.TextAlignment=Ge,eF.FillGradientMode={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"},eF.AlongLineDirection=Ue,eF.LabelBackShape=Je,eF.LabelOverLengthMode=Ve,eF.DirectionType={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"},eF.OverlayOperationType=qe,eF.OutputType=He,eF.SideType={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"},eF.SupplyCenterType={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"},eF.TurnType={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"},eF.BufferEndType=ze,eF.SmoothMethod=We,eF.SurfaceAnalystMethod=Ye,eF.DataReturnMode=Xe,eF.EditType=Qe,eF.TransferTactic=Ze,eF.TransferPreference=Ke,eF.GridType={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"},eF.ColorSpaceType={CMYK:"CMYK",RGB:"RGB"},eF.LayerType={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"},eF.UGCLayerType={THEME:"THEME",VECTOR:"VECTOR",GRID:"GRID",IMAGE:"IMAGE"},eF.StatisticMode={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"},eF.PixelFormat={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"},eF.SearchMode={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"},eF.InterpolationAlgorithmType={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"},eF.VariogramMode=$e,eF.Exponent=tr,eF.ClientType=er,eF.ChartType={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"},eF.ClipAnalystMode=rr,eF.AnalystAreaUnit=nr,eF.AnalystSizeUnit=or,eF.StatisticAnalystMode=ir,eF.SummaryType=ar,eF.TopologyValidatorRule=sr,eF.BucketAggType=ur,eF.MetricsAggType=lr,eF.GetFeatureMode={BOUNDS:"BOUNDS",BUFFER:"BUFFER",ID:"ID",SPATIAL:"SPATIAL",SQL:"SQL"},eF.RasterFunctionType=cr,eF.ResourceType={MAP:"MAP",SERVICE:"SERVICE",SCENE:"SCENE",DATA:"DATA",INSIGHTS_WORKSPACE:"INSIGHTS_WORKSPACE",MAP_DASHBOARD:"MAP_DASHBOARD"},eF.OrderBy={UPDATETIME:"UPDATETIME",HEATLEVEL:"HEATLEVEL",RELEVANCE:"RELEVANCE"},eF.OrderType={ASC:"ASC",DESC:"DESC"},eF.SearchType={PUBLIC:"PUBLIC",MY_RES:"MY_RES",MYGROUP_RES:"MYGROUP_RES",MYDEPARTMENT_RES:"MYDEPARTMENT_RES",SHARETOME_RES:"SHARETOME_RES"},eF.AggregationTypes={TAG:"TAG",TYPE:"TYPE"},eF.PermissionType={SEARCH:"SEARCH",READ:"READ",READWRITE:"READWRITE",DELETE:"DELETE",DOWNLOAD:"DOWNLOAD"},eF.EntityType={DEPARTMENT:"DEPARTMENT",GROUP:"GROUP",IPORTALGROUP:"IPORTALGROUP",ROLE:"ROLE",USER:"USER"},eF.WebExportFormatType={PNG:"PNG",PDF:"PDF"},eF.WebScaleOrientationType={HORIZONTALLABELSBELOW:"HORIZONTALLABELSBELOW",HORIZONTALLABELSABOVE:"HORIZONTALLABELSABOVE",VERTICALLABELSLEFT:"VERTICALLABELSLEFT",VERTICALLABELSRIGHT:"VERTICALLABELSRIGHT"},eF.WebScaleType={LINE:"LINE",BAR:"BAR",BAR_SUB:"BAR_SUB"},eF.WebScaleUnit={METER:"METER",FOOT:"FOOT",DEGREES:"DEGREES"},eF.KnowledgeGraph=Pp,eF.BoundsType=fr,eF.CellSizeType=hr;var Eq=function(){try{return canvg}catch(t){return{}}}(),Tq=r.n(Eq),Cq=r(2057);function Rq(t){"@babel/helpers - typeof";return(Rq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Aq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Mq(t,e){return(Mq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Lq(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Nq(t);if(e){var o=Nq(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Rq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Nq(t){return(Nq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Iq=["559082264.0287178","279541132.0143589","139770566.0071794","69885283.00358972","34942641.50179486","17471320.75089743","8735660.375448715","4367830.1877224357","2183915.093862179","1091957.546931089","545978.7734655447","272989.7734655447","272989.3867327723","136494.6933663862","68247.34668319309","34123.67334159654","17061.83667079827","8530.918335399136","4265.459167699568","2132.729583849784"],Dq=["5.590822640287176E8","2.795411320143588E8","1.397705660071794E8","6.98852830035897E7","3.494264150179485E7","1.7471320750897426E7","8735660.375448713","4367830.187724357","2183915.0938621783","1091957.5469310891","545978.7734655446","272989.3867327723","136494.69336638614","68247.34668319307","34123.673341596535","17061.836670798268","8530.918335399134"],Fq=["GoogleCRS84Quad","GoogleMapsCompatible"],Bq=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mq(t,e)}(a,o().Evented);var e,r,n,i=Lq(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this)).mapId=t,e=e||{},r.server=e.server,r.credentialKey=e.credentialKey,r.credentialValue=e.credentialValue,r.withCredentials=e.withCredentials||!1,r.target=e.target||"map",r._canvgsV=[],r._createWebMap(),r.on("mapinitialized",function(){r.map.on("remove",function(){r._stopCanvg()})}),r}return e=a,(r=[{key:"resize",value:function(){this.map.resize()}},{key:"setMapId",value:function(t){this.mapId=t,this._createWebMap()}},{key:"setWebMapOptions",value:function(t){this.server=t.server,this._createWebMap()}},{key:"setMapOptions",value:function(t){var e=t.center,r=t.zoom,n=t.maxBounds,o=t.minZoom,i=t.maxZoom,a=t.isWorldCopy,s=t.bearing,u=t.pitch;e&&e.length&&this.map.setCenter(e),r&&this.map.setZoom(r),n&&this.map.setMaxBounds(n),o&&this.map.setMinZoom(o),i&&this.map.setMaxZoom(i),a&&this.map.setRenderWorldCopies(a),s&&this.map.setBearing(s),u&&this.map.setPitch(u)}},{key:"_createWebMap",value:function(){var t=this.server.split("");"/"!==t[t.length-1]&&(this.server+="/");var e=this.server+"web/maps/"+this.mapId+"/map";this.credentialValue&&this.credentialKey&&(e+="?"+this.credentialKey+"="+this.credentialValue);var r="getUrlResource.json?url=";if(this.excludePortalProxyUrl&&this.server.indexOf(r)>-1){var n=this.server.split(r);n.length>1&&(e=n[0]+r+this.server+"web/maps/"+this.mapId+"/map.json")}this._getMapInfo(e)}},{key:"_createMap",value:function(t){var e=[],r=t.layers;r&&r.length>0&&r.forEach(function(t){t.labelStyle&&e.push(t.labelStyle.fontFamily)},this),e.push("'supermapol-icons'");var n,i=e.join(","),a=t.center,s=t.level||0,u=0;if(t.minScale&&t.maxScale)u=this._transformScaleToZoom(t.minScale,o().CRS?o().CRS.get(this.baseProjection):"EPSG:3857");else{var l=this._getResolution(o().CRS?o().CRS.get(this.baseProjection).getExtent():[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892])/this._getResolution(t.extent);u=+Math.log(l)/Math.LN2.toFixed(2)}s+=u,n=a?this._unproject([a.x,a.y]):new(o().LngLat)(0,0),this.map=new(o().Map)({container:this.target,center:n,zoom:s,style:{version:8,sources:{},layers:[]},crs:this.baseProjection,localIdeographFontFamily:i||""}),this.fire("mapinitialized")}},{key:"_getMapInfo",value:function(t){var e=this,r=-1===t.indexOf(".json")?"".concat(t,".json"):t;Jl.get(r,null,{withCredentials:this.withCredentials}).then(function(t){return t.json()}).then(function(t){e.baseProjection=t.projection,e.mapParams={title:t.title,description:t.description};if(!(e.baseProjection in{"EPSG:4490":"EPSG:4490","EPSG:4214":"EPSG:4214","EPSG:4610":"EPSG:4610","EPSG:3857":"EPSG:3857","EPSG:4326":"EPSG:4326"}))throw Error(uz.i18n("msg_crsunsupport"));e._createMap(t,e.mapSetting);var r=t.layers;e.map.on("load",function(){e._addBaseMap(t),r&&0!==r.length?e._addLayers(r):e._sendMapToUser(0,0)})}).catch(function(t){e.fire("getmapfailed",{error:t})})}},{key:"_addBaseMap",value:function(t){this._createBaseLayer(t)}},{key:"_createBaseLayer",value:function(t){var e=t.baseLayer||t,r=e.layerType;(r.indexOf("TIANDITU_VEC")>-1||r.indexOf("TIANDITU_IMG")>-1||r.indexOf("TIANDITU_TER")>-1)&&(r=r.substr(0,12));var n;switch(r){case"TIANDITU_VEC":case"TIANDITU_IMG":case"TIANDITU_TER":this._createTiandituLayer(t);break;case"BING":this._createBingLayer(e.name);break;case"WMS":this._createWMSLayer(e);break;case"WMTS":this._createWMTSLayer(e);break;case"TILE":case"SUPERMAP_REST":this._createDynamicTiledLayer(e);break;case"CLOUD":case"CLOUD_BLACK":case"OSM":case"JAPAN_ORT":case"JAPAN_RELIEF":case"JAPAN_PALE":case"JAPAN_STD":case"GOOGLE_CN":case"GOOGLE":n={CLOUD:"http://t2.dituhui.com/FileService/image?map=quanguo&type=web&x={x}&y={y}&z={z}",CLOUD_BLACK:"http://t3.dituhui.com/MapService/getGdp?x={x}&y={y}&z={z}",OSM:"http://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",GOOGLE:"https://www.google.cn/maps/vt/pb=!1m4!1m3!1i{z}!2i{x}!3i{y}!2m3!1e0!2sm!3i380072576!3m8!2szh-CN!3scn!5e1105!12m4!1e68!2m2!1sset!2sRoadmap!4e0!5m1!1e0",GOOGLE_CN:"https://mt{0-3}.google.cn/vt/lyrs=m&hl=zh-CN&gl=cn&x={x}&y={y}&z={z}",JAPAN_STD:"https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png",JAPAN_PALE:"https://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png",JAPAN_RELIEF:"https://cyberjapandata.gsi.go.jp/xyz/relief/{z}/{x}/{y}.png",JAPAN_ORT:"https://cyberjapandata.gsi.go.jp/xyz/ort/{z}/{x}/{y}.jpg"}[r],this._createXYZLayer(e,n);break;case"MAPBOXSTYLE":this._createMapboxStyle(e)}}},{key:"_createMapboxStyle",value:function(t){var e,r=this,n=t.dataSource,o=void 0===n?{}:n,i=o.serverId,a=o.url;e=void 0!==i?"".concat(this.server,"web/datas/").concat(i,"/download"):a,Jl.get(e,null,{withCredentials:this.withCredentials,withoutFormatSuffix:!0,headers:{"Content-Type":"application/json;chartset=uft-8"}}).then(function(t){return t.json()}).then(function(t){r._matchStyleObject(t),r.map.setStyle(t)})}},{key:"_matchStyleObject",value:function(t){var e=t.sprite,r=t.glyphs;e&&"object"===Rq(e)&&(t.sprite=Object.values(e)[0]),r&&"object"===Rq(r)&&(t.glyphs=Object.values(r)[0])}},{key:"_createTiandituLayer",value:function(t){var e=this._getTiandituUrl(t),r=t.baseLayer.layerType,n=Boolean(t.baseLayer.labelLayerVisible),o=e.labelUrl,i=e.tiandituUrl;this._addBaselayer(i,"tianditu-layers-"+r),n&&this._addBaselayer(o,"tianditu-label-layers-"+r)}},{key:"_createWMTSLayer",value:function(t){var e=this,r=this._getWMTSUrl(t);this._filterWMTSIsMatched(t,function(n,o){n&&e._addBaselayer([r],"wmts-layers"+t.name,0,o)})}},{key:"_filterWMTSIsMatched",value:function(t,e){var r=this,n=!1,o=22,i=t.url;Jl.get(i,null,{withCredentials:!1,withoutFormatSuffix:!0}).then(function(t){return t.text()}).then(function(i){var a=new Cq.XMLParser({numberParseOptions:{hex:!1,leadingZeros:!1,eNotation:!1},alwaysCreateTextNode:!0,textNodeName:"_text"}).parse(i).Capabilities.Contents.TileMatrixSet;Array.isArray(a)||(a=[a]);for(var s=0;s<a.length;s++)if(a[s]["ows:Identifier"]&&a[s]["ows:Identifier"]._text+""===t.tileMatrixSet)if(Fq.indexOf(a[s].WellKnownScaleSet._text)>-1)n=!0;else{if(!a[s].WellKnownScaleSet||"Custom"!==a[s].WellKnownScaleSet._text)throw Error(uz.i18n("msg_tilematrixsetunsupport"));for(var u=[],l="EPSG:3857"===r.map.crs?Iq:Dq,c=0,f=l.length;c<f&&a[s].TileMatrix[c]&&l[c]===a[s].TileMatrix[c].ScaleDenominator._text+"";c++)u.push(l[c]);if(o=u.length-1,0===u.length)throw Error(uz.i18n("msg_tilematrixsetunsupport"));n=!0}e(n,o)}).catch(function(t){r.fire("getwmtsfailed",{error:t,map:r.map})})}},{key:"_createBingLayer",value:function(t){this.addLayer(["https://dynamic.t0.tiles.ditu.live.com/comp/ch/{quadkey}?it=G,TW,L,LA&mkt=zh-cn&og=109&cstl=w4c&ur=CN&n=z"],"bing-layers-"+t)}},{key:"_createXYZLayer",value:function(t,e){var r=[];if("OSM"===t.layerType){for(var n=e.match(/\w\-\w/g)[0],o=n[0],i=n[2],a="",s=97;s<123;s++)a+=String.fromCharCode(s);for(var u=a.split(""),l=u.indexOf(o),c=u.indexOf(i),f=u.slice(l,c+1),h=0;h<f.length;h++){var p=e.replace(/{\w\-\w}/g,f[h]);r.push(p)}}else if("GOOGLE_CN"===t.layerType)for(var y=e.match(/\d\-\d/g)[0],d=y[0],b=y[2],v=d;v<=b;v++){var m=e.replace(/{\d\-\d}/g,v);r.push(m)}else r=[e];this._addBaselayer(r,"XYZ-layers-"+t.name)}},{key:"_createDynamicTiledLayer",value:function(t){var e=t.url,r=t.layerID||t.name,n=t.minzoom,o=t.maxzoom;this._addBaselayer([e],r,n,o,!0)}},{key:"_createWMSLayer",value:function(t){var e=this._getWMSUrl(t);this._addBaselayer([e],"WMS-layers-"+t.name)}},{key:"_createVectorLayer",value:function(t,e){var r=t.style,n=t.featureType,o=t.layerID,i=t.visible,a={};a.style=this._transformStyleToMapBoxGl(r,n),a.layout={visibility:i};var s={type:"geojson",data:{type:"FeatureCollection",features:e}};this._addOverlayToMap(n,s,o,a),"POLYGON"===n&&r.strokeColor&&this._addStrokeLineForPoly(r,s,o+"-strokeLine",i)}},{key:"_getTiandituUrl",value:function(t){for(var e=/t0/gi,r={},n=t.baseLayer.layerType.split("_")[1].toLowerCase(),o=Boolean(t.baseLayer.labelLayerVisible),i="https://t0.tianditu.gov.cn/{layer}_{proj}/wmts?",a=i,s="EPSG:4326"===this.baseProjection?"c":"w",u={service:"WMTS",request:"GetTile",style:"default",version:"1.0.0",layer:n,tilematrixSet:s,format:"tiles",width:256,height:256},l=(i+=this._getParamString(u,i)+"&tilematrix={z}&tilerow={y}&tilecol={x}").replace("{layer}",n).replace("{proj}",s),c=[],f=0;f<8;f++)c.push(l.replace(e,"t".concat(f)));if(r.tiandituUrl=c,o){var h={vec:"cva",ter:"cta",img:"cia"}[n];u.layer=h,a=(a+=this._getParamString(u,a)+"&tilematrix={z}&tilerow={y}&tilecol={x}").replace("{layer}",h).replace("{proj}",s);for(var p=[],y=0;y<8;y++)p.push(a.replace(e,"t".concat(y)));r.labelUrl=p}return r}},{key:"_getWMSUrl",value:function(t){var e=t.url,r=(e=e.split("?")[0]).split("/"),n={service:"WMS",request:"GetMap",layers:r[r.length-1],styles:"",format:"image/png",transparent:"true",version:"1.1.1",width:256,height:256,srs:this.baseProjection},o="EPSG:4326"===this.baseProjection?"{bbox-epsg-4326}":"{bbox-epsg-3857}";return e+=this._getParamString(n,e)+"&bbox=".concat(o)}},{key:"_addLayers",value:function(t){var e=this;this.layers=t;var r,n=0,o=t.length;t.forEach(function(t,i){if(t.dataSource&&t.dataSource.serverId||"MARKER"===t.layerType){var a=t.dataSource?t.dataSource.serverId:t.serverId,s="".concat(e.server,"web/datas/").concat(a,"/content.json?pageSize=9999999&currentPage=1");a&&Jl.get(s,null,{withCredentials:e.withCredentials}).then(function(t){return t.json()}).then(function(a){if(!1===a.succeed)return n++,e._sendMapToUser(n,o),void e.fire("getlayersfailed",{error:a.error,map:e.map});a.type&&("JSON"===a.type||"GEOJSON"===a.type?(a.content=JSON.parse(a.content.trim()),r=e._formatGeoJSON(a.content,t)):"EXCEL"!==a.type&&"CSV"!==a.type||(r=e._excelData2Feature(a.content,t)),e._addLayer(t,r,i),n++,e._sendMapToUser(n,o))}).catch(function(t){n++,e._sendMapToUser(n,o),e.fire("getlayersfailed",{error:t,map:e.map})})}else if("SUPERMAP_REST"===t.layerType||"TILE"===t.layerType||"WMS"===t.layerType||"WMTS"===t.layerType)e._createBaseLayer(t),n++,e._sendMapToUser(n,o);else if(t.dataSource&&"REST_DATA"===t.dataSource.type){var u=t.dataSource;e._getFeatureBySQL(u.url,[u.dataSourseName||t.name],function(a){r=e._parseGeoJsonData2Feature({allDatas:{features:a.result.features.features},fileCode:t.projection,featureProjection:e.baseProjection}),e._addLayer(t,r,i),n++,e._sendMapToUser(n,o)},function(t){n++,e._sendMapToUser(n,o),e.fire("getfeaturesfailed",{error:t})})}else t.dataSource&&"REST_MAP"===t.dataSource.type&&t.dataSource.url&&e._queryFeatureBySQL(t.dataSource.url,t.dataSource.layerName,"smid=1",null,null,function(r){var a=r&&r.result.recordsets,s=a&&a[0],u=s.fields;if(s&&u){var l=[];for(var c in u){var f=u[c];0===f.indexOf("Sm")&&"SmID"!==f||l.push(f)}e._getFeatures(l,t,function(r){e._addLayer(t,r,i),n++,e._sendMapToUser(n,o)},function(t){n++,e.fire("getfeaturesfailed",{error:t,map:e.map})})}},function(t){e.fire("getlayersfailed",{error:t,map:e.map})})},this)}},{key:"_getFeatures",value:function(t,e,r,n){var o=this,i=e.dataSource,a=e.projection;this._queryFeatureBySQL(i.url,i.layerName,null,t,null,function(t){var e=t.result.recordsets[0].features.features,n=o._parseGeoJsonData2Feature({allDatas:{features:e},fileCode:a,featureProjection:o.baseProjection},"JSON");r(n)},function(t){n(t)})}},{key:"_addLayer",value:function(t,e,r){var n=t.layerType;t.layerID=n+"-"+t.name+"-"+r,t.visible=t.visible?"visible":"none",e[0]&&"Polygon"===e[0].geometry.type&&(e=this._handleMultyPolygon(e)),t.style&&t.filterCondition&&"RANGE"!==n&&"UNIQUE"!==n&&(e=this._getFiterFeatures(t.filterCondition,e)),"VECTOR"===n?"POINT"===t.featureType?"SYMBOL_POINT"===t.style.type?this._createSymbolLayer(t,e):this._createGraphicLayer(t,e):this._createVectorLayer(t,e):"UNIQUE"===n?this._createUniqueLayer(t,e):"RANGE"===n?this._createRangeLayer(t,e):"HEAT"===n?this._createHeatLayer(t,e):"MARKER"===n&&this._createMarkerLayer(t,e),t.labelStyle&&t.labelStyle.labelField&&this._addLabelLayer(t,e)}},{key:"_addLabelLayer",value:function(t,e){var r=t.labelStyle;this.map.addLayer({id:t.layerID+"label",type:"symbol",source:{type:"geojson",data:{type:"FeatureCollection",features:e}},paint:{"text-color":r.fill},layout:{"text-field":"{".concat(r.labelField,"}"),"text-size":parseFloat(r.fontSize)||12,"text-offset":r.offsetX?[r.offsetX/10||0,r.offsetY/10||0]:[0,-1.5],"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],visibility:t.visible}})}},{key:"_createSymbolLayer",value:function(t,e){document.getElementById("".concat(this.target)).classList.add("supermapol-icons-map");var r=t.style,n=t.style.unicode,o=String.fromCharCode(parseInt(n.replace(/^&#x/,""),16)),i=t.layerID;this.map.addSource(i+"-source",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:i,type:"symbol",source:i+"-source",paint:{"text-color":r.fillColor},layout:{"text-field":o,"text-font":["DIN Offc Pro Italic","Arial Unicode MS Regular"],visibility:t.visible}}),this.map.getSource(i+"-source").setData({type:"FeatureCollection",features:e})}},{key:"_createGraphicLayer",value:function(t,e){var r=this,n=t.style,o={},i=t.layerID,a={type:"geojson",data:{type:"FeatureCollection",features:e}};if("IMAGE_POINT"===n.type){var s=n.imageInfo,u=s.img;u&&u.src||(s.url=this.server+s.url),this.map.loadImage(s.url||u.src,function(e,o){e&&console.log(e);var s=2*Number.parseFloat((n.radius/o.height).toFixed(2));r.map.addImage("imageIcon",o),r.map.addLayer({id:i,type:"symbol",source:a,layout:{"icon-image":"imageIcon","icon-size":s,visibility:t.visible}})})}else if("SVG_POINT"===n.type){var l=n.url;this.svgDiv||(this.svgDiv=document.createElement("div"),document.body.appendChild(this.svgDiv)),this._getCanvasFromSVG(l,this.svgDiv,function(e){var o=e.toDataURL("img/png");o&&r.map.loadImage(o,function(o,s){o&&console.log(o);var u=Number.parseFloat((n.radius/e.width).toFixed(2));r.map.addImage("imageIcon",s),r.map.addLayer({id:i,type:"symbol",source:a,layout:{"icon-image":"imageIcon","icon-size":u,visibility:t.visible}})},r)})}else o.style=this._transformStyleToMapBoxGl(n,t.featureType),o.layout={visibility:t.visible},this._addOverlayToMap("POINT",a,i,o)}},{key:"_createUniqueLayer",value:function(t,e){var r=this._getUniqueStyleGroup(t,e);e=this._getFiterFeatures(t.filterCondition,e);var n=t.style,o={},i=t.themeSetting.themeField,a=t.featureType,s=["match",["get","index"]],u=t.layerID;e.forEach(function(t){r.forEach(function(e){e.value===t.properties[i]&&s.push(t.properties.index,e.color)})}),s.push("#ffffff"),o.style=this._transformStyleToMapBoxGl(n,a,s);var l=t.visible;o.layout={visibility:l};var c={type:"geojson",data:{type:"FeatureCollection",features:e}};this._addOverlayToMap(a,c,u,o),"POLYGON"===a&&n.strokeColor&&this._addStrokeLineForPoly(n,c,u+"-strokeLine",l)}},{key:"_getUniqueStyleGroup",value:function(t,e){var r=t.featureType,n=t.style,o=t.themeSetting,i=o.themeField,a=o.colors,s=[],u=o.customSettings;for(var l in e){var c=e[l].properties[i],f=!1;for(var h in s)if(s[h]===c){f=!0;break}f||s.push(c)}var p=a||this.defaultParameters.colors;p=MJ.getGradientColors(p,s.length);var y=[];return s.forEach(function(t,e){var o=p[e];t in u&&(o=u[t]),"LINE"===r?n.strokeColor=o:n.fillColor=o,y.push({color:o,value:t})},this),y}},{key:"_getWMTSUrl",value:function(t){var e={service:"WMTS",request:"GetTile",version:"1.0.0",style:"default",layer:t.layer,tilematrixSet:t.tileMatrixSet,format:"image/png"},r=t.url;return r+=this._getParamString(e,r)+"&tilematrix={z}&tilerow={y}&tilecol={x}"}},{key:"_createMarkerLayer",value:function(t,e){var r=this;e&&e.forEach(function(e){var n=e.geometry.type.toUpperCase(),o=e.dv_v5_markerStyle;"POINT"===n&&o.text&&(n="TEXT");var i=r.setFeatureInfo(e);e.properties.useStyle=o,e.properties.featureInfo=i,"POINT"===n&&o.src&&-1===o.src.indexOf("http://")&&-1===o.src.indexOf("https://")&&(o.src=r.server+o.src);var a={type:"geojson",data:e},s=e.properties.index,u=n+"-"+s;if("POINT"===n&&o.src&&o.src.indexOf("svg")<=-1&&r.map.loadImage(o.src,function(e,n){e&&console.log(e),r.map.addImage(s+"",n),r.map.addLayer({id:u,type:"symbol",source:a,layout:{"icon-image":s+"","icon-size":o.scale,visibility:t.visible}})},r),"POINT"===n&&o.src&&o.src.indexOf("svg")>-1&&(r.svgDiv||(r.svgDiv=document.createElement("div"),document.body.appendChild(r.svgDiv)),r._getCanvasFromSVG(o.src,r.svgDiv,function(e){var n=e.toDataURL("img/png");n&&r.map.loadImage(n,function(e,n){e&&console.log(e),r.map.addImage(s+"",n),r.map.addLayer({id:u,type:"symbol",source:a,layout:{"icon-image":s+"","icon-size":o.scale,visibility:t.visible}})},r)})),!o.src){var l={layout:{}};"LINESTRING"===n&&o.lineCap&&(n="LINE",l.layout={"line-cap":o.lineCap});var c=t.visible;l.layout.visibility=c,l.style=r._transformStyleToMapBoxGl(o,n),r._addOverlayToMap(n,a,u,l),"POLYGON"===n&&o.strokeColor&&r._addStrokeLineForPoly(o,a,u+"-strokeLine",c)}},this)}},{key:"setFeatureInfo",value:function(t){var e,r=t.dv_v5_markerInfo;if(!r||!r.dataViz_title)return r;e=r;var n=t.properties;for(var o in e)n[o]&&(e[o]=n[o],delete n[o]);return e}},{key:"_createHeatLayer",value:function(t,e){var r=t.themeSetting,n={};n.gradient=r.colors.slice(),n.radius=parseInt(r.radius);var o=r.customSettings;for(var i in o)n.gradient[i]=o[i];r.weight&&this._changeWeight(e,r.weight);var a=["interpolate",["linear"],["heatmap-density"]],s=(1/n.gradient.length).toFixed(2);n.gradient.forEach(function(t,e){a.push(e*s),0===e&&(t=Pr.hexToRgba(t,0)),a.push(t)});var u={"heatmap-color":a,"heatmap-radius":r.radius+15,"heatmap-intensity":{base:1,stops:[[0,.8],[22,1]]}};if(e[0].weight&&e.length>=4){var l=[];e.forEach(function(t){l.push(t.weight)});var c=NJ.getMax(l),f=NJ.getMin(l);u["heatmap-weight"]=["interpolate",["linear"],["get","weight"],f,0,c,1]}this.map.addLayer({id:t.layerID,type:"heatmap",source:{type:"geojson",data:{type:"FeatureCollection",features:e}},paint:u})}},{key:"_changeWeight",value:function(t,e){this.fieldMaxValue={},this._getMaxValue(t,e);var r=this.fieldMaxValue[e];t.forEach(function(t){var n=t.properties[e];t.weight=n/r})}},{key:"_getMaxValue",value:function(t,e){var r,n=[],o=e;this.fieldMaxValue[o]||(t.forEach(function(t){(r=t.properties)&&parseFloat(r[o])&&n.push(parseFloat(r[o]))}),this.fieldMaxValue[o]=NJ.getArrayStatistic(n,"Maximum"))}},{key:"_createRangeLayer",value:function(t,e){var r=t.themeSetting.themeField,n=t.style,o=t.featureType,i=this._getRangeStyleGroup(t,e),a={type:"geojson",data:{type:"FeatureCollection",features:e=this._getFiterFeatures(t.filterCondition,e)}},s=["match",["get","index"]];e.forEach(function(t){for(var e=parseFloat(t.properties[r]),n=0;n<i.length;n++)i[n].start<=e&&e<i[n].end&&s.push(t.properties.index,i[n].color);!e&&s.push(t.properties.index,"rgba(0, 0, 0, 0)")},this),s.push("rgba(0, 0, 0, 0)");var u={layout:{}};"LINE"===o&&n.lineCap&&(u.layout={"line-cap":n.lineCap});var l=t.visible;u.layout.visibility=l,u.style=this._transformStyleToMapBoxGl(n,o,s);var c=t.layerID;this._addOverlayToMap(o,a,c,u),"POLYGON"===o&&n.strokeColor&&this._addStrokeLineForPoly(n,a,c+"-strokeline",l)}},{key:"_getFiterFeatures",value:function(t,e){if(!t)return e;for(var r=this._replaceFilterCharacter(t),n=[],o=0;o<e.length;o++){var i=e[o],a=!1;try{var s=i.properties,u=xq(r,Object.keys(s)),l=kq(s),c="select * from json where ("+u+")";a=window.jsonsql.query(c,{attr:l})}catch(t){continue}a&&a.length>0&&n.push(i)}return n}},{key:"_replaceFilterCharacter",value:function(t){return t=t.replace(/=/g,"==").replace(/AND|and/g,"&&").replace(/or|OR/g,"||").replace(/<==/g,"<=").replace(/>==/g,">=")}},{key:"_getRangeStyleGroup",value:function(t,e){var r,n=t.featureType,o=t.style,i=[],a=t.themeSetting,s=a.customSettings,u=a.themeField,l=a.segmentCount;e.forEach(function(t){(r=t.properties||t.get("Properties"))?r[u]&&Pr.isNumber(r[u])&&i.push(parseFloat(r[u])):t.get(u)&&Pr.isNumber(t.get(u))&&t.get(u)&&i.push(parseFloat(t.get(u)))},this);var c=NJ.getArraySegments(i,a.segmentMethod,l);if(c){var f=l;for(var h in r&&c[0]===c[r.length-1]&&(f=1,c.length=2),c){var p=c[h];p=0==h?Math.floor(100*p)/100:Math.ceil(100*p)/100+.1,c[h]=Number(p.toFixed(2))}for(var y=a.colors,d=0;d<f;d++)d in s&&(s[d].segment.start&&(c[d]=s[d].segment.start),s[d].segment.end&&(c[d+1]=s[d].segment.end));for(var b=[],v=0;v<f;v++){var m=y[v];v in s&&s[v].color&&(m=s[v].color),"LINE"===n?o.strokeColor=m:o.fillColor=m;var g=c[v],w=c[v+1],O=JSON.parse(JSON.stringify(o));b.push({style:O,color:m,start:g,end:w})}return b}}},{key:"_formatGeoJSON",value:function(t){var e=t.features;return e.forEach(function(t,e){t.properties.index=e}),e}},{key:"_excelData2Feature",value:function(t){for(var e=t.colTitles,r=-1,n=-1,o=0,i=e.length;o<i;o++)this._isXField(e[o])&&(r=o),this._isYField(e[o])&&(n=o);for(var a=[],s=0,u=t.rows.length;s<u;s++){var l=t.rows[s],c=Number(l[r]),f=Number(l[n]),h={};for(var p in t.colTitles){h[t.colTitles[p]]=t.rows[s][p]}h.index=s+"";var y={type:"Feature",geometry:{type:"Point",coordinates:[c,f]},properties:h};a.push(y)}return a}},{key:"_sendMapToUser",value:function(t,e){t===e&&this.fire("addlayerssucceeded",{map:this.map,mapparams:this.mapParams,layers:this.layers})}},{key:"_unproject",value:function(t){for(var e,r=180/Math.PI,n=6378137,i=Math.exp(-t[1]/n),a=Math.PI/2-2*Math.atan(i),s=0,u=.1;s<15&&Math.abs(u)>1e-7;s++)e=1,a+=u=Math.PI/2-2*Math.atan(i*e)-a;return new(o().LngLat)(t[0]*r/n,a*r)}},{key:"_getParamString",value:function(t,e,r){var n=[];for(var o in t)n.push((r?o.toUpperCase():o)+"="+t[o]);return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")}},{key:"_isXField",value:function(t){var e=t.toLowerCase();return"x"===e||"smx"===e||"jd"===e||"经度"===e||"东经"===e||"longitude"===e||"lot"===e||"lon"===e||"lng"===e}},{key:"_isYField",value:function(t){var e=t.toLowerCase();return"y"===e||"smy"===e||"wd"===e||"纬度"===e||"北纬"===e||"latitude"===e||"lat"===e}},{key:"_transformStyleToMapBoxGl",value:function(t,e,r){var n={};"POINT"!==t.type&&"BASIC_POINT"!==t.type&&"POINT"!==e||"LINE"===e?"LINE"===e?n={strokeWidth:"line-width",strokeColor:"line-color",strokeOpacity:"line-opacity"}:"POLYGON"===e&&(n={fillColor:"fill-color",fillOpacity:"fill-opacity",strokeColor:"fill-outline-color"}):n={fillColor:"circle-color",strokeWidth:"circle-stroke-width",fillOpacity:"circle-opacity",radius:"circle-radius",strokeColor:"circle-stroke-color",strokeOpacity:"circle-stroke-opacity"};var o={};for(var i in t)n[i]&&(o[n[i]]=t[i]);return r&&(o["circle-color"]?o["circle-color"]=r:o["line-color"]?o["line-color"]=r:o["fill-color"]=r),t.lineDash&&"solid"!==t.lineDash&&"LINE"===e&&(o["line-dasharray"]=this._dashStyle(t)),o}},{key:"_dashStyle",value:function(t){if(!t)return[];var e=t.strokeDashstyle||t.lineDash;switch(e){case"solid":return[];case"dot":return[1,4];case"dash":return[4,4];case"dashdot":return[4,4,1,4];case"longdash":return[8,4];case"longdashdot":return[8,4,1,4];default:return e?C.isArray(e)?e:(e=p.trim(e).replace(/\s+/g,",")).replace(/\[|\]/gi,"").split(","):[]}}},{key:"_getCanvasFromSVG",value:function(t,e,r){var n=this,o=document.createElement("canvas");o.id="dataviz-canvas-"+Pr.newGuid(8),o.style.display="none",e.appendChild(o);var i=window.canvg&&window.canvg.default?window.canvg.default:Tq(),a=o.getContext("2d");i.from(a,t,{ignoreMouse:!0,ignoreAnimation:!0,forceRedraw:function(){return!1}}).then(function(t){t.start(),n._canvgsV.push(t),o.width>300||o.height>300||r(o)})}},{key:"_stopCanvg",value:function(){this._canvgsV.forEach(function(t){return t.stop()}),this._canvgsV=[]}},{key:"_addOverlayToMap",value:function(t,e,r,n){"circle"!==(t={POINT:"circle",LINE:"line",POLYGON:"fill"}[t])&&"line"!==t&&"fill"!==t||this.map.addLayer({id:r,type:t,source:e,paint:n.style,layout:n.layout||{}})}},{key:"_addBaselayer",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:22,o=arguments.length>4?arguments[4]:void 0;this.map.addLayer({id:e,type:"raster",source:{type:"raster",tiles:t,tileSize:256,rasterSource:o?"iserver":"",prjCoordSys:o?{epsgCode:this.baseProjection.split(":")[1]}:""},minzoom:r,maxzoom:n})}},{key:"_addStrokeLineForPoly",value:function(t,e,r,n){var o={};o.style=this._transformStyleToMapBoxGl(t,"LINE"),o.layout={visibility:n},this._addOverlayToMap("LINE",e,r,o)}},{key:"_parseGeoJsonData2Feature",value:function(t){for(var e=t.allDatas.features,r=[],n=0,o=e.length;n<o;n++){var i=e[n],a=i.geometry.coordinates;"Point"===e[n].geometry.type&&e[n].properties&&(e[n].properties.lon=a[0],e[n].properties.lat=a[1]),i.properties.index=n+"",r.push(i)}return r}},{key:"_getFeatureBySQL",value:function(t,e,r,n){var o,i;o=new kb({name:e.join().replace(":","@"),attributeFilter:"SMID > 0"}),i=new Zb({queryParameter:o,datasetNames:e,fromIndex:0,toIndex:1e5,returnContent:!0}),new ov(t).processAsync(i,function(t){"processCompleted"===t.type?r(t):n(t)})}},{key:"_queryFeatureBySQL",value:function(t,e,r,n,o,i,a,s,u,l){var c,f;c=new kb({name:e,attributeFilter:r}),n&&(c.fields=n);var h={queryParams:[c]};l&&(h.queryOption=Te.ATTRIBUTE),s&&(h.startRecord=s),u&&(h.expectCount=u),o&&(h.prjCoordSys={epsgCode:o}),f=new XT(h),new xC(t).queryBySQL(f,function(t){"processCompleted"===t.type?i(t):a(t)})}},{key:"_handleMultyPolygon",value:function(t){return t.forEach(function(t){if("Polygon"===t.geometry.type){var e=t.geometry.coordinates;if(e.length>1){var r=[];e.forEach(function(t){r.push([t])}),t.geometry.coordinates=r,t.geometry.type="MultiPolygon"}}}),t}},{key:"_transformScaleToZoom",value:function(t,e){var r=295829515.2024169;"EPSG:3857"!==(e||this.map.getCRS()).epsgCode&&(r=295295895);var n=t.split(":")[1];return Math.min(24,+Math.log2(r/+n).toFixed(2))}},{key:"_getResolution",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512;return t.leftBottom&&t.rightTop?Math.max(t.rightTop.x-t.leftBottom.x,t.rightTop.y-t.leftBottom.y)/e:Math.max(t[2]-t[0],t[3]-t[1])/e}}])&&Aq(e.prototype,r),n&&Aq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function Gq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Uq=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.MapService=e,this.url=r,this.options=n,this.CLASS_NAME="SuperMap.InitMapServiceBase"}var e,r,n;return e=t,(r=[{key:"createMapService",value:function(){var t=this.MapService,e=this.url,r=this.options;return new t(e,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers,projection:r.projection})}},{key:"getMapInfo",value:function(t){var e=this;return new Promise(function(r,n){e.createMapService().getMapInfo(function(e){t(e,r,n)})})}},{key:"getWKT",value:function(){var t=this;return new Promise(function(e,r){t.createMapService().getWKT(function(t){try{var n=t.result.data;e(n)}catch(t){r(t)}})})}}])&&Gq(e.prototype,r),n&&Gq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Jq(t){return"PCS_NON_EARTH"===t}function Vq(t,e){var r=t.scale,n=t.dpi,o=t.coordUnit,i=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:22,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,n=[],o=Math.abs(t.left-t.right)/r,i=0;i<e;i++)n.push(o/Math.pow(2,i));return n.sort(function(t,e){return e-t})}(e);return function(t,e){for(var r,n=0,o=0;o<e.length;o++)0===o&&(r=Math.abs(t-e[o])),r>Math.abs(t-e[o])&&(r=Math.abs(t-e[o]),n=o);return n}(Bs(r,n,o),i)}var zq=1,qq=2,Hq=3,Wq=4,Yq=5,Xq=6378137,Qq=6356752.314,Zq=.0066943799901413165,Kq=484813681109536e-20,$q=Math.PI/2,tH=.16666666666666666,eH=.04722222222222222,rH=.022156084656084655,nH=1e-10,oH=.017453292519943295,iH=57.29577951308232,aH=Math.PI/4,sH=2*Math.PI,uH=3.14159265359,lH={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},cH={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},fH=/[\s_\-\/\(\)]/g;function hH(t,e){if(t[e])return t[e];for(var r,n=Object.keys(t),o=e.toLowerCase().replace(fH,""),i=-1;++i<n.length;)if((r=n[i]).toLowerCase().replace(fH,"")===o)return t[r]}function pH(t){var e,r,n,o={},i=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var r=e.split("=");return r.push(!0),t[r[0].toLowerCase()]=r[1],t},{}),a={proj:"projName",datum:"datumCode",rf:function(t){o.rf=parseFloat(t)},lat_0:function(t){o.lat0=t*oH},lat_1:function(t){o.lat1=t*oH},lat_2:function(t){o.lat2=t*oH},lat_ts:function(t){o.lat_ts=t*oH},lon_0:function(t){o.long0=t*oH},lon_1:function(t){o.long1=t*oH},lon_2:function(t){o.long2=t*oH},alpha:function(t){o.alpha=parseFloat(t)*oH},gamma:function(t){o.rectified_grid_angle=parseFloat(t)},lonc:function(t){o.longc=t*oH},x_0:function(t){o.x0=parseFloat(t)},y_0:function(t){o.y0=parseFloat(t)},k_0:function(t){o.k0=parseFloat(t)},k:function(t){o.k0=parseFloat(t)},a:function(t){o.a=parseFloat(t)},b:function(t){o.b=parseFloat(t)},r_a:function(){o.R_A=!0},zone:function(t){o.zone=parseInt(t,10)},south:function(){o.utmSouth=!0},towgs84:function(t){o.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){o.to_meter=parseFloat(t)},units:function(t){o.units=t;var e=hH(cH,t);e&&(o.to_meter=e.to_meter)},from_greenwich:function(t){o.from_greenwich=t*oH},pm:function(t){var e=hH(lH,t);o.from_greenwich=(e||parseFloat(t))*oH},nadgrids:function(t){"@null"===t?o.datumCode="none":o.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(o.axis=t)},approx:function(){o.approx=!0}};for(e in i)r=i[e],e in a?"function"==typeof(n=a[e])?n(r):o[n]=r:o[e]=r;return"string"==typeof o.datumCode&&"WGS84"!==o.datumCode&&(o.datumCode=o.datumCode.toLowerCase()),o}var yH=function(t){return new OH(t).output()},dH=1,bH=/\s/,vH=/[A-Za-z]/,mH=/[A-Za-z84_]/,gH=/[,\]]/,wH=/[\d\.E\-\+]/;function OH(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=dH}function SH(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var n=e?{}:t,o=r.reduce(function(t,e){return _H(e,t),t},n);e&&(t[e]=o)}function _H(t,e){if(Array.isArray(t)){var r=t.shift();if("PARAMETER"===r&&(r=t.shift()),1===t.length)return Array.isArray(t[0])?(e[r]={},void _H(t[0],e[r])):void(e[r]=t[0]);if(t.length)if("TOWGS84"!==r){if("AXIS"===r)return r in e||(e[r]=[]),void e[r].push(t);var n;switch(Array.isArray(r)||(e[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[r]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&_H(t[2],e[r]));case"SPHEROID":case"ELLIPSOID":return e[r]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&_H(t[3],e[r]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void SH(e,r,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return _H(t,e[r]);return SH(e,r,t)}}else e[r]=t;else e[r]=!0}else e[t]=!0}function PH(t){"@babel/helpers - typeof";return(PH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}OH.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;bH.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case dH:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},OH.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(gH.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},OH.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=dH)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=dH,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},OH.prototype.number=function(t){if(!wH.test(t)){if(gH.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},OH.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},OH.prototype.keyword=function(t){if(mH.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=dH)}if(!gH.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},OH.prototype.neutral=function(t){if(vH.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(wH.test(t))return this.word=t,void(this.state=3);if(!gH.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},OH.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var xH=.017453292519943295;function kH(t){return t*xH}function jH(t){var e=yH(t),r=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",r]);var o={};return _H(e,o),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"===PH(t.PROJECTION)?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",r=0,n=t.AXIS.length;r<n;++r){var o=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];-1!==o[0].indexOf("north")||("y"===o[0]||"lat"===o[0])&&"north"===o[1]?e+="n":-1!==o[0].indexOf("south")||("y"===o[0]||"lat"===o[0])&&"south"===o[1]?e+="s":-1!==o[0].indexOf("east")||("x"===o[0]||"lon"===o[0])&&"east"===o[1]?e+="e":-1===o[0].indexOf("west")&&("x"!==o[0]&&"lon"!==o[0]||"west"!==o[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var i=t.GEOGCS;function a(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(i=t),i&&(i.DATUM?t.datumCode=i.DATUM.name.toLowerCase():t.datumCode=i.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),i.DATUM&&i.DATUM.SPHEROID&&(t.ellps=i.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=i.DATUM.SPHEROID.a,t.rf=parseFloat(i.DATUM.SPHEROID.rf,10)),i.DATUM&&i.DATUM.TOWGS84&&(t.datum_params=i.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",kH],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",kH],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",kH],["lat0","latitude_of_origin",kH],["lat0","standard_parallel_1",kH],["lat1","standard_parallel_1",kH],["lat2","standard_parallel_2",kH],["azimuth","Azimuth"],["alpha","azimuth",kH],["srsCode","name"]].forEach(function(e){return r=t,o=(n=e)[0],i=n[1],void(!(o in r)&&i in r&&(r[o]=r[i],3===n.length&&(r[o]=n[2](r[o]))));var r,n,o,i}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=kH(t.lat0>0?90:-90)):(t.lat0=kH(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(o),o}function EH(t){var e=this;if(2===arguments.length){var r=arguments[1];"string"==typeof r?"+"===r.charAt(0)?EH[t]=pH(arguments[1]):EH[t]=jH(arguments[1]):EH[t]=r}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?EH.apply(e,t):EH(t)});if("string"==typeof t){if(t in EH)return EH[t]}else"EPSG"in t?EH["EPSG:"+t.EPSG]=t:"ESRI"in t?EH["ESRI:"+t.ESRI]=t:"IAU2000"in t?EH["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(EH);var TH=EH;var CH=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var RH=["3857","900913","3785","102113"];var AH=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in TH}(t))return TH[t];if(function(t){return CH.some(function(e){return t.indexOf(e)>-1})}(t)){var e=jH(t);if(function(t){var e=hH(t,"authority");if(e){var r=hH(e,"epsg");return r&&RH.indexOf(r)>-1}}(e))return TH["EPSG:3857"];var r=function(t){var e=hH(t,"extension");if(e)return hH(e,"proj4")}(e);return r?pH(r):e}return function(t){return"+"===t[0]}(t)?pH(t):void 0};function MH(t,e){var r,n;if(t=t||{},!e)return t;for(n in e)void 0!==(r=e[n])&&(t[n]=r);return t}function LH(t,e,r){var n=t*e;return r/Math.sqrt(1-n*n)}function NH(t){return t<0?-1:1}function IH(t){return Math.abs(t)<=uH?t:t-NH(t)*sH}function DH(t,e,r){var n=t*r,o=.5*t;return n=Math.pow((1-n)/(1+n),o),Math.tan(.5*($q-e))/n}function FH(t,e){for(var r,n,o=.5*t,i=$q-2*Math.atan(e),a=0;a<=15;a++)if(r=t*Math.sin(i),i+=n=$q-2*Math.atan(e*Math.pow((1-r)/(1+r),o))-i,Math.abs(n)<=1e-10)return i;return-9999}function BH(t){return t}var GH=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=LH(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,r,n=t.x,o=t.y;if(o*iH>90&&o*iH<-90&&n*iH>180&&n*iH<-180)return null;if(Math.abs(Math.abs(o)-$q)<=nH)return null;if(this.sphere)e=this.x0+this.a*this.k0*IH(n-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(aH+.5*o));else{var i=Math.sin(o),a=DH(this.e,o,i);e=this.x0+this.a*this.k0*IH(n-this.long0),r=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n=t.x-this.x0,o=t.y-this.y0;if(this.sphere)r=$q-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var i=Math.exp(-o/(this.a*this.k0));if(-9999===(r=FH(this.e,i)))return null}return e=IH(this.long0+n/(this.a*this.k0)),t.x=e,t.y=r,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:BH,inverse:BH,names:["longlat","identity"]}],UH={},JH=[];function VH(t,e){var r=JH.length;return t.names?(JH[r]=t,t.names.forEach(function(t){UH[t.toLowerCase()]=r}),this):(console.log(e),!0)}var zH={start:function(){GH.forEach(VH)},add:VH,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==UH[e]&&JH[UH[e]]?JH[UH[e]]:void 0}},qH={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},HH=qH.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};qH.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var WH={};WH.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},WH.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},WH.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},WH.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},WH.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},WH.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},WH.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},WH.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},WH.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},WH.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},WH.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},WH.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},WH.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},WH.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},WH.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},WH.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},WH.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var YH=function(t,e,r,n,o,i,a){var s={};return s.datum_type=void 0===t||"none"===t?Yq:Wq,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=zq),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=qq,s.datum_params[3]*=Kq,s.datum_params[4]*=Kq,s.datum_params[5]*=Kq,s.datum_params[6]=s.datum_params[6]/1e6+1))),a&&(s.datum_type=Hq,s.grids=a),s.a=r,s.b=n,s.es=o,s.ep2=i,s},XH={};function QH(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:XH[t]||null,isNull:!1}}function ZH(t){return t/3600*Math.PI/180}function KH(t,e,r){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,r)))}function $H(t){return t.map(function(t){return[ZH(t.longitudeShift),ZH(t.latitudeShift)]})}function tW(t,e,r){return{name:KH(t,e+8,e+16).trim(),parent:KH(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,r),upperLatitude:t.getFloat64(e+88,r),lowerLongitude:t.getFloat64(e+104,r),upperLongitude:t.getFloat64(e+120,r),latitudeInterval:t.getFloat64(e+136,r),longitudeInterval:t.getFloat64(e+152,r),gridNodeCount:t.getInt32(e+168,r)}}function eW(t,e,r,n){for(var o=e+176,i=[],a=0;a<r.gridNodeCount;a++){var s={latitudeShift:t.getFloat32(o+16*a,n),longitudeShift:t.getFloat32(o+16*a+4,n),latitudeAccuracy:t.getFloat32(o+16*a+8,n),longitudeAccuracy:t.getFloat32(o+16*a+12,n)};i.push(s)}return i}function rW(t,e){if(!(this instanceof rW))return new rW(t);e=e||function(t){if(t)throw t};var r=AH(t);if("object"==typeof r){var n=rW.projections.get(r.projName);if(n){if(r.datumCode&&"none"!==r.datumCode){var o=hH(WH,r.datumCode);o&&(r.datum_params=r.datum_params||(o.towgs84?o.towgs84.split(","):null),r.ellps=o.ellipse,r.datumName=o.datumName?o.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var i,a,s,u,l,c,f,h=function(t,e,r,n,o){if(!t){var i=hH(qH,n);i||(i=HH),t=i.a,e=i.b,r=i.rf}return r&&!e&&(e=(1-1/r)*t),(0===r||Math.abs(t-e)<nH)&&(o=!0,e=t),{a:t,b:e,rf:r,sphere:o}}(r.a,r.b,r.rf,r.ellps,r.sphere),p=(i=h.a,a=h.b,h.rf,s=r.R_A,c=((u=i*i)-(l=a*a))/u,f=0,s?(u=(i*=1-c*(tH+c*(eH+c*rH)))*i,c=0):f=Math.sqrt(c),{es:c,e:f,ep2:(u-l)/l}),y=function(t){return void 0===t?null:t.split(",").map(QH)}(r.nadgrids),d=r.datum||YH(r.datumCode,r.datum_params,h.a,h.b,p.es,p.ep2,y);MH(this,r),MH(this,n),this.a=h.a,this.b=h.b,this.rf=h.rf,this.sphere=h.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=d,this.init(),e(null,this)}else e(t)}else e(t)}rW.projections=zH,rW.projections.start();var nW=rW;function oW(t,e,r){var n,o,i,a,s=t.x,u=t.y,l=t.z?t.z:0;if(u<-$q&&u>-1.001*$q)u=-$q;else if(u>$q&&u<1.001*$q)u=$q;else{if(u<-$q)return{x:-1/0,y:-1/0,z:t.z};if(u>$q)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),o=Math.sin(u),a=Math.cos(u),i=o*o,{x:((n=r/Math.sqrt(1-e*i))+l)*a*Math.cos(s),y:(n+l)*a*Math.sin(s),z:(n*(1-e)+l)*o}}function iW(t,e,r,n){var o,i,a,s,u,l,c,f,h,p,y,d,b,v,m,g=t.x,w=t.y,O=t.z?t.z:0;if(o=Math.sqrt(g*g+w*w),i=Math.sqrt(g*g+w*w+O*O),o/r<1e-12){if(v=0,i/r<1e-12)return $q,m=-n,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(w,g);a=O/i,f=(s=o/i)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*s*s)),h=a*u,b=0;do{b++,l=e*(c=r/Math.sqrt(1-e*h*h))/(c+(m=o*f+O*h-c*(1-e*h*h))),d=(y=a*(u=1/Math.sqrt(1-l*(2-l)*s*s)))*f-(p=s*(1-l)*u)*h,f=p,h=y}while(d*d>1e-24&&b<30);return{x:v,y:Math.atan(y/Math.abs(p)),z:m}}function aW(t){return t===zq||t===qq}function sW(t,e,r){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===zq?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==qq||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return r;if(t.datum_type===Yq||e.datum_type===Yq)return r;var n=t.a,o=t.es;if(t.datum_type===Hq){if(0!==uW(t,!1,r))return;n=Xq,o=Zq}var i=e.a,a=e.b,s=e.es;if(e.datum_type===Hq&&(i=Xq,a=Qq,s=Zq),o===s&&n===i&&!aW(t.datum_type)&&!aW(e.datum_type))return r;if((r=oW(r,o,n),aW(t.datum_type)&&(r=function(t,e,r){if(e===zq)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(e===qq){var n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],u=r[5],l=r[6];return{x:l*(t.x-u*t.y+s*t.z)+n,y:l*(u*t.x+t.y-a*t.z)+o,z:l*(-s*t.x+a*t.y+t.z)+i}}}(r,t.datum_type,t.datum_params)),aW(e.datum_type)&&(r=function(t,e,r){if(e===zq)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(e===qq){var n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],u=r[5],l=r[6],c=(t.x-n)/l,f=(t.y-o)/l,h=(t.z-i)/l;return{x:c+u*f-s*h,y:-u*c+f+a*h,z:s*c-a*f+h}}}(r,e.datum_type,e.datum_params)),r=iW(r,s,i,a),e.datum_type===Hq)&&0!==uW(e,!0,r))return;return r}function uW(t,e,r){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var n={x:-r.x,y:r.y},o={x:Number.NaN,y:Number.NaN},i=[],a=0;a<t.grids.length;a++){var s=t.grids[a];if(i.push(s.name),s.isNull){o=n;break}if(s.mandatory,null!==s.grid){var u=s.grid.subgrids[0],l=(Math.abs(u.del[1])+Math.abs(u.del[0]))/1e4,c=u.ll[0]-l,f=u.ll[1]-l,h=u.ll[0]+(u.lim[0]-1)*u.del[0]+l,p=u.ll[1]+(u.lim[1]-1)*u.del[1]+l;if(!(f>n.y||c>n.x||p<n.y||h<n.x||(o=lW(n,e,u),isNaN(o.x))))break}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*iH+" "+n.y*iH+" tried: '"+i+"'"),-1):(r.x=-o.x,r.y=o.y,0)}function lW(t,e,r){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var o={x:t.x,y:t.y};o.x-=r.ll[0],o.y-=r.ll[1],o.x=IH(o.x-Math.PI)+Math.PI;var i=cW(o,r);if(e){if(isNaN(i.x))return n;i.x=o.x-i.x,i.y=o.y-i.y;var a,s,u=9;do{if(s=cW(i,r),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a={x:o.x-(s.x+i.x),y:o.y-(s.y+i.y)},i.x+=a.x,i.y+=a.y}while(u--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(u<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=IH(i.x+r.ll[0]),n.y=i.y+r.ll[1]}else isNaN(i.x)||(n.x=t.x+i.x,n.y=t.y+i.y);return n}function cW(t,e){var r,n={x:t.x/e.del[0],y:t.y/e.del[1]},o=Math.floor(n.x),i=Math.floor(n.y),a=n.x-1*o,s=n.y-1*i,u={x:Number.NaN,y:Number.NaN};if(o<0||o>=e.lim[0])return u;if(i<0||i>=e.lim[1])return u;r=i*e.lim[0]+o;var l=e.cvs[r][0],c=e.cvs[r][1];r++;var f=e.cvs[r][0],h=e.cvs[r][1];r+=e.lim[0];var p=e.cvs[r][0],y=e.cvs[r][1];r--;var d=e.cvs[r][0],b=e.cvs[r][1],v=a*s,m=a*(1-s),g=(1-a)*(1-s),w=(1-a)*s;return u.x=g*l+m*f+w*d+v*p,u.y=g*c+m*h+w*b+v*y,u}function fW(t,e,r){var n,o,i,a=r.x,s=r.y,u=r.z||0,l={};for(i=0;i<3;i++)if(!e||2!==i||void 0!==r.z)switch(0===i?(n=a,o=-1!=="ew".indexOf(t.axis[i])?"x":"y"):1===i?(n=s,o=-1!=="ns".indexOf(t.axis[i])?"y":"x"):(n=u,o="z"),t.axis[i]){case"e":l[o]=n;break;case"w":l[o]=-n;break;case"n":l[o]=n;break;case"s":l[o]=-n;break;case"u":void 0!==r[o]&&(l.z=n);break;case"d":void 0!==r[o]&&(l.z=-n);break;default:return null}return l}function hW(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function pW(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function yW(t,e,r,n){var o,i=void 0!==(r=Array.isArray(r)?hW(r):{x:r.x,y:r.y,z:r.z,m:r.m}).z;if(function(t){pW(t.x),pW(t.y)}(r),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===zq||t.datum.datum_type===qq||t.datum.datum_type===Hq)&&"WGS84"!==e.datumCode||(e.datum.datum_type===zq||e.datum.datum_type===qq||e.datum.datum_type===Hq)&&"WGS84"!==t.datumCode}(t,e)&&(r=yW(t,o=new nW("WGS84"),r,n),t=o),n&&"enu"!==t.axis&&(r=fW(t,!1,r)),"longlat"===t.projName)r={x:r.x*oH,y:r.y*oH,z:r.z||0};else if(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter,z:r.z||0}),!(r=t.inverse(r)))return;if(t.from_greenwich&&(r.x+=t.from_greenwich),r=sW(t.datum,e.datum,r))return e.from_greenwich&&(r={x:r.x-e.from_greenwich,y:r.y,z:r.z||0}),"longlat"===e.projName?r={x:r.x*iH,y:r.y*iH,z:r.z||0}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter,z:r.z||0})),n&&"enu"!==e.axis?fW(e,!0,r):(i||delete r.z,r)}var dW=nW("WGS84");function bW(t,e,r,n){var o,i,a;return Array.isArray(r)?(o=yW(t,e,r,n)||{x:NaN,y:NaN},r.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof o.z?[o.x,o.y,o.z].concat(r.splice(3)):[o.x,o.y,r[2]].concat(r.splice(3)):[o.x,o.y].concat(r.splice(2)):[o.x,o.y]):(i=yW(t,e,r,n),2===(a=Object.keys(r)).length?i:(a.forEach(function(n){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;i[n]=r[n]}),i))}function vW(t){return t instanceof nW?t:t.oProj?t.oProj:nW(t)}var mW=function(t,e,r){t=vW(t);var n,o=!1;return void 0===e?(e=t,t=dW,o=!0):(void 0!==e.x||Array.isArray(e))&&(r=e,e=t,t=dW,o=!0),e=vW(e),r?bW(t,e,r):(n={forward:function(r,n){return bW(t,e,r,n)},inverse:function(r,n){return bW(e,t,r,n)}},o&&(n.oProj=e),n)},gW=6,wW="AJSAJS",OW="AFAFAF",SW=65,_W=73,PW=79,xW=86,kW=90,jW={forward:EW,inverse:function(t){var e=AW(LW(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:TW};function EW(t,e){return e=e||5,function(t,e){var r="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(p=t.easting,y=t.northing,d=t.zoneNumber,b=MW(d),v=Math.floor(p/1e5),m=Math.floor(y/1e5)%20,o=v,i=m,a=b,s=a-1,u=wW.charCodeAt(s),l=OW.charCodeAt(s),c=u+o-1,f=l+i,h=!1,c>kW&&(c=c-kW+SW-1,h=!0),(c===_W||u<_W&&c>_W||(c>_W||u<_W)&&h)&&c++,(c===PW||u<PW&&c>PW||(c>PW||u<PW)&&h)&&++c===_W&&c++,c>kW&&(c=c-kW+SW-1),f>xW?(f=f-xW+SW-1,h=!0):h=!1,(f===_W||l<_W&&f>_W||(f>_W||l<_W)&&h)&&f++,(f===PW||l<PW&&f>PW||(f>PW||l<PW)&&h)&&++f===_W&&f++,f>xW&&(f=f-xW+SW-1),String.fromCharCode(c)+String.fromCharCode(f))+r.substr(r.length-5,e)+n.substr(n.length-5,e);var o,i,a,s,u,l,c,f,h;var p,y,d,b,v,m}(function(t){var e,r,n,o,i,a,s,u=t.lat,l=t.lon,c=6378137,f=CW(u),h=CW(l);s=Math.floor((l+180)/6)+1,180===l&&(s=60);u>=56&&u<64&&l>=3&&l<12&&(s=32);u>=72&&u<84&&(l>=0&&l<9?s=31:l>=9&&l<21?s=33:l>=21&&l<33?s=35:l>=33&&l<42&&(s=37));a=CW(6*(s-1)-180+3),.006739496752268451,e=c/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),r=Math.tan(f)*Math.tan(f),n=.006739496752268451*Math.cos(f)*Math.cos(f),o=Math.cos(f)*(h-a),i=c*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-3.418046101696858e-9*Math.sin(6*f));var p=.9996*e*(o+(1-r+n)*o*o*o/6+(5-18*r+r*r+72*n-.39089081163157013)*o*o*o*o*o/120)+5e5,y=.9996*(i+e*Math.tan(f)*(o*o/2+(5-r+9*n+4*n*n)*o*o*o*o/24+(61-58*r+r*r+600*n-2.2240339282485886)*o*o*o*o*o*o/720));u<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(p),zoneNumber:s,zoneLetter:function(t){var e="Z";84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C");return e}(u)}}({lat:t[1],lon:t[0]}),e)}function TW(t){var e=AW(LW(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function CW(t){return t*(Math.PI/180)}function RW(t){return t/Math.PI*180}function AW(t){var e=t.northing,r=t.easting,n=t.zoneLetter,o=t.zoneNumber;if(o<0||o>60)return null;var i,a,s,u,l,c,f,h,p=6378137,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),d=r-5e5,b=e;n<"N"&&(b-=1e7),c=6*(o-1)-180+3,h=(f=b/.9996/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*f)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*f)+151*y*y*y/96*Math.sin(6*f),i=p/Math.sqrt(1-.00669438*Math.sin(h)*Math.sin(h)),a=Math.tan(h)*Math.tan(h),s=.006739496752268451*Math.cos(h)*Math.cos(h),u=.99330562*p/Math.pow(1-.00669438*Math.sin(h)*Math.sin(h),1.5),l=d/(.9996*i);var v=h-i*Math.tan(h)/u*(l*l/2-(5+3*a+10*s-4*s*s-.06065547077041606)*l*l*l*l/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*l*l*l*l*l*l/720);v=RW(v);var m,g=(l-(1+2*a+s)*l*l*l/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*l*l*l*l*l/120)/Math.cos(h);if(g=c+RW(g),t.accuracy){var w=AW({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});m={top:w.lat,right:w.lon,bottom:v,left:g}}else m={lat:v,lon:g};return m}function MW(t){var e=t%gW;return 0===e&&(e=gW),e}function LW(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,r=t.length,n=null,o="",i=0;!/[A-Z]/.test(e=t.charAt(i));){if(i>=2)throw"MGRSPoint bad conversion from: "+t;o+=e,i++}var a=parseInt(o,10);if(0===i||i+3>r)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(i++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;n=t.substring(i,i+=2);for(var u=MW(a),l=function(t,e){var r=wW.charCodeAt(e-1),n=1e5,o=!1;for(;r!==t.charCodeAt(0);){if(++r===_W&&r++,r===PW&&r++,r>kW){if(o)throw"Bad character: "+t;r=SW,o=!0}n+=1e5}return n}(n.charAt(0),u),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var r=OW.charCodeAt(e-1),n=0,o=!1;for(;r!==t.charCodeAt(0);){if(++r===_W&&r++,r===PW&&r++,r>xW){if(o)throw"Bad character: "+t;r=SW,o=!0}n+=1e5}return n}(n.charAt(1),u);c<NW(s);)c+=2e6;var f=r-i;if(f%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var h,p,y,d=f/2,b=0,v=0;return d>0&&(h=1e5/Math.pow(10,d),p=t.substring(i,i+d),b=parseFloat(p)*h,y=t.substring(i+d),v=parseFloat(y)*h),{easting:b+l,northing:v+c,zoneLetter:s,zoneNumber:a,accuracy:h}}function NW(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function IW(t,e,r){if(!(this instanceof IW))return new IW(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}IW.fromMGRS=function(t){return new IW(TW(t))},IW.prototype.toMGRS=function(t){return EW([this.x,this.y],t)};var DW=IW,FW=1,BW=.25,GW=.046875,UW=.01953125,JW=.01068115234375,VW=.75,zW=.46875,qW=.013020833333333334,HW=.007120768229166667,WW=.3645833333333333,YW=.005696614583333333,XW=.3076171875;function QW(t){var e=[];e[0]=FW-t*(BW+t*(GW+t*(UW+t*JW))),e[1]=t*(VW-t*(GW+t*(UW+t*JW)));var r=t*t;return e[2]=r*(zW-t*(qW+t*HW)),r*=t,e[3]=r*(WW-t*YW),e[4]=r*t*XW,e}function ZW(t,e,r,n){return r*=e,e*=e,n[0]*t-r*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}var KW=20;function $W(t,e,r){for(var n=1/(1-e),o=t,i=KW;i;--i){var a=Math.sin(o),s=1-e*a*a;if(o-=s=(ZW(o,a,Math.cos(o),r)-t)*(s*Math.sqrt(s))*n,Math.abs(s)<nH)return o}return o}var tY={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=QW(this.es),this.ml0=ZW(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,r,n,o=t.x,i=t.y,a=IH(o-this.long0),s=Math.sin(i),u=Math.cos(i);if(this.es){var l=u*a,c=Math.pow(l,2),f=this.ep2*Math.pow(u,2),h=Math.pow(f,2),p=Math.abs(u)>nH?Math.tan(i):0,y=Math.pow(p,2),d=Math.pow(y,2);e=1-this.es*Math.pow(s,2),l/=Math.sqrt(e);var b=ZW(i,s,u,this.en);r=this.a*(this.k0*l*(1+c/6*(1-y+f+c/20*(5-18*y+d+14*f-58*y*f+c/42*(61+179*d-d*y-479*y)))))+this.x0,n=this.a*(this.k0*(b-this.ml0+s*a*l/2*(1+c/12*(5-y+9*f+4*h+c/30*(61+d-58*y+270*f-330*y*f+c/56*(1385+543*d-d*y-3111*y))))))+this.y0}else{var v=u*Math.sin(a);if(Math.abs(Math.abs(v)-1)<nH)return 93;if(r=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,n=u*Math.cos(a)/Math.sqrt(1-Math.pow(v,2)),(v=Math.abs(n))>=1){if(v-1>nH)return 93;n=0}else n=Math.acos(n);i<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=r,t.y=n,t},inverse:function(t){var e,r,n,o,i=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(r=$W(e=this.ml0+a/this.k0,this.es,this.en),Math.abs(r)<$q){var s=Math.sin(r),u=Math.cos(r),l=Math.abs(u)>nH?Math.tan(r):0,c=this.ep2*Math.pow(u,2),f=Math.pow(c,2),h=Math.pow(l,2),p=Math.pow(h,2);e=1-this.es*Math.pow(s,2);var y=i*Math.sqrt(e)/this.k0,d=Math.pow(y,2);n=r-(e*=l)*d/(1-this.es)*.5*(1-d/12*(5+3*h-9*c*h+c-4*f-d/30*(61+90*h-252*c*h+45*p+46*c-d/56*(1385+3633*h+4095*p+1574*p*h)))),o=IH(this.long0+y*(1-d/6*(1+2*h+c-d/20*(5+28*h+24*p+8*c*h+6*c-d/42*(61+662*h+1320*p+720*p*h))))/u)}else n=$q*NH(a),o=0;else{var b=Math.exp(i/this.k0),v=.5*(b-1/b),m=this.lat0+a/this.k0,g=Math.cos(m);e=Math.sqrt((1-Math.pow(g,2))/(1+Math.pow(v,2))),n=Math.asin(e),a<0&&(n=-n),o=0===v&&0===g?0:IH(Math.atan2(v,g)+this.long0)}return t.x=o,t.y=n,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function eY(t){var e=Math.exp(t);return e=(e-1/e)/2}function rY(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),n=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))}function nY(t){var e=Math.abs(t);return e=function(t){var e=1+t,r=e-1;return 0===r?t:t*Math.log(e)/r}(e*(1+e/(rY(1,e)+1))),t<0?-e:e}function oY(t,e){for(var r,n=2*Math.cos(2*e),o=t.length-1,i=t[o],a=0;--o>=0;)r=n*i-a+t[o],a=i,i=r;return e+r*Math.sin(2*e)}function iY(t,e,r){for(var n,o,i=Math.sin(e),a=Math.cos(e),s=eY(r),u=function(t){var e=Math.exp(t);return e=(e+1/e)/2}(r),l=2*a*u,c=-2*i*s,f=t.length-1,h=t[f],p=0,y=0,d=0;--f>=0;)n=y,o=p,h=l*(y=h)-n-c*(p=d)+t[f],d=c*y-o+l*p;return[(l=i*u)*h-(c=a*s)*d,l*d+c*h]}var aY={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tY.init.apply(this),this.forward=tY.forward,this.inverse=tY.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),r*=e,this.cgb[1]=r*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),r*=e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),r*=e,this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(e*(-24832/14175)-2.4)),r*=e,this.cgb[4]=r*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),r*=e,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(.25+r*(1/64+r/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),r*=e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),r*=e,this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),r*=e,this.utg[4]=r*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),r*=e,this.utg[5]=-.03233083094085698*r,this.gtu[5]=.6650675310896665*r;var n=oY(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(t,e){for(var r,n=2*Math.cos(e),o=t.length-1,i=t[o],a=0;--o>=0;)r=n*i-a+t[o],a=i,i=r;return Math.sin(e)*r}(this.gtu,2*n))},forward:function(t){var e=IH(t.x-this.long0),r=t.y;r=oY(this.cbg,r);var n=Math.sin(r),o=Math.cos(r),i=Math.sin(e),a=Math.cos(e);r=Math.atan2(n,a*o),e=Math.atan2(i*o,rY(n,o*a)),e=nY(Math.tan(e));var s,u,l=iY(this.gtu,2*r,2*e);return r+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*r+this.Zb)+this.y0):(s=1/0,u=1/0),t.x=s,t.y=u,t},inverse:function(t){var e,r,n=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(o=(o-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var i=iY(this.utg,2*o,2*n);o+=i[0],n+=i[1],n=Math.atan(eY(n));var a=Math.sin(o),s=Math.cos(o),u=Math.sin(n),l=Math.cos(n);o=Math.atan2(a*l,rY(u,l*s)),e=IH((n=Math.atan2(u,l*s))+this.long0),r=oY(this.cgb,o)}else e=1/0,r=1/0;return t.x=e,t.y=r,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]};var sY={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(IH(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*oH,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,aY.init.apply(this),this.forward=aY.forward,this.inverse=aY.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function uY(t,e){return Math.pow((1-t)/(1+t),e)}var lY=20;var cY={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+aH)/(Math.pow(Math.tan(.5*this.lat0+aH),this.C)*uY(this.e*t,this.ratexp))},forward:function(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+aH),this.C)*uY(this.e*Math.sin(r),this.ratexp))-$q,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,r=t.y,n=Math.pow(Math.tan(.5*r+aH)/this.K,1/this.C),o=lY;o>0&&(r=2*Math.atan(n*uY(this.e*Math.sin(t.y),-.5*this.e))-$q,!(Math.abs(r-t.y)<1e-14));--o)t.y=r;return o?(t.x=e,t.y=r,t):null},names:["gauss"]};var fY={init:function(){cY.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,r,n,o;return t.x=IH(t.x-this.long0),cY.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),n=Math.cos(t.x),o=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*n),t.x=o*r*Math.sin(t.x),t.y=o*(this.cosc0*e-this.sinc0*r*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,r,n,o,i;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,i=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(i,this.R2);e=Math.sin(a),r=Math.cos(a),o=Math.asin(r*this.sinc0+t.y*e*this.cosc0/i),n=Math.atan2(t.x*e,i*this.cosc0*r-t.y*this.sinc0*e)}else o=this.phic0,n=0;return t.x=n,t.y=o,cY.inverse.apply(this,[t]),t.x=IH(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var hY={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=nH&&(this.k0=.5*(1+NH(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=nH&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=nH&&(this.k0=.5*this.cons*LH(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/DH(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=LH(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-$q,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,r,n,o,i,a,s=t.x,u=t.y,l=Math.sin(u),c=Math.cos(u),f=IH(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=nH&&Math.abs(u+this.lat0)<=nH?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*c*Math.cos(f)),t.x=this.a*e*c*Math.sin(f)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*c*Math.cos(f))+this.y0,t):(r=2*Math.atan(this.ssfn_(u,l,this.e))-$q,o=Math.cos(r),n=Math.sin(r),Math.abs(this.coslat0)<=nH?(i=DH(this.e,u*this.con,this.con*l),a=2*this.a*this.k0*i/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<nH?(e=2*this.a*this.k0/(1+o*Math.cos(f)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*o*Math.cos(f))),t.y=e*(this.cosX0*n-this.sinX0*o*Math.cos(f))+this.y0),t.x=e*o*Math.sin(f)+this.x0,t))},inverse:function(t){var e,r,n,o,i;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,r=this.lat0,a<=nH?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<nH?this.lat0>0?IH(this.long0+Math.atan2(t.x,-1*t.y)):IH(this.long0+Math.atan2(t.x,t.y)):IH(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=r,t)}if(Math.abs(this.coslat0)<=nH){if(a<=nH)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,n=a*this.cons/(2*this.a*this.k0),r=this.con*FH(this.e,n),e=this.con*IH(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else o=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=nH?i=this.X0:(i=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/a),e=IH(this.long0+Math.atan2(t.x*Math.sin(o),a*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)))),r=-1*FH(this.e,Math.tan(.5*($q+i)));return t.x=e,t.y=r,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,r){return e*=r,Math.tan(.5*($q+t))*Math.pow((1-e)/(1+e),.5*r)}};var pY={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,n=1/this.rf,o=2*n-Math.pow(n,2),i=this.e=Math.sqrt(o);this.R=this.k0*r*Math.sqrt(1-o)/(1-o*Math.pow(e,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+i*e)/(1-i*e));this.K=a-this.alpha*s+this.alpha*i/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+r)+this.K,o=2*(Math.atan(Math.exp(n))-Math.PI/4),i=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(i)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(i))),s=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(i));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,r=t.y-this.y0,n=e/this.R,o=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),i=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(o))),s=this.lambda0+a/this.alpha,u=0,l=i,c=-1e3,f=0;Math.abs(l-c)>1e-7;){if(++f>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+i/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=s,t.y=l,t},names:["somerc"]},yY=1e-7;var dY={init:function(){var t,e,r,n,o,i,a,s,u,l,c,f,h,p=0,y=0,d=0,b=0,v=0,m=0,g=0;this.no_off=(h="object"==typeof(f=this).PROJECTION?Object.keys(f.PROJECTION)[0]:f.PROJECTION,"no_uoff"in f||"no_off"in f||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(h)),this.no_rot="no_rot"in this;var w=!1;"alpha"in this&&(w=!0);var O=!1;if("rectified_grid_angle"in this&&(O=!0),w&&(g=this.alpha),O&&(p=this.rectified_grid_angle*oH),w||O)y=this.longc;else if(d=this.long1,v=this.lat1,b=this.long2,m=this.lat2,Math.abs(v-m)<=yY||(t=Math.abs(v))<=yY||Math.abs(t-$q)<=yY||Math.abs(Math.abs(this.lat0)-$q)<=yY||Math.abs(Math.abs(m)-$q)<=yY)throw new Error;var S=1-this.es;e=Math.sqrt(S),Math.abs(this.lat0)>nH?(s=Math.sin(this.lat0),r=Math.cos(this.lat0),t=1-this.es*s*s,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/S),this.A=this.B*this.k0*e/t,(o=(n=this.B*e/(r*Math.sqrt(t)))*n-1)<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=n,this.E*=Math.pow(DH(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=o=1),w||O?(w?(c=Math.asin(Math.sin(g)/n),O||(p=g)):(c=p,g=Math.asin(n*Math.sin(c))),this.lam0=y-Math.asin(.5*(o-1/o)*Math.tan(c))/this.B):(i=Math.pow(DH(this.e,v,Math.sin(v)),this.B),a=Math.pow(DH(this.e,m,Math.sin(m)),this.B),o=this.E/i,u=(a-i)/(a+i),l=((l=this.E*this.E)-a*i)/(l+a*i),(t=d-b)<-Math.pi?b-=sH:t>Math.pi&&(b+=sH),this.lam0=IH(.5*(d+b)-Math.atan(l*Math.tan(.5*this.B*(d-b))/u)/this.B),c=Math.atan(2*Math.sin(this.B*IH(d-this.lam0))/(o-1/o)),p=g=Math.asin(n*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(p),this.cosrot=Math.cos(p),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(g))),this.lat0<0&&(this.u_0=-this.u_0)),o=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(aH-o)),this.v_pole_s=this.ArB*Math.log(Math.tan(aH+o))},forward:function(t){var e,r,n,o,i,a,s,u,l={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-$q)>nH){if(e=.5*((i=this.E/Math.pow(DH(this.e,t.y,Math.sin(t.y)),this.B))-(a=1/i)),r=.5*(i+a),o=Math.sin(this.B*t.x),n=(e*this.singam-o*this.cosgam)/r,Math.abs(Math.abs(n)-1)<nH)throw new Error;u=.5*this.ArB*Math.log((1-n)/(1+n)),a=Math.cos(this.B*t.x),s=Math.abs(a)<yY?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+o*this.singam,a)}else u=t.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*t.y;return this.no_rot?(l.x=s,l.y=u):(s-=this.u_0,l.x=u*this.cosrot+s*this.sinrot,l.y=s*this.cosrot-u*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function(t){var e,r,n,o,i,a,s,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(r=t.y,e=t.x):(r=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),o=.5*((n=Math.exp(-this.BrA*r))-1/n),i=.5*(n+1/n),s=((a=Math.sin(this.BrA*e))*this.cosgam+o*this.singam)/i,Math.abs(Math.abs(s)-1)<nH)u.x=0,u.y=s<0?-$q:$q;else{if(u.y=this.E/Math.sqrt((1+s)/(1-s)),u.y=FH(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(o*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var bY={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<nH)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),n=LH(this.e,e,r),o=DH(this.e,this.lat1,e),i=Math.sin(this.lat2),a=Math.cos(this.lat2),s=LH(this.e,i,a),u=DH(this.e,this.lat2,i),l=DH(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>nH?this.ns=Math.log(n/s)/Math.log(o/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=nH&&(r=NH(r)*($q-2*nH));var n,o,i=Math.abs(Math.abs(r)-$q);if(i>nH)n=DH(this.e,r,Math.sin(r)),o=this.a*this.f0*Math.pow(n,this.ns);else{if((i=r*this.ns)<=0)return null;o=0}var a=this.ns*IH(e-this.long0);return t.x=this.k0*(o*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-o*Math.cos(a))+this.y0,t},inverse:function(t){var e,r,n,o,i,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),r=1):(e=-Math.sqrt(a*a+s*s),r=-1);var u=0;if(0!==e&&(u=Math.atan2(r*a,r*s)),0!==e||this.ns>0){if(r=1/this.ns,n=Math.pow(e/(this.a*this.f0),r),-9999===(o=FH(this.e,n)))return null}else o=-$q;return i=IH(u/this.ns+this.long0),t.x=i,t.y=o,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};var vY={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,r,n,o,i,a,s,u=t.x,l=t.y,c=IH(u-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),i=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(o)),a=this.n*i,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,r,n,o,i,a,s,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),i=Math.sqrt(t.x*t.x+t.y*t.y),o=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/i,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(o)),r=Math.asin(Math.cos(n)*Math.sin(o)/Math.cos(e)),t.x=this.long0-r/this.alfa,a=e,s=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,l+=1}while(0===s&&l<15);return l>=15?null:t},names:["Krovak","krovak"]};function mY(t,e,r,n,o){return t*o-e*Math.sin(2*o)+r*Math.sin(4*o)-n*Math.sin(6*o)}function gY(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function wY(t){return.375*t*(1+.25*t*(1+.46875*t))}function OY(t){return.05859375*t*t*(1+.75*t)}function SY(t){return t*t*t*(35/3072)}function _Y(t,e,r){var n=e*r;return t/Math.sqrt(1-n*n)}function PY(t){return Math.abs(t)<$q?t:t-NH(t)*Math.PI}function xY(t,e,r,n,o){var i,a;i=t/e;for(var s=0;s<15;s++)if(i+=a=(t-(e*i-r*Math.sin(2*i)+n*Math.sin(4*i)-o*Math.sin(6*i)))/(e-2*r*Math.cos(2*i)+4*n*Math.cos(4*i)-6*o*Math.cos(6*i)),Math.abs(a)<=1e-10)return i;return NaN}var kY={init:function(){this.sphere||(this.e0=gY(this.es),this.e1=wY(this.es),this.e2=OY(this.es),this.e3=SY(this.es),this.ml0=this.a*mY(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,r,n=t.x,o=t.y;if(n=IH(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(o)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(o),Math.cos(n))-this.lat0);else{var i=Math.sin(o),a=Math.cos(o),s=_Y(this.a,this.e,i),u=Math.tan(o)*Math.tan(o),l=n*Math.cos(o),c=l*l,f=this.es*a*a/(1-this.es);e=s*l*(1-c*u*(1/6-(8-u+8*f)*c/120)),r=this.a*mY(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*i/a*c*(.5+(5-u+6*f)*c/24)}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n=t.x/this.a,o=t.y/this.a;if(this.sphere){var i=o+this.lat0;e=Math.asin(Math.sin(i)*Math.cos(n)),r=Math.atan2(Math.tan(n),Math.cos(i))}else{var a=xY(this.ml0/this.a+o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-$q)<=nH)return t.x=this.long0,t.y=$q,o<0&&(t.y*=-1),t;var s=_Y(this.a,this.e,Math.sin(a)),u=s*s*s/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(a),2),c=n*this.a/s,f=c*c;e=a-s*Math.tan(a)/u*c*c*(.5-(1+3*l)*c*c/24),r=c*(1-f*(l/3+(1+3*l)*l*f/15))/Math.cos(a)}return t.x=IH(r+this.long0),t.y=PY(e),t},names:["Cassini","Cassini_Soldner","cass"]};function jY(t,e){var r;return t>1e-7?(1-t*t)*(e/(1-(r=t*e)*r)-.5/t*Math.log((1-r)/(1+r))):2*e}var EY=.3333333333333333,TY=.17222222222222222,CY=.10257936507936508,RY=.06388888888888888,AY=.0664021164021164,MY=.016415012942191543;var LY={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-$q)<nH?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<nH?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=jY(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,r=[];return r[0]=t*EY,e=t*t,r[0]+=e*TY,r[1]=e*RY,e*=t,r[0]+=e*CY,r[1]+=e*AY,r[2]=e*MY,r}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=jY(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,r,n,o,i,a,s,u,l,c,f=t.x,h=t.y;if(f=IH(f-this.long0),this.sphere){if(i=Math.sin(h),c=Math.cos(h),n=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((r=this.mode===this.EQUIT?1+c*n:1+this.sinph0*i+this.cosph0*c*n)<=nH)return null;e=(r=Math.sqrt(2/r))*c*Math.sin(f),r*=this.mode===this.EQUIT?i:this.cosph0*i-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(h+this.lat0)<nH)return null;r=aH-.5*h,e=(r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)))*Math.sin(f),r*=n}}else{switch(s=0,u=0,l=0,n=Math.cos(f),o=Math.sin(f),i=Math.sin(h),a=jY(this.e,i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,u=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:l=1+this.sinb1*s+this.cosb1*u*n;break;case this.EQUIT:l=1+u*n;break;case this.N_POLE:l=$q+h,a=this.qp-a;break;case this.S_POLE:l=h-$q,a=this.qp+a}if(Math.abs(l)<nH)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),r=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*s-this.sinb1*u*n):(l=Math.sqrt(2/(1+u*n)))*s*this.ymf,e=this.xmf*l*u*o;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(l=Math.sqrt(a))*o,r=n*(this.mode===this.S_POLE?l:-l)):e=r=0}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n,o,i,a,s,u,l,c,f=t.x/this.a,h=t.y/this.a;if(this.sphere){var p,y=0,d=0;if((r=.5*(p=Math.sqrt(f*f+h*h)))>1)return null;switch(r=2*Math.asin(r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(r),y=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(p)<=nH?0:Math.asin(h*d/p),f*=d,h=y*p;break;case this.OBLIQ:r=Math.abs(p)<=nH?this.lat0:Math.asin(y*this.sinph0+h*d*this.cosph0/p),f*=d*this.cosph0,h=(y-Math.sin(r)*this.sinph0)*p;break;case this.N_POLE:h=-h,r=$q-r;break;case this.S_POLE:r-=$q}e=0!==h||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(f,h):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(f/=this.dd,h*=this.dd,(a=Math.sqrt(f*f+h*h))<nH)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*a/this.rq),n=Math.cos(o),f*=o=Math.sin(o),this.mode===this.OBLIQ?(s=n*this.sinb1+h*o*this.cosb1/a,i=this.qp*s,h=a*this.cosb1*n-h*this.sinb1*o):(s=h*o/a,i=this.qp*s,h=a*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(h=-h),!(i=f*f+h*h))return t.x=this.long0,t.y=this.lat0,t;s=1-i/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(f,h),u=Math.asin(s),l=this.apa,c=u+u,r=u+l[0]*Math.sin(c)+l[1]*Math.sin(c+c)+l[2]*Math.sin(c+c+c)}return t.x=IH(this.long0+e),t.y=r,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function NY(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}var IY={init:function(){Math.abs(this.lat1+this.lat2)<nH||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=LH(this.e3,this.sin_po,this.cos_po),this.qs1=jY(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=LH(this.e3,this.sin_po,this.cos_po),this.qs2=jY(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=jY(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>nH?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=jY(this.e3,this.sin_phi),o=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,i=this.ns0*IH(e-this.long0),a=o*Math.sin(i)+this.x0,s=this.rh-o*Math.cos(i)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,o,i,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),o=0,0!==e&&(o=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,r)),i=IH(o/this.ns0+this.long0),t.x=i,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var r,n,o,i,a,s=NY(.5*e);if(t<nH)return s;for(var u=t*t,l=1;l<=25;l++)if(r=Math.sin(s),n=Math.cos(s),s+=a=.5*(i=1-(o=t*r)*o)*i/n*(e/(1-u)-r/i+.5/t*Math.log((1-o)/(1+o))),Math.abs(a)<=1e-7)return s;return null}};var DY={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,r,n,o,i,a,s,u=t.x,l=t.y;return n=IH(u-this.long0),e=Math.sin(l),r=Math.cos(l),o=Math.cos(n),(i=this.sin_p14*e+this.cos_p14*r*o)>0||Math.abs(i)<=nH?(a=this.x0+1*this.a*r*Math.sin(n)/i,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*o)/i):(a=this.x0+this.infinity_dist*r*Math.sin(n),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*o)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,o,i,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(o=Math.atan2(e,this.rc),r=Math.sin(o),a=NY((n=Math.cos(o))*this.sin_p14+t.y*r*this.cos_p14/e),i=Math.atan2(t.x*r,e*this.cos_p14*n-t.y*this.sin_p14*r),i=IH(this.long0+i)):(a=this.phic0,i=0),t.x=i,t.y=a,t},names:["gnom"]};var FY={init:function(){this.sphere||(this.k0=LH(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,r,n=t.x,o=t.y,i=IH(n-this.long0);if(this.sphere)e=this.x0+this.a*i*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(o)/Math.cos(this.lat_ts);else{var a=jY(this.e,Math.sin(o));e=this.x0+this.a*this.k0*i,r=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=r,t},inverse:function(t){var e,r;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=IH(this.long0+t.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=function(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*$q:$q;for(var n,o,i,a,s=Math.asin(.5*e),u=0;u<30;u++)if(o=Math.sin(s),i=Math.cos(s),a=t*o,s+=n=Math.pow(1-a*a,2)/(2*i)*(e/(1-t*t)-o/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(n)<=1e-10)return s;return NaN}(this.e,2*t.y*this.k0/this.a),e=IH(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=r,t},names:["cea"]};var BY={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,r=t.y,n=IH(e-this.long0),o=PY(r-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*o,t},inverse:function(t){var e=t.x,r=t.y;return t.x=IH(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=PY(this.lat0+(r-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},GY=20;var UY={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=gY(this.es),this.e1=wY(this.es),this.e2=OY(this.es),this.e3=SY(this.es),this.ml0=this.a*mY(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,r,n,o=t.x,i=t.y,a=IH(o-this.long0);if(n=a*Math.sin(i),this.sphere)Math.abs(i)<=nH?(e=this.a*a,r=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(i),r=this.a*(PY(i-this.lat0)+(1-Math.cos(n))/Math.tan(i)));else if(Math.abs(i)<=nH)e=this.a*a,r=-1*this.ml0;else{var s=_Y(this.a,this.e,Math.sin(i))/Math.tan(i);e=s*Math.sin(n),r=this.a*mY(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*(1-Math.cos(n))}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){var e,r,n,o,i,a,s,u,l;if(n=t.x-this.x0,o=t.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=nH)e=IH(n/this.a+this.long0),r=0;else{var c;for(a=this.lat0+o/this.a,s=n*n/this.a/this.a+a*a,u=a,i=GY;i;--i)if(u+=l=-1*(a*(u*(c=Math.tan(u))+1)-u-.5*(u*u+s)*c)/((u-a)/c-1),Math.abs(l)<=nH){r=u;break}e=IH(this.long0+Math.asin(n*Math.tan(u)/this.a)/Math.sin(r))}else if(Math.abs(o+this.ml0)<=nH)r=0,e=IH(this.long0+n/this.a);else{var f,h,p,y,d;for(a=(this.ml0+o)/this.a,s=n*n/this.a/this.a+a*a,u=a,i=GY;i;--i)if(d=this.e*Math.sin(u),f=Math.sqrt(1-d*d)*Math.tan(u),h=this.a*mY(this.e0,this.e1,this.e2,this.e3,u),p=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=l=(a*(f*(y=h/this.a)+1)-y-.5*f*(y*y+s))/(this.es*Math.sin(2*u)*(y*y+s-2*a*y)/(4*f)+(a-y)*(f*p-2/Math.sin(2*u))-p),Math.abs(l)<=nH){r=u;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=IH(this.long0+Math.asin(n*f/this.a)/Math.sin(r))}return t.x=e,t.y=r,t},names:["Polyconic","poly"]};var JY={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,r=t.x,n=t.y-this.lat0,o=r-this.long0,i=n/Kq*1e-5,a=o,s=1,u=0;for(e=1;e<=10;e++)s*=i,u+=this.A[e]*s;var l,c=u,f=a,h=1,p=0,y=0,d=0;for(e=1;e<=6;e++)l=p*c+h*f,h=h*c-p*f,p=l,y=y+this.B_re[e]*h-this.B_im[e]*p,d=d+this.B_im[e]*h+this.B_re[e]*p;return t.x=d*this.a+this.x0,t.y=y*this.a+this.y0,t},inverse:function(t){var e,r,n=t.x,o=t.y,i=n-this.x0,a=(o-this.y0)/this.a,s=i/this.a,u=1,l=0,c=0,f=0;for(e=1;e<=6;e++)r=l*a+u*s,u=u*a-l*s,l=r,c=c+this.C_re[e]*u-this.C_im[e]*l,f=f+this.C_im[e]*u+this.C_re[e]*l;for(var h=0;h<this.iterations;h++){var p,y=c,d=f,b=a,v=s;for(e=2;e<=6;e++)p=d*c+y*f,y=y*c-d*f,d=p,b+=(e-1)*(this.B_re[e]*y-this.B_im[e]*d),v+=(e-1)*(this.B_im[e]*y+this.B_re[e]*d);y=1,d=0;var m=this.B_re[1],g=this.B_im[1];for(e=2;e<=6;e++)p=d*c+y*f,y=y*c-d*f,d=p,m+=e*(this.B_re[e]*y-this.B_im[e]*d),g+=e*(this.B_im[e]*y+this.B_re[e]*d);var w=m*m+g*g;c=(b*m+v*g)/w,f=(v*m-b*g)/w}var O=c,S=f,_=1,P=0;for(e=1;e<=9;e++)_*=O,P+=this.D[e]*_;var x=this.lat0+P*Kq*1e5,k=this.long0+S;return t.x=k,t.y=x,t},names:["New_Zealand_Map_Grid","nzmg"]};var VY={init:function(){},forward:function(t){var e=t.x,r=t.y,n=IH(e-this.long0),o=this.x0+this.a*n,i=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=o,t.y=i,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=IH(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t},names:["Miller_Cylindrical","mill"]},zY=20;var qY={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=QW(this.es)},forward:function(t){var e,r,n=t.x,o=t.y;if(n=IH(n-this.long0),this.sphere){if(this.m)for(var i=this.n*Math.sin(o),a=zY;a;--a){var s=(this.m*o+Math.sin(o)-i)/(this.m+Math.cos(o));if(o-=s,Math.abs(s)<nH)break}else o=1!==this.n?Math.asin(this.n*Math.sin(o)):o;e=this.a*this.C_x*n*(this.m+Math.cos(o)),r=this.a*this.C_y*o}else{var u=Math.sin(o),l=Math.cos(o);r=this.a*ZW(o,u,l,this.en),e=this.a*n*l/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r/=this.C_x*(this.m+Math.cos(e)),this.m?e=NY((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=NY(Math.sin(e)/this.n)),r=IH(r+this.long0),e=PY(e)):(e=$W(t.y/this.a,this.es,this.en),(n=Math.abs(e))<$q?(n=Math.sin(e),r=IH(this.long0+t.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)))):n-nH<$q&&(r=this.long0)),t.x=r,t.y=e,t},names:["Sinusoidal","sinu"]};var HY={init:function(){},forward:function(t){for(var e=t.x,r=t.y,n=IH(e-this.long0),o=r,i=Math.PI*Math.sin(r);;){var a=-(o+Math.sin(o)-i)/(1+Math.cos(o));if(o+=a,Math.abs(a)<nH)break}o/=2,Math.PI/2-Math.abs(r)<nH&&(n=0);var s=.900316316158*this.a*n*Math.cos(o)+this.x0,u=1.4142135623731*this.a*Math.sin(o)+this.y0;return t.x=s,t.y=u,t},inverse:function(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var n=IH(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var o=Math.asin(r);return t.x=n,t.y=o,t},names:["Mollweide","moll"]};var WY={init:function(){Math.abs(this.lat1+this.lat2)<nH||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=gY(this.es),this.e1=wY(this.es),this.e2=OY(this.es),this.e3=SY(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=LH(this.e,this.sinphi,this.cosphi),this.ml1=mY(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<nH?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=LH(this.e,this.sinphi,this.cosphi),this.ml2=mY(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=mY(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,r=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var o=mY(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-o)}var i=this.ns*IH(r-this.long0),a=this.x0+e*Math.sin(i),s=this.y0+this.rh-e*Math.cos(i);return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,o;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var i=0;return 0!==r&&(i=Math.atan2(e*t.x,e*t.y)),this.sphere?(o=IH(this.long0+i/this.ns),n=PY(this.g-r/this.a),t.x=o,t.y=n,t):(n=xY(this.g-r/this.a,this.e0,this.e1,this.e2,this.e3),o=IH(this.long0+i/this.ns),t.x=o,t.y=n,t)},names:["Equidistant_Conic","eqdc"]};var YY={init:function(){this.R=this.a},forward:function(t){var e,r,n=t.x,o=t.y,i=IH(n-this.long0);Math.abs(o)<=nH&&(e=this.x0+this.R*i,r=this.y0);var a=NY(2*Math.abs(o/Math.PI));(Math.abs(i)<=nH||Math.abs(Math.abs(o)-$q)<=nH)&&(e=this.x0,r=o>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/i-i/Math.PI),u=s*s,l=Math.sin(a),c=Math.cos(a),f=c/(l+c-1),h=f*f,p=f*(2/l-1),y=p*p,d=Math.PI*this.R*(s*(f-y)+Math.sqrt(u*(f-y)*(f-y)-(y+u)*(h-y)))/(y+u);i<0&&(d=-d),e=this.x0+d;var b=u+f;return d=Math.PI*this.R*(p*b-s*Math.sqrt((y+u)*(u+1)-b*b))/(y+u),r=o>=0?this.y0+d:this.y0-d,t.x=e,t.y=r,t},inverse:function(t){var e,r,n,o,i,a,s,u,l,c,f,h;return t.x-=this.x0,t.y-=this.y0,f=Math.PI*this.R,i=(n=t.x/f)*n+(o=t.y/f)*o,f=3*(o*o/(u=-2*(a=-Math.abs(o)*(1+i))+1+2*o*o+i*i)+(2*(s=a-2*o*o+n*n)*s*s/u/u/u-9*a*s/u/u)/27)/(l=(a-s*s/3/u)/u)/(c=2*Math.sqrt(-l/3)),Math.abs(f)>1&&(f=f>=0?1:-1),h=Math.acos(f)/3,r=t.y>=0?(-c*Math.cos(h+Math.PI/3)-s/3/u)*Math.PI:-(-c*Math.cos(h+Math.PI/3)-s/3/u)*Math.PI,e=Math.abs(n)<nH?this.long0:IH(this.long0+Math.PI*(i-1+Math.sqrt(1+2*(n*n-o*o)+i*i))/2/n),t.x=e,t.y=r,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var XY={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,r,n,o,i,a,s,u,l,c,f,h,p,y,d,b,v,m,g,w,O,S,_=t.x,P=t.y,x=Math.sin(t.y),k=Math.cos(t.y),j=IH(_-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=nH?(t.x=this.x0+this.a*($q-P)*Math.sin(j),t.y=this.y0-this.a*($q-P)*Math.cos(j),t):Math.abs(this.sin_p12+1)<=nH?(t.x=this.x0+this.a*($q+P)*Math.sin(j),t.y=this.y0+this.a*($q+P)*Math.cos(j),t):(m=this.sin_p12*x+this.cos_p12*k*Math.cos(j),v=(b=Math.acos(m))?b/Math.sin(b):1,t.x=this.x0+this.a*v*k*Math.sin(j),t.y=this.y0+this.a*v*(this.cos_p12*x-this.sin_p12*k*Math.cos(j)),t):(e=gY(this.es),r=wY(this.es),n=OY(this.es),o=SY(this.es),Math.abs(this.sin_p12-1)<=nH?(i=this.a*mY(e,r,n,o,$q),a=this.a*mY(e,r,n,o,P),t.x=this.x0+(i-a)*Math.sin(j),t.y=this.y0-(i-a)*Math.cos(j),t):Math.abs(this.sin_p12+1)<=nH?(i=this.a*mY(e,r,n,o,$q),a=this.a*mY(e,r,n,o,P),t.x=this.x0+(i+a)*Math.sin(j),t.y=this.y0+(i+a)*Math.cos(j),t):(s=x/k,u=_Y(this.a,this.e,this.sin_p12),l=_Y(this.a,this.e,x),c=Math.atan((1-this.es)*s+this.es*u*this.sin_p12/(l*k)),g=0===(f=Math.atan2(Math.sin(j),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(j)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(f)-Math.PI)<=nH?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(j)*Math.cos(c)/Math.sin(f)),h=this.e*this.sin_p12/Math.sqrt(1-this.es),b=u*g*(1-(w=g*g)*(d=(p=this.e*this.cos_p12*Math.cos(f)/Math.sqrt(1-this.es))*p)*(1-d)/6+(O=w*g)/8*(y=h*p)*(1-2*d)+(S=O*g)/120*(d*(4-7*d)-3*h*h*(1-7*d))-S*g/48*y),t.x=this.x0+b*Math.sin(f),t.y=this.y0+b*Math.cos(f),t))},inverse:function(t){var e,r,n,o,i,a,s,u,l,c,f,h,p,y,d,b,v,m,g,w,O,S,_;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*$q*this.a)return;return r=e/this.a,n=Math.sin(r),o=Math.cos(r),i=this.long0,Math.abs(e)<=nH?a=this.lat0:(a=NY(o*this.sin_p12+t.y*n*this.cos_p12/e),s=Math.abs(this.lat0)-$q,i=Math.abs(s)<=nH?this.lat0>=0?IH(this.long0+Math.atan2(t.x,-t.y)):IH(this.long0-Math.atan2(-t.x,t.y)):IH(this.long0+Math.atan2(t.x*n,e*this.cos_p12*o-t.y*this.sin_p12*n))),t.x=i,t.y=a,t}return u=gY(this.es),l=wY(this.es),c=OY(this.es),f=SY(this.es),Math.abs(this.sin_p12-1)<=nH?(a=xY(((h=this.a*mY(u,l,c,f,$q))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,u,l,c,f),i=IH(this.long0+Math.atan2(t.x,-1*t.y)),t.x=i,t.y=a,t):Math.abs(this.sin_p12+1)<=nH?(h=this.a*mY(u,l,c,f,$q),a=xY(((e=Math.sqrt(t.x*t.x+t.y*t.y))-h)/this.a,u,l,c,f),i=IH(this.long0+Math.atan2(t.x,t.y)),t.x=i,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),d=Math.atan2(t.x,t.y),p=_Y(this.a,this.e,this.sin_p12),b=Math.cos(d),m=-(v=this.e*this.cos_p12*b)*v/(1-this.es),g=3*this.es*(1-m)*this.sin_p12*this.cos_p12*b/(1-this.es),S=1-m*(O=(w=e/p)-m*(1+m)*Math.pow(w,3)/6-g*(1+3*m)*Math.pow(w,4)/24)*O/2-w*O*O*O/6,y=Math.asin(this.sin_p12*Math.cos(O)+this.cos_p12*Math.sin(O)*b),i=IH(this.long0+Math.asin(Math.sin(d)*Math.sin(O)/Math.cos(y))),_=Math.sin(y),a=Math.atan2((_-this.es*S*this.sin_p12)*Math.tan(y),_*(1-this.es)),t.x=i,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]};var QY={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,r,n,o,i,a,s,u=t.x,l=t.y;return n=IH(u-this.long0),e=Math.sin(l),r=Math.cos(l),o=Math.cos(n),((i=this.sin_p14*e+this.cos_p14*r*o)>0||Math.abs(i)<=nH)&&(a=1*this.a*r*Math.sin(n),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*o)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,o,i,a,s;return t.x-=this.x0,t.y-=this.y0,r=NY((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),n=Math.sin(r),o=Math.cos(r),a=this.long0,Math.abs(e)<=nH?(s=this.lat0,t.x=a,t.y=s,t):(s=NY(o*this.sin_p14+t.y*n*this.cos_p14/e),i=Math.abs(this.lat0)-$q,Math.abs(i)<=nH?(a=this.lat0>=0?IH(this.long0+Math.atan2(t.x,-t.y)):IH(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=IH(this.long0+Math.atan2(t.x*n,e*this.cos_p14*o-t.y*this.sin_p14*n)),t.x=a,t.y=s,t))},names:["ortho"]},ZY={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},KY={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function $Y(t,e,r,n){var o;return t<nH?(n.value=KY.AREA_0,o=0):(o=Math.atan2(e,r),Math.abs(o)<=aH?n.value=KY.AREA_0:o>aH&&o<=$q+aH?(n.value=KY.AREA_1,o-=$q):o>$q+aH||o<=-($q+aH)?(n.value=KY.AREA_2,o=o>=0?o-uH:o+uH):(n.value=KY.AREA_3,o+=$q)),o}function tX(t,e){var r=t+e;return r<-uH?r+=sH:r>+uH&&(r-=sH),r}var eX={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=$q-aH/2?this.face=ZY.TOP:this.lat0<=-($q-aH/2)?this.face=ZY.BOTTOM:Math.abs(this.long0)<=aH?this.face=ZY.FRONT:Math.abs(this.long0)<=$q+aH?this.face=this.long0>0?ZY.RIGHT:ZY.LEFT:this.face=ZY.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,r,n,o,i,a,s={x:0,y:0},u={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,r=t.x,this.face===ZY.TOP)o=$q-e,r>=aH&&r<=$q+aH?(u.value=KY.AREA_0,n=r-$q):r>$q+aH||r<=-($q+aH)?(u.value=KY.AREA_1,n=r>0?r-uH:r+uH):r>-($q+aH)&&r<=-aH?(u.value=KY.AREA_2,n=r+$q):(u.value=KY.AREA_3,n=r);else if(this.face===ZY.BOTTOM)o=$q+e,r>=aH&&r<=$q+aH?(u.value=KY.AREA_0,n=-r+$q):r<aH&&r>=-aH?(u.value=KY.AREA_1,n=-r):r<-aH&&r>=-($q+aH)?(u.value=KY.AREA_2,n=-r-$q):(u.value=KY.AREA_3,n=r>0?-r+uH:-r-uH);else{var l,c,f,h,p,y;this.face===ZY.RIGHT?r=tX(r,+$q):this.face===ZY.BACK?r=tX(r,+uH):this.face===ZY.LEFT&&(r=tX(r,-$q)),h=Math.sin(e),p=Math.cos(e),y=Math.sin(r),l=p*Math.cos(r),c=p*y,f=h,this.face===ZY.FRONT?n=$Y(o=Math.acos(l),f,c,u):this.face===ZY.RIGHT?n=$Y(o=Math.acos(c),f,-l,u):this.face===ZY.BACK?n=$Y(o=Math.acos(-l),f,-c,u):this.face===ZY.LEFT?n=$Y(o=Math.acos(-c),f,l,u):(o=n=0,u.value=KY.AREA_0)}return a=Math.atan(12/uH*(n+Math.acos(Math.sin(n)*Math.cos(aH))-$q)),i=Math.sqrt((1-Math.cos(o))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),u.value===KY.AREA_1?a+=$q:u.value===KY.AREA_2?a+=uH:u.value===KY.AREA_3&&(a+=1.5*uH),s.x=i*Math.cos(a),s.y=i*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,r,n,o,i,a,s,u,l,c,f,h,p={lam:0,phi:0},y={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?y.value=KY.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(y.value=KY.AREA_1,e-=$q):t.x<0&&-t.x>=Math.abs(t.y)?(y.value=KY.AREA_2,e=e<0?e+uH:e-uH):(y.value=KY.AREA_3,e+=$q),l=uH/12*Math.tan(e),i=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),a=Math.atan(i),(s=1-(n=Math.cos(e))*n*(o=Math.tan(r))*o*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===ZY.TOP)u=Math.acos(s),p.phi=$q-u,y.value===KY.AREA_0?p.lam=a+$q:y.value===KY.AREA_1?p.lam=a<0?a+uH:a-uH:y.value===KY.AREA_2?p.lam=a-$q:p.lam=a;else if(this.face===ZY.BOTTOM)u=Math.acos(s),p.phi=u-$q,y.value===KY.AREA_0?p.lam=-a+$q:y.value===KY.AREA_1?p.lam=-a:y.value===KY.AREA_2?p.lam=-a-$q:p.lam=a<0?-a-uH:-a+uH;else{var d,b,v;l=(d=s)*d,b=(l+=(v=l>=1?0:Math.sqrt(1-l)*Math.sin(a))*v)>=1?0:Math.sqrt(1-l),y.value===KY.AREA_1?(l=b,b=-v,v=l):y.value===KY.AREA_2?(b=-b,v=-v):y.value===KY.AREA_3&&(l=b,b=v,v=-l),this.face===ZY.RIGHT?(l=d,d=-b,b=l):this.face===ZY.BACK?(d=-d,b=-b):this.face===ZY.LEFT&&(l=d,d=b,b=-l),p.phi=Math.acos(-v)-$q,p.lam=Math.atan2(b,d),this.face===ZY.RIGHT?p.lam=tX(p.lam,-$q):this.face===ZY.BACK?p.lam=tX(p.lam,-uH):this.face===ZY.LEFT&&(p.lam=tX(p.lam,+$q))}return 0!==this.es&&(c=p.phi<0?1:0,f=Math.tan(p.phi),h=this.b/Math.sqrt(f*f+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-h*h)/(this.one_minus_f*h)),c&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},rX=[[1,2.2199e-17,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],nX=[[-5.20417e-18,.0124,1.21431e-18,-8.45284e-11],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],oX=.8487,iX=1.3523,aX=iH/5,sX=1/aX,uX=18,lX=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},cX=function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])};var fX={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=IH(t.x-this.long0),r=Math.abs(t.y),n=Math.floor(r*aX);n<0?n=0:n>=uX&&(n=uX-1),r=iH*(r-sX*n);var o={x:lX(rX[n],r)*e,y:lX(nX[n],r)};return t.y<0&&(o.y=-o.y),o.x=o.x*this.a*oX+this.x0,o.y=o.y*this.a*iX+this.y0,o},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*oX),y:Math.abs(t.y-this.y0)/(this.a*iX)};if(e.y>=1)e.x/=rX[uX][0],e.y=t.y<0?-$q:$q;else{var r=Math.floor(e.y*uX);for(r<0?r=0:r>=uX&&(r=uX-1);;)if(nX[r][0]>e.y)--r;else{if(!(nX[r+1][0]<=e.y))break;++r}var n=nX[r],o=5*(e.y-n[0])/(nX[r+1][0]-n[0]);o=function(t,e,r,n){for(var o=e;n;--n){var i=t(o);if(o-=i,Math.abs(i)<r)break}return o}(function(t){return(lX(n,t)-e.y)/cX(n,t)},o,nH,100),e.x/=lX(rX[r],o),e.y=(5*r+o)*oH,t.y<0&&(e.y=-e.y)}return e.x=IH(e.x+this.long0),e},names:["Robinson","robin"]};var hX={init:function(){this.name="geocent"},forward:function(t){return oW(t,this.es,this.a)},inverse:function(t){return iW(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},pX={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},yX={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var dX={init:function(){if(Object.keys(yX).forEach(function(t){if(void 0===this[t])this[t]=yX[t].def;else{if(yX[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);yX[t].num&&(this[t]=parseFloat(this[t]))}yX[t].degrees&&(this[t]=this[t]*oH)}.bind(this)),Math.abs(Math.abs(this.lat0)-$q)<nH?this.mode=this.lat0<0?pX.S_POLE:pX.N_POLE:Math.abs(this.lat0)<nH?this.mode=pX.EQUIT:(this.mode=pX.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,r,n,o,i=Math.sin(t.y),a=Math.cos(t.y),s=Math.cos(t.x);switch(this.mode){case pX.OBLIQ:r=this.sinph0*i+this.cosph0*a*s;break;case pX.EQUIT:r=a*s;break;case pX.S_POLE:r=-i;break;case pX.N_POLE:r=i}switch(e=(r=this.pn1/(this.p-r))*a*Math.sin(t.x),this.mode){case pX.OBLIQ:r*=this.cosph0*i-this.sinph0*a*s;break;case pX.EQUIT:r*=i;break;case pX.N_POLE:r*=-a*s;break;case pX.S_POLE:r*=a*s}return o=1/((n=r*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-r*this.sg)*this.cw*o,r=n*o,t.x=e*this.a,t.y=r*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,r,n,o={x:t.x,y:t.y};n=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*n,r=this.pn1*t.y*this.cw*n,t.x=e*this.cg+r*this.sg,t.y=r*this.cg-e*this.sg;var i=rY(t.x,t.y);if(Math.abs(i)<nH)o.x=0,o.y=t.y;else{var a,s;switch(s=1-i*i*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/i+i/this.pn1),a=Math.sqrt(1-s*s),this.mode){case pX.OBLIQ:o.y=Math.asin(a*this.sinph0+t.y*s*this.cosph0/i),t.y=(a-this.sinph0*Math.sin(o.y))*i,t.x*=s*this.cosph0;break;case pX.EQUIT:o.y=Math.asin(t.y*s/i),t.y=a*i,t.x*=s;break;case pX.N_POLE:o.y=Math.asin(a),t.y=-t.y;break;case pX.S_POLE:o.y=-Math.asin(a)}o.x=Math.atan2(t.x,t.y)}return t.x=o.x+this.long0,t.y=o.y,t},names:["Tilted_Perspective","tpers"]};var bX={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,r,n,o,i=t.x,a=t.y;if(i-=this.long0,"ellipse"===this.shape){a=Math.atan(this.radius_p2*Math.tan(a));var s=this.radius_p/rY(this.radius_p*Math.cos(a),Math.sin(a));if(r=s*Math.cos(i)*Math.cos(a),n=s*Math.sin(i)*Math.cos(a),o=s*Math.sin(a),(this.radius_g-r)*r-n*n-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/rY(o,e)),t.y=this.radius_g_1*Math.atan(o/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(o/rY(n,e)))}else"sphere"===this.shape&&(e=Math.cos(a),r=Math.cos(i)*e,n=Math.sin(i)*e,o=Math.sin(a),e=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/rY(o,e)),t.y=this.radius_g_1*Math.atan(o/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(o/rY(n,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,r,n,o,i=-1,a=0,s=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*rY(1,s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*rY(1,a));var u=s/this.radius_p;if(e=a*a+u*u+i*i,(n=(r=2*this.radius_g*i)*r-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-r-Math.sqrt(n))/(2*e),i=this.radius_g+o*i,a*=o,s*=o,t.x=Math.atan2(a,i),t.y=Math.atan(s*Math.cos(t.x)/i),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+a*a)),e=a*a+s*s+i*i,(n=(r=2*this.radius_g*i)*r-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-r-Math.sqrt(n))/(2*e),i=this.radius_g+o*i,a*=o,s*=o,t.x=Math.atan2(a,i),t.y=Math.atan(s*Math.cos(t.x)/i)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};mW.defaultDatum="WGS84",mW.Proj=nW,mW.WGS84=new mW.Proj("WGS84"),mW.Point=DW,mW.toPoint=hW,mW.defs=TH,mW.nadgrid=function(t,e){var r=new DataView(e),n=function(t){var e=t.getInt32(8,!1);return 11!==e&&(11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(r),o=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:KH(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(r,n);o.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var i={header:o,subgrids:function(t,e,r){for(var n=[],o=0;o<e.nSubgrids;o++){var i=tW(t,176,r),a=eW(t,176,i,r),s=Math.round(1+(i.upperLongitude-i.lowerLongitude)/i.longitudeInterval),u=Math.round(1+(i.upperLatitude-i.lowerLatitude)/i.latitudeInterval);n.push({ll:[ZH(i.lowerLongitude),ZH(i.lowerLatitude)],del:[ZH(i.longitudeInterval),ZH(i.latitudeInterval)],lim:[s,u],count:i.gridNodeCount,cvs:$H(a)})}return n}(r,o,n)};return XH[t]=i,i},mW.transform=yW,mW.mgrs=jW,mW.version="__VERSION__",function(t){t.Proj.projections.add(tY),t.Proj.projections.add(aY),t.Proj.projections.add(sY),t.Proj.projections.add(fY),t.Proj.projections.add(hY),t.Proj.projections.add(pY),t.Proj.projections.add(dY),t.Proj.projections.add(bY),t.Proj.projections.add(vY),t.Proj.projections.add(kY),t.Proj.projections.add(LY),t.Proj.projections.add(IY),t.Proj.projections.add(DY),t.Proj.projections.add(FY),t.Proj.projections.add(BY),t.Proj.projections.add(UY),t.Proj.projections.add(JY),t.Proj.projections.add(VY),t.Proj.projections.add(qY),t.Proj.projections.add(HY),t.Proj.projections.add(WY),t.Proj.projections.add(YY),t.Proj.projections.add(XY),t.Proj.projections.add(QY),t.Proj.projections.add(eX),t.Proj.projections.add(fX),t.Proj.projections.add(hX),t.Proj.projections.add(dX),t.Proj.projections.add(bX)}(mW);var vX=mW;function mX(t){"@babel/helpers - typeof";return(mX="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gX(){gX=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new _(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return x()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var c={};function f(){}function h(){}function p(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(P([])));b&&b!==e&&r.call(b,o)&&(y=b);var v=p.prototype=f.prototype=Object.create(y);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var u=l(t[o],t,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==mX(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(f).then(function(t){c.value=t,a(c)},function(t){return n("throw",t,a,s)})}s(u.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return h.prototype=p,s(v,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=P,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;S(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:P(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function wX(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function OX(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wX(Object(r),!0).forEach(function(e){SX(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wX(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function SX(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _X(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function PX(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){_X(i,n,o,a,s,"next",t)}function s(t){_X(i,n,o,a,s,"throw",t)}a(void 0)})}}function xX(t,e,r){var n=function(t){return t instanceof Array?t:t.leftBottom&&t.rightTop?[t.leftBottom.x,t.leftBottom.y,t.rightTop.x,t.rightTop.y]:[t.left,t.bottom,t.right,t.top]}(r);return new(o().CRS)(t,e,n)}function kX(t,e){var r=t;return"EPSG:3857"===e?vX(e,"EPSG:4326",t):"EPSG:4326"!==e?o().proj4(e,"EPSG:4326",t):r}function jX(t,e){return EX.apply(this,arguments)}function EX(){return(EX=PX(gX().mark(function t(e,r){var n,o,i,a;return gX().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Jl.get(e);case 3:return n=t.sent,t.next=6,n.json();case 6:if(!(o=t.sent).metadata||!o.metadata.indexbounds){t.next=9;break}return t.abrupt("return",{extent:o.metadata.indexbounds});case 9:return t.next=11,Jl.get("".concat(r,"/prjCoordSys/projection/extent.json"));case 11:return i=t.sent,t.next=14,i.json();case 14:return a=t.sent,t.abrupt("return",{extent:a,center:o.center});case 18:return t.prev=18,t.t0=t.catch(0),t.abrupt("return",{extent:[]});case 21:case"end":return t.stop()}},t,null,[[0,18]])}))).apply(this,arguments)}function TX(t,e,r){return CX.apply(this,arguments)}function CX(){return(CX=PX(gX().mark(function t(e,r,n){var i,a,s,u,l,c,f,h,p,y,d,b,v,m,g,w,O,S,_,P;return gX().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.type||["raster","vector-tile"].includes(n.type)){t.next=2;break}return t.abrupt("return",Promise.reject(new Error('type must be "raster" or "vector-tile".')));case 2:if(i=n.type||"raster",a=n.mapOptions||{},s=r.prjCoordSys.epsgCode,u=r.bounds,l=r.center,c=r.dpi,f=r.coordUnit,h=r.scale,p=l?[l.x,l.y]:[0,0],y="EPSG:".concat(s),d=u,b="vector-tile"===i?e+"/tileFeature/vectorstyles.json?type=MapBox_GL&styleonly=true&tileURLTemplate=ZXY":e,v={},m={},!o().CRS){t.next=26;break}return g=y,t.next=15,n.initMapService.getWKT();case 15:if(w=t.sent,"vector-tile"!==i){t.next=21;break}return t.next=19,jX(b,e);case 19:O=t.sent,d=O.extent;case 21:y=xX(g,w,d),"raster"===i&&(m.rasterSource="iserver"),p=O&&O.center?O.center:kX(p,g),t.next=29;break;case 26:p=kX(p,y="EPSG:3857"),"raster"===i&&(S=256,v.tileSize=S,_=!1!==a.transparent,b+="/zxyTileImage.png?z={z}&x={x}&y={y}&width=".concat(S,"&height=").concat(S,"&transparent=").concat(_));case 29:return P=Vq({scale:h,dpi:c,coordUnit:f},d),t.abrupt("return",OX({container:"map",crs:y,center:p,zoom:P,style:"raster"===i?{version:8,sources:{"smaples-source":OX(OX({type:"raster",tiles:[b]},v),m)},layers:[{id:"sample-layer",type:"raster",source:"smaples-source",minzoom:0,maxzoom:22}]}:b},a));case 31:case"end":return t.stop()}},t)}))).apply(this,arguments)}function RX(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function AX(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?RX(Object(r),!0).forEach(function(e){MX(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RX(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function MX(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}o().supermap=AX(AX({},eF),o().supermap),o().supermap.map=o().supermap.map||{},o().supermap.LogoControl=a,o().supermap.Logo=a,o().supermap.Util=Pr,o().supermap.WebMap=Bq,o().supermap.initMap=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Uq(HS,t,e);return r.getMapInfo((n=PX(gX().mark(function n(i,a,s){var u,l,c,f,h,p;return gX().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,"processCompleted"!==i.type){n.next=15;break}if(u=i.result,l=u.dynamicProjection,c=u.prjCoordSys,f=c.epsgCode,!Jq(c.type)){n.next=6;break}return s(new Error("mapbox-gl cannot support plane coordinate system.")),n.abrupt("return");case 6:if(3857===f||l||o().CRS){n.next=9;break}return s(new Error("The EPSG code ".concat(f," needs to include mapbox-gl-enhance.js. Refer to the example: https://iclient.supermap.io/examples/mapboxgl/editor.html#mvtVectorTile_2362"))),n.abrupt("return");case 9:return n.next=11,TX(t,i.result,OX(OX({},e),{},{initMapService:r}));case 11:return h=n.sent,p=new(o().Map)(h),h.style&&h.style.layers&&h.style.layers.length>0?p.on("load",function(){a({map:p})}):a({map:p}),n.abrupt("return");case 15:s(new Error("Fetch mapService is failed.")),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(0),s(n.t0);case 21:case"end":return n.stop()}},n,null,[[0,18]])})),function(t,e,r){return n.apply(this,arguments)}));var n},o().supermap.Graphic=Lp,o().supermap.map.getDefaultVectorTileStyle=function(t,e){e=e||{};var r={};r.version=e.version||8,r.layers=e.layers||[],r.light=e.light||{anchor:"viewport",color:"#fcf6ef",intensity:.5,position:[1.15,201,20]};var n={version:r.version,sources:{"vector-tiles":{type:"vector",tiles:[t]}},layers:r.layers,light:r.light};return null!=e.sprite&&(n.sprite=e.sprite),null!=e.glyphs&&(n.glyphs=e.glyphs),n},o().supermap.map.setBackground=function(t,e){e&&t&&t.addLayer({id:"background",type:"background",paint:{"background-color":e}},"background")},o().supermap.map.setPaintProperty=function(t,e,r,n,o,i){if(e&&t){"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]);for(var a=0;a<e.length;a++){var s=i?i[a]:null,u=Ip(e[a],r,o,s,n);t.addLayer(u,e[a]),t.moveLayer(e[a])}}},o().supermap.MapvDataSet=Np,o().supermap.GeoFeatureThemeLayer=bs,o().supermap.Theme3DLayer=Vs,o().supermap.ThemeFeature=Nr,o().supermap.ThemeLayer=Ho,o().supermap.Transform=Au,o().supermap.WebSymbol=gy,o().supermap.DeckglLayer=wl,o().supermap.GraphicLayer=Eu,o().supermap.GraphThemeLayer=$o,o().supermap.GraticuleLayer=Nl,o().supermap.HeatMapLayer=cl,o().supermap.LabelThemeLayer=Ps,o().supermap.MapvLayer=Us,o().supermap.FGBLayer=yh,o().supermap.RangeTheme3DLayer=Qs,o().supermap.RangeThemeLayer=ru,o().supermap.RankSymbolThemeLayer=uu,o().supermap.ThreeLayer=$u,o().supermap.UniqueTheme3DLayer=du,o().supermap.UniqueThemeLayer=Ou,o().supermap.GraphMap=Ap,o().supermap.AddressMatchService=Iy,o().supermap.ChartService=fd,o().supermap.DataFlowService=xd,o().supermap.DatasetService=zd,o().supermap.DatasourceService=ab,o().supermap.FeatureService=nm,o().supermap.FieldService=Im,o().supermap.GeoprocessingService=cg,o().supermap.GridCellInfosService=Km,o().supermap.ImageCollectionService=tF,o().supermap.ImageService=GD,o().supermap.LayerInfoService=xS,o().supermap.MapService=HS,o().supermap.MeasureService=u_,o().supermap.NetworkAnalyst3DService=uj,o().supermap.NetworkAnalystService=Ix,o().supermap.ProcessingService=rT,o().supermap.QueryService=xC,o().supermap.ServiceBase=Oh,o().supermap.SpatialAnalystService=fI,o().supermap.ThemeService=jI,o().supermap.TrafficTransferAnalystService=lD,o().supermap.WebPrintingJobService=PD,o().supermap.KnowledgeGraphService=Yh,o().supermap.Components.ChartView=mz,o().supermap.CommonUtil=C}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},r(3123),r(5023),r(7888);r(3679)}();