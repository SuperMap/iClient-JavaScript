/*!
 * 
 *          iclient-leaflet.(https://iclient.supermap.io)
 *          Copyright© 2000 - 2020 SuperMap Software Co.Ltd
 *          license: Apache-2.0
 *          version: v10.1.0
 *         
 */!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t){e.exports=L},function(e,t){e.exports=function(){try{return echarts}catch(e){return{}}}()},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}e.exports=r},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(20),o="&&",a="||",s="and",l="or",u="=",c="~",f="!"+u,h="!"+c,p=">",y=">=",d="<",m="<=",v="*",g=",",b=".",S="(",_=")",w="where",O={pathway:[],groups:{}},x={},C={},P=console.log;function T(e){var t=k(e,w),n=t[0],r=t[1];O.pathway=k(n,g);for(var i=0,s=O.pathway.length;i<s;i++)O.pathway[i]=k(O.pathway[i],b),O.pathway[i][0]==v&&O.pathway[i].shift(),0===O.pathway[i].length&&O.pathway.splice(i,1);for(var l=-1,C=-1,P=0;P<r.length;){if(r[P]===S)l=P;else if(r[P]===_&&(C=P)>l&&-1!==l){var T="gr_"+(new Date).getTime();O.groups[T]=r.substring(l+1,C),r=r.replace(S+O.groups[T]+_,T),P=-1}P+=1}!function e(t,n){var r=E(n,o),i=E(n,a);if(r!==Number.MAX_VALUE||i!==Number.MAX_VALUE)if(r<i){t.and=t.and||[];var s=k(n,o);t.and.push(s[0]),e(t.and,s[1])}else{t.or=t.or||[];var s=k(n,a);t.or.push(s[0]),e(t.or,s[1])}else O.groups[n]?(n=O.groups[n],e(t,n)):(Array.isArray(t)?t.push(n):t.or=[n],function e(t){for(var n in t)if(t.hasOwnProperty(n))if(Array.isArray(t[n]))e(t[n]);else if("string"==typeof t[n])if(M(t[n],f)){var r=k(t[n],f);t[n]={ne:[r[0],r[1]]}}else if(M(t[n],h)){var r=k(t[n],h);t[n]={nreq:[r[0],r[1]]}}else if(M(t[n],c)){var r=k(t[n],c);t[n]={req:[r[0],r[1]]}}else if(M(t[n],y)){var r=k(t[n],y);t[n]={ge:[r[0],r[1]]}}else if(M(t[n],p)){var r=k(t[n],p);t[n]={gt:[r[0],r[1]]}}else if(M(t[n],m)){var r=k(t[n],m);t[n]={le:[r[0],r[1]]}}else if(M(t[n],d)){var r=k(t[n],d);t[n]={lt:[r[0],r[1]]}}else if(M(t[n],u)){var r=k(t[n],u);t[n]={eq:[r[0],r[1]]}}}(x.or?x.or:x.and))}(x,r)}function E(e,t){var n=e.indexOf(t);return-1===n?Number.MAX_VALUE:n}function k(e,t){return e.split(t).map(function(e){return e.trim()})}function M(e,t){return e.indexOf(t)>-1}function A(e,t){var n=k(t,b),r=e;for(var o in n){if(!r.hasOwnProperty(n[o]))return"";r=r[n[o]]}return r=i.isDate(r)?r.valueOf():i.isDateString(r)?i.parseDateFromString(r):r.toString()}function L(e,t){var n=!1;for(var r in e){if(n=n||(r===s?j:r===l?L:R)(e[r],t),C.trace&&P(O.step,"======((( or",e[r],n),n)return n}return n}function j(e,t){var n=!0;for(var r in e){if(n=n&&(r===s?j:r===l?L:R)(e[r],t),C.trace&&P(O.step,"======((( and",e[r],n),!n)return n}return n}function R(e,t){if(O.step+=1,e.or){var n=L(e.or,t);return C.trace&&P(O.step,"OR",e,n),n}if(e.and){n=j(e.and,t);return C.trace&&P(O.step,"AND",e,n),n}if("object"===r(e))return e.eq?A(t,e.eq[0])===e.eq[1]:e.ne?A(t,e.ne[0])!==e.ne[1]:e.req?M(A(t,e.req[0]),e.req[1]):e.nreq?!M(A(t,e.nreq[0]),e.nreq[1]):e.gt?A(t,e.gt[0])>e.gt[1]:e.ge?A(t,e.ge[0])>=e.ge[1]:e.lt?A(t,e.lt[0])<e.lt[1]:e.le?A(t,e.le[0])<=e.le[1]:R(e,t)}function N(e,t,n){return O={pathway:[],groups:{},step:0},x={},C=n=n||{trace:!1},T(t),(r=function(e){var t=[];for(var n in e)R(x,e[n])&&t.push(e[n]);return t}(e))&&O.pathway.length>0?r.map(function(e){for(var t={},n=0,r=O.pathway.length;n<r;n++){var i=O.pathway[n].join(b);t[i]=A(e,i)}return t}):r;var r}void 0!==e.exports&&(e.exports=N),"undefined"!=typeof window&&(window.Query=N)},function(e,t,n){var r,i,o;i=[t,e],void 0===(o="function"==typeof(r=function(e,t){"use strict";var n={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function r(e){try{delete window[e]}catch(t){window[e]=void 0}}function i(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=e,a=t.timeout||n.timeout,s=t.jsonpCallback||n.jsonpCallback,l=void 0;return new Promise(function(n,u){var c=t.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),f=s+"_"+c;window[c]=function(e){n({ok:!0,json:function(){return Promise.resolve(e)}}),l&&clearTimeout(l),i(f),r(c)},o+=-1===o.indexOf("?")?"?":"&";var h=document.createElement("script");h.setAttribute("src",""+o+s+"="+c),t.charset&&h.setAttribute("charset",t.charset),h.id=f,document.getElementsByTagName("head")[0].appendChild(h),l=setTimeout(function(){u(new Error("JSONP request to "+e+" timed out")),r(c),i(f),window[c]=function(){r(c)}},a),h.onerror=function(){u(new Error("JSONP request to "+e+" failed")),r(c),i(f),l&&clearTimeout(l)}})}})?r.apply(t,i):r)||(e.exports=o)},function(e,t){e.exports=function(){try{return XLSX}catch(e){return{}}}()},function(e,t){e.exports=function(){try{return mapv}catch(e){return{}}}()},function(e,t){e.exports=function(){try{return turf}catch(e){return{}}}()},function(e,t,n){"use strict";var r=n(9);function i(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(o,this,t),this.length=this._features.length}function o(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){var t=null,n=e.readVarint()+e.pos;for(;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}e.exports=i,i.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new r(this._pbf,t,this.extent,this._keys,this._values)}},function(e,t,n){"use strict";var r=n(23);function i(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(o,this,t)}function o(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){var n=e.readVarint()+e.pos;for(;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function a(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)t=e[i],r+=((n=e[a]).x-t.x)*(t.y+n.y);return r}e.exports=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,i=1,o=0,a=0,s=0,l=[];e.pos<n;){if(o<=0){var u=e.readVarint();i=7&u,o=u>>3}if(o--,1===i||2===i)a+=e.readSVarint(),s+=e.readSVarint(),1===i&&(t&&l.push(t),t=[]),t.push(new r(a,s));else{if(7!==i)throw new Error("unknown command "+i);t&&t.push(t[0].clone())}}return t&&l.push(t),l},i.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;e.pos<t;){if(r<=0){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)i+=e.readSVarint(),o+=e.readSVarint(),i<a&&(a=i),i>s&&(s=i),o<l&&(l=o),o>u&&(u=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,u]},i.prototype.toGeoJSON=function(e,t,n){var r,o,s=this.extent*Math.pow(2,n),l=this.extent*e,u=this.extent*t,c=this.loadGeometry(),f=i.types[this.type];function h(e){for(var t=0;t<e.length;t++){var n=e[t],r=180-360*(n.y+u)/s;e[t]=[360*(n.x+l)/s-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(r=0;r<c.length;r++)p[r]=c[r][0];h(c=p);break;case 2:for(r=0;r<c.length;r++)h(c[r]);break;case 3:for(c=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var s=a(e[o]);0!==s&&(void 0===r&&(r=s<0),r===s<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}n&&i.push(n);return i}(c),r=0;r<c.length;r++)for(o=0;o<c[r].length;o++)h(c[r][o])}1===c.length?c=c[0]:f="Multi"+f;var y={type:"Feature",geometry:{type:f,coordinates:c},properties:this.properties};return"id"in this&&(y.id=this.id),y}},function(e,t){e.exports=function(){try{return elasticsearch}catch(e){return{}}}()},function(e,t,n){(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=9007199254740991,i="[object Arguments]",o="[object Function]",a="[object GeneratorFunction]",s="[object Map]",l="[object Set]",u=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,f="object"==(void 0===t?"undefined":n(t))&&t&&t.Object===Object&&t,h="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,p=f||h||Function("return this")();function y(e,t){return function(e,t){for(var n=-1,r=e?e.length:0,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(t,function(t){return[t,e[t]]})}var d,m,v,g=Function.prototype,b=Object.prototype,S=p["__core-js_shared__"],_=(d=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",w=g.toString,O=b.hasOwnProperty,x=b.toString,C=RegExp("^"+w.call(O).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=b.propertyIsEnumerable,T=(m=Object.keys,v=Object,function(e){return m(v(e))}),E=G(p,"DataView"),k=G(p,"Map"),M=G(p,"Promise"),A=G(p,"Set"),L=G(p,"WeakMap"),j=J(E),R=J(k),N=J(M),I=J(A),D=J(L);function F(e,t){var r=H(e)||function(e){return function(e){return function(e){return!!e&&"object"==n(e)}(e)&&q(e)}(e)&&O.call(e,"callee")&&(!P.call(e,"callee")||x.call(e)==i)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],o=r.length,a=!!o;for(var s in e)!t&&!O.call(e,s)||a&&("length"==s||V(s,o))||r.push(s);return r}function B(e){return!(!Y(e)||_&&_ in e)&&(W(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?C:u).test(J(e))}function U(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||b,t!==r)return T(e);var t,n,r,i=[];for(var o in Object(e))O.call(e,o)&&"constructor"!=o&&i.push(o);return i}function G(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return B(n)?n:void 0}var z=function(e){return x.call(e)};function V(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||c.test(e))&&e>-1&&e%1==0&&e<t}function J(e){if(null!=e){try{return w.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(E&&"[object DataView]"!=z(new E(new ArrayBuffer(1)))||k&&z(new k)!=s||M&&"[object Promise]"!=z(M.resolve())||A&&z(new A)!=l||L&&"[object WeakMap]"!=z(new L))&&(z=function(e){var t=x.call(e),n="[object Object]"==t?e.constructor:void 0,r=n?J(n):void 0;if(r)switch(r){case j:return"[object DataView]";case R:return s;case N:return"[object Promise]";case I:return l;case D:return"[object WeakMap]"}return t});var H=Array.isArray;function q(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!W(e)}function W(e){var t=Y(e)?x.call(e):"";return t==o||t==a}function Y(e){var t=n(e);return!!e&&("object"==t||"function"==t)}var Q,X=(Q=function(e){return q(e)?F(e):U(e)},function(e){var t,n,r,i=z(e);return i==s?(t=e,n=-1,r=Array(t.size),t.forEach(function(e,t){r[++n]=[t,e]}),r):i==l?function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}(e):y(e,Q(e))});e.exports=X}).call(this,n(2))},function(e,t,n){"use strict";e.exports=i;var r=n(21);function i(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function a(e){return e.type===i.Bytes?e.readVarint()+e.pos:e.pos+1}function s(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function l(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function u(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function c(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function f(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function h(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function p(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function y(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function d(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function m(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function v(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function g(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function b(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function S(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=g(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=S(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=g(this.buf,this.pos)+4294967296*g(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=g(this.buf,this.pos)+4294967296*S(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,o=n.buf;if(i=o[n.pos++],r=(112&i)>>4,i<128)return s(e,r,t);if(i=o[n.pos++],r|=(127&i)<<3,i<128)return s(e,r,t);if(i=o[n.pos++],r|=(127&i)<<10,i<128)return s(e,r,t);if(i=o[n.pos++],r|=(127&i)<<17,i<128)return s(e,r,t);if(i=o[n.pos++],r|=(127&i)<<24,i<128)return s(e,r,t);if(i=o[n.pos++],r|=(1&i)<<31,i<128)return s(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&o?function(e,t,n){return o.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){var r="",i=t;for(;i<n;){var o,a,s,l=e[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>n)break;1===c?l<128&&(u=l):2===c?128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),i+=c}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==i.Bytes)return e.push(this.readVarint(t));var n=a(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==i.Bytes)return e.push(this.readSVarint());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==i.Bytes)return e.push(this.readBoolean());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==i.Bytes)return e.push(this.readFloat());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==i.Bytes)return e.push(this.readDouble());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==i.Bytes)return e.push(this.readFixed32());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==i.Bytes)return e.push(this.readSFixed32());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==i.Bytes)return e.push(this.readFixed64());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==i.Bytes)return e.push(this.readSFixed64());var t=a(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===i.Varint)for(;this.buf[this.pos++]>127;);else if(t===i.Bytes)this.pos=this.readVarint()+this.pos;else if(t===i.Fixed32)this.pos+=4;else{if(t!==i.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),b(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),b(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),b(this.buf,-1&e,this.pos),b(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),b(this.buf,-1&e,this.pos),b(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0));if(e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos]=127&e}(n,0,t),function(e,t){var n=(7&e)<<4;if(t.buf[t.pos++]|=n|((e>>>=3)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;t.buf[t.pos++]=127&e}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&l(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),r.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),r.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&l(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,i.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,u,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,c,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,p,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,f,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,h,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,y,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,d,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,m,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,v,t)},writeBytesField:function(e,t){this.writeTag(e,i.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,i.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,i.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,i.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,i.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,i.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,i.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,i.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,i.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,i.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}}},function(e,t,n){e.exports.VectorTile=n(22),e.exports.VectorTileFeature=n(9),e.exports.VectorTileLayer=n(8)},function(e,t,n){n(24),e.exports=n(25)},function(e,t,n){(function(r,i){var o,a,s;function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}s=function(){"use strict";function e(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})}var t=setTimeout;function n(e){return Boolean(e&&void 0!==e.length)}function o(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function s(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void c(t.promise,e)}u(t.promise,r)}else(1===e._state?u:c)(t.promise,e._value)})):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===l(t)||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void f(e);if("function"==typeof n)return void h((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,f(e)}catch(t){c(e,t)}var r,i}function c(e,t){e._state=2,e._value=t,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&a._immediateFn(function(){e._handled||a._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)s(e,e._deferreds[t]);e._deferreds=null}function h(e,t){var n=!1;try{e(function(e){n||(n=!0,u(t,e))},function(e){n||(n=!0,c(t,e))})}catch(e){if(n)return;n=!0,c(t,e)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(o);return s(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},a.prototype.finally=e,a.all=function(e){return new a(function(t,r){if(!n(e))return r(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var o=i.length;function a(e,n){try{if(n&&("object"===l(n)||"function"==typeof n)){var s=n.then;if("function"==typeof s)return void s.call(n,function(t){a(e,t)},r)}i[e]=n,0==--o&&t(i)}catch(e){r(e)}}for(var s=0;s<i.length;s++)a(s,i[s])})},a.resolve=function(e){return e&&"object"===l(e)&&e.constructor===a?e:new a(function(t){t(e)})},a.reject=function(e){return new a(function(t,n){n(e)})},a.race=function(e){return new a(function(t,r){if(!n(e))return r(new TypeError("Promise.race accepts an array"));for(var i=0,o=e.length;i<o;i++)a.resolve(e[i]).then(t,r)})},a._immediateFn="function"==typeof r&&function(e){r(e)}||function(e){t(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var p=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i)return i;throw new Error("unable to locate global object")}();"Promise"in p?p.Promise.prototype.finally||(p.Promise.prototype.finally=e):p.Promise=a},"object"===l(t)&&void 0!==e?s():void 0===(a="function"==typeof(o=s)?o.call(t,n,t,e):o)||(e.exports=a)}).call(this,n(16).setImmediate,n(2))},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(17),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(2))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,s,l=1,u={},c=!1,f=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){y(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){y(e.data)},r=function(e){o.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){y(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(y,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&y(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[l]=i,r(l),l++},h.clearImmediate=p}function p(e){delete u[e]}function y(e){if(c)setTimeout(y,0,e);else{var t=u[e];if(t){c=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{p(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(2),n(18))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l,u=[],c=!1,f=-1;function h(){c&&l&&(c=!1,l.length?u=l.concat(u):f=-1,u.length&&p())}function p(){if(!c){var e=s(h);c=!0;for(var t=u.length;t;){for(l=u,u=[];++f<t;)l&&l[f].run();f=-1,t=u.length}l=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function d(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new y(e,t)),1!==u.length||c||s(p)},y.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=d,i.addListener=d,i.once=d,i.off=d,i.removeListener=d,i.removeAllListeners=d,i.emit=d,i.prependListener=d,i.prependOnceListener=d,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){!function(t){"use strict";if(t.__disableNativeFetch||!t.fetch){s.prototype.append=function(e,t){e=o(e),t=a(t);var n=this.map[e];n||(n=[],this.map[e]=n),n.push(t)},s.prototype.delete=function(e){delete this.map[o(e)]},s.prototype.get=function(e){var t=this.map[o(e)];return t?t[0]:null},s.prototype.getAll=function(e){return this.map[o(e)]||[]},s.prototype.has=function(e){return this.map.hasOwnProperty(o(e))},s.prototype.set=function(e,t){this.map[o(e)]=[a(t)]},s.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){e.call(t,r,n,this)},this)},this)};var n={blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t},r=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this)},f.call(h.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var i=[301,302,303,307,308];y.redirect=function(e,t){if(-1===i.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},t.Headers=s,t.Request=h,t.Response=y,t.fetch=function(e,t){return new Promise(function(r,i){var o;o=h.prototype.isPrototypeOf(e)&&!t?e:new h(e,t);var a=new XMLHttpRequest;var l=!1;function u(){if(4===a.readyState){var e=1223===a.status?204:a.status;if(e<100||e>599){if(l)return;return l=!0,void i(new TypeError("Network request failed"))}var t={status:e,statusText:a.statusText,headers:function(e){var t=new s;return e.getAllResponseHeaders().trim().split("\n").forEach(function(e){var n=e.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();t.append(r,i)}),t}(a),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},n="response"in a?a.response:a.responseText;l||(l=!0,r(new y(n,t)))}}a.onreadystatechange=u,a.onload=u,a.onerror=function(){l||(l=!0,i(new TypeError("Network request failed")))},a.open(o.method,o.url,!0);try{"include"===o.credentials&&("withCredentials"in a?a.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(e){console&&console.warn&&console.warn("set withCredentials error:"+e)}"responseType"in a&&n.blob&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0,e.exports&&(e.exports=t.fetch)}function o(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function a(e){return"string"!=typeof e&&(e=String(e)),e}function s(e){this.map={},e instanceof s?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function u(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function c(e){var t=new FileReader;return t.readAsArrayBuffer(e),u(t)}function f(){return this.bodyUsed=!1,this._initBody=function(e,t){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(n.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e,this._options=t;else if(n.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!n.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText=""},n.blob?(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var e,t,n,r,i,o,a,s=l(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,t=this._options,n=new FileReader,r=t.headers.map["content-type"]?t.headers.map["content-type"].toString():"",i=/charset\=[0-9a-zA-Z\-\_]*;?/,o=e.type.match(i)||r.match(i),a=[e],o&&a.push(o[0].replace(/^charset\=/,"").replace(/;$/,"")),n.readAsText.apply(n,a),u(n);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=l(this);return e||Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(e,t){var n,i,o=(t=t||{}).body;if(h.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new s(e.headers)),this.method=e.method,this.mode=e.mode,o||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new s(t.headers)),this.method=(n=t.method||this.method||"GET",i=n.toUpperCase(),r.indexOf(i)>-1?i:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o,t)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function y(e,t){t||(t={}),this._initBody(e,t),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof s?t.headers:new s(t.headers),this.url=t.url||""}}("undefined"!=typeof self?self:this)},function(e,t){function n(e){return Object.prototype.toString.call(e)}function r(e){return"[object String]"===n(e)}e.exports={getObjectType:n,isDate:function(e){return"[object Date]"===n(e)},isString:r,isDateString:function(e){return r(e)&&!isNaN(Date.parse(e))},parseDateFromString:function(e){return Date.parse(e)},isNumber:function(e){return"number"==typeof e}}},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,f=n?i-1:0,h=n?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,y=r?1:-1,d=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+f>=1?h/l:h*Math.pow(2,1-f))*l>=2&&(a++,l/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*l-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=y,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=y,a/=256,u-=8);e[n+p-y]|=128*d}},function(e,t,n){"use strict";var r=n(8);function i(e,t,n){if(3===e){var i=new r(n,n.readVarint()+n.pos);i.length&&(t[i.name]=i)}}e.exports=function(e,t){this.layers=e.readFields(i,{},t)}},function(e,t,n){"use strict";function r(e,t){this.x=e,this.y=t}e.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.x+n*(this.x-t.x)-r*(this.y-t.y),o=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(e){return e instanceof r?e:Array.isArray(e)?new r(e[0],e[1]):e}},function(e,t,n){"use strict";n.r(t);
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var r=window.SuperMap=window.SuperMap||{};r.Components=window.SuperMap.Components||{};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var i=r.DataFormat={GEOJSON:"GEOJSON",ISERVER:"ISERVER"},o=r.ServerType={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"},a=r.GeometryType={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",POINTEPS:"POINTEPS",LINEEPS:"LINEEPS",REGIONEPS:"REGIONEPS",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN",GEOCOMPOUND:"GEOCOMPOUND"},s=r.QueryOption={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"},l=r.JoinType={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"},u=r.SpatialQueryMode={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"},c=r.SpatialRelationType={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"},f=r.MeasureMode={DISTANCE:"DISTANCE",AREA:"AREA"},h=r.Unit={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},p=r.BufferRadiusUnit={CENTIMETER:"CENTIMETER",DECIMETER:"DECIMETER",FOOT:"FOOT",INCH:"INCH",KILOMETER:"KILOMETER",METER:"METER",MILE:"MILE",MILLIMETER:"MILLIMETER",YARD:"YARD"},y=r.EngineType={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"},d=r.ThemeGraphTextFormat={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"},m=r.ThemeGraphType={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"},v=r.GraphAxesTextDisplayMode={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"},g=r.GraduatedMode={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"},b=r.RangeMode={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"},S=r.ThemeType={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"},_=r.ColorGradientType={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"},w=r.TextAlignment={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"},O=r.FillGradientMode={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"},x=r.AlongLineDirection={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"},C=r.LabelBackShape={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"},P=r.LabelOverLengthMode={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"},T=r.DirectionType={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"},E=r.SideType={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"},k=r.SupplyCenterType={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"},M=r.TurnType={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"},A=r.BufferEndType={FLAT:"FLAT",ROUND:"ROUND"},L=r.OverlayOperationType={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"},j=r.OutputType={INDEXEDHDFS:"INDEXEDHDFS",UDB:"UDB",MONGODB:"MONGODB",PG:"PG"},R=r.SmoothMethod={BSPLINE:"BSPLINE",POLISH:"POLISH"},N=r.SurfaceAnalystMethod={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"},I=r.DataReturnMode={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"},D=r.EditType={ADD:"add",UPDATE:"update",DELETE:"delete"},F=r.TransferTactic={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"},B=r.TransferPreference={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"},U=r.GridType={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"},G=r.ColorSpaceType={CMYK:"CMYK",RGB:"RGB"},z=r.LayerType={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"},V=r.UGCLayerType={THEME:"THEME",VECTOR:"VECTOR",GRID:"GRID",IMAGE:"IMAGE"},J=r.StatisticMode={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"},H=r.PixelFormat={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"},q=r.SearchMode={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"},W=r.InterpolationAlgorithmType={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"},Y=r.VariogramMode={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"},Q=r.Exponent={EXP1:"EXP1",EXP2:"EXP2"},X=r.ClientType={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"},K=r.ChartType={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"},Z=r.ClipAnalystMode={CLIP:"clip",INTERSECT:"intersect"},$=r.AnalystAreaUnit={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"},ee=r.AnalystSizeUnit={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"},te=r.StatisticAnalystMode={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"},ne=r.SummaryType={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"},re=r.TopologyValidatorRule={REGIONNOOVERLAP:"REGIONNOOVERLAP",REGIONNOOVERLAPWITH:"REGIONNOOVERLAPWITH",REGIONCONTAINEDBYREGION:"REGIONCONTAINEDBYREGION",REGIONCOVEREDBYREGION:"REGIONCOVEREDBYREGION",LINENOOVERLAP:"LINENOOVERLAP",LINENOOVERLAPWITH:"LINENOOVERLAPWITH",POINTNOIDENTICAL:"POINTNOIDENTICAL"},ie=r.AggregationType={GEOHASH_GRID:"geohash_grid",FILTER:"filter"},oe=r.AggregationQueryBuilderType={GEO_BOUNDING_BOX:"geo_bounding_box"},ae=r.GetFeatureMode={BOUNDS:"BOUNDS",BUFFER:"BUFFER",ID:"ID",SPATIAL:"SPATIAL",SQL:"SQL"},se=r.RasterFunctionType={NDVI:"NDVI",HILLSHADE:"HILLSHADE"};r.ResourceType={MAP:"MAP",SERVICE:"SERVICE",SCENE:"SCENE",DATA:"DATA",INSIGHTS_WORKSPACE:"INSIGHTS_WORKSPACE",MAP_DASHBOARD:"MAP_DASHBOARD"},r.OrderBy={UPDATETIME:"UPDATETIME",HEATLEVEL:"HEATLEVEL",RELEVANCE:"RELEVANCE"},r.OrderType={ASC:"ASC",DESC:"DESC"},r.SearchType={PUBLIC:"PUBLIC",MY_RES:"MY_RES",MYGROUP_RES:"MYGROUP_RES",MYDEPARTMENT_RES:"MYDEPARTMENT_RES",SHARETOME_RES:"SHARETOME_RES"},r.AggregationTypes={TAG:"TAG",TYPE:"TYPE"},r.PermissionType={SEARCH:"SEARCH",READ:"READ",READWRITE:"READWRITE",DELETE:"DELETE",DOWNLOAD:"DOWNLOAD"},r.EntityType={DEPARTMENT:"DEPARTMENT",GROUP:"GROUP",IPORTALGROUP:"IPORTALGROUP",ROLE:"ROLE",USER:"USER"},r.DataItemType={WORKSPACE:"WORKSPACE",UDB:"UDB",SHP:"SHP",EXCEL:"EXCEL",CSV:"CSV",GEOJSON:"GEOJSON",SMTILES:"SMTILES",SVTILES:"SVTILES",MBTILES:"MBTILES",TPK:"TPK",UGCV5:"UGCV5",UGCV5_MVT:"UGCV5_MVT",JSON:"JSON"},r.WebExportFormatType={PNG:"PNG",PDF:"PDF"},r.WebScaleOrientationType={HORIZONTALLABELSBELOW:"HORIZONTALLABELSBELOW",HORIZONTALLABELSABOVE:"HORIZONTALLABELSABOVE",VERTICALLABELSLEFT:"VERTICALLABELSLEFT",VERTICALLABELSRIGHT:"VERTICALLABELSRIGHT"},r.WebScaleType={LINE:"LINE",BAR:"BAR",BAR_SUB:"BAR_SUB"},r.WebScaleUnit={METER:"METER",FOOT:"FOOT",DEGREES:"DEGREES"};function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ue=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.w=t?parseFloat(t):0,this.h=t?parseFloat(n):0,this.CLASS_NAME="SuperMap.Size"}var t,n,r;return t=e,(n=[{key:"toString",value:function(){return"w="+this.w+",h="+this.h}},{key:"clone",value:function(){return new e(this.w,this.h)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.w===e.w&&this.h===e.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(e.w)&&isNaN(e.h)),t}},{key:"destroy",value:function(){this.w=null,this.h=null}}])&&le(t.prototype,n),r&&le(t,r),e}();function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Size=ue;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fe=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t?parseFloat(t):0,this.y=n?parseFloat(n):0,this.mode=i,this.CLASS_NAME="SuperMap.Pixel",r.Pixel.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"}}var t,n,i;return t=e,(n=[{key:"toString",value:function(){return"x="+this.x+",y="+this.y}},{key:"clone",value:function(){return new e(this.x,this.y,this.mode)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"distanceTo",value:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}},{key:"add",value:function(t,n){if(null==t||null==n)throw new TypeError("Pixel.add cannot receive null values");return new e(this.x+t,this.y+n)}},{key:"offset",value:function(e){var t=this.clone();return e&&(t=this.add(e.x,e.y)),t}},{key:"destroy",value:function(){this.x=null,this.y=null,this.mode=null}}])&&ce(t.prototype,n),i&&ce(t,i),e}();r.Pixel=fe,
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
r.inherit=function(e,t){var n,i,o,a=function(){};for(a.prototype=t.prototype,e.prototype=new a,n=2,i=arguments.length;n<i;n++)"function"==typeof(o=arguments[n])&&(o=o.prototype),r.Util.extend(e.prototype,o)},r.mixin=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=function e(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=0;r<t.length;r++)a(this,new t[r](n))},i=0;i<t.length;i++){var o=t[i];a(r,o),a(r.prototype,o.prototype),a(r.prototype,new o)}return r;function a(e,t){var n=Object.getOwnPropertyNames(t);Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t)));for(var r=0;r<n.length;r++){var i=n[r];if("constructor"!==i&&"prototype"!==i&&"name"!==i&&"length"!==i){var o=Object.getOwnPropertyDescriptor(t,i);window.ActiveXObject?Object.defineProperty(e,i,o||{}):Object.defineProperty(e,i,o)}}}};var he=r.String={startsWith:function(e,t){return 0==e.indexOf(t)},contains:function(e,t){return-1!=e.indexOf(t)},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(e){for(var t=e.split("-"),n=t[0],r=1,i=t.length;r<i;r++){var o=t[r];n+=o.charAt(0).toUpperCase()+o.substring(1)}return n},format:function(e,t,n){t||(t=window);return e.replace(r.String.tokenRegEx,function(e,r){for(var i,o=r.split(/\.+/),a=0;a<o.length;a++)0==a&&(i=t),i=i[o[a]];return"function"==typeof i&&(i=n?i.apply(null,n):i()),void 0===i?"undefined":i})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(e){return r.String.numberRegEx.test(e)},numericIf:function(e){return r.String.isNumeric(e)?parseFloat(e):e}},pe=r.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(e,t){var n=0;return t>0&&(n=parseFloat(e.toPrecision(t))),n},format:function(e,t,n,i){t=void 0!==t?t:0,n=void 0!==n?n:r.Number.thousandsSeparator,i=void 0!==i?i:r.Number.decimalSeparator,null!=t&&(e=parseFloat(e.toFixed(t)));var o=e.toString().split(".");1===o.length&&null==t&&(t=0);var a,s=o[0];if(n)for(var l=/(-?[0-9]+)([0-9]{3})/;l.test(s);)s=s.replace(l,"$1"+n+"$2");if(0==t)a=s;else{var u=o.length>1?o[1]:"0";null!=t&&(u+=new Array(t-u.length+1).join("0")),a=s+i+u}return a}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(e){return pe.limitSigDigs(this,e)});var ye=r.Function={bind:function(e,t){var n=Array.prototype.slice.apply(arguments,[2]);return function(){var r=n.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(t,r)}},bindAsEventListener:function(e,t){return function(n){return e.call(t,n||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}};r.Array={filter:function(e,t,n){var r=[];if(Array.prototype.filter)r=e.filter(t,n);else{var i=e.length;if("function"!=typeof t)throw new TypeError;for(var o=0;o<i;o++)if(o in e){var a=e[o];t.call(n,a,o,e)&&r.push(a)}}return r}};function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var me,ve,ge,be=r.Util=r.Util||{};function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Util.extend=function(e,t){if(e=e||{},t){for(var n in t){var r=t[n];void 0!==r&&(e[n]=r)}!("function"==typeof window.Event&&t instanceof window.Event)&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(e.toString=t.toString)}return e},r.Util.copy=function(e,t){var n;if(e=e||{},t)for(var r in e)void 0!==(n=t[r])&&(e[r]=n)},r.Util.reset=function(e){for(var t in e=e||{})if(e.hasOwnProperty(t)){if("object"===de(e[t])&&e[t]instanceof Array){for(var n in e[t])e[t][n].destroy&&e[t][n].destroy();e[t].length=0}else"object"===de(e[t])&&e[t]instanceof Object&&e[t].destroy&&e[t].destroy();e[t]=null}},r.Util.getElement=function(){for(var e=[],t=0,n=arguments.length;t<n;t++){var r=arguments[t];if("string"==typeof r&&(r=document.getElementById(r)),1===arguments.length)return r;e.push(r)}return e},r.Util.isElement=function(e){return!(!e||1!==e.nodeType)},r.Util.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},r.Util.removeItem=function(e,t){for(var n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1);return e},r.Util.indexOf=function(e,t){if(null==e)return-1;if("function"==typeof e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},r.Util.modifyDOMElement=function(e,t,n,r,i,o,a,s){t&&(e.id=t),n&&(e.style.left=n.x+"px",e.style.top=n.y+"px"),r&&(e.style.width=r.w+"px",e.style.height=r.h+"px"),i&&(e.style.position=i),o&&(e.style.border=o),a&&(e.style.overflow=a),parseFloat(s)>=0&&parseFloat(s)<1?(e.style.filter="alpha(opacity="+100*s+")",e.style.opacity=s):1===parseFloat(s)&&(e.style.filter="",e.style.opacity="")},r.Util.applyDefaults=function(e,t){e=e||{};var n="function"==typeof window.Event&&t instanceof window.Event;for(var r in t)(void 0===e[r]||!n&&t.hasOwnProperty&&t.hasOwnProperty(r)&&!e.hasOwnProperty(r))&&(e[r]=t[r]);return!n&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")&&(e.toString=t.toString),e},r.Util.getParameterString=function(e){var t=[];for(var n in e){var r,i=e[n];if(null!=i&&"function"!=typeof i)r=Array.isArray(i)||"[object Object]"===i.toString()?encodeURIComponent(JSON.stringify(i)):encodeURIComponent(i),t.push(encodeURIComponent(n)+"="+r)}return t.join("&")},r.Util.urlAppend=function(e,t){var n=e;if(t){0===t.indexOf("?")&&(t=t.substring(1));var r=(e+" ").split(/[?&]/);n+=" "===r.pop()?t:r.length?"&"+t:"?"+t}return n},r.Util.urlPathAppend=function(e,t){var n=e;if(!t)return n;0===t.indexOf("/")&&(t=t.substring(1));var r=e.split("?");return r[0].indexOf("/",r[0].length-1)<0&&(r[0]+="/"),n="".concat(r[0]).concat(t).concat(r.length>1?"?".concat(r[1]):"")},r.Util.DEFAULT_PRECISION=14,r.Util.toFloat=function(e,t){return null==t&&(t=r.Util.DEFAULT_PRECISION),"number"!=typeof e&&(e=parseFloat(e)),0===t?e:parseFloat(e.toPrecision(t))},r.Util.rad=function(e){return e*Math.PI/180},r.Util.getParameters=function(e){e=null===e||void 0===e?window.location.href:e;var t="";if(r.String.contains(e,"?")){var n=e.indexOf("?")+1,i=r.String.contains(e,"#")?e.indexOf("#"):e.length;t=e.substring(n,i)}for(var o={},a=t.split(/[&;]/),s=0,l=a.length;s<l;++s){var u=a[s].split("=");if(u[0]){var c=u[0];try{c=decodeURIComponent(c)}catch(e){c=unescape(c)}var f=(u[1]||"").replace(/\+/g," ");try{f=decodeURIComponent(f)}catch(e){f=unescape(f)}1==(f=f.split(",")).length&&(f=f[0]),o[c]=f}}return o},r.Util.lastSeqID=0,r.Util.createUniqueID=function(e){return null==e&&(e="id_"),r.Util.lastSeqID+=1,e+r.Util.lastSeqID},r.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36},r.INCHES_PER_UNIT.in=r.INCHES_PER_UNIT.inches,r.INCHES_PER_UNIT.degrees=r.INCHES_PER_UNIT.dd,r.INCHES_PER_UNIT.nmi=1852*r.INCHES_PER_UNIT.m,r.METERS_PER_INCH=.0254000508001016,r.Util.extend(r.INCHES_PER_UNIT,{Inch:r.INCHES_PER_UNIT.inches,Meter:1/r.METERS_PER_INCH,Foot:.3048006096012192/r.METERS_PER_INCH,IFoot:.3048/r.METERS_PER_INCH,ClarkeFoot:.3047972651151/r.METERS_PER_INCH,SearsFoot:.30479947153867626/r.METERS_PER_INCH,GoldCoastFoot:.3047997101815088/r.METERS_PER_INCH,IInch:.0254/r.METERS_PER_INCH,MicroInch:254e-7/r.METERS_PER_INCH,Mil:2.54e-8/r.METERS_PER_INCH,Centimeter:.01/r.METERS_PER_INCH,Kilometer:1e3/r.METERS_PER_INCH,Yard:.9144018288036576/r.METERS_PER_INCH,SearsYard:.914398414616029/r.METERS_PER_INCH,IndianYard:.9143985307444408/r.METERS_PER_INCH,IndianYd37:.91439523/r.METERS_PER_INCH,IndianYd62:.9143988/r.METERS_PER_INCH,IndianYd75:.9143985/r.METERS_PER_INCH,IndianFoot:.30479951/r.METERS_PER_INCH,IndianFt37:.30479841/r.METERS_PER_INCH,IndianFt62:.3047996/r.METERS_PER_INCH,IndianFt75:.3047995/r.METERS_PER_INCH,Mile:1609.3472186944373/r.METERS_PER_INCH,IYard:.9144/r.METERS_PER_INCH,IMile:1609.344/r.METERS_PER_INCH,NautM:1852/r.METERS_PER_INCH,"Lat-66":110943.31648893273/r.METERS_PER_INCH,"Lat-83":110946.25736872235/r.METERS_PER_INCH,Decimeter:.1/r.METERS_PER_INCH,Millimeter:.001/r.METERS_PER_INCH,Dekameter:10/r.METERS_PER_INCH,Decameter:10/r.METERS_PER_INCH,Hectometer:100/r.METERS_PER_INCH,GermanMeter:1.0000135965/r.METERS_PER_INCH,CaGrid:.999738/r.METERS_PER_INCH,ClarkeChain:20.1166194976/r.METERS_PER_INCH,GunterChain:20.11684023368047/r.METERS_PER_INCH,BenoitChain:20.116782494375872/r.METERS_PER_INCH,SearsChain:20.11676512155/r.METERS_PER_INCH,ClarkeLink:.201166194976/r.METERS_PER_INCH,GunterLink:.2011684023368047/r.METERS_PER_INCH,BenoitLink:.20116782494375873/r.METERS_PER_INCH,SearsLink:.2011676512155/r.METERS_PER_INCH,Rod:5.02921005842012/r.METERS_PER_INCH,IntnlChain:20.1168/r.METERS_PER_INCH,IntnlLink:.201168/r.METERS_PER_INCH,Perch:5.02921005842012/r.METERS_PER_INCH,Pole:5.02921005842012/r.METERS_PER_INCH,Furlong:201.1684023368046/r.METERS_PER_INCH,Rood:3.778266898/r.METERS_PER_INCH,CapeFoot:.3047972615/r.METERS_PER_INCH,Brealey:375/r.METERS_PER_INCH,ModAmFt:.304812252984506/r.METERS_PER_INCH,Fathom:1.8288/r.METERS_PER_INCH,"NautM-UK":1853.184/r.METERS_PER_INCH,"50kilometers":5e4/r.METERS_PER_INCH,"150kilometers":15e4/r.METERS_PER_INCH}),r.Util.extend(r.INCHES_PER_UNIT,{mm:r.INCHES_PER_UNIT.Meter/1e3,cm:r.INCHES_PER_UNIT.Meter/100,dm:100*r.INCHES_PER_UNIT.Meter,km:1e3*r.INCHES_PER_UNIT.Meter,kmi:r.INCHES_PER_UNIT.nmi,fath:r.INCHES_PER_UNIT.Fathom,ch:r.INCHES_PER_UNIT.IntnlChain,link:r.INCHES_PER_UNIT.IntnlLink,"us-in":r.INCHES_PER_UNIT.inches,"us-ft":r.INCHES_PER_UNIT.Foot,"us-yd":r.INCHES_PER_UNIT.Yard,"us-ch":r.INCHES_PER_UNIT.GunterChain,"us-mi":r.INCHES_PER_UNIT.Mile,"ind-yd":r.INCHES_PER_UNIT.IndianYd37,"ind-ft":r.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/r.METERS_PER_INCH}),r.DOTS_PER_INCH=96,r.Util.normalizeScale=function(e){return e>1?1/e:e},r.Util.getResolutionFromScale=function(e,t){var n;e&&(null==t&&(t="degrees"),n=1/(r.Util.normalizeScale(e)*r.INCHES_PER_UNIT[t]*r.DOTS_PER_INCH));return n},r.Util.getScaleFromResolution=function(e,t){return null==t&&(t="degrees"),e*r.INCHES_PER_UNIT[t]*r.DOTS_PER_INCH},r.IS_GECKO=-1===(me=navigator.userAgent.toLowerCase()).indexOf("webkit")&&-1!==me.indexOf("gecko"),r.Browser=function(){var e,t="",n="",r="pc",i=navigator.userAgent.toLowerCase();return i.indexOf("msie")>-1||i.indexOf("trident")>-1&&i.indexOf("rv")>-1?(t="msie",e=i.match(/msie ([\d.]+)/)||i.match(/rv:([\d.]+)/)):i.indexOf("chrome")>-1?(t="chrome",e=i.match(/chrome\/([\d.]+)/)):i.indexOf("firefox")>-1?(t="firefox",e=i.match(/firefox\/([\d.]+)/)):i.indexOf("opera")>-1?(t="opera",e=i.match(/version\/([\d.]+)/)):i.indexOf("safari")>-1&&(t="safari",e=i.match(/version\/([\d.]+)/)),n=e?e[1]:"",i.indexOf("ipad")>-1||i.indexOf("ipod")>-1||i.indexOf("iphone")>-1?r="apple":i.indexOf("android")>-1&&(n=(e=i.match(/version\/([\d.]+)/))?e[1]:"",r="android"),{name:t,version:n,device:r}}(),r.Util.getBrowser=function(){return r.Browser},r.Util.isSupportCanvas=(ve=!0,ge=r.Util.getBrowser(),document.createElement("canvas").getContext?("firefox"===ge.name&&parseFloat(ge.version)<5&&(ve=!1),"safari"===ge.name&&parseFloat(ge.version)<4&&(ve=!1),"opera"===ge.name&&parseFloat(ge.version)<10&&(ve=!1),"msie"===ge.name&&parseFloat(ge.version)<9&&(ve=!1)):ve=!1,ve),r.Util.supportCanvas=function(){return r.Util.isSupportCanvas},r.INCHES_PER_UNIT.degree=r.INCHES_PER_UNIT.dd,r.INCHES_PER_UNIT.meter=r.INCHES_PER_UNIT.m,r.INCHES_PER_UNIT.foot=r.INCHES_PER_UNIT.ft,r.INCHES_PER_UNIT.inch=r.INCHES_PER_UNIT.inches,r.INCHES_PER_UNIT.mile=r.INCHES_PER_UNIT.mi,r.INCHES_PER_UNIT.kilometer=r.INCHES_PER_UNIT.km,r.INCHES_PER_UNIT.yard=r.INCHES_PER_UNIT.yd,r.Util.isInTheSameDomain=function(e){if(!e)return!0;var t=e.indexOf("//"),n=document.location.toString(),r=n.indexOf("//");if(-1===t)return!0;var i,o=i=e.substring(0,t),a=n.substring(r+2);r=a.indexOf("/");var s=a.indexOf(":"),l=a.substring(0,r),u=document.location.protocol;if(-1!==s||(l+=":"+("http:"===u.toLowerCase()?80:443)),u.toLowerCase()!==o.toLowerCase())return!1;var c=(o=e.substring(t+2)).indexOf(":");t=o.indexOf("/");var f,h=o.substring(0,t);return-1!==c?f=o.substring(0,c):(f=o.substring(0,t),h+=":"+("http:"===i.toLowerCase()?80:443)),f===document.domain&&h===l},r.Util.calculateDpi=function(e,t,n,r,i){if(e&&t&&n){var o,a=e.getWidth(),s=e.getHeight(),l=t.w,u=t.h;if(i=i||6378137,"degree"===(r=r||"degrees").toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()){var c=a/l,f=s/u;o=254/(c>f?c:f)/n/(2*Math.PI*i/360)/1e4}else{o=254/(a/l)/n/1e4}return o}},r.Util.toJSON=function(e){var t=e;if(null==t)return null;switch(t.constructor){case String:return t=(t=(t=(t=(t=(t=(t='"'+t.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var n=[],i=0,o=t.length;i<o;i++)n.push(r.Util.toJSON(t[i]));return"["+n.join(",")+"]";case Number:return isFinite(t)?String(t):null;case Boolean:return String(t);case Date:return"{'__type':\"System.DateTime\",'Year':"+t.getFullYear()+",'Month':"+(t.getMonth()+1)+",'Day':"+t.getDate()+",'Hour':"+t.getHours()+",'Minute':"+t.getMinutes()+",'Second':"+t.getSeconds()+",'Millisecond':"+t.getMilliseconds()+",'TimezoneOffset':"+t.getTimezoneOffset()+"}";default:if(null!=t.toJSON&&"function"==typeof t.toJSON)return t.toJSON();if("object"===de(t)){if(t.length){for(var a=[],s=0,l=t.length;s<l;s++)a.push(r.Util.toJSON(t[s]));return"["+a.join(",")+"]"}var u=[];for(var c in t)"function"!=typeof t[c]&&"CLASS_NAME"!==c&&"parent"!==c&&u.push("'"+c+"':"+r.Util.toJSON(t[c]));return u.length>0?"{"+u.join(",")+"}":"{}"}return t.toString()}},r.Util.getResolutionFromScaleDpi=function(e,t,n,i){return i=i||6378137,n=n||"",e>0&&t>0?(e=r.Util.normalizeScale(e),"degree"===n.toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()?254/t/e/(2*Math.PI*i/360)/1e4:254/t/e/1e4):-1},r.Util.getScaleFromResolutionDpi=function(e,t,n,r){return r=r||6378137,n=n||"",e>0&&t>0?"degree"===n.toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()?254/t/e/(2*Math.PI*r/360)/1e4:254/t/e/1e4:-1},r.Util.transformResult=function(e){return e.responseText&&"string"==typeof e.responseText&&(e=JSON.parse(e.responseText)),e},r.Util.copyAttributes=function(e,t){if(e=e||{},t)for(var n in t){var r=t[n];void 0!==r&&"CLASS_NAME"!==n&&"function"!=typeof r&&(e[n]=r)}return e},r.Util.copyAttributesWithClip=function(e,t,n){if(e=e||{},t)for(var r in t){var i=!1;if(n&&n.length)for(var o=0,a=n.length;o<a;o++)if(r===n[o]){i=!0;break}if(!0!==i){var s=t[r];void 0!==s&&"CLASS_NAME"!==r&&"function"!=typeof s&&(e[r]=s)}}return e},r.Util.cloneObject=function(e){if(null===e||"object"!==de(e))return e;if(e instanceof Date){var t=new Date;return t.setTime(e.getTime()),t}if(e instanceof Array)return e.slice(0);if(e instanceof Object){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=r.Util.cloneObject(e[i]));return n}throw new Error("Unable to copy obj! Its type isn't supported.")},r.Util.lineIntersection=function(e,t,n,i){var o,a,s=null,l=(i.x-n.x)*(e.y-n.y)-(i.y-n.y)*(e.x-n.x),u=(t.x-e.x)*(e.y-n.y)-(t.y-e.y)*(e.x-n.x),c=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y);if(0!=c)a=u/c,s=(o=l/c)>=0&&a<=1&&o<=1&&a>=0?new r.Geometry.Point(e.x+o*(t.x-e.x),e.y+o*(t.y-e.y)):"No Intersection";else if(0==l&&0==u){var f=Math.max(e.y,t.y),h=Math.min(e.y,t.y),p=Math.max(e.x,t.x),y=Math.min(e.x,t.x);s=(n.y>=h&&n.y<=f||i.y>=h&&i.y<=f)&&n.x>=y&&n.x<=p||i.x>=y&&i.x<=p?"Coincident":"Parallel"}else s="Parallel";return s},r.Util.getTextBounds=function(e,t,n){document.body.appendChild(n),n.style.width="auto",n.style.height="auto",e.fontSize&&(n.style.fontSize=e.fontSize),e.fontFamily&&(n.style.fontFamily=e.fontFamily),e.fontWeight&&(n.style.fontWeight=e.fontWeight),n.style.position="relative",n.style.visibility="hidden",n.style.display="inline-block",n.innerHTML=t;var r=n.clientWidth,i=n.clientHeight;return document.body.removeChild(n),{textWidth:r,textHeight:i}};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var _e=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),be.isArray(t)&&(n=t[1],t=t[0]),this.lon=t?be.toFloat(t):0,this.lat=n?be.toFloat(n):0,this.CLASS_NAME="SuperMap.LonLat"}var t,n,r;return t=e,r=[{key:"fromString",value:function(t){var n=t.split(",");return new e(n[0],n[1])}},{key:"fromArray",value:function(t){var n=be.isArray(t);return new e(n&&t[0],n&&t[1])}}],(n=[{key:"toString",value:function(){return"lon="+this.lon+",lat="+this.lat}},{key:"toShortString",value:function(){return this.lon+","+this.lat}},{key:"clone",value:function(){return new e(this.lon,this.lat)}},{key:"add",value:function(t,n){if(null==t||null==n)throw new TypeError("LonLat.add cannot receive null values");return new e(this.lon+be.toFloat(t),this.lat+be.toFloat(n))}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.lon===e.lon&&this.lat===e.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(e.lon)&&isNaN(e.lat)),t}},{key:"wrapDateLine",value:function(e){var t=this.clone();if(e){for(;t.lon<e.left;)t.lon+=e.getWidth();for(;t.lon>e.right;)t.lon-=e.getWidth()}return t}},{key:"destroy",value:function(){this.lon=null,this.lat=null}}])&&Se(t.prototype,n),r&&Se(t,r),e}();function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Oe=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),be.isArray(t)&&(i=t[3],r=t[2],n=t[1],t=t[0]),this.left=null!=t?be.toFloat(t):this.left,this.bottom=null!=n?be.toFloat(n):this.bottom,this.right=null!=r?be.toFloat(r):this.right,this.top=null!=i?be.toFloat(i):this.top,this.centerLonLat=null,this.CLASS_NAME="SuperMap.Bounds"}var t,n,r;return t=e,r=[{key:"fromString",value:function(t,n){var r=t.split(",");return e.fromArray(r,n)}},{key:"fromArray",value:function(t,n){return!0===n?new e(t[1],t[0],t[3],t[2]):new e(t[0],t[1],t[2],t[3])}},{key:"fromSize",value:function(t){return new e(0,t.h,t.w,0)}},{key:"oppositeQuadrant",value:function(e){var t="";return t+="t"===e.charAt(0)?"b":"t",t+="l"===e.charAt(1)?"r":"l"}}],(n=[{key:"clone",value:function(){return new e(this.left,this.bottom,this.right,this.top)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.left===e.left&&this.right===e.right&&this.top===e.top&&this.bottom===e.bottom),t}},{key:"toString",value:function(){return[this.left,this.bottom,this.right,this.top].join(",")}},{key:"toArray",value:function(e){return!0===e?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]}},{key:"toBBOX",value:function(e,t){null==e&&(e=6);var n=Math.pow(10,e),r=Math.round(this.left*n)/n,i=Math.round(this.bottom*n)/n,o=Math.round(this.right*n)/n,a=Math.round(this.top*n)/n;return!0===t?i+","+r+","+a+","+o:r+","+i+","+o+","+a}},{key:"getWidth",value:function(){return this.right-this.left}},{key:"getHeight",value:function(){return this.top-this.bottom}},{key:"getSize",value:function(){return new ue(this.getWidth(),this.getHeight())}},{key:"getCenterPixel",value:function(){return new fe((this.left+this.right)/2,(this.bottom+this.top)/2)}},{key:"getCenterLonLat",value:function(){return this.centerLonLat||(this.centerLonLat=new _e((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat}},{key:"scale",value:function(t,n){var r,i;return t=t||1,null==n&&(n=this.getCenterLonLat()),"SuperMap.LonLat"===n.CLASS_NAME?(r=n.lon,i=n.lat):(r=n.x,i=n.y),new e((this.left-r)*t+r,(this.bottom-i)*t+i,(this.right-r)*t+r,(this.top-i)*t+i)}},{key:"add",value:function(t,n){if(null==t||null==n)throw new TypeError("Bounds.add cannot receive null values");return new e(this.left+t,this.bottom+n,this.right+t,this.top+n)}},{key:"extend",value:function(t){var n=null;if(t){switch(t.CLASS_NAME){case"SuperMap.LonLat":n=new e(t.lon,t.lat,t.lon,t.lat);break;case"SuperMap.Geometry.Point":n=new e(t.x,t.y,t.x,t.y);break;case"SuperMap.Bounds":n=t}n&&(this.centerLonLat=null,(null==this.left||n.left<this.left)&&(this.left=n.left),(null==this.bottom||n.bottom<this.bottom)&&(this.bottom=n.bottom),(null==this.right||n.right>this.right)&&(this.right=n.right),(null==this.top||n.top>this.top)&&(this.top=n.top))}}},{key:"containsLonLat",value:function(e,t){"boolean"==typeof t&&(t={inclusive:t}),t=t||{};var n=this.contains(e.lon,e.lat,t.inclusive),r=t.worldBounds;if(r&&!n){var i=r.getWidth(),o=(r.left+r.right)/2,a=Math.round((e.lon-o)/i);n=this.containsLonLat({lon:e.lon-a*i,lat:e.lat},{inclusive:t.inclusive})}return n}},{key:"containsPixel",value:function(e,t){return this.contains(e.x,e.y,t)}},{key:"contains",value:function(e,t,n){if(null==n&&(n=!0),null==e||null==t)return!1;var r=!1;return r=n?e>=this.left&&e<=this.right&&t>=this.bottom&&t<=this.top:e>this.left&&e<this.right&&t>this.bottom&&t<this.top,r}},{key:"intersectsBounds",value:function(e,t){if("boolean"==typeof t&&(t={inclusive:t}),(t=t||{}).worldBounds){var n=this.wrapDateLine(t.worldBounds);e=e.wrapDateLine(t.worldBounds)}else n=this;null==t.inclusive&&(t.inclusive=!0);var r=!1,i=n.left===e.right||n.right===e.left||n.top===e.bottom||n.bottom===e.top;if(t.inclusive||!i){var o=e.bottom>=n.bottom&&e.bottom<=n.top||n.bottom>=e.bottom&&n.bottom<=e.top,a=e.top>=n.bottom&&e.top<=n.top||n.top>e.bottom&&n.top<e.top,s=e.left>=n.left&&e.left<=n.right||n.left>=e.left&&n.left<=e.right,l=e.right>=n.left&&e.right<=n.right||n.right>=e.left&&n.right<=e.right;r=(o||a)&&(s||l)}if(t.worldBounds&&!r){var u=t.worldBounds,c=u.getWidth(),f=!u.containsBounds(n),h=!u.containsBounds(e);f&&!h?(e=e.add(-c,0),r=n.intersectsBounds(e,{inclusive:t.inclusive})):h&&!f&&(n=n.add(-c,0),r=e.intersectsBounds(n,{inclusive:t.inclusive}))}return r}},{key:"containsBounds",value:function(e,t,n){null==t&&(t=!1),null==n&&(n=!0);var r=this.contains(e.left,e.bottom,n),i=this.contains(e.right,e.bottom,n),o=this.contains(e.left,e.top,n),a=this.contains(e.right,e.top,n);return t?r||i||o||a:r&&i&&o&&a}},{key:"determineQuadrant",value:function(e){var t="",n=this.getCenterLonLat();return t+=e.lat<n.lat?"b":"t",t+=e.lon<n.lon?"l":"r"}},{key:"wrapDateLine",value:function(e,t){var n=(t=t||{}).leftTolerance||0,r=t.rightTolerance||0,i=this.clone();if(e){for(var o=e.getWidth();i.left<e.left&&i.right-r<=e.left;)i=i.add(o,0);for(;i.left+n>=e.right&&i.right>e.right;)i=i.add(-o,0);var a=i.left+n;a<e.right&&a>e.left&&i.right-r>e.right&&(i=i.add(-o,0))}return i}},{key:"toServerJSONObject",value:function(){return{rightTop:{x:this.right,y:this.top},leftBottom:{x:this.left,y:this.bottom},left:this.left,right:this.right,top:this.top,bottom:this.bottom}}},{key:"destroy",value:function(){this.left=null,this.right=null,this.top=null,this.bottom=null,this.centerLonLat=null}}])&&we(t.prototype,n),r&&we(t,r),e}();function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Bounds=Oe;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ce=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.Geometry",this.id=be.createUniqueID(this.CLASS_NAME+"_"),this.parent=null,this.bounds=null,this.SRID=null}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.id=null,this.bounds=null,this.SRID=null}},{key:"clone",value:function(){return new e}},{key:"setBounds",value:function(e){e&&(this.bounds=e.clone())}},{key:"clearBounds",value:function(){this.bounds=null,this.parent&&this.parent.clearBounds()}},{key:"extendBounds",value:function(e){this.getBounds()?this.bounds.extend(e):this.setBounds(e)}},{key:"getBounds",value:function(){return null==this.bounds&&this.calculateBounds(),this.bounds}},{key:"calculateBounds",value:function(){}},{key:"getVertices",value:function(e){}},{key:"getArea",value:function(){return 0}}])&&xe(t.prototype,n),r&&xe(t,r),e}();function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){return!t||"object"!==Pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ke(e,t,n){return(ke="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Me(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry=Ce;var Le=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ee(this,Me(t).call(this))).components=[],n.componentTypes=null,null!=e&&n.addComponents(e),n.CLASS_NAME="SuperMap.Geometry.Collection",n.geometryType="Collection",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(t,Ce),n=t,(r=[{key:"destroy",value:function(){this.components.length=0,this.components=null,ke(Me(t.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){for(var e=new t,n=0,r=this.components.length;n<r;n++)e.addComponent(this.components[n].clone());return be.applyDefaults(e,this),e}},{key:"getComponentsString",value:function(){for(var e=[],t=0,n=this.components.length;t<n;t++)e.push(this.components[t].toShortString());return e.join(",")}},{key:"calculateBounds",value:function(){this.bounds=null;var e=new Oe,t=this.components;if(t)for(var n=0,r=t.length;n<r;n++)e.extend(t[n].getBounds());null!=e.left&&null!=e.bottom&&null!=e.right&&null!=e.top&&this.setBounds(e)}},{key:"addComponents",value:function(e){be.isArray(e)||(e=[e]);for(var t=0,n=e.length;t<n;t++)this.addComponent(e[t])}},{key:"addComponent",value:function(e,t){var n=!1;if(e&&(null==this.componentTypes||be.indexOf(this.componentTypes,e.CLASS_NAME)>-1)){if(null!=t&&t<this.components.length){var r=this.components.slice(0,t),i=this.components.slice(t,this.components.length);r.push(e),this.components=r.concat(i)}else this.components.push(e);e.parent=this,this.clearBounds(),n=!0}return n}},{key:"removeComponents",value:function(e){var t=!1;be.isArray(e)||(e=[e]);for(var n=e.length-1;n>=0;--n)t=this.removeComponent(e[n])||t;return t}},{key:"removeComponent",value:function(e){return be.removeItem(this.components,e),this.clearBounds(),!0}},{key:"getArea",value:function(){for(var e=0,t=0,n=this.components.length;t<n;t++)e+=this.components[t].getArea();return e}},{key:"equals",value:function(e){var t=!0;if(e&&e.CLASS_NAME&&this.CLASS_NAME===e.CLASS_NAME)if(be.isArray(e.components)&&e.components.length===this.components.length){for(var n=0,r=this.components.length;n<r;++n)if(!this.components[n].equals(e.components[n])){t=!1;break}}else t=!1;else t=!1;return t}},{key:"getVertices",value:function(e){for(var t=[],n=0,r=this.components.length;n<r;++n)Array.prototype.push.apply(t,this.components[n].getVertices(e));return t}}])&&Te(n.prototype,r),i&&Te(n,i),t}();function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry.Collection=Le;var Fe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ne(this,Ie(t).call(this,e))).componentTypes=["SuperMap.Geometry.Point"],n.CLASS_NAME="SuperMap.Geometry.MultiPoint",n.geometryType="MultiPoint",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(t,Le),n=t,(r=[{key:"addPoint",value:function(e,t){this.addComponent(e,t)}},{key:"removePoint",value:function(e){this.removeComponent(e)}}])&&Re(n.prototype,r),i&&Re(n,i),t}();function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){return!t||"object"!==Be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry.MultiPoint=Fe;var Ve=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ue(this,Ge(t).call(this,e))).componentTypes=["SuperMap.Geometry.Point","SuperMap.PointWithMeasure"],n.CLASS_NAME="SuperMap.Geometry.Curve",n.geometryType="Curve",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(t,Fe),t}();function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t){return!t||"object"!==Je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function We(e,t,n){return(We="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ye(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry.Curve=Ve;var Xe=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=qe(this,Ye(t).call(this,e,n,r,i))).x=parseFloat(e),o.y=parseFloat(n),o.tag=i||0==i?parseFloat(i):null,o.type=r||"Point",o.CLASS_NAME="SuperMap.Geometry.Point",o.geometryType="Point",o}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(t,Ce),n=t,(r=[{key:"clone",value:function(e){return null==e&&(e=new t(this.x,this.y)),be.applyDefaults(e,this),e}},{key:"calculateBounds",value:function(){this.bounds=new Oe(this.x,this.y,this.x,this.y)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x===e.x&&this.y===e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"move",value:function(e,t){this.x=this.x+e,this.y=this.y+t,this.clearBounds()}},{key:"toShortString",value:function(){return this.x+", "+this.y}},{key:"destroy",value:function(){this.x=null,this.y=null,this.tag=null,We(Ye(t.prototype),"destroy",this).call(this)}},{key:"getVertices",value:function(e){return[this]}}])&&He(n.prototype,r),i&&He(n,i),t}();function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $e(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function et(e,t,n){return(et="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tt(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function tt(e){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry.Point=Xe;var rt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=$e(this,tt(t).call(this,e))).CLASS_NAME="SuperMap.Geometry.LineString",n.geometryType="LineString",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}(t,Ve),n=t,i=[{key:"calculateCircle",value:function(e){if(e.length<3)return e;var t={},n=e[0],r=e[1],i=e[2],o=0,a=0,s=!0,l=0,u=0,c=0,f=[],h=(i.y-n.y)/(i.x-n.x),p=i.y-h*i.x;if(i.x!=n.x&&i.y!=n.y&&r.y==h*r.x+p||i.x==n.x&&r.x==n.x||i.y==n.y&&r.y==n.y||i.x==n.x&&i.y==n.y||i.x==r.x&&i.y==r.y||n.x==r.x&&n.y==r.y)f.push(n),f.push(r),f.push(i);else{var y=(r.x*r.x+r.y*r.y-(n.x*n.x+n.y*n.y))*(2*(i.y-n.y))-(i.x*i.x+i.y*i.y-(n.x*n.x+n.y*n.y))*(2*(r.y-n.y)),d=2*(r.x-n.x)*(i.x*i.x+i.y*i.y-(n.x*n.x+n.y*n.y))-2*(i.x-n.x)*(r.x*r.x+r.y*r.y-(n.x*n.x+n.y*n.y)),m=4*((r.x-n.x)*(i.y-n.y)-(i.x-n.x)*(r.y-n.y));t.x=y/m,t.y=d/m;var v=(2*(o=Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)))*o-((n.x-i.x)*(n.x-i.x)+(n.y-i.y)*(n.y-i.y)))/(2*o*o);v=(v=v>=1?1:v)<=-1?-1:v,c=180*Math.acos(v)/Math.PI,a=(c=i.x==n.x?t.x>n.x&&r.x>n.x||t.x<n.x&&r.x<n.x?360-c:c:t.y>h*t.x+p&&r.y>h*r.x+p||t.y<h*t.x+p&&r.y<h*r.x+p?360-c:c)/72,i.y!=n.y?i.x==n.x?i.y>n.y?r.x<n.x&&(s=!1):r.x>n.x&&(s=!1):i.x<n.x?r.y<h*r.x+p&&(s=!1):r.y>h*r.x+p&&(s=!1):i.x>n.x?r.y>n.y&&(s=!1):r.y<n.y&&(s=!1);var g=(n.y-t.y)/(n.x-t.x),b=g>=0?180*Math.atan(g)/Math.PI:Math.abs(180*Math.atan(g)/Math.PI)+90,S=Math.abs(t.y);n.y==S&&S==i.y&&n.x<i.x&&(b+=180);var _=n.y-t.y;f.push(n);for(var w=1;w<72;w++){l=a*w,u=b,s?_>=0?g>=0?u+=l:u=180-(u-90)+l:u=g>0?u-180+l:90-u+l:_>=0?g>=0?u-=l:u=180-(u-90)-l:u=g>=0?u-180-l:90-u-l,u=u*Math.PI/180;var O=t.x+o*Math.cos(u),x=t.y+o*Math.sin(u);f.push(new Xe(O,x))}f.push(i)}return f}},{key:"createLineEPS",value:function(e){var n=[],r=e.length;if(r<2)return e;for(var i=0;i<r;){if("LTypeArc"==e[i].type){var o=t.createLineArc(n,i,r,e);n=o[0],i=o[1]}else n.push(e[i]),i++}return n}},{key:"createLineArc",value:function(e,n,r,i){if(0==n){var o=t.addPointEPS(i,n,r,"LTypeArc");Array.prototype.push.apply(e,o[0]),n=o[1]+1}else if(n==r-1){var a=[i[n-1],i[n]],s=t.calculateCircle(a);Array.prototype.push.apply(e,s),n++}else{var l=t.addPointEPS(i,n,r,"LTypeArc");e.pop(),Array.prototype.push.apply(e,l[0]),n=l[1]+1}return[e,n]}},{key:"addPointEPS",value:function(e,n,r,i){var o,a=[],s=n+1;return 0==n?Array.prototype.push.apply(a,[e[n],e[n+1]]):n==r-1?Array.prototype.push.apply(a,[e[n-1],e[n]]):Array.prototype.push.apply(a,[e[n-1],e[n],e[n+1]]),"LTypeCurve"==i?o=t.calculatePointsFBZN(a):"LTypeArc"==i&&(o=t.calculateCircle(a)),[o,s]}}],(r=[{key:"removeComponent",value:function(e){var n=this.components&&this.components.length>2;return n&&et(tt(t.prototype),"removeComponent",this).apply(this,arguments),n}},{key:"getSortedSegments",value:function(){for(var e,t,n=this.components.length-1,r=new Array(n),i=0;i<n;++i)e=this.components[i],t=this.components[i+1],e.x<t.x?r[i]={x1:e.x,y1:e.y,x2:t.x,y2:t.y}:r[i]={x1:t.x,y1:t.y,x2:e.x,y2:e.y};return r.sort(function(e,t){return e.x1-t.x1})}},{key:"getVertices",value:function(e){return!0===e?[this.components[0],this.components[this.components.length-1]]:!1===e?this.components.slice(1,this.components.length-1):this.components.slice()}}])&&Ze(n.prototype,r),i&&Ze(n,i),t}();function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function at(e,t){return!t||"object"!==it(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function st(e,t,n){return(st="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lt(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry.LineString=rt;var ct=function(e){function t(e,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=at(this,lt(t).call(this,e,n,r))).x=parseFloat(e),i.y=parseFloat(n),i.text=r.toString(),i.bsInfo={h:null,w:null},i.element=document.createElement("span"),i.CLASS_NAME="SuperMap.Geometry.GeoText",i.geometryType="GeoText",i}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}(t,Ce),n=t,(r=[{key:"destroy",value:function(){st(lt(t.prototype),"destroy",this).call(this),this.x=null,this.y=null,this.text=null}},{key:"getCentroid",value:function(){return new Xe(this.x,this.y)}},{key:"clone",value:function(e){return null==e&&(e=new t(this.x,this.y,this.text)),be.applyDefaults(e,this),e}},{key:"calculateBounds",value:function(){this.bounds=new Oe(this.x,this.y,this.x,this.y)}},{key:"getLabelPxBoundsByLabel",value:function(e,t,n,r){var i,o,a,s,l=be.cloneObject(e),u=(r.label||this.text).split("\n").length;if(t=parseFloat(t),n=parseFloat(n),u>1&&(n=parseFloat(n)*u),r.labelAlign&&"cm"!==r.labelAlign)switch(r.labelAlign){case"lt":l.x+=t/2,l.y+=n/2;break;case"lm":l.x+=t/2;break;case"lb":l.x+=t/2,l.y-=n/2;break;case"ct":l.y+=n/2;break;case"cb":l.y-=n/2;break;case"rt":l.x-=t/2,l.y+=n/2;break;case"rm":l.x-=t/2;break;case"rb":l.x-=t/2,l.y-=n/2}return this.bsInfo.h=n,this.bsInfo.w=t,i=l.x-parseFloat(t)/2,o=l.y+parseFloat(n)/2,s=l.x+parseFloat(t)/2,a=l.y-parseFloat(n)/2,new Oe(i,o,s,a)}},{key:"getLabelPxBoundsByText",value:function(e,t){var n,r,i,o,a=this.getLabelPxSize(t),s=be.cloneObject(e);if(t.labelAlign&&"cm"!==t.labelAlign)switch(t.labelAlign){case"lt":s.x+=a.w/2,s.y+=a.h/2;break;case"lm":s.x+=a.w/2;break;case"lb":s.x+=a.w/2,s.y-=a.h/2;break;case"ct":s.y+=a.h/2;break;case"cb":s.y-=a.h/2;break;case"rt":s.x-=a.w/2,s.y+=a.h/2;break;case"rm":s.x-=a.w/2;break;case"rb":s.x-=a.w/2,s.y-=a.h/2}return this.bsInfo.h=a.h,this.bsInfo.w=a.w,n=s.x-a.w/2,r=s.y+a.h/2,o=t.fontStyle&&"italic"===t.fontStyle?s.x+a.w/2+parseInt(parseFloat(t.fontSize)/2):s.x+a.w/2,i=s.y-a.h/2,new Oe(n,r,o,i)}},{key:"getLabelPxSize",value:function(e){var t,n,r,i,o=parseFloat(e.strokeWidth);t=e.label||this.text,n=e.fontSize?parseFloat(e.fontSize):parseFloat("12px");var a=t.split("\n"),s=a.length;i=s>1?n*s+s+o+.2*n:n+o+.2*n+1,r=0,this.labelWTmp&&r<this.labelWTmp&&(r=this.labelWTmp);for(var l=0;l<s;l++){var u=this.getTextCount(a[l]),c=this.labelWTmp=be.getTextBounds(e,a[l],this.element).textWidth+1*u.textC+o;r<c&&(r=c)}var f=new Object;return f.h=i,f.w=r,f}},{key:"getTextCount",value:function(e){for(var t={},n=0,r=0,i=0;i<e.length;i++)e.charCodeAt(i)>255?n++:r++;return t.cnC=n,t.enC=r,t.textC=e.length,t}}])&&ot(n.prototype,r),i&&ot(n,i),t}();function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pt(e,t){return!t||"object"!==ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yt(e,t,n){return(yt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dt(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function dt(e){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mt(e,t){return(mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry.GeoText=ct;var vt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=pt(this,dt(t).call(this,e))).componentTypes=["SuperMap.Geometry.Point"],n.CLASS_NAME="SuperMap.Geometry.LinearRing",n.geometryType="LinearRing",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mt(e,t)}(t,rt),n=t,(r=[{key:"addComponent",value:function(e,n){var r=!1,i=this.components.pop();null==n&&e.equals(i)||(r=yt(dt(t.prototype),"addComponent",this).apply(this,arguments));var o=this.components[0];return yt(dt(t.prototype),"addComponent",this).apply(this,[o]),r}},{key:"removeComponent",value:function(e){var n=this.components&&this.components.length>3;if(n){this.components.pop(),yt(dt(t.prototype),"removeComponent",this).apply(this,arguments);var r=this.components[0];yt(dt(t.prototype),"addComponent",this).apply(this,[r])}return n}},{key:"getArea",value:function(){var e=0;if(this.components&&this.components.length>2){for(var t=0,n=0,r=this.components.length;n<r-1;n++){var i=this.components[n],o=this.components[n+1];t+=(i.x+o.x)*(o.y-i.y)}e=-t/2}return e}},{key:"getVertices",value:function(e){return!0===e?[]:this.components.slice(0,this.components.length-1)}}])&&ht(n.prototype,r),i&&ht(n,i),t}();function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(e,t){return!t||"object"!==gt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function St(e){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _t(e,t){return(_t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry.LinearRing=vt;var wt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=bt(this,St(t).call(this,e))).componentTypes=["SuperMap.Geometry.LineString"],n.CLASS_NAME="SuperMap.Geometry.MultiLineString",n.geometryType="MultiLineString",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}(t,Le),t}();function Ot(e){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xt(e,t){return!t||"object"!==Ot(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pt(e,t){return(Pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry.MultiLineString=wt;var Tt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=xt(this,Ct(t).call(this,e))).componentTypes=["SuperMap.Geometry.Polygon"],n.CLASS_NAME="SuperMap.Geometry.MultiPolygon",n.geometryType="MultiPolygon",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pt(e,t)}(t,Le),t}();function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mt(e,t){return!t||"object"!==Et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lt(e,t){return(Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry.MultiPolygon=Tt;var jt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Mt(this,At(t).call(this,e))).componentTypes=["SuperMap.Geometry.LinearRing"],n.CLASS_NAME="SuperMap.Geometry.Polygon",n.geometryType="Polygon",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lt(e,t)}(t,Le),n=t,(r=[{key:"getArea",value:function(){var e=0;if(this.components&&this.components.length>0){e+=Math.abs(this.components[0].getArea());for(var t=1,n=this.components.length;t<n;t++)e-=Math.abs(this.components[t].getArea())}return e}}])&&kt(n.prototype,r),i&&kt(n,i),t}();function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t){return!t||"object"!==Rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ft(e,t){return(Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry.Polygon=jt;var Bt=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=It(this,Dt(t).call(this,e,n,r,i))).x=e,o.y=n,o.width=r,o.height=i,o.CLASS_NAME="SuperMap.Geometry.Rectangle",o.geometryType="Rectangle",o}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ft(e,t)}(t,Ce),n=t,(r=[{key:"calculateBounds",value:function(){this.bounds=new Oe(this.x,this.y,this.x+this.width,this.y+this.height)}},{key:"getArea",value:function(){return this.width*this.height}}])&&Nt(n.prototype,r),i&&Nt(n,i),t}();function Ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Geometry.Rectangle=Bt;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Gt=function(){function e(t,n){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.value=t||"",this.name=n||"token",this.CLASS_NAME="SuperMap.Credential"}var t,n,r;return t=e,(n=[{key:"getUrlParameters",value:function(){return this.name+"="+this.value}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){this.value=null,this.name=null}}])&&Ut(t.prototype,n),r&&Ut(t,r),e}();Gt.CREDENTIAL=null,r.Credential=Gt;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
r.Date={toISOString:function(){if("toISOString"in Date.prototype)return function(e){return e.toISOString()};var e=function(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n};return function(t){return isNaN(t.getTime())?"Invalid Date":t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1,2)+"-"+e(t.getUTCDate(),2)+"T"+e(t.getUTCHours(),2)+":"+e(t.getUTCMinutes(),2)+":"+e(t.getUTCSeconds(),2)+"."+e(t.getUTCMilliseconds(),3)+"Z"}}(),parse:function(e){var t,n=e.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/);if(n&&(n[1]||n[7])){var r=parseInt(n[1],10)||0,i=parseInt(n[2],10)-1||0,o=parseInt(n[3],10)||1;t=new Date(Date.UTC(r,i,o));var a=n[7];if(a){var s=parseInt(n[4],10),l=parseInt(n[5],10),u=parseFloat(n[6]),c=0|u,f=Math.round(1e3*(u-c));if(t.setUTCHours(s,l,c,f),"Z"!==a){var h=-1e3*(60*parseInt(a,10)*60+60*(parseInt(n[8],10)||0));t=new Date(t.getTime()+h)}}}else t=new Date("invalid");return t}};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var zt=r.Event={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(e){return e.target||e.srcElement},isSingleTouch:function(e){return e.touches&&1===e.touches.length},isMultiTouch:function(e){return e.touches&&e.touches.length>1},isLeftClick:function(e){return e.which&&1===e.which||e.button&&1===e.button},isRightClick:function(e){return e.which&&3===e.which||e.button&&2===e.button},stop:function(e,t){t||(e.preventDefault?e.preventDefault():e.returnValue=!1),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},findElement:function(e,t){for(var n=r.Event.element(e);n.parentNode&&(!n.tagName||n.tagName.toUpperCase()!=t.toUpperCase());)n=n.parentNode;return n},observe:function(e,t,n,r){var i=be.getElement(e);if(r=r||!1,"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||i.attachEvent)&&(t="keydown"),this.observers||(this.observers={}),!i._eventCacheID){var o="eventCacheID_";i.id&&(o=i.id+"_"+o),i._eventCacheID=be.createUniqueID(o)}var a=i._eventCacheID;this.observers[a]||(this.observers[a]=[]),this.observers[a].push({element:i,name:t,observer:n,useCapture:r}),i.addEventListener?"mousewheel"===t?i.addEventListener(t,n,{useCapture:r,passive:!1}):i.addEventListener(t,n,r):i.attachEvent&&i.attachEvent("on"+t,n)},stopObservingElement:function(e){var t=be.getElement(e)._eventCacheID;this._removeElementObservers(r.Event.observers[t])},_removeElementObservers:function(e){if(e)for(var t=e.length-1;t>=0;t--){var n=e[t],i=new Array(n.element,n.name,n.observer,n.useCapture);r.Event.stopObserving.apply(this,i)}},stopObserving:function(e,t,n,i){i=i||!1;var o=be.getElement(e),a=o._eventCacheID;"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.detachEvent)&&(t="keydown");var s=!1,l=r.Event.observers[a];if(l)for(var u=0;!s&&u<l.length;){var c=l[u];if(c.name===t&&c.observer===n&&c.useCapture===i){l.splice(u,1),0==l.length&&delete r.Event.observers[a],s=!0;break}u++}return s&&(o.removeEventListener?o.removeEventListener(t,n,i):o&&o.detachEvent&&o.detachEvent("on"+t,n)),s},unloadCache:function(){if(r.Event&&r.Event.observers){for(var e in r.Event.observers){var t=r.Event.observers[e];r.Event._removeElementObservers.apply(this,[t])}r.Event.observers=!1}},CLASS_NAME:"SuperMap.Event"};function Vt(e){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Event=zt,r.Event.observe(window,"unload",r.Event.unloadCache,!1);
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ht=function(){function e(t,n,r,i,o){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners={},this.object=t,this.element=null,this.eventTypes=[],this.eventHandler=null,this.fallThrough=i,this.includeXY=!1,this.extensions={},this.extensionCount={},this.clearMouseListener=null,be.extend(this,o),null!=r)for(var a=0,s=r.length;a<s;a++)this.addEventType(r[a]);null!=n&&this.attachToElement(n),this.CLASS_NAME="SuperMap.Events"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){for(var e in this.extensions)"boolean"!=typeof this.extensions[e]&&this.extensions[e].destroy();this.extensions=null,this.element&&(zt.stopObservingElement(this.element),this.element.hasScrollEvent&&zt.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}},{key:"addEventType",value:function(e){this.listeners[e]||(this.eventTypes.push(e),this.listeners[e]=[])}},{key:"attachToElement",value:function(e){this.element?zt.stopObservingElement(this.element):(this.eventHandler=ye.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=ye.bind(this.clearMouseCache,this)),this.element=e;for(var t=0,n=this.BROWSER_EVENTS.length;t<n;t++){var r=this.BROWSER_EVENTS[t];this.addEventType(r),zt.observe(e,r,this.eventHandler)}zt.observe(e,"dragstart",zt.stop)}},{key:"on",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.register(t,e.scope,e[t])}},{key:"register",value:function(t,n,r,i){if(t in e&&!this.extensions[t]&&(this.extensions[t]=new e[t](this)),null!=r&&-1!==be.indexOf(this.eventTypes,t)){null==n&&(n=this.object);var o=this.listeners[t];o||(o=[],this.listeners[t]=o,this.extensionCount[t]=0);var a={obj:n,func:r};i?(o.splice(this.extensionCount[t],0,a),"object"===Vt(i)&&i.extension&&this.extensionCount[t]++):o.push(a)}}},{key:"registerPriority",value:function(e,t,n){this.register(e,t,n,!0)}},{key:"un",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.unregister(t,e.scope,e[t])}},{key:"unregister",value:function(e,t,n){null==t&&(t=this.object);var r=this.listeners[e];if(null!=r)for(var i=0,o=r.length;i<o;i++)if(r[i].obj===t&&r[i].func===n){r.splice(i,1);break}}},{key:"remove",value:function(e){null!=this.listeners[e]&&(this.listeners[e]=[])}},{key:"triggerEvent",value:function(e,t){var n=this.listeners[e];if(n&&0!=n.length){var r;null==t&&(t={}),t.object=this.object,t.element=this.element,t.type||(t.type=e);for(var i=0,o=(n=n.slice()).length;i<o;i++){var a=n[i];if(void 0!=(r=a.func.apply(a.obj,[t]))&&!1===r)break}return this.fallThrough||zt.stop(t,!0),r}}},{key:"handleBrowserEvent",value:function(e){var t=e.type,n=this.listeners[t];if(n&&0!=n.length){var r=e.touches;if(r&&r[0]){for(var i,o=0,a=0,s=r.length,l=0;l<s;++l)o+=(i=r[l]).clientX,a+=i.clientY;e.clientX=o/s,e.clientY=a/s}this.includeXY&&(e.xy=this.getMousePosition(e)),this.triggerEvent(t,e)}}},{key:"clearMouseCache",value:function(){this.element.scrolls=null,this.element.lefttop=null;var e=document.body;e&&(0==e.scrollTop&&0==e.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}},{key:"getMousePosition",value:function(e){if(this.includeXY?this.element.hasScrollEvent||(zt.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var t=be.getViewportElement();this.element.scrolls=[t.scrollLeft,t.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=be.pagePosition(this.element)),new fe(e.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],e.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}])&&Jt(t.prototype,n),r&&Jt(t,r),e}();function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Events=Ht,r.Events.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"];
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Wt=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.Feature",this.layer=t,this.id=be.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=n,this.data=null!=r?r:{}}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.id=null,this.lonlat=null,this.data=null}}])&&qt(t.prototype,n),r&&qt(t,r),e}();function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xt(e,t){return!t||"object"!==Yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kt(e,t,n){return(Kt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zt(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $t(e,t){return($t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature=Wt;var en=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Xt(this,Zt(t).call(this,null,null,n))).fid=null,o.geometry=e||null,o.attributes={},n&&(o.attributes=be.extend(o.attributes,n)),o.bounds=null,o.state=null,o.style=i||null,o.url=null,o.lonlat=null,o.CLASS_NAME="SuperMap.Feature.Vector",r.State={UNKNOWN:"Unknown",INSERT:"Insert",UPDATE:"Update",DELETE:"Delete"},t.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"default",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}},o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$t(e,t)}(t,Wt),n=t,(i=[{key:"destroy",value:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,Kt(Zt(t.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){return new t(this.geometry?this.geometry.clone():null,this.attributes,this.style)}},{key:"toState",value:function(e){if(e===r.State.UPDATE)switch(this.state){case r.State.UNKNOWN:case r.State.DELETE:this.state=e;break;case r.State.UPDATE:case r.State.INSERT:}else if(e===r.State.INSERT)switch(this.state){case r.State.UNKNOWN:break;default:this.state=e}else if(e===r.State.DELETE)switch(this.state){case r.State.INSERT:case r.State.DELETE:break;case r.State.UNKNOWN:case r.State.UPDATE:this.state=e}else e===r.State.UNKNOWN&&(this.state=e)}}])&&Qt(n.prototype,i),o&&Qt(n,o),t}();function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Feature.Vector=en;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var nn=function(){function e(t){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=null,this.keepData=!1,be.extend(this,t),this.options=t,this.CLASS_NAME="SuperMap.Format"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){}},{key:"read",value:function(e){}},{key:"write",value:function(e){}}])&&tn(t.prototype,n),r&&tn(t,r),e}();function rn(e){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function an(e,t){return!t||"object"!==rn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sn(e){return(sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ln(e,t){return(ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Format=r.Format||nn;var un=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=an(this,sn(t).call(this,e))).indent="    ",n.space=" ",n.newline="\n",n.level=0,n.pretty=!1,n.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),n.CLASS_NAME="SuperMap.Format.JSON",n.serialize={object:function(e){if(null==e)return"null";if(e.constructor===Date)return this.serialize.date.apply(this,[e]);if(e.constructor===Array)return this.serialize.array.apply(this,[e]);var t,n,r,i=["{"];this.level+=1;var o=!1;for(t in e)e.hasOwnProperty(t)&&(n=this.write.apply(this,[t,this.pretty]),r=this.write.apply(this,[e[t],this.pretty]),null!=n&&null!=r&&(o&&i.push(","),i.push(this.writeNewline(),this.writeIndent(),n,":",this.writeSpace(),r),o=!0));return this.level-=1,i.push(this.writeNewline(),this.writeIndent(),"}"),i.join("")},array:function(e){var t,n=["["];this.level+=1;for(var r=0,i=e.length;r<i;++r)null!=(t=this.write.apply(this,[e[r],this.pretty]))&&(r>0&&n.push(","),n.push(this.writeNewline(),this.writeIndent(),t));return this.level-=1,n.push(this.writeNewline(),this.writeIndent(),"]"),n.join("")},string:function(e){var t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(e)?'"'+e.replace(/([\x00-\x1f\\"])/g,function(e,n){var r=t[n];return r||(r=n.charCodeAt(),"\\u00"+Math.floor(r/16).toString(16)+(r%16).toString(16))})+'"':'"'+e+'"'},number:function(e){return isFinite(e)?String(e):"null"},boolean:function(e){return String(e)},date:function(e){function t(e){return e<10?"0"+e:e}return'"'+e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+'"'}},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ln(e,t)}(t,nn),n=t,(r=[{key:"read",value:function(e,t){var n;if(this.nativeJSON)try{n=JSON.parse(e,t)}catch(e){}return this.keepData&&(this.data=n),n}},{key:"write",value:function(e,t){this.pretty=!!t;var n=null,r=rn(e);if(this.serialize[r])try{n=!this.pretty&&this.nativeJSON?JSON.stringify(e):this.serialize[r].apply(this,[e])}catch(e){}return n}},{key:"writeIndent",value:function(){var e=[];if(this.pretty)for(var t=0;t<this.level;++t)e.push(this.indent);return e.join("")}},{key:"writeNewline",value:function(){return this.pretty?this.newline:""}},{key:"writeSpace",value:function(){return this.pretty?this.space:""}}])&&on(n.prototype,r),i&&on(n,i),t}();function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Format.JSON=un;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fn=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.red=t||0==t?t:255,this.green=n||0,this.blue=r||0,this.CLASS_NAME="SuperMap.ServerColor"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){if(t){var n=new e,r=255;null!==t.red&&(r=Number(t.red)),n.red=r;var i=0;null!==t.green&&(i=Number(t.green)),n.green=i;var o=0;return null!==t.blue&&(o=Number(t.blue)),n.blue=o,n}}}],(n=[{key:"destroy",value:function(){this.red=null,this.green=null,this.blue=null}}])&&cn(t.prototype,n),r&&cn(t,r),e}();function hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ServerColor=fn;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var pn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fillBackColor=new fn(255,255,255),this.fillBackOpaque=!1,this.fillForeColor=new fn(255,0,0),this.fillGradientMode=null,this.fillGradientAngle=0,this.fillGradientOffsetRatioX=0,this.fillGradientOffsetRatioY=0,this.fillOpaqueRate=100,this.fillSymbolID=0,this.lineColor=new fn(0,0,0),this.lineSymbolID=0,this.lineWidth=1,this.markerAngle=0,this.markerSize=1,this.markerSymbolID=-1,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ServerStyle"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){if(t)return new e({fillBackColor:fn.fromJson(t.fillBackColor),fillBackOpaque:t.fillBackOpaque,fillForeColor:fn.fromJson(t.fillForeColor),fillGradientMode:t.fillGradientMode,fillGradientAngle:t.fillGradientAngle,fillGradientOffsetRatioX:t.fillGradientOffsetRatioX,fillGradientOffsetRatioY:t.fillGradientOffsetRatioY,fillOpaqueRate:t.fillOpaqueRate,fillSymbolID:t.fillSymbolID,lineColor:fn.fromJson(t.lineColor),lineSymbolID:t.lineSymbolID,lineWidth:t.lineWidth,markerAngle:t.markerAngle,markerSize:t.markerSize,markerSymbolID:t.markerSymbolID})}}],(n=[{key:"destroy",value:function(){var e=this;e.fillBackColor&&(e.fillBackColor.destroy(),e.fillBackColor=null),e.fillBackOpaque=null,e.fillForeColor&&(e.fillForeColor.destroy(),e.fillForeColor=null),e.fillGradientMode=null,e.fillGradientAngle=null,e.fillGradientOffsetRatioX=null,e.fillGradientOffsetRatioY=null,e.fillOpaqueRate=null,e.fillSymbolID=null,e.lineColor&&(e.lineColor.destroy(),e.lineColor=null),e.lineSymbolID=null,e.lineWidth=null,e.markerAngle=null,e.markerSize=null,e.markerSymbolID=null}},{key:"toServerJSONObject",value:function(){var e={};return e=be.copyAttributes(e,this)}}])&&hn(t.prototype,n),r&&hn(t,r),e}();function yn(e){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mn(e){return(mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gn(e,t){return(gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ServerStyle=pn;var bn=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=mn(t).call(this,e))||"object"!==yn(i)&&"function"!=typeof i?vn(r):i).measure=null,e&&be.extend(vn(n),e),n.CLASS_NAME="SuperMap.PointWithMeasure",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gn(e,t)}(t,Xe),n=t,i=[{key:"fromJson",value:function(e){if(e)return new t({x:e.x,y:e.y,measure:e.measure})}}],(r=[{key:"equals",value:function(e){var t=!1;if(null!=e){var n=this.x===e.x&&this.y===e.y&&this.measure===e.measure,r=isNaN(this.x)&&isNaN(this.y)&&isNaN(this.measure),i=isNaN(e.x)&&isNaN(e.y)&&isNaN(e.measure);t=n||r&&i}return t}},{key:"toJson",value:function(){var e="{";return null!=this.measure&&void 0!=this.measure&&(e+='"measure":'+this.measure+","),e+='"x":'+this.x+",",e+='"y":'+this.y,e+="}"}},{key:"destroy",value:function(){this.measure=null,this.x=null,this.y=null}}])&&dn(n.prototype,r),i&&dn(n,i),t}();function Sn(e){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wn(e){return(wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function On(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xn(e,t){return(xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.PointWithMeasure=bn;var Cn=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=wn(t).call(this,e,n))||"object"!==Sn(o)&&"function"!=typeof o?On(i):o).id=null,r.center=null,r.style=null,r.length=null,r.maxM=null,r.minM=null,r.parts=null,r.points=null,r.type=null,r.componentTypes=["SuperMap.Geometry.LinearRing","SuperMap.Geometry.LineString"],n&&be.extend(On(r),n),r.CLASS_NAME="SuperMap.Route",r.geometryType="LINEM",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xn(e,t)}(t,Le),n=t,i=[{key:"fromJson",value:function(e){if(e){var n=e.parts||[],r=e.points||[],i=n.length,o=[];if(!(i>0))return null;for(var a=0,s=0,l=[];a<i;a++){for(var u=0;u<n[a];u++)l.push(bn.fromJson(r[s+u]));s+=n[a],l[0].equals(l[n[a]-1])?o.push(new vt(l)):o.push(new rt(l)),l=[]}return new t(o,{id:e.id,center:e.center,style:e.style,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type,parts:e.parts})}}}],(r=[{key:"toJson",value:function(){var e="{";if(null!=this.id&&void 0!=this.id&&(e+='"id":'+this.id+","),null!=this.center&&void 0!=this.center&&(e+='"center":'+this.center+","),null!=this.style&&void 0!=this.style&&(e+='"style":'+this.style+","),null!=this.length&&void 0!=this.length&&(e+='"length":'+this.length+","),null!=this.maxM&&void 0!=this.maxM&&(e+='"maxM":'+this.maxM+","),null!=this.minM&&void 0!=this.minM&&(e+='"minM":'+this.minM+","),null!=this.type&&void 0!=this.type&&(e+='"type":"'+this.type+'",'),null!=this.parts&&void 0!=this.parts){e+='"parts":['+this.parts[0];for(var t=1;t<this.parts.length;t++)e+=","+this.parts[t];e+="],"}if(null!=this.components&&this.components.length>0){e+='"points":[';for(var n=0,r=this.components.length;n<r;n++)for(var i=0,o=this.components[n].components.length;i<o;i++)e+=this.components[n].components[i].toJson()+",";e=e.replace(/,$/g,""),e+="]"}return e=e.replace(/,$/g,""),e+="}"}},{key:"destroy",value:function(){var e=this;e.id=null,e.center=null,e.style=null,e.length=null,e.maxM=null,e.minM=null,e.type=null,e.parts=null,e.components.length=0,e.components=null,e.componentTypes=null}}])&&_n(n.prototype,r),i&&_n(n,i),t}();function Pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Route=Cn;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Tn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=0,this.style=null,this.parts=null,this.points=null,this.type=null,this.prjCoordSys=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ServerGeometry"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){if(t)return new e({id:t.id,style:pn.fromJson(t.style),parts:t.parts,partTopo:t.partTopo,points:t.points,center:t.center,length:t.length,maxM:t.maxM,minM:t.minM,type:t.type})}},{key:"fromGeometry",value:function(t){if(t){var n=0,r=[],i=[],o=null,s=t.components,l=t.CLASS_NAME,u={epsgCode:t.SRID};if(isNaN(t.id)||(n=t.id),"SuperMap.Geometry.LinearRing"!=l&&"SuperMap.Geometry.LineString"!=l&&(t instanceof Fe||t instanceof wt)){for(var c=s.length,f=0;f<c;f++){var h=s[f].getVertices().length;r.push(h);for(var p=0;p<h;p++)i.push(new Xe(s[f].getVertices()[p].x,s[f].getVertices()[p].y))}o="SuperMap.Geometry.MultiPoint"==l?a.POINT:a.LINE}else if(t instanceof Tt){for(var y=s.length,d=0;d<y;d++)for(var m=s[d].components,v=m.length,g=0;g<v;g++){var b=m[g].getVertices().length+1;r.push(b);for(var S=0;S<b-1;S++)i.push(new Xe(m[g].getVertices()[S].x,m[g].getVertices()[S].y));i.push(new Xe(m[g].getVertices()[0].x,m[g].getVertices()[0].y))}o=a.REGION}else if(t instanceof jt){for(var _=s.length,w=0;w<_;w++){var O=s[w].getVertices().length+1;r.push(O);for(var x=0;x<O-1;x++)i.push(new Xe(s[w].getVertices()[x].x,s[w].getVertices()[x].y));i.push(new Xe(s[w].getVertices()[0].x,s[w].getVertices()[0].y))}o=a.REGION}else{for(var C=t.getVertices().length,P=0;P<C;P++)i.push(new Xe(t.getVertices()[P].x,t.getVertices()[P].y));t instanceof vt&&(i.push(new Xe(t.getVertices()[0].x,t.getVertices()[0].y)),C++),r.push(C),o=t instanceof Xe?a.POINT:a.LINE}return new e({id:n,style:null,parts:r,points:i,type:o,prjCoordSys:u})}}},{key:"IsClockWise",value:function(e){var t=e.length;if(t<3)return 0;var n=e[0].y*(e[t-1].x-e[1].x);e.push(e[0]);for(var r=1;r<t;r++)n+=e[r].y*(e[r-1].x-e[r+1].x);return.5*n}},{key:"bubbleSort",value:function(e,t,n,r){for(var i=0;i<e.length;i++)for(var o=0;o<e.length;o++)if(e[i]>e[o]){var a=e[o];e[o]=e[i],e[i]=a;var s=t[o];if(t[o]=t[i],t[i]=s,n&&n.length>0){var l=n[o];n[o]=n[i],n[i]=l}if(r&&r.length>0){var u=r[o];r[o]=r[i],r[i]=u}}}}],(n=[{key:"destroy",value:function(){var e=this;e.id=null,e.style=null,e.parts=null,e.partTopo=null,e.points=null,e.type=null,e.prjCoordSys=null}},{key:"toGeometry",value:function(){var e=this;switch(e.type.toUpperCase()){case a.POINT:return e.toGeoPoint();case a.LINE:return e.toGeoLine();case a.LINEM:return e.toGeoLinem();case a.REGION:return e.toGeoRegion();case a.POINTEPS:return e.toGeoPoint();case a.LINEEPS:return e.toGeoLineEPS();case a.REGIONEPS:return e.toGeoRegionEPS();case a.GEOCOMPOUND:return e.transformGeoCompound()}}},{key:"toGeoPoint",value:function(){var e=this.parts||[],t=this.points||[],n=e.length;if(n>0){if(1===n)return new Xe(t[0].x,t[0].y);for(var r=[],i=0;i<n;i++)r.push(new Xe(t[i].x,t[i].y));return new Fe(r)}return null}},{key:"toGeoLine",value:function(){var e=this.parts||[],t=this.points||[],n=e.length;if(n>0){if(1===n){for(var r=[],i=0;i<e[0];i++)r.push(new Xe(t[i].x,t[i].y));return r[0].equals(r[e[0]-1])?new vt(r):new rt(r)}for(var o=[],a=0;a<n;a++){for(var s=[],l=0;l<e[a];l++)s.push(new Xe(t[l].x,t[l].y));o.push(new rt(s)),t.splice(0,e[a])}return new wt(o)}return null}},{key:"toGeoLineEPS",value:function(){var e,t,n,r,i,o=this.parts||[],a=this.points||[],s=o.length;if(s>0){if(1===s){for(e=0,n=[];e<o[0];e++)n.push(new Xe(a[e].x,a[e].y,a[e].type));return n[0].equals(n[o[0]-1])?(i=rt.createLineEPS(n),new vt(i)):(i=rt.createLineEPS(n),new rt(i))}for(e=0,r=[];e<s;e++){for(t=0,n=[];t<o[e];t++)n.push(new Xe(a[t].x,a[t].y));i=rt.createLineEPS(n),r.push(new rt(i)),a.splice(0,o[e])}return new wt(r)}return null}},{key:"toGeoLinem",value:function(){return Cn.fromJson(this)}},{key:"toGeoRegion",value:function(){var t=this.parts||[],n=this.partTopo||[],r=this.points||[],i=t.length;if(i<=0)return null;var o=[],a=[];if(1==i){for(var s=0;s<r.length;s++)a.push(new Xe(r[s].x,r[s].y));return o.push(new jt([new vt(a)])),new Tt(o)}for(var l=[],u=[],c=[],f=[],h=[],p=0,y=0;p<i;p++){for(var d=0;d<t[p];d++)a.push(new Xe(r[y+d].x,r[y+d].y));y+=t[p];var m=new jt([new vt(a)]);a=[],c.push(m),0===n.length&&f.push(m.getBounds()),h.push(1),u.push(m.getArea())}if(e.bubbleSort(u,c,n,f),0===n.length){for(var v=[],g=1;g<c.length;g++)for(var b=g-1;b>=0;b--)if(v[g]=-1,f[b].containsBounds(f[g])){h[g]=-1*h[b],h[g]<0&&(v[g]=b);break}for(var S=0;S<c.length;S++)h[S]>0?o.push(c[S]):(o[v[S]].components=o[v[S]].components.concat(c[S].components),o.push(""))}else{o=new Array;for(var _=0;_<c.length;_++)if(n[_]&&-1==n[_]?l=l.concat(c[_].components):(l.length>0&&o.length>0&&(o[o.length-1].components=o[o.length-1].components.concat(l),l=[]),o.push(c[_])),_==i-1){var w=o.length;if(w)o[w-1].components=o[w-1].components.concat(l);else for(var O=0,x=l.length;O<x;O++)o.push(new jt(l))}}return new Tt(o)}},{key:"toGeoRegionEPS",value:function(){var t=this.parts||[],n=this.partTopo||[],r=this.points||[],i=t.length;if(i<=0)return null;var o,a=[],s=[];if(1==i){for(var l=0;l<r.length;l++)s.push(new Xe(r[l].x,r[l].y));return o=rt.createLineEPS(s),a.push(new jt([new vt(o)])),new Tt(a)}for(var u=[],c=[],f=[],h=[],p=[],y=0,d=0;y<i;y++){for(var m=0;m<t[y];m++)s.push(new Xe(r[d+m].x,r[d+m].y));d+=t[y],o=rt.createLineEPS(s);var v=new jt([new vt(o)]);s=[],f.push(v),0===n.length&&h.push(v.getBounds()),p.push(1),c.push(v.getArea())}if(e.bubbleSort(c,f,n,h),0===n.length){for(var g=[],b=1;b<f.length;b++)for(var S=b-1;S>=0;S--)if(g[b]=-1,h[S].containsBounds(h[b])){p[b]=-1*p[S],p[b]<0&&(g[b]=S);break}for(var _=0;_<f.length;_++)p[_]>0?a.push(f[_]):(a[g[_]].components=a[g[_]].components.concat(f[_].components),a.push(""))}else{a=new Array;for(var w=0;w<f.length;w++)if(n[w]&&-1==n[w]?u=u.concat(f[w].components):(u.length>0&&a.length>0&&(a[a.length-1].components=a[a.length-1].components.concat(u),u=[]),a.push(f[w])),w==i-1){var O=a.length;if(O)a[O-1].components=a[O-1].components.concat(u);else for(var x=0,C=u.length;x<C;x++)a.push(new jt(u))}}return new Tt(a)}},{key:"transformGeoCompound",value:function(){var t=this.geoParts||[],n=t.length;if(n<=0)return null;for(var r=[],i=0;i<n;i++){var o=t[i];r.push(new e(o).toGeometry())}return new Le(r)}}])&&Pn(t.prototype,n),r&&Pn(t,r),e}();function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mn(e,t){return!t||"object"!==En(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function An(e,t,n){return(An="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ln(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ln(e){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jn(e,t){return(jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ServerGeometry=Tn;var Rn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Mn(this,Ln(t).call(this,e))).ignoreExtraDims=!0,n.CLASS_NAME="SuperMap.Format.GeoJSON",n.parseCoords={point:function(e){if(!1===this.ignoreExtraDims&&2!=e.length)throw"Only 2D points are supported: "+e;return new Xe(e[0],e[1])},multipoint:function(e){for(var t=[],n=null,r=0,i=e.length;r<i;++r){try{n=this.parseCoords.point.apply(this,[e[r]])}catch(e){throw e}t.push(n)}return new Fe(t)},linestring:function(e){for(var t=[],n=null,r=0,i=e.length;r<i;++r){try{n=this.parseCoords.point.apply(this,[e[r]])}catch(e){throw e}t.push(n)}return new rt(t)},multilinestring:function(e){for(var t=[],n=null,r=0,i=e.length;r<i;++r){try{n=this.parseCoords.linestring.apply(this,[e[r]])}catch(e){throw e}t.push(n)}return new wt(t)},polygon:function(e){for(var t,n,r=[],i=0,o=e.length;i<o;++i){try{n=this.parseCoords.linestring.apply(this,[e[i]])}catch(e){throw e}t=new vt(n.components),r.push(t)}return new jt(r)},multipolygon:function(e){for(var t=[],n=null,r=0,i=e.length;r<i;++r){try{n=this.parseCoords.polygon.apply(this,[e[r]])}catch(e){throw e}t.push(n)}return new Tt(t)},box:function(e){if(2!=e.length)throw"GeoJSON box coordinates must have 2 elements";return new jt([new vt([new Xe(e[0][0],e[0][1]),new Xe(e[1][0],e[0][1]),new Xe(e[1][0],e[1][1]),new Xe(e[0][0],e[1][1]),new Xe(e[0][0],e[0][1])])])}},n.extract={feature:function(e){var t=this.extract.geometry.apply(this,[e.geometry]),n={type:"Feature",properties:this.createAttributes(e),geometry:t};return e.geometry&&"TEXT"===e.geometry.type&&(n.properties.texts=e.geometry.texts,n.properties.textStyle=e.geometry.textStyle),e.fid&&(n.id=e.fid),e.ID&&(n.id=e.ID),n},geometry:function(e){if(null==e)return null;!e.parts&&e.points&&(e.parts=[e.points.length]);var t,n=e.hasOwnProperty("geometryType")?e:new Tn(e).toGeometry()||e,r=n.geometryType||n.type;return"LinearRing"===r&&(r="LineString"),"LINEM"===r&&(r="MultiLineString"),t=this.extract[r.toLowerCase()].apply(this,[n]),"Collection"===(r="TEXT"===r?"Point":r)?{type:"GeometryCollection",geometries:t}:{type:r,coordinates:t}},point:function(e){var t=[e.x,e.y];for(var n in e)"x"===n||"y"===n||null===e[n]||isNaN(e[n])||t.push(e[n]);return t},text:function(e){return[e.points[0].x,e.points[0].y]},multipoint:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.point.apply(this,[e.components[n]]));return t},linestring:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.point.apply(this,[e.components[n]]));return t},multilinestring:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.linestring.apply(this,[e.components[n]]));return t},polygon:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.linestring.apply(this,[e.components[n]]));return t},multipolygon:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.polygon.apply(this,[e.components[n]]));return t},collection:function(e){for(var t=e.components.length,n=new Array(t),r=0;r<t;++r)n[r]=this.extract.geometry.apply(this,[e.components[r]]);return n}},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jn(e,t)}(t,un),n=t,(r=[{key:"read",value:function(e,n,r){n=n||"FeatureCollection";var i=null,o=null;if(o="string"==typeof e?An(Ln(t.prototype),"read",this).call(this,e,r):e){if("string"!=typeof o.type);else if(this.isValidType(o,n))switch(n){case"Geometry":try{i=this.parseGeometry(o)}catch(e){}break;case"Feature":try{(i=this.parseFeature(o)).type="Feature"}catch(e){}break;case"FeatureCollection":switch(i=[],o.type){case"Feature":try{i.push(this.parseFeature(o))}catch(e){i=null}break;case"FeatureCollection":for(var a=0,s=o.features.length;a<s;++a)try{i.push(this.parseFeature(o.features[a]))}catch(e){i=null}break;default:try{var l=this.parseGeometry(o);i.push(new en(l))}catch(e){i=null}}}}else;return i}},{key:"write",value:function(e,n){return An(Ln(t.prototype),"write",this).call(this,this.toGeoJSON(e),n)}},{key:"fromGeoJSON",value:function(e,t,n){var r=this,i=this.read(e,t,n);return be.isArray(i)?i.map(function(e){return r._toiSevrerFeature(e)}):this._toiSevrerFeature(i)}},{key:"toGeoJSON",value:function(e){var t={type:null};if(be.isArray(e)){t.type="FeatureCollection";var n=e.length;t.features=new Array(n);for(var r=0;r<n;++r){var i=e[r];if(s(i)){var o={};o.geometry=i,t.features[r]=this.extract.feature.apply(this,[o])}else t.features[r]=this.extract.feature.apply(this,[i])}}else if(s(e)){var a={};a.geometry=e,t=this.extract.feature.apply(this,[a])}else t=this.extract.feature.apply(this,[e]);function s(e){return e.hasOwnProperty("parts")&&e.hasOwnProperty("points")||e.hasOwnProperty("geoParts")}return t}},{key:"isValidType",value:function(e,t){var n=!1;switch(t){case"Geometry":-1==be.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],e.type)||(n=!0);break;case"FeatureCollection":n=!0;break;default:e.type==t&&(n=!0)}return n}},{key:"parseFeature",value:function(e){var t,n,r,i;r=e.properties?e.properties:{},i=e.geometry&&e.geometry.bbox||e.bbox;try{n=this.parseGeometry(e.geometry)}catch(e){throw e}return t=new en(n,r),i&&(t.bounds=Oe.fromArray(i)),e.id&&(t.fid=e.id),t}},{key:"parseGeometry",value:function(e){if(null==e)return null;var t;if("GeometryCollection"==e.type){if(!be.isArray(e.geometries))throw"GeometryCollection must have geometries array: "+e;for(var n=e.geometries.length,r=new Array(n),i=0;i<n;++i)r[i]=this.parseGeometry.apply(this,[e.geometries[i]]);t=new Le(r)}else{if(!be.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!this.parseCoords[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{t=this.parseCoords[e.type.toLowerCase()].apply(this,[e.coordinates])}catch(e){throw e}}return t}},{key:"createCRSObject",value:function(e){var t=e.layer.projection.toString(),n={};if(t.match(/epsg:/i)){var r=parseInt(t.substring(t.indexOf(":")+1));n=4326==r?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+r}}}return n}},{key:"_toiSevrerFeature",value:function(e){var t=e.attributes,n=[],r=[];for(var i in t)n.push(i),r.push(t[i]);var o={fieldNames:n,fieldValues:r,geometry:Tn.fromGeometry(e.geometry)};return o.geometry.id=e.fid,o}},{key:"createAttributes",value:function(e){if(!e)return null;var t={};!function(e,t){if(!e.hasOwnProperty("fieldNames")||!e.hasOwnProperty("fieldValues"))return;var n=e.fieldNames,r=e.fieldValues;for(var i in n)t[n[i]]=r[i]}(e,t);var n=["fieldNames","fieldValues","geometry","stringID","ID"];for(var r in e)n.indexOf(r)>-1||(t[r]=e[r]);return t}}])&&kn(n.prototype,r),i&&kn(n,i),t}();function Nn(e){return(Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function In(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dn(e,t){return!t||"object"!==Nn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fn(e){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bn(e,t){return(Bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Format.GeoJSON=Rn;var Un=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Dn(this,Fn(t).call(this,e))).regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},n.CLASS_NAME="SuperMap.Format.WKT",n.extract={point:function(e){return e.x+" "+e.y},multipoint:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push("("+this.extract.point.apply(this,[e.components[n]])+")");return t.join(",")},linestring:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.point.apply(this,[e.components[n]]));return t.join(",")},multilinestring:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push("("+this.extract.linestring.apply(this,[e.components[n]])+")");return t.join(",")},polygon:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push("("+this.extract.linestring.apply(this,[e.components[n]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push("("+this.extract.polygon.apply(this,[e.components[n]])+")");return t.join(",")},collection:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extractGeometry.apply(this,[e.components[n]]));return t.join(",")}},n.parse={point:function(e){var t=he.trim(e).split(this.regExes.spaces);return new en(new Xe(t[0],t[1]))},multipoint:function(e){for(var t,n=he.trim(e).split(","),r=[],i=0,o=n.length;i<o;++i)t=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.point.apply(this,[t]).geometry);return new en(new Fe(r))},linestring:function(e){for(var t=he.trim(e).split(","),n=[],r=0,i=t.length;r<i;++r)n.push(this.parse.point.apply(this,[t[r]]).geometry);return new en(new rt(n))},multilinestring:function(e){for(var t,n=he.trim(e).split(this.regExes.parenComma),r=[],i=0,o=n.length;i<o;++i)t=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.linestring.apply(this,[t]).geometry);return new en(new wt(r))},polygon:function(e){for(var t,n,r,i=he.trim(e).split(this.regExes.parenComma),o=[],a=0,s=i.length;a<s;++a)t=i[a].replace(this.regExes.trimParens,"$1"),n=this.parse.linestring.apply(this,[t]).geometry,r=new vt(n.components),o.push(r);return new en(new jt(o))},multipolygon:function(e){for(var t,n=he.trim(e).split(this.regExes.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)t=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.polygon.apply(this,[t]).geometry);return new en(new Tt(r))},geometrycollection:function(e){e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var t=he.trim(e).split("|"),n=[],r=0,i=t.length;r<i;++r)n.push(this.read(t[r]));return n}},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bn(e,t)}(t,nn),n=t,(r=[{key:"read",value:function(e){var t,n,r;e=e.replace(/[\n\r]/g," ");var i=this.regExes.typeStr.exec(e);return i&&(n=i[1].toLowerCase(),r=i[2],this.parse[n]&&(t=this.parse[n].apply(this,[r]))),t}},{key:"write",value:function(e){var t,n,r;e.constructor===Array?(t=e,r=!0):(t=[e],r=!1);var i=[];r&&i.push("GEOMETRYCOLLECTION(");for(var o=0,a=t.length;o<a;++o)r&&o>0&&i.push(","),n=t[o].geometry,i.push(this.extractGeometry(n));return r&&i.push(")"),i.join("")}},{key:"extractGeometry",value:function(e){var t=e.CLASS_NAME.split(".")[2].toLowerCase();return this.extract[t]?("collection"===t?"GEOMETRYCOLLECTION":t.toUpperCase())+"("+this.extract[t].apply(this,[e])+")":null}}])&&In(n.prototype,r),i&&In(n,i),t}();r.Format.WKT=Un;function Gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;t=t||{},this.speed=t.speed&&t.speed>=0?t.speed:1,this.frequency=t.speed&&t.frequency>=0?t.frequency:1e3,this.startTime=t.startTime&&null!=t.startTime?t.startTime:0,this.endTime=t.endTime&&null!=t.endTime&&t.endTime>=n.startTime?t.endTime:+new Date,this.repeat=void 0===t.repeat||t.repeat,this.reverse=void 0!==t.reverse&&t.reverse,this.currentTime=null,this.oldTime=null,this.running=!1,this.EVENT_TYPES=["start","pause","stop"],n.events=new Ht(this,null,this.EVENT_TYPES),n.speed=Number(n.speed),n.frequency=Number(n.frequency),n.startTime=Number(n.startTime),n.endTime=Number(n.endTime),n.startTime=Date.parse(new Date(n.startTime)),n.endTime=Date.parse(new Date(n.endTime)),n.currentTime=n.startTime,this.CLASS_NAME="SuperMap.TimeControlBase"}var t,n,r;return t=e,(n=[{key:"updateOptions",value:function(e){var t=this;(e=e||{}).speed&&e.speed>=0&&(t.speed=e.speed,t.speed=Number(t.speed)),e.speed&&e.frequency>=0&&(t.frequency=e.frequency,t.frequency=Number(t.frequency)),e.startTime&&null!=e.startTime&&(t.startTime=e.startTime,t.startTime=Date.parse(new Date(t.startTime))),e.endTime&&null!=e.endTime&&e.endTime>=t.startTime&&(t.endTime=e.endTime,t.endTime=Date.parse(new Date(t.endTime))),null!=e.repeat&&(t.repeat=e.repeat),null!=e.reverse&&(t.reverse=e.reverse)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.tick(),e.events.triggerEvent("start",e.currentTime))}},{key:"pause",value:function(){this.running=!1,this.events.triggerEvent("pause",this.currentTime)}},{key:"stop",value:function(){var e=this;e.currentTime=e.startTime,e.running&&(e.running=!1),e.events.triggerEvent("stop",e.currentTime)}},{key:"toggle",value:function(){this.running?this.pause():this.start()}},{key:"setSpeed",value:function(e){return e>=0&&(this.speed=e,!0)}},{key:"getSpeed",value:function(){return this.speed}},{key:"setFrequency",value:function(e){return e>=0&&(this.frequency=e,!0)}},{key:"getFrequency",value:function(){return this.frequency}},{key:"setStartTime",value:function(e){var t=this;return!((e=Date.parse(new Date(e)))>t.endTime)&&(t.startTime=e,t.currentTime<t.startTime&&(t.currentTime=t.startTime,t.tick()),!0)}},{key:"getStartTime",value:function(){return this.startTime}},{key:"setEndTime",value:function(e){var t=this;return t.endTime=Date.parse(new Date(t.endTime)),!(e<t.startTime)&&(t.endTime=e,t.currentTime>=t.endTime&&(t.currentTime=t.startTime,t.tick()),!0)}},{key:"getEndTime",value:function(){return this.endTime}},{key:"setCurrentTime",value:function(e){var t=this;return t.currentTime=Date.parse(new Date(t.currentTime)),e>=t.startTime&&e<=t.endTime&&(t.currentTime=e,t.startTime=t.currentTime,t.tick(),!0)}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"setRepeat",value:function(e){this.repeat=e}},{key:"getRepeat",value:function(){return this.repeat}},{key:"setReverse",value:function(e){this.reverse=e}},{key:"getReverse",value:function(){return this.reverse}},{key:"getRunning",value:function(){return this.running}},{key:"destroy",value:function(){var e=this;e.speed=null,e.frequency=null,e.startTime=null,e.endTime=null,e.currentTime=null,e.repeat=null,e.running=!1,e.reverse=null}},{key:"tick",value:function(){}}])&&Gn(t.prototype,n),r&&Gn(t,r),e}();function Vn(e){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qn(e,t,n){return(qn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wn(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Wn(e){return(Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yn(e,t){return(Yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.TimeControlBase=zn;var Qn=function(e){function t(e,n){var r,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this;var a=Hn(r=!(o=Wn(t).call(this,n))||"object"!==Vn(o)&&"function"!=typeof o?Hn(i):o);return a.callback=e,Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),a.update=a.update.bind(a),a.oldTime=a.currentTime,a.CLASS_NAME="SuperMap.TimeFlowControl",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yn(e,t)}(t,zn),n=t,(r=[{key:"updateOptions",value:function(e){e=e||{},qn(Wn(t.prototype),"updateOptions",this).call(this,e)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.reverse?e.currentTime===e.startTime&&(e.oldTime=e.endTime,e.currentTime=e.oldTime):e.oldTime===e.endTime&&(e.currentTime=e.startTime,e.oldTime=e.currentTime),e.tick())}},{key:"stop",value:function(){qn(Wn(t.prototype),"stop",this).call(this);var e=this;e.oldTime=e.currentTime,e.running&&(e.running=!1),e.intervalId&&window.clearTimeout(e.intervalId)}},{key:"destroy",value:function(){qn(Wn(t.prototype),"destroy",this).call(this);this.oldTime=null,this.callback=null}},{key:"tick",value:function(){var e=this;e.intervalId&&window.clearInterval(e.intervalId),e.intervalId=null,e.update(),e.intervalId=window.setInterval(e.update,e.frequency)}},{key:"update",value:function(){var e=this;if(e.running)if(e.callback&&e.callback(e.currentTime),e.reverse){if(e.currentTime===e.startTime){if(!e.repeat)return e.running=!1,null;e.oldTime=e.endTime,e.currentTime=e.oldTime}else e.currentTime=e.oldTime,e.oldTime-=e.speed;e.oldTime<=e.startTime&&(e.oldTime=e.startTime)}else{if(e.currentTime===e.endTime){if(!e.repeat)return e.running=!1,e.stop(),null;e.stop(),e.currentTime=e.startTime,e.oldTime=e.currentTime,e.start()}else e.oldTime=e.currentTime,e.currentTime+=e.speed;e.currentTime>=e.endTime&&(e.currentTime=e.endTime)}}}])&&Jn(n.prototype,r),i&&Jn(n,i),t}();r.TimeFlowControl=Qn;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
n(15),n(19);var Xn=n(4),Kn=n.n(Xn),Zn=window.fetch,$n=(r.setCORS=function(e){r.CORS=e},r.isCORS=function(){return void 0!=r.CORS?r.CORS:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest}),er=(r.setRequestTimeout=function(e){return r.RequestTimeout=e},r.getRequestTimeout=function(){return r.RequestTimeout||45e3}),tr=r.FetchRequest={commit:function(e,t,n,r){switch(e=e?e.toUpperCase():e){case"GET":return this.get(t,n,r);case"POST":return this.post(t,n,r);case"PUT":return this.put(t,n,r);case"DELETE":return this.delete(t,n,r);default:return this.get(t,n,r)}},supportDirectRequest:function(e,t){return!!be.isInTheSameDomain(e)||(void 0!=t.crossOrigin?t.crossOrigin:$n()||t.proxy)},get:function(e,t,n){n=n||{};if(e=be.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,n),!this.supportDirectRequest(e,n)){var i={url:e=e.replace(".json",".jsonp"),data:t};return r.Util.RequestJSONPPromise.GET(i)}return this.urlIsLong(e)?this._postSimulatie("GET",e.substring(0,e.indexOf("?")-1),t,n):this._fetch(e,t,n,"GET")},delete:function(e,t,n){n=n||{};if(e=be.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,n),!this.supportDirectRequest(e,n)){e=e.replace(".json",".jsonp");var i={url:e+="&_method=DELETE",data:t};return r.Util.RequestJSONPPromise.DELETE(i)}return this.urlIsLong(e)?this._postSimulatie("DELETE",e.substring(0,e.indexOf("?")-1),t,n):this._fetch(e,t,n,"DELETE")},post:function(e,t,n){if(n=n||{},!this.supportDirectRequest(e,n)){e=e.replace(".json",".jsonp");var i={url:e+="&_method=POST",data:t};return r.Util.RequestJSONPPromise.POST(i)}return this._fetch(this._processUrl(e,n),t,n,"POST")},put:function(e,t,n){if(n=n||{},e=this._processUrl(e,n),!this.supportDirectRequest(e,n)){e=e.replace(".json",".jsonp");var i={url:e+="&_method=PUT",data:t};return r.Util.RequestJSONPPromise.PUT(i)}return this._fetch(e,t,n,"PUT")},urlIsLong:function(e){for(var t=0,n=null,r=0,i=e.length;r<i;r++)(n=e.charCodeAt(r))<127?t++:128<=n&&n<=2047?t+=2:2048<=n&&n<=65535&&(t+=3);return!(t<2e3)},_postSimulatie:function(e,t,n,r){return t+=(t.indexOf("?")>-1?"&":"?")+"_method="+e,"string"!=typeof n&&(n=JSON.stringify(n)),this.post(t,n,r)},_processUrl:function(e,t){if(this._isMVTRequest(e))return e;if(-1===e.indexOf(".json")&&!t.withoutFormatSuffix)if(e.indexOf("?")<0)e+=".json";else{var n=e.split("?");2===n.length&&(e=n[0]+".json?"+n[1])}return t&&t.proxy&&("function"==typeof t.proxy?e=t.proxy(e):(e=decodeURIComponent(e),e=t.proxy+encodeURIComponent(e))),e},_fetch:function(e,t,n,r){return(n=n||{}).headers=n.headers||{},n.headers["Content-Type"]||(n.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),n.timeout?this._timeout(n.timeout,Zn(e,{method:r,headers:n.headers,body:"PUT"===r||"POST"===r?t:void 0,credentials:this._getWithCredentials(n),mode:"cors",timeout:er()}).then(function(e){return e})):Zn(e,{method:r,body:"PUT"===r||"POST"===r?t:void 0,headers:n.headers,credentials:this._getWithCredentials(n),mode:"cors",timeout:er()}).then(function(e){return e})},_getWithCredentials:function(e){return!0===e.withCredentials?"include":!1===e.withCredentials?"omit":"same-origin"},_fetchJsonp:function(e,t){return t=t||{},Kn()(e,{method:"GET",timeout:t.timeout}).then(function(e){return e})},_timeout:function(e,t){return new Promise(function(n,r){setTimeout(function(){r(new Error("timeout"))},e),t.then(n,r)})},_getParameterString:function(e){var t=[];for(var n in e){var r,i=e[n];if(null!=i&&"function"!=typeof i)r=Array.isArray(i)||"[object Object]"===i.toString()?encodeURIComponent(JSON.stringify(i)):encodeURIComponent(i),t.push(encodeURIComponent(n)+"="+r)}return t.join("&")},_isMVTRequest:function(e){return e.indexOf(".mvt")>-1||e.indexOf(".pbf")>-1}};function nr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Util.RequestJSONPPromise={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(e){for(var t in e){this.queryKeys.push(t),"string"!=typeof e[t]&&(e[t]=r.Util.toJSON(e[t]));var n=encodeURIComponent(e[t]);this.queryValues.push(n)}},issue:function(e){for(var t=this,n=t.getUid(),r=e.url,i=[],o=new Promise(function(e){t.supermap_callbacks[n]=function(r){delete t.supermap_callbacks[n],e(r)}}),a=r,s=0,l=t.queryKeys?t.queryKeys.length:0,u=0;u<l;u++)if(a.length+t.queryKeys[u].length+2>=t.limitLength){if(0==s)return!1;i.push(a),a=r,s=0,u--}else if(a.length+t.queryKeys[u].length+2+t.queryValues[u].length>t.limitLength)for(var c=t.queryValues[u];c.length>0;){var f=t.limitLength-a.length-t.queryKeys[u].length-2;a.indexOf("?")>-1?a+="&":a+="?";var h=c.substring(0,f);"%"===h.substring(f-1,f)?(f-=1,h=c.substring(0,f)):"%"===h.substring(f-2,f-1)&&(f-=2,h=c.substring(0,f)),a+=t.queryKeys[u]+"="+h,c=c.substring(f),h.length>0&&(i.push(a),a=r,s=0)}else s++,a.indexOf("?")>-1?a+="&":a+="?",a+=t.queryKeys[u]+"="+t.queryValues[u];return i.push(a),t.send(i,"SuperMap.Util.RequestJSONPPromise.supermap_callbacks["+n+"]",e&&e.proxy),o},getUid:function(){return 1e3*(new Date).getTime()+Math.floor(1e17*Math.random())},send:function(e,t,n){var r=e.length;if(r>0)for(var i=(new Date).getTime(),o=0;o<r;o++){var a=e[o];a.indexOf("?")>-1?a+="&":a+="?",a+="sectionCount="+r,a+="&sectionIndex="+o,a+="&jsonpUserID="+i,n&&(a=decodeURIComponent(a),a=n+encodeURIComponent(a)),Kn()(a,{jsonpCallbackFunction:t,timeout:3e4})}},GET:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings(e.params),this.issue(e)},POST:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},PUT:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},DELETE:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)}};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var rr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"generateToken",value:function(e,t){var n=this.servers[e];if(n)return tr.post(n.tokenServiceUrl,JSON.stringify(t.toJSON())).then(function(e){return e.text()})}},{key:"registerServers",value:function(e){this.servers=this.servers||{},be.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];this.servers[n.server]=n}}},{key:"registerToken",value:function(e,t){if(this.tokens=this.tokens||{},e&&t){var n=this._getTokenStorageKey(e);this.tokens[n]=t}}},{key:"registerKey",value:function(e,t){if(this.keys=this.keys||{},e&&!(e.length<1)&&t){e=be.isArray(e)?e:[e];for(var n=0;n<e.length;n++){var r=this._getUrlRestString(e[0])||e[0];this.keys[r]=t}}}},{key:"getServerInfo",value:function(e){return this.servers=this.servers||{},this.servers[e]}},{key:"getToken",value:function(e){if(e){this.tokens=this.tokens||{};var t=this._getTokenStorageKey(e);return this.tokens[t]}}},{key:"getKey",value:function(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;return this.keys[t]}},{key:"loginiServer",value:function(e,t,n,r){e=be.urlPathAppend(e,"services/security/login");var i={username:t&&t.toString(),password:n&&n.toString(),rememberme:r};i=JSON.stringify(i);return tr.post(e,i,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){return e.json()})}},{key:"logoutiServer",value:function(e){e=be.urlPathAppend(e,"services/security/logout");return tr.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginOnline",value:function(t,n){var r=e.SSO+"/login?service="+t;this._open(r,n)}},{key:"loginiPortal",value:function(e,t,n){e=be.urlPathAppend(e,"web/login");var r={username:t&&t.toString(),password:n&&n.toString()};r=JSON.stringify(r);return tr.post(e,r,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0}).then(function(e){return e.json()})}},{key:"logoutiPortal",value:function(e){e=be.urlPathAppend(e,"services/security/logout");return tr.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginManager",value:function(e,t,n){if(be.isInTheSameDomain(e)){var r=be.urlPathAppend(e,"icloud/security/tokens"),i=t||{},o={username:i.userName&&i.userName.toString(),password:i.password&&i.password.toString()};o=JSON.stringify(o);var a=this;return tr.post(r,o,{headers:{Accept:"*/*","Content-Type":"application/json"}}).then(function(e){e.text().then(function(e){return a.imanagerToken=e,e})})}var s=!n||n.isNewTab;this._open(e,s)}},{key:"destroyAllCredentials",value:function(){this.keys=null,this.tokens=null,this.servers=null}},{key:"destroyToken",value:function(e){if(e){var t=this._getTokenStorageKey(e);this.tokens=this.tokens||{},this.tokens[t]&&delete this.tokens[t]}}},{key:"destroyKey",value:function(e){if(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;this.keys[t]&&delete this.keys[t]}}},{key:"_open",value:function(e,t){t=null==t||t;var n=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,r=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,i="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+r+", left="+n+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";t?window.open(e,"login"):window.open(e,"login",i)}},{key:"_getTokenStorageKey",value:function(e){var t=e.match(/(.*?):\/\/([^\/]+)/i);return t?t[0]:e}},{key:"_getUrlRestString",value:function(e){if(!e)return e;var t=e.match(/(http|https):\/\/(.*\/rest)/i);return t?t[0]:e}}],(n=null)&&nr(t.prototype,n),r&&nr(t,r),e}();function ir(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}rr.INNER_WINDOW_WIDTH=600,rr.INNER_WINDOW_HEIGHT=600,rr.SSO="https://sso.supermap.com",rr.ONLINE="https://www.supermapol.com",r.SecurityManager=rr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var or=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t){var r=t.substr(t.length-1,1);this.serviceUrl="/"===r?t.substr(0,t.length-2):t}this.options=n||{},this.CLASS_NAME="SuperMap.iManagerServiceBase"}var t,n,r;return t=e,(n=[{key:"request",value:function(e,t,n,r){(r=r||{headers:{Accept:"*/*","Content-Type":"application/json"}}).hasOwnProperty("withCredentials")||(r.withCredentials=!0),r.crossOrigin=this.options.crossOrigin,r.headers=this.options.headers;var i=rr.imanagerToken;return i&&(r.headers||(r.headers=[]),r.headers["X-Auth-Token"]=i),n&&(n=JSON.stringify(n)),tr.commit(e,t,n,r).then(function(e){return e.json()})}}])&&ir(t.prototype,n),r&&ir(t,r),e}();r.iManagerServiceBase=or;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ar=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.nodeSpec="SMALL",this.nodeCount=1,this.nodeName="",this.password="",this.description="",this.physicalMachineName="",this.ips=[],this.userName="",be.extend(this,t)};function sr(e){return(sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ur(e,t){return!t||"object"!==sr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cr(e){return(cr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fr(e,t){return(fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.iManagerCreateNodeParam=ar;var hr=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ur(this,cr(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fr(e,t)}(t,or),n=t,(r=[{key:"load",value:function(){return this.request("GET",this.serviceUrl+"/web/api/service.json")}},{key:"createIServer",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/server.json",new ar(e))}},{key:"createIPortal",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/portal.json",new ar(e))}},{key:"iServerList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/server.json")}},{key:"iPortalList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/portal.json")}},{key:"startNodes",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/started.json",e)}},{key:"stopNodes",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/stopped.json",e)}}])&&lr(n.prototype,r),i&&lr(n,i),t}();function pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.iManager=hr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var yr=function(){function e(t,n){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=n||{},this.serviceUrl=t,this.serverType=o.iPortal,this.CLASS_NAME="SuperMap.iPortalServiceBase",this.withCredentials=n.withCredentials||!1,this.crossOrigin=n.crossOrigin,this.headers=n.headers}var t,n,r;return t=e,(n=[{key:"request",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{headers:this.headers,crossOrigin:this.crossOrigin,withCredentials:this.withCredentials};return t=this.createCredentialUrl(t),tr.commit(e,t,n,r).then(function(e){return e.json()})}},{key:"createCredentialUrl",value:function(e){var t=e,n=this.getCredential();if(n){var r=t.substring(t.length-1,t.length);t.indexOf("?")>-1&&"?"===r?t+=n.getUrlParameters():t.indexOf("?")>-1&&"?"!==r?t+="&"+n.getUrlParameters():t+="?"+n.getUrlParameters()}return t}},{key:"getCredential",value:function(){var e,t=rr.getToken(this.serviceUrl);return(e=t?new Gt(t,"token"):null)||(e=(t=this.getKey())?new Gt(t,"key"):null),e}},{key:"getKey",value:function(){}}])&&pr(t.prototype,n),r&&pr(t,r),e}();r.iPortalServiceBase=yr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var dr=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.resourceType="",this.pageSize=12,this.currentPage=1,this.orderBy="UPDATETIME",this.orderType="DESC",this.searchType="PUBLIC",this.tags=[],this.dirIds=[],this.resourceSubTypes=[],this.aggregationTypes=[],this.text="",this.groupIds=[],this.departmentIds=[],be.extend(this,t)};r.iPortalQueryParam=dr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var mr=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.content=[],this.total=0,this.currentPage=1,this.pageSize=12,this.aggregations=null,be.extend(this,t)};function vr(e){return(vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function br(e){return(br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _r(e,t){return(_r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.iPortalQueryResult=mr;var wr=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,r=!(o=br(t).call(this,e))||"object"!==vr(o)&&"function"!=typeof o?Sr(i):o,n=n||{},r.authorizeSetting=[],r.bounds="",r.bounds4326="",r.checkStatus="",r.createTime=0,r.description=null,r.dirId=null,r.epsgCode=0,r.heatLevel=0,r.id=0,r.name="",r.personalDirId=null,r.resourceId=0,r.resourceSubType=null,r.resourceType=null,r.serviceRootUrlId=null,r.tags=null,r.thumbnail=null,r.updateTime=0,r.userName="",r.sourceJSON={},be.extend(Sr(r),n),r.resourceUrl=e+"/web/"+r.resourceType.replace("_","").toLowerCase()+"s/"+r.resourceId,r.withCredentials&&(r.resourceUrl=e+"/web/mycontent/"+r.resourceType.replace("_","").toLowerCase()+"s/"+r.resourceId),r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_r(e,t)}(t,yr),n=t,(r=[{key:"load",value:function(){var e=this;return e.request("GET",e.resourceUrl+".json").then(function(t){if(t.error)return t;e.sourceJSON=t})}},{key:"update",value:function(){var e=this.resourceType.replace("_","").toLowerCase();"data"===e&&(this.resourceUrl=this.resourceUrl+"/attributes.json");var t=JSON.stringify(this.sourceJSON);if("service"===e){var n={authorizeSetting:this.sourceJSON.authorizeSetting,metadata:this.sourceJSON.metadata,tags:this.sourceJSON.tags,thumbnail:this.sourceJSON.thumbnail,tokenRefreshUrl:this.sourceJSON.tokenRefreshUrl};t=JSON.stringify(n)}return this.request("PUT",this.resourceUrl,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}])&&gr(n.prototype,r),i&&gr(n,i),t}();r.iPortalResource=wr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Or=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.ids=[],this.entities=[],this.resourceType="",be.extend(this,t)};function xr(e){return(xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pr(e,t){return!t||"object"!==xr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tr(e){return(Tr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Er(e,t){return(Er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.iPortalShareParam=Or;var kr=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Pr(this,Tr(t).call(this,e,n))).iportalUrl=e,n=n||{},r.withCredentials=n.withCredentials||!1,r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Er(e,t)}(t,yr),n=t,(r=[{key:"load",value:function(){return tr.get(this.iportalUrl+"/web")}},{key:"queryResources",value:function(e){if(!(e instanceof dr))return new Promise(function(e){e("queryParams is not instanceof iPortalQueryParam !")});var t=this,n=this.iportalUrl+"/gateway/catalog/resource/search.json";return e.t=(new Date).getTime(),this.request("GET",n,e).then(function(e){var n=[];e.content.forEach(function(e){n.push(new wr(t.iportalUrl,e))});var r=new mr;return r.content=n,r.total=e.total,r.currentPage=e.currentPage,r.pageSize=e.pageSize,r.aggregations=e.aggregations,r})}},{key:"updateResourcesShareSetting",value:function(e){if(!(e instanceof Or))return new Promise(function(e){e("shareParams is not instanceof iPortalShareParam !")});var t=e.resourceType.replace("_","").toLowerCase()+"s";"datas"===t&&(t="mycontent/"+t);var n={ids:e.ids,entities:e.entities},r=this.iportalUrl+"/web/"+t+"/sharesetting.json";return this.request("PUT",r,JSON.stringify(n)).then(function(e){return e})}}])&&Cr(n.prototype,r),i&&Cr(n,i),t}();r.iPortal=kr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Mr=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.permissionType="",this.entityType="",this.entityName="GUEST",this.entityId=null,be.extend(this,t)};r.iPortalShareEntity=Mr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ar=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.rootUrl="",this.tags=[],this.entities=[],be.extend(this,t)};r.iPortalAddResourceParam=Ar;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Lr=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type="",this.tags=[],this.entities=[],this.metadata={},this.addedMapNames=[],this.addedSceneNames=[],be.extend(this,t)};r.iPortalRegisterServiceParam=Lr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var jr=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.fileName="",this.type="",this.tags=[],this.dataMetaInfo={},be.extend(this,t)};r.iPortalAddDataParam=jr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Rr=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.xField="",this.yField="",this.fileEncoding="UTF-8",this.xIndex=1,this.yIndex=1,this.fieldTypes=[],this.separator="",this.firstRowIsHead=!0,this.url="",this.dataStoreInfo={},be.extend(this,t)};r.iPortalDataMetaInfoParam=Rr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Nr=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type="",this.url="",this.connectionInfo={},be.extend(this,t)};r.iPortalDataStoreInfoParam=Nr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ir=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.dataBase="",this.server="",be.extend(this,t)};function Dr(e){return(Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Br(e,t){return!t||"object"!==Dr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ur(e){return(Ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gr(e,t){return(Gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.iPortalDataConnectionInfoParam=Ir;var zr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Br(this,Ur(t).call(this,e))).iportalUrl=e,n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gr(e,t)}(t,yr),n=t,(r=[{key:"deleteResources",value:function(e){var t=e.resourceType.replace("_","").toLowerCase(),n=this.iportalUrl+"/web/"+t+"s.json?ids="+encodeURI(JSON.stringify(e.ids));return"data"===t?(n=this.iportalUrl+"/web/mycontent/datas/delete.json",this.request("POST",n,JSON.stringify(e.ids))):this.request("DELETE",n)}},{key:"addMap",value:function(e){if(!(e instanceof Ar))return this.getErrMsgPromise("addMapParams is not instanceof IPortalAddResourceParam !");var t={rootUrl:e.rootUrl,tags:e.tags,authorizeSetting:e.entities},n=this.iportalUrl+"/web/maps/batchaddmaps.json";return this.request("POST",n,JSON.stringify(t)).then(function(e){return e})}},{key:"addScene",value:function(e){if(!(e instanceof Ar))return this.getErrMsgPromise("addSceneParams is not instanceof IPortalAddResourceParam !");var t={rootUrl:e.rootUrl,tags:e.tags,authorizeSetting:e.entities},n=this.iportalUrl+"/web/scenes/batchaddscenes.json";return this.request("POST",n,JSON.stringify(t)).then(function(e){return e})}},{key:"registerService",value:function(e){if(!(e instanceof Lr))return this.getErrMsgPromise("registerParams is not instanceof IPortalRegisterServiceParam !");var t={type:e.type,tags:e.tags,authorizeSetting:e.entities,metadata:e.metadata,addedMapNames:e.addedMapNames,addedSceneNames:e.addedSceneNames},n=this.iportalUrl+"/web/services.json";return this.request("POST",n,JSON.stringify(t)).then(function(e){return e})}},{key:"getErrMsgPromise",value:function(e){return new Promise(function(t){t(e)})}},{key:"uploadDataRequest",value:function(e,t){var n=this.iportalUrl+"/web/mycontent/datas/"+e+"/upload.json";return this.request("POST",n,t)}},{key:"addData",value:function(e,t){var n=this;if(!(e instanceof jr))return this.getErrMsgPromise("params is not instanceof iPortalAddDataParam !");var r,i=this.iportalUrl+"/web/mycontent/datas.json",o={fileName:e.fileName,tags:e.tags,type:e.type},a=e.type.toLowerCase();if("excel"===a||"csv"===a){if(!(e.dataMetaInfo instanceof Rr))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");r={xField:e.dataMetaInfo.xField,yField:e.dataMetaInfo.yField},"csv"===a&&(r.fileEncoding=e.dataMetaInfo.fileEncoding),o.coordType="WGS84",o.dataMetaInfo=r}else if("hdfs"===a||"hbase"===a){if(!(e.dataMetaInfo instanceof Rr))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");if(!(e.dataMetaInfo.dataStoreInfo instanceof Nr))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo is not instanceof iPortalDataStoreInfoParam !");var s={type:e.dataMetaInfo.dataStoreInfo.type};switch(a){case"hdfs":s.url=e.dataMetaInfo.dataStoreInfo.url,r={url:e.dataMetaInfo.url,dataStoreInfo:s};break;case"hbase":if(!(e.dataMetaInfo.dataStoreInfo.connectionInfo instanceof Ir))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo.connectionInfo is not instanceof iPortalDataConnectionInfoParam !");s.connectionInfo={dataBase:e.dataMetaInfo.dataStoreInfo.connectionInfo.dataBase,server:e.dataMetaInfo.dataStoreInfo.connectionInfo.server,engineType:"HBASE"},s.datastoreType="SPATIAL",r={dataStoreInfo:s}}o.dataMetaInfo=r}return this.request("POST",i,JSON.stringify(o)).then(function(e){return"hdfs"===a||"hbase"===a?e:e.childID?n.uploadDataRequest(e.childID,t):e.customResult})}},{key:"publishOrUnpublish",value:function(e,t){if(!e.dataId||!e.serviceType)return this.getErrMsgPromise("option.dataID and option.serviceType are Required!");var n=e.dataId,r=e.dataServiceId,i=e.serviceType,o=this.iportalUrl+"/web/mycontent/datas/"+n+"/publishstatus.json?serviceType="+i;return r&&(o+="&dataServiceId="+r),this.request("PUT",o,JSON.stringify(t)).then(function(e){return t?(r||(r=e.customResult),r):e})}},{key:"getDataPublishedStatus",value:function(e,t){var n=this.iportalUrl+"/web/mycontent/datas/"+e+"/publishstatus.json?dataServiceId="+t+"&forPublish=true";return this.request("GET",n)}},{key:"unPublishDataService",value:function(e){return this.publishOrUnpublish(e,!1)}},{key:"publishDataService",value:function(e){return this.publishOrUnpublish(e,!0)}}])&&Fr(n.prototype,r),i&&Fr(n,i),t}();function Vr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.iPortalUser=zr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Jr=function(){function e(t,n){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.proxy=null,this.serverType=null,this.index=null,this.length=null,this.options=null,this.totalTimes=null,this.POLLING_TIMES=3,this._processSuccess=null,this._processFailed=null,this.isInTheSameDomain=null,this.withCredentials=!1,be.isArray(t)?(r.urls=t,r.length=t.length,r.totalTimes=r.length,1===r.length?r.url=t[0]:(r.index=parseInt(Math.random()*r.length),r.url=t[r.index])):(r.totalTimes=1,r.url=t),be.isArray(t)&&!r.isServiceSupportPolling()&&(r.url=t[0],r.totalTimes=1),r.serverType=r.serverType||o.ISERVER,n=n||{},this.crossOrigin=n.crossOrigin,this.headers=n.headers,be.extend(this,n),r.isInTheSameDomain=be.isInTheSameDomain(r.url),r.events=new Ht(r,null,r.EVENT_TYPES,!0),r.eventListeners instanceof Object&&r.events.on(r.eventListeners),this.CLASS_NAME="SuperMap.CommonServiceBase"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;be.isArray(e.urls)&&(e.urls=null,e.index=null,e.length=null,e.totalTimes=null),e.url=null,e.options=null,e._processSuccess=null,e._processFailed=null,e.isInTheSameDomain=null,e.EVENT_TYPES=null,e.events&&(e.events.destroy(),e.events=null),e.eventListeners&&(e.eventListeners=null)}},{key:"request",value:function(e){var t=this;e.url=e.url||t.url,e.proxy=e.proxy||t.proxy,e.withCredentials=void 0!=e.withCredentials?e.withCredentials:t.withCredentials,e.crossOrigin=void 0!=e.crossOrigin?e.crossOrigin:t.crossOrigin,e.headers=e.headers||t.headers,e.isInTheSameDomain=t.isInTheSameDomain;var n=this.getCredential(e.url);n&&(e.url=be.urlAppend(e.url,n.getUrlParameters())),t.calculatePollingTimes(),t._processSuccess=e.success,t._processFailed=e.failure,e.scope=t,e.success=t.getUrlCompleted,e.failure=t.getUrlFailed,t.options=e,t._commit(t.options)}},{key:"getCredential",value:function(e){var t,n,r=e;switch(this.serverType){case o.IPORTAL:(t=(n=rr.getToken(r))?new Gt(n,"token"):null)||(t=(n=rr.getKey(r))?new Gt(n,"key"):null);break;case o.ONLINE:t=(n=rr.getKey(r))?new Gt(n,"key"):null;break;default:t=(n=rr.getToken(r))?new Gt(n,"token"):null}return t}},{key:"getUrlCompleted",value:function(e){this._processSuccess(e)}},{key:"getUrlFailed",value:function(e){this.totalTimes>0?(this.totalTimes--,this.ajaxPolling()):this._processFailed(e)}},{key:"ajaxPolling",value:function(){var e=this,t=e.options.url,n=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;e.index=parseInt(Math.random()*e.length),e.url=e.urls[e.index],t=t.replace(n,n.exec(e.url)[0]),e.options.url=t,e.options.isInTheSameDomain=be.isInTheSameDomain(t),e._commit(e.options)}},{key:"calculatePollingTimes",value:function(){var e=this;e.times?e.totalTimes>e.POLLING_TIMES?e.times>e.POLLING_TIMES?e.totalTimes=e.POLLING_TIMES:e.totalTimes=e.times:e.times<e.totalTimes&&(e.totalTimes=e.times):e.totalTimes>e.POLLING_TIMES&&(e.totalTimes=e.POLLING_TIMES),e.totalTimes--}},{key:"isServiceSupportPolling",value:function(){return!("SuperMap.REST.ThemeService"===this.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===this.CLASS_NAME)}},{key:"serviceProcessCompleted",value:function(e){e=be.transformResult(e),this.events.triggerEvent("processCompleted",{result:e})}},{key:"serviceProcessFailed",value:function(e){var t=(e=be.transformResult(e)).error||e;this.events.triggerEvent("processFailed",{error:t})}},{key:"_commit",value:function(e){"POST"!==e.method&&"PUT"!==e.method||(e.params&&(e.url=be.urlAppend(e.url,be.getParameterString(e.params||{}))),e.params=e.data),tr.commit(e.method,e.url,e.params,{headers:e.headers,withCredentials:e.withCredentials,crossOrigin:e.crossOrigin,timeout:e.async?0:null,proxy:e.proxy}).then(function(e){return e.text?e.text():e.json?e.json():e}).then(function(t){var n=t;("string"==typeof t&&(n=(new un).read(t)),(!n||n.error||n.code>=300&&304!==n.code)&&(n=n&&n.error?{error:n.error}:{error:n}),n.error)?(e.scope?ye.bind(e.failure,e.scope):e.failure)(n):(n.succeed=void 0==n.succeed||n.succeed,(e.scope?ye.bind(e.success,e.scope):e.success)(n))}).catch(function(t){(e.scope?ye.bind(e.failure,e.scope):e.failure)(t)})}}])&&Vr(t.prototype,n),r&&Vr(t,r),e}();function Hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.CommonServiceBase=Jr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var qr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.filters&&"string"==typeof t.filters&&(t.filters=t.filters.split(",")),this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,be.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null}}])&&Hr(t.prototype,n),r&&Hr(t,r),e}();function Wr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.GeoCodingParameter=qr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Yr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.filters&&(t.filters=t.filters.split(",")),this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,be.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null}}])&&Wr(t.prototype,n),r&&Wr(t,r),e}();function Qr(e){return(Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kr(e,t){return!t||"object"!==Qr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zr(e,t,n){return(Zr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$r(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function $r(e){return($r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ei(e,t){return(ei=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GeoDecodingParameter=Yr;var ti=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Kr(this,$r(t).call(this,e,n))).options=n||{},r.CLASS_NAME="SuperMap.AddressMatchService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ei(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){Zr($r(t.prototype),"destroy",this).call(this)}},{key:"code",value:function(e,t){t instanceof qr&&this.processAsync(e,t)}},{key:"decode",value:function(e,t){t instanceof Yr&&this.processAsync(e,t)}},{key:"processAsync",value:function(e,t){this.request({method:"GET",url:e,params:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e){e.succeed&&delete e.succeed,Zr($r(t.prototype),"serviceProcessCompleted",this).call(this,e)}},{key:"serviceProcessFailed",value:function(e){Zr($r(t.prototype),"serviceProcessFailed",this).call(this,e)}}])&&Xr(n.prototype,r),i&&Xr(n,i),t}();function ni(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.AddressMatchService=ti;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ri=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.queryType=null,this.CLASS_NAME="SuperMap.AggQueryBuilderParameter",be.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.name=null,this.queryType=null}}])&&ni(t.prototype,n),r&&ni(t,r),e}();function ii(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.AggQueryBuilderParameter=ri;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var oi=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.aggName=null,this.aggType=null,this.aggFieldName=null,this.subAgg=null,this.CLASS_NAME="SuperMap.AggregationParameter",be.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.aggName=null,e.aggFieldName=null,e.aggType=null,e.subAgg&&(e.subAgg=null)}}])&&ii(t.prototype,n),r&&ii(t,r),e}();function ai(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.AggregationParameter=oi;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var si=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.targetDatasourceName=null,this.totalGridName=null,this.diffuseDatasetGridName=null,this.durationDatasetGridName=null,this.directDatasetGridName=null,this.latitude=null,this.timeMode="MULTIDAYS",this.dayStart=null,this.dayEnd=null,this.hourStart=null,this.hourEnd=null,this.transmittance=null,this.hourInterval=null,this.dayInterval=null,this.deleteExistResultDataset=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.AreaSolarRadiationParameters"}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){var n={};for(var r in e){if("dataset"!==r)"latitude"===r||"timeMode"===r||"dayStart"===r||("dayEnd"===r||"hourStart"===r||"hourEnd"===r)||("transmittance"===r||"hourInterval"===r||"dayInterval"===r)?n[r]=e[r]:t[r]=e[r]}t.parameter=n}}],(n=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.zFactor=1,e.averageCurvatureName=null,e.profileCurvatureName=null,e.planCurvatureName=null,e.deleteExistResultDataset=!0}}])&&ai(t.prototype,n),r&&ai(t,r),e}();function li(e){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ui(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ci(e,t){return!t||"object"!==li(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fi(e,t,n){return(fi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hi(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function hi(e){return(hi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pi(e,t){return(pi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.AreaSolarRadiationParameters=si;var yi=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ci(this,hi(t).call(this,e,n))).format=i.GEOJSON,r.CLASS_NAME="SuperMap.SpatialAnalystBase",r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pi(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){fi(hi(t.prototype),"destroy",this).call(this),this.format=null}},{key:"serviceProcessCompleted",value:function(e){var t,n=this;if((e=be.transformResult(e))&&n.format===i.GEOJSON&&"function"==typeof n.toGeoJSONResult)if(be.isArray(e)){for(var r=0;r<e.length;r++)e[r]=n.toGeoJSONResult(e[r]);t=e}else t=n.toGeoJSONResult(e);t||(t=e),n.events.triggerEvent("processCompleted",{result:t})}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;e.result&&e.result.resultGeometry&&(e=e.result);var t=new Rn;if(e.recordsets)for(var n=0,r=e.recordsets,i=r.length;n<i;n++)r[n].features&&(r[n].features=t.toGeoJSON(r[n].features));else e.recordset&&e.recordset.features&&(e.recordset.features=t.toGeoJSON(e.recordset.features));return e.resultGeometry&&(e.resultGeometry=t.toGeoJSON(e.resultGeometry)),e.regions&&(e.regions=t.toGeoJSON(e.regions)),e}}])&&ui(n.prototype,r),o&&ui(n,o),t}();function di(e){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vi(e,t){return!t||"object"!==di(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gi(e,t,n){return(gi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bi(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function bi(e){return(bi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Si(e,t){return(Si=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SpatialAnalystBase=yi;var _i=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=vi(this,bi(t).call(this,e,n))).CLASS_NAME="SuperMap.AreaSolarRadiationService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Si(e,t)}(t,yi),n=t,(r=[{key:"destroy",value:function(){gi(bi(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof si){var t=this,n={};e instanceof si&&(t.url=be.urlPathAppend(t.url,"datasets/".concat(e.dataset,"/solarradiation"))),t.url=be.urlAppend(t.url,"returnContent=true"),si.toObject(e,n);var r=be.toJSON(n);t.request({method:"POST",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&mi(n.prototype,r),i&&mi(n,i),t}();function wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.AreaSolarRadiationService=_i;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Oi=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.exp=null,this.value=100,be.extend(this,t),this.CLASS_NAME="SuperMap.BufferDistance"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.exp=null,this.value=null}}])&&wi(t.prototype,n),r&&wi(t,r),e}();function xi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.BufferDistance=Oi;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ci=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endType=A.FLAT,this.leftDistance=new Oi,this.rightDistance=new Oi,this.semicircleLineSegment=4,this.radiusUnit=p.METER,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.BufferSetting"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.endType=null,e.leftDistance&&(e.leftDistance.destroy(),e.leftDistance=null),e.rightDistance&&(e.rightDistance.destroy(),e.rightDistance=null),e.semicircleLineSegment=null,e.radiusUnit=null}}])&&xi(t.prototype,n),r&&xi(t,r),e}();function Pi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.BufferSetting=Ci;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ti=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.bufferSetting=new Ci,be.extend(this,t),this.CLASS_NAME="SuperMap.BufferAnalystParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.bufferSetting&&(this.bufferSetting.destroy(),this.bufferSetting=null)}}])&&Pi(t.prototype,n),r&&Pi(t,r),e}();function Ei(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.BufferAnalystParameters=Ti;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ki=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expectCount=1e3,this.dataset=null,this.dataReturnMode=I.RECORDSET_ONLY,this.deleteExistResultDataset=!0,be.extend(this,t),this.CLASS_NAME="SuperMap.DataReturnOption"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.expectCount=null,this.dataset=null,this.dataReturnMode=null,this.deleteExistResultDataset=null}}])&&Ei(t.prototype,n),r&&Ei(t,r),e}();function Mi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.DataReturnOption=ki;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ai=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.foreignTableName=null,this.joinFilter=null,this.joinType=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.JoinItem"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.foreignTableName=null,this.joinFilter=null,this.joinType=null}},{key:"toServerJSONObject",value:function(){var e={};return e=be.copyAttributes(e,this)}}])&&Mi(t.prototype,n),r&&Mi(t,r),e}();function Li(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.JoinItem=Ai;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ji=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.alias=null,this.connect=null,this.dataBase=null,this.driver=null,this.engineType=null,this.exclusive=null,this.OpenLinkTable=null,this.password=null,this.readOnly=null,this.server=null,this.user=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.DatasourceConnectionInfo"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.alias=null,e.connect=null,e.dataBase=null,e.driver=null,e.engineType=null,e.exclusive=null,e.OpenLinkTable=null,e.password=null,e.readOnly=null,e.server=null,e.user=null}}])&&Li(t.prototype,n),r&&Li(t,r),e}();function Ri(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.DatasourceConnectionInfo=ji;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ni=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasourceConnectionInfo=null,this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.LinkItem"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.datasourceConnectionInfo instanceof ji&&(e.datasourceConnectionInfo.destroy(),e.datasourceConnectionInfo=null),e.foreignKeys=null,e.foreignTable=null,e.linkFields=null,e.linkFilter=null,e.name=null,e.primaryKeys=null}}])&&Ri(t.prototype,n),r&&Ri(t,r),e}();function Ii(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.LinkItem=Ni;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Di=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attributeFilter=null,this.name=null,this.joinItems=null,this.linkItems=null,this.ids=null,this.orderBy=null,this.groupBy=null,this.fields=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.FilterParameter"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;if(e.attributeFilter=null,e.name=null,e.joinItems){for(var t=0,n=e.joinItems,r=n.length;t<r;t++)n[t].destroy();e.joinItems=null}if(e.linkItems){for(var i=0,o=e.linkItems,a=o.length;i<a;i++)o[i].destroy();e.linkItems=null}e.ids=null,e.orderBy=null,e.groupBy=null,e.fields=null}}])&&Ii(t.prototype,n),r&&Ii(t,r),e}();function Fi(e){return(Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ui(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gi(e,t,n){return(Gi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zi(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function zi(e){return(zi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vi(e,t){return(Vi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FilterParameter=Di;var Ji=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=zi(t).call(this,e))||"object"!==Fi(i)&&"function"!=typeof i?Ui(r):i).dataset=null,n.filterQueryParameter=new Di,n.resultSetting=new ki,n.isAttributeRetained=!0,n.isUnion=!1,be.extend(Ui(n),e),n.CLASS_NAME="SuperMap.DatasetBufferAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vi(e,t)}(t,Ti),n=t,i=[{key:"toObject",value:function(e,t){for(var n in e)if("bufferSetting"===n)e.bufferSetting.radiusUnit=e.bufferSetting.radiusUnit.toUpperCase(),t.bufferAnalystParameter=e.bufferSetting;else if("resultSetting"===n)t.dataReturnOption=e.resultSetting;else{if("dataset"===n)continue;t[n]=e[n]}}}],(r=[{key:"destroy",value:function(){Gi(zi(t.prototype),"destroy",this).call(this);var e=this;e.dataset=null,e.filterQueryParameter&&(e.filterQueryParameter.destroy(),e.filterQueryParameter=null),e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.isAttributeRetained=null,e.isUnion=null}}])&&Bi(n.prototype,r),i&&Bi(n,i),t}();function Hi(e){return(Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yi(e,t,n){return(Yi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qi(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Qi(e){return(Qi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xi(e,t){return(Xi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.DatasetBufferAnalystParameters=Ji;var Ki=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Qi(t).call(this,e))||"object"!==Hi(i)&&"function"!=typeof i?Wi(r):i).sourceGeometry=null,n.sourceGeometrySRID=null,e&&be.extend(Wi(n),e),n.CLASS_NAME=" SuperMap.GeometryBufferAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xi(e,t)}(t,Ti),n=t,i=[{key:"toObject",value:function(e,t){for(var n in e)if("bufferSetting"===n){var r={};for(var i in e.bufferSetting)r[i]=e.bufferSetting[i];t.analystParameter=r}else"sourceGeometry"===n?t.sourceGeometry=Tn.fromGeometry(e.sourceGeometry):t[n]=e[n]}}],(r=[{key:"destroy",value:function(){Yi(Qi(t.prototype),"destroy",this).call(this);this.sourceGeometry&&(this.sourceGeometry.destroy(),this.sourceGeometry=null)}}])&&qi(n.prototype,r),i&&qi(n,i),t}();function Zi(e){return(Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function to(e,t,n){return(to="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=no(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function no(e){return(no=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ro(e,t){return(ro=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GeometryBufferAnalystParameters=Ki;var io=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=no(t).call(this,e,n))||"object"!==Zi(o)&&"function"!=typeof o?eo(i):o).mode=null,n&&be.extend(eo(r),n),r.CLASS_NAME="SuperMap.BufferAnalystService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ro(e,t)}(t,yi),n=t,(r=[{key:"destroy",value:function(){to(no(t.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},n=this;e instanceof Ji?(n.mode="datasets",n.url=be.urlPathAppend(n.url,"datasets/"+e.dataset+"/buffer"),Ji.toObject(e,t)):e instanceof Ki&&(n.mode="geometry",n.url=be.urlPathAppend(n.url,"geometry/buffer"),Ki.toObject(e,t));var r=be.toJSON(t);n.url=be.urlAppend(n.url,"returnContent=true"),n.request({method:"POST",data:r,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}])&&$i(n.prototype,r),i&&$i(n,i),t}();function oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.BufferAnalystService=io;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ao=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=j.UDB,this.datasetName="analystResult",this.datasourceInfo=null,this.outputPath="",be.extend(this,t),this.CLASS_NAME="SuperMap.OutputSetting"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.type=null,e.datasetName=null,e.outputPath=null,e.datasourceInfo instanceof ji&&(e.datasourceInfo.destroy(),e.datasourceInfo=null)}}])&&oo(t.prototype,n),r&&oo(t,r),e}();function so(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.OutputSetting=ao;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var lo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=null,this.numericPrecision=1,this.rangeMode=b.EQUALINTERVAL,this.rangeCount="",this.colorGradientType=_.YELLOW_RED,be.extend(this,t),this.CLASS_NAME="SuperMap.MappingParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;if(e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.numericPrecision=null,e.rangeMode=null,e.rangeCount=null,e.colorGradientType=null}}])&&so(t.prototype,n),r&&so(t,r),e}();function uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.MappingParameters=lo;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var co=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName="",this.bounds="",this.distance="",this.distanceField="",this.distanceUnit=ee.METER,this.dissolveField="",this.output=null,this.mappingParameters=null,!t)return this;be.extend(this,t),this.CLASS_NAME="SuperMap.BuffersAnalystJobsParameter"}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},"bounds"===n&&e[n]?t.analyst[n]=e[n].toBBOX():t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.bounds=null,this.distance=null,this.distanceField=null,this.distanceUnit=null,this.dissolveField=null,this.output instanceof ao&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof lo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&uo(t.prototype,n),r&&uo(t,r),e}();function fo(e){return(fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ho(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function po(e,t){return!t||"object"!==fo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yo(e,t,n){return(yo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mo(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function mo(e){return(mo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vo(e,t){return(vo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.BuffersAnalystJobsParameter=co;var go=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=n||{}).EVENT_TYPES=["processCompleted","processFailed","processRunning"],(r=po(this,mo(t).call(this,e,n))).CLASS_NAME="SuperMap.ProcessingServiceBase",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vo(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){yo(mo(t.prototype),"destroy",this).call(this)}},{key:"getJobs",value:function(e){var t=this;tr.get(t._processUrl(e),null,{proxy:t.proxy}).then(function(e){return e.json()}).then(function(e){t.events.triggerEvent("processCompleted",{result:e})}).catch(function(e){t.eventListeners.processFailed({error:e})})}},{key:"addJob",value:function(e,t,n,r){var i=this,o=null;t&&t instanceof n&&(o=new Object,n.toObject(t,o));var a=Object.assign({"Content-Type":"application/x-www-form-urlencoded"},i.headers||{}),s={proxy:i.proxy,headers:a,withCredentials:i.withCredentials,crossOrigin:i.crossOrigin,isInTheSameDomain:i.isInTheSameDomain};tr.post(i._processUrl(e),JSON.stringify(o),s).then(function(e){return e.json()}).then(function(e){e.succeed?i.serviceProcessCompleted(e,r):i.serviceProcessFailed(e)}).catch(function(e){i.serviceProcessFailed({error:e})})}},{key:"serviceProcessCompleted",value:function(e,t){e=be.transformResult(e),t=t||1e3;var n=this;if(e)var r=setInterval(function(){tr.get(n._processUrl(e.newResourceLocation),{_t:(new Date).getTime()}).then(function(e){return e.json()}).then(function(e){n.events.triggerEvent("processRunning",{id:e.id,state:e.state}),"LOST"!==e.state.runState&&"KILLED"!==e.state.runState&&"FAILED"!==e.state.runState||(clearInterval(r),n.events.triggerEvent("processFailed",{error:e.state.errorMsg,state:e.state.runState})),"FINISHED"===e.state.runState&&e.setting.serviceInfo&&(clearInterval(r),n.events.triggerEvent("processCompleted",{result:e}))}).catch(function(e){clearInterval(r),n.events.triggerEvent("processFailed",{error:e})})},t)}},{key:"serviceProcessFailed",value:function(e){yo(mo(t.prototype),"serviceProcessFailed",this).call(this,e)}},{key:"_processUrl",value:function(e){return rr.getToken(e)&&(e=be.urlAppend(e,"token="+rr.getToken(e))),e}}])&&ho(n.prototype,r),i&&ho(n,i),t}();function bo(e){return(bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function So(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _o(e,t){return!t||"object"!==bo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wo(e,t,n){return(wo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Oo(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Oo(e){return(Oo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xo(e,t){return(xo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ProcessingServiceBase=go;var Co=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=_o(this,Oo(t).call(this,e,n))).url=be.urlPathAppend(r.url,"spatialanalyst/buffers"),r.CLASS_NAME="SuperMap.BuffersAnalystJobsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xo(e,t)}(t,go),n=t,(r=[{key:"destroy",value:function(){wo(Oo(t.prototype),"destroy",this).call(this)}},{key:"getBuffersJobs",value:function(){wo(Oo(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getBuffersJob",value:function(e){wo(Oo(t.prototype),"getJobs",this).call(this,be.urlPathAppend(this.url,e))}},{key:"addBuffersJob",value:function(e,n){wo(Oo(t.prototype),"addJob",this).call(this,this.url,e,co,n)}}])&&So(n.prototype,r),i&&So(n,i),t}();function Po(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.BuffersAnalystJobsService=Co;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var To=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.BurstPipelineAnalystParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=null}}])&&Po(t.prototype,n),r&&Po(t,r),e}();function Eo(e){return(Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ko(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mo(e,t){return!t||"object"!==Eo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ao(e,t,n){return(Ao="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lo(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Lo(e){return(Lo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jo(e,t){return(jo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.BurstPipelineAnalystParameters=To;var Ro=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Mo(this,Lo(t).call(this,e,n))).format=i.GEOJSON,r.CLASS_NAME="SuperMap.NetworkAnalystServiceBase",r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jo(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){Ao(Lo(t.prototype),"destroy",this).call(this),this.format=null}},{key:"serviceProcessCompleted",value:function(e){var t;(e=be.transformResult(e))&&this.format===i.GEOJSON&&"function"==typeof this.toGeoJSONResult&&(t=this.toGeoJSONResult(e)),t||(t=e),this.events.triggerEvent("processCompleted",{result:t})}},{key:"toGeoJSONResult",value:function(e){return null}}])&&ko(n.prototype,r),o&&ko(n,o),t}();function No(e){return(No="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Io(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Do(e,t){return!t||"object"!==No(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fo(e,t,n){return(Fo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bo(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Bo(e){return(Bo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uo(e,t){return(Uo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.NetworkAnalystServiceBase=Ro;var Go=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Do(this,Bo(t).call(this,e,n))).CLASS_NAME="SuperMap.BurstPipelineAnalystService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uo(e,t)}(t,Ro),n=t,(r=[{key:"destroy",value:function(){Fo(Bo(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(!(e instanceof To))return null;var t,n=this;if(n.url=be.urlPathAppend(n.url,"burstAnalyse"),t={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");if(null===e.edgeID&&null===e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");null!==e.edgeID?t.edgeID=e.edgeID:t.nodeID=e.nodeID,n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}])&&Io(n.prototype,r),i&&Io(n,i),t}();function zo(e){return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jo(e,t){return!t||"object"!==zo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ho(e,t,n){return(Ho="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qo(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function qo(e){return(qo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wo(e,t){return(Wo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.BurstPipelineAnalystService=Go;var Yo=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Jo(this,qo(t).call(this,e,n))).CLASS_NAME="SuperMap.ChartFeatureInfoSpecsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wo(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){Ho(qo(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"processAsync",value:function(){var e=this;e.isTempLayers||be.urlPathAppend(e.url,"chartFeatureInfoSpecs"),e.request({method:"GET",params:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&Vo(n.prototype,r),i&&Vo(n,i),t}();function Qo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ChartFeatureInfoSpecsService=Yo;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Xo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null,be.extend(this,t),this.CLASS_NAME="SuperMap.ChartQueryFilterParameter"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.isQueryPoint=null,e.isQueryLine=null,e.isQueryRegion=null,e.attributeFilter=null,e.chartFeatureInfoSpecCode=null}},{key:"toJson",value:function(){var e="";return e+='"isQueryPoint":'+this.isQueryPoint+",",e+='"isQueryLine":'+this.isQueryLine+",",e+='"isQueryRegion":'+this.isQueryRegion+",",this.attributeFilter&&(e+='"attributeFilter": "'+this.attributeFilter+'",'),e="{"+(e+='"chartFeatureInfoSpecCode":'+this.chartFeatureInfoSpecCode)+"}"}}])&&Qo(t.prototype,n),r&&Qo(t,r),e}();function Ko(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ChartQueryFilterParameter=Xo;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Zo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null,be.extend(this,t),this.CLASS_NAME="SuperMap.ChartQueryParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.queryMode=null,e.bounds=null,e.chartLayerNames=null,e.chartQueryFilterParameters=null,e.returnContent=!0,e.startRecord=0,e.expectCount=null}},{key:"getVariablesJson",value:function(){var e="";if(e+='"queryMode":"'+this.queryMode+'",',this.chartLayerNames&&this.chartLayerNames.length){for(var t=[],n=this.chartLayerNames.length,r=0;r<n;r++)t.push('"'+this.chartLayerNames[r]+'"');e+='"chartLayerNames":'+("["+t.join(",")+"]")+","}if("ChartBoundsQuery"===this.queryMode&&this.bounds&&(e+='"bounds":{"leftBottom":{"x":'+this.bounds.left+',"y":'+this.bounds.bottom+'},"rightTop":{"x":'+this.bounds.right+',"y":'+this.bounds.top+"}},"),this.chartQueryFilterParameters&&this.chartQueryFilterParameters.length){for(var i=[],o=this.chartQueryFilterParameters.length,a=0;a<o;a++){var s=this.chartQueryFilterParameters[a];s instanceof Xo&&i.push(s.toJson())}var l="["+i.join(",")+"]";l='"chartQueryParams":'+l+",",l+='"startRecord":'+this.startRecord+",",e+='"chartQueryParameters":'+(l="{"+(l+='"expectCount":'+this.expectCount)+"}")}return e="{"+e+"}"}}])&&Ko(t.prototype,n),r&&Ko(t,r),e}();function $o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ChartQueryParameters=Zo;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ea=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.customParams=null,this.prjCoordSys=null,this.expectCount=1e5,this.networkType=a.LINE,this.queryOption=s.ATTRIBUTEANDGEOMETRY,this.queryParams=null,this.startRecord=0,this.holdTime=10,this.returnCustomResult=!1,this.returnFeatureWithFieldCaption=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.QueryParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;if(e.customParams=null,e.expectCount=null,e.networkType=null,e.queryOption=null,e.queryParams){for(var t=0,n=e.queryParams,r=n.length;t<r;t++)n[t].destroy();e.queryParams=null}e.startRecord=null,e.holdTime=null,e.returnCustomResult=null,e.prjCoordSys=null}}])&&$o(t.prototype,n),r&&$o(t,r),e}();function ta(e){return(ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function na(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ra(e,t){return!t||"object"!==ta(t)&&"function"!=typeof t?oa(e):t}function ia(e){return(ia=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aa(e,t){return(aa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.QueryParameters=ea;var sa=function(e){function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=ra(this,ia(t).call(this,e,n)),n=n||{},r.returnContent=null,r.format=i.GEOJSON,be.extend(oa(r),n);var o=oa(r);return n.format&&(o.format=n.format.toUpperCase()),o.url?(o.url=be.urlPathAppend(o.url,"queryResults"),r.CLASS_NAME="SuperMap.ChartQueryService",r):ra(r)}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aa(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){Jr.prototype.destroy.apply(this,arguments),this.returnContent=null,this.format=null}},{key:"processAsync",value:function(e){if(e instanceof Zo){var t,n=this;n.returnContent=e.returnContent,t=e.getVariablesJson(),n.returnContent&&(n.url=be.urlAppend(n.url,"returnContent=true")),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){if((e=be.transformResult(e))&&e.recordsets&&this.format===i.GEOJSON)for(var t=0,n=e.recordsets,r=n.length;t<r;t++)if(n[t].features){var o=new Rn;n[t].features=o.toGeoJSON(n[t].features)}this.events.triggerEvent("processCompleted",{result:e})}},{key:"getQueryParameters",value:function(e){return new ea({queryMode:e.queryMode,bounds:e.bounds,chartLayerNames:e.chartLayerNames,chartQueryFilterParameters:e.chartQueryFilterParameters,returnContent:e.returnContent})}}])&&na(n.prototype,r),o&&na(n,o),t}();function la(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ChartQueryService=sa;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ua=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=!0,this.isExactClip=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ClipParameter"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.clipDatasetName=null,e.clipDatasourceName=null,e.clipRegion=null,e.isClipInRegion=null,e.isExactClip=null}},{key:"toJSON",value:function(){return be.toJSON({isClipInRegion:this.isClipInRegion,clipDatasetName:this.clipDatasetName,clipDatasourceName:this.clipDatasourceName,isExactClip:this.isExactClip,clipRegion:Tn.fromGeometry(this.clipRegion)})}}])&&la(t.prototype,n),r&&la(t,r),e}();function ca(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ClipParameter=ua;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fa=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.elevation=null,this.color=null,be.extend(this,t);var n=this.color;n&&(this.color=new fn(n.red,n.green,n.blue)),this.CLASS_NAME="SuperMap.ColorDictionary"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){be.reset(this)}},{key:"toServerJSONObject",value:function(){var e={};return e=be.copyAttributes(e,this)}}])&&ca(t.prototype,n),r&&ca(t,r),e}();function ha(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ColorDictionary=fa;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var pa=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.returnEdgeFeatures=!1,this.returnEdgeGeometry=!1,this.returnEdgeIDs=!1,this.returnNodeFeatures=!1,this.returnNodeGeometry=!1,this.returnNodeIDs=!1,this.returnPathGuides=!1,this.returnRoutes=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.TransportationAnalystResultSetting")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.returnEdgeFeatures=null,e.returnEdgeGeometry=null,e.returnEdgeIDs=null,e.returnNodeFeatures=null,e.returnNodeGeometry=null,e.returnNodeIDs=null,e.returnPathGuides=null,e.returnRoutes=null}}])&&ha(t.prototype,n),r&&ha(t,r),e}();function ya(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.TransportationAnalystResultSetting=pa;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var da=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.barrierEdgeIDs=null,this.barrierNodeIDs=null,this.barrierPoints=null,this.weightFieldName=null,this.turnWeightField=null,this.resultSetting=new pa,be.extend(this,t),this.CLASS_NAME="SuperMap.TransportationAnalystParameter")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;if(e.barrierEdgeIDs=null,e.barrierNodeIDs=null,e.weightFieldName=null,e.turnWeightField=null,e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.barrierPoints&&e.barrierPoints.length)for(var t in e.barrierPoints)e.barrierPoints[t].destroy();e.barrierPoints=null}}])&&ya(t.prototype,n),r&&ya(t,r),e}();function ma(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.TransportationAnalystParameter=da;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var va=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.nodes=null,this.parameter=new da,be.extend(this,t),this.CLASS_NAME="SuperMap.ComputeWeightMatrixParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&ma(t.prototype,n),r&&ma(t,r),e}();function ga(e){return(ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ba(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sa(e,t){return!t||"object"!==ga(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _a(e,t,n){return(_a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wa(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function wa(e){return(wa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oa(e,t){return(Oa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ComputeWeightMatrixParameters=va;var xa=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Sa(this,wa(t).call(this,e,n))).CLASS_NAME="SuperMap.ComputeWeightMatrixService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oa(e,t)}(t,Ro),n=t,(r=[{key:"destroy",value:function(){_a(wa(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof va){var t,n=this;n.url=be.urlPathAppend(n.url,"weightmatrix"),t={parameter:be.toJSON(e.parameter),nodes:n.getJson(e.isAnalyzeById,e.nodes)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var n="[",r=t?t.length:0;if(!1===e)for(var i=0;i<r;i++)i>0&&(n+=","),n+='{"x":'+t[i].x+',"y":'+t[i].y+"}";else if(!0===e)for(var o=0;o<r;o++)o>0&&(n+=","),n+=t[o];return n+="]"}}])&&ba(n.prototype,r),i&&ba(n,i),t}();function Ca(e){return(Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ta(e){return(Ta=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ea(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ka(e,t){return(ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ComputeWeightMatrixService=xa;var Ma=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=n||{}).EVENT_TYPES=["broadcastSocketConnected","broadcastSocketError","broadcastFailed","broadcastSucceeded","subscribeSocketConnected","subscribeSocketError","messageSucceeded","setFilterParamSucceeded"],i=this,(r=!(o=Ta(t).call(this,e,n))||"object"!==Ca(o)&&"function"!=typeof o?Ea(i):o).geometry=null,r.prjCoordSys=null,r.excludeField=null,be.extend(Ea(r),n),r.CLASS_NAME="SuperMap.DataFlowService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ka(e,t)}(t,Jr),n=t,(r=[{key:"initBroadcast",value:function(){var e=this;return this.broadcastWebSocket=this._connect(be.urlPathAppend(e.url,"broadcast")),this.broadcastWebSocket.onopen=function(t){e.broadcastWebSocket.isOpen=!0,t.eventType="broadcastSocketConnected",e.events.triggerEvent("broadcastSocketConnected",t)},this.broadcastWebSocket.onclose=function(t){e.broadcastWebSocket.isOpen=!1,t.eventType="broadcastSocketConnected",e.events.triggerEvent("broadcastSocketConnected",t)},this.broadcastWebSocket.onerror=function(t){t.eventType="broadcastSocketError",e.events.triggerEvent("broadcastSocketError",t)},this}},{key:"broadcast",value:function(e){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen?(this.broadcastWebSocket.send(JSON.stringify(e)),this.events.triggerEvent("broadcastSucceeded")):this.events.triggerEvent("broadcastFailed")}},{key:"initSubscribe",value:function(){var e=this;return this.subscribeWebSocket=this._connect(be.urlPathAppend(e.url,"subscribe")),this.subscribeWebSocket.onopen=function(t){e.subscribeWebSocket.send(e._getFilterParams()),t.eventType="subscribeSocketConnected",e.events.triggerEvent("subscribeSocketConnected",t)},this.subscribeWebSocket.onerror=function(t){t.eventType="subscribeSocketError",e.events.triggerEvent("subscribeSocketError",t)},this.subscribeWebSocket.onmessage=function(t){e._onMessage(t)},this}},{key:"setExcludeField",value:function(e){return this.excludeField=e,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"setGeometry",value:function(e){return this.geometry=e,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"unSubscribe",value:function(){this.subscribeWebSocket&&(this.subscribeWebSocket.close(),this.subscribeWebSocket=null)}},{key:"unBroadcast",value:function(){this.broadcastWebSocket&&(this.broadcastWebSocket.close(),this.broadcastWebSocket=null)}},{key:"destroy",value:function(){Jr.prototype.destroy.apply(this,arguments);this.geometry=null,this.prjCoordSys=null,this.excludeField=null,this.unBroadcast(),this.unSubscribe()}},{key:"_getFilterParams",value:function(){var e={filterParam:{prjCoordSys:this.prjCoordSys,excludeField:this.excludeField,geometry:this.geometry}};return be.toJSON(e)}},{key:"_onMessage",value:function(e){if(e.data&&e.data.indexOf("filterParam")>=0){var t=JSON.parse(e.data);return e.filterParam=t,e.eventType="setFilterParamSucceeded",void this.events.triggerEvent("setFilterParamSucceeded",e)}var n=JSON.parse(e.data);e.featureResult=n,e.eventType="messageSucceeded",this.events.triggerEvent("messageSucceeded",e)}},{key:"_connect",value:function(e){return e=this._appendCredentials(e),"WebSocket"in window?new WebSocket(e):"MozWebSocket"in window?new(0,window.MozWebSocket)(e):(console.log("no WebSocket"),null)}},{key:"_appendCredentials",value:function(e){var t=rr.getToken(e);return t&&(e=be.urlAppend(e,"token="+t)),e}}])&&Pa(n.prototype,r),i&&Pa(n,i),t}();function Aa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.DataFlowService=Ma;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var La=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.bounds=null,this.dataSourceName=null,this.description=null,this.encodeType=null,this.isReadOnly=null,this.name=null,this.prjCoordSys=null,this.tableName=null,this.type=null,be.extend(this,t);var n=this.bounds;n&&(this.bounds=new Oe(n.leftBottom.x,n.leftBottom.y,n.rightTop.x,n.rightTop.y)),this.CLASS_NAME="SuperMap.DatasetInfo"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){be.reset(this)}},{key:"toServerJSONObject",value:function(){var e={};return(e=be.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e}}])&&Aa(t.prototype,n),r&&Aa(t,r),e}();function ja(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.DatasetInfo=La;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ra=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.operation=L.UNION,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.OverlayAnalystParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.operation=null}}])&&ja(t.prototype,n),r&&ja(t,r),e}();function Na(e){return(Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ia(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Da(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fa(e,t,n){return(Fa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ba(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ba(e){return(Ba=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ua(e,t){return(Ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.OverlayAnalystParameters=Ra;var Ga=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Ba(t).call(this,e))||"object"!==Na(i)&&"function"!=typeof i?Da(r):i).operateDataset=null,n.operateDatasetFields=[],n.operateDatasetFilter=new Di,n.operateRegions=[],n.sourceDataset=null,n.sourceDatasetFields=[],n.sourceDatasetFilter=new Di,n.tolerance=0,n.resultSetting=new ki,be.extend(Da(n),e),n.CLASS_NAME="SuperMap.DatasetOverlayAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ua(e,t)}(t,Ra),n=t,i=[{key:"toObject",value:function(e,t){for(var n in e)if("sourceDataset"!==n)if("operateRegions"===n){t.operateRegions=[];var r=e.operateRegions;for(var i in r)r.hasOwnProperty(i)&&(t.operateRegions[i]=Tn.fromGeometry(r[i]))}else"resultSetting"===n?t.dataReturnOption=e.resultSetting:t[n]=e[n]}}],(r=[{key:"destroy",value:function(){Fa(Ba(t.prototype),"destroy",this).call(this);var e=this;if(e.operateDataset=null,e.operateDatasetFields=null,e.operateDatasetFilter&&(e.operateDatasetFilter.destroy(),e.operateDatasetFilter=null),e.operateRegions){for(var n=0,r=e.operateRegions,i=r.length;n<i;n++)r[n].destroy();e.operateRegions=null}e.sourceDataset=null,e.sourceDatasetFields=null,e.sourceDatasetFilter&&(e.sourceDatasetFilter.destroy(),e.sourceDatasetFilter=null),e.tolerance=null,e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null)}}])&&Ia(n.prototype,r),i&&Ia(n,i),t}();function za(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.DatasetOverlayAnalystParameters=Ga;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Va=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clipRegion=null,this.datumValue=0,this.expectedZValues=null,this.interval=0,this.resampleTolerance=0,this.smoothMethod=R.BSPLINE,this.smoothness=0,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.SurfaceAnalystParametersSetting"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.clipRegion&&(e.clipRegion.destroy(),e.clipRegion=null),e.datumValue=null,e.expectedZValues=null,e.interval=null,e.resampleTolerance=null,e.smoothMethod=null,e.smoothness=null}},{key:"toJSON",value:function(){var e="'datumValue':"+be.toJSON(this.datumValue);if(e+=",'interval':"+be.toJSON(this.interval),e+=",'resampleTolerance':"+be.toJSON(this.resampleTolerance),e+=",'smoothMethod':"+be.toJSON(this.smoothMethod),e+=",'smoothness':"+be.toJSON(this.smoothness),null!=this.expectedZValues&&(e+=",'expectedZValues':"+be.toJSON(this.expectedZValues)),null!=this.clipRegion){var t=this.clipRegion;this.clipRegion instanceof Ce&&this.clipRegion.components&&(t=Tn.fromGeometry(this.clipRegion)),e+=",'clipRegion':"+be.toJSON(t)}return"{"+e+"}"}}])&&za(t.prototype,n),r&&za(t,r),e}();function Ja(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SurfaceAnalystParametersSetting=Va;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ha=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolution=0,this.extractParameter=new Va,this.resultSetting=new ki,this.surfaceAnalystMethod=N.ISOLINE,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.SurfaceAnalystParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.resolution=null,e.extractParameter&&(e.extractParameter.destroy(),e.extractParameter=null),e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.surfaceAnalystMethod=null}}])&&Ja(t.prototype,n),r&&Ja(t,r),e}();function qa(e){return(qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ya(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qa(e,t,n){return(Qa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xa(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Xa(e){return(Xa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ka(e,t){return(Ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SurfaceAnalystParameters=Ha;var Za=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Xa(t).call(this,e))||"object"!==qa(i)&&"function"!=typeof i?Ya(r):i).dataset=null,n.filterQueryParameter=new Di,n.zValueFieldName=null,e&&be.extend(Ya(n),e),n.CLASS_NAME="SuperMap.DatasetSurfaceAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ka(e,t)}(t,Ha),n=t,i=[{key:"toObject",value:function(e,t){for(var n in e)if("filterQueryParameter"===n&&(t.filterQueryParameter=e.filterQueryParameter),"extractParameter"===n)e.extractParameter.clipRegion instanceof Ce&&e.extractParameter.clipRegion.components&&(e.extractParameter.clipRegion=Tn.fromGeometry(e.extractParameter.clipRegion)),t.extractParameter=e.extractParameter;else{if("dataset"===n)continue;if("surfaceAnalystMethod"===n)continue;t[n]=e[n]}}}],(r=[{key:"destroy",value:function(){Qa(Xa(t.prototype),"destroy",this).call(this);var e=this;e.dataset=null,e.filterQueryParameter&&(e.filterQueryParameter.destroy(),e.filterQueryParameter=null),e.zValueFieldName=null}}])&&Wa(n.prototype,r),i&&Wa(n,i),t}();function $a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.DatasetSurfaceAnalystParameters=Za;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var es=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.clipRegion=null,this.createResultDataset=!1,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=!0,be.extend(this,t),this.CLASS_NAME="SuperMap.ThiessenAnalystParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.clipRegion&&(e.clipRegion.destroy(),e.clipRegion=null),e.createResultDataset=null,e.resultDatasetName=null,e.resultDatasourceName=null,e.returnResultRegion=null}}])&&$a(t.prototype,n),r&&$a(t,r),e}();function ts(e){return(ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ns(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function is(e,t,n){return(is="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=os(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function os(e){return(os=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function as(e,t){return(as=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThiessenAnalystParameters=es;var ss=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=os(t).call(this,e))||"object"!==ts(i)&&"function"!=typeof i?rs(r):i).filterQueryParameter=null,n.dataset=null,e&&be.extend(rs(n),e),n.CLASS_NAME="SuperMap.DatasetThiessenAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&as(e,t)}(t,es),n=t,i=[{key:"toObject",value:function(e,t){for(var n in e)"clipRegion"===n?t.clipRegion=Tn.fromGeometry(e.clipRegion):t[n]=e[n]}}],(r=[{key:"destroy",value:function(){is(os(t.prototype),"destroy",this).call(this);this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null)}}])&&ns(n.prototype,r),i&&ns(n,i),t}();function ls(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.DatasetThiessenAnalystParameters=ss;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var us=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.DensityKernelAnalystParameters"}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"dataset"!==n&&(t[n]=e[n])}}],(n=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.bounds=null,e.fieldName=null,e.resultGridDatasetResolution=null,e.searchRadius=null,e.targetDatasource=null,e.resultGridName=null,e.deleteExistResultDataset=null}}])&&ls(t.prototype,n),r&&ls(t,r),e}();function cs(e){return(cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ps(e,t,n){return(ps="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ys(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ys(e){return(ys=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ds(e,t){return(ds=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.DensityKernelAnalystParameters=us;var ms=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=ys(t).call(this,e,n))||"object"!==cs(o)&&"function"!=typeof o?hs(i):o).mode=null,n&&be.extend(hs(r),n),r.CLASS_NAME="SuperMap.DensityAnalystService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ds(e,t)}(t,yi),n=t,(r=[{key:"destroy",value:function(){ps(ys(t.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t=this,n=new Object;e instanceof us&&(t.url=be.urlPathAppend(t.url,"datasets/"+e.dataset+"/densityanalyst/kernel"),t.mode="kernel"),us.toObject(e,n);var r=be.toJSON(n);t.url=be.urlAppend(t.url,"returnContent=true"),t.request({method:"POST",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&fs(n.prototype,r),i&&fs(n,i),t}();function vs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.DensityAnalystService=ms;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var gs=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=D.ADD,this.IDs=null,this.returnContent=!1,this.isUseBatch=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.EditFeaturesParameters"}var t,n,r;return t=e,r=[{key:"toJsonParameters",value:function(e){var t,n,r;if(e.editType===D.DELETE){if(null===e.IDs)return;r={ids:e.IDs}}else if(r=[],e.features){n=e.features.length;for(var i=0;i<n;i++)(t=e.features[i]).geometry=Tn.fromGeometry(t.geometry),r.push(t)}return be.toJSON(r)}}],(n=[{key:"destroy",value:function(){var e=this;e.dataSourceName=null,e.dataSetName=null,e.features=null,e.editType=null,e.IDs=null,e.returnContent=null}}])&&vs(t.prototype,n),r&&vs(t,r),e}();function bs(e){return(bs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ss(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ws(e,t,n){return(ws="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Os(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Os(e){return(Os=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xs(e,t){return(xs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.EditFeaturesParameters=gs;var Cs=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=Os(t).call(this,e,n))||"object"!==bs(o)&&"function"!=typeof o?_s(i):o).returnContent=!1,r.isUseBatch=!1,n&&be.extend(_s(r),n),r.url=be.urlPathAppend(r.url,"features"),r.CLASS_NAME="SuperMap.EditFeaturesService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xs(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){ws(Os(t.prototype),"destroy",this).call(this);this.returnContent=null,this.isUseBatch=null,this.fromIndex=null,this.toIndex=null}},{key:"processAsync",value:function(e){if(e instanceof gs){var t=this,n="POST",r="",i=e.editType,o=null;t.returnContent=e.returnContent,t.isUseBatch=e.isUseBatch,o=gs.toJsonParameters(e),i===D.DELETE?(r=be.toJSON(e.IDs),t.url=be.urlAppend(t.url,"ids="+r),n="DELETE",o=r):i===D.UPDATE?n="PUT":(t.isUseBatch&&(t.url=be.urlAppend(t.url,"isUseBatch=".concat(t.isUseBatch)),t.returnContent=!1),t.returnContent&&(t.url=be.urlAppend(t.url,"returnContent=true"),n="POST")),t.request({method:n,data:o,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&Ss(n.prototype,r),i&&Ss(n,i),t}();function Ps(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.EditFeaturesService=Cs;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ts=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalyst3DParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=null}}])&&Ps(t.prototype,n),r&&Ps(t,r),e}();function Es(e){return(Es="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ks(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ms(e,t){return!t||"object"!==Es(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function As(e,t,n){return(As="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ls(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ls(e){return(Ls=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function js(e,t){return(js=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalyst3DParameters=Ts;var Rs=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ms(this,Ls(t).call(this,e))).CLASS_NAME="SuperMap.FacilityAnalystSinks3DParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&js(e,t)}(t,Ts),n=t,(r=[{key:"destroy",value:function(){As(Ls(t.prototype),"destroy",this).call(this)}}])&&ks(n.prototype,r),i&&ks(n,i),t}();function Ns(e){return(Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Is(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ds(e,t){return!t||"object"!==Ns(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fs(e){return(Fs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bs(e,t){return(Bs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystSinks3DParameters=Rs;var Us=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ds(this,Fs(t).call(this,e,n))).CLASS_NAME="SuperMap.FacilityAnalystSinks3DService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bs(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){Jr.prototype.destroy.apply(this,arguments)}},{key:"processAsync",value:function(e){if(e instanceof Rs){var t,n=this;n.url=be.urlPathAppend(n.url,"sinks"),t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&Is(n.prototype,r),i&&Is(n,i),t}();function Gs(e){return(Gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vs(e,t){return!t||"object"!==Gs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Js(e,t,n){return(Js="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hs(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Hs(e){return(Hs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qs(e,t){return(qs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystSinks3DService=Us;var Ws=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Vs(this,Hs(t).call(this,e))).CLASS_NAME="SuperMap.FacilityAnalystSources3DParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qs(e,t)}(t,Ts),n=t,(r=[{key:"destroy",value:function(){Js(Hs(t.prototype),"destroy",this).call(this)}}])&&zs(n.prototype,r),i&&zs(n,i),t}();function Ys(e){return(Ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xs(e,t){return!t||"object"!==Ys(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ks(e,t,n){return(Ks="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zs(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Zs(e){return(Zs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $s(e,t){return($s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystSources3DParameters=Ws;var el=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Xs(this,Zs(t).call(this,e,n))).CLASS_NAME="SuperMap.FacilityAnalystSources3DService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$s(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){Ks(Zs(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Ws){var t,n=this;n.url=be.urlPathAppend(n.url,"sources"),t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&Qs(n.prototype,r),i&&Qs(n,i),t}();function tl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.FacilityAnalystSources3DService=el;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var nl=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,this.queryType=null,be.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalystStreamParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.edgeID=null,e.nodeID=null,e.weightName=null,e.isUncertainDirectionValid=null,e.type=null}}])&&tl(t.prototype,n),r&&tl(t,r),e}();function rl(e){return(rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function il(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ol(e,t){return!t||"object"!==rl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function al(e,t,n){return(al="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sl(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function sl(e){return(sl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ll(e,t){return(ll=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystStreamParameters=nl;var ul=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ol(this,sl(t).call(this,e,n))).CLASS_NAME="SuperMap.FacilityAnalystStreamService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ll(e,t)}(t,Ro),n=t,(r=[{key:"destroy",value:function(){al(sl(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof nl){var t,n=this;if(0===e.queryType)n.url=be.urlPathAppend(n.url,"upstreamcirticalfaclilities");else{if(1!==e.queryType)return;n.url=be.urlPathAppend(n.url,"downstreamcirticalfaclilities")}t={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID||null===e.edgeID&&null===e.nodeID||(null!==e.edgeID?t.edgeID=e.edgeID:t.nodeID=e.nodeID,n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed}))}}}])&&il(n.prototype,r),i&&il(n,i),t}();function cl(e){return(cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hl(e,t){return!t||"object"!==cl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pl(e,t,n){return(pl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yl(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function yl(e){return(yl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dl(e,t){return(dl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystStreamService=ul;var ml=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=hl(this,yl(t).call(this,e))).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dl(e,t)}(t,Ts),n=t,(r=[{key:"destroy",value:function(){pl(yl(t.prototype),"destroy",this).call(this)}}])&&fl(n.prototype,r),i&&fl(n,i),t}();function vl(e){return(vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bl(e,t){return!t||"object"!==vl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sl(e,t,n){return(Sl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_l(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _l(e){return(_l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wl(e,t){return(wl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystTracedown3DParameters=ml;var Ol=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=bl(this,_l(t).call(this,e,n))).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wl(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){Sl(_l(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof ml){var t,n=this;n.url=be.urlPathAppend(n.url,"tracedownresult"),t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&gl(n.prototype,r),i&&gl(n,i),t}();function xl(e){return(xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pl(e,t){return!t||"object"!==xl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tl(e,t,n){return(Tl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=El(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function El(e){return(El=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kl(e,t){return(kl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystTracedown3DService=Ol;var Ml=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Pl(this,El(t).call(this,e))).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kl(e,t)}(t,Ts),n=t,(r=[{key:"destroy",value:function(){Tl(El(t.prototype),"destroy",this).call(this)}}])&&Cl(n.prototype,r),i&&Cl(n,i),t}();function Al(e){return(Al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ll(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jl(e,t){return!t||"object"!==Al(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rl(e,t,n){return(Rl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nl(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Nl(e){return(Nl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Il(e,t){return(Il=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystTraceup3DParameters=Ml;var Dl=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=jl(this,Nl(t).call(this,e,n))).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Il(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){Rl(Nl(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Ml){var t,n=this;n.url=be.urlPathAppend(n.url,"traceupresult"),t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&Ll(n.prototype,r),i&&Ll(n,i),t}();function Fl(e){return(Fl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ul(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gl(e,t,n){return(Gl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zl(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function zl(e){return(zl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vl(e,t){return(Vl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystTraceup3DService=Dl;var Jl=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(i=zl(t).call(this,e))||"object"!==Fl(i)&&"function"!=typeof i?Ul(r):i,e=e||{},n.sourceNodeIDs=null,be.extend(Ul(n),e),n.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vl(e,t)}(t,Ts),n=t,(r=[{key:"destroy",value:function(){Gl(zl(t.prototype),"destroy",this).call(this),this.sourceNodeIDs=null}}])&&Bl(n.prototype,r),i&&Bl(n,i),t}();function Hl(e){return(Hl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ql(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wl(e,t){return!t||"object"!==Hl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yl(e,t,n){return(Yl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ql(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ql(e){return(Ql=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xl(e,t){return(Xl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystUpstream3DParameters=Jl;var Kl=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Wl(this,Ql(t).call(this,e,n))).CLASS_NAME="SuperMap.FacilityAnalystUpstream3DService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xl(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){Yl(Ql(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Jl){var t,n=this;n.url=be.urlPathAppend(n.url,"upstreamcirticalfaclilities"),t={sourceNodeIDs:e.sourceNodeIDs,edgeID:e.edgeID,nodeID:e.nodeID,isUncertainDirectionValid:e.isUncertainDirectionValid},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&ql(n.prototype,r),i&&ql(n,i),t}();function Zl(e){return(Zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tu(e,t,n){return(tu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nu(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function nu(e){return(nu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ru(e,t){return(ru=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystUpstream3DService=Kl;var iu=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=nu(t).call(this,e))||"object"!==Zl(i)&&"function"!=typeof i?eu(r):i).filterParam=null,n.aggType=ie.FILTER,n.CLASS_NAME="SuperMap.FilterAggParameter",be.extend(eu(n),e),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ru(e,t)}(t,oi),n=t,(r=[{key:"destroy",value:function(){tu(nu(t.prototype),"destroy",this).call(this);this.filterParam&&(this.filterParam=null)}}])&&$l(n.prototype,r),i&&$l(n,i),t}();function ou(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.FilterAggParameter=iu;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var au=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasource=null,this.dataset=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.FieldParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.datasource=null,this.dataset=null}}])&&ou(t.prototype,n),r&&ou(t,r),e}();function su(e){return(su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uu(e){return(uu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fu(e,t){return(fu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FieldParameters=au;var hu=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=uu(t).call(this,e))||"object"!==su(i)&&"function"!=typeof i?cu(r):i).fieldName=null,n.statisticMode=null,e&&be.extend(cu(n),e),n.CLASS_NAME="SuperMap.FieldStatisticsParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fu(e,t)}(t,au),n=t,(r=[{key:"destroy",value:function(){this.fieldName=null,this.statisticMode=null}}])&&lu(n.prototype,r),i&&lu(n,i),t}();function pu(e){return(pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function du(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mu(e,t,n){return(mu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vu(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function vu(e){return(vu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gu(e,t){return(gu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FieldStatisticsParameters=hu;var bu=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=vu(t).call(this,e,n))||"object"!==pu(o)&&"function"!=typeof o?du(i):o).datasource=null,r.dataset=null,r.field=null,r.statisticMode=null,n&&be.extend(du(r),n),r.CLASS_NAME="SuperMap.FieldStatisticService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gu(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){mu(vu(t.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null,this.field=null,this.statisticMode=null}},{key:"processAsync",value:function(){var e=this,t="datasources/"+e.datasource+"/datasets/"+e.dataset+"/fields/"+e.field+"/"+e.statisticMode;e.url=be.urlPathAppend(e.url,t),e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&yu(n.prototype,r),i&&yu(n,i),t}();function Su(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.FieldStatisticService=bu;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var _u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.event=null,this.expectFacilityCount=1,this.facilities=null,this.fromEvent=!1,this.isAnalyzeById=!1,this.maxWeight=0,this.parameter=new da,be.extend(this,t),this.CLASS_NAME="SuperMap.FindClosestFacilitiesParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.event=null,e.expectFacilityCount=null,e.facilities=null,e.fromEvent=null,e.isAnalyzeById=null,e.maxWeight=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&Su(t.prototype,n),r&&Su(t,r),e}();function wu(e){return(wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ou(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xu(e,t){return!t||"object"!==wu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cu(e,t,n){return(Cu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pu(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Pu(e){return(Pu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tu(e,t){return(Tu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FindClosestFacilitiesParameters=_u;var Eu=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=xu(this,Pu(t).call(this,e,n))).CLASS_NAME="SuperMap.FindClosestFacilitiesService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tu(e,t)}(t,Ro),n=t,(r=[{key:"destroy",value:function(){Cu(Pu(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof _u){var t,n=this;n.url=be.urlPathAppend(n.url,"closestfacility"),t={expectFacilityCount:e.expectFacilityCount,fromEvent:e.fromEvent,maxWeight:e.maxWeight,parameter:be.toJSON(e.parameter),event:be.toJSON(e.event),facilities:n.getJson(e.isAnalyzeById,e.facilities)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var n="[",r=t?t.length:0;if(!1===e)for(var i=0;i<r;i++)i>0&&(n+=","),n+='{"x":'+t[i].x+',"y":'+t[i].y+"}";else if(!0===e)for(var o=0;o<r;o++)o>0&&(n+=","),n+=t[o];return n+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.facilityPathList)return e;var t=new Rn;return e.facilityPathList.map(function(e){return e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e}),e}}])&&Ou(n.prototype,r),i&&Ou(n,i),t}();function ku(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.FindClosestFacilitiesService=Eu;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Mu=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expectedSupplyCenterCount=null,this.isFromCenter=!1,this.supplyCenters=null,this.turnWeightField=null,this.weightName=null,be.extend(this,t),this.CLASS_NAME="SuperMap.FindLocationParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;if(e.expectedSupplyCenterCount=null,e.isFromCenter=null,e.turnWeightField=null,e.weightName=null,e.supplyCenters){for(var t=0,n=e.supplyCenters,r=n.length;t<r;t++)n[t].destroy();e.supplyCenters=null}}}])&&ku(t.prototype,n),r&&ku(t,r),e}();function Au(e){return(Au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ju(e,t){return!t||"object"!==Au(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ru(e,t,n){return(Ru="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nu(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Nu(e){return(Nu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Iu(e,t){return(Iu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FindLocationParameters=Mu;var Du=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ju(this,Nu(t).call(this,e,n))).CLASS_NAME="SuperMap.FindLocationService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Iu(e,t)}(t,Ro),n=t,(r=[{key:"destroy",value:function(){Ru(Nu(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Mu){var t,n=this;n.url=be.urlPathAppend(n.url,"location"),t={isFromCenter:e.isFromCenter,expectedSupplyCenterCount:e.expectedSupplyCenterCount,weightName:e.weightName,turnWeightField:e.turnWeightField,returnEdgeFeature:!0,returnEdgeGeometry:!0,returnNodeFeature:!0,mapParameter:be.toJSON(e.mapParameter),supplyCenters:n.getCentersJson(e.supplyCenters)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getCentersJson",value:function(e){for(var t="[",n=e?e.length:0,r=0;r<n;r++)r>0&&(t+=","),t+=be.toJSON(e[r]);return t+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;var t=new Rn;return e.demandResults&&(e.demandResults=t.toGeoJSON(e.demandResults)),e.supplyResults&&(e.supplyResults=t.toGeoJSON(e.supplyResults)),e}}])&&Lu(n.prototype,r),i&&Lu(n,i),t}();function Fu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.FindLocationService=Du;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Bu=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.centers=null,this.hasLeastTotalCost=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new da,be.extend(this,t),this.CLASS_NAME="SuperMap.FindMTSPPathsParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.centers=null,e.hasLeastTotalCost=null,e.isAnalyzeById=null,e.nodes=null,e.maxWeight=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&Fu(t.prototype,n),r&&Fu(t,r),e}();function Uu(e){return(Uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zu(e,t){return!t||"object"!==Uu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vu(e,t,n){return(Vu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ju(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ju(e){return(Ju=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hu(e,t){return(Hu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FindMTSPPathsParameters=Bu;var qu=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=zu(this,Ju(t).call(this,e,n))).CLASS_NAME="SuperMap.FindMTSPPathsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hu(e,t)}(t,Ro),n=t,(r=[{key:"destroy",value:function(){Vu(Ju(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Bu){var t,n=this,r=n.getJson(e.isAnalyzeById,e.centers),i=n.getJson(e.isAnalyzeById,e.nodes);n.url=be.urlPathAppend(n.url,"mtsppath"),t={centers:r,nodes:i,parameter:be.toJSON(e.parameter),hasLeastTotalCost:e.hasLeastTotalCost},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var n="[",r=t?t.length:0;if(!1===e)for(var i=0;i<r;i++)i>0&&(n+=","),n+='{"x":'+t[i].x+',"y":'+t[i].y+"}";else if(!0===e)for(var o=0;o<r;o++)o>0&&(n+=","),n+=t[o];return n+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.pathList)return null;var t=new Rn;return e.pathList.map(function(e){return e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e}),e}}])&&Gu(n.prototype,r),i&&Gu(n,i),t}();function Wu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.FindMTSPPathsService=qu;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Yu=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter=new da,be.extend(this,t),this.CLASS_NAME="SuperMap.FindPathParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.hasLeastEdgeCount=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&Wu(t.prototype,n),r&&Wu(t,r),e}();function Qu(e){return(Qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ku(e,t){return!t||"object"!==Qu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zu(e,t,n){return(Zu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function $u(e){return($u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ec(e,t){return(ec=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FindPathParameters=Yu;var tc=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ku(this,$u(t).call(this,e,n))).CLASS_NAME="SuperMap.FindPathService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ec(e,t)}(t,Ro),n=t,(r=[{key:"destroy",value:function(){Zu($u(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Yu){var t,n=this;n.url=be.urlPathAppend(n.url,"path"),t={hasLeastEdgeCount:e.hasLeastEdgeCount,parameter:be.toJSON(e.parameter),nodes:n.getJson(e.isAnalyzeById,e.nodes)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var n="[",r=t?t.length:0;if(!1===e)for(var i=0;i<r;i++)i>0&&(n+=","),n+='{"x":'+t[i].x+',"y":'+t[i].y+"}";else if(!0===e)for(var o=0;o<r;o++)o>0&&(n+=","),n+=t[o];return n+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.pathList||e.pathList.length<1)return null;var t=new Rn;return e.pathList.forEach(function(e){e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures))}),e}}])&&Xu(n.prototype,r),i&&Xu(n,i),t}();function nc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.FindPathService=tc;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var rc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.isCenterMutuallyExclusive=!1,this.centers=null,this.isFromCenter=!1,this.weights=null,this.parameter=new da,be.extend(this,t),this.CLASS_NAME="SuperMap.FindServiceAreasParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.isCenterMutuallyExclusive=null,e.centers=null,e.isFromCenter=null,e.weights=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&nc(t.prototype,n),r&&nc(t,r),e}();function ic(e){return(ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ac(e,t){return!t||"object"!==ic(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sc(e,t,n){return(sc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lc(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function lc(e){return(lc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uc(e,t){return(uc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FindServiceAreasParameters=rc;var cc=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ac(this,lc(t).call(this,e,n))).CLASS_NAME="SuperMap.FindServiceAreasService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uc(e,t)}(t,Ro),n=t,(r=[{key:"destroy",value:function(){sc(lc(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof rc){var t,n=this;n.url=be.urlPathAppend(n.url,"servicearea"),t={isFromCenter:e.isFromCenter,isCenterMutuallyExclusive:e.isCenterMutuallyExclusive,parameter:be.toJSON(e.parameter),centers:n.getJson(e.isAnalyzeById,e.centers),weights:n.getJson(!0,e.weights)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var n="[",r=t?t.length:0;if(!1===e)for(var i=0;i<r;i++)i>0&&(n+=","),n+='{"x":'+t[i].x+',"y":'+t[i].y+"}";else if(!0===e)for(var o=0;o<r;o++)o>0&&(n+=","),n+=t[o];return n+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.serviceAreaList)return e;var t=new Rn;return e.serviceAreaList.map(function(e){return e.serviceRegion&&(e.serviceRegion=t.toGeoJSON(e.serviceRegion)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e.routes&&(e.routes=t.toGeoJSON(e.routes)),e}),e}}])&&oc(n.prototype,r),i&&oc(n,i),t}();function fc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.FindServiceAreasService=cc;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var hc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endNodeAssigned=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new da,be.extend(this,t),this.CLASS_NAME="SuperMap.FindTSPPathsParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.endNodeAssigned=null,e.isAnalyzeById=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&fc(t.prototype,n),r&&fc(t,r),e}();function pc(e){return(pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dc(e,t){return!t||"object"!==pc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mc(e,t,n){return(mc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vc(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function vc(e){return(vc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gc(e,t){return(gc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FindTSPPathsParameters=hc;var bc=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=dc(this,vc(t).call(this,e,n))).CLASS_NAME="SuperMap.FindTSPPathsService",r}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gc(e,t)}(t,Ro),n=t,(i=[{key:"destroy",value:function(){mc(vc(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof hc){var t,n=this;n.url=be.urlPathAppend(n.url,"tsppath"),t={parameter:r.Util.toJSON(e.parameter),endNodeAssigned:e.endNodeAssigned,nodes:n.getNodesJson(e)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getNodesJson",value:function(e){var t,n,r,i,o="";if(!1===e.isAnalyzeById){for(t="[",n=0,r=(i=e.nodes).length;n<r;n++)n>0&&(t+=","),t+='{"x":'+i[n].x+',"y":'+i[n].y+"}";o+=t+="]"}else if(!0===e.isAnalyzeById){for(var a="[",s=e.nodes,l=s.length,u=0;u<l;u++)u>0&&(a+=","),a+=s[u];o+=a+="]"}return o}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.tspPathList)return null;var t=new Rn;return e.tspPathList.forEach(function(e){e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures))}),e}}])&&yc(n.prototype,i),o&&yc(n,o),t}();function Sc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.FindTSPPathsService=bc;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var _c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.routeTable=null,this.routeIDField=null,this.attributeFilter=null,this.eventTable=null,this.eventRouteIDField=null,this.measureField=null,this.measureStartField=null,this.measureEndField=null,this.measureOffsetField=null,this.errorInfoField=null,this.retainedFields=null,this.dataReturnOption=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.GenerateSpatialDataParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.routeTable&&(e.routeTable=null),e.routeIDField=null,e.attributeFilter=null,e.eventTable=null,e.eventRouteIDField=null,e.measureField=null,e.measureStartField=null,e.measureEndField=null,e.measureOffsetField=null,e.errorInfoField=null,e.dataReturnOption&&(e.dataReturnOption.destroy(),e.dataReturnOption=null)}}])&&Sc(t.prototype,n),r&&Sc(t,r),e}();function wc(e){return(wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xc(e,t){return!t||"object"!==wc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cc(e,t,n){return(Cc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pc(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Pc(e){return(Pc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tc(e,t){return(Tc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GenerateSpatialDataParameters=_c;var Ec=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=xc(this,Pc(t).call(this,e,n))).CLASS_NAME="SuperMap.GenerateSpatialDataService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tc(e,t)}(t,yi),n=t,(r=[{key:"destroy",value:function(){Cc(Pc(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof _c){var t,n=this;t=n.getJsonParameters(e),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t="datasets/"+e.routeTable+"/linearreferencing/generatespatialdata";return this.url=be.urlPathAppend(this.url,t),this.url=be.urlAppend(this.url,"returnContent=true"),be.toJSON(e)}}])&&Oc(n.prototype,r),i&&Oc(n,i),t}();function kc(e){return(kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ac(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lc(e,t,n){return(Lc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jc(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function jc(e){return(jc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rc(e,t){return(Rc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GenerateSpatialDataService=Ec;var Nc=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=jc(t).call(this,e))||"object"!==kc(i)&&"function"!=typeof i?Ac(r):i).bounds=null,n.queryType=oe.GEO_BOUNDING_BOX,n.CLASS_NAME="SuperMap.GeoBoundingBoxQueryBuilderParameter",be.extend(Ac(n),e),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rc(e,t)}(t,ri),n=t,(r=[{key:"destroy",value:function(){Lc(jc(t.prototype),"destroy",this).call(this),this.bounds=null,this.queryType=null}}])&&Mc(n.prototype,r),i&&Mc(n,i),t}();function Ic(e){return(Ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bc(e,t,n){return(Bc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Uc(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Uc(e){return(Uc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gc(e,t){return(Gc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GeoBoundingBoxQueryBuilderParameter=Nc;var zc=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Uc(t).call(this,e))||"object"!==Ic(i)&&"function"!=typeof i?Fc(r):i).precision=5,n.aggType=ie.GEOHASH_GRID,be.extend(Fc(n),e),n.CLASS_NAME="SuperMap.GeoHashGridAggParameter",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gc(e,t)}(t,oi),n=t,i=[{key:"toJsonParameters",value:function(e){var t={aggName:e.aggName,aggFieldName:e.aggFieldName,aggType:e.aggType,precision:e.precision};return e.subAgg&&(t.subAgg=e.subAgg),be.toJson(t)}}],(r=[{key:"destroy",value:function(){Bc(Uc(t.prototype),"destroy",this).call(this),this.aggType=null}}])&&Dc(n.prototype,r),i&&Dc(n,i),t}();function Vc(e){return(Vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qc(e,t,n){return(qc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wc(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Wc(e){return(Wc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yc(e,t){return(Yc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GeoHashGridAggParameter=zc;var Qc=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(i=Wc(t).call(this,e))||"object"!==Vc(i)&&"function"!=typeof i?Hc(r):i,e&&e.operateGeometry&&(n.operateGeometry=e.operateGeometry),e&&e.sourceGeometry&&(n.sourceGeometry=e.sourceGeometry),e&&e.operateGeometries&&(n.operateGeometries=e.operateGeometries),e&&e.sourceGeometries&&(n.sourceGeometries=e.sourceGeometries),e&&be.extend(Hc(n),e),n.CLASS_NAME="SuperMap.GeometryOverlayAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yc(e,t)}(t,Ra),n=t,i=[{key:"toObject",value:function(e,t){for(var n in e)if("sourceGeometry"===n)t.sourceGeometry=Tn.fromGeometry(e.sourceGeometry);else if("sourceGeometries"===n){for(var r=[],i=0;i<e.sourceGeometries.length;i++)r.push(Tn.fromGeometry(e.sourceGeometries[i]));t.sourceGeometries=r}else if("operateGeometry"===n)t.operateGeometry=Tn.fromGeometry(e.operateGeometry);else if("operateGeometries"===n){for(var o=[],a=0;a<e.operateGeometries.length;a++)o.push(Tn.fromGeometry(e.operateGeometries[a]));t.operateGeometries=o}else t[n]=e[n]}}],(r=[{key:"destroy",value:function(){qc(Wc(t.prototype),"destroy",this).call(this);var e=this;e.sourceGeometry&&(e.sourceGeometry.destroy(),e.sourceGeometry=null),e.sourceGeometries&&(e.sourceGeometries.destroy(),e.sourceGeometries=null),e.sourceGeometry&&(e.sourceGeometry.destroy(),e.sourceGeometry=null),e.operateGeometries&&(e.operateGeometries.destroy(),e.operateGeometries=null)}}])&&Jc(n.prototype,r),i&&Jc(n,i),t}();function Xc(e){return(Xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $c(e,t,n){return($c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ef(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ef(e){return(ef=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tf(e,t){return(tf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GeometryOverlayAnalystParameters=Qc;var nf=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=ef(t).call(this,e))||"object"!==Xc(i)&&"function"!=typeof i?Zc(r):i).points=null,n.zValues=null,e&&be.extend(Zc(n),e),n.CLASS_NAME="SuperMap.GeometrySurfaceAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tf(e,t)}(t,Ha),n=t,(r=[{key:"destroy",value:function(){$c(ef(t.prototype),"destroy",this).call(this);if(this.points){for(var e=0,n=this.points,r=n.length;e<r;e++)n[e].destroy();this.points=null}this.zValues=null}}])&&Kc(n.prototype,r),i&&Kc(n,i),t}();function rf(e){return(rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function of(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function af(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sf(e,t,n){return(sf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lf(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function lf(e){return(lf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uf(e,t){return(uf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GeometrySurfaceAnalystParameters=nf;var cf=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=lf(t).call(this,e))||"object"!==rf(i)&&"function"!=typeof i?af(r):i).points=null,e&&be.extend(af(n),e),n.CLASS_NAME="SuperMap.GeometryThiessenAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uf(e,t)}(t,es),n=t,i=[{key:"toObject",value:function(e,t){for(var n in e)"clipRegion"===n?t.clipRegion=Tn.fromGeometry(e.clipRegion):t[n]=e[n]}}],(r=[{key:"destroy",value:function(){sf(lf(t.prototype),"destroy",this).call(this);if(this.points){for(var e=this.points.length-1;e>=0;e--)this.points[e].destroy();this.points=null}}}])&&of(n.prototype,r),i&&of(n,i),t}();function ff(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.GeometryThiessenAnalystParameters=cf;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var hf=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.sourceFilter=null,this.referenceFilter=null,this.spatialRelationType=null,this.isBorderInside=null,this.returnFeature=null,this.returnGeoRelatedOnly=null,this.startRecord=0,this.expectCount=500,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.GeoRelationAnalystParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.sourceFilter&&e.sourceFilter.destroy(),e.sourceFilter=null,e.referenceFilter&&e.referenceFilter.destroy(),e.referenceFilter=null,e.dataset=null,e.spatialRelationType=null,e.isBorderInside=null,e.returnFeature=null,e.returnGeoRelatedOnly=null,e.startRecord=null,e.expectCount=null}}])&&ff(t.prototype,n),r&&ff(t,r),e}();function pf(e){return(pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function df(e,t){return!t||"object"!==pf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mf(e,t,n){return(mf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vf(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function vf(e){return(vf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gf(e,t){return(gf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GeoRelationAnalystParameters=hf;var bf=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=df(this,vf(t).call(this,e,n))).CLASS_NAME="SuperMap.GeoRelationAnalystService",r}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gf(e,t)}(t,yi),n=t,(i=[{key:"destroy",value:function(){mf(vf(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof hf){var t=this;t.url=be.urlPathAppend(t.url,"datasets/"+e.dataset+"/georelation");var n=r.Util.toJSON(e);t.url=be.urlAppend(t.url,"returnContent=true"),t.request({method:"POST",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&yf(n.prototype,i),o&&yf(n,o),t}();function Sf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.GeoRelationAnalystService=bf;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var _f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetNames=null,this.targetEpsgCode=null,this.targetPrj=null,this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.returnCountOnly=!1,this.maxFeatures=null,this.aggregations=null,be.extend(this,t),this.CLASS_NAME="SuperMap.GetFeaturesParametersBase"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.datasetNames=null,e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.maxFeatures=null,e.targetEpsgCode=null,e.targetPrj=null,e.aggregation&&(e.aggregation=null)}}])&&Sf(t.prototype,n),r&&Sf(t,r),e}();function wf(e){return(wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Of(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cf(e,t,n){return(Cf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pf(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Pf(e){return(Pf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tf(e,t){return(Tf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesParametersBase=_f;var Ef=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Pf(t).call(this,e))||"object"!==wf(i)&&"function"!=typeof i?xf(r):i).getFeatureMode=t.getFeatureMode.BOUNDS,n.bounds=null,n.fields=null,n.attributeFilter=null,n.spatialQueryMode=u.CONTAIN,be.extend(xf(n),e),n.CLASS_NAME="SuperMap.GetFeaturesByBoundsParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tf(e,t)}(t,_f),n=t,i=[{key:"toJsonParameters",value:function(e){var n,r,i;return r={leftBottom:{x:e.bounds.left,y:e.bounds.bottom},rightTop:{x:e.bounds.right,y:e.bounds.top}},i={datasetNames:e.datasetNames,getFeatureMode:t.getFeatureMode.BOUNDS,bounds:r,spatialQueryMode:e.spatialQueryMode},e.fields&&((n=new Di).name=e.datasetNames,n.fields=e.fields,i.queryParameter=n),e.attributeFilter&&(i.attributeFilter=e.attributeFilter,i.getFeatureMode=t.getFeatureMode.BOUNDS_ATTRIBUTEFILTER),e.maxFeatures&&!isNaN(e.maxFeatures)&&(i.maxFeatures=e.maxFeatures),e.targetEpsgCode&&(i.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(i.targetPrj=e.targetPrj),be.toJSON(i)}}],(r=[{key:"destroy",value:function(){Cf(Pf(t.prototype),"destroy",this).call(this);var e=this;if(e.bounds&&(e.bounds.destroy(),e.bounds=null),e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.attributeFilter=null,e.spatialQueryMode=null,e.getFeatureMode=null}}])&&Of(n.prototype,r),i&&Of(n,i),t}();function kf(e){return(kf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Af(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lf(e,t,n){return(Lf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jf(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function jf(e){return(jf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rf(e,t){return(Rf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/Ef.getFeatureMode={BOUNDS:"BOUNDS",BOUNDS_ATTRIBUTEFILTER:"BOUNDS_ATTRIBUTEFILTER"},r.GetFeaturesByBoundsParameters=Ef;var Nf=function(e){function t(e,n){var r,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,r=!(a=jf(t).call(this,e,n))||"object"!==kf(a)&&"function"!=typeof a?Af(o):a,n=n||{},r.returnContent=!0,r.fromIndex=0,r.toIndex=19,r.maxFeatures=null,r.format=i.GEOJSON,be.extend(Af(r),n),r.url=be.urlPathAppend(r.url,"featureResults"),r.CLASS_NAME="SuperMap.GetFeaturesServiceBase",r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rf(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){Lf(jf(t.prototype),"destroy",this).call(this);var e=this;e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.maxFeatures=null,e.format=null}},{key:"processAsync",value:function(e){if(e){var t,n=this,r=!0;n.returnContent=e.returnContent,n.fromIndex=e.fromIndex,n.toIndex=e.toIndex,n.maxFeatures=e.maxFeatures,n.returnContent&&(n.url=be.urlAppend(n.url,"returnContent="+n.returnContent),r=!1),null!=n.fromIndex&&null!=n.toIndex&&!isNaN(n.fromIndex)&&!isNaN(n.toIndex)&&n.fromIndex>=0&&n.toIndex>=0&&!r&&(n.url=be.urlAppend(n.url,"fromIndex=".concat(n.fromIndex,"&toIndex=").concat(n.toIndex))),e.returnCountOnly&&(n.url=be.urlAppend(n.url,"&returnCountOnly="+e.returnContent)),t=n.getJsonParameters(e),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){if(e=be.transformResult(e),this.format===i.GEOJSON&&e.features){var t=new Rn;e.features=t.toGeoJSON(e.features)}this.events.triggerEvent("processCompleted",{result:e})}}])&&Mf(n.prototype,r),o&&Mf(n,o),t}();function If(e){return(If="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Df(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ff(e,t){return!t||"object"!==If(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bf(e,t,n){return(Bf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Uf(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Uf(e){return(Uf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gf(e,t){return(Gf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesServiceBase=Nf;var zf=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ff(this,Uf(t).call(this,e,n))).CLASS_NAME="SuperMap.GetFeaturesByBoundsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gf(e,t)}(t,Nf),n=t,(r=[{key:"destroy",value:function(){Bf(Uf(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return Ef.toJsonParameters(e)}}])&&Df(n.prototype,r),i&&Df(n,i),t}();function Vf(e){return(Vf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qf(e,t,n){return(qf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wf(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Wf(e){return(Wf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yf(e,t){return(Yf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesByBoundsService=zf;var Qf=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Wf(t).call(this,e))||"object"!==Vf(i)&&"function"!=typeof i?Hf(r):i).bufferDistance=null,n.attributeFilter=null,n.geometry=null,n.fields=null,be.extend(Hf(n),e),n.CLASS_NAME="SuperMap.GetFeaturesByBufferParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yf(e,t)}(t,_f),n=t,i=[{key:"toJsonParameters",value:function(e){var t,n,r;return r=Tn.fromGeometry(e.geometry),n={datasetNames:e.datasetNames,getFeatureMode:"BUFFER",bufferDistance:e.bufferDistance,geometry:r},e.fields&&((t=new Di).name=e.datasetNames,t.fields=e.fields,n.queryParameter=t),e.attributeFilter&&(n.attributeFilter=e.attributeFilter,n.getFeatureMode="BUFFER_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(n.maxFeatures=e.maxFeatures),e.targetEpsgCode&&(n.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(n.targetPrj=e.targetPrj),be.toJSON(n)}}],(r=[{key:"destroy",value:function(){qf(Wf(t.prototype),"destroy",this).call(this);var e=this;if(e.bufferDistance=null,e.attributeFilter=null,e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.geometry&&(e.geometry.destroy(),e.geometry=null)}}])&&Jf(n.prototype,r),i&&Jf(n,i),t}();function Xf(e){return(Xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zf(e,t){return!t||"object"!==Xf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $f(e,t,n){return($f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=eh(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function eh(e){return(eh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function th(e,t){return(th=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesByBufferParameters=Qf;var nh=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Zf(this,eh(t).call(this,e,n))).CLASS_NAME="SuperMap.GetFeaturesByBufferService",r}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&th(e,t)}(t,Nf),n=t,(i=[{key:"destroy",value:function(){$f(eh(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof Qf)return r.GetFeaturesByBufferParameters.toJsonParameters(e)}}])&&Kf(n.prototype,i),o&&Kf(n,o),t}();function rh(e){return(rh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ih(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ah(e,t,n){return(ah="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sh(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function sh(e){return(sh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lh(e,t){return(lh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesByBufferService=nh;var uh=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=sh(t).call(this,e))||"object"!==rh(i)&&"function"!=typeof i?oh(r):i).getFeatureMode="SPATIAL",n.geometry=null,n.fields=null,n.attributeFilter=null,n.spatialQueryMode=u.CONTAIN,be.extend(oh(n),e),n.CLASS_NAME="SuperMap.GetFeaturesByGeometryParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lh(e,t)}(t,_f),n=t,i=[{key:"toJsonParameters",value:function(e){var t,n,r;return n=Tn.fromGeometry(e.geometry),r={datasetNames:e.datasetNames,getFeatureMode:"SPATIAL",geometry:n,spatialQueryMode:e.spatialQueryMode},e.fields&&((t=new Di).name=e.datasetNames,t.fields=e.fields,r.queryParameter=t),e.attributeFilter&&(r.attributeFilter=e.attributeFilter,r.getFeatureMode="SPATIAL_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(r.maxFeatures=e.maxFeatures),e.targetEpsgCode&&(r.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(r.targetPrj=e.targetPrj),be.toJSON(r)}}],(r=[{key:"destroy",value:function(){ah(sh(t.prototype),"destroy",this).call(this);var e=this;if(e.geometry&&(e.geometry.destroy(),e.geometry=null),e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.attributeFilter=null,e.spatialQueryMode=null,e.getFeatureMode=null}}])&&ih(n.prototype,r),i&&ih(n,i),t}();function ch(e){return(ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hh(e,t){return!t||"object"!==ch(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ph(e,t,n){return(ph="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yh(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function yh(e){return(yh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dh(e,t){return(dh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesByGeometryParameters=uh;var mh=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=hh(this,yh(t).call(this,e,n))).CLASS_NAME="SuperMap.GetFeaturesByGeometryService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dh(e,t)}(t,Nf),n=t,(r=[{key:"destroy",value:function(){ph(yh(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return uh.toJsonParameters(e)}}])&&fh(n.prototype,r),i&&fh(n,i),t}();function vh(e){return(vh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sh(e,t,n){return(Sh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_h(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _h(e){return(_h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wh(e,t){return(wh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesByGeometryService=mh;var Oh=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=_h(t).call(this,e))||"object"!==vh(i)&&"function"!=typeof i?bh(r):i).getFeatureMode="ID",n.IDs=null,n.fields=null,be.extend(bh(n),e),n.CLASS_NAME="SuperMap.GetFeaturesByIDsParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wh(e,t)}(t,_f),n=t,i=[{key:"toJsonParameters",value:function(e){var t,n;return t={datasetNames:e.datasetNames,getFeatureMode:"ID",ids:e.IDs},e.fields&&((n=new Di).name=e.datasetNames,n.fields=e.fields,t.queryParameter=n),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),be.toJSON(t)}}],(r=[{key:"destroy",value:function(){Sh(_h(t.prototype),"destroy",this).call(this);var e=this;if(e.IDs=null,e.getFeatureMode=null,e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}}}])&&gh(n.prototype,r),i&&gh(n,i),t}();function xh(e){return(xh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ch(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ph(e,t){return!t||"object"!==xh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Th(e,t,n){return(Th="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Eh(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Eh(e){return(Eh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kh(e,t){return(kh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesByIDsParameters=Oh;var Mh=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ph(this,Eh(t).call(this,e,n))).CLASS_NAME="SuperMap.GetFeaturesByIDsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kh(e,t)}(t,Nf),n=t,(r=[{key:"destroy",value:function(){Th(Eh(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return Oh.toJsonParameters(e)}}])&&Ch(n.prototype,r),i&&Ch(n,i),t}();function Ah(e){return(Ah="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rh(e,t,n){return(Rh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nh(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Nh(e){return(Nh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ih(e,t){return(Ih=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesByIDsService=Mh;var Dh=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Nh(t).call(this,e))||"object"!==Ah(i)&&"function"!=typeof i?jh(r):i).getFeatureMode="SQL",n.queryParameter=null,be.extend(jh(n),e),n.CLASS_NAME="SuperMap.GetFeaturesBySQLParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ih(e,t)}(t,_f),n=t,i=[{key:"toJsonParameters",value:function(e){var t={datasetNames:e.datasetNames,getFeatureMode:"SQL",queryParameter:e.queryParameter};return e.maxFeatures&&!isNaN(e.maxFeatures)&&(t.maxFeatures=e.maxFeatures),e.aggregations&&(t.aggregations=e.aggregations),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),be.toJSON(t)}}],(r=[{key:"destroy",value:function(){Rh(Nh(t.prototype),"destroy",this).call(this);this.getFeatureMode=null,this.queryParameter&&(this.queryParameter.destroy(),this.queryParameter=null)}}])&&Lh(n.prototype,r),i&&Lh(n,i),t}();function Fh(e){return(Fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Uh(e,t){return!t||"object"!==Fh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gh(e,t,n){return(Gh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zh(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function zh(e){return(zh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vh(e,t){return(Vh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesBySQLParameters=Dh;var Jh=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Uh(this,zh(t).call(this,e,n))).CLASS_NAME="SuperMap.GetFeaturesBySQLService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vh(e,t)}(t,Nf),n=t,(r=[{key:"destroy",value:function(){Gh(zh(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return Dh.toJsonParameters(e)}}])&&Bh(n.prototype,r),i&&Bh(n,i),t}();function Hh(e){return(Hh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yh(e,t,n){return(Yh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qh(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Qh(e){return(Qh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xh(e,t){return(Xh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesBySQLService=Jh;var Kh=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=Qh(t).call(this,e,n))||"object"!==Hh(o)&&"function"!=typeof o?Wh(i):o).datasource=null,r.dataset=null,n&&be.extend(Wh(r),n),r.CLASS_NAME="SuperMap.GetFieldsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xh(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){Yh(Qh(t.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"processAsync",value:function(){var e=this;e.url=be.urlPathAppend(e.url,"datasources/".concat(e.datasource,"/datasets/").concat(e.dataset,"/fields")),e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&qh(n.prototype,r),i&&qh(n,i),t}();function Zh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.GetFieldsService=Kh;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null,be.extend(this,t),this.CLASS_NAME="SuperMap.GetGridCellInfosParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null}}])&&Zh(t.prototype,n),r&&Zh(t,r),e}();function ep(e){return(ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function np(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rp(e,t,n){return(rp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ip(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ip(e){return(ip=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function op(e,t){return(op=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetGridCellInfosParameters=$h;var ap=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=ip(t).call(this,e,n))||"object"!==ep(o)&&"function"!=typeof o?np(i):o).datasetName=null,r.dataSourceName=null,r.datasetType=null,r.X=null,r.Y=null,n&&be.extend(np(r),n),r.CLASS_NAME="SuperMap.GetGridCellInfosService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&op(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){rp(ip(t.prototype),"destroy",this).call(this);var e=this;e.X=null,e.Y=null,e.datasetName=null,e.dataSourceName=null,e.datasetType=null}},{key:"processAsync",value:function(e){if(e instanceof $h){be.extend(this,e);var t=this;t.url=be.urlPathAppend(t.url,"datasources/".concat(t.dataSourceName,"/datasets/").concat(t.datasetName)),t.queryRequest(t.getDatasetInfoCompleted,t.getDatasetInfoFailed)}}},{key:"queryRequest",value:function(e,t){this.request({method:"GET",data:null,scope:this,success:e,failure:t})}},{key:"getDatasetInfoCompleted",value:function(e){e=be.transformResult(e),this.datasetType=e.datasetInfo.type,this.queryGridInfos()}},{key:"queryGridInfos",value:function(){var e=this;e.url=be.urlPathAppend(e.url,"GRID"==e.datasetType?"gridValue":"imageValue"),null!=e.X&&null!=e.Y&&(e.url=be.urlAppend(e.url,"x=".concat(e.X,"&y=").concat(e.Y))),e.queryRequest(e.serviceProcessCompleted,e.serviceProcessFailed)}},{key:"getDatasetInfoFailed",value:function(e){this.serviceProcessFailed(e)}}])&&tp(n.prototype,r),i&&tp(n,i),t}();function sp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.GetGridCellInfosService=ap;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var lp=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.srcData=t,this.targetData=n,this.CLASS_NAME="SuperMap.ThemeMemoryData"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.srcData=null,this.targetData=null}},{key:"toJSON",value:function(){if(this.srcData&&this.targetData){for(var e="",t=Math.min(this.srcData.length,this.targetData.length),n=0;n<t;n++)e+="'"+this.srcData[n]+"':'"+this.targetData[n]+"',";return n>0&&(e=e.substring(0,e.length-1)),"{"+e+"}"}return null}}])&&sp(t.prototype,n),r&&sp(t,r),e}();function up(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeMemoryData=lp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var cp=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.memoryData=null,this.type=t,n&&be.extend(this,n),this.CLASS_NAME="SuperMap.Theme"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.memoryData&&(this.memoryData.destroy(),this.memoryData=null),this.type=null}},{key:"toServerJSONObject",value:function(){}}])&&up(t.prototype,n),r&&up(t,r),e}();function fp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Theme=cp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var hp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.align=w.BASELINECENTER,this.backColor=new fn(255,255,255),this.foreColor=new fn(0,0,0),this.backOpaque=!1,this.sizeFixed=!0,this.fontHeight=6,this.fontWidth=0,this.fontWeight=400,this.fontName="Times New Roman",this.bold=!1,this.italic=!1,this.italicAngle=0,this.shadow=!1,this.strikeout=!1,this.outline=!1,this.opaqueRate=0,this.underline=!1,this.rotation=0,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ServerTextStyle"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){var n=new e(t);return be.copy(n,t),n.backColor=fn.fromJson(t.backColor),n.foreColor=fn.fromJson(t.foreColor),n}}],(n=[{key:"destroy",value:function(){var e=this;e.align=null,e.backColor&&(e.backColor.destroy(),e.backColor=null),e.foreColor&&(e.foreColor.destroy(),e.foreColor=null),e.backOpaque=null,e.sizeFixed=null,e.fontHeight=null,e.fontWidth=null,e.fontWeight=null,e.fontName=null,e.bold=null,e.italic=null,e.italicAngle=null,e.shadow=null,e.strikeout=null,e.outline=null,e.opaqueRate=null,e.underline=null,e.rotation=null}}])&&fp(t.prototype,n),r&&fp(t,r),e}();function pp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ServerTextStyle=hp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var yp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.end=0,this.start=0,this.visible=!0,this.style=new hp,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}}])&&pp(t.prototype,n),r&&pp(t,r),e}();function dp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeLabelItem=yp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var mp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.style=new pn,this.unique=null,this.visible=!0,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeUniqueItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){var n=new e;return be.copy(n,t),n.style=pn.fromJson(t.style),n}}],(n=[{key:"destroy",value:function(){var e=this;e.caption=null,e.unique=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=be.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&dp(t.prototype,n),r&&dp(t,r),e}();function vp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeUniqueItem=mp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var gp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.flowEnabled=!1,this.leaderLineDisplayed=!1,this.leaderLineStyle=new pn,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeFlow"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n.leaderLineStyle=pn.fromJson(t.leaderLineStyle),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.flowEnabled=null,e.leaderLineDisplayed=null,e.leaderLineStyle&&(e.leaderLineStyle.destroy(),e.leaderLineStyle=null)}}])&&vp(t.prototype,n),r&&vp(t,r),e}();function bp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeFlow=gp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Sp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.offsetFixed=!1,this.offsetX="0.0",this.offsetY="0.0",t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeOffset"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n}}}],(n=[{key:"destroy",value:function(){this.offsetFixed=null,this.offsetX=null,this.offsetY=null}}])&&bp(t.prototype,n),r&&bp(t,r),e}();function _p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeOffset=Sp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var wp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultStyle=null,this.separator=null,this.separatorEnabled=!1,this.splitIndexes=null,this.styles=new hp,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.LabelMixedTextStyle"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e,r=t.styles;if(be.copy(n,t),n.defaultStyle=new hp(t.defaultStyle),r){n.styles=[];for(var i=0,o=r.length;i<o;i++)n.styles.push(new hp(r[i]))}return n}}}],(n=[{key:"destroy",value:function(){var e=this;if(e.defaultStyle&&(e.defaultStyle.destroy(),e.defaultStyle=null),e.separator=null,e.separatorEnabled=null,e.splitIndexes&&(e.splitIndexes=null),e.styles){for(var t=0,n=e.styles,r=n.length;t<r;t++)n[t].destroy();e.styles=null}}}])&&_p(t.prototype,n),r&&_p(t,r),e}();function Op(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.LabelMixedTextStyle=wp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxTextHeight=0,this.maxTextWidth=0,this.minTextHeight=0,this.minTextWidth=0,this.uniformStyle=new hp,this.uniformMixedStyle=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelText"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n.uniformStyle=hp.fromObj(t.uniformStyle),n.uniformMixedStyle=wp.fromObj(t.uniformMixedStyle),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.maxTextHeight=null,e.maxTextWidth=null,e.minTextHeight=null,e.minTextWidth=null,e.uniformStyle&&(e.uniformStyle.destroy(),e.uniformStyle=null),e.uniformMixedStyle&&(e.uniformMixedStyle.destroy(),e.uniformMixedStyle=null)}}])&&Op(t.prototype,n),r&&Op(t,r),e}();function Cp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeLabelText=xp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Pp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAlongLine=!0,this.alongLineDirection=x.LB_TO_RT,this.angleFixed=!1,this.repeatedLabelAvoided=!1,this.repeatIntervalFixed=!1,this.labelRepeatInterval=0,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelAlongLine"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.isAlongLine=null,e.alongLineDirection=null,e.angleFixed=null,e.repeatedLabelAvoided=null,e.repeatIntervalFixed=null,e.labelRepeatInterval=null}}])&&Cp(t.prototype,n),r&&Cp(t,r),e}();function Tp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeLabelAlongLine=Pp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ep=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.labelBackShape=C.NONE,this.backStyle=new pn,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelBackground"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return n.labelBackShape=t.labelBackShape,n.backStyle=pn.fromJson(t.backStyle),n}}}],(n=[{key:"destroy",value:function(){this.labelBackShape=null,this.backStyle&&(this.backStyle.destroy(),this.backStyle=null)}}])&&Tp(t.prototype,n),r&&Tp(t,r),e}();function kp(e){return(kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ap(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lp(e,t,n){return(Lp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jp(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function jp(e){return(jp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rp(e,t){return(Rp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThemeLabelBackground=Ep;var Np=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=jp(t).call(this,"LABEL",e))||"object"!==kp(i)&&"function"!=typeof i?Ap(r):i).alongLine=new Pp,n.background=new Ep,n.flow=new gp,n.items=null,n.uniqueItems=null,n.labelExpression=null,n.labelOverLengthMode=P.NONE,n.matrixCells=null,n.maxLabelLength=256,n.numericPrecision=0,n.offset=new Sp,n.overlapAvoided=!0,n.rangeExpression=null,n.uniqueExpression=null,n.smallGeometryLabeled=!1,n.text=new xp,n.textSpace=0,e&&be.extend(Ap(n),e),n.CLASS_NAME="SuperMap.ThemeLabel",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rp(e,t)}(t,cp),n=t,i=[{key:"fromObj",value:function(e){if(e){var n=new t,r=e.items,i=e.uniqueItems,o=e.matrixCells;if(e.matrixCells=null,be.copy(n,e),n.alongLine=Pp.fromObj(e),n.background=Ep.fromObj(e),n.flow=new gp({flowEnabled:e.flowEnabled,leaderLineDisplayed:e.leaderLineDisplayed,leaderLineStyle:e.leaderLineStyle}),r){n.items=[];for(var a=0,s=r.length;a<s;a++)n.items.push(yp.fromObj(r[a]))}if(i){n.uniqueItems=[];for(var l=0,u=i.length;l<u;l++)n.uniqueItems.push(mp.fromObj(i[l]))}if(o){n.matrixCells=[];for(var c=0,f=o.length;c<f;c++);}return n.offset=Sp.fromObj(e),n.text=xp.fromObj(e),n}}}],(r=[{key:"destroy",value:function(){Lp(jp(t.prototype),"destroy",this).call(this);var e=this;if(e.alongLine=null,e.background&&(e.background.destroy(),e.background=null),e.flow=null,e.items){for(var n=0,r=e.items,i=r.length;n<i;n++)r[n].destroy();e.items=null}if(e.uniqueItems){for(var o=0,a=e.uniqueItems,s=a.length;o<s;o++)a[o].destory();e.uniqueItems=null}e.labelExpression=null,e.labelOverLengthMode=null,e.matrixCells=null,e.maxLabelLength=null,e.numericPrecision=null,e.overlapAvoided=null,e.rangeExpression=null,e.uniqueExpression=null,e.offset&&(e.offset.destroy(),e.offset=null),e.overlapAvoided=null,e.smallGeometryLabeled=null,e.text&&(e.text.destroy(),e.text=null),e.textSpace=null}},{key:"toJSON",value:function(){return be.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,e.memoryData=this.memoryData,this.alongLine&&(e.alongLine=this.alongLine.isAlongLine,e.alongLineDirection=this.alongLine.alongLineDirection,e.angleFixed=this.alongLine.angleFixed,e.isLabelRepeated=this.alongLine.isLabelRepeated,e.labelRepeatInterval=this.alongLine.labelRepeatInterval,e.repeatedLabelAvoided=this.alongLine.repeatedLabelAvoided,e.repeatIntervalFixed=this.alongLine.repeatIntervalFixed),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.flow&&(e.flowEnabled=this.flow.flowEnabled,e.leaderLineDisplayed=this.flow.leaderLineDisplayed,e.leaderLineStyle=this.flow.leaderLineStyle),this.text&&(e.maxTextHeight=this.text.maxTextHeight,e.maxTextWidth=this.text.maxTextWidth,e.minTextHeight=this.text.minTextHeight,e.minTextWidth=this.text.minTextWidth,e.uniformStyle=this.text.uniformStyle,e.uniformMixedStyle=this.text.uniformMixedStyle),this.background&&(e.labelBackShape=this.background.labelBackShape,e.backStyle=this.background.backStyle),e.labelOverLengthMode=this.labelOverLengthMode,e.maxLabelLength=this.maxLabelLength,e.smallGeometryLabeled=this.smallGeometryLabeled,e.rangeExpression=this.rangeExpression,e.uniqueExpression=this.uniqueExpression,e.numericPrecision=this.numericPrecision,e.items=this.items,e.uniqueItems=this.uniqueItems,e.labelExpression=this.labelExpression,e.overlapAvoided=this.overlapAvoided,e.matrixCells=this.matrixCells,e.textSpace=this.textSpace,e}}])&&Mp(n.prototype,r),i&&Mp(n,i),t}();function Ip(e){return(Ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bp(e,t,n){return(Bp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Up(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Up(e){return(Up=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gp(e,t){return(Gp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThemeLabel=Np;var zp=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Up(t).call(this,"UNIQUE",e))||"object"!==Ip(i)&&"function"!=typeof i?Fp(r):i).defaultStyle=new pn,n.items=null,n.uniqueExpression=null,n.colorGradientType=_.YELLOW_RED,e&&be.extend(Fp(n),e),n.CLASS_NAME="SuperMap.ThemeUnique",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gp(e,t)}(t,cp),n=t,i=[{key:"fromObj",value:function(e){var n=new t,r=e.items,i=r?r.length:0;be.extend(n,e),n.items=[],n.defaultStyle=pn.fromJson(e.defaultStyle);for(var o=0;o<i;o++)n.items.push(mp.fromObj(r[o]));return n}}],(r=[{key:"destroy",value:function(){Bp(Up(t.prototype),"destroy",this).call(this);var e=this;if(e.uniqueExpression=null,e.colorGradientType=null,e.items){if(e.items.length>0)for(var n in e.items)e.items[n].destroy(),e.items[n]=null;e.items=null}e.defaultStyle&&(e.defaultStyle.destroy(),e.defaultStyle=null)}},{key:"toServerJSONObject",value:function(){var e={};if((e=be.copyAttributes(e,this)).defaultStyle&&e.defaultStyle.toServerJSONObject&&(e.defaultStyle=e.defaultStyle.toServerJSONObject()),e.items){for(var t=[],n=e.items.length,r=0;r<n;r++)t.push(e.items[r].toServerJSONObject());e.items=t}return e}}])&&Dp(n.prototype,r),i&&Dp(n,i),t}();function Vp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeUnique=zp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Jp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.axesColor=new fn(0,0,0),this.axesDisplayed=!1,this.axesGridDisplayed=!1,this.axesTextDisplayed=!1,this.axesTextStyle=new hp,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphAxes"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n.axesColor=fn.fromJson(t.axesColor),n.axesTextStyle=hp.fromObj(t.axesTextStyle),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.axesColor&&(e.axesColor.destroy(),e.axesColor=null),e.axesDisplayed=null,e.axesGridDisplayed=null,e.axesTextDisplayed=null,e.axesTextStyle&&(e.axesTextStyle.destroy(),e.axesTextStyle=null)}}])&&Vp(t.prototype,n),r&&Vp(t,r),e}();function Hp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeGraphAxes=Jp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var qp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxGraphSize=0,this.minGraphSize=0,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphSize"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){var n=new e;return be.copy(n,t),n}}],(n=[{key:"destroy",value:function(){this.maxGraphSize=null,this.minGraphSize=null}}])&&Hp(t.prototype,n),r&&Hp(t,r),e}();function Wp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeGraphSize=qp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Yp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.graphTextDisplayed=!1,this.graphTextFormat=d.CAPTION,this.graphTextStyle=new hp,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphText"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){var n=new e;return be.copy(n,t),n.graphTextStyle=hp.fromObj(t.graphTextStyle),n}}],(n=[{key:"destroy",value:function(){var e=this;e.graphTextDisplayed=null,e.graphTextFormat=null,e.graphTextStyle&&(e.graphTextStyle.destroy(),e.graphTextStyle=null)}}])&&Wp(t.prototype,n),r&&Wp(t,r),e}();function Qp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeGraphText=Yp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Xp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=new pn,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n.uniformStyle=pn.fromJson(t.uniformStyle),n}}}],(n=[{key:"destroy",value:function(){this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=null}}])&&Qp(t.prototype,n),r&&Qp(t,r),e}();function Kp(e){return(Kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ey(e,t,n){return(ey="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ty(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ty(e){return(ty=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ny(e,t){return(ny=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThemeGraphItem=Xp;var ry=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=ty(t).call(this,"GRAPH",e))||"object"!==Kp(i)&&"function"!=typeof i?$p(r):i).barWidth=0,n.flow=new gp,n.graduatedMode=g.CONSTANT,n.graphAxes=new Jp,n.graphSize=new qp,n.graphSizeFixed=!1,n.graphText=new Yp,n.graphType=m.AREA,n.graphAxesTextDisplayMode=v.NONE,n.items=null,n.memoryKeys=null,n.negativeDisplayed=!1,n.offset=new Sp,n.overlapAvoided=!0,n.roseAngle=0,n.startAngle=0,e&&be.extend($p(n),e),n.CLASS_NAME="SuperMap.ThemeGraph",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ny(e,t)}(t,cp),n=t,i=[{key:"fromObj",value:function(e){var n=new t,r=e.items,i=r?r.length:0;be.copy(n,e),n.items=[],n.flow=gp.fromObj(e),n.graphAxes=Jp.fromObj(e),n.graphSize=qp.fromObj(e),n.graphText=Yp.fromObj(e),n.offset=Sp.fromObj(e);for(var o=0;o<i;o++)n.items.push(Xp.fromObj(r[o]));return n}}],(r=[{key:"destroy",value:function(){ey(ty(t.prototype),"destroy",this).call(this);var e=this;if(e.barWidth=null,e.flow&&(e.flow.destroy(),e.flow=null),e.graduatedMode=null,e.graphAxes&&(e.graphAxes.destroy(),e.graphAxes=null),e.graphSize&&(e.graphSize.destroy(),e.graphSize=null),e.graphSizeFixed=null,e.graphText&&(e.graphText.destroy(),e.graphText=null),e.graphType=null,e.items){for(var n=0,r=e.items,i=r.length;n<i;n++)r[n].destroy();e.items=null}e.memoryKeys=null,e.negativeDisplayed=null,e.offset&&(e.offset.destroy(),e.offset=null),e.overlapAvoided=null,e.roseAngle=null,e.startAngle=null,e.graphAxesTextDisplayMode=null}},{key:"toJSON",value:function(){return be.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,this.graphText&&(e.graphTextDisplayed=this.graphText.graphTextDisplayed,e.graphTextFormat=this.graphText.graphTextFormat,e.graphTextStyle=this.graphText.graphTextStyle),this.flow&&(e.flowEnabled=this.flow.flowEnabled,e.leaderLineDisplayed=this.flow.leaderLineDisplayed,e.leaderLineStyle=this.flow.leaderLineStyle),this.graphAxes&&(e.axesColor=this.graphAxes.axesColor,e.axesDisplayed=this.graphAxes.axesDisplayed,e.axesGridDisplayed=this.graphAxes.axesGridDisplayed,e.axesTextDisplayed=this.graphAxes.axesTextDisplayed,e.axesTextStyle=this.graphAxes.axesTextStyle),this.graphSize&&(e.maxGraphSize=this.graphSize.maxGraphSize,e.minGraphSize=this.graphSize.minGraphSize),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),e.barWidth=this.barWidth,e.graduatedMode=this.graduatedMode,e.graphSizeFixed=this.graphSizeFixed,e.graphType=this.graphType,e.graphAxesTextDisplayMode=this.graphAxesTextDisplayMode,e.items=this.items,e.memoryKeys=this.memoryKeys,e.negativeDisplayed=this.negativeDisplayed,e.overlapAvoided=this.overlapAvoided,e.roseAngle=this.roseAngle,e.startAngle=this.startAngle,e}}])&&Zp(n.prototype,r),i&&Zp(n,i),t}();function iy(e){return(iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ay(e){return(ay=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ly(e,t){return(ly=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThemeGraph=ry;var uy=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=ay(t).call(this,"DOTDENSITY",e))||"object"!==iy(i)&&"function"!=typeof i?sy(r):i).dotExpression=null,n.style=new pn,n.value=null,e&&be.extend(sy(n),e),n.CLASS_NAME="SuperMap.ThemeDotDensity",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ly(e,t)}(t,cp),n=t,i=[{key:"fromObj",value:function(e){if(e){var n=new t;return be.copy(n,e),n.style=pn.fromJson(e.style),n}}}],(r=[{key:"destroy",value:function(){var e=this;e.dotExpression=null,e.value=null,e.style&&(e.style.destroy(),e.style=null)}},{key:"toServerJSONObject",value:function(){var e={};return(e=be.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&oy(n.prototype,r),i&&oy(n,i),t}();function cy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeDotDensity=uy;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.negativeDisplayed=!1,this.negativeStyle=new pn,this.positiveStyle=new pn,this.zeroDisplayed=!1,this.zeroStyle=new pn,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraduatedSymbolStyle"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n.negativeStyle=pn.fromJson(t.negativeStyle),n.positiveStyle=pn.fromJson(t.positiveStyle),n.zeroStyle=pn.fromJson(t.zeroStyle),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.negativeDisplayed=null,e.negativeStyle=null,e.positiveStyle=null,e.zeroDisplayed=null,e.zeroStyle=null}}])&&cy(t.prototype,n),r&&cy(t,r),e}();function hy(e){return(hy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function py(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dy(e,t,n){return(dy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=my(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function my(e){return(my=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vy(e,t){return(vy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThemeGraduatedSymbolStyle=fy;var gy=function(e){function t(e){var n,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(n=!(o=my(t).call(this,"GRADUATEDSYMBOL",e))||"object"!==hy(o)&&"function"!=typeof o?yy(i):o).baseValue=0,n.expression=null,n.flow=new gp,n.graduatedMode=r.GraduatedMode.CONSTAN,n.offset=new Sp,n.style=new fy,e&&be.extend(yy(n),e),n.CLASS_NAME="SuperMap.ThemeGraduatedSymbol",n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vy(e,t)}(t,cp),n=t,o=[{key:"fromObj",value:function(e){if(e){var t=new r.ThemeGraduatedSymbol;return be.copy(t,e),t.flow=gp.fromObj(e),t.offset=Sp.fromObj(e),t.style=fy.fromObj(e),t}}}],(i=[{key:"destroy",value:function(){dy(my(t.prototype),"destroy",this).call(this);var e=this;e.expression=null,e.flow&&(e.flow.destroy(),e.flow=null),e.graduatedMode=g.CONSTANT,e.offset&&(e.offset.destroy(),e.offset=null),e.style&&(e.style.destroy(),e.style=null)}},{key:"toJSON",value:function(){return be.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,e.memoryData=this.memoryData,e.baseValue=this.baseValue,e.expression=this.expression,e.graduatedMode=this.graduatedMode,this.flow&&(e.flowEnabled=this.flow.flowEnabled,e.leaderLineDisplayed=this.flow.leaderLineDisplayed,e.leaderLineStyle=this.flow.leaderLineStyle),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.style&&(e.negativeStyle=this.style.negativeStyle,e.negativeDisplayed=this.style.negativeDisplayed,e.positiveStyle=this.style.positiveStyle,e.zeroDisplayed=this.style.zeroDisplayed,e.zeroStyle=this.style.zeroStyle),e}}])&&py(n.prototype,i),o&&py(n,o),t}();function by(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeGraduatedSymbol=gy;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Sy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.end=0,this.start=0,this.style=new pn,this.visible=!0,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeRangeItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n.style=pn.fromJson(t.style),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=be.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&by(t.prototype,n),r&&by(t,r),e}();function _y(e){return(_y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xy(e,t,n){return(xy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cy(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Cy(e){return(Cy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Py(e,t){return(Py=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThemeRangeItem=Sy;var Ty=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Cy(t).call(this,"RANGE",e))||"object"!==_y(i)&&"function"!=typeof i?Oy(r):i).precision="1.0E-12",n.items=null,n.rangeExpression=null,n.rangeMode=b.EQUALINTERVAL,n.rangeParameter=0,n.colorGradientType=_.YELLOW_RED,e&&be.extend(Oy(n),e),n.CLASS_NAME="SuperMap.ThemeRange",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Py(e,t)}(t,cp),n=t,i=[{key:"fromObj",value:function(e){if(e){var n=new t;be.copy(n,e);var r=e.items,i=r?r.length:0;n.items=[];for(var o=0;o<i;o++)n.items.push(Sy.fromObj(r[o]));return n}}}],(r=[{key:"destroy",value:function(){xy(Cy(t.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var n in e.items)e.items[n].destroy(),e.items[n]=null;e.items=null}e.rangeExpression=null,e.rangeMode=null,e.rangeParameter=null,e.colorGradientType=null}}])&&wy(n.prototype,r),i&&wy(n,i),t}();function Ey(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeRange=Ty;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ky=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.bounds=null,this.caption=null,this.description=null,this.name=null,this.queryable=null,this.subLayers=null,this.type=null,this.visible=null,be.extend(this,t),this.CLASS_NAME="SuperMap.UGCLayer"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){be.reset(this)}},{key:"fromJson",value:function(e){e=e||{},be.extend(this,e);var t=this.bounds;t&&(this.bounds=new Oe(t.leftBottom.x,t.leftBottom.y,t.rightTop.x,t.rightTop.y))}},{key:"toServerJSONObject",value:function(){var e={};return(e=be.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e}}])&&Ey(t.prototype,n),r&&Ey(t,r),e}();function My(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.UGCLayer=ky;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ay=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.allowPointOverlap=!0,this.allowPointWithTextDisplay=!0,this.allowTextOverlap=!1,this.allowTextAndPointOverlap=!0,this.allowThemeGraduatedSymbolOverlap=!1,this.allowThemeGraphOverlap=!1,this.horizontalOverlappedSpaceSize=0,this.verticalOverlappedSpaceSize=0,be.extend(this,t),this.ugcLayer=new ky(t),this.CLASS_NAME="SuperMap.OverlapDisplayedOptions"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){be.reset(this)}},{key:"fromJson",value:function(e){this.ugcLayer.fromJson.apply(this,[e])}},{key:"toServerJSONObject",value:function(){return this.ugcLayer.toServerJSONObject.apply(this,arguments)}},{key:"toString",value:function(){var e=this.ugcLayer.toServerJSONObject.apply(this,arguments),t="{";for(var n in e)e.hasOwnProperty(n)&&(t+="'"+n+"':"+e[n]+",");return t=t.substr(0,t.length-1),t+="}"}}])&&My(t.prototype,n),r&&My(t,r),e}();function Ly(e){return(Ly="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ry(e,t){return!t||"object"!==Ly(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ny(e,t,n){return(Ny="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Iy(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Iy(e){return(Iy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dy(e,t){return(Dy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.OverlapDisplayedOptions=Ay;var Fy=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(n=Ry(this,Iy(t).call(this,e))).completeLineSymbolDisplayed=null,n.maxScale=null,n.minScale=null,n.minVisibleGeometrySize=null,n.opaqueRate=null,n.symbolScalable=null,n.symbolScale=null,n.overlapDisplayed=null,n.overlapDisplayedOptions=null,n.CLASS_NAME="SuperMap.UGCMapLayer",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dy(e,t)}(t,ky),n=t,(r=[{key:"destroy",value:function(){Ny(Iy(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"fromJson",value:function(e){Ny(Iy(t.prototype),"fromJson",this).call(this,e)}},{key:"toServerJSONObject",value:function(){return Ny(Iy(t.prototype),"toServerJSONObject",this).call(this)}}])&&jy(n.prototype,r),i&&jy(n,i),t}();function By(e){return(By="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gy(e,t){return!t||"object"!==By(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zy(e,t,n){return(zy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vy(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Vy(e){return(Vy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jy(e,t){return(Jy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.UGCMapLayer=Fy;var Hy=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(n=Gy(this,Vy(t).call(this,e))).datasetInfo=null,n.displayFilter=null,n.joinItems=null,n.representationField=null,n.ugcLayerType=null,n.CLASS_NAME="SuperMap.UGCSubLayer",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jy(e,t)}(t,Fy),n=t,(r=[{key:"fromJson",value:function(e){if(zy(Vy(t.prototype),"fromJson",this).call(this,e),this.datasetInfo&&(this.datasetInfo=new La(this.datasetInfo)),this.joinItems&&this.joinItems.length){for(var n=[],r=0;r<this.joinItems.length;r++)n[r]=new Ai(this.joinItems[r]);this.joinItems=n}}},{key:"destroy",value:function(){zy(Vy(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"toServerJSONObject",value:function(){var e=zy(Vy(t.prototype),"toServerJSONObject",this).call(this);if(e.joinItems){for(var n=[],r=0;r<e.joinItems.length;r++)e.joinItems[r].toServerJSONObject&&(n[r]=e.joinItems[r].toServerJSONObject());e.joinItems=n}return e.datasetInfo&&e.datasetInfo.toServerJSONObject&&(e.datasetInfo=e.datasetInfo.toServerJSONObject()),e}}])&&Uy(n.prototype,r),i&&Uy(n,i),t}();function qy(e){return(qy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yy(e,t){return!t||"object"!==qy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qy(e,t,n){return(Qy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xy(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Xy(e){return(Xy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ky(e,t){return(Ky=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.UGCSubLayer=Hy;var Zy=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(n=Yy(this,Xy(t).call(this,e))).theme=null,n.themeElementPosition=null,n.CLASS_NAME="SuperMap.ServerTheme",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ky(e,t)}(t,Hy),n=t,(r=[{key:"destroy",value:function(){Qy(Xy(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"fromJson",value:function(e){Qy(Xy(t.prototype),"fromJson",this).call(this,e);var n=this.theme;switch(n&&n.type){case"LABEL":this.theme=Np.fromObj(n);break;case"UNIQUE":this.theme=zp.fromObj(n);break;case"GRAPH":this.theme=ry.fromObj(n);break;case"DOTDENSITY":this.theme=uy.fromObj(n);break;case"GRADUATEDSYMBOL":this.theme=gy.fromObj(n);break;case"RANGE":this.theme=Ty.fromObj(n)}this.themeElementPosition&&(this.themeElementPosition=new _e(this.themeElementPosition.x,this.themeElementPosition.y))}},{key:"toServerJSONObject",value:function(){var e=Qy(Xy(t.prototype),"toServerJSONObject",this).call(this);return e.themeElementPosition&&e.themeElementPosition.toServerJSONObject&&(e.themeElementPosition=e.themeElementPosition.toServerJSONObject()),e.theme&&e.theme.toServerJSONObject&&(e.theme=e.theme.toServerJSONObject()),e}}])&&Wy(n.prototype,r),i&&Wy(n,i),t}();function $y(e){return($y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ed(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function td(e,t){return!t||"object"!==$y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nd(e,t,n){return(nd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rd(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function rd(e){return(rd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function id(e,t){return(id=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ServerTheme=Zy;var od=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(n=td(this,rd(t).call(this,e))).colorDictionarys=null,n.brightness=null,n.colorGradientType=null,n.colors=null,n.contrast=null,n.dashStyle=null,n.gridType=null,n.horizontalSpacing=null,n.sizeFixed=null,n.solidStyle=null,n.specialColor=null,n.specialValue=null,n.specialValueTransparent=null,n.verticalSpacing=null,n.CLASS_NAME="SuperMap.Grid",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&id(e,t)}(t,Hy),n=t,(r=[{key:"destroy",value:function(){nd(rd(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"fromJson",value:function(e){if(nd(rd(t.prototype),"fromJson",this).call(this,e),this.specialColor&&(this.specialColor=new fn(this.specialColor.red,this.specialColor.green,this.specialColor.blue)),this.colors){var n,r=[];for(var i in this.colors)n=this.colors[i],r.push(new fn(n.red,n.green,n.blue));this.colors=r}if(this.dashStyle&&(this.dashStyle=new pn(this.dashStyle)),this.solidStyle&&(this.solidStyle=new pn(this.solidStyle)),this.colorDictionary){var o,a=[];for(var s in this.colorDictionary)o=this.colorDictionary[s],a.push(new fa({elevation:s,color:o}));this.colorDictionarys=a}delete this.colorDictionary}},{key:"toServerJSONObject",value:function(){var e=nd(rd(t.prototype),"toServerJSONObject",this).call(this);return e.dashStyle&&e.dashStyle.toServerJSONObject&&(e.dashStyle=e.dashStyle.toServerJSONObject()),e.solidStyle&&e.solidStyle.toServerJSONObject&&(e.solidStyle=e.solidStyle.toServerJSONObject()),e}}])&&ed(n.prototype,r),i&&ed(n,i),t}();function ad(e){return(ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ld(e,t){return!t||"object"!==ad(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ud(e,t,n){return(ud="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cd(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function cd(e){return(cd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fd(e,t){return(fd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Grid=od;var hd=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(n=ld(this,cd(t).call(this,e))).brightness=null,n.colorSpaceType=null,n.contrast=null,n.displayBandIndexes=null,n.transparent=null,n.transparentColor=null,n.transparentColorTolerance=null,n.CLASS_NAME="SuperMap.Image",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fd(e,t)}(t,Hy),n=t,(r=[{key:"destroy",value:function(){ud(cd(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"fromJson",value:function(e){ud(cd(t.prototype),"fromJson",this).call(this,e),this.transparentColor&&(this.transparentColor=new fn(this.transparentColor.red,this.transparentColor.green,this.transparentColor.blue))}},{key:"toServerJSONObject",value:function(){return ud(cd(t.prototype),"toServerJSONObject",this).call(this)}}])&&sd(n.prototype,r),i&&sd(n,i),t}();function pd(e){return(pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dd(e,t){return!t||"object"!==pd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function md(e,t,n){return(md="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vd(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function vd(e){return(vd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gd(e,t){return(gd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Image=hd;var bd=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(n=dd(this,vd(t).call(this,e))).style=null,n.CLASS_NAME="SuperMap.Vector",n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gd(e,t)}(t,Hy),n=t,(i=[{key:"destroy",value:function(){md(vd(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"fromJson",value:function(e){md(vd(t.prototype),"fromJson",this).call(this,e);var n=this.style;n&&(this.style=new pn(n))}},{key:"toServerJSONObject",value:function(){var e=r.toServerJSONObject();return e.style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&yd(n.prototype,i),o&&yd(n,o),t}();function Sd(e){return(Sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Od(e,t,n){return(Od="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xd(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function xd(e){return(xd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cd(e,t){return(Cd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Vector=bd;var Pd=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=xd(t).call(this,e,n))||"object"!==Sd(o)&&"function"!=typeof o?wd(i):o).isTempLayers=!1,n&&be.extend(wd(r),n),r.CLASS_NAME="SuperMap.GetLayersInfoService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cd(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){Od(xd(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"processAsync",value:function(){var e=this;e.isTempLayers||(e.url=be.urlPathAppend(e.url,"layers")),e.request({method:"GET",params:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e){var t,n;n=(t=!!(e=be.transformResult(e))&&e.length>0?e[0].subLayers.layers:null)?t.length:0,this.handleLayers(n,t),this.events.triggerEvent("processCompleted",{result:e[0]})}},{key:"handleLayers",value:function(e,t){var n;if(e)for(var r=0;r<e;r++){if(t[r].subLayers&&t[r].subLayers.layers&&t[r].subLayers.layers.length>0)this.handleLayers(t[r].subLayers.layers.length,t[r].subLayers.layers);else switch(t[r].ugcLayerType){case"THEME":(n=new Zy).fromJson(t[r]),t[r]=n;break;case"GRID":(n=new od).fromJson(t[r]),t[r]=n;break;case"IMAGE":(n=new hd).fromJson(t[r]),t[r]=n;break;case"VECTOR":(n=new bd).fromJson(t[r]),t[r]=n}}}}])&&_d(n.prototype,r),i&&_d(n,i),t}();function Td(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.GetLayersInfoService=Pd;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ed=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.bounds=null,this.searchRadius=0,this.zValueFieldName=null,this.zValueScale=1,this.resolution=null,this.filterQueryParameter=null,this.outputDatasetName=null,this.outputDatasourceName=null,this.pixelFormat=null,this.dataset=null,this.inputPoints=null,this.InterpolationAnalystType="dataset",this.clipParam=null,be.extend(this,t),this.CLASS_NAME="SuperMap.InterpolationAnalystParameters")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)if("inputPoints"===n&&"geometry"===e.InterpolationAnalystType){for(var r=[],i=0;i<e.inputPoints.length;i++){var o=e.inputPoints[i],a={x:o.x,y:o.y,z:o.tag};r.push(a)}t[n]=r}else t[n]=e[n]}}],(n=[{key:"destroy",value:function(){var e=this;e.bounds=null,e.searchRadius=null,e.zValueFieldName=null,e.zValueScale=null,e.resolution=null,e.filterQueryParameter=null,e.outputDatasetName=null,e.pixelFormat=null}}])&&Td(t.prototype,n),r&&Td(t,r),e}();function kd(e){return(kd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Md(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ad(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ld(e,t,n){return(Ld="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jd(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function jd(e){return(jd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rd(e,t){return(Rd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.InterpolationAnalystParameters=Ed;var Nd=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=jd(t).call(this,e))||"object"!==kd(i)&&"function"!=typeof i?Ad(r):i).smooth=.1,n.tension=40,n.searchMode=null,n.expectedCount=12,n.maxPointCountForInterpolation=200,n.maxPointCountInNode=50,e&&be.extend(Ad(n),e),n.CLASS_NAME="SuperMap.InterpolationRBFAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rd(e,t)}(t,Ed),n=t,i=[{key:"toObject",value:function(e,t){for(var n in e)t[n]=e[n]}}],(r=[{key:"destroy",value:function(){Ld(jd(t.prototype),"destroy",this).call(this);var e=this;e.smooth=null,e.tension=null,e.searchMode=null,e.expectedCount=null,e.maxPointCountForInterpolation=null,e.maxPointCountInNode=null}}])&&Md(n.prototype,r),i&&Md(n,i),t}();function Id(e){return(Id="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bd(e,t,n){return(Bd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ud(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ud(e){return(Ud=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gd(e,t){return(Gd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.InterpolationRBFAnalystParameters=Nd;var zd=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(i=Ud(t).call(this,e))||"object"!==Id(i)&&"function"!=typeof i?Fd(r):i,e&&be.extend(Fd(n),e),n.CLASS_NAME="SuperMap.InterpolationDensityAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gd(e,t)}(t,Ed),n=t,(r=[{key:"destroy",value:function(){Bd(Ud(t.prototype),"destroy",this).call(this)}}])&&Dd(n.prototype,r),i&&Dd(n,i),t}();function Vd(e){return(Vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qd(e,t,n){return(qd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wd(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Wd(e){return(Wd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yd(e,t){return(Yd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.InterpolationDensityAnalystParameters=zd;var Qd=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Wd(t).call(this,e))||"object"!==Vd(i)&&"function"!=typeof i?Hd(r):i).power=2,n.searchMode=null,n.expectedCount=12,e&&be.extend(Hd(n),e),n.CLASS_NAME="SuperMap.InterpolationIDWAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yd(e,t)}(t,Ed),n=t,(r=[{key:"destroy",value:function(){qd(Wd(t.prototype),"destroy",this).call(this);this.power=null,this.searchMode=null,this.expectedCount=null}}])&&Jd(n.prototype,r),i&&Jd(n,i),t}();function Xd(e){return(Xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $d(e,t,n){return($d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=em(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function em(e){return(em=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tm(e,t){return(tm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.InterpolationIDWAnalystParameters=Qd;var nm=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=em(t).call(this,e))||"object"!==Xd(i)&&"function"!=typeof i?Zd(r):i).type=null,n.mean=null,n.angle=0,n.nugget=0,n.range=0,n.sill=0,n.variogramMode=Y.SPHERICAL,n.exponent=Q.EXP1,n.searchMode=null,n.expectedCount=12,n.maxPointCountForInterpolation=200,n.maxPointCountInNode=50,e&&be.extend(Zd(n),e),n.CLASS_NAME="SuperMap.InterpolationKrigingAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tm(e,t)}(t,Ed),n=t,(r=[{key:"destroy",value:function(){$d(em(t.prototype),"destroy",this).call(this);var e=this;e.type=null,e.mean=null,e.angle=null,e.nugget=null,e.range=null,e.sill=null,e.variogramMode=null,e.exponent=null,e.searchMode=null,e.expectedCount=null,e.maxPointCountForInterpolation=null,e.maxPointCountInNode=null}}])&&Kd(n.prototype,r),i&&Kd(n,i),t}();function rm(e){return(rm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function im(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function om(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function am(e,t,n){return(am="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sm(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function sm(e){return(sm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lm(e,t){return(lm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.InterpolationKrigingAnalystParameters=nm;var um=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=sm(t).call(this,e,n))||"object"!==rm(o)&&"function"!=typeof o?om(i):o).mode=null,n&&be.extend(om(r),n),r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lm(e,t)}(t,yi),n=t,(r=[{key:"destroy",value:function(){am(sm(t.prototype),"destroy",this).call(this),this.mode=null,this.CLASS_NAME="SuperMap.InterpolationAnalystService"}},{key:"processAsync",value:function(e){var t={},n=this;e instanceof zd?(n.mode="Density","geometry"===e.InterpolationAnalystType?n.url=be.urlPathAppend(n.url,"geometry/interpolation/density"):n.url=be.urlPathAppend(n.url,"datasets/"+e.dataset+"/interpolation/density")):e instanceof Qd?(n.mode="IDW","geometry"===e.InterpolationAnalystType?n.url=be.urlPathAppend(n.url,"geometry/interpolation/idw"):n.url=be.urlPathAppend(n.url,"datasets/"+e.dataset+"/interpolation/idw")):e instanceof Nd?(n.mode="RBF","geometry"===e.InterpolationAnalystType?n.url=be.urlPathAppend(n.url,"geometry/interpolation/rbf"):n.url=be.urlPathAppend(n.url,"datasets/"+e.dataset+"/interpolation/rbf")):e instanceof nm&&(n.mode="Kriging","geometry"===e.InterpolationAnalystType?n.url=be.urlPathAppend(n.url,"geometry/interpolation/kriging"):n.url=be.urlPathAppend(n.url,"datasets/"+e.dataset+"/interpolation/kriging")),Ed.toObject(e,t);var r=be.toJSON(t);n.url=be.urlAppend(n.url,"returnContent=true"),n.request({method:"POST",data:r,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}])&&im(n.prototype,r),i&&im(n,i),t}();function cm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.InterpolationAnalystService=um;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fm=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=ee.METER,this.radiusUnit=ee.METER,this.areaUnit=$.SQUAREMILE,this.output=null,this.mappingParameters=null,be.extend(this,t),this.CLASS_NAME="SuperMap.KernelDensityJobParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},"query"===n&&e[n]?t.analyst[n]=e[n].toBBOX():t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null,this.output instanceof ao&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof lo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&cm(t.prototype,n),r&&cm(t,r),e}();function hm(e){return(hm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ym(e,t){return!t||"object"!==hm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dm(e,t,n){return(dm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mm(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function mm(e){return(mm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vm(e,t){return(vm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.KernelDensityJobParameter=fm;var gm=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ym(this,mm(t).call(this,e,n))).url=be.urlPathAppend(r.url,"spatialanalyst/density"),r.CLASS_NAME="SuperMap.KernelDensityJobsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vm(e,t)}(t,go),n=t,(r=[{key:"destroy",value:function(){dm(mm(t.prototype),"destroy",this).call(this)}},{key:"getKernelDensityJobs",value:function(){dm(mm(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getKernelDensityJob",value:function(e){dm(mm(t.prototype),"getJobs",this).call(this,be.urlPathAppend(this.url,e))}},{key:"addKernelDensityJob",value:function(e,n){dm(mm(t.prototype),"addJob",this).call(this,this.url,e,fm,n)}}])&&pm(n.prototype,r),i&&pm(n,i),t}();r.KernelDensityJobsService=gm;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var bm=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="LabelMatrixCell"};function Sm(e){return(Sm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wm(e){return(wm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Om(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xm(e,t){return(xm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.LabelMatrixCell=bm;var Cm=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=wm(t).call(this,e))||"object"!==Sm(i)&&"function"!=typeof i?Om(r):i).height=0,n.pathField=null,n.rotation=0,n.width=0,n.sizeFixed=!1,n.type="IMAGE",e&&be.extend(Om(n),e),n.CLASS_NAME="SuperMap.LabelImageCell",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xm(e,t)}(t,bm),n=t,(r=[{key:"destroy",value:function(){var e=this;e.height=null,e.pathField=null,e.rotation=null,e.width=null,e.sizeFixed=null}}])&&_m(n.prototype,r),i&&_m(n,i),t}();function Pm(e){return(Pm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Em(e){return(Em=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function km(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mm(e,t){return(Mm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.LabelImageCell=Cm;var Am=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Em(t).call(this,e))||"object"!==Pm(i)&&"function"!=typeof i?km(r):i).style=new pn,n.symbolIDField=null,n.type="SYMBOL",e&&be.extend(km(n),e),n.CLASS_NAME="SuperMap.LabelSymbolCell",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mm(e,t)}(t,bm),n=t,(r=[{key:"destroy",value:function(){this.style&&(this.style.destroy(),this.style=null),this.symbolIDField=null}}])&&Tm(n.prototype,r),i&&Tm(n,i),t}();function Lm(e){return(Lm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rm(e){return(Rm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Im(e,t){return(Im=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.LabelSymbolCell=Am;var Dm=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Rm(t).call(this,e))||"object"!==Lm(i)&&"function"!=typeof i?Nm(r):i).themeLabel=new Np,n.type="THEME",e&&be.extend(Nm(n),e),n.CLASS_NAME=" SuperMap.LabelThemeCell",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Im(e,t)}(t,bm),n=t,(r=[{key:"destroy",value:function(){this.themeLabel&&(this.themeLabel.destroy(),this.themeLabel=null)}}])&&jm(n.prototype,r),i&&jm(n,i),t}();function Fm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.LabelThemeCell=Dm;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Bm=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerName=null,this.isVisible=null,this.displayFilter=null,this.fieldValuesDisplayFilter=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.LayerStatus"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.layerName=null,this.isVisible=null,this.displayFilter=null}},{key:"toJSON",value:function(){var e="{";e+='"type":"UGC",';var t=[];return this.layerName&&(t.push('"name":"'+this.layerName+'"'),t.push('"visible":'+this.isVisible)),this.displayFilter&&t.push('"displayFilter":"'+this.displayFilter+'"'),(this.minScale||0==this.minScale)&&t.push('"minScale":'+this.minScale),(this.maxScale||0==this.maxScale)&&t.push('"maxScale":'+this.maxScale),this.fieldValuesDisplayFilter&&t.push('"fieldValuesDisplayFilter":'+be.toJSON(this.fieldValuesDisplayFilter)),e+=t,e+="}"}}])&&Fm(t.prototype,n),r&&Fm(t,r),e}();function Um(e){return(Um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vm(e,t,n){return(Vm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jm(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Jm(e){return(Jm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hm(e,t){return(Hm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.LayerStatus=Bm;var qm=function(e){function t(e,n){var r,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=Jm(t).call(this,e,n))||"object"!==Um(o)&&"function"!=typeof o?zm(i):o).projection=null,r.CLASS_NAME="SuperMap.MapService",n&&be.extend(zm(r),n);var a=zm(r);if(a.projection){var s=a.projection.split(":");s instanceof Array&&(2===s.length&&(a.url=be.urlAppend(a.url,'prjCoordSys={"epsgCode":"'.concat(s[1],'"}'))),1===s.length&&(a.url=be.urlAppend(a.url,'prjCoordSys={"epsgCode":"'.concat(s[0],'"}'))))}return r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hm(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){Vm(Jm(t.prototype),"destroy",this).call(this);var e=this;e.events&&(e.events.un(e.eventListeners),e.events.listeners=null,e.events.destroy(),e.events=null,e.eventListeners=null)}},{key:"processAsync",value:function(){this.request({method:"GET",scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e){var t=(e=be.transformResult(e)).code>=200&&e.code<300||0==e.code||304===e.code,n=e.code&&t;!e.code||n?this.events&&this.events.triggerEvent("processCompleted",{result:e}):this.events.triggerEvent("processFailed",{error:e})}}])&&Gm(n.prototype,r),i&&Gm(n,i),t}();function Wm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.MapService=qm;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ym=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.extractRegion=null,this.expression=null,this.isZip=!1,this.ignoreNoValue=!1,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.MathExpressionAnalysisParameters")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)if("dataset"!==n&&(t[n]=e[n]),"extractRegion"===n&&e[n]){for(var r=e[n].components[0].components,i={},o=[],a=r.length,s=0;s<a-1;s++){var l={};l.x=r[s].x,l.y=r[s].y,o.push(l)}i.points=o,i.type="REGION",t[n]=i}}}],(n=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.bounds=null,e.expression=null,e.isZip=!0,e.ignoreNoValue=!0,e.targetDatasource=null,e.resultGridName=null,e.deleteExistResultDataset=null}}])&&Wm(t.prototype,n),r&&Wm(t,r),e}();function Qm(e){return(Qm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Km(e,t){return!t||"object"!==Qm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zm(e,t,n){return(Zm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$m(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function $m(e){return($m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ev(e,t){return(ev=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.MathExpressionAnalysisParameters=Ym;var tv=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Km(this,$m(t).call(this,e,n))).CLASS_NAME="SuperMap.MathExpressionAnalysisService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ev(e,t)}(t,yi),n=t,(r=[{key:"destroy",value:function(){Zm($m(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t=this,n={};e instanceof Ym&&(t.url=be.urlPathAppend(t.url,"datasets/"+e.dataset+"/mathanalyst")),Ym.toObject(e,n);var r=be.toJSON(n);t.url=be.urlAppend(t.url,"returnContent=true"),t.request({method:"POST",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&Xm(n.prototype,r),i&&Xm(n,i),t}();function nv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.MathExpressionAnalysisService=tv;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var rv=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.geometry=t,this.unit=h.METER,this.prjCoordSys=null,this.distanceMode=null,n&&be.extend(this,n),this.CLASS_NAME="SuperMap.MeasureParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.geometry=null,this.unit=null,this.prjCoordSys=null}}])&&nv(t.prototype,n),r&&nv(t,r),e}();function iv(e){return(iv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ov(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function av(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sv(e,t,n){return(sv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lv(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function lv(e){return(lv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uv(e,t){return(uv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.MeasureParameters=rv;var cv=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=lv(t).call(this,e,n))||"object"!==iv(o)&&"function"!=typeof o?av(i):o).measureMode=f.DISTANCE,n&&be.extend(av(r),n),r.CLASS_NAME="SuperMap.MeasureService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uv(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){sv(lv(t.prototype),"destroy",this).call(this);this.measureMode=null}},{key:"processAsync",value:function(e){if(e instanceof rv){var t,n,r=this,i=e.geometry;if(i){r.url=be.urlPathAppend(r.url,r.measureMode===f.AREA?"area":"distance");var o,a,s,l=Tn.fromGeometry(i);if(l)t=l.parts[0],n=l.points.splice(0,t),e.prjCoordSys?("object"===iv(e.prjCoordSys)?o='{"epsgCode"'+(a=e.prjCoordSys.projCode).substring(a.indexOf(":"),a.length)+"}":"string"==typeof e.prjCoordSys&&(o='{"epsgCode"'+e.prjCoordSys.substring(e.prjCoordSys.indexOf(":"),e.prjCoordSys.length)+"}"),s={point2Ds:be.toJSON(n),unit:e.unit,prjCoordSys:o}):s={point2Ds:be.toJSON(n),unit:e.unit},r.request({method:"GET",params:s,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}}])&&ov(n.prototype,r),i&&ov(n,i),t}();function fv(e){return(fv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yv(e,t,n){return(yv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dv(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function dv(e){return(dv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mv(e,t){return(mv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.MeasureService=cv;var vv=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=dv(t).call(this,e,n))||"object"!==fv(o)&&"function"!=typeof o?pv(i):o).mode=null,n&&be.extend(pv(r),n),r.CLASS_NAME="SuperMap.OverlayAnalystService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mv(e,t)}(t,yi),n=t,(r=[{key:"destroy",value:function(){yv(dv(t.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},n=this;e instanceof Ga?(n.mode="datasets",n.url=be.urlPathAppend(n.url,"datasets/"+e.sourceDataset+"/overlay"),Ga.toObject(e,t)):e instanceof Qc&&(n.mode="geometry",e.operateGeometries&&e.sourceGeometries?(n.url=be.urlPathAppend(n.url,"geometry/overlay/batch"),n.url=be.urlAppend(n.url,"ignoreAnalystParam=true")):n.url=be.urlPathAppend(n.url,"geometry/overlay"),Qc.toObject(e,t)),n.url=be.urlAppend(n.url,"returnContent=true");var r=be.toJSON(t);n.request({method:"POST",data:r,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}])&&hv(n.prototype,r),i&&hv(n,i),t}();function gv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.OverlayAnalystService=vv;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var bv=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetOverlay="",this.mode="",this.srcFields="",this.overlayFields="",this.output=null,this.mappingParameters=null,be.extend(this,t),this.CLASS_NAME="SuperMap.OverlayGeoJobParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!=n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.datasetOverlay=null,this.mode=null,this.srcFields=null,this.overlayFields=null,this.output instanceof ao&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof lo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&gv(t.prototype,n),r&&gv(t,r),e}();function Sv(e){return(Sv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wv(e,t){return!t||"object"!==Sv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ov(e,t,n){return(Ov="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xv(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function xv(e){return(xv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cv(e,t){return(Cv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.OverlayGeoJobParameter=bv;var Pv=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=wv(this,xv(t).call(this,e,n))).url=be.urlPathAppend(r.url,"spatialanalyst/overlay"),r.CLASS_NAME="SuperMap.OverlayGeoJobsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cv(e,t)}(t,go),n=t,(r=[{key:"destroy",value:function(){Ov(xv(t.prototype),"destroy",this).call(this)}},{key:"getOverlayGeoJobs",value:function(){Ov(xv(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getOverlayGeoJob",value:function(e){Ov(xv(t.prototype),"getJobs",this).call(this,be.urlPathAppend(this.url,e))}},{key:"addOverlayGeoJob",value:function(e,n){Ov(xv(t.prototype),"addJob",this).call(this,this.url,e,bv,n)}}])&&_v(n.prototype,r),i&&_v(n,i),t}();function Tv(e){return(Tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ev(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kv(e,t){return!t||"object"!==Tv(t)&&"function"!=typeof t?Mv(e):t}function Mv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Av(e,t,n){return(Av="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lv(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Lv(e){return(Lv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jv(e,t){return(jv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.OverlayGeoJobsService=Pv;var Rv=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e?((n=kv(this,Lv(t).call(this,e))).returnContent=!0,n.bounds=null,be.extend(Mv(n),e),n.CLASS_NAME="SuperMap.QueryByBoundsParameters",n):kv(n)}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jv(e,t)}(t,ea),n=t,(r=[{key:"destroy",value:function(){Av(Lv(t.prototype),"destroy",this).call(this);this.returnContent=null,this.bounds&&(this.bounds=null)}}])&&Ev(n.prototype,r),i&&Ev(n,i),t}();function Nv(e){return(Nv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Iv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dv(e,t){return!t||"object"!==Nv(t)&&"function"!=typeof t?Fv(e):t}function Fv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bv(e,t,n){return(Bv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Uv(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Uv(e){return(Uv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gv(e,t){return(Gv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.QueryByBoundsParameters=Rv;var zv=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Dv(this,Uv(t).call(this,e,n))).returnContent=!1,r.format=i.GEOJSON,r.returnFeatureWithFieldCaption=!1,n&&be.extend(Fv(r),n),r.CLASS_NAME="SuperMap.QueryService",r.url?(n&&n.format&&(r.format=n.format.toUpperCase()),r.url=be.urlPathAppend(r.url,"queryResults"),r):Dv(r)}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gv(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){Bv(Uv(t.prototype),"destroy",this).call(this);this.returnContent=null,this.format=null}},{key:"processAsync",value:function(e){if(e instanceof ea){var t,n=this,r=null;n.returnContent=e.returnContent,t=n.getJsonParameters(e),n.returnContent?n.url=be.urlAppend(n.url,"returnContent="+n.returnContent):(r=e.returnCustomResult)&&(n.url=be.urlAppend(n.url,"returnCustomResult="+r)),n.returnFeatureWithFieldCaption=e.returnFeatureWithFieldCaption,n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){e=be.transformResult(e);var t=new Rn;if(e&&e.recordsets)for(var n=0,r=e.recordsets,o=r.length;n<o;n++)r[n].features&&(!0===this.returnFeatureWithFieldCaption&&r[n].features.map(function(e){return e.fieldNames=r[n].fieldCaptions,e}),this.format===i.GEOJSON&&(r[n].features=t.toGeoJSON(r[n].features)));this.events.triggerEvent("processCompleted",{result:e})}},{key:"getQueryParameters",value:function(e){return new ea({customParams:e.customParams,expectCount:e.expectCount,networkType:e.networkType,queryOption:e.queryOption,queryParams:e.queryParams,startRecord:e.startRecord,prjCoordSys:e.prjCoordSys,holdTime:e.holdTime})}}])&&Iv(n.prototype,r),o&&Iv(n,o),t}();function Vv(e){return(Vv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hv(e,t){return!t||"object"!==Vv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qv(e,t,n){return(qv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wv(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Wv(e){return(Wv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yv(e,t){return(Yv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.QueryService=zv;var Qv=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Hv(this,Wv(t).call(this,e,n))).CLASS_NAME="SuperMap.QueryByBoundsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yv(e,t)}(t,zv),n=t,(r=[{key:"destroy",value:function(){qv(Wv(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(!(e instanceof Rv))return null;var t,n="",r=e.bounds;return t=this.getQueryParameters(e),n+="'queryMode':'BoundsQuery','queryParameters':",n+=be.toJSON(t),n="{"+(n+=",'bounds': {'rightTop':{'y':"+r.top+",'x':"+r.right+"},'leftBottom':{'y':"+r.bottom+",'x':"+r.left+"}}")+"}"}}])&&Jv(n.prototype,r),i&&Jv(n,i),t}();function Xv(e){return(Xv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zv(e,t){return!t||"object"!==Xv(t)&&"function"!=typeof t?$v(e):t}function $v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eg(e,t,n){return(eg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tg(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function tg(e){return(tg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ng(e,t){return(ng=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.QueryByBoundsService=Qv;var rg=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e?((n=Zv(this,tg(t).call(this,e))).distance=0,n.geometry=null,n.isNearest=null,n.returnContent=!0,be.extend($v(n),e),n.CLASS_NAME="SuperMap.QueryByDistanceParameters",n):Zv(n)}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ng(e,t)}(t,ea),n=t,(r=[{key:"destroy",value:function(){eg(tg(t.prototype),"destroy",this).call(this);var e=this;e.returnContent=null,e.distance=null,e.isNearest=null,e.geometry&&(e.geometry.destroy(),e.geometry=null)}}])&&Kv(n.prototype,r),i&&Kv(n,i),t}();function ig(e){return(ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function og(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ag(e,t){return!t||"object"!==ig(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sg(e,t,n){return(sg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lg(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function lg(e){return(lg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ug(e,t){return(ug=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.QueryByDistanceParameters=rg;var cg=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ag(this,lg(t).call(this,e,n))).CLASS_NAME="SuperMap.QueryByDistanceService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ug(e,t)}(t,zv),n=t,(r=[{key:"destroy",value:function(){sg(lg(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof rg){var t="",n=this.getQueryParameters(e),r=Tn.fromGeometry(e.geometry);return t+=e.isNearest?"'queryMode':'FindNearest','queryParameters':":"'queryMode':'DistanceQuery','queryParameters':",t+=be.toJSON(n),t="{"+(t+=",'geometry':"+be.toJSON(r)+",'distance':"+e.distance)+"}"}}}])&&og(n.prototype,r),i&&og(n,i),t}();function fg(e){return(fg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pg(e,t){return!t||"object"!==fg(t)&&"function"!=typeof t?yg(e):t}function yg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dg(e,t,n){return(dg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mg(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function mg(e){return(mg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vg(e,t){return(vg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.QueryByDistanceService=cg;var gg=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e?((n=pg(this,mg(t).call(this,e))).returnContent=!0,n.geometry=null,n.spatialQueryMode=u.INTERSECT,be.extend(yg(n),e),n.CLASS_NAME="SuperMap.QueryByGeometryParameters",n):pg(n)}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vg(e,t)}(t,ea),n=t,(r=[{key:"destroy",value:function(){dg(mg(t.prototype),"destroy",this).call(this);this.returnContent=null,this.geometry=null,this.spatialQueryMode=null}}])&&hg(n.prototype,r),i&&hg(n,i),t}();function bg(e){return(bg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _g(e,t){return!t||"object"!==bg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wg(e,t,n){return(wg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Og(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Og(e){return(Og=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xg(e,t){return(xg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.QueryByGeometryParameters=gg;var Cg=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=_g(this,Og(t).call(this,e,n))).CLASS_NAME="SuperMap.QueryByGeometryService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xg(e,t)}(t,zv),n=t,(r=[{key:"destroy",value:function(){wg(Og(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof gg){var t,n="",r=e.geometry,i=Tn.fromGeometry(r);return t=this.getQueryParameters(e),n+="'queryMode':'SpatialQuery','queryParameters':",n="{"+(n+=be.toJSON(t)+",'geometry':"+be.toJSON(i)+",'spatialQueryMode':"+be.toJSON(e.spatialQueryMode))+"}"}}}])&&Sg(n.prototype,r),i&&Sg(n,i),t}();function Pg(e){return(Pg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eg(e,t){return!t||"object"!==Pg(t)&&"function"!=typeof t?kg(e):t}function kg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mg(e,t,n){return(Mg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ag(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ag(e){return(Ag=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lg(e,t){return(Lg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.QueryByGeometryService=Cg;var jg=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e?((n=Eg(this,Ag(t).call(this,e))).returnContent=!0,be.extend(kg(n),e),n.CLASS_NAME="SuperMap.QueryBySQLParameters",n):Eg(n)}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lg(e,t)}(t,ea),n=t,(r=[{key:"destroy",value:function(){Mg(Ag(t.prototype),"destroy",this).call(this);this.returnContent=null}}])&&Tg(n.prototype,r),i&&Tg(n,i),t}();function Rg(e){return(Rg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ng(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ig(e,t){return!t||"object"!==Rg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dg(e,t,n){return(Dg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fg(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Fg(e){return(Fg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bg(e,t){return(Bg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.QueryBySQLParameters=jg;var Ug=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ig(this,Fg(t).call(this,e,n))).CLASS_NAME="SuperMap.QueryBySQLService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bg(e,t)}(t,zv),n=t,(r=[{key:"destroy",value:function(){Dg(Fg(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof jg){var t,n="";return t=this.getQueryParameters(e),n+="'queryMode':'SqlQuery','queryParameters':",n="{"+(n+=be.toJSON(t))+"}"}}}])&&Ng(n.prototype,r),i&&Ng(n,i),t}();function Gg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.QueryBySQLService=Ug;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zg=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.sourceRoute=null,this.point=null,this.tolerance=null,this.isIgnoreGap=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.RouteCalculateMeasureParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.sourceRoute=null,e.point=null,e.tolerance&&(e.tolerance=null),e.isIgnoreGap&&(e.isIgnoreGap=!1)}}])&&Gg(t.prototype,n),r&&Gg(t,r),e}();function Vg(e){return(Vg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hg(e,t){return!t||"object"!==Vg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qg(e,t,n){return(qg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wg(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Wg(e){return(Wg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yg(e,t){return(Yg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.RouteCalculateMeasureParameters=zg;var Qg=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Hg(this,Wg(t).call(this,e,n))).CLASS_NAME="SuperMap.RouteCalculateMeasureService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yg(e,t)}(t,yi),n=t,(r=[{key:"destroy",value:function(){qg(Wg(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof zg){var t,n=this;t=n.getJsonParameters(e),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){return this.url=be.urlPathAppend(this.url,"geometry/calculatemeasure"),this.url=be.urlAppend(this.url,"returnContent=true"),be.toJSON(e)}}])&&Jg(n.prototype,r),i&&Jg(n,i),t}();function Xg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.RouteCalculateMeasureService=Qg;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Kg=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.sourceRoute=null,this.dataset=null,this.routeIDField=null,this.routeID=null,this.type=null,this.measure=null,this.offset=0,this.isIgnoreGap=!1,this.startMeasure=null,this.endMeasure=null;var n=t.sourceRoute,r={};if(n&&n instanceof Ce&&n.components){r.type=n.type,r.parts=n.parts;for(var i=[],o=0,a=n.components.length;o<a;o++)i=i.concat(n.components[o].components);r.points=i,t.sourceRoute=r}be.extend(this,t),this.CLASS_NAME="SuperMap.RouteLocatorParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.sourceRoute=null,e.type=null,e.measure=null,e.offset=0,e.isIgnoreGap=!1,e.startMeasure=null,e.endMeasure=null,e.dataset=null,e.routeID=null,e.routeIDField=null}}])&&Xg(t.prototype,n),r&&Xg(t,r),e}();function Zg(e){return(Zg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eb(e,t){return!t||"object"!==Zg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tb(e,t,n){return(tb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nb(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function nb(e){return(nb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rb(e,t){return(rb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.RouteLocatorParameters=Kg;var ib=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=eb(this,nb(t).call(this,e,n))).CLASS_NAME="SuperMap.RouteLocatorService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rb(e,t)}(t,yi),n=t,(r=[{key:"destroy",value:function(){tb(nb(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Kg){var t,n=this;t=n.getJsonParameters(e),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t="geometry/routelocator";return e.dataset&&(t="datasets/"+e.dataset+"/linearreferencing/routelocator",e.sourceRoute=null),this.url=be.urlPathAppend(this.url,t),this.url=be.urlAppend(this.url,"returnContent=true"),be.toJSON(e)}}])&&$g(n.prototype,r),i&&$g(n,i),t}();function ob(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.RouteLocatorService=ib;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ab=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fieldNames=null,this.fieldValues=null,this.geometry=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ServerFeature"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){var n=null;if(t)return(n=t.geometry)&&(n=Tn.fromJson(n)),new e({fieldNames:t.fieldNames,fieldValues:t.fieldValues,geometry:n})}}],(n=[{key:"destroy",value:function(){var e=this;e.fieldNames=null,e.fieldValues=null,e.geometry&&(e.geometry.destroy(),e.geometry=null)}},{key:"toFeature",value:function(){var e,t,n,r,i={},o=this;for(var a in e=o.fieldNames,t=o.fieldValues,e)i[e[a]]=t[a];return o.geometry&&(n=o.geometry.toGeometry()),r=new en(n,i),o.geometry&&o.geometry.id&&(r.fid=o.geometry.id),r}}])&&ob(t.prototype,n),r&&ob(t,r),e}();function sb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ServerFeature=ab;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var lb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.resourceID=null,this.tempLayerName=null,this.layerInfo=null,be.extend(this,t),this.CLASS_NAME="SuperMap.SetLayerInfoParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.resourceID=null,this.tempLayerName=null,this.layerInfo=null}}])&&sb(t.prototype,n),r&&sb(t,r),e}();function ub(e){return(ub="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hb(e,t,n){return(hb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pb(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function pb(e){return(pb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yb(e,t){return(yb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SetLayerInfoParameters=lb;var db=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,r=!(o=pb(t).call(this,e,n))||"object"!==ub(o)&&"function"!=typeof o?fb(i):o,n&&be.extend(fb(r),n),r.CLASS_NAME="SuperMap.SetLayerInfoService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yb(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){hb(pb(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"processAsync",value:function(e){if(e){var t=be.toJSON(e);this.request({method:"PUT",data:t,scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}}}])&&cb(n.prototype,r),i&&cb(n,i),t}();function mb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SetLayerInfoService=db;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var vb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.isTempLayers=null,this.resourceID=null,this.layersInfo=null,be.extend(this,t),this.CLASS_NAME="SuperMap.SetLayersInfoParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.isTempLayers=null,this.resourceID=null,this.layersInfo=null}}])&&mb(t.prototype,n),r&&mb(t,r),e}();function gb(e){return(gb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _b(e,t,n){return(_b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wb(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function wb(e){return(wb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ob(e,t){return(Ob=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SetLayersInfoParameters=vb;var xb=function(e){function t(e,n){var i,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(i=!(a=wb(t).call(this,e,n))||"object"!==gb(a)&&"function"!=typeof a?Sb(o):a).resourceID=null,i.isTempLayers=!1,n&&r.Util.extend(Sb(i),n),i.CLASS_NAME="SuperMap.SetLayersInfoService",i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ob(e,t)}(t,Jr),n=t,(i=[{key:"destroy",value:function(){_b(wb(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"processAsync",value:function(e){if(e){var t,n=[],r=this,i="";r.isTempLayers?(r.url=be.urlPathAppend(r.url,"tempLayersSet/"+r.resourceID),i="PUT"):(r.url=be.urlPathAppend(r.url,"tempLayersSet"),i="POST"),e.subLayers||(e.subLayers={layers:[]}),e.subLayers.layers||(e.subLayers.layers=[]);var o=e.subLayers.layers,a=o.length;for(var s in o){if("GRID"===o[s].ugcLayerType){var l={},u=o[s].colorDictionarys;for(var c in u){l[u[c].elevation]=u[c].color}}o[s].colorDictionary=l,delete o[s].colorDictionarys}for(var f=0;f<a;f++)o[f].toJsonObject?n.push(o[f].toJsonObject()):n.push(o[f]);(t=be.extend(t,e)).subLayers={layers:n},t.object=null;var h=be.toJSON([t]);r.request({method:i,data:h,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&bb(n.prototype,i),o&&bb(n,o),t}();function Cb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SetLayersInfoService=xb;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Pb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerStatusList=[],this.holdTime=15,this.resourceID=null,t&&be.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.layerStatusList=null,this.holdTime=null,this.resourceID=null}},{key:"toJSON",value:function(){var e="{";e+='"layers":[';for(var t=[],n=0,r=this.layerStatusList.length;n<r;n++)t.push(this.layerStatusList[n].toJSON());return e+=t,e+="]",e+="}"}}])&&Cb(t.prototype,n),r&&Cb(t,r),e}();function Tb(e){return(Tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mb(e,t,n){return(Mb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ab(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ab(e){return(Ab=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lb(e,t){return(Lb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SetLayerStatusParameters=Pb;var jb=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=Ab(t).call(this,e,n))||"object"!==Tb(o)&&"function"!=typeof o?kb(i):o).lastparams=null,r.mapUrl=e,n&&be.extend(kb(r),n),r.CLASS_NAME="SuperMap.SetLayerStatusService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lb(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){Mb(Ab(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"processAsync",value:function(e){if(e instanceof Pb){var t=this;if(t.url=t.mapUrl,null==e.resourceID)t.url=be.urlPathAppend(t.url,"tempLayersSet"),t.lastparams=e,t.request({method:"POST",scope:t,success:t.createTempLayerComplete,failure:t.serviceProcessFailed});else{t.url=be.urlPathAppend(t.url,"tempLayersSet/"+e.resourceID),t.url=be.urlAppend(t.url,"elementRemain=true&reference="+e.resourceID+"&holdTime="+e.holdTime.toString());var n="[{";n+='"type":"UGC",',null!=e.layerStatusList&&e.layerStatusList.length>0&&(n+='"subLayers":'+e.toJSON()),n+=',"visible":true,',n+='"name":"'+this.getMapName(this.mapUrl)+'"',n+="}]",t.request({method:"PUT",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}},{key:"createTempLayerComplete",value:function(e){(e=be.transformResult(e)).succeed&&(this.lastparams.resourceID=e.newResourceID),this.processAsync(this.lastparams)}},{key:"getMapName",value:function(e){var t=e;"/"===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1));var n=t.lastIndexOf("/");return t.substring(n+1,t.length)}},{key:"serviceProcessCompleted",value:function(e){null!=(e=be.transformResult(e))&&null!=this.lastparams&&(e.newResourceID=this.lastparams.resourceID),this.events.triggerEvent("processCompleted",{result:e})}}])&&Eb(n.prototype,r),i&&Eb(n,i),t}();function Rb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SetLayerStatusService=jb;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Nb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetQuery="",this.geometryQuery="",this.mode=u.CONTAIN,this.output=null,this.mappingParameters=null,be.extend(this,t),this.CLASS_NAME="SuperMap.SingleObjectQueryJobsParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.datasetQuery=null,this.geometryQuery=null,this.mode=null,this.output instanceof ao&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof lo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Rb(t.prototype,n),r&&Rb(t,r),e}();function Ib(e){return(Ib="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Db(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fb(e,t){return!t||"object"!==Ib(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bb(e,t,n){return(Bb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ub(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ub(e){return(Ub=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gb(e,t){return(Gb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SingleObjectQueryJobsParameter=Nb;var zb=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Fb(this,Ub(t).call(this,e,n))).url=be.urlPathAppend(r.url,"spatialanalyst/query"),r.CLASS_NAME="SuperMap.SingleObjectQueryJobsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gb(e,t)}(t,go),n=t,(r=[{key:"destroy",value:function(){Bb(Ub(t.prototype),"destroy",this).call(this)}},{key:"getQueryJobs",value:function(){Bb(Ub(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getQueryJob",value:function(e){Bb(Ub(t.prototype),"getJobs",this).call(this,be.urlPathAppend(this.url,e))}},{key:"addQueryJob",value:function(e,n){Bb(Ub(t.prototype),"addJob",this).call(this,this.url,e,Nb,n)}}])&&Db(n.prototype,r),i&&Db(n,i),t}();function Vb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SingleObjectQueryJobsService=zb;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Jb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.keyWord=null,this.returnPosition=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.StopQueryParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){be.reset(this)}}])&&Vb(t.prototype,n),r&&Vb(t,r),e}();function Hb(e){return(Hb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yb(e,t,n){return(Yb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qb(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Qb(e){return(Qb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xb(e,t){return(Xb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.StopQueryParameters=Jb;var Kb=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,r=!(o=Qb(t).call(this,e,n))||"object"!==Hb(o)&&"function"!=typeof o?Wb(i):o,n=n||{},be.extend(Wb(r),n),r.CLASS_NAME="SuperMap.StopQueryService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xb(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){Yb(Qb(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"processAsync",value:function(e){if(e instanceof Jb){var t=this;t.url=be.urlPathAppend(t.url,"stops/keyword/"+e.keyWord),t.request({method:"GET",params:{returnPosition:e.returnPosition},scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&qb(n.prototype,r),i&&qb(n,i),t}();function Zb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.StopQueryService=Kb;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.groupField="",this.attributeField="",this.statisticModes="",this.output=null,this.mappingParameters=null,be.extend(this,t),this.CLASS_NAME="SuperMap.SummaryAttributesJobsParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.groupField=null,this.attributeField=null,this.statisticModes=null,this.output instanceof ao&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof lo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Zb(t.prototype,n),r&&Zb(t,r),e}();function eS(e){return(eS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nS(e,t){return!t||"object"!==eS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rS(e,t,n){return(rS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iS(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function iS(e){return(iS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oS(e,t){return(oS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SummaryAttributesJobsParameter=$b;var aS=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=nS(this,iS(t).call(this,e,n))).url=be.urlPathAppend(r.url,"spatialanalyst/summaryattributes"),r.CLASS_NAME="SuperMap.SummaryAttributesJobsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oS(e,t)}(t,go),n=t,(r=[{key:"destroy",value:function(){rS(iS(t.prototype),"destroy",this).call(this)}},{key:"getSummaryAttributesJobs",value:function(){rS(iS(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryAttributesJob",value:function(e){rS(iS(t.prototype),"getJobs",this).call(this,be.urlPathAppend(this.url,e))}},{key:"addSummaryAttributesJob",value:function(e,n){rS(iS(t.prototype),"addJob",this).call(this,this.url,e,$b,n)}}])&&tS(n.prototype,r),i&&tS(n,i),t}();function sS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SummaryAttributesJobsService=aS;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var lS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes=te.AVERAGE,this.fields="",this.type=ne.SUMMARYMESH,this.output=null,this.mappingParameters=null,be.extend(this,t),this.CLASS_NAME="SuperMap.SummaryMeshJobParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"type"!==n?"output"!==n?("SUMMARYMESH"===e.type&&"regionDataset"!==n||"SUMMARYREGION"===e.type&&!r(["meshType","resolution","query"],n))&&(t.analyst=t.analyst||{},"query"===n&&e[n]?t.analyst[n]=e[n].toBBOX():t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):t.type=e[n]:(t.input=t.input||{},t.input[n]=e[n]);function r(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null,this.output instanceof ao&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof lo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&sS(t.prototype,n),r&&sS(t,r),e}();function uS(e){return(uS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fS(e,t){return!t||"object"!==uS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hS(e,t,n){return(hS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pS(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function pS(e){return(pS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yS(e,t){return(yS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SummaryMeshJobParameter=lS;var dS=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=fS(this,pS(t).call(this,e,n))).url=be.urlPathAppend(r.url,"spatialanalyst/aggregatepoints"),r.CLASS_NAME="SuperMap.SummaryMeshJobsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yS(e,t)}(t,go),n=t,(r=[{key:"destroy",value:function(){hS(pS(t.prototype),"destroy",this).call(this)}},{key:"getSummaryMeshJobs",value:function(){hS(pS(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryMeshJob",value:function(e){hS(pS(t.prototype),"getJobs",this).call(this,be.urlPathAppend(this.url,e))}},{key:"addSummaryMeshJob",value:function(e,n){hS(pS(t.prototype),"addJob",this).call(this,this.url,e,lS,n)}}])&&cS(n.prototype,r),i&&cS(n,i),t}();function mS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SummaryMeshJobsService=dS;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var vS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields="",this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=ee.METER,this.type=ne.SUMMARYMESH,this.output=null,this.mappingParameters=null,be.extend(this,t),this.CLASS_NAME="SuperMap.SummaryRegionJobParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"type"!==n&&"type"!==n?"output"!==n?("SUMMARYREGION"===e.type||"SUMMARYMESH"===e.type&&"regionDataset"!==n)&&(t.analyst=t.analyst||{},"query"===n&&e[n]?t.analyst[n]=e[n].toBBOX():t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):t.type=e[n]:(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.sumShape=null,this.regionDataset=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null,this.output instanceof ao&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof lo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&mS(t.prototype,n),r&&mS(t,r),e}();function gS(e){return(gS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function SS(e,t){return!t||"object"!==gS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _S(e,t,n){return(_S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wS(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function wS(e){return(wS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OS(e,t){return(OS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SummaryRegionJobParameter=vS;var xS=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=SS(this,wS(t).call(this,e,n))).url=be.urlPathAppend(r.url,"spatialanalyst/summaryregion"),r.CLASS_NAME="SuperMap.SummaryRegionJobsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OS(e,t)}(t,go),n=t,(r=[{key:"destroy",value:function(){_S(wS(t.prototype),"destroy",this).call(this)}},{key:"getSummaryRegionJobs",value:function(){_S(wS(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryRegionJob",value:function(e){_S(wS(t.prototype),"getJobs",this).call(this,be.urlPathAppend(this.url,e))}},{key:"addSummaryRegionJob",value:function(e,n){_S(wS(t.prototype),"addJob",this).call(this,this.url,e,vS,n)}}])&&bS(n.prototype,r),i&&bS(n,i),t}();function CS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SummaryRegionJobsService=xS;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var PS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.SupplyCenter"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){if(t)return new e({maxWeight:t.maxWeight,nodeID:t.nodeID,resourceValue:t.resourceValue,type:t.type})}}],(n=[{key:"destroy",value:function(){this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null}}])&&CS(t.prototype,n),r&&CS(t,r),e}();function TS(e){return(TS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ES(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kS(e,t){return!t||"object"!==TS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function MS(e,t,n){return(MS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=AS(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function AS(e){return(AS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LS(e,t){return(LS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SupplyCenter=PS;var jS=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=kS(this,AS(t).call(this,e,n))).CLASS_NAME="SuperMap.SurfaceAnalystService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LS(e,t)}(t,yi),n=t,(r=[{key:"destroy",value:function(){MS(AS(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Ha){var t,n=this;t=n.getJsonParameters(e),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t="",n={},r=this;if(e instanceof Za)r.url=be.urlPathAppend(r.url,"datasets/"+e.dataset+"/"+e.surfaceAnalystMethod.toLowerCase()),Za.toObject(e,n),t=be.toJSON(n);else{if(!(e instanceof nf))return;r.url=be.urlPathAppend(r.url,"geometry/"+e.surfaceAnalystMethod.toLowerCase()),t=be.toJSON(e)}return r.url=be.urlAppend(r.url,"returnContent=true"),t}}])&&ES(n.prototype,r),i&&ES(n,i),t}();function RS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SurfaceAnalystService=jS;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var NS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName="",this.planCurvatureName="",this.deleteExistResultDataset=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.TerrainCurvatureCalculationParameters")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"dataset"!==n&&(t[n]=e[n])}}],(n=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.zFactor=1,e.averageCurvatureName=null,e.profileCurvatureName=null,e.planCurvatureName=null,e.deleteExistResultDataset=!0}}])&&RS(t.prototype,n),r&&RS(t,r),e}();function IS(e){return(IS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function FS(e,t){return!t||"object"!==IS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function BS(e,t,n){return(BS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=US(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function US(e){return(US=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GS(e,t){return(GS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.TerrainCurvatureCalculationParameters=NS;var zS=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=FS(this,US(t).call(this,e,n))).CLASS_NAME="SuperMap.TerrainCurvatureCalculationService",r}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GS(e,t)}(t,yi),n=t,(i=[{key:"destroy",value:function(){BS(US(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t=this,n={};e instanceof NS&&(t.url=be.urlPathAppend(t.url,"datasets/"+e.dataset+"/terraincalculation/curvature")),NS.toObject(e,n);var i=r.Util.toJSON(n);t.url=be.urlAppend(t.url,"returnContent=true"),t.request({method:"POST",data:i,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&DS(n.prototype,i),o&&DS(n,o),t}();function VS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.TerrainCurvatureCalculationService=zS;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var JS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.color=new fn,this.end=0,this.start=0,this.visible=!0,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridRangeItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n.color=fn.fromJson(t.color),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.color&&(e.color.destroy(),e.color=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=be.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e}}])&&VS(t.prototype,n),r&&VS(t,r),e}();function HS(e){return(HS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function WS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YS(e,t,n){return(YS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=QS(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function QS(e){return(QS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XS(e,t){return(XS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThemeGridRangeItem=JS;var KS=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=QS(t).call(this,"GRIDRANGE",e))||"object"!==HS(i)&&"function"!=typeof i?WS(r):i).items=null,n.rangeMode=b.EQUALINTERVAL,n.rangeParameter=0,n.colorGradientType=_.YELLOW_RED,n.reverseColor=!1,e&&be.extend(WS(n),e),n.CLASS_NAME="SuperMap.ThemeGridRange",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&XS(e,t)}(t,cp),n=t,i=[{key:"fromObj",value:function(e){if(e){var n=new t;be.copy(n,e);var r=e.items,i=r?r.length:0;n.items=[];for(var o=0;o<i;o++)n.items.push(JS.fromObj(r[o]));return n}}}],(r=[{key:"destroy",value:function(){YS(QS(t.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var n in e.items)e.items[n].destroy(),e.items[n]=null;e.items=null}e.reverseColor=null,e.rangeMode=null,e.rangeParameter=null,e.colorGradientType=null}}])&&qS(n.prototype,r),i&&qS(n,i),t}();function ZS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeGridRange=KS;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $S=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.color=new fn,this.unique=null,this.visible=!0,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridUniqueItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){var n=new e;return be.copy(n,t),n.color=fn.fromJson(t.color),n}}],(n=[{key:"destroy",value:function(){var e=this;e.caption=null,e.unique=null,e.color&&(e.color.destroy(),e.color=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=be.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e}}])&&ZS(t.prototype,n),r&&ZS(t,r),e}();function e_(e){return(e_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r_(e,t,n){return(r_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function i_(e){return(i_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o_(e,t){return(o_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThemeGridUniqueItem=$S;var a_=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=i_(t).call(this,"GRIDUNIQUE",e))||"object"!==e_(i)&&"function"!=typeof i?n_(r):i).defaultcolor=new fn,n.items=null,e&&be.extend(n_(n),e),n.CLASS_NAME="SuperMap.ThemeGridUnique",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o_(e,t)}(t,cp),n=t,i=[{key:"fromObj",value:function(e){var n=new t,r=e.items,i=r?r.length:0;be.extend(n,e),n.items=[],n.defaultcolor=fn.fromJson(e.defaultcolor);for(var o=0;o<i;o++)n.items.push($S.fromObj(r[o]));return n}}],(r=[{key:"destroy",value:function(){r_(i_(t.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var n in e.items)e.items[n].destroy(),e.items[n]=null;e.items=null}e.defaultcolor&&(e.defaultcolor.destroy(),e.defaultcolor=null)}},{key:"toServerJSONObject",value:function(){var e={};if((e=be.copyAttributes(e,this)).defaultcolor&&e.defaultcolor.toServerJSONObject&&(e.defaultcolor=e.defaultcolor.toServerJSONObject()),e.items){for(var t=[],n=e.items.length,r=0;r<n;r++)t.push(e.items[r].toServerJSONObject());e.items=t}return e}}])&&t_(n.prototype,r),i&&t_(n,i),t}();function s_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeGridUnique=a_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var l_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.unique=null,this.offsetX=0,this.offsetY=0,this.visible=!0,this.style=new hp,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelUniqueItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.unique=null,e.caption=null,e.offsetX=null,e.offsetY=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}}])&&s_(t.prototype,n),r&&s_(t,r),e}();function u_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeLabelUniqueItem=l_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var c_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetNames=null,this.dataSourceNames=null,this.joinItems=null,this.themes=null,this.displayFilters=null,this.displayOrderBys=null,this.fieldValuesDisplayFilter=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;if(e.datasetNames=null,e.dataSourceNames=null,e.joinItems){for(var t=0,n=e.joinItems,r=n.length;t<r;t++)n[t].destroy();e.joinItems=null}if(e.themes){for(var i=0,o=e.themes,a=o.length;i<a;i++)o[i].destroy();e.themes=null}}}])&&u_(t.prototype,n),r&&u_(t,r),e}();function f_(e){return(f_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y_(e,t,n){return(y_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function d_(e){return(d_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m_(e,t){return(m_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThemeParameters=c_;var v_=function(e){function t(e,n){var i,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=!(a=d_(t).call(this,e,n))||"object"!==f_(a)&&"function"!=typeof a?p_(o):a,n&&r.Util.extend(p_(i),n),i.url=be.urlPathAppend(i.url,"tempLayersSet"),i.CLASS_NAME="SuperMap.ThemeService",i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m_(e,t)}(t,Jr),n=t,(i=[{key:"destroy",value:function(){y_(d_(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof c_){var t,n=this;t=n.getJsonParameters(e),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t,n="",r=null,i=null,o=null;n+="[{'type': 'UGC','subLayers': {'layers': [";for(var a=0;a<e.themes.length;a++){r=e.themes[a];var s=be.toJSON(r);if(n+="{'theme': "+(s=s.slice(0,-1))+"},'type': 'UGC','ugcLayerType': 'THEME',",(i=e.displayFilters)&&i.length>0&&(1===i.length?n+="'displayFilter':\""+i[0]+'",':n+="'displayFilter':\""+i[a]+'",'),(o=e.displayOrderBy)&&o.length>0&&(1===o.length?n+="'displayOrderBy':'"+o[0]+"',":n+="'displayOrderBy':'"+o[a]+"',"),(t=e.fieldValuesDisplayFilter)&&(n+="'fieldValuesDisplayFilter':"+be.toJSON(t)+","),e.joinItems&&e.joinItems.length>0&&e.joinItems[a]&&(n+="'joinItems':["+be.toJSON(e.joinItems[a])+"],"),e.datasetNames&&e.dataSourceNames){var l=e.datasetNames[a]?a:e.datasetNames.length-1,u=e.dataSourceNames[a]?a:e.dataSourceNames.length-1;n+="'datasetInfo': {'name': '"+e.datasetNames[l]+"','dataSourceName': '"+e.dataSourceNames[u]+"'}},"}else n+="},"}e.themes&&e.themes.length>0&&(n=n.substring(0,n.length-1)),n+="]},";var c=this.url.split("/");return n+="'name': '"+c[c.length-2]+"'}]"}}])&&h_(n.prototype,i),o&&h_(n,o),t}();function g_(e){return(g_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function __(e,t,n){return(__="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function w_(e){return(w_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O_(e,t){return(O_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThemeService=v_;var x_=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=w_(t).call(this,e,n))||"object"!==g_(o)&&"function"!=typeof o?S_(i):o).mode=null,n&&be.extend(S_(r),n),r.CLASS_NAME="SuperMap.ThiessenAnalystService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O_(e,t)}(t,yi),n=t,(r=[{key:"destroy",value:function(){__(w_(t.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},n=this;e instanceof ss?(n.mode="datasets",n.url=be.urlPathAppend(n.url,"datasets/"+e.dataset+"/thiessenpolygon"),ss.toObject(e,t)):e instanceof cf&&(n.mode="geometry",n.url=be.urlPathAppend(n.url,"geometry/thiessenpolygon"),cf.toObject(e,t));var r=be.toJSON(t);n.url=be.urlAppend(n.url,"returnContent=true"),n.request({method:"POST",data:r,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}])&&b_(n.prototype,r),i&&b_(n,i),t}();function C_(e){return(C_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E_(e,t,n){return(E_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function k_(e){return(k_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M_(e,t){return(M_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThiessenAnalystService=x_;var A_=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,r=!(o=k_(t).call(this,e,n))||"object"!==C_(o)&&"function"!=typeof o?T_(i):o,n&&be.extend(T_(r),n),r.CLASS_NAME="SuperMap.GeometryBatchAnalystService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M_(e,t)}(t,yi),n=t,(r=[{key:"processAsync",value:function(e){var t=this;t.url=be.urlPathAppend(t.url,"geometry/batchanalyst"),t.url=be.urlAppend(t.url,"returnContent=true&ignoreAnalystParam=true");var n=t._processParams(e),r=be.toJSON(n);t.request({method:"POST",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}},{key:"_processParams",value:function(e){var t=this;if(be.isArray(e)){var n=[];return e.map(function(e){return n.push(t._toJSON(e)),e}),n}}},{key:"_toJSON",value:function(e){var t={};if("buffer"===e.analystName)t.analystName="buffer",t.param={},Ki.toObject(e.param,t.param);else if("overlay"===e.analystName)t.analystName="overlay",t.param={},Qc.toObject(e.param,t.param);else if("interpolationDensity"===e.analystName)t.analystName="interpolationDensity",t.param={},Ed.toObject(e.param,t.param);else if("interpolationidw"===e.analystName)t.analystName="interpolationidw",t.param={},Ed.toObject(e.param,t.param);else if("interpolationRBF"===e.analystName)t.analystName="interpolationRBF",t.param={},Ed.toObject(e.param,t.param);else if("interpolationKriging"===e.analystName)t.analystName="interpolationKriging",t.param={},Ed.toObject(e.param,t.param);else{if("thiessenpolygon"!==e.analystName)return e;t.analystName="thiessenpolygon",t.param={},cf.toObject(e.param,t.param)}return t}},{key:"destroy",value:function(){E_(k_(t.prototype),"destroy",this).call(this)}}])&&P_(n.prototype,r),i&&P_(n,i),t}();function L_(e){return(L_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R_(e,t){return!t||"object"!==L_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function N_(e,t,n){return(N_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function I_(e){return(I_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D_(e,t){return(D_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GeometryBatchAnalystService=A_;var F_=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=R_(this,I_(t).call(this,e,n))).CLASS_NAME="SuperMap.TilesetsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D_(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){N_(I_(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(){if(this.url){var e=this;e.url=be.urlPathAppend(e.url,"tilesets"),e.request({method:"GET",scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}}])&&j_(n.prototype,r),i&&j_(n,i),t}();function B_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.TilesetsService=F_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var U_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetTopology="",this.tolerance="",this.rule=re.REGIONNOOVERLAP,this.output=null,this.mappingParameters=null,be.extend(this,t),this.CLASS_NAME="SuperMap.TopologyValidatorJobsParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.datasetTopology=null,this.tolerance=null,this.rule=null,this.output instanceof ao&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof lo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&B_(t.prototype,n),r&&B_(t,r),e}();function G_(e){return(G_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V_(e,t){return!t||"object"!==G_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J_(e,t,n){return(J_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=H_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function H_(e){return(H_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q_(e,t){return(q_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.TopologyValidatorJobsParameter=U_;var W_=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=V_(this,H_(t).call(this,e,n))).url=be.urlPathAppend(r.url,"spatialanalyst/topologyvalidator"),r.CLASS_NAME="SuperMap.TopologyValidatorJobsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q_(e,t)}(t,go),n=t,(r=[{key:"destroy",value:function(){J_(H_(t.prototype),"destroy",this).call(this)}},{key:"getTopologyValidatorJobs",value:function(){J_(H_(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getTopologyValidatorJob",value:function(e){J_(H_(t.prototype),"getJobs",this).call(this,be.urlPathAppend(this.url,e))}},{key:"addTopologyValidatorJob",value:function(e,n){J_(H_(t.prototype),"addJob",this).call(this,this.url,e,U_,n)}}])&&z_(n.prototype,r),i&&z_(n,i),t}();function Y_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.TopologyValidatorJobsService=W_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Q_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.lineID=null,this.lineName=null,this.lineAliasName=null,this.startStopIndex=null,this.startStopName=null,this.startStopAliasName=null,this.endStopIndex=null,this.endStopName=null,this.endStopAliasName=null,be.extend(this,t),this.CLASS_NAME="SuperMap.TransferLine"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){if(t)return new e({lineID:t.lineID,lineName:t.lineName,lineAliasName:t.lineAliasName,startStopIndex:t.startStopIndex,startStopName:t.startStopName,startStopAliasName:t.startStopAliasName,endStopIndex:t.endStopIndex,endStopName:t.endStopName,endStopAliasName:t.endStopAliasName})}}],(n=[{key:"destroy",value:function(){be.reset(this)}}])&&Y_(t.prototype,n),r&&Y_(t,r),e}();function X_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.TransferLine=Q_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var K_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.transferLines=null,this.points=null,be.extend(this,t),this.CLASS_NAME="SuperMap.TransferPathParameters"}var t,n,r;return t=e,r=[{key:"toJson",value:function(e){if(e)return be.toJSON(e)}}],(n=[{key:"destroy",value:function(){be.reset(this)}}])&&X_(t.prototype,n),r&&X_(t,r),e}();function Z_(e){return(Z_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ew(e,t){return!t||"object"!==Z_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tw(e,t,n){return(tw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nw(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function nw(e){return(nw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rw(e,t){return(rw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.TransferPathParameters=K_;var iw=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ew(this,nw(t).call(this,e,n))).CLASS_NAME="SuperMap.TransferPathService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rw(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){tw(nw(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof K_){var t,n=this;n.url=be.urlPathAppend(n.url,"path"),t={points:be.toJSON(e.points),transferLines:be.toJSON(e.transferLines)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&$_(n.prototype,r),i&&$_(n,i),t}();function ow(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.TransferPathService=iw;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var aw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.solutionCount=6,this.transferPreference=B.NONE,this.transferTactic=F.LESS_TIME,this.walkingRatio=null,this.points=!1,this.evadeLines=null,this.evadeStops=null,this.priorLines=null,this.priorStops=null,this.travelTime=null,be.extend(this,t),this.CLASS_NAME="SuperMap.TransferSolutionParameters"}var t,n,r;return t=e,r=[{key:"toJson",value:function(e){if(e)return be.toJSON(e)}}],(n=[{key:"destroy",value:function(){be.reset(this)}}])&&ow(t.prototype,n),r&&ow(t,r),e}();function sw(e){return(sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uw(e,t){return!t||"object"!==sw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cw(e,t,n){return(cw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fw(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function fw(e){return(fw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hw(e,t){return(hw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.TransferSolutionParameters=aw;var pw=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=uw(this,fw(t).call(this,e,n))).CLASS_NAME="SuperMap.TransferSolutionService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hw(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){cw(fw(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof aw){var t,n=this;n.url=be.urlPathAppend(n.url,"solutions"),t={points:be.toJSON(e.points),walkingRatio:e.walkingRatio,transferTactic:e.transferTactic,solutionCount:e.solutionCount,transferPreference:e.transferPreference},e.evadeLines&&(t.evadeLines=be.toJSON(e.evadeLines)),e.evadeStops&&(t.evadeStops=be.toJSON(e.evadeStops)),e.priorLines&&(t.priorLines=be.toJSON(e.priorLines)),e.priorStops&&(t.priorStops=be.toJSON(e.priorStops)),e.travelTime&&(t.travelTime=e.travelTime),n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&lw(n.prototype,r),i&&lw(n,i),t}();function yw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.TransferSolutionService=pw;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var dw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.edgeId="",this.fromNodeId="",this.toNodeId="",this.weightField="",this.edgeWeight="",be.extend(this,t),this.CLASS_NAME="SuperMap.UpdateEdgeWeightParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.edgeId=null,this.fromNodeId=null,this.toNodeId=null,this.weightField=null,this.edgeWeight=null}}])&&yw(t.prototype,n),r&&yw(t,r),e}();function mw(e){return(mw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gw(e,t){return!t||"object"!==mw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bw(e,t,n){return(bw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sw(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Sw(e){return(Sw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _w(e,t){return(_w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.UpdateEdgeWeightParameters=dw;var ww=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=gw(this,Sw(t).call(this,e,n))).CLASS_NAME="SuperMap.UpdateEdgeWeightService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_w(e,t)}(t,Ro),n=t,(r=[{key:"destroy",value:function(){bw(Sw(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof dw){var t=this,n=t.parse(e);t.url=be.urlPathAppend(t.url,n);var r=e.edgeWeight?e.edgeWeight:null;t.request({method:"PUT",scope:t,data:r,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}},{key:"parse",value:function(e){if(e){var t="";for(var n in e)if(""!==e[n]&&"edgeWeight"!==e[n])switch(n){case"edgeId":t+="/edgeweight/"+e[n];break;case"fromNodeId":t+="/fromnode/"+e[n];break;case"toNodeId":t+="/tonode/"+e[n];break;case"weightField":t+="/weightfield/"+e[n]}return t}}}])&&vw(n.prototype,r),i&&vw(n,i),t}();function Ow(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.UpdateEdgeWeightService=ww;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.nodeId="",this.fromEdgeId="",this.toEdgeId="",this.weightField="",this.turnNodeWeight="",be.extend(this,t),this.CLASS_NAME="SuperMap.UpdateTurnNodeWeightParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.nodeId=null,this.fromEdgeId=null,this.toEdgeId=null,this.weightField=null,this.turnNodeWeight=null}}])&&Ow(t.prototype,n),r&&Ow(t,r),e}();function Cw(e){return(Cw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tw(e,t){return!t||"object"!==Cw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ew(e,t,n){return(Ew="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kw(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function kw(e){return(kw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mw(e,t){return(Mw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.UpdateTurnNodeWeightParameters=xw;var Aw=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Tw(this,kw(t).call(this,e,n))).CLASS_NAME="SuperMap.UpdateTurnNodeWeightService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mw(e,t)}(t,Ro),n=t,(r=[{key:"destroy",value:function(){Ew(kw(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof xw){var t=this,n=t.parse(e);t.url=be.urlPathAppend(t.url,n);var r=e.turnNodeWeight?e.turnNodeWeight:null;t.request({method:"PUT",scope:t,data:r,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}},{key:"parse",value:function(e){if(e){var t="";for(var n in e)if(""!==e[n]&&"turnNodeWeight"!==e[n])switch(n){case"nodeId":t+="/turnnodeweight/"+e[n];break;case"fromEdgeId":t+="/fromedge/"+e[n];break;case"toEdgeId":t+="/toedge/"+e[n];break;case"weightField":t+="/weightfield/"+e[n]}return t}}}])&&Pw(n.prototype,r),i&&Pw(n,i),t}();function Lw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.UpdateTurnNodeWeightService=Aw;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var jw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.datasetName="",this.datasetVectorClip="",this.geometryClip="",this.mode=Z.CLIP,this.output=null,this.mappingParameters=null,be.extend(this,t),this.CLASS_NAME="SuperMap.VectorClipJobsParameter"}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.datasetVectorClip=null,this.geometryClip=null,this.mode=null,this.output instanceof ao&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof lo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Lw(t.prototype,n),r&&Lw(t,r),e}();function Rw(e){return(Rw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Iw(e,t){return!t||"object"!==Rw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dw(e,t,n){return(Dw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fw(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Fw(e){return(Fw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bw(e,t){return(Bw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.VectorClipJobsParameter=jw;var Uw=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Iw(this,Fw(t).call(this,e,n))).url=be.urlPathAppend(r.url,"spatialanalyst/vectorclip"),r.CLASS_NAME="SuperMap.VectorClipJobsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bw(e,t)}(t,go),n=t,(r=[{key:"destroy",value:function(){Dw(Fw(t.prototype),"destroy",this).call(this)}},{key:"getVectorClipJobs",value:function(){Dw(Fw(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getVectorClipJob",value:function(e){Dw(Fw(t.prototype),"getJobs",this).call(this,be.urlPathAppend(this.url,e))}},{key:"addVectorClipJob",value:function(e,n){Dw(Fw(t.prototype),"addJob",this).call(this,this.url,e,jw,n)}}])&&Nw(n.prototype,r),i&&Nw(n,i),t}();function Gw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.VectorClipJobsService=Uw;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type=null,be.extend(this,t),this.CLASS_NAME="SuperMap.RasterFunctionParameter"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.type=null}}])&&Gw(t.prototype,n),r&&Gw(t,r),e}();function Vw(e){return(Vw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qw(e,t,n){return(qw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ww(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ww(e){return(Ww=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yw(e,t){return(Yw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.RasterFunctionParameter=zw;var Qw=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Ww(t).call(this,e))||"object"!==Vw(i)&&"function"!=typeof i?Hw(r):i).redIndex=0,n.nirIndex=1,n.colorMap="0:ffffe5ff;0.1:f7fcb9ff;0.2:d9f0a3ff;0.3:addd8eff;0.4:78c679ff;0.5:41ab5dff;0.6:238443ff;0.7:006837ff;1:004529ff",n.type=se.NDVI,be.extend(Hw(n),e),n.CLASS_NAME="SuperMap.NDVIParameter",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yw(e,t)}(t,zw),n=t,(r=[{key:"destroy",value:function(){qw(Ww(t.prototype),"destroy",this).call(this),this.redIndex=null,this.nirIndex=null,this.colorMap=null}},{key:"toJSON",value:function(){return{redIndex:this.redIndex,nirIndex:this.nirIndex,colorMap:this.colorMap,type:this.type}}}])&&Jw(n.prototype,r),i&&Jw(n,i),t}();function Xw(e){return(Xw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $w(e,t,n){return($w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=eO(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function eO(e){return(eO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tO(e,t){return(tO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.NDVIParameter=Qw;var nO=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=eO(t).call(this,e))||"object"!==Xw(i)&&"function"!=typeof i?Zw(r):i).altitude=45,n.azimuth=315,n.zFactor=1,n.type=se.HILLSHADE,be.extend(Zw(n),e),n.CLASS_NAME="SuperMap.HillshadeParameter",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tO(e,t)}(t,zw),n=t,(r=[{key:"destroy",value:function(){$w(eO(t.prototype),"destroy",this).call(this),this.altitude=null,this.azimuth=null,this.zFactor=null}},{key:"toJSON",value:function(){return{altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,type:this.type}}}])&&Kw(n.prototype,r),i&&Kw(n,i),t}();function rO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.HillshadeParameter=nO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var iO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobCustomItems",be.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.name=null,this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={name:this.name};return this.title&&(e.title=this.title),this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),be.toJSON(e)}}])&&rO(t.prototype,n),r&&rO(t,r),e}();function oO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.WebPrintingJobCustomItems=iO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var aO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobImage",be.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={};return this.picAsUrl&&(e.picAsUrl=this.picAsUrl),this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),be.toJSON(e)}}])&&oO(t.prototype,n),r&&oO(t,r),e}();function sO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.WebPrintingJobImage=aO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var lO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.layerType=null,this.url=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayers",be.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.name=null,this.layerType=null,this.url=null}}])&&sO(t.prototype,n),r&&sO(t,r),e}();function uO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.WebPrintingJobLayers=lO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var cO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers=null,this.customItems=null,this.CLASS_NAME="SuperMap.WebPrintingJobLegendOptions",be.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers instanceof lO&&(this.layers.destroy(),this.layers=null),this.customItems instanceof iO&&(this.customItems.destroy(),this.customItems=null)}},{key:"toJSON",value:function(){var e={title:this.title||""};return this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64?e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,""):this.customItems&&(e.customItems=this.customItems),be.toJSON(e)}}])&&uO(t.prototype,n),r&&uO(t,r),e}();function fO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.WebPrintingJobLegendOptions=cO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var hO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.center=null,this.scale=null,this.layerNames=null,this.image=null,this.layers=null,this.CLASS_NAME="SuperMap.WebPrintingJobLittleMapOptions",be.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.center=null,this.scale=null,this.layerNames=null,this.image instanceof aO&&(this.image.destroy(),this.image=null),this.layers instanceof lO&&(this.layers.destroy(),this.layers=null)}},{key:"toJSON",value:function(){var e={scale:this.scale,center:this.center};return this.layerNames?e.layerNames=this.layerNames:this.layers&&(e.layers=this.layers),this.image&&(e.image=this.image),be.toJSON(e)}}])&&fO(t.prototype,n),r&&fO(t,r),e}();function pO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.WebPrintingJobLittleMapOptions=hO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var yO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobNorthArrowOptions",be.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var e={};return this.picAsUrl?e.picAsUrl=this.picAsUrl:this.picAsBase64&&(e.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),be.toJSON(e)}}])&&pO(t.prototype,n),r&&pO(t,r),e}();function dO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.WebPrintingJobNorthArrowOptions=yO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var mO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null,this.CLASS_NAME="SuperMap.WebPrintingJobScaleBarOptions",be.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null}},{key:"toJSON",value:function(){var e={scaleText:this.scaleText||"",type:this.type||"BAR",intervals:this.intervals||"",unit:this.unit||"METER"};return this.orientation&&(e.orientation=this.orientation),be.toJSON(e)}}])&&dO(t.prototype,n),r&&dO(t,r),e}();function vO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.WebPrintingJobScaleBarOptions=mO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var gO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=null,this.url=null,this.token=null,this.value=null,this.CLASS_NAME="SuperMap.WebPrintingJobContent",be.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.type="WEBMAP",this.url=null,this.token=null,this.value=null}},{key:"toJSON",value:function(){var e={type:this.type};return this.token&&(e.token=this.token),this.url?e.url=this.url:this.value&&(e.value=this.value),be.toJSON(e)}}])&&vO(t.prototype,n),r&&vO(t,r),e}();function bO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.WebPrintingJobContent=gO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var SO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.scaleBarOptions=null,this.northArrowOptions=null,this.littleMapOptions=null,this.legendOptions=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayoutOptions",be.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.scaleBarOptions instanceof mO&&(this.scaleBarOptions.destroy(),this.scaleBarOptions=null),this.northArrowOptions instanceof yO&&(this.northArrowOptions.destroy(),this.northArrowOptions=null),this.littleMapOptions instanceof hO&&(this.littleMapOptions.destroy(),this.littleMapOptions=null),this.legendOptions instanceof cO&&(this.legendOptions.destroy(),this.legendOptions=null)}},{key:"toJSON",value:function(){var e={templateName:this.templateName,title:this.title,subTitle:this.subTitle,author:this.author,copyright:this.copyright};return this.scaleBarOptions&&(e.scaleBarOptions=this.scaleBarOptions),this.northArrowOptions&&(e.northArrowOptions=this.northArrowOptions),this.littleMapOptions&&(e.littleMapOptions=this.littleMapOptions),this.legendOptions&&(e.legendOptions=this.legendOptions),be.toJSON(e)}}])&&bO(t.prototype,n),r&&bO(t,r),e}();function _O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.WebPrintingJobLayoutOptions=SO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var wO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.format=null,this.dpi=96,this.scale=null,this.rotation=null,this.center=null,this.CLASS_NAME="SuperMap.WebPrintingJobExportOptions",be.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.format=null,this.dpi=null,this.scale=null,this.rotation=null,this.center=null,this.outputSize=null}},{key:"toJSON",value:function(){var e={format:this.format||"PDF",dpi:this.dpi,scale:this.scale,center:this.center};return this.rotation&&(e.rotation=this.rotation),this.outputSize&&(e.outputSize=this.outputSize),be.toJSON(e)}}])&&_O(t.prototype,n),r&&_O(t,r),e}();function OO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.WebPrintingJobExportOptions=wO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.content=null,this.layoutOptions=null,this.exportOptions=null,be.extend(this,t),this.CLASS_NAME="SuperMap.WebPrintingJobParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.content instanceof gO&&(this.content.destroy(),this.content=null),this.layoutOptions instanceof SO&&(this.layoutOptions.destroy(),this.layoutOptions=null),this.exportOptions instanceof wO&&(this.exportOptions.destroy(),this.exportOptions=null)}}])&&OO(t.prototype,n),r&&OO(t,r),e}();function CO(e){return(CO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function TO(e,t){return!t||"object"!==CO(t)&&"function"!=typeof t?EO(e):t}function EO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kO(e,t,n){return(kO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MO(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function MO(e){return(MO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AO(e,t){return(AO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.WebPrintingJobParameters=xO;var LO=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=TO(this,MO(t).call(this,e,n)),n&&be.extend(EO(r),n),r.CLASS_NAME="SuperMap.WebPrintingService",r.url?r:TO(r)}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AO(e,t)}(t,Jr),n=t,(r=[{key:"destroy",value:function(){kO(MO(t.prototype),"destroy",this).call(this)}},{key:"createWebPrintingJob",value:function(e){if(e){e.layoutOptions&&e.layoutOptions.legendOptions&&(!e.layoutOptions.legendOptions.title&&(e.layoutOptions.legendOptions.title=""),e.layoutOptions.legendOptions.picAsBase64=e.layoutOptions.legendOptions.picAsBase64&&e.layoutOptions.legendOptions.picAsBase64.replace(/^data:.+;base64,/,""),e.layoutOptions.legendOptions.customItems&&e.layoutOptions.legendOptions.customItems.hasOwnProperty("picAsBase64")&&(e.layoutOptions.legendOptions.customItems.picAsBase64=e.layoutOptions.legendOptions.customItems.picAsBase64.replace(/^data:.+;base64,/,"")));var t=this;t.request({url:t._processUrl("jobs"),method:"POST",data:be.toJSON(e),scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}},{key:"getPrintingJob",value:function(e){var t=this,n=t._processUrl("jobs/".concat(e));t.request({url:n,method:"GET",scope:t,success:function(e){t.rollingProcess(e,n)},failure:t.serviceProcessFailed})}},{key:"getPrintingJobResult",value:function(e){var t=this;t.request({url:t._processUrl("jobs/".concat(e,"/result")),method:"GET",scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}},{key:"getLayoutTemplates",value:function(){var e=this;e.request({url:e._processUrl("layouts"),method:"GET",scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}},{key:"rollingProcess",value:function(e,t){var n=this;if(e)var r=setInterval(function(){n.request({url:t,method:"GET",scope:n,success:function(e){switch(e.status){case"FINISHED":clearInterval(r),n.serviceProcessCompleted(e);break;case"ERROR":clearInterval(r),n.serviceProcessFailed(e);break;case"RUNNING":n.events.triggerEvent("processRunning",e)}},failure:n.serviceProcessFailed})},1e3)}},{key:"_processUrl",value:function(e){return e?be.urlPathAppend(this.url,e):this.url}}])&&PO(n.prototype,r),i&&PO(n,i),t}();r.WebPrintingService=LO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var jO=r.ServiceStatus={DOES_NOT_INVOLVE:"DOES_NOT_INVOLVE",PUBLISH_FAILED:"PUBLISH_FAILED",PUBLISHED:"PUBLISHED",PUBLISHING:"PUBLISHING",UNPUBLISHED:"UNPUBLISHED",UNPUBLISHED_FAILED:"UNPUBLISHED_FAILED"},RO=r.DataItemType={AUDIO:"AUDIO",COLOR:"COLOR",COLORSCHEME:"COLORSCHEME",CSV:"CSV",EXCEL:"EXCEL",FILLSYMBOL:"FILLSYMBOL",IMAGE:"IMAGE",LAYERTEMPLATE:"LAYERTEMPLATE",LAYOUTTEMPLATE:"LAYOUTTEMPLATE",LINESYMBOL:"LINESYMBOL",MAPTEMPLATE:"MAPTEMPLATE",MARKERSYMBOL:"MARKERSYMBOL",MBTILES:"MBTILES",PHOTOS:"PHOTOS",SHP:"SHP",SMTILES:"SMTILES",SVTILES:"SVTILES",THEMETEMPLATE:"THEMETEMPLATE",TPK:"TPK",UDB:"UDB",UGCV5:"UGCV5",UNKNOWN:"UNKNOWN",VIDEO:"VIDEO",WORKENVIRONMENT:"WORKENVIRONMENT",WORKSPACE:"WORKSPACE"},NO=r.DataItemOrderBy={FILENAME:"FILENAME",ID:"ID",LASTMODIFIEDTIME:"LASTMODIFIEDTIME",NICKNAME:"NICKNAME",SERVICESTATUS:"SERVICESTATUS",SIZE:"SIZE",STATUS:"STATUS",TYPE:"TYPE",UPDATETIME:"UPDATETIME",USERNAME:"USERNAME"},IO=r.FilterField={LINKPAGE:"LINKPAGE",MAPTITLE:"MAPTITLE",NICKNAME:"NICKNAME",RESTITLE:"RESTITLE",USERNAME:"USERNAME"};function DO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var FO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},be.extend(this,t),this.serverType=o.ONLINE,this.CLASS_NAME="SuperMap.OnlineServiceBase"}var t,n,r;return t=e,(n=[{key:"request",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t=this.createCredentialUrl(t),r.crossOrigin=this.options.crossOrigin,r.headers=this.options.headers,tr.commit(e,t,n,r).then(function(e){return e.json()})}},{key:"createCredentialUrl",value:function(e){var t=e,n=this.getCredential();if(n){var r="key="+n,i=t.substring(t.length-1,t.length);t.indexOf("?")>-1&&"?"===i?t+=r:t.indexOf("?")>-1&&"?"!==i?t+="&"+r:t+="?"+r}return t}},{key:"getCredential",value:function(){}}])&&DO(t.prototype,n),r&&DO(t,r),e}();function BO(e){return(BO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GO(e){return(GO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VO(e,t){return(VO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.OnlineServiceBase=FO;var JO=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,r=!(o=GO(t).call(this,e))||"object"!==BO(o)&&"function"!=typeof o?zO(i):o,n=n||{},r.MD5=null,r.type=null,r.userName=null,r.fileName=null,r.size=null,r.serviceStatus=null,r.serviceId=null,r.id=null,r.lastModfiedTime=null,r.status=null,r.storageId=null,r.publishInfo=null,r.authorizeSetting=null,r.nickname=null,r.tags=[],r.description=null,r.dataItemServices=null,r.coordType=null,r.dataCheckResult=null,r.dataMetaInfo=null,r.thumbnail=null,be.extend(zO(r),n),r.id&&(r.serviceUrl=e+"/"+r.id),r.CLASS_NAME="SuperMap.OnlineData",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VO(e,t)}(t,FO),n=t,(r=[{key:"load",value:function(){if(this.serviceUrl){var e=this;return e.request("GET",this.serviceUrl).then(function(t){be.extend(e,t)})}}},{key:"getPublishedServices",value:function(){return this.dataItemServices}},{key:"getAuthorizeSetting",value:function(){return this.authorizeSetting}}])&&UO(n.prototype,r),i&&UO(n,i),t}();function HO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.OnlineData=JO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var qO=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootUrl="https://www.supermapol.com",this.webUrl=this.rootUrl+"/web";var t=this.webUrl+"/mycontent";this.mDatasUrl=t+"/datas",this.CLASS_NAME="SuperMap.Online"}var t,n,r;return t=e,(n=[{key:"load",value:function(){return tr.get(this.rootUrl).then(function(e){return e})}},{key:"login",value:function(){rr.loginOnline(this.rootUrl,!0)}},{key:"queryDatas",value:function(e){var t=this,n=t.mDatasUrl;return e&&(e=e.toJSON()),tr.get(n,e).then(function(e){if(e&&e.content&&!(e.content.length<1)){for(var n=[],r=e.content,i=r.length,o=0;o<i;o++){var a=r[o],s=new JO(t.mDatasUrl,a);n.push(s)}return n}})}}])&&HO(t.prototype,n),r&&HO(t,r),e}();function WO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Online=qO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var YO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.userNames=null,this.types=null,this.fileName=null,this.serviceStatuses=null,this.serviceId=null,this.ids=null,this.keywords=null,this.orderBy=null,this.tags=null,this.filterFields=null,be.extend(this,t),this.CLASS_NAME="SuperMap.OnlineQueryDatasParameter"}var t,n,r;return t=e,(n=[{key:"toJSON",value:function(){var e=this,t={types:e.types,fileName:e.fileName,serviceStatuses:e.serviceStatuses,serviceId:e.serviceId,ids:e.ids,keywords:e.keywords,orderBy:e.orderBy,tags:e.tags,filterFields:e.filterFields};for(var n in t)null==t[n]&&delete t[n];return t}}])&&WO(t.prototype,n),r&&WO(t,r),e}();function QO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.OnlineQueryDatasParameter=YO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var XO=function(){function e(t){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.serviceIds=null,this.clientType=X.SERVER,this.limitation=null,be.extend(this,t),this.CLASS_NAME="SuperMap.KeyServiceParameter"}var t,n,r;return t=e,(n=[{key:"toJSON",value:function(){return{name:this.name,serviceIds:this.serviceIds,clientType:this.clientType,limitation:this.limitation}}}])&&QO(t.prototype,n),r&&QO(t,r),e}();r.KeyServiceParameter=XO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var KO=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.server=null,this.tokenServiceUrl=null,this.keyServiceUrl=null,be.extend(this,n),this.CLASS_NAME="SuperMap.ServerInfo",this.type=this.type||o.ISERVER,this.server||console.error("server url require is not  undefined");var r="/services/security/tokens";this.type===o.ISERVER&&this.server.indexOf("iserver")<0&&(r="/iserver"+r),this.tokenServiceUrl||(this.tokenServiceUrl=be.urlPathAppend(this.server,r)),this.keyServiceUrl||(this.type===o.IPORTAL?this.keyServiceUrl=be.urlPathAppend(this.server,"/web/mycontent/keys/register"):this.type===o.ONLINE&&(this.keyServiceUrl=be.urlPathAppend(this.server,"/web/mycontent/keys")))};function ZO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ServerInfo=KO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $O=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userName=null,this.password=null,this.clientType=X.NONE,this.ip=null,this.referer=null,this.expiration=60,be.extend(this,t),this.CLASS_NAME="SuperMap.TokenServiceParameter"}var t,n,r;return t=e,(n=[{key:"toJSON",value:function(){return{userName:this.userName,password:this.password,clientType:this.clientType,ip:this.ip,referer:this.referer,expiration:this.expiration}}}])&&ZO(t.prototype,n),r&&ZO(t,r),e}();r.TokenServiceParameter=$O;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ex=n(10),tx=n.n(ex);function nx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var rx=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=n||{},this.url=t,this.client=new tx.a.Client({host:this.url}),this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=new Ht(this,null,this.EVENT_TYPES),this.eventListeners=null,be.extend(this,n),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)}var t,n,r;return t=e,(n=[{key:"setGeoFence",value:function(e){this.geoFence=e}},{key:"bulk",value:function(e,t){return this.client.bulk(e,t)}},{key:"clearScroll",value:function(e,t){return this.client.clearScroll(e,t)}},{key:"count",value:function(e,t){return this.client.count(e,t)}},{key:"create",value:function(e,t){return this.client.create(e,t)}},{key:"delete",value:function(e,t){return this.client.delete(e,t)}},{key:"deleteByQuery",value:function(e,t){return this.client.deleteByQuery(e,t)}},{key:"deleteScript",value:function(e,t){return this.client.deleteScript(e,t)}},{key:"deleteTemplate",value:function(e,t){return this.client.deleteTemplate(e,t)}},{key:"exists",value:function(e,t){return this.client.exists(e,t)}},{key:"existsSource",value:function(e,t){return this.client.existsSource(e,t)}},{key:"explain",value:function(e,t){return this.client.explain(e,t)}},{key:"fieldCaps",value:function(e,t){return this.client.fieldCaps(e,t)}},{key:"get",value:function(e,t){return this.client.get(e,t)}},{key:"getScript",value:function(e,t){return this.client.getScript(e,t)}},{key:"getSource",value:function(e,t){return this.client.getSource(e,t)}},{key:"getTemplate",value:function(e,t){return this.client.getTemplate(e,t)}},{key:"index",value:function(e,t){return this.client.index(e,t)}},{key:"info",value:function(e,t){return this.client.info(e,t)}},{key:"mget",value:function(e,t){return this.client.mget(e,t)}},{key:"msearch",value:function(e,t){var n=this;return n.client.msearch(e).then(function(e){return n._update(e.responses,t),e},function(e){return t(e),n.events.triggerEvent("error",{error:e}),e})}},{key:"msearchTemplate",value:function(e,t){return this.client.msearchTemplate(e,t)}},{key:"mtermvectors",value:function(e,t){return this.client.mtermvectors(e,t)}},{key:"ping",value:function(e,t){return this.client.ping(e,t)}},{key:"putScript",value:function(e,t){return this.client.putScript(e,t)}},{key:"putTemplate",value:function(e,t){return this.client.putTemplate(e,t)}},{key:"reindex",value:function(e,t){return this.client.reindex(e,t)}},{key:"reindexRessrottle",value:function(e,t){return this.client.reindexRessrottle(e,t)}},{key:"renderSearchTemplate",value:function(e,t){return this.client.renderSearchTemplate(e,t)}},{key:"scroll",value:function(e,t){return this.client.scroll(e,t)}},{key:"search",value:function(e,t){var n=this;return n.client.search(e).then(function(e){return n._update(e.responses,t),e},function(e){return t(e),n.events.triggerEvent("error",{error:e}),e})}},{key:"searchShards",value:function(e,t){return this.client.searchShards(e,t)}},{key:"searchTemplate",value:function(e,t){return this.client.searchTemplate(e,t)}},{key:"suggest",value:function(e,t){return this.client.suggest(e,t)}},{key:"termvectors",value:function(e,t){return this.client.termvectors(e,t)}},{key:"update",value:function(e,t){return this.client.update(e,t)}},{key:"updateByQuery",value:function(e,t){return this.client.updateByQuery(e,t)}},{key:"_update",value:function(e,t){var n=this;e&&(n.data=e,n.openGeoFence&&n.geoFence&&n._validateDatas(e),n.events.triggerEvent("change",{data:n.data}),n.change?n.change&&n.change(e):t&&t(void 0,{responses:e}))}},{key:"_validateDatas",value:function(e){if(e){e instanceof Array||(e=[e]);var t,n=e.length;for(t=0;t<n;t++)this._validateData(e[t])}}},{key:"_validateData",value:function(e){var t=this;e.hits.hits.map(function(n){var r=n._source,i=t._getMeterPerMapUnit(t.geoFence.unit),o=t.geoFence.center[0]*i,a=t.geoFence.center[1]*i,s=r.x*i,l=r.y*i;return t._distance(s,l,o,a)>t.geoFence.radius&&(t.outOfGeoFence&&t.outOfGeoFence(e),t.events.triggerEvent("outOfGeoFence",{data:e})),n})}},{key:"_distance",value:function(e,t,n,r){return Math.sqrt((e-n)*(e-n)+(t-r)*(t-r))}},{key:"_getMeterPerMapUnit",value:function(e){var t;return"meter"===e?t=1:"degree"===e&&(t=2*Math.PI*6378137/360),t}}])&&nx(t.prototype,n),r&&nx(t,r),e}();
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function ix(e){return(ix="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ox(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ElasticSearch=rx;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ax=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Util"}var t,n,r;return t=e,(n=[{key:"clone",value:function(e){var t=this.BUILTIN_OBJECT;if("object"==ix(e)&&null!==e){var n=e;if(e instanceof Array){n=[];for(var r=0,i=e.length;r<i;r++)n[r]=this.clone(e[r])}else if(!t[Object.prototype.toString.call(e)])for(var o in n={},e)e.hasOwnProperty(o)&&(n[o]=this.clone(e[o]));return n}return e}},{key:"mergeItem",value:function(e,t,n,r){var i=this.BUILTIN_OBJECT;t.hasOwnProperty(n)&&("object"!=ix(e[n])||i[Object.prototype.toString.call(e[n])]?!r&&n in e||(e[n]=t[n]):this.merge(e[n],t[n],r))}},{key:"merge",value:function(e,t,n){for(var r in t)this.mergeItem(e,t,r,n);return e}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(e,t){var n,r=this._canvas,i=this._pixelCtx,o=this._width,a=this._height,s=this._offsetX,l=this._offsetY;e+s>o&&(o=e+s+100,r.width=o,n=!0),t+l>a&&(a=t+l+100,r.height=a,n=!0),e<-s&&(o+=s=100*Math.ceil(-e/100),r.width=o,n=!0),t<-l&&(a+=l=100*Math.ceil(-t/100),r.height=a,n=!0),n&&i.translate(s,l)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}},{key:"inherits",value:function(e,t){var n=e.prototype;function r(){}for(var i in r.prototype=t.prototype,e.prototype=new r,n)e.prototype[i]=n[i];e.constructor=e}}])&&ox(t.prototype,n),r&&ox(t,r),e}();function sx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var lx=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.util=new ax,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Color"}var t,n,r;return t=e,(n=[{key:"customPalette",value:function(e){this.palette=e}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(e,t){return e|=0,(t=t||this.palette)[e%t.length]}},{key:"customHighlight",value:function(e){this.highlightColor=e}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(e,t,n,r,i,o,a){var s=this.util;this._ctx||(this._ctx=s.getContext());for(var l=this._ctx.createRadialGradient(e,t,n,r,i,o),u=0,c=a.length;u<c;u++)l.addColorStop(a[u][0],a[u][1]);return l.__nonRecursion=!0,l}},{key:"getLinearGradient",value:function(e,t,n,r,i){var o=this.util;this._ctx||(this._ctx=o.getContext());for(var a=this._ctx.createLinearGradient(e,t,n,r),s=0,l=i.length;s<l;s++)a.addColorStop(i[s][0],i[s][1]);return a.__nonRecursion=!0,a}},{key:"getStepColors",value:function(e,t,n){e=this.toRGBA(e),t=this.toRGBA(t),e=this.getData(e);for(var r=[],i=((t=this.getData(t))[0]-e[0])/n,o=(t[1]-e[1])/n,a=(t[2]-e[2])/n,s=(t[3]-e[3])/n,l=0,u=e[0],c=e[1],f=e[2],h=e[3];l<n;l++)r[l]=this.toColor([this.adjust(Math.floor(u),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(f),[0,255]),h.toFixed(4)-0],"rgba"),u+=i,c+=o,f+=a,h+=s;return u=t[0],c=t[1],f=t[2],h=t[3],r[l]=this.toColor([u,c,f,h],"rgba"),r}},{key:"getGradientColors",value:function(e,t){var n=[],r=e.length;if(void 0===t&&(t=20),1===r)n=this.getStepColors(e[0],e[0],t);else if(r>1)for(var i=0,o=r-1;i<o;i++){var a=this.getStepColors(e[i],e[i+1],t);i<o-1&&a.pop(),n=n.concat(a)}return n}},{key:"toColor",value:function(e,t){if(t=t||"rgb",e&&(3===e.length||4===e.length)){if(e=this.map(e,function(e){return e>1?Math.ceil(e):e}),t.indexOf("hex")>-1)return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1);if(t.indexOf("hs")>-1){var n=this.map(e.slice(1,3),function(e){return e+"%"});e[1]=n[0],e[2]=n[1]}return t.indexOf("a")>-1?(3===e.length&&e.push(1),e[3]=this.adjust(e[3],[0,1]),t+"("+e.slice(0,4).join(",")+")"):t+"("+e.slice(0,3).join(",")+")"}}},{key:"toArray",value:function(e){(e=this.trim(e)).indexOf("rgba")<0&&(e=this.toRGBA(e));var t=[],n=0;return e.replace(/[\d.]+/g,function(e){n<3?e|=0:e=+e,t[n++]=e}),t}},{key:"convert",value:function(e,t){if(!this.isCalculableColor(e))return e;var n=this.getData(e),r=n[3];return void 0===r&&(r=1),e.indexOf("hsb")>-1?n=this._HSV_2_RGB(n):e.indexOf("hsl")>-1&&(n=this._HSL_2_RGB(n)),t.indexOf("hsb")>-1||t.indexOf("hsv")>-1?n=this._RGB_2_HSB(n):t.indexOf("hsl")>-1&&(n=this._RGB_2_HSL(n)),n[3]=r,this.toColor(n,t)}},{key:"toRGBA",value:function(e){return this.convert(e,"rgba")}},{key:"toRGB",value:function(e){return this.convert(e,"rgb")}},{key:"toHex",value:function(e){return this.convert(e,"hex")}},{key:"toHSVA",value:function(e){return this.convert(e,"hsva")}},{key:"toHSV",value:function(e){return this.convert(e,"hsv")}},{key:"toHSBA",value:function(e){return this.convert(e,"hsba")}},{key:"toHSB",value:function(e){return this.convert(e,"hsb")}},{key:"toHSLA",value:function(e){return this.convert(e,"hsla")}},{key:"toHSL",value:function(e){return this.convert(e,"hsl")}},{key:"toName",value:function(e){for(var t in this._nameColors)if(this.toHex(this._nameColors[t])===this.toHex(e))return t;return null}},{key:"trim",value:function(e){return String(e).replace(/\s+/g,"")}},{key:"normalize",value:function(e){if(this._nameColors[e]&&(e=this._nameColors[e]),e=(e=this.trim(e)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(e)){var t=(3840&(e=parseInt(e.slice(1),16)))<<8,n=(240&e)<<4,r=15&e;e="#"+((1<<24)+(t<<4)+t+(n<<4)+n+(r<<4)+r).toString(16).slice(1)}return e}},{key:"lift",value:function(e,t){if(!this.isCalculableColor(e))return e;var n=t>0?1:-1;void 0===t&&(t=0),t=Math.abs(t)>1?1:Math.abs(t),e=this.toRGB(e);for(var r=this.getData(e),i=0;i<3;i++)r[i]=1===n?r[i]*(1-t)|0:(255-r[i])*t+r[i]|0;return"rgb("+r.join(",")+")"}},{key:"reverse",value:function(e){if(!this.isCalculableColor(e))return e;var t=this.getData(this.toRGBA(e));return t=this.map(t,function(e){return 255-e}),this.toColor(t,"rgb")}},{key:"mix",value:function(e,t,n){if(!this.isCalculableColor(e)||!this.isCalculableColor(t))return e;void 0===n&&(n=.5);for(var r=2*(n=1-this.adjust(n,[0,1]))-1,i=this.getData(this.toRGBA(e)),o=this.getData(this.toRGBA(t)),a=i[3]-o[3],s=((r*a==-1?r:(r+a)/(1+r*a))+1)/2,l=1-s,u=[],c=0;c<3;c++)u[c]=i[c]*s+o[c]*l;var f=i[3]*n+o[3]*(1-n);return f=Math.max(0,Math.min(1,f)),1===i[3]&&1===o[3]?this.toColor(u,"rgb"):(u[3]=f,this.toColor(u,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(t){var n,r,i=(t=this.normalize(t)).match(this.colorRegExp);if(null===i)throw new Error("The color format error");var o,a=[];if(i[2])o=[(n=i[2].replace("#","").split(""))[0]+n[1],n[2]+n[3],n[4]+n[5]],a=this.map(o,function(t){return e.prototype.adjust.call(this,parseInt(t,16),[0,255])});else if(i[4]){var s=i[4].split(",");r=s[3],o=s.slice(0,3),a=this.map(o,function(t){return t=Math.floor(t.indexOf("%")>0?2.55*parseInt(t,0):t),e.prototype.adjust.call(this,t,[0,255])}),void 0!==r&&a.push(this.adjust(parseFloat(r),[0,1]))}else if(i[5]||i[6]){var l=(i[5]||i[6]).split(","),u=parseInt(l[0],0)/360,c=l[1],f=l[2];r=l[3],(a=this.map([c,f],function(t){return e.prototype.adjust.call(this,parseFloat(t)/100,[0,1])})).unshift(u),void 0!==r&&a.push(this.adjust(parseFloat(r),[0,1]))}return a}},{key:"alpha",value:function(e,t){if(!this.isCalculableColor(e))return e;null===t&&(t=1);var n=this.getData(this.toRGBA(e));return n[3]=this.adjust(Number(t).toFixed(4),[0,1]),this.toColor(n,"rgba")}},{key:"map",value:function(e,t){if("function"!=typeof t)throw new TypeError;for(var n=e?e.length:0,r=0;r<n;r++)e[r]=t(e[r]);return e}},{key:"adjust",value:function(e,t){return e<=t[0]?e=t[0]:e>=t[1]&&(e=t[1]),e}},{key:"isCalculableColor",value:function(e){return e instanceof Array||"string"==typeof e}},{key:"_HSV_2_RGB",value:function(e){var t,n,r,i=e[0],o=e[1],a=e[2];if(0===o)t=255*a,n=255*a,r=255*a;else{var s=6*i;6===s&&(s=0);var l=0|s,u=a*(1-o),c=a*(1-o*(s-l)),f=a*(1-o*(1-(s-l))),h=0,p=0,y=0;0===l?(h=a,p=f,y=u):1===l?(h=c,p=a,y=u):2===l?(h=u,p=a,y=f):3===l?(h=u,p=c,y=a):4===l?(h=f,p=u,y=a):(h=a,p=u,y=c),t=255*h,n=255*p,r=255*y}return[t,n,r]}},{key:"_HSL_2_RGB",value:function(e){var t,n,r,i=e[0],o=e[1],a=e[2];if(0===o)t=255*a,n=255*a,r=255*a;else{var s,l=2*a-(s=a<.5?a*(1+o):a+o-o*a);t=255*this._HUE_2_RGB(l,s,i+1/3),n=255*this._HUE_2_RGB(l,s,i),r=255*this._HUE_2_RGB(l,s,i-1/3)}return[t,n,r]}},{key:"_HUE_2_RGB",value:function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),6*n<1?e+6*(t-e)*n:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}},{key:"_RGB_2_HSB",value:function(e){var t,n,r=e[0]/255,i=e[1]/255,o=e[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),l=s-a,u=s;if(0===l)t=0,n=0;else{n=l/s;var c=((s-r)/6+l/2)/l,f=((s-i)/6+l/2)/l,h=((s-o)/6+l/2)/l;r===s?t=h-f:i===s?t=1/3+c-h:o===s&&(t=2/3+f-c),t<0&&(t+=1),t>1&&(t-=1)}return[t*=360,n*=100,u*=100]}},{key:"_RGB_2_HSL",value:function(e){var t,n,r=e[0]/255,i=e[1]/255,o=e[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),l=s-a,u=(s+a)/2;if(0===l)t=0,n=0;else{n=u<.5?l/(s+a):l/(2-s-a);var c=((s-r)/6+l/2)/l,f=((s-i)/6+l/2)/l,h=((s-o)/6+l/2)/l;r===s?t=h-f:i===s?t=1/3+c-h:o===s&&(t=2/3+f-c),t<0&&(t+=1),t>1&&(t-=1)}return[t*=360,n*=100,u*=100]}}])&&sx(t.prototype,n),r&&sx(t,r),e}();function ux(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var cx=new lx,fx=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createCanvas",value:function(e,t){var n=document.createElement("canvas");return n.height=e,n.width=t,n.getContext("2d")}},{key:"getLinearGradient",value:function(e,t,n,r,i){this._ctx||(this._ctx=this.getContext());for(var o=this._ctx.createLinearGradient(e,t,n,r),a=i.length,s=1/(a-1),l=0,u=0;u<a;u++)o.addColorStop(l,i[u]),l+=s;return o.__nonRecursion=!0,o}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getStepColors",value:function(e,t,n){e=cx.toRGBA(e),t=cx.toRGBA(t),e=cx.getData(e);for(var r=[],i=((t=cx.getData(t))[0]-e[0])/n,o=(t[1]-e[1])/n,a=(t[2]-e[2])/n,s=(t[3]-e[3])/n,l=0,u=e[0],c=e[1],f=e[2],h=e[3];l<n;l++)r[l]=cx.toColor([cx.adjust(Math.floor(u),[0,255]),cx.adjust(Math.floor(c),[0,255]),cx.adjust(Math.floor(f),[0,255]),h.toFixed(4)-0],"hex"),u+=i,c+=o,f+=a,h+=s;return u=t[0],c=t[1],f=t[2],h=t[3],r[l]=cx.toColor([u,c,f,h],"hex"),r}},{key:"getGradientColors",value:function(e,t,n){var r,i,o,a=[],s=e.length;if(void 0!==t){if(s>=t)if("RANGE"===n)for(i=0;i<t;i++)a.push(e[i]);else for(i=0;i<t;i++){var l=Math.floor(i/2);if(i%2==0)a.push(e[l]);else{var u=e.length-1-l;a.push(e[u])}}else{for(r=Math.ceil(t/(s-1)),i=0,o=s-1;i<o;i++){var c=this.getStepColors(e[i],e[i+1],r);i<o-1&&c.pop(),a=a.concat(c)}for(var f=a.length-t,h=0;h<f;h++)a.splice(2,1)}return a}}}],(n=null)&&ux(t.prototype,n),r&&ux(t,r),e}();function hx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ColorsPickerUtil=fx;var px=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"newInstance",value:function(){return this.geostatsInstance||(this.geostatsInstance=new window.geostats),this.geostatsInstance}},{key:"getInstance",value:function(e){var t=this.newInstance();return t.setSerie(e),t}},{key:"getArrayStatistic",value:function(e,t){return e.length?"Sum"===t||"求和"===t?this.getSum(e):"Maximum"===t||"最大值"===t?this.getMax(e):"Minimum"===t||"最小值"===t?this.getMin(e):"Average"===t||"平均值"===t?this.getMean(e):"Median"===t||"中位数"===t?this.getMedian(e):"times"===t||"计数"===t?this.getTimes(e):void 0:0}},{key:"getArraySegments",value:function(e,t,n){return"offset"===t?this.getEqInterval(e,n):"jenks"===t?this.getJenks(e,n):"square"===t?this.getMin(e)>=0&&this.getSqrtInterval(e,n):"logarithm"===t?this.getMin(e)>0&&this.getGeometricProgression(e,n):void 0}},{key:"getSum",value:function(e){return this.getInstance(e).sum()}},{key:"getMax",value:function(e){return this.getInstance(e).max()}},{key:"getMin",value:function(e){return this.getInstance(e).min()}},{key:"getMean",value:function(e){return this.getInstance(e).mean()}},{key:"getMedian",value:function(e){return this.getInstance(e).median()}},{key:"getTimes",value:function(e){return e.length}},{key:"getEqInterval",value:function(e,t){return this.getInstance(e).getClassEqInterval(t)}},{key:"getJenks",value:function(e,t){return this.getInstance(e).getClassJenks(t)}},{key:"getSqrtInterval",value:function(e,t){return e=e.map(function(e){return Math.sqrt(e)}),this.getInstance(e).getClassEqInterval(t).map(function(e){return e*e})}},{key:"getGeometricProgression",value:function(e,t){return this.getInstance(e).getClassGeometricProgression(t)}}],(n=null)&&hx(t.prototype,n),r&&hx(t,r),e}();r.ArrayStatistic=px;var yx=n(11),dx=n.n(yx);
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function mx(e){return(mx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bx(e,t,n){return t&&gx(e.prototype,t),n&&gx(e,n),e}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Sx=function(){function e(t){vx(this,e),this.env=null,this.parser=null,this.ruleSet=null,this.cartoStr="",this.shaders=null,"string"==typeof t&&(this.cartoStr=t,this.env={frames:[],errors:[],error:function(e){this.errors.push(e)}},this.parser=this.getParser(this.env),this.parse(t),this.shaders=this.toShaders())}return bx(e,[{key:"getParser",value:function(e){var t,n,i,o,a,s,l,u,c,f=this;function h(){o=l[i],a=n,u=n}function p(){l[i]=o,u=n=a}function y(){n>u&&(l[i]=l[i].slice(n-u),u=n)}function d(e){var r,o,a,s;if(e instanceof Function)return e.call(c.parsers);if("string"==typeof e)r=t.charAt(n)===e?e:null,o=1,y();else{if(y(),!(r=e.exec(l[i])))return null;o=r[0].length}if(r){var f=n+=o;for(s=n+l[i].length-o;n<s&&(32===(a=t.charCodeAt(n))||10===a||9===a);)n++;return l[i]=l[i].slice(o+(n-f)),u=n,0===l[i].length&&i<l.length-1&&i++,"string"==typeof r?r:1===r.length?r[0]:r}}function m(n){var r,i={index:s,filename:e.filename,message:"Parse error.",line:0,column:-1};for(var o in i)0===n[o]&&(n[o]=i[o]);r=n.filename&&f.env.inputs&&f.env.inputs[n.filename]?f.env.inputs[n.filename]:t,n.line=(r.slice(0,n.index).match(/\n/g)||"").length+1;for(var a=n.index;a>=0&&"\n"!==r.charAt(a);a--)n.column++;return new Error([n.filename,n.line,n.column,n.message].join(";"))}return this.env=e=e||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},c={parse:function(o){var a,c=null;if(n=i=u=s=0,l=[],t=o.replace(/\r\n/g,"\n"),e.filename&&(f.env.inputs[e.filename]=t),l=function(e){for(var n,r,i,o,a=0,s=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,l=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,u=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,f=0,h=e[0],p=0;p<t.length;)if(s.lastIndex=p,(n=s.exec(t))&&n.index===p&&(p+=n[0].length,h.push(n[0])),i=t.charAt(p),l.lastIndex=u.lastIndex=p,(n=u.exec(t))&&n.index===p)p+=n[0].length,h.push(n[0]);else if(r||"/"!==i||"/"!==(o=t.charAt(p+1))&&"*"!==o||!(n=l.exec(t))||n.index!==p){switch(i){case"{":if(!r){f++,h.push(i);break}case"}":if(!r){f--,h.push(i),e[++a]=h=[];break}case"(":if(!r){r=!0,h.push(i);break}case")":if(r){r=!1,h.push(i);break}default:h.push(i)}p++}else p+=n[0].length,h.push(n[0]);return 0!==f&&(c={index:p-1,type:"Parse",message:f>0?"missing closing `}`":"missing opening `{`"}),e.map(function(e){return e.join("")})}([[]]),c)throw m(c);var h=function(e,t){var n=e.specificity,r=t.specificity;return n[0]!=r[0]?r[0]-n[0]:n[1]!=r[1]?r[1]-n[1]:n[2]!=r[2]?r[2]-n[2]:r[3]-n[3]};return(a=new r.CartoCSS.Tree.Ruleset([],d(this.parsers.primary))).root=!0,a.toList=function(e){e.error=function(t){e.errors||(e.errors=new Error("")),e.errors.message?e.errors.message+="\n"+m(t).message:e.errors.message=m(t).message},e.frames=e.frames||[];var t=this.flatten([],[],e);return t.sort(h),t},a},parsers:{primary:function(){for(var e,t=[];(e=d(this.rule)||d(this.ruleset)||d(this.comment))||d(/^[\s\n]+/)||(e=d(this.invalid));)e&&t.push(e);return t},invalid:function(){var e=d(/^[^;\n]*[;\n]/);if(e)return new r.CartoCSS.Tree.Invalid(e,a)},comment:function(){var e;if("/"===t.charAt(n))return"/"===t.charAt(n+1)?new r.CartoCSS.Tree.Comment(d(/^\/\/.*/),!0):(e=d(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new r.CartoCSS.Tree.Comment(e):void 0},entities:{quoted:function(){if('"'===t.charAt(n)||"'"===t.charAt(n)){var e=d(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);return e?new r.CartoCSS.Tree.Quoted(e[1]||e[2]):void 0}},field:function(){if(d("[")){var e=d(/(^[^\]]+)/);if(d("]"))return e?new r.CartoCSS.Tree.Field(e[1]):void 0}},comparison:function(){var e=d(/^=~|=|!=|<=|>=|<|>/);if(e)return e},keyword:function(){var e=d(/^[A-Za-z\u4e00-\u9fa5-]+[A-Za-z-0-9\u4e00-\u9fa5_]*/);if(e)return new r.CartoCSS.Tree.Keyword(e)},call:function(){var e,t;if(e=/^([\w\-]+|%)\(/.exec(l[i])){if("url"===(e=e[1]))return null;n+=e.length;if(d("("),t=d(this.entities.arguments),d(")"))return e?new r.CartoCSS.Tree.Call(e,t,n):void 0}},arguments:function(){for(var e,t=[];e=d(this.expression);){t.push(e);if(!d(","))break}return t},literal:function(){return d(this.entities.dimension)||d(this.entities.keywordcolor)||d(this.entities.hexcolor)||d(this.entities.quoted)},url:function(){var e;if("u"===t.charAt(n)&&d(/^url\(/)){e=d(this.entities.quoted)||d(this.entities.variable)||d(/^[\-\w%@_match\/.&=:;#+?~]+/)||"";return d(")")?new r.CartoCSS.Tree.URL(void 0!==e.value||e instanceof r.CartoCSS.Tree.Variable?e:new r.CartoCSS.Tree.Quoted(e)):new r.CartoCSS.Tree.Invalid(e,a,"Missing closing ) in URL.")}},variable:function(){var i,o=n;if("@"===t.charAt(n)&&(i=d(/^@[\w-]+/)))return new r.CartoCSS.Tree.Variable(i,o,e.filename)},hexcolor:function(){var e;if("#"===t.charAt(n)&&(e=d(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new r.CartoCSS.Tree.Color(e[1])},keywordcolor:function(){var e=l[i].match(/^[a-z]+/);if(e&&e[0]in r.CartoCSS.Tree.Reference.data.colors)return new r.CartoCSS.Tree.Color(r.CartoCSS.Tree.Reference.data.colors[d(/^[a-z]+/)])},dimension:function(){var e=t.charCodeAt(n);if(!(e>57||e<45||47===e)){var i=d(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);return i?new r.CartoCSS.Tree.Dimension(i[1],i[2],a):void 0}}},variable:function(){var e;if("@"===t.charAt(n)&&(e=d(/^(@[\w-]+)\s*:/)))return e[1]},entity:function(){var e=d(this.entities.call)||d(this.entities.literal),t=d(this.entities.field)||d(this.entities.variable),n=d(this.entities.url)||d(this.entities.keyword);return e||t||n},end:function(){var e;return d(";")||("string"==typeof(e="}")?t.charAt(n)===e:!!e.test(l[i]))},element:function(){var e=d(/^(?:[.#][\w\u4e00-\u9fa5\-]+|\*|Map)/);if(e)return new r.CartoCSS.Tree.Element(e)},attachment:function(){var e=d(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(e)return e[1]},selector:function(){for(var e,i,o,s,l,u=[],c=new r.CartoCSS.Tree.Filterset,f=[],h=0,p=0;(o=d(this.element))||(l=d(this.zoom))||(s=d(this.filter))||(e=d(this.attachment));){if(h++,o)u.push(o);else if(l)f.push(l),p++;else if(s){var y=c.add(s);if(y)throw m({message:y,index:n-1});p++}else{if(i)throw m({message:"Encountered second attachment name.",index:n-1});i=e}var v=t.charAt(n);if("{"===v||"}"===v||";"===v||","===v)break}if(h)return new r.CartoCSS.Tree.Selector(c,f,u,i,p,a)},filter:function(){h();var t,n,i;if(d("[")&&(t=d(/^[a-zA-Z0-9\-_]+/)||d(this.entities.quoted)||d(this.entities.variable)||d(this.entities.keyword)||d(this.entities.field))&&(t instanceof r.CartoCSS.Tree.Quoted&&(t=new r.CartoCSS.Tree.Field(t.toString())),(n=d(this.entities.comparison))&&(i=d(this.entities.quoted)||d(this.entities.variable)||d(this.entities.dimension)||d(this.entities.keyword)||d(this.entities.field)))){if(!d("]"))throw m({message:"Missing closing ] of filter.",index:a-1});return t.is||(t=new r.CartoCSS.Tree.Field(t)),new r.CartoCSS.Tree.Filter(t,n,i,a,e.filename)}},zoom:function(){h();var e,t;if(d(/^\[\s*zoom/g)&&(e=d(this.entities.comparison))&&(t=d(this.entities.variable)||d(this.entities.dimension))&&d("]"))return new r.CartoCSS.Tree.Zoom(e,t,a);p()},block:function(){var e;if(d("{")&&(e=d(this.primary))&&d("}"))return e},ruleset:function(){var e,t,n=[];for(h();e=d(this.selector);){for(n.push(e);d(this.comment););if(!d(","))break;for(;d(this.comment););}if(e)for(;d(this.comment););if(n.length>0&&(t=d(this.block))){if(1===n.length&&n[0].elements.length&&"Map"===n[0].elements[0].value){var i=new r.CartoCSS.Tree.Ruleset(n,t);return i.isMap=!0,i}return new r.CartoCSS.Tree.Ruleset(n,t)}p()},rule:function(){var i,o,l=t.charAt(n);if(h(),"."!==l&&"#"!==l&&(i=d(this.variable)||d(this.property))){if((o=d(this.value))&&d(this.end))return new r.CartoCSS.Tree.Rule(i,o,a,e.filename);s=n,p()}},font:function(){for(var e,t=[],n=[];e=d(this.entity);)n.push(e);if(t.push(new r.CartoCSS.Tree.Expression(n)),d(","))for(;(e=d(this.expression))&&(t.push(e),d(",")););return new r.CartoCSS.Tree.Value(t)},value:function(){for(var e,t=[];(e=d(this.expression))&&(t.push(e),d(",")););return t.length>1?new r.CartoCSS.Tree.Value(t.map(function(e){return e.value[0]})):1===t.length?new r.CartoCSS.Tree.Value(t):void 0},sub:function(){var e;if(d("(")&&(e=d(this.expression))&&d(")"))return e},multiplication:function(){var e,t,n,i;if(e=d(this.operand)){for(;(n=d("/")||d("*")||d("%"))&&(t=d(this.operand));)i=new r.CartoCSS.Tree.Operation(n,[i||e,t],a);return i||e}},addition:function(){var e,i,o,s;if(e=d(this.multiplication)){for(;(o=d(/^[-+]\s+/)||" "!=t.charAt(n-1)&&(d("+")||d("-")))&&(i=d(this.multiplication));)s=new r.CartoCSS.Tree.Operation(o,[s||e,i],a);return s||e}},operand:function(){return d(this.sub)||d(this.entity)},expression:function(){for(var e,t=[];e=d(this.addition)||d(this.entity);)t.push(e);if(t.length>0)return new r.CartoCSS.Tree.Expression(t)},property:function(){var e=d(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(e)return e[1]}}}}},{key:"parse",value:function(e){var t=this.parser;return this.ruleSet=t.parse(e)}},{key:"toShaders",value:function(){if(this.ruleSet){var e=this.ruleSet;if(e){var t=e.toList(this.env);t.reverse();var n={},r=[];this._toShaders(n,r,t);for(var i=[],o={},a=0,s=t.length;a<s;++a){var l=t[a],u=l.attachment,c=n[r[a]],f=[];if(!o[u]){var h=0;for(var p in c)if("zoom"!==p&&"frames"!==p&&"attachment"!==p&&"elements"!=p)if("layer-index"===p){var y=(c[p].join("\n"),null);Object.defineProperty(f,"layerIndex",{configurable:!0,enumerable:!1,value:y})}else f[h++]=function(e,t){if(!Array.isArray(e))return e;var n=e.join("\n"),r='attributes["FEATUREID"]&&attributes["FEATUREID"]',i=n.indexOf(r);if(i>=0){if(!t.featureFilter){var o=i+r.length,a=n.indexOf(")",o+1),s="featureId&&(featureId"+n.substring(o,a)+")";Object.defineProperty(t,"featureFilter",{configurable:!0,enumerable:!1,value:function(e){return!!s}})}return{property:p,getValue:Function("attributes","zoom","seftFilter","var _value = null; var isExcute=typeof seftFilter=='function'?sefgFilter():seftFilter;if(isExcute){"+n+";} return _value; ")}}return{property:p,getValue:Function("attributes","zoom","var _value = null;"+n+"; return _value; ")}}(c[p],f);Object.defineProperty(f,"attachment",{configurable:!0,enumerable:!1,value:u}),Object.defineProperty(f,"elements",{configurable:!0,enumerable:!1,value:l.elements}),i.push(f),o[r[a]]=!0}Object.defineProperty(f,"zoom",{configurable:!0,enumerable:!1,value:l.zoom})}return i}}return null}},{key:"_toShaders",value:function(e,t,n){for(var i=0,o=n.length;i<o;++i){for(var a=n[i],s=[],l=0,u=a.elements.length;l<u;l++)s.push(a.elements[l]);var c=a.filters.filters,f=[];for(var h in c)f.push(c[h].id);var p=s.join("/")+"::"+a.attachment+"_"+f.join("_");t.push(p);var y=e[p]=e[p]||{};y.zoom=r.CartoCSS.Tree.Zoom.all;var d=a.toJS(this.env);for(var m in d)(y[m]=y[m]||[]).push(d[m].join("\n"))}}},{key:"getShaders",value:function(){return this.shaders}},{key:"destroy",value:function(){this.cartoStr=null,this.env=null,this.ruleSet=null,this.parser=null,this.shaders=null}}]),e}();r._mapnik_reference_latest={version:"2.1.1",style:{"filter-mode":{type:["all","first"],doc:"Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)","default-value":"all","default-meaning":"All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true."},"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},layer:{name:{"default-value":"",type:"string",required:!0,"default-meaning":"No layer name has been provided",doc:"The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map"},srs:{"default-value":"",type:"string","default-meaning":"No srs value is provided and the value will be inherited from the Map's srs",doc:"The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'"},status:{"default-value":!0,type:"boolean","default-meaning":"This layer will be marked as active and available for processing",doc:"A property that can be set to false to disable this layer from being processed"},minzoom:{"default-value":"0",type:"float","default-meaning":"The layer will be visible at the minimum possible scale",doc:"The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},maxzoom:{"default-value":"1.79769e+308",type:"float","default-meaning":"The layer will be visible at the maximum possible scale",doc:"The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},queryable:{"default-value":!1,type:"boolean","default-meaning":"The layer will not be available for the direct querying of data values",doc:"This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true"},"clear-label-cache":{"default-value":!1,type:"boolean","default-meaning":"The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer",doc:"This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers"},"group-by":{"default-value":"",type:"string","default-meaning":"No special layer grouping will be used during rendering",doc:"https://github.com/mapnik/mapnik/wiki/Grouped-rendering"},"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"maximum-extent":{"default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer."}},symbolizers:{"*":{"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},map:{"background-color":{css:"background-color","default-value":"none","default-meaning":"transparent",type:"color",doc:"Map Background color"},"background-image":{css:"background-image",type:"uri","default-value":"","default-meaning":"transparent",doc:"An image that is repeated below all features on a map as a background.",description:"Map Background image"},srs:{css:"srs",type:"string","default-value":"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs","default-meaning":"The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space",doc:"Map spatial reference (proj4 string)"},"buffer-size":{css:"buffer-size","default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".'},"maximum-extent":{css:"","default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map."},base:{css:"base","default-value":"","default-meaning":"This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.",type:"string",doc:"Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet."},"paths-from-xml":{css:"","default-value":!0,"default-meaning":"Paths read from XML will be interpreted from the location of the XML",type:"boolean",doc:"value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()"},"minimum-version":{css:"","default-value":"none","default-meaning":"Mapnik version will not be detected and no error will be thrown about compatibility",type:"string",doc:"The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet"},"font-directory":{css:"font-directory",type:"uri","default-value":"none","default-meaning":"No map-specific fonts will be registered",doc:"Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)."}},polygon:{fill:{css:"polygon-fill",type:"color","default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon"},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque"},gamma:{css:"polygon-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon edges"},"gamma-method":{css:"polygon-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},clip:{css:"polygon-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line"},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels"},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"},"stroke-gamma":{css:"line-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of stroke line"},"stroke-gamma-method":{css:"line-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},"stroke-dasharray":{css:"line-dasharray",type:"numbers",doc:"A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.","default-value":"none","default-meaning":"solid line"},"stroke-dashoffset":{css:"line-dash-offset",type:"numbers",doc:"valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)","default-value":"none","default-meaning":"solid line"},"stroke-miterlimit":{css:"line-miterlimit",type:"float",doc:"The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.","default-value":4,"default-meaning":"Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'"},clip:{css:"line-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},offset:{css:"line-offset",type:"float","default-value":0,"default-meaning":"no offset",doc:"Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)."},rasterizer:{css:"line-rasterizer",type:["full","fast"],"default-value":"full",doc:"Exposes an alternate AGG rendering method that sacrifices some accuracy for speed."},"geometry-transform":{css:"line-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri"},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},placement:{css:"marker-placement",type:["point","line","interior"],"default-value":"point","default-meaning":"Place markers at the center point (centroid) of the geometry",doc:"Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior"},"multi-policy":{css:"marker-multi-policy",type:["each","whole","largest"],"default-value":"each","default-meaning":"If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each",doc:"A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)."},"marker-type":{css:"marker-type",type:["arrow","ellipse"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"expression"},height:{css:"marker-height","default-value":10,doc:"The height of the marker, if using one of the default types.",type:"expression"},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color"},"allow-overlap":{css:"marker-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping markers are shown or hidden.","default-meaning":"Do not allow makers to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"marker-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},spacing:{css:"marker-spacing",doc:"Space between repeated labels","default-value":100,type:"float"},"max-error":{css:"marker-max-error",type:"float","default-value":.2,doc:"The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers."},transform:{css:"marker-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},clip:{css:"marker-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"marker-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"marker-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"marker-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},shield:{name:{css:"shield-name",type:"expression",serialization:"content",doc:'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]'},file:{css:"shield-file",required:!0,type:"uri","default-value":"none",doc:"Image file to render behind the shield text"},"face-name":{css:"shield-face-name",type:"string",validate:"font",doc:"Font name and style to use for the shield text","default-value":"",required:!0},"unlock-image":{css:"shield-unlock-image",type:"boolean",doc:"This parameter should be set to true if you are trying to position text beside rather than on top of the shield image","default-value":!1,"default-meaning":"text alignment relative to the shield image uses the center of the image as the anchor for text positioning."},size:{css:"shield-size",type:"float",doc:"The size of the shield text in pixels"},fill:{css:"shield-fill",type:"color",doc:"The color of the shield text"},placement:{css:"shield-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons."},"avoid-edges":{css:"shield-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.",type:"boolean","default-value":!1},"allow-overlap":{css:"shield-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping shields are shown or hidden.","default-meaning":"Do not allow shields to overlap with other map elements already placed."},"minimum-distance":{css:"shield-min-distance",type:"float","default-value":0,doc:"Minimum distance to the next shield symbol, not necessarily the same shield."},spacing:{css:"shield-spacing",type:"float","default-value":0,doc:"The spacing between repeated occurrences of the same shield on a line"},"minimum-padding":{css:"shield-min-padding","default-value":0,doc:"Determines the minimum amount of padding that a shield gets relative to other shields",type:"float"},"wrap-width":{css:"shield-wrap-width",type:"unsigned","default-value":0,doc:"Length of a chunk of text in characters before wrapping text"},"wrap-before":{css:"shield-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"shield-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long names."},"halo-fill":{css:"shield-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"shield-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},"character-spacing":{css:"shield-character-spacing",type:"unsigned","default-value":0,doc:"Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement."},"line-spacing":{css:"shield-line-spacing",doc:"Vertical spacing between lines of multiline labels (in pixels)",type:"unsigned"},dx:{css:"shield-text-dx",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"shield-text-dy",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"shield-dx":{css:"shield-dx",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},"shield-dy":{css:"shield-dy",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},opacity:{css:"shield-opacity",type:"float",doc:"(Default 1.0) - opacity of the image used for the shield","default-value":1},"text-opacity":{css:"shield-text-opacity",type:"float",doc:"(Default 1.0) - opacity of the text placed on top of the shield","default-value":1},"horizontal-alignment":{css:"shield-horizontal-alignment",type:["left","middle","right","auto"],doc:"The shield's horizontal alignment from its centerpoint","default-value":"auto"},"vertical-alignment":{css:"shield-vertical-alignment",type:["top","middle","bottom","auto"],doc:"The shield's vertical alignment from its centerpoint","default-value":"middle"},"text-transform":{css:"shield-text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"justify-alignment":{css:"shield-justify-alignment",type:["left","center","right","auto"],doc:"Define how text in a shield's label is justified","default-value":"auto"},clip:{css:"shield-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"shield-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"line-pattern":{file:{css:"line-pattern-file",type:"uri","default-value":"none",required:!0,doc:"An image file to be repeated and warped along a line"},clip:{css:"line-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"line-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"polygon-pattern":{file:{css:"polygon-pattern-file",type:"uri","default-value":"none",required:!0,doc:"Image to use as a repeated pattern fill within a polygon"},alignment:{css:"polygon-pattern-alignment",type:["local","global"],"default-value":"local",doc:"Specify whether to align pattern fills to the layer or to the map."},gamma:{css:"polygon-pattern-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon pattern edges"},opacity:{css:"polygon-pattern-opacity",type:"float",doc:"(Default 1.0) - Apply an opacity level to the image used for the pattern","default-value":1,"default-meaning":"The image is rendered without modifications"},clip:{css:"polygon-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},raster:{opacity:{css:"raster-opacity","default-value":1,"default-meaning":"opaque",type:"float",doc:"The opacity of the raster symbolizer on top of other symbolizers."},"filter-factor":{css:"raster-filter-factor","default-value":-1,"default-meaning":"Allow the datasource to choose appropriate downscaling.",type:"float",doc:"This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed."},scaling:{css:"raster-scaling",type:["near","fast","bilinear","bilinear8","bicubic","spline16","spline36","hanning","hamming","hermite","kaiser","quadric","catrom","gaussian","bessel","mitchell","sinc","lanczos","blackman"],"default-value":"near",doc:"The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality."},"mesh-size":{css:"raster-mesh-size","default-value":16,"default-meaning":"Reprojection mesh will be 1/16 of the resolution of the source image",type:"unsigned",doc:"A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion."},"comp-op":{css:"raster-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},"allow-overlap":{css:"point-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping points are shown or hidden.","default-meaning":"Do not allow points to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"point-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"},placement:{css:"point-placement",type:["centroid","interior"],doc:"How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.","default-value":"centroid"},transform:{css:"point-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},"comp-op":{css:"point-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},text:{name:{css:"text-name",type:"expression",required:!0,"default-value":"",serialization:"content",doc:"Value to use for a text label. Data columns are specified using brackets like [column_name]"},"face-name":{css:"text-face-name",type:"string",validate:"font",doc:"Font name and style to render a label in",required:!0},size:{css:"text-size",type:"float","default-value":10,doc:"Text size in pixels"},"text-ratio":{css:"text-ratio",doc:"Define the amount of text (of the total) present on successive lines when wrapping occurs","default-value":0,type:"unsigned"},"wrap-width":{css:"text-wrap-width",doc:"Length of a chunk of text in characters before wrapping text","default-value":0,type:"unsigned"},"wrap-before":{css:"text-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"text-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long text."},spacing:{css:"text-spacing",type:"unsigned",doc:"Distance between repeated text labels on a line (aka. label-spacing)"},"character-spacing":{css:"text-character-spacing",type:"float","default-value":0,doc:"Horizontal spacing adjustment between characters in pixels"},"line-spacing":{css:"text-line-spacing","default-value":0,type:"unsigned",doc:"Vertical spacing adjustment between lines in pixels"},"label-position-tolerance":{css:"text-label-position-tolerance","default-value":0,type:"unsigned",doc:"Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)"},"max-char-angle-delta":{css:"text-max-char-angle-delta",type:"float","default-value":"22.5",doc:"The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners."},fill:{css:"text-fill",doc:"Specifies the color for the text","default-value":"#000000",type:"color"},opacity:{css:"text-opacity",doc:"A number from 0 to 1 specifying the opacity for the text","default-value":1,"default-meaning":"Fully opaque",type:"float"},"halo-fill":{css:"text-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"text-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},dx:{css:"text-dx",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"text-dy",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"vertical-alignment":{css:"text-vertical-alignment",type:["top","middle","bottom","auto"],doc:"Position of label relative to point position.","default-value":"auto","default-meaning":'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.'},"avoid-edges":{css:"text-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.","default-value":!1,type:"boolean"},"minimum-distance":{css:"text-min-distance",doc:"Minimum permitted distance to the next text symbolizer.",type:"float"},"minimum-padding":{css:"text-min-padding",doc:"Determines the minimum amount of padding that a text symbolizer gets relative to other text",type:"float"},"minimum-path-length":{css:"text-min-path-length",type:"float","default-value":0,"default-meaning":"place labels on all paths",doc:"Place labels only on paths longer than this value."},"allow-overlap":{css:"text-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping text is shown or hidden.","default-meaning":"Do not allow text to overlap with other text - overlapping markers will not be shown."},orientation:{css:"text-orientation",type:"expression",doc:"Rotate the text."},placement:{css:"text-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"Control the style of placement of a point versus the geometry it is attached to."},"placement-type":{css:"text-placement-type",doc:'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.',type:["dummy","simple"],"default-value":"dummy"},placements:{css:"text-placements",type:"string","default-value":"",doc:'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` '},"text-transform":{css:"text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"horizontal-alignment":{css:"text-horizontal-alignment",type:["left","middle","right","auto"],doc:"The text's horizontal alignment from its centerpoint","default-value":"auto"},"justify-alignment":{css:"text-align",type:["left","right","center","auto"],doc:"Define how text is justified","default-value":"auto","default-meaning":"Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives"},clip:{css:"text-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"text-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},building:{fill:{css:"building-fill","default-value":"#FFFFFF",doc:"The color of the buildings walls.",type:"color"},"fill-opacity":{css:"building-fill-opacity",type:"float",doc:"The opacity of the building as a whole, including all walls.","default-value":1},height:{css:"building-height",doc:"The height of the building in pixels.",type:"expression","default-value":"0"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]},filter:{value:["true","false","null","point","linestring","polygon","collection"]}},Sx.mapnik_reference={version:{latest:r._mapnik_reference_latest,"2.1.1":r._mapnik_reference_latest}},r.CartoCSS=Sx,r.CartoCSS.Tree={},r.CartoCSS.Tree.operate=function(e,t,n){switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"%":return t%n;case"/":return t/n}},r.CartoCSS.Tree.functions={rgb:function(e,t,n){return this.rgba(e,t,n,1)},rgba:function(e,t,n,i){var o=this,a=[e,t,n].map(function(e){return o.number(e)});return i=o.number(i),a.some(isNaN)||isNaN(i)?null:new r.CartoCSS.Tree.Color(a,i)},stop:function(e){var t,n;return arguments.length>1&&(t=arguments[1]),arguments.length>2&&(n=arguments[2]),{is:"tag",val:e,color:t,mode:n,toString:function(r){return'\n\t<stop value="'+e.ev(r)+'"'+(t?' color="'+t.ev(r)+'" ':"")+(n?' mode="'+n.ev(r)+'" ':"")+"/>"}}},hsl:function(e,t,n){return this.hsla(e,t,n,1)},hsla:function(e,t,n,r){if([e=this.number(e)%360/360,t=this.number(t),n=this.number(n),r=this.number(r)].some(isNaN))return null;var i=n<=.5?n*(t+1):n+t-n*t,o=2*n-i;return this.rgba(255*a(e+1/3),255*a(e),255*a(e-1/3),r);function a(e){return 6*(e=e<0?e+1:e>1?e-1:e)<1?o+(i-o)*e*6:2*e<1?i:3*e<2?o+(i-o)*(2/3-e)*6:o}},hue:function(e){return"toHSL"in e?new r.CartoCSS.Tree.Dimension(Math.round(e.toHSL().h)):null},saturation:function(e){return"toHSL"in e?new r.CartoCSS.Tree.Dimension(Math.round(100*e.toHSL().s),"%"):null},lightness:function(e){return"toHSL"in e?new r.CartoCSS.Tree.Dimension(Math.round(100*e.toHSL().l),"%"):null},alpha:function(e){return"toHSL"in e?new r.CartoCSS.Tree.Dimension(e.toHSL().a):null},saturate:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.s+=t.value/100,n.s=this.clamp(n.s),this.hsla_simple(n)},desaturate:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.s-=t.value/100,n.s=this.clamp(n.s),this.hsla_simple(n)},lighten:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.l+=t.value/100,n.l=this.clamp(n.l),this.hsla_simple(n)},darken:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.l-=t.value/100,n.l=this.clamp(n.l),this.hsla_simple(n)},fadein:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.a+=t.value/100,n.a=this.clamp(n.a),this.hsla_simple(n)},fadeout:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.a-=t.value/100,n.a=this.clamp(n.a),this.hsla_simple(n)},spin:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL(),r=(n.h+t.value)%360;return n.h=r<0?360+r:r,this.hsla_simple(n)},replace:function(e,t,n){return"field"===e.is?e.toString+".replace("+t.toString()+", "+n.toString()+")":e.replace(t,n)},mix:function(e,t,n){var i=n.value/100,o=2*i-1,a=e.toHSL().a-t.toHSL().a,s=((o*a==-1?o:(o+a)/(1+o*a))+1)/2,l=1-s,u=[e.rgb[0]*s+t.rgb[0]*l,e.rgb[1]*s+t.rgb[1]*l,e.rgb[2]*s+t.rgb[2]*l],c=e.alpha*i+t.alpha*(1-i);return new r.CartoCSS.Tree.Color(u,c)},greyscale:function(e){return this.desaturate(e,new r.CartoCSS.Tree.Dimension(100))},"%":function(e){for(var t=Array.prototype.slice.call(arguments,1),n=e.value,i=0;i<t.length;i++)n=n.replace(/%s/,t[i].value).replace(/%[da]/,t[i].toString());return n=n.replace(/%%/g,"%"),new r.CartoCSS.Tree.Quoted(n)},hsla_simple:function(e){return this.hsla(e.h,e.s,e.l,e.a)},number:function(e){return e instanceof r.CartoCSS.Tree.Dimension?parseFloat("%"===e.unit?e.value/100:e.value):"number"==typeof e?e:NaN},clamp:function(e){return Math.min(1,Math.max(0,e))}},r.CartoCSS.Tree.Call=function(){function e(t,n,r){vx(this,e),this.is="call",this.name=t,this.args=n,this.index=r}return bx(e,[{key:"ev",value:function(e){for(var t=this.args.map(function(t){return t.ev(e)}),n=0;n<t.length;n++)if("undefined"===t[n].is)return{is:"undefined",value:"undefined"};if(this.name in r.CartoCSS.Tree.functions){if(r.CartoCSS.Tree.functions[this.name].length<=t.length){var i=r.CartoCSS.Tree.functions[this.name].apply(r.CartoCSS.Tree.functions,t);return null===i?(e.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):i}return e.error({message:"incorrect number of arguments for "+this.name+"(). "+r.CartoCSS.Tree.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}var o=r.CartoCSS.Tree.Reference.mapnikFunctions[this.name];if(void 0===o){var a=dx()(r.CartoCSS.Tree.Reference.mapnikFunctions),s=this.name,l=a.map(function(e){return[e[0],r.CartoCSS.Tree.Reference.editDistance(s,e[0]),e[1]]}).sort(function(e,t){return e[1]-t[1]});return e.error({message:"unknown function "+this.name+"(), did you mean "+l[0][0]+"("+l[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}return o!==t.length&&-1!==o?(e.error({message:"function "+this.name+"() takes "+o+" arguments and was given "+t.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):(this.args=t,this)}},{key:"toString",value:function(e,t){return this.args.length?this.name+"("+this.args.join(",")+")":this.name}}]),e}(),r.CartoCSS.Tree.Color=function(){function e(t,n){vx(this,e),this.is="color",Array.isArray(t)?this.rgb=t.slice(0,3):6==t.length?this.rgb=t.match(/.{2}/g).map(function(e){return parseInt(e,16)}):this.rgb=t.split("").map(function(e){return parseInt(e+e,16)}),"number"==typeof n?this.alpha=n:4===t.length?this.alpha=t[3]:this.alpha=1}return bx(e,[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return"rgba("+this.rgb.map(function(e){return Math.round(e)}).concat(this.alpha).join(", ")+")"}},{key:"operate",value:function(e,t,n){var i=[];n instanceof r.CartoCSS.Tree.Color||(n=n.toColor());for(var o=0;o<3;o++)i[o]=r.CartoCSS.Tree.operate(t,this.rgb[o],n.rgb[o]);return new r.CartoCSS.Tree.Color(i)}},{key:"toHSL",value:function(){var e,t,n=this.rgb[0]/255,r=this.rgb[1]/255,i=this.rgb[2]/255,o=this.alpha,a=Math.max(n,r,i),s=Math.min(n,r,i),l=(a+s)/2,u=a-s;if(a===s)e=t=0;else{switch(t=l>.5?u/(2-a-s):u/(a+s),a){case n:e=(r-i)/u+(r<i?6:0);break;case r:e=(i-n)/u+2;break;case i:e=(n-r)/u+4}e/=6}return{h:360*e,s:t,l:l,a:o}}}]),e}(),r.CartoCSS.Tree.Comment=function(){function e(t,n){vx(this,e),this.value=t,this.silent=!!n}return bx(e,[{key:"toString",value:function(e){return"\x3c!--"+this.value+"--\x3e"}},{key:"ev",value:function(){return this}}]),e}(),r.CartoCSS.Tree.Definition=function(){function e(t,n){vx(this,e),this.elements=t.elements,this.rules=n,this.ruleIndex={};for(var r=0;r<this.rules.length;r++)"zoom"in this.rules[r]&&(this.rules[r]=this.rules[r].clone()),this.rules[r].zoom=t.zoom,this.ruleIndex[this.rules[r].updateID()]=!0;this.filters=t.filters,this.zoom=t.zoom,this.attachment=t.attachment||"__default__",this.specificity=t.specificity()}return bx(e,[{key:"toString",value:function(){for(var e=this.filters.toString(),t=0;t<this.rules.length;t++)e+="\n    "+this.rules[t];return e}},{key:"toJS",value:function(e){var t={},n=this.zoom,i=this.filters.toJS(e),o=[n];function a(n){if(n instanceof r.CartoCSS.Tree.Rule)t[n.name]=t[n.name]||[],i?t[n.name].push("if("+i+"){"+n.value.toJS(e)+"}"):t[n.name].push(n.value.toJS(e));else if(n instanceof r.CartoCSS.Tree.Ruleset){var o=n.toJS(e);for(var a in o)for(var s in t[a]=t[a]||[],o[a])t[a].push(o[a][s])}}for(var s in i&&o.push(i),i=o.join(" && "),this.rules)a(this.rules[s]);return t}}]),e}(),r.CartoCSS.Tree.Dimension=function(){function e(t,n,r){vx(this,e),this.is="float",this.physical_units=["m","cm","in","mm","pt","pc"],this.screen_units=["px","%"],this.all_units=["m","cm","in","mm","pt","pc","px","%"],this.densities={m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},this.value=parseFloat(t),this.unit=n||null,this.index=r}return bx(e,[{key:"ev",value:function(e){if(this.unit&&this.all_units.indexOf(this.unit)<0)return e.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&this.physical_units.indexOf(this.unit)>=0){if(!e.ppi)return e.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*e.ppi,this.unit="px"}return this}},{key:"toColor",value:function(){return new r.CartoCSS.Tree.Color([this.value,this.value,this.value])}},{key:"round",value:function(){return this.value=Math.round(this.value),this}},{key:"toString",value:function(){return this.value.toString()}},{key:"operate",value:function(e,t,n){return"%"===this.unit&&"%"!==n.unit?(e.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===n.unit?"*"===t||"/"===t||"%"===t?(e.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new r.CartoCSS.Tree.Dimension(r.CartoCSS.Tree.operate(t,this.value,this.value*n.value*.01),this.unit):new r.CartoCSS.Tree.Dimension(r.CartoCSS.Tree.operate(t,this.value,n.value),this.unit||n.unit)}}]),e}(),r.CartoCSS.Tree.Element=function(){function e(t){vx(this,e),this.value=t.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),-1!==this.value.indexOf("*")&&(this.type="wildcard")}return bx(e,[{key:"specificity",value:function(){return["id"===this.type?1:0,"class"===this.type?1:0]}},{key:"toString",value:function(){return this.value}}]),e}(),r.CartoCSS.Tree.Expression=function(){function e(t){vx(this,e),this.is="expression",this.value=t}return bx(e,[{key:"ev",value:function(e){return this.value.length>1?new r.CartoCSS.Tree.Expression(this.value.map(function(t){return t.ev(e)})):this.value[0].ev(e)}},{key:"toString",value:function(e){return this.value.map(function(t){return t.toString(e)}).join(" ")}}]),e}(),r.CartoCSS.Tree.Field=function(){function e(t){vx(this,e),this.is="field",this.value=t||""}return bx(e,[{key:"toString",value:function(){return'["'+this.value.toUpperCase()+'"]'}},{key:"ev",value:function(){return this}}]),e}(),r.CartoCSS.Tree.Filter=function(){function e(t,n,r,i,o){vx(this,e),this.ops={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]},this.key=t,this.op=n,this.val=r,this.index=i,this.filename=o,this.id=this.key+this.op+this.val}return bx(e,[{key:"ev",value:function(e){return this.key=this.key.ev(e),this.val=this.val.ev(e),this}},{key:"toString",value:function(){return"["+this.id+"]"}}]),e}(),r.CartoCSS.Tree.Filterset=function(){function e(){vx(this,e),this.filters={}}return bx(e,[{key:"toJS",value:function(e){function t(e){var t=e.op;"="===t&&(t="==");var n=e.val;void 0!==e._val&&(n=e._val.toString(!0)),e.key&&"scale"===e.key.value?n=+n:"string"!=typeof n&&"object"!==mx(n)||(n="'"+n+"'");var r="attributes";return r+"&&"+r+e.key+"&&"+r+e.key+" "+t+n}var n=[];for(var r in this.filters)n.push(t(this.filters[r]));return n.join(" && ")}},{key:"toString",value:function(){var e=[];for(var t in this.filters)e.push(this.filters[t].id);return e.sort().join("\t")}},{key:"ev",value:function(e){for(var t in this.filters)this.filters[t].ev(e);return this}},{key:"clone",value:function(){var e=new r.CartoCSS.Tree.Filterset;for(var t in this.filters)e.filters[t]=this.filters[t];return e}},{key:"cloneWith",value:function(e){var t=[];for(var n in e.filters){var i=this.addable(e.filters[n]);if(!1===i)return!1;!0===i&&t.push(e.filters[n])}if(!t.length)return null;var o=new r.CartoCSS.Tree.Filterset;for(n in this.filters)o.filters[n]=this.filters[n];for(;n=t.shift();)o.add(n);return o}},{key:"addable",value:function(e){var t=e.key.toString(),n=e.val.toString();switch(n.match(/^[0-9]+(\.[0-9]*)?_match/)&&(n=parseFloat(n)),e.op){case"=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val.toString()==n&&null:void 0===this.filters[t+"!="+n]&&(!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n)&&(!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n)&&!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n))));case"=~":return!0;case"!=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val!==n&&null:void 0!==this.filters[t+"!="+n]?null:void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n?null:void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n?null:void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n)||null;case">":return t+"="in this.filters?!(this.filters[t+"="].val<=n)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n)&&(!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=n)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n)||null));case">=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val<n)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n)&&(!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=n)||null));case"<":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>=n)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=n)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n)||null));case"<=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>n)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=n)||null))}}},{key:"conflict",value:function(e){var t=e.key.toString(),n=e.val.toString();return isNaN(parseFloat(n))||(n=parseFloat(n)),("="===e.op&&void 0!==this.filters[t+"="]&&n!=this.filters[t+"="].val.toString()||"!="===e.op&&void 0!==this.filters[t+"="]&&n==this.filters[t+"="].val.toString()||"="===e.op&&void 0!==this.filters[t+"!="]&&n===this.filters[t+"!="].val.toString())&&e.toString()+" added to "+this.toString()+" produces an invalid filter"}},{key:"add",value:function(e,t){var n,r=e.key.toString(),i=e.op,o=this.conflict(e);if(o)return o;if("="===i){for(var a in this.filters)this.filters[a].key===r&&delete this.filters[a];this.filters[r+"="]=e}else if("!="===i)this.filters[r+"!="+e.val]=e;else if("=~"===i)this.filters[r+"=~"+e.val]=e;else if(">"===i){for(var s in this.filters)this.filters[s].key===r&&this.filters[s].val<=e.val&&delete this.filters[s];this.filters[r+">"]=e}else if(">="===i){for(var l in this.filters)n=+this.filters[l].val.toString(),this.filters[l].key===r&&n<e.val&&delete this.filters[l];void 0!==this.filters[r+"!="+e.val]?(delete this.filters[r+"!="+e.val],e.op=">",this.filters[r+">"]=e):this.filters[r+">="]=e}else if("<"===i){for(var u in this.filters)n=+this.filters[u].val.toString(),this.filters[u].key===r&&n>=e.val&&delete this.filters[u];this.filters[r+"<"]=e}else if("<="===i){for(var c in this.filters)n=+this.filters[c].val.toString(),this.filters[c].key===r&&n>e.val&&delete this.filters[c];void 0!==this.filters[r+"!="+e.val]?(delete this.filters[r+"!="+e.val],e.op="<",this.filters[r+"<"]=e):this.filters[r+"<="]=e}}}]),e}(),r.CartoCSS.Tree.Fontset=function e(t,n){vx(this,e),this.fonts=n,this.name="fontset-"+t.effects.length},r.CartoCSS.Tree.Invalid=function(){function e(t,n,r){vx(this,e),this.is="invalid",this.chunk=t,this.index=n,this.type="syntax",this.message=r||"Invalid code: "+this.chunk}return bx(e,[{key:"ev",value:function(e){return e.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"}}}]),e}(),r.CartoCSS.Tree.Keyword=function(){function e(t){vx(this,e),this.value=t;var n={transparent:"color",true:"boolean",false:"boolean"};this.is=n[t]?n[t]:"keyword"}return bx(e,[{key:"ev",value:function(){return this}}]),bx(e,[{key:"toString",value:function(){return this.value}}]),e}(),r.CartoCSS.Tree.Literal=function(){function e(t){vx(this,e),this.value=t||"",this.is="field"}return bx(e,[{key:"toString",value:function(){return this.value}},{key:"ev",value:function(){return this}}]),e}(),r.CartoCSS.Tree.Operation=function(){function e(t,n,r){vx(this,e),this.is="operation",this.op=t.trim(),this.operands=n,this.index=r}return bx(e,[{key:"ev",value:function(e){var t,n=this.operands[0].ev(e),i=this.operands[1].ev(e);return"undefined"===n.is||"undefined"===i.is?{is:"undefined",value:"undefined"}:(n instanceof r.CartoCSS.Tree.Dimension&&i instanceof r.CartoCSS.Tree.Color&&("*"===this.op||"+"===this.op?(t=i,i=n,n=t):e.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),n instanceof r.CartoCSS.Tree.Quoted&&i instanceof r.CartoCSS.Tree.Quoted&&"+"!==this.op?(e.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n instanceof r.CartoCSS.Tree.Field||i instanceof r.CartoCSS.Tree.Field||n instanceof r.CartoCSS.Tree.Literal||i instanceof r.CartoCSS.Tree.Literal?"color"===n.is||"color"===i.is?(e.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new r.CartoCSS.Tree.Literal(n.ev(e).toString(!0)+this.op+i.ev(e).toString(!0)):void 0===n.operate?(e.error({message:"Cannot do math with type "+n.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n.operate(e,this.op,i))}}]),e}(),r.CartoCSS.Tree.Quoted=function(){function e(t){vx(this,e),this.is="string",this.value=t||""}return bx(e,[{key:"toString",value:function(e){var t=this.value.replace(/&/g,"&amp;"),n=t.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return!0===e?"'"+n+"'":t}},{key:"ev",value:function(){return this}},{key:"operate",value:function(e,t,n){return new r.CartoCSS.Tree.Quoted(r.CartoCSS.Tree.operate(t,this.toString(),n.toString(this.contains_field)))}}]),e}(),r.CartoCSS.Tree.Reference={_validateValue:{font:function(e,t){return!e.validation_data||!e.validation_data.fonts||-1!=e.validation_data.fonts.indexOf(t)}},setData:function(e){this.data=e,this.selector_cache=function(e){var t={};for(var n in e.symbolizers)for(var r in e.symbolizers[n])e.symbolizers[n][r].hasOwnProperty("css")&&(t[e.symbolizers[n][r].css]=[e.symbolizers[n][r],n,r]);return t}(e),this.mapnikFunctions=function(e){var t={};for(var n in e.symbolizers)for(var r in e.symbolizers[n])if("functions"===e.symbolizers[n][r].type)for(var i=0;i<e.symbolizers[n][r].functions.length;i++){var o=e.symbolizers[n][r].functions[i];t[o[0]]=o[1]}return t}(e),this.required_cache=function(e){var t={};for(var n in e.symbolizers)for(var r in t[n]=[],e.symbolizers[n])e.symbolizers[n][r].required&&t[n].push(e.symbolizers[n][r].css);return t}(e)},setVersion:function(e){return!!r.CartoCSS.mapnik_reference.version.hasOwnProperty(e)&&(this.setData(r.CartoCSS.mapnik_reference.version[e]),!0)},selectorData:function(e,t){if(this.selector_cache&&this.selector_cache[e])return this.selector_cache[e][t]},validSelector:function(e){return!!this.selector_cache[e]},selectorName:function(e){return this.selectorData(e,2)},selector:function(e){return this.selectorData(e,0)},symbolizer:function(e){return this.selectorData(e,1)},requiredProperties:function(e,t){var n=this.required_cache[e];for(var r in n)if(!(n[r]in t))return"Property "+n[r]+" required for defining "+e+" styles."},isFont:function(e){return"font"===this.selector(e).validate},editDistance:function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;for(var n=[],r=0;r<=t.length;r++)n[r]=[r];for(var i=0;i<=e.length;i++)n[0][i]=i;for(r=1;r<=t.length;r++)for(i=1;i<=e.length;i++)t.charAt(r-1)===e.charAt(i-1)?n[r][i]=n[r-1][i-1]:n[r][i]=Math.min(n[r-1][i-1]+1,Math.min(n[r][i-1]+1,n[r-1][i]+1));return n[t.length][e.length]},validValue:function(e,t,n){var r;if(this.selector(t)){if("keyword"===n.value[0].is)return function(e,t){return"object"===mx(this.selector(t).type)?-1!==this.selector(t).type.indexOf(e.value[0].value):"string"===this.selector(t).type}(n,t);if("undefined"===n.value[0].is)return!0;if("numbers"===this.selector(t).type){for(r in n.value)if("float"!==n.value[r].is)return!1;return!0}if("tags"===this.selector(t).type){if(!n.value)return!1;if(!n.value[0].value)return"tag"===n.value[0].is;for(r=0;r<n.value[0].value.length;r++)if("tag"!==n.value[0].value[r].is)return!1;return!0}if("functions"==this.selector(t).type)return function(e,t){if("string"===e.value[0].is)return!0;for(var n in e.value)for(var r in e.value[n].value){if("call"!==e.value[n].value[r].is)return!1;var i=find(this.selector(t).functions,function(t){return t[0]===e.value[n].value[r].name});if(!(i&&-1===i[1]||i&&i[1]===e.value[n].value[r].args.length))return!1}return!0}(n,t);if("expression"===this.selector(t).type)return!0;if("unsigned"===this.selector(t).type)return"float"===n.value[0].is&&(n.value[0].round(),!0);if(this.selector(t).validate){for(r=0;r<n.value.length;r++)if(this.selector(t).type===n.value[r].is&&this._validateValue[this.selector(t).validate](e,n.value[r].value))return!0;return!1}return this.selector(t).type===n.value[0].is}return!1}},r.CartoCSS.Tree.Reference.setVersion("latest"),r.CartoCSS.Tree.Rule=function(){function e(t,n,i,o){vx(this,e),this.is="rule";var a=t.split("/");this.name=a.pop(),this.instance=a.length?a[0]:"__default__",this.value=n instanceof r.CartoCSS.Tree.Value?n:new r.CartoCSS.Tree.Value([n]),this.index=i,this.symbolizer=r.CartoCSS.Tree.Reference.symbolizer(this.name),this.filename=o,this.variable="@"===t.charAt(0)}return bx(e,[{key:"clone",value:function(){var e=Object.create(r.CartoCSS.Tree.Rule.prototype);return e.name=this.name,e.value=this.value,e.index=this.index,e.instance=this.instance,e.symbolizer=this.symbolizer,e.filename=this.filename,e.variable=this.variable,e}},{key:"updateID",value:function(){return this.id=this.zoom+"#"+this.instance+"#"+this.name}},{key:"toString",value:function(){return"["+r.CartoCSS.Tree.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value}},{key:"ev",value:function(e){return new r.CartoCSS.Tree.Rule(this.name,this.value.ev(e),this.index,this.filename)}}]),e}(),r.CartoCSS.Tree.Ruleset=function(){function e(t,n){vx(this,e),this.is="ruleset",this.selectors=t,this.rules=n,this._lookups={}}return bx(e,[{key:"ev",value:function(e){var t,n,i=new r.CartoCSS.Tree.Ruleset(this.selectors,this.rules.slice(0));for(i.root=this.root,e.frames.unshift(i),t=0;t<i.rules.length;t++)n=i.rules[t],i.rules[t]=n.ev?n.ev(e):n;return e.frames.shift(),i}},{key:"match",value:function(e){return!e||0===e.length}},{key:"variables",value:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(e,t){return t instanceof r.CartoCSS.Tree.Rule&&!0===t.variable&&(e[t.name]=t),e},{})}},{key:"variable",value:function(e){return this.variables()[e]}},{key:"rulesets",value:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(e){return e instanceof r.CartoCSS.Tree.Ruleset})}},{key:"find",value:function(e,t){t=t||this;var n=[],i=e.toString();return i in this._lookups?this._lookups[i]:(this.rulesets().forEach(function(i){if(i!==t)for(var o=0;o<i.selectors.length;o++)if(e.match(i.selectors[o])){e.elements.length>1?Array.prototype.push.apply(n,i.find(new r.CartoCSS.Tree.Selector(null,null,e.elements.slice(1)),t)):n.push(i);break}}),this._lookups[i]=n)}},{key:"evZooms",value:function(e){for(var t=0;t<this.selectors.length;t++){for(var n=r.CartoCSS.Tree.Zoom.all,i=0;i<this.selectors[t].zoom.length;i++)n=this.selectors[t].zoom[i].ev(e).zoom;this.selectors[t].zoom=n}}},{key:"flatten",value:function(e,t,n){var i,o,a=[];for(0===this.selectors.length&&(n.frames=n.frames.concat(this.rules)),this.evZooms(n),i=0;i<this.selectors.length;i++){var s=this.selectors[i];if(s.filters)if(t.length)for(o=0;o<t.length;o++){var l=t[o],u=l.filters.cloneWith(s.filters);if(null===u){if(l.zoom===s.zoom&&l.attachment===s.attachment&&l.elements.join()===s.elements.join()){a.push(l);continue}u=l.filters}else if(!u)continue;var c=Object.create(r.CartoCSS.Tree.Selector.prototype);c.filters=u,c.zoom=s.zoom,c.elements=l.elements.concat(s.elements),l.attachment&&s.attachment?c.attachment=l.attachment+"/"+s.attachment:c.attachment=s.attachment||l.attachment,c.conditions=l.conditions+s.conditions,c.index=s.index,a.push(c)}else a.push(s)}var f=[];for(i=0;i<this.rules.length;i++){var h=this.rules[i];h instanceof r.CartoCSS.Tree.Ruleset?h.flatten(e,a,n):h instanceof r.CartoCSS.Tree.Rule?f.push(h):h instanceof r.CartoCSS.Tree.Invalid&&n.error(h)}var p=!!f.length&&f[0].index;for(i=0;i<a.length;i++)!1!==p&&(a[i].index=p),e.push(new r.CartoCSS.Tree.Definition(a[i],f.slice()));return e}}]),e}(),r.CartoCSS.Tree.Selector=function(){function e(t,n,i,o,a,s){vx(this,e),this.elements=i||[],this.attachment=o,this.filters=t||{},this.zoom=void 0!==n?n:r.CartoCSS.Tree.Zoom.all,this.conditions=a,this.index=s}return bx(e,[{key:"specificity",value:function(){return this.elements.reduce(function(e,t){var n=t.specificity();return e[0]+=n[0],e[1]+=n[1],e},[0,0,this.conditions,this.index])}}]),e}(),r.CartoCSS.Tree.URL=function(){function e(t,n){vx(this,e),this.is="uri",this.value=t,this.paths=n}return bx(e,[{key:"toString",value:function(){return this.value.toString()}},{key:"ev",value:function(e){return new r.CartoCSS.Tree.URL(this.value.ev(e),this.paths)}}]),e}(),r.CartoCSS.Tree.Value=function(){function e(t){vx(this,e),this.is="value",this.value=t}return bx(e,[{key:"ev",value:function(e){return 1===this.value.length?this.value[0].ev(e):new r.CartoCSS.Tree.Value(this.value.map(function(t){return t.ev(e)}))}},{key:"toJS",value:function(e){var t=this.ev(e),n=t.toString();return"color"===t.is||"uri"===t.is||"string"===t.is||"keyword"===t.is?n="'"+n+"'":"field"===t.is?n=n.replace(/\[(.*)\]/g,"attributes['_match1']"):t.value&&"object"===mx(t.value)&&(n="["+n+"]"),"_value = "+n+";"}},{key:"toString",value:function(e,t,n,r){return this.value.map(function(t){return t.toString(e,r)}).join(n||", ")}},{key:"clone",value:function(){var e=Object.create(r.CartoCSS.Tree.Value.prototype);return Array.isArray(e)?e.value=this.value.slice():e.value=this.value,e.is=this.is,e}}]),e}(),r.CartoCSS.Tree.Variable=function(){function e(t,n,r){vx(this,e),this.is="variable",this.name=t,this.index=n,this.filename=r}return bx(e,[{key:"toString",value:function(){return this.name}},{key:"ev",value:function(e){if(this._css)return this._css;var t=e.frames.filter(function(e){return e.name===this.name}.bind(this));return t.length?t[0].value.ev(e):(e.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})}}]),e}(),r.CartoCSS.Tree.Zoom=function(){function e(t,n,r){vx(this,e),this.op=t,this.value=n,this.index=r}return bx(e,[{key:"setZoom",value:function(e){return this.zoom=e,this}},{key:"ev",value:function(e){var t=parseInt(this.value.ev(e).toString(),10);switch((t>r.CartoCSS.Tree.Zoom.maxZoom||t<0)&&e.error({message:"Only zoom levels between 0 and "+r.CartoCSS.Tree.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom="zoom && zoom === "+t,this;case">":this.zoom="zoom && zoom > "+t;break;case">=":this.zoom="zoom && zoom >= "+t;break;case"<":this.zoom="zoom && zoom < "+t;break;case"<=":this.zoom="zoom && zoom <= "+t;break;default:return this}return this}},{key:"toString",value:function(){for(var e="",t=0;t<=r.CartoCSS.Tree.Zoom.maxZoom;t++)e+=this.zoom&1<<t?"X":".";return e}}]),e}(),r.CartoCSS.Tree.Zoom.all=23,r.CartoCSS.Tree.Zoom.maxZoom=22,r.CartoCSS.Tree.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var _x=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,be.extend(this,t)};function wx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeStyle=_x;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ox=function(){function e(){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="SuperMap.Feature.ShapeParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}])&&wx(t.prototype,n),r&&wx(t,r),e}();function xx(e){return(xx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Px(e,t){return!t||"object"!==xx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tx(e,t,n){return(Tx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ex(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ex(e){return(Ex=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kx(e,t){return(kx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature=r.Feature||{},r.Feature.ShapeParameters=Ox;var Mx=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Px(this,Ex(t).call(this,e,n))).x=isNaN(e)?0:e,r.y=isNaN(n)?0:n,r.r=6,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Point",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kx(e,t)}(t,Ox),n=t,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,Tx(Ex(t.prototype),"destroy",this).call(this)}}])&&Cx(n.prototype,r),i&&Cx(n,i),t}();function Ax(e){return(Ax="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jx(e,t){return!t||"object"!==Ax(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rx(e,t,n){return(Rx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nx(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Nx(e){return(Nx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ix(e,t){return(Ix=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature=r.Feature||{},r.Feature.ShapeParameters.Point=Mx;var Dx=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=jx(this,Nx(t).call(this,e))).pointList=e,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Line",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ix(e,t)}(t,Ox),n=t,(r=[{key:"destroy",value:function(){this.pointList=null,Rx(Nx(t.prototype),"destroy",this).call(this)}}])&&Lx(n.prototype,r),i&&Lx(n,i),t}();function Fx(e){return(Fx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ux(e,t){return!t||"object"!==Fx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gx(e,t,n){return(Gx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zx(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function zx(e){return(zx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vx(e,t){return(Vx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature=r.Feature||{},r.Feature.ShapeParameters.Line=Dx;var Jx=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ux(this,zx(t).call(this,e))).pointList=e,n.holePolygonPointLists=null,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Polygon",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vx(e,t)}(t,Ox),n=t,(r=[{key:"destroy",value:function(){this.pointList=null,this.holePolygonPointLists=null,Gx(zx(t.prototype),"destroy",this).call(this)}}])&&Bx(n.prototype,r),i&&Bx(n,i),t}();function Hx(e){return(Hx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wx(e,t){return!t||"object"!==Hx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yx(e,t,n){return(Yx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qx(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Qx(e){return(Qx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xx(e,t){return(Xx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature=r.Feature||{},r.Feature.ShapeParameters.Polygon=Jx;var Kx=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Wx(this,Qx(t).call(this,e,n,r,i))).x=isNaN(e)?0:e,o.y=isNaN(e)?0:n,o.width=isNaN(r)?0:r,o.height=isNaN(i)?0:i,o.CLASS_NAME="SuperMap.Feature.ShapeParameters.Rectangle",o}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xx(e,t)}(t,Ox),n=t,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.width=null,this.height=null,Yx(Qx(t.prototype),"destroy",this).call(this)}}])&&qx(n.prototype,r),i&&qx(n,i),t}();function Zx(e){return(Zx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eC(e,t){return!t||"object"!==Zx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tC(e,t,n){return(tC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nC(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function nC(e){return(nC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rC(e,t){return(rC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature=r.Feature||{},r.Feature.ShapeParameters.Rectangle=Kx;var iC=function(e){function t(e,n,r,i,o,a,s){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(l=eC(this,nC(t).call(this,e,n,r,i,o,a,s))).x=isNaN(e)?0:e,l.y=isNaN(n)?0:n,l.r=isNaN(r)?0:r,l.startAngle=isNaN(i)?0:i,l.endAngle=isNaN(o)?0:o,l.r0=isNaN(a)?0:a,l.clockWise=s,l.CLASS_NAME="SuperMap.Feature.ShapeParameters.Sector",l}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rC(e,t)}(t,Ox),n=t,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,tC(nC(t.prototype),"destroy",this).call(this)}}])&&$x(n.prototype,r),i&&$x(n,i),t}();function oC(e){return(oC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sC(e,t){return!t||"object"!==oC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lC(e,t,n){return(lC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uC(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function uC(e){return(uC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cC(e,t){return(cC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature=r.Feature||{},r.Feature.ShapeParameters.Sector=iC;var fC=function(e){function t(e,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=sC(this,uC(t).call(this,e,n,r))).x=e,i.y=n,i.text=r,i.CLASS_NAME="SuperMap.Feature.ShapeParameters.Label",i}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cC(e,t)}(t,Ox),n=t,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.text=null,lC(uC(t.prototype),"destroy",this).call(this)}}])&&aC(n.prototype,r),i&&aC(n,i),t}();function hC(e){return(hC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yC(e,t){return!t||"object"!==hC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dC(e,t,n){return(dC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mC(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function mC(e){return(mC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vC(e,t){return(vC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature=r.Feature||{},r.Feature.ShapeParameters.Label=fC;var gC=function(e){function t(e,n,r,i,o,a,s,l,u){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(c=yC(this,mC(t).call(this,e,n,r,i,o,a,s,l,u))).x=e,c.y=n,c.image=r,c.width=i,c.height=o,c.sx=a,c.sy=s,c.sWidth=l,c.sHeight=u,c.CLASS_NAME="SuperMap.Feature.ShapeParameters.Image",c}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vC(e,t)}(t,Ox),n=t,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,dC(mC(t.prototype),"destroy",this).call(this)}}])&&pC(n.prototype,r),i&&pC(n,i),t}();function bC(e){return(bC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _C(e,t){return!t||"object"!==bC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wC(e,t,n){return(wC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=OC(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function OC(e){return(OC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xC(e,t){return(xC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature=r.Feature||{},r.Feature.ShapeParameters.Image=gC;var CC=function(e){function t(e,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=_C(this,OC(t).call(this,e,n,r))).x=isNaN(e)?0:e,i.y=isNaN(n)?0:n,i.r=isNaN(r)?0:r,i.CLASS_NAME="SuperMap.Feature.ShapeParameters.Circle",i}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xC(e,t)}(t,Ox),n=t,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,wC(OC(t.prototype),"destroy",this).call(this)}}])&&SC(n.prototype,r),i&&SC(n,i),t}();function PC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Feature=r.Feature||{},r.Feature.ShapeParameters.Circle=CC;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var TC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._handlers={},this.CLASS_NAME="SuperMap.LevelRenderer.Eventful"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(e,t,n){var r=this._handlers;return t&&e?(r[e]||(r[e]=[]),r[e].push({h:t,one:!0,ctx:n||this}),this):this}},{key:"bind",value:function(e,t,n){var r=this._handlers;return t&&e?(r[e]||(r[e]=[]),r[e].push({h:t,one:!1,ctx:n||this}),this):this}},{key:"unbind",value:function(e,t){var n=this._handlers;if(!e)return this._handlers={},this;if(t){if(n[e]){for(var r=[],i=0,o=n[e].length;i<o;i++)n[e][i].h!=t&&r.push(n[e][i]);n[e]=r}n[e]&&0===n[e].length&&delete n[e]}else delete n[e];return this}},{key:"dispatch",value:function(e){if(this._handlers[e]){var t=arguments,n=t.length;n>3&&(t=Array.prototype.slice.call(t,1));for(var r=this._handlers[e],i=r.length,o=0;o<i;){switch(n){case 1:r[o].h.call(r[o].ctx);break;case 2:r[o].h.call(r[o].ctx,t[1]);break;case 3:r[o].h.call(r[o].ctx,t[1],t[2]);break;default:r[o].h.apply(r[o].ctx,t)}r[o].one?(r.splice(o,1),i--):o++}}return this}},{key:"dispatchWithContext",value:function(e){if(this._handlers[e]){var t=arguments,n=t.length;n>4&&(t=Array.prototype.slice.call(t,1,t.length-1));for(var r=t[t.length-1],i=this._handlers[e],o=i.length,a=0;a<o;){switch(n){case 1:i[a].h.call(r);break;case 2:i[a].h.call(r,t[1]);break;case 3:i[a].h.call(r,t[1],t[2]);break;default:i[a].h.apply(r,t)}i[a].one?(i.splice(a,1),o--):a++}}return this}}])&&PC(t.prototype,n),r&&PC(t,r),e}();function EC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var kC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Vector"}var t,n,r;return t=e,(n=[{key:"create",value:function(e,t){var n=new(0,this.ArrayCtor)(2);return n[0]=e||0,n[1]=t||0,n}},{key:"copy",value:function(e,t){return e[0]=t[0],e[1]=t[1],e}},{key:"set",value:function(e,t,n){return e[0]=t,e[1]=n,e}},{key:"add",value:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}},{key:"scaleAndAdd",value:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}},{key:"sub",value:function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}},{key:"len",value:function(e){return Math.sqrt(this.lenSquare(e))}},{key:"lenSquare",value:function(e){return e[0]*e[0]+e[1]*e[1]}},{key:"mul",value:function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}},{key:"div",value:function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}},{key:"dot",value:function(e,t){return e[0]*t[0]+e[1]*t[1]}},{key:"scale",value:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}},{key:"normalize",value:function(e,t){var n=this.len(t);return 0===n?(e[0]=0,e[1]=0):(e[0]=t[0]/n,e[1]=t[1]/n),e}},{key:"distance",value:function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}},{key:"distanceSquare",value:function(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}},{key:"negate",value:function(e,t){return e[0]=-t[0],e[1]=-t[1],e}},{key:"lerp",value:function(e,t,n,r){return e[0]=t[0]+r*(n[0]-t[0]),e[1]=t[1]+r*(n[1]-t[1]),e}},{key:"applyTransform",value:function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}},{key:"min",value:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}},{key:"max",value:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}},{key:"length",value:function(e){return this.len(e)}},{key:"lengthSquare",value:function(e){return this.lenSquare(e)}},{key:"dist",value:function(e,t){return this.distance(e,t)}},{key:"distSquare",value:function(e,t){return this.distanceSquare(e,t)}}])&&EC(t.prototype,n),r&&EC(t,r),e}();function MC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var AC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.vector=new kC,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Curve"}var t,n,r;return t=e,(n=[{key:"isAroundZero",value:function(e){return e>-this.EPSILON&&e<this.EPSILON}},{key:"isNotAroundZero",value:function(e){return e>this.EPSILON||e<-this.EPSILON}},{key:"cubicAt",value:function(e,t,n,r,i){var o=1-i;return o*o*(o*e+3*i*t)+i*i*(i*r+3*o*n)}},{key:"cubicDerivativeAt",value:function(e,t,n,r,i){var o=1-i;return 3*(((t-e)*o+2*(n-t)*i)*o+(r-n)*i*i)}},{key:"cubicRootAt",value:function(e,t,n,r,i,o){var a=r+3*(t-n)-e,s=3*(n-2*t+e),l=3*(t-e),u=e-i,c=s*s-3*a*l,f=s*l-9*a*u,h=l*l-3*s*u,p=0;if(this.isAroundZero(c)&&this.isAroundZero(f))if(this.isAroundZero(s))o[0]=0;else{var y=-l/s;y>=0&&y<=1&&(o[p++]=y)}else{var d=f*f-4*c*h;if(this.isAroundZero(d)){var m=f/c,v=-s/a+m,g=-m/2;v>=0&&v<=1&&(o[p++]=v),g>=0&&g<=1&&(o[p++]=g)}else if(d>0){var b=Math.sqrt(d),S=c*s+1.5*a*(-f+b),_=c*s+1.5*a*(-f-b),w=(-s-((S=S<0?-Math.pow(-S,this.ONE_THIRD):Math.pow(S,this.ONE_THIRD))+(_=_<0?-Math.pow(-_,this.ONE_THIRD):Math.pow(_,this.ONE_THIRD))))/(3*a);w>=0&&w<=1&&(o[p++]=w)}else{var O=(2*c*s-3*a*f)/(2*Math.sqrt(c*c*c)),x=Math.acos(O)/3,C=Math.sqrt(c),P=Math.cos(x),T=(-s-2*C*P)/(3*a),E=(-s+C*(P+this.THREE_SQRT*Math.sin(x)))/(3*a),k=(-s+C*(P-this.THREE_SQRT*Math.sin(x)))/(3*a);T>=0&&T<=1&&(o[p++]=T),E>=0&&E<=1&&(o[p++]=E),k>=0&&k<=1&&(o[p++]=k)}}return p}},{key:"cubicExtrema",value:function(e,t,n,r,i){var o=6*n-12*t+6*e,a=9*t+3*r-3*e-9*n,s=3*t-3*e,l=0;if(this.isAroundZero(a)){if(this.isNotAroundZero(o)){var u=-s/o;u>=0&&u<=1&&(i[l++]=u)}}else{var c=o*o-4*a*s;if(this.isAroundZero(c))i[0]=-o/(2*a);else if(c>0){var f=Math.sqrt(c),h=(-o+f)/(2*a),p=(-o-f)/(2*a);h>=0&&h<=1&&(i[l++]=h),p>=0&&p<=1&&(i[l++]=p)}}return l}},{key:"cubicSubdivide",value:function(e,t,n,r,i,o){var a=(t-e)*i+e,s=(n-t)*i+t,l=(r-n)*i+n,u=(s-a)*i+a,c=(l-s)*i+s,f=(c-u)*i+u;o[0]=e,o[1]=a,o[2]=u,o[3]=f,o[4]=f,o[5]=c,o[6]=l,o[7]=r}},{key:"cubicProjectPoint",value:function(e,t,n,r,i,o,a,s,l,u,c){var f,h=this.vector.create(),p=this.vector.create(),y=this.vector.create(),d=.005,m=1/0;h[0]=l,h[1]=u;for(var v=0;v<1;v+=.05){p[0]=this.cubicAt(e,n,i,a,v),p[1]=this.cubicAt(t,r,o,s,v);var g=this.vector.distSquare(h,p);g<m&&(f=v,m=g)}m=1/0;for(var b=0;b<32&&!(d<this.EPSILON);b++){var S=f-d,_=f+d;p[0]=this.cubicAt(e,n,i,a,S),p[1]=this.cubicAt(t,r,o,s,S);var w=this.vector.distSquare(p,h);if(S>=0&&w<m)f=S,m=w;else{y[0]=this.cubicAt(e,n,i,a,_),y[1]=this.cubicAt(t,r,o,s,_);var O=this.vector.distSquare(y,h);_<=1&&O<m?(f=_,m=O):d*=.5}}return c&&(c[0]=this.cubicAt(e,n,i,a,f),c[1]=this.cubicAt(t,r,o,s,f)),Math.sqrt(m)}},{key:"quadraticAt",value:function(e,t,n,r){var i=1-r;return i*(i*e+2*r*t)+r*r*n}},{key:"quadraticDerivativeAt",value:function(e,t,n,r){return 2*((1-r)*(t-e)+r*(n-t))}},{key:"quadraticRootAt",value:function(e,t,n,r,i){var o=e-2*t+n,a=2*(t-e),s=e-r,l=0;if(this.isAroundZero(o)){if(this.isNotAroundZero(a)){var u=-s/a;u>=0&&u<=1&&(i[l++]=u)}}else{var c=a*a-4*o*s;if(this.isAroundZero(c)){var f=-a/(2*o);f>=0&&f<=1&&(i[l++]=f)}else if(c>0){var h=Math.sqrt(c),p=(-a+h)/(2*o),y=(-a-h)/(2*o);p>=0&&p<=1&&(i[l++]=p),y>=0&&y<=1&&(i[l++]=y)}}return l}},{key:"quadraticExtremum",value:function(e,t,n){var r=e+n-2*t;return 0===r?.5:(e-t)/r}},{key:"quadraticProjectPoint",value:function(e,t,n,r,i,o,a,s,l){var u,c=this.vector.create(),f=this.vector.create(),h=this.vector.create(),p=.005,y=1/0;c[0]=a,c[1]=s;for(var d=0;d<1;d+=.05){f[0]=this.quadraticAt(e,n,i,d),f[1]=this.quadraticAt(t,r,o,d);var m=this.vector.distSquare(c,f);m<y&&(u=d,y=m)}y=1/0;for(var v=0;v<32&&!(p<this.EPSILON);v++){var g=u-p,b=u+p;f[0]=this.quadraticAt(e,n,i,g),f[1]=this.quadraticAt(t,r,o,g);var S=this.vector.distSquare(f,c);if(g>=0&&S<y)u=g,y=S;else{h[0]=this.quadraticAt(e,n,i,b),h[1]=this.quadraticAt(t,r,o,b);var _=this.vector.distSquare(h,c);b<=1&&_<y?(u=b,y=_):p*=.5}}return l&&(l[0]=this.quadraticAt(e,n,i,u),l[1]=this.quadraticAt(t,r,o,u)),Math.sqrt(y)}}])&&MC(t.prototype,n),r&&MC(t,r),e}();function LC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var jC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.util=new ax,this.curve=new AC,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Area"}var t,n,r;return t=e,(n=[{key:"normalizeRadian",value:function(e){return(e%=this.PI2)<0&&(e+=this.PI2),e}},{key:"isInside",value:function(e,t,n,r){if(!t||!e)return!1;var i=e.type;this._ctx=this._ctx||this.util.getContext();var o=this._mathMethod(e,t,n,r);if(void 0!==o)return o;if(e.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(e,this._ctx,t,n,r);switch(i){case"ellipse":case"smicellipse":return!0;case"trochoid":var a="out"==t.location?t.r1+t.r2+t.d:t.r1-t.r2+t.d;return this.isInsideCircle(t,n,r,a);case"rose":return this.isInsideCircle(t,n,r,t.maxr);default:return!1}}},{key:"_mathMethod",value:function(e,t,n,r){switch(e.type){case"bezier-curve":return void 0===t.cpX2?this.isInsideQuadraticStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.xEnd,t.yEnd,t.lineWidth,n,r):this.isInsideCubicStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.cpX2,t.cpY2,t.xEnd,t.yEnd,t.lineWidth,n,r);case"line":return this.isInsideLine(t.xStart,t.yStart,t.xEnd,t.yEnd,t.lineWidth,n,r);case"broken-line":return this.isInsideBrokenLine(t.pointList,t.lineWidth,n,r);case"smicbroken-line":var i=n,o=r;return e.refOriginalPosition&&(i=n-e.refOriginalPosition[0],o=r-e.refOriginalPosition[1]),this.isInsideBrokenLine(t.pointList,t.lineWidth,i,o);case"ring":return this.isInsideRing(t.x,t.y,t.r0,t.r,n,r);case"smicring":var a=t.x,s=t.y;return e.refOriginalPosition&&(a=t.x+e.refOriginalPosition[0],s=t.y+e.refOriginalPosition[1]),this.isInsideRing(a,s,t.r0,t.r,n,r);case"circle":return this.isInsideCircle(t.x,t.y,t.r,n,r);case"smicpoint":var l=n,u=r;return e.refOriginalPosition&&(l=n-e.refOriginalPosition[0],u=r-e.refOriginalPosition[1]),this.isInsideCircle(t.x,t.y,t.r,l,u);case"sector":var c=t.startAngle*Math.PI/180,f=t.endAngle*Math.PI/180;return t.clockWise||(c=-c,f=-f),this.isInsideSector(t.x,t.y,t.r0,t.r,c,f,!t.clockWise,n,r);case"smicsector":var h=t.startAngle*Math.PI/180,p=t.endAngle*Math.PI/180;t.clockWise||(h=-h,p=-p);var y=t.x,d=t.y;return e.refOriginalPosition&&(y=t.x+e.refOriginalPosition[0],d=t.y+e.refOriginalPosition[1]),this.isInsideSector(y,d,t.r0,t.r,h,p,!t.clockWise,n,r);case"path":return this.isInsidePath(t.pathArray,Math.max(t.lineWidth,5),t.brushType,n,r);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(t.pointList,n,r);case"smicpolygon":var m=n,v=r;if(e.refOriginalPosition&&(m=n-e.refOriginalPosition[0],v=r-e.refOriginalPosition[1]),e.holePolygonPointLists&&e.holePolygonPointLists.length>0){for(var g=this.isInsidePolygon(t.pointList,m,v),b=e.holePolygonPointLists,S=!1,_=0,w=b.length;_<w;_++){var O=b[_];!0===this.isInsidePolygon(O,m,v)&&(S=!0)}return!0===g&&!1===S}return this.isInsidePolygon(t.pointList,m,v);case"text":var x=t.__rect||e.getRect(t);return this.isInsideRect(x.x,x.y,x.width,x.height,n,r);case"smictext":var C=e.getTextBackground(t);return this.isInsidePolygon(C,n,r);case"rectangle":case"image":return this.isInsideRect(t.x,t.y,t.width,t.height,n,r);case"smicimage":var P=t.x,T=t.y;return e.refOriginalPosition&&(P=t.x+e.refOriginalPosition[0],T=t.y+e.refOriginalPosition[1]),this.isInsideRect(P,T,t.width,t.height,n,r)}}},{key:"_buildPathMethod",value:function(e,t,n,r,i){return t.beginPath(),e.buildPath(t,n),t.closePath(),t.isPointInPath(r,i)}},{key:"isOutside",value:function(e,t,n,r){return!this.isInside(e,t,n,r)}},{key:"isInsideLine",value:function(e,t,n,r,i,o,a){if(0===i)return!1;var s=Math.max(i,5),l=0;if(a>t+s&&a>r+s||a<t-s&&a<r-s||o>e+s&&o>n+s||o<e-s&&o<n-s)return!1;if(e===n)return Math.abs(o-e)<=s/2;var u=(l=(t-r)/(e-n))*o-a+(e*r-n*t)/(e-n);return u*u/(l*l+1)<=s/2*s/2}},{key:"isInsideCubicStroke",value:function(e,t,n,r,i,o,a,s,l,u,c){if(0===l)return!1;var f=Math.max(l,5);return!(c>t+f&&c>r+f&&c>o+f&&c>s+f||c<t-f&&c<r-f&&c<o-f&&c<s-f||u>e+f&&u>n+f&&u>i+f&&u>a+f||u<e-f&&u<n-f&&u<i-f&&u<a-f)&&this.curve.cubicProjectPoint(e,t,n,r,i,o,a,s,u,c,null)<=f/2}},{key:"isInsideQuadraticStroke",value:function(e,t,n,r,i,o,a,s,l){if(0===a)return!1;var u=Math.max(a,5);return!(l>t+u&&l>r+u&&l>o+u||l<t-u&&l<r-u&&l<o-u||s>e+u&&s>n+u&&s>i+u||s<e-u&&s<n-u&&s<i-u)&&this.curve.quadraticProjectPoint(e,t,n,r,i,o,s,l,null)<=u/2}},{key:"isInsideArcStroke",value:function(e,t,n,r,i,o,a,s,l){var u=this.PI2;if(0===a)return!1;var c=Math.max(a,5);s-=e,l-=t;var f=Math.sqrt(s*s+l*l);if(f-c>n||f+c<n)return!1;if(Math.abs(r-i)>=u)return!0;if(o){var h=r;r=this.normalizeRadian(i),i=this.normalizeRadian(h)}else r=this.normalizeRadian(r),i=this.normalizeRadian(i);r>i&&(i+=u);var p=Math.atan2(l,s);return p<0&&(p+=u),p>=r&&p<=i||p+u>=r&&p+u<=i}},{key:"isInsideBrokenLine",value:function(e,t,n,r){for(var i=Math.max(t,10),o=0,a=e.length-1;o<a;o++){var s=e[o][0],l=e[o][1],u=e[o+1][0],c=e[o+1][1];if(this.isInsideLine(s,l,u,c,i,n,r))return!0}return!1}},{key:"isInsideRing",value:function(e,t,n,r,i,o){var a=(i-e)*(i-e)+(o-t)*(o-t);return a<r*r&&a>n*n}},{key:"isInsideRect",value:function(e,t,n,r,i,o){return i>=e&&i<=e+n&&o>=t&&o<=t+r}},{key:"isInsideCircle",value:function(e,t,n,r,i){return(r-e)*(r-e)+(i-t)*(i-t)<n*n}},{key:"isInsideSector",value:function(e,t,n,r,i,o,a,s,l){return this.isInsideArcStroke(e,t,(n+r)/2,i,o,a,r-n,s,l)}},{key:"isInsidePolygon",value:function(e,t,n){for(var r=e.length,i=0,o=0,a=r-1;o<r;o++){var s=e[a][0],l=e[a][1],u=e[o][0],c=e[o][1];i+=this.windingLine(s,l,u,c,t,n),a=o}return 0!==i}},{key:"windingLine",value:function(e,t,n,r,i,o){return o>t&&o>r||o<t&&o<r?0:r==t?0:(o-t)/(r-t)*(n-e)+e>i?r<t?1:-1:0}},{key:"swapExtrema",value:function(){var e=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=e}},{key:"windingCubic",value:function(e,t,n,r,i,o,a,s,l,u){var c=this.curve,f=this.roots,h=this.extrema;if(u>t&&u>r&&u>o&&u>s||u<t&&u<r&&u<o&&u<s)return 0;var p=c.cubicRootAt(t,r,o,s,u,f);if(0===p)return 0;for(var y,d,m=0,v=-1,g=0;g<p;g++){var b=f[g];c.cubicAt(e,n,i,a,b)<l||(v<0&&(v=c.cubicExtrema(t,r,o,s,h),h[1]<h[0]&&v>1&&this.swapExtrema(),y=c.cubicAt(t,r,o,s,h[0]),v>1&&(d=c.cubicAt(t,r,o,s,h[1]))),2==v?b<h[0]?m+=y<t?1:-1:b<h[1]?m+=d<y?1:-1:m+=s<d?1:-1:b<h[0]?m+=y<t?1:-1:m+=s<y?1:-1)}return m}},{key:"windingQuadratic",value:function(e,t,n,r,i,o,a,s){var l=this.curve,u=this.roots;if(s>t&&s>r&&s>o||s<t&&s<r&&s<o)return 0;var c=l.quadraticRootAt(t,r,o,s,u);if(0===c)return 0;var f=l.quadraticExtremum(t,r,o);if(f>=0&&f<=1){for(var h=0,p=l.quadraticAt(t,r,o,f),y=0;y<c;y++){l.quadraticAt(e,n,i,u[y])>a||(u[y]<f?h+=p<t?1:-1:h+=o<p?1:-1)}return h}return l.quadraticAt(e,n,i,u[0])>a?0:o<t?1:-1}},{key:"windingArc",value:function(e,t,n,r,i,o,a,s){var l=this.roots,u=this.PI2;if((s-=t)>n||s<-n)return 0;var c=Math.sqrt(n*n-s*s);if(l[0]=-c,l[1]=c,Math.abs(r-i)>=u){r=0,i=u;var f=o?1:-1;return a>=l[0]+e&&a<=l[1]+e?f:0}if(o){var h=r;r=this.normalizeRadian(i),i=this.normalizeRadian(h)}else r=this.normalizeRadian(r),i=this.normalizeRadian(i);r>i&&(i+=u);for(var p=0,y=0;y<2;y++){var d=l[y];if(d+e>a){var m=Math.atan2(s,d),v=o?1:-1;m<0&&(m=u+m),(m>=r&&m<=i||m+u>=r&&m+u<=i)&&(m>Math.PI/2&&m<1.5*Math.PI&&(v=-v),p+=v)}}return p}},{key:"isInsidePath",value:function(e,t,n,r,i){for(var o=0,a=0,s=0,l=0,u=0,c=!0,f=!0,h="stroke"===(n=n||"fill")||"both"===n,p="fill"===n||"both"===n,y=0;y<e.length;y++){var d=e[y],m=d.points;if(c||"M"===d.command){if(y>0&&(p&&(o+=this.windingLine(a,s,l,u,r,i)),0!==o))return!0;l=m[m.length-2],u=m[m.length-1],c=!1,f&&"A"!==d.command&&(f=!1,a=l,s=u)}switch(d.command){case"M":a=m[0],s=m[1];break;case"L":if(h&&this.isInsideLine(a,s,m[0],m[1],t,r,i))return!0;p&&(o+=this.windingLine(a,s,m[0],m[1],r,i)),a=m[0],s=m[1];break;case"C":if(h&&this.isInsideCubicStroke(a,s,m[0],m[1],m[2],m[3],m[4],m[5],t,r,i))return!0;p&&(o+=this.windingCubic(a,s,m[0],m[1],m[2],m[3],m[4],m[5],r,i)),a=m[4],s=m[5];break;case"Q":if(h&&this.isInsideQuadraticStroke(a,s,m[0],m[1],m[2],m[3],t,r,i))return!0;p&&(o+=this.windingQuadratic(a,s,m[0],m[1],m[2],m[3],r,i)),a=m[2],s=m[3];break;case"A":var v=m[0],g=m[1],b=m[2],S=m[3],_=m[4],w=m[5],O=Math.cos(_)*b+v,x=Math.sin(_)*S+g;f?(f=!1,l=O,u=x):o+=this.windingLine(a,s,O,x);var C=(r-v)*S/b+v;if(h&&this.isInsideArcStroke(v,g,S,_,_+w,1-m[7],t,C,i))return!0;p&&(o+=this.windingArc(v,g,S,_,_+w,1-m[7],C,i)),a=Math.cos(_+w)*b+v,s=Math.sin(_+w)*S+g;break;case"z":if(h&&this.isInsideLine(a,s,l,u,t,r,i))return!0;c=!0}}return p&&(o+=this.windingLine(a,s,l,u,r,i)),0!==o}},{key:"getTextWidth",value:function(e,t){var n=e+":"+t;if(this._textWidthCache[n])return this._textWidthCache[n];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t);for(var r=0,i=0,o=(e=(e+"").split("\n")).length;i<o;i++)r=Math.max(this._ctx.measureText(e[i]).width,r);return this._ctx.restore(),this._textWidthCache[n]=r,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),r}},{key:"getTextHeight",value:function(e,t){var n=e+":"+t;if(this._textHeightCache[n])return this._textHeightCache[n];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t),e=(e+"").split("\n");var r=(this._ctx.measureText("ZH").width+2)*e.length;return this._ctx.restore(),this._textHeightCache[n]=r,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),r}}])&&LC(t.prototype,n),r&&LC(t,r),e}();function RC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var NC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.ComputeBoundingBox"}var t,n,r;return t=e,(n=[{key:"computeBoundingBox",value:function(e,t,n){if(0!==e.length){for(var r=e[0][0],i=e[0][0],o=e[0][1],a=e[0][1],s=1;s<e.length;s++){var l=e[s];l[0]<r&&(r=l[0]),l[0]>i&&(i=l[0]),l[1]<o&&(o=l[1]),l[1]>a&&(a=l[1])}t[0]=r,t[1]=o,n[0]=i,n[1]=a}}},{key:"cubeBezier",value:function(e,t,n,r,i,o){var a=new AC,s=[];a.cubicExtrema(e[0],t[0],n[0],r[0],s);for(var l=0;l<s.length;l++)s[l]=a.cubicAt(e[0],t[0],n[0],r[0],s[l]);var u=[];a.cubicExtrema(e[1],t[1],n[1],r[1],u);for(var c=0;c<u.length;c++)u[c]=a.cubicAt(e[1],t[1],n[1],r[1],u[c]);s.push(e[0],r[0]),u.push(e[1],r[1]);var f=Math.min.apply(null,s),h=Math.max.apply(null,s),p=Math.min.apply(null,u),y=Math.max.apply(null,u);i[0]=f,i[1]=p,o[0]=h,o[1]=y}},{key:"quadraticBezier",value:function(e,t,n,r,i){var o=new AC,a=o.quadraticExtremum(e[0],t[0],n[0]),s=o.quadraticExtremum(e[1],t[1],n[1]),l=1-(a=Math.max(Math.min(a,1),0)),u=1-(s=Math.max(Math.min(s,1),0)),c=l*l*e[0]+2*l*a*t[0]+a*a*n[0],f=l*l*e[1]+2*l*a*t[1]+a*a*n[1],h=u*u*e[0]+2*u*s*t[0]+s*s*n[0],p=u*u*e[1]+2*u*s*t[1]+s*s*n[1];r[0]=Math.min(e[0],n[0],c,h),r[1]=Math.min(e[1],n[1],f,p),i[0]=Math.max(e[0],n[0],c,h),i[1]=Math.max(e[1],n[1],f,p)}},{key:"arc",value:function(e,t,n,r,i,o,a,s){var l=new kC,u=l.create(),c=l.create(),f=l.create();if(u[0]=Math.cos(r)*n+e,u[1]=Math.sin(r)*n+t,c[0]=Math.cos(i)*n+e,c[1]=Math.sin(i)*n+t,l.min(a,u,c),l.max(s,u,c),(r%=2*Math.PI)<0&&(r+=2*Math.PI),(i%=2*Math.PI)<0&&(i+=2*Math.PI),r>i&&!o?i+=2*Math.PI:r<i&&o&&(r+=2*Math.PI),o){var h=i;i=r,r=h}for(var p=0;p<i;p+=Math.PI/2)p>r&&(f[0]=Math.cos(p)*n+e,f[1]=Math.sin(p)*n+t,l.min(a,f,a),l.max(s,f,s))}}])&&RC(t.prototype,n),r&&RC(t,r),e}();function IC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var DC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Env";var t,n,r,i,o,a,s,l,u,c,f,h,p,y,d,m,v,g,b,S,_,w=this;return t=navigator.userAgent,n=w.os={},r=w.browser={},i=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),o=t.match(/(Android);?[\s\/]+([\d.]+)?/),a=t.match(/(iPad).*OS\s([\d_]+)/),s=t.match(/(iPod)(.*OS\s([\d_]+))?/),l=!a&&t.match(/(iPhone\sOS)\s([\d_]+)/),u=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=u&&t.match(/TouchPad/),f=t.match(/Kindle\/([\d.]+)/),h=t.match(/Silk\/([\d._]+)/),p=t.match(/(BlackBerry).*Version\/([\d.]+)/),y=t.match(/(BB10).*Version\/([\d.]+)/),d=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),m=t.match(/PlayBook/),v=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),g=t.match(/Firefox\/([\d.]+)/),b=t.match(/MSIE ([\d.]+)/),S=i&&t.match(/Mobile\//)&&!v,_=t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!v,(r.webkit=!!i)&&(r.version=i[1]),o&&(n.android=!0,n.version=o[2]),l&&!s&&(n.ios=n.iphone=!0,n.version=l[2].replace(/_/g,".")),a&&(n.ios=n.ipad=!0,n.version=a[2].replace(/_/g,".")),s&&(n.ios=n.ipod=!0,n.version=s[3]?s[3].replace(/_/g,"."):null),u&&(n.webos=!0,n.version=u[2]),c&&(n.touchpad=!0),p&&(n.blackberry=!0,n.version=p[2]),y&&(n.bb10=!0,n.version=y[2]),d&&(n.rimtabletos=!0,n.version=d[2]),m&&(r.playbook=!0),f&&(n.kindle=!0,n.version=f[1]),h&&(r.silk=!0,r.version=h[1]),!h&&n.android&&t.match(/Kindle Fire/)&&(r.silk=!0),v&&(r.chrome=!0,r.version=v[1]),g&&(r.firefox=!0,r.version=g[1]),b&&(r.ie=!0,r.version=b[1]),S&&(t.match(/Safari/)||n.ios)&&(r.safari=!0),_&&(r.webview=!0),b&&(r.ie=!0,r.version=b[1]),n.tablet=!!(a||m||o&&!t.match(/Mobile/)||g&&t.match(/Tablet/)||b&&!t.match(/Phone/)&&t.match(/Touch/)),n.phone=!(n.tablet||n.ipod||!(o||l||u||p||y||v&&t.match(/Android/)||v&&t.match(/CriOS\/([\d.]+)/)||g&&t.match(/Mobile/)||b&&t.match(/Touch/))),{browser:r,os:n,canvasSupported:!!document.createElement("canvas").getContext}}var t,n,r;return t=e,(n=[{key:"destory",value:function(){return!0}}])&&IC(t.prototype,n),r&&IC(t,r),e}();function FC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var BC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stop="function"==typeof window.addEventListener?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Event"}var t,n,r;return t=e,(n=[{key:"getX",value:function(e){return void 0!==e.zrenderX&&e.zrenderX||void 0!==e.offsetX&&e.offsetX||void 0!==e.layerX&&e.layerX||void 0!==e.clientX&&e.clientX}},{key:"getY",value:function(e){return void 0!==e.zrenderY&&e.zrenderY||void 0!==e.offsetY&&e.offsetY||void 0!==e.layerY&&e.layerY||void 0!==e.clientY&&e.clientY}},{key:"getDelta",value:function(e){return void 0!==e.zrenderDelta&&e.zrenderDelta||void 0!==e.wheelDelta&&e.wheelDelta||void 0!==e.detail&&-e.detail}}])&&FC(t.prototype,n),r&&FC(t,r),e}();function UC(e){return(UC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Http"}var t,n,r;return t=e,(n=[{key:"get",value:function(e,t,n){if("object"===UC(e)){var r=e;e=r.url,t=r.onsuccess,n=r.onerror}var i=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");i.open("GET",e,!0),i.onreadystatechange=function(){4==i.readyState&&(i.status>=200&&i.status<300||304===i.status?t&&t(i.responseText):n&&n(),i.onreadystatechange=new Function,i=null)},i.send(null)}}])&&GC(t.prototype,n),r&&GC(t,r),e}();
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var VC=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};function JC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}VC.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},VC.catchBrushException=!1,VC.debugMode=0;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var HC=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Log",function(){if(0!==VC.debugMode)if(1==VC.debugMode)for(var e in arguments)throw new Error(arguments[e]);else if(VC.debugMode>1)for(var t in arguments)console.log(arguments[t])}}var t,n,r;return t=e,(n=[{key:"destory",value:function(){return!0}}])&&JC(t.prototype,n),r&&JC(t,r),e}();function qC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var WC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._radians=window.Math.PI/180,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Math"}var t,n,r;return t=e,(n=[{key:"sin",value:function(e,t){return window.Math.sin(t?e*this._radians:e)}},{key:"cos",value:function(e,t){return window.Math.cos(t?e*this._radians:e)}},{key:"degreeToRadian",value:function(e){return e*this._radians}},{key:"radianToDegree",value:function(e){return e/this._radians}}])&&qC(t.prototype,n),r&&qC(t,r),e}();function YC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var QC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Matrix"}var t,n,r;return t=e,(n=[{key:"create",value:function(){var e=new(0,this.ArrayCtor)(6);return this.identity(e),e}},{key:"identity",value:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}},{key:"copy",value:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}},{key:"mul",value:function(e,t,n){return e[0]=t[0]*n[0]+t[2]*n[1],e[1]=t[1]*n[0]+t[3]*n[1],e[2]=t[0]*n[2]+t[2]*n[3],e[3]=t[1]*n[2]+t[3]*n[3],e[4]=t[0]*n[4]+t[2]*n[5]+t[4],e[5]=t[1]*n[4]+t[3]*n[5]+t[5],e}},{key:"translate",value:function(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e}},{key:"rotate",value:function(e,t,n){var r=t[0],i=t[2],o=t[4],a=t[1],s=t[3],l=t[5],u=Math.sin(n),c=Math.cos(n);return e[0]=r*c+a*u,e[1]=-r*u+a*c,e[2]=i*c+s*u,e[3]=-i*u+c*s,e[4]=c*o+u*l,e[5]=c*l-u*o,e}},{key:"scale",value:function(e,t,n){var r=n[0],i=n[1];return e[0]=t[0]*r,e[1]=t[1]*i,e[2]=t[2]*r,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*i,e}},{key:"invert",value:function(e,t){var n=t[0],r=t[2],i=t[4],o=t[1],a=t[3],s=t[5],l=n*a-o*r;return l?(l=1/l,e[0]=a*l,e[1]=-o*l,e[2]=-r*l,e[3]=n*l,e[4]=(r*s-a*i)*l,e[5]=(o*i-n*s)*l,e):null}},{key:"mulVector",value:function(e,t,n){var r=t[0],i=t[2],o=t[4],a=t[1],s=t[3],l=t[5];return e[0]=n[0]*r+n[1]*i+o,e[1]=n[0]*a+n[1]*s+l,e}}])&&YC(t.prototype,n),r&&YC(t,r),e}();function XC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var KC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"SUtil_smoothBezier",value:function(t,n,r,i,o){o&&2===o||(o=[0,0]);var a,s,l=o,u=[],c=[],f=[],h=[],p=!!i;if(p){a=[1/0,1/0],s=[-1/0,-1/0];for(var y=t.length,d=0;d<y;d++)e.Util_vector.min(a,a,[t[d][0]+l[0],t[d][1]+l[1]]),e.Util_vector.max(s,s,[t[d][0]+l[0],t[d][1]+l[1]]);e.Util_vector.min(a,a,i[0]),e.Util_vector.max(s,s,i[1])}for(var m=t.length,v=0;v<m;v++){var g=[t[v][0]+l[0],t[v][1]+l[1]],b=void 0,S=void 0;if(r)b=[t[v?v-1:m-1][0]+l[0],t[v?v-1:m-1][1]+l[1]],S=[t[(v+1)%m][0]+l[0],t[(v+1)%m][1]+l[1]];else{if(0===v||v===m-1){u.push([t[v][0]+l[0],t[v][1]+l[1]]);continue}b=[t[v-1][0]+l[0],t[v-1][1]+l[1]],S=[t[v+1][0]+l[0],t[v+1][1]+l[1]]}e.Util_vector.sub(c,S,b),e.Util_vector.scale(c,c,n);var _=e.Util_vector.distance(g,b),w=e.Util_vector.distance(g,S),O=_+w;0!==O&&(_/=O,w/=O),e.Util_vector.scale(f,c,-_),e.Util_vector.scale(h,c,w);var x=e.Util_vector.add([],g,f),C=e.Util_vector.add([],g,h);p&&(e.Util_vector.max(x,x,a),e.Util_vector.min(x,x,s),e.Util_vector.max(C,C,a),e.Util_vector.min(C,C,s)),u.push(x),u.push(C)}return r&&u.push(u.shift()),u}},{key:"SUtil_smoothSpline",value:function(t,n,r,i){i&&2===i||(i=[0,0]);for(var o=i,a=t.length,s=[],l=0,u=1;u<a;u++)l+=e.Util_vector.distance([t[u-1][0]+o[0],t[u-1][1]+o[1]],[t[u][0]+o[0],t[u][1]+o[1]]);var c=l/5;c=c<a?a:c;for(var f=0;f<c;f++){var h=f/(c-1)*(n?a:a-1),p=Math.floor(h),y=h-p,d=void 0,m=[t[p%a][0]+o[0],t[p%a][1]+o[1]],v=void 0,g=void 0;n?(d=[t[(p-1+a)%a][0]+o[0],t[(p-1+a)%a][1]+o[1]],v=[t[(p+1)%a][0]+o[0],t[(p+1)%a][1]+o[1]],g=[t[(p+2)%a][0]+o[0],t[(p+2)%a][1]+o[1]]):(d=[t[0===p?p:p-1][0]+o[0],t[0===p?p:p-1][1]+o[1]],v=[t[p>a-2?a-1:p+1][0]+o[0],t[p>a-2?a-1:p+1][1]+o[1]],g=[t[p>a-3?a-1:p+2][0]+o[0],t[p>a-3?a-1:p+2][1]+o[1]]);var b=y*y,S=y*b;s.push([_(d[0],m[0],v[0],g[0],y,b,S),_(d[1],m[1],v[1],g[1],y,b,S)])}return s;function _(e,t,n,r,i,o,a){var s=.5*(n-e),l=.5*(r-t);return(2*(t-n)+s+l)*a+(-3*(t-n)-2*s-l)*o+s*i+t}}},{key:"SUtil_dashedLineTo",value:function(e,t,n,r,i,o,a){var s=[5,5];if(o="number"!=typeof o?5:o,e.setLineDash)return s[0]=o,s[1]=o,a&&a instanceof Array?e.setLineDash(a):e.setLineDash(s),e.moveTo(t,n),void e.lineTo(r,i);var l=r-t,u=i-n,c=Math.floor(Math.sqrt(l*l+u*u)/o);l/=c,u/=c;for(var f=!0,h=0;h<c;++h)f?e.moveTo(t,n):e.lineTo(t,n),f=!f,t+=l,n+=u;e.lineTo(r,i)}}],(n=null)&&XC(t.prototype,n),r&&XC(t,r),e}();function ZC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}KC.Util_area=new jC,KC.Util_color=new lx,KC.Util_computeBoundingBox=new NC,KC.Util_curve=new AC,KC.Util_env=new DC,KC.Util_event=new BC,KC.Util_http=new zC,KC.Util_log=new HC,KC.Util_math=new WC,KC.Util_matrix=new QC,KC.Util=new ax,KC.Util_vector=new kC;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $C=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="SuperMap.LevelRenderer.Transformable",this.lookAt=(t=KC.Util_vector.create(),function(e){this.transform||(this.transform=KC.Util_matrix.create());var n=this.transform;function r(e){return e>-5e-5&&e<5e-5}KC.Util_vector.sub(t,e,this.position),r(t[0])&&r(t[1])||(KC.Util_vector.normalize(t,t),n[2]=t[0]*this.scale[1],n[3]=t[1]*this.scale[1],n[0]=t[1]*this.scale[0],n[1]=-t[0]*this.scale[0],n[4]=this.position[0],n[5]=this.position[1],this.decomposeTransform())})}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function e(e){return e>5e-5||e<-5e-5}this.needLocalTransform=e(this.rotation[0])||e(this.position[0])||e(this.position[1])||e(this.scale[0]-1)||e(this.scale[1]-1)}},{key:"updateTransform",value:function(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var e=[0,0],t=this.transform||KC.Util_matrix.create();if(KC.Util_matrix.identity(t),this.needLocalTransform){if(i(this.scale[0])||i(this.scale[1])){e[0]=-this.scale[2]||0,e[1]=-this.scale[3]||0;var n=i(e[0])||i(e[1]);n&&KC.Util_matrix.translate(t,t,e),KC.Util_matrix.scale(t,t,this.scale),n&&(e[0]=-e[0],e[1]=-e[1],KC.Util_matrix.translate(t,t,e))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){e[0]=-this.rotation[1]||0,e[1]=-this.rotation[2]||0;var r=i(e[0])||i(e[1]);r&&KC.Util_matrix.translate(t,t,e),KC.Util_matrix.rotate(t,t,this.rotation[0]),r&&(e[0]=-e[0],e[1]=-e[1],KC.Util_matrix.translate(t,t,e))}}else 0!==this.rotation&&KC.Util_matrix.rotate(t,t,this.rotation);(i(this.position[0])||i(this.position[1]))&&KC.Util_matrix.translate(t,t,this.position)}this.transform=t,this.parent&&this.parent.needTransform&&(this.needLocalTransform?KC.Util_matrix.mul(this.transform,this.parent.transform,this.transform):KC.Util_matrix.copy(this.transform,this.parent.transform))}function i(e){return e>5e-5||e<-5e-5}}},{key:"setTransform",value:function(e){if(this.needTransform){var t=this.transform;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}}},{key:"decomposeTransform",value:function(){if(this.transform){var e=this.transform,t=e[0]*e[0]+e[1]*e[1],n=this.position,r=this.scale,i=this.rotation;a(t-1)&&(t=Math.sqrt(t));var o=e[2]*e[2]+e[3]*e[3];a(o-1)&&(o=Math.sqrt(o)),n[0]=e[4],n[1]=e[5],r[0]=t,r[1]=o,r[2]=r[3]=0,i[0]=Math.atan2(-e[1]/o,e[0]/t),i[1]=i[2]=0}function a(e){return e>5e-5||e<-5e-5}}}])&&ZC(t.prototype,n),r&&ZC(t,r),e}();function eP(e){return(eP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rP(e,t,n){return(rP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iP(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function iP(e){return(iP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oP(e,t){return(oP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var aP=function(e){function t(e){var n,r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(i=iP(t).call(this,e))||"object"!==eP(i)&&"function"!=typeof i?nP(r):i,e=e||{},n.id=null,n.style={},n.highlightStyle=null,n.parent=null,n.__dirty=!0,n.__clipShapes=[],n.invisible=!1,n.ignore=!1,n.zlevel=0,n.draggable=!1,n.clickable=!1,n.hoverable=!0,n.z=0,n.refOriginalPosition=[0,0],n.refDataID=null,n.isHoverByRefDataID=!1,n.refDataHoverGroup=null,n.dataInfo=null,be.extend(nP(n),e),n.id=n.id||be.createUniqueID("smShape_"),n.CLASS_NAME="SuperMap.LevelRenderer.Shape",n.getTansform=(o=[],function(e,t){var n=[e,t];return this.needTransform&&this.transform&&(KC.Util_matrix.invert(o,this.transform),KC.Util_matrix.mulVector(n,o,[e,t,1]),e==n[0]&&t==n[1]&&this.updateNeedTransform()),n}),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oP(e,t)}(t,r.mixin(TC,$C)),n=t,o=[{key:"_fillText",value:function(e,n,r,i,o,a,s){o&&(e.font=o),e.textAlign=a,e.textBaseline=s;var l=t._getTextRect(n,r,i,o,a,s);n=(n+"").split("\n");var u=KC.Util_area.getTextHeight("ZH",o);switch(s){case"top":i=l.y;break;case"bottom":i=l.y+u;break;default:i=l.y+u/2}for(var c=0,f=n.length;c<f;c++)e.fillText(n[c],r,i),i+=u}},{key:"_getTextRect",value:function(e,t,n,r,i,o){var a=KC.Util_area.getTextWidth(e,r),s=KC.Util_area.getTextHeight("ZH",r);switch(e=(e+"").split("\n"),i){case"end":case"right":t-=a;break;case"center":t-=a/2}switch(o){case"top":break;case"bottom":n-=s*e.length;break;default:n-=s*e.length/2}return{x:t,y:n,width:a,height:s*e.length}}}],(i=[{key:"destroy",value:function(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,rP(iP(t.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){var n=this.beforeBrush(e,t);switch(e.beginPath(),this.buildPath(e,n),n.brushType){case"both":this.setCtxGlobalAlpha(e,"fill",n),e.fill(),n.lineWidth>0&&(this.setCtxGlobalAlpha(e,"stroke",n),e.stroke()),this.setCtxGlobalAlpha(e,"reset",n);break;case"stroke":this.setCtxGlobalAlpha(e,"stroke",n),n.lineWidth>0&&e.stroke(),this.setCtxGlobalAlpha(e,"reset",n);break;default:this.setCtxGlobalAlpha(e,"fill",n),e.fill(),this.setCtxGlobalAlpha(e,"reset",n)}this.drawText(e,n,this.style),this.afterBrush(e)}},{key:"beforeBrush",value:function(e,t){var n=this.style;return this.brushTypeOnly&&(n.brushType=this.brushTypeOnly),t&&(n=this.getHighlightStyle(n,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(n.strokeColor=n.strokeColor||n.color),e.save(),this.doClip(e),this.setContext(e,n),this.setTransform(e),n}},{key:"afterBrush",value:function(e){e.restore()}},{key:"setContext",value:function(e,t){for(var n=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],r=0,i=n.length;r<i;r++){var o=t[n[r][0]],a=n[r][1];void 0!==o&&(e[a]=o)}}},{key:"doClip",value:function(e){var t=KC.Util_matrix.create();if(this.__clipShapes)for(var n=0;n<this.__clipShapes.length;n++){var r=this.__clipShapes[n];if(r.needTransform){var i=r.transform;KC.Util_matrix.invert(t,i),e.transform(i[0],i[1],i[2],i[3],i[4],i[5])}if(e.beginPath(),r.buildPath(e,r.style),e.clip(),r.needTransform){var o=t;e.transform(o[0],o[1],o[2],o[3],o[4],o[5])}}}},{key:"getHighlightStyle",value:function(e,t,n){var r={};for(var i in e)r[i]=e[i];var o=KC.Util_color.getHighlightColor();for(var a in"stroke"!=e.brushType?(r.strokeColor=o,r.lineWidth=e.lineWidth||1,r.brushType="both"):"stroke"!=n?(r.strokeColor=o,r.lineWidth=e.lineWidth||1):r.strokeColor=t.strokeColor||KC.Util_color.mix(e.strokeColor,KC.Util_color.toRGB(o)),t)void 0!==t[a]&&(r[a]=t[a]);return r}},{key:"getHighlightZoom",value:function(){return"text"!=this.type?6:2}},{key:"drift",value:function(e,t){this.position[0]+=e,this.position[1]+=t}},{key:"buildPath",value:function(e,t){KC.Util_log("buildPath not implemented in "+this.type)}},{key:"getRect",value:function(e){KC.Util_log("getRect not implemented in "+this.type)}},{key:"isCover",value:function(e,t){var n=this.getTansform(e,t);e=n[0],t=n[1];var r=this.style.__rect;return r||(r=this.style.__rect=this.getRect(this.style)),e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height&&KC.Util_area.isInside(this,this.style,e,t)}},{key:"drawText",value:function(e,n,r){if(void 0!==n.text&&!1!==n.text){var i=n.textColor||n.color||n.strokeColor;e.fillStyle=i;var o,a,s,l,u=10,c=n.textPosition||this.textPosition||"top",f=[];switch(f=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],c){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var h=(r||n).__rect||this.getRect(r||n);switch(c){case"inside":s=h.x+h.width/2,l=h.y+h.height/2,o="center",a="middle","stroke"!=n.brushType&&i==n.color&&(e.fillStyle="#fff");break;case"left":s=h.x-u,l=h.y+h.height/2,o="end",a="middle";break;case"right":s=h.x+h.width+u,l=h.y+h.height/2,o="start",a="middle";break;case"top":s=h.x+h.width/2,l=h.y-u,o="center",a="bottom";break;case"bottom":s=h.x+h.width/2,l=h.y+h.height+u,o="center",a="top"}}break;case"start":case"end":var p=0,y=0,d=0,m=0;if(void 0!==n.pointList){var v=n.pointList;if(v.length<2)return;var g=v.length;switch(c){case"start":p=v[0][0]+f[0],y=v[1][0]+f[0],d=v[0][1]+f[1],m=v[1][1]+f[1];break;case"end":p=v[g-2][0]+f[0],y=v[g-1][0]+f[0],d=v[g-2][1]+f[1],m=v[g-1][1]+f[1]}}else p=n.xStart+f[0]||0,y=n.xEnd+f[0]||0,d=n.yStart+f[1]||0,m=n.yEnd+f[1]||0;switch(c){case"start":o=p<y?"end":"start",a=d<m?"bottom":"top",s=p,l=d;break;case"end":o=p<y?"start":"end",a=d<m?"top":"bottom",s=y,l=m}u-=4,p&&y&&p!=y?s-="end"==o?u:-u:o="center",d!=m?l-="bottom"==a?u:-u:a="middle";break;case"specific":s=n.textX||0,l=n.textY||0,o="start",a="middle"}n.labelXOffset&&!isNaN(n.labelXOffset)&&(s+=n.labelXOffset),n.labelYOffset&&!isNaN(n.labelYOffset)&&(l+=n.labelYOffset),null!=s&&null!=l&&t._fillText(e,n.text,s,l,n.textFont,n.textAlign||o,n.textBaseline||a)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(e,t,n){e.globalAlpha="fill"===t?void 0===n.fillOpacity?void 0===n.opacity?1:n.opacity:n.fillOpacity:"stroke"===t?void 0===n.strokeOpacity?void 0===n.opacity?1:n.opacity:n.strokeOpacity:void 0===n.opacity?1:n.opacity}}])&&tP(n.prototype,i),o&&tP(n,o),t}();function sP(e){return(sP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uP(e,t){return!t||"object"!==sP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cP(e,t,n){return(cP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fP(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function fP(e){return(fP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hP(e,t){return(hP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var pP=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=uP(this,fP(t).call(this,e))).type="smicpoint",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPoint",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hP(e,t)}(t,aP),n=t,(r=[{key:"destroy",value:function(){this.type=null,cP(fP(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;e.arc(t.x+n[0],t.y+n[1],t.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,n=this.refOriginalPosition;return e.__rect?e.__rect:(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+n[0]-e.r-t/2),y:Math.round(e.y+n[1]-e.r-t/2),width:2*e.r+t,height:2*e.r+t},e.__rect)}}])&&lP(n.prototype,r),i&&lP(n,i),t}();function yP(e){return(yP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mP(e,t){return!t||"object"!==yP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vP(e,t,n){return(vP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gP(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function gP(e){return(gP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bP(e,t){return(bP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var SP=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=mP(this,gP(t).call(this,e))).type="smictext",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicText",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bP(e,t)}(t,aP),n=t,(r=[{key:"destroy",value:function(){this.type=null,vP(gP(t.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=this.style;if(t&&(r=this.getHighlightStyle(r,this.highlightStyle||{})),void 0!==r.text&&!1!==r.text){e.save(),this.doClip(e),this.setContext(e,r),this.setTransform(e),r.textFont&&(e.font=r.textFont),e.textAlign=r.textAlign||"start",e.textBaseline=r.textBaseline||"middle";var i,o=(r.text+"").split("\n"),a=KC.Util_area.getTextHeight("ZH",r.textFont),s=this.getRectNoRotation(r),l=r.x+n[0];i="top"==r.textBaseline?s.y:"bottom"==r.textBaseline?s.y+a:s.y+a/2;for(var u=r.x+n[0],c=r.y+n[1],f=0,h=o.length;f<h;f++){switch(r.labelRect&&(e.fillRect(s.x-2,s.y,s.width+4,s.height),e.fillStyle=r.strokeColor,e.strokeRect(s.x-2,s.y,s.width+4,s.height),e.fillStyle=r.textColor),r.brushType){case"stroke":this.setCtxGlobalAlpha(e,"stroke",r),r.textRotation&&0!==r.textRotation?(e.save(),e.translate(u,c),e.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?e.strokeText(o[f],0,a*f,r.maxWidth):e.strokeText(o[f],0,a*f):"bottom"==r.textBaseline?r.maxWidth?e.strokeText(o[f],0,a*(f+1)-s.height,r.maxWidth):e.strokeText(o[f],0,a*(f+1)-s.height):r.maxWidth?e.strokeText(o[f],0,a*(f+1)-s.height/2-a/2,r.maxWidth):e.strokeText(o[f],0,a*(f+1)-s.height/2-a/2),e.restore()):r.maxWidth?e.strokeText(o[f],l,i,r.maxWidth):e.strokeText(o[f],l,i),this.setCtxGlobalAlpha(e,"reset",r);break;case"both":r.textRotation&&0!==r.textRotation?(e.save(),e.translate(u,c),e.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],0,a*f,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],0,a*f,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r)):(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],0,a*f),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],0,a*f),this.setCtxGlobalAlpha(e,"reset",r)):"bottom"==r.textBaseline?r.maxWidth?(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],0,a*(f+1)-s.height,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],0,a*(f+1)-s.height,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r)):(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(e,"reset",r)):r.maxWidth?(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],0,a*(f+1)-s.height/2-a/2,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],0,a*(f+1)-s.height/2-a/2,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r)):(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(e,"reset",r)),e.restore()):r.maxWidth?(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],l,i,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],l,i,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r)):(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],l,i),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],l,i),this.setCtxGlobalAlpha(e,"reset",r));break;default:this.setCtxGlobalAlpha(e,"fill",r),r.textRotation&&0!==r.textRotation?(e.save(),e.translate(u,c),e.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?e.fillText(o[f],0,a*f,r.maxWidth):e.fillText(o[f],0,a*f):"bottom"==r.textBaseline?r.maxWidth?e.fillText(o[f],0,a*(f+1)-s.height,r.maxWidth):e.fillText(o[f],0,a*(f+1)-s.height):r.maxWidth?e.fillText(o[f],0,a*(f+1)-s.height/2-a/2,r.maxWidth):e.fillText(o[f],0,a*(f+1)-s.height/2-a/2),e.restore()):r.maxWidth?e.fillText(o[f],l,i,r.maxWidth):e.fillText(o[f],l,i),this.setCtxGlobalAlpha(e,"reset",r)}i+=a}e.restore()}}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;for(var t,n,r,i,o=this.getTextBackground(e,!0),a=0,s=o.length;a<s;a++){var l=o[a];0==a?(t=l[0],r=l[0],n=l[1],i=l[1]):(l[0]<t&&(t=l[0]),l[0]>r&&(r=l[0]),l[1]<n&&(n=l[1]),l[1]>i&&(i=l[1]))}return e.__rect={x:t,y:n,width:r-t,height:i-n},e.__rect}},{key:"getRectNoRotation",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,n=this.refOriginalPosition,r=KC.Util_area.getTextHeight("ZH",e.textFont),i=KC.Util_area.getTextWidth(e.text,e.textFont),o=KC.Util_area.getTextHeight(e.text,e.textFont),a=e.x+n[0];"end"==e.textAlign||"right"==e.textAlign?a-=i:"center"==e.textAlign&&(a-=i/2),t="top"==e.textBaseline?e.y+n[1]:"bottom"==e.textBaseline?e.y+n[1]-o:e.y+n[1]-o/2;var s,l=!1;if(e.maxWidth){var u=parseInt(e.maxWidth);u<i&&(s=i,l=!0,i=u),a=e.x+n[0],"end"==e.textAlign||"right"==e.textAlign?a-=i:"center"==e.textAlign&&(a-=i/2)}e.textFont&&(e.textFont.toLowerCase().indexOf("italic")>-1&&(i+=!0===l?r/3*(i/s):r/3));return{x:a,y:t,width:i,height:o}}},{key:"getTextBackground",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;if(!t&&e.__textBackground)return e.__textBackground;var r=this.getRectNoRotation(e),i=e.x+n[0],o=e.y+n[1],a=[];if(e.textRotation&&0!==e.textRotation){var s=e.textRotation,l=this.getRotatedLocation(r.x,r.y,i,o,s),u=this.getRotatedLocation(r.x+r.width,r.y,i,o,s),c=this.getRotatedLocation(r.x+r.width,r.y+r.height,i,o,s),f=this.getRotatedLocation(r.x,r.y+r.height,i,o,s);a.push(l),a.push(u),a.push(c),a.push(f)}else{var h=[r.x,r.y],p=[r.x+r.width,r.y],y=[r.x+r.width,r.y+r.height],d=[r.x,r.y+r.height];a.push(h),a.push(p),a.push(y),a.push(d)}return e.__textBackground=a,e.__textBackground}},{key:"getRotatedLocation",value:function(e,t,n,r,i){var o,a,s=new Array;return t=-t,r=-r,i=-i,o=(e-n)*Math.cos(i/180*Math.PI)-(t-r)*Math.sin(i/180*Math.PI)+n,a=(e-n)*Math.sin(i/180*Math.PI)+(t-r)*Math.cos(i/180*Math.PI)+r,s[0]=o,s[1]=-a,s}}])&&dP(n.prototype,r),i&&dP(n,i),t}();function _P(e){return(_P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OP(e,t){return!t||"object"!==_P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xP(e,t,n){return(xP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=CP(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function CP(e){return(CP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PP(e,t){return(PP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var TP=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=OP(this,CP(t).call(this,e))).type="smiccircle",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicCircle",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PP(e,t)}(t,aP),n=t,(r=[{key:"destroy",value:function(){this.type=null,xP(CP(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=t.x+n[0],i=t.y+n[1];return e.moveTo(r+t.r,i),e.arc(r,i,t.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,n=this.refOriginalPosition,r=e.x+n[0],i=e.y+n[1],o=e.r;return t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(r-o-t/2),y:Math.round(i-o-t/2),width:2*o+t,height:2*o+t},e.__rect}}])&&wP(n.prototype,r),i&&wP(n,i),t}();function EP(e){return(EP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MP(e,t){return!t||"object"!==EP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function AP(e,t,n){return(AP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=LP(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function LP(e){return(LP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jP(e,t){return(jP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var RP=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=MP(this,LP(t).call(this,e))).type="smicpolygon",n.holePolygonPointLists=null,n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPolygon",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jP(e,t)}(t,aP),n=t,(r=[{key:"destroy",value:function(){this.type=null,this.holePolygonPointLists=null,AP(LP(t.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.style;t&&(n=this.getHighlightStyle(n,this.highlightStyle||{})),e.save(),this.setContext(e,n),this.setTransform(e);var r=!1;"fill"!=n.brushType&&"both"!=n.brushType&&void 0!==n.brushType||(e.beginPath(),"dashed"==n.lineType||"dotted"==n.lineType||"dot"==n.lineType||"dash"==n.lineType||"dashdot"==n.lineType||"longdash"==n.lineType||"longdashdot"==n.lineType?this.buildPath(e,{lineType:"solid",lineWidth:n.lineWidth,pointList:n.pointList}):(this.buildPath(e,n),r=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",n),e.fill(),this.setCtxGlobalAlpha(e,"reset",n)),n.lineWidth>0&&("stroke"==n.brushType||"both"==n.brushType)&&(r||(e.beginPath(),this.buildPath(e,n)),this.setCtxGlobalAlpha(e,"stroke",n),e.stroke(),this.setCtxGlobalAlpha(e,"reset",n)),this.drawText(e,n,this.style);var i=be.cloneObject(n);if(i.pointList&&this.holePolygonPointLists&&this.holePolygonPointLists.length>0)for(var o=this.holePolygonPointLists,a=o.length,s=0;s<a;s++){var l=o[s];i.pointList=l,e.globalCompositeOperation="destination-out",r=!1,"fill"!=i.brushType&&"both"!=i.brushType&&void 0!==i.brushType||(e.beginPath(),"dashed"==i.lineType||"dotted"==i.lineType||"dot"==i.lineType||"dash"==i.lineType||"dashdot"==i.lineType||"longdash"==i.lineType||"longdashdot"==i.lineType?this.buildPath(e,{lineType:"solid",lineWidth:i.lineWidth,pointList:i.pointList}):(this.buildPath(e,i),r=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",i),e.fill(),this.setCtxGlobalAlpha(e,"reset",i)),i.lineWidth>0&&("stroke"==i.brushType||"both"==i.brushType)?(r||(e.beginPath(),this.buildPath(e,i)),e.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(e,"stroke",i),e.stroke(),this.setCtxGlobalAlpha(e,"reset",i)):e.globalCompositeOperation="source-over"}e.restore()}},{key:"buildPath",value:function(e,t){t.showShadow&&(e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=t.pointList;if(!(r.length<2))if(t.smooth&&"spline"!==t.smooth){var i,o,a,s=KC.SUtil_smoothBezier(r,t.smooth,!0,t.smoothConstraint,n);e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var l=r.length,u=0;u<l;u++)i=s[2*u],o=s[2*u+1],a=[r[(u+1)%l][0]+n[0],r[(u+1)%l][1]+n[1]],e.bezierCurveTo(i[0],i[1],o[0],o[1],a[0],a[1])}else if("spline"===t.smooth&&(r=KC.SUtil_smoothSpline(r,!0,null,n)),t.lineType&&"solid"!=t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var c=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1);t._dashLength=c;var f=t.lineWidth||1,h=f,p=f;"dashed"===t.lineType&&(h*=5,p*=5,t.lineCap&&"butt"!==t.lineCap&&(h-=f,p+=f)),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(h=1,p+=f),"dot"===t.lineType&&(p*=4,t.lineCap&&"butt"!==t.lineCap&&(h=1,p+=f)),"dash"===t.lineType&&(h*=4,p*=4,t.lineCap&&"butt"!==t.lineCap&&(h-=f,p+=f)),"longdash"===t.lineType&&(h*=8,p*=4,t.lineCap&&"butt"!==t.lineCap&&(h-=f,p+=f)),e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var y=1;y<r.length;y++)KC.SUtil_dashedLineTo(e,r[y-1][0]+n[0],r[y-1][1]+n[1],r[y][0]+n[0],r[y][1]+n[1],f,[h,p]);KC.SUtil_dashedLineTo(e,r[r.length-1][0]+n[0],r[r.length-1][1]+n[1],r[0][0]+n[0],r[0][1]+n[1],f,[h,p])}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var d=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1);t._dashLength=d;var m=t.lineWidth||1,v=m,g=m,b=m,S=m;"dashdot"===t.lineType&&(v*=4,g*=4,S*=4,t.lineCap&&"butt"!==t.lineCap&&(v-=m,g+=m,b=1,S+=m)),"longdashdot"===t.lineType&&(v*=8,g*=4,S*=4,t.lineCap&&"butt"!==t.lineCap&&(v-=m,g+=m,b=1,S+=m)),e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var _=1;_<r.length;_++)KC.SUtil_dashedLineTo(e,r[_-1][0]+n[0],r[_-1][1]+n[1],r[_][0]+n[0],r[_][1]+n[1],m,[v,g,b,S]);KC.SUtil_dashedLineTo(e,r[r.length-1][0]+n[0],r[r.length-1][1]+n[1],r[0][0]+n[0],r[0][1]+n[1],m,[v,g,b,S])}}else{e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var w=1;w<r.length;w++)e.lineTo(r[w][0]+n[0],r[w][1]+n[1]);e.lineTo(r[0][0]+n[0],r[0][1]+n[1])}}},{key:"getRect",value:function(e,t){var n;if(t?n=t:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),n=this.refOriginalPosition),e.__rect)return e.__rect;for(var r,i=Number.MAX_VALUE,o=Number.MIN_VALUE,a=Number.MAX_VALUE,s=Number.MIN_VALUE,l=e.pointList,u=0,c=l.length;u<c;u++)l[u][0]+n[0]<i&&(i=l[u][0]+n[0]),l[u][0]+n[0]>o&&(o=l[u][0]+n[0]),l[u][1]+n[1]<a&&(a=l[u][1]+n[1]),l[u][1]+n[1]>s&&(s=l[u][1]+n[1]);return r="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(i-r/2),y:Math.round(a-r/2),width:o-i+r,height:s-a+r},e.__rect}}])&&kP(n.prototype,r),i&&kP(n,i),t}();function NP(e){return(NP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DP(e,t){return!t||"object"!==NP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function FP(e,t,n){return(FP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=BP(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function BP(e){return(BP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UP(e,t){return(UP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var GP=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=DP(this,BP(t).call(this,e))).brushTypeOnly="stroke",n.textPosition="end",n.type="smicbroken-line",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicBrokenLine",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&UP(e,t)}(t,aP),n=t,(r=[{key:"destroy",value:function(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,FP(BP(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=t.pointList;if(!(r.length<2)){var i=Math.min(t.pointList.length,Math.round(t.pointListLength||t.pointList.length));if(t.smooth&&"spline"!==t.smooth){var o,a,s,l=KC.SUtil_smoothBezier(r,t.smooth,!1,t.smoothConstraint,n);e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var u=0;u<i-1;u++)o=l[2*u],a=l[2*u+1],s=[r[u+1][0]+n[0],r[u+1][1]+n[1]],e.bezierCurveTo(o[0],o[1],a[0],a[1],s[0],s[1])}else if("spline"===t.smooth&&(i=(r=KC.SUtil_smoothSpline(r,null,null,n)).length),t.lineType&&"solid"!==t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var c=t.lineWidth||1,f=c,h=c;"dashed"===t.lineType&&(f*=5,h*=5,t.lineCap&&"butt"!==t.lineCap&&(f-=c,h+=c)),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(f=1,h+=c),"dot"===t.lineType&&(h*=4,t.lineCap&&"butt"!==t.lineCap&&(f=1,h+=c)),"dash"===t.lineType&&(f*=4,h*=4,t.lineCap&&"butt"!==t.lineCap&&(f-=c,h+=c)),"longdash"===t.lineType&&(f*=8,h*=4,t.lineCap&&"butt"!==t.lineCap&&(f-=c,h+=c)),e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var p=1;p<i;p++)KC.SUtil_dashedLineTo(e,r[p-1][0]+n[0],r[p-1][1]+n[1],r[p][0]+n[0],r[p][1]+n[1],c,[f,h])}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var y=t.lineWidth||1,d=y,m=y,v=y,g=y;"dashdot"===t.lineType&&(d*=4,m*=4,g*=4,t.lineCap&&"butt"!==t.lineCap&&(d-=y,m+=y,v=1,g+=y)),"longdashdot"===t.lineType&&(d*=8,m*=4,g*=4,t.lineCap&&"butt"!==t.lineCap&&(d-=y,m+=y,v=1,g+=y)),y=(t.lineWidth||1)*("dashed"===t.lineType?5:1),e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var b=1;b<i;b++)KC.SUtil_dashedLineTo(e,r[b-1][0]+n[0],r[b-1][1]+n[1],r[b][0]+n[0],r[b][1]+n[1],y,[d,m,v,g])}}else{e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var S=1;S<i;S++)e.lineTo(r[S][0]+n[0],r[S][1]+n[1])}}}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return RP.prototype.getRect.apply(this,[e,t])}}])&&IP(n.prototype,r),i&&IP(n,i),t}();function zP(e){return(zP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JP(e,t){return!t||"object"!==zP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function HP(e,t,n){return(HP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qP(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function qP(e){return(qP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WP(e,t){return(WP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var YP=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=JP(this,qP(t).call(this,e))).type="smicimage",n._imageCache={},n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicImage",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WP(e,t)}(t,aP),n=t,(r=[{key:"destroy",value:function(){this.type=null,this._imageCache=null,HP(qP(t.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,n,r){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition,o=this.style||{};n&&(o=this.getHighlightStyle(o,this.highlightStyle||{}));var a=o.image,s=this;if("string"==typeof a){var l=a;this._imageCache[l]?a=this._imageCache[l]:((a=new Image).onload=function(){a.onload=null,clearTimeout(t._refreshTimeout),t._needsRefresh.push(s),t._refreshTimeout=setTimeout(function(){r&&r(t._needsRefresh),t._needsRefresh=[]},10)},a.src=l,this._imageCache[l]=a)}if(a){if("IMG"==a.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=a.readyState)return}else if(!a.complete)return;var u=o.width||a.width,c=o.height||a.height,f=o.x+i[0],h=o.y+i[1];if(!a.width||!a.height)return;if(e.save(),this.doClip(e),this.setContext(e,o),this.setTransform(e),o.sWidth&&o.sHeight){var p=o.sx+i[0]||0,y=o.sy+i[1]||0;e.drawImage(a,p,y,o.sWidth,o.sHeight,f,h,u,c)}else if(o.sx&&o.sy){var d=o.sx+i[0],m=o.sy+i[1],v=u-d,g=c-m;e.drawImage(a,d,m,v,g,f,h,u,c)}else e.drawImage(a,f,h,u,c);o.width||(o.width=u),o.height||(o.height=c),this.style.width||(this.style.width=u),this.style.height||(this.style.height=c),this.drawText(e,o,this.style),e.restore()}}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return{x:e.x+t[0],y:e.y+t[1],width:e.width,height:e.height}}},{key:"clearCache",value:function(){this._imageCache={}}}])&&VP(n.prototype,r),i&&VP(n,i),t}();function QP(e){return(QP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KP(e,t){return!t||"object"!==QP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ZP(e,t,n){return(ZP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$P(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function $P(e){return($P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eT(e,t){return(eT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/YP._needsRefresh=[],YP._refreshTimeout=null;var tT=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=KP(this,$P(t).call(this,e))).type="smicrectangle",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicRectangle",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eT(e,t)}(t,aP),n=t,(r=[{key:"destroy",value:function(){this.type=null,ZP($P(t.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n,r,i,o,a,s=this.refOriginalPosition,l=t.x+s[0],u=t.y+s[1],c=t.width,f=t.height,h=t.radius;"number"==typeof h?n=r=i=o=h:h instanceof Array?1===h.length?n=r=i=o=h[0]:2===h.length?(n=i=h[0],r=o=h[1]):3===h.length?(n=h[0],r=o=h[1],i=h[2]):(n=h[0],r=h[1],i=h[2],o=h[3]):n=r=i=o=0,n+r>c&&(n*=c/(a=n+r),r*=c/a),i+o>c&&(i*=c/(a=i+o),o*=c/a),r+i>f&&(r*=f/(a=r+i),i*=f/a),n+o>f&&(n*=f/(a=n+o),o*=f/a),e.moveTo(l+n,u),e.lineTo(l+c-r,u),0!==r&&e.quadraticCurveTo(l+c,u,l+c,u+r),e.lineTo(l+c,u+f-i),0!==i&&e.quadraticCurveTo(l+c,u+f,l+c-i,u+f),e.lineTo(l+o,u+f),0!==o&&e.quadraticCurveTo(l,u+f,l,u+f-o),e.lineTo(l,u+n),0!==n&&e.quadraticCurveTo(l,u,l+n,u)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;t.radius?this._buildRadiusPath(e,t):(e.moveTo(t.x+n[0],t.y+n[1]),e.lineTo(t.x+n[0]+t.width,t.y+n[1]),e.lineTo(t.x+n[0]+t.width,t.y+n[1]+t.height),e.lineTo(t.x+n[0],t.y+n[1]+t.height),e.lineTo(t.x+n[0],t.y+n[1])),e.closePath()}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,n=this.refOriginalPosition;return e.__rect?e.__rect:(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+n[0]-t/2),y:Math.round(e.y+n[1]-t/2),width:e.width+t,height:e.height+t},e.__rect)}}])&&XP(n.prototype,r),i&&XP(n,i),t}();function nT(e){return(nT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iT(e,t){return!t||"object"!==nT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oT(e,t,n){return(oT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=aT(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function aT(e){return(aT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sT(e,t){return(sT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var lT=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=iT(this,aT(t).call(this,e))).type="smicsector",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicSector",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sT(e,t)}(t,aP),n=t,(r=[{key:"destroy",value:function(){this.type=null,oT(aT(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=t.x+n[0],i=t.y+n[1],o=t.r0||0,a=t.r,s=t.startAngle,l=t.endAngle,u=t.clockWise||!1;s=KC.Util_math.degreeToRadian(s),l=KC.Util_math.degreeToRadian(l),u||(s=-s,l=-l);var c=KC.Util_math.cos(s),f=KC.Util_math.sin(s);e.moveTo(c*o+r,f*o+i),e.lineTo(c*a+r,f*a+i),e.arc(r,i,a,s,l,!u),e.lineTo(KC.Util_math.cos(l)*o+r,KC.Util_math.sin(l)*o+i),0!==o&&e.arc(r,i,o,l,s,u),e.closePath()}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition,n=KC.Util_vector.create(),r=KC.Util_vector.create(),i=KC.Util_vector.create(),o=KC.Util_vector.create(),a=e.x+t[0],s=e.y+t[1],l=e.r0||0,u=e.r,c=KC.Util_math.degreeToRadian(e.startAngle),f=KC.Util_math.degreeToRadian(e.endAngle),h=e.clockWise;return h||(c=-c,f=-f),l>1?KC.Util_computeBoundingBox.arc(a,s,l,c,f,!h,n,i):(n[0]=i[0]=a,n[1]=i[1]=s),KC.Util_computeBoundingBox.arc(a,s,u,c,f,!h,r,o),KC.Util_vector.min(n,n,r),KC.Util_vector.max(i,i,o),e.__rect={x:n[0],y:n[1],width:i[0]-n[0],height:i[1]-n[1]},e.__rect}}])&&rT(n.prototype,r),i&&rT(n,i),t}();function uT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var cT=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shapeParameters=t,this.CLASS_NAME="SuperMap.Feature.ShapeFactory"}var t,n,r;return t=e,r=[{key:"transformStyle",value:function(e){var t={},n=["normal","normal","normal","12","arial,sans-serif"],r=[!0,!1];for(var i in e)switch(i){case"fill":r[0]=e[i];break;case"fillColor":t.color=e[i];break;case"stroke":r[1]=e[i];break;case"strokeWidth":t.lineWidth=e[i];break;case"strokeLinecap":t.lineCap=e[i];break;case"strokeLineJoin":t.lineJoin=e[i];break;case"strokeDashstyle":t.lineType=e[i];break;case"pointRadius":t.r=e[i];break;case"label":t.text=e[i];break;case"labelRect":t.labelRect=e[i];break;case"fontColor":t.textColor=e[i];break;case"fontStyle":n[0]=e[i];break;case"fontVariant":n[1]=e[i];break;case"fontWeight":n[2]=e[i];break;case"fontSize":var o="";e[i]&&e[i].toString().indexOf("px")<0&&(o="px"),n[3]=e[i]+o;break;case"fontFamily":n[4]=e[i];break;case"fontOpacity":t.opacity=e[i];break;case"labelPosition":t.textPosition=e[i];break;case"labelAlign":t.textAlign=e[i];break;case"labelBaseline":t.textBaseline=e[i];break;case"labelRotation":t.textRotation=e[i];break;default:t[i]=e[i]}return t.textFont=n.join(" "),!0===r[0]&&!1===r[1]?t.brushType="fill":!1===r[0]&&!0===r[1]?t.brushType="stroke":!0===r[0]&&!0===r[1]?t.brushType="both":t.brushType="fill",null==t.lineWidth&&(t.lineWidth=1),t}},{key:"Background",value:function(e,t,n){var r=n||{},i=new Kx(t[0],t[3],Math.abs(t[2]-t[0]),Math.abs(t[3]-t[1]));return i.style={fillColor:"#f3f3f3"},r.backgroundStyle&&be.copyAttributesWithClip(i.style,r.backgroundStyle),r.backgroundRadius&&(i.style.radius=r.backgroundRadius),i.clickable=!1,i.hoverable=!1,e.createShape(i)}},{key:"GraphAxis",value:function(e,t,n,r){var i=t,o=n||{},a=[],s=[],l=!!o.useXReferenceLine&&o.useXReferenceLine,u=o.axisYTick&&!isNaN(o.axisYTick)?o.axisYTick:0,c=[],f=[];if(0==u){if(f.push([i[0],i[3]-5]),f.push([i[0],i[1]]),o.axis3DParameter&&!isNaN(o.axis3DParameter)&&o.axis3DParameter>=15){var h=parseInt(o.axis3DParameter),p=[i[0]-h,i[1]+h];o.axisUseArrow?(c.push([p[0]+1.5,p[1]-7.5]),c.push([p[0]-1,p[1]+1]),c.push([p[0]+7.5,p[1]-1.5]),f.push([p[0],p[1]])):f.push([p[0],p[1]]),f.push([i[0],i[1]])}f.push([i[2]+5,i[1]])}else{var y=Math.abs(i[1]-i[3])/u,d=i[3];f.push([i[0],d-5]);for(var m=0;m<u;m++){if(f.push([i[0],d]),f.push([i[0]-5,d]),f.push([i[0],d]),l){var v=new Dx([[i[0],d],[i[2],d]]);v.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},v.clickable=!1,v.hoverable=!1,o.xReferenceLineStyle&&be.copyAttributesWithClip(v.style,o.xReferenceLineStyle),a.push(e.createShape(v))}d+=y}if(f.push([i[0],i[1]]),o.axis3DParameter&&!isNaN(o.axis3DParameter)&&o.axis3DParameter>=15){var g=parseInt(o.axis3DParameter),b=[i[0]-g,i[1]+g];o.axisUseArrow?(c.push([b[0]+1.5,b[1]-7.5]),c.push([b[0]-1,b[1]+1]),c.push([b[0]+7.5,b[1]-1.5]),f.push([b[0],b[1]])):f.push([b[0],b[1]]),f.push([i[0],i[1]])}f.push([i[2]+5,i[1]])}if(o.axisUseArrow){var S=[[i[2]+5,i[1]+4],[i[2]+13,i[1]],[i[2]+5,i[1]-4]],_=[[i[0]-4,i[3]-5],[i[0],i[3]-13],[i[0]+4,i[3]-5]],w=new Jx(S);w.style={fillColor:"#008acd"},be.copyAttributesWithClip(w.style,o.axisStyle),s.push(e.createShape(w));var O=new Jx(_);if(O.style={fillColor:"#008acd"},be.copyAttributesWithClip(O.style,o.axisStyle),s.push(e.createShape(O)),o.axis3DParameter&&!isNaN(o.axis3DParameter)&&o.axis3DParameter>=15){var x=new Jx(c);x.style={fillColor:"#008acd"},be.copyAttributesWithClip(x.style,o.axisStyle),s.push(e.createShape(x))}}var C=new Dx(f);C.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},o.axisStyle&&be.copyAttributesWithClip(C.style,o.axisStyle),C.clickable=!1,C.hoverable=!1;var P=[e.createShape(C)],T=[];if(o.axisYLabels&&o.axisYLabels.length&&o.axisYLabels.length>0){var E=o.axisYLabels,k=E.length,M=[0,0];if(o.axisYLabelsOffset&&o.axisYLabelsOffset.length&&(M=o.axisYLabelsOffset),1==k){var A=new fC(i[0]-5+M[0],i[3]+M[1],E[0]);A.style={labelAlign:"right"},o.axisYLabelsStyle&&be.copyAttributesWithClip(A.style,o.axisYLabelsStyle),A.clickable=!1,A.hoverable=!1,T.push(e.createShape(A))}else for(var L=i[3],j=Math.abs(i[1]-i[3])/(k-1),R=0;R<k;R++){var N=new fC(i[0]-5+M[0],L+M[1],E[R]);N.style={labelAlign:"right"},o.axisYLabelsStyle&&be.copyAttributesWithClip(N.style,o.axisYLabelsStyle),N.clickable=!1,N.hoverable=!1,T.push(e.createShape(N)),L+=j}}var I=[];if(o.axisXLabels&&o.axisXLabels.length&&o.axisXLabels.length>0){var D=o.axisXLabels,F=D.length,B=[0,0];if(o.axisXLabelsOffset&&o.axisXLabelsOffset.length&&(B=o.axisXLabelsOffset),r&&r.xPositions&&r.xPositions.length&&r.xPositions.length==F)for(var U=r.xPositions,G=0;G<F;G++){var z=new fC(U[G]+B[0],i[1]+B[1],D[G]);z.style={labelAlign:"center",labelBaseline:"top"},o.axisXLabelsStyle&&be.copyAttributesWithClip(z.style,o.axisXLabelsStyle),z.clickable=!1,z.hoverable=!1,I.push(e.createShape(z))}else if(1==F){var V=new fC(i[0]-5+B[0],i[1]+B[0],D[0]);V.style={labelAlign:"center",labelBaseline:"top"},o.axisXLabelsStyle&&be.copyAttributesWithClip(V.style,o.axisXLabelsStyle),V.clickable=!1,V.hoverable=!1,I.push(e.createShape(V))}else for(var J=i[0],H=Math.abs(i[2]-i[0])/(F-1),q=0;q<F;q++){var W=new fC(J+B[0],i[1]+B[1],D[q]);W.style={labelAlign:"center",labelBaseline:"top"},o.axisXLabelsStyle&&be.copyAttributesWithClip(W.style,o.axisXLabelsStyle),W.clickable=!1,W.hoverable=!1,I.push(e.createShape(W)),J+=H}}return a.concat(P).concat(T).concat(I).concat(s)}},{key:"ShapeStyleTool",value:function(e,t,n,r,i,o){var a=e||{};if(t&&be.copyAttributesWithClip(a,t),n&&n.length&&void 0!==i&&!isNaN(i)&&i>=0&&n[i]&&be.copyAttributesWithClip(a,n[i]),r&&r.length&&void 0!==o)for(var s=r,l=s.length,u=parseFloat(o),c=0;c<l;c++)if(s[c].start<=u&&u<s[c].end){be.copyAttributesWithClip(a,s[c].style);break}return a}}],(n=[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(t){if(t&&(this.shapeParameters=t),!this.shapeParameters)return null;var n=this.shapeParameters;if(n instanceof Mx){var r=new Object;r.x=n.x,r.y=n.y,r.r=n.r,r=be.copyAttributesWithClip(r,n.style,["x","y"]);var i=new pP;return i.style=e.transformStyle(r),i.highlightStyle=e.transformStyle(n.highlightStyle),be.copyAttributesWithClip(i,n,["x","y","style","highlightStyle"]),i}if(n instanceof Dx){if(!n.pointList)return null;var o=new Object;o.pointList=n.pointList,o=be.copyAttributesWithClip(o,n.style,["pointList"]);var a=new GP;return a.style=e.transformStyle(o),a.highlightStyle=e.transformStyle(n.highlightStyle),be.copyAttributesWithClip(a,n,["pointList","style","highlightStyle"]),a}if(n instanceof Jx){if(!n.pointList)return null;var s=new Object;s.pointList=n.pointList,s=be.copyAttributesWithClip(s,n.style,["pointList"]);var l=new RP;return l.style=e.transformStyle(s),l.highlightStyle=e.transformStyle(n.highlightStyle),be.copyAttributesWithClip(l,n,["pointList","style","highlightStyle"]),l}if(n instanceof Kx){if(!n.x&&!n.y&!n.width&!n.height)return null;var u=new Object;u.x=n.x,u.y=n.y,u.width=n.width,u.height=n.height,u=be.copyAttributesWithClip(u,n.style,["x","y","width","height"]);var c=new tT;return c.style=e.transformStyle(u),c.highlightStyle=e.transformStyle(n.highlightStyle),be.copyAttributesWithClip(c,n,["x","y","width","height","style","highlightStyle"]),c}if(n instanceof iC){var f=new Object;f.x=n.x,f.y=n.y,f.r=n.r,f.startAngle=n.startAngle,f.endAngle=n.endAngle,n.r0&&(f.r0=n.r0),n.clockWise&&(f.clockWise=n.clockWise),f=be.copyAttributesWithClip(f,n.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var h=new lT;return h.style=e.transformStyle(f),h.highlightStyle=e.transformStyle(n.highlightStyle),be.copyAttributesWithClip(h,n,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),h}if(n instanceof fC){var p=new Object;p.x=n.x,p.y=n.y,p.text=n.text,p=be.copyAttributesWithClip(p,n.style,["x","y","text"]);var y=new SP;return y.style=e.transformStyle(p),y.highlightStyle=e.transformStyle(n.highlightStyle),be.copyAttributesWithClip(y,n,["x","y","text","style","highlightStyle"]),y}if(n instanceof gC){var d=new Object;d.x=n.x,d.y=n.y,n.image&&(d.image=n.image),n.width&&(d.width=n.width),n.height&&(d.height=n.height),n.sx&&(d.sx=n.sx),n.sy&&(d.sy=n.sy),n.sWidth&&(d.sWidth=n.sWidth),n.sHeight&&(d.sHeight=n.sHeight),d=be.copyAttributesWithClip(d,n.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var m=new YP;return m.style=e.transformStyle(d),m.highlightStyle=e.transformStyle(n.highlightStyle),be.copyAttributesWithClip(m,n,["x","y","image","width","height","style","highlightStyle"]),m}if(n instanceof CC){var v=new Object;v.x=n.x,v.r=n.r,v.y=n.y,v=be.copyAttributesWithClip(v,n.style,["x","y","r"]);var g=new TP;return g.style=e.transformStyle(v),g.highlightStyle=e.transformStyle(n.highlightStyle),be.copyAttributesWithClip(g,n,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),g}return null}}])&&uT(t.prototype,n),r&&uT(t,r),e}();function fT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Feature=r.Feature||{},r.Feature.ShapeFactory=cT;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var hT=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&n&&n.map&&n.renderer&&(this.id=be.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=null,this.location=[],this.data=t,this.shapes=[],this.layer=n,this.CLASS_NAME="SuperMap.Feature.Theme")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}},{key:"getLocalXY",value:function(e){var t=this.layer.map.getResolution(),n=this.layer.map.getExtent();return e instanceof Xe||e instanceof ct?[e.x/t+-n.left/t,n.top/t-e.y/t]:e instanceof _e?[e.lon/t+-n.left/t,n.top/t-e.lat/t]:null}}])&&fT(t.prototype,n),r&&fT(t,r),e}();function pT(e){return(pT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dT(e,t){return!t||"object"!==pT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mT(e,t,n){return(mT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vT(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function vT(e){return(vT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gT(e,t){return(gT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature=r.Feature||{},r.Feature.Theme=hT;var bT=function(e){function t(e,n,r,i,o,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=dT(this,vT(t).call(this,e,n,r,i,o,a))).shapeFactory=new cT,s.shapeParameters=null,s.RelativeCoordinate=!1,s.setting=null,s.origonPoint=null,s.chartBox=null,s.chartBounds=null,s.width=null,s.height=null,s.XOffset=0,s.YOffset=0,s.DVBParameter=null,s.dataViewBox=null,s.DVBCodomain=null,s.DVBCenterPoint=null,s.DVBUnitValue=null,s.DVBOrigonPoint=null,s.DVBWidth=null,s.DVBHeight=null,s.origonPointOffset=null,s.fields=r||[],s.dataValues=null,s.lonlat=o||s.data.geometry.getBounds().getCenterLonLat(),i&&i.width&&i.height&&i.codomain&&(s.setting=i),s.CLASS_NAME="SuperMap.Feature.Theme.Graph",s}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gT(e,t)}(t,hT),n=t,(r=[{key:"destroy",value:function(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,mT(vT(t.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var e=this.setting;if(!(e.width&&e.height&&e.codomain))return!1;var t=void 0===e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,n=hT.getDataValues(this.data,this.fields,t);this.dataValues=n||[],this.width=parseFloat(e.width),this.height=parseFloat(e.height),this.DVBCodomain=e.codomain,this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var r=this.width,i=this.height,o=this.location;this.origonPoint=[o[0]-r/2,o[1]-i/2];var a=this.origonPoint;this.chartBox=[a[0],a[1]+i,a[0]+r,a[1]];var s=this.chartBox,l=this.DVBParameter;this.dataViewBox=[s[0]+l[0],s[1]-l[1],s[2]-l[2],s[3]+l[3]];var u=this.dataViewBox;return!(u[0]>=u[2]||u[1]<=u[3])&&(this.DVBOrigonPoint=[u[0],u[3]],this.DVBWidth=Math.abs(u[2]-u[0]),this.DVBHeight=Math.abs(u[1]-u[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-a[0],this.DVBOrigonPoint[1]-a[1]],!0)}},{key:"resetLocation",value:function(e){e&&(this.lonlat=e);var t=this.getLocalXY(this.lonlat);t[0]+=this.XOffset,t[1]+=this.YOffset,this.location=t;var n=this.width,r=this.height,i=this.location;return this.chartBounds=new Oe(i[0]-n/2,i[1]+r/2,i[0]+n/2,i[1]-r/2),this.resetLinearGradient(),i}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var e=this.shapes,t=this.location,n=0,r=e.length;n<r;n++){e[n].refOriginalPosition=t;var i=e[n].style;for(var o in i)switch(o){case"pointList":for(var a=i[o],s=0,l=a.length;s<l;s++)a[s][0]-=t[0],a[s][1]-=t[1];break;case"x":i[o]-=t[0];break;case"y":i[o]-=t[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(e){return this.layer.getLocalXY(e)}}])&&yT(n.prototype,r),i&&yT(n,i),t}();function ST(e){return(ST="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wT(e,t){return!t||"object"!==ST(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OT(e,t,n){return(OT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xT(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function xT(e){return(xT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CT(e,t){return(CT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/hT.getDataValues=function(e,t,n){if(!e.attributes)return!1;for(var r=[],i=e.attributes,o=0;o<t.length;o++)for(var a in i)if(a===t[o])try{!isNaN(n)&&n>=0?r.push(parseFloat(i[a].toString()).toFixed(n)):r.push(parseFloat(i[a].toString()))}catch(e){throw new Error("not a number")}return r.length===t.length&&r},r.Feature.Theme.Graph=bT;var PT=function(e){function t(e,n,r,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=wT(this,xT(t).call(this,e,n,r,i,o))).CLASS_NAME="SuperMap.Feature.Theme.Bar",a}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CT(e,t)}(t,bT),n=t,(r=[{key:"destroy",value:function(){OT(xT(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},t=this.setting;if(t.barLinearGradient||(t.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var r=this.dataViewBox,i=this.dataValues;if(!(i.length<1)){for(var o=0,a=i.length;o<a;o++)if(i[o]<n[0]||i[o]>n[1])return;var s=this.calculateXShapeInfo();if(s){var l=s.xPositions,u=s.width;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(cT.Background(this.shapeFactory,this.chartBox,t)),(void 0===t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(cT.GraphAxis(this.shapeFactory,r,t,s)));for(var c=0;c<i.length;c++){var f=r[1]-(i[c]-n[0])/this.DVBUnitValue,h=[[l[c]-u/2,r[1]-1],[l[c]+u/2,r[1]-1],[l[c]+u/2,f],[l[c]-u/2,f]],p=new Jx(h);if(void 0===t.showShadow||t.showShadow){if(t.barShadowStyle){var y=t.barShadowStyle;y.shadowBlur&&(e.shadowBlur=y.shadowBlur),y.shadowColor&&(e.shadowColor=y.shadowColor),y.shadowOffsetX&&(e.shadowOffsetX=y.shadowOffsetX),y.shadowOffsetY&&(e.shadowOffsetY=y.shadowOffsetY)}p.style={},be.copyAttributesWithClip(p.style,e)}p.refDataID=this.data.id,p.dataInfo={field:this.fields[c],value:i[c]},void 0!==t.barHoverAble&&(p.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(p.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(p))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],o=0,a=this.DVBWidth;if(n.xShapeBlank&&n.xShapeBlank.length&&3==n.xShapeBlank.length){var s=a-((e=n.xShapeBlank)[0]+e[2]+(r-1)*e[1]);if(s<=r)return null;o=s/r}else e=[o=a/(2*r+1),o,o];for(var l=0,u=0;u<r;u++)0==u?l=e[0]+o/2:l+=o+e[1],i.push(t[0]+l);return{xPositions:i,width:o}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var e=this.shapes.length,t=this.setting.barLinearGradient,n=-1,r=0;r<e;r++){var i=this.shapes[r];if("SuperMap.LevelRenderer.Shape.SmicPolygon"===i.CLASS_NAME){var o=i.style,a=this.location[0]+o.pointList[0][0],s=this.location[0]+o.pointList[1][0];++n>=t.length&&(n%=t.length);var l=t[n][0],u=t[n][1],c=(new lx).getLinearGradient(a,0,s,0,[[0,l],[1,u]]);i.style.color=c}}}}])&&_T(n.prototype,r),i&&_T(n,i),t}();function TT(e){return(TT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ET(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kT(e,t){return!t||"object"!==TT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function MT(e,t,n){return(MT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=AT(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function AT(e){return(AT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LT(e,t){return(LT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature.Theme.Bar=PT;var jT=function(e){function t(e,n,r,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=kT(this,AT(t).call(this,e,n,r,i,o))).CLASS_NAME="SuperMap.Feature.Theme.Bar3D",a}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LT(e,t)}(t,bT),n=t,(r=[{key:"destroy",value:function(){MT(AT(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,25,20,20]:e.dataViewBoxParameter=[5,5,5,5]),e.axisUseArrow=void 0===e.axisUseArrow||e.axisUseArrow,e.axisXLabelsOffset=void 0!==e.axisXLabelsOffset?e.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var t=this.DVBCodomain;this.DVBUnitValue=(t[1]-t[0])/this.DVBHeight;var n=this.dataViewBox,r=this.dataValues;if(!(r.length<1)){for(var i=0,o=r.length;i<o;i++)if(r[i]<t[0]||r[i]>t[1])return;var a=this.calculateXShapeInfo();if(a){var s=a.xPositions,l=a.width;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(cT.Background(this.shapeFactory,this.chartBox,e)),(!e.axis3DParameter||isNaN(e.axis3DParameter)||e.axis3DParameter<15)&&(e.axis3DParameter=20),(void 0===e.useAxis||e.useAxis)&&(this.shapes=this.shapes.concat(cT.GraphAxis(this.shapeFactory,n,e,a)));for(var u=e.bar3DParameter&&!isNaN(e.bar3DParameter)?e.bar3DParameter:10,c=0;c<r.length;c++){var f=n[1]-(r[c]-t[0])/this.DVBUnitValue,h=s[c]-l/2,p=s[c]+l/2,y=[[h,f],[p,f],[p-u,f+u],[h-u,f+u]],d=[[p,f],[p-u,f+u],[p-u,n[1]+u],[p,n[1]]],m=[[h-u,n[1]+u],[p-u,n[1]+u],[p-u,f+u],[h-u,f+u]];u<=0&&(m=[[h,n[1]],[p,n[1]],[p,f],[h,f]]);var v=new Jx(y),g=new Jx(d),b=new Jx(m);e.barSideStyle=e.barSideStyle?e.barSideStyle:e.barFaceStyle,e.barSideStyleByFields=e.barSideStyleByFields?e.barSideStyleByFields:e.barFaceStyleByFields,e.barSideStyleByCodomain=e.barSideStyleByCodomain?e.barSideStyleByCodomain:e.barFaceStyleByCodomain,e.barTopStyle=e.barTopStyle?e.barTopStyle:e.barFaceStyle,e.barTopStyleByFields=e.barTopStyleByFields?e.barTopStyleByFields:e.barFaceStyleByFields,e.barTopStyleByCodomain=e.barTopStyleByCodomain?e.barTopStyleByCodomain:e.barFaceStyleByCodomain,b.style=cT.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barFaceStyle,e.barFaceStyleByFields,e.barFaceStyleByCodomain,c,r[c]),g.style=cT.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barSideStyle,e.barSideStyleByFields,e.barSideStyleByCodomain,c,r[c]),v.style=cT.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barTopStyle,e.barTopStyleByFields,e.barTopStyleByCodomain,c,r[c]),e.barSideHoverStyle=e.barSideHoverStyle?e.barSideHoverStyle:e.barFaceHoverStyle,e.barTopHoverStyle=e.barTopHoverStyle?e.barTopHoverStyle:e.barFaceHoverStyle,b.highlightStyle=cT.ShapeStyleTool({stroke:!0},e.barFaceHoverStyle),g.highlightStyle=cT.ShapeStyleTool({stroke:!0},e.barSideHoverStyle),v.highlightStyle=cT.ShapeStyleTool({stroke:!0},e.barTopHoverStyle),v.refDataID=g.refDataID=b.refDataID=this.data.id,v.isHoverByRefDataID=g.isHoverByRefDataID=b.isHoverByRefDataID=!0,v.refDataHoverGroup=g.refDataHoverGroup=b.refDataHoverGroup=be.createUniqueID("lr_shg"),v.dataInfo=g.dataInfo=b.dataInfo={field:this.fields[c],value:r[c]},void 0!==e.barHoverAble&&(v.hoverable=g.hoverable=b.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(v.clickable=g.clickable=b.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(g)),this.shapes.push(this.shapeFactory.createShape(v)),this.shapes.push(this.shapeFactory.createShape(b))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],o=0,a=this.DVBWidth;if(n.xShapeBlank&&n.xShapeBlank.length&&3==n.xShapeBlank.length){var s=a-((e=n.xShapeBlank)[0]+e[2]+(r-1)*e[1]);if(s<=r)return null;o=s/r}else e=[o=a/(2*r+1),o,o];for(var l=0,u=0;u<r;u++)0==u?l=e[0]+o/2:l+=o+e[1],i.push(t[0]+l);return{xPositions:i,width:o}}}])&&ET(n.prototype,r),i&&ET(n,i),t}();function RT(e){return(RT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function NT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IT(e,t){return!t||"object"!==RT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function DT(e,t,n){return(DT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=FT(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function FT(e){return(FT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BT(e,t){return(BT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature.Theme.Bar3D=jT;var UT=function(e){function t(e,n,r,i,o,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=IT(this,FT(t).call(this,e,n,r,i,o,a))).setting=null,i&&i.codomain&&(s.setting=i,s.DVBCodomain=s.setting.codomain),s.CLASS_NAME="SuperMap.Feature.Theme.RankSymbol",s}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BT(e,t)}(t,bT),n=t,(r=[{key:"destroy",value:function(){this.setting=null,DT(FT(t.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var e=this.setting;e.XOffset&&(this.XOffset=e.XOffset),e.YOffset&&(this.YOffset=e.YOffset),this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var t=this.width,n=this.height,r=this.location;this.origonPoint=[r[0]-t/2,r[1]-n/2];var i=this.origonPoint;this.chartBox=[i[0],i[1]+n,i[0]+t,i[1]];var o=this.chartBox,a=this.DVBParameter;this.dataViewBox=[o[0]+a[0],o[1]-a[1],o[2]-a[2],o[3]+a[3]];var s=this.dataViewBox;return!(s[0]>=s[2]||s[1]<=s[3])&&(this.DVBOrigonPoint=[s[0],s[3]],this.DVBWidth=Math.abs(s[2]-s[0]),this.DVBHeight=Math.abs(s[1]-s[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-i[0],this.DVBOrigonPoint[1]-i[1]],!0)}}])&&NT(n.prototype,r),i&&NT(n,i),t}();function GT(e){return(GT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function VT(e,t){return!t||"object"!==GT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function JT(e,t,n){return(JT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=HT(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function HT(e){return(HT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qT(e,t){return(qT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature.Theme.RankSymbol=UT;var WT=function(e){function t(e,n,r,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=VT(this,HT(t).call(this,e,n,r,i,o))).CLASS_NAME="SuperMap.Feature.Theme.Circle",a}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qT(e,t)}(t,UT),n=t,(r=[{key:"destroy",value:function(){JT(HT(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(!this.setting)return!1;var e=this.setting;if(!e.codomain)return!1;var t=void 0===e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,n=hT.getDataValues(this.data,this.fields,t);this.dataValues=n||[];var r=this.dataValues;e.maxR||(e.maxR=100),e.minR||(e.minR=0);var i=this.DVBCodomain;i&&i[1]-i[0]>0?this.DVBUnitValue=e.maxR/(i[1]-i[0]):this.DVBUnitValue=e.maxR;var o=this.DVBUnitValue,a=r[0]*o+e.minR;if(this.width=2*a,this.height=2*a,this.initBaseParameter()&&(!i||!(r[0]<i[0]||r[0]>i[1]))){var s=this.DVBCenterPoint,l=new CC(s[0],s[1],a);l.style=cT.ShapeStyleTool(null,e.circleStyle,null,null,0),void 0!==e.fillColor?l.style.fillColor=e.fillColor:l.style.fillColor="#ff9277",l.highlightStyle=cT.ShapeStyleTool(null,e.circleHoverStyle),void 0!==e.circleHoverAble&&(l.hoverable=e.circleHoverAble),void 0!==e.circleClickAble&&(l.clickable=e.circleClickAble),l.refDataID=this.data.id,l.dataInfo={field:this.fields[0],r:a,value:r[0]},this.shapes.push(this.shapeFactory.createShape(l)),this.shapesConvertToRelativeCoordinate()}}}])&&zT(n.prototype,r),i&&zT(n,i),t}();function YT(e){return(YT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XT(e,t){return!t||"object"!==YT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function KT(e,t,n){return(KT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ZT(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ZT(e){return(ZT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $T(e,t){return($T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature.Theme.Circle=WT;var eE=function(e){function t(e,n,r,i,o,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=XT(this,ZT(t).call(this,e,n,r,i,o,a))).CLASS_NAME="SuperMap.Feature.Theme.Line",s}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$T(e,t)}(t,bT),n=t,(r=[{key:"destroy",value:function(){KT(ZT(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var r=this.DVBUnitValue,i=this.dataValues;if(!(i.length<1)){var o=this.calculateXShapeInfo();if(o){var a,s,l=o.xPositions;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(cT.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(cT.GraphAxis(this.shapeFactory,t,e,o));for(var u=[],c=[],f=0,h=i.length;f<h;f++){if(i[f]<n[0]||i[f]>n[1])return null;a=l[f],s=t[1]-(i[f]-n[0])/r;var p=new Mx(a,s);p.style=cT.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,f,i[f]),p.highlightStyle=cT.ShapeStyleTool(null,e.pointHoverStyle),void 0!==e.pointHoverAble&&(p.hoverable=e.pointHoverAble),void 0!==e.pointClickAble&&(p.clickable=e.pointClickAble),p.refDataID=this.data.id,p.dataInfo={field:this.fields[f],value:i[f]},c.push(this.shapeFactory.createShape(p));var y=[a,s];u.push(y)}var d=new Dx(u);d.style=cT.ShapeStyleTool({strokeColor:"#ee9900"},e.lineStyle),d.clickable=!1,d.hoverable=!1;var m=this.shapeFactory.createShape(d);this.shapes.push(m),this.shapes=this.shapes.concat(c),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],o=this.DVBWidth,a=0;if(n.xShapeBlank&&n.xShapeBlank.length&&2==n.xShapeBlank.length){var s=o-((e=n.xShapeBlank)[0]+e[1]);if(s<=r)return null;a=s/(r-1)}else e=[a=o/(r+1),a,a];for(var l=0,u=0;u<r;u++)0==u?l=e[0]:l+=a,i.push(t[0]+l);return{xPositions:i,width:0}}}])&&QT(n.prototype,r),i&&QT(n,i),t}();function tE(e){return(tE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rE(e,t){return!t||"object"!==tE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function iE(e,t,n){return(iE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oE(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function oE(e){return(oE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aE(e,t){return(aE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature.Theme.Line=eE;var sE=function(e){function t(e,n,r,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=rE(this,oE(t).call(this,e,n,r,i,o))).CLASS_NAME="SuperMap.Feature.Theme.Pie",a}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aE(e,t)}(t,bT),n=t,(r=[{key:"destroy",value:function(){iE(oE(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting,t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){e.useBackground&&this.shapes.push(cT.Background(this.shapeFactory,this.chartBox,e));var n=this.dataValues;if(!(n.length<1)){for(var r=this.DVBCodomain,i=0;i<n.length;i++)if(n[i]<r[0]||n[i]>r[1])return;for(var o=0,a=0;a<n.length;a++)o+=Math.abs(n[a]);this.DVBUnitValue=360/o;for(var s=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,c=0,f=u,h=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=0;p<n.length;p++){var y=Math.abs(n[p]);(c=0===p?u+y*s:p===y.length-1?f:u+y*s)-u>=360&&(c=359.9999999);var d=new iC(l[0],l[1],h,u,c);if(void 0===e.sectorStyleByFields){var m=p%t.length;d.style=cT.ShapeStyleTool(null,e.sectorStyle,t,null,m)}else d.style=cT.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,p,n[p]);d.highlightStyle=cT.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(d.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(d.clickable=e.sectorClickAble),d.refDataID=this.data.id,d.dataInfo={field:this.fields[p],value:n[p]},this.shapes.push(this.shapeFactory.createShape(d)),u=c}this.shapesConvertToRelativeCoordinate()}}}}])&&nE(n.prototype,r),i&&nE(n,i),t}();function lE(e){return(lE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cE(e,t){return!t||"object"!==lE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fE(e,t,n){return(fE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hE(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function hE(e){return(hE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pE(e,t){return(pE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature.Theme.Pie=sE;var yE=function(e){function t(e,n,r,i,o,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=cE(this,hE(t).call(this,e,n,r,i,o,a))).CLASS_NAME="SuperMap.Feature.Theme.Point",s}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pE(e,t)}(t,bT),n=t,(r=[{key:"destroy",value:function(){fE(hE(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var r=this.DVBUnitValue,i=this.dataValues,o=this.calculateXShapeInfo();if(o){var a,s,l=o.xPositions;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(cT.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(cT.GraphAxis(this.shapeFactory,t,e,o));for(var u=0,c=i.length;u<c;u++){if(i[u]<n[0]||i[u]>n[1])return null;a=l[u],s=t[1]-(i[u]-n[0])/r;var f=new Mx(a,s);f.style=cT.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,u,i[u]),f.highlightStyle=cT.ShapeStyleTool(null,e.pointHoverStyle),void 0!==e.pointHoverAble&&(f.hoverable=e.pointHoverAble),void 0!==e.pointClickAble&&(f.clickable=e.pointClickAble),f.refDataID=this.data.id,f.dataInfo={field:this.fields[u],value:i[u]},this.shapes.push(this.shapeFactory.createShape(f))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],o=this.DVBWidth,a=0;if(n.xShapeBlank&&n.xShapeBlank.length&&2==n.xShapeBlank.length){var s=o-((e=n.xShapeBlank)[0]+e[1]);if(s<=r)return null;a=s/(r-1)}else e=[a=o/(r+1),a,a];for(var l=0,u=0;u<r;u++)0==u?l=e[0]:l+=a,i.push(t[0]+l);return{xPositions:i,width:0}}}])&&uE(n.prototype,r),i&&uE(n,i),t}();function dE(e){return(dE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vE(e,t){return!t||"object"!==dE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gE(e,t,n){return(gE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bE(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function bE(e){return(bE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SE(e,t){return(SE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature.Theme.Point=yE;var _E=function(e){function t(e,n,r,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=vE(this,bE(t).call(this,e,n,r,i,o))).CLASS_NAME="SuperMap.Feature.Theme.Ring",a}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SE(e,t)}(t,bT),n=t,(r=[{key:"destroy",value:function(){gE(bE(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],t=this.setting;t.useBackground&&this.shapes.push(cT.Background(this.shapeFactory,this.chartBox,t));var n=this.dataValues;if(!(n.length<1)){for(var r=this.DVBCodomain,i=0;i<n.length;i++)if(n[i]<r[0]||n[i]>r[1])return;for(var o=0,a=0;a<n.length;a++)o+=Math.abs(n[a]);this.DVBUnitValue=360/o;for(var s=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,c=0,f=u,h=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=t.innerRingRadius>=0&&t.innerRingRadius<h,y=void 0!==t.innerRingRadius&&!isNaN(t.innerRingRadius)&&p?t.innerRingRadius:0,d=0;d<n.length;d++){var m=Math.abs(n[d]);c=0===d?u+m*s:d===m.length-1?f:u+m*s;var v=new iC(l[0],l[1],h,u,c,y);if(void 0===t.sectorStyleByFields){var g=d%e.length;v.style=cT.ShapeStyleTool(null,t.sectorStyle,e,null,g)}else v.style=cT.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,d,n[d]);v.highlightStyle=cT.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(v.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(v.clickable=t.sectorClickAble),v.refDataID=this.data.id,v.dataInfo={field:this.fields[d],value:n[d]},this.shapes.push(this.shapeFactory.createShape(v)),u=c}this.shapesConvertToRelativeCoordinate()}}}}])&&mE(n.prototype,r),i&&mE(n,i),t}();function wE(e){return(wE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xE(e,t){return!t||"object"!==wE(t)&&"function"!=typeof t?CE(e):t}function CE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PE(e,t,n){return(PE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=TE(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function TE(e){return(TE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function EE(e,t){return(EE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature.Theme.Ring=_E;var kE=function(e){function t(e,n,r,i,o){var a;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=xE(this,TE(t).call(this,e,n)),!e.geometry)return xE(a);if(!(e.geometry instanceof Ce))return xE(a);a.dataBounds=e.geometry.getBounds(),a.nodesClipPixel=2,a.isHoverAble=!0,a.isMultiHover=!0,a.isClickAble=!0,a.highlightStyle=null,a.shapeOptions={},a.style=r||{},a.CLASS_NAME="SuperMap.Feature.Theme.Vector",a.style=r||{},i&&be.copyAttributesWithClip(CE(a),i,["shapeOptions","dataBounds"]),o&&be.copyAttributesWithClip(a.shapeOptions,o);var s=e.geometry;return a.lonlat=a.dataBounds.getCenterLonLat(),a.location=a.getLocalXY(a.lonlat),s instanceof vt?a.lineToTF(s):s instanceof rt?a.lineToTF(s):s instanceof Ve||(s instanceof Fe?a.multiPointToTF(s):s instanceof wt?a.multiLineStringToTF(s):s instanceof Tt?a.multiPolygonToTF(s):s instanceof jt?a.polygonToTF(s):s instanceof Le||(s instanceof Xe?a.pointToTF(s):s instanceof Bt?a.rectangleToTF(s):s instanceof ct&&a.geoTextToTF(s))),a}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&EE(e,t)}(t,hT),n=t,(r=[{key:"destroy",value:function(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,PE(TE(t.prototype),"destroy",this).call(this)}},{key:"lineToTF",value:function(e){for(var t=e.components,n=[],r=[],i=this.location,o=[],a=this.nodesClipPixel,s=0;s<t.length;s++){var l=t[s];if(r=[],n=this.getLocalXY(l),r[0]=n[0]-i[0],r[1]=n[1]-i[1],o.length>0){var u=o[o.length-1];if(Math.abs(u[0]-r[0])<=a&&Math.abs(u[1]-r[1])<=a)continue}o.push(r)}if(o.length<2)return null;var c=new Object;(c=be.copyAttributesWithClip(c,this.style,["pointList"])).pointList=o;var f=new GP({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=this.location,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&be.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}},{key:"multiPointToTF",value:function(e){for(var t=e.components,n=[],r=[],i=this.location,o=[],a=this.nodesClipPixel,s=0;s<t.length;s++){var l=t[s];if(r=[],n=this.getLocalXY(l),r[0]=n[0]-i[0],r[1]=n[1]-i[1],o.length>0){var u=o[o.length-1];if(Math.abs(u[0]-r[0])<=a&&Math.abs(u[1]-r[1])<=a)continue}o.push(r);var c=new Object;c.r=6,(c=be.copyAttributesWithClip(c,this.style)).x=r[0],c.y=r[1];var f=new pP({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=i,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&be.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}}},{key:"multiLineStringToTF",value:function(e){for(var t=e.components,n=0;n<t.length;n++){var r=t[n];this.lineToTF(r)}}},{key:"multiPolygonToTF",value:function(e){for(var t=e.components,n=0;n<t.length;n++){var r=t[n];this.polygonToTF(r)}}},{key:"pointToTF",value:function(e){var t=this.location,n=this.getLocalXY(e),r=new Object;r.r=6,(r=be.copyAttributesWithClip(r,this.style)).x=n[0]-t[0],r.y=n[1]-t[1];var i=new pP({style:r,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(i.highlightStyle=this.highlightStyle),i.refOriginalPosition=t,i.refDataID=this.data.id,i.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&be.copyAttributesWithClip(i,this.shapeOptions),this.shapes.push(i)}},{key:"polygonToTF",value:function(e){for(var t=e.components,n=[],r=[],i=this.location,o=[],a=[],s=[],l=this.nodesClipPixel,u=0;u<t.length;u++){var c=t[u].components;if(0===u){o=[];for(var f=0;f<c.length;f++){if(r=[],n=this.getLocalXY(c[f]),r[0]=n[0]-i[0],r[1]=n[1]-i[1],o.length>0){var h=o[o.length-1];if(Math.abs(h[0]-r[0])<=l&&Math.abs(h[1]-r[1])<=l)continue}o.push(r)}}else{a=[];for(var p=0;p<c.length;p++){if(r=[],n=this.getLocalXY(c[p]),r[0]=n[0]-i[0],r[1]=n[1]-i[1],a.length>0){var y=a[a.length-1];if(Math.abs(y[0]-r[0])<=l&&Math.abs(y[1]-r[1])<=l)continue}a.push(r)}}a.length<2||s.push(a)}if(!(o.length<2)){var d={};(d=be.copyAttributesWithClip(d,this.style,["pointList"])).pointList=o;var m=new RP({style:d,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(m.highlightStyle=this.highlightStyle),m.refOriginalPosition=this.location,m.refDataID=this.data.id,m.isHoverByRefDataID=this.isMultiHover,s.length>0&&(m.holePolygonPointLists=s),this.shapeOptions&&be.copyAttributesWithClip(m,this.shapeOptions),this.shapes.push(m)}}},{key:"rectangleToTF",value:function(e){var t=this.location,n=new _e(e.x,e.y),r=this.layer.map.getResolution(),i=this.getLocalXY(n),o=new Object;o.r=6,(o=be.copyAttributesWithClip(o,this.style)).x=i[0]-t[0],o.y=i[1]-t[1]-2*e.width/r,o.width=e.width/r,o.height=e.height/r;var a=new tT({style:o,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(a.highlightStyle=this.highlightStyle),a.refOriginalPosition=t,a.refDataID=this.data.id,a.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&be.copyAttributesWithClip(a,this.shapeOptions),this.shapes.push(a)}},{key:"geoTextToTF",value:function(e){var t=this.location,n=this.getLocalXY(e),r=new Object;r.r=6,(r=be.copyAttributesWithClip(r,this.style,["x","y","text"])).x=n[0]-t[0],r.y=n[1]-t[1],r.text=e.text;var i=new SP({style:r,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(i.highlightStyle=this.highlightStyle),i.refOriginalPosition=t,i.refDataID=this.data.id,i.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&be.copyAttributesWithClip(i,this.shapeOptions),this.shapes.push(i)}},{key:"updateAndAddShapes",value:function(){var e=this.getLocalXY(this.lonlat);this.location=e;for(var t=this.layer.renderer,n=0,r=this.shapes.length;n<r;n++){var i=this.shapes[n];i.refOriginalPosition=e,t.addShape(i)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(e){return this.layer.getLocalXY(e)}}])&&OE(n.prototype,r),i&&OE(n,i),t}();
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function ME(e){return(ME="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jE(e,t,n){return(jE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=RE(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function RE(e){return(RE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function NE(e,t){return(NE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature.Theme.ThemeVector=kE;var IE=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(i=RE(t).call(this,e))||"object"!==ME(i)&&"function"!=typeof i?LE(r):i,e=e||{},n.id=null,n.type="group",n.clipShape=null,n._children=[],n._storage=null,n.__dirty=!0,n.ignore=!1,be.extend(LE(n),e),n.id=n.id||be.createUniqueID("smShapeGroup_"),n.CLASS_NAME="SuperMap.LevelRenderer.Group",n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NE(e,t)}(t,r.mixin(TC,$C)),n=t,(i=[{key:"destroy",value:function(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,jE(RE(t.prototype),"destroy",this).call(this)}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(e){return this._children[e]}},{key:"addChild",value:function(e){e!=this&&e.parent!=this&&(e.parent&&e.parent.removeChild(e),this._children.push(e),e.parent=this,this._storage&&this._storage!==e._storage&&(this._storage.addToMap(e),e instanceof t&&e.addChildrenToStorage(this._storage)))}},{key:"removeChild",value:function(e){var n=be.indexOf(this._children,e);this._children.splice(n,1),e.parent=null,this._storage&&(this._storage.delFromMap(e.id),e instanceof t&&e.delChildrenFromStorage(this._storage))}},{key:"eachChild",value:function(e,t){for(var n=!!t,r=0;r<this._children.length;r++){var i=this._children[r];n?e.call(t,i):e(i)}}},{key:"traverse",value:function(e,t){for(var n=!!t,r=0;r<this._children.length;r++){var i=this._children[r];n?e.call(t,i):e(i),"group"===i.type&&i.traverse(e,t)}}},{key:"addChildrenToStorage",value:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.addToMap(n),"group"===n.type&&n.addChildrenToStorage(e)}}},{key:"delChildrenFromStorage",value:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.delFromMap(n.id),"group"===n.type&&n.delChildrenFromStorage(e)}}},{key:"modSelf",value:function(){this.__dirty=!0}}])&&AE(n.prototype,i),o&&AE(n,o),t}();function DE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var FE=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="SuperMap.LevelRenderer.Storage"}var t,n,r;return t=e,r=[{key:"shapeCompareFunc",value:function(e,t){return e.zlevel==t.zlevel?e.z==t.z?e.__renderidx-t.__renderidx:e.z-t.z:e.zlevel-t.zlevel}}],(n=[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(e,t){if(!t){t={hover:!1,normal:"down",update:!1}}if(t.hover)for(var n=0,r=this._hoverElements.length;n<r;n++){var i=this._hoverElements[n];if(i.updateTransform(),e(i))return this}switch(t.update&&this.updateShapeList(),t.normal){case"down":for(var o=this._shapeList.length;o--;)if(e(this._shapeList[o]))return this;break;default:for(var a=0,s=this._shapeList.length;a<s;a++)if(e(this._shapeList[a]))return this}return this}},{key:"getHoverShapes",value:function(t){for(var n=[],r=this._hoverElements.length,i=0;i<r;i++){n.push(this._hoverElements[i]);var o=this._hoverElements[i].hoverConnect;if(o)for(var a,s=0,l=(o=o instanceof Array?o:[o]).length;s<l;s++)(a=o[s].id?o[s]:this.get(o[s]))&&n.push(a)}if(n.sort(e.shapeCompareFunc),t)for(var u=0,c=n.length;u<c;u++)n[u].updateTransform();return n}},{key:"getShapeList",value:function(e){return e&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var t=this._roots.length,n=0;n<t;n++){var r=this._roots[n];this._updateAndAddShape(r)}this._shapeList.length=this._shapeListOffset;for(var i=this._shapeList.length,o=0;o<i;o++)this._shapeList[o].__renderidx=o;this._shapeList.sort(e.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(e,t){if(!e.ignore)if(e.updateTransform(),"group"==e.type){e.clipShape&&(e.clipShape.parent=e,e.clipShape.updateTransform(),t?(t=t.slice()).push(e.clipShape):t=[e.clipShape]);for(var n=0;n<e._children.length;n++){var r=e._children[n];r.__dirty=e.__dirty||r.__dirty,this._updateAndAddShape(r,t)}e.__dirty=!1}else e.__clipShapes=t,this._shapeList[this._shapeListOffset++]=e}},{key:"mod",value:function(e,t){var n=this._elements[e];if(n&&(n.modSelf(),t))if(t.parent||t._storage||t.__startClip){var r={};for(var i in t)"parent"!=i&&"_storage"!=i&&"__startClip"!=i&&t.hasOwnProperty(i)&&(r[i]=t[i]);(new ax).merge(n,r,!0)}else(new ax).merge(n,t,!0);return this}},{key:"drift",value:function(e,t,n){var r=this._elements[e];return r&&(r.needTransform=!0,"horizontal"===r.draggable?n=0:"vertical"===r.draggable&&(t=0),(!r.ondrift||r.ondrift&&!r.ondrift(t,n))&&r.drift(t,n)),this}},{key:"addHover",value:function(e){return e.updateNeedTransform(),this._hoverElements.push(e),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return this._hoverElements.length>0}},{key:"addRoot",value:function(e){e instanceof IE&&e.addChildrenToStorage(this),this.addToMap(e),this._roots.push(e)}},{key:"delRoot",value:function(e){if(void 0===e){for(var t=0;t<this._roots.length;t++){var n=this._roots[t];n instanceof IE&&n.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(e instanceof Array)for(var r=e.length,i=0;i<r;i++)this.delRoot(e[i]);else{var o;o="string"==typeof e?this._elements[e]:e;var a=(new ax).indexOf(this._roots,o);a>=0&&(this.delFromMap(o.id),this._roots.splice(a,1),o instanceof IE&&o.delChildrenFromStorage(this))}}},{key:"addToMap",value:function(e){return e instanceof IE&&(e._storage=this),e.modSelf(),this._elements[e.id]=e,this}},{key:"get",value:function(e){return this._elements[e]}},{key:"delFromMap",value:function(e){var t=this._elements[e];return t&&(delete this._elements[e],t instanceof IE&&(t._storage=null)),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}])&&DE(t.prototype,n),r&&DE(t,r),e}();function BE(e){return(BE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UE(e,t){return!t||"object"!==BE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function GE(e){return(GE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zE(e,t){return(zE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function VE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HE(e,t,n){return t&&JE(e.prototype,t),n&&JE(e,n),e}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var qE=function(){function e(t,n){VE(this,e),this.root=t,this.storage=n,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,e.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="SuperMap.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var r=document.createElement("div");this._domRoot=r,r.style.position="relative",r.style.overflow="hidden",r.style.width=this._width+"px",r.style.height=this._height+"px",this.root.appendChild(r),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=e.createDom(be.createUniqueID("SuperMap.Theme_background_"),"div",this),r.appendChild(this._bgDom),this._bgDom.onselectstart=a,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var i=new WE(be.createUniqueID("_highLightLayer_"),this);this._layers.hover=i,r.appendChild(i.dom),i.initContext(),i.dom.onselectstart=a,i.dom.style["-webkit-user-select"]="none",i.dom.style["user-select"]="none",i.dom.style["-webkit-touch-callout"]="none";var o=this;function a(){return!1}this.updatePainter=function(e,t){o.refreshShapes(e,t)}}return HE(e,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(e){return this.refresh(e,!0),this}},{key:"refresh",value:function(e,t){var n=this.storage.getShapeList(!0);return this._paintList(n,t),"function"==typeof e&&e(),this}},{key:"_paintList",value:function(e,t){var n,r,i;for(var o in void 0===t&&(t=!1),this._updateLayerStatus(e),this._layers)"hover"!==o&&(this._layers[o].unusedCount++,this._layers[o].updateTransform());for(var a=[],s=0,l=e.length;s<l;s++){var u=e[s];if(r!==u.zlevel&&(n&&n.needTransform&&i.restore(),i=(n=this.getLayer(u.zlevel)).ctx,r=u.zlevel,n.unusedCount=0,(n.dirty||t)&&n.clear(),n.needTransform&&(i.save(),n.setTransform(i))),i&&u.__startClip){var c=u.__startClip;if(i.save(),c.needTransform){var f=c.transform;KC.Util_matrix.invert(a,f),i.transform(f[0],f[1],f[2],f[3],f[4],f[5])}if(i.beginPath(),c.buildPath(i,c.style),i.clip(),c.needTransform){var h=a;i.transform(h[0],h[1],h[2],h[3],h[4],h[5])}}if((n&&n.dirty||t)&&!u.invisible&&(!u.onbrush||u.onbrush&&!u.onbrush(i,!1)))if(VC.catchBrushException)try{u.brush(i,!1,this.updatePainter)}catch(e){KC.Util_log(e,"brush error of "+u.type,u)}else u.brush(i,!1,this.updatePainter);i&&u.__stopClip&&i.restore(),u.__dirty=!1}for(var p in i&&n&&n.needTransform&&i.restore(),this._layers)if("hover"!==p){var y=this._layers[p];y.dirty=!1,1==y.unusedCount&&y.clear()}}},{key:"getLayer",value:function(e){var t=this._layers[e];if(!t){var n=this._zlevelList.length,r=null,i=-1;if(n>0&&e>this._zlevelList[0]){for(i=0;i<n-1&&!(this._zlevelList[i]<e&&this._zlevelList[i+1]>e);i++);r=this._layers[this._zlevelList[i]]}this._zlevelList.splice(i+1,0,e),t=new WE(be.createUniqueID("_levelLayer_"+e),this);var o=r?r.dom:this._bgDom;o.nextSibling?o.parentNode.insertBefore(t.dom,o.nextSibling):o.parentNode.appendChild(t.dom),t.initContext(),this._layers[e]=t,this._layerConfig[e]&&(new ax).merge(t,this._layerConfig[e],!0),t.updateTransform()}return t}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(e){var t=this._layers,n={};for(var r in t)"hover"!==r&&(n[r]=t[r].elCount,t[r].elCount=0);for(var i=0;i<e.length;i++){var o=e[i],a=t[o.zlevel];if(a){if(a.elCount++,a.dirty)continue;a.dirty=o.__dirty}}for(var s in t)"hover"!==s&&n[s]!==t[s].elCount&&(t[s].dirty=!0)}},{key:"refreshShapes",value:function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];this.storage.mod(i.id)}return this.refresh(t),this}},{key:"clear",value:function(){for(var e in this._layers)"hover"!=e&&this._layers[e].clear();return this}},{key:"modLayer",value:function(e,t){if(t){this._layerConfig[e]?(new ax).merge(this._layerConfig[e],t,!0):this._layerConfig[e]=t;var n=this._layers[e];n&&(new ax).merge(n,this._layerConfig[e],!0)}}},{key:"delLayer",value:function(e){var t=this._layers[e];t&&(this.modLayer(e,{position:t.position,rotation:t.rotation,scale:t.scale}),t.dom.parentNode.removeChild(t.dom),delete this._layers[e],this._zlevelList.splice((new ax).indexOf(this._zlevelList,e),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var e=this.storage.getHoverShapes(!0),t=0,n=e.length;t<n;t++)this._brushHover(e[t]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var e=this._layers.hover;return e&&e.clear(),this}},{key:"resize",value:function(){var e=this._domRoot;e.style.display="none";var t=this._getWidth(),n=this._getHeight();if(e.style.display="",this._width!=t||n!=this._height){for(var r in this._width=t,this._height=n,e.style.width=t+"px",e.style.height=n+"px",this._layers)this._layers[r].resize(t,n);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(e){var t=this._layers[e];t&&t.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(t,n,r){var i=e.createDom(be.createUniqueID("SuperMap.Theme.image_"),"canvas",this);this._bgDom.appendChild(i);var o=i.getContext("2d");1!=e.devicePixelRatio&&o.scale(e.devicePixelRatio,e.devicePixelRatio),o.fillStyle=n||"#fff",o.rect(0,0,this._width*e.devicePixelRatio,this._height*e.devicePixelRatio),o.fill();var a=this;this.storage.iterShape(function(e){if(!e.invisible&&(!e.onbrush||e.onbrush&&!e.onbrush(o,!1)))if(VC.catchBrushException)try{e.brush(o,!1,a.updatePainter)}catch(t){KC.Util_log(t,"brush error of "+e.type,e)}else e.brush(o,!1,a.updatePainter)},{normal:"up",update:!0});var s=i.toDataURL(t,r);return o=null,this._bgDom.removeChild(i),s}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function(e){var t=this._layers.hover.ctx;if(!e.onbrush||e.onbrush&&!e.onbrush(t,!0)){var n=this.getLayer(e.zlevel);if(n.needTransform&&(t.save(),n.setTransform(t)),VC.catchBrushException)try{e.brush(t,!0,this.updatePainter)}catch(t){KC.Util_log(t,"hoverBrush error of "+e.type,e)}else e.brush(t,!0,this.updatePainter);n.needTransform&&t.restore()}}},{key:"_shapeToImage",value:function(e,t,n,r,i){var o=document.createElement("canvas"),a=o.getContext("2d"),s=i||window.devicePixelRatio||1;o.style.width=n+"px",o.style.height=r+"px",o.setAttribute("width",n*s),o.setAttribute("height",r*s),a.clearRect(0,0,n*s,r*s);var l={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[0,0,0],t.rotation=0,t.scale=[1,1],t&&t.brush(a,!1);var u=new YP({id:e,style:{x:0,y:0,image:o}});return null!=l.position&&(u.position=t.position=l.position),null!=l.rotation&&(u.rotation=t.rotation=l.rotation),null!=l.scale&&(u.scale=t.scale=l.scale),u}},{key:"_createShapeToImageProcessor",value:function(){var t=this;return function(n,r,i,o){return t._shapeToImage(n,r,i,o,e.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(e){if(!(e instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var t=0;t<e.length;t++)this.storage.addHover(e[t]),this._brushHover(e[t])}}],[{key:"createDom",value:function(t,n,r){var i=document.createElement(n),o=r._width,a=r._height;return i.style.position="absolute",i.style.left=0,i.style.top=0,i.style.width=o+"px",i.style.height=a+"px",i.setAttribute("width",o*e.devicePixelRatio),i.setAttribute("height",a*e.devicePixelRatio),i.setAttribute("id",t),i}}]),e}(),WE=function(e){function t(e,n){var r;return VE(this,t),(r=UE(this,GE(t).call(this,e,n))).dom=null,r.domBack=null,r.ctxBack=null,r.painter=n,r.unusedCount=0,r.config=null,r.dirty=!0,r.elCount=0,r.clearColor=0,r.motionBlur=!1,r.lastFrameAlpha=.7,r.zoomable=!1,r.panable=!1,r.maxZoom=1/0,r.minZoom=0,r.ctx=null,r.dom=qE.createDom(be.createUniqueID("SuperMap.Theme"+e),"canvas",n),r.dom.onselectstart=function(){return!1},r.dom.style["-webkit-user-select"]="none",r.dom.style["user-select"]="none",r.dom.style["-webkit-touch-callout"]="none",r.CLASS_NAME="SuperMap.LevelRenderer.Painter.Layer",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zE(e,t)}(t,$C),HE(t,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,$C.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!=qE.devicePixelRatio&&this.ctx.scale(qE.devicePixelRatio,qE.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=qE.createDom(be.createUniqueID("SuperMap.Theme.back-"+this.id),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!=qE.devicePixelRatio&&this.ctxBack.scale(qE.devicePixelRatio,qE.devicePixelRatio)}},{key:"resize",value:function(e,t){this.dom.style.width=e+"px",this.dom.style.height=t+"px",this.dom.setAttribute("width",e*qE.devicePixelRatio),this.dom.setAttribute("height",t*qE.devicePixelRatio),1!=qE.devicePixelRatio&&this.ctx.scale(qE.devicePixelRatio,qE.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",e*qE.devicePixelRatio),this.domBack.setAttribute("height",t*qE.devicePixelRatio),1!=qE.devicePixelRatio&&this.ctxBack.scale(qE.devicePixelRatio,qE.devicePixelRatio))}},{key:"clear",value:function(){var e=this.dom,t=this.ctx,n=e.width,r=e.height,i=this.clearColor,o=this.motionBlur,a=this.lastFrameAlpha;if(o&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(e,0,0,n/qE.devicePixelRatio,r/qE.devicePixelRatio)),i?(t.save(),t.fillStyle=this.config.clearColor,t.fillRect(0,0,n/qE.devicePixelRatio,r/qE.devicePixelRatio),t.restore()):t.clearRect(0,0,n/qE.devicePixelRatio,r/qE.devicePixelRatio),o){var s=this.domBack;t.save(),t.globalAlpha=a,t.drawImage(s,0,0,n/qE.devicePixelRatio,r/qE.devicePixelRatio),t.restore()}}}]),t}();function YE(e){return(YE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XE(e){return(XE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZE(e,t){return(ZE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var $E=function(e){function t(e,n,r){var i,o,a,s,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(i=!(a=XE(t).call(this,e,n,r))||"object"!==YE(a)&&"function"!=typeof a?KE(o):a).root=e,i.storage=n,i.painter=r,i._lastX=0,i._lastY=0,i._mouseX=0,i._mouseY=0,i._findHover=null,i._domHover=null,i._findHover=(s=function(e,t,n){var r=this;if(r._draggingTarget&&r._draggingTarget.id==e.id||e.isSilent())return!1;var i=r._event;if(e.isCover(t,n)){if(e.hoverable)if(e.isHoverByRefDataID&&!0===e.isHoverByRefDataID){if(e.refDataID){var o=e.refDataID,a=null;e.refDataHoverGroup&&(a=e.refDataHoverGroup);for(var s=r.storage._shapeList,l=0,u=s.length;l<u;l++){var c=s[l];c.refDataID&&o===c.refDataID&&(a?c.refDataHoverGroup&&a===c.refDataHoverGroup&&r.storage.addHover(c):r.storage.addHover(c))}}}else r.storage.addHover(e);for(var f=e.parent;f;){if(f.clipShape&&!f.clipShape.isCover(r._mouseX,r._mouseY))return!1;f=f.parent}return r._lastHover!=e&&(r._processOutShape(i),r._processDragLeave(i),r._lastHover=e,r._processDragEnter(i)),r._processOverShape(i),r._processDragOver(i),r._hasfound=1,!0}return!1},l=KE(i),function(e,t,n){return s.call(l,e,t,n)}),i._domHover=r.getDomHover(),i.CLASS_NAME="SuperMap.LevelRenderer.Handler";var u={resize:function(e){e=e||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(VC.EVENT.RESIZE,e)},click:function(e){e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<10&&this._dispatchAgency(t,VC.EVENT.CLICK,e),this._mousemoveHandler(e)},dblclick:function(e){e=e||window.event,e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<5&&this._dispatchAgency(t,VC.EVENT.DBLCLICK,e),this._mousemoveHandler(e)},mousewheel:function(e){var t=((e=this._zrenderEventFixed(e)).wheelDelta||-e.detail)>0?1.1:1/1.1,n=this.painter.getLayers(),r=!1;for(var i in n)if("hover"!==i){var o=n[i],a=o.position;if(o.zoomable){o.__zoom=o.__zoom||1;var s=o.__zoom;s*=t,t=(s=Math.max(Math.min(o.maxZoom,s),o.minZoom))/o.__zoom,o.__zoom=s,a[0]-=(this._mouseX-a[0])*(t-1),a[1]-=(this._mouseY-a[1])*(t-1),o.scale[0]*=t,o.scale[1]*=t,o.dirty=!0,r=!0}}r&&this.painter.refresh(),this._dispatchAgency(this._lastHover,VC.EVENT.MOUSEWHEEL,e),this._mousemoveHandler(e)},mousemove:function(e){this._clickThreshold++,e=this._zrenderEventFixed(e),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=KC.Util_event.getX(e),this._mouseY=KC.Util_event.getY(e);var t=this._mouseX-this._lastX,n=this._mouseY-this._lastY;this._processDragStart(e),this._hasfound=0,this._event=e,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(e),this._processDragLeave(e)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var r="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,t,n),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var i=this.painter.getLayers(),o=!1;for(var a in i)if("hover"!==a){var s=i[a];s.panable&&(r="move",s.position[0]+=t,s.position[1]+=n,o=!0,s.dirty=!0)}o&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?r="move":this._hasfound&&this._lastHover.clickable&&(r="pointer"),this.root.style.cursor=r,this._dispatchAgency(this._lastHover,VC.EVENT.MOUSEMOVE,e),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(e){var t=(e=this._zrenderEventFixed(e)).toElement||e.relatedTarget;if(t!=this.root)for(;t&&9!=t.nodeType;){if(t==this.root)return void this._mousemoveHandler(e);t=t.parentNode}e.zrenderX=this._lastX,e.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(e),this._processDrop(e),this._processDragEnd(e),this.painter.refreshHover(),this.dispatch(VC.EVENT.GLOBALOUT,e)},mousedown:function(e){if(this._clickThreshold=0,2==this._lastDownButton)return this._lastDownButton=e.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,e=this._zrenderEventFixed(e),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,VC.EVENT.MOUSEDOWN,e),this._lastDownButton=e.button},mouseup:function(e){e=this._zrenderEventFixed(e),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,VC.EVENT.MOUSEUP,e),this._processDrop(e),this._processDragEnd(e)},touchstart:function(e){e=this._zrenderEventFixed(e,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(e),this._mousedownHandler(e)},touchmove:function(e){e=this._zrenderEventFixed(e,!0),this._mousemoveHandler(e),this._isDragging&&KC.Util_event.stop(e)},touchend:function(e){e=this._zrenderEventFixed(e,!0),this._mouseupHandler(e);var t=new Date;t-this._lastTouchMoment<VC.EVENT.touchClickDelay&&(this._mobildFindFixed(e),this._clickHandler(e),t-this._lastClickMoment<VC.EVENT.touchClickDelay/2&&(this._dblclickHandler(e),this._lastHover&&this._lastHover.clickable&&KC.Util_event.stop(e)),this._lastClickMoment=t),this.painter.clearHover()}};function c(e,t){return function(n){return e.call(t,n)}}return function(e){var t=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],n=t.length;for(;n--;){var r=t[n];e["_"+r+"Handler"]=c(u[r],e)}}(KE(i)),window.addEventListener?(window.addEventListener("resize",i._resizeHandler),KC.Util_env.os.tablet||KC.Util_env.os.phone?(e.addEventListener("touchstart",i._touchstartHandler),e.addEventListener("touchmove",i._touchmoveHandler),e.addEventListener("touchend",i._touchendHandler)):(e.addEventListener("click",i._clickHandler),e.addEventListener("dblclick",i._dblclickHandler),e.addEventListener("mousewheel",i._mousewheelHandler),e.addEventListener("mousemove",i._mousemoveHandler),e.addEventListener("mousedown",i._mousedownHandler),e.addEventListener("mouseup",i._mouseupHandler)),e.addEventListener("DOMMouseScroll",i._mousewheelHandler),e.addEventListener("mouseout",i._mouseoutHandler)):(window.attachEvent("onresize",i._resizeHandler),e.attachEvent("onclick",i._clickHandler),e.ondblclick=i._dblclickHandler,e.attachEvent("onmousewheel",i._mousewheelHandler),e.attachEvent("onmousemove",i._mousemoveHandler),e.attachEvent("onmouseout",i._mouseoutHandler),e.attachEvent("onmousedown",i._mousedownHandler),e.attachEvent("onmouseup",i._mouseupHandler)),i}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZE(e,t)}(t,TC),n=t,(r=[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,TC.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(e,t){return this.bind(e,t),this}},{key:"un",value:function(e,t){return this.unbind(e,t),this}},{key:"trigger",value:function(e,t){var n=VC.EVENT;switch(e){case n.RESIZE:case n.CLICK:case n.DBLCLICK:case n.MOUSEWHEEL:case n.MOUSEMOVE:case n.MOUSEDOWN:case n.MOUSEUP:case n.MOUSEOUT:this["_"+e+"Handler"](t)}}},{key:"dispose",value:function(){var e=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),KC.Util_env.os.tablet||KC.Util_env.os.phone?(e.removeEventListener("touchstart",this._touchstartHandler),e.removeEventListener("touchmove",this._touchmoveHandler),e.removeEventListener("touchend",this._touchendHandler)):(e.removeEventListener("click",this._clickHandler),e.removeEventListener("dblclick",this._dblclickHandler),e.removeEventListener("mousewheel",this._mousewheelHandler),e.removeEventListener("mousemove",this._mousemoveHandler),e.removeEventListener("mousedown",this._mousedownHandler),e.removeEventListener("mouseup",this._mouseupHandler)),e.removeEventListener("DOMMouseScroll",this._mousewheelHandler),e.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),e.detachEvent("onclick",this._clickHandler),e.detachEvent("dblclick",this._dblclickHandler),e.detachEvent("onmousewheel",this._mousewheelHandler),e.detachEvent("onmousemove",this._mousemoveHandler),e.detachEvent("onmouseout",this._mouseoutHandler),e.detachEvent("onmousedown",this._mousedownHandler),e.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(e){var t=this._lastHover;if(this._isMouseDown&&t&&t.draggable&&!this._draggingTarget&&this._mouseDownTarget==t){if(t.dragEnableTime&&new Date-this._lastMouseDownMoment<t.dragEnableTime)return;var n=t;this._draggingTarget=n,this._isDragging=1,n.invisible=!0,this.storage.mod(n.id),this._dispatchAgency(n,VC.EVENT.DRAGSTART,e),this.painter.refresh()}}},{key:"_processDragEnter",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,VC.EVENT.DRAGENTER,e,this._draggingTarget)}},{key:"_processDragOver",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,VC.EVENT.DRAGOVER,e,this._draggingTarget)}},{key:"_processDragLeave",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,VC.EVENT.DRAGLEAVE,e,this._draggingTarget)}},{key:"_processDrop",value:function(e){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,VC.EVENT.DROP,e,this._draggingTarget))}},{key:"_processDragEnd",value:function(e){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,VC.EVENT.DRAGEND,e),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(e){this._dispatchAgency(this._lastHover,VC.EVENT.MOUSEOVER,e)}},{key:"_processOutShape",value:function(e){this._dispatchAgency(this._lastHover,VC.EVENT.MOUSEOUT,e)}},{key:"_dispatchAgency",value:function(e,t,n,r){var i="on"+t,o={type:t,event:n,target:e,cancelBubble:!1},a=e;for(r&&(o.dragged=r);a&&(a[i]&&(o.cancelBubble=a[i](o)),a.dispatch(t,o),a=a.parent,!o.cancelBubble););e?o.cancelBubble||this.dispatch(t,o):r||this.dispatch(t,{type:t,event:n})}},{key:"_iterateAndFindHover",value:function(){for(var e,t=KC.Util_matrix.create(),n=this.storage.getShapeList(),r=[0,0],i=n.length-1;i>=0;i--){var o=n[i];if(void 0!==o.zlevel&&(e=this.painter.getLayer(o.zlevel,e),r[0]=this._mouseX,r[1]=this._mouseY,e.needTransform&&(KC.Util_matrix.invert(t,e.transform),KC.Util_vector.applyTransform(r,r,t))),this._findHover(o,r[0],r[1]))break}}},{key:"_mobildFindFixed",value:function(e){var t=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=e.zrenderX,this._mouseY=e.zrenderY,this._event=e,this._iterateAndFindHover();for(var n=0;!this._lastHover&&n<t.length;n++){var r=t[n];r.x&&(this._mouseX+=r.x),r.y&&(this._mouseX+=r.y),this._iterateAndFindHover()}this._lastHover&&(e.zrenderX=this._mouseX,e.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(e,t){if(e.zrenderFixed)return e;if(t){var n="touchend"!=e.type?e.targetTouches[0]:e.changedTouches[0];if(n){var r=this.root.getBoundingClientRect();e.zrenderX=n.clientX-r.left,e.zrenderY=n.clientY-r.top}}else{var i=(e=e||window.event).toElement||e.relatedTarget||e.srcElement||e.target;i&&i!=this._domHover&&(e.zrenderX=(void 0!==e.offsetX?e.offsetX:e.layerX)+i.offsetLeft,e.zrenderY=(void 0!==e.offsetY?e.offsetY:e.layerY)+i.offsetTop)}return e.zrenderFixed=1,e}},{key:"getLastHoverOne",value:function(){return this._lastHover?this._lastHover:null}}])&&QE(n.prototype,r),i&&QE(n,i),t}();function ek(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var tk=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Animation.easing"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){}},{key:"Linear",value:function(e){return e}},{key:"QuadraticIn",value:function(e){return e*e}},{key:"QuadraticOut",value:function(e){return e*(2-e)}},{key:"QuadraticInOut",value:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},{key:"CubicIn",value:function(e){return e*e*e}},{key:"CubicOut",value:function(e){return--e*e*e+1}},{key:"CubicInOut",value:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},{key:"QuarticIn",value:function(e){return e*e*e*e}},{key:"QuarticOut",value:function(e){return 1- --e*e*e*e}},{key:"QuarticInOut",value:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},{key:"QuinticIn",value:function(e){return e*e*e*e*e}},{key:"QuinticOut",value:function(e){return--e*e*e*e*e+1}},{key:"QuinticInOut",value:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},{key:"SinusoidalIn",value:function(e){return 1-Math.cos(e*Math.PI/2)}},{key:"SinusoidalOut",value:function(e){return Math.sin(e*Math.PI/2)}},{key:"SinusoidalInOut",value:function(e){return.5*(1-Math.cos(Math.PI*e))}},{key:"ExponentialIn",value:function(e){return 0===e?0:Math.pow(1024,e-1)}},{key:"ExponentialOut",value:function(e){return 1===e?1:1-Math.pow(2,-10*e)}},{key:"ExponentialInOut",value:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},{key:"CircularIn",value:function(e){return 1-Math.sqrt(1-e*e)}},{key:"CircularOut",value:function(e){return Math.sqrt(1- --e*e)}},{key:"CircularInOut",value:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},{key:"ElasticIn",value:function(e){var t,n=.1;return 0===e?0:1===e?1:(n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))}},{key:"ElasticOut",value:function(e){var t,n=.1;return 0===e?0:1===e?1:(n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(e){var t,n=.1;return 0===e?0:1===e?1:(n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(e){var t=1.70158;return e*e*((t+1)*e-t)}},{key:"BackOut",value:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1}},{key:"BackInOut",value:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},{key:"BounceIn",value:function(e){return 1-this.BounceOut(1-e)}},{key:"BounceOut",value:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},{key:"BounceInOut",value:function(e){return e<.5?.5*this.BounceIn(2*e):.5*this.BounceOut(2*e-1)+.5}}])&&ek(t.prototype,n),r&&ek(t,r),e}();function nk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var rk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._targetPool=t.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=t.life||1e3,this._delay=t.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Clip"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){}},{key:"step",value:function(e){var t=new tk,n=(e-this._startTime)/this._life;if(!(n<0)){n=Math.min(n,1);var r="string"==typeof this.easing?t[this.easing]:this.easing,i="function"==typeof r?r(n):n;return this.fire("frame",i),1==n?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}},{key:"restart",value:function(){var e=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-e+this.gap}},{key:"fire",value:function(e,t){for(var n=0,r=this._targetPool.length;n<r;n++)this["on"+e]&&this["on"+e](this._targetPool[n],t)}}])&&nk(t.prototype,n),r&&nk(t,r),e}();function ik(e){return(ik="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ok(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ak(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sk(e,t,n){return t&&ak(e.prototype,t),n&&ak(e,n),e}function lk(e){return(lk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ck(e,t){return(ck=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var fk=function(e){function t(e){var n,r,i;return ok(this,t),r=this,n=!(i=lk(t).call(this,e))||"object"!==ik(i)&&"function"!=typeof i?uk(r):i,e=e||{},n.stage={},n.onframe=function(){},n._clips=[],n._running=!1,n._time=0,be.extend(uk(n),e),n.CLASS_NAME="SuperMap.LevelRenderer.Animation",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ck(e,t)}(t,TC),sk(t,[{key:"add",value:function(e){this._clips.push(e)}},{key:"remove",value:function(e){var t=(new ax).indexOf(this._clips,e);t>=0&&this._clips.splice(t,1)}},{key:"_update",value:function(){for(var e=(new Date).getTime(),t=e-this._time,n=this._clips,r=n.length,i=[],o=[],a=0;a<r;a++){var s=n[a],l=s.step(e);l&&(i.push(l),o.push(s))}this.stage.update&&this.stage.update();for(var u=0;u<r;)n[u]._needsRemove?(n[u]=n[r-1],n.pop(),r--):u++;r=i.length;for(var c=0;c<r;c++)o[c].fire(i[c]);this._time=e,this.onframe(t),this.dispatch("frame",t)}},{key:"start",value:function(){var e=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,16)},t=this;this._running=!0,this._time=(new Date).getTime(),e(function n(){t._running&&(t._update(),e(n))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(e,t){var n=new hk(e,(t=t||{}).loop,t.getter,t.setter);return n.animation=this,n}}],[{key:"_interpolateNumber",value:function(e,t,n){return(t-e)*n+e}},{key:"_interpolateArray",value:function(e,n,r,i,o){var a=e.length;if(1==o)for(var s=0;s<a;s++)i[s]=t._interpolateNumber(e[s],n[s],r);else for(var l=e[0].length,u=0;u<a;u++)for(var c=0;c<l;c++)i[u][c]=t._interpolateNumber(e[u][c],n[u][c],r)}},{key:"_isArrayLike",value:function(e){switch(ik(e)){case"undefined":case"string":return!1}return void 0!==e.length}},{key:"_catmullRomInterpolateArray",value:function(e,n,r,i,o,a,s,l,u){var c=e.length;if(1==u)for(var f=0;f<c;f++)l[f]=t._catmullRomInterpolate(e[f],n[f],r[f],i[f],o,a,s);else for(var h=e[0].length,p=0;p<c;p++)for(var y=0;y<h;y++)l[p][y]=t._catmullRomInterpolate(e[p][y],n[p][y],r[p][y],i[p][y],o,a,s)}},{key:"_catmullRomInterpolate",value:function(e,t,n,r,i,o,a){var s=.5*(n-e),l=.5*(r-t);return(2*(t-n)+s+l)*a+(-3*(t-n)-2*s-l)*o+s*i+t}},{key:"_cloneValue",value:function(e){var n=Array.prototype.slice;if(t._isArrayLike(e)){var r=e.length;if(t._isArrayLike(e[0])){for(var i=[],o=0;o<r;o++)i.push(n.call(e[o]));return i}return n.call(e)}return e}},{key:"rgba2String",value:function(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}}]),t}(),hk=function(){function e(t,n,r,i){ok(this,e),this._tracks={},this._target=t,this._loop=n||!1,this._getter=r||function(e,t){return e[t]},this._setter=i||function(e,t,n){e[t]=n},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Animator"}return sk(e,[{key:"when",value:function(e,t){for(var n in t)this._tracks[n]||(this._tracks[n]=[],0!==e&&this._tracks[n].push({time:0,value:fk._cloneValue(this._getter(this._target,n))})),this._tracks[n].push({time:parseInt(e,10),value:t[n]});return this}},{key:"during",value:function(e){return this._onframeList.push(e),this}},{key:"start",value:function(e){var t=this,n=this._setter,r=this._getter,i=t._onframeList.length,o="spline"===e,a=function(){if(t._clipCount--,0===t._clipCount){t._tracks={};for(var e=t._doneList.length,n=0;n<e;n++)t._doneList[n].call(t)}},s=function(s,l){var u=s.length;if(u){var c=s[0].value,f=fk._isArrayLike(c),h=!1,p=f&&fk._isArrayLike(c[0])?2:1;s.sort(function(e,t){return e.time-t.time});for(var y=s[u-1].time,d=[],m=[],v=0;v<u;v++){d.push(s[v].time/y);var g=s[v].value;"string"==typeof g&&(0===(g=KC.Util_color.toArray(g)).length&&(g[0]=g[1]=g[2]=0,g[3]=1),h=!0),m.push(g)}var b,S,_,w,O,x,C,P=0,T=0;if(h)var E=[0,0,0,0];var k=new rk({target:t._target,life:y,loop:t._loop,delay:t._delay,onframe:function(e,a){if(a<T){for(b=Math.min(P+1,u-1),S=b;S>=0&&!(d[S]<=a);S--);S=Math.min(S,u-2)}else{for(S=P;S<u&&!(d[S]>a);S++);S=Math.min(S-1,u-2)}P=S,T=a;var s=d[S+1]-d[S];if(0!==s){var c,y;for(_=(a-d[S])/s,o?(O=m[S],w=m[0===S?S:S-1],x=m[S>u-2?u-1:S+1],C=m[S>u-3?u-1:S+2],f?fk._catmullRomInterpolateArray(w,O,x,C,_,_*_,_*_*_,r(e,l),p):(c=h?fk.rgba2String(E):fk._catmullRomInterpolate(w,O,x,C,_,_*_,_*_*_),n(e,l,c))):f?fk._interpolateArray(m[S],m[S+1],_,r(e,l),p):(h?(fk._interpolateArray(m[S],m[S+1],_,E,1),y=fk.rgba2String(E)):y=fk._interpolateNumber(m[S],m[S+1],_),n(e,l,y)),S=0;S<i;S++)t._onframeList[S](e,a)}},ondestroy:a});e&&"spline"!==e&&(k.easing=e),t._clipList.push(k),t._clipCount++,t.animation.add(k)}};for(var l in this._tracks)s(this._tracks[l],l);return this}},{key:"stop",value:function(){for(var e=0;e<this._clipList.length;e++){var t=this._clipList[e];this.animation.remove(t)}this._clipList=[]}},{key:"delay",value:function(e){return this._delay=e,this}},{key:"done",value:function(e){return e&&this._doneList.push(e),this}}]),e}();function pk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var yk=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.storage=new FE,this.painter=new qE(n,this.storage),this.handler=new $E(n,this.storage,this.painter),this.animatingElements=[],this.animation=new fk({stage:{update:e.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="SuperMap.LevelRenderer.Render"}var t,n,r;return t=e,r=[{key:"getFrameCallback",value:function(e){return function(){var t=e.animatingElements;if(t instanceof Array){for(var n=0,r=t.length;n<r;n++)e.storage.mod(t[n].id);(t.length||e._needsRefreshNextFrame)&&e.refresh()}}}}],(n=[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(e){return this.storage.addRoot(e),this}},{key:"addGroup",value:function(e){return this.storage.addRoot(e),this}},{key:"delShape",value:function(e){return this.storage.delRoot(e),this}},{key:"delGroup",value:function(e){return this.storage.delRoot(e),this}},{key:"modShape",value:function(e,t){return this.storage.mod(e,t),this}},{key:"modGroup",value:function(e,t){return this.storage.mod(e,t),this}},{key:"modLayer",value:function(e,t){return this.painter.modLayer(e,t),this}},{key:"addHoverShape",value:function(e){return this.storage.addHover(e),this}},{key:"render",value:function(e){return this.painter.render(e),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(e){return this.painter.refresh(e),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(e){return this.painter.refreshHover(e),this}},{key:"refreshShapes",value:function(e,t){return this.painter.refreshShapes(e,t),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(e,t,n){if("string"==typeof e&&(e=this.storage.get(e)),e){var r;if(t){for(var i=t.split("."),o=e,a=0,s=i.length;a<s;a++)o&&(o=o[i[a]]);o&&(r=o)}else r=e;if(!r)return void KC.Util_log('Property "'+t+'" is not existed in element '+e.id);var l=this.animatingElements;return void 0===e.__aniCount&&(e.__aniCount=0),0===e.__aniCount&&l.push(e),e.__aniCount++,this.animation.animate(r,{loop:n}).done(function(){if(e.__aniCount--,0===e.__aniCount){var t=(new ax).indexOf(l,e);l.splice(t,1)}})}KC.Util_log("Element not existed")}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(e,t,n){return this.painter.toDataURL(e,t,n)}},{key:"shapeToImage",value:function(e,t,n){var r=be.createUniqueID("SuperMap.LevelRenderer.ToImage_");return this.painter.shapeToImage(r,e,t,n)}},{key:"on",value:function(e,t){return this.handler.on(e,t),this}},{key:"un",value:function(e,t){return this.handler.un(e,t),this}},{key:"trigger",value:function(e,t){return this.handler.trigger(e,t),this.handler.dispatch(e,t),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(e){return this.painter.updateHoverLayer(e),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}])&&pk(t.prototype,n),r&&pk(t,r),e}();function dk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var mk=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e._instances={},e.Tool={},this.version="2.0.4",this.CLASS_NAME="SuperMap.LevelRenderer"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.dispose(),this.version=null}},{key:"init",value:function(t){var n=new yk(be.createUniqueID("LRenderer_"),t);return e._instances[n.id]=n,n}},{key:"dispose",value:function(t){if(t)t.dispose(),this.delInstance(t.id);else{for(var n in e._instances)e._instances[n].dispose();e._instances={}}return this}},{key:"getInstance",value:function(t){return e._instances[t]}},{key:"delInstance",value:function(t){return delete e._instances[t],this}}])&&dk(t.prototype,n),r&&dk(t,r),e}();r.LevelRenderer=mk;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var vk={EXCEL:"EXCEL",CSV:"CSV",ISERVER:"ISERVER",GEOJSON:"GEOJSON",JSON:"JSON"},gk={fileMaxSize:10485760};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function bk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Sk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.FileTypes=vk,this.FileConfig=gk,this.loadFileObject=t&&t.loadFileObject?t.loadFileObject:[]}var t,n,r;return t=e,(n=[{key:"set",value:function(e,t){this[e]=t}},{key:"get",value:function(e){return this[e]}}])&&bk(t.prototype,n),r&&bk(t,r),e}();function _k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var wk=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initView()}var t,n,r;return t=e,(n=[{key:"_initView",value:function(){var e=document.createElement("div");e.hidden=!0,e.setAttribute("class","component-messageboxcontainer component-border-bottom-orange");var t=document.createElement("div");t.setAttribute("class","icon"),this.icon=document.createElement("span"),this.icon.setAttribute("class","supermapol-icons-message-warning"),t.appendChild(this.icon),e.appendChild(t);var n=document.createElement("div");n.setAttribute("class","component-messagebox"),n.innerHTML="",e.appendChild(n),this.messageBox=n;var r=document.createElement("div");r.setAttribute("class","component-messagebox__cancelbtncontainer");var i=document.createElement("button");i.setAttribute("class","component-messagebox__cancelBtn"),i.innerHTML="x",i.onclick=this.closeView.bind(this),r.appendChild(i),e.appendChild(r),this.messageBoxContainer=e,document.body.appendChild(this.messageBoxContainer)}},{key:"closeView",value:function(){this.messageBoxContainer.hidden=!0}},{key:"showView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warring";"success"===t?(this.icon.setAttribute("class","supermapol-icons-message-success"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-green")):"failure"===t?(this.icon.setAttribute("class","supermapol-icons-message-failure"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-red")):"warring"===t&&(this.icon.setAttribute("class","supermapol-icons-message-warning"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-orange")),this.messageBox.innerHTML=e,this.messageBoxContainer.hidden=!1}}])&&_k(t.prototype,n),r&&_k(t,r),e}();r.Components.MessageBox=wk;var Ok=n(1),xk=n.n(Ok),Ck={code:null,defaultCode:"en-US",getCode:function(){return r.Lang.code||r.Lang.setCode(),r.Lang.code},setCode:function(){var e=this.getLanguageFromCookie();e?r.Lang.code=e:(e=r.Lang.defaultCode,0===(e="Netscape"===navigator.appName?navigator.language:navigator.browserLanguage).indexOf("zh")&&(e="zh-CN"),0===e.indexOf("en")&&(e="en-US"),r.Lang.code=e)},getLanguageFromCookie:function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){for(var n=e[t];" "===n.charAt(0);)n=n.substring(1);if(-1!==n.indexOf("language="))return n.substring("language=".length,n.length)}return""},i18n:function(e){var t=r.Lang[r.Lang.getCode()],n=t&&t[e];return n||(n=e),n}};r.Lang=Ck,r.i18n=r.Lang.i18n;var Pk=n(5),Tk=n.n(Pk),Ek={rABS:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsBinaryString,rABF:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsArrayBuffer,rAT:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsText,readFile:function(e,t,n,r,i){vk.JSON===e||vk.GEOJSON===e?this.readTextFile(t,n,r,i):vk.EXCEL!==e&&vk.CSV!==e||this.readXLSXFile(t,n,r,i)},readTextFile:function(e,t,n,r){var i=new FileReader;i.onloadend=function(e){t&&t.call(r,e.target.result)},i.onerror=function(e){n&&n.call(r,e)},this.rAT?i.readAsText(e.file,"utf-8"):i.readAsBinaryString(e.file)},readXLSXFile:function(e,t,n,r){var i=new FileReader;i.onloadend=function(e){var i=new Uint8Array(e.target.result),o=Tk.a.read(i,{type:"array"});try{if(o&&o.SheetNames&&o.SheetNames.length>0){var a=o.SheetNames[0],s=Tk.a.utils.sheet_to_csv(o.Sheets[a]);t&&t.call(r,s)}}catch(e){n&&n.call(r,e)}},i.onerror=function(e){n&&n.call(r,e)},this.rABF&&i.readAsArrayBuffer(e.file)},processDataToGeoJson:function(e,t,n,r,i){var o=null;if("EXCEL"===e||"CSV"===e)o=this.processExcelDataToGeoJson(t),n&&n.call(i,o);else if("JSON"===e||"GEOJSON"===e){var a=t;"string"==typeof a&&(a=JSON.parse(a)),"ISERVER"===a.type?o=a.data.recordsets[0].features:"FeatureCollection"===a.type?o=a:r&&r.call(i,Ck.i18n("msg_dataInWrongGeoJSONFormat")),n&&n.call(i,o)}else r&&r.call(i,Ck.i18n("msg_dataInWrongFormat"))},processExcelDataToGeoJson:function(e){for(var t=this.string2Csv(e),n=t.colTitles,r=-1,i=-1,o=0,a=n.length;o<a;o++)this.isXField(n[o])&&(r=o),this.isYField(n[o])&&(i=o);for(var s=[],l=0,u=t.rows.length;l<u;l++){var c=t.rows[l],f=Number(c[r]),h=Number(c[i]),p={};for(var y in t.colTitles){p[t.colTitles[y]]=t.rows[l][y]}var d={type:"Feature",geometry:{type:"Point",coordinates:[f,h]},properties:p};s.push(d)}return s},isXField:function(e){var t=e.toLowerCase();return"x"===t||"smx"===t||"jd"===t||"经度"===t||"东经"===t||"longitude"===t||"lot"===t||"lon"===t||"lng"===t||"x坐标"===t},isYField:function(e){var t=e.toLowerCase();return"y"===t||"smy"===t||"wd"===t||"纬度"===t||"北纬"===t||"latitude"===t||"lat"===t||"y坐标"===t},string2Csv:function(e,t){var n=e.split("\n"),r={};r.colTitles=t?[]:n[0].split(","),r.rows=[];for(var i=t?0:1;i<n.length;i++)n[i]&&r.rows.push(n[i].split(","));return r}};function kk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Components.FileReaderUtil=Ek;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Mk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasets=t,this.EVENT_TYPES=["getdatafailed"],this.events=new Ht(this,null,this.EVENT_TYPES)}var t,n,o;return t=e,(n=[{key:"getDatasetInfo",value:function(e){var t=this.datasets.url,n=this;tr.get(t).then(function(e){return e.json()}).then(function(t){if(t.datasetInfo){var r=t.datasetInfo;n.datasetsInfo={dataSourceName:r.dataSourceName,datasetName:r.name,mapName:t.name},e({result:n.datasetsInfo})}}).catch(function(e){console.log(e),n._fireFailedEvent(e)})}},{key:"getDataFeatures",value:function(e,t){var n,i,o=e.result,a={name:o.datasetName+"@"+o.dataSourceName};Object.assign(a,this.datasets.queryInfo),n=new r.FilterParameter(a),i=new r.GetFeaturesBySQLParameters({queryParameter:n,datasetNames:[o.dataSourceName+":"+o.datasetName],fromIndex:0,toIndex:1e5}),new r.GetFeaturesBySQLService(o.dataUrl,{eventListeners:{processCompleted:t,processFailed:function(){}}}).processAsync(i)}},{key:"getLayerFeatures",value:function(e,t){var n,i,o=e.result,a={name:o.mapName};Object.assign(a,this.datasets.queryInfo),n=new r.FilterParameter(a),i=new r.QueryBySQLParameters({queryParams:[n],expectCount:1e5}),new r.QueryBySQLService(o.dataUrl,{eventListeners:{processCompleted:t,processFailed:function(){}}}).processAsync(i)}},{key:"getDataInfoByIptl",value:function(e){this.getServiceInfo(this.datasets.url,e)}},{key:"getServiceInfo",value:function(e,t){var n=this;tr.get(e,null,{withCredentials:this.datasets.withCredentials}).then(function(e){return e.json()}).then(function(r){var i;!1!==r.succeed?r.dataItemServices&&r.dataItemServices.length>0?(r.dataItemServices.forEach(function(r){if("RESTDATA"===r.serviceType&&"PUBLISHED"===r.serviceStatus)i=r;else{if("RESTMAP"!==r.serviceType||"PUBLISHED"!==r.serviceStatus)return void n.getDatafromContent(e,t);i=r}}),i&&n.getDatafromRest(i.serviceType,i.address,t)):n.getDatafromContent(e,t):n._fireFailedEvent(r)}).catch(function(e){console.log(e),n._fireFailedEvent(e)})}},{key:"getDatafromContent",value:function(e,t){var n=this,r={result:{}},i=this;e+="/content.json?pageSize=9999999&currentPage=1",tr.get(e,null,{withCredentials:this.datasets.withCredentials}).then(function(e){return e.json()}).then(function(e){if(!1!==e.succeed){if(e.type){if("JSON"===e.type||"GEOJSON"===e.type){if(e.content=JSON.parse(e.content.trim()),!e.content.features)return void console.log(Ck.i18n("msg_jsonResolveFiled"));var o=n._formatGeoJSON(e.content);r.result.features={type:e.content.type,features:o}}else if("EXCEL"===e.type||"CSV"===e.type){var a=n._excelData2Feature(e.content);r.result.features={type:"FeatureCollection",features:a}}t(r,"content")}}else i._fireFailedEvent(e)},this).catch(function(e){console.log(e),i._fireFailedEvent(e)})}},{key:"getDatafromRest",value:function(e,t,n){var r=this,i=this.datasets.withCredentials;if("RESTDATA"===e){var o,a,s="".concat(t,"/data/datasources");tr.get(s,null,{withCredentials:i}).then(function(e){return e.json()}).then(function(e){o=e.datasourceNames[0],s="".concat(t,"/data/datasources/").concat(o,"/datasets"),tr.get(s,null,{withCredentials:i}).then(function(e){return e.json()}).then(function(e){return a=e.datasetNames[0],r.getDatafromRestData("".concat(t,"/data"),[o+":"+a],n),[o+":"+a]}).catch(function(e){r._fireFailedEvent(e)})}).catch(function(e){r._fireFailedEvent(e)})}else{var l,u,c,f="".concat(t,"/maps");tr.get(f,null,{withCredentials:i}).then(function(e){return e.json()}).then(function(e){l=e[0].name,c=e[0].path,f=f="".concat(t,"/maps/").concat(l,"/layers"),tr.get(f,null,{withCredentials:i}).then(function(e){return e.json()}).then(function(e){return u=e[0].subLayers.layers[0].caption,r.getDatafromRestMap(u,c,n),u}).catch(function(e){r._fireFailedEvent(e)})}).catch(function(e){r._fireFailedEvent(e)})}}},{key:"getDatafromRestData",value:function(e,t,n){var r=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"SmID>0",this._getFeatureBySQL(e,t,this.datasets.queryInfo,function(e){n(e,"RESTDATA")},function(e){console.log(e),r._fireFailedEvent(e)})}},{key:"getDatafromRestMap",value:function(e,t,n){var r=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"smid=1",this._queryFeatureBySQL(t,e,this.datasets.queryInfo,null,null,function(e){n(e,"RESTMAP")},function(e){console.log(e),r._fireFailedEvent(e)})}},{key:"_getFeatureBySQL",value:function(e,t,n,r,i){var o,a,s={name:t.join().replace(":","@")};Object.assign(s,n),o=new Di(s),a=new Dh({queryParameter:o,datasetNames:t,fromIndex:0,toIndex:1e5,returnContent:!0}),new Jh(e,{eventListeners:{processCompleted:function(e){r&&r(e)},processFailed:function(e){i&&i(e)}}}).processAsync(a)}},{key:"_queryFeatureBySQL",value:function(e,t,n,r,i,o,a,l,u,c){var f,h,p={name:t};Object.assign(p,n),f=new Di(p),r&&(f.fields=r);var y={queryParams:[f]};c&&(y.queryOption=s.ATTRIBUTE),l&&(y.startRecord=l),u&&(y.expectCount=u),i&&(y.prjCoordSys={epsgCode:i}),h=new jg(y),this._queryBySQL(e,h,function(e){"processCompleted"===e.type?o(e):a(e)})}},{key:"_queryBySQL",value:function(e,t,n,r){new Ug(e,{eventListeners:{scope:this,processCompleted:n,processFailed:n},format:this._processFormat(r)}).processAsync(t)}},{key:"_processFormat",value:function(e){return e||i.GEOJSON}},{key:"_formatGeoJSON",value:function(e){var t=e.features;return t.forEach(function(e,t){e.properties.index=t}),t}},{key:"_excelData2Feature",value:function(e){for(var t=e.colTitles,n=-1,r=-1,i=0,o=t.length;i<o;i++)Ek.isXField(t[i])&&(n=i),Ek.isYField(t[i])&&(r=i);for(var a=[],s=0,l=e.rows.length;s<l;s++){var u=e.rows[s],c=Number(u[n]),f=Number(u[r]),h={};for(var p in e.colTitles){h[e.colTitles[p]]=e.rows[s][p]}h.index=s+"";var y={type:"Feature",geometry:{type:"Point",coordinates:[c,f]},properties:h};a.push(y)}return a}},{key:"_fireFailedEvent",value:function(e){var t=e?{error:e,message:Ck.i18n("msg_getdatafailed")}:{message:Ck.i18n("msg_getdatafailed")};this.events.triggerEvent("getdatafailed",t)}}])&&kk(t.prototype,n),o&&kk(t,o),e}();function Ak(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Lk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasets=t.datasets,this.xField=[],this.yField=[],this.grid={top:"50px",bottom:"50px",left:"50px",right:"60px"},this.chartType=t.type||"bar",this._initXYField(t.chartOptions),this.EVENT_TYPES=["getdatafailed"],this.events=new Ht(this,null,this.EVENT_TYPES)}var t,n,r;return t=e,(n=[{key:"_initXYField",value:function(e){var t=this;e&&e.length>0&&e.forEach(function(e){e.xAxis&&t.xField.push({field:e.xAxis.field,name:e.xAxis.name}),e.yAxis&&t.yField.push({field:e.yAxis.field,name:e.yAxis.name})})}},{key:"getDatasetInfo",value:function(e){var t=this;this.createChart=e,this.datasets&&this._checkUrl(this.datasets.url)&&(this.chartModel=new Mk(this.datasets),"iServer"===this.datasets.type?this.chartModel.getDatasetInfo(this._getDatasetInfoSuccess.bind(this)):"iPortal"===this.datasets.type&&this.chartModel.getDataInfoByIptl(this._getDataInfoSuccess.bind(this)),this.chartModel.events.on({getdatafailed:function(e){t.events.triggerEvent("getdatafailed",e)}}))}},{key:"_getDatasetInfoSuccess",value:function(e){var t=this.datasets.url,n=t.indexOf("rest");if(n>0){var r=t.indexOf("/",n+5),i=t.substring(n+5,r),o=t.substring(0,n+4)+"/data";if("maps"===i){var a=t.indexOf("/",r+1),s=t.substring(r+1,a);o=t.substring(0,n+4)+"/maps/"+s,e.result.dataUrl=o,this._getLayerFeatures(e)}else"data"===i&&(e.result.dataUrl=o,this._getDataFeatures(e))}}},{key:"_getDataInfoSuccess",value:function(e,t){"RESTMAP"===t?this._getChartDatasFromLayer(e):this._getChartDatas(e)}},{key:"_getDataFeatures",value:function(e){this.chartModel.getDataFeatures(e,this._getChartDatas.bind(this))}},{key:"_getLayerFeatures",value:function(e){this.chartModel.getLayerFeatures(e,this._getChartDatasFromLayer.bind(this))}},{key:"_getChartDatas",value:function(e){if(e){this.features=e.result.features;var t=this.features.features,n={};if(t.length){var r=t[0],i=[],o=[];for(var a in r.properties)i.push(a),o.push(this._getDataType(r.properties[a]));for(var s in n={features:t,fieldCaptions:i,fieldTypes:o,fieldValues:[]},o){var l=[];for(var u in t){var c=t[u],f=n.fieldCaptions[s],h=c.properties[f];l.push(h)}n.fieldValues.push(l)}this.createChart(n)}}}},{key:"_getChartDatasFromLayer",value:function(e){if(e.result.recordsets){var t=e.result.recordsets[0],n=t.features.features;this.features=t.features;var r={};if(n.length){for(var i in(r={features:t.features,fieldCaptions:t.fieldCaptions,fieldTypes:t.fieldTypes,fieldValues:[]}).fieldCaptions){var o=[];for(var a in n){var s=n[a],l=r.fieldCaptions[i],u=s.properties[l];o.push(u)}r.fieldValues.push(o)}this.createChart(r)}}}},{key:"_createChartOptions",value:function(e){return this.calculatedData=this._createChartDatas(e),this.updateChartOptions(this.chartType)}},{key:"changeType",value:function(e){if(e!==this.chartType)return this.chartType=e,this.updateChartOptions(this.chartType)}},{key:"updateData",value:function(e,t,n){this.updateChart=n,this.xField=[],this.yField=[],this._initXYField(t),e.type=e.type||"iServer",e.withCredentials=e.withCredentials||!1,this.datasets=e,this.getDatasetInfo(this._updateDataSuccess.bind(this))}},{key:"_updateDataSuccess",value:function(e){var t=this._createChartOptions(e);this.updateChart(t)}},{key:"updateChartOptions",value:function(e,t){if(this.calculatedData){var n=this.grid,r=this._createChartSeries(this.calculatedData,e),i=[];for(var o in this.calculatedData.XData)i.push({value:this.calculatedData.XData[o].fieldsData});var a={type:"category",name:this.xField[0].name||"X",data:i,nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},s={type:"value",name:this.yFieldName||"Y",data:{},nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},l={formatter:"{b0}: {c0}"},u="#404a59";return t&&(t.grid&&(n=t.grid),t.tooltip&&(l=t.tooltip),t.backgroundColor&&(u=t.backgroundColor)),{backgroundColor:u,grid:n,series:r,xAxis:a,yAxis:s,tooltip:l}}}},{key:"_createChartDatas",value:function(e){var t=0,n=[],r=e.fieldCaptions,i=this;r.forEach(function(e,n){i.xField[0]&&e===i.xField[0].field&&(t=n)}),this.yFieldName="",this.yField.forEach(function(e,t){0!==t&&(i.yFieldName=i.yFieldName+","),i.yFieldName=i.yFieldName+e.name,r.forEach(function(t,r){t===e.field&&n.push(r)})});var o=this._getAttrData(e,t),a=[];if(n.length>0)n.forEach(function(t){var n=[];for(var r in e.fieldValues[t])n.push({value:e.fieldValues[t][r]});a.push(n)});else{for(var s=[],l=[],u=o.length,c=0;c<u;c++){for(var f=!1,h=0,p=l.length;h<p;h++)if(o[c].fieldsData===l[h].fieldsData){s[h].value++,l[h].recordIndexs.push(c),f=!0;break}f||o[c].fieldsData&&(l.push({fieldsData:o[c].fieldsData,recordIndexs:[c]}),s.push({value:1}))}o=l,a=[s]}return{XData:o,YData:a}}},{key:"_getAttrData",value:function(e,t){0===t&&(this.xField=[{field:e.fieldCaptions[t],name:e.fieldCaptions[t]}]);for(var n=[],r=0,i=e.fieldValues[t].length;r<i;r++){var o=e.fieldValues[t][r];n.push({recordIndexs:r,fieldsData:o})}return n}},{key:"_createChartSeries",value:function(e,t){var n=[];return e.YData.forEach(function(e){var r=0,i=[],o=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){r=l.value.value,i.push({value:r})}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var c={type:t,data:i,name:"y"};n.push(c)}),n}},{key:"_isDate",value:function(e){return/((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/gi.test(e)}},{key:"_isNumber",value:function(e){var t=Number(e);return 0===t||!isNaN(t)}},{key:"_getDataType",value:function(e){if(null!==e&&void 0!==e&&""!==e){if(this._isDate(e))return"DATE";if(this._isNumber(e))return"NUMBER"}return"STRING"}},{key:"_checkUrl",value:function(e){return!(""===e||!this._isMatchUrl(e))&&(!/^http[s]?:\/\/localhost/.test(e)&&!/^http[s]?:\/\/127.0.0.1/.test(e))}},{key:"_isMatchUrl",value:function(e){return new RegExp("(https?|http|file|ftp)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]").test(e)}},{key:"getStyle",value:function(){return{grid:this.grid,tooltip:this.tooltip,backgroundColor:this.backgroundColor}}},{key:"getFeatures",value:function(){return this.features}},{key:"setStyle",value:function(e){return this.updateChartOptions(this.chartType,e)}}])&&Ak(t.prototype,n),r&&Ak(t,r),e}();function jk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Components.ChartViewModel=Lk;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Rk=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domID=t,this.chartType=n.type||"bar",n.datasets.type=n.datasets.type||"iServer",n.datasets.withCredentials=n.datasets.withCredentials||!1,this.viewModel=new Lk(n),this._fillDataToView()}var t,n,r;return t=e,(n=[{key:"onAdd",value:function(e){this.addChart=e}},{key:"_fillDataToView",value:function(){var e=new wk;this.viewModel.getDatasetInfo(this._createChart.bind(this)),this.viewModel.events.on({getdatafailed:function(t){e.showView(t.message)}})}},{key:"getStyle",value:function(){return this.viewModel.getStyle()}},{key:"getFeatures",value:function(){return this.viewModel.getFeatures()}},{key:"setStyle",value:function(e){var t=this.viewModel.setStyle(e);this._updateChart(t)}},{key:"changeType",value:function(e){if(this.chartType!==e){this.chartType=e;var t=this.viewModel.changeType(e);this._updateChart(t)}}},{key:"updateData",value:function(e,t){var n=this;this.viewModel.updateData(e,t,function(e){n._updateChart(e),n.addChart&&n.addChart()})}},{key:"_createChart",value:function(e){this.echart=xk.a.init(document.getElementById(this.domID),null,{renderer:"canvas"});var t=this.viewModel._createChartOptions(e);this.echart.setOption(t),this.addChart&&this.addChart()}},{key:"_updateChart",value:function(e){this.echart&&(this.echart.clear(),this.echart.setOption(e))}}])&&jk(t.prototype,n),r&&jk(t,r),e}();function Nk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Components.Chart=Rk;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ik=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.id=t.id?t.id:null,this.rootContainer=null}var t,n,r;return t=e,(n=[{key:"getElement",value:function(){return this.id&&(this.rootContainer.id=this.id),this.rootContainer}},{key:"_initView",value:function(){}},{key:"showView",value:function(){this.rootContainer.hidden=!1}},{key:"closeView",value:function(){this.rootContainer.hidden=!0}}])&&Nk(t.prototype,n),r&&Nk(t,r),e}();function Dk(e){return(Dk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bk(e,t){return!t||"object"!==Dk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Uk(e){return(Uk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gk(e,t){return(Gk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Components.TemplateBase=Ik;var zk=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Bk(this,Uk(t).call(this,e));var r=e.title?e.title:"";return n._initView(r),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gk(e,t)}(t,Ik),n=t,(r=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-container");var n=document.createElement("div");n.setAttribute("class","component-title");var r=document.createElement("div");r.innerHTML=e,n.appendChild(r),t.appendChild(n);var i=document.createElement("div");return i.setAttribute("class","component-content"),t.appendChild(i),this.content=i,this.rootContainer=t,t}},{key:"getContentElement",value:function(){return this.content}},{key:"appendContent",value:function(e){this.content.appendChild(e)}}])&&Fk(n.prototype,r),i&&Fk(n,i),t}();function Vk(e){return(Vk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hk(e,t){return!t||"object"!==Vk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qk(e){return(qk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wk(e,t){return(Wk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Components.CommonContainer=zk;var Yk=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Hk(this,qk(t).call(this,e)))._initView(e),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wk(e,t)}(t,Ik),n=t,(r=[{key:"_initView",value:function(e){var t=this._createElement("div","component-selecttool");e.labelName&&(this._createElement("label","component-selecttool__lable--describe",t).innerHTML=e.labelName);var n=this._createElement("div","component-selecttool--chart",t);n.setAttribute("tabindex","1");var r=this._createElement("div","component-selecttool__name",n);r.title=e.optionsArr[0],r.innerHTML=e.optionsArr[0];var i=this._createElement("div","component-selecttool__trianglebtn--chart",n),o=this._createElement("div","component-triangle-down-img",i),a=this._createElement("div","component-selecttool__content",n),s=this._createElement("div","component-selecttool__content--chart",a),l=this._createElement("div","component-selecttool__scrollarea__content",s);l.setAttribute("tabindex","1"),this.createOptions(l,e.optionsArr),this.optionClickEvent(l,r,e.optionsClickCb),this._selectClickEvent(n,a,o),this.rootContainer=t}},{key:"createOptions",value:function(e,t){for(var n in t){var r=this._createElement("div","component-selecttool__option",e);r.title=t[n],r.innerHTML=t[n]}}},{key:"_selectClickEvent",value:function(e,t,n){e.onclick=function(e){"block"===t.style.display?(t.style.display="none",n.className="component-triangle-down-img"):(t.style.display="block",n.className="triangle-up-img"),e.preventDefault(),e.stopPropagation()},e.onmousedown=function(e){e.target!==this&&(this.focus(),e.preventDefault(),e.stopPropagation())},e.onblur=function(){t.style.display="none",n.className="component-triangle-down-img"}}},{key:"_createElement",value:function(e,t,n){var r=document.createElement(e||"div");return t&&(r.className=t),n&&n.appendChild(r),r}},{key:"optionClickEvent",value:function(e,t,n){for(var r=function(r){var i=e.children[r];i.onclick=function(){t.innerHTML=i.innerHTML,t.title=i.title,i.getAttribute("data-value")&&t.setAttribute("data-value",i.getAttribute("data-value")),n&&n(i)}},i=0;i<e.children.length;i++)r(i)}}])&&Jk(n.prototype,r),i&&Jk(n,i),t}();function Qk(e){return(Qk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kk(e,t){return!t||"object"!==Qk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zk(e){return(Zk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $k(e,t){return($k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Components.Select=Yk;var eM=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Kk(this,Zk(t).call(this,e)))._initView(e),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$k(e,t)}(t,Ik),n=t,(r=[{key:"_initView",value:function(e){var t=document.createElement("div");t.className="component-dropdownbox--container";var n=document.createElement("div");n.setAttribute("tabindex","1"),n.className="component-dropdownbox",t.appendChild(n);var r=document.createElement("div");n.appendChild(r),this._createDropDownOption(e[0],r);var i=document.createElement("div");i.className="component-dropdownbox__triangle-btn",n.appendChild(i);var o=document.createElement("div");o.className="component-triangle-down-img",i.appendChild(o);var a={parentEle:n,dropDownContent:["component-dropdownbox__content component-dropdownbox__content--chart","dropDownContent"],scrollareaContent:"component-selecttool__scrollarea__content",optionsArr:e,triangleBtn:o,dropDownTopContainer:r};this._createDropDownBox(a),this.rootContainer=t}},{key:"_createDropDownBox",value:function(e){var t=e.parentEle,n=e.dropDownTopContainer,r=document.createElement("div");r.className=e.dropDownContent[0],t.appendChild(r);var i=document.createElement("div");i.className=e.scrollareaContent,r.appendChild(i);for(var o=e.optionsArr,a=0;a<o.length;a++)this._createDropDownOption(o[a],i);var s=e.triangleBtn;this._dropDownClickEvent(t,r,s),this._eleOnblur(t,r,s);for(var l=i.children,u=function(e){l[e].onclick=function(){n.innerHTML=l[e].outerHTML}},c=0;c<l.length;c++)u(c)}},{key:"_createDropDownOption",value:function(e,t){var n=document.createElement("div");n.className="component-dropdownbox__item";var r=e;r.dataValue&&n.setAttribute("data-value",r.dataValue),t.appendChild(n);var i=document.createElement("div");i.className="component-dropdownbox__item__img",n.appendChild(i);var o=document.createElement("div");r.icon.className&&(o.className=r.icon.className),r.icon.background&&(o.style.background=r.icon.background),i.appendChild(o);var a=document.createElement("div");a.className="component-dropdownbox__item__title",a.title=r.title,a.innerHTML=r.title,n.appendChild(a);var s=document.createElement("div");s.className="component-dropdownbox__item__remark",s.title=r.remark,s.innerHTML=r.remark,n.appendChild(s)}},{key:"_dropDownClickEvent",value:function(e,t,n){e.onclick=function(e){"block"===t.style.display?(t.style.display="none",n.className="component-triangle-down-img"):(t.style.display="block",n.className="triangle-up-img"),e.preventDefault(),e.stopPropagation()},e.onmousedown=function(e){e.target!==this&&(this.focus(),e.preventDefault(),e.stopPropagation())}}},{key:"_eleOnblur",value:function(e,t,n){e.onblur=function(){t.style.display="none",n.className="component-triangle-down-img"}}},{key:"_createElement",value:function(e,t,n){var r=document.createElement(e||"div");return t&&(r.className=t),n&&n.appendChild(r),r}}])&&Xk(n.prototype,r),i&&Xk(n,i),t}();function tM(e){return(tM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rM(e,t){return!t||"object"!==tM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function iM(e){return(iM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oM(e,t){return(oM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Components.DropDownBox=eM;var aM=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},n=rM(this,iM(t).call(this,e)),e.title=e.title?e.title:"",n._initView(e.title),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oM(e,t)}(t,Ik),n=t,(r=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-popcontainer");var n=document.createElement("div");n.setAttribute("class","component-popcontainer__header");var r=document.createElement("label");r.setAttribute("class","component-popcontainer__header__title"),r.innerHTML=e,n.appendChild(r);var i=document.createElement("span");i.setAttribute("class","supermapol-icons-clear component-popcontainer__header__close"),i.onclick=this.closeView.bind(this),t.appendChild(i),t.appendChild(n);var o=document.createElement("div");o.setAttribute("class","component-popcontainer__content"),this.content=o,t.appendChild(o),this.rootContainer=t}},{key:"appendContent",value:function(e){this.content.appendChild(e)}}])&&nM(n.prototype,r),i&&nM(n,i),t}();function sM(e){return(sM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uM(e,t){return!t||"object"!==sM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cM(e){return(cM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fM(e,t){return(fM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Components.PopContainer=aM;var hM=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.title=e.title?e.title:"属性",(n=uM(this,cM(t).call(this,e))).rootContainer.firstChild.hidden=!0,e.attributes=e.attributes?e.attributes:[],n._createAttributesTable(e.attributes),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fM(e,t)}(t,aM),n=t,(r=[{key:"_createAttributesTable",value:function(e){var t=document.createElement("table");t.setAttribute("class","component-popcontainer__content__table");var n=document.createElement("tbody"),r=!0;for(var i in e){var o=document.createElement("tr");r&&o.setAttribute("class","component-popcontainer__content__td--color");var a=document.createElement("td"),s=document.createElement("Span");s.innerHTML=i,a.appendChild(s);var l=document.createElement("td");l.innerHTML=e[i],o.appendChild(a),o.appendChild(l),n.appendChild(o),r=!r}t.appendChild(n),this.appendContent(t)}}])&&lM(n.prototype,r),i&&lM(n,i),t}();function pM(e){return(pM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dM(e,t){return!t||"object"!==pM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mM(e){return(mM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vM(e,t){return(vM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Components.AttributesPopContainer=hM;var gM=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=dM(this,mM(t).call(this,e)))._initView(),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vM(e,t)}(t,Ik),n=t,(r=[{key:"_initView",value:function(){var e=document.createElement("div");e.setAttribute("class","component-tabpage");var t=document.createElement("ul");this.header=t;var n=document.createElement("div");n.setAttribute("class","component-tabpage__content"),this.content=n,e.appendChild(t),e.appendChild(n),this.rootContainer=e}},{key:"setTabs",value:function(e){this.removeAllTabs(),this.appendTabs(e)}},{key:"appendTabs",value:function(e){for(var t=0;t<e.length;t++){var n=document.createElement("span");n.index=t,n.appendChild(document.createTextNode(e[t].title)),n.onclick=this._changeTabsPage.bind(this);var r=e[t].content;r.index=t,r.hidden=!0,this.header.appendChild(n),this.content.appendChild(r)}this.header.firstChild.setAttribute("class","on"),this.content.firstChild.hidden=!1}},{key:"removeTab",value:function(e){this.header.removeChild(this.header.children[e]),this.content.removeChild(this.content.children[e])}},{key:"removeAllTabs",value:function(){for(var e=this.header.children.length;e>0;e--)this.header.removeChild(this.header.children[e]),this.content.removeChild(this.content.children[e])}},{key:"_changeTabsPage",value:function(e){for(var t=e.target.index,n=0;n<this.header.children.length;n++)this.header.children[n].setAttribute("class",""),this.content.children[n].hidden=!0,n===t&&(this.header.children[n].setAttribute("class","on"),this.content.children[n].hidden=!1)}}])&&yM(n.prototype,r),i&&yM(n,i),t}();function bM(e){return(bM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _M(e,t){return!t||"object"!==bM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wM(e){return(wM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OM(e,t){return(OM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Components.IndexTabsPageContainer=gM;var xM=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=_M(this,wM(t).call(this,e))).rootContainer.classList.add("component-citytabpage--noneBoxShadow"),n.config=e.config,be.isArray(n.config)?(n.header.hidden=!0,n._createCityItem("城市",n.config),n.content.style.border="none"):(n._createTabs(),n.header.onclick=function(e){for(var t=0;t<n.header.children.length;t++)n.header.children[t].setAttribute("class","");e.target.setAttribute("class","on"),n._createCityContent(e.target.innerHTML)}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OM(e,t)}(t,gM),n=t,(r=[{key:"_createTabs",value:function(){if(be.isArray(this.config))for(var e=0;e<this.config.length;e++){var t="";for(var n in this.config[e])t+=n;var r=document.createElement("li");r.innerHTML=t,this.header.appendChild(r)}else for(var i in this.config){var o=document.createElement("li");o.innerHTML=i,this.header.appendChild(o)}this.header.firstChild.setAttribute("class","on"),this._createCityContent(this.header.firstChild.innerHTML)}},{key:"_createCityContent",value:function(e){for(var t=this.content.children.length;t>0;t--)this.content.removeChild(this.content.children[t-1]);var n=this.config[e];for(var r in n)this._createCityItem(r,n[r])}},{key:"_createCityItem",value:function(e,t){var n=document.createElement("div"),r=document.createElement("div");r.setAttribute("class","component-citytabpag__py-key"),r.innerHTML=e,n.appendChild(r);var i=document.createElement("div");i.setAttribute("class","component-citytabpag__content");for(var o=0;o<t.length;o++){var a=document.createElement("span");a.innerHTML=t[o],i.appendChild(a)}"HOT"===e&&(i.style.width="428px"),n.appendChild(i),this.content.appendChild(n)}}])&&SM(n.prototype,r),i&&SM(n,i),t}();function CM(e){return(CM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function TM(e,t){return!t||"object"!==CM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function EM(e){return(EM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kM(e,t){return(kM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Components.CityTabsPage=xM;var MM=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=TM(this,EM(t).call(this,e))).navTabsTitle=null,n.navTabsContent=null,e.tabs=e.tabs?e.tabs:[],n._initView(e.tabs),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kM(e,t)}(t,Ik),n=t,(r=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-navtabspage");var n=document.createElement("span");n.setAttribute("class","supermapol-icons-close"),n.onclick=this.closeView.bind(this),t.appendChild(n);var r=document.createElement("div");this.navTabsTitle=r,r.setAttribute("class","component-navtabspage__title"),t.appendChild(r);var i=document.createElement("div");this.navTabsContent=i,i.setAttribute("class","component-navtabspage__content"),t.appendChild(i),e.length>0&&this.appendTabs(e),this.rootContainer=t}},{key:"setTabs",value:function(e){this.removeAllTabs(),this.appendTabs(e)}},{key:"appendTabs",value:function(e){for(var t=0;t<e.length;t++){var n=document.createElement("span");n.index=t,n.appendChild(document.createTextNode(e[t].title)),n.onclick=this._changeTabsPage.bind(this);var r=e[t].content;r.index=t,r.hidden=!0,this.navTabsTitle.appendChild(n),this.navTabsContent.appendChild(r)}this.navTabsTitle.firstChild.setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.firstChild.hidden=!1}},{key:"removeTab",value:function(e){this.navTabsTitle.removeChild(this.navTabsTitle.children[e]),this.navTabsContent.removeChild(this.navTabsContent.children[e])}},{key:"removeAllTabs",value:function(){for(var e=this.navTabsTitle.children.length;e>0;e--)this.navTabsTitle.removeChild(this.navTabsTitle.children[e]),this.navTabsContent.removeChild(this.navTabsContent.children[e])}},{key:"_changeTabsPage",value:function(e){for(var t=e.target.index,n=0;n<this.navTabsTitle.children.length;n++)this.navTabsTitle.children[n].setAttribute("class",""),this.navTabsContent.children[n].hidden=!0,n===t&&(this.navTabsTitle.children[n].setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.children[n].hidden=!1)}}])&&PM(n.prototype,r),i&&PM(n,i),t}();function AM(e){return(AM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jM(e,t){return!t||"object"!==AM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function RM(e){return(RM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function NM(e,t){return(NM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Components.NavTabsPage=MM;var IM=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(n=jM(this,RM(t).call(this,e))).currentPage=0,n.pageNumberLis=[],n.currentPageNumberLis=[],n.linkageEvent=null,e.contents=e.contents?e.contents:null,e.pageCounts=e.pageCounts?e.pageCounts:0,n._initView(e.contents,e.pageCounts),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&NM(e,t)}(t,Ik),n=t,(r=[{key:"setLinkageEvent",value:function(e){this.linkageEvent=e}},{key:"_initView",value:function(e,t){var n=document.createElement("div");n.setAttribute("class","component-pagination");var r=document.createElement("div");r.setAttribute("class","component-pagination__content"),n.appendChild(r),this.content=r;var i=document.createElement("ul");i.setAttribute("class","component-pagination__link"),i.onclick=this._changePageEvent.bind(this),n.appendChild(i),this._createLink(i),this.link=i,e&&this.setContent(e),0!==t&&this.setPageLink(t),this.rootContainer=n}},{key:"setContent",value:function(e){this.clearContent(),this.appendContent(e)}},{key:"appendContent",value:function(e){this.content.appendChild(e)}},{key:"clearContent",value:function(){for(var e=this.content.children.length-1;e>=0;e--)this.content.removeChild(this.content.children[e])}},{key:"setPageLink",value:function(e){this.pageNumberLis=[],this.currentPageNumberLis=[],this.clearPageLink(),this._createPageLi(e),this._appendPageLink()}},{key:"_createPageLi",value:function(e){for(var t=0;t<e;t++){var n=document.createElement("li");n.innerHTML=t+1,this.pageNumberLis.push(n)}if(this.pageNumberLis[0].setAttribute("class","active"),this.currentPage=1,e<5)this.currentPageNumberLis=this.pageNumberLis;else for(var r=0;r<5;r++)this.currentPageNumberLis.push(this.pageNumberLis[r])}},{key:"_appendPageLink",value:function(){for(var e=0;e<this.currentPageNumberLis.length;e++)this.link.insertBefore(this.currentPageNumberLis[e],this.link.childNodes[this.link.children.length-2]);for(var t=0;t<this.currentPageNumberLis.length;t++)this.currentPageNumberLis[t].setAttribute("class",""),Number(this.currentPageNumberLis[t].innerHTML)===this.currentPage&&this.currentPageNumberLis[t].setAttribute("class","active");this._changeDisableState(),this.linkageEvent&&this.linkageEvent(this.currentPage)}},{key:"clearPageLink",value:function(){for(var e=this.link.children.length-3;e>1;e--)this.link.removeChild(this.link.children[e])}},{key:"_createLink",value:function(e){for(var t=0;t<4;t++){var n=document.createElement("li");n.setAttribute("class","disable");var r=document.createElement("span");n.appendChild(r),0===t?(r.id="first",r.setAttribute("class","supermapol-icons-first")):1===t?(r.id="prev",r.setAttribute("class","supermapol-icons-prev")):2===t?(r.id="next",r.setAttribute("class","supermapol-icons-next")):3===t&&(r.id="last",r.setAttribute("class","supermapol-icons-last")),e.appendChild(n)}}},{key:"_changePageEvent",value:function(e){var t=e.target;if("disable"!==t.parentElement.classList[0]){var n;if(t.id)n=t.id;else{if(!Number(t.innerHTML))return;n=Number(t.innerHTML)}this._prePageNum(n),this.clearPageLink(),this._appendPageLink()}}},{key:"_changeDisableState",value:function(){this.link.children[0].setAttribute("class",""),this.link.children[1].setAttribute("class",""),this.link.children[this.link.children.length-1].setAttribute("class",""),this.link.children[this.link.children.length-2].setAttribute("class",""),1===this.currentPage&&(this.link.children[0].setAttribute("class","disable"),this.link.children[1].setAttribute("class","disable")),this.currentPage===this.pageNumberLis.length&&(this.link.children[this.link.children.length-1].setAttribute("class","disable"),this.link.children[this.link.children.length-2].setAttribute("class","disable"))}},{key:"_prePageNum",value:function(e){var t=[];if(this.currentPage="first"===e?1:"last"===e?this.pageNumberLis.length:"prev"===e?this.currentPage-1:"next"===e?this.currentPage+1:e,this.pageNumberLis.length<=5)for(var n=0;n<this.pageNumberLis.length;n++)t.push(this.pageNumberLis[n]);else if(this.currentPage<=3)for(var r=0;r<5;r++)t.push(this.pageNumberLis[r]);else if(this.currentPage>=this.pageNumberLis.length-3)for(var i=this.pageNumberLis.length-5;i<this.pageNumberLis.length;i++)t.push(this.pageNumberLis[i]);else for(var o=this.currentPage-3;o<=this.currentPage+1;o++)t.push(this.pageNumberLis[o]);t.length>0&&(this.currentPageNumberLis=t)}}])&&LM(n.prototype,r),i&&LM(n,i),t}();r.Components.PaginationContainer=IM;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var DM={getFileType:function(e){return/^.*\.(?:xls|xlsx)$/i.test(e)?vk.EXCEL:/^.*\.(?:csv)$/i.test(e)?vk.CSV:/^.*\.(?:geojson|json)$/i.test(e)?vk.GEOJSON:null}};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Lang["en-US"]={title_dataFlowService:"Data Flow Service",title_distributedAnalysis:"Distributed Analysis",title_clientComputing:"Client Computing",title_dataServiceQuery:"Data Service Query",title_searchCity:"Search city",title_searchLayer:" Search layer",text_input_value_inputDataFlowUrl:"Please enter the data stream service address such as: ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"Display feature information",text_subscribe:"subscribe",text_cancelSubscribe:"unsubscribe",text_densityAnalysis:"Density Analysis",text_CalculateTheValuePerUnitArea:"Calculate the value per unit area within the neighborhood shape",text_option_selectDataset:"Please select a dataset",text_label_dataset:"Dataset",text_option_simplePointDensityAnalysis:"Simple point density analysis",text_option_nuclearDensityAnalysis:"Nuclear density analysis",text_label_analyticalMethod:"Analytical method",text_option_quadrilateral:"Quadrilateral",text_option_hexagon:"hexagon",text_label_meshType:"Mesh type",text_option_notSet:"Not set",text_label_weightField:"Weight field",text_label_gridSizeInMeters:"Grid size",text_label_searchRadius:"Search radius",text_label_queryRange:"Scope of analysis",text_label_areaUnit:"Area unit",text_option_equidistantSegmentation:"Equidistant segmentation",text_option_logarithm:"Logarithm",text_option_equalCountingSegment:"Equal counting segment",text_option_squareRootSegmentation:"Square root segmentation",text_label_thematicMapSegmentationMode:"Thematic map segmentation mode",text_label_thematicMapSegmentationParameters:"Thematic map segmentation parameters",text_option_greenOrangePurpleGradient:"Green orange purple gradient",text_option_greenOrangeRedGradient:"Green orange red gradient",text_option_rainbowGradient:"Rainbow gradient",text_option_spectralGradient:"Spectral gradient",text_option_terrainGradient:"Terrain gradient",text_label_thematicMapColorGradientMode:"Thematic map color gradient mode",text_label_resultLayerName:"Result layer name",text_chooseFile:"Open File",text_isoline:"Isoline",text_extractDiscreteValue:"Extract discrete value generation curve",text_buffer:"Buffer",text_specifyTheDistance:"Specify the distance to create the surrounding area",text_label_analysisLayer:"Analysis layer",text_label_extractField:"Extract field",text_label_extractedValue:"Extracted value",text_label_distanceAttenuation:"Distance attenuation",text_label_gridSize:"gridSize",text_label_bufferRadius:"Buffer radius",text_label_defaultkilometers:"Default 10 kilometers",text_label_kilometer:"kilometer",text_label_unit:"unit",text_retainOriginal:"Retain original object field",text_mergeBuffer:"Merge buffer",text_label_color:"Color",text_label_buffer:"[Buffer]",text_label_isolines:"[Isolines]",text_label_queryRangeTips:"The default is the full range of input data. Example: -74.050, 40.650, -73.850, 40.850",text_label_queryModel:"Query mode",text_label_IDArrayOfFeatures:"ID array of features",text_label_maxFeatures:"The maximum number of features that can be returned",text_label_bufferDistance:"Buffer distance",text_label_queryRange1:"Query range",text_label_spatialQueryMode:"Spatial query mode",text_label_featureFilter:"Feature filter",text_label_geometricObject:"Geometric object",text_label_queryMode:"Query mode",text_label_searchTips:"Search for city locations or layer features",text_label_chooseSearchLayers:"Select a query layer",text_loadSearchCriteria:"Load search criteria",text_saveSearchCriteria:"Save search criteria",btn_analyze:"Analyze",btn_analyzing:"Analyzing",btn_emptyTheAnalysisLayer:"Empty the analysis layer",btn_cancelAnalysis:"Cancel",btn_query:"Query",btn_querying:"Querying",btn_emptyTheRresultLayer:"Clear all result layers","msg_dataReturnedIsEmpty.":"The request is successful and the data returned by the query is empty.",msg_dataFlowServiceHasBeenSubscribed:"The data stream service has been subscribed to.",msg_inputDataFlowUrlFirst:"Please enter the data stream service address first.",msg_datasetOrMethodUnsupport:"This dataset does not support this analysis type. Please reselect the dataset.",msg_selectDataset:"Please select a data set!",msg_setTheWeightField:"Please set the weight field!",msg_theFieldNotSupportAnalysis:"The field you currently select does not support analysis!",msg_resultIsEmpty:"The result of the analysis is empty!",msg_openFileFail:"Failed to open file!",msg_fileTypeUnsupported:"File format is not supported!",msg_fileSizeExceeded:"File size exceeded! The file size should not exceed 10M!",msg_dataInWrongGeoJSONFormat:"Wrong data format! Non standard GEOJSON format data!",msg_dataInWrongFormat:"Wrong data format! Non standard EXCEL, CSV or GEOJSON format data!",msg_searchKeywords:"Search keywords cannot be empty. Please enter your search criteria.",msg_searchGeocodeField:"Did not match the address matching service data!",msg_cityGeocodeField:"The address matching service of the current city is not configured.",msg_getFeatureField:"No related vector features found!",msg_dataflowservicesubscribed:"The data stream service has been subscribed to.",msg_subscribesucceeded:"The data stream service subscription was successful.",msg_crsunsupport:"Does not support the coordinate system of the current map",msg_tilematrixsetunsupport:"Incoming TileMatrixSet is not supported",msg_jsonResolveFiled:"JSON format parsing failure！",msg_requestContentFiled:"Failed to request data through iportal!",msg_getdatafailed:"Failed to get data!"};r.Lang["zh-CN"]={title_dataFlowService:"数据流服务",title_distributedAnalysis:"分布式分析",title_clientComputing:"客户端计算",title_dataServiceQuery:"数据服务查询",title_searchCity:"搜索城市",title_searchLayer:"搜索图层",text_input_value_inputDataFlowUrl:"请输入数据流服务地址如:ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"显示要素信息",text_subscribe:"订阅",text_cancelSubscribe:"取消订阅",text_densityAnalysis:"密度分析",text_CalculateTheValuePerUnitArea:"计算点指定邻域形状内的每单位面积量值",text_option_selectDataset:"请选择数据集",text_label_dataset:"数据集",text_option_simplePointDensityAnalysis:"简单点密度分析",text_option_nuclearDensityAnalysis:"核密度分析",text_label_analyticalMethod:"分析方法",text_option_quadrilateral:"四边形",text_option_hexagon:"六边形",text_label_meshType:"网格面类型",text_option_notSet:"未设置",text_label_weightField:"权重字段",text_label_gridSizeInMeters:"网格大小",text_label_searchRadius:"搜索半径",text_label_queryRange:"分析范围",text_label_areaUnit:"面积单位",text_option_equidistantSegmentation:"等距离分段",text_option_logarithm:"对数",text_option_equalCountingSegment:"等计数分段",text_option_squareRootSegmentation:"平方根分段",text_label_thematicMapSegmentationMode:"专题图分段模式",text_label_thematicMapSegmentationParameters:"专题图分段参数",text_option_greenOrangePurpleGradient:"绿橙紫渐变",text_option_greenOrangeRedGradient:"绿橙红渐变",text_option_rainbowGradient:"彩虹渐变",text_option_spectralGradient:"光谱渐变",text_option_terrainGradient:"地形渐变",text_label_thematicMapColorGradientMode:"专题图颜色渐变模式",text_label_resultLayerName:"结果图层名称",text_chooseFile:"选择文件",text_isoline:"等值线",text_extractDiscreteValue:"提取离散值生成曲线",text_buffer:"缓冲区",text_specifyTheDistance:"指定距离创建周边区域",text_label_analysisLayer:"分析图层",text_label_extractField:"提取字段",text_label_extractedValue:"提取值",text_label_distanceAttenuation:"距离衰减",text_label_gridSize:"栅格大小",text_label_bufferRadius:"缓冲半径",text_label_defaultkilometers:"默认10千米",text_option_kilometer:"千米",text_label_unit:"单位",text_retainOriginal:"保留原对象字段属性",text_mergeBuffer:"合并缓冲区",text_label_color:"颜色",text_label_buffer:"[缓冲区]",text_label_isolines:"[等值线]",text_label_queryRangeTips:"默认为输入数据的全幅范围。范例：-74.050,40.650,-73.850,40.850",text_label_IDArrayOfFeatures:"要素 ID 数组",text_label_maxFeatures:"最多可返回的要素数量",text_label_bufferDistance:"缓冲区距离",text_label_queryRange1:"查询范围",text_label_spatialQueryMode:"空间查询模式",text_label_featureFilter:"要素过滤器",text_label_geometricObject:"几何对象",text_label_queryMode:"查询模式",text_label_searchTips:"搜索城市地点或图层要素",text_label_chooseSearchLayers:"选择查询图层",text_loadSearchCriteria:"加载搜索条件",text_saveSearchCriteria:"保存搜索条件",btn_analyze:"分析",btn_analyzing:"分析中",btn_emptyTheAnalysisLayer:"清空分析图层",btn_cancelAnalysis:"取消",btn_query:"查询",btn_querying:"查询中",btn_emptyTheRresultLayer:"清除所有结果图层",msg_dataFlowServiceHasBeenSubscribed:"已订阅该数据流服务。",msg_inputDataFlowUrlFirst:"请先输入数据流服务地址。",msg_datasetOrMethodUnsupport:"该数据集不支持本分析类型，请重新选择数据集",msg_selectDataset:"请选择数据集！",msg_setTheWeightField:"请设置权重字段！",msg_theFieldNotSupportAnalysis:"您当前选择的字段不支持分析！",msg_resultIsEmpty:"分析的结果为空！",msg_dataReturnedIsEmpty:"请求成功，查询返回的数据为空。",msg_openFileFail:"打开文件失败！",msg_fileTypeUnsupported:"不支持该文件格式！",msg_fileSizeExceeded:"文件大小超限！文件大小不得超过 10M！",msg_dataInWrongGeoJSONFormat:"数据格式错误！非标准的 GEOJSON 格式数据！",msg_dataInWrongFormat:"数据格式错误！非标准的 EXCEL, CSV 或 GEOJSON 格式数据！",msg_searchKeywords:"搜索关键字不能为空，请输入搜索条件。",msg_searchGeocodeField:"未匹配到地址匹配服务数据！",msg_cityGeocodeField:"未配置当前城市的地址匹配服务。",msg_getFeatureField:"未查找到相关矢量要素！",msg_dataflowservicesubscribed:"已订阅该数据流服务。",msg_subscribesucceeded:"数据流服务订阅成功。",msg_crsunsupport:"不支持当前地图的坐标系",msg_tilematrixsetunsupport:"不支持传入的TileMatrixSet",msg_jsonResolveFiled:"json格式解析失败！",msg_requestContentFiled:"通过iportal请求数据失败！",msg_getdatafailed:"获取数据失败！"};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var FM=n(0),BM=n.n(FM);
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
BM.a.Projection={};var UM=BM.a.Class.extend({initialize:function(e){this.bounds=e},project:function(e){return new BM.a.Point(e.lng,e.lat)},unproject:function(e){return new BM.a.LatLng(e.y,e.x)}}),GM=function(e){return new UM(e)},zM=BM.a.Class.extend({includes:BM.a.CRS,initialize:function(e){e.origin&&(this.transformation=new BM.a.Transformation(1,-e.origin.x,-1,e.origin.y)),this.projection=BM.a.Projection.NonProjection(e.bounds),this.bounds=e.bounds,this.origin=e.origin,this.resolutions=e.resolutions},scale:function(e){var t;this.resolutions&&0!==this.resolutions.length?t=1/this.resolutions[0]:t=1/(Math.max(this.bounds.getSize().x,this.bounds.getSize().y)/256);return t*Math.pow(2,e)},zoom:function(e){var t;this.resolutions&&0!==this.resolutions.length?t=1/this.resolutions[0]:t=1/(Math.max(this.bounds.getSize().x,this.bounds.getSize().y)/256);return Math.log(e/t)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,r=t.lat-e.lat;return Math.sqrt(n*n+r*r)},infinite:!1}),VM=function(e){return new zM(e)};BM.a.Projection.NonProjection=GM,BM.a.CRS.NonEarthCRS=VM;var JM=1,HM=2,qM=4,WM=5,YM=484813681109536e-20,QM=Math.PI/2,XM=.16666666666666666,KM=.04722222222222222,ZM=.022156084656084655,$M=1e-10,eA=.017453292519943295,tA=57.29577951308232,nA=Math.PI/4,rA=2*Math.PI,iA=3.14159265359,oA={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},aA={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},sA=/[\s_\-\/\(\)]/g;function lA(e,t){if(e[t])return e[t];for(var n,r=Object.keys(e),i=t.toLowerCase().replace(sA,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(sA,"")===i)return e[n]}var uA=function(e){var t,n,r,i={},o=e.split("+").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var n=t.split("=");return n.push(!0),e[n[0].toLowerCase()]=n[1],e},{}),a={proj:"projName",datum:"datumCode",rf:function(e){i.rf=parseFloat(e)},lat_0:function(e){i.lat0=e*eA},lat_1:function(e){i.lat1=e*eA},lat_2:function(e){i.lat2=e*eA},lat_ts:function(e){i.lat_ts=e*eA},lon_0:function(e){i.long0=e*eA},lon_1:function(e){i.long1=e*eA},lon_2:function(e){i.long2=e*eA},alpha:function(e){i.alpha=parseFloat(e)*eA},lonc:function(e){i.longc=e*eA},x_0:function(e){i.x0=parseFloat(e)},y_0:function(e){i.y0=parseFloat(e)},k_0:function(e){i.k0=parseFloat(e)},k:function(e){i.k0=parseFloat(e)},a:function(e){i.a=parseFloat(e)},b:function(e){i.b=parseFloat(e)},r_a:function(){i.R_A=!0},zone:function(e){i.zone=parseInt(e,10)},south:function(){i.utmSouth=!0},towgs84:function(e){i.datum_params=e.split(",").map(function(e){return parseFloat(e)})},to_meter:function(e){i.to_meter=parseFloat(e)},units:function(e){i.units=e;var t=lA(aA,e);t&&(i.to_meter=t.to_meter)},from_greenwich:function(e){i.from_greenwich=e*eA},pm:function(e){var t=lA(oA,e);i.from_greenwich=(t||parseFloat(e))*eA},nadgrids:function(e){"@null"===e?i.datumCode="none":i.nadgrids=e},axis:function(e){3===e.length&&-1!=="ewnsud".indexOf(e.substr(0,1))&&-1!=="ewnsud".indexOf(e.substr(1,1))&&-1!=="ewnsud".indexOf(e.substr(2,1))&&(i.axis=e)}};for(t in o)n=o[t],t in a?"function"==typeof(r=a[t])?r(n):i[r]=n:i[t]=n;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i},cA=function(e){return new vA(e).output()},fA=1,hA=/\s/,pA=/[A-Za-z]/,yA=/[A-Za-z84]/,dA=/[,\]]/,mA=/[\d\.E\-\+]/;function vA(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=fA}function gA(e,t,n){Array.isArray(t)&&(n.unshift(t),t=null);var r=t?{}:e,i=n.reduce(function(e,t){return bA(t,e),e},r);t&&(e[t]=i)}function bA(e,t){if(Array.isArray(e)){var n=e.shift();if("PARAMETER"===n&&(n=e.shift()),1===e.length)return Array.isArray(e[0])?(t[n]={},void bA(e[0],t[n])):void(t[n]=e[0]);if(e.length)if("TOWGS84"!==n){if("AXIS"===n)return n in t||(t[n]=[]),void t[n].push(e);var r;switch(Array.isArray(n)||(t[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[n]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&bA(e[2],t[n]));case"SPHEROID":case"ELLIPSOID":return t[n]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&bA(e[3],t[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return e[0]=["name",e[0]],void gA(t,n,e);default:for(r=-1;++r<e.length;)if(!Array.isArray(e[r]))return bA(e,t[n]);return gA(t,n,e)}}else t[n]=e;else t[n]=!0}else t[e]=!0}function SA(e){return(SA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}vA.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;hA.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case fA:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},vA.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=4);if(dA.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},vA.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=fA)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=fA,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},vA.prototype.number=function(e){if(!mA.test(e)){if(dA.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},vA.prototype.quoted=function(e){'"'!==e?this.word+=e:this.state=5},vA.prototype.keyword=function(e){if(yA.test(e))this.word+=e;else{if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=fA)}if(!dA.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},vA.prototype.neutral=function(e){if(pA.test(e))return this.word=e,void(this.state=2);if('"'===e)return this.word="",void(this.state=4);if(mA.test(e))return this.word=e,void(this.state=3);if(!dA.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)},vA.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var _A=.017453292519943295;function wA(e){return e*_A}var OA,xA=function(e){var t=cA(e),n=t.shift(),r=t.shift();t.unshift(["name",r]),t.unshift(["type",n]);var i={};return bA(t,i),function(e){if("GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"===SA(e.PROJECTION)?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",n=0,r=e.AXIS.length;n<r;++n){var i=e.AXIS[n][0].toLowerCase();-1!==i.indexOf("north")?t+="n":-1!==i.indexOf("south")?t+="s":-1!==i.indexOf("east")?t+="e":-1!==i.indexOf("west")&&(t+="w")}2===t.length&&(t+="u"),3===t.length&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var o=e.GEOGCS;function a(t){return t*(e.to_meter||1)}"GEOGCS"===e.type&&(o=e),o&&(o.DATUM?e.datumCode=o.DATUM.name.toLowerCase():e.datumCode=o.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==e.datumCode&&"new_zealand_1949"!==e.datumCode||(e.datumCode="nzgd49"),"wgs_1984"!==e.datumCode&&"world_geodetic_system_1984"!==e.datumCode||("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"_ferro"===e.datumCode.slice(-6)&&(e.datumCode=e.datumCode.slice(0,-6)),"_jakarta"===e.datumCode.slice(-8)&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(e.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=o.DATUM.SPHEROID.a,e.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(e.datum_params=o.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",wA],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",wA],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",wA],["lat0","latitude_of_origin",wA],["lat0","standard_parallel_1",wA],["lat1","standard_parallel_1",wA],["lat2","standard_parallel_2",wA],["azimuth","Azimuth"],["alpha","azimuth",wA],["srsCode","name"]].forEach(function(t){return n=e,i=(r=t)[0],o=r[1],void(!(i in n)&&o in n&&(n[i]=n[o],3===r.length&&(n[i]=r[2](n[i]))));var n,r,i,o}),e.long0||!e.longc||"Albers_Conic_Equal_Area"!==e.projName&&"Lambert_Azimuthal_Equal_Area"!==e.projName||(e.long0=e.longc),e.lat_ts||!e.lat1||"Stereographic_South_Pole"!==e.projName&&"Polar Stereographic (variant B)"!==e.projName||(e.lat0=wA(e.lat1>0?90:-90),e.lat_ts=e.lat1)}(i),i};function CA(e){var t=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?CA[e]=uA(arguments[1]):CA[e]=xA(arguments[1]):CA[e]=n}else if(1===arguments.length){if(Array.isArray(e))return e.map(function(e){Array.isArray(e)?CA.apply(t,e):CA(e)});if("string"==typeof e){if(e in CA)return CA[e]}else"EPSG"in e?CA["EPSG:"+e.EPSG]=e:"ESRI"in e?CA["ESRI:"+e.ESRI]=e:"IAU2000"in e?CA["IAU2000:"+e.IAU2000]=e:console.log(e);return}}(OA=CA)("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),OA("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),OA("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),OA.WGS84=OA["EPSG:4326"],OA["EPSG:3785"]=OA["EPSG:3857"],OA.GOOGLE=OA["EPSG:3857"],OA["EPSG:900913"]=OA["EPSG:3857"],OA["EPSG:102113"]=OA["EPSG:3857"];var PA=CA;var TA=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var EA=["3857","900913","3785","102113"];var kA=function(e){if(!function(e){return"string"==typeof e}(e))return e;if(function(e){return e in PA}(e))return PA[e];if(function(e){return TA.some(function(t){return e.indexOf(t)>-1})}(e)){var t=xA(e);if(function(e){var t=lA(e,"authority");if(t){var n=lA(t,"epsg");return n&&EA.indexOf(n)>-1}}(t))return PA["EPSG:3857"];var n=function(e){var t=lA(e,"extension");if(t)return lA(t,"proj4")}(t);return n?uA(n):t}return function(e){return"+"===e[0]}(e)?uA(e):void 0},MA=function(e,t){var n,r;if(e=e||{},!t)return e;for(r in t)void 0!==(n=t[r])&&(e[r]=n);return e},AA=function(e,t,n){var r=e*t;return n/Math.sqrt(1-r*r)},LA=function(e){return e<0?-1:1},jA=function(e){return Math.abs(e)<=iA?e:e-LA(e)*rA},RA=function(e,t,n){var r=e*n,i=.5*e;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(QM-t))/r},NA=function(e,t){for(var n,r,i=.5*e,o=QM-2*Math.atan(t),a=0;a<=15;a++)if(n=e*Math.sin(o),o+=r=QM-2*Math.atan(t*Math.pow((1-n)/(1+n),i))-o,Math.abs(r)<=1e-10)return o;return-9999};function IA(e){return e}var DA=[{init:function(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=AA(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(e){var t,n,r=e.x,i=e.y;if(i*tA>90&&i*tA<-90&&r*tA>180&&r*tA<-180)return null;if(Math.abs(Math.abs(i)-QM)<=$M)return null;if(this.sphere)t=this.x0+this.a*this.k0*jA(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(nA+.5*i));else{var o=Math.sin(i),a=RA(this.e,i,o);t=this.x0+this.a*this.k0*jA(r-this.long0),n=this.y0-this.a*this.k0*Math.log(a)}return e.x=t,e.y=n,e},inverse:function(e){var t,n,r=e.x-this.x0,i=e.y-this.y0;if(this.sphere)n=QM-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(n=NA(this.e,o)))return null}return t=jA(this.long0+r/(this.a*this.k0)),e.x=t,e.y=n,e},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:IA,inverse:IA,names:["longlat","identity"]}],FA={},BA=[];function UA(e,t){var n=BA.length;return e.names?(BA[n]=e,e.names.forEach(function(e){FA[e.toLowerCase()]=n}),this):(console.log(t),!0)}var GA={start:function(){DA.forEach(UA)},add:UA,get:function(e){if(!e)return!1;var t=e.toLowerCase();return void 0!==FA[t]&&BA[FA[t]]?BA[FA[t]]:void 0}},zA={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},VA=zA.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};zA.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var JA={};JA.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},JA.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},JA.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},JA.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},JA.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},JA.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},JA.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},JA.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},JA.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},JA.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},JA.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},JA.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},JA.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},JA.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},JA.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},JA.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},JA.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var HA=function(e,t,n,r,i,o){var a={};return a.datum_type=void 0===e||"none"===e?WM:qM,t&&(a.datum_params=t.map(parseFloat),0===a.datum_params[0]&&0===a.datum_params[1]&&0===a.datum_params[2]||(a.datum_type=JM),a.datum_params.length>3&&(0===a.datum_params[3]&&0===a.datum_params[4]&&0===a.datum_params[5]&&0===a.datum_params[6]||(a.datum_type=HM,a.datum_params[3]*=YM,a.datum_params[4]*=YM,a.datum_params[5]*=YM,a.datum_params[6]=a.datum_params[6]/1e6+1))),a.a=n,a.b=r,a.es=i,a.ep2=o,a};function qA(e){return(qA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WA(e,t){if(!(this instanceof WA))return new WA(e);t=t||function(e){if(e)throw e};var n=kA(e);if("object"===qA(n)){var r=WA.projections.get(n.projName);if(r){if(n.datumCode&&"none"!==n.datumCode){var i=lA(JA,n.datumCode);i&&(n.datum_params=i.towgs84?i.towgs84.split(","):null,n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84";var o,a,s,l,u,c,f,h=function(e,t,n,r,i){if(!e){var o=lA(zA,r);o||(o=VA),e=o.a,t=o.b,n=o.rf}return n&&!t&&(t=(1-1/n)*e),(0===n||Math.abs(e-t)<$M)&&(i=!0,t=e),{a:e,b:t,rf:n,sphere:i}}(n.a,n.b,n.rf,n.ellps,n.sphere),p=(o=h.a,a=h.b,h.rf,s=n.R_A,c=((l=o*o)-(u=a*a))/l,f=0,s?(l=(o*=1-c*(XM+c*(KM+c*ZM)))*o,c=0):f=Math.sqrt(c),{es:c,e:f,ep2:(l-u)/u}),y=n.datum||HA(n.datumCode,n.datum_params,h.a,h.b,p.es,p.ep2);MA(this,n),MA(this,r),this.a=h.a,this.b=h.b,this.rf=h.rf,this.sphere=h.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=y,this.init(),t(null,this)}else t(e)}else t(e)}WA.projections=GA,WA.projections.start();var YA=WA;function QA(e,t,n){var r,i,o,a,s=e.x,l=e.y,u=e.z?e.z:0;if(l<-QM&&l>-1.001*QM)l=-QM;else if(l>QM&&l<1.001*QM)l=QM;else{if(l<-QM)return{x:-1/0,y:-1/0,z:e.z};if(l>QM)return{x:1/0,y:1/0,z:e.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(l),a=Math.cos(l),o=i*i,{x:((r=n/Math.sqrt(1-t*o))+u)*a*Math.cos(s),y:(r+u)*a*Math.sin(s),z:(r*(1-t)+u)*i}}function XA(e,t,n,r){var i,o,a,s,l,u,c,f,h,p,y,d,m,v,g,b=e.x,S=e.y,_=e.z?e.z:0;if(i=Math.sqrt(b*b+S*S),o=Math.sqrt(b*b+S*S+_*_),i/n<1e-12){if(v=0,o/n<1e-12)return QM,g=-r,{x:e.x,y:e.y,z:e.z}}else v=Math.atan2(S,b);a=_/o,f=(s=i/o)*(1-t)*(l=1/Math.sqrt(1-t*(2-t)*s*s)),h=a*l,m=0;do{m++,u=t*(c=n/Math.sqrt(1-t*h*h))/(c+(g=i*f+_*h-c*(1-t*h*h))),d=(y=a*(l=1/Math.sqrt(1-u*(2-u)*s*s)))*f-(p=s*(1-u)*l)*h,f=p,h=y}while(d*d>1e-24&&m<30);return{x:v,y:Math.atan(y/Math.abs(p)),z:g}}function KA(e){return e===JM||e===HM}var ZA=function(e,t,n){return function(e,t){return e.datum_type===t.datum_type&&!(e.a!==t.a||Math.abs(e.es-t.es)>5e-11)&&(e.datum_type===JM?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type!==HM||e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6])}(e,t)?n:e.datum_type===WM||t.datum_type===WM?n:e.es!==t.es||e.a!==t.a||KA(e.datum_type)||KA(t.datum_type)?(n=QA(n,e.es,e.a),KA(e.datum_type)&&(n=function(e,t,n){if(t===JM)return{x:e.x+n[0],y:e.y+n[1],z:e.z+n[2]};if(t===HM){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6];return{x:u*(e.x-l*e.y+s*e.z)+r,y:u*(l*e.x+e.y-a*e.z)+i,z:u*(-s*e.x+a*e.y+e.z)+o}}}(n,e.datum_type,e.datum_params)),KA(t.datum_type)&&(n=function(e,t,n){if(t===JM)return{x:e.x-n[0],y:e.y-n[1],z:e.z-n[2]};if(t===HM){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],c=(e.x-r)/u,f=(e.y-i)/u,h=(e.z-o)/u;return{x:c+l*f-s*h,y:-l*c+f+a*h,z:s*c-a*f+h}}}(n,t.datum_type,t.datum_params)),XA(n,t.es,t.a,t.b)):n},$A=function(e,t,n){var r,i,o,a=n.x,s=n.y,l=n.z||0,u={};for(o=0;o<3;o++)if(!t||2!==o||void 0!==n.z)switch(0===o?(r=a,i=-1!=="ew".indexOf(e.axis[o])?"x":"y"):1===o?(r=s,i=-1!=="ns".indexOf(e.axis[o])?"y":"x"):(r=l,i="z"),e.axis[o]){case"e":case"w":case"n":case"s":u[i]=r;break;case"u":void 0!==n[i]&&(u.z=r);break;case"d":void 0!==n[i]&&(u.z=-r);break;default:return null}return u},eL=function(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t},tL=function(e){nL(e.x),nL(e.y)};function nL(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function rL(e,t,n){var r;if(Array.isArray(n)&&(n=eL(n)),tL(n),e.datum&&t.datum&&function(e,t){return(e.datum.datum_type===JM||e.datum.datum_type===HM)&&"WGS84"!==t.datumCode||(t.datum.datum_type===JM||t.datum.datum_type===HM)&&"WGS84"!==e.datumCode}(e,t)&&(n=rL(e,r=new YA("WGS84"),n),e=r),"enu"!==e.axis&&(n=$A(e,!1,n)),"longlat"===e.projName)n={x:n.x*eA,y:n.y*eA,z:n.z||0};else if(e.to_meter&&(n={x:n.x*e.to_meter,y:n.y*e.to_meter,z:n.z||0}),!(n=e.inverse(n)))return;return e.from_greenwich&&(n.x+=e.from_greenwich),n=ZA(e.datum,t.datum,n),t.from_greenwich&&(n={x:n.x-t.from_greenwich,y:n.y,z:n.z||0}),"longlat"===t.projName?n={x:n.x*tA,y:n.y*tA,z:n.z||0}:(n=t.forward(n),t.to_meter&&(n={x:n.x/t.to_meter,y:n.y/t.to_meter,z:n.z||0})),"enu"!==t.axis?$A(t,!0,n):n}var iL=YA("WGS84");function oL(e,t,n){var r,i,o;return Array.isArray(n)?(r=rL(e,t,n)||{x:NaN,y:NaN},n.length>2?void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name?"number"==typeof r.z?[r.x,r.y,r.z].concat(n.splice(3)):[r.x,r.y,n[2]].concat(n.splice(3)):[r.x,r.y].concat(n.splice(2)):[r.x,r.y]):(i=rL(e,t,n),2===(o=Object.keys(n)).length?i:(o.forEach(function(r){if(void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;i[r]=n[r]}),i))}function aL(e){return e instanceof YA?e:e.oProj?e.oProj:YA(e)}var sL=function(e,t,n){e=aL(e);var r,i=!1;return void 0===t?(t=e,e=iL,i=!0):(void 0!==t.x||Array.isArray(t))&&(n=t,t=e,e=iL,i=!0),t=aL(t),n?oL(e,t,n):(r={forward:function(n){return oL(e,t,n)},inverse:function(n){return oL(t,e,n)}},i&&(r.oProj=t),r)},lL=6,uL="AJSAJS",cL="AFAFAF",fL=65,hL=73,pL=79,yL=86,dL=90,mL={forward:vL,inverse:function(e){var t=_L(OL(e.toUpperCase()));if(t.lat&&t.lon)return[t.lon,t.lat,t.lon,t.lat];return[t.left,t.bottom,t.right,t.top]},toPoint:gL};function vL(e,t){return t=t||5,function(e,t){var n="00000"+e.easting,r="00000"+e.northing;return e.zoneNumber+e.zoneLetter+(p=e.easting,y=e.northing,d=e.zoneNumber,m=wL(d),v=Math.floor(p/1e5),g=Math.floor(y/1e5)%20,i=v,o=g,a=m,s=a-1,l=uL.charCodeAt(s),u=cL.charCodeAt(s),c=l+i-1,f=u+o,h=!1,c>dL&&(c=c-dL+fL-1,h=!0),(c===hL||l<hL&&c>hL||(c>hL||l<hL)&&h)&&c++,(c===pL||l<pL&&c>pL||(c>pL||l<pL)&&h)&&++c===hL&&c++,c>dL&&(c=c-dL+fL-1),f>yL?(f=f-yL+fL-1,h=!0):h=!1,(f===hL||u<hL&&f>hL||(f>hL||u<hL)&&h)&&f++,(f===pL||u<pL&&f>pL||(f>pL||u<pL)&&h)&&++f===hL&&f++,f>yL&&(f=f-yL+fL-1),String.fromCharCode(c)+String.fromCharCode(f))+n.substr(n.length-5,t)+r.substr(r.length-5,t);var i,o,a,s,l,u,c,f,h;var p,y,d,m,v,g}(function(e){var t,n,r,i,o,a,s,l=e.lat,u=e.lon,c=6378137,f=bL(l),h=bL(u);s=Math.floor((u+180)/6)+1,180===u&&(s=60);l>=56&&l<64&&u>=3&&u<12&&(s=32);l>=72&&l<84&&(u>=0&&u<9?s=31:u>=9&&u<21?s=33:u>=21&&u<33?s=35:u>=33&&u<42&&(s=37));a=bL(6*(s-1)-180+3),.006739496752268451,t=c/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),n=Math.tan(f)*Math.tan(f),r=.006739496752268451*Math.cos(f)*Math.cos(f),i=Math.cos(f)*(h-a),o=c*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-3.418046101696858e-9*Math.sin(6*f));var p=.9996*t*(i+(1-n+r)*i*i*i/6+(5-18*n+n*n+72*r-.39089081163157013)*i*i*i*i*i/120)+5e5,y=.9996*(o+t*Math.tan(f)*(i*i/2+(5-n+9*r+4*r*r)*i*i*i*i/24+(61-58*n+n*n+600*r-2.2240339282485886)*i*i*i*i*i*i/720));l<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(p),zoneNumber:s,zoneLetter:function(e){var t="Z";84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C");return t}(l)}}({lat:e[1],lon:e[0]}),t)}function gL(e){var t=_L(OL(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function bL(e){return e*(Math.PI/180)}function SL(e){return e/Math.PI*180}function _L(e){var t=e.northing,n=e.easting,r=e.zoneLetter,i=e.zoneNumber;if(i<0||i>60)return null;var o,a,s,l,u,c,f,h,p=6378137,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),d=n-5e5,m=t;r<"N"&&(m-=1e7),c=6*(i-1)-180+3,h=(f=m/.9996/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*f)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*f)+151*y*y*y/96*Math.sin(6*f),o=p/Math.sqrt(1-.00669438*Math.sin(h)*Math.sin(h)),a=Math.tan(h)*Math.tan(h),s=.006739496752268451*Math.cos(h)*Math.cos(h),l=.99330562*p/Math.pow(1-.00669438*Math.sin(h)*Math.sin(h),1.5),u=d/(.9996*o);var v=h-o*Math.tan(h)/l*(u*u/2-(5+3*a+10*s-4*s*s-.06065547077041606)*u*u*u*u/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*u*u*u*u*u*u/720);v=SL(v);var g,b=(u-(1+2*a+s)*u*u*u/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*u*u*u*u*u/120)/Math.cos(h);if(b=c+SL(b),e.accuracy){var S=_L({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});g={top:S.lat,right:S.lon,bottom:v,left:b}}else g={lat:v,lon:b};return g}function wL(e){var t=e%lL;return 0===t&&(t=lL),t}function OL(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,n=e.length,r=null,i="",o=0;!/[A-Z]/.test(t=e.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+e;i+=t,o++}var a=parseInt(i,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+e;var s=e.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+e;r=e.substring(o,o+=2);for(var l=wL(a),u=function(e,t){var n=uL.charCodeAt(t-1),r=1e5,i=!1;for(;n!==e.charCodeAt(0);){if(++n===hL&&n++,n===pL&&n++,n>dL){if(i)throw"Bad character: "+e;n=fL,i=!0}r+=1e5}return r}(r.charAt(0),l),c=function(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;var n=cL.charCodeAt(t-1),r=0,i=!1;for(;n!==e.charCodeAt(0);){if(++n===hL&&n++,n===pL&&n++,n>yL){if(i)throw"Bad character: "+e;n=fL,i=!0}r+=1e5}return r}(r.charAt(1),l);c<xL(s);)c+=2e6;var f=n-o;if(f%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var h,p,y,d=f/2,m=0,v=0;return d>0&&(h=1e5/Math.pow(10,d),p=e.substring(o,o+d),m=parseFloat(p)*h,y=e.substring(o+d),v=parseFloat(y)*h),{easting:m+u,northing:v+c,zoneLetter:s,zoneNumber:a,accuracy:h}}function xL(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function CL(e){return(CL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PL(e,t,n){if(!(this instanceof PL))return new PL(e,t,n);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"===CL(e))this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&void 0===t){var r=e.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=e,this.y=t,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}PL.fromMGRS=function(e){return new PL(gL(e))},PL.prototype.toMGRS=function(e){return vL([this.x,this.y],e)};var TL=PL,EL=.01068115234375,kL=function(e){var t=[];t[0]=1-e*(.25+e*(.046875+e*(.01953125+e*EL))),t[1]=e*(.75-e*(.046875+e*(.01953125+e*EL)));var n=e*e;return t[2]=n*(.46875-e*(.013020833333333334+.007120768229166667*e)),n*=e,t[3]=n*(.3645833333333333-.005696614583333333*e),t[4]=n*e*.3076171875,t},ML=function(e,t,n,r){return n*=t,t*=t,r[0]*e-n*(r[1]+t*(r[2]+t*(r[3]+t*r[4])))},AL=function(e,t,n){for(var r=1/(1-t),i=e,o=20;o;--o){var a=Math.sin(i),s=1-t*a*a;if(i-=s=(ML(i,a,Math.cos(i),n)-e)*(s*Math.sqrt(s))*r,Math.abs(s)<$M)return i}return i};var LL={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=kL(this.es),this.ml0=ML(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(e){var t,n,r,i=e.x,o=e.y,a=jA(i-this.long0),s=Math.sin(o),l=Math.cos(o);if(this.es){var u=l*a,c=Math.pow(u,2),f=this.ep2*Math.pow(l,2),h=Math.pow(f,2),p=Math.abs(l)>$M?Math.tan(o):0,y=Math.pow(p,2),d=Math.pow(y,2);t=1-this.es*Math.pow(s,2),u/=Math.sqrt(t);var m=ML(o,s,l,this.en);n=this.a*(this.k0*u*(1+c/6*(1-y+f+c/20*(5-18*y+d+14*f-58*y*f+c/42*(61+179*d-d*y-479*y)))))+this.x0,r=this.a*(this.k0*(m-this.ml0+s*a*u/2*(1+c/12*(5-y+9*f+4*h+c/30*(61+d-58*y+270*f-330*y*f+c/56*(1385+543*d-d*y-3111*y))))))+this.y0}else{var v=l*Math.sin(a);if(Math.abs(Math.abs(v)-1)<$M)return 93;if(n=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,r=l*Math.cos(a)/Math.sqrt(1-Math.pow(v,2)),(v=Math.abs(r))>=1){if(v-1>$M)return 93;r=0}else r=Math.acos(r);o<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return e.x=n,e.y=r,e},inverse:function(e){var t,n,r,i,o=(e.x-this.x0)*(1/this.a),a=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+a/this.k0,n=AL(t,this.es,this.en),Math.abs(n)<QM){var s=Math.sin(n),l=Math.cos(n),u=Math.abs(l)>$M?Math.tan(n):0,c=this.ep2*Math.pow(l,2),f=Math.pow(c,2),h=Math.pow(u,2),p=Math.pow(h,2);t=1-this.es*Math.pow(s,2);var y=o*Math.sqrt(t)/this.k0,d=Math.pow(y,2);r=n-(t*=u)*d/(1-this.es)*.5*(1-d/12*(5+3*h-9*c*h+c-4*f-d/30*(61+90*h-252*c*h+45*p+46*c-d/56*(1385+3633*h+4095*p+1574*p*h)))),i=jA(this.long0+y*(1-d/6*(1+2*h+c-d/20*(5+28*h+24*p+8*c*h+6*c-d/42*(61+662*h+1320*p+720*p*h))))/l)}else r=QM*LA(a),i=0;else{var m=Math.exp(o/this.k0),v=.5*(m-1/m),g=this.lat0+a/this.k0,b=Math.cos(g);t=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(v,2))),r=Math.asin(t),a<0&&(r=-r),i=0===v&&0===b?0:jA(Math.atan2(v,b)+this.long0)}return e.x=i,e.y=r,e},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},jL=function(e){var t=Math.exp(e);return t=(t-1/t)/2},RL=function(e,t){e=Math.abs(e),t=Math.abs(t);var n=Math.max(e,t),r=Math.min(e,t)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))},NL=function(e){var t=Math.abs(e);return t=function(e){var t=1+e,n=t-1;return 0===n?e:e*Math.log(t)/n}(t*(1+t/(RL(1,t)+1))),e<0?-t:t},IL=function(e,t){for(var n,r=2*Math.cos(2*t),i=e.length-1,o=e[i],a=0;--i>=0;)n=r*o-a+e[i],a=o,o=n;return t+n*Math.sin(2*t)},DL=function(e,t){for(var n,r=2*Math.cos(t),i=e.length-1,o=e[i],a=0;--i>=0;)n=r*o-a+e[i],a=o,o=n;return Math.sin(t)*n},FL=function(e,t,n){for(var r,i,o=Math.sin(t),a=Math.cos(t),s=jL(n),l=function(e){var t=Math.exp(e);return t=(t+1/t)/2}(n),u=2*a*l,c=-2*o*s,f=e.length-1,h=e[f],p=0,y=0,d=0;--f>=0;)r=y,i=p,h=u*(y=h)-r-c*(p=d)+e[f],d=c*y-i+u*p;return[(u=o*l)*h-(c=a*s)*d,u*d+c*h]};var BL={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),n=t;this.cgb[0]=t*(2+t*(-2/3+t*(t*(116/45+t*(26/45+t*(-2854/675)))-2))),this.cbg[0]=t*(t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))-2),n*=t,this.cgb[1]=n*(7/3+t*(t*(-227/45+t*(2704/315+t*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),n*=t,this.cgb[2]=n*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=n*(-26/15+t*(34/21+t*(1.6+t*(-12686/2835)))),n*=t,this.cgb[3]=n*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=n*(1237/630+t*(t*(-24832/14175)-2.4)),n*=t,this.cgb[4]=n*(4174/315+t*(-144838/6237)),this.cbg[4]=n*(-734/315+t*(109598/31185)),n*=t,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+n*(.25+n*(1/64+n/256))),this.utg[0]=t*(t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))-.5),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=n*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=n*(13/48+t*(t*(557/1440+t*(281/630+t*(-1983433/1935360)))-.6)),n*=t,this.utg[2]=n*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=n*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),n*=t,this.utg[3]=n*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=n*(49561/161280+t*(-179/168+t*(6601661/7257600))),n*=t,this.utg[4]=n*(-4583/161280+t*(108847/3991680)),this.gtu[4]=n*(34729/80640+t*(-3418889/1995840)),n*=t,this.utg[5]=-.03233083094085698*n,this.gtu[5]=.6650675310896665*n;var r=IL(this.cbg,this.lat0);this.Zb=-this.Qn*(r+DL(this.gtu,2*r))},forward:function(e){var t=jA(e.x-this.long0),n=e.y;n=IL(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),o=Math.sin(t),a=Math.cos(t);n=Math.atan2(r,a*i),t=Math.atan2(o*i,RL(r,i*a)),t=NL(Math.tan(t));var s,l,u=FL(this.gtu,2*n,2*t);return n+=u[0],t+=u[1],Math.abs(t)<=2.623395162778?(s=this.a*(this.Qn*t)+this.x0,l=this.a*(this.Qn*n+this.Zb)+this.y0):(s=1/0,l=1/0),e.x=s,e.y=l,e},inverse:function(e){var t,n,r=(e.x-this.x0)*(1/this.a),i=(e.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var o=FL(this.utg,2*i,2*r);i+=o[0],r+=o[1],r=Math.atan(jL(r));var a=Math.sin(i),s=Math.cos(i),l=Math.sin(r),u=Math.cos(r);i=Math.atan2(a*u,RL(l,u*s)),r=Math.atan2(l,u*s),t=jA(r+this.long0),n=IL(this.cgb,i)}else t=1/0,n=1/0;return e.x=t,e.y=n,e},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]},UL=function(e,t){if(void 0===e){if((e=Math.floor(30*(jA(t)+Math.PI)/Math.PI)+1)<0)return 0;if(e>60)return 60}return e};var GL={init:function(){var e=UL(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*eA,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,BL.init.apply(this),this.forward=BL.forward,this.inverse=BL.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},zL=function(e,t){return Math.pow((1-e)/(1+e),t)},VL=20;var JL={init:function(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+nA)/(Math.pow(Math.tan(.5*this.lat0+nA),this.C)*zL(this.e*e,this.ratexp))},forward:function(e){var t=e.x,n=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+nA),this.C)*zL(this.e*Math.sin(n),this.ratexp))-QM,e.x=this.C*t,e},inverse:function(e){for(var t=e.x/this.C,n=e.y,r=Math.pow(Math.tan(.5*n+nA)/this.K,1/this.C),i=VL;i>0&&(n=2*Math.atan(r*zL(this.e*Math.sin(e.y),-.5*this.e))-QM,!(Math.abs(n-e.y)<1e-14));--i)e.y=n;return i?(e.x=t,e.y=n,e):null},names:["gauss"]};var HL={init:function(){JL.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(e){var t,n,r,i;return e.x=jA(e.x-this.long0),JL.forward.apply(this,[e]),t=Math.sin(e.y),n=Math.cos(e.y),r=Math.cos(e.x),i=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*n*r),e.x=i*n*Math.sin(e.x),e.y=i*(this.cosc0*t-this.sinc0*n*r),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){var t,n,r,i,o;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,o=Math.sqrt(e.x*e.x+e.y*e.y)){var a=2*Math.atan2(o,this.R2);t=Math.sin(a),n=Math.cos(a),i=Math.asin(n*this.sinc0+e.y*t*this.cosc0/o),r=Math.atan2(e.x*t,o*this.cosc0*n-e.y*this.sinc0*t)}else i=this.phic0,r=0;return e.x=r,e.y=i,JL.inverse.apply(this,[e]),e.x=jA(e.x+this.long0),e},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var qL={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=$M&&(this.k0=.5*(1+LA(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=$M&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=$M&&(this.k0=.5*this.cons*AA(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/RA(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=AA(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-QM,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(e){var t,n,r,i,o,a,s=e.x,l=e.y,u=Math.sin(l),c=Math.cos(l),f=jA(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=$M&&Math.abs(l+this.lat0)<=$M?(e.x=NaN,e.y=NaN,e):this.sphere?(t=2*this.k0/(1+this.sinlat0*u+this.coslat0*c*Math.cos(f)),e.x=this.a*t*c*Math.sin(f)+this.x0,e.y=this.a*t*(this.coslat0*u-this.sinlat0*c*Math.cos(f))+this.y0,e):(n=2*Math.atan(this.ssfn_(l,u,this.e))-QM,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=$M?(o=RA(this.e,l*this.con,this.con*u),a=2*this.a*this.k0*o/this.cons,e.x=this.x0+a*Math.sin(s-this.long0),e.y=this.y0-this.con*a*Math.cos(s-this.long0),e):(Math.abs(this.sinlat0)<$M?(t=2*this.a*this.k0/(1+i*Math.cos(f)),e.y=t*r):(t=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(f))),e.y=t*(this.cosX0*r-this.sinX0*i*Math.cos(f))+this.y0),e.x=t*i*Math.sin(f)+this.x0,e))},inverse:function(e){var t,n,r,i,o;e.x-=this.x0,e.y-=this.y0;var a=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return t=this.long0,n=this.lat0,a<=$M?(e.x=t,e.y=n,e):(n=Math.asin(Math.cos(s)*this.sinlat0+e.y*Math.sin(s)*this.coslat0/a),t=Math.abs(this.coslat0)<$M?this.lat0>0?jA(this.long0+Math.atan2(e.x,-1*e.y)):jA(this.long0+Math.atan2(e.x,e.y)):jA(this.long0+Math.atan2(e.x*Math.sin(s),a*this.coslat0*Math.cos(s)-e.y*this.sinlat0*Math.sin(s))),e.x=t,e.y=n,e)}if(Math.abs(this.coslat0)<=$M){if(a<=$M)return n=this.lat0,t=this.long0,e.x=t,e.y=n,e;e.x*=this.con,e.y*=this.con,r=a*this.cons/(2*this.a*this.k0),n=this.con*NA(this.e,r),t=this.con*jA(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,a<=$M?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+e.y*Math.sin(i)*this.cosX0/a),t=jA(this.long0+Math.atan2(e.x*Math.sin(i),a*this.cosX0*Math.cos(i)-e.y*this.sinX0*Math.sin(i)))),n=-1*NA(this.e,Math.tan(.5*(QM+o)));return e.x=t,e.y=n,e},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(e,t,n){return t*=n,Math.tan(.5*(QM+e))*Math.pow((1-t)/(1+t),.5*n)}};var WL={init:function(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(t,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+e/2)),l=Math.log((1+o*t)/(1-o*t));this.K=a-this.alpha*s+this.alpha*o/2*l},forward:function(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),r=-this.alpha*(t+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(e.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return e.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,e.x=this.R*a+this.x0,e},inverse:function(e){for(var t=e.x-this.x0,n=e.y-this.y0,r=t/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,l=0,u=o,c=-1e3,f=0;Math.abs(u-c)>1e-7;){if(++f>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=s,e.y=u,e},names:["somerc"]};var YL={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var e=Math.sin(this.lat0),t=Math.cos(this.lat0),n=this.e*e;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(t,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var r,i,o=RA(this.e,this.lat0,e),a=this.bl/t*Math.sqrt((1-this.es)/(1-n*n));if(a*a<1&&(a=1),isNaN(this.longc)){var s=RA(this.e,this.lat1,Math.sin(this.lat1)),l=RA(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(a+Math.sqrt(a*a-1))*Math.pow(o,this.bl):this.el=(a-Math.sqrt(a*a-1))*Math.pow(o,this.bl);var u=Math.pow(s,this.bl),c=Math.pow(l,this.bl);i=.5*((r=this.el/u)-1/r);var f=(this.el*this.el-c*u)/(this.el*this.el+c*u),h=(c-u)/(c+u),p=jA(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(f*Math.tan(.5*this.bl*p)/h)/this.bl,this.long0=jA(this.long0);var y=jA(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*y)/i),this.alpha=Math.asin(a*Math.sin(this.gamma0))}else r=this.lat0>=0?a+Math.sqrt(a*a-1):a-Math.sqrt(a*a-1),this.el=r*Math.pow(o,this.bl),i=.5*(r-1/r),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))},forward:function(e){var t,n,r,i=e.x,o=e.y,a=jA(i-this.long0);if(Math.abs(Math.abs(o)-QM)<=$M)r=o>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(nA+r*this.gamma0*.5)),t=-1*r*QM*this.al/this.bl;else{var s=RA(this.e,o,Math.sin(o)),l=this.el/Math.pow(s,this.bl),u=.5*(l-1/l),c=.5*(l+1/l),f=Math.sin(this.bl*a),h=(u*Math.sin(this.gamma0)-f*Math.cos(this.gamma0))/c;n=Math.abs(Math.abs(h)-1)<=$M?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-h)/(1+h))/this.bl,t=Math.abs(Math.cos(this.bl*a))<=$M?this.al*this.bl*a:this.al*Math.atan2(u*Math.cos(this.gamma0)+f*Math.sin(this.gamma0),Math.cos(this.bl*a))/this.bl}return this.no_rot?(e.x=this.x0+t,e.y=this.y0+n):(t-=this.uc,e.x=this.x0+n*Math.cos(this.alpha)+t*Math.sin(this.alpha),e.y=this.y0+t*Math.cos(this.alpha)-n*Math.sin(this.alpha)),e},inverse:function(e){var t,n;this.no_rot?(n=e.y-this.y0,t=e.x-this.x0):(n=(e.x-this.x0)*Math.cos(this.alpha)-(e.y-this.y0)*Math.sin(this.alpha),t=(e.y-this.y0)*Math.cos(this.alpha)+(e.x-this.x0)*Math.sin(this.alpha),t+=this.uc);var r=Math.exp(-1*this.bl*n/this.al),i=.5*(r-1/r),o=.5*(r+1/r),a=Math.sin(this.bl*t/this.al),s=(a*Math.cos(this.gamma0)+i*Math.sin(this.gamma0))/o,l=Math.pow(this.el/Math.sqrt((1+s)/(1-s)),1/this.bl);return Math.abs(s-1)<$M?(e.x=this.long0,e.y=QM):Math.abs(s+1)<$M?(e.x=this.long0,e.y=-1*QM):(e.y=NA(this.e,l),e.x=jA(this.long0-Math.atan2(i*Math.cos(this.gamma0)-a*Math.sin(this.gamma0),Math.cos(this.bl*t/this.al))/this.bl)),e},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};var QL={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<$M)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),n=Math.cos(this.lat1),r=AA(this.e,t,n),i=RA(this.e,this.lat1,t),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=AA(this.e,o,a),l=RA(this.e,this.lat2,o),u=RA(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>$M?this.ns=Math.log(r/s)/Math.log(i/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(e){var t=e.x,n=e.y;Math.abs(2*Math.abs(n)-Math.PI)<=$M&&(n=LA(n)*(QM-2*$M));var r,i,o=Math.abs(Math.abs(n)-QM);if(o>$M)r=RA(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((o=n*this.ns)<=0)return null;i=0}var a=this.ns*jA(t-this.long0);return e.x=this.k0*(i*Math.sin(a))+this.x0,e.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,e},inverse:function(e){var t,n,r,i,o,a=(e.x-this.x0)/this.k0,s=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(a*a+s*s),n=1):(t=-Math.sqrt(a*a+s*s),n=-1);var l=0;if(0!==t&&(l=Math.atan2(n*a,n*s)),0!==t||this.ns>0){if(n=1/this.ns,r=Math.pow(t/(this.a*this.f0),n),-9999===(i=NA(this.e,r)))return null}else i=-QM;return o=jA(l/this.ns+this.long0),e.x=o,e.y=i,e},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};var XL={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(e){var t,n,r,i,o,a,s,l=e.x,u=e.y,c=jA(l-this.long0);return t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45),r=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),e.y=s*Math.cos(a)/1,e.x=s*Math.sin(a)/1,this.czech||(e.y*=-1,e.x*=-1),e},inverse:function(e){var t,n,r,i,o,a,s,l=e.x;e.x=e.y,e.y=l,this.czech||(e.y*=-1,e.x*=-1),o=Math.sqrt(e.x*e.x+e.y*e.y),i=Math.atan2(e.y,e.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(t)),e.x=this.long0-n/this.alfa,a=t,s=0;var u=0;do{e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-e.y)<1e-10&&(s=1),a=e.y,u+=1}while(0===s&&u<15);return u>=15?null:e},names:["Krovak","krovak"]},KL=function(e,t,n,r,i){return e*i-t*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)},ZL=function(e){return 1-.25*e*(1+e/16*(3+1.25*e))},$L=function(e){return.375*e*(1+.25*e*(1+.46875*e))},ej=function(e){return.05859375*e*e*(1+.75*e)},tj=function(e){return e*e*e*(35/3072)},nj=function(e,t,n){var r=t*n;return e/Math.sqrt(1-r*r)},rj=function(e){return Math.abs(e)<QM?e:e-LA(e)*Math.PI},ij=function(e,t,n,r,i){var o,a;o=e/t;for(var s=0;s<15;s++)if(o+=a=(e-(t*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(t-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN};var oj={init:function(){this.sphere||(this.e0=ZL(this.es),this.e1=$L(this.es),this.e2=ej(this.es),this.e3=tj(this.es),this.ml0=this.a*KL(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(e){var t,n,r=e.x,i=e.y;if(r=jA(r-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=nj(this.a,this.e,o),l=Math.tan(i)*Math.tan(i),u=r*Math.cos(i),c=u*u,f=this.es*a*a/(1-this.es);t=s*u*(1-c*l*(1/6-(8-l+8*f)*c/120)),n=this.a*KL(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*c*(.5+(5-l+6*f)*c/24)}return e.x=t+this.x0,e.y=n+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,n,r=e.x/this.a,i=e.y/this.a;if(this.sphere){var o=i+this.lat0;t=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var a=this.ml0/this.a+i,s=ij(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-QM)<=$M)return e.x=this.long0,e.y=QM,i<0&&(e.y*=-1),e;var l=nj(this.a,this.e,Math.sin(s)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(s),2),f=r*this.a/l,h=f*f;t=s-l*Math.tan(s)/u*f*f*(.5-(1+3*c)*f*f/24),n=f*(1-h*(c/3+(1+3*c)*c*h/15))/Math.cos(s)}return e.x=jA(n+this.long0),e.y=rj(t),e},names:["Cassini","Cassini_Soldner","cass"]},aj=function(e,t){var n;return e>1e-7?(1-e*e)*(t/(1-(n=e*t)*n)-.5/e*Math.log((1-n)/(1+n))):2*t};var sj=.3333333333333333,lj=.17222222222222222,uj=.10257936507936508,cj=.06388888888888888,fj=.0664021164021164,hj=.016415012942191543;var pj={init:function(){var e,t=Math.abs(this.lat0);if(Math.abs(t-QM)<$M?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<$M?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=aj(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(e){var t,n=[];return n[0]=e*sj,t=e*e,n[0]+=t*lj,n[1]=t*cj,t*=e,n[0]+=t*uj,n[1]+=t*fj,n[2]=t*hj,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=aj(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(e){var t,n,r,i,o,a,s,l,u,c,f=e.x,h=e.y;if(f=jA(f-this.long0),this.sphere){if(o=Math.sin(h),c=Math.cos(h),r=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+c*r:1+this.sinph0*o+this.cosph0*c*r)<=$M)return null;t=(n=Math.sqrt(2/n))*c*Math.sin(f),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(h+this.lat0)<$M)return null;n=nA-.5*h,t=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(f),n*=r}}else{switch(s=0,l=0,u=0,r=Math.cos(f),i=Math.sin(f),o=Math.sin(h),a=aj(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,l=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:u=1+this.sinb1*s+this.cosb1*l*r;break;case this.EQUIT:u=1+l*r;break;case this.N_POLE:u=QM+h,a=this.qp-a;break;case this.S_POLE:u=h-QM,a=this.qp+a}if(Math.abs(u)<$M)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),n=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*s-this.sinb1*l*r):(u=Math.sqrt(2/(1+l*r)))*s*this.ymf,t=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:a>=0?(t=(u=Math.sqrt(a))*i,n=r*(this.mode===this.S_POLE?u:-u)):t=n=0}}return e.x=this.a*t+this.x0,e.y=this.a*n+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,n,r,i,o,a,s,l,u,c,f=e.x/this.a,h=e.y/this.a;if(this.sphere){var p,y=0,d=0;if((n=.5*(p=Math.sqrt(f*f+h*h)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(n),y=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(p)<=$M?0:Math.asin(h*d/p),f*=d,h=y*p;break;case this.OBLIQ:n=Math.abs(p)<=$M?this.lat0:Math.asin(y*this.sinph0+h*d*this.cosph0/p),f*=d*this.cosph0,h=(y-Math.sin(n)*this.sinph0)*p;break;case this.N_POLE:h=-h,n=QM-n;break;case this.S_POLE:n-=QM}t=0!==h||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(f,h):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(f/=this.dd,h*=this.dd,(a=Math.sqrt(f*f+h*h))<$M)return e.x=this.long0,e.y=this.lat0,e;i=2*Math.asin(.5*a/this.rq),r=Math.cos(i),f*=i=Math.sin(i),this.mode===this.OBLIQ?(s=r*this.sinb1+h*i*this.cosb1/a,o=this.qp*s,h=a*this.cosb1*r-h*this.sinb1*i):(s=h*i/a,o=this.qp*s,h=a*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(h=-h),!(o=f*f+h*h))return e.x=this.long0,e.y=this.lat0,e;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}t=Math.atan2(f,h),l=Math.asin(s),u=this.apa,c=l+l,n=l+u[0]*Math.sin(c)+u[1]*Math.sin(c+c)+u[2]*Math.sin(c+c+c)}return e.x=jA(this.long0+t),e.y=n,e},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},yj=function(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)};var dj={init:function(){Math.abs(this.lat1+this.lat2)<$M||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=AA(this.e3,this.sin_po,this.cos_po),this.qs1=aj(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=AA(this.e3,this.sin_po,this.cos_po),this.qs2=aj(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=aj(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>$M?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(e){var t=e.x,n=e.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=aj(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*jA(t-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return e.x=a,e.y=s,e},inverse:function(e){var t,n,r,i,o,a;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),r=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),r=-1),i=0,0!==t&&(i=Math.atan2(r*e.x,r*e.y)),r=t*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),o=jA(i/this.ns0+this.long0),e.x=o,e.y=a,e},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(e,t){var n,r,i,o,a,s=yj(.5*t);if(e<$M)return s;for(var l=e*e,u=1;u<=25;u++)if(n=Math.sin(s),r=Math.cos(s),s+=a=.5*(o=1-(i=e*n)*i)*o/r*(t/(1-l)-n/o+.5/e*Math.log((1-i)/(1+i))),Math.abs(a)<=1e-7)return s;return null}};var mj={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(e){var t,n,r,i,o,a,s,l=e.x,u=e.y;return r=jA(l-this.long0),t=Math.sin(u),n=Math.cos(u),i=Math.cos(r),(o=this.sin_p14*t+this.cos_p14*n*i)>0||Math.abs(o)<=$M?(a=this.x0+1*this.a*n*Math.sin(r)/o,s=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*n*i)/o):(a=this.x0+this.infinity_dist*n*Math.sin(r),s=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*n*i)),e.x=a,e.y=s,e},inverse:function(e){var t,n,r,i,o,a;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(i=Math.atan2(t,this.rc),n=Math.sin(i),r=Math.cos(i),a=yj(r*this.sin_p14+e.y*n*this.cos_p14/t),o=Math.atan2(e.x*n,t*this.cos_p14*r-e.y*this.sin_p14*n),o=jA(this.long0+o)):(a=this.phic0,o=0),e.x=o,e.y=a,e},names:["gnom"]},vj=function(e,t){var n=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-n)<1e-6)return t<0?-1*QM:QM;for(var r,i,o,a,s=Math.asin(.5*t),l=0;l<30;l++)if(i=Math.sin(s),o=Math.cos(s),a=e*i,s+=r=Math.pow(1-a*a,2)/(2*o)*(t/(1-e*e)-i/(1-a*a)+.5/e*Math.log((1-a)/(1+a))),Math.abs(r)<=1e-10)return s;return NaN};var gj={init:function(){this.sphere||(this.k0=AA(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(e){var t,n,r=e.x,i=e.y,o=jA(r-this.long0);if(this.sphere)t=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=aj(this.e,Math.sin(i));t=this.x0+this.a*this.k0*o,n=this.y0+this.a*a*.5/this.k0}return e.x=t,e.y=n,e},inverse:function(e){var t,n;return e.x-=this.x0,e.y-=this.y0,this.sphere?(t=jA(this.long0+e.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(n=vj(this.e,2*e.y*this.k0/this.a),t=jA(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=n,e},names:["cea"]};var bj={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(e){var t=e.x,n=e.y,r=jA(t-this.long0),i=rj(n-this.lat0);return e.x=this.x0+this.a*r*this.rc,e.y=this.y0+this.a*i,e},inverse:function(e){var t=e.x,n=e.y;return e.x=jA(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=rj(this.lat0+(n-this.y0)/this.a),e},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Sj=20;var _j={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ZL(this.es),this.e1=$L(this.es),this.e2=ej(this.es),this.e3=tj(this.es),this.ml0=this.a*KL(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(e){var t,n,r,i=e.x,o=e.y,a=jA(i-this.long0);if(r=a*Math.sin(o),this.sphere)Math.abs(o)<=$M?(t=this.a*a,n=-1*this.a*this.lat0):(t=this.a*Math.sin(r)/Math.tan(o),n=this.a*(rj(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=$M)t=this.a*a,n=-1*this.ml0;else{var s=nj(this.a,this.e,Math.sin(o))/Math.tan(o);t=s*Math.sin(r),n=this.a*KL(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(r))}return e.x=t+this.x0,e.y=n+this.y0,e},inverse:function(e){var t,n,r,i,o,a,s,l,u;if(r=e.x-this.x0,i=e.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=$M)t=jA(r/this.a+this.long0),n=0;else{var c;for(a=this.lat0+i/this.a,s=r*r/this.a/this.a+a*a,l=a,o=Sj;o;--o)if(l+=u=-1*(a*(l*(c=Math.tan(l))+1)-l-.5*(l*l+s)*c)/((l-a)/c-1),Math.abs(u)<=$M){n=l;break}t=jA(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=$M)n=0,t=jA(this.long0+r/this.a);else{var f,h,p,y,d;for(a=(this.ml0+i)/this.a,s=r*r/this.a/this.a+a*a,l=a,o=Sj;o;--o)if(d=this.e*Math.sin(l),f=Math.sqrt(1-d*d)*Math.tan(l),h=this.a*KL(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=u=(a*(f*(y=h/this.a)+1)-y-.5*f*(y*y+s))/(this.es*Math.sin(2*l)*(y*y+s-2*a*y)/(4*f)+(a-y)*(f*p-2/Math.sin(2*l))-p),Math.abs(u)<=$M){n=l;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),t=jA(this.long0+Math.asin(r*f/this.a)/Math.sin(n))}return e.x=t,e.y=n,e},names:["Polyconic","poly"]};var wj={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(e){var t,n=e.x,r=e.y-this.lat0,i=n-this.long0,o=r/YM*1e-5,a=i,s=1,l=0;for(t=1;t<=10;t++)s*=o,l+=this.A[t]*s;var u,c=l,f=a,h=1,p=0,y=0,d=0;for(t=1;t<=6;t++)u=p*c+h*f,h=h*c-p*f,p=u,y=y+this.B_re[t]*h-this.B_im[t]*p,d=d+this.B_im[t]*h+this.B_re[t]*p;return e.x=d*this.a+this.x0,e.y=y*this.a+this.y0,e},inverse:function(e){var t,n,r=e.x,i=e.y,o=r-this.x0,a=(i-this.y0)/this.a,s=o/this.a,l=1,u=0,c=0,f=0;for(t=1;t<=6;t++)n=u*a+l*s,l=l*a-u*s,u=n,c=c+this.C_re[t]*l-this.C_im[t]*u,f=f+this.C_im[t]*l+this.C_re[t]*u;for(var h=0;h<this.iterations;h++){var p,y=c,d=f,m=a,v=s;for(t=2;t<=6;t++)p=d*c+y*f,y=y*c-d*f,d=p,m+=(t-1)*(this.B_re[t]*y-this.B_im[t]*d),v+=(t-1)*(this.B_im[t]*y+this.B_re[t]*d);y=1,d=0;var g=this.B_re[1],b=this.B_im[1];for(t=2;t<=6;t++)p=d*c+y*f,y=y*c-d*f,d=p,g+=t*(this.B_re[t]*y-this.B_im[t]*d),b+=t*(this.B_im[t]*y+this.B_re[t]*d);var S=g*g+b*b;c=(m*g+v*b)/S,f=(v*g-m*b)/S}var _=c,w=f,O=1,x=0;for(t=1;t<=9;t++)O*=_,x+=this.D[t]*O;var C=this.lat0+x*YM*1e5,P=this.long0+w;return e.x=P,e.y=C,e},names:["New_Zealand_Map_Grid","nzmg"]};var Oj={init:function(){},forward:function(e){var t=e.x,n=e.y,r=jA(t-this.long0),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return e.x=i,e.y=o,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=jA(this.long0+e.x/this.a),n=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=n,e},names:["Miller_Cylindrical","mill"]},xj=20;var Cj={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=kL(this.es)},forward:function(e){var t,n,r=e.x,i=e.y;if(r=jA(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=xj;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<$M)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;t=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);n=this.a*ML(i,l,u,this.en),t=this.a*r*u/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=n,e},inverse:function(e){var t,n,r,i;return e.x-=this.x0,r=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,r/=this.C_x*(this.m+Math.cos(t)),this.m?t=yj((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=yj(Math.sin(t)/this.n)),r=jA(r+this.long0),t=rj(t)):(t=AL(e.y/this.a,this.es,this.en),(i=Math.abs(t))<QM?(i=Math.sin(t),n=this.long0+e.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(t)),r=jA(n)):i-$M<QM&&(r=this.long0)),e.x=r,e.y=t,e},names:["Sinusoidal","sinu"]};var Pj={init:function(){},forward:function(e){for(var t=e.x,n=e.y,r=jA(t-this.long0),i=n,o=Math.PI*Math.sin(n);;){var a=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=a,Math.abs(a)<$M)break}i/=2,Math.PI/2-Math.abs(n)<$M&&(r=0);var s=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return e.x=s,e.y=l,e},inverse:function(e){var t,n;e.x-=this.x0,e.y-=this.y0,n=e.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),t=Math.asin(n);var r=jA(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*t+Math.sin(2*t))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return e.x=r,e.y=i,e},names:["Mollweide","moll"]};var Tj={init:function(){Math.abs(this.lat1+this.lat2)<$M||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ZL(this.es),this.e1=$L(this.es),this.e2=ej(this.es),this.e3=tj(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=AA(this.e,this.sinphi,this.cosphi),this.ml1=KL(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<$M?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=AA(this.e,this.sinphi,this.cosphi),this.ml2=KL(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=KL(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(e){var t,n=e.x,r=e.y;if(this.sphere)t=this.a*(this.g-r);else{var i=KL(this.e0,this.e1,this.e2,this.e3,r);t=this.a*(this.g-i)}var o=this.ns*jA(n-this.long0),a=this.x0+t*Math.sin(o),s=this.y0+this.rh-t*Math.cos(o);return e.x=a,e.y=s,e},inverse:function(e){var t,n,r,i;e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns>=0?(n=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(n=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var o=0;if(0!==n&&(o=Math.atan2(t*e.x,t*e.y)),this.sphere)return i=jA(this.long0+o/this.ns),r=rj(this.g-n/this.a),e.x=i,e.y=r,e;var a=this.g-n/this.a;return r=ij(a,this.e0,this.e1,this.e2,this.e3),i=jA(this.long0+o/this.ns),e.x=i,e.y=r,e},names:["Equidistant_Conic","eqdc"]};var Ej={init:function(){this.R=this.a},forward:function(e){var t,n,r=e.x,i=e.y,o=jA(r-this.long0);Math.abs(i)<=$M&&(t=this.x0+this.R*o,n=this.y0);var a=yj(2*Math.abs(i/Math.PI));(Math.abs(o)<=$M||Math.abs(Math.abs(i)-QM)<=$M)&&(t=this.x0,n=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),l=s*s,u=Math.sin(a),c=Math.cos(a),f=c/(u+c-1),h=f*f,p=f*(2/u-1),y=p*p,d=Math.PI*this.R*(s*(f-y)+Math.sqrt(l*(f-y)*(f-y)-(y+l)*(h-y)))/(y+l);o<0&&(d=-d),t=this.x0+d;var m=l+f;return d=Math.PI*this.R*(p*m-s*Math.sqrt((y+l)*(l+1)-m*m))/(y+l),n=i>=0?this.y0+d:this.y0-d,e.x=t,e.y=n,e},inverse:function(e){var t,n,r,i,o,a,s,l,u,c,f,h;return e.x-=this.x0,e.y-=this.y0,f=Math.PI*this.R,o=(r=e.x/f)*r+(i=e.y/f)*i,f=3*(i*i/(l=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+r*r)*s*s/l/l/l-9*a*s/l/l)/27)/(u=(a-s*s/3/l)/l)/(c=2*Math.sqrt(-u/3)),Math.abs(f)>1&&(f=f>=0?1:-1),h=Math.acos(f)/3,n=e.y>=0?(-c*Math.cos(h+Math.PI/3)-s/3/l)*Math.PI:-(-c*Math.cos(h+Math.PI/3)-s/3/l)*Math.PI,t=Math.abs(r)<$M?this.long0:jA(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r),e.x=t,e.y=n,e},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var kj={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(e){var t,n,r,i,o,a,s,l,u,c,f,h,p,y,d,m,v,g,b,S,_,w,O=e.x,x=e.y,C=Math.sin(e.y),P=Math.cos(e.y),T=jA(O-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=$M?(e.x=this.x0+this.a*(QM-x)*Math.sin(T),e.y=this.y0-this.a*(QM-x)*Math.cos(T),e):Math.abs(this.sin_p12+1)<=$M?(e.x=this.x0+this.a*(QM+x)*Math.sin(T),e.y=this.y0+this.a*(QM+x)*Math.cos(T),e):(g=this.sin_p12*C+this.cos_p12*P*Math.cos(T),v=(m=Math.acos(g))?m/Math.sin(m):1,e.x=this.x0+this.a*v*P*Math.sin(T),e.y=this.y0+this.a*v*(this.cos_p12*C-this.sin_p12*P*Math.cos(T)),e):(t=ZL(this.es),n=$L(this.es),r=ej(this.es),i=tj(this.es),Math.abs(this.sin_p12-1)<=$M?(o=this.a*KL(t,n,r,i,QM),a=this.a*KL(t,n,r,i,x),e.x=this.x0+(o-a)*Math.sin(T),e.y=this.y0-(o-a)*Math.cos(T),e):Math.abs(this.sin_p12+1)<=$M?(o=this.a*KL(t,n,r,i,QM),a=this.a*KL(t,n,r,i,x),e.x=this.x0+(o+a)*Math.sin(T),e.y=this.y0+(o+a)*Math.cos(T),e):(s=C/P,l=nj(this.a,this.e,this.sin_p12),u=nj(this.a,this.e,C),c=Math.atan((1-this.es)*s+this.es*l*this.sin_p12/(u*P)),b=0===(f=Math.atan2(Math.sin(T),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(T)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(f)-Math.PI)<=$M?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(T)*Math.cos(c)/Math.sin(f)),h=this.e*this.sin_p12/Math.sqrt(1-this.es),m=l*b*(1-(S=b*b)*(d=(p=this.e*this.cos_p12*Math.cos(f)/Math.sqrt(1-this.es))*p)*(1-d)/6+(_=S*b)/8*(y=h*p)*(1-2*d)+(w=_*b)/120*(d*(4-7*d)-3*h*h*(1-7*d))-w*b/48*y),e.x=this.x0+m*Math.sin(f),e.y=this.y0+m*Math.cos(f),e))},inverse:function(e){var t,n,r,i,o,a,s,l,u,c,f,h,p,y,d,m,v,g,b,S,_,w,O;if(e.x-=this.x0,e.y-=this.y0,this.sphere){if((t=Math.sqrt(e.x*e.x+e.y*e.y))>2*QM*this.a)return;return n=t/this.a,r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(t)<=$M?a=this.lat0:(a=yj(i*this.sin_p12+e.y*r*this.cos_p12/t),s=Math.abs(this.lat0)-QM,o=Math.abs(s)<=$M?this.lat0>=0?jA(this.long0+Math.atan2(e.x,-e.y)):jA(this.long0-Math.atan2(-e.x,e.y)):jA(this.long0+Math.atan2(e.x*r,t*this.cos_p12*i-e.y*this.sin_p12*r))),e.x=o,e.y=a,e}return l=ZL(this.es),u=$L(this.es),c=ej(this.es),f=tj(this.es),Math.abs(this.sin_p12-1)<=$M?(h=this.a*KL(l,u,c,f,QM),t=Math.sqrt(e.x*e.x+e.y*e.y),a=ij((h-t)/this.a,l,u,c,f),o=jA(this.long0+Math.atan2(e.x,-1*e.y)),e.x=o,e.y=a,e):Math.abs(this.sin_p12+1)<=$M?(h=this.a*KL(l,u,c,f,QM),t=Math.sqrt(e.x*e.x+e.y*e.y),a=ij((t-h)/this.a,l,u,c,f),o=jA(this.long0+Math.atan2(e.x,e.y)),e.x=o,e.y=a,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),d=Math.atan2(e.x,e.y),p=nj(this.a,this.e,this.sin_p12),m=Math.cos(d),g=-(v=this.e*this.cos_p12*m)*v/(1-this.es),b=3*this.es*(1-g)*this.sin_p12*this.cos_p12*m/(1-this.es),w=1-g*(_=(S=t/p)-g*(1+g)*Math.pow(S,3)/6-b*(1+3*g)*Math.pow(S,4)/24)*_/2-S*_*_*_/6,y=Math.asin(this.sin_p12*Math.cos(_)+this.cos_p12*Math.sin(_)*m),o=jA(this.long0+Math.asin(Math.sin(d)*Math.sin(_)/Math.cos(y))),O=Math.sin(y),a=Math.atan2((O-this.es*w*this.sin_p12)*Math.tan(y),O*(1-this.es)),e.x=o,e.y=a,e)},names:["Azimuthal_Equidistant","aeqd"]};var Mj={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(e){var t,n,r,i,o,a,s,l=e.x,u=e.y;return r=jA(l-this.long0),t=Math.sin(u),n=Math.cos(u),i=Math.cos(r),((o=this.sin_p14*t+this.cos_p14*n*i)>0||Math.abs(o)<=$M)&&(a=1*this.a*n*Math.sin(r),s=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*n*i)),e.x=a,e.y=s,e},inverse:function(e){var t,n,r,i,o,a,s;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),n=yj(t/this.a),r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(t)<=$M?(s=this.lat0,e.x=a,e.y=s,e):(s=yj(i*this.sin_p14+e.y*r*this.cos_p14/t),o=Math.abs(this.lat0)-QM,Math.abs(o)<=$M?(a=this.lat0>=0?jA(this.long0+Math.atan2(e.x,-e.y)):jA(this.long0-Math.atan2(-e.x,e.y)),e.x=a,e.y=s,e):(a=jA(this.long0+Math.atan2(e.x*r,t*this.cos_p14*i-e.y*this.sin_p14*r)),e.x=a,e.y=s,e))},names:["ortho"]},Aj={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Lj={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function jj(e,t,n,r){var i;return e<$M?(r.value=Lj.AREA_0,i=0):(i=Math.atan2(t,n),Math.abs(i)<=nA?r.value=Lj.AREA_0:i>nA&&i<=QM+nA?(r.value=Lj.AREA_1,i-=QM):i>QM+nA||i<=-(QM+nA)?(r.value=Lj.AREA_2,i=i>=0?i-iA:i+iA):(r.value=Lj.AREA_3,i+=QM)),i}function Rj(e,t){var n=e+t;return n<-iA?n+=rA:n>+iA&&(n-=rA),n}var Nj={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=QM-nA/2?this.face=Aj.TOP:this.lat0<=-(QM-nA/2)?this.face=Aj.BOTTOM:Math.abs(this.long0)<=nA?this.face=Aj.FRONT:Math.abs(this.long0)<=QM+nA?this.face=this.long0>0?Aj.RIGHT:Aj.LEFT:this.face=Aj.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(e){var t,n,r,i,o,a,s={x:0,y:0},l={value:0};if(e.x-=this.long0,t=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(e.y)):e.y,n=e.x,this.face===Aj.TOP)i=QM-t,n>=nA&&n<=QM+nA?(l.value=Lj.AREA_0,r=n-QM):n>QM+nA||n<=-(QM+nA)?(l.value=Lj.AREA_1,r=n>0?n-iA:n+iA):n>-(QM+nA)&&n<=-nA?(l.value=Lj.AREA_2,r=n+QM):(l.value=Lj.AREA_3,r=n);else if(this.face===Aj.BOTTOM)i=QM+t,n>=nA&&n<=QM+nA?(l.value=Lj.AREA_0,r=-n+QM):n<nA&&n>=-nA?(l.value=Lj.AREA_1,r=-n):n<-nA&&n>=-(QM+nA)?(l.value=Lj.AREA_2,r=-n-QM):(l.value=Lj.AREA_3,r=n>0?-n+iA:-n-iA);else{var u,c,f,h,p,y;this.face===Aj.RIGHT?n=Rj(n,+QM):this.face===Aj.BACK?n=Rj(n,+iA):this.face===Aj.LEFT&&(n=Rj(n,-QM)),h=Math.sin(t),p=Math.cos(t),y=Math.sin(n),u=p*Math.cos(n),c=p*y,f=h,this.face===Aj.FRONT?r=jj(i=Math.acos(u),f,c,l):this.face===Aj.RIGHT?r=jj(i=Math.acos(c),f,-u,l):this.face===Aj.BACK?r=jj(i=Math.acos(-u),f,-c,l):this.face===Aj.LEFT?r=jj(i=Math.acos(-c),f,u,l):(i=r=0,l.value=Lj.AREA_0)}return a=Math.atan(12/iA*(r+Math.acos(Math.sin(r)*Math.cos(nA))-QM)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(r))))),l.value===Lj.AREA_1?a+=QM:l.value===Lj.AREA_2?a+=iA:l.value===Lj.AREA_3&&(a+=1.5*iA),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,e.x=s.x,e.y=s.y,e},inverse:function(e){var t,n,r,i,o,a,s,l,u,c,f,h,p={lam:0,phi:0},y={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,n=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),t=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?y.value=Lj.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(y.value=Lj.AREA_1,t-=QM):e.x<0&&-e.x>=Math.abs(e.y)?(y.value=Lj.AREA_2,t=t<0?t+iA:t-iA):(y.value=Lj.AREA_3,t+=QM),u=iA/12*Math.tan(t),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(r=Math.cos(t))*r*(i=Math.tan(n))*i*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===Aj.TOP)l=Math.acos(s),p.phi=QM-l,y.value===Lj.AREA_0?p.lam=a+QM:y.value===Lj.AREA_1?p.lam=a<0?a+iA:a-iA:y.value===Lj.AREA_2?p.lam=a-QM:p.lam=a;else if(this.face===Aj.BOTTOM)l=Math.acos(s),p.phi=l-QM,y.value===Lj.AREA_0?p.lam=-a+QM:y.value===Lj.AREA_1?p.lam=-a:y.value===Lj.AREA_2?p.lam=-a-QM:p.lam=a<0?-a-iA:-a+iA;else{var d,m,v;u=(d=s)*d,m=(u+=(v=u>=1?0:Math.sqrt(1-u)*Math.sin(a))*v)>=1?0:Math.sqrt(1-u),y.value===Lj.AREA_1?(u=m,m=-v,v=u):y.value===Lj.AREA_2?(m=-m,v=-v):y.value===Lj.AREA_3&&(u=m,m=v,v=-u),this.face===Aj.RIGHT?(u=d,d=-m,m=u):this.face===Aj.BACK?(d=-d,m=-m):this.face===Aj.LEFT&&(u=d,d=m,m=-u),p.phi=Math.acos(-v)-QM,p.lam=Math.atan2(m,d),this.face===Aj.RIGHT?p.lam=Rj(p.lam,-QM):this.face===Aj.BACK?p.lam=Rj(p.lam,-iA):this.face===Aj.LEFT&&(p.lam=Rj(p.lam,+QM))}return 0!==this.es&&(c=p.phi<0?1:0,f=Math.tan(p.phi),h=this.b/Math.sqrt(f*f+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-h*h)/(this.one_minus_f*h)),c&&(p.phi=-p.phi)),p.lam+=this.long0,e.x=p.lam,e.y=p.phi,e},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Ij=[[1,2.2199e-17,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Dj=[[-5.20417e-18,.0124,1.21431e-18,-8.45284e-11],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Fj=.8487,Bj=1.3523,Uj=tA/5,Gj=1/Uj,zj=18,Vj=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},Jj=function(e,t){return e[1]+t*(2*e[2]+3*t*e[3])};var Hj={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(e){var t=jA(e.x-this.long0),n=Math.abs(e.y),r=Math.floor(n*Uj);r<0?r=0:r>=zj&&(r=zj-1),n=tA*(n-Gj*r);var i={x:Vj(Ij[r],n)*t,y:Vj(Dj[r],n)};return e.y<0&&(i.y=-i.y),i.x=i.x*this.a*Fj+this.x0,i.y=i.y*this.a*Bj+this.y0,i},inverse:function(e){var t={x:(e.x-this.x0)/(this.a*Fj),y:Math.abs(e.y-this.y0)/(this.a*Bj)};if(t.y>=1)t.x/=Ij[zj][0],t.y=e.y<0?-QM:QM;else{var n=Math.floor(t.y*zj);for(n<0?n=0:n>=zj&&(n=zj-1);;)if(Dj[n][0]>t.y)--n;else{if(!(Dj[n+1][0]<=t.y))break;++n}var r=Dj[n],i=5*(t.y-r[0])/(Dj[n+1][0]-r[0]);i=function(e,t,n,r){for(var i=t;r;--r){var o=e(i);if(i-=o,Math.abs(o)<n)break}return i}(function(e){return(Vj(r,e)-t.y)/Jj(r,e)},i,$M,100),t.x/=Vj(Ij[n],i),t.y=(5*n+i)*eA,e.y<0&&(t.y=-t.y)}return t.x=jA(t.x+this.long0),t},names:["Robinson","robin"]};var qj,Wj={init:function(){this.name="geocent"},forward:function(e){return QA(e,this.es,this.a)},inverse:function(e){return XA(e,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};sL.defaultDatum="WGS84",sL.Proj=YA,sL.WGS84=new sL.Proj("WGS84"),sL.Point=TL,sL.toPoint=eL,sL.defs=PA,sL.transform=rL,sL.mgrs=mL,sL.version="__VERSION__",(qj=sL).Proj.projections.add(LL),qj.Proj.projections.add(BL),qj.Proj.projections.add(GL),qj.Proj.projections.add(HL),qj.Proj.projections.add(qL),qj.Proj.projections.add(WL),qj.Proj.projections.add(YL),qj.Proj.projections.add(QL),qj.Proj.projections.add(XL),qj.Proj.projections.add(oj),qj.Proj.projections.add(pj),qj.Proj.projections.add(dj),qj.Proj.projections.add(mj),qj.Proj.projections.add(gj),qj.Proj.projections.add(bj),qj.Proj.projections.add(_j),qj.Proj.projections.add(wj),qj.Proj.projections.add(Oj),qj.Proj.projections.add(Cj),qj.Proj.projections.add(Pj),qj.Proj.projections.add(Tj),qj.Proj.projections.add(Ej),qj.Proj.projections.add(kj),qj.Proj.projections.add(Mj),qj.Proj.projections.add(Nj),qj.Proj.projections.add(Hj),qj.Proj.projections.add(Wj);var Yj=sL;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/window.proj4=Yj,window.Proj4js=Yj,BM.a.Proj={},BM.a.Proj._isProj4Obj=function(e){return void 0!==e.inverse&&void 0!==e.forward},BM.a.Proj.Projection=BM.a.Class.extend({initialize:function(e,t,n,r){var i=BM.a.Proj._isProj4Obj(e);this._proj=i?e:this._projFromCodeDef(e,t);var o=n;BM.a.Util.isArray(n)&&(o=BM.a.bounds(n)),this.bounds=i?t:o,this.wrapLng=r},project:function(e){var t=this._proj.forward([e.lng,e.lat]);return new BM.a.Point(t[0],t[1])},unproject:function(e,t){this.bounds&&!this.wrapLng&&(e.x=e.x<this.bounds.min.x?this.bounds.min.x:e.x>this.bounds.max.x?this.bounds.max.x:e.x,e.y=e.y<this.bounds.min.y?this.bounds.min.y:e.y>this.bounds.max.y?this.bounds.max.y:e.y);var n=this._proj.inverse([e.x,e.y]);return new BM.a.LatLng(n[1],n[0],t)},_projFromCodeDef:function(e,t){if(t)Yj.defs(e,t);else if(void 0===Yj.defs[e]){var n=e.split(":");if(n.length>3&&(e=n[n.length-3]+":"+n[n.length-1]),void 0===Yj.defs[e])throw"No projection definition for code "+e}return Yj(e)},getUnits:function(){return this._proj.oProj.units||"degrees"}});var Qj=BM.a.Class.extend({includes:BM.a.CRS,options:{transformation:new BM.a.Transformation(1,0,-1,0)},initialize:function(e,t){var n,r,i;if(BM.a.Proj._isProj4Obj(e)?(n=(r=e).srsCode,t=t||{},this.projection=new BM.a.Proj.Projection(r,t.bounds,t.wrapLng)):(n=e,i=(t=t||{}).def||"",this.projection=new BM.a.Proj.Projection(n,i,t.bounds,t.wrapLng)),BM.a.Util.setOptions(this,t),this.options.wrapLng&&(this.wrapLng=this.options.wrapLng),this.code=n,this.transformation=this.options.transformation,this.options.dpi=this.options.dpi||96,this.options.bounds&&(this.options.bounds=BM.a.bounds(this.options.bounds)),!this.options.origin&&this.options.bounds&&(this.options.origin=[this.options.bounds.min.x,this.options.bounds.max.y]),this.options.origin&&(this.options.origin instanceof BM.a.Point&&(this.options.origin=[this.options.origin.x,this.options.origin.y]),this.transformation=new BM.a.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales&&this.options.scales.length>0)this.scales=this.options.scales,this._scales=this._toProj4Scales(this.options.scales,this.options.dpi);else if(this.options.scaleDenominators&&this.options.scaleDenominators.length>0){this.scales=[];for(var o=0;o<this.options.scaleDenominators.length;o++)this.scales[o]=1/this.options.scaleDenominators[o];this._scales=this._toProj4Scales(this.scales,this.options.dpi)}else if(this.options.resolutions&&this.options.resolutions.length>0){this._scales=[];for(var a=this.options.resolutions.length-1;a>=0;a--)this.options.resolutions[a]&&(this._scales[a]=1/this.options.resolutions[a])}else this.options.bounds&&(this._scales=this._getDefaultProj4ScalesByBounds(this.options.bounds));this._rectify(),this.infinite=!this.options.bounds},_rectify:function(){if(this._scales&&(this.resolutions||(this.resolutions=[],this.resolutions=this._proj4ScalesToResolutions(this._scales)),!this.scales)){this.scales=[];for(var e=0;e<this.resolutions.length;e++){var t=this.resolutions[e]*this.options.dpi*(1/.0254)*this._getMeterPerMapUnit(this.projection.getUnits());this.scales[e]=1/t}}},scale:function(e){var t,n=Math.floor(e);return e===n?this._scales[e]:(t=this._scales[n])+(this._scales[n+1]-t)*(e-n)},zoom:function(e){var t,n,r=this._closestElement(this._scales,e),i=this._scales.indexOf(r);return r?e===r?i:(n=i+1,void 0===(t=this._scales[n])?i:(e-r)/(t-r)+i):0},distance:BM.a.CRS.Earth.distance,R:BM.a.CRS.Earth.R,_closestElement:function(e,t){for(var n,r=e.length;r--;)e[r]<=t&&(void 0===n||n<e[r])&&(n=e[r]);return n},_proj4ScalesToResolutions:function(e){var t=[];if(!e)return t;for(var n=0;n<e.length;n++)t[n]=1/e[n];return t},_toProj4Scales:function(e,t){var n=[];if(!e)return n;for(var r=0;r<e.length;r++){var i=this.projection?this._getMeterPerMapUnit(this.projection.getUnits()):1;n[r]=1/(.0254/((t||96)*e[r])/i)}return n},_getMeterPerMapUnit:function(e){var t=1;return"meter"===e?t=1:"degrees"===e?t=2*Math.PI*6378137/360:"kilometer"===e?t=.001:"inch"===e?t=1/.025399999918:"feet"===e&&(t=.3048),t},_getDefaultProj4ScalesByBounds:function(e){if(!e)return[];for(var t=e.getSize(),n=Math.max(t.x,t.y)/256,r=[],i=0;i<23;i++)r[i]=Math.pow(2,i)/n;return r}}),Xj=function(e,t){return new Qj(e,t)};BM.a.Proj.CRS=Xj;for(
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Kj,Zj=BM.a.CRS.Baidu=BM.a.extend({},BM.a.CRS.EPSG3857,{code:"Baidu",scale:function(e){return 6378137*Math.PI*2/Math.pow(2,18-e)},transformation:(Kj=.5/(6378137*Math.PI),new BM.a.Transformation(Kj,0,-Kj,0))}),$j=[],eR=1;eR<19;eR++)$j.push(1.40625/Math.pow(2,eR));for(var tR=BM.a.CRS.TianDiTu_WGS84=BM.a.Proj.CRS("EPSG:4326",{origin:[-180,90],resolutions:$j,bounds:BM.a.bounds([-180,-90],[180,90]),wrapLng:[-180,180]}),nR=2*Math.PI*6378137,rR=nR/2,iR=[],oR=1;oR<19;oR++)iR.push(nR/256/Math.pow(2,oR));var aR=BM.a.CRS.TianDiTu_Mercator=BM.a.Proj.CRS("EPSG:3857",{origin:[-rR,rR],resolutions:iR,bounds:BM.a.bounds([-rR,-rR],[rR,rR]),wrapLng:[-180,180]});BM.a.CRS.BaiduCRS=Zj,BM.a.CRS.TianDiTu_WGS84CRS=tR,BM.a.CRS.TianDiTu_MercatorCRS=aR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var sR={Prefix:"<a href='https://leafletjs.com' title='A JS library for interactive maps'>Leaflet</a>\n                with <span>© <a href='https://iclient.supermap.io' title='SuperMap iClient' target='_blank'>SuperMap iClient</a></span>",Common:{attribution:"Map Data <span>© <a href='http://support.supermap.com.cn/product/iServer.aspx' title='SuperMap iServer' target='_blank'>SuperMap iServer</a></span>"},Online:{attribution:"Map Data <span>© <a href='https://www.supermapol.com' title='SuperMap Online' target='_blank'>SuperMap Online</a></span>"},ECharts:{attribution:"© 2018 百度 ECharts"},MapV:{attribution:"© 2018 百度 MapV "},Turf:{attribution:"<span>© <a href='https://turfjs.org/' title='turfjs' target='_blank'>turfjs</a></span>"},Baidu:{attribution:"Map Data © 2018 Baidu - GS(2016)2089号 - Data © 长地万方"},Cloud:{attribution:"Map Data ©2014 SuperMap - GS(2014)6070号-data©Navinfo"},Tianditu:{attribution:"Map Data <a href='https://www.tianditu.gov.cn' target='_blank'><img style='background-color:transparent;bottom:2px;opacity:1;' src='https://api.tianditu.gov.cn/img/map/logo.png' width='53px' height='22px' opacity='0'></a>"}};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
BM.a.supermap=BM.a.supermap||{},BM.a.supermap.control=BM.a.supermap.control||{},BM.a.supermap.components=BM.a.supermap.components||{},BM.a.Control.Attribution.include({options:{position:"bottomright",prefix:sR.Prefix}}),BM.a.Map.include({latLngToAccurateContainerPoint:function(e){var t=this.project(BM.a.latLng(e))._subtract(this.getPixelOrigin());return BM.a.point(t).add(this._getMapPanePos())}}),[BM.a.Polyline,BM.a.Polygon,BM.a.Marker,BM.a.CircleMarker,BM.a.Circle,BM.a.LayerGroup].map(function(e){return e.defaultFunction=e.prototype.toGeoJSON,e.include({toGeoJSON:function(t){return e.defaultFunction.call(this,t||10)}}),e});
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var lR=BM.a.Evented.extend({options:{url:null,proxy:null,serverType:null,withCredentials:!1,crossOrigin:null},initialize:function(e,t){e&&(e=e.indexOf("/")!==e.length-1?e:e.substr(0,e.length-1)),this.url=e,BM.a.setOptions(this,t),this.fire("initialized",this)},destroy:function(){this.fire("destroy",this)}});BM.a.supermap.ServiceBase=lR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var uR=lR.extend({options:{projection:null},initialize:function(e,t){t=t||{},BM.a.setOptions(this,t),t.projection&&(this.options.projection=t.projection),lR.prototype.initialize.call(this,e,t)},getMapInfo:function(e){var t=this;new qm(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,serverType:t.options.serverType,eventListeners:{scope:t,processCompleted:e,processFailed:e},projection:t.options.projection}).processAsync()},getTilesets:function(e){var t=this;new F_(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,serverType:t.options.serverType,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).processAsync()}}),cR=function(e,t){return new uR(e,t)};BM.a.supermap.mapService=cR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fR=BM.a.Control.extend({options:{layer:null,position:"topleft",title:"switch tile version",tooltip:"top",collapsed:!0,nextText:"+",lastText:"-",ico:"V",orientation:"horizontal",switch:!0},onAdd:function(){"vertical"!==this.options.orientation&&(this.options.orientation="horizontal");var e=this._initLayout();return this.options.layer&&this.setLayer(this.options.layer),e},setContent:function(e){var t=BM.a.Util.extend({},e);this.setVersionName(t.desc).setToolTip(t.desc)},setVersionName:function(e){var t=e;return e||(t=this.getValue()),this._sliderValue.innerHTML=t,this},setToolTip:function(e){return this.tooltip.innerHTML=e,this},updateLength:function(e){e>0&&(this.length=e,this.max=this.length-1,this.slider.setAttribute("max",this.max))},setLayer:function(e){e&&(this.options.layer=e);var t=this,n=t.options.layer;n.on("tilesetsinfoloaded",function(e){var n=e&&e.tileVersions;t.update(n)}),n.on("tileversionschanged",function(e){var n=e&&e.tileVersion;t.setContent(n)}),t.getTileSetsInfo()},update:function(e){this.tileVersions=e,this.updateLength(this.tileVersions.length)},getTileSetsInfo:function(){var e=this;e.options.layer&&new uR(e.options.layer._url).getTilesets(function(t){e.options.layer.setTileSetsInfo(t.result)})},removeLayer:function(){this.options.layer=null},nextTilesVersion:function(){return this.firstLoad?(this.options.layer.nextTilesVersion(),this.firstLoad=!1,this):parseInt(this.slider.value)>this.max-1?this:(this.slider.value=parseInt(this.slider.value)+1,this.options.layer.nextTilesVersion(),this)},lastTilesVersion:function(){return parseInt(this.slider.value)<this.min+1?this:(this.slider.value=parseInt(this.slider.value)-1,this.options.layer.lastTilesVersion(),this)},tilesVersion:function(e){for(var t=this.options.layer,n=this.tileVersions,r=n.length,i=0;i<r;i++)if(n[i].name==e){t.updateCurrentTileSetsIndex(i),t.changeTilesVersion();break}},getValue:function(){return this.slider.value},getVersion:function(){var e=this.tileVersions[this.getValue()];return e&&e.name},_initLayout:function(){var e="leaflet-control-ctv";this._container=BM.a.DomUtil.create("div",e+" "+e+"-"+this.options.orientation),this._sliderBtn=BM.a.DomUtil.create("a",e+"-toggle",this._container),this._sliderBtn.setAttribute("title",this.options.title),this._sliderBtn.innerHTML=this.options.ico,this._sliderValue=BM.a.DomUtil.create("p",e+"-value",this._container),this._sliderValue.innerHTML=this.options.ico;return this._sliderContent=BM.a.DomUtil.create("div","leaflet-ctv-slider-main  tooltip",this._container),this.tooltip=BM.a.DomUtil.create("span","tooltip-text  tooltip-"+this.options.tooltip,this._sliderContent),this.tooltip.innerHTML=this.options.ico,this.options.switch&&(this._next=BM.a.DomUtil.create("a","leaflet-ctv-slider-incdec leaflet-ctv-slider-next",this._sliderContent),this._next.innerHTML=this.options.nextText,BM.a.DomEvent.on(this._next,"click",this.nextTilesVersion,this),BM.a.DomUtil.addClass(this._container,e+"-incdec")),this._sliderContainer=BM.a.DomUtil.create("div","leaflet-ctv-slider-container",this._sliderContent),this.slider=BM.a.DomUtil.create("input","leaflet-ctv-slider",this._sliderContainer),this.min=null==this.min||isNaN(this.min)?0:parseInt(this.min),this.slider.setAttribute("title",this.options.title),this.slider.setAttribute("id","slider"),this.slider.setAttribute("type","range"),this.slider.setAttribute("min",this.min),this.slider.setAttribute("max",0),this.slider.setAttribute("step",1),this.slider.setAttribute("value",0),this.firstLoad=!0,"oninput"in this.slider||"onchange"in this.slider?BM.a.DomEvent.on(this.slider,"change",this._tilesVersion,this):this.slider.onpropertychange=this._tilesVersion,this.options.switch&&(this._last=BM.a.DomUtil.create("a","leaflet-ctv-slider-incdec leaflet-ctv-slider-last",this._sliderContent),this._last.innerHTML=this.options.lastText,BM.a.DomEvent.on(this._last,"click",this.lastTilesVersion,this)),"vertical"===this.options.orientation?(this.slider.style.width="170px",this._sliderContainer.style.height="170px"):this._sliderContainer.style.width="150px",BM.a.DomEvent.disableClickPropagation(this._container),this.options.collapsed?(BM.a.Browser.android||BM.a.DomEvent.on(this._container,"mouseenter",this._expand,this).on(this._container,"mouseleave",this._collapse,this),BM.a.Browser.touch?BM.a.DomEvent.on(this._sliderBtn,"click",BM.a.DomEvent.stop).on(this._sliderBtn,"click",this._expand,this):BM.a.DomEvent.on(this._sliderBtn,"focus",this._expand,this)):this._expand(),this._container},_expand:function(){BM.a.DomUtil.addClass(this._container,"leaflet-control-ctv-expanded")},_collapse:function(){BM.a.DomUtil.removeClass(this._container,"leaflet-control-ctv-expanded")},_tilesVersion:function(){var e=this.getVersion();this.tilesVersion(e)}});BM.a.Map.mergeOptions({changeTileVersionControl:!1}),BM.a.Map.addInitHook(function(){this.options.changeTileVersionControl&&(this.changeTileVersionControl=new fR,this.addControl(this.changeTileVersionControl))});var hR=function(e){return new fR(e)};BM.a.supermap.control.changeTileVersion=hR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var pR=BM.a.Control.extend({options:{position:"bottomright",imageUrl:null,link:null,width:null,height:null,alt:"SuperMap iClient"},onAdd:function(){var e=BM.a.DomUtil.create("div","iclient-leaflet-logo");e.style.marginTop=0,e.style.marginBottom=0,e.style.marginLeft=0,e.style.marginRight=0;var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAdCAYAAAAjHtusAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozYWZlOGIwMi01MWE3LTRiZjYtYWVkYS05MGQ2ZTQ4YjZiMmUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODg0NkFBQUE3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODg0NkFBQTk3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MWI3NzdhNC1lZmEyLTQ1MzUtOGQzNi03MmRjNDkyODMzN2UiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjYTYzODVjMi1jNDQ1LTExN2EtYTc0ZC1lM2I5MzJlMGE4Y2QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5q1HM0AAAF/ElEQVR42tSabYhUVRjHZ7W01C1uaCRW4F3oi9SXCUnwQ9gsGUFvOEtQH1bLu5VS9sbYh5KicjYt29qiGQwVg2xWWKgocob91AvC+CWsoJqB3qHMSdTMpZyeU/+Df07n3pk7997Z6cBv99z7nHvOvf/z/pxJNZvNVI/jCKXmv6EquAmVkxPSlvtp2GItr0/96fFQForChJAWDiVYTkMYMu4XBFcYjLOwWS3sNwmn8NGzZ0h4Flv/zwIdchAnh/slCGmmKUNIBzYPaXOUr0vPuEjD71JAPh7l61embzinhV3V8nnCGmGT8LwlzSL8/yUh4Tfjo9T/CgnCIYNKycA2Qq21AcHU/VHE80Idoo3Qs0W6p0UtUnkZvEMDeVcCyqxEafF7hL8Qf0oYsIj+lfC9cH1CwhchWAGCtZO+AooQOkdC1Km1VtCb63StW73uFSzgKFUkNwBbmZGGmqowhvg8ZNpH9oXChcIcYRdeNomgxLkaH+S1SGubAxyIpFv+Zp+0DYjrAS00j/dem2VGEl6FJ4Qa4quEu8j2hTCJ+GJhe4JjfQMf6JCYPPbysMPxBlp0BUKOogEF9Rg9/heNvNKYfM0KsZUZaYxX4STGrzJa+zbhPeFH2DcK10KItcI+pI0rVElwXl1ULaKnIJhDw0oRQpTQc1zcbwRU8ATy4DR6yMlTzwkqMziEWHvubJ4Nk4ZtHdnqwvwY17xq3Z4FjrG+z2Kdrdf2ZSGD+xlLPh6t1R0jP9fI22ZzKI92yvQl7EbmBxI4S7Y+vIAOL87QZqsc5uNnssxZIcfYjXT9snCR7jjobidp+FkxA2v+Cq1QervMDmp4P7Xs3YZtE9kOC3P/By6JGaETl8ElwueYTNTDq4UDsKnd7YfCNbT239LF1udS72xYJt1UWxNfN4IIP4bWuTpEja01JtMFZFsm/AHbtHBlDE6yasA4moYTrUbvdBTXHqUrAH4uSadbyzF+vbBM2IsNkS3MNa5305JxqfA02T4TnkX8XOH1mPw8ruVejpxbI9hZD2Cz1U7LdrrUvjP/WfZinNZhr6V27hP+FPZh9aLvLxVO4DllX0G2OcKnlO/DCblxaz6uXBtmi+8mBaP3/SP8IuEIiTRoPPQm2TaEmEyXo0JU+F0YiPFD0hhOsiE/vqeEVwyTgF8L51OilcIZ2I4Ll5NttvAJPfukUeB2sk0ZPSbKIUUJpCII7+DasWy08uhNNazT0wGHI7mAtB7KqMKm38HhDdAUibTVKGicbB8YAqrJ9DRsp43JdB4qUof1HQrPE6XTQWu3Ce/inVzjXhXpMiTwUYugNVQ+p80jrUsV5EH0POKeuXO9QjhFq5GryNYvfEMCDhsftYVsB9ETtG0V9ZjfhCURhbcJFpfwVZ9jvhxsLHwTYtp2svlWQw3vXL8UnqHVSIG8l8ex+tHhBXgjddgqHEZ8ufAA2aaEnYgrF/KrPXrEmMUqZ9THLW06xhoBaVueQpkug+ewOUphE3Qv2Q5gGamXYa+QbVq4O+DQ5FHyZqrjxNt7UHh9uuRa0F7HjCF8o9PCTOGnscM7g2u1Hl9C9oeEnxC/1ajZg8JLiM9Hj9GHJseMShwL2DO0G5yEWn3Zh1QUods5CPkIoqlwAZxhXMsb6HrcEPBxchhdJ6wj29vCW4hfLOzo8J3rltYX50nXQAATSf/K4DEaGlTLvplsk/QCpoD60EQ7gLYZc8H9wq+I3yncEOEcNhuz6HWf3XEiwU/4Y8YEqVp2P10rt+8REvBGw026i4aDcbL9jF8r8Blmf4fCOzhViiscskygXRdehf3CO4hfigmTBXyQrl8TFtD1IzQX3CbcQrY3hPcRv4z8OmHPXwchVNln2MmE7BX6VwIFi/he6uxvb6JM3m0fdqvx/ATidxg2JeC7VDErAw5NzGfvwRJVheEIQ8Mg/pdwIM+UOmi9Q8ivCsrIy0tF+wVbEcLrd3Pb2XisEb4Tdlhsi4WP4RBbaLGrHfC3PrvMIezy9rTpGm5lz9LOMG15xvFxD/j5gjzjjDbMOzk+9zzt3v5bgAEAibzFeFHVgYkAAAAASUVORK5CYII=";this.options.imageUrl&&(t=this.options.imageUrl);var n=this.options.alt,r="94px",i="29px",o="width:"+r+";height:"+i+";";this.options.imageUrl&&(o="width:"+(r=this.options.width)+";height:"+(i=this.options.height)+";",r&&i||(o=""));var a=this.options.link||"https://iclient.supermap.io";return e.innerHTML="<a href='"+a+"' target='_blank' style='border: none;display: block;'><img src="+t+" alt='"+n+"' style='border: none;"+o+"margin-right:5px;margin-bottom:2px;white-space: nowrap'></a>",e}});BM.a.Map.mergeOptions({logoControl:!0}),BM.a.Map.addInitHook(function(){!this._logoAdded&&this.options.logoControl&&(!0===this.options.logoControl?this.logoControl=new pR:this.options.logoControl instanceof BM.a.Control&&(this.logoControl=this.options.logoControl),this.logoControl&&(this.addControl(this.logoControl),this._logoAdded=!0))});var yR=function(e){return new pR(e)};function dR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}BM.a.supermap.control.logo=yR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var mR=function(){function e(){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"toSuperMapBounds",value:function(e){return e&&-1!==["FeatureCollection","Feature"].indexOf(e.type)&&(e=BM.a.geoJSON(e).getBounds()),e instanceof BM.a.LatLngBounds?new Oe(e.getSouthWest().lng,e.getSouthWest().lat,e.getNorthEast().lng,e.getNorthEast().lat):e instanceof BM.a.Bounds?new Oe(e.min.x,e.min.y,e.max.x,e.max.y):this.isArray(e)?new Oe(e[0],e[1],e[2],e[3]):new Oe}},{key:"isArray",value:function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{key:"toProcessingParam",value:function(e){var t={};if(e.length<1)t="";else{for(var n=[],r=0;r<e.length;r++){var i={};i.x=e[r][0],i.y=e[r][1],n.push(i)}t.type="REGION",t.points=n}return t}}],(n=null)&&dR(t.prototype,n),r&&dR(t,r),e}();BM.a.supermap.CommontypesConversion=mR;BM.a.Util.supermap_callbacks={};var vR=function(e){return e?(new Rn).toGeoJSON(e):e},gR=function(e){if(!e)return e;var t,n=new Rn;if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e.type))t=n.read(e,e.type);else if("function"==typeof e.toGeoJSON){var r=e.toGeoJSON();t=r?n.read(r,r.type):e}var i=t;return BM.a.Util.isArray(t)&&(1===t.length?i=t[0]:t.length>1&&(i=[],t.map(function(e){return i.push(e.geometry),e}))),i&&i.geometry?i.geometry:i},bR=function(e){var t;if(e===h.METER)t=1;else if(e===h.DEGREE)t=2*Math.PI*6378137/360;else if(e===h.KILOMETER)t=.001;else if(e===h.INCH)t=1/.025399999918;else{if(e!==h.FOOT)return t;t=.3048}return t},SR=function(e,t,n){var r=e*t*(1/.0254)*bR(n);return r=1/r},_R=function(e,t,n){var r=e*t*(1/.0254)*bR(n);return r=1/r},wR=function(e,t,n,r){return r=r||6378137,n=n||"",e>0&&t>0?(e=BM.a.Util.NormalizeScale(e),"degree"===n.toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()?254/t/e/(2*Math.PI*r/360)/1e4:254/t/e/1e4):-1},OR=function(e){return e>1?1/e:e};BM.a.Util.toGeoJSON=vR,BM.a.Util.toSuperMapGeometry=gR,BM.a.Util.resolutionToScale=SR,BM.a.Util.scaleToResolution=_R,BM.a.Util.getMeterPerMapUnit=bR,BM.a.Util.GetResolutionFromScaleDpi=wR,BM.a.Util.NormalizeScale=OR;BM.a.Util.transform=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:BM.a.CRS.EPSG4326,n=arguments.length>2?arguments[2]:void 0,r=null,i=null;if(-1===["FeatureCollection","Feature","Geometry"].indexOf(e.type))if(e.toGeoJSON)e=e.toGeoJSON();else if(e instanceof BM.a.LatLngBounds)e=BM.a.rectangle(e).toGeoJSON();else{if(!(e instanceof BM.a.Bounds))throw new Error("This tool only supports data conversion in geojson format or Vector Layers of Leaflet.");e=BM.a.rectangle([[e.getTopLeft().x,e.getTopLeft().y],[e.getBottomRight().x,e.getBottomRight().y]]).toGeoJSON()}var o={point:function(e){return i(e)},multipoint:function(e){return o.linestring.apply(this,[e])},linestring:function(e){for(var t=[],n=null,r=0,i=e.length;r<i;++r){try{n=o.point.apply(this,[e[r]])}catch(e){throw e}t.push(n)}return t},multilinestring:function(e){return o.polygon.apply(this,[e])},polygon:function(e){for(var t,n=[],r=0,i=e.length;r<i;++r){try{t=o.linestring.apply(this,[e[r]])}catch(e){throw e}n.push(t)}return n},multipolygon:function(e){for(var t=[],n=null,r=0,i=e.length;r<i;++r){try{n=o.polygon.apply(this,[e[r]])}catch(e){throw e}t.push(n)}return t}};return function(e,t){if(r=e,i=t,"Feature"===e.type)r=a(e);else if("FeatureCollection"===e.type){for(var n=[],o=0;o<e.features.length;++o)try{n.push(a(e.features[o]))}catch(e){n=null}r.features=n}return r}(e,function(e){var r=t.unproject({x:e[0],y:e[1]}),i=n.project(r);return[i.x,i.y]});function a(e){var t=e.geometry;if(!be.isArray(t.coordinates))throw"Geometry must have coordinates array: "+t;if(!o[t.type.toLowerCase()])throw"Unsupported geometry type: "+t.type;try{t.coordinates=o[t.type.toLowerCase()].apply(this,[t.coordinates])}catch(e){throw e}return e.geometry=t,e}};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xR=BM.a.TileLayer.extend({url:"http://online{num}.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles={styles}&udt=20150815&scaler=1",options:{minZoom:3,maxZoom:19,bounds:BM.a.latLngBounds(BM.a.latLng(-85.0511287798,-180),BM.a.latLng(85.0511287798,180)),retina:BM.a.Browser.retina,attribution:sR.Baidu.attribution},initialize:function(e,t){e&&(this.url=e),BM.a.setOptions(this,t),this.options.retina&&(this.options.maxZoom=18),BM.a.stamp(this)},getTileUrl:function(e){var t=BM.a.Util.template(this.url,{num:Math.abs((e.x+e.y)%8)+1,x:e.x,y:-e.y-1,z:this._getZoomForUrl(),styles:this.options.retina?"ph":"pl"});return this.options.tileProxy&&(t=this.options.tileProxy+encodeURIComponent(t)),t}}),CR=function(e,t){return new xR(e,t)};BM.a.supermap.baiduTileLayer=CR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var PR=BM.a.TileLayer.extend({defaultURL:"http://t2.dituhui.com/FileService/image",options:{mapName:"quanguo",type:"web",minZoom:3,maxZoom:18,attribution:sR.Cloud.attribution},initialize:function(e,t){BM.a.setOptions(this,t);var n=e||this.defaultURL;this._url=n+"?map="+this.options.mapName+"&type="+this.options.type,BM.a.stamp(this)},getTileUrl:function(e){var t=this._url+"&x="+e.x+"&y="+e.y+"&z="+e.z;return this.options.tileProxy&&(t=this.options.tileProxy+encodeURIComponent(t)),t}}),TR=function(e,t){return new PR(e,t)};BM.a.supermap.cloudTileLayer=TR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ER=FM.Layer.extend({options:{layersID:null,redirect:!1,transparent:!0,cacheEnabled:!0,clipRegionEnabled:!1,clipRegion:null,prjCoordSys:null,overlapDisplayed:!1,overlapDisplayedOptions:null,opacity:1,alt:"",pane:"tilePane",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:"",serverType:o.ISERVER,attribution:sR.Common.attribution,updateInterval:150,tileProxy:null,format:"png"},initialize:function(e,t){this._url=e,FM.Util.setOptions(this,t)},onAdd:function(e){this.update=FM.Util.throttle(this.update,this.options.updateInterval,this),e.on("moveend",this.update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?e.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this.update()},onRemove:function(){this._currentImage&&this._map.removeLayer(this._currentImage),this._map.off("moveend",this.update,this)},bringToFront:function(){return this.options.position="front",this._currentImage&&this._currentImage.bringToFront(),this},bringToBack:function(){return this.options.position="back",this._currentImage&&this._currentImage.bringToBack(),this},getOpacity:function(){return this.options.opacity},setOpacity:function(e){return this.options.opacity=e,this._currentImage&&this._currentImage.setOpacity(e),this},getImageUrl:function(e){var t=be.urlPathAppend(this._url,"image.".concat(this.options.format)),n=t+FM.Util.getParamString(Object.assign({},this._initAllRequestParams(),e),t);return n=this._appendCredential(n),this.options.tileProxy&&(n=this.options.tileProxy+encodeURIComponent(n)),this.options.cacheEnabled||(n+="&_t="+(new Date).getTime()),n},_getImageParams:function(){var e=this._calculateImageSize();return{viewBounds:this._compriseBounds(this._calculateBounds()),width:e.x,height:e.y}},_initAllRequestParams:function(){var e=this.options||{},t={},n=!0===e.redirect&&e.redirect;t.redirect=n;var r=!0===e.transparent&&e.transparent;t.transparent=r;var i=!1!==e.cacheEnabled||e.cacheEnabled;return t.cacheEnabled=i,e.prjCoordSys&&(t.prjCoordSys=JSON.stringify(e.prjCoordSys)),e.layersID&&(t.layersID=e.layersID),e.rasterfunction&&(t.rasterfunction=JSON.stringify(e.rasterfunction)),e.clipRegionEnabled&&e.clipRegion&&(t.clipRegionEnabled=e.clipRegionEnabled,t.clipRegion=JSON.stringify(Tn.fromGeometry(gR(e.clipRegion)))),!1===e.overlapDisplayed?(t.overlapDisplayed=!1,e.overlapDisplayedOptions&&(t.overlapDisplayedOptions=this.overlapDisplayedOptions.toString())):t.overlapDisplayed=!0,t},_requestImage:function(e,t){var n=this.getImageUrl(e);this._loadImage(n,t)},_loadImage:function(e,t){if(this._map){var n=new FM.ImageOverlay(e,t,{opacity:0,alt:this.options.alt,zIndex:this.options.zIndex,className:this.options.className,errorOverlayUrl:this.options.error,crossOrigin:this.options.crossOrigin,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),r=function e(r){n.off("error",e,this);var i=this._map;if(i){var o=r.target,a=this._currentImage;o._bounds&&o._bounds.equals(t)&&o._bounds.equals(i.getBounds())?(this._currentImage=o,"front"===this.options.position&&this.bringToFront(),"back"===this.options.position&&this.bringToBack(),this._currentImage._map&&this._currentImage.setOpacity(this.options.opacity),a&&i.removeLayer(a),a&&a._map&&a._map.removeLayer(a)):i.removeLayer(o),this.fire("load",{bounds:t})}};n.once("load",r,this),n.once("error",function(){this._map.removeLayer(n),this.fire("error"),n.off("load",r,this)},this),this.fire("loading",{bounds:t})}},update:function(){if(this._map){var e=this._map.getZoom(),t=this._map.getBounds();if(e>(this._map.options.maxZoom||18)||e<(this._map.options.minZoom||0))this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);else{var n=this._getImageParams();n?this._requestImage(n,t):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_calculateBounds:function(){var e=this._map.getPixelBounds(),t=this._map.unproject(e.getBottomLeft()),n=this._map.unproject(e.getTopRight()),r=this._map.options.crs.project(n),i=this._map.options.crs.project(t);return BM.a.bounds(r,i)},_compriseBounds:function(e){var t={leftBottom:{x:e.getBottomLeft().x,y:e.getTopRight().y},rightTop:{x:e.getTopRight().x,y:e.getBottomLeft().y}};return JSON.stringify(t)},_calculateImageSize:function(){var e=this._map,t=e.getPixelBounds(),n=e.getSize(),r=e.unproject(t.getBottomLeft()),i=e.unproject(t.getTopRight()),o=e.latLngToLayerPoint(i).y,a=e.latLngToLayerPoint(r).y;return(o>0||a<n.y)&&(n.y=a-o),n},_appendCredential:function(e){var t,n,r=e;switch(this.options.serverType){case o.IPORTAL:(t=(n=rr.getToken(this._url))?new Gt(n,"token"):null)||(t=(n=rr.getKey(this._url))?new Gt(n,"key"):null);break;case o.ONLINE:t=(n=rr.getKey(this._url))?new Gt(n,"key"):null;break;default:t=(n=rr.getToken(this._url))?new Gt(n,"token"):null}return t&&(r=be.urlAppend(r,t.getUrlParameters())),r}}),kR=function(e,t){return new ER(e,t)};BM.a.supermap.imageMapLayer=kR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var MR=BM.a.TileLayer.extend({options:{version:"1.0.0",style:"",tilematrixSet:"",format:"image/png",tileSize:256,matrixIds:null,layer:"",requestEncoding:"KVP",attribution:"",noWrap:!0},initialize:function(e,t){this._url=e,BM.a.setOptions(this,t);var n=this.options;if("REST"===n.requestEncoding){this.formatSuffix="."+({"image/png":"png","image/png8":"png","image/png24":"png","image/png32":"png",png:"png","image/jpeg":"jpg","image/jpg":"jpg",jpeg:"jpg",jpg:"jpg"}[n.format]||n.format.split("/").pop()||"png")}else n.requestEncoding="KVP"},getTileUrl:function(e){var t=this._getZoomForUrl(),n=this.options.matrixIds?this.options.matrixIds[t].identifier:t,r=BM.a.Util.template(this._url,{s:this._getSubdomain(e)}),i={service:"WMTS",request:"GetTile",version:this.options.version,style:this.options.style,tilematrixSet:this.options.tilematrixSet,format:this.options.format,width:this.options.tileSize,height:this.options.tileSize,layer:this.options.layer,tilematrix:n,tilerow:e.y,tilecol:e.x};if(this.options.tileProxy&&(r=this.options.tileProxy+r),"KVP"===this.options.requestEncoding)r+=BM.a.Util.getParamString(i,r);else if("REST"===this.options.requestEncoding){r+="/"+i.layer+"/"+i.style+"/"+i.tilematrixSet+"/"+i.tilematrix+"/"+i.tilerow+"/"+i.tilecol+this.formatSuffix}return r}}),AR=function(e,t){return new MR(e,t)};BM.a.supermap.wmtsLayer=AR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var LR=MR.extend({layerLabelMap:{vec:"cva",ter:"cta",img:"cia"},layerZoomMap:{vec:18,ter:14,img:18},options:{layerType:"vec",isLabel:!1,attribution:sR.Tianditu.attribution,url:"https://t{s}.tianditu.gov.cn/{layer}_{proj}/wmts?",zoomOffset:1,key:"",dpi:96,style:"default",format:"tiles",subdomains:[0,1,2,3,4,5,6,7],bounds:[[-90,-180],[90,180]],noWrap:!0},initialize:function(e){e=e||{},BM.a.setOptions(this,e),this.options.layer=this.options.isLabel?this.layerLabelMap[this.options.layerType]:this.options.layerType,this.options.maxZoom=this.layerZoomMap[this.options.layerType]-1,MR.prototype.initialize.call(this,this.options.url,this.options),BM.a.stamp(this),this.options.key&&(this._url="".concat(this._url,"tk=").concat(this.options.key))},onAdd:function(e){this.options.tilematrixSet="EPSG:4326"===e.options.crs.code?"c":"w",this._url=this._url.replace("{layer}",this.options.layer).replace("{proj}",this.options.tilematrixSet),MR.prototype.onAdd.call(this,e)},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if((!t.wrapLng||this.options.noWrap)&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(e);return BM.a.latLngBounds(this.options.bounds).overlaps(r)}}),jR=function(e){return new LR(e)};BM.a.supermap.tiandituTileLayer=jR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var RR=BM.a.TileLayer.extend({options:{layersID:null,redirect:!1,transparent:!0,cacheEnabled:!0,clipRegionEnabled:!1,clipRegion:null,prjCoordSys:null,overlapDisplayed:!1,overlapDisplayedOptions:null,tileversion:null,crs:null,serverType:o.ISERVER,format:"png",tileProxy:null,attribution:sR.Common.attribution,subdomains:null},initialize:function(e,t){this._url=e,BM.a.TileLayer.prototype.initialize.apply(this,arguments),BM.a.setOptions(this,t),BM.a.stamp(this),this.tileSetsIndex=-1,this.tempIndex=-1},onAdd:function(e){this._crs=this.options.crs||e.options.crs,BM.a.TileLayer.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this.getScaleFromCoords(e),n=this._getLayerUrl()+"&scale="+t+"&x="+e.x+"&y="+e.y;return this.options.tileProxy&&(n=this.options.tileProxy+encodeURIComponent(n)),this.options.cacheEnabled||(n+="&_t="+(new Date).getTime()),this.options.subdomains&&(n=BM.a.Util.template(n,{s:this._getSubdomain(e)})),n},getScale:function(e){var t=e||this._map.getZoom();return this.scales[t]},getScaleFromCoords:function(e){var t,n=this;return n.scales&&n.scales[e.z]?n.scales[e.z]:(n.scales=n.scales||{},t=n.getDefaultScale(e),n.scales[e.z]=t,t)},getDefaultScale:function(e){var t=this._crs;if(t.scales)return t.scales[e.z];var n=this._tileCoordsToBounds(e),r=t.project(n.getNorthEast()),i=t.project(n.getSouthWest()),o=this.options.tileSize,a=Math.max(Math.abs(r.x-i.x)/o,Math.abs(r.y-i.y)/o),s=h.METER;if(t.code){var l=t.code.split(":");if(l&&l.length>1){var u=parseInt(l[1]);s=u&&u>=4e3&&u<=5e3?h.DEGREE:h.METER}}return SR(a,96,s)},setTileSetsInfo:function(e){this.tileSets=e,BM.a.Util.isArray(this.tileSets)&&(this.tileSets=this.tileSets[0]),this.tileSets&&(this.fire("tilesetsinfoloaded",{tileVersions:this.tileSets.tileVersions}),this.changeTilesVersion())},lastTilesVersion:function(){this.tempIndex=this.tileSetsIndex-1,this.changeTilesVersion()},nextTilesVersion:function(){this.tempIndex=this.tileSetsIndex+1,this.changeTilesVersion()},changeTilesVersion:function(){var e=this;if(null!=e.tileSets&&!(e.tempIndex===e.tileSetsIndex||this.tempIndex<0)){var t=e.tileSets.tileVersions;if(t&&e.tempIndex<t.length&&e.tempIndex>=0){var n=t[e.tempIndex].name;e.mergeTileVersionParam(n)&&(e.tileSetsIndex=e.tempIndex,e.fire("tileversionschanged",{tileVersion:t[e.tempIndex]}))}}},updateCurrentTileSetsIndex:function(e){this.tempIndex=e},mergeTileVersionParam:function(e){return!!e&&(this.requestParams.tileversion=e,this._paramsChanged=!0,this.redraw(),this._paramsChanged=!1,!0)},_getLayerUrl:function(){return this._paramsChanged&&(this._layerUrl=this._createLayerUrl()),this._layerUrl||this._createLayerUrl()},_createLayerUrl:function(){var e=be.urlPathAppend(this._url,"tileImage.".concat(this.options.format));return this.requestParams=this.requestParams||this._getAllRequestParams(),e=be.urlAppend(e,FM.Util.getParamString(this.requestParams)),e=this._appendCredential(e),this._layerUrl=e,e},_getAllRequestParams:function(){var e=this.options||{},t={},n=this.options.tileSize;n instanceof BM.a.Point||(n=BM.a.point(n,n)),t.width=n.x,t.height=n.y,t.redirect=!0===e.redirect,t.transparent=!0===e.transparent,t.cacheEnabled=!(!1===e.cacheEnabled),e.prjCoordSys&&(t.prjCoordSys=JSON.stringify(e.prjCoordSys)),e.layersID&&(t.layersID=e.layersID.toString()),e.clipRegionEnabled&&e.clipRegion&&(e.clipRegion=Tn.fromGeometry(gR(e.clipRegion)),t.clipRegionEnabled=e.clipRegionEnabled,t.clipRegion=JSON.stringify(e.clipRegion));var r=this._crs;if(r.options&&r.options.origin)t.origin=JSON.stringify({x:r.options.origin[0],y:r.options.origin[1]});else if(r.projection&&r.projection.bounds){var i=r.projection.bounds,o=BM.a.point(i.min.x,i.max.y);t.origin=JSON.stringify({x:o.x,y:o.y})}return!1===e.overlapDisplayed?(t.overlapDisplayed=!1,e.overlapDisplayedOptions&&(t.overlapDisplayedOptions=this.overlapDisplayedOptions.toString())):t.overlapDisplayed=!0,!0===t.cacheEnabled&&e.tileversion&&(t.tileversion=e.tileversion.toString()),e.rasterfunction&&(t.rasterfunction=JSON.stringify(e.rasterfunction)),t},_appendCredential:function(e){var t,n,r=e;switch(this.options.serverType){case o.IPORTAL:(t=(n=rr.getToken(this._url))?new Gt(n,"token"):null)||(t=(n=rr.getKey(this._url))?new Gt(n,"key"):null);break;case o.ONLINE:t=(n=rr.getKey(this._url))?new Gt(n,"key"):null;break;default:t=(n=rr.getToken(this._url))?new Gt(n,"token"):null}return t&&(r=be.urlAppend(r,t.getUrlParameters())),r}}),NR=function(e,t){return new RR(e,t)};BM.a.supermap.tiledMapLayer=NR;var IR=n(3),DR=n.n(IR),FR={TEXT:{fontSize:"14px",fontFamily:"Arial Unicode MS Regular,Microsoft YaHei",textAlign:"left",color:"rgba(255,255,255,0)",fillColor:"rgba(80,80,80,1)",weight:1,globalAlpha:1},POINT:{fillColor:"#ffcc00",color:"#cc3333",weight:1,radius:3,opacity:1},LINE:{color:"rgba(0,0,0,0)",weight:1,lineCap:"butt",lineJoin:"round",dashOffset:0,dashArray:[],opacity:1},REGION:{color:"rgba(0,0,0,0)",fillColor:"rgba(0,0,0,0)",weight:1,lineCap:"butt",lineJoin:"round",dashOffset:0,opacity:1,fillOpacity:1,dashArray:[]}};BM.a.supermap.DefaultStyle=FR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var BR={TEXT:{"text-size":"fontSize","text-face-name":"fontFamily","text-align":"textAlign","text-name":"textName","text-weight":"fontWeight","text-halo-color":"color","text-fill":"fillColor","text-comp-op":"globalCompositeOperation"},POINT:{"point-file":"iconUrl","point-fill":"fillColor","point-radius":"radius","point-halo-color":"color","point-comp-op":"globalCompositeOperation"},LINE:{"line-color":"color","line-width":"weight","line-cap":"lineCap","line-join":"lineJoin","line-dash-offset":"dashOffset","line-opacity":"opacity","line-dasharray":"dashArray","line-comp-op":"globalCompositeOperation"},REGION:{"line-color":"color","line-width":"weight","line-cap":"lineCap","line-join":"lineJoin","line-dash-offset":"dashOffset","line-opacity":"opacity","line-dasharray":"dashArray","polygon-fill":"fillColor","polygon-opacity":"fillOpacity","polygon-comp-op":"globalCompositeOperation"}},UR={lineWidth:{leafletStyle:"weight",type:"number",unit:"mm",defaultValue:.1},fillForeColor:{leafletStyle:"fillColor",type:"color",defaultValue:"rgba(0,0,0,0)"},foreColor:{leafletStyle:"color",type:"color",defaultValue:"rgba(0,0,0,0)"},markerSize:{leafletStyle:"markerSize",type:"number",unit:"mm",defaultValue:2.4},lineColor:{leafletStyle:"color",type:"color",defaultValue:"#000000"}},GR={clear:"",src:"",dst:"","src-over":"source-over","dst-over":"destination-over","src-in":"source-in","dst-in":"destination-in","src-out":"source-out","dst-out":"destination-out","src-atop":"source-atop","dst-atop":"destination-atop",xor:"xor",plus:"lighter",minus:"",multiply:"",screen:"",overlay:"",darken:"",lighten:"lighter","color-dodge":"","color-burn":"","hard-light":"","soft-light":"",difference:"",exclusion:"",contrast:"",invert:"","invert-rgb":"","grain-merge":"","grain-extract":"",hue:"",saturation:"",color:"",value:""};function zR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}BM.a.supermap.CartoStyleMap=BR,BM.a.supermap.ServerStyleMap=UR,BM.a.supermap.CompOpMap=GR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var VR=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cartoCSS=null,this.mapUrl=t}var t,n,i;return t=e,(n=[{key:"pretreatedCartoCSS",value:function(e,t){t&&(e=this.processCharacters(e)),this.cartoCSS=this.cartoCSS||{};var n=new Sx(e).getShaders();if(n)for(var r=0;r<n.length;r++){var i=n[r].elements[0],o=n[r].attachment;this.cartoCSS[i.clean]=this.cartoCSS[i.clean]||{},this.cartoCSS[i.clean][o]=this.cartoCSS[i.clean][o]||[],this.cartoCSS[i.clean][o].push(n[r])}}},{key:"processCharacters",value:function(e){var t=e;if(t){t=(t=t.replace(/[@]/gi,"___")).replace(/\\#/gi,"#");var n={};return this.layersInfo&&Object.keys(this.layersInfo).sort().forEach(function(e){for(var r=e.replace(/[@#\s]/gi,"___"),i=e,o=Object.keys(n),a=o.length;a>-1;a--)if(e.indexOf(o[a])>-1){i=e.replace(o[a],n[o[a]]);break}i=i.replace(/[#]/gi,"#"),n[e]=r,t=t.replace(new RegExp(i,"g"),r)}),t=(t=t.replace(/[#]/gi,"\n#")).replace(/\[zoom/gi,"[scale")}}},{key:"pickShader",value:function(e){if(!this.cartoCSS)return null;var t=e.replace(/[@#\s]/gi,"___");return this.cartoCSS[t]}},{key:"getDefaultStyle",value:function(e){var t={},n=FR[e];for(var r in n){var i=n[r];t[r]=i}return t}},{key:"getStyleFromiPortalMarker",value:function(e){return 0==e.indexOf("./")?null:(0==e.indexOf("http://support.supermap.com.cn:8092/static/portal")&&(e=e.replace("http://support.supermap.com.cn:8092/static/portal","http://support.supermap.com.cn:8092/apps/viewer/static")),BM.a.icon({iconUrl:e,iconSize:BM.a.point(48,43),iconAnchor:BM.a.point(24,43),popupAnchor:BM.a.point(0,-43)}))}},{key:"getStyleFromiPortalStyle",value:function(e,t,n){var r=n?JSON.parse(n):null,i={};if("Point"===t||"MultiPoint"===t){var o=r||e.pointStyle;return o.externalGraphic?0==o.externalGraphic.indexOf("./")?null:(0==o.externalGraphic.indexOf("http://support.supermap.com.cn:8092/static/portal")&&(o.externalGraphic=o.externalGraphic.replace("http://support.supermap.com.cn:8092/static/portal","http://support.supermap.com.cn:8092/apps/viewer/static")),BM.a.icon({iconUrl:o.externalGraphic,iconSize:BM.a.point(o.graphicWidth,o.graphicHeight),iconAnchor:BM.a.point(-o.graphicXOffset,-o.graphicYOffset),popupAnchor:BM.a.point(0,-o.graphicHeight)})):(i.radius=o.pointRadius,i.color=o.strokeColor,i.opacity=o.strokeOpacity,i.lineCap=o.strokeLineCap,i.weight=o.strokeWidth,i.fillColor=o.fillColor,i.fillOpacity=o.fillOpacity,i.dashArray=this.dashStyle(o,1),i)}if("LineString"===t||"MultiLineString"===t||"Box"===t){var a=r||e.lineStyle;return i.color=a.strokeColor,i.opacity=a.strokeOpacity,i.fillOpacity=a.fillOpacity,i.lineCap=a.strokeLineCap,i.weight=a.strokeWidth,i.dashArray=this.dashStyle(a,1),i}if("Polygon"===t||"MultiPolygon"===t){var s=r||e.polygonStyle;return i.color=s.strokeColor,i.opacity=s.strokeOpacity,i.lineCap=s.strokeLineCap,i.weight=s.strokeWidth,i.fillColor=s.fillColor,i.fillOpacity=s.fillOpacity,i.dashArray=this.dashStyle(s,1),i}}},{key:"dashStyle",value:function(e,t){if(!e)return[];var n=e.strokeWidth*t,r=e.strokeDashstyle;switch(r){case"solid":return[];case"dot":return[1,4*n];case"dash":return[4*n,4*n];case"dashdot":return[4*n,4*n,1,4*n];case"longdash":return[8*n,4*n];case"longdashdot":return[8*n,4*n,1,4*n];default:return r?be.isArray(r)?r:(r=he.trim(r).replace(/\s+/g,",")).replace(/\[|\]/gi,"").split(","):[]}}},{key:"getValidStyleFromCarto",value:function(e,t,n,r,i){if(!n)return null;var o=r.type,a=r.properties.attributes||{},s=this.getDefaultStyle(o);i=void 0===i||i,a.FEATUREID=r.properties.id,a.SCALE=t;for(var l,u,c=BR[o],f=0,h=n.length;f<h;f++){var p=n[f],y=c[p.property],d=p.getValue(a,e,!0);if(null!==d&&y)if("fontSize"===y)i&&(d*=.8),l=d+"px",s.fontSize=l;else if("fontName"===y)u=d,s.fontName=u;else{if("globalCompositeOperation"===y){if(!(d=GR[d]))continue}else if(i&&"iconUrl"===y){d=(d=this.mapUrl+"/tileFeature/symbols/"+d.replace(/(___)/gi,"@")).replace(/(__0__0__)/gi,"__8__8__"),s.iconUrl=d;continue}"weight"===y&&d<1&&(d=Math.ceil(d)),s[y]=d}}return s}},{key:"getValidStyleFromLayerInfo",value:function(e,t){var n=e.type,i=this.getDefaultStyle(n),o=t&&t.layerStyle;if(!o)return i;if("POINT"===n){var a=Math.ceil(o.markerSize*r.DOTS_PER_INCH*r.INCHES_PER_UNIT.mm)||8,s={transparent:!0,resourceType:"SYMBOLMARKER",picWidth:a,picHeight:a,style:JSON.stringify(o)};return i.iconUrl=be.urlAppend(this.mapUrl+"/symbol.png",be.getParameterString(s)),i.iconSize=[a,a],i}if("TEXT"===n){if(o=e.properties.textStyle||t.layerStyle,i.fontWeight=o.bold?o.fontWeight:"normal",o.fontHeight){var l=o.fontHeight*r.DOTS_PER_INCH*r.INCHES_PER_UNIT.mm*.85;i.fontSize=l+"px",i.textHeight=l}if(o.fontName&&(i.fontFamily=o.fontName.indexOf("@")?o.fontName.replace(/@/g,""):o.fontName),o.align){var u=o.align.replace(/TOP|MIDDLE|BASELINE|BOTTOM/,"");i.textAlign=u.toLowerCase()}return i.weight=o.outline?o.outlineWidth:0,o.backColor&&(i.color="rgba("+o.backColor.red+","+o.backColor.green+","+o.backColor.blue+",1)"),o.foreColor&&(i.fillColor="rgba("+o.foreColor.red+","+o.foreColor.green+","+o.foreColor.blue+",1)"),i.rotation=o.rotation||0,i}var c=o.fillSymbolID>7?0:o.fillSymbolID,f=o.lineSymbolID>5?0:o.lineSymbolID;for(var h in o){var p=UR[h];if(p){var y=p.leafletStyle;switch(p.type){case"number":var d=o[h];p.unit&&(d=d*r.DOTS_PER_INCH*r.INCHES_PER_UNIT[p.unit]*2.5),i[y]=d;break;case"color":var m=o[h],v=void 0,g=1;if("fillColor"===y)0!==c&&1!==c||(g=1-c,v="rgba("+m.red+","+m.green+","+m.blue+","+g+")");else if("color"===y){if(0===f||5===f)g=0===f?1:0;else{var b=[1,0];switch(f){case 1:b=[9.7,3.7];break;case 2:b=[3.7,3.7];break;case 3:b=[9.7,3.7,2.3,3.7];break;case 4:b=[9.7,3.7,2.3,3.7,2.3,3.7]}i.lineDasharray=b}v="rgba("+m.red+","+m.green+","+m.blue+","+g+")"}i[y]=v}}}return t.textField&&(i.textAlign="LEFT"),i}}])&&zR(t.prototype,n),i&&zR(t,i),e}();BM.a.supermap.CartoCSSToLeaflet=VR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var JR=BM.a.Class.extend({initialize:function(e){var t=(e=e||{}).latLng||e._latLng;this._latLng=BM.a.latLng(t.lat,t.lng),this._style=e.style||e._canvas,this.attributes=e.attributes,this.id=e.id?e.id:null},getId:function(){return this.id},setId:function(e){this.id=e},setLatLng:function(e){this._latLng=e},setCanvas:function(e){this._style=e},setAttributes:function(e){this.attributes=e},getLatLng:function(){return this._latLng},getCanvas:function(){return this._style},getAttributes:function(){return this.attributes},setStyle:function(e){this._style=e},getStyle:function(){return this._style}}),HR=function(e){return new JR(e)};BM.a.supermap.graphic=HR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var qR=BM.a.Class.extend({initialize:function(e,t){this.geometry=e,this.attributes=t},toFeature:function(){var e=this.geometry;if(e.toGeoJSON){var t=e.toGeoJSON();return t.properties=this.attributes,(new Rn).read(t)[0]}if(3===e.length)e=new ct(e[1],e[0],e[2]);else if(2===e.length)e=new Xe(e[0],e[1]);else if(e instanceof BM.a.LatLng)e=new Xe(e.lng,e.lat);else if(e instanceof BM.a.Point)e=new Xe(e.x,e.y);else if(e instanceof BM.a.CircleMarker){var n=e.getLatLng();e=new Xe(n.lng,n.lat)}return new en(e,this.attributes)},reverseLatLngs:function(e){BM.a.Util.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++)e[t]=[e[t].lng,e[t].lat];return e}}),WR=function(e,t){return new qR(e,t)};BM.a.supermap.themeFeature=WR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var YR=BM.a.Layer.extend({options:{alwaysMapCRS:!1,id:be.createUniqueID("themeLayer_"),opacity:1,TFEvents:[],attribution:sR.Common.attribution},initialize:function(e,t){BM.a.Util.setOptions(this,t),this.name=e,this.features=[],this.TFEvents=this.options.TFEvents,this.levelRenderer=new mk,this.movingOffset=[0,0]},getEvents:function(){var e={zoomend:this._reset,moveend:this._reset,resize:this._resize};return this._map._zoomAnimated&&(e.zoomanim=this._zoomAnim),e},onRemove:function(e){BM.a.DomUtil.remove(this.container),e.off("mousemove",this.mouseMoveHandler)},onAdd:function(e){var t=this;if(t.map=t._map=e,t._initContainer(),t.levelRenderer){var n=e.getSize();t.container.style.width=n.x+"px",t.container.style.height=n.y+"px",t._updateOpacity(),t.renderer=t.levelRenderer.init(t.container),t.renderer.clear(),t.features&&t.features.length>0&&t._reset(),t.addTFEvents(),t.mouseMoveHandler=function(e){var n=e.layerPoint;t.currentMousePosition=BM.a.point(n.x+t.movingOffset[0],n.y+t.movingOffset[1])},e.on("mousemove",t.mouseMoveHandler),t.update(e.getBounds())}else e.removeLayer(t)},addFeatures:function(e){},redrawThematicFeatures:function(e){},destroyFeatures:function(e){if(void 0===e&&(e=this.features),e){this.removeFeatures(e);for(var t=e.length-1;t>=0;t--)e[t].destroy()}},removeFeatures:function(e){var t=this;if(e&&0!==e.length){if(e===t.features)return t.removeAllFeatures();BM.a.Util.isArray(e)||(e=[e]);for(var n=[],r=e.length-1;r>=0;r--){var i=e[r],o=BM.a.Util.indexOf(t.features,i);-1!==o?t.features.splice(o,1):n.push(i)}for(var a=[],s=0,l=t.features.length;s<l;s++)i=t.features[s],a.push(i);t.features=[],t.addFeatures(a),t.renderer&&(t._map?t.redrawThematicFeatures(t._map.getBounds()):t.redrawThematicFeatures());var u=0==n.length;t.fire("featuresremoved",{features:n,succeed:u})}},removeAllFeatures:function(){this.renderer&&this.renderer.clear(),this.features=[],this.fire("featuresremoved",{features:[],succeed:!0})},getFeatures:function(){for(var e=this.features.length,t=new Array(e),n=0;n<e;++n)t[n]=this.features[n];return t},getFeatureBy:function(e,t){var n=null;for(var r in this.features)if(this.features[r][e]===t){n=this.features[r];break}return n},getFeatureById:function(e){return this.getFeatureBy("id",e)},getFeaturesByAttribute:function(e,t){var n,r=[];for(var i in this.features)(n=this.features[i])&&n.attributes&&n.attributes[e]===t&&r.push(n);return r},update:function(e){var t=this._map.containerPointToLayerPoint([0,0]);BM.a.DomUtil.setPosition(this.container,t);var n=this;n.renderer&&n.redrawThematicFeatures(e),n.currentMousePosition&&(n.currentMousePosition=BM.a.point(n.currentMousePosition.x-n.movingOffset[0],n.currentMousePosition.y-n.movingOffset[1])),n.movingOffset=[0,0],n._zoom=n._map.getZoom(),n._center=n._map.getCenter()},setOpacity:function(e){e!==this.options.opacity&&(isNaN(e)||(this.options.opacity=e,this._updateOpacity()))},redraw:function(){var e=this;return!!e.renderer&&(e._map?e.redrawThematicFeatures(e._map.getBounds()):e.redrawThematicFeatures(),!0)},on:function(e,t,n){return this.renderer?this.renderer.on(e,t):BM.a.Layer.prototype.on.call(this,e,t),this},off:function(e,t,n){return this.renderer?this.renderer.un(e,t):BM.a.Layer.prototype.off.call(this,e,t),this},fire:function(e,t,n){return this.renderer&&this.renderer.trigger(e,t),BM.a.Layer.prototype.fire.call(this,e,t,n),this},addTFEvents:function(){for(var e=this.TFEvents,t=e.length,n=0;n<t;n++)this.renderer.on(e[n][0],e[n][1])},getLocalXY:function(e){if(!this._map)return e;var t=e;BM.a.Util.isArray(e)&&(t=BM.a.point(e[0],e[1])),e instanceof BM.a.Point||(t=e instanceof Xe||e instanceof ct?BM.a.point(e.x,e.y):BM.a.point(e.lon,e.lat));var n=this._map.latLngToAccurateContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(t):BM.a.latLng(t.y,t.x));return[n.x,n.y]},toiClientFeature:function(e){be.isArray(e)||(e=[e]);for(var t=[],n=0;n<e.length;n++)if(e[n]instanceof qR)t.push(e[n].toFeature());else if(e[n]instanceof en)t.push(e[n]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e[n].type)){var r=new Rn;t=t.concat(r.read(e[n]))}else{if(!e[n].geometry||!e[n].geometry.parts)throw new Error("features[".concat(n,"]'s type is not be supported."));t.push(ab.fromJson(e[n]).toFeature())}return t},toFeature:function(e){return this.toiClientFeature(e)},_initContainer:function(){var e=this.getPane(),t="themeLayer leaflet-layer leaflet-zoom-"+(this._map.options.zoomAnimation&&BM.a.Browser.any3d?"animated":"hide");this.container=BM.a.DomUtil.create("div",t,e);var n=BM.a.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);this.container.id=this.options.id,this.container.style[n]="50% 50%",this.container.style.position="absolute",this.container.style.zIndex=200},_zoomAnim:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._getCenterOffset(e.center)._multiplyBy(-t).subtract(this._map._getMapPanePos());BM.a.DomUtil.setTransform?BM.a.DomUtil.setTransform(this.container,n,t):this.container.style[BM.a.DomUtil.TRANSFORM]=BM.a.DomUtil.getTranslateString(n)+" scale("+t+")"},_updateOpacity:function(){var e=this;be.modifyDOMElement(e.container,null,null,null,null,null,null,e.options.opacity),null!==e._map&&e._map.fire("changelayer",{layer:e,property:"opacity"})},_reset:function(){var e=this,t=e._map.getBounds();e.update(t);var n=e._map.getSize(),r=this._map.containerPointToLayerPoint([0,0]);BM.a.DomUtil.setPosition(this.container,r),parseFloat(e.container.width)!==parseFloat(n.x)&&(e.container.width=n.x+"px"),parseFloat(e.container.height)!==parseFloat(n.y)&&(e.container.height=n.y+"px"),e.redraw()},_resize:function(){var e=this._map.getSize();this.container.style.width=e.x+"px",this.container.style.height=e.y+"px",this.renderer.resize()}}),QR=YR.extend({options:{nodesClipPixel:2,isHoverAble:!1,isMultiHover:!1,isClickAble:!0,isAllowFeatureStyle:!1},initialize:function(e,t){YR.prototype.initialize.call(this,e,t),BM.a.Util.setOptions(this,t);this.cache={},this.cacheFields=[],this.style={},this.highlightStyle={}},addFeatures:function(e){var t=this;t.fire("beforefeaturesadded",{features:e}),this.features=this.toiClientFeature(e),t.isCustomSetMaxCacheCount||(t.maxCacheCount=5*t.features.length),t.renderer&&(t._map?t.redrawThematicFeatures(t._map.getBounds()):t.redrawThematicFeatures())},removeFeatures:function(e){this.clearCache(),YR.prototype.removeFeatures.call(this,arguments)},removeAllFeatures:function(){this.clearCache(),YR.prototype.removeAllFeatures.call(this,arguments)},redrawThematicFeatures:function(e){var t=this,n=t.renderer.getHoverOne(),r=null;if(n&&n.refDataID&&(r=n.refDataID),this.options.alwaysMapCRS&&e&&e instanceof BM.a.LatLngBounds){var i=this._map.options.crs;e=BM.a.bounds(i.project(e.getSouthWest()),i.project(e.getNorthEast()))}e=mR.toSuperMapBounds(e),t.renderer.clearAll();for(var o=t.features,a=t.cache,s=t.cacheFields,l=t._map.getZoom(),u=t.maxCacheCount,c=0,f=o.length;c<f;c++){var h=o[c],p=h.geometry.getBounds();if(!e||e.intersectsBounds(p)){var y=h.id+"_zoom_"+l.toString();if(a[y])a[y].updateAndAddShapes();else{var d=t.createThematicFeature(o[c]);if(!(d.getShapesCount()<1)&&(a[y]=d,s.push(y),s.length>u)){var m=s[0];s.splice(0,1),delete a[m]}}}}if(t.renderer.render(),r&&t.options.isHoverAble&&t.options.isMultiHover){var v=this.getShapesByFeatureID(r);this.renderer.updateHoverShapes(v)}},createThematicFeature:function(e){var t=this,n=t.getStyleByData(e);e.style&&t.isAllowFeatureStyle&&(n=be.copyAttributesWithClip(e.style));var r={};r.nodesClipPixel=t.options.nodesClipPixel,r.isHoverAble=t.options.isHoverAble,r.isMultiHover=t.options.isMultiHover,r.isClickAble=t.options.isClickAble,r.highlightStyle=cT.transformStyle(t.highlightStyle);for(var i=new kE(e,t,cT.transformStyle(n),r),o=0;o<i.shapes.length;o++)t.renderer.addShape(i.shapes[o]);return i},redraw:function(){return this.clearCache(),YR.prototype.redraw.apply(this,arguments)},clearCache:function(){this.cache={},this.cacheFields=[]},clear:function(){this.renderer.clearAll(),this.renderer.refresh(),this.removeAllFeatures(),this.clearCache()},getCacheCount:function(){return this.cacheFields.length},setMaxCacheCount:function(e){isNaN(e)||(this.maxCacheCount=e,this.isCustomSetMaxCacheCount=!0)},getShapesByFeatureID:function(e){var t=[],n=this.renderer.getAllShapes();if(!e)return n;for(var r=0,i=n.length;r<i;r++){var o=n[r];o.refDataID&&e===o.refDataID&&t.push(o)}return t}}),XR=QR.extend({initialize:function(e,t){QR.prototype.initialize.call(this,e,t),this.style=[],this.themeField=null,this.styleGroups=[]},getStyleByData:function(e){var t=this,n=e,r=be.copyAttributesWithClip({},t.style),i=t.styleGroups,o=!1,a=null,s=t.styleGroups&&t.styleGroups.length>0;if(t.themeField&&s&&n.attributes){var l=t.themeField,u=n.attributes;for(var c in u)if(l===c){o=!0,a=u[c];break}}if(o)for(var f=0,h=i.length;f<h;f++)if(a.toString()===i[f].value.toString()){var p=i[f].style;r=be.copyAttributesWithClip(r,p)}return r}}),KR=function(e,t){return new XR(e,t)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/BM.a.supermap.uniqueThemeLayer=KR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ZR=QR.extend({initialize:function(e,t){QR.prototype.initialize.call(this,e,t),this.style=[],this.themeField=null,this.styleGroups=[]},getStyleByData:function(e){var t=this,n=e,r=be.copyAttributesWithClip({},t.style),i=t.styleGroups,o=!1,a=null,s=t.styleGroups&&t.styleGroups.length>0;if(t.themeField&&s&&n.attributes){var l=t.themeField,u=n.attributes;for(var c in u)if(l===c){o=!0,a=u[c];break}}if(o)for(var f=0,h=i.length;f<h;f++){if(f===h-1?a>=i[f].start&&a<=i[f].end:a>=i[f].start&&a<i[f].end){var p=i[f].style;r=be.copyAttributesWithClip(r,p)}}return r}}),$R=function(e,t){return new ZR(e,t)};BM.a.supermap.rangeThemeLayer=$R;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var eN=QR.extend({options:{isOverLay:!0,isAvoid:!0},initialize:function(e,t){QR.prototype.initialize.call(this,e,t),BM.a.Util.setOptions(this,t),this.style=[],this.themeField=null,this.styleGroups=[],this.defaultStyle={fontColor:"#000000",fontOpacity:1,fontSize:"12px",fontStyle:"normal",fontWeight:"normal",labelAlign:"cm",labelXOffset:0,labelYOffset:0,labelRotation:0,fill:!1,fillColor:"#ee9900",fillOpacity:.4,stroke:!1,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",labelRect:!0,labelSelect:!0,_isGeoTextStrategyStyle:!0},this.getPxBoundsMode=0,this.labelFeatures=[]},onAdd:function(e){QR.prototype.onAdd.call(this,e),this.container.style.zIndex=200},redrawThematicFeatures:function(e){if(this.features.length>0&&0==this.labelFeatures.length)for(var t=this.setLabelsStyle(this.features),n=0,r=t.length;n<r;n++)this.labelFeatures.push(t[n]);this.features=this.getDrawnLabels(this.labelFeatures),QR.prototype.redrawThematicFeatures.call(this,e)},removeFeatures:function(e){this.labelFeatures=[],QR.prototype.removeFeatures.call(this,arguments)},removeAllFeatures:function(){this.labelFeatures=[],QR.prototype.removeAllFeatures.call(this,arguments)},getDrawnLabels:function(e){for(var t,n,r,i,o=[],a=[],s={labelAlign:"cm",labelXOffset:0,labelYOffset:0},l=this._map,u=l.getSize(),c=l.getZoom(),f=0,h=e.length;f<h;f++){((n=e[f]).isStyleChange||void 0===n.isStyleChange)&&(n=this.setStyle(n));var p=this.getLabelPxLocation(n);if(p.x>=0&&p.x<=u.x&&p.y>=0&&p.y<=u.y){if(n.style.minZoomLevel>-1&&c<=n.style.minZoomLevel)continue;if(n.style.maxZoomLevel>-1&&c>n.style.maxZoomLevel)continue;var y=null;n.isStyleChange?(n.isStyleChange=null,y=this.calculateLabelBounds(n,p)):y=n.geometry.bsInfo.w&&n.geometry.bsInfo.h?this.calculateLabelBounds2(n,p):this.calculateLabelBounds(n,p);var d=new Oe(0,u.y,u.x,0),m=y.length;if(this.options.isAvoid){var v=this.getAvoidInfo(d,y);if(v){if("left"===v.aspectW){n.style.labelXOffset+=v.offsetX;for(var g=0;g<m;g++)y[g].x+=v.offsetX}else if("right"===v.aspectW){n.style.labelXOffset+=-v.offsetX;for(var b=0;b<m;b++)y[b].x+=-v.offsetX}if("top"===v.aspectH){n.style.labelYOffset+=v.offsetY;for(var S=0;S<m;S++)y[S].y+=v.offsetY}else if("bottom"===v.aspectH){n.style.labelYOffset+=-v.offsetY;for(var _=0;_<m;_++)y[_].y+=-v.offsetY}n.isStyleChange=!0}}if(this.options.isOverLay){var w=!1;if(0!=f)for(var O=0;O<a.length;O++)if(this.isQuadrilateralOverLap(y,a[O])){w=!0;break}if(w)continue;a.push(y)}for(var x=[],C=0;C<m-1;C++)x.push(l.containerPointToLatLng(y[C]));var P=x[3],T=x[1],E=new Oe(P.lng,P.lat,T.lng,T.lat).getCenterLonLat(),k=new ct(E.lon,E.lat,n.attributes[this.themeField]);k.calculateBounds(),r=be.cloneObject(n.style),i=be.cloneObject(be.copyAttributes(r,s)),(t=new en(k,n.attributes,i)).id=n.id,t.fid=n.fid,o.push(t)}}return o},getStyleByData:function(e){var t=e;if(t.style=be.copyAttributes(t.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),t.style=be.copyAttributes(t.style,this.style),this.themeField&&this.styleGroups&&t.attributes){var n=this.themeField,r=t.attributes,i=this.styleGroups,o=!1,a=null;for(var s in r)if(n===s){o=!0,a=r[s];break}if(o)for(var l=0,u=i.length;l<u;l++)if(a>=i[l].start&&a<i[l].end){var c=i[l].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),t.style=be.copyAttributes(t.style,c)}t.style.label=t.attributes[this.themeField]}return t.style},setLabelsStyle:function(e){for(var t,n=[],r=0,i=e.length;r<i;r++){var o=e[r];if("SuperMap.Geometry.GeoText"!==o.geometry.CLASS_NAME)return e;(o.geometry.bsInfo.w||o.geometry.bsInfo.h)&&(o.geometry.bsInfo.w=null,o.geometry.bsInfo.h=null,o.geometry.labelWTmp=null),(t=this.setStyle(o)).layer=this.layer,n.push(t)}return n},setStyle:function(e){var t=e;if(t.style=be.copyAttributes(t.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),t.style=be.copyAttributes(t.style,this.style),this.groupField&&this.styleGroups&&t.attributes){var n=this.groupField,r=t.attributes,i=this.styleGroups,o=!1,a=null;for(var s in r)if(n===s){o=!0,a=r[s];break}if(o)for(var l=0,u=i.length;l<u;l++)if(a>=i[l].start&&a<i[l].end){var c=i[l].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),t.style=be.copyAttributes(t.style,c)}}return t.style.label=t.geometry.text,t},getLabelPxLocation:function(e){var t=e.geometry,n=e.style,r=t.getCentroid(),i=this._map.latLngToContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(BM.a.point(r.x,r.y)):BM.a.latLng(r.y,r.x)),o=BM.a.point(i.x,i.y);if(n.labelXOffset||n.labelYOffset){var a=isNaN(n.labelXOffset)?0:n.labelXOffset,s=isNaN(n.labelYOffset)?0:n.labelYOffset,l=o.add(BM.a.point(a,-s));return BM.a.point(l.x,l.y)}return BM.a.point(o.x,o.y)},calculateLabelBounds:function(e,t){var n=e.geometry,r=null,i=null;if(0==this.getPxBoundsMode)r=n.getLabelPxBoundsByText(t,e.style);else{if(1!==this.getPxBoundsMode)return null;i=this.getLabelInfo(e.geometry.getCentroid(),e.style),r=n.getLabelPxBoundsByLabel(t,i.w,i.h,e.style)}var o=[];return o=e.style.labelRotation%180==0?[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.right,y:r.bottom},{x:r.left,y:r.bottom},{x:r.left,y:r.top}]:this.rotationBounds(r,t,e.style.labelRotation),n.bounds=new Oe(o[1].x,o[3].y,o[2].x,o[4].y),o},calculateLabelBounds2:function(e,t){var n,r,i,o,a,s=e.geometry.bsInfo,l=e.style,u=be.cloneObject(t);if(l.labelAlign&&"cm"!==l.labelAlign)switch(l.labelAlign){case"lt":u.x+=s.w/2,u.y+=s.h/2;break;case"lm":u.x+=s.w/2;break;case"lb":u.x+=s.w/2,u.y-=s.h/2;break;case"ct":u.y+=s.h/2;break;case"cb":u.y-=s.h/2;break;case"rt":u.x-=s.w/2,u.y+=s.h/2;break;case"rm":u.x-=s.w/2;break;case"rb":u.x-=s.w/2,u.y-=s.h/2}r=u.x-s.w/2,i=u.y+s.h/2,a=l.fontStyle&&"italic"===l.fontStyle?u.x+s.w/2+parseInt(parseFloat(l.fontSize)/2):u.x+s.w/2,o=u.y-s.h/2,n=new Oe(r,i,a,o);var c=[];return c=l.labelRotation%180==0?[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.right,y:n.bottom},{x:n.left,y:n.bottom},{x:n.left,y:n.top}]:this.rotationBounds(n,t,l.labelRotation),e.geometry.bounds=new Oe(c[1].x,c[3].y,c[2].x,c[4].y),c},getLabelInfo:function(e,t){var n={l:"left",r:"right",t:"top",b:"bottom"},r={l:0,r:-1,t:0,b:-1};t=be.extend({fontColor:"#000000",labelAlign:"cm"},t);var i=this.getLocalXY(e),o=0;if(t.labelXOffset||t.labelYOffset){var a=isNaN(t.labelXOffset)?0:t.labelXOffset,s=isNaN(t.labelYOffset)?0:t.labelYOffset;i[0]+=a,i[1]-=s}var l=document.createElement("canvas");l.globalAlpha=0,l.lineWidth=1;var u=l.getContext("2d");u.fillStyle=t.fontColor,u.globalAlpha=t.fontOpacity||1;var c,f,h,p=[t.fontStyle?t.fontStyle:"normal","normal",t.fontWeight?t.fontWeight:"normal",t.fontSize?t.fontSize:"1em",t.fontFamily?t.fontFamily:"sans-serif"].join(" "),y=t.label.split("\n"),d=y.length;if(u.fillText){u.font=p,u.textAlign=n[t.labelAlign[0]]||"center",u.textBaseline=n[t.labelAlign[1]]||"middle",null==(c=r[t.labelAlign[1]])&&(c=-.5),f=u.measureText("Mg").height||u.measureText("xx").width,i[1]+=f*c*(d-1);for(var m=0;m<d;m++)o<(h=u.measureText(y[m]).width)&&(o=h)}else if(u.mozDrawText){u.mozTextStyle=p,null==(c=r[t.labelAlign[1]])&&(c=-.5),f=u.mozMeasureText("xx"),i[1]+=f*(1+c*d);for(var v=0;v<d;v++)o<(h=u.measureText(y[v]).width)&&(o=h)}var g={};return o?(g.w=o,g.h=t.fontSize,g.rows=y.length,g):null},rotationBounds:function(e,t,n){var r=BM.a.point(e.left,e.top),i=BM.a.point(e.right,e.top),o=BM.a.point(e.right,e.bottom),a=BM.a.point(e.left,e.bottom),s=[];s.push(this.getRotatedLocation(r.x,r.y,t.x,t.y,n)),s.push(this.getRotatedLocation(i.x,i.y,t.x,t.y,n)),s.push(this.getRotatedLocation(o.x,o.y,t.x,t.y,n)),s.push(this.getRotatedLocation(a.x,a.y,t.x,t.y,n));for(var l=[],u=0;u<s.length;u++)l.push({x:s[u].x,y:s[u].y});return l.push({x:s[0].x,y:s[0].y}),l},getRotatedLocation:function(e,t,n,r,i){var o,a,s={};return t=-t,r=-r,i=-i,o=(e-n)*Math.cos(i/180*Math.PI)-(t-r)*Math.sin(i/180*Math.PI)+n,a=(e-n)*Math.sin(i/180*Math.PI)+(t-r)*Math.cos(i/180*Math.PI)+r,s.x=o,s.y=-a,s},getAvoidInfo:function(e,t){if(5!==t.length)return null;for(var n=[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.right,y:e.bottom},{x:e.left,y:e.bottom},{x:e.left,y:e.top}],r=!1,i=n.length,o=t.length,a=0,s=0,l="",u="",c=0;c<i-1;c++)for(var f=0;f<o-1;f++){"SuperMap.Geometry.Point"===be.lineIntersection(n[c],n[c+1],t[f],t[f+1]).CLASS_NAME&&(h(t[f]),h(t[f+1]),r=!0)}return r?{aspectW:u,aspectH:l,offsetX:a,offsetY:s}:null;function h(t){if(!e.contains(t.x,t.y)){if(t.y<e.top){var n=Math.abs(e.top-t.y);n>s&&(s=n,l="top")}if(t.y>e.bottom){var r=Math.abs(t.y-e.bottom);r>s&&(s=r,l="bottom")}if(t.x<e.left){var i=Math.abs(e.left-t.x);i>a&&(a=i,u="left")}if(t.x>e.right){var o=Math.abs(t.x-e.right);o>a&&(a=o,u="right")}}}},isQuadrilateralOverLap:function(e,t){var n=e.length,r=t.length;if(5!==n||5!==r)return null;for(var i=!1,o=0;o<n;o++)if(this.isPointInPoly(e[o],t)){i=!0;break}for(var a=0;a<r;a++)if(this.isPointInPoly(t[a],e)){i=!0;break}for(var s=0;s<n-1&&!i;s++)for(var l=0;l<r-1;l++){if("SuperMap.Geometry.Point"===be.lineIntersection(e[s],e[s+1],t[l],t[l+1]).CLASS_NAME){i=!0;break}}return i},isPointInPoly:function(e,t){for(var n=!1,r=-1,i=t.length,o=i-1;++r<i;o=r)(t[r].y<=e.y&&e.y<t[o].y||t[o].y<=e.y&&e.y<t[r].y)&&e.x<(t[o].x-t[r].x)*(e.y-t[r].y)/(t[o].y-t[r].y)+t[r].x&&(n=!n);return n}}),tN=function(e,t){return new eN(e,t)};BM.a.supermap.labelThemeLayer=tN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var nN=lR.extend({initialize:function(e,t){lR.prototype.initialize.call(this,e,t)},getFeaturesByIDs:function(e,t,n){var r=this;new Mh(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},getFeaturesByBounds:function(e,t,n){var r=this;new zf(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},getFeaturesByBuffer:function(e,t,n){var r=this;new nh(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},getFeaturesBySQL:function(e,t,n){var r=this;new Jh(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},getFeaturesByGeometry:function(e,t,n){var r=this;new mh(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},editFeatures:function(e,t){if(e&&e.dataSourceName&&e.dataSetName){var n=this,r=n.url,i=e.dataSourceName,o=e.dataSetName;r=be.urlPathAppend(r,"datasources/"+i+"/datasets/"+o),new Cs(r,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(n._processParams(e))}},_processParams:function(e){if(!e)return{};e.returnContent=null==e.returnContent||e.returnContent,e.fromIndex=e.fromIndex?e.fromIndex:0,e.toIndex=e.toIndex?e.toIndex:-1,e.isUseBatch=null!=e.isUseBatch&&e.isUseBatch,e.bounds&&(e.bounds=mR.toSuperMapBounds(e.bounds)),e.geometry&&(e.geometry=gR(e.geometry)),e.editType&&(e.editType=e.editType.toLowerCase());var t=this;if(e.features){var n=[];BM.a.Util.isArray(e.features)?e.features.map(function(e){return n.push(t._createServerFeature(e)),e}):n.push(t._createServerFeature(e.features)),e.features=n}return e},_createServerFeature:function(e){var t,n={},r=[],i=[];for(var o in(t=e||{}).properties)r.push(o),i.push(t.properties[o]);return n.fieldNames=r,n.fieldValues=i,t.id&&(n.id=t.id),n.geometry=gR(t),n},_processFormat:function(e){return e||i.GEOJSON}}),rN=function(e,t){return new nN(e,t)};BM.a.supermap.featureService=rN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var iN=BM.a.Path.extend({options:{fontStyle:"normal",fontWeight:"normal",fontSize:"1em",fontFamily:"sans-serif",textAlign:"center",textBaseline:"middle",vfactor:-.5,labelRotation:0,globalAlpha:1,label:""},initialize:function(e,t){BM.a.Util.setOptions(this,t),this._latlng=e},setLatLng:function(e){return this._latlng=e,this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._clickTolerance(),t=[e,e];this._pxBounds=new BM.a.Bounds(this._point.subtract(t),this._point.add(t))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateUnicode(this)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._clickTolerance()}}),oN=function(e,t){return new iN(e,t)};BM.a.Canvas.include({_updateUnicode:function(e){if(this._drawing){var t={x:e._point.x,y:e._point.y},n=this._ctx,r=[e.options.fontStyle,"normal",e.options.fontWeight,e.options.fontSize,e.options.fontFamily].join(" "),i=e.options.label.replace(/^&#x/,""),o=(i=String.fromCharCode(parseInt(i,16))).split("\n"),a=o.length;if(n.fillStyle=e.options.fontColor,n.globalAlpha=1,e.options.fontOpacity>=0&&e.options.fontOpacity<1&&(n.globalAlpha=e.options.fontOpacity),n.fillText){n.font=r,n.textAlign=e.options.textAlign,n.textBaseline=e.options.textBaseline;var s=e.options.vfactor,l=n.measureText("Mg").height||n.measureText("xx").width;t.y+=l*s*(a-1);for(var u=0;u<a;u++)0!=e.options.labelRotation?(n.save(),n.translate(t.x,t.y),n.rotate(e.options.labelRotation*Math.PI/180),n.fillText(o[u],0,l*u),n.restore()):n.fillText(o[u],t.x,t.y)}else if(n.mozDrawText){n.mozTextStyle=r;var c=e.options.textAlign,f=e.options.vfactor,h=n.mozMeasureText("xx");t.y+=h*(1+f*a);for(var p=0;p<a;p++){var y=t.x+c*n.mozMeasureText(o[p]),d=t.y+p*h;n.translate(y,d),n.mozDrawText(o[p]),n.translate(-y,-d)}}}}}),BM.a.supermap.unicodeMarker=oN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var aN=BM.a.LayerGroup.extend({options:{map:"map",server:"https://www.supermapol.com",featureLayerPopupEnable:!0,featureLayerPopup:null,credentialValue:null,credentialKey:"key",attribution:sR.Online.attribution},defaultFeatureLayerPopup:function(e){return e.feature.properties.attributes.title+":"+e.feature.properties.attributes.description},initialize:function(e,t){(e||t)&&(this._layers={},BM.a.setOptions(this,t),this.id=e,this.load(),this.cartoCSSToLeaflet=new VR)},load:function(){this.options.server.indexOf("http://")<0&&this.options.server.indexOf("https://")<0&&(this.options.server="http://"+this.options.server);var e=this.options.server+"/web/maps/"+this.id+".json";this.options.credentialValue&&(e+="?"+this.options.credentialKey+"="+this.options.credentialValue);var t=this;tr.get(e).then(function(e){return e.json()}).then(function(e){if(e){var n=e.layers;t.mapInfo=e,t.createLayersByJson(n)}})},addLayerWrapper:function(e,t,n){return t&&this.createMap(n),this.addLayer(e),e.labelLayer&&this.addLayer(e.labelLayer),this},createLayersByJson:function(e){if(BM.a.Util.isArray(e)&&0!==e.length){this.layers=[];for(var t=[],n=0;n<e.length;n++){var r=e[n];r._originIndex=n,"BASE_LAYER"===(r.layerType=r.layerType||"BASE_LAYER")?(r.isBaseLayer=!0,this.createLayer(r.type,r)):t.unshift(r)}for(;t.length>0;){var i=t.pop(),o=i.type,a=i.layerType=i.layerType||"BASE_LAYER";"OVERLAY_LAYER"!==a&&(o=a),this.createLayer(o,i)}this.fire("maploaded",{map:this._map})}},createCRS:function(e,t,n,r,i){return e<0?new zM({bounds:i,origin:r,resolutions:n}):910112===e||910102===e?BM.a.CRS.BaiduCRS:(910111===e&&(e=3857),910101===e&&(e=4326),BM.a.Proj.CRS("EPSG:"+e,{origin:r,resolutions:n,bounds:i}))},createMap:function(e){var t=e.crs||BM.a.CRS.EPSG3857,n=BM.a.latLngBounds(t.unproject(e.bounds.min),t.unproject(e.bounds.max));this._map=BM.a.map(this.options.map,{center:n.getCenter(),maxZoom:e.maxZoom||22,minZoom:e.minZoom||0,zoom:e.zoom||0,crs:t,renderer:BM.a.canvas()}),t instanceof zM?this._map.setZoom(e.zoom?e.zoom+2:2,{maxZoom:e.maxZoom||22}):this._map.fitBounds(n,{maxZoom:e.maxZoom||22})},getResolutionsFromScales:function(e,t,n,r){for(var i=[],o=0;o<e.length;o++)i.push(BM.a.Util.GetResolutionFromScaleDpi(e[o],t,n,r));return i},createLayer:function(e,t){var n=t.prjCoordSys,r=n&&n.epsgCode||this.mapInfo.epsgCode,i=this.mapInfo.center||t.center,o=this.mapInfo.level||t.level,a=this.mapInfo.extent||t.bounds,s=t.scales,l=t.isBaseLayer,u=t.opacity,c=BM.a.bounds([a.leftBottom.x,a.leftBottom.y],[a.rightTop.x,a.rightTop.y]),f=t.bounds?BM.a.bounds([t.bounds.leftBottom.x,t.bounds.leftBottom.y],[t.bounds.rightTop.x,t.bounds.rightTop.y]):c;i||(i=f.getCenter());var h,p=BM.a.point(f.min.x,f.max.y),y=s?this.getResolutionsFromScales(s,96,t.units):null,d=this.createCRS(r,n?n.type:"",y,p,f),m={bounds:c,center:BM.a.point(i.x,i.y),crs:d,zoom:o};switch(e){case"SUPERMAP_REST":h=NR(t.url,{transparent:!0,opacity:u});break;case"SUPERMAP_REST_VECTOR":break;case"TIANDITU_VEC":case"TIANDITU_IMG":case"TIANDITU_TER":m.crs=4326===r?BM.a.CRS.TianDiTu_WGS84:BM.a.CRS.TianDiTu_Mercator,m.minZoom=1,m.zoom=1+m.zoom,h=this.createTiandituLayer(t);break;case"BAIDU":m.crs=BM.a.CRS.BaiduCRS,m.zoom=3+m.zoom,m.minZoom=3,h=CR();break;case"BING":break;case"WMS":h=this.createWmsLayer(t);break;case"WMTS":m.resolutions=this.getResolutionsFromScales(s,90.71446714322,t.units);var v=t.identifier,g=v.substring(v.indexOf("_")+1);h=AR(t.url,{layer:g,style:"default",tilematrixSet:v,format:"image/png"});break;case"CLOUD":m.crs=BM.a.CRS.EPSG3857,m.zoom=3+m.zoom,m.minZoom=3,h=TR(t.url,{opacity:u});break;case"MARKER_LAYER":h=this.createMarkersLayer(t,d);break;case"FEATURE_LAYER":"ANIMATORVECTOR"==t.identifier||(h="THEME"==t.identifier?this.createThemeLayer(t):this.createVectorLayer(t,d));break;default:throw new Error("unSupported Layer Type")}h&&t.isVisible&&this.addLayerWrapper(h,l,m)},createTiandituLayer:function(e){var t=e.type.split("_")[1].toLowerCase(),n="OVERLAY_LAYER"===e.layerType;return new LR({layerType:t,isLabel:n})},createMarkersLayer:function(e,t){var n=this,r=e.markers||[],i=BM.a.geoJSON(BM.a.Util.toGeoJSON(r),{pointToLayer:function(e,t){var n=new BM.a.Marker(t);return n.setStyle=function(e){e&&n.setIcon(e)},n},coordsToLatLng:function(e){var n=t.unproject(BM.a.point(e[0],e[1]));return new BM.a.LatLng(n.lat,n.lng,e[2])},style:function(e){return n.cartoCSSToLeaflet.getStyleFromiPortalMarker(e.properties.icon)}});return this.options.featureLayerPopupEnable&&i.bindPopup(this.options.featureLayerPopup||this.defaultFeatureLayerPopup),i},createWmsLayer:function(e){var t=e.url,n=e.opacity,r=e.subLayers;return r&&"undefined"!==r&&"null"!==r||(r="0"),BM.a.tileLayer.wms(t,{layers:r,format:"image/png",transparent:!0,noWrap:!0,opacity:n})},createVectorLayer:function(e,t){var n=this,r=e.style,o=e.opacity,a=this,s=function(e){var n=t.unproject(BM.a.point(e[0],e[1]));return new BM.a.LatLng(n.lat,n.lng,e[2])};if(!e.url){var l=BM.a.geoJSON(BM.a.Util.toGeoJSON(e.features),{pointToLayer:function(e,t){var n=new BM.a.Marker(t);return n.setStyle=function(e){e&&n.setIcon(e)},n},coordsToLatLng:s,style:function(e){var t=a.cartoCSSToLeaflet.getStyleFromiPortalStyle(r||{},e.geometry.type,e.properties.style);return t&&t.dashArray&&0==t.dashArray.length&&(t.dashArray=null),t},opacity:o});return this.options.featureLayerPopupEnable&&l.bindPopup(this.options.featureLayerPopup||this.defaultFeatureLayerPopup),l}for(var u=e.url,c=e.name,f=e.features,h=0;h<f.length;h++){var p=f[h];p.visible&&this.getFeaturesBySQL(u,c,p.name,"",i.GEOJSON,function(e){var t=BM.a.geoJSON(e.result,{pointToLayer:function(e,t){var n=new BM.a.Marker(t);return n.setStyle=function(e){e&&n.setIcon(e)},n},coordsToLatLng:s,style:function(e){return this.cartoCSSToLeaflet.getStyleFromiPortalStyle(r||{},e.geometry.type,e.properties.style)},opacity:o});n.options.featureLayerPopupEnable&&t.bindPopup(a.options.featureLayerPopup||a.defaultFeatureLayerPopup),n.addLayer(t)})}},getFeaturesBySQL:function(e,t,n,r,i,o){var a=new Dh({queryParameter:{name:n+"@"+t,attributeFilter:r=r||"SMID > 0"},datasetNames:[t+":"+n],fromIndex:0,toIndex:1e5});rN(e).getFeaturesBySQL(a,o,i)},createThemeLayer:function(e){var t,n=this,r=e.themeSettings&&JSON.parse(e.themeSettings),i=r.type;if(e.themeSettings=r,(t="HEAT"===i?this.createHeatLayer(e,r):"UNIQUE"===i?this.createUniqueLayer(e,r):"RANGE"===i?this.createRangeLayer(e,r):this.createBaseThemeLayer(e,r))&&(this.addFeature2ThemeLayer(e,t),t.on("add",function(e){n.registerThemeEvent(e.target)})),r&&r.labelField){var o=this.createLabelLayer(e,r);o.on("add",function(e){n.registerThemeEvent(e.target)}),t.labelLayer=o}return t},createBaseThemeLayer:function(e,t){var n=e.style,r=e.opacity,i=t.vectorType,o=n.pointStyle;o.fill="LINE"!==i;var a={};a.radius=o.pointRadius,a.color=o.strokeColor,a.opacity=o.strokeOpacity,a.lineCap=o.strokeLineCap,a.weight=o.strokeWidth,a.fillColor=o.fillColor,a.fillOpacity=o.fillOpacity;var s=function(e,t){return BM.a.circleMarker(t,a)};return o.unicode&&(s=function(e,t){return new iN(t,o)}),BM.a.geoJSON({type:"GeometryCollection",geometries:[]},{pointToLayer:s,opacity:r})},createUniqueLayer:function(e,t){for(var n=e.title,r=t.field,i=[],o=t.settings,a=e.isVisible,s=e.opacity,l=t.vectorType,u=0;u<o.length;u++){var c={};c.value=o[u].value,c.style=o[u].style,i.push(c)}var f=new XR(n,{opacity:s,visibility:a});this.registerThemeEvent(f),f.style=e.style.pointStyle,f.style.fill="LINE"!==l,f.style.stroke=!0,f.themeField=r,f.styleGroups=i;var h=this;return f.on("click",function(e){if(e.target&&e.target.refDataID){var t=f.getFeatureById(e.target.refDataID);h.events.triggerEvent("uniquefeatureclicked",t,f)}}),f},createRangeLayer:function(e,t){var n=e.title,r=t.field,i=[],o=t.settings,a=e.isVisible,s=e.opacity,l=t.vectorType,u=e.style.pointStyle;u.fill="LINE"!==l;for(var c=0;c<o.length;c++){var f={};f.start=o[c].start,f.end=o[c].end,f.style=o[c].style,i.push(f)}var h=new ZR(n,{visibility:a,opacity:s});return this.registerThemeEvent(h),h.style=e.style.pointStyle,h.style.stroke=!0,h.themeField=r,h.styleGroups=i,h},createLabelLayer:function(e,t){var n,r=e.title,i=t.labelField,o=t.settings,a=e.isVisible;n=!o||o.length>0?{fillColor:"#ffffff"}:o[0].style;var s=BM.a.Util.extend(new _x,n);s.fontWeight="bold",s.fontSize="14px",s.labelRect=!0,s.strokeColor=s.fillColor,s.fontColor=t.labelColor,t.labelFont&&(s.fontFamily=t.labelFont);var l=new eN(r,{visibility:a,opacity:.7});return this.registerThemeEvent(l),l.style=s,l.themeField=i,l.styleGroups=[],l},createHeatLayer:function(e,t){for(var n,r=t.colors||["blue","cyan","lime","yellow","red"],i={},o=0,a=r.length,s=1;o<a;o++)i[s/a]=r[o],s++;var l=t.settings[0].radius;return"千米"!==t.heatUnit&&"km"!==t.heatUnit||(l=1e3*t.heatRadius),t.settings[0]&&t.settings[0].featureWeight&&(n=t.settings[0].featureWeight),BM.a.heatLayer([],{radius:l/2,minOpacity:e.opacity,gradient:i,blur:l/2,featureWeight:n})},addFeature2ThemeLayer:function(e,t){var n=this;if("FEATURE_LAYER"===e.layerType&&"THEME"===e.identifier){var r=this,o=!!e.datasourceName,a=e.cartoCSS;if(a)var s=this.getCartoCSS2Obj(a).needTransform,l=this.getCartoCSS2Obj(a).isAddFile;var u,c,f,h=e.url,p=e.credential,y=e.themeSettings,d=y.filter;if(l){var m=JSON.parse(e.datasourceName),v=this.getSQLFromFilter(d);if(h)this.getFeatureFromFileAdded(e,function(n){var i,o=[];if("EXCEL"===n.type||"CSV"===n.type)for(var a=0,l=(i=r.parseFeatureFromEXCEL.apply(r,[n.content.rows,n.content.colTitles,!1,m])).length;a<l;a++)DR()({attr:i[a].attributes},v).length>0&&o.push(i[a]);else for(var u=0,c=(i=r.parseFeatureFromJson(n.content)).length;u<c;u++)DR()({attr:i[u].attributes},v).length>0&&o.push(i[u]);var f=e.prjCoordSys&&e.prjCoordSys.epsgCode;s?r.changeFeatureLayerEpsgCode(f,"4326",t,o,function(e){k(e)}):k(o)},function(){});else{for(var g=[],b=e.features,S=0,_=b.length;S<_;S++){var w=b[S];if(DR()({attr:w.attributes},v).length>0){var O=w.geometry.points[0].x,x=w.geometry.points[0].y,C=new Xe(O,x),P=new en(C,w.attributes,w.style);g.push(P)}}k(g)}}else if(o){var T=e.datasourceName;f=(c=(u=e.subLayers&&JSON.parse(e.subLayers)).length&&u.length>0?u[0]:u)&&c.name,this.getFeaturesBySQL(e.url,T,f,y.filter,i.ISERVER,function(r){var i,o,a=r.result,l=[];if(a&&a.features){for(var u=0,c=(i=a.features).length;u<c;u++)o=ab.fromJson(i[u]).toFeature(),l.push(o);var f=e.prjCoordSys&&e.prjCoordSys.epsgCode;s?n.changeFeatureLayerEpsgCode(f,"4326",t,l,function(e){k(e)}):k(i)}})}else{f=(c=(u=e.subLayers&&JSON.parse(e.subLayers)).length&&u.length>0?u[0]:u)&&c.name;var E=e.prjCoordSys&&e.prjCoordSys.epsgCode;this.getFeaturesBySQL(h,p,f,d,i.ISERVER,function(e){s?r.changeFeatureLayerEpsgCode(E,"4326",t,e,function(e){k(e)}):k(e)})}}function k(n){if(t&&t.labelLayer instanceof eN&&r.addFeature2LabelLayer(t.labelLayer,n,e),BM.a.HeatLayer&&t instanceof BM.a.HeatLayer){for(var i=[],o=0,a=n.length;o<a;o++){var s=n[o].geometry;i[o]=BM.a.latLng(s.y,s.x),t.options.featureWeight&&(i[o]=[i[o].lat,i[o].lng,parseFloat(n[o].attributes[t.options.featureWeight])])}t.setLatLngs(i)}else t instanceof BM.a.GeoJSON?t.addData((new Rn).toGeoJSON(n)):t.addFeatures(n)}},addFeature2LabelLayer:function(e,t,n){if(t){for(var r,i,o=n.themeSettings,a=(o="string"==typeof o?JSON.parse(n.themeSettings):n.themeSettings).labelField,s=e.style,l=[],u=n.styleString&&JSON.parse(n.styleString),c=0;c<t.length;c++){i=this.getLabelLngLat(o.vectorType,t[c]),this.setLabelOffset(o.vectorType,u,t[c],s);var f=t[c].attributes;r=new qR([i.lat,i.lng,f[a]],f),l.push(r)}e.style=s,e.addFeatures(l)}},setLabelOffset:function(e,t,n,r){if("POINT"===e){var i=t.pointStyle.pointRadius||0,o=t.pointStyle.strokeWidth||0,a=parseInt(t.pointStyle.fontSize)||0;r.labelXOffset=0,r.labelYOffset=t.pointStyle.unicode?20+a:25+(i+o)}},getLabelLngLat:function(e,t){var n={};if("POINT"===e){var r=t.geometry;n.lng=r.x,n.lat=r.y}else if("LINE"===e){var i,o,a=t.geometry.components;if(a[0].x)i=a.length,o=parseInt(i/2),n.lng=a[o].x,n.lat=a[o].y;else{var s=a[0].components;i=s.length,o=parseInt(i/2),n.lng=s[o].x,n.lat=s[o].y}}else{var l=t.geometry.getCentroid();n.lng=l.x,n.lat=l.y}return n},changeFeatureLayerEpsgCode:function(e,t,n,r,i){var o,a,s=this,l=[];if(e&&t){if(r&&r.length>0){for(o=0,a=r.length;o<a;o++){var u=r[o].geometry.getVertices();l=l.concat(u)}e="EPSG:"+e,t="EPSG:"+t,s.coordsTransform(e,t,l,function(e,t){return function(e){var n=e.length;for(o=0;o<n;o++){var r=l[o],a=e[o];r.x=a.x,r.y=a.y,r.calculateBounds()}for(o=0,n=t.length;o<n;o++){var u=t[o].geometry;u.components&&s.calculateComponents(u.components),u.calculateBounds()}i&&i.call(s,t)}}(0,r))}return!0}},calculateComponents:function(e){if(e)if(e.components)this.calculateComponents(e.components);else for(var t=0,n=e.length;t<n;t++){var r=e[t];r.components&&this.calculateComponents(r.components),r.calculateBounds()}},coordsTransform:function(e,t,n,r){var i,o=this.SERVER_TYPE_MAP[e],a=this.SERVER_TYPE_MAP[t];if(e!==t&&o&&a){var s=this.SERVER_TYPE_MAP["EPSG:3857"],l=this.SERVER_TYPE_MAP["EPSG:4326"];if(o!==s&&o!==l||a!==s&&a!==l){var u=o+"_"+a;this.postTransform(u,n,r)}else this.projTransform(e,t,n,r)}else{if(n&&void 0!==n.length){i=[];for(var c=0,f=n.length;c<f;c++){var h={x:n[c].x,y:n[c].y};i.push(h)}}else i={x:n.x,y:n.y};r&&r.call(this,i)}},projTransform:function(e,t,n,r){var i;if(Yj){if(n&&void 0!==n.length){i=[];for(var o=0,a=n.length;o<a;o++){var s=Yj(e,t,[n[o].x,n[o].y]);i.push({x:s[0],y:s[1]})}}else i={x:(i=Yj(e,t,[n.x,n.y]))[0],y:i[1]};r&&(this.fire("coordconvertsuccess",{newCoor:i}),r.call(this,i))}},postTransform:function(e,t,n){var r=this,i=[];if(!e)return n.call(this,null);if(t&&void 0!==t.length)for(var o=0,a=t.length;o<a;o++)i.push({x:t[o].x,y:t[o].y});else i=[{x:t.x,y:t.y}];if(0===i.length)return n.call(this,null);var s={convertType:e,points:i},l=this.server+"/apps/viewer/coordconvert.json";s=JSON.stringify(s);var u={};!be.isInTheSameDomain(l)&&this.proxy&&(u.proxy=this.proxy),tr.post(l,s,u).then(function(e){return e.json()}).then(function(e){var i=e;t||void 0===t.length||(i=i[0]),r.fire("coordconvertsuccess",{newCoors:i}),n.call(r,i)}).catch(function(e){r.actived&&r.fire("coordconvertfailed",{err:e})})},getSQLFromFilter:function(e){return e?" *  where ("+(e=e.replace(/=/g,"==").replace(/and|AND/g,"&&").replace(/or|OR/g,"||").replace(/>==/g,">=").replace(/<==/g,"<="))+")":" * where (1==1||1>=0)"},getAttributesObjFromTable:function(e,t){if(0!==e.length&&0!==t.length){for(var n=[],r=0;r<e.length;r++){for(var i={},o=0;o<t.length;o++)i[t[o]]=e[r][o];n.push(i)}return n}},parseFeatureFromEXCEL:function(e,t,n,r){for(var i=this.getAttributesObjFromTable(e,t),o=[],a=0,s=i.length;a<s;a++){var l=i[a][r.lon],u=i[a][r.lat];if(l&&u){l=parseFloat(l),u=parseFloat(u);var c,f=new Xe(l,u);c=n?new JR(f,i[a],null):new en(f,i[a],null),o.push(c)}}return o},parseFeatureFromJson:function(e){var t=new Rn,n=t.read(e);if(null==n){var r=JSON.parse(e.replace(/'/,'"'));(r.isAnalyseResult||"MapEditor"===r.type||"DataInsights"===r.type||"ISERVER"===r.type)&&(r=r.data.recordsets[0].features),n=(t=new Rn).read(r)}for(var i=0,o=n.length;i<o;i++)n[i].attributes=n[i].attributes.properties||n[i].attributes;return n},getFeatureFromFileAdded:function(e,t,n,r){var i=r?e.url+"?currentPage=1&&pageSize=9999999":e.url;tr.get(i).then(function(e){return e.json()}).then(function(e){t&&t(e)}).catch(function(e){return n&&n(e)})},getCartoCSS2Obj:function(e){var t,n=!1;return e.indexOf("}")>-1?(n=(e=JSON.parse(e)).needTransform,t=e.isAddFile):"needTransform"===e?(n=!0,t=!1):t="true"===e,{isAddFile:t,needTransform:n}},registerThemeEvent:function(e){var t=this;e.on("click",function(n){var r;e.map&&(t.selectedFeature&&(t.fire("featureunselected",{feature:t.selectedFeature}),t.selectedFeature=null),n.target&&n.target.refDataID&&(r=e.getFeatureById(n.target.refDataID)),r&&(t.selectedFeature=r,t.fire("featureselected",{feature:r})))}),e.on("mousemove",function(n){var r;e.map&&(n.target&&n.target.refDataID&&(n.target&&n.target.refDataID&&(r=e.getFeatureById(n.target.refDataID)),r&&t.fire("featuremousemove",{feature:r})))})},SERVER_TYPE_MAP:{"EPSG:4326":"WGS84","EPSG:3857":"MERCATOR","EPSG:900913":"MERCATOR","EPSG:102113":"MERCATOR","EPSG:910101":"GCJ02","EPSG:910111":"GCJ02MERCATOR","EPSG:910102":"BD","EPSG:910112":"BDMERCATOR"}}),sN=function(e,t){return new aN(e,t)};BM.a.supermap.webmap=sN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var lN=lR.extend({options:{geometry:null,prjCoordSys:null,excludeField:null},initialize:function(e,t){t=t||{},BM.a.setOptions(this,t),t.projection&&(this.options.prjCoordSys=t.projection),lR.prototype.initialize.call(this,e,t),this.dataFlow=new Ma(e,t),this.dataFlow.events.on({broadcastSocketConnected:this._defaultEvent,broadcastSocketError:this._defaultEvent,broadcastFailed:this._defaultEvent,broadcastSucceeded:this._defaultEvent,subscribeSocketConnected:this._defaultEvent,subscribeSocketError:this._defaultEvent,messageSucceeded:this._defaultEvent,setFilterParamSucceeded:this._defaultEvent,scope:this})},initBroadcast:function(){return this.dataFlow.initBroadcast(),this},broadcast:function(e){this.dataFlow.broadcast(e)},initSubscribe:function(){return this.dataFlow.initSubscribe(),this},setExcludeField:function(e){return this.dataFlow.setExcludeField(e),this.options.excludeField=e,this},setGeometry:function(e){return this.dataFlow.setGeometry(e),this.options.geometry=e,this},unSubscribe:function(){this.dataFlow.unSubscribe()},unBroadcast:function(){this.dataFlow.unBroadcast()},_defaultEvent:function(e){this.fire(e.eventType||e.type,e)}}),uN=function(e,t){return new lN(e,t)};BM.a.supermap.dataFlowService=uN;var cN=n(6);function fN(e){return(fN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pN(e,t){return!t||"object"!==fN(t)&&"function"!=typeof t?yN(e):t}function yN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dN(e,t,n){return(dN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mN(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function mN(e){return(mN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vN(e,t){return(vN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var gN=cN.baiduMapLayer?cN.baiduMapLayer.__proto__:Function,bN=function(e){function t(e,n,r,i){var o;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=pN(this,mN(t).call(this,e,r,i)),!gN)return pN(o);var a=yN(o);return i=i||{},a.init(i),a.argCheck(i),o.canvasLayer=n,o.clickEvent=o.clickEvent.bind(yN(o)),o.mousemoveEvent=o.mousemoveEvent.bind(yN(o)),o._moveStartEvent=o.moveStartEvent.bind(yN(o)),o._moveEndEvent=o.moveEndEvent.bind(yN(o)),o._zoomStartEvent=o.zoomStartEvent.bind(yN(o)),o.bindEvent(),o}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vN(e,t)}(t,gN),n=t,(r=[{key:"clickEvent",value:function(e){var n=this.map.containerPointToLayerPoint([0,0]),r=this.devicePixelRatio=this.canvasLayer.devicePixelRatio=window.devicePixelRatio||1,i=e.layerPoint;dN(mN(t.prototype),"clickEvent",this).call(this,BM.a.point((i.x-n.x)/r,(i.y-n.y)/r),e)}},{key:"mousemoveEvent",value:function(e){var n=e.layerPoint;dN(mN(t.prototype),"mousemoveEvent",this).call(this,n,e)}},{key:"bindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.on("click",this.clickEvent),this.options.methods.mousemove&&e.on("mousemove",this.mousemoveEvent)),this.map.on("movestart",this._moveStartEvent),this.map.on("moveend",this._moveEndEvent),this.map.on("zoomstart",this._zoomStartEvent)}},{key:"destroy",value:function(){this.unbindEvent(),this.clearData(),this.animator&&this.animator.stop(),this.animator=null,this.canvasLayer=null}},{key:"unbindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.off("click",this.clickEvent),this.options.methods.mousemove&&e.off("mousemove",this.mousemoveEvent)),this.map.off("movestart",this._moveStartEvent),this.map.off("moveend",this._moveEndEvent),this.map.off("zoomstart",this._zoomStartEvent)}},{key:"getContext",value:function(){return this.canvasLayer.getCanvas().getContext(this.context)}},{key:"addData",value:function(e,t){var n=e;e&&e.get&&(n=e.get()),this.dataSet.add(n),this.update({options:t})}},{key:"update",value:function(e){var n=e||{},r=n.data;r&&r.get&&(r=r.get()),void 0!=r&&this.dataSet.set(r),dN(mN(t.prototype),"update",this).call(this,{options:n.options})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(e){if(this.dataSet){var t=this.dataSet.get({filter:function(t){return null==e||"function"!=typeof e||!e(t)}});this.dataSet.set(t),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"_canvasUpdate",value:function(e){if(this.canvasLayer){var t=this,n=t.options.animation,r=this.getContext(),i=this.map;if(t.isEnabledTime()){if(void 0===e)return void this.clear(r);"2d"===this.context&&(r.save(),r.globalCompositeOperation="destination-out",r.fillStyle="rgba(0, 0, 0, .1)",r.fillRect(0,0,r.canvas.width,r.canvas.height),r.restore())}else this.clear(r);if("2d"===this.context)for(var o in t.options)r[o]=t.options[o];else r.clear(r.COLOR_BUFFER_BIT);if(!(t.options.minZoom&&i.getZoom()<t.options.minZoom||t.options.maxZoom&&i.getZoom()>t.options.maxZoom)){var a=i.getBounds(),s=a.getEast()-a.getWest(),l=a.getNorth()-a.getSouth(),u=i.getSize(),c=s/u.x,f=l/u.y,h=bR("DEGREE")*c,p=this.canvasLayer.getTopLeft(),y=i.latLngToAccurateContainerPoint(p),d={transferCoordinate:function(e){var n,r={x:(n="2d"===t.context?i.latLngToAccurateContainerPoint(BM.a.latLng(e[1],e[0])):{x:(e[0]-p.lng)/c,y:(p.lat-e[1])/f}).x-y.x,y:n.y-y.y};return[r.x,r.y]}};void 0!==e&&(d.filter=function(t){var r=n.trails||10;return e&&t.time>e-r&&t.time<e});var m=t.dataSet.get(d);this.processData(m);var v=i.latLngToContainerPoint(BM.a.latLng(0,0)),g={x:v.x-y.x,y:v.y-y.y};"m"===t.options.unit?(t.options.size&&(t.options._size=t.options.size/h),t.options.width&&(t.options._width=t.options.width/h),t.options.height&&(t.options._height=t.options.height/h)):(t.options._size=t.options.size,t.options._height=t.options.height,t.options._width=t.options.width),this.drawContext(r,m,t.options,g),t.options.updateCallback&&t.options.updateCallback(e)}}}},{key:"init",value:function(e){this.options=e,this.initDataRange(e),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"addAnimatorEvent",value:function(){}},{key:"moveStartEvent",value:function(){var e=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=e.stepsRange.start,this._hide())}},{key:"moveEndEvent",value:function(){this.canvasLayer.draw(),this._show()}},{key:"zoomStartEvent",value:function(){this._hide()}},{key:"clear",value:function(e){e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)}},{key:"_hide",value:function(){this.canvasLayer.canvas.style.display="none"}},{key:"_show",value:function(){this.canvasLayer.canvas.style.display="block"}},{key:"draw",value:function(){this.canvasLayer.draw()}}])&&hN(n.prototype,r),i&&hN(n,i),t}(),SN=BM.a.Layer.extend({options:{attributionPrefix:null,attribution:sR.MapV.attribution},initialize:function(e,t,n){n=n||{},this.dataSet=e||{},this.mapVOptions=t||{},this.render=this.render.bind(this),BM.a.Util.setOptions(this,n),this.options.attributionPrefix&&(this.options.attribution=this.options.attributionPrefix+this.options.attribution),this.canvas=this._createCanvas(),BM.a.stamp(this)},onAdd:function(e){this._map=e;var t=this.getPane(),n=this.container=BM.a.DomUtil.create("div","leaflet-layer leaflet-zoom-animated",t);n.appendChild(this.canvas);var r=e.getSize();n.style.width=r.x+"px",n.style.height=r.y+"px",this.renderer=new bN(e,this,this.dataSet,this.mapVOptions),this.draw(),this.fire("loaded")},onRemove:function(){BM.a.DomUtil.remove(this.container),this.renderer.destroy()},addData:function(e,t){this.renderer.addData(e,t)},update:function(e){this.renderer.update(e)},getData:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet},removeData:function(e){this.renderer&&this.renderer.removeData(e)},clearData:function(){this.renderer.clearData()},draw:function(){return this._reset()},setZIndex:function(e){this.canvas.style.zIndex=e},render:function(){this.renderer._canvasUpdate()},getCanvas:function(){return this.canvas},getContainer:function(){return this.container},getTopLeft:function(){var e,t=this._map;t&&(e=t.getBounds().getNorthWest());return e},_createCanvas:function(){var e=document.createElement("canvas");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=this.options.zIndex||600;var t="undefined"==typeof window?{}:window,n=this.devicePixelRatio=t.devicePixelRatio||1;return this.mapVOptions.context&&"2d"!==this.mapVOptions.context||e.getContext("2d").scale(n,n),e},_resize:function(){var e=this.canvas;if(e){var t=this._map,n=t.getSize();e.width=n.x,e.height=n.y,e.style.width=n.x+"px",e.style.height=n.y+"px";var r=t.getBounds(),i=t.latLngToLayerPoint(r.getNorthWest());BM.a.DomUtil.setPosition(e,i)}},_reset:function(){this._resize(),this._render()},redraw:function(){this._resize(),this._render()},_render:function(){this.render()}}),_N=function(e,t,n){return new SN(e,t,n)};BM.a.supermap.mapVLayer=_N;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var wN=SN.extend({initialize:function(e,t){t=t||{},BM.a.Util.setOptions(this,t),this.data=[],this.mapVOptions={draw:"simple"},SN.prototype.initialize.call(this,new window.mapv.DataSet([]),this.mapVOptions,t),this.idCache={},this.url=e,this._last=new Date,this._imageCache={}},onMessageSuccessed:function(e){var t=this,n=e.featureResult.properties.id,r=e.featureResult.geometry,i={geometry:e.featureResult.geometry};if("Point"===r.type&&this.options.pointToLayer){var o=this.options.pointToLayer(e.featureResult,BM.a.latLng(r.coordinates[1],r.coordinates[0]));if(o instanceof BM.a.Marker){this.mapVOptions.draw="icon";var a=o.options.icon,s=a._getIconUrl("icon"),l=a.options.iconSize?a.options.iconSize[0]:null,u=a.options.iconSize?a.options.iconSize[1]:null,c="".concat(s,"_").concat(l,"_").concat(u),f=this._imageCache[c];f||(f=a.createIcon(),this._imageCache[c]=f,f.onload=function(){t.update({data:t.data,options:t.mapVOptions})}),i.icon=f,(a.options.iconSize||f.style.height)&&(this.mapVOptions.offset={x:0,y:-(a.options.iconSize[1]||f.style.height)/2}),this.options.deg&&(i.deg=this.options.deg,"function"==typeof i.deg&&this.idCache[n]&&this.data[this.idCache[n]]&&(i.deg=i.deg(e.featureResult,BM.a.latLng(r.coordinates[1],r.coordinates[0]),this.data[this.idCache[n]])))}if(o instanceof BM.a.CircleMarker){this.mapVOptions.draw="simple";var h=this._toMapvStyle(o);for(var p in h)h.hasOwnProperty(p)&&(i[p]=h[p])}}else if(this.options.style){var y=this._toMapvStyle(this.options.style(e.featureResult));for(var d in y)y.hasOwnProperty(d)&&(i[d]=y[d])}void 0==this.idCache[n]?(this.data.push(i),this.idCache[n]=this.data.length-1):this.data[this.idCache[n]]=i,new Date-this._last>200&&(this._last=new Date,this.update({data:this.data,options:this.mapVOptions}))},_toMapvStyle:function(e){var t={draw:"simple"};return t.strokeStyle=e.color,t.lineWidth=e.width,t.globalAlpha=e.fillOpacity||e.opacity,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.fillStyle=e.fillColor,t.size=e.radius,t}}),ON=BM.a.GeoJSON.extend({initialize:function(e,t){(t=t||{}).style&&!t.pointToLayer&&(t.pointToLayer=function(e,n){return BM.a.circleMarker(n,t.style())}),BM.a.Util.setOptions(this,t),this._layers={},BM.a.stamp(this),this.url=e,this.idCache={}},onMessageSuccessed:function(e){var t=e.featureResult,n=e.featureResult.properties[this.options.idField],r=null;void 0!==n&&this.idCache[n]?(r=this.getLayer(this.idCache[n]),this._updateLayerData(r,t)):((r=BM.a.GeoJSON.geometryToLayer(t,this.options)).feature=BM.a.GeoJSON.asFeature(t),this.addLayer(r),void 0!==n&&(this.idCache[n]=this.getLayerId(r))),this.options.onEachFeature&&this.options.onEachFeature(t,r)},_updateLayerData:function(e,t){t.properties&&(e.feature.properties=t.properties);var n=[];switch(t.geometry.type){case"Point":n=BM.a.GeoJSON.coordsToLatLng(t.geometry.coordinates),e.setLatLng(n);break;case"LineString":n=BM.a.GeoJSON.coordsToLatLngs(t.geometry.coordinates,0),e.setLatLngs(n);break;case"MultiLineString":case"Polygon":n=BM.a.GeoJSON.coordsToLatLngs(t.geometry.coordinates,1),e.setLatLngs(n);break;case"MultiPolygon":n=BM.a.GeoJSON.coordsToLatLngs(t.geometry.coordinates,2),e.setLatLngs(n)}}}),xN=BM.a.LayerGroup.extend({options:{geometry:null,prjCoordSys:null,excludeField:null,idField:"id",render:"normal"},initialize:function(e,t){t=t||{},BM.a.Util.setOptions(this,t),this.url=e,this._layers={},this.dataService=new lN(this.url,{geometry:this.options.geometry,prjCoordSys:this.options.prjCoordSys,excludeField:this.options.excludeField})},onAdd:function(e){var t=this;this.dataService.initSubscribe(),this.dataService.on("subscribeSocketConnected",function(e){return t.fire("subscribesucceeded",e)}),this.dataService.on("subscribeSocketError",function(e){return t.fire("subscribefailed",e)}),this.dataService.on("messageSucceeded",function(e){return t._onMessageSuccessed(e)}),this.dataService.on("setFilterParamSucceeded",function(e){return t.fire("setfilterparamsucceeded",e)}),"mapv"===this.options.render?this.addLayer(new wN(this.url,this.options)):this.addLayer(new ON(this.url,this.options)),BM.a.LayerGroup.prototype.onAdd.call(this,e)},onRemove:function(e){BM.a.LayerGroup.prototype.onRemove.call(this,e),this.dataService&&this.dataService.unSubscribe()},setExcludeField:function(e){return this.dataService.setExcludeField(e),this.options.excludeField=e,this},setGeometry:function(e){return this.dataService.setGeometry(e),this.options.geometry=e,this},_onMessageSuccessed:function(e){var t=this;this.getLayers().map(function(n){return n.onMessageSuccessed&&(n.onMessageSuccessed(e),t.fire("dataupdated",{layer:n,data:e.featureResult})),n})}}),CN=function(e,t){return new xN(e,t)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/BM.a.supermap.dataFlowLayer=CN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var PN=BM.a.Layer.extend({includes:[],_echartsContainer:null,_map:null,_ec:null,_echartsOptions:null,options:{attribution:sR.ECharts.attribution,loadWhileAnimating:!1},initialize:function(e,t){BM.a.Util.setOptions(this,t),this.setOption(e)},setOption:function(e,t,n){var r=e.baseOption||e;r.LeafletMap=r.LeafletMap||{roam:!0},r.animation=!0===r.animation,this._echartsOptions=e,this._ec&&this._ec.setOption(e,t,n)},getEcharts:function(){return this._ec},_disableEchartsContainer:function(){this._echartsContainer.style.visibility="hidden"},_enableEchartsContainer:function(){this._echartsContainer.style.visibility="visible"},onAdd:function(e){this._map=e,this._initEchartsContainer(),this._ec=xk.a.init(this._echartsContainer),this._ec.leafletMap=e;var t=this;e.on("zoomstart",function(){t._disableEchartsContainer()}),!t.options.loadWhileAnimating&&e.on("movestart",function(){t._disableEchartsContainer()}),xk.a.registerAction({type:"LeafletMapLayout",event:"LeafletMapLayout",update:"updateLayout"},function(e){}),xk.a.registerCoordinateSystem("leaflet",TN),xk.a.extendComponentModel({type:"LeafletMap",getBMap:function(){return this.__LeafletMap},defaultOption:{roam:!1}}),xk.a.extendComponentView({type:"LeafletMap",render:function(e,n,r){var i=!0,o=n.scheduler.ecInstance.leafletMap,a=r.getZr().painter.getViewportRoot(),s=o.options.zoomAnimation&&BM.a.Browser.any3d;a.className=" leaflet-layer leaflet-zoom-"+(s?"animated":"hide")+" echarts-layer";var l=BM.a.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);a.style[l]="50% 50%";var u=e.coordinateSystem,c=r.getZr().painter.getLayers(),f=function(){if(!i){var n,o=t._map.containerPointToLayerPoint([0,0]),s=[o.x||0,o.y||0];if(a.style.left=s[0]+"px",a.style.top=s[1]+"px",!t.options.loadWhileAnimating){for(var l in c)c.hasOwnProperty(l)&&c[l]&&(n=c[l].ctx)&&n.clearRect&&n.clearRect(0,0,n.canvas.width,n.canvas.height);t._enableEchartsContainer()}u.setMapOffset(s),e.__mapOffset=s,r.dispatchAction({type:"LeafletMapLayout"})}};function h(){i||(r.dispatchAction({type:"LeafletMapLayout"}),t._enableEchartsContainer())}t._oldMoveHandler&&o.off(t.options.loadWhileAnimating?"move":"moveend",t._oldMoveHandler),t._oldZoomEndHandler&&o.off("zoomend",t._oldZoomEndHandler),o.on(t.options.loadWhileAnimating?"move":"moveend",f),o.on("zoomend",h),t._oldMoveHandler=f,t._oldZoomEndHandler=h,i=!1}}),this._ec.setOption(this._echartsOptions)},onRemove:function(){this._ec.clear(),this._ec.dispose(),delete this._ec,BM.a.DomUtil.remove(this._echartsContainer),this._oldZoomEndHandler&&(this._map.off("zoomend",this._oldZoomEndHandler),this._oldZoomEndHandler=null),this._oldMoveHandler&&(this._map.off(this.options.loadWhileAnimating?"move":"moveend",this._oldMoveHandler),this._oldMoveHandler=null),this._resizeHandler&&(this._map.off("resize",this._resizeHandler),this._resizeHandler=null),delete this._map},_initEchartsContainer:function(){var e=this._map.getSize(),t=document.createElement("div");t.style.position="absolute",t.style.height=e.y+"px",t.style.width=e.x+"px",t.style.zIndex=10,this._echartsContainer=t,this.getPane().appendChild(this._echartsContainer);var n=this;function r(e){var t=e.newSize;n._echartsContainer.style.width=t.x+"px",n._echartsContainer.style.height=t.y+"px",n._ec.resize()}this._map.on("resize",r),this._resizeHandler=r}});function TN(e){this._LeafletMap=e,this.dimensions=["lng","lat"],this._mapOffset=[0,0]}TN.prototype.dimensions=["lng","lat"],TN.prototype.setMapOffset=function(e){this._mapOffset=e},TN.prototype.getBMap=function(){return this._LeafletMap},TN.prototype.prepareCustoms=function(){var e=xk.a.util,t=this.getViewRect();return{coordSys:{type:"leaflet",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:e.bind(this.dataToPoint,this),size:e.bind(function(t,n){return n=n||[0,0],e.map([0,1],function(e){var r=n[e],i=t[e]/2,o=[],a=[];return o[e]=r-i,a[e]=r+i,o[1-e]=a[1-e]=n[1-e],Math.abs(this.dataToPoint(o)[e]-this.dataToPoint(a)[e])},this)},this)}}},TN.prototype.dataToPoint=function(e){null===e[1]&&(e[1]=BM.a.CRS.EPSG3857.projection.MAX_LATITUDE);var t=this._LeafletMap.latLngToLayerPoint([e[1],e[0]]),n=this._mapOffset;return[t.x-n[0],t.y-n[1]]},TN.prototype.fixLat=function(e){return e>=90?89.99999999999999:e<=-90?-89.99999999999999:e},TN.prototype.pointToData=function(e){var t=this._mapOffset,n=this._LeafletMap.layerPointToLatLng([e[0]+t[0],e[1]+t[1]]);return[n.lng,n.lat]},TN.prototype.getViewRect=function(){var e=this._LeafletMap.getSize();return new xk.a.graphic.BoundingRect(0,0,e.x,e.y)},TN.prototype.getRoamTransform=function(){return xk.a.matrix.create()},TN.dimensions=TN.prototype.dimensions,TN.create=function(e){var t,n=e.scheduler.ecInstance.leafletMap;e.eachComponent("LeafletMap",function(e){t||(t=new TN(n)),e.coordinateSystem=t,e.coordinateSystem.setMapOffset(e.__mapOffset||[0,0])}),e.eachSeries(function(e){e.get("coordinateSystem")&&"leaflet"!==e.get("coordinateSystem")||(t||(t=new TN(n)),e.coordinateSystem=t,e.animation=!0===e.animation)})};var EN=function(e,t){return new PN(e,t)};function kN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}BM.a.supermap.echartsLayer=EN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var MN=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"supportWebGL",value:function(){return AN("webgl")}},{key:"supportWebGL2",value:function(){return AN("webgl2")}},{key:"supportCanvas",value:function(){return AN("2d")}}],(n=null)&&kN(t.prototype,n),r&&kN(t,r),e}();function AN(e){var t=document.createElement("canvas");return t&&t.getContext(e)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var LN=BM.a.Class.extend({options:{radius:10,angele:60,spaceAngle:0,count:3,fill:!1,stroke:!0,color:"#3388ff",weight:1,lineCap:"round",lineJoin:"round",fillColor:"#66ccff",fillOpacity:.2,fillRule:"evenodd",opacity:1,strokeWidth:1},initialize:function(e){e=e||{},BM.a.Util.setOptions(this,e),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d");var t=void 0===this.options.strokeWidth?1:this.options.strokeWidth;this.options.width=2*(this.options.radius+t)+1,this._initStyle()},getStyle:function(){return this._canvas},drawSector:function(e,t,n,r,i,o){i=i/180*Math.PI,o=o/180*Math.PI,e.moveTo(t,n),e.lineTo(t+r*Math.cos(i),n+r*Math.sin(i)),e.arc(t,n,r,i,o),e.lineTo(t,n)},_initStyle:function(){var e=0,t=this.options,n=t.angle;if(t.spaceAngle=360/t.count-t.angle,!(t.spaceAngle<0)){this._ctx.beginPath(),this.anchor=[t.width/2,t.width/2];for(var r=0;r<t.count;r++)this.drawSector(this._ctx,this.anchor[0],this.anchor[1],t.radius,e,n),n=(e=n+t.spaceAngle)+t.angle;this._fillStroke()}},_fillStroke:function(){var e=this.options;e.fill&&(this._ctx.globalAlpha=e.fillOpacity,this._ctx.fillStyle=e.fillColor||e.color,this._ctx.fill(e.fillRule||"evenodd")),e.stroke&&0!==e.weight&&(this._ctx.globalAlpha=e.opacity,this._ctx.lineWidth=e.weight,this._ctx.strokeStyle=e.color,this._ctx.lineCap=e.lineCap,this._ctx.lineJoin=e.lineJoin,this._ctx.stroke())}}),jN=function(e){return new LN(e)};BM.a.supermap.cloverStyle=jN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var RN=BM.a.Class.extend({options:{stroke:!0,color:"#3388ff",weight:1,opacity:1,lineCap:"round",lineJoin:"round",fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",radius:3},initialize:function(e){e=e||{},BM.a.Util.setOptions(this,e),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d"),this._initStyle()},getCanvas:function(){return this._canvas},getStyle:function(){return this._canvas},_initStyle:function(){this._ctx.beginPath(),this._ctx.arc(this._canvas.width/2,this._canvas.height/2,this.options.radius,0,2*Math.PI),this._fillStroke()},_fillStroke:function(){var e=this.options;e.fill&&(this._ctx.globalAlpha=e.fillOpacity,this._ctx.fillStyle=e.fillColor||e.color,this._ctx.fill(e.fillRule||"evenodd")),e.stroke&&0!==e.weight&&(this._ctx.globalAlpha=e.opacity,this._ctx.lineWidth=e.weight,this._ctx.strokeStyle=e.color,this._ctx.lineCap=e.lineCap,this._ctx.lineJoin=e.lineJoin,this._ctx.stroke())}}),NN=function(e){return new RN(e)};BM.a.supermap.circleStyle=NN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var IN=BM.a.Class.extend({options:{img:null,origin:[0,0],anchor:null,size:null},initialize:function(e){e=e||{},BM.a.Util.setOptions(this,e),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d")},getStyle:function(){return this.options}}),DN=function(e){return new IN(e)};BM.a.supermap.imageStyle=DN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var FN=BM.a.Util.falseFn,BN=BM.a.Class.extend({initialize:function(e,t){this.layer=e,t=t||{},BM.a.Util.setOptions(this,t)},getRenderer:function(){return this.options.renderer},update:function(){this.getRenderer()._clear(),this.getRenderer()._draw()},_getGraphicAtPoint:function(e){for(var t=this.layer,n=t._map,r=t._getGraphicsInBounds(),i=r.length-1;i>=0;i--){var o=void 0,a=void 0,s=n.latLngToLayerPoint(r[i].getLatLng()),l=r[i].getStyle();if(!l&&this.defaultStyle&&(l=this.defaultStyle),l.img){var u=l.img.width,c=l.img.height;l.size&&l.size[0]&&l.size[1]&&(u=l.size[0],c=l.size[1]);var f=l.anchor||[u/2,c/2];o=BM.a.point(s.x-f[0],s.y-f[1]),a=BM.a.point(o.x+u,o.y+c)}else o=BM.a.point(s.x-l.width/2,s.y-l.height/2),a=BM.a.point(s.x+l.width/2,s.y+l.height/2);if(BM.a.bounds(o,a).contains(e))return r[i]}return null},containsPoint:function(e){return!!this._getGraphicAtPoint(e)},_handleClick:function(e){e.target=null;var t=this.layer,n=t._map,r=this._getGraphicAtPoint(n.latLngToLayerPoint(e.latlng));if(r)return this.layer._renderer._ctx.canvas.style.cursor="pointer",e.target=r,void("click"===e.type&&t.options.onClick&&t.options.onClick.call(t,r,e));this.layer._renderer._ctx.canvas.style.cursor="auto"},_clearBuffer:FN});BM.a.Canvas.include({drawGraphics:function(e,t){var n=this;n._drawing&&e.forEach(function(e){var r=e.getStyle();!r&&t&&(r=t),r.img?n._drawImage.call(n,n._ctx,r,e.getLatLng()):n._drawCanvas.call(n,n._ctx,r,e.getLatLng())})},_drawCanvas:function(e,t,n){var r=t,i=this._map.latLngToLayerPoint(n),o=i.x-r.width/2,a=i.y-r.height/2,s=r.width,l=r.height;e.drawImage(r,o,a,s,l)},_drawImage:function(e,t,n){var r,i;if(t.size){var o=t.size;r=o[0],i=o[1]}else r=t.img.width,i=t.img.height;var a=this._coordinateToPoint(n),s=BM.a.point(a),l=BM.a.point(t.anchor||[r/2,i/2]);a=[s.x-l.x,s.y-l.y],e.drawImage(t.img,a[0],a[1],r,i)},_coordinateToPoint:function(e){if(!this._map)return e;var t=e;BM.a.Util.isArray(e)?t=BM.a.latLng(e[0],e[1]):e instanceof BM.a.LatLng&&(t=BM.a.latLng(e.lat,e.lng));var n=this._map.latLngToLayerPoint(t);return[n.x,n.y]}});
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var UN=BM.a.Util.falseFn,GN=function(){for(var e=document.createElement("div"),t=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],n=0;n<t.length;n++){var r=t[n];if(void 0!==e.style[r])return r}return t[0]}(),zN=BM.a.Class.extend({initialize:function(e,t){this.layer=e;var n=t||{};BM.a.Util.setOptions(this,n),this.options.radius=this._pixelToMeter(this.options.radius),this._initContainer()},getRenderer:function(){return this},update:function(e){e&&e.length>-1&&(this._data=e),this._renderLayer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0}),this._refreshData();var t=this._getLayerState();t.data=this._data||[],this._layerDefaultStyleCache=null,this._renderLayer.setNeedsRedraw(!0),this._renderLayer.setState(t)},drawGraphics:function(e){this._clearBuffer();var t=this.layer._map.getSize();this._container.width!==t.x&&(this._container.width=t.x),this._container.height!==t.y&&(this._container.height=t.y);var n=this.layer._map.getPanes().mapPane._leaflet_pos;this._container.style[GN]="translate("+-Math.round(n.x)+"px,"+-Math.round(n.y)+"px)",this._data=e||[],this._renderLayer||this._createInnerRender(),this._draw()},_initContainer:function(){this._container=this._createCanvas(this.options.width,this.options.height),this._layerContainer=this.options.container,this._wrapper=BM.a.DomUtil.create("div","deck-wrapper",this._layerContainer),this._wrapper.appendChild(this._container)},_createCanvas:function(e,t){var n=BM.a.DomUtil.create("canvas","graphicLayer  leaflet-layer leaflet-zoom-hide");return n.oncontextmenu=BM.a.Util.falseFn,n.width=e,n.height=t,n.style.width=e+"px",n.style.height=t+"px",n},_pixelToMeter:function(e){var t=this.layer._map.getBounds();return e*((t.getEast()-t.getWest())/this.layer._map.getSize().x*(6378137*Math.PI/180))},_createInnerRender:function(){var e=this,t=this._getLayerState(),n=t.color,r=t.radius,i=t.opacity,o=t.highlightColor,a=t.radiusScale,s=t.radiusMinPixels,l=t.radiusMaxPixels,u=t.strokeWidth,c=t.outline,f={id:"scatter-plot",data:e._data,pickable:Boolean(this.options.onClick)||Boolean(this.options.onHover),autoHighlight:!0,color:n,opacity:i,radius:r,radiusScale:a,highlightColor:o,radiusMinPixels:s,radiusMaxPixels:l,strokeWidth:u,outline:c,getPosition:function(e){if(!e)return[0,0,0];var t=e.getLatLng();return t&&[t.lng,t.lat,0]},getColor:function(t){var n=e._getLayerDefaultStyle(),r=t&&t.options;return r&&r.color||n.color},getRadius:function(t){var n=e._getLayerDefaultStyle(),r=t&&t.getStyle();return r&&r.radius||n.radius},updateTriggers:{getColor:[n],getRadius:[r]}},h=this;this.options.onClick&&(f.onClick=function(){h._container.style.cursor="pointer",h.options.onClick.apply(h,arguments)}),this.options.onHover&&(f.onHover=function(){h._container.style.cursor="pointer",h.options.onHover.apply(h,arguments)}),e._renderLayer=new window.DeckGL.ScatterplotLayer(f)},_getLayerDefaultStyle:function(){if(this._layerDefaultStyleCache)return this._layerDefaultStyleCache;var e=this.layer.options,t=e.color,n=e.opacity,r=e.radius,i=e.radiusScale,o=e.radiusMinPixels,a=e.radiusMaxPixels,s=e.strokeWidth,l=e.outline;return r=this._pixelToMeter(r),this._layerDefaultStyleCache={color:t,opacity:n,radius:r,radiusScale:i,radiusMinPixels:o,radiusMaxPixels:a,strokeWidth:s,outline:l},this._layerDefaultStyleCache},_getLayerState:function(){var e=this.layer.getState();return e.zoom=e.zoom-1,e},_draw:function(){var e=this._getLayerState();this._refreshData(),e.data=this._data||[];var t={};for(var n in e)t[n]=e[n];this._layerDefaultStyleCache=null,this._renderLayer.setNeedsRedraw(!0),t.layers=[this._renderLayer],t.canvas=this._container,t.onBeforeRender=this._onBeforeRender.bind(this),t.onAfterRender=this._onAfterRender.bind(this),this.deckGL?this.deckGL.setProps(t):this.deckGL=new window.DeckGL.experimental.DeckGLJS(t)},_clearBuffer:function(){if(this.deckGL){var e=this.deckGL.layerManager;e&&e.context.gl.clear(e.context.gl.COLOR_BUFFER_BIT)}return this},_refreshData:function(){var e=this._data||[],t=BM.a.Util.isArray(e)?[].concat(e):[e];this._renderLayer.props.data||(this._renderLayer.props.data=[]),this._renderLayer.props.data.length=0;for(var n=0;n<t.length;n++)this._renderLayer.props.data.push(t[n]);this._data=this._renderLayer.props.data},_handleClick:UN,_onBeforeRender:UN,_onAfterRender:UN,_removePath:function(){return this._wrapper.parentElement.removeChild(this._wrapper),this._container=null,this._wrapper=null,this},_initPath:UN,_addPath:UN,containsPoint:UN}),VN=["canvas","webgl"],JN={color:[0,0,0,255],opacity:.8,radius:10,radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1},HN=BM.a.Path.extend({initialize:function(e,t){this.graphics=[].concat(e);var n=t||{};n.pane="overlayPane",BM.a.Util.setOptions(this,n),this.options.render=this.options.render||VN[0],MN.supportWebGL2()||(this.options.render=VN[0]),this.options.interactive&&this.on("click mousemove dblclick mousedown mouseup mouseout contextmenu",this._handleClick,this)},getEvents:function(){return{resize:this._resize.bind(this),moveend:this._moveEnd.bind(this)}},onAdd:function(e){this._map=e,this.defaultStyle=this._getDefaultStyle(this.options),this._renderer=this._createRenderer(),this._container=this._renderer._container,BM.a.Path.prototype.onAdd.call(this)},onRemove:function(){this.off("click mousemove dblclick mousedown mouseup contextmenu",this._handleClick,this),this._renderer._removePath(this)},setGraphics:function(e){this.graphics=this.graphics||[],this.graphics.length=0;var t=BM.a.Util.isArray(e)?[].concat(e):[e];this.graphics=[].concat(t),this.update()},addGraphics:function(e){this.graphics=this.graphics||[];var t=BM.a.Util.isArray(e)?[].concat(e):[e];this.graphics=this.graphics.concat(t),this.update()},getGraphicBy:function(e,t){var n=null;for(var r in this.graphics)if(this.graphics[r][e]===t){n=this.graphics[r];break}return n},getGraphicById:function(e){return this.getGraphicBy("id",e)},getGraphicsByAttribute:function(e,t){var n,r=[];for(var i in this.graphics)(n=this.graphics[i])&&n.attributes&&n.attributes[e]===t&&r.push(n);return r},removeGraphics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e||0===e.length||e===this.graphics)return this.graphics.length=0,void this.update();be.isArray(e)||(e=[e]);for(var t=e.length-1;t>=0;t--){var n=e[t],r=be.indexOf(this.graphics,n);-1!==r&&this.graphics.splice(r,1)}this.update()},setStyle:function(e){var t=this.options,n={color:t.color,radius:t.radius,opacity:t.opacity,highlightColor:t.highlightColor,radiusScale:t.radiusScale,radiusMinPixels:t.radiusMinPixels,radiusMaxPixels:t.radiusMaxPixels,strokeWidth:t.strokeWidth,outline:t.outline};this.options=BM.a.Util.extend(this.options,n,e),this.defaultStyle=this._getDefaultStyle(this.options),this.update()},update:function(){this._layerRenderer.update(this.graphics)},clear:function(){this.removeGraphics()},getRenderer:function(){return this._renderer},getState:function(){var e=this._map,t=e.getSize().x,n=e.getSize().y,r=e.getCenter(),i={longitude:r.lng,latitude:r.lat,zoom:e.getZoom(),maxZoom:e.getMaxZoom(),pitch:0,bearing:0},o={};for(var a in i)o[a]=i[a];o.width=t,o.height=n;var s=this.options;return o.color=s.color,o.radius=s.radius,o.opacity=s.opacity,o.highlightColor=s.highlightColor,o.radiusScale=s.radiusScale,o.radiusMinPixels=s.radiusMinPixels,o.radiusMaxPixels=s.radiusMaxPixels,o.strokeWidth=s.strokeWidth,o.outline=s.outline,o},_resize:function(){var e=this._map.getSize();this._container.width=e.x,this._container.height=e.y,this._container.style.width=e.x+"px",this._container.style.height=e.y+"px";var t=this._map.containerPointToLayerPoint([0,0]);BM.a.DomUtil.setPosition(this._container,t),this._update()},_moveEnd:function(){this._layerRenderer instanceof zN&&this._update()},_createRenderer:function(){var e,t=this._map,n=t.getSize().x,r=t.getSize().y;if(this.options.render===VN[0])e=new BN(this,{width:n,height:r,renderer:t.getRenderer(this)});else{var i=BM.a.Util.setOptions({},JN),o=BM.a.Util.setOptions({options:i},this.options);(o=BM.a.Util.setOptions(this,o)).container=t.getPane("overlayPane"),o.width=n,o.height=r,e=new zN(this,o)}return e.defaultStyle=this.defaultStyle,this._layerRenderer=e,this._layerRenderer.getRenderer()},_update:function(){this._map&&this._updatePath()},_updatePath:function(){var e=this._getGraphicsInBounds();this._renderer.drawGraphics(e,this.defaultStyle)},_project:function(){var e=this;e._getGraphicsInBounds().map(function(t){var n=e._map.latLngToLayerPoint(t.getLatLng()),r=e._clickTolerance(),i=[t._anchor+r,t._anchor+r];return t._pxBounds=new BM.a.Bounds(n.subtract(i),n.add(i)),t}),e._pxBounds=BM.a.bounds(BM.a.point(0,0),BM.a.point(this._container.width,this._container.height))},_getDefaultStyle:function(e){var t={};if(e.color){t.fill=!0;var n=this.toRGBA(e.color);t.color=n,t.fillColor=n}return e.opacity&&(t.opacity=e.opacity,t.fillOpacity=e.opacity),e.radius&&(t.radius=e.radius),e.strokeWidth&&(t.weight=e.strokeWidth),e.outline&&(t.stroke=e.outline),new RN(t).getStyle()},toRGBA:function(e){return"rgba(".concat(e[0],",").concat(e[1],",").concat(e[2],",").concat((e[3]||255)/255,")")},_getGraphicsInBounds:function(){var e=[],t=this._map.getBounds();return this.graphics.map(function(n){return t.contains(n.getLatLng())&&e.push(n),n}),e},_handleClick:function(e){this._layerRenderer._handleClick(e)},beforeAdd:BM.a.Util.falseFn,_containsPoint:function(e){return this._layerRenderer.containsPoint(e)}}),qN=function(e,t){return new HN(e,t)};BM.a.supermap.graphicLayer=qN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var WN=YR.extend({options:{isOverLay:!0},initialize:function(e,t,n){var r=[];r.push(e),r.push(n),YR.prototype.initialize.apply(this,r),this.chartsType=t,this.themeFields=n&&n.themeFields?n.themeFields:null,this.charts=n&&n.charts?n.charts:[],this.cache=n&&n.cache?n.cache:{},this.chartsSetting=n&&n.chartsSetting?n.chartsSetting:{}},setChartsType:function(e){this.chartsType=e,this.redraw()},addFeatures:function(e){var t=this;t.fire("beforefeaturesadded",{features:e}),this.features=this.toiClientFeature(e),t.renderer&&(t._map?t.redrawThematicFeatures(t._map.getBounds()):t.redrawThematicFeatures())},redrawThematicFeatures:function(e){var t=this;t.renderer.clearAll();var n=t.features;if(this.options.alwaysMapCRS&&e&&e instanceof BM.a.LatLngBounds){var r=this._map.options.crs;e=BM.a.bounds(r.project(e.getSouthWest()),r.project(e.getNorthEast()))}e=mR.toSuperMapBounds(e);for(var i=0,o=n.length;i<o;i++){var a=n[i],s=a.geometry.getBounds();if(!e||e.intersectsBounds(s)){var l=t.cache,u=a.id;if(!l[u]){l[u]=u;var c=t.createThematicFeature(a),f=t.overlayWeightField&&a.attributes[t.overlayWeightField]&&!isNaN(a.attributes[t.overlayWeightField]);c&&f&&(c.__overlayWeight=a.attributes[t.overlayWeightField]),c&&t.charts.push(c)}}}t.drawCharts()},createThematicFeature:function(e){var t,n=this;return hT[n.chartsType]&&n.themeFields&&n.chartsSetting&&(t=new hT[n.chartsType](e,n,n.themeFields,n.chartsSetting)),!!t&&(t.assembleShapes(),t)},drawCharts:function(){var e=this;e.renderer&&(e.overlayWeightField&&e._sortChart(),e.options&&!e.options.isOverLay?e._addOverlayShape():e._addNoOverlayShape(),e.renderer.render())},getShapesByFeatureID:function(e){var t=[],n=this.renderer.getAllShapes();if(!e)return n;for(var r=0,i=n.length;r<i;r++){var o=n[r];o.refDataID&&e===o.refDataID&&t.push(o)}return t},isQuadrilateralOverLap:function(e,t){var n=e.length,r=t.length;if(5!==n||5!==r)return null;for(var i=!1,o=0;o<n;o++)if(this.isPointInPoly(e[o],t)){i=!0;break}for(var a=0;a<r;a++)if(this.isPointInPoly(t[a],e)){i=!0;break}for(var s=0;s<n-1&&!i;s++)for(var l=0;l<r-1;l++){if("SuperMap.Geometry.Point"===be.lineIntersection(e[s],e[s+1],t[l],t[l+1]).CLASS_NAME){i=!0;break}}return i},isPointInPoly:function(e,t){for(var n=!1,r=-1,i=t.length,o=i-1;++r<i;o=r)(t[r].y<=e.y&&e.y<t[o].y||t[o].y<=e.y&&e.y<t[r].y)&&e.x<(t[o].x-t[r].x)*(e.y-t[r].y)/(t[o].y-t[r].y)+t[r].x&&(n=!n);return n},isChartInMap:function(e,t){for(var n=e,r=!1,i=0,o=t.length;i<o;i++){var a=t[i];if(a.x>=n.left&&a.x<=n.right&&a.y>=n.top&&a.y<=n.bottom){r=!0;break}}return r},clearCache:function(){this.cache={},this.charts=[]},removeFeatures:function(e){this.clearCache(),YR.prototype.removeFeatures.apply(this,arguments)},removeAllFeatures:function(){this.clearCache(),YR.prototype.removeAllFeatures.apply(this,arguments)},redraw:function(){return this.clearCache(),YR.prototype.redraw.apply(this,arguments)},clear:function(){var e=this;e.renderer&&(e.renderer.clearAll(),e.renderer.refresh()),e.removeAllFeatures(),e.clearCache()},getWeightFieldValue:function(e,t,n){if((void 0===n||isNaN(n))&&(n=0),!e.attributes)return n;var r=e.attributes[t];return(void 0===r||isNaN(r))&&(r=n),r},_sortChart:function(){this.charts&&this.charts.sort(function(e,t){return void 0===e.__overlayWeight&&void 0===t.__overlayWeight?0:void 0!==e.__overlayWeight&&void 0===t.__overlayWeight?-1:void 0===e.__overlayWeight&&void 0!==t.__overlayWeight?1:void 0!==e.__overlayWeight&&void 0!==t.__overlayWeight?parseFloat(e.__overlayWeight)<parseFloat(t.__overlayWeight)?1:-1:0})},_addOverlayShape:function(){for(var e=this.charts,t=0,n=e.length;t<n;t++)for(var r=e[t],i=r.resetLocation(),o=r.shapes,a=0,s=o.length;a<s;a++)o[a].refOriginalPosition=i,this.renderer.addShape(o[a])},_addNoOverlayShape:function(){var e=this,t=e._map.getBounds(),n=this._map.options.crs;this.options.alwaysMapCRS&&(t=BM.a.bounds(n.project(t.getSouthWest()),n.project(t.getNorthEast()))),t=mR.toSuperMapBounds(t);for(var r=e.charts,i=[],o=e.getLocalXY(new _e(t.left,t.top)),a=e.getLocalXY(new _e(t.right,t.bottom)),s=new Oe(o[0],a[1],a[0],o[1]),l=0,u=r.length;l<u;l++){var c=r[l],f=c.resetLocation(),h=c.chartBounds,p=[{x:h.left,y:h.top},{x:h.left,y:h.bottom},{x:h.right,y:h.bottom},{x:h.right,y:h.top},{x:h.left,y:h.top}];if(!s||e.isChartInMap(s,p)){for(var y=!1,d=0;d<i.length;d++)if(e.isQuadrilateralOverLap(p,i[d])){y=!0;break}if(!y){i.push(p);for(var m=c.shapes,v=0,g=m.length;v<g;v++)m[v].refOriginalPosition=f,e.renderer.addShape(m[v])}}}}}),YN=function(e,t,n){return new WN(e,t,n)};BM.a.supermap.graphThemeLayer=YN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var QN=WN.extend({initialize:function(e,t,n){WN.prototype.initialize.apply(this,arguments),this.symbolType=t,this.symbolSetting={}},setSymbolType:function(e){this.symbolType=e,this.redraw()},createThematicFeature:function(e){var t,n=this;return hT[n.symbolType]&&n.themeField&&n.symbolSetting&&(t=new hT[n.symbolType](e,n,[n.themeField],n.symbolSetting)),!!t&&(t.assembleShapes(),t)}}),XN=function(e,t,n){return new QN(e,t,n)};BM.a.supermap.rankSymbolThemeLayer=XN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var KN=BM.a.SVG.extend({initialize:function(e,t,n){BM.a.SVG.prototype.initialize.call(this,n),this._tileCoord=e,this._size=t,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._container.setAttribute("viewBox",[0,0,this._size.x,this._size.y].join(" ")),this._layers={}},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},onAdd:BM.a.Util.falseFn,addTo:function(e){if(this._map=e,this.options.interactive)for(var t in this._layers){var n=this._layers[t];n._path.style.pointerEvents="auto",this._map._targets[BM.a.stamp(n._path)]=n}},removeFrom:function(e){var t=e||this._map;if(this.options.interactive)for(var n in this._layers){var r=this._layers[n];delete t._targets[BM.a.stamp(r._path)]}delete this._map},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup||(this._rootGroup=this._container),this._rootGroup.appendChild(e._path),this._layers[BM.a.stamp(e)]=e},_updateIcon:function(e){var t=e._path=BM.a.SVG.create("image"),n=e.options,r=n.iconUrl;if(n.iconSize){var i=BM.a.point(n.iconSize),o=i&&i.divideBy(2,!0),a=e._point.subtract(o);t.setAttribute("x",a.x),t.setAttribute("y",a.y),t.setAttribute("width",i.x+"px"),t.setAttribute("height",i.y+"px")}else{var s=new Image;s.src=r,BM.a.DomEvent.on(s,"load",function(){var n=BM.a.point([s.width,s.height]),r=n&&n.divideBy(2,!0),i=e._point.subtract(r);t.setAttribute("x",i.x),t.setAttribute("y",i.y),t.setAttribute("width",n.x+"px"),t.setAttribute("height",n.y+"px")})}t.setAttribute("href",r)}}),ZN=BM.a.Canvas.extend({initialize:function(e,t,n){BM.a.Canvas.prototype.initialize.call(this,n),this._tileCoord=e,this._size=t,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._layers={},this._drawnLayers={},this._drawing=!0,n.interactive&&(this._container.style.pointerEvents="auto")},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},getOffset:function(){return this._tileCoord.scaleBy(this._size).subtract(this._map.getPixelOrigin())},onAdd:BM.a.Util.falseFn,addTo:function(e){this._map=e},removeFrom:function(e){delete this._map},_updateDashArray:function(e){var t=e.options.dashArray;if(t&&"string"==typeof t){var n,r=t.split(","),i=[];for(n=0;n<r.length;n++)i.push(Number(r[n]));e.options._dashArray=i}else e.options._dashArray=t},_onClick:function(e){var t,n,r=this._map.mouseEventToLayerPoint(e).subtract(this.getOffset());for(var i in this._layers)(t=this._layers[i]).options.interactive&&t._containsPoint(r)&&!this._map._draggableMoved(t)&&(n=t);n&&(BM.a.DomEvent.stop(e),this._fireEvent([n],e))},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e).subtract(this.getOffset());this._handleMouseHover(e,t)}},_updateIcon:function(e){if(this._drawing){var t=e.options,n=this._ctx,r=e._getImage();if(t.iconSize&&r.complete){var i=BM.a.point(t.iconSize),o=i&&i.divideBy(2,!0),a=e._point.subtract(o);n.drawImage(r,a.x,a.y,i.x,i.y)}else BM.a.DomEvent.on(r,"load",function(){var t=BM.a.point([r.width,r.height]),i=t&&t.divideBy(2,!0),o=e._point.subtract(i);n.drawImage(r,o.x,o.y,t.x,t.y)});this._drawnLayers[e._leaflet_id]=e}}}),$N={LABEL:"LABEL",TEXT:"TEXT",POINT:"POINT",LINE:"LINE",REGION:"REGION"},eI=BM.a.Class.extend({initialize:function(e){this.properties=e.properties,this.type=e.type,this.layerName=e.layerName},render:function(e,t){this._renderer=e,this._container=e._container,this.options=t,e._initPath(this),e._updateStyle(this);var n=this.getElement();n&&this.layerName&&BM.a.DomUtil.addClass(n,this.layerName)},updateStyle:function(e,t){this.options=t,e._updateStyle(this)},getElement:function(){return this._path||this._renderer._container},_getPixelBounds:function(){for(var e=this._parts,t=BM.a.bounds([]),n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)t.extend(r[i]);var o=this._clickTolerance(),a=new BM.a.Point(o,o);return t.min._subtract(a),t.max._add(a),t},_clickTolerance:BM.a.Path.prototype._clickTolerance});
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function tI(e){return(tI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var nI=BM.a.Path.extend({includes:eI.prototype,options:{color:"white",fillColor:"black",fill:!0,fillOpacity:1,opacity:.6,weight:1,rotation:0,stroke:!0,fontFamily:"Arial Unicode MS Regular",fontSize:14,fontWeight:"normal",textAlign:"center",offsetX:1,offsetY:1},initialize:function(e,t){eI.prototype.initialize.call(this,e),this._makeFeatureParts(e,t),this.options.offsetX=t||1,this.options.offsetY=t||1},render:function(e,t){if(this.properties.texts&&(this._text=this.properties.texts[0]),!this._text){var n=this.properties.attributes;this._text=n&&this.properties.textField&&n[this.properties.textField]||""}var r=this.options;this._pxBounds=BM.a.bounds(this._point,this._point),eI.prototype.render.apply(this,[e,t]),this.options=BM.a.Util.extend(r,t),this._updatePath()},_makeFeatureParts:function(e,t){t=t||{x:1,y:1};var n=e.geometry[0];"object"===tI(n[0])&&"x"in n[0]?(this._point=BM.a.point(n[0]).scaleBy(t),this._empty=BM.a.Util.falseFn):(this._point=BM.a.point(n).scaleBy(t),this._empty=BM.a.Util.falseFn)},makeInteractive:function(){this._updateBounds()},updateStyle:function(e,t){return this._updateBounds(),eI.prototype.updateStyle.call(this,e,t)},_updateBounds:function(){var e=this._renderer._getTextWidth(this),t=[e/2,e/2];this._pxBounds=BM.a.bounds(this._point.subtract(t),this._point.add(t))},_updatePath:function(){this._renderer._updateText(this)},_containsPoint:function(e){return!1}});function rI(e){return(rI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ZN.include({_getTextWidth:function(e){return this._ctx.measureText(e._text).width},_updateText:function(e){if(this._drawing&&!e._empty()){var t=this.getContainer(),n=this._map.getSize();t.width=n.x,t.height=n.y,t.style.width=n.x+"px",t.style.height=n.y+"px";var r=this._ctx,i=e.options,o=i.offsetX||1,a=i.offsetY||1,s=e._point.subtract(BM.a.point(o,a));i.fill&&(this._drawnLayers[e._leaflet_id]=e,r.fillRect(0,0,n.x,n.y),r.font=[i.fontWeight?i.fontWeight:"normal",i.fontSize?i.fontSize:"14px",i.fontFamily?i.fontFamily:"Arial Unicode MS Regular,Microsoft Yahei"].join(" "),r.textAlign=i.textAlign,r.lineWidth=i.weight,r.fillStyle=i.fillColor,r.fillText(e._text,s.x,s.y),r.strokeStyle=i.color,r.strokeText(e._text,s.x,s.y),r.rotate(i.rotation))}}}),KN.include({_getTextWidth:function(e){return e._path.getComputedTextLength()||0},_initPath:function(e){var t;nI&&e instanceof nI?(t=e._path=BM.a.SVG.create("text")).textContent=e._text:t=e._path=BM.a.SVG.create("path"),e.options.className&&BM.a.DomUtil.addClass(t,e.options.className),e.options.interactive&&BM.a.DomUtil.addClass(t,"leaflet-interactive"),this._updateStyle(e),this._layers[BM.a.stamp(e)]=e},_updateText:function(e){var t=e._path,n=e.options,r=n.offsetX||1,i=n.offsetY||1,o=e._point.subtract(BM.a.point(r,i));t.setAttribute("x",o.x),t.setAttribute("y",o.y),n.rotation=n.rotation||0,t.setAttribute("transform","rotate("+n.rotation/Math.PI*180+" "+o.x+" "+o.y+")"),t.setAttribute("text-anchor","center"===n.textAlign?"middle":n.textAlign),t.style.fontSize=n.fontSize,t.style.fontFamily=n.fontFamily,t.style.fontWeight=n.fontWeight||"normal",t.style.glyphOrientationVertical=n.rotation||"",n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-linejoin","round"),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight>1?n.weight/10:n.weight)):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity)):t.setAttribute("fill","none")}});var iI=BM.a.CircleMarker.extend({includes:eI.prototype,statics:{iconCache:{}},initialize:function(e,t){eI.prototype.initialize.call(this,e),this._makeFeatureParts(e,t)},getLatLng:void 0,render:function(e,t){eI.prototype.render.call(this,e,t),this._radius=t.radius||BM.a.CircleMarker.prototype.options.radius,this._updatePath()},_makeFeatureParts:function(e,t){t=t||{x:1,y:1};var n=e.geometry[0];"object"===rI(n[0])&&"x"in n[0]?(this._point=BM.a.point(n[0]).scaleBy(t),this._empty=BM.a.Util.falseFn):(this._point=BM.a.point(n).scaleBy(t),this._empty=BM.a.Util.falseFn)},makeInteractive:function(){this._updateBounds()},updateStyle:function(e,t){return this._radius=t.radius||this._radius,this._updateBounds(),eI.prototype.updateStyle.call(this,e,t)},_updateBounds:function(){if(this.options.iconUrl&&this.options.iconSize){var e=BM.a.point(this.options.iconSize),t=e&&e.divideBy(2,!0),n=this._point.subtract(t);this._pxBounds=new BM.a.Bounds(n,n.add(e))}else BM.a.CircleMarker.prototype._updateBounds.call(this)},_updatePath:function(){this.options.iconUrl?this._renderer._updateIcon(this):BM.a.CircleMarker.prototype._updatePath.call(this)},_getImage:function(){if(!this.options.iconUrl)return null;var e=this.options.iconUrl,t=iI.iconCache[e];if(!t){var n=this.options.iconSize||[50,50];t=iI.iconCache[e]=this._createIcon(e,n)}return t},_createIcon:function(e,t){var n=e;if(!n)throw new Error("iconUrl not set in Icon options (see the docs).");var r=document.createElement("img");r.src=n,r.className="leaflet-marker-icon "+(this.layerName||"");var i=t;if("number"==typeof i&&(i=[i,i]),i){var o=BM.a.point(i),a=BM.a.point(o&&o.divideBy(2,!0));o&&(r.style.width=o.x+"px",r.style.height=o.y+"px"),a&&(r.style.marginLeft=-a.x+"px",r.style.marginTop=-a.y+"px")}return r.onload=function(){i||(r.style.width=this.width+"px",r.style.height=this.height+"px")},r},_containsPoint:function(e){return this.options.iconUrl?this._pxBounds.contains(e):BM.a.CircleMarker.prototype._containsPoint.call(this,e)}}),oI={_makeFeatureParts:function(e,t){t=t||{x:1,y:1};var n,r=e.geometry;this._parts=[];for(var i=0;i<r.length;i++){for(var o=r[i],a=[],s=0;s<o.length;s++)n=o[s],a.push(BM.a.point(n).scaleBy(t));this._parts.push(a)}},makeInteractive:function(){this._pxBounds=this._getPixelBounds()}},aI=BM.a.Polyline.extend({includes:[eI.prototype,oI],initialize:function(e,t){eI.prototype.initialize.call(this,e),this._makeFeatureParts(e,t)},render:function(e,t){t.fill=!1,eI.prototype.render.call(this,e,t),this._updatePath()},updateStyle:function(e,t){t.fill=!1,eI.prototype.updateStyle.call(this,e,t)}}),sI=BM.a.Polygon.extend({includes:[eI.prototype,oI],initialize:function(e,t){eI.prototype.initialize.call(this,e),this._makeFeatureParts(e,t)},render:function(e,t){eI.prototype.render.call(this,e,t),this._updatePath()}}),lI=n(12),uI=n.n(lI),cI=n(13),fI=BM.a.Class.extend({initialize:function(e){this.url=e},getTile:function(){var e=this;return tr.get(e.url,null,{timeout:1e4}).then(function(e){return e.ok?e.blob().then(function(e){var t=new FileReader;return new Promise(function(n){t.addEventListener("loadend",function(){var e=new uI.a(t.result);return n(new cI.VectorTile(e))}),t.readAsArrayBuffer(e)})}):{layers:[]}}).then(function(t){return e._processVectorTileSpec(t)})},_processVectorTileSpec:function(e){var t=[];for(var n in e.layers){for(var r=[],i=0;i<e.layers[n].length;i++){var o=e.layers[n].feature(i);switch(o.geometry=o.loadGeometry(),o.layerName=n,o.properties={attributes:BM.a.Util.extend({},o.properties),id:o.id},o.type){case 1:o.type=$N.POINT;break;case 2:o.type=$N.LINE;break;case 3:o.type=$N.REGION}r.push(o)}var a={};a.features=r,a.layerName=n,a.extent=e.layers[n].extent,t.push(a)}return t}}),hI=BM.a.Class.extend({initialize:function(e){this.url=e},getTile:function(){var e=this;return tr.get(e.url,null,{timeout:1e4}).then(function(e){return e.json()}).then(function(t){return e._processRecordSets(t,e)})},_processRecordSets:function(e,t){var n=e.recordsets;if(!(n=t._convertToGeoJSON(n)))return null;for(var r=0;r<n.length;r++){for(var i=n[r],o=0;o<i.features.length;o++){var a=i.features[o];(a=t._convertToVectorLayerFeature(a,t)).layerName=i.layerName,i.features[o]=a}i.extent=256,delete i.fieldTypes,delete i.fields}return n},_convertToVectorLayerFeature:function(e,t){if(e.geometry){var n,r,i,o,a={},s=e.geometry,l=s.type,u=s.coordinates,c=e.properties,f=c.id;if("Point"===l)a=c&&c.texts?t._createFeature(f,$N.TEXT,[u],c):t._createFeature(f,$N.POINT,[u],c);else if("MultiPoint"===l)a=t._createFeature(f,$N.POINT,u,c);else if("LineString"===l)a=t._createFeature(f,$N.LINE,[u],c);else if("MultiLineString"===l||"Polygon"===l){for(i=[],n=0;n<u.length;n++)o=u[n],"Polygon"===l&&(o.outer=0===n),i.push(o);var h="Polygon"===l?$N.REGION:$N.LINE;a=t._createFeature(f,h,i,c)}else{if("MultiPolygon"!==l)throw new Error("Illegal GeoJSON object");for(i=[],n=0;n<u.length;n++)for(r=0;r<u[n].length;r++)(o=u[n][r]).outer=0===r,i.push(o);a=t._createFeature(f,$N.REGION,i,c)}return a}},_convertToGeoJSON:function(e){if(e){for(var t=0;t<e.length;t++){for(var n=e[t],r=0;r<n.features.length;r++){for(var i=n.features[r],o=[],a=0,s=0;s<i.geometry.parts.length;s++){for(var l=2*i.geometry.parts[s],u=0,c=a;u<l;u+=2,c+=2){var f=i.geometry.points[c],h=i.geometry.points[c+1];o.push({x:f,y:h})}a+=l}i.geometry.points=o}n.features=vR(n.features).features}return e}},_createFeature:function(e,t,n,r){return{id:e,type:t,geometry:n,properties:r}}}),pI={JSON:"JSON",MVT:"MVT",PBF:"PBF"};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/BM.a.supermap.VectorTileFormat=pI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var yI=BM.a.Class.extend({initialize:function(e,t){this.layer=e.layer,this.tileSize=e.layer.getTileSize(),this.format=e.format,this.coords=e.coords,this.renderer=e.renderer,this.done=t,this.layer._textVectorTiles={}},renderTile:function(){var e=this,t=e.layer,n=e.coords,r=t._getTileUrl(n);([pI.MVT,pI.PBF].indexOf(e.format.toUpperCase())>-1?new fI(r):new hI(r)).getTile().then(function(t){e.render(t,n)})},render:function(e,t){if(e){for(var n=this,r=n.renderer,i=n.layer,o=0;o<e.length;o++){var a=e[o],s=a.layerName;i._dataLayerNames[s]=!0;for(var l=n.tileSize.divideBy(a.extent),u=i.getLayerStyleInfo(a.layerName),c=0;c<a.features.length;c++){var f=a.features[c];if(f){u&&u.type===$N.LABEL&&f.type===$N.POINT&&f.properties.attributes&&(f.type=$N.TEXT);var h=n._getStyleOptions(t,f,s,n);if(h.length){var p=n._createFeatureLayer(f,l);if(p){var y={scope:n,coords:t,renderer:r};if(!n._extractTextLayer(f,p,h,y)){for(var d=0;d<h.length;d++){var m=n._validateStyle(h[d],f.type);p.render(r,m),r._addPath(p)}i.options.interactive&&p.makeInteractive();var v=i._getFeatureKey(f.id,s);r._features[v]={layerName:s,feature:p}}}}}}}i._map&&r.addTo(i._map),BM.a.Util.requestAnimFrame(n.done.bind(t,null,n.layer._vectorTiles[n.layer._tileCoordsToKey(t)]))}},_extractTextLayer:function(e,t,n,r){if(e.type!==$N.TEXT)return!1;var i=r.scope,o=r.coords,a=i.layer,s=a._tileCoordsToKey(o),l=e.id,u=e.layerName,c=a._textVectorTiles[s];return c||(c={layers:{},coords:o,renderer:r.renderer}),c.layers[l]={layer:t,style:n,layerName:u},a._textVectorTiles[s]=c,!0},_getStyleOptions:function(e,t,n,r){var i=r,o=i.layer,a=o.getVectorTileLayerStyle(e,t)||i._defaultStyle(t.type),s=t.id,l=o._getFeatureKey(s,n),u=o._overriddenStyles[l];return a=(a=(a=u||a)instanceof Function?a(t.properties,e.z):a)instanceof Array?a:[a]},_createFeatureLayer:function(e,t){var n;switch(e.type){case $N.POINT:n=new iI(e,t);break;case $N.LINE:n=new aI(e,t);break;case $N.REGION:n=new sI(e,t);break;case $N.TEXT:n=new nI(e,t)}var r=this.layer;return n&&r.options.interactive&&n.addEventParent(r),n},_validateStyle:function(e,t){switch(BM.a.Path.prototype.options.weight=1,BM.a.Path.prototype.options.fillOpacity=1,t){case $N.POINT:return BM.a.extend({},BM.a.CircleMarker.prototype.options,e);case $N.LINE:return BM.a.extend({},BM.a.Polyline.prototype.options,e);case $N.REGION:return BM.a.extend({},BM.a.Polygon.prototype.options,e);case $N.TEXT:return BM.a.extend({},nI.prototype.options,e)}},_defaultStyle:function(e){var t=BM.a.Path.prototype.options;switch(t.weight=1,t.fillOpacity=1,t.radius=3,e){case $N.POINT:return BM.a.extend({},t,BM.a.CircleMarker.prototype.options);case $N.LINE:return BM.a.extend({},t,BM.a.Polyline.prototype.options);case $N.REGION:return BM.a.extend({},t,BM.a.Polygon.prototype.options);case $N.TEXT:return BM.a.extend({},t,nI.prototype.options)}}}),dI=BM.a.GridLayer.extend({options:{vectorTileLayerStyles:null,renderer:"SVG",format:pI.JSON,interactive:!0,maxZoom:23},initialize:function(e){var t=this;BM.a.setOptions(t,e),BM.a.GridLayer.prototype.initialize.call(t,e),t._vectorTiles={},t._overriddenStyles={},t.vectorTileLayerStyles=t.options.vectorTileLayerStyles,t.on("tileunload",function(e){var n=t._tileCoordsToKey(e.coords),r=t._vectorTiles[n];r&&t._map&&r.removeFrom(t._map),delete t._vectorTiles[n]},t),t.on("tileerror ",t._renderText,t),t.on("load",t._renderText,t),t._dataLayerNames={}},createTile:function(e,t){var n=this,r=n.getTileSize(),i=null;return i="Canvas"===n.options.renderer?new ZN(e,r,n.options):new KN(e,r,n.options),n._vectorTiles[n._tileCoordsToKey(e)]=i,i._features={},new yI({layer:n,format:n.options.format,coords:e,renderer:i},t).renderTile(),i.getContainer()},getStyles:function(){return this.vectorTileLayerStyles},getStyle:function(e){return this.vectorTileLayerStyles&&this.vectorTileLayerStyles[e]},setFeatureStyle:function(e,t,n){var r=this._getFeatureKey(e,t);for(var i in this._overriddenStyles[r]=n,this._vectorTiles){var o=this._vectorTiles[i],a=o._features[r];if(a){var s=a.feature;this._updateStyles(s,o,n)}}return this},resetFeatureStyle:function(e,t){var n=this._getFeatureKey(e,t);for(var r in delete this._overriddenStyles[n],this._vectorTiles){var i=this._vectorTiles[r],o=i._features[n];if(o){var a=o.feature,s=this.vectorTileLayerStyles[o.layerName];this._updateStyles(a,i,s)}}return this},getDataLayerNames:function(){return Object.keys(this._dataLayerNames)},_removeAllTiles:function(){BM.a.GridLayer.prototype._removeAllTiles.call(this),this._textVectorTiles={}},_renderText:function(){var e=this._textVectorTiles;for(var t in e){var n=e[t],r=n.renderer;for(var i in n.layers){for(var o=n.layers[i],a=o.style,s=o.layer,l=0;l<a.length;l++)s.render(r,a[l]),r._addPath(s);this.options.interactive&&s.makeInteractive()}}},_getFeatureKey:function(e,t){return(e=e||0)+"_"+(t=t||"null")},_updateStyles:function(e,t,n){(n=n instanceof Function?n(e.properties,t.getCoord().z):n)instanceof Array||(n=[n]);for(var r=0;r<n.length;r++){var i=this._extendStyle(n[r],e.type);e.updateStyle(t,i)}},_extendStyle:function(e,t){switch(t){case $N.POINT:return BM.a.extend({},BM.a.CircleMarker.prototype.options,e);case $N.LINE:return BM.a.extend({},BM.a.Polyline.prototype.options,e);case $N.REGION:return BM.a.extend({},BM.a.Polygon.prototype.options,e);case $N.TEXT:return BM.a.extend({},nI.prototype.options,e)}}}),mI=dI.extend({options:{serverType:null,crs:null,cartoCSS:null,layerNames:null,layersID:null,serverCartoCSSStyle:!0,processCharacters:!1,returnAttributes:!1,expands:null,cacheEnabled:!1,tileTemplate:null,subdomains:"abc",timeout:1e4,attribution:sR.Common.attribution},initialize:function(e,t){(t=t||{}).noWrap=null==t.noWrap||t.noWrap,BM.a.setOptions(this,t),dI.prototype.initialize.call(this,t),BM.a.stamp(this);var n=this;if(!e||e.indexOf("http")<0)return e="",this;n.url=e,e.indexOf("/")===e.length-1&&(e=e.substr(0,e.length-1),n.url=e),this.cartoCSSToLeaflet=new VR(n.url),n.initLayersInfo(),!n.options.serverCartoCSSStyle&&n.options.cartoCSS&&n.setClientCartoCSS(n.options.cartoCSS)},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._map=e,this._initLayerUrl(),!this.options.tileTemplate&&this.options.serverCartoCSSStyle||this._initGrid()},initLayersInfo:function(){var e=this,t=be.urlPathAppend(e.url,"layers");tr.get(t,null,{timeout:e.options.timeout}).then(function(e){return e.json()}).then(function(t){if(e.layersInfoInitialized=!0,e.layersInfo=t,e.layersInfo){for(var n={},r=0,i=e.layersInfo.length;r<i;r++)for(var o=e.layersInfo[r].subLayers.layers,a=0,s=o.length;a<s;a++)o[a].layerIndex=s-a,n[o[a].name]=o[a];e.layersInfo=n,e.cartoCSSToLeaflet.layersInfo=n,e.options.serverCartoCSSStyle&&e.getVectorStylesFromServer()}}).catch(function(e){console.error("error",e)})},getLayerStyleInfo:function(e){var t,n=this;if(n.layersStyles=n.layersStyles||{},t=n.layersStyles[e])return t;if(!n.layersInfo)return{};var r=n.layersInfo[e];if(!r)return null;switch(t={layerIndex:r.layerIndex,ugcLayerType:r.ugcLayerType},r.ugcLayerType){case"VECTOR":t.layerStyle=r.style?r.style:null;break;case"THEME":var i=r.theme;t.layerStyle=i?i.defaultStyle:null,i&&"LABEL"===i.type&&(t.type=i.type,t.textField=i.labelExpression);break;default:r.style&&(t.layerStyle=r.style)}return n.layersStyles[e]=t,t},getVectorStylesFromServer:function(){var e=this,t=be.urlPathAppend(e.url,"tileFeature/vectorstyles");tr.get(t,null,{timeout:e.options.timeout}).then(function(e){return e.json()}).then(function(t){if(!t||!t.style)return null;t.style&&"cartoCSS"===t.type&&e.setServerCartoCSS(t.style),e.options&&e.setClientCartoCSS(e.options.cartoCSS),e._initGrid()}).catch(function(e){console.error("error",e)})},setServerCartoCSS:function(e){this.cartoCSSToLeaflet.pretreatedCartoCSS(e,!0)},setClientCartoCSS:function(e){var t=!1;this.options.processCharacters&&(t=this.options.processCharacters),this.cartoCSSToLeaflet.pretreatedCartoCSS(e,t)},getVectorTileLayerStyle:function(e,t){if(!t)return null;var n=this,r=t.layerName,i=n.getLayerStyleInfo(r);if(i&&i.textField){var o=i.textField;if(o&&o.indexOf(".")){var a=o.split(".");o=a&&a.length>0&&a[a.length-1]}t.properties.textField=o}n.vectorTileLayerStyles=n.vectorTileLayerStyles||{};var s=n.vectorTileLayerStyles[r];if(s)return t=this._mergeFeatureTextField(t,s),s;var l=this.getScaleFromCoords(e),u=this.cartoCSSToLeaflet.pickShader(r)||[];for(var c in s=[],u)for(var f=u[c],h=0;h<f.length;h++){var p=this.cartoCSSToLeaflet.getValidStyleFromCarto(e.z,l,f[h],t,this.options.serverCartoCSSStyle);p&&s.push(p)}return"TEXT"!==(t=this._mergeFeatureTextField(t,s)).type&&0!==s.length||(s=this.cartoCSSToLeaflet.getValidStyleFromLayerInfo(t,i),"TEXT"===t.type&&(s.textName="["+t.properties.textField+"]")),n.vectorTileLayerStyles[r]=s,s},getScale:function(e){var t=e||this._map.getZoom();return this.scales[t]},getScaleFromCoords:function(e){var t,n=this;return n.scales&&n.scales[e.z]?n.scales[e.z]:(n.scales=n.scales||{},t=n.getDefaultScale(e),n.scales[e.z]=t,t)},getDefaultScale:function(e){var t=this._crs;if(t.scales)return t.scales[e.z];var n=this._tileCoordsToBounds(e),r=t.project(n.getNorthEast()),i=t.project(n.getSouthWest()),o=this.options.tileSize,a=Math.max(Math.abs(r.x-i.x)/o,Math.abs(r.y-i.y)/o),s=h.METER;if(t.code){var l=t.code.split(":");if(l&&l.length>1){var u=parseInt(l[1]);s=u&&u>=4e3&&u<=5e3?h.DEGREE:h.METER}}return SR(a,96,s)},_mergeFeatureTextField:function(e,t){if(!this.options.serverCartoCSSStyle||!t||"TEXT"!==e.type)return e;var n=t;BM.a.Util.isArray(t)||(n=[t]);for(var r=0;r<n.length;r++){var i=n[r].textName;i&&e.properties&&(e.properties.textField=i.substring(1,i.length-1))}return e},_getTileUrl:function(e){return this.options.tileTemplate?this._getTileTemplateUrl(e):this._getDefaultTileUrl(e)},_getTileTemplateUrl:function(e){var t=this,n=t.options.tileTemplate,r={s:t._getSubdomain(e),x:e.x,y:e.y,z:e.z};if(t._map&&!t._map.options.crs.infinite){var i=t._globalTileRange.max.y-e.y;t.options.tms&&(r.y=i),r["-y"]=i}return BM.a.Util.template(n,BM.a.extend(r,t.options))},_initGrid:function(){dI.prototype.onAdd.call(this,this._map)},_getSubdomain:BM.a.TileLayer.prototype._getSubdomain,_getDefaultTileUrl:function(e){var t=e.x,n=e.y,r=this._tileUrl+"&x="+t+"&y="+n;return r+="&scale="+this.getScaleFromCoords(e)},_initLayerUrl:function(){var e=this.options;if(this.url){var t=e.format.toString().toLowerCase();this._tileUrl=be.urlPathAppend(this.url,"tileFeature."+t),this._tileUrl=be.urlAppend(this._tileUrl,encodeURI(this._createURLParam(e)))}},_createURLParam:function(e){var t=[],n=this._getCredential();if(n&&t.push(n),e.layersID&&t.push("layersID="+e.layersID),e.layerNames){BM.a.Util.isArray(e.layerNames)||(e.layerNames=[e.layerNames]);var r="["+e.layerNames.join(",")+"]";t.push("layerNames="+r)}var i=this._crs;if(i.options&&i.options.origin)t.push("origin="+JSON.stringify({x:i.options.origin[0],y:i.options.origin[1]}));else if(i.projection&&i.projection.bounds){var o=i.projection.bounds,a=BM.a.point(o.min.x,o.max.y);t.push("origin="+JSON.stringify({x:a.x,y:a.y}))}e.expands&&t.push("expands="+e.expands),t.push("returnAttributes="+e.returnAttributes),t.push("cacheEnabled="+e.cacheEnabled);var s=this.options.tileSize;return t.push("width="+s),t.push("height="+s),t.join("&")},_getCredential:function(e){var t,n;switch(this.options.serverType){case o.IPORTAL:(t=(n=rr.getToken(e))?new Gt(n,"token"):null)||(t=(n=rr.getKey(e))?new Gt(n,"key"):null);break;case o.ONLINE:t=(n=rr.getKey(e))?new Gt(n,"key"):null;break;default:t=(n=rr.getToken(e))?new Gt(n,"token"):null}return t?t.getUrlParameters():null}}),vI=function(e,t){return new mI(e,t)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/BM.a.supermap.tiledVectorLayer=vI;var gI=n(7),bI=BM.a.GeoJSON.extend({turfMap:{"Measurement.along":["line","distance","units"],"Measurement.area":["geojson"],"Measurement.bbox":["geojson"],"Measurement.bboxPolygon":["bbox"],"Measurement.bearing":["start","end","final"],"Measurement.center":["geojson","properties"],"Measurement.centerOfMass":["geojson","properties"],"Measurement.centroid":["geojson","properties"],"Measurement.destination":["origin","distance","bearing","units"],"Measurement.distance":["from","to","units"],"Measurement.envelope":["geojson"],"Measurement.length":["geojson","units"],"Measurement.midpoint":["point1","point2"],"Measurement.pointOnFeature":["geojson"],"Measurement.polygonTangents":["point","polygon"],"Measurement.rhumbBearing":["start","end","final"],"Measurement.rhumbDestination":["origin","distance","bearing","units"],"Measurement.rhumbDistance":["from","to","units"],"Measurement.square":["bbox"],"Measurement.greatCircle":["start","end","properties","npoints","offset"],"CoordinateMutation.cleanCoords":["geojson","mutate"],"CoordinateMutation.flip":["geojson","mutate"],"CoordinateMutation.rewind":["geojson","reverse","mutate"],"CoordinateMutation.round":["num","precision"],"CoordinateMutation.truncate":["geojson","precision","coordinates","mutate"],"Transformation.bboxClip":["feature","bbox"],"Transformation.bezierSpline":["line","resolution","sharpness"],"Transformation.buffer":["geojson","radius","units","steps"],"Transformation.circle":["center","radius","steps","units","properties"],"Transformation.clone":["geojson"],"Transformation.concave":["points","maxEdge","units"],"Transformation.convex":["geojson","concavity"],"Transformation.difference":["polygon1","polygon2"],"Transformation.dissolve":["featureCollection","propertyName"],"Transformation.intersect":["poly1","poly2"],"Transformation.lineOffset":["geojson","distance","units"],"Transformation.simplify":["feature","tolerance","highQuality"],"Transformation.tesselate":["poly"],"Transformation.transformRotate":["geojson","angle","pivot","mutate"],"Transformation.transformTranslate":["geojson","distance","direction","units","zTranslation","mutate"],"Transformation.transformScale":["geojson","factor","origin","mutate"],"Transformation.union":["A"],"Transformation.voronoi":["points","bbox"],"featureConversion.combine":["fc"],"featureConversion.explode":["geojson"],"featureConversion.flatten":["geojson"],"featureConversion.lineStringToPolygon":["lines","properties","autoComplete","orderCoords"],"featureConversion.polygonize":["geojson"],"featureConversion.polygonToLineString":["polygon","properties"],"Misc.kinks":["featureIn"],"Misc.lineArc":["center","radius","bearing1","bearing2","steps","units"],"Misc.lineChunk":["geojson","segmentLength","units","reverse"],"Misc.lineIntersect":["line1","line2"],"Misc.lineOverlap":["line1","line2"],"Misc.lineSegment":["geojson"],"Misc.lineSlice":["startPt","stopPt","line"],"Misc.lineSliceAlong":["line","startDist","stopDist","units"],"Misc.lineSplit":["line","splitter"],"Misc.mask":["polygon","mask"],"Misc.pointOnLine":["lines","pt","units"],"Misc.sector":["center","radius","bearing1","bearing2","steps","units"],"Misc.shortestPath":["start","end","obstacles","units","resolution"],"Misc.unkinkPolygon":["geojson"],"Helper.featureCollection":["features","bbox","id"],"Helper.feature":["geometry","properties","bbox","id"],"Helper.geometryCollection":["geometries","properties","bbox","id"],"Helper.lineString":["coordinates","properties","bbox","id"],"Helper.multiLineString":["coordinates","properties","bbox","id"],"Helper.multiPoint":["coordinates","properties","bbox","id"],"Helper.multiPolygon":["coordinates","properties","bbox","id"],"Helper.point":["coordinates","properties","bbox","id"],"Helper.polygon":["coordinates","properties","bbox","id"],"Data.sample":["featurecollection","num"],"Interpolation.interpolate":["points","cellSize","gridType","property","units","weight"],"Interpolation.isobands":["pointGrid","breaks","zProperty","commonProperties","breaksProperties"],"Interpolation.isolines":["pointGrid","breaks","zProperty","commonProperties","breaksProperties"],"Interpolation.planepoint":["point","triangle"],"Interpolation.tin":["points","z"],"Joins.pointsWithinPolygon":["points","polygons"],"Joins.tag":["points","polygons","field","outField","mask","properties"],"Grids.hexGrid":["bbox","cellSide","units","triangles"],"Grids.pointGrid":["bbox","cellSide","units","mask","properties"],"Grids.squareGrid":["bbox","cellSide","units","mask","properties"],"Grids.triangleGrid":["bbox","cellSide","units","mask","properties"],"Classification.nearestPoint":["targetPoint","points"],"Aggregation.collect":["polygons","points","inProperty","outProperty"],"Aggregation.clustersDbscan":["points","maxDistance","units","minPoints","mutate"],"Aggregation.clustersKmeans":["points","numberOfClusters","mutate"],"Meta.coordAll":["geojson"],"Meta.coordEach":["geojson","callback","excludeWrapCoord"],"Meta.coordReduce":["geojson","callback","initialValue","excludeWrapCoord"],"Meta.featureEach":["geojson","callback"],"Meta.featureReduce":["geojson","callback","initialValue"],"Meta.flattenEach":["geojson","callback"],"Meta.flattenReduce":["geojson","callback","initialValue"],"Meta.getCoord":["coord"],"Meta.getCoords":["coords"],"Meta.getGeom":["geojson"],"Meta.getGeomType":["geojson","name"],"Meta.geomEach":["geojson","callback"],"Meta.geomReduce":["geojson","callback","initialValue"],"Meta.propEach":["geojson","callback"],"Meta.propReduce":["geojson","callback","initialValue"],"Meta.segmentEach":["geojson","callback"],"Meta.segmentReduce":["geojson","callback","initialValue"],"Meta.getCluster":["geojson","filter"],"Meta.clusterEach":["geojson","property","callback"],"Meta.clusterReduce":["geojson","property","callback","initialValue"],"Assertions.collectionOf":["featureCollection","type","name"],"Assertions.containsNumber":["coordinates"],"Assertions.geojsonType":["value","type","name"],"Assertions.featureOf":["feature","type","name"],"Booleans.booleanClockwise":["line"],"Booleans.booleanContains":["feature1","feature2"],"Booleans.booleanCrosses":["feature1","feature2"],"Booleans.booleanDisjoint":["feature1","feature2"],"Booleans.booleanEqual":["feature1","feature2"],"Booleans.booleanOverlap":["feature1","feature2"],"Booleans.booleanParallel":["feature1","feature2"],"Booleans.booleanPointInPolygon":["point","polygon","ignoreBoundary"],"Booleans.booleanPointOnLine":["point","linestring","ignoreEndVertices"],"UnitConversion.bearingToAngle":["bearing"],"UnitConversion.convertArea":["area","originalUnit","finalUnit"],"UnitConversion.convertLength":["length","originalUnit","finalUnit"],"UnitConversion.degreesToradians":["degrees"],"UnitConversion.lengthToRadians":["distance","units"],"UnitConversion.lengthToDegrees":["distance","units"],"UnitConversion.radiansToLength":["radians","units"],"UnitConversion.radiansToDegrees":["radians"],"UnitConversion.toMercator":["geojson","mutate"],"UnitConversion.toWgs84":["geojson","mutate"]},options:{attribution:sR.Turf.attribution},initialize:function(e){e=e||{},BM.a.Util.setOptions(this,e),BM.a.stamp(this),this._layers={}},turfOptionMap:{"Measurement.along":["line","distance",{units:""}],"Measurement.bboxPolygon":["bbox",{properties:"",id:""}],"Measurement.bearing":["start","end",{final:""}],"Measurement.center":["geojson",{properties:""}],"Measurement.destination":["origin","distance","bearing",{units:"",properties:""}],"Measurement.distance":["from","to",{units:""}],"Measurement.length":["geojson",{units:""}],"Measurement.rhumbBearing":["start","end",{final:""}],"Measurement.rhumbDestination":["origin","distance","bearing",{units:"",properties:""}],"Measurement.rhumbDistance":["from","to",{units:""}],"Measurement.greatCircle":["start","end",{properties:"",npoints:"",offset:""}],"CoordinateMutation.cleanCoords":["geojson",{mutate:""}],"CoordinateMutation.flip":["geojson",{mutate:""}],"CoordinateMutation.rewind":["geojson",{mutate:"",reverse:""}],"CoordinateMutation.truncate":["geojson",{precision:"",coordinates:"",mutate:""}],"Transformation.bezierSpline":["line",{resolution:"",sharpness:""}],"Transformation.buffer":["geojson","radius",{units:"",steps:""}],"Transformation.circle":["center","radius",{units:"",steps:"",properties:""}],"Transformation.concave":["points",{maxEdge:"",units:""}],"Transformation.convex":["geojson",{concavity:""}],"Transformation.dissolve":["featureCollection",{propertyName:""}],"Transformation.lineOffset":["geojson","distance",{units:""}],"Transformation.simplify":["geojson",{tolerance:"",highQuality:""}],"Transformation.transformRotate":["geojson","angle",{pivot:"",mutate:""}],"Transformation.transformTranslate":["geojson","distance","direction",{units:"",zTranslation:"",mutate:""}],"Transformation.transformScale":["geojson","factor",{origin:"",mutate:""}],"Transformation.voronoi":["points",{bbox:""}],"featureConversion.lineStringToPolygon":["lines",{properties:"",autoComplete:"",orderCoords:""}],"featureConversion.polygonToLineString":["polygon",{properties:""}],"Misc.lineArc":["center","radius","bearing1","bearing2",{steps:"",units:""}],"Misc.lineChunk":["geojson","segmentLength",{units:"",reverse:""}],"Misc.lineOverlap":["line1","line2",{tolerance:""}],"Misc.lineSliceAlong":["line","startDist","stopDist",{units:""}],"Misc.pointOnLine":["lines","pt",{units:""}],"Misc.sector":["center","radius","bearing1","bearing2",{units:"",steps:"",properties:""}],"Misc.shortestPath":["start","end",{obstacles:"",units:"",resolution:""}],"Helper.feature":["geometry","properties",{bbox:"",id:""}],"Helper.geometryCollection":["geometries","properties",{bbox:"",id:""}],"Helper.lineString":["coordinates","properties",{bbox:"",id:""}],"Helper.multiLineString":["coordinates","properties",{bbox:"",id:""}],"Helper.multiPoint":["coordinates","properties",{bbox:"",id:""}],"Helper.multiPolygon":["coordinates","properties",{bbox:"",id:""}],"Helper.point":["coordinates","properties",{bbox:"",id:""}],"Helper.polygon":["coordinates","properties",{bbox:"",id:""}],"Interpolation.interpolate":["points","cellSize",{gridType:"",property:"",units:"",weight:""}],"Interpolation.isobands":["pointGrid","breaks",{zProperty:"",commonProperties:"",breaksProperties:""}],"Interpolation.isolines":["pointGrid","breaks",{zProperty:"",commonProperties:"",breaksProperties:""}],"Grids.hexGrid":["bbox","cellSide",{units:"",triangles:"",properties:"",mask:""}],"Grids.pointGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Grids.squareGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Grids.triangleGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Aggregation.clustersDbscan":["points","maxDistance",{units:"",minPoints:"",mutate:""}],"Aggregation.clustersKmeans":["points",{numberOfClusters:"",mutate:""}],"Booleans.booleanPointInPolygon":["point","polygon",{ignoreBoundary:""}],"Booleans.booleanPointOnLine":["point","linestring",{ignoreEndVertices:""}],"UnitConversion.toMercator":["geojson",{mutate:""}],"UnitConversion.toWgs84":["geojson",{mutate:""}]},process:function(e,t,n,r){var i;try{i=gI[e.split(".")[1]].apply(this,this.parse(e,t))}catch(n){i=gI[e.split(".")[1]].apply(this,this.parseOption(e,t))}(r=null==r||r)&&this.addData([i]),n&&n(i)},parse:function(e,t){if("Transformation.union"===e)return t.A;var n=[],r=this.turfMap[e];return r&&r.map(function(e){return n.push(t[e]),t[e]}),n},parseOption:function(e,t){var n=[];return this.turfOptionMap[e].map(function(e){if(e instanceof Object){var r=e;Object.keys(r).forEach(function(e){r[e]=t[e]}),n.push(r)}else n.push(t[e]);return t}),n}}),SI=function(e){return new bI(e)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/BM.a.supermap.turfLayer=SI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var _I=BM.a.Class.extend({initialize:function(e,t){this.geometry=e,this.attributes=t},toFeature:function(){var e=this.geometry,t=[];if(e instanceof BM.a.LatLng)t=[e.lng,e.lat];else if(e instanceof BM.a.Point)t=[e.x,e.y];else if(e instanceof BM.a.CircleMarker){var n=e.getLatLng();t=[n.lng,n.lat]}else t=e;return 2===t.length&&(e=new Xe(t[0],t[1])),new en(e,this.attributes)}});BM.a.supermap.heatMapFeature=function(e,t){return new _I(e,t)};var wI=BM.a.Layer.extend({options:{alwaysMapCRS:!1,id:be.createUniqueID("heatMapLayer_"),featureWeight:null,opacity:1,colors:["blue","cyan","lime","yellow","red"],useGeoUnit:!1,radius:50,attribution:sR.Common.attribution},initialize:function(e,t){BM.a.Util.setOptions(this,t),this.name=e,this.features=[],this.maxWeight=null,this.minWeight=null,this.rootCanvas=null,this.canvasContext=null,this.maxWidth=null,this.maxHeight=null,this.id=this.options.id,this.featureWeight=this.options.featureWeight,this.colors=this.options.colors,this.useGeoUnit=this.options.useGeoUnit,this.opacity=this.options.opacity,this.radius=this.options.radius,this.blur=this.options.blur,this.movingOffset=[0,0]},onRemove:function(e){BM.a.DomUtil.remove(this.rootCanvas),e.off("mousemove",this.mouseMoveHandler)},onAdd:function(e){var t=this;if(t._map=e,t._createCanvasContainer(),t.rootCanvas){var n=e.getSize();t.rootCanvas.width=t.maxWidth=n.x,t.rootCanvas.height=t.maxHeight=n.y,t._updateOpacity(),t.mouseMoveHandler=function(e){var n=e.layerPoint;t.currentMousePosition=BM.a.point(n.x+t.movingOffset[0],n.y+t.movingOffset[1])},e.on("mousemove",t.mouseMoveHandler),t.update()}else e.removeLayer(t)},addFeatures:function(e){this.features=this.toiClientFeature(e),this.refresh()},refresh:function(){if(0!==this.features.length&&this._map){var e=this._map.getBounds();this.updateHeatPoints(e)}},updateHeatPoints:function(e){this.features&&this.features.length>0?this.convertFastToPixelPoints(e):this.canvasContext.clearRect(0,0,this.maxWidth,this.maxWidth)},convertFastToPixelPoints:function(e){var t,n,r,i,o,a,s,l=[],u=e.getEast()-e.getWest(),c=e.getNorth()-e.getSouth(),f=this._map.getSize();i=u/f.x>c/f.y?u/f.x:c/f.y,this.useRadius=this.useGeoUnit?parseInt(this.radius/i):this.radius;for(var h=0;h<this.features.length;h++){var p=this.features[h],y=p.geometry,d=this.getLocalXY(new _e(y.x,y.y));this.featureWeight?(d.weight=p.attributes[this.featureWeight],this.maxWeight||(o=o||d.weight,a=a||d.weight,o=Math.max(o,d.weight),a=Math.min(a,d.weight))):d.weight=1,t=Math.floor(d[0]),n=Math.floor(d[1]),r=d.weight,l.push([t,n,r])}this.maxWeight?this.draw(l,this.maxWeight):(s=o&&a?(o+a)/2:1,this.draw(l,s))},draw:function(e,t){if(!(this.maxHeight>0&&this.maxWidth>0))return!1;var n=this.canvasContext;this.canvasContext.clearRect(0,0,this.maxWidth,this.maxHeight),this.drawCircle(this.useRadius),this.createGradient();for(var r=0;r<e.length;r++){var i=e[r];this.canvasContext.globalAlpha=Math.max(i[2]/t,.05),this.canvasContext.drawImage(this.circle,i[0]-this.useRadius,i[1]-this.useRadius)}var o=n.getImageData(0,0,this.maxWidth,this.maxHeight);this.colorize(o.data,this.grad),n.putImageData(o,0,0)},colorize:function(e,t){for(var n,r=0;r<e.length;r+=4)(n=4*e[r+3])&&(e[r]=t[n],e[r+1]=t[n+1],e[r+2]=t[n+2])},drawCircle:function(e){var t=this.blur||e/2,n=this.circle=document.createElement("canvas"),r=n.getContext("2d");n.height=2*e,n.width=2*e,r.shadowOffsetX=r.shadowOffsetY=2*e,r.shadowBlur=t,r.shadowColor="#000000",r.beginPath(),r.arc(-e,-e,e/2,0,2*Math.PI,!0),r.closePath(),r.fill()},createGradient:function(){var e=this.colors,t=document.createElement("canvas"),n=t.getContext("2d"),r=n.createLinearGradient(0,0,0,256);t.height=256,t.width=1;for(var i=1,o=0,a=e.length;o<a;o++)r.addColorStop(i/a,e[o]),i++;n.fillStyle=r,n.fillRect(0,0,1,256),this.grad=n.getImageData(0,0,1,256).data},update:function(){var e=this._map.containerPointToLayerPoint([0,0]);BM.a.DomUtil.setPosition(this.rootCanvas,e);var t=this;t.refresh(),t.currentMousePosition&&(t.currentMousePosition=BM.a.point(t.currentMousePosition.x-t.movingOffset[0],t.currentMousePosition.y-t.movingOffset[1])),t.movingOffset=[0,0],t._zoom=t._map.getZoom(),t._center=t._map.getCenter()},getLocalXY:function(e){if(!this._map)return e;var t=e;BM.a.Util.isArray(e)&&(t=BM.a.point(e[0],e[1])),e instanceof BM.a.Point||(t=e instanceof Xe||e instanceof ct?BM.a.point(e.x,e.y):BM.a.point(e.lon,e.lat));var n=this._map.latLngToContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(t):BM.a.latLng(t.y,t.x));return[n.x,n.y]},setOpacity:function(e){e!==this.options.opacity&&(e&&(this.options.opacity=e),this._updateOpacity())},removeFeatures:function(e){if(e&&0!==e.length&&this.features&&0!==this.features.length){if(e===this.features)return this.removeAllFeatures();be.isArray(e)||(e=[e]);for(var t,n,r=[],i=0,o=e.length;i<o;i++)t=e[i],-1!==(n=be.indexOf(this.features,t))?this.features.splice(n,1):r.push(t);var a=0==r.length;this._map.fire("featuresremoved",{features:r,succeed:a}),this.refresh()}},removeAllFeatures:function(){this.features=[],this.refresh()},_createCanvasContainer:function(){var e=this.getPane(),t="heatMapLayer leaflet-layer leaflet-zoom-"+(this._map.options.zoomAnimation&&BM.a.Browser.any3d?"animated":"hide");this.rootCanvas=BM.a.DomUtil.create("canvas",t,e);var n=BM.a.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);this.rootCanvas.id=this.id,this.rootCanvas.style[n]="50% 50%",this.rootCanvas.style.position="absolute",this.rootCanvas.style.zIndex=200,be.modifyDOMElement(this.rootCanvas,null,null,null,null,null,null,this.opacity),this.canvasContext=this.rootCanvas.getContext("2d")},_updateOpacity:function(){var e=this;be.modifyDOMElement(e.rootCanvas,null,null,null,null,null,null,e.options.opacity),null!==e._map&&e._map.fire("changelayer",{layer:e,property:"opacity"})},getEvents:function(){var e={zoomend:this._reset,moveend:this._reset,resize:this._resize};return this._map._zoomAnimated&&(e.zoomanim=this._zoomAnim),e},toiClientFeature:function(e){BM.a.Util.isArray(e)||(e=[e]);for(var t=[],n=0,r=e.length;n<r;n++)if(e[n]instanceof _I)t.push(e[n].toFeature());else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e[n].type)){var i=new Rn;t=t.concat(i.read(e[n]))}else{if(!e[n].geometry||!e[n].geometry.parts)throw new Error("Features's type does not match, please check.");t.push(ab.fromJson(e[n]).toFeature())}return t},_zoomAnim:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._getCenterOffset(e.center)._multiplyBy(-t).subtract(this._map._getMapPanePos());BM.a.DomUtil.setTransform?BM.a.DomUtil.setTransform(this.rootCanvas,n,t):this.rootCanvas.style[BM.a.DomUtil.TRANSFORM]=BM.a.DomUtil.getTranslateString(n)+" scale("+t+")"},_reset:function(){var e=this;e.update();var t=e._map.getSize(),n=this._map.containerPointToLayerPoint([0,0]);BM.a.DomUtil.setPosition(this.rootCanvas,n),parseFloat(e.rootCanvas.width)!==parseFloat(t.x)&&(e.rootCanvas.width=t.x),parseFloat(e.rootCanvas.height)!==parseFloat(t.y)&&(e.rootCanvas.height=t.y),e.refresh()},_resize:function(){var e=this._map.getSize();this.maxWidth=e.x,this.maxHeight=e.y}});BM.a.supermap.heatMapLayer=function(e,t){return new wI(e,t)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var OI=lR.extend({initialize:function(e,t){lR.prototype.initialize.call(this,e,t)},code:function(e,t){var n=this;new ti(this.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).code(be.urlPathAppend(n.url,"geocoding"),e)},decode:function(e,t){var n=this;new ti(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).decode(be.urlPathAppend(n.url,"geodecoding"),e)}}),xI=function(e,t){return new OI(e,t)};BM.a.supermap.addressMatchService=xI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var CI=lR.extend({initialize:function(e,t){lR.prototype.initialize.call(this,e,t)},queryChart:function(e,t,n){var r=this,i=r._processParams(e),o=r._processFormat(n);new sa(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:o}).processAsync(i)},getChartFeatureInfo:function(e){var t=this,n=t.url.concat();n=be.urlPathAppend(n,"chartFeatureInfoSpecs"),new Yo(n,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,serverType:t.options.serverType,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).processAsync()},_processParams:function(e){if(!e)return{};e.returnContent=null==e.returnContent||e.returnContent,e.chartQueryFilterParameters&&!BM.a.Util.isArray(e.chartQueryFilterParameters)&&(e.chartQueryFilterParameters=[e.chartQueryFilterParameters]),e.bounds&&(e.bounds=mR.toSuperMapBounds(e.bounds))},_processFormat:function(e){return e||i.GEOJSON}}),PI=function(e,t){return new CI(e,t)};BM.a.supermap.chartService=PI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var TI=lR.extend({initialize:function(e,t){lR.prototype.initialize.call(this,e,t)},getFields:function(e,t){var n=this;new Kh(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},datasource:e.datasource,dataset:e.dataset}).processAsync()},getFieldStatisticsInfo:function(e,t){if(e instanceof hu){var n=this,r=e.fieldName,i=e.statisticMode;i&&!BM.a.Util.isArray(i)&&(i=[i]),n.currentStatisticResult={fieldName:r},n._statisticsCallback=t,i.forEach(function(t){n.currentStatisticResult[t]=null,n._fieldStatisticRequest(e.datasource,e.dataset,r,t)})}},_fieldStatisticRequest:function(e,t,n,r){var i=this;new bu(i.url,{eventListeners:{scope:i,processCompleted:i._processCompleted,processFailed:i._statisticsCallback},datasource:e,dataset:t,field:n,statisticMode:r,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers}).processAsync()},_processCompleted:function(e){var t=this,n=!0,r=e.result;for(var i in this.currentStatisticResult&&null==t.currentStatisticResult[r.mode]&&(this.currentStatisticResult[r.mode]=r.result),t.currentStatisticResult)if(null==t.currentStatisticResult[i]){n=!1;break}n&&t._statisticsCallback({result:t.currentStatisticResult})}}),EI=function(e,t){return new TI(e,t)};BM.a.supermap.fieldService=EI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var kI=lR.extend({initialize:function(e,t){lR.prototype.initialize.call(this,e,t)},getGridCellInfos:function(e,t){if(e instanceof $h){var n=this;new ap(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)}}}),MI=function(e,t){return new kI(e,t)};BM.a.supermap.gridCellInfosService=MI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var AI=lR.extend({initialize:function(e,t){lR.prototype.initialize.call(this,e,t)},getLayersInfo:function(e){var t=this;new Pd(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,serverType:t.options.serverType,eventListeners:{processCompleted:e,processFailed:e}}).processAsync()},setLayerInfo:function(e,t){if(e instanceof lb){var n=this,r=e.resourceID,i=e.tempLayerName,o=e.layerInfo;if(r&&i){var a=be.urlPathAppend(n.url,"tempLayersSet/".concat(r,"/").concat(i));new db(a,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(o)}}},setLayersInfo:function(e,t){if(e instanceof vb){var n=this,r=e.resourceID,i=!!e.isTempLayers&&e.isTempLayers,o=e.layersInfo;if((!i||r)&&o)new xb(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{processCompleted:t,processFailed:t},resourceID:r,isTempLayers:i}).processAsync(o)}},setLayerStatus:function(e,t){if(e instanceof Pb){var n=this;new jb(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(e)}}}),LI=function(e,t){return new AI(e,t)};BM.a.supermap.layerInfoService=LI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var jI=lR.extend({initialize:function(e,t){lR.prototype.initialize.call(this,e,t)},measureDistance:function(e,t){return this.measure(f.DISTANCE,e,t),this},measureArea:function(e,t){return this.measure(f.AREA,e,t),this},measure:function(e,t,n){if(t instanceof rv){var r=this;t.geometry&&(t.geometry=gR(t.geometry)),new cv(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,measureMode:e,eventListeners:{scope:r,processCompleted:n,processFailed:n}}).processAsync(t)}}}),RI=function(e,t){return new jI(e,t)};BM.a.supermap.measureService=RI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var NI=lR.extend({initialize:function(e,t){lR.prototype.initialize.call(this,e,t)},sinksFacilityAnalyst:function(e,t){var n=this;new Us(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)},sourcesFacilityAnalyst:function(e,t){var n=this;new el(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)},traceUpFacilityAnalyst:function(e,t){var n=this;new Dl(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)},traceDownFacilityAnalyst:function(e,t){var n=this;new Ol(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)},upstreamFacilityAnalyst:function(e,t){var n=this;new Kl(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)}}),II=function(e,t){return new NI(e,t)};BM.a.supermap.networkAnalyst3DService=II;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var DI=lR.extend({initialize:function(e,t){lR.prototype.initialize.call(this,e,t)},burstPipelineAnalyst:function(e,t){var n=this;new Go(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(n._processParams(e))},computeWeightMatrix:function(e,t){var n=this;new xa(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(n._processParams(e))},findClosestFacilities:function(e,t,n){var r=this;new Eu(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},streamFacilityAnalyst:function(e,t,n){var r=this;new ul(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},findLocation:function(e,t,n){var r=this;new Du(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},findPath:function(e,t,n){var r=this;new tc(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},findTSPPaths:function(e,t,n){var r=this;new bc(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},findMTSPPaths:function(e,t,n){var r=this;new qu(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},findServiceAreas:function(e,t,n){var r=this;new cc(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},updateEdgeWeight:function(e,t){var n=this;new ww(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)},updateTurnNodeWeight:function(e,t){var n=this;new Aw(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)},_processParams:function(e){if(!e)return{};if(e.centers&&BM.a.Util.isArray(e.centers)&&e.centers.map(function(t,n){return e.centers[n]=t instanceof BM.a.LatLng?{x:t.lng,y:t.lat}:t,e.centers[n]}),e.nodes&&BM.a.Util.isArray(e.nodes)&&e.nodes.map(function(t,n){return e.nodes[n]=t instanceof BM.a.LatLng?{x:t.lng,y:t.lat}:t,e.nodes[n]}),e.event&&e.event instanceof BM.a.LatLng&&(e.event={x:e.event.lng,y:e.event.lat}),e.facilities&&BM.a.Util.isArray(e.facilities)&&e.facilities.map(function(t,n){return e.facilities[n]=t instanceof BM.a.LatLng?{x:t.lng,y:t.lat}:t,e.facilities[n]}),e.parameter&&e.parameter.barrierPoints){var t=e.parameter.barrierPoints;BM.a.Util.isArray(t)?t.map(function(t,n){return e.parameter.barrierPoints[n]=t instanceof BM.a.LatLng?{x:t.lng,y:t.lat}:t,e.parameter.barrierPoints[n]}):e.parameter.barrierPoints=[t instanceof BM.a.LatLng?{x:t.lng,y:t.lat}:t]}return e},_processFormat:function(e){return e||i.GEOJSON}}),FI=function(e,t){return new DI(e,t)};BM.a.supermap.networkAnalystService=FI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var BI=lR.extend({initialize:function(e,t){t=t||{},BM.a.setOptions(this,t),lR.prototype.initialize.call(this,e,t),this.kernelDensityJobs={},this.summaryMeshJobs={},this.queryJobs={},this.summaryRegionJobs={},this.vectorClipJobs={},this.overlayGeoJobs={},this.buffersJobs={},this.topologyValidatorJobs={},this.summaryAttributesJobs={}},getKernelDensityJobs:function(e,t){var n=this,r=n._processFormat(t);new gm(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getKernelDensityJobs()},getKernelDensityJob:function(e,t,n){var r=this,i=r._processFormat(n);new gm(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getKernelDensityJob(e)},addKernelDensityJob:function(e,t,n,r){var i=this,o=i._processParams(e),a=i._processFormat(r);new gm(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.kernelDensityJobs[e.id]=e.state}},format:a}).addKernelDensityJob(o,n)},getKernelDensityJobState:function(e){return this.kernelDensityJobs[e]},getSummaryMeshJobs:function(e,t){var n=this,r=n._processFormat(t);new dS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getSummaryMeshJobs()},getSummaryMeshJob:function(e,t,n){var r=this,i=r._processFormat(n);new dS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getSummaryMeshJob(e)},addSummaryMeshJob:function(e,t,n,r){var i=this,o=i._processParams(e),a=i._processFormat(r);new dS(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.summaryMeshJobs[e.id]=e.state}},format:a}).addSummaryMeshJob(o,n)},getSummaryMeshJobState:function(e){return this.summaryMeshJobs[e]},getQueryJobs:function(e,t){var n=this,r=n._processFormat(t);new zb(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getQueryJobs()},getQueryJob:function(e,t,n){var r=this,i=r._processFormat(n);new zb(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getQueryJob(e)},addQueryJob:function(e,t,n,r){var i=this,o=i._processParams(e),a=i._processFormat(r);new zb(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.queryJobs[e.id]=e.state}},format:a}).addQueryJob(o,n)},getQueryJobState:function(e){return this.queryJobs[e]},getSummaryRegionJobs:function(e,t){var n=this,r=n._processFormat(t);new xS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getSummaryRegionJobs()},getSummaryRegionJob:function(e,t,n){var r=this,i=r._processFormat(n);new xS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getSummaryRegionJob(e)},addSummaryRegionJob:function(e,t,n,r){var i=this,o=i._processParams(e),a=i._processFormat(r);new xS(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.summaryRegionJobs[e.id]=e.state}},format:a}).addSummaryRegionJob(o,n)},getSummaryRegionJobState:function(e){return this.summaryRegionJobs[e]},getVectorClipJobs:function(e,t){var n=this,r=n._processFormat(t);new Uw(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getVectorClipJobs()},getVectorClipJob:function(e,t,n){var r=this,i=r._processFormat(n);new Uw(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getVectorClipJob(e)},addVectorClipJob:function(e,t,n,r){var i=this,o=i._processParams(e),a=i._processFormat(r);new Uw(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.vectorClipJobs[e.id]=e.state}},format:a}).addVectorClipJob(o,n)},getVectorClipJobState:function(e){return this.vectorClipJobs[e]},getOverlayGeoJobs:function(e,t){var n=this,r=n._processFormat(t);new Pv(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getOverlayGeoJobs()},getOverlayGeoJob:function(e,t,n){var r=this,i=r._processFormat(n);new Pv(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getOverlayGeoJob(e)},addOverlayGeoJob:function(e,t,n,r){var i=this,o=i._processParams(e),a=i._processFormat(r);new Pv(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.overlayGeoJobs[e.id]=e.state}},format:a}).addOverlayGeoJob(o,n)},getoverlayGeoJobState:function(e){return this.overlayGeoJobs[e]},getBuffersJobs:function(e,t){var n=this,r=n._processFormat(t);new Co(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getBuffersJobs()},getBuffersJob:function(e,t,n){var r=this,i=r._processFormat(n);new Co(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getBuffersJob(e)},addBuffersJob:function(e,t,n,r){var i=this,o=i._processParams(e),a=i._processFormat(r);new Co(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.buffersJobs[e.id]=e.state}},format:a}).addBuffersJob(o,n)},getBuffersJobState:function(e){return this.buffersJobs[e]},getTopologyValidatorJobs:function(e,t){var n=this,r=n._processFormat(t);new W_(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getTopologyValidatorJobs()},getTopologyValidatorJob:function(e,t,n){var r=this,i=r._processFormat(n);new W_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getTopologyValidatorJob(e)},addTopologyValidatorJob:function(e,t,n,r){var i=this,o=i._processParams(e),a=i._processFormat(r);new W_(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.topologyValidatorJobs[e.id]=e.state}},format:a}).addTopologyValidatorJob(o,n)},getTopologyValidatorJobState:function(e){return this.topologyValidatorJobs[e]},getSummaryAttributesJobs:function(e,t){var n=this,r=n._processFormat(t);new aS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getSummaryAttributesJobs()},getSummaryAttributesJob:function(e,t,n){var r=this,i=r._processFormat(n);new aS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getSummaryAttributesJob(e)},addSummaryAttributesJob:function(e,t,n,r){var i=this,o=i._processParams(e),a=i._processFormat(r);new aS(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.summaryAttributesJobs[e.id]=e.state}},format:a}).addSummaryAttributesJob(o,n)},getSummaryAttributesJobState:function(e){return this.summaryAttributesJobs[e]},_processFormat:function(e){return e||i.GEOJSON},_processParams:function(e){return e?(e.bounds&&(e.bounds=mR.toSuperMapBounds(e.bounds)),e.query&&(e.query=mR.toSuperMapBounds(e.query)),e.geometryQuery&&(e.geometryQuery=mR.toProcessingParam(e.geometryQuery)),e.geometryClip&&(e.geometryClip=mR.toProcessingParam(e.geometryClip)),e):{}}}),UI=function(e,t){return new BI(e,t)};BM.a.supermap.processingService=UI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var GI=lR.extend({initialize:function(e,t){lR.prototype.initialize.call(this,e,t)},queryByBounds:function(e,t,n){var r=this;new Qv(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},queryByDistance:function(e,t,n){var r=this;new cg(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},queryBySQL:function(e,t,n){var r=this;new Ug(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},queryByGeometry:function(e,t,n){var r=this;new Cg(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},_processParams:function(e){return e?(e.returnContent=null==e.returnContent||e.returnContent,e.queryParams&&!BM.a.Util.isArray(e.queryParams)&&(e.queryParams=[e.queryParams]),e.bounds&&(e.bounds=mR.toSuperMapBounds(e.bounds)),e.geometry&&(e.geometry instanceof BM.a.Point?e.geometry=new Xe(e.geometry.x,e.geometry.y):e.geometry=gR(e.geometry)),e):{}},_processFormat:function(e){return e||i.GEOJSON}}),zI=function(e,t){return new GI(e,t)};BM.a.supermap.queryService=zI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var VI=lR.extend({initialize:function(e,t){lR.prototype.initialize.call(this,e,t)},getAreaSolarRadiationResult:function(e,t,n){var r=this;new _i(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(e)},bufferAnalysis:function(e,t,n){var r=this;new io(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},densityAnalysis:function(e,t,n){var r=this;new ms(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},generateSpatialData:function(e,t,n){var r=this;new Ec(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(e)},geoRelationAnalysis:function(e,t,n){var r=this;new bf(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(e)},interpolationAnalysis:function(e,t,n){var r=this;new um(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},mathExpressionAnalysis:function(e,t,n){var r=this;new tv(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},overlayAnalysis:function(e,t,n){var r=this;new vv(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},routeCalculateMeasure:function(e,t,n){var r=this;new Qg(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},routeLocate:function(e,t,n){var r=this;new ib(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},surfaceAnalysis:function(e,t,n){var r=this;new jS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},terrainCurvatureCalculate:function(e,t,n){var r=this;new zS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(e)},thiessenAnalysis:function(e,t,n){var r=this;new x_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},geometrybatchAnalysis:function(e,t,n){for(var r=this,i=new A_(r.url,{serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}),o=[],a=0;a<e.length;a++){var s=e[a];o.push({analystName:s.analystName,param:r._processParams(s.param)})}i.processAsync(o)},_processParams:function(e){if(!e)return{};if(e.bounds&&(e.bounds=mR.toSuperMapBounds(e.bounds)),e.inputPoints)for(var t=0;t<e.inputPoints.length;t++){var n=e.inputPoints[t];BM.a.Util.isArray(n)&&(e.inputPoints[t]={x:n[0],y:n[1],tag:n[2]})}if(e.points)for(var r=0;r<e.points.length;r++){var i=e.points[r];BM.a.Util.isArray(i)?e.points[r]={x:i[0],y:i[1]}:i instanceof BM.a.LatLng?e.points[r]={x:i.lng,y:i.lat}:e.points[r]={x:i.x,y:i.y}}if(e.point&&(BM.a.Util.isArray(e.point)?e.point={x:e.point[0],y:e.point[1]}:e.point instanceof BM.a.LatLng?e.point={x:e.point.lng,y:e.point.lat}:e.point={x:e.point.x,y:e.point.y}),e.extractRegion&&(e.extractRegion=gR(e.extractRegion)),e.extractParameter&&e.extractParameter.clipRegion&&(e.extractParameter.clipRegion=gR(e.extractParameter.clipRegion)),e.clipParam&&e.clipParam.clipRegion&&(e.clipParam.clipRegion=gR(e.clipParam.clipRegion)),e.sourceGeometry){var o=null;e.sourceGeometrySRID&&(o=e.sourceGeometrySRID),e.sourceGeometry=gR(e.sourceGeometry),o&&(e.sourceGeometry.SRID=o),delete e.sourceGeometry.sourceGeometrySRID}if(e.operateGeometry&&(e.operateGeometry=gR(e.operateGeometry)),e.sourceGeometries){for(var a=[],s=0;s<e.sourceGeometries.length;s++)a.push(gR(e.sourceGeometries[s]));e.sourceGeometries=a}if(e.operateGeometries){for(var l=[],u=0;u<e.operateGeometries.length;u++)l.push(gR(e.operateGeometries[u]));e.operateGeometries=l}if(e.sourceRoute&&e.sourceRoute instanceof BM.a.Polyline){var c={type:"LINEM"};c.parts=[e.sourceRoute.getLatLngs().length],c.points=[];for(var f=0;f<e.sourceRoute.getLatLngs().length;f++){var h=e.sourceRoute.getLatLngs()[f];c.points=c.points.concat({x:h.lng,y:h.lat,measure:h.alt})}e.sourceRoute=c}return e.operateRegions&&BM.a.Util.isArray(e.operateRegions)&&e.operateRegions.map(function(t,n){return e.operateRegions[n]=gR(t),e.operateRegions[n]}),e},_processFormat:function(e){return e||i.GEOJSON}}),JI=function(e,t){return new VI(e,t)};BM.a.supermap.spatialAnalystService=JI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var HI=lR.extend({initialize:function(e,t){lR.prototype.initialize.call(this,e,t)},getThemeInfo:function(e,t){var n=this;new v_(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)}}),qI=function(e,t){return new HI(e,t)};BM.a.supermap.themeService=qI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var WI=lR.extend({initialize:function(e,t){lR.prototype.initialize.call(this,e,t)},queryStop:function(e,t){var n=this;new Kb(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)},analysisTransferPath:function(e,t){var n=this;new iw(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(n._processParams(e))},analysisTransferSolution:function(e,t){var n=this;new pw(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(n._processParams(e))},_processParams:function(e){return e?(e.points&&BM.a.Util.isArray(e.points)&&e.points.map(function(t,n){return e.points[n]=t instanceof BM.a.LatLng?{x:t.lng,y:t.lat}:t,e.points[n]}),e):{}}}),YI=function(e,t){return new WI(e,t)};BM.a.supermap.trafficTransferAnalystService=YI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var QI=lR.extend({initialize:function(e,t){lR.prototype.initialize.call(this,e,t)},createWebPrintingJob:function(e,t){if(e){var n=this;console.log(n.url),new LO(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).createWebPrintingJob(n._processParams(e))}},getPrintingJob:function(e,t){var n=this;new LO(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).getPrintingJob(e)},getPrintingJobResult:function(e,t){var n=this;new LO(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).getPrintingJobResult(e)},getLayoutTemplates:function(e){var t=this;new LO(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,serverType:t.options.serverType,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).getLayoutTemplates()},_processParams:function(e){return e.layoutOptions&&e.layoutOptions.littleMapOptions&&(e.layoutOptions.littleMapOptions.center=this._toPointObject(e.layoutOptions.littleMapOptions.center)),e.exportOptions&&(e.exportOptions.center=this._toPointObject(e.exportOptions.center)),e},_toPointObject:function(e){return BM.a.Util.isArray(e)?{x:e[0],y:e[1]}:e instanceof r.Geometry.Point||e instanceof BM.a.Point?{x:e.x,y:e.y}:e instanceof BM.a.LatLng?{x:e.lng,y:e.lat}:e}}),XI=function(e,t){return new QI(e,t)};BM.a.supermap.webPrintingJobService=XI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var KI=BM.a.Control.extend({options:{position:"topright",style:function(e,t){return t?BM.a.circleMarker(t,{fillColor:"blue",weight:1,opacity:1,color:"blue",fillOpacity:.6}):{fillColor:"blue",weight:1,opacity:1,color:"blue",fillOpacity:.6}},onEachFeature:null},initialize:function(e){BM.a.setOptions(this,e),this._event=new BM.a.Evented,this.rootContainer=null},onAdd:function(e){return this.map=e,this.rootContainer=this._initView(),this.rootContainer},on:function(e,t){this._event.on(e,t)},off:function(e,t){this._event.off(e,t)},_initView:function(){},_preventMapEvent:function(e,t){e&&t&&(e.addEventListener("mouseover",function(){t.dragging.disable(),t.scrollWheelZoom.disable(),t.doubleClickZoom.disable()}),e.addEventListener("mouseout",function(){t.dragging.enable(),t.scrollWheelZoom.enable(),t.doubleClickZoom.enable()}))}});BM.a.supermap.components.componentsViewBase=function(e){return new KI(e)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ZI=BM.a.Evented.extend({initialize:function(){this.fileModel=new Sk},readFile:function(e){var t=e.target,n=t.files[0];if(n.size>this.fileModel.FileConfig.fileMaxSize)return this.fire("filesizeexceed",{messageType:"warring",message:Ck.i18n("msg_fileSizeExceeded")}),!1;var r=t.value,i=n.name,o=DM.getFileType(i);if(!o)return this.fire("errorfileformat",{messageType:"failure",message:Ck.i18n("msg_fileTypeUnsupported")}),!1;""!==i&&(this.fileModel.set("loadFileObject",{file:n,filePath:r,fileName:i,fileType:o}),this._readData())},_readData:function(){var e=this,t=this,n=this.fileModel.loadFileObject.fileType;Ek.readFile(n,{file:this.fileModel.loadFileObject.file,path:this.fileModel.loadFileObject.filePath},function(r){Ek.processDataToGeoJson(n,r,function(t){t&&e.fire("openfilesucceeded",{result:t,layerName:e.fileModel.loadFileObject.fileName.split(".")[0]})},function(e){t.fire("openfilefailed",{messageType:"failure",message:e})},e)},function(){t.fire("openfilefailed",{messageType:"failure",message:Ck.i18n("msg_openFileFail")})},this)}}),$I=function(e){return new ZI(e)};BM.a.supermap.components.openFileViewModel=$I,BM.a.supermap.components.util=DM;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var eD=KI.extend({options:{layer:null},initialize:function(e){KI.prototype.initialize.apply(this,[e]),this.viewModel=new ZI},setViewStyle:function(e,t){this.rootContainer.style[e]=t},_initView:function(){var e=this,t=BM.a.DomUtil.create("div","component-openfile");return t.id="openFile",this.fileSelect=BM.a.DomUtil.create("div","",t),this.label=BM.a.DomUtil.create("label","component-openfile__span--select",this.fileSelect),this.label.htmlFor="input_file",BM.a.DomUtil.create("div","supermapol-icons-upload",this.label),BM.a.DomUtil.create("span","component-openfile__span",this.label).appendChild(document.createTextNode(Ck.i18n("text_chooseFile"))),this.fileInput=BM.a.DomUtil.create("input","component-openfile__input",this.fileSelect),this.fileInput.id="input_file",this.fileInput.type="file",this.fileInput.accept=".json,.geojson,.csv,.xls,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel",this.fileInput.onchange=function(t){e.messageBox.closeView(),e.viewModel.readFile(t)},this.messageBox=new wk,this.viewModel.on("filesizeexceed",function(t){e.messageBox.showView(t.message,t.messageType)}),this.viewModel.on("errorfileformat",function(t){e.messageBox.showView(t.message,t.messageType)}),this.viewModel.on("openfilefailed",function(t){e.messageBox.showView(t.message,t.messageType),e._event.fire("openfilefailed",t)}),this.viewModel.on("readdatafail",function(t){e.messageBox.showView(t.message,t.messageType)}),this.viewModel.on("openfilesucceeded",function(t){e._event.fire("openfilesucceeded",t)}),this._preventMapEvent(t,this.map),t}}),tD=function(e){return new eD(e)};BM.a.supermap.components.openFile=tD;function nD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iD(e,t,n){return t&&rD(e.prototype,t),n&&rD(e,n),e}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var oD=function(){function e(t){nD(this,e),this.layers=[],t&&t.length>0&&this.addLayers(t),this.currentLayerDataModel=null}return iD(e,[{key:"addLayers",value:function(e,t,n,r){for(var i=0;i<e.length;i++){var o=e[i].layerName;if(e[i].layer instanceof BM.a.GeoJSON){var a=new aD(e[i].layer);this.layers[o]=a,t&&t.call(r,{layerName:o,layer:a})}else n&&n.call(r,"")}}},{key:"setCurrentLayerDataModel",value:function(e){this.layers[e]&&(this.currentLayerDataModel=this.layers[e])}}]),e}();BM.a.supermap.components.GeoJsonLayersDataModel=oD;var aD=function(){function e(t){if(nD(this,e),this.layer=t,this.features=t.getLayers(),this.attributeNames=[],this.features[0].feature.properties)for(var n in this.features[0].feature.properties)this.attributeNames.push(n);this.operatingAttributeNames=[],this.attributes={}}return iD(e,[{key:"setOperatingAttributeNames",value:function(e){this.operatingAttributeNames=e}},{key:"getAllAttributeNames",value:function(){return this.attributeNames}},{key:"getAttributeNamesByType",value:function(e){if(this.features[0].feature.properties){var t=this.features[0].feature.properties,n=[];if("Num"===e)for(var r in t)isNaN(t[r])||n.push(r);else n=this.attributeNames;return n}}},{key:"getAllFeatures",value:function(){return this.features}},{key:"getAttributeValueByAttributeName",value:function(e){if(this.attributes[e])return this.attributes[e];this.attributes[e]=[];for(var t=0;t<this.features.length;t++)this.attributes[e].push([this.features[t].feature.properties[e]]);return this.attributes[e]}},{key:"getFeaturesByKeyWord",value:function(e){var t=[],n=new RegExp(e.toLowerCase()),r=this;return this.features.forEach(function(e){if(!e.feature.properties)return null;for(var i,o=e.feature.properties,a=0,s=(i=r.operatingAttributeNames.length>0?r.operatingAttributeNames:r.attributeNames).length;a<s;a++)if(o[i[a]]&&n.test(o[i[a]].toString().toLowerCase())){var l=i[a],u=o[i[a]];e.filterAttribute={filterAttributeName:l,filterAttributeValue:u},t.push(e);break}}),t}}]),e}(),sD=BM.a.Evented.extend({options:{cityGeoCodingConfig:{addressUrl:"https://www.supermapol.com/iserver/services/localsearch/rest/searchdatas/China/poiinfos",key:"fvV2osxwuZWlY0wJb8FEb2i5"}},initialize:function(e,t){if(!e)return new Error("Cannot find map, fileModel.map cannot be null.");this.map=e,BM.a.Util.setOptions(this,t),this.dataModel=new oD,this.geoCodeParam={keyWords:"北京市",city:"北京市",pageSize:this.options.pageSize,pageNum:this.options.pageNum},this.searchCache={}},search:function(e,t){t?this.searchFromLayer(e,t):this.searchFromCityLocalSearchService(e)},searchFromLayer:function(e,t){if(this.dataModel.layers[t]){var n=this.dataModel.layers[t].getFeaturesByKeyWord(e);n&&n.length>0?this.fire("searchlayersucceeded",{result:n}):this.fire("searchfailed",{searchType:"searchLayersField"})}},searchFromCityLocalSearchService:function(e){if(this.searchCache[e])this.fire("geocodesucceeded",{result:this.searchCache[e]});else{this.geoCodeParam.keyWords=e||this.geoCodeParam.city;var t=this,n=this._getSearchUrl(this.geoCodeParam);tr.get(n).then(function(e){return e.json()}).then(function(e){if(e.error||0===e.poiInfos.length)t.fire("searchfailed",{searchType:"searchGeocodeField"});else if(e.poiInfos){var n=t._dataToGeoJson(e.poiInfos,t.geoCodeParam);t.fire("geocodesucceeded",{result:n})}})}},addSearchLayers:function(e){var t=this;this.dataModel.addLayers(e,function(e){t.fire("newlayeradded",{layerName:e.layerName})},null,this)},panToLayer:function(e){this.dataModel.layers[e]&&this.map.flyToBounds(this.dataModel.layers[e].layer.getBounds())},panToCity:function(e){this.geoCodeParam.keyWords=e,this.geoCodeParam.city=e;var t=this,n=this._getSearchUrl(this.geoCodeParam);tr.get(n).then(function(e){return e.json()}).then(function(e){if(e.poiInfos.length>0){var n=BM.a.latLng(e.poiInfos[0].location.y,e.poiInfos[0].location.x);t.map.setView(n,8)}else t.fire("searchfailed",{searchType:"cityGeocodeField"})})},_dataToGeoJson:function(e,t){for(var n=[],r=0;r<e.length;r++){var i={type:"Feature",geometry:{type:"Point",coordinates:[e[r].location.x,e[r].location.y]},properties:{name:e[r].name||t.keyWords,address:e[r].formatedAddress||e[r].address}};n.push(i)}return n},_getSearchUrl:function(e){return this.options.cityGeoCodingConfig.addressUrl+".json?keywords=".concat(e.keyWords,"&city=").concat(e.city,"&pageSize=").concat(e.pageSize,"&pageNum=").concat(e.pageNum,"&key=").concat(this.options.cityGeoCodingConfig.key)}});
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/BM.a.supermap.components.searchViewModel=function(e){return new sD(e)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var lD=KI.extend({options:{cityConfig:{HOT:{HOT:["北京市","上海市","广州市","深圳市","南京市","杭州市","天津市","重庆市","成都市","青岛市","苏州市","无锡市","常州市","温州市","武汉市","长沙市","南昌市","三亚市","合肥市","石家庄市"]},AB:{A:["阿拉善盟","鞍山市","安庆市","安阳市","阿坝藏族羌族自治州","安顺市","阿里地区","安康市","阿克苏地区","阿勒泰地区","阿拉尔市"],B:["北京市","保定市","包头市","巴彦淖尔市","本溪市","白山市","白城市","蚌埠市","亳州市","滨州市","北海市","百色市","白沙黎族自治县","保亭黎族苗族自治县","巴中市","毕节地区","保山市","宝鸡市","白银市","博尔塔拉蒙古自治州","巴音郭楞蒙古自治州","北区"]},CD:{C:["重庆市","成都市","常州市","长沙市","承德市","沧州市","长治市","赤峰市","朝阳市","长春市","滁州市","巢湖市","池州市","常德市","郴州市","潮州市","崇左市","澄迈县","昌江黎族自治县","楚雄彝族自治州","昌都地区","昌吉回族自治州"],D:["大同市","大连市","丹东市","大庆市","大兴安岭地区","东营市","德州市","东莞市","儋州市","东方市","定安县","德阳市","达州市","大理白族自治州","德宏傣族景颇族自治州","迪庆藏族自治州","定西市","东区","大埔区","大堂区"]},EFG:{E:["鄂尔多斯市","鄂州市","恩施土家族苗族自治州"],F:["抚顺市","阜新市","阜阳市","福州市","抚州市","佛山市","防城港市"],G:["广州市","赣州市","桂林市","贵港市","广元市","广安市","贵阳市","固原市","高雄市","高雄县","甘南藏族自治州","甘孜藏族自治州"]},H:{H:["杭州市","合肥市","邯郸市","衡水市","呼和浩特市","呼伦贝尔市","葫芦岛市","哈尔滨市","鹤岗市","黑河市","淮安市","湖州市","淮南市","淮北市","黄山市","菏泽市","鹤壁市","黄石市","黄冈市","衡阳市","怀化市","惠州市","河源市","贺州市","河池市","海口市","红河哈尼族彝族自治州","汉中市","海东地区","海北藏族自治州","黄南藏族自治州","海南藏族自治州","果洛藏族自治州","海西蒙古族藏族自治州","哈密地区","和田地区","花莲县","黄大仙区","花地玛堂区"]},J:{J:["晋城市","晋中市","锦州市","吉林市","鸡西市","佳木斯市","嘉兴市","金华市","景德镇市","九江市","吉安市","济南市","济宁市","焦作市","济源市","荆门市","荆州市","江门市","湛江市","揭阳市","嘉峪关市","金昌市","酒泉市","基隆市","嘉义市","嘉义县","九龙城区","嘉模堂区"]},KL:{K:["开封市","昆明市","克拉玛依市","克孜勒苏柯尔克孜自治州","喀什地区"],L:["廊坊市","临汾市","吕梁市","辽阳市","辽源市","连云港市","丽水市","六安市","龙岩市","莱芜市","临沂市","聊城市","洛阳市","漯河市","娄底市","柳州市","来宾市","临高县","乐东黎族自治县","陵水黎族自治县","泸州市","乐山市","凉山彝族自治州","六盘水市","丽江市","临沧市","拉萨市","林芝地区","兰州市","陇南市","临夏回族自治州"]},MNP:{M:["牡丹江市","马鞍山市","茂名市","梅州市","绵阳市","眉山市","苗栗县"],N:["南京市","南昌市","南通市","宁波市","南平市","宁德市","南阳市","南宁市","南沙群岛","内江市","南充市","怒江傈傈族自治州","那曲地区","南投县"],P:["盘锦市","莆田市","萍乡市","平顶山市","濮阳市","攀枝花市","平凉市","屏东县","澎湖县"]},QR:{Q:["青岛市","秦皇岛市","齐齐哈尔市","黔西南布依族苗族自治州","七台河市","衢州市","泉州市","潜江市","清远市","钦州市","琼海市","曲靖市","庆阳市","荃湾区","黔东南苗族侗族自治州","黔南布依族苗族自治州","琼中黎族苗族自治县"],R:["日照市","日喀则地区"]},S:{S:["上海市","深圳市","苏州市","石家庄市","三亚市","朔州市","沈阳市","四平市","松原市","双鸭山市","绥化市","宿迁市","绍兴市","宿州市","三明市","上饶市","三门峡市","商丘市","十堰市","随州市","邵阳市","韶关市","汕头市","汕尾市","三亚市","遂宁市","思茅市","山南地区","商洛市","石嘴山市","石河子市","深水埗区","沙田区","神农架林区","圣安多尼堂区","圣方济各堂区"]},T:{T:["天津市","唐山市","太原市","通辽市","铁岭市","通化市","泰州市","台州市","铜陵市","泰安市","天门市","屯昌县","铜仁地区","铜川市","天水市","吐鲁番地区","塔城地区","图木舒克市","台北市","台中市","台南市","台北县","桃园县","台中县","台南县","台东县","屯门区"]},W:{W:["无锡市","温州市","武汉市","乌海市","乌兰察布市","芜湖市","潍坊市","威海市","梧州市","五指山市","文昌市","万宁市","文山壮族苗族自治州","渭南市","武威市","吴忠市","乌鲁木齐市","五家渠市","湾仔区","望德堂区"]},X:{X:["邢台市","忻州市","兴安盟","徐州市","宣城市","厦门市","新余市","新乡市","许昌市","信阳市","襄樊市","孝感市","咸宁市","仙桃市","湘潭市","西安市","咸阳市","西宁市","新竹市","新竹县","西贡区","锡林郭勒盟","西沙群岛","湘西土家族苗族自治州","西双版纳傣族自治州"]},Y:{Y:["阳泉市","运城市","营口市","延边朝鲜族自治州","伊春市","盐城市","扬州市","鹰潭市","宜春市","烟台市","宜昌市","岳阳市","益阳市","永州市","阳江市","云浮市","玉林市","宜宾市","雅安市","玉溪市","延安市","榆林市","玉树藏族自治州","银川市","伊犁哈萨克自治州","宜兰县","云林县","油尖旺区","元朗区"]},Z:{Z:["郑州市","张家口市","镇江市","舟山市","漳州市","淄博市","枣庄市","周口市","驻马店市","株洲市","张家界市","珠海市","肇庆市","中山市","自贡市","资阳市","遵义市","昭通市","张掖市","中卫市","彰化县","中西区","中沙群岛的岛礁及其海域"]}},cityGeoCodingConfig:{addressUrl:"https://www.supermapol.com/iserver/services/localsearch/rest/searchdatas/China/poiinfos",key:"fvV2osxwuZWlY0wJb8FEb2i5"},isGeoCoding:!0,pageSize:10,pageNum:1,perPageDataNum:8},initialize:function(e){KI.prototype.initialize.apply(this,[e]),this.currentSearchLayerName="",this.isSearchLayer=!1,this.perPageDataNum=this.options.perPageDataNum},onAdd:function(e){return this.viewModel=new sD(e,this.options),KI.prototype.onAdd.apply(this,[e])},addSearchLayer:function(e){this.viewModel.addSearchLayers(e)},_initView:function(){var e=this,t=this,n=document.createElement("div");n.setAttribute("class","component-search-container");var r=document.createElement("div");r.setAttribute("class","component-search");var i=document.createElement("div");i.setAttribute("class","component-search__settings");var o=document.createElement("div");o.setAttribute("class","component-search__settings__name"),i.appendChild(o);var a=document.createElement("span");a.setAttribute("class","supermapol-icons-solid-down-triangle"),i.appendChild(a);var s=null;if(this.options.isGeoCoding){var l=new xM({config:this.options.cityConfig});s=l.getElement(),l.content.onclick=function(t){"SPAN"===t.target.nodeName&&t.target.innerText&&(e.viewModel.panToCity(t.target.innerHTML),e.messageBox.closeView(),o.removeChild(o.firstChild),o.insertBefore(document.createTextNode(t.target.innerHTML),o.firstChild),e.isSearchLayer=!1)},o.appendChild(document.createTextNode(l.content.getElementsByTagName("span")[0].innerText))}var u=function(){var e=document.createElement("div");e.setAttribute("class","component-search__layers");var n=document.createElement("div");n.setAttribute("class","component-search-layers-content"),e.appendChild(n);var r=document.createElement("div");r.setAttribute("class","component-search__layers__header");var i=document.createElement("div");i.setAttribute("class","load-btn"),r.appendChild(i);var a=document.createElement("span");a.setAttribute("class","supermapol-icons-poi-load"),i.appendChild(a);var s=document.createElement("span");s.appendChild(document.createTextNode(Ck.i18n("text_loadSearchCriteria"))),i.appendChild(s);var l=document.createElement("div");l.setAttribute("class","save-btn"),r.appendChild(l);var u=document.createElement("span");u.setAttribute("class","supermapol-icons-poi-save"),l.appendChild(u);var c=document.createElement("span");c.appendChild(document.createTextNode(Ck.i18n("text_saveSearchCriteria"))),l.appendChild(c);var f=document.createElement("div");return f.setAttribute("class","component-search__layers__body"),f.onclick=function(e){t.clearSearchResult();var n=null;if("component-search__layers__itme__singleselect"===e.target.classList[0])n=e.target;else{if("component-single-default-img"!==e.target.classList[0]&&"single-label"!==e.target.classList[0])return;n=e.target.parentNode}document.getElementsByClassName("component-single-checked-img").length>0&&document.getElementsByClassName("component-single-checked-img")[0].setAttribute("class","component-single-default-img"),n.firstChild.setAttribute("class","component-single-checked-img"),t.currentSearchLayerName=n.lastChild.innerText,t.isSearchLayer=!0,o.removeChild(o.firstChild),o.insertBefore(document.createTextNode(t.currentSearchLayerName),o.firstChild),t.viewModel.panToLayer(t.currentSearchLayerName),t.messageBox.closeView()},n.appendChild(f),e}(),c=[];s&&c.push({title:Ck.i18n("title_searchCity"),content:s}),c.push({title:Ck.i18n("title_searchLayer"),content:u});var f=new MM({tabs:c}),h=f.getElement();f.closeView(),r.appendChild(h),i.onclick=function(){h.hidden?f.showView():f.closeView()},r.appendChild(i),o.innerText||o.appendChild(document.createTextNode(Ck.i18n("text_label_chooseSearchLayers")));var p=document.createElement("div");p.setAttribute("class","component-search__input");var y=document.createElement("input");y.type="text",y.placeholder=Ck.i18n("text_label_searchTips"),p.appendChild(y),this.poiInput=y;var d=document.createElement("span");d.setAttribute("class","supermapol-icons-close"),d.hidden=!0,p.appendChild(d),r.appendChild(p);var m=document.createElement("div");m.setAttribute("class","component-search-icon supermapol-icons-search"),m.onclick=function(){v.closeView(),e.clearSearchResult(),e.messageBox.closeView(),f.closeView();var t=e.poiInput.value.trim();""!==t?e.isSearchLayer?e.viewModel.search(t,e.currentSearchLayerName):e.viewModel.search(t):e.messageBox.showView(Ck.i18n("msg_searchKeywords"))},y.onkeypress=function(e){if(13==e.which){var t=document.createEvent("HTMLEvents");t.initEvent("click",!1,!0),m.dispatchEvent(t)}},r.appendChild(m);var v=new IM;this._resultDomObj=v;var g=function(){var e=v.getElement();return e.style.position="absolute",e.style.top="44px",e.style.right="0",v.closeView(),v.content.onclick=function(e){var n=null;if("component-search-result-info"===e.target.parentNode.className)n=e.target.parentNode.parentNode;else if("component-search__resultitme"===e.target.parentNode.className)n=e.target.parentNode;else{if("component-search__resultitme"!==e.target.className)return;n=e.target}document.getElementsByClassName("component-search__resultitme-selected").length>0&&document.getElementsByClassName("component-search__resultitme-selected")[0].classList.remove("component-search__resultitme-selected"),n.firstChild.classList.add("component-search__resultitme-selected");var r=n.children[1].firstChild.innerText;t._linkageFeature(r)},e}();return r.appendChild(g),d.onclick=function(t){e.clearSearchResult(),y.value="",t.target.hidden=!0,v.closeView()},y.oninput=function(){d.hidden=!1},this.messageBox=new wk,this._addViewModelListener(),n.appendChild(r),this._preventMapEvent(n,this.map),n},_createSearchLayerItem:function(e){var t=document.createElement("div");t.setAttribute("class","component-search__layers__itme");var n=document.createElement("div");n.setAttribute("class","component-search__layers__itme__singleselect");var r=document.createElement("div");r.setAttribute("class","component-single-default-img"),n.appendChild(r);var i=document.createElement("span");i.setAttribute("class","single-label"),i.innerHTML=e,n.appendChild(i),t.appendChild(n),document.getElementsByClassName("component-search__layers__body")[0].appendChild(t)},_createResultItem:function(e,t){var n=document.createElement("div");n.setAttribute("class","component-search__resultitme");var r=document.createElement("div");"Point"===e||"MultiPoint"===e?r.setAttribute("class","supermapol-icons-marker-layer component-search-result-icon"):"LineString"===e||"MultiLineString "===e?r.setAttribute("class","supermapol-icons-line-layer component-search-result-icon"):"Polygon"===e||"MultiPolygon"===e?r.setAttribute("class","supermapol-icons-polygon-layer component-search-result-icon"):r.setAttribute("class","supermapol-icons-point-layer component-search-result-icon"),n.appendChild(r);var i=document.createElement("div");i.setAttribute("class","component-search-result-info");var o=document.createElement("div");i.appendChild(o);var a=document.createElement("div");return t.name?(o.innerHTML=t.name,a.innerHTML=t.address,i.appendChild(a)):o.innerHTML=t.filterAttributeName+": "+t.filterAttributeValue,n.appendChild(i),document.createElement("div").setAttribute("class","component-checkbox component-checkbox-default-img"),n},_addViewModelListener:function(){var e=this;this.viewModel.on("searchlayerschanged",function(t){for(var n=0;n<t.length;n++)e._createSearchLayerItem(t[n])}),this.viewModel.on("newlayeradded",function(t){e._createSearchLayerItem(t.layerName)}),this.viewModel.on("searchlayersucceeded",function(t){var n=t.result;e.clearSearchResult(),e.searchResultLayer=BM.a.featureGroup(n,{pointToLayer:e.options.style,style:e.options.style}).bindPopup(function(e){if(e.feature.properties)return new hM({attributes:e.feature.properties}).getElement()}).addTo(e.map),e.searchResultLayer.eachLayer(function(t){e.options.onEachFeature?e.options.onEachFeature(t.toGeoJSON(),t):e._featureOnclickEvent.bind(e)(t.toGeoJSON(),t)}),e.searchLayersData=n,e._prepareResultData(n),e._event.fire("searchlayersucceeded",{result:e.searchResultLayer.toGeoJSON()})}),this.viewModel.on("geocodesucceeded",function(t){var n=t.result;e.clearSearchResult(),e.searchResultLayer=BM.a.geoJSON(n,{pointToLayer:e.options.style,style:e.options.style,onEachFeature:e.options.onEachFeature||e._featureOnclickEvent.bind(e)}).bindPopup(function(e){if(e.feature.properties)return new hM({attributes:e.feature.properties}).getElement()}).addTo(e.map),e.searchLayersData=n,e._prepareResultData(n),e._event.fire("geocodesucceeded",{result:n})}),this.viewModel.on("searchfailed",function(t){var n="";n="searchGeocodeField"===t.searchType?Ck.i18n("msg_searchGeocodeField"):"cityGeocodeField"===t.searchType?Ck.i18n("msg_cityGeocodeField"):Ck.i18n("msg_getFeatureField"),e.messageBox.showView(n),e._event.fire("searchfailed",{message:n})})},_prepareResultData:function(e){this.currentResult=e;var t=Math.ceil(e.length/this.perPageDataNum);this._resultDomObj.setPageLink(t),this._createResultListByPageNum(1,e),this._resultDomObj.showView(),this._resultDomObj.setLinkageEvent(function(e){n._createResultListByPageNum(e,n.currentResult)});var n=this},_createResultListByPageNum:function(e,t){var n,r=0;1===e&&t.length<this.perPageDataNum?n=t.length-1:e*this.perPageDataNum>t.length?(r=this.perPageDataNum*(e-1),n=t.length-1):(r=this.perPageDataNum*(e-1),n=e*this.perPageDataNum-1);for(var i=document.createElement("div"),o=r;o<=n;o++){var a=void 0,s="Point";t[o].filterAttribute?(s=t[o].feature.geometry.type,a=t[o].filterAttribute):a=t[o].properties,i.appendChild(this._createResultItem(s,a))}this._resultDomObj.setContent(i),this._resultDomObj.showView(),i.firstChild.getElementsByClassName("component-search-result-icon")[0].classList.add("component-search__resultitme-selected");var l=i.firstChild.getElementsByClassName("component-search-result-info")[0].firstChild.innerText;!this._selectMarkerFeature&&this._linkageFeature(l)},_flyToBounds:function(e){var t=e.getSouthWest(),n=e.getNorthEast();t.lat===n.lat&&t.lng===n.lng?this.map.flyTo(t):this.map.fitBounds(e)},_linkageFeature:function(e){var t=this,n="";n=this.isSearchLayer?e.split(":")[1].trim():e,this._selectFeature&&this._selectFeature.addTo(this.map),this.searchResultLayer.eachLayer(function(e){(!n||e.filterAttribute&&e.filterAttribute.filterAttributeValue===n||e.feature.properties&&e.feature.properties.name===n)&&(e.remove(),t._setSelectedLayerStyle(e))})},clearSearchResult:function(){this.searchResultLayer&&(this.map.closePopup(),!this.isSearchLayer&&this.map.removeLayer(this.searchResultLayer),this._selectMarkerFeature&&this.map.removeLayer(this._selectMarkerFeature),this._selectFeaturethis&&this.map.removeLayer(this._selectFeature),this._selectMarkerFeature=null,this._selectFeature=null,this.searchResultLayer=null,this.currentResult=null)},_featureOnclickEvent:function(e,t){var n=this;t.on("click",function(){var r,i,o=document.getElementsByClassName("component-pagination__link")[0];n._resultDomObj._changePageEvent({target:o.children[0].children[0]}),n._selectFeature&&n._selectFeature.addTo(n.map),t.remove();for(var a=0;a<n.searchLayersData.length;a++){var s=n.searchLayersData[a];if(s.properties&&s.properties.name===e.properties.name||s.filterAttribute&&s.filterAttribute.filterAttributeName+": "+s.filterAttribute.filterAttributeValue==t.filterAttribute.filterAttributeName+": "+t.filterAttribute.filterAttributeValue){i=a%n.perPageDataNum,r=parseInt(a/n.perPageDataNum)+1;break}}if(r>1)for(var l=1;l<r;l++){var u;u=document.getElementsByClassName("component-pagination__link")[0],n._resultDomObj._changePageEvent({target:u.children[u.children.length-2].children[0]})}var c=document.getElementsByClassName("component-search-result-info"),f=c[i].children[0];if(f.innerHTML===e.properties.name||f.innerHTML===t.filterAttribute.filterAttributeName+": "+t.filterAttribute.filterAttributeValue){var h=c[i].parentNode;document.getElementsByClassName("component-search__resultitme-selected").length>0&&document.getElementsByClassName("component-search__resultitme-selected")[0].classList.remove("component-search__resultitme-selected"),h.firstChild.classList.add("component-search__resultitme-selected"),n._setSelectedLayerStyle(t)}},this)},_setSelectedLayerStyle:function(e){var t;this._selectMarkerFeature&&this._selectMarkerFeature.remove(),this._selectMarkerFeature=null,this._selectFeature=e,this._selectMarkerFeature=BM.a.geoJSON(e.toGeoJSON(),{pointToLayer:function(e,t){return BM.a.marker(t,{icon:BM.a.divIcon({className:"component-select-marker-icon",iconAnchor:[15,0]})})},style:{fillColor:"red",weight:1,opacity:1,color:"red",fillOpacity:.2}}).addTo(this.map),this._selectMarkerFeature.bindPopup(function(){return new hM({attributes:e.feature.properties}).getElement()},{closeOnClick:!1}).openPopup().addTo(this.map),this._flyToBounds(this.searchResultLayer.getBounds()),e.getLatLng?t=e.getLatLng():e.getCenter&&(t=e.getCenter()),this.map.setView(t)}}),uD=function(e){return new lD(e)};BM.a.supermap.components.search=uD;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var cD=BM.a.Evented.extend({options:{_defaultLayerOptions:{style:null,onEachFeature:function(e,t){var n="属性信息如下：<br>";for(var r in e.properties)n+=r+": "+e.properties[r]+"<br>";t.bindPopup(n)}}},initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return new Error("Cannot find map, fileModel.map cannot be null.");this.map=e,BM.a.Util.extend(this.options._defaultLayerOptions,t),this.options._defaultLayerOptions.pointToLayer=this.options._defaultLayerOptions.style,this.popupsStatus=!0,this.dataFlowStatus=!1,this.dataFlowUrl="",this.currentFeatures=[],this.dataFlowLayer=null},subscribe:function(e){var t=this;if(this.dataFlowUrl===e){if(this.dataFlowStatus)return void this.fire("dataflowservicesubscribed")}else this.dataFlowUrl=e;this.dataFlowStatus=!0,this.dataFlowLayer&&(this.dataFlowLayer.remove(),this.dataFlowLayer=null);var n=new xN(e,this.options._defaultLayerOptions);n.on("subscribesucceeded",function(e){t.fire("subscribesucceeded",{result:e})}),n.on("subscribefailed",function(e){t.fire("subscribefailed",{result:e})}),n.on("dataupdated",function(e){t.fire("dataupdated",{result:e});var n=e.layer.getBounds(),r=mR.toSuperMapBounds(t.map.getBounds()),i=mR.toSuperMapBounds(n);r.intersectsBounds(i)||(i.left===i.right&&i.top===i.bottom?t.map.setView(n.getCenter()):t.map.flyToBounds(n)),t.popupsStatus&&t.openPopups()}),n.addTo(this.map),this.dataFlowLayer=n},cancelSubscribe:function(){this.dataFlowLayer&&(this.dataFlowStatus=!1,this.dataFlowLayer.dataService.unSubscribe(),this.dataFlowLayer.remove(),this.dataFlowLayer=null)},openPopups:function(){if(this.popupsStatus=!0,this.dataFlowLayer)for(var e=this.dataFlowLayer.getLayers(),t=0;t<e.length;t++)for(var n=0;n<e[t].getLayers().length;n++)e[t].getLayers()[n].openPopup()},closePopups:function(){if(this.popupsStatus=!1,this.dataFlowLayer)for(var e=this.dataFlowLayer.getLayers(),t=0;t<e.length;t++)for(var n=0;n<e[t].getLayers().length;n++)e[t].getLayers()[n].closePopup()}});BM.a.supermap.components.dataFlowViewModel=function(e){return new cD(e)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fD=KI.extend({initialize:function(e){KI.prototype.initialize.apply(this,[e])},onAdd:function(e){var t={};return this.options.style&&(t.style=this.options.style),this.options.onEachFeature&&(t.style=this.options.onEachFeature),this.viewModel=new cD(e,t),KI.prototype.onAdd.apply(this,[e])},_initView:function(){var e=this,t=new zk({title:Ck.i18n("title_dataFlowService")}),n=t.getElement(),r=t.getContentElement();r.style.padding="10px 18px";var i=document.createElement("div");i.setAttribute("class","component-dataflow__container");var o=document.createElement("div");o.setAttribute("class","component-input-default");var a=document.createElement("input");a.setAttribute("class","component-input-default"),a.type="text",a.placeholder=Ck.i18n("text_input_value_inputDataFlowUrl"),a.title=Ck.i18n("text_input_value_inputDataFlowUrl"),o.appendChild(a);var s=document.createElement("span");s.setAttribute("class","supermapol-icons-close"),s.hidden=!0,s.onclick=function(e){a.value="",e.target.hidden=!0},a.oninput=function(){s.hidden=!1},o.appendChild(s),i.appendChild(o),r.appendChild(i);var l=document.createElement("div");l.setAttribute("class","component-dataflow__container");var u=document.createElement("div");u.setAttribute("class","component-checkbox-container");var c=document.createElement("div");c.setAttribute("class","component-checkbox-default component-checkbox-selected-img"),c.checked=!0,u.appendChild(c);var f=document.createElement("div");f.setAttribute("class","component-label component-label-selected"),f.innerHTML=Ck.i18n("text_displayFeaturesInfo"),u.appendChild(f),c.onclick=function(t){t.target.checked=!t.target.checked,t.target.checked?(f.setAttribute("class","component-label component-label-selected"),t.target.setAttribute("class","component-checkbox-default component-checkbox-selected-img"),e.viewModel.openPopups()):(f.setAttribute("class","component-label"),t.target.setAttribute("class","component-checkbox-default component-checkbox-default-img"),e.viewModel.closePopups())},l.appendChild(u),r.appendChild(l);var h=document.createElement("div");h.setAttribute("class","component-dataflow__container component-init-center");var p=document.createElement("button");p.setAttribute("class","component-button-default"),p.innerHTML=Ck.i18n("text_subscribe"),p.onclick=function(){var t=a.value;""!==t?e.viewModel.subscribe(t):e.messageBox.showView(Ck.i18n("msg_inputDataFlowUrlFirst"))},h.appendChild(p);var y=document.createElement("button");return y.setAttribute("class","component-button-default"),y.innerHTML=Ck.i18n("text_cancelSubscribe"),y.onclick=function(){e.viewModel.cancelSubscribe()},h.appendChild(y),r.appendChild(h),this.messageBox=new wk,this.viewModel.on("dataflowservicesubscribed",function(){e.messageBox.showView(Ck.i18n("msg_dataflowservicesubscribed"))}),this.viewModel.on("subscribesucceeded",function(){e.messageBox.showView(Ck.i18n("msg_subscribesucceeded"))}),this.viewModel.on("dataupdated",function(t){e.messageBox.closeView(),e._event.fire("dataupdated",t)}),this._preventMapEvent(n,this.map),n}}),hD=function(e){return new fD(e)};BM.a.supermap.components.dataFlow=hD;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var pD=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerName=t,this.layer=n},yD=function(e,t){return new pD(e,t)};function dD(e){return(dD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vD(e,t){return!t||"object"!==dD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gD(e){return(gD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bD(e,t){return(bD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/BM.a.supermap.components.geoJSONLayerWithName=yD;var SD=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),vD(this,gD(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bD(e,t)}(t,BM.a.Evented),n=t,(r=[{key:"initialize",value:function(e){this.workerUrl=e,this.turfLayers=[]}},{key:"getLayersData",value:function(e){for(var t={},n={},r={},i={},o=0;o<e;o++)e[o]=new pD(e[o].layerName,e[o].layer);this.geoJsonLayersDataModel=new oD(e);for(var a=[],s=0;s<e.length;s++)a[e[s].layerName]={fields:e[s].fields,layer:e[s].layer.toGeoJSON()};for(var l in this.geoJsonLayersDataModel.layers){var u=void 0;u=a[l].fields?a[l].fields:this.geoJsonLayersDataModel.layers[l].getAttributeNamesByType("Num");for(var c=[],f=0;f<u.length;f++){c[u[f]]=this.geoJsonLayersDataModel.layers[l].getAttributeValueByAttributeName(u[f]);for(var h=c[u[f]],p=0;p<h.length;p++)""!=h[p]&&void 0!==h[p]||(h.splice(p,1),p-=1),h[p]=parseFloat(h[p]);c[u[f]]=Array.from(new Set(h.sort(function(e,t){return e-t})))}var y={layerName:l,fields:u,fieldsValue:c,features:a[l].layer},d=a[l].layer.features[0].geometry.type;"Point"===d?n[l]=y:"LineString"===d?r[l]=y:"Polygon"===d&&(i[l]=y)}return t.point=n,t.lineString=r,t.polygon=i,t}},{key:"analysis",value:function(e,t){this.geoJsonLayersDataModel.setCurrentLayerDataModel(e.analysisLayers),this.worker=new Worker(this.workerUrl);var n=this.geoJsonLayersDataModel.currentLayerDataModel.layer.toGeoJSON();if("isolines"===e.analysisMethod){for(var r=e.analysisFieldsValue.split(","),i=n,o=0;o<r.length;o++)r[o]=parseFloat(r[o]);var a=this,s={pointGrid:i,analysisMethod:e.analysisMethod,breaks:r,zProperty:e.analysisFields,analysisCellSize:e.analysisCellSize,options:{gridType:"point",property:e.analysisFields,weight:Number(e.analysisBreaks)}};this.worker.postMessage(s),this.worker.onmessage=function(n){if(0===n.data.features.length)a.fire("analysisfailed");else{a.fire("analysissucceeded",{data:n.data});var r=BM.a.geoJSON(n.data,{style:{color:"#1060C2",weight:3},onEachFeature:function(e,t){e.properties&&t.bindPopup(new hM(e.properties).getElement()),t.on({mouseover:function(){t.setStyle({color:"#ffffff",weight:5})},mouseout:function(){t.setStyle({color:"#1060C2",weight:3})},click:function(){t.setStyle({color:"#ffffff",weight:5})}})}}).addTo(t);a.turfLayers.push(r),a.fire("layerloaded",{layer:r,name:e.resultLayersName}),a.worker.terminate()}}}else if("buffer"===e.analysisMethod){var l=this,u={analysisMethod:"buffer",radius:e.radius,unit:e.unit,isSave:e.isSaveStatus,isUnion:e.isUnion,geoJson:n};this.worker.postMessage(u),this.worker.onmessage=function(n){var r=BM.a.geoJSON(n.data,{style:{color:"#ffffff",fillColor:"#1060C2",fillOpacity:.5,weight:1.5},onEachFeature:function(e,t){e.properties&&t.bindPopup(new hM(e.properties).getElement()),t.on({mouseover:function(){t.setStyle({color:"#ffffff",fillColor:"rgb(46,40,79)",fillOpacity:.5,weight:5})},mouseout:function(){t.setStyle({color:"#ffffff",fillColor:"#1060C2",fillOpacity:.5,weight:1.5})},click:function(){t.setStyle({color:"#ffffff",fillColor:"rgb(46,40,79)",fillOpacity:.5,weight:2})}})}}).addTo(t);l.turfLayers.push(r),l.fire("layerloaded",{layer:r,name:e.resultLayersName}),l.worker.terminate()}}}},{key:"clearLayers",value:function(){for(var e in this.turfLayers)this.turfLayers[e].clearLayers();this.fire("layersremoved",{layers:this.turfLayers})}},{key:"cancelAnalysis",value:function(){this.worker.terminate()}}])&&mD(n.prototype,r),i&&mD(n,i),t}();BM.a.supermap.components.clientComputationViewModel=function(e){return new SD(e)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var _D=KI.extend({initialize:function(e,t){if(!e)throw new Error("workerUrl is required");this.workerUrl=e,KI.prototype.initialize.apply(this,[t])},onAdd:function(e){return this.map=e,KI.prototype.onAdd.apply(this,[e])},addLayer:function(e){this.layers=this.layers||[],this.layers.push(e);var t=this.viewModel.getLayersData(this.layers);this.fillDataToView(t)},fillDataToView:function(e){if(e){this.fillData=e;var t={};switch(document.getElementById("dropDownTop").getAttribute("data-value")){case"isolines":case"buffer":t=e.point}if("{}"!=JSON.stringify(t)){var n=[];for(var r in t)n.push(r);var i=document.getElementById("layersSelect"),o=document.getElementById("layerSelectName");i.innerHTML="",o.title=n[0],o.innerHTML=n[0],this._createOptions(i,n),this.layerSelectObj.optionClickEvent(i,o,this.layersSelectOnchange);var a=t[o.title],s=a.fields,l=a.fieldsValue;this.currentData=a,this.currentFillData=t;var u=document.getElementById("fieldsSelect");u.innerHTML="";var c=document.getElementById("fieldsSelectName");c.innerHTML=s[0],c.title=s[0],this._createOptions(u,s),this.fieldsSelectObj.optionClickEvent(u,c,this.fieldsSelectOnchange);var f=c.title,h=document.getElementById("getValueTextArea");h.value=l[f].toString().replace(/,/g,",\r\n"),h.setAttribute("data-value",l[f]);var p=document.getElementById("resultLayersName");switch(document.getElementById("dropDownTop").getAttribute("data-value")){case"isolines":p.value=Ck.i18n("text_label_isolines")+o.title;break;case"buffer":p.value=Ck.i18n("text_label_buffer")+o.title}}}},_initView:function(){var e=this;this.workerUrl&&(this.viewModel=new SD(this.workerUrl));var t=new zk({title:Ck.i18n("title_clientComputing")}).getElement();t.classList.add("component-analysis"),t.children[0].style.fontSize="12px";var n=[{title:Ck.i18n("text_isoline"),dataValue:"isolines",remark:Ck.i18n("text_extractDiscreteValue"),icon:{className:"component-analyst-isoline-img"}},{title:Ck.i18n("text_buffer"),dataValue:"buffer",remark:Ck.i18n("text_specifyTheDistance"),icon:{className:"component-analyst-buffer-img"}}],r=t.children[1];r.classList.add("component-content--scroll"),r.classList.add("component-content--analysis");var i=new eM(n).getElement();r.appendChild(i);var o=i.children[0].children[0],a=i.children[0].children[2].children[0];o.children[0].id="dropDownTop";var s=BM.a.DomUtil.create("div","component-analysis__container",r),l=BM.a.DomUtil.create("div","component-analysis__container__analysisLayer",s),u=BM.a.DomUtil.create("div","component-analysis__selecttool",l);u.id="layerSelectControl";var c={optionsArr:[""],labelName:Ck.i18n("text_label_analysisLayer")},f=new Yk(c),h=f.getElement();this.layerSelectObj=f,u.appendChild(h);var p=h.children[1].children[0];p.id="layerSelectName",h.children[1].children[2].children[0].children[0].id="layersSelect";var y=BM.a.DomUtil.create("div","component-analysis__container__analysistype",s),d=BM.a.DomUtil.create("div","component-clientcomputation__isoline",y),m={optionsArr:[""],labelName:Ck.i18n("text_label_extractField"),optionsClickCb:this.fieldsSelectOnchange},v=BM.a.DomUtil.create("div","component-analysis__selecttool",d),g=new Yk(m),b=g.getElement();this.fieldsSelectObj=g;var S=b.children[1].children[0];S.id="fieldsSelectName";var _=b.children[1].children[2].children[0].children[0];_.id="fieldsSelect",v.appendChild(b);var w=BM.a.DomUtil.create("div","component-analysis__container",d);BM.a.DomUtil.create("span","component-textarea__name",w).innerHTML=Ck.i18n("text_label_extractedValue");var O=BM.a.DomUtil.create("div","component-textarea",w);O.id="getValueText";var x=BM.a.DomUtil.create("div","",O),C=BM.a.DomUtil.create("div","component-scrollarea-content",x);C.setAttribute("tabindex","1");var P=BM.a.DomUtil.create("textarea","component-textarea__content",C);P.id="getValueTextArea",P.setAttribute("rows","20");var T=BM.a.DomUtil.create("div","",d);BM.a.DomUtil.create("span","",T).innerHTML=Ck.i18n("text_label_distanceAttenuation");var E=BM.a.DomUtil.create("input","",T);E.value="3";var k=BM.a.DomUtil.create("div","",d);BM.a.DomUtil.create("span","",k).innerHTML=Ck.i18n("text_label_gridSize");var M=BM.a.DomUtil.create("input","",k);M.value="30";var A=BM.a.DomUtil.create("div","component-clientcomputation__buffer hidden",y),L=BM.a.DomUtil.create("div","component-clientcomputation__buffer--radius",A);BM.a.DomUtil.create("span","",L).innerHTML=Ck.i18n("text_label_bufferRadius");var j=BM.a.DomUtil.create("div","",L),R=BM.a.DomUtil.create("input","buffer-radius-input",j);R.id="bufferRadiusInput",R.value="10",R.setAttribute("placeholder",Ck.i18n("text_label_defaultkilometers"));var N=BM.a.DomUtil.create("div","component-clientcomputation__buffer--unit",j);N.id="bufferUnit";var I={optionsArr:[Ck.i18n("text_option_kilometer")],labelName:Ck.i18n("text_label_unit")},D=new Yk(I).getElement(),F=D.children[1].children[0];F.id="bufferUnitSelectName",D.children[1].children[2].children[0].children[0].id="bufferUnitSelect",D.children[0].style.display="none",N.appendChild(D);var B=BM.a.DomUtil.create("div","",L),U=BM.a.DomUtil.create("div","component-clientcomputation__buffer--issaveattrs",B);U.id="saveAttrsContainer";var G=BM.a.DomUtil.create("div","checkbox checkbox-fault",U);G.id="saveAttrsCheckbox";var z=BM.a.DomUtil.create("div","lable",U);z.id="saveAttrsLabel",z.innerHTML=Ck.i18n("text_retainOriginal");var V=BM.a.DomUtil.create("div","component-clientcomputation__buffer--isunion",B);V.id="isUnionContainer";var J=BM.a.DomUtil.create("div","checkbox checkbox-fault",V);J.id="isUnionCheckbox";var H=BM.a.DomUtil.create("div","lable",V);H.innerHTML=Ck.i18n("text_mergeBuffer"),H.id="isUnionLabel";var q=BM.a.DomUtil.create("div","component-analysis__container__resultLayersName",s);BM.a.DomUtil.create("span","",q).innerHTML=Ck.i18n("text_label_resultLayerName");var W=BM.a.DomUtil.create("input","",q);W.id="resultLayersName";var Y=BM.a.DomUtil.create("div","component-analysis__container__analysisbtn",s),Q=BM.a.DomUtil.create("div","component-analysis__analysisbtn",Y),X=BM.a.DomUtil.create("button","component-analysis__analysisbtn--analysis",Q);X.innerHTML=Ck.i18n("btn_analyze");var K=BM.a.DomUtil.create("div","component-analysis__analysisbtn--analysing-container hidden",Q),Z=BM.a.DomUtil.create("div","component-analysis__analysisbtn--analysising",K),$=BM.a.DomUtil.create("div","component-analysis__svg-container",Z);$.id="analyse_background",$.innerHTML='<svg class="component-analysis__svg-rotate" width="16px" height="16px" version="1.1" xmlns="http://www.w3.org/2000/svg">\n            <path id="ring" fill="#FFF" transform="translate(8,8)" d="M 0 0 v -8 A 8 8 0 1 1 -8.00 0 z"></path>\n            <circle cx="8" cy="8" r="6" fill="#38ADF5"></circle>\n            <rect class="svg-top" x="8" y="0" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n            <rect class="svg-left" x="0" y="8" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n        </svg>',BM.a.DomUtil.create("span","",Z).innerHTML=Ck.i18n("btn_analyzing");var ee=BM.a.DomUtil.create("button","component-analysis__analysisbtn--cancel",K);ee.innerHTML=Ck.i18n("btn_cancelAnalysis");var te=BM.a.DomUtil.create("button","component-analysis__analysisbtn--analysis component-analysis__analysisbtn--deletelayers",Q);te.innerHTML=Ck.i18n("btn_emptyTheAnalysisLayer");for(var ne=function(t){a.children[t].onclick=function(){o.innerHTML=a.children[t].outerHTML,o.children[0].id="dropDownTop";var n=document.getElementById("layersSelect"),i=document.getElementById("layerSelectName"),s=a.children[t].getAttribute("data-value"),l={};switch(s){case"buffer":d.classList.add("hidden"),A.classList.remove("hidden"),r.style.height="422px",W.value=Ck.i18n("text_label_buffer")+i.title,l=e.fillData.point;break;case"isolines":d.classList.remove("hidden"),A.classList.add("hidden"),r.style.height="712px",W.value=Ck.i18n("text_label_isolines")+i.title,l=e.fillData.point}if(e.currentFillData!==l){if(n.innerHTML="","{}"==JSON.stringify(l))return W.value="",i.title="",void(i.innerHTML="");var u=[];for(var c in l)u.push(c);i.title=u[0],i.innerHTML=u[0],e._createOptions(n,u),e.layerSelectObj.optionClickEvent(n,i,e.layersSelectOnchange),"buffer"===s?W.value=Ck.i18n("text_label_buffer")+u[0]:"isolines"===s&&(W.value=Ck.i18n("text_label_isolines")+u[0]),e.currentData=l[i.title],e.currentFillData=l}}},re=0;re<a.children.length;re++)ne(re);this.fieldsSelectOnchange=function(e){if(this.currentData){var t=this.currentData,n=e.title;P.value=t.fieldsValue[n].toString().replace(/,/g,",\r\n"),P.setAttribute("data-value",t.fieldsValue[n])}}.bind(this),this.layersSelectOnchange=function(e){if(this.currentData){var t=e.title,n=this.currentFillData[t];this.currentData=n,_.innerHTML="",this._createOptions(_,n.fields);var r=document.getElementById("fieldsSelectName"),i=n.fields[0];r.title=i,r.innerHTML=i;var o=i;this.fieldsSelectObj.optionClickEvent(_,r,this.fieldsSelectOnchange),P.value=n.fieldsValue[o].toString().replace(/,/g,",\r\n"),P.setAttribute("data-value",n.fieldsValue[o]);var a=document.getElementById("dropDownTop").getAttribute("data-value");switch(a){case"buffer":W.value=Ck.i18n("text_label_buffer")+t;break;case"isolines":W.value=Ck.i18n("text_label_isolines")+t}}}.bind(this);var ie=!0;z.classList.add("selected"),G.classList.add("checkbox-active"),U.onclick=function(){ie?(G.classList.add("checkbox-fault"),G.classList.remove("checkbox-active"),z.classList.remove("selected"),ie=!1):(G.classList.add("checkbox-active"),G.classList.remove("checkbox-fault"),z.classList.add("selected"),ie=!0,oe&&(J.classList.add("checkbox-fault"),J.classList.remove("checkbox-active"),oe=!1))};var oe=!1;return V.onclick=function(){oe?(J.classList.add("checkbox-fault"),J.classList.remove("checkbox-active"),H.classList.remove("selected"),oe=!1):(J.classList.add("checkbox-active"),J.classList.remove("checkbox-fault"),H.classList.add("selected"),oe=!0,ie&&(G.classList.add("checkbox-fault"),G.classList.remove("checkbox-active"),ie=!1))},this.messageBox=new wk,X.onclick=function(){var t;switch(K.style.display="block",X.style.display="none",document.getElementById("dropDownTop").getAttribute("data-value")){case"isolines":t=function(){var e=document.getElementById("dropDownTop").getAttribute("data-value"),t=document.getElementById("resultLayersName").value,n=p.title,r=S.title,i=P.value.replace(/[\r\n]/g,"").split(",").toString(),o=E.value,a=M.value;return{analysisMethod:e,analysisLayers:n,analysisFields:r,analysisFieldsValue:i,analysisBreaks:o,analysisCellSize:a,resultLayersName:t}}();break;case"buffer":t=function(){var e=document.getElementById("dropDownTop"),t=document.getElementById("resultLayersName").value,n=p.title,r=e.getAttribute("data-value"),i=R.value,o=F.title;return{analysisMethod:r,analysisLayers:n,radius:i,unit:o,resultLayersName:t,isSaveStatus:ie,isUnion:oe}}()}e.viewModel.analysis(t,e.map),e.viewModel.on("layerloaded",function(t){K.style.display="none",X.style.display="block",e._event.fire("analysissucceeded",{layer:t.layer,name:t.name})}),e.viewModel.on("analysisfailed",function(){K.style.display="none",X.style.display="block",e.messageBox.showView(Ck.i18n("msg_resultIsEmpty"),"failure"),e._event.fire("analysisfailed")})},ee.onclick=function(){K.style.display="none",X.style.display="block",e.viewModel.cancelAnalysis()},te.onclick=function(){e.viewModel.on("layersremoved",function(t){e._event.fire("layersremoved",{layers:t.layers})}),e.viewModel.clearLayers()},this._preventMapEvent(t,this.map),t},_createOptions:function(e,t){for(var n in t){var r=document.createElement("div"),i=t[n];r.className="component-selecttool__option",r.title=i,r.innerHTML=i,r.setAttribute("data-value",i),e.appendChild(r)}}}),wD=function(e){return new _D(e)};BM.a.supermap.components.clientComputation=wD;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var OD=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerName=t.layerName,this.layer=t.layer,this.fields=t.fields||null},xD=function(e){return new OD(e)};function CD(e){return(CD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function TD(e,t){return!t||"object"!==CD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ED(e){return(ED=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kD(e,t){return(kD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/BM.a.supermap.components.clientComputationLayer=xD;var MD=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),TD(this,ED(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kD(e,t)}(t,BM.a.Evented),n=t,(r=[{key:"initialize",value:function(e){this.processingUrl=e}},{key:"getDatasetsName",value:function(){var e=this.processingUrl;this.dataset=[],this.dataset.datasetNames=[],this.dataset.childUrl=[];var t="http://"+e.split("/")[2],n=t+"/iserver/services/datacatalog/rest/datacatalog/sharefile.json",r=t+"/iserver/services/datacatalog/rest/datacatalog/relationship/datasets.json",i=this;tr.get(n).then(function(e){return e.json()}).then(function(e){i.dataset.datasetNames=i.dataset.datasetNames.concat(e.datasetNames),i.dataset.childUrl=i.dataset.childUrl.concat(e.childUriList);var t=i;tr.get(r).then(function(e){return e.json()}).then(function(e){t.dataset.datasetNames=t.dataset.datasetNames.concat(e.datasetNames),t.dataset.childUrl=t.dataset.childUrl.concat(e.childUriList);var n=[];for(var r in t.dataset.datasetNames)n[t.dataset.datasetNames[r]]=t.dataset.childUrl[r];t.fire("datasetsloaded",{result:{dataset:t.dataset,datasetHash:n}})})})}},{key:"getDatasetInfo",value:function(e){var t,n=this;tr.get(e).then(function(e){return e.json()}).then(function(e){var r=e.datasetInfo;"LINE"===r.datasetType||"LINE"===r.type?t="LINE":"POINT"===r.datasetType||"POINT"===r.type||"CSV"===r.type?t="POINT":"REGION"!==r.datasetType&&"REGION"!==r.type||(t="REGION");var i=[],o=r.fieldInfos||r.fieldInfo||null;if(o){for(var a in o)i.push(o[a].name);n.fire("datasetinfoloaded",{result:{type:t,fields:i}})}else{var s=e.childUriList[0].replace("//fields","/fields");tr.get(s).then(function(e){return e.json()}).then(function(e){var r=e.fieldNames,i=[];for(var o in r)i.push(r[o]);n.fire("datasetinfoloaded",{result:{type:t,fields:i}})})}})}}])&&PD(n.prototype,r),i&&PD(n,i),t}();function AD(e){return(AD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jD(e,t){return!t||"object"!==AD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function RD(e){return(RD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ND(e,t){return(ND=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/BM.a.supermap.components.DistributedAnalysisModel=MD;var ID=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),jD(this,RD(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ND(e,t)}(t,BM.a.Evented),n=t,(r=[{key:"initialize",value:function(e){this.processingUrl=e}},{key:"getDatasetsName",value:function(){var e=this.processingUrl;this.resultLayers=[],this.datasetNames=[],this.distributedAnalysisModel=new MD(e),this.distributedAnalysisModel.getDatasetsName();var t=this;this.distributedAnalysisModel.on("datasetsloaded",function(e){t.fire("datasetsloaded",{result:e.result})})}},{key:"getDatasetInfo",value:function(e){this.distributedAnalysisModel.getDatasetInfo(e);var t=this;this.distributedAnalysisModel.on("datasetinfoloaded",function(e){var n=e.result.type,r=e.result.fields;t.fire("datasetinfoloaded",{result:{type:n,fields:r}})})}},{key:"analysis",value:function(e,t){var n=new BI(this.processingUrl);if(e.analysisParam instanceof fm){var r=e.analysisParam,i=this;n.addKernelDensityJob(r,function(n){n.error?i.fire("analysisfailed",{error:n.error}):n.result.setting.serviceInfo.targetServiceInfos.map(function(n){return"RESTMAP"===n.serviceType&&tr.get(n.serviceAddress+"/maps").then(function(e){return e.json()}).then(function(n){var r=n[0].path;i.fire("analysissucceed",{result:n});var o=BM.a.supermap.tiledMapLayer(r,{noWrap:!0,transparent:!0});i.resultLayers.push(o),o.addTo(t);var a=new Date,s=e.resultLayerName||a.getTime();i.fire("layerloaded",{layer:o,name:s})}),n})})}}},{key:"clearLayers",value:function(){for(var e in this.resultLayers)this.resultLayers[e].remove();this.fire("layersremoved",{layers:this.resultLayers}),this.resultLayers=[]}}])&&LD(n.prototype,r),i&&LD(n,i),t}();BM.a.supermap.components.distributedAnalysisViewModel=function(e){return new ID(e)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var DD=KI.extend({initialize:function(e,t){KI.prototype.initialize.apply(this,[t]),this.viewModel=new ID(e)},onAdd:function(e){return this._fillDataToView(),KI.prototype.onAdd.apply(this,[e])},_fillDataToView:function(){var e=this;this.viewModel.on("datasetsloaded",function(t){var n=t.result.dataset.datasetNames;e.datasetSelect.innerHTML="",e._createOptions(e.datasetSelect,n),e.datasetSelectObj.optionClickEvent(e.datasetSelect,e.datasetSelectName,e.datasetSelectOnchange),e.dataHash=t.result.datasetHash}),this.viewModel.getDatasetsName()},_initView:function(){var e=this,t=new zk({title:Ck.i18n("title_distributedAnalysis")}).getElement();t.classList.add("component-analysis"),t.children[0].style.fontSize="12px";var n=BM.a.DomUtil.create("div","component-content component-content--scroll component-content--analysis",t),r=[{title:Ck.i18n("text_densityAnalysis"),dataValue:"density",remark:Ck.i18n("text_CalculateTheValuePerUnitArea"),icon:{className:"component-analyst-density-img"}}],i=new eM(r).getElement();n.appendChild(i);var o=i.children[0].children[0].children[0],a=BM.a.DomUtil.create("div","component-analysis__container",n),s=BM.a.DomUtil.create("div","analysistype",a),l=BM.a.DomUtil.create("div","component-analysis__container__analysisLayer",s),u=BM.a.DomUtil.create("div","component-analysis__selecttool",l),c={optionsArr:[Ck.i18n("text_option_selectDataset")],labelName:Ck.i18n("text_label_dataset"),optionsClickCb:oe.bind(this)},f=new Yk(c),h=f.getElement();this.datasetSelectObj=f,u.appendChild(h);var p=h.children[1].children[0];this.datasetSelectName=p;var y=h.children[1].children[2].children[0].children[0];y.children[0].style.display="none",this.datasetSelect=y;var d=BM.a.DomUtil.create("div","component-analysis__idw",l),m=[{optionsArr:[Ck.i18n("text_option_simplePointDensityAnalysis"),Ck.i18n("text_option_nuclearDensityAnalysis")],labelName:Ck.i18n("text_label_analyticalMethod")},{optionsArr:[Ck.i18n("text_option_quadrilateral"),Ck.i18n("text_option_hexagon")],labelName:Ck.i18n("text_label_meshType")}],v=BM.a.DomUtil.create("div","component-analysis__idw__selecttool",d);for(var g in m){var b=new Yk(m[g]).getElement();v.appendChild(b)}var S={optionsArr:[Ck.i18n("text_option_notSet")],labelName:Ck.i18n("text_label_weightField")},_=new Yk(S),w=_.getElement();v.appendChild(w),this.weightFieldsSelectObj=_;var O=v.children[0].children[1].children[0];O.setAttribute("data-value","0");var x=v.children[0].children[1].children[2].children[0].children[0];this._setEleAtribute(["0","1"],"data-value",x.children);var C=v.children[1].children[1].children[0];C.setAttribute("data-value","0");var P=v.children[1].children[1].children[2].children[0].children[0];this._setEleAtribute(["0","1"],"data-value",P.children);var T=v.children[2].children[1].children[0],E=v.children[2].children[1].children[2].children[0].children[0],k=[{spanName:Ck.i18n("text_label_queryRange"),value:""}];for(var M in k)this._creatInputBox(k[M],v);var A=v.children[3].children[1];A.setAttribute("placeholder",Ck.i18n("text_label_queryRangeTips")),A.title=Ck.i18n("text_label_queryRangeTips");var L={labelName:Ck.i18n("text_label_gridSizeInMeters"),selectOptions:{optionsArr:["Meter","Kilometer","Yard","Foot","Mile"]}},j=this._creatUnitSelectBox(L,v),R=j.children[1].children[0];R.value="1000";var N=j.children[1].children[1].children[0].children[0].children[0],I={labelName:Ck.i18n("text_label_searchRadius"),selectOptions:{optionsArr:["Meter","Kilometer","Yard","Foot","Mile"]}},D=this._creatUnitSelectBox(I,v),F=D.children[1].children[0];F.value="300";var B=D.children[1].children[1].children[0].children[0].children[0],U={labelName:Ck.i18n("text_label_areaUnit"),optionsArr:["SquareMile","SquareMeter","Hectare","Acre","SquareFoot","SquareYard"]},G=new Yk(U).getElement();v.appendChild(G);var z=G.children[1].children[0],V=BM.a.DomUtil.create("div","range-content",s),J={optionsArr:[Ck.i18n("text_option_notSet"),Ck.i18n("text_option_equidistantSegmentation"),Ck.i18n("text_option_logarithm"),Ck.i18n("text_option_equalCountingSegment"),Ck.i18n("text_option_squareRootSegmentation")],labelName:Ck.i18n("text_label_thematicMapSegmentationMode"),optionsClickCb:function(e){"NOTSET"!==e.getAttribute("data-value")?(W.classList.remove("hidden"),Y.classList.remove("hidden")):(W.classList.add("hidden"),Y.classList.add("hidden"))}};V.appendChild(new Yk(J).getElement());var H=V.children[0].children[1].children[0];H.setAttribute("data-value","NOTSET");var q=V.children[0].children[1].children[2].children[0].children[0];this._setEleAtribute(["NOTSET","EQUALINTERVAL","LOGARITHM","QUANTILE","SQUAREROOT"],"data-value",q.children);var W=this._creatInputBox({spanName:Ck.i18n("text_label_thematicMapSegmentationParameters"),value:"20"},V);W.classList.add("hidden");var Y=new Yk({optionsArr:[Ck.i18n("text_option_greenOrangePurpleGradient"),Ck.i18n("text_option_greenOrangeRedGradient"),Ck.i18n("text_option_rainbowGradient"),Ck.i18n("text_option_spectralGradient"),Ck.i18n("text_option_terrainGradient")],labelName:Ck.i18n("text_label_thematicMapColorGradientMode")}).getElement();V.appendChild(Y),Y.classList.add("hidden");var Q=Y.children[1].children[2].children[0].children[0],X=Y.children[1].children[0];X.setAttribute("data-value","GREENORANGEVIOLET");this._setEleAtribute(["GREENORANGEVIOLET","GREENORANGERED","RAINBOW","SPECTRUM","TERRAIN"],"data-value",Q.children);var K=BM.a.DomUtil.create("div","",s);BM.a.DomUtil.create("span","",K).innerHTML=Ck.i18n("text_label_resultLayerName");var Z=BM.a.DomUtil.create("input","component-distributeanalysis__input",K),$=BM.a.DomUtil.create("div","component-analysis__container__analysisbtn",a),ee=BM.a.DomUtil.create("div","component-analysis__analysisbtn",$),te=BM.a.DomUtil.create("button","component-analysis__analysisbtn--analysis",ee);te.innerHTML=Ck.i18n("btn_analyze");var ne=BM.a.DomUtil.create("div","component-analysis__analysisbtn--analysing-container hidden",ee),re=BM.a.DomUtil.create("div","component-analysis__analysisbtn--analysising",ne);re.style.width="200px",BM.a.DomUtil.create("div","component-analysis__svg-container",re).innerHTML='<svg class="component-analysis__svg-rotate" width="16px" height="16px" version="1.1" xmlns="http://www.w3.org/2000/svg">\n            <path id="ring" fill="#FFF" transform="translate(8,8)" d="M 0 0 v -8 A 8 8 0 1 1 -8.00 0 z"></path>\n            <circle cx="8" cy="8" r="6" fill="#38ADF5"></circle>\n            <rect class="svg-top" x="8" y="0" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n            <rect class="svg-left" x="0" y="8" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n        </svg>',BM.a.DomUtil.create("span","",re).innerHTML=Ck.i18n("btn_analyzing");var ie=BM.a.DomUtil.create("button","component-analysis__analysisbtn--analysis component-analysis__analysisbtn--deletelayers",ee);function oe(e){if(this.messageBox.closeView(),this.dataHash){E.innerHTML="";var t=this.dataHash[e.title],n=this;this.viewModel.on("datasetinfoloaded",function(e){T.title=Ck.i18n("text_option_notSet"),T.innerHTML=Ck.i18n("text_option_notSet"),E.innerHTML="";var t=o.getAttribute("data-value"),r=e.result.type,i=e.result.fields;"density"===t&&("REGION"===r||"LINE"===r?n.messageBox.showView(Ck.i18n("msg_datasetOrMethodUnsupport"),"failure"):(n.messageBox.closeView(),n._createOptions(E,i),n.weightFieldsSelectObj.optionClickEvent(E,T)))}),this.viewModel.getDatasetInfo(t)}}return ie.id="deleteLayersBtn",ie.innerHTML=Ck.i18n("btn_emptyTheAnalysisLayer"),this.messageBox=new wk,this.datasetSelectOnchange=oe.bind(this),te.onclick=function(){e.messageBox.closeView();var t=function(){var e,t,n=o.getAttribute("data-value"),r=O.getAttribute("data-value"),i=C.getAttribute("data-value"),a=A.value,s=N.title,l=B.title,u=z.title,c=X.getAttribute("data-value"),f=H.getAttribute("data-value"),h=new Date,y=Z.value||h.getTime();e="NOTSET"===f?"":{rangeMode:f,rangeCount:W.value,colorGradientType:c};"density"===n&&(t=new fm({datasetName:p.title,method:r,meshType:i,resolution:R.value,fields:T.title,radius:F.value,meshSizeUnit:s,radiusUnit:l,areaUnit:u,query:a,mappingParameters:new lo({rangeMode:e.rangeMode,rangeCount:e.rangeCount,colorGradientType:e.colorGradientType})}));return{analysisParam:t,resultLayerName:y}}();p.title===Ck.i18n("text_option_selectDataset")?e.messageBox.showView(Ck.i18n("msg_selectDataset"),"failure"):T.title===Ck.i18n("text_option_notSet")?e.messageBox.showView(Ck.i18n("msg_setTheWeightField"),"failure"):(e.messageBox.closeView(),ne.style.display="block",te.style.display="none",e.viewModel.on("layerloaded",function(t){ne.style.display="none",te.style.display="block",e._event.fire("analysissucceeded",{layer:t.layer,name:t.name})}),e.viewModel.on("analysisfailed",function(t){e.messageBox.showView(Ck.i18n("msg_theFieldNotSupportAnalysis"),"failure"),ne.style.display="none",te.style.display="block",e._event.fire("analysisfailed",{error:t.error})}),e.viewModel.analysis(t,e.map))},ie.onclick=function(){e.viewModel.on("layersremoved",function(t){e._event.fire("layersremoved",{layers:t.layers})}),e.viewModel.clearLayers()},this._preventMapEvent(t,this.map),t},_createOptions:function(e,t){for(var n in t){var r=document.createElement("div");r.className="component-selecttool__option",r.title=t[n],r.innerHTML=t[n],r.setAttribute("data-value",t[n]),e.appendChild(r)}},_creatInputBox:function(e,t){var n=BM.a.DomUtil.create("div","",t);BM.a.DomUtil.create("span","",n).innerHTML=e.spanName;var r=BM.a.DomUtil.create("input","",n);return r.value=e.value,r.className="component-distributeanalysis__input",n},_creatUnitSelectBox:function(e,t){var n=BM.a.DomUtil.create("div","component-clientcomputation__buffer--radius",t);BM.a.DomUtil.create("span","",n).innerHTML=e.labelName;var r=BM.a.DomUtil.create("div","",n);BM.a.DomUtil.create("input","buffer-radius-input",r);var i=BM.a.DomUtil.create("div","component-clientcomputation__buffer--unit",r),o=e.selectOptions,a=new Yk(o).getElement();return i.appendChild(a),n},_setEleAtribute:function(e,t,n){for(var r=0;r<n.length;r++)n[r].setAttribute(t,e[r])}}),FD=function(e){return new DD(e)};function BD(e){return(BD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GD(e,t){return!t||"object"!==BD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zD(e){return(zD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VD(e,t){return(VD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/BM.a.supermap.components.distributedAnalysis=FD;var JD=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),GD(this,zD(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VD(e,t)}(t,BM.a.Evented),n=t,(r=[{key:"initialize",value:function(e){this.dataserviceUrl=e,this.resultLayers=[]}},{key:"getFeatures",value:function(e,t){var n=this.dataserviceUrl,r=this,i=BM.a.supermap.featureService(n);e instanceof Oh?i.getFeaturesByIDs(e,function(e){r._getQureyResult(e,t)}):e instanceof Dh?i.getFeaturesBySQL(e,function(e){r._getQureyResult(e,t)}):e instanceof Ef?i.getFeaturesByBounds(e,function(e){r._getQureyResult(e,t)}):e instanceof Qf?i.getFeaturesByBuffer(e,function(e){r._getQureyResult(e,t)}):e instanceof uh&&i.getFeaturesByGeometry(e,function(e){r._getQureyResult(e,t)})}},{key:"_getQureyResult",value:function(e,t){if(e.error)this.fire("getfeaturesfailed",{error:e.error});else{var n=BM.a.geoJSON(e.result.features,{onEachFeature:function(e,t){t.bindPopup("ID: "+e.properties.SMID)},pointToLayer:function(e,t){return BM.a.circleMarker(t,{radius:6})}}).addTo(t);this.resultLayers.push(n),this.fire("getfeaturessucceeded",{result:e.result.features})}}},{key:"clearLayers",value:function(){for(var e in this.resultLayers)this.resultLayers[e].remove();this.resultLayers=[]}}])&&UD(n.prototype,r),i&&UD(n,i),t}(),HD=function e(t){return new e(t)};BM.a.supermap.components.dataServiceQueryViewModel=HD;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var qD=KI.extend({initialize:function(e,t,n){if(KI.prototype.initialize.apply(this,[n]),this.dataServiceUrl=e,!t||0===t.length)throw new Error("Please configure the dataset of the query！");t instanceof Array?this.dataSetNames=t:this.dataSetNames=t.split(" ")},onAdd:function(e){return KI.prototype.onAdd.apply(this,[e])},onRemove:function(){this.map.off("pm:create")},setDataSetNames:function(e){e instanceof Array?this.dataSetNames=e:this.dataSetNames=e.split(" ")},setGetFeatureMode:function(e){this.getFeatureMode=e,this._getFeatureModeOnchange(this.getFeatureMode)},setDataServiceUrl:function(e){this.dataServiceUrl=e,this.viewModel=new JD(this.dataServiceUrl)},_getFeatureModeOnchange:function(e){var t;t=e&&"{}"!=JSON.stringify(e)?e:["ID","SQL","BOUNDS","BUFFER","SPATIAL"];var n=document.getElementById("queryModelControl");n.innerHTML="",this.creatQueryModeSelect(t,n)},_initView:function(){var e=this;this.viewModel=new JD(this.dataServiceUrl),this.messageBox=new wk;var t=new zk({title:Ck.i18n("title_dataServiceQuery")}).getElement();t.classList.add("component-servicequery__container"),t.children[0].classList.add("component-servicequery__title");var n=t.children[1];n.classList.add("component-content--scroll"),n.classList.add("data-services");var r,i=BM.a.DomUtil.create("div","component-analysis__container",n),o=BM.a.DomUtil.create("div","component-servicequery__analysistype",i),a=BM.a.DomUtil.create("div","component-analysis__container__analysisLayer",o),s=this.options.getFeatureMode;r=s&&"{}"!=JSON.stringify(s)?s:["ID","SQL","BOUNDS","BUFFER","SPATIAL"];var l=BM.a.DomUtil.create("div","",a);l.id="queryModelContainer";var u=BM.a.DomUtil.create("div","component-analysis__selecttool",l);u.id="queryModelControl",this.creatQueryModeSelect=function(e,t){var n;if(e instanceof Array&&e.length>1){var r={optionsArr:e,labelName:Ck.i18n("text_label_queryMode"),optionsClickCb:this.queryModeltOnchange},i=new Yk(r).getElement();t.appendChild(i),n=i.children[1].children[0],i.children[1].classList.add("dataservice-select");var o=i.children[1];o.classList.add("dataservice-select"),o.classList.add("querymodel-select")}else{var a=BM.a.DomUtil.create("span","",l);a.innerHTML=Ck.i18n("text_label_queryMode"),n=BM.a.DomUtil.create("div","component-servicequery__querymode-selectname",l);var s=BM.a.DomUtil.create("span","",n);e instanceof Array?s.innerHTML=e[0]:s.innerHTML=e,n.title=s.innerHTML,this.queryModeltOnchange(n)}return n.id="queryModelSelectName",n}.bind(this),this.queryModeltOnchange=W.bind(this),this.creatQueryModeSelect(r,u);var c=BM.a.DomUtil.create("div","component-analysis__container component-textarea--dataservice__container",a),f=BM.a.DomUtil.create("span","textarea-name",c);f.innerHTML=Ck.i18n("text_label_IDArrayOfFeatures");var h=BM.a.DomUtil.create("div","component-textarea component-textarea--dataservice",c);h.id="getfeaturesIdArr";var p=BM.a.DomUtil.create("div","scrollarea",h),y=BM.a.DomUtil.create("div","component-scrollarea-content",p);y.setAttribute("tabindex","1");var d=BM.a.DomUtil.create("textarea","component-textarea__content",y);d.value="[1,2,3]",d.id="getValueTextArea";var m=BM.a.DomUtil.create("div","component-servicequery__maxfeatures-container hidden",a),v={spanName:Ck.i18n("text_label_maxFeatures"),value:"1000"},g=this._creatInputBox(v,m).children[1];g.classList.add("max-features-input");var b=BM.a.DomUtil.create("div","component-servicequery__distance-container hidden",a),S={spanName:Ck.i18n("text_label_bufferDistance"),value:"10"},_=this._creatInputBox(S,b).children[1],w=BM.a.DomUtil.create("div","component-analysis__container component-textarea--dataservice__container hidden",a),O=BM.a.DomUtil.create("span","textarea-name",w),x=BM.a.DomUtil.create("div","",w),C=BM.a.DomUtil.create("div","component-servicequery__rangeicon-container",x);O.innerHTML=Ck.i18n("text_label_queryRange1");var P=BM.a.DomUtil.create("div","component-servicequery__rangeicon supermapol-icons-polygon-layer bounds",C),T=BM.a.DomUtil.create("div","component-servicequery__rangeicon supermapol-icons-line-layer hidden",C),E=BM.a.DomUtil.create("div","component-servicequery__rangeicon supermapol-icons-point-layer hidden",C),k=BM.a.DomUtil.create("div","component-textarea component-textarea--rangequery",x);k.id="getfeaturesIdArr";var M=BM.a.DomUtil.create("div","",k),A=BM.a.DomUtil.create("div","component-scrollarea-content",M);A.setAttribute("tabindex","1");var L=BM.a.DomUtil.create("textarea","component-textarea__content component-textarea--rangequery__content",A);L.value='{"leftBottom":{"x":-5,"y":-5},"rightTop":{"x":5,"y":5}}';var j=BM.a.DomUtil.create("div","component-servicequery__spatialquerymode-container hidden",a),R={optionsArr:["CONTAIN","CROSS","DISJOINT","IDENTITY","INTERSECT","NONE","OVERLAP","TOUCH","WITHIN"],labelName:Ck.i18n("text_label_spatialQueryMode")},N=BM.a.DomUtil.create("div","component-analysis__selecttool",j),I=new Yk(R).getElement();I.children[1].classList.add("dataservice-select"),N.appendChild(I);var D=I.children[1].children[0];D.id="spatialQueryModeSelectName",I.children[1].children[2].classList.add("component-servicequery__spatialquerymode__selectcontent");var F=BM.a.DomUtil.create("div","component-analysis__container__analysisbtn",a),B=BM.a.DomUtil.create("div","component-analysis__analysisbtn",F),U=BM.a.DomUtil.create("button","component-analysis__analysisbtn--analysis",B);U.innerHTML=Ck.i18n("btn_query");var G=BM.a.DomUtil.create("div","component-analysis__analysisbtn--analysing-container hidden",B),z=BM.a.DomUtil.create("div","component-analysis__analysisbtn--analysising component-servicequery__querybtn--querying",G);BM.a.DomUtil.create("div","component-analysis__svg-container",z).innerHTML='<svg class="component-analysis__svg-rotate" width="16px" height="16px" version="1.1" xmlns="http://www.w3.org/2000/svg">\n             <path id="ring" fill="#FFF" transform="translate(8,8)" d="M 0 0 v -8 A 8 8 0 1 1 -8.00 0 z"></path>\n             <circle cx="8" cy="8" r="6" fill="#38ADF5"></circle>\n             <rect class="svg-top" x="8" y="0" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n             <rect class="svg-left" x="0" y="8" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n         </svg>',BM.a.DomUtil.create("span","",z).innerHTML=Ck.i18n("btn_querying");var V=BM.a.DomUtil.create("button","component-analysis__analysisbtn--analysis component-analysis__analysisbtn--deletelayers",B);V.innerHTML=Ck.i18n("btn_emptyTheRresultLayer"),W(r[0]);var J,H,q=this;function W(e){var t;switch(t=e.title?e.title:e,m.classList.add("hidden"),w.classList.add("hidden"),b.classList.add("hidden"),T.classList.add("hidden"),E.classList.add("hidden"),P.classList.remove("bounds"),j.classList.add("hidden"),f.innerHTML=Ck.i18n("text_label_featureFilter"),d.value="SMID<10","BUFFER"!==t&&"SPATIAL"!==t||(w.classList.remove("hidden"),O.innerHTML=Ck.i18n("text_label_geometricObject"),L.value='{"type":"Feature","properties":{},"geometry":{"type":"Point","coordinates":[84.90234375,40.25390625]}}',T.classList.remove("hidden"),E.classList.remove("hidden")),t){case"ID":f.innerHTML=Ck.i18n("text_label_IDArrayOfFeatures"),d.value="[1,2,3]";break;case"SQL":m.classList.remove("hidden");break;case"BOUNDS":w.classList.remove("hidden"),O.innerHTML=Ck.i18n("text_label_queryRange"),L.value='{"leftBottom":{"x":-5,"y":-5},"rightTop":{"x":5,"y":5}}',P.classList.add("bounds");break;case"BUFFER":b.classList.remove("hidden");break;case"SPATIAL":j.classList.remove("hidden")}}return U.onclick=function(){e.messageBox.closeView(),G.style.display="block",U.style.display="none";var t=function(){var e,t=q.dataSetNames,n=document.getElementById("queryModelSelectName").title,r=d.value;if("ID"===n){var i=d.value,o=i.substring(1,i.length-1).split(",");e=new Oh({IDs:o,datasetNames:t})}else if("SQL"===n){var a=g.value;e=new Dh({queryParameter:{attributeFilter:r},datasetNames:t,maxFeatures:a})}else if("BOUNDS"===n){if(!J){var s=JSON.parse(L.value);J=BM.a.bounds([s.leftBottom.x,s.leftBottom.y],[s.rightTop.x,s.rightTop.y])}e=new Ef({attributeFilter:r,datasetNames:t,bounds:J})}else if("BUFFER"===n){var l=_.value,u=JSON.parse(L.value),c=H||u;e=new Qf({attributeFilter:r,datasetNames:t,bufferDistance:l,geometry:c})}else if("SPATIAL"===n){var f=D.title,h=JSON.parse(L.value),p=H||h;e=new uh({attributeFilter:r,datasetNames:t,spatialQueryMode:f,geometry:p})}return e}();e.viewModel.on("getfeaturessucceeded",function(t){G.style.display="none",U.style.display="block",0===t.result.features.length&&e.messageBox.showView(Ck.i18n("msg_dataReturnedIsEmpty"),"success"),e._event.fire("getfeaturessucceeded",{result:t.result})}),e.viewModel.on("getfeaturesfailed",function(t){G.style.display="none",U.style.display="block",e.messageBox.showView(t.error.errorMsg,"failure"),e._event.fire("getfeaturesfailed",{error:t.error})}),e.viewModel.getFeatures(t,e.map)},P.onclick=function(t){var n=document.getElementById("queryModelSelectName").title;H&&H.remove(),"BOUNDS"===n?e.map.pm.enableDraw("Rectangle"):e.map.pm.enableDraw("Poly"),t.stopPropagation(),t.preventDefault()},T.onclick=function(t){H&&H.remove(),e.map.pm.enableDraw("Line"),t.stopPropagation(),t.preventDefault()},E.onclick=function(t){H&&H.remove(),e.map.pm.enableDraw("Marker"),t.stopPropagation(),t.preventDefault()},this.map.on("pm:create",function(t){if("Rectangle"===t.shape){var n=(H=t.layer).getBounds();J=BM.a.bounds([n._southWest.lng,n._southWest.lat],[n._northEast.lng,n._northEast.lat]);var r={leftBottom:{x:n._southWest.lng,y:n._southWest.lat},rightTop:{x:n._northEast.lng,y:n._northEast.lat}};L.value=JSON.stringify(r)}"Marker"===t.shape&&(H=t.layer,L.value=JSON.stringify(t.layer.toGeoJSON()),e.map.pm.disableDraw("Marker")),"Line"===t.shape&&(H=t.layer,L.value=JSON.stringify(t.layer.toGeoJSON())),"Polygon"===t.shape&&(H=t.layer,L.value=JSON.stringify(t.layer.toGeoJSON()))}),V.onclick=function(){e.viewModel.clearLayers()},this._preventMapEvent(t,this.map),t},_creatInputBox:function(e,t){var n=BM.a.DomUtil.create("div","",t);return BM.a.DomUtil.create("span","",n).innerHTML=e.spanName,BM.a.DomUtil.create("input","",n).value=e.value,n}}),WD=function(e,t,n){return new qD(e,t,n)};BM.a.supermap.components.dataServiceQuery=WD,
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.d(t,"OpenFileView",function(){return eD}),n.d(t,"openFileView",function(){return tD}),n.d(t,"OpenFileViewModel",function(){return ZI}),n.d(t,"openFileViewModel",function(){return $I}),n.d(t,"SearchView",function(){return lD}),n.d(t,"searchView",function(){return uD}),n.d(t,"DataFlowView",function(){return fD}),n.d(t,"dataFlowView",function(){return hD}),n.d(t,"clientComputationView",function(){return wD}),n.d(t,"ClientComputationView",function(){return _D}),n.d(t,"ClientComputationViewModel",function(){return SD}),n.d(t,"ClientComputationLayer",function(){return OD}),n.d(t,"clientComputationLayer",function(){return xD}),n.d(t,"GeoJSONLayerWithName",function(){return pD}),n.d(t,"geoJSONLayerWithName",function(){return yD}),n.d(t,"GeoJsonLayersDataModel",function(){return oD}),n.d(t,"GeoJsonLayerDataModel",function(){return aD}),n.d(t,"DistributedAnalysisView",function(){return DD}),n.d(t,"distributedAnalysisView",function(){return FD}),n.d(t,"DistributedAnalysisViewModel",function(){return ID}),n.d(t,"DataServiceQueryView",function(){return qD}),n.d(t,"dataServiceQueryView",function(){return WD}),n.d(t,"DataServiceQueryViewModel",function(){return JD}),n.d(t,"dataServiceQueryViewModel",function(){return HD}),n.d(t,"SuperMap",function(){return r}),n.d(t,"DataFormat",function(){return i}),n.d(t,"ServerType",function(){return o}),n.d(t,"GeometryType",function(){return a}),n.d(t,"QueryOption",function(){return s}),n.d(t,"JoinType",function(){return l}),n.d(t,"EngineType",function(){return y}),n.d(t,"MeasureMode",function(){return f}),n.d(t,"SpatialRelationType",function(){return c}),n.d(t,"DataReturnMode",function(){return I}),n.d(t,"Unit",function(){return h}),n.d(t,"BufferRadiusUnit",function(){return p}),n.d(t,"SpatialQueryMode",function(){return u}),n.d(t,"ThemeGraphTextFormat",function(){return d}),n.d(t,"ThemeGraphType",function(){return m}),n.d(t,"GraphAxesTextDisplayMode",function(){return v}),n.d(t,"GraduatedMode",function(){return g}),n.d(t,"RangeMode",function(){return b}),n.d(t,"ThemeType",function(){return S}),n.d(t,"ColorGradientType",function(){return _}),n.d(t,"TextAlignment",function(){return w}),n.d(t,"FillGradientMode",function(){return O}),n.d(t,"SideType",function(){return E}),n.d(t,"AlongLineDirection",function(){return x}),n.d(t,"LabelBackShape",function(){return C}),n.d(t,"LabelOverLengthMode",function(){return P}),n.d(t,"DirectionType",function(){return T}),n.d(t,"OverlayOperationType",function(){return L}),n.d(t,"SupplyCenterType",function(){return k}),n.d(t,"TurnType",function(){return M}),n.d(t,"BufferEndType",function(){return A}),n.d(t,"SmoothMethod",function(){return R}),n.d(t,"SurfaceAnalystMethod",function(){return N}),n.d(t,"ColorSpaceType",function(){return G}),n.d(t,"ChartType",function(){return K}),n.d(t,"EditType",function(){return D}),n.d(t,"TransferTactic",function(){return F}),n.d(t,"TransferPreference",function(){return B}),n.d(t,"GridType",function(){return U}),n.d(t,"ClientType",function(){return X}),n.d(t,"LayerType",function(){return z}),n.d(t,"UGCLayerType",function(){return V}),n.d(t,"StatisticMode",function(){return J}),n.d(t,"PixelFormat",function(){return H}),n.d(t,"SearchMode",function(){return q}),n.d(t,"SummaryType",function(){return ne}),n.d(t,"InterpolationAlgorithmType",function(){return W}),n.d(t,"VariogramMode",function(){return Y}),n.d(t,"Exponent",function(){return Q}),n.d(t,"ClipAnalystMode",function(){return Z}),n.d(t,"AnalystAreaUnit",function(){return $}),n.d(t,"AnalystSizeUnit",function(){return ee}),n.d(t,"StatisticAnalystMode",function(){return te}),n.d(t,"TopologyValidatorRule",function(){return re}),n.d(t,"OutputType",function(){return j}),n.d(t,"AggregationQueryBuilderType",function(){return oe}),n.d(t,"AggregationType",function(){return ie}),n.d(t,"GetFeatureMode",function(){return ae}),n.d(t,"TimeFlowControl",function(){return Qn}),n.d(t,"IManager",function(){return hr}),n.d(t,"IManagerServiceBase",function(){return or}),n.d(t,"IManagerCreateNodeParam",function(){return ar}),n.d(t,"IPortal",function(){return kr}),n.d(t,"IPortalQueryParam",function(){return dr}),n.d(t,"IPortalResource",function(){return wr}),n.d(t,"IPortalQueryResult",function(){return mr}),n.d(t,"IPortalShareParam",function(){return Or}),n.d(t,"IPortalShareEntity",function(){return Mr}),n.d(t,"IPortalServiceBase",function(){return yr}),n.d(t,"IPortalUser",function(){return zr}),n.d(t,"IPortalAddResourceParam",function(){return Ar}),n.d(t,"IPortalRegisterServiceParam",function(){return Lr}),n.d(t,"IPortalAddDataParam",function(){return jr}),n.d(t,"IPortalDataMetaInfoParam",function(){return Rr}),n.d(t,"IPortalDataStoreInfoParam",function(){return Nr}),n.d(t,"IPortalDataConnectionInfoParam",function(){return Ir}),n.d(t,"Online",function(){return qO}),n.d(t,"OnlineData",function(){return JO}),n.d(t,"OnlineQueryDatasParameter",function(){return YO}),n.d(t,"ServiceStatus",function(){return jO}),n.d(t,"DataItemType",function(){return RO}),n.d(t,"DataItemOrderBy",function(){return NO}),n.d(t,"FilterField",function(){return IO}),n.d(t,"OnlineServiceBase",function(){return FO}),n.d(t,"KeyServiceParameter",function(){return XO}),n.d(t,"SecurityManager",function(){return rr}),n.d(t,"ServerInfo",function(){return KO}),n.d(t,"TokenServiceParameter",function(){return $O}),n.d(t,"ElasticSearch",function(){return rx}),n.d(t,"FetchRequest",function(){return tr}),n.d(t,"ColorsPickerUtil",function(){return fx}),n.d(t,"ArrayStatistic",function(){return px}),n.d(t,"AreaSolarRadiationParameters",function(){return si}),n.d(t,"AggregationParameter",function(){return oi}),n.d(t,"AggQueryBuilderParameter",function(){return ri}),n.d(t,"BufferAnalystParameters",function(){return Ti}),n.d(t,"BufferDistance",function(){return Oi}),n.d(t,"BuffersAnalystJobsParameter",function(){return co}),n.d(t,"BufferSetting",function(){return Ci}),n.d(t,"BurstPipelineAnalystParameters",function(){return To}),n.d(t,"ChartQueryFilterParameter",function(){return Xo}),n.d(t,"ChartQueryParameters",function(){return Zo}),n.d(t,"ClipParameter",function(){return ua}),n.d(t,"ColorDictionary",function(){return fa}),n.d(t,"ComputeWeightMatrixParameters",function(){return va}),n.d(t,"DataReturnOption",function(){return ki}),n.d(t,"DatasetBufferAnalystParameters",function(){return Ji}),n.d(t,"DatasetInfo",function(){return La}),n.d(t,"DatasetOverlayAnalystParameters",function(){return Ga}),n.d(t,"DatasetSurfaceAnalystParameters",function(){return Za}),n.d(t,"DatasetThiessenAnalystParameters",function(){return ss}),n.d(t,"DatasourceConnectionInfo",function(){return ji}),n.d(t,"DensityKernelAnalystParameters",function(){return us}),n.d(t,"EditFeaturesParameters",function(){return gs}),n.d(t,"FacilityAnalyst3DParameters",function(){return Ts}),n.d(t,"FacilityAnalystSinks3DParameters",function(){return Rs}),n.d(t,"FacilityAnalystSources3DParameters",function(){return Ws}),n.d(t,"FacilityAnalystStreamParameters",function(){return nl}),n.d(t,"FacilityAnalystTracedown3DParameters",function(){return ml}),n.d(t,"FacilityAnalystTraceup3DParameters",function(){return Ml}),n.d(t,"FacilityAnalystUpstream3DParameters",function(){return Jl}),n.d(t,"FieldParameters",function(){return au}),n.d(t,"FilterAggParameter",function(){return iu}),n.d(t,"FieldStatisticsParameters",function(){return hu}),n.d(t,"FilterParameter",function(){return Di}),n.d(t,"FindClosestFacilitiesParameters",function(){return _u}),n.d(t,"FindLocationParameters",function(){return Mu}),n.d(t,"FindMTSPPathsParameters",function(){return Bu}),n.d(t,"FindPathParameters",function(){return Yu}),n.d(t,"FindServiceAreasParameters",function(){return rc}),n.d(t,"FindTSPPathsParameters",function(){return hc}),n.d(t,"GenerateSpatialDataParameters",function(){return _c}),n.d(t,"GeoBoundingBoxQueryBuilderParameter",function(){return Nc}),n.d(t,"GeoCodingParameter",function(){return qr}),n.d(t,"GeoDecodingParameter",function(){return Yr}),n.d(t,"GeoHashGridAggParameter",function(){return zc}),n.d(t,"GeometryBufferAnalystParameters",function(){return Ki}),n.d(t,"GeometryOverlayAnalystParameters",function(){return Qc}),n.d(t,"GeometrySurfaceAnalystParameters",function(){return nf}),n.d(t,"GeometryThiessenAnalystParameters",function(){return cf}),n.d(t,"GeoRelationAnalystParameters",function(){return hf}),n.d(t,"GetFeaturesByBoundsParameters",function(){return Ef}),n.d(t,"GetFeaturesByBufferParameters",function(){return Qf}),n.d(t,"GetFeaturesByGeometryParameters",function(){return uh}),n.d(t,"GetFeaturesByIDsParameters",function(){return Oh}),n.d(t,"GetFeaturesBySQLParameters",function(){return Dh}),n.d(t,"GetGridCellInfosParameters",function(){return $h}),n.d(t,"Grid",function(){return od}),n.d(t,"Image",function(){return gC}),n.d(t,"InterpolationAnalystParameters",function(){return Ed}),n.d(t,"InterpolationIDWAnalystParameters",function(){return Qd}),n.d(t,"InterpolationKrigingAnalystParameters",function(){return nm}),n.d(t,"InterpolationRBFAnalystParameters",function(){return Nd}),n.d(t,"JoinItem",function(){return Ai}),n.d(t,"KernelDensityJobParameter",function(){return fm}),n.d(t,"LabelImageCell",function(){return Cm}),n.d(t,"LabelMatrixCell",function(){return bm}),n.d(t,"LabelMixedTextStyle",function(){return wp}),n.d(t,"LabelSymbolCell",function(){return Am}),n.d(t,"LabelThemeCell",function(){return Dm}),n.d(t,"LayerStatus",function(){return Bm}),n.d(t,"LinkItem",function(){return Ni}),n.d(t,"MathExpressionAnalysisParameters",function(){return Ym}),n.d(t,"MeasureParameters",function(){return rv}),n.d(t,"OutputSetting",function(){return ao}),n.d(t,"MappingParameters",function(){return lo}),n.d(t,"OverlapDisplayedOptions",function(){return Ay}),n.d(t,"OverlayAnalystParameters",function(){return Ra}),n.d(t,"OverlayGeoJobParameter",function(){return bv}),n.d(t,"PointWithMeasure",function(){return bn}),n.d(t,"QueryByBoundsParameters",function(){return Rv}),n.d(t,"QueryByDistanceParameters",function(){return rg}),n.d(t,"QueryByGeometryParameters",function(){return gg}),n.d(t,"QueryBySQLParameters",function(){return jg}),n.d(t,"QueryParameters",function(){return ea}),n.d(t,"Route",function(){return Cn}),n.d(t,"RouteCalculateMeasureParameters",function(){return zg}),n.d(t,"RouteLocatorParameters",function(){return Kg}),n.d(t,"ServerColor",function(){return fn}),n.d(t,"ServerFeature",function(){return ab}),n.d(t,"ServerGeometry",function(){return Tn}),n.d(t,"ServerStyle",function(){return pn}),n.d(t,"ServerTextStyle",function(){return hp}),n.d(t,"ServerTheme",function(){return Zy}),n.d(t,"SetLayerInfoParameters",function(){return lb}),n.d(t,"SetLayersInfoParameters",function(){return vb}),n.d(t,"SetLayerStatusParameters",function(){return Pb}),n.d(t,"SingleObjectQueryJobsParameter",function(){return Nb}),n.d(t,"StopQueryParameters",function(){return Jb}),n.d(t,"SummaryAttributesJobsParameter",function(){return $b}),n.d(t,"SummaryMeshJobParameter",function(){return lS}),n.d(t,"SummaryRegionJobParameter",function(){return vS}),n.d(t,"SupplyCenter",function(){return PS}),n.d(t,"SurfaceAnalystParameters",function(){return Ha}),n.d(t,"SurfaceAnalystParametersSetting",function(){return Va}),n.d(t,"TerrainCurvatureCalculationParameters",function(){return NS}),n.d(t,"Theme",function(){return cp}),n.d(t,"ThemeDotDensity",function(){return uy}),n.d(t,"ThemeFlow",function(){return gp}),n.d(t,"ThemeGraduatedSymbol",function(){return gy}),n.d(t,"ThemeGraduatedSymbolStyle",function(){return fy}),n.d(t,"ThemeGraph",function(){return ry}),n.d(t,"ThemeGraphAxes",function(){return Jp}),n.d(t,"ThemeGraphItem",function(){return Xp}),n.d(t,"ThemeGraphSize",function(){return qp}),n.d(t,"ThemeGraphText",function(){return Yp}),n.d(t,"ThemeGridRange",function(){return KS}),n.d(t,"ThemeGridRangeItem",function(){return JS}),n.d(t,"ThemeGridUnique",function(){return a_}),n.d(t,"ThemeGridUniqueItem",function(){return $S}),n.d(t,"ThemeLabel",function(){return Np}),n.d(t,"ThemeLabelAlongLine",function(){return Pp}),n.d(t,"ThemeLabelBackground",function(){return Ep}),n.d(t,"ThemeLabelItem",function(){return yp}),n.d(t,"ThemeLabelText",function(){return xp}),n.d(t,"ThemeLabelUniqueItem",function(){return l_}),n.d(t,"ThemeMemoryData",function(){return lp}),n.d(t,"ThemeOffset",function(){return Sp}),n.d(t,"ThemeParameters",function(){return c_}),n.d(t,"ThemeRange",function(){return Ty}),n.d(t,"ThemeRangeItem",function(){return Sy}),n.d(t,"ThemeUnique",function(){return zp}),n.d(t,"ThemeUniqueItem",function(){return mp}),n.d(t,"ThiessenAnalystParameters",function(){return es}),n.d(t,"TopologyValidatorJobsParameter",function(){return U_}),n.d(t,"TransferLine",function(){return Q_}),n.d(t,"TransferPathParameters",function(){return K_}),n.d(t,"TransferSolutionParameters",function(){return aw}),n.d(t,"TransportationAnalystParameter",function(){return da}),n.d(t,"TransportationAnalystResultSetting",function(){return pa}),n.d(t,"UGCLayer",function(){return ky}),n.d(t,"UGCMapLayer",function(){return Fy}),n.d(t,"UGCSubLayer",function(){return Hy}),n.d(t,"UpdateEdgeWeightParameters",function(){return dw}),n.d(t,"UpdateTurnNodeWeightParameters",function(){return xw}),n.d(t,"Vector",function(){return bd}),n.d(t,"VectorClipJobsParameter",function(){return jw}),n.d(t,"WebPrintingJobCustomItems",function(){return iO}),n.d(t,"WebPrintingJobImage",function(){return aO}),n.d(t,"WebPrintingJobLayers",function(){return lO}),n.d(t,"WebPrintingJobLegendOptions",function(){return cO}),n.d(t,"WebPrintingJobLittleMapOptions",function(){return hO}),n.d(t,"WebPrintingJobNorthArrowOptions",function(){return yO}),n.d(t,"WebPrintingJobScaleBarOptions",function(){return mO}),n.d(t,"WebPrintingJobContent",function(){return gO}),n.d(t,"WebPrintingJobLayoutOptions",function(){return SO}),n.d(t,"WebPrintingJobExportOptions",function(){return wO}),n.d(t,"WebPrintingJobParameters",function(){return xO}),n.d(t,"WebPrintingService",function(){return LO}),n.d(t,"FileTypes",function(){return vk}),n.d(t,"FileConfig",function(){return gk}),n.d(t,"FileModel",function(){return Sk}),n.d(t,"MessageBox",function(){return wk}),n.d(t,"CommonContainer",function(){return zk}),n.d(t,"DropDownBox",function(){return eM}),n.d(t,"Select",function(){return Yk}),n.d(t,"AttributesPopContainer",function(){return hM}),n.d(t,"PopContainer",function(){return aM}),n.d(t,"IndexTabsPageContainer",function(){return gM}),n.d(t,"CityTabsPage",function(){return xM}),n.d(t,"NavTabsPage",function(){return MM}),n.d(t,"PaginationContainer",function(){return IM}),n.d(t,"ComponentsUtil",function(){return DM}),n.d(t,"FileReaderUtil",function(){return Ek}),n.d(t,"ChartView",function(){return Rk}),n.d(t,"ChartViewModel",function(){return Lk}),n.d(t,"Logo",function(){return pR}),n.d(t,"logo",function(){return yR}),n.d(t,"ChangeTileVersion",function(){return fR}),n.d(t,"changeTileVersion",function(){return hR}),n.d(t,"CommontypesConversion",function(){return mR}),n.d(t,"BaiduCRS",function(){return Zj}),n.d(t,"TianDiTu_WGS84CRS",function(){return tR}),n.d(t,"TianDiTu_MercatorCRS",function(){return aR}),n.d(t,"NonProjection",function(){return UM}),n.d(t,"nonProjection",function(){return GM}),n.d(t,"NonEarthCRS",function(){return zM}),n.d(t,"nonEarthCRS",function(){return VM}),n.d(t,"CRS",function(){return Qj}),n.d(t,"crs",function(){return Xj}),n.d(t,"toGeoJSON",function(){return vR}),n.d(t,"toSuperMapGeometry",function(){return gR}),n.d(t,"getMeterPerMapUnit",function(){return bR}),n.d(t,"resolutionToScale",function(){return SR}),n.d(t,"scaleToResolution",function(){return _R}),n.d(t,"GetResolutionFromScaleDpi",function(){return wR}),n.d(t,"NormalizeScale",function(){return OR}),n.d(t,"BaiduTileLayer",function(){return xR}),n.d(t,"baiduTileLayer",function(){return CR}),n.d(t,"CloudTileLayer",function(){return PR}),n.d(t,"cloudTileLayer",function(){return TR}),n.d(t,"ImageMapLayer",function(){return ER}),n.d(t,"imageMapLayer",function(){return kR}),n.d(t,"TiandituTileLayer",function(){return LR}),n.d(t,"tiandituTileLayer",function(){return jR}),n.d(t,"TiledMapLayer",function(){return RR}),n.d(t,"tiledMapLayer",function(){return NR}),n.d(t,"WMTSLayer",function(){return MR}),n.d(t,"wmtsLayer",function(){return AR}),n.d(t,"WebMap",function(){return aN}),n.d(t,"webMap",function(){return sN}),n.d(t,"DataFlowLayer",function(){return xN}),n.d(t,"dataFlowLayer",function(){return CN}),n.d(t,"EchartsLayer",function(){return PN}),n.d(t,"echartsLayer",function(){return EN}),n.d(t,"LeafletMapCoordSys",function(){return TN}),n.d(t,"GraphicLayer",function(){return HN}),n.d(t,"graphicLayer",function(){return qN}),n.d(t,"GraphThemeLayer",function(){return WN}),n.d(t,"graphThemeLayer",function(){return YN}),n.d(t,"LabelThemeLayer",function(){return eN}),n.d(t,"labelThemeLayer",function(){return tN}),n.d(t,"MapVLayer",function(){return SN}),n.d(t,"mapVLayer",function(){return _N}),n.d(t,"RangeThemeLayer",function(){return ZR}),n.d(t,"rangeThemeLayer",function(){return $R}),n.d(t,"RankSymbolThemeLayer",function(){return QN}),n.d(t,"rankSymbolThemeLayer",function(){return XN}),n.d(t,"TileVectorLayer",function(){return mI}),n.d(t,"tiledVectorLayer",function(){return vI}),n.d(t,"TurfLayer",function(){return bI}),n.d(t,"turfLayer",function(){return SI}),n.d(t,"UnicodeMarker",function(){return iN}),n.d(t,"unicodeMarker",function(){return oN}),n.d(t,"UniqueThemeLayer",function(){return XR}),n.d(t,"uniqueThemeLayer",function(){return KR}),n.d(t,"VectorTileFormat",function(){return pI}),n.d(t,"CartoCSSToLeaflet",function(){return VR}),n.d(t,"DefaultStyle",function(){return FR}),n.d(t,"CartoStyleMap",function(){return BR}),n.d(t,"ServerStyleMap",function(){return UR}),n.d(t,"CompOpMap",function(){return GR}),n.d(t,"ImageStyle",function(){return IN}),n.d(t,"imageStyle",function(){return DN}),n.d(t,"CircleStyle",function(){return RN}),n.d(t,"circleStyle",function(){return NN}),n.d(t,"Graphic",function(){return JR}),n.d(t,"graphic",function(){return HR}),n.d(t,"CloverStyle",function(){return LN}),n.d(t,"cloverStyle",function(){return jN}),n.d(t,"MapVRenderer",function(){return bN}),n.d(t,"GeoFeatureThemeLayer",function(){return QR}),n.d(t,"ThemeFeature",function(){return qR}),n.d(t,"themeFeature",function(){return WR}),n.d(t,"ThemeLayer",function(){return YR}),n.d(t,"CanvasRenderer",function(){return ZN}),n.d(t,"LineSymbolizer",function(){return aI}),n.d(t,"PointSymbolizer",function(){return iI}),n.d(t,"RegionSymbolizer",function(){return sI}),n.d(t,"SVGRenderer",function(){return KN}),n.d(t,"Symbolizer",function(){return eI}),n.d(t,"PolyBase",function(){return oI}),n.d(t,"TextSymbolizer",function(){return nI}),n.d(t,"VectorFeatureType",function(){return $N}),n.d(t,"VectorGrid",function(){return dI}),n.d(t,"VectorTile",function(){return yI}),n.d(t,"VectorTileJSON",function(){return hI}),n.d(t,"VectorTilePBF",function(){return fI}),n.d(t,"AddressMatchService",function(){return OI}),n.d(t,"addressMatchService",function(){return xI}),n.d(t,"ChartService",function(){return CI}),n.d(t,"chartService",function(){return PI}),n.d(t,"DataFlowService",function(){return lN}),n.d(t,"dataFlowService",function(){return uN}),n.d(t,"FeatureService",function(){return nN}),n.d(t,"featureService",function(){return rN}),n.d(t,"FieldService",function(){return TI}),n.d(t,"fieldService",function(){return EI}),n.d(t,"GridCellInfosService",function(){return kI}),n.d(t,"gridCellInfosService",function(){return MI}),n.d(t,"LayerInfoService",function(){return AI}),n.d(t,"layerInfoService",function(){return LI}),n.d(t,"MapService",function(){return uR}),n.d(t,"mapService",function(){return cR}),n.d(t,"MeasureService",function(){return jI}),n.d(t,"measureService",function(){return RI}),n.d(t,"NetworkAnalyst3DService",function(){return NI}),n.d(t,"networkAnalyst3DService",function(){return II}),n.d(t,"NetworkAnalystService",function(){return DI}),n.d(t,"networkAnalystService",function(){return FI}),n.d(t,"ProcessingService",function(){return BI}),n.d(t,"processingService",function(){return UI}),n.d(t,"QueryService",function(){return GI}),n.d(t,"queryService",function(){return zI}),n.d(t,"ServiceBase",function(){return lR}),n.d(t,"SpatialAnalystService",function(){return VI}),n.d(t,"spatialAnalystService",function(){return JI}),n.d(t,"ThemeService",function(){return HI}),n.d(t,"themeService",function(){return qI}),n.d(t,"TrafficTransferAnalystService",function(){return WI}),n.d(t,"trafficTransferAnalystService",function(){return YI}),n.d(t,"WebPrintingJobService",function(){return QI}),n.d(t,"webPrintingJobService",function(){return XI})},function(e,t,n){"use strict";n.r(t);n(26),n(32),n(37),n(42),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69)},function(e,t){},,,,,,function(e,t){},,,,,function(e,t){},,,,,function(e,t){},,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){}]);